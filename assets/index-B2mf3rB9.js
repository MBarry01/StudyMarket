function q6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function El(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var PT={exports:{}},Ax={},IT={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am=Symbol.for("react.element"),W6=Symbol.for("react.portal"),H6=Symbol.for("react.fragment"),G6=Symbol.for("react.strict_mode"),K6=Symbol.for("react.profiler"),Z6=Symbol.for("react.provider"),Y6=Symbol.for("react.context"),Q6=Symbol.for("react.forward_ref"),X6=Symbol.for("react.suspense"),J6=Symbol.for("react.memo"),eF=Symbol.for("react.lazy"),US=Symbol.iterator;function tF(t){return t===null||typeof t!="object"?null:(t=US&&t[US]||t["@@iterator"],typeof t=="function"?t:null)}var AT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RT=Object.assign,MT={};function Zd(t,e,n){this.props=t,this.context=e,this.refs=MT,this.updater=n||AT}Zd.prototype.isReactComponent={};Zd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function OT(){}OT.prototype=Zd.prototype;function zb(t,e,n){this.props=t,this.context=e,this.refs=MT,this.updater=n||AT}var Ub=zb.prototype=new OT;Ub.constructor=zb;RT(Ub,Zd.prototype);Ub.isPureReactComponent=!0;var $S=Array.isArray,DT=Object.prototype.hasOwnProperty,$b={current:null},LT={key:!0,ref:!0,__self:!0,__source:!0};function FT(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)DT.call(e,r)&&!LT.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Am,type:t,key:a,ref:o,props:i,_owner:$b.current}}function nF(t,e){return{$$typeof:Am,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bb(t){return typeof t=="object"&&t!==null&&t.$$typeof===Am}function rF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var BS=/\/+/g;function m0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rF(""+t.key):e.toString(36)}function Ag(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Am:case W6:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+m0(o,0):r,$S(i)?(n="",t!=null&&(n=t.replace(BS,"$&/")+"/"),Ag(i,e,n,"",function(d){return d})):i!=null&&(Bb(i)&&(i=nF(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(BS,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",$S(t))for(var c=0;c<t.length;c++){a=t[c];var u=r+m0(a,c);o+=Ag(a,e,n,u,i)}else if(u=tF(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=r+m0(a,c++),o+=Ag(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Zp(t,e,n){if(t==null)return t;var r=[],i=0;return Ag(t,r,"","",function(a){return e.call(n,a,i++)}),r}function sF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var es={current:null},Rg={transition:null},iF={ReactCurrentDispatcher:es,ReactCurrentBatchConfig:Rg,ReactCurrentOwner:$b};function VT(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:Zp,forEach:function(t,e,n){Zp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zp(t,function(){e++}),e},toArray:function(t){return Zp(t,function(e){return e})||[]},only:function(t){if(!Bb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};kt.Component=Zd;kt.Fragment=H6;kt.Profiler=K6;kt.PureComponent=zb;kt.StrictMode=G6;kt.Suspense=X6;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iF;kt.act=VT;kt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=RT({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=$b.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)DT.call(e,u)&&!LT.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Am,type:t.type,key:i,ref:a,props:r,_owner:o}};kt.createContext=function(t){return t={$$typeof:Y6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Z6,_context:t},t.Consumer=t};kt.createElement=FT;kt.createFactory=function(t){var e=FT.bind(null,t);return e.type=t,e};kt.createRef=function(){return{current:null}};kt.forwardRef=function(t){return{$$typeof:Q6,render:t}};kt.isValidElement=Bb;kt.lazy=function(t){return{$$typeof:eF,_payload:{_status:-1,_result:t},_init:sF}};kt.memo=function(t,e){return{$$typeof:J6,type:t,compare:e===void 0?null:e}};kt.startTransition=function(t){var e=Rg.transition;Rg.transition={};try{t()}finally{Rg.transition=e}};kt.unstable_act=VT;kt.useCallback=function(t,e){return es.current.useCallback(t,e)};kt.useContext=function(t){return es.current.useContext(t)};kt.useDebugValue=function(){};kt.useDeferredValue=function(t){return es.current.useDeferredValue(t)};kt.useEffect=function(t,e){return es.current.useEffect(t,e)};kt.useId=function(){return es.current.useId()};kt.useImperativeHandle=function(t,e,n){return es.current.useImperativeHandle(t,e,n)};kt.useInsertionEffect=function(t,e){return es.current.useInsertionEffect(t,e)};kt.useLayoutEffect=function(t,e){return es.current.useLayoutEffect(t,e)};kt.useMemo=function(t,e){return es.current.useMemo(t,e)};kt.useReducer=function(t,e,n){return es.current.useReducer(t,e,n)};kt.useRef=function(t){return es.current.useRef(t)};kt.useState=function(t){return es.current.useState(t)};kt.useSyncExternalStore=function(t,e,n){return es.current.useSyncExternalStore(t,e,n)};kt.useTransition=function(){return es.current.useTransition()};kt.version="18.3.1";IT.exports=kt;var x=IT.exports;const Fe=El(x),qb=q6({__proto__:null,default:Fe},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF=x,oF=Symbol.for("react.element"),lF=Symbol.for("react.fragment"),cF=Object.prototype.hasOwnProperty,uF=aF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dF={key:!0,ref:!0,__self:!0,__source:!0};function zT(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cF.call(e,r)&&!dF.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oF,type:t,key:a,ref:o,props:i,_owner:uF.current}}Ax.Fragment=lF;Ax.jsx=zT;Ax.jsxs=zT;PT.exports=Ax;var s=PT.exports,UT={exports:{}},Ls={},$T={exports:{}},BT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,z){var B=A.length;A.push(z);e:for(;0<B;){var X=B-1>>>1,de=A[X];if(0<i(de,z))A[X]=z,A[B]=de,B=X;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var z=A[0],B=A.pop();if(B!==z){A[0]=B;e:for(var X=0,de=A.length,ve=de>>>1;X<ve;){var be=2*(X+1)-1,Ee=A[be],Oe=be+1,Se=A[Oe];if(0>i(Ee,B))Oe<de&&0>i(Se,Ee)?(A[X]=Se,A[Oe]=B,X=Oe):(A[X]=Ee,A[be]=B,X=be);else if(Oe<de&&0>i(Se,B))A[X]=Se,A[Oe]=B,X=Oe;else break e}}return z}function i(A,z){var B=A.sortIndex-z.sortIndex;return B!==0?B:A.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,p=null,g=3,_=!1,N=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(A){for(var z=n(d);z!==null;){if(z.callback===null)r(d);else if(z.startTime<=A)r(d),z.sortIndex=z.expirationTime,e(u,z);else break;z=n(d)}}function I(A){if(b=!1,E(A),!N)if(n(u)!==null)N=!0,Z(O);else{var z=n(d);z!==null&&K(I,z.startTime-A)}}function O(A,z){N=!1,b&&(b=!1,w(V),V=-1),_=!0;var B=g;try{for(E(z),p=n(u);p!==null&&(!(p.expirationTime>z)||A&&!F());){var X=p.callback;if(typeof X=="function"){p.callback=null,g=p.priorityLevel;var de=X(p.expirationTime<=z);z=t.unstable_now(),typeof de=="function"?p.callback=de:p===n(u)&&r(u),E(z)}else r(u);p=n(u)}if(p!==null)var ve=!0;else{var be=n(d);be!==null&&K(I,be.startTime-z),ve=!1}return ve}finally{p=null,g=B,_=!1}}var q=!1,R=null,V=-1,U=5,k=-1;function F(){return!(t.unstable_now()-k<U)}function D(){if(R!==null){var A=t.unstable_now();k=A;var z=!0;try{z=R(!0,A)}finally{z?P():(q=!1,R=null)}}else q=!1}var P;if(typeof y=="function")P=function(){y(D)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,te=H.port2;H.port1.onmessage=D,P=function(){te.postMessage(null)}}else P=function(){S(D,0)};function Z(A){R=A,q||(q=!0,P())}function K(A,z){V=S(function(){A(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){N||_||(N=!0,Z(O))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(A){switch(g){case 1:case 2:case 3:var z=3;break;default:z=g}var B=g;g=z;try{return A()}finally{g=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,z){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var B=g;g=A;try{return z()}finally{g=B}},t.unstable_scheduleCallback=function(A,z,B){var X=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?X+B:X):B=X,A){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=B+de,A={id:f++,callback:z,priorityLevel:A,startTime:B,expirationTime:de,sortIndex:-1},B>X?(A.sortIndex=B,e(d,A),n(u)===null&&A===n(d)&&(b?(w(V),V=-1):b=!0,K(I,B-X))):(A.sortIndex=de,e(u,A),N||_||(N=!0,Z(O))),A},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(A){var z=g;return function(){var B=g;g=z;try{return A.apply(this,arguments)}finally{g=B}}}})(BT);$T.exports=BT;var hF=$T.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fF=x,Ms=hF;function Ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qT=new Set,Wf={};function $c(t,e){pd(t,e),pd(t+"Capture",e)}function pd(t,e){for(Wf[t]=e,t=0;t<e.length;t++)qT.add(e[t])}var Za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A_=Object.prototype.hasOwnProperty,mF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qS={},WS={};function pF(t){return A_.call(WS,t)?!0:A_.call(qS,t)?!1:mF.test(t)?WS[t]=!0:(qS[t]=!0,!1)}function gF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vF(t,e,n,r){if(e===null||typeof e>"u"||gF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ts(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jr[t]=new ts(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jr[e]=new ts(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jr[t]=new ts(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jr[t]=new ts(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jr[t]=new ts(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jr[t]=new ts(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jr[t]=new ts(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jr[t]=new ts(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jr[t]=new ts(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wb=/[\-:]([a-z])/g;function Hb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wb,Hb);jr[e]=new ts(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wb,Hb);jr[e]=new ts(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wb,Hb);jr[e]=new ts(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jr[t]=new ts(t,1,!1,t.toLowerCase(),null,!1,!1)});jr.xlinkHref=new ts("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jr[t]=new ts(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gb(t,e,n,r){var i=jr.hasOwnProperty(e)?jr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vF(e,n,i,r)&&(n=null),r||i===null?pF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ho=fF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yp=Symbol.for("react.element"),zu=Symbol.for("react.portal"),Uu=Symbol.for("react.fragment"),Kb=Symbol.for("react.strict_mode"),R_=Symbol.for("react.profiler"),WT=Symbol.for("react.provider"),HT=Symbol.for("react.context"),Zb=Symbol.for("react.forward_ref"),M_=Symbol.for("react.suspense"),O_=Symbol.for("react.suspense_list"),Yb=Symbol.for("react.memo"),Ro=Symbol.for("react.lazy"),GT=Symbol.for("react.offscreen"),HS=Symbol.iterator;function Gh(t){return t===null||typeof t!="object"?null:(t=HS&&t[HS]||t["@@iterator"],typeof t=="function"?t:null)}var Cn=Object.assign,p0;function hf(t){if(p0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);p0=e&&e[1]||""}return`
`+p0+t}var g0=!1;function v0(t,e){if(!t||g0)return"";g0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,c=a.length-1;1<=o&&0<=c&&i[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==a[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{g0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hf(t):""}function xF(t){switch(t.tag){case 5:return hf(t.type);case 16:return hf("Lazy");case 13:return hf("Suspense");case 19:return hf("SuspenseList");case 0:case 2:case 15:return t=v0(t.type,!1),t;case 11:return t=v0(t.type.render,!1),t;case 1:return t=v0(t.type,!0),t;default:return""}}function D_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Uu:return"Fragment";case zu:return"Portal";case R_:return"Profiler";case Kb:return"StrictMode";case M_:return"Suspense";case O_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case HT:return(t.displayName||"Context")+".Consumer";case WT:return(t._context.displayName||"Context")+".Provider";case Zb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yb:return e=t.displayName||null,e!==null?e:D_(t.type)||"Memo";case Ro:e=t._payload,t=t._init;try{return D_(t(e))}catch{}}return null}function yF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D_(e);case 8:return e===Kb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function KT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _F(t){var e=KT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qp(t){t._valueTracker||(t._valueTracker=_F(t))}function ZT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=KT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function uv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function L_(t,e){var n=e.checked;return Cn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function GS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=dl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YT(t,e){e=e.checked,e!=null&&Gb(t,"checked",e,!1)}function F_(t,e){YT(t,e);var n=dl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?V_(t,e.type,n):e.hasOwnProperty("defaultValue")&&V_(t,e.type,dl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function KS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function V_(t,e,n){(e!=="number"||uv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ff=Array.isArray;function Ju(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+dl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function z_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return Cn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ZS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ie(92));if(ff(n)){if(1<n.length)throw Error(Ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:dl(n)}}function QT(t,e){var n=dl(e.value),r=dl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function YS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function XT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function U_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?XT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xp,JT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xp=Xp||document.createElement("div"),Xp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ef={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wF=["Webkit","ms","Moz","O"];Object.keys(Ef).forEach(function(t){wF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ef[e]=Ef[t]})});function eP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ef.hasOwnProperty(t)&&Ef[t]?(""+e).trim():e+"px"}function tP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=eP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var bF=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $_(t,e){if(e){if(bF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ie(62))}}function B_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var q_=null;function Qb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var W_=null,ed=null,td=null;function QS(t){if(t=Om(t)){if(typeof W_!="function")throw Error(Ie(280));var e=t.stateNode;e&&(e=Lx(e),W_(t.stateNode,t.type,e))}}function nP(t){ed?td?td.push(t):td=[t]:ed=t}function rP(){if(ed){var t=ed,e=td;if(td=ed=null,QS(t),e)for(t=0;t<e.length;t++)QS(e[t])}}function sP(t,e){return t(e)}function iP(){}var x0=!1;function aP(t,e,n){if(x0)return t(e,n);x0=!0;try{return sP(t,e,n)}finally{x0=!1,(ed!==null||td!==null)&&(iP(),rP())}}function Gf(t,e){var n=t.stateNode;if(n===null)return null;var r=Lx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ie(231,e,typeof n));return n}var H_=!1;if(Za)try{var Kh={};Object.defineProperty(Kh,"passive",{get:function(){H_=!0}}),window.addEventListener("test",Kh,Kh),window.removeEventListener("test",Kh,Kh)}catch{H_=!1}function jF(t,e,n,r,i,a,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Cf=!1,dv=null,hv=!1,G_=null,NF={onError:function(t){Cf=!0,dv=t}};function SF(t,e,n,r,i,a,o,c,u){Cf=!1,dv=null,jF.apply(NF,arguments)}function EF(t,e,n,r,i,a,o,c,u){if(SF.apply(this,arguments),Cf){if(Cf){var d=dv;Cf=!1,dv=null}else throw Error(Ie(198));hv||(hv=!0,G_=d)}}function Bc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function XS(t){if(Bc(t)!==t)throw Error(Ie(188))}function CF(t){var e=t.alternate;if(!e){if(e=Bc(t),e===null)throw Error(Ie(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return XS(i),t;if(a===r)return XS(i),e;a=a.sibling}throw Error(Ie(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(Ie(189))}}if(n.alternate!==r)throw Error(Ie(190))}if(n.tag!==3)throw Error(Ie(188));return n.stateNode.current===n?t:e}function lP(t){return t=CF(t),t!==null?cP(t):null}function cP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cP(t);if(e!==null)return e;t=t.sibling}return null}var uP=Ms.unstable_scheduleCallback,JS=Ms.unstable_cancelCallback,kF=Ms.unstable_shouldYield,TF=Ms.unstable_requestPaint,Dn=Ms.unstable_now,PF=Ms.unstable_getCurrentPriorityLevel,Xb=Ms.unstable_ImmediatePriority,dP=Ms.unstable_UserBlockingPriority,fv=Ms.unstable_NormalPriority,IF=Ms.unstable_LowPriority,hP=Ms.unstable_IdlePriority,Rx=null,ra=null;function AF(t){if(ra&&typeof ra.onCommitFiberRoot=="function")try{ra.onCommitFiberRoot(Rx,t,void 0,(t.current.flags&128)===128)}catch{}}var ji=Math.clz32?Math.clz32:OF,RF=Math.log,MF=Math.LN2;function OF(t){return t>>>=0,t===0?32:31-(RF(t)/MF|0)|0}var Jp=64,eg=4194304;function mf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mv(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=mf(c):(a&=o,a!==0&&(r=mf(a)))}else o=n&~i,o!==0?r=mf(o):a!==0&&(r=mf(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ji(e),i=1<<n,r|=t[n],e&=~i;return r}function DF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-ji(a),c=1<<o,u=i[o];u===-1?(!(c&n)||c&r)&&(i[o]=DF(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}}function K_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fP(){var t=Jp;return Jp<<=1,!(Jp&4194240)&&(Jp=64),t}function y0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Rm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ji(e),t[e]=n}function FF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ji(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function Jb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ji(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Kt=0;function mP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pP,e1,gP,vP,xP,Z_=!1,tg=[],Qo=null,Xo=null,Jo=null,Kf=new Map,Zf=new Map,Lo=[],VF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e2(t,e){switch(t){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":Kf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zf.delete(e.pointerId)}}function Zh(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Om(e),e!==null&&e1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function zF(t,e,n,r,i){switch(e){case"focusin":return Qo=Zh(Qo,t,e,n,r,i),!0;case"dragenter":return Xo=Zh(Xo,t,e,n,r,i),!0;case"mouseover":return Jo=Zh(Jo,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Kf.set(a,Zh(Kf.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Zf.set(a,Zh(Zf.get(a)||null,t,e,n,r,i)),!0}return!1}function yP(t){var e=rc(t.target);if(e!==null){var n=Bc(e);if(n!==null){if(e=n.tag,e===13){if(e=oP(n),e!==null){t.blockedOn=e,xP(t.priority,function(){gP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Y_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);q_=r,n.target.dispatchEvent(r),q_=null}else return e=Om(n),e!==null&&e1(e),t.blockedOn=n,!1;e.shift()}return!0}function t2(t,e,n){Mg(t)&&n.delete(e)}function UF(){Z_=!1,Qo!==null&&Mg(Qo)&&(Qo=null),Xo!==null&&Mg(Xo)&&(Xo=null),Jo!==null&&Mg(Jo)&&(Jo=null),Kf.forEach(t2),Zf.forEach(t2)}function Yh(t,e){t.blockedOn===e&&(t.blockedOn=null,Z_||(Z_=!0,Ms.unstable_scheduleCallback(Ms.unstable_NormalPriority,UF)))}function Yf(t){function e(i){return Yh(i,t)}if(0<tg.length){Yh(tg[0],t);for(var n=1;n<tg.length;n++){var r=tg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qo!==null&&Yh(Qo,t),Xo!==null&&Yh(Xo,t),Jo!==null&&Yh(Jo,t),Kf.forEach(e),Zf.forEach(e),n=0;n<Lo.length;n++)r=Lo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Lo.length&&(n=Lo[0],n.blockedOn===null);)yP(n),n.blockedOn===null&&Lo.shift()}var nd=ho.ReactCurrentBatchConfig,pv=!0;function $F(t,e,n,r){var i=Kt,a=nd.transition;nd.transition=null;try{Kt=1,t1(t,e,n,r)}finally{Kt=i,nd.transition=a}}function BF(t,e,n,r){var i=Kt,a=nd.transition;nd.transition=null;try{Kt=4,t1(t,e,n,r)}finally{Kt=i,nd.transition=a}}function t1(t,e,n,r){if(pv){var i=Y_(t,e,n,r);if(i===null)T0(t,e,r,gv,n),e2(t,r);else if(zF(i,t,e,n,r))r.stopPropagation();else if(e2(t,r),e&4&&-1<VF.indexOf(t)){for(;i!==null;){var a=Om(i);if(a!==null&&pP(a),a=Y_(t,e,n,r),a===null&&T0(t,e,r,gv,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else T0(t,e,r,null,n)}}var gv=null;function Y_(t,e,n,r){if(gv=null,t=Qb(r),t=rc(t),t!==null)if(e=Bc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gv=t,null}function _P(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PF()){case Xb:return 1;case dP:return 4;case fv:case IF:return 16;case hP:return 536870912;default:return 16}default:return 16}}var Wo=null,n1=null,Og=null;function wP(){if(Og)return Og;var t,e=n1,n=e.length,r,i="value"in Wo?Wo.value:Wo.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return Og=i.slice(t,1<r?1-r:void 0)}function Dg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ng(){return!0}function n2(){return!1}function Fs(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ng:n2,this.isPropagationStopped=n2,this}return Cn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ng)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ng)},persist:function(){},isPersistent:ng}),e}var Yd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},r1=Fs(Yd),Mm=Cn({},Yd,{view:0,detail:0}),qF=Fs(Mm),_0,w0,Qh,Mx=Cn({},Mm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qh&&(Qh&&t.type==="mousemove"?(_0=t.screenX-Qh.screenX,w0=t.screenY-Qh.screenY):w0=_0=0,Qh=t),_0)},movementY:function(t){return"movementY"in t?t.movementY:w0}}),r2=Fs(Mx),WF=Cn({},Mx,{dataTransfer:0}),HF=Fs(WF),GF=Cn({},Mm,{relatedTarget:0}),b0=Fs(GF),KF=Cn({},Yd,{animationName:0,elapsedTime:0,pseudoElement:0}),ZF=Fs(KF),YF=Cn({},Yd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QF=Fs(YF),XF=Cn({},Yd,{data:0}),s2=Fs(XF),JF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tV[t])?!!e[t]:!1}function s1(){return nV}var rV=Cn({},Mm,{key:function(t){if(t.key){var e=JF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s1,charCode:function(t){return t.type==="keypress"?Dg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sV=Fs(rV),iV=Cn({},Mx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i2=Fs(iV),aV=Cn({},Mm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s1}),oV=Fs(aV),lV=Cn({},Yd,{propertyName:0,elapsedTime:0,pseudoElement:0}),cV=Fs(lV),uV=Cn({},Mx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dV=Fs(uV),hV=[9,13,27,32],i1=Za&&"CompositionEvent"in window,kf=null;Za&&"documentMode"in document&&(kf=document.documentMode);var fV=Za&&"TextEvent"in window&&!kf,bP=Za&&(!i1||kf&&8<kf&&11>=kf),a2=" ",o2=!1;function jP(t,e){switch(t){case"keyup":return hV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $u=!1;function mV(t,e){switch(t){case"compositionend":return NP(e);case"keypress":return e.which!==32?null:(o2=!0,a2);case"textInput":return t=e.data,t===a2&&o2?null:t;default:return null}}function pV(t,e){if($u)return t==="compositionend"||!i1&&jP(t,e)?(t=wP(),Og=n1=Wo=null,$u=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bP&&e.locale!=="ko"?null:e.data;default:return null}}var gV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gV[t.type]:e==="textarea"}function SP(t,e,n,r){nP(r),e=vv(e,"onChange"),0<e.length&&(n=new r1("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Tf=null,Qf=null;function vV(t){DP(t,0)}function Ox(t){var e=Wu(t);if(ZT(e))return t}function xV(t,e){if(t==="change")return e}var EP=!1;if(Za){var j0;if(Za){var N0="oninput"in document;if(!N0){var c2=document.createElement("div");c2.setAttribute("oninput","return;"),N0=typeof c2.oninput=="function"}j0=N0}else j0=!1;EP=j0&&(!document.documentMode||9<document.documentMode)}function u2(){Tf&&(Tf.detachEvent("onpropertychange",CP),Qf=Tf=null)}function CP(t){if(t.propertyName==="value"&&Ox(Qf)){var e=[];SP(e,Qf,t,Qb(t)),aP(vV,e)}}function yV(t,e,n){t==="focusin"?(u2(),Tf=e,Qf=n,Tf.attachEvent("onpropertychange",CP)):t==="focusout"&&u2()}function _V(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ox(Qf)}function wV(t,e){if(t==="click")return Ox(e)}function bV(t,e){if(t==="input"||t==="change")return Ox(e)}function jV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ti=typeof Object.is=="function"?Object.is:jV;function Xf(t,e){if(Ti(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!A_.call(e,i)||!Ti(t[i],e[i]))return!1}return!0}function d2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h2(t,e){var n=d2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=d2(n)}}function kP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function TP(){for(var t=window,e=uv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uv(t.document)}return e}function a1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NV(t){var e=TP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kP(n.ownerDocument.documentElement,n)){if(r!==null&&a1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=h2(n,a);var o=h2(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SV=Za&&"documentMode"in document&&11>=document.documentMode,Bu=null,Q_=null,Pf=null,X_=!1;function f2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;X_||Bu==null||Bu!==uv(r)||(r=Bu,"selectionStart"in r&&a1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pf&&Xf(Pf,r)||(Pf=r,r=vv(Q_,"onSelect"),0<r.length&&(e=new r1("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Bu)))}function rg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qu={animationend:rg("Animation","AnimationEnd"),animationiteration:rg("Animation","AnimationIteration"),animationstart:rg("Animation","AnimationStart"),transitionend:rg("Transition","TransitionEnd")},S0={},PP={};Za&&(PP=document.createElement("div").style,"AnimationEvent"in window||(delete qu.animationend.animation,delete qu.animationiteration.animation,delete qu.animationstart.animation),"TransitionEvent"in window||delete qu.transitionend.transition);function Dx(t){if(S0[t])return S0[t];if(!qu[t])return t;var e=qu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in PP)return S0[t]=e[n];return t}var IP=Dx("animationend"),AP=Dx("animationiteration"),RP=Dx("animationstart"),MP=Dx("transitionend"),OP=new Map,m2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cl(t,e){OP.set(t,e),$c(e,[t])}for(var E0=0;E0<m2.length;E0++){var C0=m2[E0],EV=C0.toLowerCase(),CV=C0[0].toUpperCase()+C0.slice(1);Cl(EV,"on"+CV)}Cl(IP,"onAnimationEnd");Cl(AP,"onAnimationIteration");Cl(RP,"onAnimationStart");Cl("dblclick","onDoubleClick");Cl("focusin","onFocus");Cl("focusout","onBlur");Cl(MP,"onTransitionEnd");pd("onMouseEnter",["mouseout","mouseover"]);pd("onMouseLeave",["mouseout","mouseover"]);pd("onPointerEnter",["pointerout","pointerover"]);pd("onPointerLeave",["pointerout","pointerover"]);$c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$c("onBeforeInput",["compositionend","keypress","textInput","paste"]);$c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kV=new Set("cancel close invalid load scroll toggle".split(" ").concat(pf));function p2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,EF(r,e,void 0,t),t.currentTarget=null}function DP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==a&&i.isPropagationStopped())break e;p2(i,c,d),a=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==a&&i.isPropagationStopped())break e;p2(i,c,d),a=u}}}if(hv)throw t=G_,hv=!1,G_=null,t}function dn(t,e){var n=e[rw];n===void 0&&(n=e[rw]=new Set);var r=t+"__bubble";n.has(r)||(LP(e,t,2,!1),n.add(r))}function k0(t,e,n){var r=0;e&&(r|=4),LP(n,t,r,e)}var sg="_reactListening"+Math.random().toString(36).slice(2);function Jf(t){if(!t[sg]){t[sg]=!0,qT.forEach(function(n){n!=="selectionchange"&&(kV.has(n)||k0(n,!1,t),k0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sg]||(e[sg]=!0,k0("selectionchange",!1,e))}}function LP(t,e,n,r){switch(_P(e)){case 1:var i=$F;break;case 4:i=BF;break;default:i=t1}n=i.bind(null,e,n,t),i=void 0,!H_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function T0(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=rc(c),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}c=c.parentNode}}r=r.return}aP(function(){var d=a,f=Qb(n),p=[];e:{var g=OP.get(t);if(g!==void 0){var _=r1,N=t;switch(t){case"keypress":if(Dg(n)===0)break e;case"keydown":case"keyup":_=sV;break;case"focusin":N="focus",_=b0;break;case"focusout":N="blur",_=b0;break;case"beforeblur":case"afterblur":_=b0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=r2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=HF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=oV;break;case IP:case AP:case RP:_=ZF;break;case MP:_=cV;break;case"scroll":_=qF;break;case"wheel":_=dV;break;case"copy":case"cut":case"paste":_=QF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=i2}var b=(e&4)!==0,S=!b&&t==="scroll",w=b?g!==null?g+"Capture":null:g;b=[];for(var y=d,E;y!==null;){E=y;var I=E.stateNode;if(E.tag===5&&I!==null&&(E=I,w!==null&&(I=Gf(y,w),I!=null&&b.push(em(y,I,E)))),S)break;y=y.return}0<b.length&&(g=new _(g,N,null,n,f),p.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==q_&&(N=n.relatedTarget||n.fromElement)&&(rc(N)||N[Ya]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(N=n.relatedTarget||n.toElement,_=d,N=N?rc(N):null,N!==null&&(S=Bc(N),N!==S||N.tag!==5&&N.tag!==6)&&(N=null)):(_=null,N=d),_!==N)){if(b=r2,I="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(b=i2,I="onPointerLeave",w="onPointerEnter",y="pointer"),S=_==null?g:Wu(_),E=N==null?g:Wu(N),g=new b(I,y+"leave",_,n,f),g.target=S,g.relatedTarget=E,I=null,rc(f)===d&&(b=new b(w,y+"enter",N,n,f),b.target=E,b.relatedTarget=S,I=b),S=I,_&&N)t:{for(b=_,w=N,y=0,E=b;E;E=Cu(E))y++;for(E=0,I=w;I;I=Cu(I))E++;for(;0<y-E;)b=Cu(b),y--;for(;0<E-y;)w=Cu(w),E--;for(;y--;){if(b===w||w!==null&&b===w.alternate)break t;b=Cu(b),w=Cu(w)}b=null}else b=null;_!==null&&g2(p,g,_,b,!1),N!==null&&S!==null&&g2(p,S,N,b,!0)}}e:{if(g=d?Wu(d):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var O=xV;else if(l2(g))if(EP)O=bV;else{O=_V;var q=yV}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=wV);if(O&&(O=O(t,d))){SP(p,O,n,f);break e}q&&q(t,g,d),t==="focusout"&&(q=g._wrapperState)&&q.controlled&&g.type==="number"&&V_(g,"number",g.value)}switch(q=d?Wu(d):window,t){case"focusin":(l2(q)||q.contentEditable==="true")&&(Bu=q,Q_=d,Pf=null);break;case"focusout":Pf=Q_=Bu=null;break;case"mousedown":X_=!0;break;case"contextmenu":case"mouseup":case"dragend":X_=!1,f2(p,n,f);break;case"selectionchange":if(SV)break;case"keydown":case"keyup":f2(p,n,f)}var R;if(i1)e:{switch(t){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else $u?jP(t,n)&&(V="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(bP&&n.locale!=="ko"&&($u||V!=="onCompositionStart"?V==="onCompositionEnd"&&$u&&(R=wP()):(Wo=f,n1="value"in Wo?Wo.value:Wo.textContent,$u=!0)),q=vv(d,V),0<q.length&&(V=new s2(V,t,null,n,f),p.push({event:V,listeners:q}),R?V.data=R:(R=NP(n),R!==null&&(V.data=R)))),(R=fV?mV(t,n):pV(t,n))&&(d=vv(d,"onBeforeInput"),0<d.length&&(f=new s2("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=R))}DP(p,e)})}function em(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vv(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Gf(t,n),a!=null&&r.unshift(em(t,a,i)),a=Gf(t,e),a!=null&&r.push(em(t,a,i))),t=t.return}return r}function Cu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function g2(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,i?(u=Gf(n,a),u!=null&&o.unshift(em(n,u,c))):i||(u=Gf(n,a),u!=null&&o.push(em(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var TV=/\r\n?/g,PV=/\u0000|\uFFFD/g;function v2(t){return(typeof t=="string"?t:""+t).replace(TV,`
`).replace(PV,"")}function ig(t,e,n){if(e=v2(e),v2(t)!==e&&n)throw Error(Ie(425))}function xv(){}var J_=null,ew=null;function tw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nw=typeof setTimeout=="function"?setTimeout:void 0,IV=typeof clearTimeout=="function"?clearTimeout:void 0,x2=typeof Promise=="function"?Promise:void 0,AV=typeof queueMicrotask=="function"?queueMicrotask:typeof x2<"u"?function(t){return x2.resolve(null).then(t).catch(RV)}:nw;function RV(t){setTimeout(function(){throw t})}function P0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Yf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Yf(e)}function el(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function y2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qd=Math.random().toString(36).slice(2),Ki="__reactFiber$"+Qd,tm="__reactProps$"+Qd,Ya="__reactContainer$"+Qd,rw="__reactEvents$"+Qd,MV="__reactListeners$"+Qd,OV="__reactHandles$"+Qd;function rc(t){var e=t[Ki];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ya]||n[Ki]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=y2(t);t!==null;){if(n=t[Ki])return n;t=y2(t)}return e}t=n,n=t.parentNode}return null}function Om(t){return t=t[Ki]||t[Ya],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ie(33))}function Lx(t){return t[tm]||null}var sw=[],Hu=-1;function kl(t){return{current:t}}function fn(t){0>Hu||(t.current=sw[Hu],sw[Hu]=null,Hu--)}function an(t,e){Hu++,sw[Hu]=t.current,t.current=e}var hl={},Fr=kl(hl),ms=kl(!1),bc=hl;function gd(t,e){var n=t.type.contextTypes;if(!n)return hl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ps(t){return t=t.childContextTypes,t!=null}function yv(){fn(ms),fn(Fr)}function _2(t,e,n){if(Fr.current!==hl)throw Error(Ie(168));an(Fr,e),an(ms,n)}function FP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ie(108,yF(t)||"Unknown",i));return Cn({},n,r)}function _v(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hl,bc=Fr.current,an(Fr,t),an(ms,ms.current),!0}function w2(t,e,n){var r=t.stateNode;if(!r)throw Error(Ie(169));n?(t=FP(t,e,bc),r.__reactInternalMemoizedMergedChildContext=t,fn(ms),fn(Fr),an(Fr,t)):fn(ms),an(ms,n)}var Va=null,Fx=!1,I0=!1;function VP(t){Va===null?Va=[t]:Va.push(t)}function DV(t){Fx=!0,VP(t)}function Tl(){if(!I0&&Va!==null){I0=!0;var t=0,e=Kt;try{var n=Va;for(Kt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Va=null,Fx=!1}catch(i){throw Va!==null&&(Va=Va.slice(t+1)),uP(Xb,Tl),i}finally{Kt=e,I0=!1}}return null}var Gu=[],Ku=0,wv=null,bv=0,Gs=[],Ks=0,jc=null,Ua=1,$a="";function Jl(t,e){Gu[Ku++]=bv,Gu[Ku++]=wv,wv=t,bv=e}function zP(t,e,n){Gs[Ks++]=Ua,Gs[Ks++]=$a,Gs[Ks++]=jc,jc=t;var r=Ua;t=$a;var i=32-ji(r)-1;r&=~(1<<i),n+=1;var a=32-ji(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ua=1<<32-ji(e)+i|n<<i|r,$a=a+t}else Ua=1<<a|n<<i|r,$a=t}function o1(t){t.return!==null&&(Jl(t,1),zP(t,1,0))}function l1(t){for(;t===wv;)wv=Gu[--Ku],Gu[Ku]=null,bv=Gu[--Ku],Gu[Ku]=null;for(;t===jc;)jc=Gs[--Ks],Gs[Ks]=null,$a=Gs[--Ks],Gs[Ks]=null,Ua=Gs[--Ks],Gs[Ks]=null}var Ps=null,Cs=null,xn=!1,_i=null;function UP(t,e){var n=Ys(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function b2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ps=t,Cs=el(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ps=t,Cs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=jc!==null?{id:Ua,overflow:$a}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ys(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ps=t,Cs=null,!0):!1;default:return!1}}function iw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aw(t){if(xn){var e=Cs;if(e){var n=e;if(!b2(t,e)){if(iw(t))throw Error(Ie(418));e=el(n.nextSibling);var r=Ps;e&&b2(t,e)?UP(r,n):(t.flags=t.flags&-4097|2,xn=!1,Ps=t)}}else{if(iw(t))throw Error(Ie(418));t.flags=t.flags&-4097|2,xn=!1,Ps=t}}}function j2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ps=t}function ag(t){if(t!==Ps)return!1;if(!xn)return j2(t),xn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tw(t.type,t.memoizedProps)),e&&(e=Cs)){if(iw(t))throw $P(),Error(Ie(418));for(;e;)UP(t,e),e=el(e.nextSibling)}if(j2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cs=el(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cs=null}}else Cs=Ps?el(t.stateNode.nextSibling):null;return!0}function $P(){for(var t=Cs;t;)t=el(t.nextSibling)}function vd(){Cs=Ps=null,xn=!1}function c1(t){_i===null?_i=[t]:_i.push(t)}var LV=ho.ReactCurrentBatchConfig;function Xh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ie(309));var r=n.stateNode}if(!r)throw Error(Ie(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=i.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Ie(284));if(!n._owner)throw Error(Ie(290,t))}return t}function og(t,e){throw t=Object.prototype.toString.call(e),Error(Ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function N2(t){var e=t._init;return e(t._payload)}function BP(t){function e(w,y){if(t){var E=w.deletions;E===null?(w.deletions=[y],w.flags|=16):E.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function i(w,y){return w=sl(w,y),w.index=0,w.sibling=null,w}function a(w,y,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<y?(w.flags|=2,y):E):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function c(w,y,E,I){return y===null||y.tag!==6?(y=F0(E,w.mode,I),y.return=w,y):(y=i(y,E),y.return=w,y)}function u(w,y,E,I){var O=E.type;return O===Uu?f(w,y,E.props.children,I,E.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ro&&N2(O)===y.type)?(I=i(y,E.props),I.ref=Xh(w,y,E),I.return=w,I):(I=Bg(E.type,E.key,E.props,null,w.mode,I),I.ref=Xh(w,y,E),I.return=w,I)}function d(w,y,E,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=V0(E,w.mode,I),y.return=w,y):(y=i(y,E.children||[]),y.return=w,y)}function f(w,y,E,I,O){return y===null||y.tag!==7?(y=hc(E,w.mode,I,O),y.return=w,y):(y=i(y,E),y.return=w,y)}function p(w,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=F0(""+y,w.mode,E),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Yp:return E=Bg(y.type,y.key,y.props,null,w.mode,E),E.ref=Xh(w,null,y),E.return=w,E;case zu:return y=V0(y,w.mode,E),y.return=w,y;case Ro:var I=y._init;return p(w,I(y._payload),E)}if(ff(y)||Gh(y))return y=hc(y,w.mode,E,null),y.return=w,y;og(w,y)}return null}function g(w,y,E,I){var O=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:c(w,y,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Yp:return E.key===O?u(w,y,E,I):null;case zu:return E.key===O?d(w,y,E,I):null;case Ro:return O=E._init,g(w,y,O(E._payload),I)}if(ff(E)||Gh(E))return O!==null?null:f(w,y,E,I,null);og(w,E)}return null}function _(w,y,E,I,O){if(typeof I=="string"&&I!==""||typeof I=="number")return w=w.get(E)||null,c(y,w,""+I,O);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Yp:return w=w.get(I.key===null?E:I.key)||null,u(y,w,I,O);case zu:return w=w.get(I.key===null?E:I.key)||null,d(y,w,I,O);case Ro:var q=I._init;return _(w,y,E,q(I._payload),O)}if(ff(I)||Gh(I))return w=w.get(E)||null,f(y,w,I,O,null);og(y,I)}return null}function N(w,y,E,I){for(var O=null,q=null,R=y,V=y=0,U=null;R!==null&&V<E.length;V++){R.index>V?(U=R,R=null):U=R.sibling;var k=g(w,R,E[V],I);if(k===null){R===null&&(R=U);break}t&&R&&k.alternate===null&&e(w,R),y=a(k,y,V),q===null?O=k:q.sibling=k,q=k,R=U}if(V===E.length)return n(w,R),xn&&Jl(w,V),O;if(R===null){for(;V<E.length;V++)R=p(w,E[V],I),R!==null&&(y=a(R,y,V),q===null?O=R:q.sibling=R,q=R);return xn&&Jl(w,V),O}for(R=r(w,R);V<E.length;V++)U=_(R,w,V,E[V],I),U!==null&&(t&&U.alternate!==null&&R.delete(U.key===null?V:U.key),y=a(U,y,V),q===null?O=U:q.sibling=U,q=U);return t&&R.forEach(function(F){return e(w,F)}),xn&&Jl(w,V),O}function b(w,y,E,I){var O=Gh(E);if(typeof O!="function")throw Error(Ie(150));if(E=O.call(E),E==null)throw Error(Ie(151));for(var q=O=null,R=y,V=y=0,U=null,k=E.next();R!==null&&!k.done;V++,k=E.next()){R.index>V?(U=R,R=null):U=R.sibling;var F=g(w,R,k.value,I);if(F===null){R===null&&(R=U);break}t&&R&&F.alternate===null&&e(w,R),y=a(F,y,V),q===null?O=F:q.sibling=F,q=F,R=U}if(k.done)return n(w,R),xn&&Jl(w,V),O;if(R===null){for(;!k.done;V++,k=E.next())k=p(w,k.value,I),k!==null&&(y=a(k,y,V),q===null?O=k:q.sibling=k,q=k);return xn&&Jl(w,V),O}for(R=r(w,R);!k.done;V++,k=E.next())k=_(R,w,V,k.value,I),k!==null&&(t&&k.alternate!==null&&R.delete(k.key===null?V:k.key),y=a(k,y,V),q===null?O=k:q.sibling=k,q=k);return t&&R.forEach(function(D){return e(w,D)}),xn&&Jl(w,V),O}function S(w,y,E,I){if(typeof E=="object"&&E!==null&&E.type===Uu&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Yp:e:{for(var O=E.key,q=y;q!==null;){if(q.key===O){if(O=E.type,O===Uu){if(q.tag===7){n(w,q.sibling),y=i(q,E.props.children),y.return=w,w=y;break e}}else if(q.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ro&&N2(O)===q.type){n(w,q.sibling),y=i(q,E.props),y.ref=Xh(w,q,E),y.return=w,w=y;break e}n(w,q);break}else e(w,q);q=q.sibling}E.type===Uu?(y=hc(E.props.children,w.mode,I,E.key),y.return=w,w=y):(I=Bg(E.type,E.key,E.props,null,w.mode,I),I.ref=Xh(w,y,E),I.return=w,w=I)}return o(w);case zu:e:{for(q=E.key;y!==null;){if(y.key===q)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(w,y.sibling),y=i(y,E.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=V0(E,w.mode,I),y.return=w,w=y}return o(w);case Ro:return q=E._init,S(w,y,q(E._payload),I)}if(ff(E))return N(w,y,E,I);if(Gh(E))return b(w,y,E,I);og(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(w,y.sibling),y=i(y,E),y.return=w,w=y):(n(w,y),y=F0(E,w.mode,I),y.return=w,w=y),o(w)):n(w,y)}return S}var xd=BP(!0),qP=BP(!1),jv=kl(null),Nv=null,Zu=null,u1=null;function d1(){u1=Zu=Nv=null}function h1(t){var e=jv.current;fn(jv),t._currentValue=e}function ow(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function rd(t,e){Nv=t,u1=Zu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ds=!0),t.firstContext=null)}function si(t){var e=t._currentValue;if(u1!==t)if(t={context:t,memoizedValue:e,next:null},Zu===null){if(Nv===null)throw Error(Ie(308));Zu=t,Nv.dependencies={lanes:0,firstContext:t}}else Zu=Zu.next=t;return e}var sc=null;function f1(t){sc===null?sc=[t]:sc.push(t)}function WP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,f1(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qa(t,r)}function Qa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mo=!1;function m1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ha(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ot&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qa(t,n)}return i=r.interleaved,i===null?(e.next=e,f1(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qa(t,n)}function Lg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jb(t,n)}}function S2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sv(t,e,n,r){var i=t.updateQueue;Mo=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(a!==null){var p=i.baseState;o=0,f=d=u=null,c=a;do{var g=c.lane,_=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:_,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=t,b=c;switch(g=e,_=n,b.tag){case 1:if(N=b.payload,typeof N=="function"){p=N.call(_,p,g);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=b.payload,g=typeof N=="function"?N.call(_,p,g):N,g==null)break e;p=Cn({},p,g);break e;case 2:Mo=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[c]:g.push(c))}else _={eventTime:_,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=_,u=p):f=f.next=_,o|=g;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;g=c,c=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Sc|=o,t.lanes=o,t.memoizedState=p}}function E2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ie(191,i));i.call(r)}}}var Dm={},sa=kl(Dm),nm=kl(Dm),rm=kl(Dm);function ic(t){if(t===Dm)throw Error(Ie(174));return t}function p1(t,e){switch(an(rm,e),an(nm,t),an(sa,Dm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:U_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=U_(e,t)}fn(sa),an(sa,e)}function yd(){fn(sa),fn(nm),fn(rm)}function GP(t){ic(rm.current);var e=ic(sa.current),n=U_(e,t.type);e!==n&&(an(nm,t),an(sa,n))}function g1(t){nm.current===t&&(fn(sa),fn(nm))}var Sn=kl(0);function Ev(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var A0=[];function v1(){for(var t=0;t<A0.length;t++)A0[t]._workInProgressVersionPrimary=null;A0.length=0}var Fg=ho.ReactCurrentDispatcher,R0=ho.ReactCurrentBatchConfig,Nc=0,En=null,ir=null,fr=null,Cv=!1,If=!1,sm=0,FV=0;function Cr(){throw Error(Ie(321))}function x1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ti(t[n],e[n]))return!1;return!0}function y1(t,e,n,r,i,a){if(Nc=a,En=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fg.current=t===null||t.memoizedState===null?$V:BV,t=n(r,i),If){a=0;do{if(If=!1,sm=0,25<=a)throw Error(Ie(301));a+=1,fr=ir=null,e.updateQueue=null,Fg.current=qV,t=n(r,i)}while(If)}if(Fg.current=kv,e=ir!==null&&ir.next!==null,Nc=0,fr=ir=En=null,Cv=!1,e)throw Error(Ie(300));return t}function _1(){var t=sm!==0;return sm=0,t}function qi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?En.memoizedState=fr=t:fr=fr.next=t,fr}function ii(){if(ir===null){var t=En.alternate;t=t!==null?t.memoizedState:null}else t=ir.next;var e=fr===null?En.memoizedState:fr.next;if(e!==null)fr=e,ir=t;else{if(t===null)throw Error(Ie(310));ir=t,t={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},fr===null?En.memoizedState=fr=t:fr=fr.next=t}return fr}function im(t,e){return typeof e=="function"?e(t):e}function M0(t){var e=ii(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=ir,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var c=o=null,u=null,d=a;do{var f=d.lane;if((Nc&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,En.lanes|=f,Sc|=f}d=d.next}while(d!==null&&d!==a);u===null?o=r:u.next=c,Ti(r,e.memoizedState)||(ds=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,En.lanes|=a,Sc|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function O0(t){var e=ii(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Ti(a,e.memoizedState)||(ds=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function KP(){}function ZP(t,e){var n=En,r=ii(),i=e(),a=!Ti(r.memoizedState,i);if(a&&(r.memoizedState=i,ds=!0),r=r.queue,w1(XP.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||fr!==null&&fr.memoizedState.tag&1){if(n.flags|=2048,am(9,QP.bind(null,n,r,i,e),void 0,null),pr===null)throw Error(Ie(349));Nc&30||YP(n,e,i)}return i}function YP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QP(t,e,n,r){e.value=n,e.getSnapshot=r,JP(e)&&eI(t)}function XP(t,e,n){return n(function(){JP(e)&&eI(t)})}function JP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ti(t,n)}catch{return!0}}function eI(t){var e=Qa(t,1);e!==null&&Ni(e,t,1,-1)}function C2(t){var e=qi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:im,lastRenderedState:t},e.queue=t,t=t.dispatch=UV.bind(null,En,t),[e.memoizedState,t]}function am(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tI(){return ii().memoizedState}function Vg(t,e,n,r){var i=qi();En.flags|=t,i.memoizedState=am(1|e,n,void 0,r===void 0?null:r)}function Vx(t,e,n,r){var i=ii();r=r===void 0?null:r;var a=void 0;if(ir!==null){var o=ir.memoizedState;if(a=o.destroy,r!==null&&x1(r,o.deps)){i.memoizedState=am(e,n,a,r);return}}En.flags|=t,i.memoizedState=am(1|e,n,a,r)}function k2(t,e){return Vg(8390656,8,t,e)}function w1(t,e){return Vx(2048,8,t,e)}function nI(t,e){return Vx(4,2,t,e)}function rI(t,e){return Vx(4,4,t,e)}function sI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iI(t,e,n){return n=n!=null?n.concat([t]):null,Vx(4,4,sI.bind(null,e,t),n)}function b1(){}function aI(t,e){var n=ii();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function oI(t,e){var n=ii();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function lI(t,e,n){return Nc&21?(Ti(n,e)||(n=fP(),En.lanes|=n,Sc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ds=!0),t.memoizedState=n)}function VV(t,e){var n=Kt;Kt=n!==0&&4>n?n:4,t(!0);var r=R0.transition;R0.transition={};try{t(!1),e()}finally{Kt=n,R0.transition=r}}function cI(){return ii().memoizedState}function zV(t,e,n){var r=rl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uI(t))dI(e,n);else if(n=WP(t,e,n,r),n!==null){var i=Yr();Ni(n,t,r,i),hI(n,e,r)}}function UV(t,e,n){var r=rl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uI(t))dI(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,n);if(i.hasEagerState=!0,i.eagerState=c,Ti(c,o)){var u=e.interleaved;u===null?(i.next=i,f1(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=WP(t,e,i,r),n!==null&&(i=Yr(),Ni(n,t,r,i),hI(n,e,r))}}function uI(t){var e=t.alternate;return t===En||e!==null&&e===En}function dI(t,e){If=Cv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jb(t,n)}}var kv={readContext:si,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},$V={readContext:si,useCallback:function(t,e){return qi().memoizedState=[t,e===void 0?null:e],t},useContext:si,useEffect:k2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vg(4194308,4,sI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vg(4,2,t,e)},useMemo:function(t,e){var n=qi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zV.bind(null,En,t),[r.memoizedState,t]},useRef:function(t){var e=qi();return t={current:t},e.memoizedState=t},useState:C2,useDebugValue:b1,useDeferredValue:function(t){return qi().memoizedState=t},useTransition:function(){var t=C2(!1),e=t[0];return t=VV.bind(null,t[1]),qi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=En,i=qi();if(xn){if(n===void 0)throw Error(Ie(407));n=n()}else{if(n=e(),pr===null)throw Error(Ie(349));Nc&30||YP(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,k2(XP.bind(null,r,a,t),[t]),r.flags|=2048,am(9,QP.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=qi(),e=pr.identifierPrefix;if(xn){var n=$a,r=Ua;n=(r&~(1<<32-ji(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=sm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=FV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BV={readContext:si,useCallback:aI,useContext:si,useEffect:w1,useImperativeHandle:iI,useInsertionEffect:nI,useLayoutEffect:rI,useMemo:oI,useReducer:M0,useRef:tI,useState:function(){return M0(im)},useDebugValue:b1,useDeferredValue:function(t){var e=ii();return lI(e,ir.memoizedState,t)},useTransition:function(){var t=M0(im)[0],e=ii().memoizedState;return[t,e]},useMutableSource:KP,useSyncExternalStore:ZP,useId:cI,unstable_isNewReconciler:!1},qV={readContext:si,useCallback:aI,useContext:si,useEffect:w1,useImperativeHandle:iI,useInsertionEffect:nI,useLayoutEffect:rI,useMemo:oI,useReducer:O0,useRef:tI,useState:function(){return O0(im)},useDebugValue:b1,useDeferredValue:function(t){var e=ii();return ir===null?e.memoizedState=t:lI(e,ir.memoizedState,t)},useTransition:function(){var t=O0(im)[0],e=ii().memoizedState;return[t,e]},useMutableSource:KP,useSyncExternalStore:ZP,useId:cI,unstable_isNewReconciler:!1};function vi(t,e){if(t&&t.defaultProps){e=Cn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function lw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Cn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zx={isMounted:function(t){return(t=t._reactInternals)?Bc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yr(),i=rl(t),a=Ha(r,i);a.payload=e,n!=null&&(a.callback=n),e=tl(t,a,i),e!==null&&(Ni(e,t,i,r),Lg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yr(),i=rl(t),a=Ha(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=tl(t,a,i),e!==null&&(Ni(e,t,i,r),Lg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yr(),r=rl(t),i=Ha(n,r);i.tag=2,e!=null&&(i.callback=e),e=tl(t,i,r),e!==null&&(Ni(e,t,r,n),Lg(e,t,r))}};function T2(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Xf(n,r)||!Xf(i,a):!0}function fI(t,e,n){var r=!1,i=hl,a=e.contextType;return typeof a=="object"&&a!==null?a=si(a):(i=ps(e)?bc:Fr.current,r=e.contextTypes,a=(r=r!=null)?gd(t,i):hl),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function P2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zx.enqueueReplaceState(e,e.state,null)}function cw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},m1(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=si(a):(a=ps(e)?bc:Fr.current,i.context=gd(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(lw(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zx.enqueueReplaceState(i,i.state,null),Sv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _d(t,e){try{var n="",r=e;do n+=xF(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function D0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WV=typeof WeakMap=="function"?WeakMap:Map;function mI(t,e,n){n=Ha(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pv||(Pv=!0,_w=r),uw(t,e)},n}function pI(t,e,n){n=Ha(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){uw(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){uw(t,e),typeof r!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function I2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WV;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=i8.bind(null,t,e,n),e.then(t,t))}function A2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function R2(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ha(-1,1),e.tag=2,tl(n,e,1))),n.lanes|=1),t)}var HV=ho.ReactCurrentOwner,ds=!1;function Hr(t,e,n,r){e.child=t===null?qP(e,null,n,r):xd(e,t.child,n,r)}function M2(t,e,n,r,i){n=n.render;var a=e.ref;return rd(e,i),r=y1(t,e,n,r,a,i),n=_1(),t!==null&&!ds?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xa(t,e,i)):(xn&&n&&o1(e),e.flags|=1,Hr(t,e,r,i),e.child)}function O2(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!P1(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,gI(t,e,a,r,i)):(t=Bg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Xf,n(o,r)&&t.ref===e.ref)return Xa(t,e,i)}return e.flags|=1,t=sl(a,r),t.ref=e.ref,t.return=e,e.child=t}function gI(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Xf(a,r)&&t.ref===e.ref)if(ds=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(ds=!0);else return e.lanes=t.lanes,Xa(t,e,i)}return dw(t,e,n,r,i)}function vI(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(Qu,Ss),Ss|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,an(Qu,Ss),Ss|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,an(Qu,Ss),Ss|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,an(Qu,Ss),Ss|=r;return Hr(t,e,i,n),e.child}function xI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dw(t,e,n,r,i){var a=ps(n)?bc:Fr.current;return a=gd(e,a),rd(e,i),n=y1(t,e,n,r,a,i),r=_1(),t!==null&&!ds?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xa(t,e,i)):(xn&&r&&o1(e),e.flags|=1,Hr(t,e,n,i),e.child)}function D2(t,e,n,r,i){if(ps(n)){var a=!0;_v(e)}else a=!1;if(rd(e,i),e.stateNode===null)zg(t,e),fI(e,n,r),cw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=si(d):(d=ps(n)?bc:Fr.current,d=gd(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&P2(e,o,r,d),Mo=!1;var g=e.memoizedState;o.state=g,Sv(e,r,o,i),u=e.memoizedState,c!==r||g!==u||ms.current||Mo?(typeof f=="function"&&(lw(e,n,f,r),u=e.memoizedState),(c=Mo||T2(e,n,c,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,HP(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:vi(e.type,c),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=si(u):(u=ps(n)?bc:Fr.current,u=gd(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||g!==u)&&P2(e,o,r,u),Mo=!1,g=e.memoizedState,o.state=g,Sv(e,r,o,i);var N=e.memoizedState;c!==p||g!==N||ms.current||Mo?(typeof _=="function"&&(lw(e,n,_,r),N=e.memoizedState),(d=Mo||T2(e,n,d,r,g,N,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return hw(t,e,n,r,a,i)}function hw(t,e,n,r,i,a){xI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&w2(e,n,!1),Xa(t,e,a);r=e.stateNode,HV.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=xd(e,t.child,null,a),e.child=xd(e,null,c,a)):Hr(t,e,c,a),e.memoizedState=r.state,i&&w2(e,n,!0),e.child}function yI(t){var e=t.stateNode;e.pendingContext?_2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_2(t,e.context,!1),p1(t,e.containerInfo)}function L2(t,e,n,r,i){return vd(),c1(i),e.flags|=256,Hr(t,e,n,r),e.child}var fw={dehydrated:null,treeContext:null,retryLane:0};function mw(t){return{baseLanes:t,cachePool:null,transitions:null}}function _I(t,e,n){var r=e.pendingProps,i=Sn.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),an(Sn,i&1),t===null)return aw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Bx(o,r,0,null),t=hc(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=mw(n),e.memoizedState=fw,t):j1(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return GV(t,e,o,r,c,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=sl(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=sl(c,a):(a=hc(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?mw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=fw,r}return a=t.child,t=a.sibling,r=sl(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function j1(t,e){return e=Bx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lg(t,e,n,r){return r!==null&&c1(r),xd(e,t.child,null,n),t=j1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GV(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=D0(Error(Ie(422))),lg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Bx({mode:"visible",children:r.children},i,0,null),a=hc(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&xd(e,t.child,null,o),e.child.memoizedState=mw(o),e.memoizedState=fw,a);if(!(e.mode&1))return lg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(Ie(419)),r=D0(a,r,void 0),lg(t,e,o,r)}if(c=(o&t.childLanes)!==0,ds||c){if(r=pr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Qa(t,i),Ni(r,t,i,-1))}return T1(),r=D0(Error(Ie(421))),lg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=a8.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Cs=el(i.nextSibling),Ps=e,xn=!0,_i=null,t!==null&&(Gs[Ks++]=Ua,Gs[Ks++]=$a,Gs[Ks++]=jc,Ua=t.id,$a=t.overflow,jc=e),e=j1(e,r.children),e.flags|=4096,e)}function F2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ow(t.return,e,n)}function L0(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function wI(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Hr(t,e,r.children,n),r=Sn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F2(t,n,e);else if(t.tag===19)F2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(an(Sn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ev(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),L0(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ev(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}L0(e,!0,n,null,a);break;case"together":L0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Sc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ie(153));if(e.child!==null){for(t=e.child,n=sl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KV(t,e,n){switch(e.tag){case 3:yI(e),vd();break;case 5:GP(e);break;case 1:ps(e.type)&&_v(e);break;case 4:p1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;an(jv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(an(Sn,Sn.current&1),e.flags|=128,null):n&e.child.childLanes?_I(t,e,n):(an(Sn,Sn.current&1),t=Xa(t,e,n),t!==null?t.sibling:null);an(Sn,Sn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),an(Sn,Sn.current),r)break;return null;case 22:case 23:return e.lanes=0,vI(t,e,n)}return Xa(t,e,n)}var bI,pw,jI,NI;bI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pw=function(){};jI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ic(sa.current);var a=null;switch(n){case"input":i=L_(t,i),r=L_(t,r),a=[];break;case"select":i=Cn({},i,{value:void 0}),r=Cn({},r,{value:void 0}),a=[];break;case"textarea":i=z_(t,i),r=z_(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xv)}$_(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Wf.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Wf.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&dn("scroll",t),a||c===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};NI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jh(t,e){if(!xn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ZV(t,e,n){var r=e.pendingProps;switch(l1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(e),null;case 1:return ps(e.type)&&yv(),kr(e),null;case 3:return r=e.stateNode,yd(),fn(ms),fn(Fr),v1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ag(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_i!==null&&(jw(_i),_i=null))),pw(t,e),kr(e),null;case 5:g1(e);var i=ic(rm.current);if(n=e.type,t!==null&&e.stateNode!=null)jI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ie(166));return kr(e),null}if(t=ic(sa.current),ag(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Ki]=e,r[tm]=a,t=(e.mode&1)!==0,n){case"dialog":dn("cancel",r),dn("close",r);break;case"iframe":case"object":case"embed":dn("load",r);break;case"video":case"audio":for(i=0;i<pf.length;i++)dn(pf[i],r);break;case"source":dn("error",r);break;case"img":case"image":case"link":dn("error",r),dn("load",r);break;case"details":dn("toggle",r);break;case"input":GS(r,a),dn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},dn("invalid",r);break;case"textarea":ZS(r,a),dn("invalid",r)}$_(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&ig(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&ig(r.textContent,c,t),i=["children",""+c]):Wf.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&dn("scroll",r)}switch(n){case"input":Qp(r),KS(r,a,!0);break;case"textarea":Qp(r),YS(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=xv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=XT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ki]=e,t[tm]=r,bI(t,e,!1,!1),e.stateNode=t;e:{switch(o=B_(n,r),n){case"dialog":dn("cancel",t),dn("close",t),i=r;break;case"iframe":case"object":case"embed":dn("load",t),i=r;break;case"video":case"audio":for(i=0;i<pf.length;i++)dn(pf[i],t);i=r;break;case"source":dn("error",t),i=r;break;case"img":case"image":case"link":dn("error",t),dn("load",t),i=r;break;case"details":dn("toggle",t),i=r;break;case"input":GS(t,r),i=L_(t,r),dn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Cn({},r,{value:void 0}),dn("invalid",t);break;case"textarea":ZS(t,r),i=z_(t,r),dn("invalid",t);break;default:i=r}$_(n,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?tP(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&JT(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Hf(t,u):typeof u=="number"&&Hf(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Wf.hasOwnProperty(a)?u!=null&&a==="onScroll"&&dn("scroll",t):u!=null&&Gb(t,a,u,o))}switch(n){case"input":Qp(t),KS(t,r,!1);break;case"textarea":Qp(t),YS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+dl(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Ju(t,!!r.multiple,a,!1):r.defaultValue!=null&&Ju(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=xv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kr(e),null;case 6:if(t&&e.stateNode!=null)NI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ie(166));if(n=ic(rm.current),ic(sa.current),ag(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ki]=e,(a=r.nodeValue!==n)&&(t=Ps,t!==null))switch(t.tag){case 3:ig(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ig(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ki]=e,e.stateNode=r}return kr(e),null;case 13:if(fn(Sn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xn&&Cs!==null&&e.mode&1&&!(e.flags&128))$P(),vd(),e.flags|=98560,a=!1;else if(a=ag(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Ie(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ie(317));a[Ki]=e}else vd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kr(e),a=!1}else _i!==null&&(jw(_i),_i=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Sn.current&1?ar===0&&(ar=3):T1())),e.updateQueue!==null&&(e.flags|=4),kr(e),null);case 4:return yd(),pw(t,e),t===null&&Jf(e.stateNode.containerInfo),kr(e),null;case 10:return h1(e.type._context),kr(e),null;case 17:return ps(e.type)&&yv(),kr(e),null;case 19:if(fn(Sn),a=e.memoizedState,a===null)return kr(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Jh(a,!1);else{if(ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ev(t),o!==null){for(e.flags|=128,Jh(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return an(Sn,Sn.current&1|2),e.child}t=t.sibling}a.tail!==null&&Dn()>wd&&(e.flags|=128,r=!0,Jh(a,!1),e.lanes=4194304)}else{if(!r)if(t=Ev(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jh(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!xn)return kr(e),null}else 2*Dn()-a.renderingStartTime>wd&&n!==1073741824&&(e.flags|=128,r=!0,Jh(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Dn(),e.sibling=null,n=Sn.current,an(Sn,r?n&1|2:n&1),e):(kr(e),null);case 22:case 23:return k1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ss&1073741824&&(kr(e),e.subtreeFlags&6&&(e.flags|=8192)):kr(e),null;case 24:return null;case 25:return null}throw Error(Ie(156,e.tag))}function YV(t,e){switch(l1(e),e.tag){case 1:return ps(e.type)&&yv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yd(),fn(ms),fn(Fr),v1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return g1(e),null;case 13:if(fn(Sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ie(340));vd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fn(Sn),null;case 4:return yd(),null;case 10:return h1(e.type._context),null;case 22:case 23:return k1(),null;case 24:return null;default:return null}}var cg=!1,Ar=!1,QV=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Yu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pn(t,e,r)}else n.current=null}function gw(t,e,n){try{n()}catch(r){Pn(t,e,r)}}var V2=!1;function XV(t,e){if(J_=pv,t=TP(),a1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(c=o+i),p!==a||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)g=p,p=_;for(;;){if(p===t)break t;if(g===n&&++d===i&&(c=o),g===a&&++f===r&&(u=o),(_=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=_}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ew={focusedElem:t,selectionRange:n},pv=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var b=N.memoizedProps,S=N.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:vi(e.type,b),S);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(I){Pn(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return N=V2,V2=!1,N}function Af(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&gw(e,n,a)}i=i.next}while(i!==r)}}function Ux(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function SI(t){var e=t.alternate;e!==null&&(t.alternate=null,SI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ki],delete e[tm],delete e[rw],delete e[MV],delete e[OV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function EI(t){return t.tag===5||t.tag===3||t.tag===4}function z2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||EI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xv));else if(r!==4&&(t=t.child,t!==null))for(xw(t,e,n),t=t.sibling;t!==null;)xw(t,e,n),t=t.sibling}function yw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yw(t,e,n),t=t.sibling;t!==null;)yw(t,e,n),t=t.sibling}var vr=null,xi=!1;function Co(t,e,n){for(n=n.child;n!==null;)CI(t,e,n),n=n.sibling}function CI(t,e,n){if(ra&&typeof ra.onCommitFiberUnmount=="function")try{ra.onCommitFiberUnmount(Rx,n)}catch{}switch(n.tag){case 5:Ar||Yu(n,e);case 6:var r=vr,i=xi;vr=null,Co(t,e,n),vr=r,xi=i,vr!==null&&(xi?(t=vr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vr.removeChild(n.stateNode));break;case 18:vr!==null&&(xi?(t=vr,n=n.stateNode,t.nodeType===8?P0(t.parentNode,n):t.nodeType===1&&P0(t,n),Yf(t)):P0(vr,n.stateNode));break;case 4:r=vr,i=xi,vr=n.stateNode.containerInfo,xi=!0,Co(t,e,n),vr=r,xi=i;break;case 0:case 11:case 14:case 15:if(!Ar&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&gw(n,e,o),i=i.next}while(i!==r)}Co(t,e,n);break;case 1:if(!Ar&&(Yu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Pn(n,e,c)}Co(t,e,n);break;case 21:Co(t,e,n);break;case 22:n.mode&1?(Ar=(r=Ar)||n.memoizedState!==null,Co(t,e,n),Ar=r):Co(t,e,n);break;default:Co(t,e,n)}}function U2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QV),e.forEach(function(r){var i=o8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:vr=c.stateNode,xi=!1;break e;case 3:vr=c.stateNode.containerInfo,xi=!0;break e;case 4:vr=c.stateNode.containerInfo,xi=!0;break e}c=c.return}if(vr===null)throw Error(Ie(160));CI(a,o,i),vr=null,xi=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Pn(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kI(e,t),e=e.sibling}function kI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mi(e,t),Bi(t),r&4){try{Af(3,t,t.return),Ux(3,t)}catch(b){Pn(t,t.return,b)}try{Af(5,t,t.return)}catch(b){Pn(t,t.return,b)}}break;case 1:mi(e,t),Bi(t),r&512&&n!==null&&Yu(n,n.return);break;case 5:if(mi(e,t),Bi(t),r&512&&n!==null&&Yu(n,n.return),t.flags&32){var i=t.stateNode;try{Hf(i,"")}catch(b){Pn(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&YT(i,a),B_(c,o);var d=B_(c,a);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?tP(i,p):f==="dangerouslySetInnerHTML"?JT(i,p):f==="children"?Hf(i,p):Gb(i,f,p,d)}switch(c){case"input":F_(i,a);break;case"textarea":QT(i,a);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var _=a.value;_!=null?Ju(i,!!a.multiple,_,!1):g!==!!a.multiple&&(a.defaultValue!=null?Ju(i,!!a.multiple,a.defaultValue,!0):Ju(i,!!a.multiple,a.multiple?[]:"",!1))}i[tm]=a}catch(b){Pn(t,t.return,b)}}break;case 6:if(mi(e,t),Bi(t),r&4){if(t.stateNode===null)throw Error(Ie(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(b){Pn(t,t.return,b)}}break;case 3:if(mi(e,t),Bi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yf(e.containerInfo)}catch(b){Pn(t,t.return,b)}break;case 4:mi(e,t),Bi(t);break;case 13:mi(e,t),Bi(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(E1=Dn())),r&4&&U2(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ar=(d=Ar)||f,mi(e,t),Ar=d):mi(e,t),Bi(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Ye=t,f=t.child;f!==null;){for(p=Ye=f;Ye!==null;){switch(g=Ye,_=g.child,g.tag){case 0:case 11:case 14:case 15:Af(4,g,g.return);break;case 1:Yu(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(b){Pn(r,n,b)}}break;case 5:Yu(g,g.return);break;case 22:if(g.memoizedState!==null){B2(p);continue}}_!==null?(_.return=g,Ye=_):B2(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=eP("display",o))}catch(b){Pn(t,t.return,b)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(b){Pn(t,t.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mi(e,t),Bi(t),r&4&&U2(t);break;case 21:break;default:mi(e,t),Bi(t)}}function Bi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(EI(n)){var r=n;break e}n=n.return}throw Error(Ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Hf(i,""),r.flags&=-33);var a=z2(t);yw(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=z2(t);xw(t,c,o);break;default:throw Error(Ie(161))}}catch(u){Pn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JV(t,e,n){Ye=t,TI(t)}function TI(t,e,n){for(var r=(t.mode&1)!==0;Ye!==null;){var i=Ye,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||cg;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||Ar;c=cg;var d=Ar;if(cg=o,(Ar=u)&&!d)for(Ye=i;Ye!==null;)o=Ye,u=o.child,o.tag===22&&o.memoizedState!==null?q2(i):u!==null?(u.return=o,Ye=u):q2(i);for(;a!==null;)Ye=a,TI(a),a=a.sibling;Ye=i,cg=c,Ar=d}$2(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ye=a):$2(t)}}function $2(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ar||Ux(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ar)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&E2(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}E2(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Yf(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}Ar||e.flags&512&&vw(e)}catch(g){Pn(e,e.return,g)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function B2(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function q2(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ux(4,e)}catch(u){Pn(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Pn(e,i,u)}}var a=e.return;try{vw(e)}catch(u){Pn(e,a,u)}break;case 5:var o=e.return;try{vw(e)}catch(u){Pn(e,o,u)}}}catch(u){Pn(e,e.return,u)}if(e===t){Ye=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Ye=c;break}Ye=e.return}}var e8=Math.ceil,Tv=ho.ReactCurrentDispatcher,N1=ho.ReactCurrentOwner,Js=ho.ReactCurrentBatchConfig,Ot=0,pr=null,Yn=null,wr=0,Ss=0,Qu=kl(0),ar=0,om=null,Sc=0,$x=0,S1=0,Rf=null,cs=null,E1=0,wd=1/0,Fa=null,Pv=!1,_w=null,nl=null,ug=!1,Ho=null,Iv=0,Mf=0,ww=null,Ug=-1,$g=0;function Yr(){return Ot&6?Dn():Ug!==-1?Ug:Ug=Dn()}function rl(t){return t.mode&1?Ot&2&&wr!==0?wr&-wr:LV.transition!==null?($g===0&&($g=fP()),$g):(t=Kt,t!==0||(t=window.event,t=t===void 0?16:_P(t.type)),t):1}function Ni(t,e,n,r){if(50<Mf)throw Mf=0,ww=null,Error(Ie(185));Rm(t,n,r),(!(Ot&2)||t!==pr)&&(t===pr&&(!(Ot&2)&&($x|=n),ar===4&&Fo(t,wr)),gs(t,r),n===1&&Ot===0&&!(e.mode&1)&&(wd=Dn()+500,Fx&&Tl()))}function gs(t,e){var n=t.callbackNode;LF(t,e);var r=mv(t,t===pr?wr:0);if(r===0)n!==null&&JS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&JS(n),e===1)t.tag===0?DV(W2.bind(null,t)):VP(W2.bind(null,t)),AV(function(){!(Ot&6)&&Tl()}),n=null;else{switch(mP(r)){case 1:n=Xb;break;case 4:n=dP;break;case 16:n=fv;break;case 536870912:n=hP;break;default:n=fv}n=LI(n,PI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function PI(t,e){if(Ug=-1,$g=0,Ot&6)throw Error(Ie(327));var n=t.callbackNode;if(sd()&&t.callbackNode!==n)return null;var r=mv(t,t===pr?wr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Av(t,r);else{e=r;var i=Ot;Ot|=2;var a=AI();(pr!==t||wr!==e)&&(Fa=null,wd=Dn()+500,dc(t,e));do try{r8();break}catch(c){II(t,c)}while(!0);d1(),Tv.current=a,Ot=i,Yn!==null?e=0:(pr=null,wr=0,e=ar)}if(e!==0){if(e===2&&(i=K_(t),i!==0&&(r=i,e=bw(t,i))),e===1)throw n=om,dc(t,0),Fo(t,r),gs(t,Dn()),n;if(e===6)Fo(t,r);else{if(i=t.current.alternate,!(r&30)&&!t8(i)&&(e=Av(t,r),e===2&&(a=K_(t),a!==0&&(r=a,e=bw(t,a))),e===1))throw n=om,dc(t,0),Fo(t,r),gs(t,Dn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ie(345));case 2:ec(t,cs,Fa);break;case 3:if(Fo(t,r),(r&130023424)===r&&(e=E1+500-Dn(),10<e)){if(mv(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=nw(ec.bind(null,t,cs,Fa),e);break}ec(t,cs,Fa);break;case 4:if(Fo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ji(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=Dn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*e8(r/1960))-r,10<r){t.timeoutHandle=nw(ec.bind(null,t,cs,Fa),r);break}ec(t,cs,Fa);break;case 5:ec(t,cs,Fa);break;default:throw Error(Ie(329))}}}return gs(t,Dn()),t.callbackNode===n?PI.bind(null,t):null}function bw(t,e){var n=Rf;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),t=Av(t,e),t!==2&&(e=cs,cs=n,e!==null&&jw(e)),t}function jw(t){cs===null?cs=t:cs.push.apply(cs,t)}function t8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Ti(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fo(t,e){for(e&=~S1,e&=~$x,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ji(e),r=1<<n;t[n]=-1,e&=~r}}function W2(t){if(Ot&6)throw Error(Ie(327));sd();var e=mv(t,0);if(!(e&1))return gs(t,Dn()),null;var n=Av(t,e);if(t.tag!==0&&n===2){var r=K_(t);r!==0&&(e=r,n=bw(t,r))}if(n===1)throw n=om,dc(t,0),Fo(t,e),gs(t,Dn()),n;if(n===6)throw Error(Ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ec(t,cs,Fa),gs(t,Dn()),null}function C1(t,e){var n=Ot;Ot|=1;try{return t(e)}finally{Ot=n,Ot===0&&(wd=Dn()+500,Fx&&Tl())}}function Ec(t){Ho!==null&&Ho.tag===0&&!(Ot&6)&&sd();var e=Ot;Ot|=1;var n=Js.transition,r=Kt;try{if(Js.transition=null,Kt=1,t)return t()}finally{Kt=r,Js.transition=n,Ot=e,!(Ot&6)&&Tl()}}function k1(){Ss=Qu.current,fn(Qu)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IV(n)),Yn!==null)for(n=Yn.return;n!==null;){var r=n;switch(l1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yv();break;case 3:yd(),fn(ms),fn(Fr),v1();break;case 5:g1(r);break;case 4:yd();break;case 13:fn(Sn);break;case 19:fn(Sn);break;case 10:h1(r.type._context);break;case 22:case 23:k1()}n=n.return}if(pr=t,Yn=t=sl(t.current,null),wr=Ss=e,ar=0,om=null,S1=$x=Sc=0,cs=Rf=null,sc!==null){for(e=0;e<sc.length;e++)if(n=sc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}sc=null}return t}function II(t,e){do{var n=Yn;try{if(d1(),Fg.current=kv,Cv){for(var r=En.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Cv=!1}if(Nc=0,fr=ir=En=null,If=!1,sm=0,N1.current=null,n===null||n.return===null){ar=1,om=e,Yn=null;break}e:{var a=t,o=n.return,c=n,u=e;if(e=wr,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=A2(o);if(_!==null){_.flags&=-257,R2(_,o,c,a,e),_.mode&1&&I2(a,d,e),e=_,u=d;var N=e.updateQueue;if(N===null){var b=new Set;b.add(u),e.updateQueue=b}else N.add(u);break e}else{if(!(e&1)){I2(a,d,e),T1();break e}u=Error(Ie(426))}}else if(xn&&c.mode&1){var S=A2(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),R2(S,o,c,a,e),c1(_d(u,c));break e}}a=u=_d(u,c),ar!==4&&(ar=2),Rf===null?Rf=[a]:Rf.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var w=mI(a,u,e);S2(a,w);break e;case 1:c=u;var y=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(nl===null||!nl.has(E)))){a.flags|=65536,e&=-e,a.lanes|=e;var I=pI(a,c,e);S2(a,I);break e}}a=a.return}while(a!==null)}MI(n)}catch(O){e=O,Yn===n&&n!==null&&(Yn=n=n.return);continue}break}while(!0)}function AI(){var t=Tv.current;return Tv.current=kv,t===null?kv:t}function T1(){(ar===0||ar===3||ar===2)&&(ar=4),pr===null||!(Sc&268435455)&&!($x&268435455)||Fo(pr,wr)}function Av(t,e){var n=Ot;Ot|=2;var r=AI();(pr!==t||wr!==e)&&(Fa=null,dc(t,e));do try{n8();break}catch(i){II(t,i)}while(!0);if(d1(),Ot=n,Tv.current=r,Yn!==null)throw Error(Ie(261));return pr=null,wr=0,ar}function n8(){for(;Yn!==null;)RI(Yn)}function r8(){for(;Yn!==null&&!kF();)RI(Yn)}function RI(t){var e=DI(t.alternate,t,Ss);t.memoizedProps=t.pendingProps,e===null?MI(t):Yn=e,N1.current=null}function MI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YV(n,e),n!==null){n.flags&=32767,Yn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ar=6,Yn=null;return}}else if(n=ZV(n,e,Ss),n!==null){Yn=n;return}if(e=e.sibling,e!==null){Yn=e;return}Yn=e=t}while(e!==null);ar===0&&(ar=5)}function ec(t,e,n){var r=Kt,i=Js.transition;try{Js.transition=null,Kt=1,s8(t,e,n,r)}finally{Js.transition=i,Kt=r}return null}function s8(t,e,n,r){do sd();while(Ho!==null);if(Ot&6)throw Error(Ie(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ie(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(FF(t,a),t===pr&&(Yn=pr=null,wr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ug||(ug=!0,LI(fv,function(){return sd(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Js.transition,Js.transition=null;var o=Kt;Kt=1;var c=Ot;Ot|=4,N1.current=null,XV(t,n),kI(n,t),NV(ew),pv=!!J_,ew=J_=null,t.current=n,JV(n),TF(),Ot=c,Kt=o,Js.transition=a}else t.current=n;if(ug&&(ug=!1,Ho=t,Iv=i),a=t.pendingLanes,a===0&&(nl=null),AF(n.stateNode),gs(t,Dn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Pv)throw Pv=!1,t=_w,_w=null,t;return Iv&1&&t.tag!==0&&sd(),a=t.pendingLanes,a&1?t===ww?Mf++:(Mf=0,ww=t):Mf=0,Tl(),null}function sd(){if(Ho!==null){var t=mP(Iv),e=Js.transition,n=Kt;try{if(Js.transition=null,Kt=16>t?16:t,Ho===null)var r=!1;else{if(t=Ho,Ho=null,Iv=0,Ot&6)throw Error(Ie(331));var i=Ot;for(Ot|=4,Ye=t.current;Ye!==null;){var a=Ye,o=a.child;if(Ye.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Ye=d;Ye!==null;){var f=Ye;switch(f.tag){case 0:case 11:case 15:Af(8,f,a)}var p=f.child;if(p!==null)p.return=f,Ye=p;else for(;Ye!==null;){f=Ye;var g=f.sibling,_=f.return;if(SI(f),f===d){Ye=null;break}if(g!==null){g.return=_,Ye=g;break}Ye=_}}}var N=a.alternate;if(N!==null){var b=N.child;if(b!==null){N.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}Ye=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ye=o;else e:for(;Ye!==null;){if(a=Ye,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Af(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,Ye=w;break e}Ye=a.return}}var y=t.current;for(Ye=y;Ye!==null;){o=Ye;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Ye=E;else e:for(o=y;Ye!==null;){if(c=Ye,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ux(9,c)}}catch(O){Pn(c,c.return,O)}if(c===o){Ye=null;break e}var I=c.sibling;if(I!==null){I.return=c.return,Ye=I;break e}Ye=c.return}}if(Ot=i,Tl(),ra&&typeof ra.onPostCommitFiberRoot=="function")try{ra.onPostCommitFiberRoot(Rx,t)}catch{}r=!0}return r}finally{Kt=n,Js.transition=e}}return!1}function H2(t,e,n){e=_d(n,e),e=mI(t,e,1),t=tl(t,e,1),e=Yr(),t!==null&&(Rm(t,1,e),gs(t,e))}function Pn(t,e,n){if(t.tag===3)H2(t,t,n);else for(;e!==null;){if(e.tag===3){H2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nl===null||!nl.has(r))){t=_d(n,t),t=pI(e,t,1),e=tl(e,t,1),t=Yr(),e!==null&&(Rm(e,1,t),gs(e,t));break}}e=e.return}}function i8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yr(),t.pingedLanes|=t.suspendedLanes&n,pr===t&&(wr&n)===n&&(ar===4||ar===3&&(wr&130023424)===wr&&500>Dn()-E1?dc(t,0):S1|=n),gs(t,e)}function OI(t,e){e===0&&(t.mode&1?(e=eg,eg<<=1,!(eg&130023424)&&(eg=4194304)):e=1);var n=Yr();t=Qa(t,e),t!==null&&(Rm(t,e,n),gs(t,n))}function a8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OI(t,n)}function o8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ie(314))}r!==null&&r.delete(e),OI(t,n)}var DI;DI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ms.current)ds=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ds=!1,KV(t,e,n);ds=!!(t.flags&131072)}else ds=!1,xn&&e.flags&1048576&&zP(e,bv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zg(t,e),t=e.pendingProps;var i=gd(e,Fr.current);rd(e,n),i=y1(null,e,r,t,i,n);var a=_1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ps(r)?(a=!0,_v(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,m1(e),i.updater=zx,e.stateNode=i,i._reactInternals=e,cw(e,r,t,n),e=hw(null,e,r,!0,a,n)):(e.tag=0,xn&&a&&o1(e),Hr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=c8(r),t=vi(r,t),i){case 0:e=dw(null,e,r,t,n);break e;case 1:e=D2(null,e,r,t,n);break e;case 11:e=M2(null,e,r,t,n);break e;case 14:e=O2(null,e,r,vi(r.type,t),n);break e}throw Error(Ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),dw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),D2(t,e,r,i,n);case 3:e:{if(yI(e),t===null)throw Error(Ie(387));r=e.pendingProps,a=e.memoizedState,i=a.element,HP(t,e),Sv(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=_d(Error(Ie(423)),e),e=L2(t,e,r,n,i);break e}else if(r!==i){i=_d(Error(Ie(424)),e),e=L2(t,e,r,n,i);break e}else for(Cs=el(e.stateNode.containerInfo.firstChild),Ps=e,xn=!0,_i=null,n=qP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vd(),r===i){e=Xa(t,e,n);break e}Hr(t,e,r,n)}e=e.child}return e;case 5:return GP(e),t===null&&aw(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,tw(r,i)?o=null:a!==null&&tw(r,a)&&(e.flags|=32),xI(t,e),Hr(t,e,o,n),e.child;case 6:return t===null&&aw(e),null;case 13:return _I(t,e,n);case 4:return p1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xd(e,null,r,n):Hr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),M2(t,e,r,i,n);case 7:return Hr(t,e,e.pendingProps,n),e.child;case 8:return Hr(t,e,e.pendingProps.children,n),e.child;case 12:return Hr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,an(jv,r._currentValue),r._currentValue=o,a!==null)if(Ti(a.value,o)){if(a.children===i.children&&!ms.current){e=Xa(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Ha(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),ow(a.return,n,e),c.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Ie(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ow(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Hr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,rd(e,n),i=si(i),r=r(i),e.flags|=1,Hr(t,e,r,n),e.child;case 14:return r=e.type,i=vi(r,e.pendingProps),i=vi(r.type,i),O2(t,e,r,i,n);case 15:return gI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),zg(t,e),e.tag=1,ps(r)?(t=!0,_v(e)):t=!1,rd(e,n),fI(e,r,i),cw(e,r,i,n),hw(null,e,r,!0,t,n);case 19:return wI(t,e,n);case 22:return vI(t,e,n)}throw Error(Ie(156,e.tag))};function LI(t,e){return uP(t,e)}function l8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(t,e,n,r){return new l8(t,e,n,r)}function P1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function c8(t){if(typeof t=="function")return P1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zb)return 11;if(t===Yb)return 14}return 2}function sl(t,e){var n=t.alternate;return n===null?(n=Ys(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bg(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")P1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Uu:return hc(n.children,i,a,e);case Kb:o=8,i|=8;break;case R_:return t=Ys(12,n,e,i|2),t.elementType=R_,t.lanes=a,t;case M_:return t=Ys(13,n,e,i),t.elementType=M_,t.lanes=a,t;case O_:return t=Ys(19,n,e,i),t.elementType=O_,t.lanes=a,t;case GT:return Bx(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case WT:o=10;break e;case HT:o=9;break e;case Zb:o=11;break e;case Yb:o=14;break e;case Ro:o=16,r=null;break e}throw Error(Ie(130,t==null?t:typeof t,""))}return e=Ys(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function hc(t,e,n,r){return t=Ys(7,t,r,e),t.lanes=n,t}function Bx(t,e,n,r){return t=Ys(22,t,r,e),t.elementType=GT,t.lanes=n,t.stateNode={isHidden:!1},t}function F0(t,e,n){return t=Ys(6,t,null,e),t.lanes=n,t}function V0(t,e,n){return e=Ys(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function u8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=y0(0),this.expirationTimes=y0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=y0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function I1(t,e,n,r,i,a,o,c,u){return t=new u8(t,e,n,c,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ys(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},m1(a),t}function d8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function FI(t){if(!t)return hl;t=t._reactInternals;e:{if(Bc(t)!==t||t.tag!==1)throw Error(Ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ps(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ie(171))}if(t.tag===1){var n=t.type;if(ps(n))return FP(t,n,e)}return e}function VI(t,e,n,r,i,a,o,c,u){return t=I1(n,r,!0,t,i,a,o,c,u),t.context=FI(null),n=t.current,r=Yr(),i=rl(n),a=Ha(r,i),a.callback=e??null,tl(n,a,i),t.current.lanes=i,Rm(t,i,r),gs(t,r),t}function qx(t,e,n,r){var i=e.current,a=Yr(),o=rl(i);return n=FI(n),e.context===null?e.context=n:e.pendingContext=n,e=Ha(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=tl(i,e,o),t!==null&&(Ni(t,i,o,a),Lg(t,i,o)),o}function Rv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function G2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function A1(t,e){G2(t,e),(t=t.alternate)&&G2(t,e)}function h8(){return null}var zI=typeof reportError=="function"?reportError:function(t){console.error(t)};function R1(t){this._internalRoot=t}Wx.prototype.render=R1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ie(409));qx(t,e,null,null)};Wx.prototype.unmount=R1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ec(function(){qx(null,t,null,null)}),e[Ya]=null}};function Wx(t){this._internalRoot=t}Wx.prototype.unstable_scheduleHydration=function(t){if(t){var e=vP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lo.length&&e!==0&&e<Lo[n].priority;n++);Lo.splice(n,0,t),n===0&&yP(t)}};function M1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K2(){}function f8(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var d=Rv(o);a.call(d)}}var o=VI(e,r,t,0,null,!1,!1,"",K2);return t._reactRootContainer=o,t[Ya]=o.current,Jf(t.nodeType===8?t.parentNode:t),Ec(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=Rv(u);c.call(d)}}var u=I1(t,0,!1,null,null,!1,!1,"",K2);return t._reactRootContainer=u,t[Ya]=u.current,Jf(t.nodeType===8?t.parentNode:t),Ec(function(){qx(e,u,n,r)}),u}function Gx(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var c=i;i=function(){var u=Rv(o);c.call(u)}}qx(e,o,t,i)}else o=f8(n,e,t,i,r);return Rv(o)}pP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mf(e.pendingLanes);n!==0&&(Jb(e,n|1),gs(e,Dn()),!(Ot&6)&&(wd=Dn()+500,Tl()))}break;case 13:Ec(function(){var r=Qa(t,1);if(r!==null){var i=Yr();Ni(r,t,1,i)}}),A1(t,1)}};e1=function(t){if(t.tag===13){var e=Qa(t,134217728);if(e!==null){var n=Yr();Ni(e,t,134217728,n)}A1(t,134217728)}};gP=function(t){if(t.tag===13){var e=rl(t),n=Qa(t,e);if(n!==null){var r=Yr();Ni(n,t,e,r)}A1(t,e)}};vP=function(){return Kt};xP=function(t,e){var n=Kt;try{return Kt=t,e()}finally{Kt=n}};W_=function(t,e,n){switch(e){case"input":if(F_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Lx(r);if(!i)throw Error(Ie(90));ZT(r),F_(r,i)}}}break;case"textarea":QT(t,n);break;case"select":e=n.value,e!=null&&Ju(t,!!n.multiple,e,!1)}};sP=C1;iP=Ec;var m8={usingClientEntryPoint:!1,Events:[Om,Wu,Lx,nP,rP,C1]},ef={findFiberByHostInstance:rc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p8={bundleType:ef.bundleType,version:ef.version,rendererPackageName:ef.rendererPackageName,rendererConfig:ef.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ho.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lP(t),t===null?null:t.stateNode},findFiberByHostInstance:ef.findFiberByHostInstance||h8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dg.isDisabled&&dg.supportsFiber)try{Rx=dg.inject(p8),ra=dg}catch{}}Ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m8;Ls.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!M1(e))throw Error(Ie(200));return d8(t,e,null,n)};Ls.createRoot=function(t,e){if(!M1(t))throw Error(Ie(299));var n=!1,r="",i=zI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=I1(t,1,!1,null,null,n,!1,r,i),t[Ya]=e.current,Jf(t.nodeType===8?t.parentNode:t),new R1(e)};Ls.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ie(188)):(t=Object.keys(t).join(","),Error(Ie(268,t)));return t=lP(e),t=t===null?null:t.stateNode,t};Ls.flushSync=function(t){return Ec(t)};Ls.hydrate=function(t,e,n){if(!Hx(e))throw Error(Ie(200));return Gx(null,t,e,!0,n)};Ls.hydrateRoot=function(t,e,n){if(!M1(t))throw Error(Ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=zI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=VI(e,null,t,1,n??null,i,!1,a,o),t[Ya]=e.current,Jf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Wx(e)};Ls.render=function(t,e,n){if(!Hx(e))throw Error(Ie(200));return Gx(null,t,e,!1,n)};Ls.unmountComponentAtNode=function(t){if(!Hx(t))throw Error(Ie(40));return t._reactRootContainer?(Ec(function(){Gx(null,null,t,!1,function(){t._reactRootContainer=null,t[Ya]=null})}),!0):!1};Ls.unstable_batchedUpdates=C1;Ls.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hx(n))throw Error(Ie(200));if(t==null||t._reactInternals===void 0)throw Error(Ie(38));return Gx(t,e,n,!1,r)};Ls.version="18.3.1-next-f1338f8080-20240426";function UI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UI)}catch(t){console.error(t)}}UI(),UT.exports=Ls;var Xd=UT.exports;const g8=El(Xd);var $I,Z2=Xd;$I=Z2.createRoot,Z2.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lm(){return lm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lm.apply(this,arguments)}var Go;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Go||(Go={}));const Y2="popstate";function v8(t){t===void 0&&(t={});function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=qc(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Nw("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:Mv(a))}function r(i,a){O1(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return y8(e,n,r,t)}function zn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function O1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function x8(){return Math.random().toString(36).substr(2,8)}function Q2(t,e){return{usr:t.state,key:t.key,idx:e}}function Nw(t,e,n,r){return n===void 0&&(n=null),lm({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qc(e):e,{state:n,key:e&&e.key||r||x8()})}function Mv(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function y8(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c=Go.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(lm({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){c=Go.Pop;let S=f(),w=S==null?null:S-d;d=S,u&&u({action:c,location:b.location,delta:w})}function g(S,w){c=Go.Push;let y=Nw(b.location,S,w);n&&n(y,S),d=f()+1;let E=Q2(y,d),I=b.createHref(y);try{o.pushState(E,"",I)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(I)}a&&u&&u({action:c,location:b.location,delta:1})}function _(S,w){c=Go.Replace;let y=Nw(b.location,S,w);n&&n(y,S),d=f();let E=Q2(y,d),I=b.createHref(y);o.replaceState(E,"",I),a&&u&&u({action:c,location:b.location,delta:0})}function N(S){let w=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof S=="string"?S:Mv(S);return y=y.replace(/ $/,"%20"),zn(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let b={get action(){return c},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Y2,p),u=S,()=>{i.removeEventListener(Y2,p),u=null}},createHref(S){return e(i,S)},createURL:N,encodeLocation(S){let w=N(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:_,go(S){return o.go(S)}};return b}var X2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(X2||(X2={}));function _8(t,e,n){return n===void 0&&(n="/"),w8(t,e,n)}function w8(t,e,n,r){let i=typeof e=="string"?qc(e):e,a=D1(i.pathname||"/",n);if(a==null)return null;let o=BI(t);b8(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=M8(a);c=I8(o[u],d)}return c}function BI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(zn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=il([r,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(zn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),BI(a.children,e,f,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:T8(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let u of qI(a.path))i(a,o,u)}),e}function qI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=qI(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function b8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:P8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const j8=/^:[\w-]+$/,N8=3,S8=2,E8=1,C8=10,k8=-2,J2=t=>t==="*";function T8(t,e){let n=t.split("/"),r=n.length;return n.some(J2)&&(r+=k8),e&&(r+=S8),n.filter(i=>!J2(i)).reduce((i,a)=>i+(j8.test(a)?N8:a===""?E8:C8),r)}function P8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function I8(t,e,n){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",p=A8({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:il([a,p.pathname]),pathnameBase:F8(il([a,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(a=il([a,p.pathnameBase]))}return o}function A8(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=R8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:_}=f;if(g==="*"){let b=c[p]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const N=c[p];return _&&!N?d[g]=void 0:d[g]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function R8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),O1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function M8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return O1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function D1(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function O8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?qc(t):t;return{pathname:n?n.startsWith("/")?n:D8(n,e):e,search:V8(r),hash:z8(i)}}function D8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function z0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function L8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function L1(t,e){let n=L8(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function F1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=qc(t):(i=lm({},t),zn(!i.pathname||!i.pathname.includes("?"),z0("?","pathname","search",i)),zn(!i.pathname||!i.pathname.includes("#"),z0("#","pathname","hash",i)),zn(!i.search||!i.search.includes("#"),z0("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=O8(i,c),d=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const il=t=>t.join("/").replace(/\/\/+/g,"/"),F8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),V8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,z8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function U8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const WI=["post","put","patch","delete"];new Set(WI);const $8=["get",...WI];new Set($8);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cm(){return cm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cm.apply(this,arguments)}const V1=x.createContext(null),B8=x.createContext(null),Pl=x.createContext(null),Kx=x.createContext(null),fo=x.createContext({outlet:null,matches:[],isDataRoute:!1}),HI=x.createContext(null);function q8(t,e){let{relative:n}=e===void 0?{}:e;Jd()||zn(!1);let{basename:r,navigator:i}=x.useContext(Pl),{hash:a,pathname:o,search:c}=KI(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:il([r,o])),i.createHref({pathname:u,search:c,hash:a})}function Jd(){return x.useContext(Kx)!=null}function mo(){return Jd()||zn(!1),x.useContext(Kx).location}function GI(t){x.useContext(Pl).static||x.useLayoutEffect(t)}function cr(){let{isDataRoute:t}=x.useContext(fo);return t?r9():W8()}function W8(){Jd()||zn(!1);let t=x.useContext(V1),{basename:e,future:n,navigator:r}=x.useContext(Pl),{matches:i}=x.useContext(fo),{pathname:a}=mo(),o=JSON.stringify(L1(i,n.v7_relativeSplatPath)),c=x.useRef(!1);return GI(()=>{c.current=!0}),x.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let p=F1(d,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:il([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,a,t])}function z1(){let{matches:t}=x.useContext(fo),e=t[t.length-1];return e?e.params:{}}function KI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=x.useContext(Pl),{matches:i}=x.useContext(fo),{pathname:a}=mo(),o=JSON.stringify(L1(i,r.v7_relativeSplatPath));return x.useMemo(()=>F1(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function H8(t,e){return G8(t,e)}function G8(t,e,n,r){Jd()||zn(!1);let{navigator:i}=x.useContext(Pl),{matches:a}=x.useContext(fo),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=mo(),f;if(e){var p;let S=typeof e=="string"?qc(e):e;u==="/"||(p=S.pathname)!=null&&p.startsWith(u)||zn(!1),f=S}else f=d;let g=f.pathname||"/",_=g;if(u!=="/"){let S=u.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let N=_8(t,{pathname:_}),b=X8(N&&N.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:il([u,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:il([u,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,n,r);return e&&b?x.createElement(Kx.Provider,{value:{location:cm({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Go.Pop}},b):b}function K8(){let t=n9(),e=U8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,null)}const Z8=x.createElement(K8,null);class Y8 extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(fo.Provider,{value:this.props.routeContext},x.createElement(HI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Q8(t){let{routeContext:e,match:n,children:r}=t,i=x.useContext(V1);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(fo.Provider,{value:e},r)}function X8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let f=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);f>=0||zn(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:_}=n,N=p.route.loader&&g[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||N){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let _,N=!1,b=null,S=null;n&&(_=c&&p.route.id?c[p.route.id]:void 0,b=p.route.errorElement||Z8,u&&(d<0&&g===0?(s9("route-fallback"),N=!0,S=null):d===g&&(N=!0,S=p.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,g+1)),y=()=>{let E;return _?E=b:N?E=S:p.route.Component?E=x.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,x.createElement(Q8,{match:p,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?x.createElement(Y8,{location:n.location,revalidation:n.revalidation,component:b,error:_,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var ZI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ZI||{}),YI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(YI||{});function J8(t){let e=x.useContext(V1);return e||zn(!1),e}function e9(t){let e=x.useContext(B8);return e||zn(!1),e}function t9(t){let e=x.useContext(fo);return e||zn(!1),e}function QI(t){let e=t9(),n=e.matches[e.matches.length-1];return n.route.id||zn(!1),n.route.id}function n9(){var t;let e=x.useContext(HI),n=e9(),r=QI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function r9(){let{router:t}=J8(ZI.UseNavigateStable),e=QI(YI.UseNavigateStable),n=x.useRef(!1);return GI(()=>{n.current=!0}),x.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,cm({fromRouteId:e},a)))},[t,e])}const eE={};function s9(t,e,n){eE[t]||(eE[t]=!0)}function i9(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function a9(t){let{to:e,replace:n,state:r,relative:i}=t;Jd()||zn(!1);let{future:a,static:o}=x.useContext(Pl),{matches:c}=x.useContext(fo),{pathname:u}=mo(),d=cr(),f=F1(e,L1(c,a.v7_relativeSplatPath),u,i==="path"),p=JSON.stringify(f);return x.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:i}),[d,p,i,n,r]),null}function hn(t){zn(!1)}function o9(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Go.Pop,navigator:a,static:o=!1,future:c}=t;Jd()&&zn(!1);let u=e.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:u,navigator:a,static:o,future:cm({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof r=="string"&&(r=qc(r));let{pathname:f="/",search:p="",hash:g="",state:_=null,key:N="default"}=r,b=x.useMemo(()=>{let S=D1(f,u);return S==null?null:{location:{pathname:S,search:p,hash:g,state:_,key:N},navigationType:i}},[u,f,p,g,_,N,i]);return b==null?null:x.createElement(Pl.Provider,{value:d},x.createElement(Kx.Provider,{children:n,value:b}))}function l9(t){let{children:e,location:n}=t;return H8(Sw(e),n)}new Promise(()=>{});function Sw(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,i)=>{if(!x.isValidElement(r))return;let a=[...e,i];if(r.type===x.Fragment){n.push.apply(n,Sw(r.props.children,a));return}r.type!==hn&&zn(!1),!r.props.index||!r.props.children||zn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sw(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ew(){return Ew=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ew.apply(this,arguments)}function c9(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function u9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function d9(t,e){return t.button===0&&(!e||e==="_self")&&!u9(t)}function Cw(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function h9(t,e){let n=Cw(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const f9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m9="6";try{window.__reactRouterVersion=m9}catch{}const p9="startTransition",tE=qb[p9];function g9(t){let{basename:e,children:n,future:r,window:i}=t,a=x.useRef();a.current==null&&(a.current=v8({window:i,v5Compat:!0}));let o=a.current,[c,u]=x.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=x.useCallback(p=>{d&&tE?tE(()=>u(p)):u(p)},[u,d]);return x.useLayoutEffect(()=>o.listen(f),[o,f]),x.useEffect(()=>i9(r),[r]),x.createElement(o9,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const v9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",x9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=x.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=c9(e,f9),{basename:_}=x.useContext(Pl),N,b=!1;if(typeof d=="string"&&x9.test(d)&&(N=d,v9))try{let E=new URL(window.location.href),I=d.startsWith("//")?new URL(E.protocol+d):new URL(d),O=D1(I.pathname,_);I.origin===E.origin&&O!=null?d=O+I.search+I.hash:b=!0}catch{}let S=q8(d,{relative:i}),w=y9(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:p});function y(E){r&&r(E),E.defaultPrevented||w(E)}return x.createElement("a",Ew({},g,{href:N||S,onClick:b||a?r:y,ref:n,target:u}))});var nE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(nE||(nE={}));var rE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rE||(rE={}));function y9(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=cr(),d=mo(),f=KI(t,{relative:o});return x.useCallback(p=>{if(d9(p,n)){p.preventDefault();let g=r!==void 0?r:Mv(d)===Mv(f);u(t,{replace:g,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[d,u,f,r,i,n,t,a,o,c])}function U1(t){let e=x.useRef(Cw(t)),n=x.useRef(!1),r=mo(),i=x.useMemo(()=>h9(r.search,n.current?null:e.current),[r.search]),a=cr(),o=x.useCallback((c,u)=>{const d=Cw(typeof c=="function"?c(i):c);n.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var Ov=["light","dark"],$1="(prefers-color-scheme: dark)",_9=typeof window>"u",B1=x.createContext(void 0),w9={setTheme:t=>{},themes:[]},b9=()=>{var t;return(t=x.useContext(B1))!=null?t:w9},j9=t=>x.useContext(B1)?t.children:x.createElement(S9,{...t}),N9=["light","dark"],S9=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:a=N9,defaultTheme:o=n?"system":"light",attribute:c="data-theme",value:u,children:d,nonce:f})=>{let[p,g]=x.useState(()=>sE(i,o)),[_,N]=x.useState(()=>sE(i)),b=u?Object.values(u):a,S=x.useCallback(I=>{let O=I;if(!O)return;I==="system"&&n&&(O=iE());let q=u?u[O]:O,R=e?C9():null,V=document.documentElement;if(c==="class"?(V.classList.remove(...b),q&&V.classList.add(q)):q?V.setAttribute(c,q):V.removeAttribute(c),r){let U=Ov.includes(o)?o:null,k=Ov.includes(O)?O:U;V.style.colorScheme=k}R==null||R()},[]),w=x.useCallback(I=>{let O=typeof I=="function"?I(I):I;g(O);try{localStorage.setItem(i,O)}catch{}},[t]),y=x.useCallback(I=>{let O=iE(I);N(O),p==="system"&&n&&!t&&S("system")},[p,t]);x.useEffect(()=>{let I=window.matchMedia($1);return I.addListener(y),y(I),()=>I.removeListener(y)},[y]),x.useEffect(()=>{let I=O=>{if(O.key!==i)return;let q=O.newValue||o;w(q)};return window.addEventListener("storage",I),()=>window.removeEventListener("storage",I)},[w]),x.useEffect(()=>{S(t??p)},[t,p]);let E=x.useMemo(()=>({theme:p,setTheme:w,forcedTheme:t,resolvedTheme:p==="system"?_:p,themes:n?[...a,"system"]:a,systemTheme:n?_:void 0}),[p,w,t,_,n,a]);return x.createElement(B1.Provider,{value:E},x.createElement(E9,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:i,themes:a,defaultTheme:o,attribute:c,value:u,children:d,attrs:b,nonce:f}),d)},E9=x.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:o,attrs:c,nonce:u})=>{let d=a==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,p=i?Ov.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",g=(N,b=!1,S=!0)=>{let w=o?o[N]:N,y=b?N+"|| ''":`'${w}'`,E="";return i&&S&&!b&&Ov.includes(N)&&(E+=`d.style.colorScheme = '${N}';`),n==="class"?b||w?E+=`c.add(${y})`:E+="null":w&&(E+=`d[s](n,${y})`),E},_=t?`!function(){${f}${g(t)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${$1}',m=window.matchMedia(t);if(m.media!==t||m.matches){${g("dark")}}else{${g("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${g(o?"x[e]":"e",!0)}}${d?"":"else{"+g(a,!1,!1)+"}"}${p}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${g(o?"x[e]":"e",!0)}}else{${g(a,!1,!1)};}${p}}catch(t){}}();`;return x.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:_}})}),sE=(t,e)=>{if(_9)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},C9=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},iE=t=>(t||(t=window.matchMedia($1)),t.matches?"dark":"light");let k9={data:""},T9=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||k9,P9=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,I9=/\/\*[^]*?\*\/|  +/g,aE=/\n+/g,Vo=(t,e)=>{let n="",r="",i="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?Vo(o,a):a+"{"+Vo(o,a[1]=="k"?"":e)+"}":typeof o=="object"?r+=Vo(o,e?e.replace(/([^,])+/g,c=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Vo.p?Vo.p(a,o):a+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Ma={},XI=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+XI(t[n]);return e}return t},A9=(t,e,n,r,i)=>{let a=XI(t),o=Ma[a]||(Ma[a]=(u=>{let d=0,f=11;for(;d<u.length;)f=101*f+u.charCodeAt(d++)>>>0;return"go"+f})(a));if(!Ma[o]){let u=a!==t?t:(d=>{let f,p,g=[{}];for(;f=P9.exec(d.replace(I9,""));)f[4]?g.shift():f[3]?(p=f[3].replace(aE," ").trim(),g.unshift(g[0][p]=g[0][p]||{})):g[0][f[1]]=f[2].replace(aE," ").trim();return g[0]})(t);Ma[o]=Vo(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let c=n&&Ma.g?Ma.g:null;return n&&(Ma.g=Ma[o]),((u,d,f,p)=>{p?d.data=d.data.replace(p,u):d.data.indexOf(u)===-1&&(d.data=f?u+d.data:d.data+u)})(Ma[o],e,r,c),o},R9=(t,e,n)=>t.reduce((r,i,a)=>{let o=e[a];if(o&&o.call){let c=o(n),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=u?"."+u:c&&typeof c=="object"?c.props?"":Vo(c,""):c===!1?"":c}return r+i+(o??"")},"");function Zx(t){let e=this||{},n=t.call?t(e.p):t;return A9(n.unshift?n.raw?R9(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,T9(e.target),e.g,e.o,e.k)}let JI,kw,Tw;Zx.bind({g:1});let Ja=Zx.bind({k:1});function M9(t,e,n,r){Vo.p=e,JI=t,kw=n,Tw=r}function Il(t,e){let n=this||{};return function(){let r=arguments;function i(a,o){let c=Object.assign({},a),u=c.className||i.className;n.p=Object.assign({theme:kw&&kw()},c),n.o=/ *go\d+/.test(u),c.className=Zx.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=c.as||t,delete c.as),Tw&&d[0]&&Tw(c),JI(d,c)}return i}}var O9=t=>typeof t=="function",Dv=(t,e)=>O9(t)?t(e):t,D9=(()=>{let t=0;return()=>(++t).toString()})(),eA=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),L9=20,tA=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,L9)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return tA(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},qg=[],ac={toasts:[],pausedAt:void 0},Wc=t=>{ac=tA(ac,t),qg.forEach(e=>{e(ac)})},F9={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},V9=(t={})=>{let[e,n]=x.useState(ac),r=x.useRef(ac);x.useEffect(()=>(r.current!==ac&&n(ac),qg.push(n),()=>{let a=qg.indexOf(n);a>-1&&qg.splice(a,1)}),[]);let i=e.toasts.map(a=>{var o,c,u;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((c=t[a.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||F9[a.type],style:{...t.style,...(u=t[a.type])==null?void 0:u.style,...a.style}}});return{...e,toasts:i}},z9=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||D9()}),Lm=t=>(e,n)=>{let r=z9(e,t,n);return Wc({type:2,toast:r}),r.id},Ln=(t,e)=>Lm("blank")(t,e);Ln.error=Lm("error");Ln.success=Lm("success");Ln.loading=Lm("loading");Ln.custom=Lm("custom");Ln.dismiss=t=>{Wc({type:3,toastId:t})};Ln.remove=t=>Wc({type:4,toastId:t});Ln.promise=(t,e,n)=>{let r=Ln.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?Dv(e.success,i):void 0;return a?Ln.success(a,{id:r,...n,...n==null?void 0:n.success}):Ln.dismiss(r),i}).catch(i=>{let a=e.error?Dv(e.error,i):void 0;a?Ln.error(a,{id:r,...n,...n==null?void 0:n.error}):Ln.dismiss(r)}),t};var U9=(t,e)=>{Wc({type:1,toast:{id:t,height:e}})},$9=()=>{Wc({type:5,time:Date.now()})},Of=new Map,B9=1e3,q9=(t,e=B9)=>{if(Of.has(t))return;let n=setTimeout(()=>{Of.delete(t),Wc({type:4,toastId:t})},e);Of.set(t,n)},W9=t=>{let{toasts:e,pausedAt:n}=V9(t);x.useEffect(()=>{if(n)return;let a=Date.now(),o=e.map(c=>{if(c.duration===1/0)return;let u=(c.duration||0)+c.pauseDuration-(a-c.createdAt);if(u<0){c.visible&&Ln.dismiss(c.id);return}return setTimeout(()=>Ln.dismiss(c.id),u)});return()=>{o.forEach(c=>c&&clearTimeout(c))}},[e,n]);let r=x.useCallback(()=>{n&&Wc({type:6,time:Date.now()})},[n]),i=x.useCallback((a,o)=>{let{reverseOrder:c=!1,gutter:u=8,defaultPosition:d}=o||{},f=e.filter(_=>(_.position||d)===(a.position||d)&&_.height),p=f.findIndex(_=>_.id===a.id),g=f.filter((_,N)=>N<p&&_.visible).length;return f.filter(_=>_.visible).slice(...c?[g+1]:[0,g]).reduce((_,N)=>_+(N.height||0)+u,0)},[e]);return x.useEffect(()=>{e.forEach(a=>{if(a.dismissed)q9(a.id,a.removeDelay);else{let o=Of.get(a.id);o&&(clearTimeout(o),Of.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:U9,startPause:$9,endPause:r,calculateOffset:i}}},H9=Ja`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,G9=Ja`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,K9=Ja`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Z9=Il("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${H9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${G9} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${K9} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Y9=Ja`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Q9=Il("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Y9} 1s linear infinite;
`,X9=Ja`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,J9=Ja`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ez=Il("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${X9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${J9} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,tz=Il("div")`
  position: absolute;
`,nz=Il("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,rz=Ja`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sz=Il("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${rz} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,iz=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?x.createElement(sz,null,e):e:n==="blank"?null:x.createElement(nz,null,x.createElement(Q9,{...r}),n!=="loading"&&x.createElement(tz,null,n==="error"?x.createElement(Z9,{...r}):x.createElement(ez,{...r})))},az=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,oz=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,lz="0%{opacity:0;} 100%{opacity:1;}",cz="0%{opacity:1;} 100%{opacity:0;}",uz=Il("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,dz=Il("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,hz=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=eA()?[lz,cz]:[az(n),oz(n)];return{animation:e?`${Ja(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ja(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},fz=x.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?hz(t.position||e||"top-center",t.visible):{opacity:0},a=x.createElement(iz,{toast:t}),o=x.createElement(dz,{...t.ariaProps},Dv(t.message,t));return x.createElement(uz,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:a,message:o}):x.createElement(x.Fragment,null,a,o))});M9(x.createElement);var mz=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let a=x.useCallback(o=>{if(o){let c=()=>{let u=o.getBoundingClientRect().height;r(t,u)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return x.createElement("div",{ref:a,className:e,style:n},i)},pz=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:eA()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},gz=Zx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,hg=16,vz=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:a,containerClassName:o})=>{let{toasts:c,handlers:u}=W9(n);return x.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:hg,left:hg,right:hg,bottom:hg,pointerEvents:"none",...a},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let f=d.position||e,p=u.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),g=pz(f,p);return x.createElement(mz,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?gz:"",style:g},d.type==="custom"?Dv(d.message,d):i?i(d):x.createElement(fz,{toast:d,position:f}))}))},xe=Ln,oE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},xz=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},rA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=a>>2,p=(a&3)<<4|c>>4;let g=(c&15)<<2|d>>6,_=d&63;u||(_=64,o||(g=64)),r.push(n[f],n[p],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||d==null||p==null)throw new yz;const g=a<<2|c>>4;if(r.push(g),d!==64){const _=c<<4&240|d>>2;if(r.push(_),p!==64){const N=d<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _z=function(t){const e=nA(t);return rA.encodeByteArray(e,!0)},Lv=function(t){return _z(t).replace(/\./g,"")},sA=function(t){try{return rA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz=()=>wz().__FIREBASE_DEFAULTS__,jz=()=>{if(typeof process>"u"||typeof oE>"u")return;const t=oE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Nz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sA(t[1]);return e&&JSON.parse(e)},Yx=()=>{try{return bz()||jz()||Nz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iA=t=>{var e,n;return(n=(e=Yx())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aA=t=>{const e=iA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oA=()=>{var t;return(t=Yx())===null||t===void 0?void 0:t.config},lA=t=>{var e;return(e=Yx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lv(JSON.stringify(n)),Lv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ez(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vr())}function Cz(){var t;const e=(t=Yx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kz(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Tz(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Pz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Iz(){const t=Vr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Az(){return!Cz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rz(){try{return typeof indexedDB=="object"}catch{return!1}}function Mz(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz="FirebaseError";class xa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Oz,Object.setPrototypeOf(this,xa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fm.prototype.create)}}class Fm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?Dz(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new xa(i,c,r)}}function Dz(t,e){return t.replace(Lz,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Lz=/\{\$([^}]+)}/g;function Fz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fv(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(lE(a)&&lE(o)){if(!Fv(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function lE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function vf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Vz(t,e){const n=new zz(t,e);return n.subscribe.bind(n)}class zz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Uz(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=U0),i.error===void 0&&(i.error=U0),i.complete===void 0&&(i.complete=U0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Uz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function U0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(t){return t&&t._delegate?t._delegate:t}class fl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Sz;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qz(e))try{this.getOrInitializeService({instanceIdentifier:tc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=tc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tc){return this.instances.has(e)}getOptions(e=tc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=tc){return this.component?this.component.multipleInstances?e:tc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bz(t){return t===tc?void 0:t}function qz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $z(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(At||(At={}));const Hz={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},Gz=At.INFO,Kz={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},Zz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Kz[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class q1{constructor(e){this.name=e,this._logLevel=Gz,this._logHandler=Zz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in At))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...e),this._logHandler(this,At.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...e),this._logHandler(this,At.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,At.INFO,...e),this._logHandler(this,At.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,At.WARN,...e),this._logHandler(this,At.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...e),this._logHandler(this,At.ERROR,...e)}}const Yz=(t,e)=>e.some(n=>t instanceof n);let cE,uE;function Qz(){return cE||(cE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xz(){return uE||(uE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uA=new WeakMap,Pw=new WeakMap,dA=new WeakMap,$0=new WeakMap,W1=new WeakMap;function Jz(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(al(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uA.set(n,t)}).catch(()=>{}),W1.set(e,t),e}function eU(t){if(Pw.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Pw.set(t,e)}let Iw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return al(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tU(t){Iw=t(Iw)}function nU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(B0(this),e,...n);return dA.set(r,e.sort?e.sort():[e]),al(r)}:Xz().includes(t)?function(...e){return t.apply(B0(this),e),al(uA.get(this))}:function(...e){return al(t.apply(B0(this),e))}}function rU(t){return typeof t=="function"?nU(t):(t instanceof IDBTransaction&&eU(t),Yz(t,Qz())?new Proxy(t,Iw):t)}function al(t){if(t instanceof IDBRequest)return Jz(t);if($0.has(t))return $0.get(t);const e=rU(t);return e!==t&&($0.set(t,e),W1.set(e,t)),e}const B0=t=>W1.get(t);function sU(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=al(o);return r&&o.addEventListener("upgradeneeded",u=>{r(al(o.result),u.oldVersion,u.newVersion,al(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const iU=["get","getKey","getAll","getAllKeys","count"],aU=["put","add","delete","clear"],q0=new Map;function dE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(q0.get(e))return q0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=aU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||iU.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return q0.set(e,a),a}tU(t=>({...t,get:(e,n,r)=>dE(e,n)||t.get(e,n,r),has:(e,n)=>!!dE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Aw="@firebase/app",hE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new q1("@firebase/app"),cU="@firebase/app-compat",uU="@firebase/analytics-compat",dU="@firebase/analytics",hU="@firebase/app-check-compat",fU="@firebase/app-check",mU="@firebase/auth",pU="@firebase/auth-compat",gU="@firebase/database",vU="@firebase/data-connect",xU="@firebase/database-compat",yU="@firebase/functions",_U="@firebase/functions-compat",wU="@firebase/installations",bU="@firebase/installations-compat",jU="@firebase/messaging",NU="@firebase/messaging-compat",SU="@firebase/performance",EU="@firebase/performance-compat",CU="@firebase/remote-config",kU="@firebase/remote-config-compat",TU="@firebase/storage",PU="@firebase/storage-compat",IU="@firebase/firestore",AU="@firebase/vertexai-preview",RU="@firebase/firestore-compat",MU="firebase",OU="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="[DEFAULT]",DU={[Aw]:"fire-core",[cU]:"fire-core-compat",[dU]:"fire-analytics",[uU]:"fire-analytics-compat",[fU]:"fire-app-check",[hU]:"fire-app-check-compat",[mU]:"fire-auth",[pU]:"fire-auth-compat",[gU]:"fire-rtdb",[vU]:"fire-data-connect",[xU]:"fire-rtdb-compat",[yU]:"fire-fn",[_U]:"fire-fn-compat",[wU]:"fire-iid",[bU]:"fire-iid-compat",[jU]:"fire-fcm",[NU]:"fire-fcm-compat",[SU]:"fire-perf",[EU]:"fire-perf-compat",[CU]:"fire-rc",[kU]:"fire-rc-compat",[TU]:"fire-gcs",[PU]:"fire-gcs-compat",[IU]:"fire-fst",[RU]:"fire-fst-compat",[AU]:"fire-vertex","fire-js":"fire-js",[MU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=new Map,LU=new Map,Mw=new Map;function fE(t,e){try{t.container.addComponent(e)}catch(n){eo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cc(t){const e=t.name;if(Mw.has(e))return eo.debug(`There were multiple attempts to register component ${e}.`),!1;Mw.set(e,t);for(const n of Vv.values())fE(n,t);for(const n of LU.values())fE(n,t);return!0}function Qx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ol=new Fm("app","Firebase",FU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ol.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=OU;function hA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Rw,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ol.create("bad-app-name",{appName:String(i)});if(n||(n=oA()),!n)throw ol.create("no-options");const a=Vv.get(i);if(a){if(Fv(n,a.options)&&Fv(r,a.config))return a;throw ol.create("duplicate-app",{appName:i})}const o=new Wz(i);for(const u of Mw.values())o.addComponent(u);const c=new VU(n,r,o);return Vv.set(i,c),c}function H1(t=Rw){const e=Vv.get(t);if(!e&&t===Rw&&oA())return hA();if(!e)throw ol.create("no-app",{appName:t});return e}function ia(t,e,n){var r;let i=(r=DU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),eo.warn(c.join(" "));return}Cc(new fl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU="firebase-heartbeat-database",UU=1,um="firebase-heartbeat-store";let W0=null;function fA(){return W0||(W0=sU(zU,UU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(um)}catch(n){console.warn(n)}}}}).catch(t=>{throw ol.create("idb-open",{originalErrorMessage:t.message})})),W0}async function $U(t){try{const n=(await fA()).transaction(um),r=await n.objectStore(um).get(mA(t));return await n.done,r}catch(e){if(e instanceof xa)eo.warn(e.message);else{const n=ol.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});eo.warn(n.message)}}}async function mE(t,e){try{const r=(await fA()).transaction(um,"readwrite");await r.objectStore(um).put(e,mA(t)),await r.done}catch(n){if(n instanceof xa)eo.warn(n.message);else{const r=ol.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});eo.warn(r.message)}}}function mA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU=1024,qU=30*24*60*60*1e3;class WU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=pE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=qU}),this._storage.overwrite(this._heartbeatsCache))}catch(r){eo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pE(),{heartbeatsToSend:r,unsentEntries:i}=HU(this._heartbeatsCache.heartbeats),a=Lv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return eo.warn(n),""}}}function pE(){return new Date().toISOString().substring(0,10)}function HU(t,e=BU){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),gE(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rz()?Mz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $U(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return mE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return mE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function gE(t){return Lv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t){Cc(new fl("platform-logger",e=>new oU(e),"PRIVATE")),Cc(new fl("heartbeat",e=>new WU(e),"PRIVATE")),ia(Aw,hE,t),ia(Aw,hE,"esm2017"),ia("fire-js","")}KU("");var Zi=function(){return Zi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zi.apply(this,arguments)};function zm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ZU(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function pA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YU=pA,gA=new Fm("auth","Firebase",pA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new q1("@firebase/auth");function QU(t,...e){zv.logLevel<=At.WARN&&zv.warn(`Auth (${Hc}): ${t}`,...e)}function Wg(t,...e){zv.logLevel<=At.ERROR&&zv.error(`Auth (${Hc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,...e){throw K1(t,...e)}function aa(t,...e){return K1(t,...e)}function G1(t,e,n){const r=Object.assign(Object.assign({},YU()),{[e]:n});return new Fm("auth","Firebase",r).create(e,{appName:t.name})}function Si(t){return G1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XU(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ai(t,"argument-error"),G1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function K1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gA.create(t,...e)}function lt(t,e,...n){if(!t)throw K1(e,...n)}function Ba(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wg(e),new Error(e)}function to(t,e){t||Ba(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JU(){return vE()==="http:"||vE()==="https:"}function vE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JU()||Tz()||"connection"in navigator)?navigator.onLine:!0}function t7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.shortDelay=e,this.longDelay=n,to(n>e,"Short delay should be less than long delay!"),this.isMobile=Ez()||Pz()}get(){return e7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t,e){to(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=new Um(3e4,6e4);function po(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Oi(t,e,n,r,i={}){return xA(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Vm(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return kz()||(d.referrerPolicy="no-referrer"),vA.fetch()(yA(t,t.config.apiHost,n,c),d)})}async function xA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},n7),e);try{const i=new i7(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw fg(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fg(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw fg(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw fg(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw G1(t,f,d);ai(t,f)}}catch(i){if(i instanceof xa)throw i;ai(t,"network-request-failed",{message:String(i)})}}async function $m(t,e,n,r,i={}){const a=await Oi(t,e,n,r,i);return"mfaPendingCredential"in a&&ai(t,"multi-factor-auth-required",{_serverResponse:a}),a}function yA(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Z1(t.config,i):`${t.config.apiScheme}://${i}`}function s7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class i7{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(aa(this.auth,"network-request-failed")),r7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=aa(t,e,r);return i.customData._tokenResponse=n,i}function xE(t){return t!==void 0&&t.enterprise!==void 0}class a7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return s7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function o7(t,e){return Oi(t,"GET","/v2/recaptchaConfig",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l7(t,e){return Oi(t,"POST","/v1/accounts:delete",e)}async function _A(t,e){return Oi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function c7(t,e=!1){const n=Ut(t),r=await n.getIdToken(e),i=Y1(r);lt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Df(H0(i.auth_time)),issuedAtTime:Df(H0(i.iat)),expirationTime:Df(H0(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function H0(t){return Number(t)*1e3}function Y1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wg("JWT malformed, contained fewer than 3 sections"),null;try{const i=sA(n);return i?JSON.parse(i):(Wg("Failed to decode base64 JWT payload"),null)}catch(i){return Wg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yE(t){const e=Y1(t);return lt(e,"internal-error"),lt(typeof e.exp<"u","internal-error"),lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof xa&&u7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function u7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Df(this.lastLoginAt),this.creationTime=Df(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uv(t){var e;const n=t.auth,r=await t.getIdToken(),i=await kc(t,_A(n,{idToken:r}));lt(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?wA(a.providerUserInfo):[],c=h7(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Dw(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function xf(t){const e=Ut(t);await Uv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function h7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wA(t){return t.map(e=>{var{providerId:n}=e,r=zm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f7(t,e){const n=await xA(t,{},async()=>{const r=Vm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=yA(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",vA.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function m7(t,e){return Oi(t,"POST","/v2/accounts:revokeToken",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lt(e.idToken,"internal-error"),lt(typeof e.idToken<"u","internal-error"),lt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){lt(e.length!==0,"internal-error");const n=yE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await f7(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new id;return r&&(lt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(lt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(lt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new id,this.toJSON())}_performRefresh(){return Ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t,e){lt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=zm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new d7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Dw(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await kc(this,this.stsTokenManager.getToken(this.auth,e));return lt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return c7(this,e)}reload(){return xf(this)}_assign(e){this!==e&&(lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Uv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qs(this.auth.app))return Promise.reject(Si(this.auth));const e=await this.getIdToken();return await kc(this,l7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,o,c,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(c=n.tenantId)!==null&&c!==void 0?c:void 0,S=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(d=n.createdAt)!==null&&d!==void 0?d:void 0,y=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:E,emailVerified:I,isAnonymous:O,providerData:q,stsTokenManager:R}=n;lt(E&&R,e,"internal-error");const V=id.fromJSON(this.name,R);lt(typeof E=="string",e,"internal-error"),ko(p,e.name),ko(g,e.name),lt(typeof I=="boolean",e,"internal-error"),lt(typeof O=="boolean",e,"internal-error"),ko(_,e.name),ko(N,e.name),ko(b,e.name),ko(S,e.name),ko(w,e.name),ko(y,e.name);const U=new qa({uid:E,auth:e,email:g,emailVerified:I,displayName:p,isAnonymous:O,photoURL:N,phoneNumber:_,tenantId:b,stsTokenManager:V,createdAt:w,lastLoginAt:y});return q&&Array.isArray(q)&&(U.providerData=q.map(k=>Object.assign({},k))),S&&(U._redirectEventId=S),U}static async _fromIdTokenResponse(e,n,r=!1){const i=new id;i.updateFromServerResponse(n);const a=new qa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Uv(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];lt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?wA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new id;c.updateFromIdToken(r);const u=new qa({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Dw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=new Map;function Wa(t){to(t instanceof Function,"Expected a class definition");let e=_E.get(t);return e?(to(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_E.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bA.type="NONE";const wE=bA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t,e,n){return`firebase:${t}:${e}:${n}`}class ad{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Hg(this.userKey,i.apiKey,a),this.fullPersistenceKey=Hg("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ad(Wa(wE),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Wa(wE);const o=Hg(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){const p=qa._fromJSON(e,f);d!==a&&(c=p),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new ad(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new ad(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kA(e))return"Blackberry";if(TA(e))return"Webos";if(NA(e))return"Safari";if((e.includes("chrome/")||SA(e))&&!e.includes("edge/"))return"Chrome";if(CA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jA(t=Vr()){return/firefox\//i.test(t)}function NA(t=Vr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SA(t=Vr()){return/crios\//i.test(t)}function EA(t=Vr()){return/iemobile/i.test(t)}function CA(t=Vr()){return/android/i.test(t)}function kA(t=Vr()){return/blackberry/i.test(t)}function TA(t=Vr()){return/webos/i.test(t)}function Q1(t=Vr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function p7(t=Vr()){var e;return Q1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function g7(){return Iz()&&document.documentMode===10}function PA(t=Vr()){return Q1(t)||CA(t)||TA(t)||kA(t)||/windows phone/i.test(t)||EA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t,e=[]){let n;switch(t){case"Browser":n=bE(Vr());break;case"Worker":n=`${bE(Vr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x7(t,e={}){return Oi(t,"GET","/v2/passwordPolicy",po(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7=6;class _7{constructor(e){var n,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:y7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jE(this),this.idTokenSubscription=new jE(this),this.beforeStateQueue=new v7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wa(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ad.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _A(this,{idToken:e}),r=await qa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Uv(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qs(this.app))return Promise.reject(Si(this));const n=e?Ut(e):null;return n&&lt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qs(this.app)?Promise.reject(Si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qs(this.app)?Promise.reject(Si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await x7(this),n=new _7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fm("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await m7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wa(e)||this._popupRedirectResolver;lt(n,this,"argument-error"),this.redirectPersistenceManager=await ad.create(this,[Wa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(lt(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&QU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function go(t){return Ut(t)}class jE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vz(n=>this.observer=n)}get next(){return lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function b7(t){Xx=t}function AA(t){return Xx.loadJS(t)}function j7(){return Xx.recaptchaEnterpriseScript}function N7(){return Xx.gapiScript}function S7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const E7="recaptcha-enterprise",C7="NO_RECAPTCHA";class k7{constructor(e){this.type=E7,this.auth=go(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{o7(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new a7(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;xE(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(C7)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&xE(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=j7();u.length!==0&&(u+=c),AA(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function NE(t,e,n,r=!1){const i=new k7(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Lw(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await NE(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await NE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T7(t,e){const n=Qx(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Fv(a,e??{}))return i;ai(i,"already-initialized")}return n.initialize({options:e})}function P7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function I7(t,e,n){const r=go(t);lt(r._canInitEmulator,r,"emulator-config-failed"),lt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=RA(e),{host:o,port:c}=A7(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),R7()}function RA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function A7(t){const e=RA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:SE(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:SE(o)}}}function SE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function R7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ba("not implemented")}_getIdTokenResponse(e){return Ba("not implemented")}_linkToIdToken(e,n){return Ba("not implemented")}_getReauthenticationResolver(e){return Ba("not implemented")}}async function M7(t,e){return Oi(t,"POST","/v1/accounts:update",e)}async function O7(t,e){return Oi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D7(t,e){return $m(t,"POST","/v1/accounts:signInWithPassword",po(t,e))}async function L7(t,e){return Oi(t,"POST","/v1/accounts:sendOobCode",po(t,e))}async function F7(t,e){return L7(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V7(t,e){return $m(t,"POST","/v1/accounts:signInWithEmailLink",po(t,e))}async function z7(t,e){return $m(t,"POST","/v1/accounts:signInWithEmailLink",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm extends X1{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new dm(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new dm(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lw(e,n,"signInWithPassword",D7);case"emailLink":return V7(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lw(e,r,"signUpPassword",O7);case"emailLink":return z7(e,{idToken:n,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function od(t,e){return $m(t,"POST","/v1/accounts:signInWithIdp",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7="http://localhost";class Tc extends X1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Tc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ai("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=zm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Tc(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return od(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,od(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,od(e,n)}buildRequest(){const e={requestUri:U7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vm(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function B7(t){const e=gf(vf(t)).link,n=e?gf(vf(e)).deep_link_id:null,r=gf(vf(t)).deep_link_id;return(r?gf(vf(r)).link:null)||r||n||e||t}class J1{constructor(e){var n,r,i,a,o,c;const u=gf(vf(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=$7((i=u.mode)!==null&&i!==void 0?i:null);lt(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=B7(e);try{return new J1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(e,n){return dm._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=J1.parseLink(n);return lt(r,"argument-error"),dm._fromEmailAndCode(e,r.code,r.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm extends ej{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends Bm{constructor(){super("facebook.com")}static credential(e){return Tc._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zo.credential(e.oauthAccessToken)}catch{return null}}}zo.FACEBOOK_SIGN_IN_METHOD="facebook.com";zo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends Bm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Tc._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return za.credentialFromTaggedObject(e)}static credentialFromError(e){return za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return za.credential(n,r)}catch{return null}}}za.GOOGLE_SIGN_IN_METHOD="google.com";za.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends Bm{constructor(){super("github.com")}static credential(e){return Tc._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uo.credential(e.oauthAccessToken)}catch{return null}}}Uo.GITHUB_SIGN_IN_METHOD="github.com";Uo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends Bm{constructor(){super("twitter.com")}static credential(e,n){return Tc._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $o.credential(n,r)}catch{return null}}}$o.TWITTER_SIGN_IN_METHOD="twitter.com";$o.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q7(t,e){return $m(t,"POST","/v1/accounts:signUp",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await qa._fromIdTokenResponse(e,r,i),o=EE(r);return new Pc({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=EE(r);return new Pc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function EE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v extends xa{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$v.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $v(e,n,r,i)}}function MA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?$v._fromErrorAndOperation(t,a,e,r):a})}async function W7(t,e,n=!1){const r=await kc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(t,e,n=!1){const{auth:r}=t;if(Qs(r.app))return Promise.reject(Si(r));const i="reauthenticate";try{const a=await kc(t,MA(r,i,e,t),n);lt(a.idToken,r,"internal-error");const o=Y1(a.idToken);lt(o,r,"internal-error");const{sub:c}=o;return lt(t.uid===c,r,"user-mismatch"),Pc._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ai(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e,n=!1){if(Qs(t.app))return Promise.reject(Si(t));const r="signIn",i=await MA(t,r,e),a=await Pc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function H7(t,e){return DA(go(t),e)}async function CE(t,e){return OA(Ut(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(t,e,n){var r;lt(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),lt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(lt(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(lt(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(t){const e=go(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function FA(t,e,n){if(Qs(t.app))return Promise.reject(Si(t));const r=go(t),o=await Lw(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",q7).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&LA(t),u}),c=await Pc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function K7(t,e,n){return Qs(t.app)?Promise.reject(Si(t)):H7(Ut(t),ml.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LA(t),r})}async function G0(t,e){const n=Ut(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&G7(n.auth,i,e);const{email:a}=await F7(n.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z7(t,e){return Oi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hm(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ut(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await kc(r,Z7(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Y7(t,e){const n=Ut(t);return Qs(n.auth.app)?Promise.reject(Si(n.auth)):VA(n,e,null)}function Q7(t,e){return VA(Ut(t),null,e)}async function VA(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const o=await kc(t,M7(r,a));await t._updateTokensIfNecessary(o,!0)}function X7(t,e,n,r){return Ut(t).onIdTokenChanged(e,n,r)}function J7(t,e,n){return Ut(t).beforeAuthStateChanged(e,n)}function e$(t,e,n,r){return Ut(t).onAuthStateChanged(e,n,r)}function t$(t){return Ut(t).signOut()}async function n$(t){return Ut(t).delete()}const Bv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bv,"1"),this.storage.removeItem(Bv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$=1e3,s$=10;class UA extends zA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);g7()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,s$):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},r$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UA.type="LOCAL";const i$=UA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A extends zA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$A.type="SESSION";const BA=$A;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Jx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await a$(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=tj("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(g.data.response);break;default:clearTimeout(f),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(){return window}function l$(t){oa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(){return typeof oa().WorkerGlobalScope<"u"&&typeof oa().importScripts=="function"}async function c$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function d$(){return qA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="firebaseLocalStorageDb",h$=1,qv="firebaseLocalStorage",HA="fbase_key";class qm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ey(t,e){return t.transaction([qv],e?"readwrite":"readonly").objectStore(qv)}function f$(){const t=indexedDB.deleteDatabase(WA);return new qm(t).toPromise()}function Fw(){const t=indexedDB.open(WA,h$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(qv,{keyPath:HA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(qv)?e(r):(r.close(),await f$(),e(await Fw()))})})}async function kE(t,e,n){const r=ey(t,!0).put({[HA]:e,value:n});return new qm(r).toPromise()}async function m$(t,e){const n=ey(t,!1).get(e),r=await new qm(n).toPromise();return r===void 0?null:r.value}function TE(t,e){const n=ey(t,!0).delete(e);return new qm(n).toPromise()}const p$=800,g$=3;class GA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>g$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jx._getInstance(d$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await c$(),!this.activeServiceWorker)return;this.sender=new o$(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||u$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fw();return await kE(e,Bv,"1"),await TE(e,Bv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>kE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>m$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>TE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ey(i,!1).getAll();return new qm(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GA.type="LOCAL";const v$=GA;new Um(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t,e){return e?Wa(e):(lt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj extends X1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return od(e,this._buildIdpRequest())}_linkToIdToken(e,n){return od(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return od(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function x$(t){return DA(t.auth,new nj(t),t.bypassAuthState)}function y$(t){const{auth:e,user:n}=t;return lt(n,e,"internal-error"),OA(n,new nj(t),t.bypassAuthState)}async function _$(t){const{auth:e,user:n}=t;return lt(n,e,"internal-error"),W7(n,new nj(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return x$;case"linkViaPopup":case"linkViaRedirect":return _$;case"reauthViaPopup":case"reauthViaRedirect":return y$;default:ai(this.auth,"internal-error")}}resolve(e){to(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){to(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$=new Um(2e3,1e4);class Xu extends ZA{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Xu.currentPopupAction&&Xu.currentPopupAction.cancel(),Xu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return lt(e,this.auth,"internal-error"),e}async onExecution(){to(this.filter.length===1,"Popup operations only handle one event");const e=tj();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(aa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(aa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(aa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,w$.get())};e()}}Xu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$="pendingRedirect",Gg=new Map;class j$ extends ZA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Gg.get(this.auth._key());if(!e){try{const r=await N$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Gg.set(this.auth._key(),e)}return this.bypassAuthState||Gg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function N$(t,e){const n=QA(e),r=YA(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function S$(t,e){return YA(t)._set(QA(e),"true")}function E$(t,e){Gg.set(t._key(),e)}function YA(t){return Wa(t._redirectPersistence)}function QA(t){return Hg(b$,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(t,e,n){return k$(t,e,n)}async function k$(t,e,n){if(Qs(t.app))return Promise.reject(Si(t));const r=go(t);XU(t,e,ej),await r._initializationPromise;const i=KA(r,n);return await S$(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function T$(t,e){return await go(t)._initializationPromise,XA(t,e,!1)}async function XA(t,e,n=!1){if(Qs(t.app))return Promise.reject(Si(t));const r=go(t),i=KA(r,e),o=await new j$(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$=10*60*1e3;class I${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!JA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(aa(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P$&&this.cachedEventUids.clear(),this.cachedEventUids.has(PE(e))}saveEventToCache(e){this.cachedEventUids.add(PE(e)),this.lastProcessedEventTime=Date.now()}}function PE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function A$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R$(t,e={}){return Oi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O$=/^https?/;async function D$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await R$(t);for(const n of e)try{if(L$(n))return}catch{}ai(t,"unauthorized-domain")}function L$(t){const e=Ow(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!O$.test(n))return!1;if(M$.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F$=new Um(3e4,6e4);function IE(){const t=oa().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function V$(t){return new Promise((e,n)=>{var r,i,a;function o(){IE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IE(),n(aa(t,"network-request-failed"))},timeout:F$.get()})}if(!((i=(r=oa().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=oa().gapi)===null||a===void 0)&&a.load)o();else{const c=S7("iframefcb");return oa()[c]=()=>{gapi.load?o():n(aa(t,"network-request-failed"))},AA(`${N7()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Kg=null,e})}let Kg=null;function z$(t){return Kg=Kg||V$(t),Kg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$=new Um(5e3,15e3),$$="__/auth/iframe",B$="emulator/auth/iframe",q$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function H$(t){const e=t.config;lt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Z1(e,B$):`https://${t.config.authDomain}/${$$}`,r={apiKey:e.apiKey,appName:t.name,v:Hc},i=W$.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Vm(r).slice(1)}`}async function G$(t){const e=await z$(t),n=oa().gapi;return lt(n,t,"internal-error"),e.open({where:document.body,url:H$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q$,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=aa(t,"network-request-failed"),c=oa().setTimeout(()=>{a(o)},U$.get());function u(){oa().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Z$=500,Y$=600,Q$="_blank",X$="http://localhost";class AE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J$(t,e,n,r=Z$,i=Y$){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},K$),{width:r.toString(),height:i.toString(),top:a,left:o}),d=Vr().toLowerCase();n&&(c=SA(d)?Q$:n),jA(d)&&(e=e||X$,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[_,N])=>`${g}${_}=${N},`,"");if(p7(d)&&c!=="_self")return eB(e||"",c),new AE(null);const p=window.open(e||"",c,f);lt(p,t,"popup-blocked");try{p.focus()}catch{}return new AE(p)}function eB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="__/auth/handler",nB="emulator/auth/handler",rB=encodeURIComponent("fac");async function RE(t,e,n,r,i,a){lt(t.config.authDomain,t,"auth-domain-config-required"),lt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hc,eventId:i};if(e instanceof ej){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Fz(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Bm){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${rB}=${encodeURIComponent(u)}`:"";return`${sB(t)}?${Vm(c).slice(1)}${d}`}function sB({config:t}){return t.emulator?Z1(t,nB):`https://${t.authDomain}/${tB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="webStorageSupport";class iB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BA,this._completeRedirectFn=XA,this._overrideRedirectResult=E$}async _openPopup(e,n,r,i){var a;to((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await RE(e,n,r,Ow(),i);return J$(e,o,tj())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await RE(e,n,r,Ow(),i);return l$(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(to(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await G$(e),r=new I$(e);return n.register("authEvent",i=>(lt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(K0,{type:K0},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[K0];o!==void 0&&n(!!o),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PA()||NA()||Q1()}}const aB=iB;var ME="@firebase/auth",OE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cB(t){Cc(new fl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;lt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IA(t)},d=new w7(r,i,a,u);return P7(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Cc(new fl("auth-internal",e=>{const n=go(e.getProvider("auth").getImmediate());return(r=>new oB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ia(ME,OE,lB(t)),ia(ME,OE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=5*60,dB=lA("authIdTokenMaxAge")||uB;let DE=null;const hB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dB)return;const i=n==null?void 0:n.token;DE!==i&&(DE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function fB(t=H1()){const e=Qx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=T7(t,{popupRedirectResolver:aB,persistence:[v$,i$,BA]}),r=lA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=hB(a.toString());J7(n,o,()=>o(n.currentUser)),X7(n,c=>o(c))}}const i=iA("auth");return i&&I7(n,`http://${i}`),n}function mB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}b7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=aa("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",mB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cB("Browser");var LE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fc,eR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,V){function U(){}U.prototype=V.prototype,R.D=V.prototype,R.prototype=new U,R.prototype.constructor=R,R.C=function(k,F,D){for(var P=Array(arguments.length-2),H=2;H<arguments.length;H++)P[H-2]=arguments[H];return V.prototype[F].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,V,U){U||(U=0);var k=Array(16);if(typeof V=="string")for(var F=0;16>F;++F)k[F]=V.charCodeAt(U++)|V.charCodeAt(U++)<<8|V.charCodeAt(U++)<<16|V.charCodeAt(U++)<<24;else for(F=0;16>F;++F)k[F]=V[U++]|V[U++]<<8|V[U++]<<16|V[U++]<<24;V=R.g[0],U=R.g[1],F=R.g[2];var D=R.g[3],P=V+(D^U&(F^D))+k[0]+3614090360&4294967295;V=U+(P<<7&4294967295|P>>>25),P=D+(F^V&(U^F))+k[1]+3905402710&4294967295,D=V+(P<<12&4294967295|P>>>20),P=F+(U^D&(V^U))+k[2]+606105819&4294967295,F=D+(P<<17&4294967295|P>>>15),P=U+(V^F&(D^V))+k[3]+3250441966&4294967295,U=F+(P<<22&4294967295|P>>>10),P=V+(D^U&(F^D))+k[4]+4118548399&4294967295,V=U+(P<<7&4294967295|P>>>25),P=D+(F^V&(U^F))+k[5]+1200080426&4294967295,D=V+(P<<12&4294967295|P>>>20),P=F+(U^D&(V^U))+k[6]+2821735955&4294967295,F=D+(P<<17&4294967295|P>>>15),P=U+(V^F&(D^V))+k[7]+4249261313&4294967295,U=F+(P<<22&4294967295|P>>>10),P=V+(D^U&(F^D))+k[8]+1770035416&4294967295,V=U+(P<<7&4294967295|P>>>25),P=D+(F^V&(U^F))+k[9]+2336552879&4294967295,D=V+(P<<12&4294967295|P>>>20),P=F+(U^D&(V^U))+k[10]+4294925233&4294967295,F=D+(P<<17&4294967295|P>>>15),P=U+(V^F&(D^V))+k[11]+2304563134&4294967295,U=F+(P<<22&4294967295|P>>>10),P=V+(D^U&(F^D))+k[12]+1804603682&4294967295,V=U+(P<<7&4294967295|P>>>25),P=D+(F^V&(U^F))+k[13]+4254626195&4294967295,D=V+(P<<12&4294967295|P>>>20),P=F+(U^D&(V^U))+k[14]+2792965006&4294967295,F=D+(P<<17&4294967295|P>>>15),P=U+(V^F&(D^V))+k[15]+1236535329&4294967295,U=F+(P<<22&4294967295|P>>>10),P=V+(F^D&(U^F))+k[1]+4129170786&4294967295,V=U+(P<<5&4294967295|P>>>27),P=D+(U^F&(V^U))+k[6]+3225465664&4294967295,D=V+(P<<9&4294967295|P>>>23),P=F+(V^U&(D^V))+k[11]+643717713&4294967295,F=D+(P<<14&4294967295|P>>>18),P=U+(D^V&(F^D))+k[0]+3921069994&4294967295,U=F+(P<<20&4294967295|P>>>12),P=V+(F^D&(U^F))+k[5]+3593408605&4294967295,V=U+(P<<5&4294967295|P>>>27),P=D+(U^F&(V^U))+k[10]+38016083&4294967295,D=V+(P<<9&4294967295|P>>>23),P=F+(V^U&(D^V))+k[15]+3634488961&4294967295,F=D+(P<<14&4294967295|P>>>18),P=U+(D^V&(F^D))+k[4]+3889429448&4294967295,U=F+(P<<20&4294967295|P>>>12),P=V+(F^D&(U^F))+k[9]+568446438&4294967295,V=U+(P<<5&4294967295|P>>>27),P=D+(U^F&(V^U))+k[14]+3275163606&4294967295,D=V+(P<<9&4294967295|P>>>23),P=F+(V^U&(D^V))+k[3]+4107603335&4294967295,F=D+(P<<14&4294967295|P>>>18),P=U+(D^V&(F^D))+k[8]+1163531501&4294967295,U=F+(P<<20&4294967295|P>>>12),P=V+(F^D&(U^F))+k[13]+2850285829&4294967295,V=U+(P<<5&4294967295|P>>>27),P=D+(U^F&(V^U))+k[2]+4243563512&4294967295,D=V+(P<<9&4294967295|P>>>23),P=F+(V^U&(D^V))+k[7]+1735328473&4294967295,F=D+(P<<14&4294967295|P>>>18),P=U+(D^V&(F^D))+k[12]+2368359562&4294967295,U=F+(P<<20&4294967295|P>>>12),P=V+(U^F^D)+k[5]+4294588738&4294967295,V=U+(P<<4&4294967295|P>>>28),P=D+(V^U^F)+k[8]+2272392833&4294967295,D=V+(P<<11&4294967295|P>>>21),P=F+(D^V^U)+k[11]+1839030562&4294967295,F=D+(P<<16&4294967295|P>>>16),P=U+(F^D^V)+k[14]+4259657740&4294967295,U=F+(P<<23&4294967295|P>>>9),P=V+(U^F^D)+k[1]+2763975236&4294967295,V=U+(P<<4&4294967295|P>>>28),P=D+(V^U^F)+k[4]+1272893353&4294967295,D=V+(P<<11&4294967295|P>>>21),P=F+(D^V^U)+k[7]+4139469664&4294967295,F=D+(P<<16&4294967295|P>>>16),P=U+(F^D^V)+k[10]+3200236656&4294967295,U=F+(P<<23&4294967295|P>>>9),P=V+(U^F^D)+k[13]+681279174&4294967295,V=U+(P<<4&4294967295|P>>>28),P=D+(V^U^F)+k[0]+3936430074&4294967295,D=V+(P<<11&4294967295|P>>>21),P=F+(D^V^U)+k[3]+3572445317&4294967295,F=D+(P<<16&4294967295|P>>>16),P=U+(F^D^V)+k[6]+76029189&4294967295,U=F+(P<<23&4294967295|P>>>9),P=V+(U^F^D)+k[9]+3654602809&4294967295,V=U+(P<<4&4294967295|P>>>28),P=D+(V^U^F)+k[12]+3873151461&4294967295,D=V+(P<<11&4294967295|P>>>21),P=F+(D^V^U)+k[15]+530742520&4294967295,F=D+(P<<16&4294967295|P>>>16),P=U+(F^D^V)+k[2]+3299628645&4294967295,U=F+(P<<23&4294967295|P>>>9),P=V+(F^(U|~D))+k[0]+4096336452&4294967295,V=U+(P<<6&4294967295|P>>>26),P=D+(U^(V|~F))+k[7]+1126891415&4294967295,D=V+(P<<10&4294967295|P>>>22),P=F+(V^(D|~U))+k[14]+2878612391&4294967295,F=D+(P<<15&4294967295|P>>>17),P=U+(D^(F|~V))+k[5]+4237533241&4294967295,U=F+(P<<21&4294967295|P>>>11),P=V+(F^(U|~D))+k[12]+1700485571&4294967295,V=U+(P<<6&4294967295|P>>>26),P=D+(U^(V|~F))+k[3]+2399980690&4294967295,D=V+(P<<10&4294967295|P>>>22),P=F+(V^(D|~U))+k[10]+4293915773&4294967295,F=D+(P<<15&4294967295|P>>>17),P=U+(D^(F|~V))+k[1]+2240044497&4294967295,U=F+(P<<21&4294967295|P>>>11),P=V+(F^(U|~D))+k[8]+1873313359&4294967295,V=U+(P<<6&4294967295|P>>>26),P=D+(U^(V|~F))+k[15]+4264355552&4294967295,D=V+(P<<10&4294967295|P>>>22),P=F+(V^(D|~U))+k[6]+2734768916&4294967295,F=D+(P<<15&4294967295|P>>>17),P=U+(D^(F|~V))+k[13]+1309151649&4294967295,U=F+(P<<21&4294967295|P>>>11),P=V+(F^(U|~D))+k[4]+4149444226&4294967295,V=U+(P<<6&4294967295|P>>>26),P=D+(U^(V|~F))+k[11]+3174756917&4294967295,D=V+(P<<10&4294967295|P>>>22),P=F+(V^(D|~U))+k[2]+718787259&4294967295,F=D+(P<<15&4294967295|P>>>17),P=U+(D^(F|~V))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+V&4294967295,R.g[1]=R.g[1]+(F+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+F&4294967295,R.g[3]=R.g[3]+D&4294967295}r.prototype.u=function(R,V){V===void 0&&(V=R.length);for(var U=V-this.blockSize,k=this.B,F=this.h,D=0;D<V;){if(F==0)for(;D<=U;)i(this,R,D),D+=this.blockSize;if(typeof R=="string"){for(;D<V;)if(k[F++]=R.charCodeAt(D++),F==this.blockSize){i(this,k),F=0;break}}else for(;D<V;)if(k[F++]=R[D++],F==this.blockSize){i(this,k),F=0;break}}this.h=F,this.o+=V},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var V=1;V<R.length-8;++V)R[V]=0;var U=8*this.o;for(V=R.length-8;V<R.length;++V)R[V]=U&255,U/=256;for(this.u(R),R=Array(16),V=U=0;4>V;++V)for(var k=0;32>k;k+=8)R[U++]=this.g[V]>>>k&255;return R};function a(R,V){var U=c;return Object.prototype.hasOwnProperty.call(U,R)?U[R]:U[R]=V(R)}function o(R,V){this.h=V;for(var U=[],k=!0,F=R.length-1;0<=F;F--){var D=R[F]|0;k&&D==V||(U[F]=D,k=!1)}this.g=U}var c={};function u(R){return-128<=R&&128>R?a(R,function(V){return new o([V|0],0>V?-1:0)}):new o([R|0],0>R?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return p;if(0>R)return S(d(-R));for(var V=[],U=1,k=0;R>=U;k++)V[k]=R/U|0,U*=4294967296;return new o(V,0)}function f(R,V){if(R.length==0)throw Error("number format error: empty string");if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(R.charAt(0)=="-")return S(f(R.substring(1),V));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var U=d(Math.pow(V,8)),k=p,F=0;F<R.length;F+=8){var D=Math.min(8,R.length-F),P=parseInt(R.substring(F,F+D),V);8>D?(D=d(Math.pow(V,D)),k=k.j(D).add(d(P))):(k=k.j(U),k=k.add(d(P)))}return k}var p=u(0),g=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-S(this).m();for(var R=0,V=1,U=0;U<this.g.length;U++){var k=this.i(U);R+=(0<=k?k:4294967296+k)*V,V*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(b(this))return"-"+S(this).toString(R);for(var V=d(Math.pow(R,6)),U=this,k="";;){var F=I(U,V).g;U=w(U,F.j(V));var D=((0<U.g.length?U.g[0]:U.h)>>>0).toString(R);if(U=F,N(U))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(var V=0;V<R.g.length;V++)if(R.g[V]!=0)return!1;return!0}function b(R){return R.h==-1}t.l=function(R){return R=w(this,R),b(R)?-1:N(R)?0:1};function S(R){for(var V=R.g.length,U=[],k=0;k<V;k++)U[k]=~R.g[k];return new o(U,~R.h).add(g)}t.abs=function(){return b(this)?S(this):this},t.add=function(R){for(var V=Math.max(this.g.length,R.g.length),U=[],k=0,F=0;F<=V;F++){var D=k+(this.i(F)&65535)+(R.i(F)&65535),P=(D>>>16)+(this.i(F)>>>16)+(R.i(F)>>>16);k=P>>>16,D&=65535,P&=65535,U[F]=P<<16|D}return new o(U,U[U.length-1]&-2147483648?-1:0)};function w(R,V){return R.add(S(V))}t.j=function(R){if(N(this)||N(R))return p;if(b(this))return b(R)?S(this).j(S(R)):S(S(this).j(R));if(b(R))return S(this.j(S(R)));if(0>this.l(_)&&0>R.l(_))return d(this.m()*R.m());for(var V=this.g.length+R.g.length,U=[],k=0;k<2*V;k++)U[k]=0;for(k=0;k<this.g.length;k++)for(var F=0;F<R.g.length;F++){var D=this.i(k)>>>16,P=this.i(k)&65535,H=R.i(F)>>>16,te=R.i(F)&65535;U[2*k+2*F]+=P*te,y(U,2*k+2*F),U[2*k+2*F+1]+=D*te,y(U,2*k+2*F+1),U[2*k+2*F+1]+=P*H,y(U,2*k+2*F+1),U[2*k+2*F+2]+=D*H,y(U,2*k+2*F+2)}for(k=0;k<V;k++)U[k]=U[2*k+1]<<16|U[2*k];for(k=V;k<2*V;k++)U[k]=0;return new o(U,0)};function y(R,V){for(;(R[V]&65535)!=R[V];)R[V+1]+=R[V]>>>16,R[V]&=65535,V++}function E(R,V){this.g=R,this.h=V}function I(R,V){if(N(V))throw Error("division by zero");if(N(R))return new E(p,p);if(b(R))return V=I(S(R),V),new E(S(V.g),S(V.h));if(b(V))return V=I(R,S(V)),new E(S(V.g),V.h);if(30<R.g.length){if(b(R)||b(V))throw Error("slowDivide_ only works with positive integers.");for(var U=g,k=V;0>=k.l(R);)U=O(U),k=O(k);var F=q(U,1),D=q(k,1);for(k=q(k,2),U=q(U,2);!N(k);){var P=D.add(k);0>=P.l(R)&&(F=F.add(U),D=P),k=q(k,1),U=q(U,1)}return V=w(R,F.j(V)),new E(F,V)}for(F=p;0<=R.l(V);){for(U=Math.max(1,Math.floor(R.m()/V.m())),k=Math.ceil(Math.log(U)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=d(U),P=D.j(V);b(P)||0<P.l(R);)U-=k,D=d(U),P=D.j(V);N(D)&&(D=g),F=F.add(D),R=w(R,P)}return new E(F,R)}t.A=function(R){return I(this,R).h},t.and=function(R){for(var V=Math.max(this.g.length,R.g.length),U=[],k=0;k<V;k++)U[k]=this.i(k)&R.i(k);return new o(U,this.h&R.h)},t.or=function(R){for(var V=Math.max(this.g.length,R.g.length),U=[],k=0;k<V;k++)U[k]=this.i(k)|R.i(k);return new o(U,this.h|R.h)},t.xor=function(R){for(var V=Math.max(this.g.length,R.g.length),U=[],k=0;k<V;k++)U[k]=this.i(k)^R.i(k);return new o(U,this.h^R.h)};function O(R){for(var V=R.g.length+1,U=[],k=0;k<V;k++)U[k]=R.i(k)<<1|R.i(k-1)>>>31;return new o(U,R.h)}function q(R,V){var U=V>>5;V%=32;for(var k=R.g.length-U,F=[],D=0;D<k;D++)F[D]=0<V?R.i(D+U)>>>V|R.i(D+U+1)<<32-V:R.i(D+U);return new o(F,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,eR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,fc=o}).apply(typeof LE<"u"?LE:typeof self<"u"?self:typeof window<"u"?window:{});var mg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tR,yf,nR,Zg,Vw,rR,sR,iR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,C,M){return m==Array.prototype||m==Object.prototype||(m[C]=M.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof mg=="object"&&mg];for(var C=0;C<m.length;++C){var M=m[C];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var r=n(this);function i(m,C){if(C)e:{var M=r;m=m.split(".");for(var W=0;W<m.length-1;W++){var ae=m[W];if(!(ae in M))break e;M=M[ae]}m=m[m.length-1],W=M[m],C=C(W),C!=W&&C!=null&&e(M,m,{configurable:!0,writable:!0,value:C})}}function a(m,C){m instanceof String&&(m+="");var M=0,W=!1,ae={next:function(){if(!W&&M<m.length){var he=M++;return{value:C(he,m[he]),done:!1}}return W=!0,{done:!0,value:void 0}}};return ae[Symbol.iterator]=function(){return ae},ae}i("Array.prototype.values",function(m){return m||function(){return a(this,function(C,M){return M})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(m){var C=typeof m;return C=C!="object"?C:m?Array.isArray(m)?"array":C:"null",C=="array"||C=="object"&&typeof m.length=="number"}function d(m){var C=typeof m;return C=="object"&&m!=null||C=="function"}function f(m,C,M){return m.call.apply(m.bind,arguments)}function p(m,C,M){if(!m)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var ae=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ae,W),m.apply(C,ae)}}return function(){return m.apply(C,arguments)}}function g(m,C,M){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function _(m,C){var M=Array.prototype.slice.call(arguments,1);return function(){var W=M.slice();return W.push.apply(W,arguments),m.apply(this,W)}}function N(m,C){function M(){}M.prototype=C.prototype,m.aa=C.prototype,m.prototype=new M,m.prototype.constructor=m,m.Qb=function(W,ae,he){for(var De=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)De[qt-2]=arguments[qt];return C.prototype[ae].apply(W,De)}}function b(m){const C=m.length;if(0<C){const M=Array(C);for(let W=0;W<C;W++)M[W]=m[W];return M}return[]}function S(m,C){for(let M=1;M<arguments.length;M++){const W=arguments[M];if(u(W)){const ae=m.length||0,he=W.length||0;m.length=ae+he;for(let De=0;De<he;De++)m[ae+De]=W[De]}else m.push(W)}}class w{constructor(C,M){this.i=C,this.j=M,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function y(m){return/^[\s\xa0]*$/.test(m)}function E(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function I(m){return I[" "](m),m}I[" "]=function(){};var O=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function q(m,C,M){for(const W in m)C.call(M,m[W],W,m)}function R(m,C){for(const M in m)C.call(void 0,m[M],M,m)}function V(m){const C={};for(const M in m)C[M]=m[M];return C}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(m,C){let M,W;for(let ae=1;ae<arguments.length;ae++){W=arguments[ae];for(M in W)m[M]=W[M];for(let he=0;he<U.length;he++)M=U[he],Object.prototype.hasOwnProperty.call(W,M)&&(m[M]=W[M])}}function F(m){var C=1;m=m.split(":");const M=[];for(;0<C&&m.length;)M.push(m.shift()),C--;return m.length&&M.push(m.join(":")),M}function D(m){c.setTimeout(()=>{throw m},0)}function P(){var m=z;let C=null;return m.g&&(C=m.g,m.g=m.g.next,m.g||(m.h=null),C.next=null),C}class H{constructor(){this.h=this.g=null}add(C,M){const W=te.get();W.set(C,M),this.h?this.h.next=W:this.g=W,this.h=W}}var te=new w(()=>new Z,m=>m.reset());class Z{constructor(){this.next=this.g=this.h=null}set(C,M){this.h=C,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let K,A=!1,z=new H,B=()=>{const m=c.Promise.resolve(void 0);K=()=>{m.then(X)}};var X=()=>{for(var m;m=P();){try{m.h.call(m.g)}catch(M){D(M)}var C=te;C.j(m),100>C.h&&(C.h++,m.next=C.g,C.g=m)}A=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(m,C){this.type=m,this.g=this.target=C,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,C=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const M=()=>{};c.addEventListener("test",M,C),c.removeEventListener("test",M,C)}catch{}return m}();function Ee(m,C){if(ve.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var M=this.type=m.type,W=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=C,C=m.relatedTarget){if(O){e:{try{I(C.nodeName);var ae=!0;break e}catch{}ae=!1}ae||(C=null)}}else M=="mouseover"?C=m.fromElement:M=="mouseout"&&(C=m.toElement);this.relatedTarget=C,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Oe[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ee.aa.h.call(this)}}N(Ee,ve);var Oe={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),re=0;function ee(m,C,M,W,ae){this.listener=m,this.proxy=null,this.src=C,this.type=M,this.capture=!!W,this.ha=ae,this.key=++re,this.da=this.fa=!1}function ne(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Y(m){this.src=m,this.g={},this.h=0}Y.prototype.add=function(m,C,M,W,ae){var he=m.toString();m=this.g[he],m||(m=this.g[he]=[],this.h++);var De=pe(m,C,W,ae);return-1<De?(C=m[De],M||(C.fa=!1)):(C=new ee(C,this.src,he,!!W,ae),C.fa=M,m.push(C)),C};function oe(m,C){var M=C.type;if(M in m.g){var W=m.g[M],ae=Array.prototype.indexOf.call(W,C,void 0),he;(he=0<=ae)&&Array.prototype.splice.call(W,ae,1),he&&(ne(C),m.g[M].length==0&&(delete m.g[M],m.h--))}}function pe(m,C,M,W){for(var ae=0;ae<m.length;++ae){var he=m[ae];if(!he.da&&he.listener==C&&he.capture==!!M&&he.ha==W)return ae}return-1}var Te="closure_lm_"+(1e6*Math.random()|0),we={};function se(m,C,M,W,ae){if(Array.isArray(C)){for(var he=0;he<C.length;he++)se(m,C[he],M,W,ae);return null}return M=Ce(M),m&&m[Se]?m.K(C,M,d(W)?!!W.capture:!1,ae):_e(m,C,M,!1,W,ae)}function _e(m,C,M,W,ae,he){if(!C)throw Error("Invalid event type");var De=d(ae)?!!ae.capture:!!ae,qt=Pe(m);if(qt||(m[Te]=qt=new Y(m)),M=qt.add(C,M,W,De,he),M.proxy)return M;if(W=je(),M.proxy=W,W.src=m,W.listener=M,m.addEventListener)be||(ae=De),ae===void 0&&(ae=!1),m.addEventListener(C.toString(),W,ae);else if(m.attachEvent)m.attachEvent(ie(C.toString()),W);else if(m.addListener&&m.removeListener)m.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return M}function je(){function m(M){return C.call(m.src,m.listener,M)}const C=ce;return m}function We(m,C,M,W,ae){if(Array.isArray(C))for(var he=0;he<C.length;he++)We(m,C[he],M,W,ae);else W=d(W)?!!W.capture:!!W,M=Ce(M),m&&m[Se]?(m=m.i,C=String(C).toString(),C in m.g&&(he=m.g[C],M=pe(he,M,W,ae),-1<M&&(ne(he[M]),Array.prototype.splice.call(he,M,1),he.length==0&&(delete m.g[C],m.h--)))):m&&(m=Pe(m))&&(C=m.g[C.toString()],m=-1,C&&(m=pe(C,M,W,ae)),(M=-1<m?C[m]:null)&&G(M))}function G(m){if(typeof m!="number"&&m&&!m.da){var C=m.src;if(C&&C[Se])oe(C.i,m);else{var M=m.type,W=m.proxy;C.removeEventListener?C.removeEventListener(M,W,m.capture):C.detachEvent?C.detachEvent(ie(M),W):C.addListener&&C.removeListener&&C.removeListener(W),(M=Pe(C))?(oe(M,m),M.h==0&&(M.src=null,C[Te]=null)):ne(m)}}}function ie(m){return m in we?we[m]:we[m]="on"+m}function ce(m,C){if(m.da)m=!0;else{C=new Ee(C,this);var M=m.listener,W=m.ha||m.src;m.fa&&G(m),m=M.call(W,C)}return m}function Pe(m){return m=m[Te],m instanceof Y?m:null}var Ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(m){return typeof m=="function"?m:(m[Ae]||(m[Ae]=function(C){return m.handleEvent(C)}),m[Ae])}function Ve(){de.call(this),this.i=new Y(this),this.M=this,this.F=null}N(Ve,de),Ve.prototype[Se]=!0,Ve.prototype.removeEventListener=function(m,C,M,W){We(this,m,C,M,W)};function He(m,C){var M,W=m.F;if(W)for(M=[];W;W=W.F)M.push(W);if(m=m.M,W=C.type||C,typeof C=="string")C=new ve(C,m);else if(C instanceof ve)C.target=C.target||m;else{var ae=C;C=new ve(W,m),k(C,ae)}if(ae=!0,M)for(var he=M.length-1;0<=he;he--){var De=C.g=M[he];ae=nt(De,W,!0,C)&&ae}if(De=C.g=m,ae=nt(De,W,!0,C)&&ae,ae=nt(De,W,!1,C)&&ae,M)for(he=0;he<M.length;he++)De=C.g=M[he],ae=nt(De,W,!1,C)&&ae}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var m=this.i,C;for(C in m.g){for(var M=m.g[C],W=0;W<M.length;W++)ne(M[W]);delete m.g[C],m.h--}}this.F=null},Ve.prototype.K=function(m,C,M,W){return this.i.add(String(m),C,!1,M,W)},Ve.prototype.L=function(m,C,M,W){return this.i.add(String(m),C,!0,M,W)};function nt(m,C,M,W){if(C=m.i.g[String(C)],!C)return!0;C=C.concat();for(var ae=!0,he=0;he<C.length;++he){var De=C[he];if(De&&!De.da&&De.capture==M){var qt=De.listener,Wn=De.ha||De.src;De.fa&&oe(m.i,De),ae=qt.call(Wn,W)!==!1&&ae}}return ae&&!W.defaultPrevented}function Yt(m,C,M){if(typeof m=="function")M&&(m=g(m,M));else if(m&&typeof m.handleEvent=="function")m=g(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:c.setTimeout(m,C||0)}function tr(m){m.g=Yt(()=>{m.g=null,m.i&&(m.i=!1,tr(m))},m.l);const C=m.h;m.h=null,m.m.apply(null,C)}class qn extends de{constructor(C,M){super(),this.m=C,this.l=M,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:tr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zr(m){de.call(this),this.h=m,this.g={}}N(zr,de);var rs=[];function ss(m){q(m.g,function(C,M){this.g.hasOwnProperty(M)&&G(C)},m),m.g={}}zr.prototype.N=function(){zr.aa.N.call(this),ss(this)},zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fi=c.JSON.stringify,nu=c.JSON.parse,ba=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function vo(){}vo.prototype.h=null;function yp(m){return m.h||(m.h=m.i())}function xh(){}var xo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ru(){ve.call(this,"d")}N(ru,ve);function yh(){ve.call(this,"c")}N(yh,ve);var ja={},_p=null;function su(){return _p=_p||new Ve}ja.La="serverreachability";function wp(m){ve.call(this,ja.La,m)}N(wp,ve);function Vl(m){const C=su();He(C,new wp(C))}ja.STAT_EVENT="statevent";function iu(m,C){ve.call(this,ja.STAT_EVENT,m),this.stat=C}N(iu,ve);function gr(m){const C=su();He(C,new iu(C,m))}ja.Ma="timingevent";function bp(m,C){ve.call(this,ja.Ma,m),this.size=C}N(bp,ve);function zl(m,C){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},C)}function Ul(){this.g=!0}Ul.prototype.xa=function(){this.g=!1};function Vs(m,C,M,W,ae,he){m.info(function(){if(m.g)if(he)for(var De="",qt=he.split("&"),Wn=0;Wn<qt.length;Wn++){var Rt=qt[Wn].split("=");if(1<Rt.length){var Xt=Rt[0];Rt=Rt[1];var jn=Xt.split("_");De=2<=jn.length&&jn[1]=="type"?De+(Xt+"="+Rt+"&"):De+(Xt+"=redacted&")}}else De=null;else De=he;return"XMLHTTP REQ ("+W+") [attempt "+ae+"]: "+C+`
`+M+`
`+De})}function it(m,C,M,W,ae,he,De){m.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ae+"]: "+C+`
`+M+`
`+he+" "+De})}function Na(m,C,M,W){m.info(function(){return"XMLHTTP TEXT ("+C+"): "+Np(m,M)+(W?" "+W:"")})}function jp(m,C){m.info(function(){return"TIMEOUT: "+C})}Ul.prototype.info=function(){};function Np(m,C){if(!m.g)return C;if(!C)return null;try{var M=JSON.parse(C);if(M){for(m=0;m<M.length;m++)if(Array.isArray(M[m])){var W=M[m];if(!(2>W.length)){var ae=W[1];if(Array.isArray(ae)&&!(1>ae.length)){var he=ae[0];if(he!="noop"&&he!="stop"&&he!="close")for(var De=1;De<ae.length;De++)ae[De]=""}}}}return Fi(M)}catch{return C}}var $l={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},au={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ou;function ci(){}N(ci,vo),ci.prototype.g=function(){return new XMLHttpRequest},ci.prototype.i=function(){return{}},ou=new ci;function ui(m,C,M,W){this.j=m,this.i=C,this.l=M,this.R=W||1,this.U=new zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sp}function Sp(){this.i=null,this.g="",this.h=!1}var Ep={},_h={};function wh(m,C,M){m.L=1,m.v=Us(Tn(C)),m.m=M,m.P=!0,bh(m,null)}function bh(m,C){m.F=Date.now(),cu(m),m.A=Tn(m.v);var M=m.A,W=m.R;Array.isArray(W)||(W=[String(W)]),Tp(M.i,"t",W),m.C=0,M=m.j.J,m.h=new Sp,m.g=Dp(m.j,M?C:null,!m.m),0<m.O&&(m.M=new qn(g(m.Y,m,m.g),m.O)),C=m.U,M=m.g,W=m.ca;var ae="readystatechange";Array.isArray(ae)||(ae&&(rs[0]=ae.toString()),ae=rs);for(var he=0;he<ae.length;he++){var De=se(M,ae[he],W||C.handleEvent,!1,C.h||C);if(!De)break;C.g[De.key]=De}C=m.H?V(m.H):{},m.m?(m.u||(m.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,C)):(m.u="GET",m.g.ea(m.A,m.u,null,C)),Vl(),Vs(m.i,m.u,m.A,m.l,m.R,m.m)}ui.prototype.ca=function(m){m=m.target;const C=this.M;C&&Ur(m)==3?C.j():this.Y(m)},ui.prototype.Y=function(m){try{if(m==this.g)e:{const jn=Ur(this.g);var C=this.g.Ba();const So=this.g.Z();if(!(3>jn)&&(jn!=3||this.g&&(this.h.h||this.g.oa()||Fh(this.g)))){this.J||jn!=4||C==7||(C==8||0>=So?Vl(3):Vl(2)),jh(this);var M=this.g.Z();this.X=M;t:if(Cp(this)){var W=Fh(this.g);m="";var ae=W.length,he=Ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sa(this),Bl(this);var De="";break t}this.h.i=new c.TextDecoder}for(C=0;C<ae;C++)this.h.h=!0,m+=this.h.i.decode(W[C],{stream:!(he&&C==ae-1)});W.length=0,this.h.g+=m,this.C=0,De=this.h.g}else De=this.g.oa();if(this.o=M==200,it(this.i,this.u,this.A,this.l,this.R,jn,M),this.o){if(this.T&&!this.K){t:{if(this.g){var qt,Wn=this.g;if((qt=Wn.g?Wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(qt)){var Rt=qt;break t}}Rt=null}if(M=Rt)Na(this.i,this.l,M,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ql(this,M);else{this.o=!1,this.s=3,gr(12),Sa(this),Bl(this);break e}}if(this.P){M=!0;let Mn;for(;!this.J&&this.C<De.length;)if(Mn=lu(this,De),Mn==_h){jn==4&&(this.s=4,gr(14),M=!1),Na(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==Ep){this.s=4,gr(15),Na(this.i,this.l,De,"[Invalid Chunk]"),M=!1;break}else Na(this.i,this.l,Mn,null),ql(this,Mn);if(Cp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jn!=4||De.length!=0||this.h.h||(this.s=1,gr(16),M=!1),this.o=this.o&&M,!M)Na(this.i,this.l,De,"[Invalid Chunked Response]"),Sa(this),Bl(this);else if(0<De.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+De.length),xu(Xt),Xt.M=!0,gr(11))}}else Na(this.i,this.l,De,null),ql(this,De);jn==4&&Sa(this),this.o&&!this.J&&(jn==4?zh(this.j,this):(this.o=!1,cu(this)))}else o0(this.g),M==400&&0<De.indexOf("Unknown SID")?(this.s=3,gr(12)):(this.s=0,gr(13)),Sa(this),Bl(this)}}}catch{}finally{}};function Cp(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function lu(m,C){var M=m.C,W=C.indexOf(`
`,M);return W==-1?_h:(M=Number(C.substring(M,W)),isNaN(M)?Ep:(W+=1,W+M>C.length?_h:(C=C.slice(W,W+M),m.C=W+M,C)))}ui.prototype.cancel=function(){this.J=!0,Sa(this)};function cu(m){m.S=Date.now()+m.I,kp(m,m.I)}function kp(m,C){if(m.B!=null)throw Error("WatchDog timer not null");m.B=zl(g(m.ba,m),C)}function jh(m){m.B&&(c.clearTimeout(m.B),m.B=null)}ui.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(jp(this.i,this.A),this.L!=2&&(Vl(),gr(17)),Sa(this),this.s=2,Bl(this)):kp(this,this.S-m)};function Bl(m){m.j.G==0||m.J||zh(m.j,m)}function Sa(m){jh(m);var C=m.M;C&&typeof C.ma=="function"&&C.ma(),m.M=null,ss(m.U),m.g&&(C=m.g,m.g=null,C.abort(),C.ma())}function ql(m,C){try{var M=m.j;if(M.G!=0&&(M.g==m||Tt(M.h,m))){if(!m.K&&Tt(M.h,m)&&M.G==3){try{var W=M.Da.g.parse(C)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ae=W;if(ae[0]==0){e:if(!M.u){if(M.g)if(M.g.F+3e3<m.F)_u(M),gu(M);else break e;vu(M),gr(18)}}else M.za=ae[1],0<M.za-M.T&&37500>ae[2]&&M.F&&M.v==0&&!M.C&&(M.C=zl(g(M.Za,M),6e3));if(1>=yo(M.h)&&M.ca){try{M.ca()}catch{}M.ca=void 0}}else Pa(M,11)}else if((m.K||M.g==m)&&_u(M),!y(C))for(ae=M.Da.g.parse(C),C=0;C<ae.length;C++){let Rt=ae[C];if(M.T=Rt[0],Rt=Rt[1],M.G==2)if(Rt[0]=="c"){M.K=Rt[1],M.ia=Rt[2];const Xt=Rt[3];Xt!=null&&(M.la=Xt,M.j.info("VER="+M.la));const jn=Rt[4];jn!=null&&(M.Aa=jn,M.j.info("SVER="+M.Aa));const So=Rt[5];So!=null&&typeof So=="number"&&0<So&&(W=1.5*So,M.L=W,M.j.info("backChannelRequestTimeoutMs_="+W)),W=M;const Mn=m.g;if(Mn){const bu=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bu){var he=W.h;he.g||bu.indexOf("spdy")==-1&&bu.indexOf("quic")==-1&&bu.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(rn(he,he.h),he.h=null))}if(W.D){const Ui=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ui&&(W.ya=Ui,ft(W.I,W.D,Ui))}}M.G=3,M.l&&M.l.ua(),M.ba&&(M.R=Date.now()-m.F,M.j.info("Handshake RTT: "+M.R+"ms")),W=M;var De=m;if(W.qa=wu(W,W.J?W.ia:null,W.W),De.K){Hl(W.h,De);var qt=De,Wn=W.L;Wn&&(qt.I=Wn),qt.B&&(jh(qt),cu(qt)),W.g=De}else fi(W);0<M.i.length&&No(M)}else Rt[0]!="stop"&&Rt[0]!="close"||Pa(M,7);else M.G==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Pa(M,7):pu(M):Rt[0]!="noop"&&M.l&&M.l.ta(Rt),M.v=0)}}Vl(4)}catch{}}var Wl=class{constructor(m,C){this.g=m,this.map=C}};function Nh(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sh(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function yo(m){return m.h?1:m.g?m.g.size:0}function Tt(m,C){return m.h?m.h==C:m.g?m.g.has(C):!1}function rn(m,C){m.g?m.g.add(C):m.h=C}function Hl(m,C){m.h&&m.h==C?m.h=null:m.g&&m.g.has(C)&&m.g.delete(C)}Nh.prototype.cancel=function(){if(this.i=Ea(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ea(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let C=m.i;for(const M of m.g.values())C=C.concat(M.D);return C}return b(m.i)}function _o(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(u(m)){for(var C=[],M=m.length,W=0;W<M;W++)C.push(m[W]);return C}C=[],M=0;for(W in m)C[M++]=m[W];return C}function Eh(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(u(m)||typeof m=="string"){var C=[];m=m.length;for(var M=0;M<m;M++)C.push(M);return C}C=[],M=0;for(const W in m)C[M++]=W;return C}}}function bt(m,C){if(m.forEach&&typeof m.forEach=="function")m.forEach(C,void 0);else if(u(m)||typeof m=="string")Array.prototype.forEach.call(m,C,void 0);else for(var M=Eh(m),W=_o(m),ae=W.length,he=0;he<ae;he++)C.call(void 0,W[he],M&&M[he],m)}var pn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ch(m,C){if(m){m=m.split("&");for(var M=0;M<m.length;M++){var W=m[M].indexOf("="),ae=null;if(0<=W){var he=m[M].substring(0,W);ae=m[M].substring(W+1)}else he=m[M];C(he,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function zs(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof zs){this.h=m.h,uu(this,m.j),this.o=m.o,this.g=m.g,Ca(this,m.s),this.l=m.l;var C=m.i,M=new ka;M.i=C.i,C.g&&(M.g=new Map(C.g),M.h=C.h),Vi(this,M),this.m=m.m}else m&&(C=String(m).match(pn))?(this.h=!1,uu(this,C[1]||"",!0),this.o=di(C[2]||""),this.g=di(C[3]||"",!0),Ca(this,C[4]),this.l=di(C[5]||"",!0),Vi(this,C[6]||"",!0),this.m=di(C[7]||"")):(this.h=!1,this.i=new ka(null,this.h))}zs.prototype.toString=function(){var m=[],C=this.j;C&&m.push(hi(C,wo,!0),":");var M=this.g;return(M||C=="file")&&(m.push("//"),(C=this.o)&&m.push(hi(C,wo,!0),"@"),m.push(encodeURIComponent(String(M)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.s,M!=null&&m.push(":",String(M))),(M=this.l)&&(this.g&&M.charAt(0)!="/"&&m.push("/"),m.push(hi(M,M.charAt(0)=="/"?Ph:Th,!0))),(M=this.i.toString())&&m.push("?",M),(M=this.m)&&m.push("#",hi(M,Ih)),m.join("")};function Tn(m){return new zs(m)}function uu(m,C,M){m.j=M?di(C,!0):C,m.j&&(m.j=m.j.replace(/:$/,""))}function Ca(m,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);m.s=C}else m.s=null}function Vi(m,C,M){C instanceof ka?(m.i=C,$s(m.i,m.h)):(M||(C=hi(C,du)),m.i=new ka(C,m.h))}function ft(m,C,M){m.i.set(C,M)}function Us(m){return ft(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function di(m,C){return m?C?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function hi(m,C,M){return typeof m=="string"?(m=encodeURI(m).replace(C,kh),M&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function kh(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var wo=/[#\/\?@]/g,Th=/[#\?:]/g,Ph=/[#\?]/g,du=/[#\?@]/g,Ih=/#/g;function ka(m,C){this.h=this.g=null,this.i=m||null,this.j=!!C}function _s(m){m.g||(m.g=new Map,m.h=0,m.i&&Ch(m.i,function(C,M){m.add(decodeURIComponent(C.replace(/\+/g," ")),M)}))}t=ka.prototype,t.add=function(m,C){_s(this),this.i=null,m=ct(this,m);var M=this.g.get(m);return M||this.g.set(m,M=[]),M.push(C),this.h+=1,this};function Ah(m,C){_s(m),C=ct(m,C),m.g.has(C)&&(m.i=null,m.h-=m.g.get(C).length,m.g.delete(C))}function hu(m,C){return _s(m),C=ct(m,C),m.g.has(C)}t.forEach=function(m,C){_s(this),this.g.forEach(function(M,W){M.forEach(function(ae){m.call(C,ae,W,this)},this)},this)},t.na=function(){_s(this);const m=Array.from(this.g.values()),C=Array.from(this.g.keys()),M=[];for(let W=0;W<C.length;W++){const ae=m[W];for(let he=0;he<ae.length;he++)M.push(C[W])}return M},t.V=function(m){_s(this);let C=[];if(typeof m=="string")hu(this,m)&&(C=C.concat(this.g.get(ct(this,m))));else{m=Array.from(this.g.values());for(let M=0;M<m.length;M++)C=C.concat(m[M])}return C},t.set=function(m,C){return _s(this),this.i=null,m=ct(this,m),hu(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[C]),this.h+=1,this},t.get=function(m,C){return m?(m=this.V(m),0<m.length?String(m[0]):C):C};function Tp(m,C,M){Ah(m,C),0<M.length&&(m.i=null,m.g.set(ct(m,C),b(M)),m.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],C=Array.from(this.g.keys());for(var M=0;M<C.length;M++){var W=C[M];const he=encodeURIComponent(String(W)),De=this.V(W);for(W=0;W<De.length;W++){var ae=he;De[W]!==""&&(ae+="="+encodeURIComponent(String(De[W]))),m.push(ae)}}return this.i=m.join("&")};function ct(m,C){return C=String(C),m.j&&(C=C.toLowerCase()),C}function $s(m,C){C&&!m.j&&(_s(m),m.i=null,m.g.forEach(function(M,W){var ae=W.toLowerCase();W!=ae&&(Ah(this,W),Tp(this,ae,M))},m)),m.j=C}function Qt(m,C){const M=new Ul;if(c.Image){const W=new Image;W.onload=_(Bs,M,"TestLoadImage: loaded",!0,C,W),W.onerror=_(Bs,M,"TestLoadImage: error",!1,C,W),W.onabort=_(Bs,M,"TestLoadImage: abort",!1,C,W),W.ontimeout=_(Bs,M,"TestLoadImage: timeout",!1,C,W),c.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=m}else C(!1)}function Pp(m,C){const M=new Ul,W=new AbortController,ae=setTimeout(()=>{W.abort(),Bs(M,"TestPingServer: timeout",!1,C)},1e4);fetch(m,{signal:W.signal}).then(he=>{clearTimeout(ae),he.ok?Bs(M,"TestPingServer: ok",!0,C):Bs(M,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(ae),Bs(M,"TestPingServer: error",!1,C)})}function Bs(m,C,M,W,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),W(M)}catch{}}function Rh(){this.g=new ba}function Mh(m,C,M){const W=M||"";try{bt(m,function(ae,he){let De=ae;d(ae)&&(De=Fi(ae)),C.push(W+he+"="+encodeURIComponent(De))})}catch(ae){throw C.push(W+"type="+encodeURIComponent("_badmap")),ae}}function qs(m){this.l=m.Ub||null,this.j=m.eb||!1}N(qs,vo),qs.prototype.g=function(){return new bo(this.l,this.j)},qs.prototype.i=function(m){return function(){return m}}({});function bo(m,C){Ve.call(this),this.D=m,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(bo,Ve),t=bo.prototype,t.open=function(m,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=C,this.readyState=1,ws(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(C.body=m),(this.D||c).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bn(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ws(this)),this.g&&(this.readyState=3,ws(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jo(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function jo(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var C=m.value?m.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!m.done}))&&(this.response=this.responseText+=C)}m.done?bn(this):ws(this),this.readyState==3&&jo(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,bn(this))},t.Qa=function(m){this.g&&(this.response=m,bn(this))},t.ga=function(){this.g&&bn(this)};function bn(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ws(m)}t.setRequestHeader=function(m,C){this.u.append(m,C)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],C=this.h.entries();for(var M=C.next();!M.done;)M=M.value,m.push(M[0]+": "+M[1]),M=C.next();return m.join(`\r
`)};function ws(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Oh(m){let C="";return q(m,function(M,W){C+=W,C+=":",C+=M,C+=`\r
`}),C}function fu(m,C,M){e:{for(W in M){var W=!1;break e}W=!0}W||(M=Oh(M),typeof m=="string"?M!=null&&encodeURIComponent(String(M)):ft(m,C,M))}function gn(m){Ve.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(gn,Ve);var Ip=/^https?$/i,Dh=["POST","PUT"];t=gn.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,C,M,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);C=C?C.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ou.g(),this.v=this.o?yp(this.o):yp(ou),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(C,String(m),!0),this.B=!1}catch(he){Ap(this,he);return}if(m=M||"",M=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ae in W)M.set(ae,W[ae]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const he of W.keys())M.set(he,W.get(he));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(M.keys()).find(he=>he.toLowerCase()=="content-type"),ae=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Dh,C,void 0))||W||ae||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,De]of M)this.g.setRequestHeader(he,De);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{is(this),this.u=!0,this.g.send(m),this.u=!1}catch(he){Ap(this,he)}};function Ap(m,C){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=C,m.m=5,Lh(m),mu(m)}function Lh(m){m.A||(m.A=!0,He(m,"complete"),He(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,He(this,"complete"),He(this,"abort"),mu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mu(this,!0)),gn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Et(this):this.bb())},t.bb=function(){Et(this)};function Et(m){if(m.h&&typeof o<"u"&&(!m.v[1]||Ur(m)!=4||m.Z()!=2)){if(m.u&&Ur(m)==4)Yt(m.Ea,0,m);else if(He(m,"readystatechange"),Ur(m)==4){m.h=!1;try{const De=m.Z();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var M;if(!(M=C)){var W;if(W=De===0){var ae=String(m.D).match(pn)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),W=!Ip.test(ae?ae.toLowerCase():"")}M=W}if(M)He(m,"complete"),He(m,"success");else{m.m=6;try{var he=2<Ur(m)?m.g.statusText:""}catch{he=""}m.l=he+" ["+m.Z()+"]",Lh(m)}}finally{mu(m)}}}}function mu(m,C){if(m.g){is(m);const M=m.g,W=m.v[0]?()=>{}:null;m.g=null,m.v=null,C||He(m,"ready");try{M.onreadystatechange=W}catch{}}}function is(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Ur(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Ur(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var C=this.g.responseText;return m&&C.indexOf(m)==0&&(C=C.substring(m.length)),nu(C)}};function Fh(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function o0(m){const C={};m=(m.g&&2<=Ur(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<m.length;W++){if(y(m[W]))continue;var M=F(m[W]);const ae=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const he=C[ae]||[];C[ae]=he,he.push(M)}R(C,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ta(m,C,M){return M&&M.internalChannelParams&&M.internalChannelParams[m]||C}function Rp(m){this.Aa=0,this.i=[],this.j=new Ul,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ta("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ta("baseRetryDelayMs",5e3,m),this.cb=Ta("retryDelaySeedMs",1e4,m),this.Wa=Ta("forwardChannelMaxRetries",2,m),this.wa=Ta("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Nh(m&&m.concurrentRequestLimit),this.Da=new Rh,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rp.prototype,t.la=8,t.G=1,t.connect=function(m,C,M,W){gr(0),this.W=m,this.H=C||{},M&&W!==void 0&&(this.H.OSID=M,this.H.OAID=W),this.F=this.X,this.I=wu(this,null,this.W),No(this)};function pu(m){if(Mp(m),m.G==3){var C=m.U++,M=Tn(m.I);if(ft(M,"SID",m.K),ft(M,"RID",C),ft(M,"TYPE","terminate"),Gl(m,M),C=new ui(m,m.j,C),C.L=2,C.v=Us(Tn(M)),M=!1,c.navigator&&c.navigator.sendBeacon)try{M=c.navigator.sendBeacon(C.v.toString(),"")}catch{}!M&&c.Image&&(new Image().src=C.v,M=!0),M||(C.g=Dp(C.j,null),C.g.ea(C.v)),C.F=Date.now(),cu(C)}Op(m)}function gu(m){m.g&&(xu(m),m.g.cancel(),m.g=null)}function Mp(m){gu(m),m.u&&(c.clearTimeout(m.u),m.u=null),_u(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function No(m){if(!Sh(m.h)&&!m.s){m.s=!0;var C=m.Ga;K||B(),A||(K(),A=!0),z.add(C,m),m.B=0}}function l0(m,C){return yo(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=C.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=zl(g(m.Ga,m,C),Uh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ae=new ui(this,this.j,m);let he=this.o;if(this.S&&(he?(he=V(he),k(he,this.S)):he=this.S),this.m!==null||this.O||(ae.H=he,he=null),this.P)e:{for(var C=0,M=0;M<this.i.length;M++){t:{var W=this.i[M];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(C+=W,4096<C){C=M;break e}if(C===4096||M===this.i.length-1){C=M+1;break e}}C=1e3}else C=1e3;C=Vh(this,ae,C),M=Tn(this.I),ft(M,"RID",m),ft(M,"CVER",22),this.D&&ft(M,"X-HTTP-Session-Id",this.D),Gl(this,M),he&&(this.O?C="headers="+encodeURIComponent(String(Oh(he)))+"&"+C:this.m&&fu(M,this.m,he)),rn(this.h,ae),this.Ua&&ft(M,"TYPE","init"),this.P?(ft(M,"$req",C),ft(M,"SID","null"),ae.T=!0,wh(ae,M,null)):wh(ae,M,C),this.G=2}}else this.G==3&&(m?bs(this,m):this.i.length==0||Sh(this.h)||bs(this))};function bs(m,C){var M;C?M=C.l:M=m.U++;const W=Tn(m.I);ft(W,"SID",m.K),ft(W,"RID",M),ft(W,"AID",m.T),Gl(m,W),m.m&&m.o&&fu(W,m.m,m.o),M=new ui(m,m.j,M,m.B+1),m.m===null&&(M.H=m.o),C&&(m.i=C.D.concat(m.i)),C=Vh(m,M,1e3),M.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),rn(m.h,M),wh(M,W,C)}function Gl(m,C){m.H&&q(m.H,function(M,W){ft(C,W,M)}),m.l&&bt({},function(M,W){ft(C,W,M)})}function Vh(m,C,M){M=Math.min(m.i.length,M);var W=m.l?g(m.l.Na,m.l,m):null;e:{var ae=m.i;let he=-1;for(;;){const De=["count="+M];he==-1?0<M?(he=ae[0].g,De.push("ofs="+he)):he=0:De.push("ofs="+he);let qt=!0;for(let Wn=0;Wn<M;Wn++){let Rt=ae[Wn].g;const Xt=ae[Wn].map;if(Rt-=he,0>Rt)he=Math.max(0,ae[Wn].g-100),qt=!1;else try{Mh(Xt,De,"req"+Rt+"_")}catch{W&&W(Xt)}}if(qt){W=De.join("&");break e}}}return m=m.i.splice(0,M),C.D=m,W}function fi(m){if(!m.g&&!m.u){m.Y=1;var C=m.Fa;K||B(),A||(K(),A=!0),z.add(C,m),m.v=0}}function vu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=zl(g(m.Fa,m),Uh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,yu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=zl(g(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gr(10),gu(this),yu(this))};function xu(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function yu(m){m.g=new ui(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var C=Tn(m.qa);ft(C,"RID","rpc"),ft(C,"SID",m.K),ft(C,"AID",m.T),ft(C,"CI",m.F?"0":"1"),!m.F&&m.ja&&ft(C,"TO",m.ja),ft(C,"TYPE","xmlhttp"),Gl(m,C),m.m&&m.o&&fu(C,m.m,m.o),m.L&&(m.g.I=m.L);var M=m.g;m=m.ia,M.L=1,M.v=Us(Tn(C)),M.m=null,M.P=!0,bh(M,m)}t.Za=function(){this.C!=null&&(this.C=null,gu(this),vu(this),gr(19))};function _u(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function zh(m,C){var M=null;if(m.g==C){_u(m),xu(m),m.g=null;var W=2}else if(Tt(m.h,C))M=C.D,Hl(m.h,C),W=1;else return;if(m.G!=0){if(C.o)if(W==1){M=C.m?C.m.length:0,C=Date.now()-C.F;var ae=m.B;W=su(),He(W,new bp(W,M)),No(m)}else fi(m);else if(ae=C.s,ae==3||ae==0&&0<C.X||!(W==1&&l0(m,C)||W==2&&vu(m)))switch(M&&0<M.length&&(C=m.h,C.i=C.i.concat(M)),ae){case 1:Pa(m,5);break;case 4:Pa(m,10);break;case 3:Pa(m,6);break;default:Pa(m,2)}}}function Uh(m,C){let M=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(M*=2),M*C}function Pa(m,C){if(m.j.info("Error code "+C),C==2){var M=g(m.fb,m),W=m.Xa;const ae=!W;W=new zs(W||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||uu(W,"https"),Us(W),ae?Qt(W.toString(),M):Pp(W.toString(),M)}else gr(2);m.G=0,m.l&&m.l.sa(C),Op(m),Mp(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),gr(2)):(this.j.info("Failed to ping google.com"),gr(1))};function Op(m){if(m.G=0,m.ka=[],m.l){const C=Ea(m.h);(C.length!=0||m.i.length!=0)&&(S(m.ka,C),S(m.ka,m.i),m.h.i.length=0,b(m.i),m.i.length=0),m.l.ra()}}function wu(m,C,M){var W=M instanceof zs?Tn(M):new zs(M);if(W.g!="")C&&(W.g=C+"."+W.g),Ca(W,W.s);else{var ae=c.location;W=ae.protocol,C=C?C+"."+ae.hostname:ae.hostname,ae=+ae.port;var he=new zs(null);W&&uu(he,W),C&&(he.g=C),ae&&Ca(he,ae),M&&(he.l=M),W=he}return M=m.D,C=m.ya,M&&C&&ft(W,M,C),ft(W,"VER",m.la),Gl(m,W),W}function Dp(m,C,M){if(C&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=m.Ca&&!m.pa?new gn(new qs({eb:M})):new gn(m.pa),C.Ha(m.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $h(){}t=$h.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kl(){}Kl.prototype.g=function(m,C){return new ur(m,C)};function ur(m,C){Ve.call(this),this.g=new Rp(C),this.l=m,this.h=C&&C.messageUrlParams||null,m=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(m?m["X-WebChannel-Content-Type"]=C.messageContentType:m={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(m?m["X-WebChannel-Client-Profile"]=C.va:m={"X-WebChannel-Client-Profile":C.va}),this.g.S=m,(m=C&&C.Sb)&&!y(m)&&(this.g.m=m),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!y(C)&&(this.g.D=C,m=this.h,m!==null&&C in m&&(m=this.h,C in m&&delete m[C])),this.j=new Ws(this)}N(ur,Ve),ur.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ur.prototype.close=function(){pu(this.g)},ur.prototype.o=function(m){var C=this.g;if(typeof m=="string"){var M={};M.__data__=m,m=M}else this.u&&(M={},M.__data__=Fi(m),m=M);C.i.push(new Wl(C.Ya++,m)),C.G==3&&No(C)},ur.prototype.N=function(){this.g.l=null,delete this.j,pu(this.g),delete this.g,ur.aa.N.call(this)};function zi(m){ru.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var C=m.__sm__;if(C){e:{for(const M in C){m=M;break e}m=void 0}(this.i=m)&&(m=this.i,C=C!==null&&m in C?C[m]:void 0),this.data=C}else this.data=m}N(zi,ru);function Lp(){yh.call(this),this.status=1}N(Lp,yh);function Ws(m){this.g=m}N(Ws,$h),Ws.prototype.ua=function(){He(this.g,"a")},Ws.prototype.ta=function(m){He(this.g,new zi(m))},Ws.prototype.sa=function(m){He(this.g,new Lp)},Ws.prototype.ra=function(){He(this.g,"b")},Kl.prototype.createWebChannel=Kl.prototype.g,ur.prototype.send=ur.prototype.o,ur.prototype.open=ur.prototype.m,ur.prototype.close=ur.prototype.close,iR=function(){return new Kl},sR=function(){return su()},rR=ja,Vw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$l.NO_ERROR=0,$l.TIMEOUT=8,$l.HTTP_ERROR=6,Zg=$l,au.COMPLETE="complete",nR=au,xh.EventType=xo,xo.OPEN="a",xo.CLOSE="b",xo.ERROR="c",xo.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,yf=xh,gn.prototype.listenOnce=gn.prototype.L,gn.prototype.getLastError=gn.prototype.Ka,gn.prototype.getLastErrorCode=gn.prototype.Ba,gn.prototype.getStatus=gn.prototype.Z,gn.prototype.getResponseJson=gn.prototype.Oa,gn.prototype.getResponseText=gn.prototype.oa,gn.prototype.send=gn.prototype.ea,gn.prototype.setWithCredentials=gn.prototype.Ha,tR=gn}).apply(typeof mg<"u"?mg:typeof self<"u"?self:typeof window<"u"?window:{});const FE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ir=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new q1("@firebase/firestore");function tf(){return Ic.logLevel}function et(t,...e){if(Ic.logLevel<=At.DEBUG){const n=e.map(rj);Ic.debug(`Firestore (${eh}): ${t}`,...n)}}function no(t,...e){if(Ic.logLevel<=At.ERROR){const n=e.map(rj);Ic.error(`Firestore (${eh}): ${t}`,...n)}}function bd(t,...e){if(Ic.logLevel<=At.WARN){const n=e.map(rj);Ic.warn(`Firestore (${eh}): ${t}`,...n)}}function rj(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t="Unexpected state"){const e=`FIRESTORE (${eh}) INTERNAL ASSERTION FAILED: `+t;throw no(e),new Error(e)}function Zt(t,e){t||mt()}function wt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends xa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ir.UNAUTHENTICATED))}shutdown(){}}class gB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vB{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Zt(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Ga;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ga,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ga)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zt(typeof r.accessToken=="string"),new aR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(e===null||typeof e=="string"),new Ir(e)}}class xB{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yB{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new xB(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _B{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wB{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Zt(this.o===void 0);const r=a=>{a.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,et("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Zt(typeof n.token=="string"),this.R=n.token,new _B(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bB(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function Lt(t,e){return t<e?-1:t>e?1:0}function jd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ze(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ze(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ze(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lr.fromMillis(Date.now())}static fromDate(e){return lr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new lr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new lr(0,0))}static max(){return new vt(new lr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n,r){n===void 0?n=0:n>e.length&&mt(),r===void 0?r=e.length-n:r>e.length-n&&mt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fm.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fm?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class sn extends fm{construct(e,n,r){return new sn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ze(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new sn(n)}static emptyPath(){return new sn([])}}const jB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends fm{construct(e,n,r){return new yr(e,n,r)}static isValidIdentifier(e){return jB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ze(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ze(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ze(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new ze(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(n)}static emptyPath(){return new yr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.path=e}static fromPath(e){return new ot(sn.fromString(e))}static fromName(e){return new ot(sn.fromString(e).popFirst(5))}static empty(){return new ot(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return sn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new sn(e.slice()))}}function NB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(r===1e9?new lr(n+1,0):new lr(n,r));return new pl(i,ot.empty(),e)}function SB(t){return new pl(t.readTime,t.key,-1)}class pl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pl(vt.min(),ot.empty(),-1)}static max(){return new pl(vt.max(),ot.empty(),-1)}}function EB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ot.comparator(t.documentKey,e.documentKey),n!==0?n:Lt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wm(t){if(t.code!==ge.FAILED_PRECONDITION||t.message!==CB)throw t;et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ke((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ke?n:ke.resolve(n)}catch(n){return ke.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ke.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ke.reject(n)}static resolve(e){return new ke((n,r)=>{n(e)})}static reject(e){return new ke((n,r)=>{r(e)})}static waitFor(e){return new ke((n,r)=>{let i=0,a=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++a,o&&a===i&&n()},u=>r(u))}),o=!0,a===i&&n()})}static or(e){let n=ke.resolve(!1);for(const r of e)n=n.next(i=>i?ke.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new ke((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===a&&r(o)},f=>i(f))}})}static doWhile(e,n){return new ke((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function TB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sj.oe=-1;function ty(t){return t==null}function Wv(t){return t===0&&1/t==-1/0}function PB(t){return typeof t=="number"&&Number.isInteger(t)&&!Wv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){this.comparator=e,this.root=n||xr.EMPTY}insert(e,n){return new kn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xr.BLACK,null,null))}remove(e){return new kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pg(this.root,e,this.comparator,!1)}getReverseIterator(){return new pg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pg(this.root,e,this.comparator,!0)}}class pg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??xr.RED,this.left=i??xr.EMPTY,this.right=a??xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new xr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const e=this.left.check();if(e!==this.right.check())throw mt();return e+(this.isRed()?0:1)}}xr.EMPTY=null,xr.RED=!0,xr.BLACK=!1;xr.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(e,n,r,i,a){return this}insert(e,n,r){return new xr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.comparator=e,this.data=new kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zE(this.data.getIterator())}getIteratorFrom(e){return new zE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof br)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new br(this.comparator);return n.data=e,n}}class zE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new ks([])}unionWith(e){let n=new br(yr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ks(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new cR("Invalid base64 string: "+a):a}}(e);return new Nr(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Nr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nr.EMPTY_BYTE_STRING=new Nr("");const IB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gl(t){if(Zt(!!t),typeof t=="string"){let e=0;const n=IB.exec(t);if(Zt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:On(t.seconds),nanos:On(t.nanos)}}function On(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ac(t){return typeof t=="string"?Nr.fromBase64String(t):Nr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ij(t){const e=t.mapValue.fields.__previous_value__;return ny(e)?ij(e):e}function mm(t){const e=gl(t.mapValue.fields.__local_write_time__.timestampValue);return new lr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e,n,r,i,a,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class pm{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new pm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof pm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg={mapValue:{}};function Rc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ny(t)?4:MB(t)?9007199254740991:RB(t)?10:11:mt()}function ma(t,e){if(t===e)return!0;const n=Rc(t);if(n!==Rc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mm(t).isEqual(mm(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=gl(i.timestampValue),c=gl(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Ac(i.bytesValue).isEqual(Ac(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return On(i.geoPointValue.latitude)===On(a.geoPointValue.latitude)&&On(i.geoPointValue.longitude)===On(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return On(i.integerValue)===On(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=On(i.doubleValue),c=On(a.doubleValue);return o===c?Wv(o)===Wv(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return jd(t.arrayValue.values||[],e.arrayValue.values||[],ma);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(VE(o)!==VE(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!ma(o[u],c[u])))return!1;return!0}(t,e);default:return mt()}}function gm(t,e){return(t.values||[]).find(n=>ma(n,e))!==void 0}function Nd(t,e){if(t===e)return 0;const n=Rc(t),r=Rc(e);if(n!==r)return Lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=On(a.integerValue||a.doubleValue),u=On(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return UE(t.timestampValue,e.timestampValue);case 4:return UE(mm(t),mm(e));case 5:return Lt(t.stringValue,e.stringValue);case 6:return function(a,o){const c=Ac(a),u=Ac(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=Lt(c[d],u[d]);if(f!==0)return f}return Lt(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=Lt(On(a.latitude),On(o.latitude));return c!==0?c:Lt(On(a.longitude),On(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $E(t.arrayValue,e.arrayValue);case 10:return function(a,o){var c,u,d,f;const p=a.fields||{},g=o.fields||{},_=(c=p.value)===null||c===void 0?void 0:c.arrayValue,N=(u=g.value)===null||u===void 0?void 0:u.arrayValue,b=Lt(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((f=N==null?void 0:N.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:$E(_,N)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===gg.mapValue&&o===gg.mapValue)return 0;if(a===gg.mapValue)return 1;if(o===gg.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=Lt(u[p],f[p]);if(g!==0)return g;const _=Nd(c[u[p]],d[f[p]]);if(_!==0)return _}return Lt(u.length,f.length)}(t.mapValue,e.mapValue);default:throw mt()}}function UE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Lt(t,e);const n=gl(t),r=gl(e),i=Lt(n.seconds,r.seconds);return i!==0?i:Lt(n.nanos,r.nanos)}function $E(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Nd(n[i],r[i]);if(a)return a}return Lt(n.length,r.length)}function Sd(t){return zw(t)}function zw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ac(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ot.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=zw(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${zw(n.fields[o])}`;return i+"}"}(t.mapValue):mt()}function Hv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Uw(t){return!!t&&"integerValue"in t}function aj(t){return!!t&&"arrayValue"in t}function BE(t){return!!t&&"nullValue"in t}function qE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yg(t){return!!t&&"mapValue"in t}function RB(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Lf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Lf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function MB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.value=e}static empty(){return new us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lf(n)}setAll(e){let n=yr.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Lf(o):i.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Yg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ma(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Yg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gc(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new us(Lf(this.value))}}function uR(t){const e=[];return Gc(t.fields,(n,r)=>{const i=new yr([n]);if(Yg(r)){const a=uR(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new ks(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Rr(e,0,vt.min(),vt.min(),vt.min(),us.empty(),0)}static newFoundDocument(e,n,r,i){return new Rr(e,1,n,vt.min(),r,i,0)}static newNoDocument(e,n){return new Rr(e,2,n,vt.min(),vt.min(),us.empty(),0)}static newUnknownDocument(e,n){return new Rr(e,3,n,vt.min(),vt.min(),us.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n){this.position=e,this.inclusive=n}}function WE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=ot.comparator(ot.fromName(o.referenceValue),n.key):r=Nd(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function HE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ma(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n="asc"){this.field=e,this.dir=n}}function OB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dR=class{};class Qn extends dR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LB(e,n,r):n==="array-contains"?new zB(e,r):n==="in"?new UB(e,r):n==="not-in"?new $B(e,r):n==="array-contains-any"?new BB(e,r):new Qn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FB(e,r):new VB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Nd(n,this.value)):n!==null&&Rc(this.value)===Rc(n)&&this.matchesComparison(Nd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pi extends dR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Pi(e,n)}matches(e){return hR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function hR(t){return t.op==="and"}function fR(t){return DB(t)&&hR(t)}function DB(t){for(const e of t.filters)if(e instanceof Pi)return!1;return!0}function $w(t){if(t instanceof Qn)return t.field.canonicalString()+t.op.toString()+Sd(t.value);if(fR(t))return t.filters.map(e=>$w(e)).join(",");{const e=t.filters.map(n=>$w(n)).join(",");return`${t.op}(${e})`}}function mR(t,e){return t instanceof Qn?function(r,i){return i instanceof Qn&&r.op===i.op&&r.field.isEqual(i.field)&&ma(r.value,i.value)}(t,e):t instanceof Pi?function(r,i){return i instanceof Pi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,c)=>a&&mR(o,i.filters[c]),!0):!1}(t,e):void mt()}function pR(t){return t instanceof Qn?function(n){return`${n.field.canonicalString()} ${n.op} ${Sd(n.value)}`}(t):t instanceof Pi?function(n){return n.op.toString()+" {"+n.getFilters().map(pR).join(" ,")+"}"}(t):"Filter"}class LB extends Qn{constructor(e,n,r){super(e,n,r),this.key=ot.fromName(r.referenceValue)}matches(e){const n=ot.comparator(e.key,this.key);return this.matchesComparison(n)}}class FB extends Qn{constructor(e,n){super(e,"in",n),this.keys=gR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VB extends Qn{constructor(e,n){super(e,"not-in",n),this.keys=gR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ot.fromName(r.referenceValue))}class zB extends Qn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return aj(n)&&gm(n.arrayValue,this.value)}}class UB extends Qn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gm(this.value.arrayValue,n)}}class $B extends Qn{constructor(e,n){super(e,"not-in",n)}matches(e){if(gm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!gm(this.value.arrayValue,n)}}class BB extends Qn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!aj(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>gm(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.ue=null}}function GE(t,e=null,n=[],r=[],i=null,a=null,o=null){return new qB(t,e,n,r,i,a,o)}function oj(t){const e=wt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$w(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),ty(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Sd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Sd(r)).join(",")),e.ue=n}return e.ue}function lj(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!OB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HE(t.startAt,e.startAt)&&HE(t.endAt,e.endAt)}function Bw(t){return ot.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function WB(t,e,n,r,i,a,o,c){return new Kc(t,e,n,r,i,a,o,c)}function ry(t){return new Kc(t)}function KE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cj(t){return t.collectionGroup!==null}function ld(t){const e=wt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new br(yr.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new vm(a,r))}),n.has(yr.keyField().canonicalString())||e.ce.push(new vm(yr.keyField(),r))}return e.ce}function la(t){const e=wt(t);return e.le||(e.le=HB(e,ld(t))),e.le}function HB(t,e){if(t.limitType==="F")return GE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new vm(i.field,a)});const n=t.endAt?new Ed(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ed(t.startAt.position,t.startAt.inclusive):null;return GE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function qw(t,e){const n=t.filters.concat([e]);return new Kc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gv(t,e,n){return new Kc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sy(t,e){return lj(la(t),la(e))&&t.limitType===e.limitType}function vR(t){return`${oj(la(t))}|lt:${t.limitType}`}function Ou(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>pR(i)).join(", ")}]`),ty(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Sd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Sd(i)).join(",")),`Target(${r})`}(la(t))}; limitType=${t.limitType})`}function iy(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ot.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of ld(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const d=WE(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,ld(r),i)||r.endAt&&!function(o,c,u){const d=WE(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,ld(r),i))}(t,e)}function GB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xR(t){return(e,n)=>{let r=!1;for(const i of ld(t)){const a=KB(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function KB(t,e,n){const r=t.field.isKeyField()?ot.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?Nd(u,d):mt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return mt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gc(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return lR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB=new kn(ot.comparator);function ro(){return ZB}const yR=new kn(ot.comparator);function _f(...t){let e=yR;for(const n of t)e=e.insert(n.key,n);return e}function _R(t){let e=yR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function oc(){return Ff()}function wR(){return Ff()}function Ff(){return new th(t=>t.toString(),(t,e)=>t.isEqual(e))}const YB=new kn(ot.comparator),QB=new br(ot.comparator);function It(...t){let e=QB;for(const n of t)e=e.add(n);return e}const XB=new br(Lt);function JB(){return XB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wv(e)?"-0":e}}function bR(t){return{integerValue:""+t}}function eq(t,e){return PB(e)?bR(e):uj(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this._=void 0}}function tq(t,e,n){return t instanceof xm?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&ny(a)&&(a=ij(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof ym?NR(t,e):t instanceof _m?SR(t,e):function(i,a){const o=jR(i,a),c=ZE(o)+ZE(i.Pe);return Uw(o)&&Uw(i.Pe)?bR(c):uj(i.serializer,c)}(t,e)}function nq(t,e,n){return t instanceof ym?NR(t,e):t instanceof _m?SR(t,e):n}function jR(t,e){return t instanceof Kv?function(r){return Uw(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class xm extends ay{}class ym extends ay{constructor(e){super(),this.elements=e}}function NR(t,e){const n=ER(e);for(const r of t.elements)n.some(i=>ma(i,r))||n.push(r);return{arrayValue:{values:n}}}class _m extends ay{constructor(e){super(),this.elements=e}}function SR(t,e){let n=ER(e);for(const r of t.elements)n=n.filter(i=>!ma(i,r));return{arrayValue:{values:n}}}class Kv extends ay{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ZE(t){return On(t.integerValue||t.doubleValue)}function ER(t){return aj(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{constructor(e,n){this.field=e,this.transform=n}}function sq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ym&&i instanceof ym||r instanceof _m&&i instanceof _m?jd(r.elements,i.elements,ma):r instanceof Kv&&i instanceof Kv?ma(r.Pe,i.Pe):r instanceof xm&&i instanceof xm}(t.transform,e.transform)}class iq{constructor(e,n){this.version=e,this.transformResults=n}}class Qr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qr}static exists(e){return new Qr(void 0,e)}static updateTime(e){return new Qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class oy{}function CR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ly(t.key,Qr.none()):new Gm(t.key,t.data,Qr.none());{const n=t.data,r=us.empty();let i=new br(yr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Al(t.key,r,new ks(i.toArray()),Qr.none())}}function aq(t,e,n){t instanceof Gm?function(i,a,o){const c=i.value.clone(),u=QE(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Al?function(i,a,o){if(!Qg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=QE(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(kR(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Vf(t,e,n,r){return t instanceof Gm?function(a,o,c,u){if(!Qg(a.precondition,o))return c;const d=a.value.clone(),f=XE(a.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Al?function(a,o,c,u){if(!Qg(a.precondition,o))return c;const d=XE(a.fieldTransforms,u,o),f=o.data;return f.setAll(kR(a)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(a,o,c){return Qg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function oq(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=jR(r.transform,i||null);a!=null&&(n===null&&(n=us.empty()),n.set(r.field,a))}return n||null}function YE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&jd(r,i,(a,o)=>sq(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gm extends oy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Al extends oy{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function kR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function QE(t,e,n){const r=new Map;Zt(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,nq(o,c,n[i]))}return r}function XE(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,tq(a,o,e))}return r}class ly extends oy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lq extends oy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&aq(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=wR();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=CR(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),It())}isEqual(e){return this.batchId===e.batchId&&jd(this.mutations,e.mutations,(n,r)=>YE(n,r))&&jd(this.baseMutations,e.baseMutations,(n,r)=>YE(n,r))}}class dj{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Zt(e.mutations.length===r.length);let i=function(){return YB}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new dj(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uq=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn,Mt;function hq(t){switch(t){default:return mt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function TR(t){if(t===void 0)return no("GRPC error has no .code"),ge.UNKNOWN;switch(t){case Gn.OK:return ge.OK;case Gn.CANCELLED:return ge.CANCELLED;case Gn.UNKNOWN:return ge.UNKNOWN;case Gn.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Gn.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Gn.INTERNAL:return ge.INTERNAL;case Gn.UNAVAILABLE:return ge.UNAVAILABLE;case Gn.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Gn.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Gn.NOT_FOUND:return ge.NOT_FOUND;case Gn.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Gn.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Gn.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Gn.ABORTED:return ge.ABORTED;case Gn.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Gn.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Gn.DATA_LOSS:return ge.DATA_LOSS;default:return mt()}}(Mt=Gn||(Gn={}))[Mt.OK=0]="OK",Mt[Mt.CANCELLED=1]="CANCELLED",Mt[Mt.UNKNOWN=2]="UNKNOWN",Mt[Mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mt[Mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mt[Mt.NOT_FOUND=5]="NOT_FOUND",Mt[Mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mt[Mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mt[Mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mt[Mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mt[Mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mt[Mt.ABORTED=10]="ABORTED",Mt[Mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mt[Mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mt[Mt.INTERNAL=13]="INTERNAL",Mt[Mt.UNAVAILABLE=14]="UNAVAILABLE",Mt[Mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mq=new fc([4294967295,4294967295],0);function JE(t){const e=fq().encode(t),n=new eR;return n.update(e),new Uint8Array(n.digest())}function eC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new fc([n,r],0),new fc([i,a],0)]}class hj{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wf(`Invalid padding: ${n}`);if(r<0)throw new wf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wf(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=fc.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(fc.fromNumber(r)));return i.compare(mq)===1&&(i=new fc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=JE(e),[r,i]=eC(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new hj(a,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=JE(e),[r,i]=eC(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class wf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Km.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cy(vt.min(),i,new kn(Lt),ro(),It())}}class Km{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Km(r,n,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class PR{constructor(e,n){this.targetId=e,this.me=n}}class IR{constructor(e,n,r=Nr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class tC{constructor(){this.fe=0,this.ge=rC(),this.pe=Nr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=It(),n=It(),r=It();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:mt()}}),new Km(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=rC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Zt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class pq{constructor(e){this.Le=e,this.Be=new Map,this.ke=ro(),this.qe=nC(),this.Qe=new kn(Lt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:mt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(Bw(a))if(r===0){const o=new ot(a.path);this.Ue(n,o,Rr.newNoDocument(o,vt.min()))}else Zt(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=Ac(r).toUint8Array()}catch(u){if(u instanceof cR)return bd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new hj(o,i,a)}catch(u){return bd(u instanceof wf?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,a,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const c=this.Je(o);if(c){if(a.current&&Bw(c.target)){const u=new ot(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Rr.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=It();this.qe.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new cy(e,n,this.Qe,this.ke,r);return this.ke=ro(),this.qe=nC(),this.Qe=new kn(Lt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new tC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new br(Lt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||et("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function nC(){return new kn(ot.comparator)}function rC(){return new kn(ot.comparator)}const gq={asc:"ASCENDING",desc:"DESCENDING"},vq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xq={and:"AND",or:"OR"};class yq{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ww(t,e){return t.useProto3Json||ty(e)?e:{value:e}}function Zv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _q(t,e){return Zv(t,e.toTimestamp())}function ca(t){return Zt(!!t),vt.fromTimestamp(function(n){const r=gl(n);return new lr(r.seconds,r.nanos)}(t))}function fj(t,e){return Hw(t,e).canonicalString()}function Hw(t,e){const n=function(i){return new sn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RR(t){const e=sn.fromString(t);return Zt(FR(e)),e}function Gw(t,e){return fj(t.databaseId,e.path)}function Z0(t,e){const n=RR(e);if(n.get(1)!==t.databaseId.projectId)throw new ze(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ze(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ot(OR(n))}function MR(t,e){return fj(t.databaseId,e)}function wq(t){const e=RR(t);return e.length===4?sn.emptyPath():OR(e)}function Kw(t){return new sn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OR(t){return Zt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sC(t,e,n){return{name:Gw(t,e),fields:n.value.mapValue.fields}}function bq(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:mt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(Zt(f===void 0||typeof f=="string"),Nr.fromBase64String(f||"")):(Zt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Nr.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?ge.UNKNOWN:TR(d.code);return new ze(f,d.message||"")}(o);n=new IR(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Z0(t,r.document.name),a=ca(r.document.updateTime),o=r.document.createTime?ca(r.document.createTime):vt.min(),c=new us({mapValue:{fields:r.document.fields}}),u=Rr.newFoundDocument(i,a,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Xg(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Z0(t,r.document),a=r.readTime?ca(r.readTime):vt.min(),o=Rr.newNoDocument(i,a),c=r.removedTargetIds||[];n=new Xg([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Z0(t,r.document),a=r.removedTargetIds||[];n=new Xg([],a,i,null)}else{if(!("filter"in e))return mt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new dq(i,a),c=r.targetId;n=new PR(c,o)}}return n}function jq(t,e){let n;if(e instanceof Gm)n={update:sC(t,e.key,e.value)};else if(e instanceof ly)n={delete:Gw(t,e.key)};else if(e instanceof Al)n={update:sC(t,e.key,e.data),updateMask:Aq(e.fieldMask)};else{if(!(e instanceof lq))return mt();n={verify:Gw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const c=o.transform;if(c instanceof xm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ym)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _m)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Kv)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw mt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:_q(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:mt()}(t,e.precondition)),n}function Nq(t,e){return t&&t.length>0?(Zt(e!==void 0),t.map(n=>function(i,a){let o=i.updateTime?ca(i.updateTime):ca(a);return o.isEqual(vt.min())&&(o=ca(a)),new iq(o,i.transformResults||[])}(n,e))):[]}function Sq(t,e){return{documents:[MR(t,e.path)]}}function Eq(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=MR(t,i);const a=function(d){if(d.length!==0)return LR(Pi.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Du(g.field),direction:Tq(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Ww(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function Cq(t){let e=wq(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Zt(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(p){const g=DR(p);return g instanceof Pi&&fR(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(N){return new vm(Lu(N.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,ty(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,_=p.values||[];return new Ed(_,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,_=p.values||[];return new Ed(_,g)}(n.endAt)),WB(e,i,o,a,c,"F",u,d)}function kq(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function DR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Lu(n.unaryFilter.field);return Qn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Lu(n.unaryFilter.field);return Qn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Lu(n.unaryFilter.field);return Qn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Lu(n.unaryFilter.field);return Qn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(t):t.fieldFilter!==void 0?function(n){return Qn.create(Lu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pi.create(n.compositeFilter.filters.map(r=>DR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return mt()}}(n.compositeFilter.op))}(t):mt()}function Tq(t){return gq[t]}function Pq(t){return vq[t]}function Iq(t){return xq[t]}function Du(t){return{fieldPath:t.canonicalString()}}function Lu(t){return yr.fromServerFormat(t.fieldPath)}function LR(t){return t instanceof Qn?function(n){if(n.op==="=="){if(qE(n.value))return{unaryFilter:{field:Du(n.field),op:"IS_NAN"}};if(BE(n.value))return{unaryFilter:{field:Du(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qE(n.value))return{unaryFilter:{field:Du(n.field),op:"IS_NOT_NAN"}};if(BE(n.value))return{unaryFilter:{field:Du(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Du(n.field),op:Pq(n.op),value:n.value}}}(t):t instanceof Pi?function(n){const r=n.getFilters().map(i=>LR(i));return r.length===1?r[0]:{compositeFilter:{op:Iq(n.op),filters:r}}}(t):mt()}function Aq(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n,r,i,a=vt.min(),o=vt.min(),c=Nr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(e){this.ct=e}}function Mq(t){const e=Cq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(){this.un=new Dq}addToCollectionParentIndex(e,n){return this.un.add(n),ke.resolve()}getCollectionParents(e,n){return ke.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ke.resolve()}deleteFieldIndex(e,n){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,n){return ke.resolve()}getDocumentsMatchingTarget(e,n){return ke.resolve(null)}getIndexType(e,n){return ke.resolve(0)}getFieldIndexes(e,n){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,n){return ke.resolve(pl.min())}getMinOffsetFromCollectionGroup(e,n){return ke.resolve(pl.min())}updateCollectionGroup(e,n,r){return ke.resolve()}updateIndexEntries(e,n){return ke.resolve()}}class Dq{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new br(sn.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new br(sn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Cd(0)}static kn(){return new Cd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(){this.changes=new th(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ke.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fq{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Vf(r.mutation,i,ks.empty(),lr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,It()).next(()=>r))}getLocalViewOfDocuments(e,n,r=It()){const i=oc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let o=_f();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=oc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,It()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let a=ro();const o=Ff(),c=function(){return Ff()}();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Al)?a=a.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Vf(f.mutation,d,f.mutation.getFieldMask(),lr.now())):o.set(d.key,ks.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return c.set(d,new Fq(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Ff();let i=new kn((o,c)=>o-c),a=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||ks.empty();f=c.applyToLocalView(d,f),r.set(u,f);const p=(i.get(c.batchId)||It()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,p=wR();f.forEach(g=>{if(!a.has(g)){const _=CR(n.get(g),r.get(g));_!==null&&p.set(g,_),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return ke.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ot.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):ke.resolve(oc());let c=-1,u=a;return o.next(d=>ke.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(f)?ke.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,It())).next(f=>({batchId:c,changes:_R(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ot(n)).next(r=>{let i=_f();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=_f();return this.indexManager.getCollectionParents(e,a).next(c=>ke.forEach(c,u=>{const d=function(p,g){return new Kc(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(o=>{a.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Rr.newInvalidDocument(f)))});let c=_f();return o.forEach((u,d)=>{const f=a.get(u);f!==void 0&&Vf(f.mutation,d,ks.empty(),lr.now()),iy(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ke.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ca(i.createTime)}}(n)),ke.resolve()}getNamedQuery(e,n){return ke.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Mq(i.bundledQuery),readTime:ca(i.readTime)}}(n)),ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uq{constructor(){this.overlays=new kn(ot.comparator),this.Ir=new Map}getOverlay(e,n){return ke.resolve(this.overlays.get(n))}getOverlays(e,n){const r=oc();return ke.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.ht(e,n,a)}),ke.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),ke.resolve()}getOverlaysForCollection(e,n,r){const i=oc(),a=n.length+1,o=new ot(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return ke.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new kn((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=oc(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=oc(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return ke.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new uq(n,r));let a=this.Ir.get(n);a===void 0&&(a=It(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $q{constructor(){this.sessionToken=Nr.EMPTY_BYTE_STRING}getSessionToken(e){return ke.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.Tr=new br(hr.Er),this.dr=new br(hr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new hr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new hr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ot(new sn([])),r=new hr(n,e),i=new hr(n,e+1),a=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ot(new sn([])),r=new hr(n,e),i=new hr(n,e+1);let a=It();return this.dr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new hr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class hr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ot.comparator(e.key,n.key)||Lt(e.wr,n.wr)}static Ar(e,n){return Lt(e.wr,n.wr)||ot.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new br(hr.Er)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new cq(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new hr(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ke.resolve(o)}lookupMutationBatch(e,n){return ke.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return ke.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new hr(n,0),i=new hr(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],o=>{const c=this.Dr(o.wr);a.push(c)}),ke.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new br(Lt);return n.forEach(i=>{const a=new hr(i,0),o=new hr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],c=>{r=r.add(c.wr)})}),ke.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;ot.isDocumentKey(a)||(a=a.child(""));const o=new hr(new ot(a),0);let c=new br(Lt);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),ke.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Zt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ke.forEach(n.mutations,i=>{const a=new hr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new hr(n,0),i=this.br.firstAfterOrEqual(r);return ke.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e){this.Mr=e,this.docs=function(){return new kn(ot.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ke.resolve(r?r.document.mutableCopy():Rr.newInvalidDocument(n))}getEntries(e,n){let r=ro();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Rr.newInvalidDocument(i))}),ke.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ro();const o=n.path,c=new ot(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||EB(SB(f),r)<=0||(i.has(f.key)||iy(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return ke.resolve(a)}getAllFromCollectionGroup(e,n,r,i){mt()}Or(e,n){return ke.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Wq(this)}getSize(e){return ke.resolve(this.size)}}class Wq extends Lq{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ke.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq{constructor(e){this.persistence=e,this.Nr=new th(n=>oj(n),lj),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mj,this.targetCount=0,this.kr=Cd.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ke.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Cd(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ke.resolve()}updateTargetData(e,n){return this.Kn(n),ke.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),ke.waitFor(a).next(()=>i)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ke.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ke.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),ke.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ke.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ke.resolve(r)}containsKey(e,n){return ke.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sj(0),this.Kr=!1,this.Kr=!0,this.$r=new $q,this.referenceDelegate=e(this),this.Ur=new Hq(this),this.indexManager=new Oq,this.remoteDocumentCache=function(i){return new qq(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Rq(n),this.Gr=new zq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Uq,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Bq(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){et("MemoryPersistence","Starting transaction:",e);const i=new Kq(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,n){return ke.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Kq extends kB{constructor(e){super(),this.currentSequenceNumber=e}}class pj{constructor(e){this.persistence=e,this.Jr=new mj,this.Yr=null}static Zr(e){return new pj(e)}get Xr(){if(this.Yr)return this.Yr;throw mt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ke.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ke.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ke.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Xr,r=>{const i=ot.fromPath(r);return this.ei(e,i).next(a=>{a||n.removeEntry(i,vt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ke.or([()=>ke.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=It(),i=It();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new gj(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Az()?8:TB(Vr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new Zq;return this.Xi(e,n,o).next(c=>{if(a.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>a.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(tf()<=At.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",Ou(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ke.resolve()):(tf()<=At.DEBUG&&et("QueryEngine","Query:",Ou(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(tf()<=At.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",Ou(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,la(n))):ke.resolve())}Yi(e,n){if(KE(n))return ke.resolve(null);let r=la(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Gv(n,null,"F"),r=la(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=It(...a);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,Gv(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return KE(n)||i.isEqual(vt.min())?ke.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,i)?ke.resolve(null):(tf()<=At.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ou(n)),this.rs(e,o,n,NB(i,-1)).next(c=>c))})}ts(e,n){let r=new br(xR(e));return n.forEach((i,a)=>{iy(e,a)&&(r=r.add(a))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return tf()<=At.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",Ou(n)),this.Ji.getDocumentsMatchingQuery(e,n,pl.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qq{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new kn(Lt),this._s=new th(a=>oj(a),lj),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vq(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Xq(t,e,n,r){return new Qq(t,e,n,r)}async function VR(t,e){const n=wt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],c=[];let u=It();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of a){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function Jq(t,e){const n=wt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const p=d.batch,g=p.keys();let _=ke.resolve();return g.forEach(N=>{_=_.next(()=>f.getEntry(u,N)).next(b=>{const S=d.docVersions.get(N);Zt(S!==null),b.version.compareTo(S)<0&&(p.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=It();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function zR(t){const e=wt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function eW(t,e){const n=wt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;c.push(n.Ur.removeMatchingKeys(a,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(a,f.addedDocuments,p)));let _=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Nr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(p,_),function(b,S,w){return b.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,_,f)&&c.push(n.Ur.updateTargetData(a,_))});let u=ro(),d=It();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),c.push(tW(a,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(vt.min())){const f=n.Ur.getLastRemoteSnapshotVersion(a).next(p=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(f)}return ke.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.os=i,a))}function tW(t,e,n){let r=It(),i=It();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=ro();return n.forEach((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(vt.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):et("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function nW(t,e){const n=wt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rW(t,e){const n=wt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(a=>a?(i=a,ke.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ko(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Zw(t,e,n){const r=wt(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Hm(o))throw o;et("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function iC(t,e,n){const r=wt(t);let i=vt.min(),a=It();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=wt(u),g=p._s.get(f);return g!==void 0?ke.resolve(p.os.get(g)):p.Ur.getTargetData(d,f)}(r,o,la(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:vt.min(),n?a:It())).next(c=>(sW(r,GB(e),c),{documents:c,Ts:a})))}function sW(t,e,n){let r=t.us.get(e)||vt.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class aC{constructor(){this.activeTargetIds=JB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iW{constructor(){this.so=new aC,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new aC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg=null;function Y0(){return vg===null?vg=function(){return 268435456+Math.round(2147483648*Math.random())}():vg++,"0x"+vg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="WebChannelConnection";class cW extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,o){const c=Y0(),u=this.xo(n,r.toUriEncodedString());et("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(n,u,d,i).then(f=>(et("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw bd("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,a,o,c){return this.Mo(n,r,i,a,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eh}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),i&&i.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const i=oW[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=Y0();return new Promise((o,c)=>{const u=new tR;u.setWithCredentials(!0),u.listenOnce(nR.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Zg.NO_ERROR:const f=u.getResponseJson();et(Tr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case Zg.TIMEOUT:et(Tr,`RPC '${e}' ${a} timed out`),c(new ze(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Zg.HTTP_ERROR:const p=u.getStatus();if(et(Tr,`RPC '${e}' ${a} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const N=function(S){const w=S.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(w)>=0?w:ge.UNKNOWN}(_.status);c(new ze(N,_.message))}else c(new ze(ge.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ze(ge.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{et(Tr,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);et(Tr,`RPC '${e}' ${a} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=Y0(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iR(),c=sR(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=a.join("");et(Tr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,_=!1;const N=new lW({Io:S=>{_?et(Tr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||(et(Tr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),et(Tr,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},To:()=>p.close()}),b=(S,w,y)=>{S.listen(w,E=>{try{y(E)}catch(I){setTimeout(()=>{throw I},0)}})};return b(p,yf.EventType.OPEN,()=>{_||(et(Tr,`RPC '${e}' stream ${i} transport opened.`),N.yo())}),b(p,yf.EventType.CLOSE,()=>{_||(_=!0,et(Tr,`RPC '${e}' stream ${i} transport closed`),N.So())}),b(p,yf.EventType.ERROR,S=>{_||(_=!0,bd(Tr,`RPC '${e}' stream ${i} transport errored:`,S),N.So(new ze(ge.UNAVAILABLE,"The operation could not be completed")))}),b(p,yf.EventType.MESSAGE,S=>{var w;if(!_){const y=S.data[0];Zt(!!y);const E=y,I=E.error||((w=E[0])===null||w===void 0?void 0:w.error);if(I){et(Tr,`RPC '${e}' stream ${i} received error:`,I);const O=I.status;let q=function(U){const k=Gn[U];if(k!==void 0)return TR(k)}(O),R=I.message;q===void 0&&(q=ge.INTERNAL,R="Unknown error status: "+O+" with message "+I.message),_=!0,N.So(new ze(q,R)),p.close()}else et(Tr,`RPC '${e}' stream ${i} received:`,y),N.bo(y)}}),b(c,rR.STAT_EVENT,S=>{S.stat===Vw.PROXY?et(Tr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Vw.NOPROXY&&et(Tr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function Q0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t){return new yq(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n,r,i,a,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new UR(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(no(n.toString()),no("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ze(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uW extends $R{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=bq(this.serializer,e),r=function(a){if(!("targetChange"in a))return vt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?vt.min():o.readTime?ca(o.readTime):vt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Kw(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=Bw(u)?{documents:Sq(a,u)}:{query:Eq(a,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=AR(a,o.resumeToken);const d=Ww(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(vt.min())>0){c.readTime=Zv(a,o.snapshotVersion.toTimestamp());const d=Ww(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=kq(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Kw(this.serializer),n.removeTarget=e,this.a_(n)}}class dW extends $R{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Zt(!!e.streamToken),this.lastStreamToken=e.streamToken,Zt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Nq(e.writeResults,e.commitTime),r=ca(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Kw(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>jq(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ze(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,Hw(n,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ze(ge.UNKNOWN,a.toString())})}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Hw(n,r),i,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ze(ge.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class fW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(no(n),this.D_=!1):et("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{Zc(this)&&(et("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=wt(u);d.L_.add(4),await Zm(d),d.q_.set("Unknown"),d.L_.delete(4),await dy(d)}(this))})}),this.q_=new fW(r,i)}}async function dy(t){if(Zc(t))for(const e of t.B_)await e(!0)}async function Zm(t){for(const e of t.B_)await e(!1)}function BR(t,e){const n=wt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),_j(n)?yj(n):nh(n).r_()&&xj(n,e))}function vj(t,e){const n=wt(t),r=nh(n);n.N_.delete(e),r.r_()&&qR(n,e),n.N_.size===0&&(r.r_()?r.o_():Zc(n)&&n.q_.set("Unknown"))}function xj(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nh(t).A_(e)}function qR(t,e){t.Q_.xe(e),nh(t).R_(e)}function yj(t){t.Q_=new pq({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),nh(t).start(),t.q_.v_()}function _j(t){return Zc(t)&&!nh(t).n_()&&t.N_.size>0}function Zc(t){return wt(t).L_.size===0}function WR(t){t.Q_=void 0}async function pW(t){t.q_.set("Online")}async function gW(t){t.N_.forEach((e,n)=>{xj(t,e)})}async function vW(t,e){WR(t),_j(t)?(t.q_.M_(e),yj(t)):t.q_.set("Unknown")}async function xW(t,e,n){if(t.q_.set("Online"),e instanceof IR&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yv(t,r)}else if(e instanceof Xg?t.Q_.Ke(e):e instanceof PR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(vt.min()))try{const r=await zR(t.localStore);n.compareTo(r)>=0&&await function(a,o){const c=a.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=a.N_.get(d);f&&a.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=a.N_.get(u);if(!f)return;a.N_.set(u,f.withResumeToken(Nr.EMPTY_BYTE_STRING,f.snapshotVersion)),qR(a,u);const p=new Ko(f.target,u,d,f.sequenceNumber);xj(a,p)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){et("RemoteStore","Failed to raise snapshot:",r),await Yv(t,r)}}async function Yv(t,e,n){if(!Hm(e))throw e;t.L_.add(1),await Zm(t),t.q_.set("Offline"),n||(n=()=>zR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{et("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await dy(t)})}function HR(t,e){return e().catch(n=>Yv(t,n,e))}async function hy(t){const e=wt(t),n=vl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;yW(e);)try{const i=await nW(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,_W(e,i)}catch(i){await Yv(e,i)}GR(e)&&KR(e)}function yW(t){return Zc(t)&&t.O_.length<10}function _W(t,e){t.O_.push(e);const n=vl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function GR(t){return Zc(t)&&!vl(t).n_()&&t.O_.length>0}function KR(t){vl(t).start()}async function wW(t){vl(t).p_()}async function bW(t){const e=vl(t);for(const n of t.O_)e.m_(n.mutations)}async function jW(t,e,n){const r=t.O_.shift(),i=dj.from(r,e,n);await HR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await hy(t)}async function NW(t,e){e&&vl(t).V_&&await async function(r,i){if(function(o){return hq(o)&&o!==ge.ABORTED}(i.code)){const a=r.O_.shift();vl(r).s_(),await HR(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await hy(r)}}(t,e),GR(t)&&KR(t)}async function lC(t,e){const n=wt(t);n.asyncQueue.verifyOperationInProgress(),et("RemoteStore","RemoteStore received new credentials");const r=Zc(n);n.L_.add(3),await Zm(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await dy(n)}async function SW(t,e){const n=wt(t);e?(n.L_.delete(2),await dy(n)):e||(n.L_.add(2),await Zm(n),n.q_.set("Unknown"))}function nh(t){return t.K_||(t.K_=function(n,r,i){const a=wt(n);return a.w_(),new uW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:pW.bind(null,t),Ro:gW.bind(null,t),mo:vW.bind(null,t),d_:xW.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),_j(t)?yj(t):t.q_.set("Unknown")):(await t.K_.stop(),WR(t))})),t.K_}function vl(t){return t.U_||(t.U_=function(n,r,i){const a=wt(n);return a.w_(),new dW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:wW.bind(null,t),mo:NW.bind(null,t),f_:bW.bind(null,t),g_:jW.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await hy(t)):(await t.U_.stop(),t.O_.length>0&&(et("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new wj(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bj(t,e){if(no("AsyncQueue",`${e}: ${t}`),Hm(t))return new ze(ge.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ot.comparator(n.key,r.key):(n,r)=>ot.comparator(n.key,r.key),this.keyedMap=_f(),this.sortedSet=new kn(this.comparator)}static emptySet(e){return new cd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new cd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.W_=new kn(ot.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):mt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class kd{constructor(e,n,r,i,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new kd(e,n,cd.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class CW{constructor(){this.queries=uC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=wt(n),a=i.queries;i.queries=uC(),a.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new ze(ge.ABORTED,"Firestore shutting down"))}}function uC(){return new th(t=>vR(t),sy)}async function jj(t,e){const n=wt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new EW,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=bj(o,`Initialization of query '${Ou(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Sj(n)}async function Nj(t,e){const n=wt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kW(t,e){const n=wt(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&Sj(n)}function TW(t,e,n){const r=wt(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function Sj(t){t.Y_.forEach(e=>{e.next()})}var Yw,dC;(dC=Yw||(Yw={})).ea="default",dC.Cache="cache";class Ej{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new kd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.key=e}}class YR{constructor(e){this.key=e}}class PW{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=It(),this.mutatedKeys=It(),this.Aa=xR(e),this.Ra=new cd(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new cC,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),_=iy(this.query,p)?p:null,N=!!g&&this.mutatedKeys.has(g.key),b=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;g&&_?g.data.isEqual(_.data)?N!==b&&(r.track({type:3,doc:_}),S=!0):this.ga(g,_)||(r.track({type:2,doc:_}),S=!0,(u&&this.Aa(_,u)>0||d&&this.Aa(_,d)<0)&&(c=!0)):!g&&_?(r.track({type:0,doc:_}),S=!0):g&&!_&&(r.track({type:1,doc:g}),S=!0,(u||d)&&(c=!0)),S&&(_?(o=o.add(_),a=b?a.add(f):a.delete(f)):(o=o.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(_,N){const b=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return b(_)-b(N)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new kd(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new cC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=It(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new YR(r))}),this.da.forEach(r=>{e.has(r)||n.push(new ZR(r))}),n}ba(e){this.Ta=e.Ts,this.da=It();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return kd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class IW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class AW{constructor(e){this.key=e,this.va=!1}}class RW{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new th(c=>vR(c),sy),this.Ma=new Map,this.xa=new Set,this.Oa=new kn(ot.comparator),this.Na=new Map,this.La=new mj,this.Ba={},this.ka=new Map,this.qa=Cd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function MW(t,e,n=!0){const r=n4(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await QR(r,e,n,!0),i}async function OW(t,e){const n=n4(t);await QR(n,e,!0,!1)}async function QR(t,e,n,r){const i=await rW(t.localStore,la(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await DW(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&BR(t.remoteStore,i),c}async function DW(t,e,n,r,i){t.Ka=(p,g,_)=>async function(b,S,w,y){let E=S.view.ma(w);E.ns&&(E=await iC(b.localStore,S.query,!1).then(({documents:R})=>S.view.ma(R,E)));const I=y&&y.targetChanges.get(S.targetId),O=y&&y.targetMismatches.get(S.targetId)!=null,q=S.view.applyChanges(E,b.isPrimaryClient,I,O);return fC(b,S.targetId,q.wa),q.snapshot}(t,p,g,_);const a=await iC(t.localStore,e,!0),o=new PW(e,a.Ts),c=o.ma(a.documents),u=Km.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);fC(t,n,d.wa);const f=new IW(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function LW(t,e,n){const r=wt(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(o=>!sy(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Zw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vj(r.remoteStore,i.targetId),Qw(r,i.targetId)}).catch(Wm)):(Qw(r,i.targetId),await Zw(r.localStore,i.targetId,!0))}async function FW(t,e){const n=wt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vj(n.remoteStore,r.targetId))}async function VW(t,e,n){const r=HW(t);try{const i=await function(o,c){const u=wt(o),d=lr.now(),f=c.reduce((_,N)=>_.add(N.key),It());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let N=ro(),b=It();return u.cs.getEntries(_,f).next(S=>{N=S,N.forEach((w,y)=>{y.isValidDocument()||(b=b.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,N)).next(S=>{p=S;const w=[];for(const y of c){const E=oq(y,p.get(y.key).overlayedDocument);E!=null&&w.push(new Al(y.key,E,uR(E.value.mapValue),Qr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,w,c)}).next(S=>{g=S;const w=S.applyToLocalDocumentSet(p,b);return u.documentOverlayCache.saveOverlays(_,S.batchId,w)})}).then(()=>({batchId:g.batchId,changes:_R(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new kn(Lt)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,n),await Ym(r,i.changes),await hy(r.remoteStore)}catch(i){const a=bj(i,"Failed to persist write");n.reject(a)}}async function XR(t,e){const n=wt(t);try{const r=await eW(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Na.get(a);o&&(Zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Zt(o.va):i.removedDocuments.size>0&&(Zt(o.va),o.va=!1))}),await Ym(n,r,e)}catch(r){await Wm(r)}}function hC(t,e,n){const r=wt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((a,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=wt(o);u.onlineState=c;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(c)&&(d=!0)}),d&&Sj(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zW(t,e,n){const r=wt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new kn(ot.comparator);o=o.insert(a,Rr.newNoDocument(a,vt.min()));const c=It().add(a),u=new cy(vt.min(),new Map,new kn(Lt),o,c);await XR(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),Cj(r)}else await Zw(r.localStore,e,!1).then(()=>Qw(r,e,n)).catch(Wm)}async function UW(t,e){const n=wt(t),r=e.batch.batchId;try{const i=await Jq(n.localStore,e);e4(n,r,null),JR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ym(n,i)}catch(i){await Wm(i)}}async function $W(t,e,n){const r=wt(t);try{const i=await function(o,c){const u=wt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(Zt(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);e4(r,e,n),JR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ym(r,i)}catch(i){await Wm(i)}}function JR(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function e4(t,e,n){const r=wt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Qw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||t4(t,r)})}function t4(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(vj(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Cj(t))}function fC(t,e,n){for(const r of n)r instanceof ZR?(t.La.addReference(r.key,e),BW(t,r)):r instanceof YR?(et("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||t4(t,r.key)):mt()}function BW(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(et("SyncEngine","New document in limbo: "+n),t.xa.add(r),Cj(t))}function Cj(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ot(sn.fromString(e)),r=t.qa.next();t.Na.set(r,new AW(n)),t.Oa=t.Oa.insert(n,r),BR(t.remoteStore,new Ko(la(ry(n.path)),r,"TargetPurposeLimboResolution",sj.oe))}}async function Ym(t,e,n){const r=wt(t),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){i.push(d);const p=gj.Wi(u.targetId,d);a.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,d){const f=wt(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>ke.forEach(d,g=>ke.forEach(g.$i,_=>f.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>ke.forEach(g.Ui,_=>f.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!Hm(p))throw p;et("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const _=f.os.get(g),N=_.snapshotVersion,b=_.withLastLimboFreeSnapshotVersion(N);f.os=f.os.insert(g,b)}}}(r.localStore,a))}async function qW(t,e){const n=wt(t);if(!n.currentUser.isEqual(e)){et("SyncEngine","User change. New user:",e.toKey());const r=await VR(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(c=>{c.forEach(u=>{u.reject(new ze(ge.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ym(n,r.hs)}}function WW(t,e){const n=wt(t),r=n.Na.get(e);if(r&&r.va)return It().add(r.key);{let i=It();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function n4(t){const e=wt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=XR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zW.bind(null,e),e.Ca.d_=kW.bind(null,e.eventManager),e.Ca.$a=TW.bind(null,e.eventManager),e}function HW(t){const e=wt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$W.bind(null,e),e}class Qv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uy(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Xq(this.persistence,new Yq,e.initialUser,this.serializer)}Ga(e){return new Gq(pj.Zr,this.serializer)}Wa(e){return new iW}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qv.provider={build:()=>new Qv};class Xw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qW.bind(null,this.syncEngine),await SW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CW}()}createDatastore(e){const n=uy(e.databaseInfo.databaseId),r=function(a){return new cW(a)}(e.databaseInfo);return function(a,o,c,u){return new hW(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,o,c){return new mW(r,i,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>hC(this.syncEngine,n,0),function(){return oC.D()?new oC:new aW}())}createSyncEngine(e,n){return function(i,a,o,c,u,d,f){const p=new RW(i,a,o,c,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=wt(i);et("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Zm(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Xw.provider={build:()=>new Xw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):no("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ir.UNAUTHENTICATED,this.clientId=oR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{et("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(et("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bj(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function X0(t,e){t.asyncQueue.verifyOperationInProgress(),et("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function mC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KW(t);et("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>lC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>lC(e.remoteStore,i)),t._onlineComponents=e}async function KW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){et("FirestoreClient","Using user provided OfflineComponentProvider");try{await X0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ge.FAILED_PRECONDITION||i.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;bd("Error using user provided cache. Falling back to memory cache: "+n),await X0(t,new Qv)}}else et("FirestoreClient","Using default OfflineComponentProvider"),await X0(t,new Qv);return t._offlineComponents}async function r4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(et("FirestoreClient","Using user provided OnlineComponentProvider"),await mC(t,t._uninitializedComponentsProvider._online)):(et("FirestoreClient","Using default OnlineComponentProvider"),await mC(t,new Xw))),t._onlineComponents}function ZW(t){return r4(t).then(e=>e.syncEngine)}async function Xv(t){const e=await r4(t),n=e.eventManager;return n.onListen=MW.bind(null,e.syncEngine),n.onUnlisten=LW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=FW.bind(null,e.syncEngine),n}function YW(t,e,n={}){const r=new Ga;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const f=new kj({next:g=>{f.Za(),o.enqueueAndForget(()=>Nj(a,p));const _=g.docs.has(c);!_&&g.fromCache?d.reject(new ze(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?d.reject(new ze(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Ej(ry(c.path),f,{includeMetadataChanges:!0,_a:!0});return jj(a,p)}(await Xv(t),t.asyncQueue,e,n,r)),r.promise}function QW(t,e,n={}){const r=new Ga;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const f=new kj({next:g=>{f.Za(),o.enqueueAndForget(()=>Nj(a,p)),g.fromCache&&u.source==="server"?d.reject(new ze(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Ej(c,f,{includeMetadataChanges:!0,_a:!0});return jj(a,p)}(await Xv(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t,e,n){if(!n)throw new ze(ge.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XW(t,e,n,r){if(e===!0&&r===!0)throw new ze(ge.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gC(t){if(!ot.isDocumentKey(t))throw new ze(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vC(t){if(ot.isDocumentKey(t))throw new ze(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":mt()}function Xr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ze(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fy(t);throw new ze(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function JW(t,e){if(e<=0)throw new ze(ge.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ze(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ze(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=s4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ze(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ze(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ze(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class my{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pB;switch(r.type){case"firstParty":return new yB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ze(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=pC.get(n);r&&(et("ComponentProvider","Removing Datastore"),pC.delete(n),r.terminate())}(this),Promise.resolve()}}function eH(t,e,n,r={}){var i;const a=(t=Xr(t,my))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&bd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Ir.MOCK_USER;else{c=cA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ze(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ir(d)}t._authCredentials=new gB(new aR(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ya(this.firestore,e,this._query)}}class Lr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lr(this.firestore,e,this._key)}}class ll extends ya{constructor(e,n,r){super(e,n,ry(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lr(this.firestore,null,new ot(e))}withConverter(e){return new ll(this.firestore,e,this._path)}}function Vt(t,e,...n){if(t=Ut(t),i4("collection","path",e),t instanceof my){const r=sn.fromString(e,...n);return vC(r),new ll(t,null,r)}{if(!(t instanceof Lr||t instanceof ll))throw new ze(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(sn.fromString(e,...n));return vC(r),new ll(t.firestore,null,r)}}function yt(t,e,...n){if(t=Ut(t),arguments.length===1&&(e=oR.newId()),i4("doc","path",e),t instanceof my){const r=sn.fromString(e,...n);return gC(r),new Lr(t,null,new ot(r))}{if(!(t instanceof Lr||t instanceof ll))throw new ze(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(sn.fromString(e,...n));return gC(r),new Lr(t.firestore,t instanceof ll?t.converter:null,new ot(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new UR(this,"async_queue_retry"),this.Vu=()=>{const r=Q0();r&&et("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Q0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Q0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ga;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Hm(e))throw e;et("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw no("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=wj.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&mt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function _C(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class pa extends my{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new yC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yC(e),this._firestoreClient=void 0,await e}}}function a4(t,e){const n=typeof t=="object"?t:H1(),r=typeof t=="string"?t:"(default)",i=Qx(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=aA("firestore");a&&eH(i,...a)}return i}function Qm(t){if(t._terminated)throw new ze(ge.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tH(t),t._firestoreClient}function tH(t){var e,n,r;const i=t._freezeSettings(),a=function(c,u,d,f){return new AB(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,s4(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new GW(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Td(Nr.fromBase64String(e))}catch(n){throw new ze(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Td(Nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ze(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ze(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ze(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH=/^__.*__$/;class rH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Al(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gm(e,this.data,n,this.fieldTransforms)}}class o4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Al(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function l4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class Ij{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ij(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(l4(this.Cu)&&nH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class sH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||uy(e)}Qu(e,n,r,i=!1){return new Ij({Cu:e,methodName:n,qu:r,path:yr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rh(t){const e=t._freezeSettings(),n=uy(t._databaseId);return new sH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Aj(t,e,n,r,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);Mj("Data must be an object, but it was:",o,r);const c=h4(r,o);let u,d;if(a.merge)u=new ks(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const f=[];for(const p of a.mergeFields){const g=Jw(e,p,n);if(!o.contains(g))throw new ze(ge.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);m4(f,g)||f.push(g)}u=new ks(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new rH(new us(c),u,d)}class gy extends py{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gy}}class Rj extends py{_toFieldTransform(e){return new rq(e.path,new xm)}isEqual(e){return e instanceof Rj}}function c4(t,e,n,r){const i=t.Qu(1,e,n);Mj("Data must be an object, but it was:",i,r);const a=[],o=us.empty();Gc(r,(u,d)=>{const f=Oj(e,u,n);d=Ut(d);const p=i.Nu(f);if(d instanceof gy)a.push(f);else{const g=Jm(d,p);g!=null&&(a.push(f),o.set(f,g))}});const c=new ks(a);return new o4(o,c,i.fieldTransforms)}function u4(t,e,n,r,i,a){const o=t.Qu(1,e,n),c=[Jw(e,r,n)],u=[i];if(a.length%2!=0)throw new ze(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)c.push(Jw(e,a[g])),u.push(a[g+1]);const d=[],f=us.empty();for(let g=c.length-1;g>=0;--g)if(!m4(d,c[g])){const _=c[g];let N=u[g];N=Ut(N);const b=o.Nu(_);if(N instanceof gy)d.push(_);else{const S=Jm(N,b);S!=null&&(d.push(_),f.set(_,S))}}const p=new ks(d);return new o4(f,p,o.fieldTransforms)}function d4(t,e,n,r=!1){return Jm(n,t.Qu(r?4:3,e))}function Jm(t,e){if(f4(t=Ut(t)))return Mj("Unsupported field value:",e,t),h4(t,e);if(t instanceof py)return function(r,i){if(!l4(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const c of r){let u=Jm(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=Ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=lr.fromDate(r);return{timestampValue:Zv(i.serializer,a)}}if(r instanceof lr){const a=new lr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zv(i.serializer,a)}}if(r instanceof Tj)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Td)return{bytesValue:AR(i.serializer,r._byteString)};if(r instanceof Lr){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:fj(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pj)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return uj(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${fy(r)}`)}(t,e)}function h4(t,e){const n={};return lR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gc(t,(r,i)=>{const a=Jm(i,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function f4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lr||t instanceof Tj||t instanceof Td||t instanceof Lr||t instanceof py||t instanceof Pj)}function Mj(t,e,n){if(!f4(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=fy(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Jw(t,e,n){if((e=Ut(e))instanceof Xm)return e._internalPath;if(typeof e=="string")return Oj(t,e);throw Jv("Field path arguments must be of type string or ",t,!1,void 0,n)}const iH=new RegExp("[~\\*/\\[\\]]");function Oj(t,e,n){if(e.search(iH)>=0)throw Jv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xm(...e.split("."))._internalPath}catch{throw Jv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jv(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ze(ge.INVALID_ARGUMENT,c+t+u)}function m4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Lr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aH extends Dj{data(){return super.data()}}function vy(t,e){return typeof e=="string"?Oj(t,e):e instanceof Xm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ze(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lj{}class xy extends Lj{}function _n(t,e,...n){let r=[];e instanceof Lj&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof Fj).length,c=a.filter(u=>u instanceof yy).length;if(o>1||o>0&&c>0)throw new ze(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class yy extends xy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yy(e,n,r)}_apply(e){const n=this._parse(e);return g4(e._query,n),new ya(e.firestore,e.converter,qw(e._query,n))}_parse(e){const n=rh(e.firestore);return function(a,o,c,u,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new ze(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){jC(p,f);const _=[];for(const N of p)_.push(bC(u,a,N));g={arrayValue:{values:_}}}else g=bC(u,a,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||jC(p,f),g=d4(c,o,p,f==="in"||f==="not-in");return Qn.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xn(t,e,n){const r=e,i=vy("where",t);return yy._create(i,r,n)}class Fj extends Lj{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fj(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)g4(o,u),o=qw(o,u)}(e._query,n),new ya(e.firestore,e.converter,qw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vj extends xy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vj(e,n)}_apply(e){const n=function(i,a,o){if(i.startAt!==null)throw new ze(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ze(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vm(a,o)}(e._query,this._field,this._direction);return new ya(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new Kc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function wC(t,e="asc"){const n=e,r=vy("orderBy",t);return Vj._create(r,n)}class zj extends xy{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zj(e,n,r)}_apply(e){return new ya(e.firestore,e.converter,Gv(e._query,this._limit,this._limitType))}}function ei(t){return JW("limit",t),zj._create("limit",t,"F")}class Uj extends xy{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Uj(e,n,r)}_apply(e){const n=lH(e,this.type,this._docOrFields,this._inclusive);return new ya(e.firestore,e.converter,function(i,a){return new Kc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)}(e._query,n))}}function oH(...t){return Uj._create("startAfter",t,!1)}function lH(t,e,n,r){if(n[0]=Ut(n[0]),n[0]instanceof Dj)return function(a,o,c,u,d){if(!u)throw new ze(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const f=[];for(const p of ld(a))if(p.field.isKeyField())f.push(Hv(o,u.key));else{const g=u.data.field(p.field);if(ny(g))throw new ze(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const _=p.field.canonicalString();throw new ze(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}f.push(g)}return new Ed(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=rh(t.firestore);return function(o,c,u,d,f,p){const g=o.explicitOrderBy;if(f.length>g.length)throw new ze(ge.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let N=0;N<f.length;N++){const b=f[N];if(g[N].field.isKeyField()){if(typeof b!="string")throw new ze(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof b}`);if(!cj(o)&&b.indexOf("/")!==-1)throw new ze(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${b}' contains a slash.`);const S=o.path.child(sn.fromString(b));if(!ot.isDocumentKey(S))throw new ze(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const w=new ot(S);_.push(Hv(c,w))}else{const S=d4(u,d,b);_.push(S)}}return new Ed(_,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function bC(t,e,n){if(typeof(n=Ut(n))=="string"){if(n==="")throw new ze(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cj(e)&&n.indexOf("/")!==-1)throw new ze(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(sn.fromString(n));if(!ot.isDocumentKey(r))throw new ze(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hv(t,new ot(r))}if(n instanceof Lr)return Hv(t,n._key);throw new ze(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fy(n)}.`)}function jC(t,e){if(!Array.isArray(t)||t.length===0)throw new ze(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function g4(t,e){const n=function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ze(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cH{convertValue(e,n="none"){switch(Rc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return On(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ac(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw mt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gc(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>On(o.doubleValue));return new Pj(a)}convertGeoPoint(e){return new Tj(On(e.latitude),On(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ij(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mm(e));default:return null}}convertTimestamp(e){const n=gl(e);return new lr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=sn.fromString(e);Zt(FR(r));const i=new pm(r.get(1),r.get(3)),a=new ot(r.popFirst(5));return i.isEqual(n)||no(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class v4 extends Dj{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Jg extends v4{data(e={}){return super.data(e)}}class x4{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jg(this._firestore,this._userDataWriter,r.key,r,new bf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ze(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new Jg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new bf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new Jg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new bf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:uH(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function uH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t){t=Xr(t,Lr);const e=Xr(t.firestore,pa);return YW(Qm(e),t._key).then(n=>y4(e,t,n))}class Bj extends cH{constructor(e){super(),this.firestore=e}convertBytes(e){return new Td(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lr(this.firestore,null,n)}}function Fn(t){t=Xr(t,ya);const e=Xr(t.firestore,pa),n=Qm(e),r=new Bj(e);return p4(t._query),QW(n,t._query).then(i=>new x4(e,r,t,i))}function lc(t,e,n){t=Xr(t,Lr);const r=Xr(t.firestore,pa),i=$j(t.converter,e,n);return ep(r,[Aj(rh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Qr.none())])}function yn(t,e,n,...r){t=Xr(t,Lr);const i=Xr(t.firestore,pa),a=rh(i);let o;return o=typeof(e=Ut(e))=="string"||e instanceof Xm?u4(a,"updateDoc",t._key,e,n,r):c4(a,"updateDoc",t._key,e),ep(i,[o.toMutation(t._key,Qr.exists(!0))])}function Pd(t){return ep(Xr(t.firestore,pa),[new ly(t._key,Qr.none())])}function xl(t,e){const n=Xr(t.firestore,pa),r=yt(t),i=$j(t.converter,e);return ep(n,[Aj(rh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Qr.exists(!1))]).then(()=>r)}function NC(t,...e){var n,r,i;t=Ut(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||_C(e[o])||(a=e[o],o++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(_C(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,d,f;if(t instanceof Lr)d=Xr(t.firestore,pa),f=ry(t._key.path),u={next:p=>{e[o]&&e[o](y4(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Xr(t,ya);d=Xr(p.firestore,pa),f=p._query;const g=new Bj(d);u={next:_=>{e[o]&&e[o](new x4(d,g,p,_))},error:e[o+1],complete:e[o+2]},p4(t._query)}return function(g,_,N,b){const S=new kj(b),w=new Ej(_,S,N);return g.asyncQueue.enqueueAndForget(async()=>jj(await Xv(g),w)),()=>{S.Za(),g.asyncQueue.enqueueAndForget(async()=>Nj(await Xv(g),w))}}(Qm(d),f,c,u)}function ep(t,e){return function(r,i){const a=new Ga;return r.asyncQueue.enqueueAndForget(async()=>VW(await ZW(r),i,a)),a.promise}(Qm(t),e)}function y4(t,e,n){const r=n.docs.get(e._key),i=new Bj(t);return new v4(t,i,e._key,r,new bf(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=rh(e)}set(e,n,r){this._verifyNotCommitted();const i=J0(e,this._firestore),a=$j(i.converter,n,r),o=Aj(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Qr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=J0(e,this._firestore);let o;return o=typeof(n=Ut(n))=="string"||n instanceof Xm?u4(this._dataReader,"WriteBatch.update",a._key,n,r,i):c4(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Qr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=J0(e,this._firestore);return this._mutations=this._mutations.concat(new ly(n._key,Qr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function J0(t,e){if((t=Ut(t)).firestore!==e)throw new ze(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function sr(){return new Rj("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t){return Qm(t=Xr(t,pa)),new dH(t,e=>ep(t,e))}(function(e,n=!0){(function(i){eh=i})(Hc),Cc(new fl("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new pa(new vB(r.getProvider("auth-internal")),new wB(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ze(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pm(d.options.projectId,f)}(o,i),o);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),ia(FE,"4.7.3",e),ia(FE,"4.7.3","esm2017")})();var hH="firebase",fH="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ia(hH,fH,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="firebasestorage.googleapis.com",b4="storageBucket",mH=2*60*1e3,pH=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends xa{constructor(e,n,r=0){super(e_(e),`Firebase Storage: ${n} (${e_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return e_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var An;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(An||(An={}));function e_(t){return"storage/"+t}function qj(){const t="An unknown error occurred, please check the error payload for server response.";return new Rn(An.UNKNOWN,t)}function gH(t){return new Rn(An.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function vH(t){return new Rn(An.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rn(An.UNAUTHENTICATED,t)}function yH(){return new Rn(An.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _H(t){return new Rn(An.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function wH(){return new Rn(An.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bH(){return new Rn(An.CANCELED,"User canceled the upload/download.")}function jH(t){return new Rn(An.INVALID_URL,"Invalid URL '"+t+"'.")}function NH(t){return new Rn(An.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function SH(){return new Rn(An.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+b4+"' property when initializing the app?")}function EH(){return new Rn(An.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function CH(){return new Rn(An.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function kH(t){return new Rn(An.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function eb(t){return new Rn(An.INVALID_ARGUMENT,t)}function j4(){return new Rn(An.APP_DELETED,"The Firebase app was deleted.")}function TH(t){return new Rn(An.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zf(t,e){return new Rn(An.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function nf(t){throw new Rn(An.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ts.makeFromUrl(e,n)}catch{return new Ts(e,"")}if(r.path==="")return r;throw NH(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(I){I.path_=decodeURIComponent(I.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${f}/b/${i}/o${g}`,"i"),N={bucket:1,path:3},b=n===w4?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",w=new RegExp(`^https?://${b}/${i}/${S}`,"i"),E=[{regex:c,indices:u,postModify:a},{regex:_,indices:N,postModify:d},{regex:w,indices:{bucket:1,path:2},postModify:d}];for(let I=0;I<E.length;I++){const O=E[I],q=O.regex.exec(e);if(q){const R=q[O.indices.bucket];let V=q[O.indices.path];V||(V=""),r=new Ts(R,V),O.postModify(r);break}}if(r==null)throw jH(e);return r}}class PH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH(t,e,n){let r=1,i=null,a=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...S){d||(d=!0,e.apply(null,S))}function p(S){i=setTimeout(()=>{i=null,t(_,u())},S)}function g(){a&&clearTimeout(a)}function _(S,...w){if(d){g();return}if(S){g(),f.call(null,S,...w);return}if(u()||o){g(),f.call(null,S,...w);return}r<64&&(r*=2);let E;c===1?(c=2,E=0):E=(r+Math.random())*1e3,p(E)}let N=!1;function b(S){N||(N=!0,g(),!d&&(i!==null?(S||(c=2),clearTimeout(i),p(0)):S||(c=1)))}return p(0),a=setTimeout(()=>{o=!0,b(!0)},n),b}function AH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RH(t){return t!==void 0}function MH(t){return typeof t=="object"&&!Array.isArray(t)}function Wj(t){return typeof t=="string"||t instanceof String}function SC(t){return Hj()&&t instanceof Blob}function Hj(){return typeof Blob<"u"}function EC(t,e,n,r){if(r<e)throw eb(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw eb(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function N4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var mc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(mc||(mc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OH(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{constructor(e,n,r,i,a,o,c,u,d,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,N)=>{this.resolve_=_,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new xg(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const c=a.getErrorCode()===mc.NO_ERROR,u=a.getStatus();if(!c||OH(u,this.additionalRetryCodes_)&&this.retry){const f=a.getErrorCode()===mc.ABORT;r(!1,new xg(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new xg(d,a))})},n=(r,i)=>{const a=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());RH(u)?a(u):a()}catch(u){o(u)}else if(c!==null){const u=qj();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?j4():bH();o(u)}else{const u=wH();o(u)}};this.canceled_?n(!1,new xg(!1,null,!0)):this.backoffId_=IH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xg{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function LH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function FH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function zH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function UH(t,e,n,r,i,a,o=!0){const c=N4(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return VH(d,e),LH(d,n),FH(d,a),zH(d,r),new DH(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $H(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BH(...t){const e=$H();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Hj())return new Blob(t);throw new Rn(An.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qH(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WH(t){if(typeof atob>"u")throw kH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class t_{constructor(e,n){this.data=e,this.contentType=n||null}}function HH(t,e){switch(t){case Xi.RAW:return new t_(S4(e));case Xi.BASE64:case Xi.BASE64URL:return new t_(E4(t,e));case Xi.DATA_URL:return new t_(KH(e),ZH(e))}throw qj()}function S4(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function GH(t){let e;try{e=decodeURIComponent(t)}catch{throw zf(Xi.DATA_URL,"Malformed data URL.")}return S4(e)}function E4(t,e){switch(t){case Xi.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw zf(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Xi.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw zf(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=WH(e)}catch(i){throw i.message.includes("polyfill")?i:zf(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class C4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw zf(Xi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=YH(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function KH(t){const e=new C4(t);return e.base64?E4(Xi.BASE64,e.rest):GH(e.rest)}function ZH(t){return new C4(t).contentType}function YH(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n){let r=0,i="";SC(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(SC(this.data_)){const r=this.data_,i=qH(r,e,n);return i===null?null:new Bo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Bo(r,!0)}}static getBlob(...e){if(Hj()){const n=e.map(r=>r instanceof Bo?r.data_:r);return new Bo(BH.apply(null,n))}else{const n=e.map(o=>Wj(o)?HH(Xi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)i[a++]=o[c]}),new Bo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){let e;try{e=JSON.parse(t)}catch{return null}return MH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function XH(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function T4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(t,e){return e}class Br{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||JH}}let yg=null;function eG(t){return!Wj(t)||t.length<2?t:T4(t)}function P4(){if(yg)return yg;const t=[];t.push(new Br("bucket")),t.push(new Br("generation")),t.push(new Br("metageneration")),t.push(new Br("name","fullPath",!0));function e(a,o){return eG(o)}const n=new Br("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const i=new Br("size");return i.xform=r,t.push(i),t.push(new Br("timeCreated")),t.push(new Br("updated")),t.push(new Br("md5Hash",null,!0)),t.push(new Br("cacheControl",null,!0)),t.push(new Br("contentDisposition",null,!0)),t.push(new Br("contentEncoding",null,!0)),t.push(new Br("contentLanguage",null,!0)),t.push(new Br("contentType",null,!0)),t.push(new Br("metadata","customMetadata",!0)),yg=t,yg}function tG(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new Ts(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function nG(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return tG(r,t),r}function I4(t,e,n){const r=k4(e);return r===null?null:nG(t,r,n)}function rG(t,e,n,r){const i=k4(e);if(i===null||!Wj(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const f=t.bucket,p=t.fullPath,g="/b/"+o(f)+"/o/"+o(p),_=Gj(g,n,r),N=N4({alt:"media",token:d});return _+N})[0]}function sG(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class A4{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(t){if(!t)throw qj()}function iG(t,e){function n(r,i){const a=I4(t,i,e);return R4(a!==null),a}return n}function aG(t,e){function n(r,i){const a=I4(t,i,e);return R4(a!==null),rG(a,i,t.host,t._protocol)}return n}function M4(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=yH():i=xH():n.getStatus()===402?i=vH(t.bucket):n.getStatus()===403?i=_H(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function oG(t){const e=M4(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=gH(t.path)),a.serverResponse=i.serverResponse,a}return n}function lG(t,e,n){const r=e.fullServerUrl(),i=Gj(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new A4(i,a,aG(t,n),o);return c.errorHandler=oG(e),c}function cG(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function uG(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=cG(null,e)),r}function dG(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let E="";for(let I=0;I<2;I++)E=E+Math.random().toString().slice(2);return E}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=uG(e,r,i),f=sG(d,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",_=Bo.getBlob(p,r,g);if(_===null)throw EH();const N={name:d.fullPath},b=Gj(a,t.host,t._protocol),S="POST",w=t.maxUploadRetryTime,y=new A4(b,S,iG(t,n),w);return y.urlParams=N,y.headers=o,y.body=_.uploadData(),y.errorHandler=M4(e),y}class hG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw nf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class fG extends hG{initXhr(){this.xhr_.responseType="text"}}function O4(){return new fG}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this._service=e,n instanceof Ts?this._location=n:this._location=Ts.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Mc(e,n)}get root(){const e=new Ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return T4(this._location.path)}get storage(){return this._service}get parent(){const e=QH(this._location.path);if(e===null)return null;const n=new Ts(this._location.bucket,e);return new Mc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TH(e)}}function mG(t,e,n){t._throwIfRoot("uploadBytes");const r=dG(t.storage,t._location,P4(),new Bo(e,!0),n);return t.storage.makeRequestWithTokens(r,O4).then(i=>({metadata:i,ref:t}))}function pG(t){t._throwIfRoot("getDownloadURL");const e=lG(t.storage,t._location,P4());return t.storage.makeRequestWithTokens(e,O4).then(n=>{if(n===null)throw CH();return n})}function gG(t,e){const n=XH(t._location.path,e),r=new Ts(t._location.bucket,n);return new Mc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vG(t){return/^[A-Za-z]+:\/\//.test(t)}function xG(t,e){return new Mc(t,e)}function D4(t,e){if(t instanceof Kj){const n=t;if(n._bucket==null)throw SH();const r=new Mc(n,n._bucket);return e!=null?D4(r,e):r}else return e!==void 0?gG(t,e):t}function yG(t,e){if(e&&vG(e)){if(t instanceof Kj)return xG(t,e);throw eb("To use ref(service, url), the first argument must be a Storage instance.")}else return D4(t,e)}function CC(t,e){const n=e==null?void 0:e[b4];return n==null?null:Ts.makeFromBucketSpec(n,t)}function _G(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:cA(i,t.app.options.projectId))}class Kj{constructor(e,n,r,i,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=w4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mH,this._maxUploadRetryTime=pH,this._requests=new Set,i!=null?this._bucket=Ts.makeFromBucketSpec(i,this._host):this._bucket=CC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ts.makeFromBucketSpec(this._url,e):this._bucket=CC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){EC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){EC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mc(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new PH(j4());{const o=UH(e,this._appId,r,i,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const kC="@firebase/storage",TC="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="storage";function Zj(t,e,n){return t=Ut(t),mG(t,e,n)}function Yj(t){return t=Ut(t),pG(t)}function Qj(t,e){return t=Ut(t),yG(t,e)}function wG(t=H1(),e){t=Ut(t);const r=Qx(t,L4).getImmediate({identifier:e}),i=aA("storage");return i&&bG(r,...i),r}function bG(t,e,n,r={}){_G(t,e,n,r)}function jG(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Kj(n,r,i,e,Hc)}function NG(){Cc(new fl(L4,jG,"PUBLIC").setMultipleInstances(!0)),ia(kC,TC,""),ia(kC,TC,"esm2017")}NG();const SG={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},Xj=hA(SG),Gi=fB(Xj),$e=a4(Xj),Jj=wG(Xj),F4=x.createContext(null),n_=t=>{const e={};return Object.keys(t).forEach(n=>{t[n]!==void 0&&(e[n]=t[n])}),e},mn=()=>{const t=x.useContext(F4);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},EG=({children:t})=>{const[e,n]=x.useState(null),[r,i]=x.useState(null),[a,o]=x.useState(!0),c=async b=>{try{const S=localStorage.getItem("pendingUserData");if(S){const w=JSON.parse(S);console.log("🚨 Données récupérées depuis localStorage:",w);const y=yt($e,"users",b.uid),E=await Is(y);if(E.exists()){const I=E.data();console.log("📊 Données actuelles dans Firestore:",I);const O={...I,...w,id:b.uid,email:b.email,createdAt:I.createdAt||new Date,lastSeen:new Date},q=n_(O);return await yn(y,q),console.log("✅ Données récupérées et mises à jour !"),i(O),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),xe.success("Données de profil récupérées !"),!0}}return!1}catch(S){return console.error("❌ Erreur récupération:",S),!1}},u=async(b,S)=>{const w=yt($e,"users",b.uid),y=await Is(w);if(y.exists()){const E=y.data();if(console.log("📊 Données existantes trouvées:",E),!await c(b)){const O={id:b.uid,email:b.email,lastSeen:new Date};E.displayName||(O.displayName=b.displayName||"Utilisateur"),E.university||(O.university="Université non spécifiée"),E.fieldOfStudy||(O.fieldOfStudy="Non spécifié");const q=n_(O);await yn(w,q);const R={...E,...q};i(R),console.log("✅ Profil mis à jour sans écraser les données existantes")}}else{const E={id:b.uid,email:b.email,displayName:b.displayName||(S==null?void 0:S.displayName)||"Utilisateur",photoURL:b.photoURL||(S==null?void 0:S.photoURL)||void 0,phone:(S==null?void 0:S.phone)||void 0,isVerified:!1,verificationStatus:"pending",university:(S==null?void 0:S.university)||"Université non spécifiée",otherUniversity:(S==null?void 0:S.otherUniversity)||void 0,studentId:(S==null?void 0:S.studentId)||void 0,graduationYear:(S==null?void 0:S.graduationYear)||new Date().getFullYear()+2,fieldOfStudy:(S==null?void 0:S.fieldOfStudy)||"Non spécifié",otherFieldOfStudy:(S==null?void 0:S.otherFieldOfStudy)||void 0,campus:(S==null?void 0:S.campus)||"Campus principal",bio:(S==null?void 0:S.bio)||void 0,rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date},I=n_(E);await lc(w,I),i(E)}},d=async(b,S)=>{try{await K7(Gi,b,S),xe.success("Connexion réussie !")}catch(w){const y=w instanceof Error?w.message:"Erreur inconnue";throw xe.error("Erreur de connexion : "+y),w}},f=async(b,S,w,y)=>{try{const{user:E}=await FA(Gi,b,S);await hm(E,{displayName:w}),await u(E,y),xe.success("Compte créé avec succès !")}catch(E){const I=E instanceof Error?E.message:"Erreur inconnue";throw xe.error("Erreur lors de la création du compte : "+I),E}},p=async()=>{try{const b=new za;b.setCustomParameters({prompt:"select_account"}),b.addScope("email"),b.addScope("profile"),await C$(Gi,b)}catch(b){console.error("Google sign in error:",b);const S=b instanceof Error?b.message:"Erreur inconnue";throw xe.error("Erreur de connexion Google : "+S),b}},g=async()=>{try{await t$(Gi),i(null),xe.success("Déconnexion réussie !")}catch(b){throw xe.error("Erreur lors de la déconnexion"),b}},_=async b=>{if(!(!e||!r))try{const S=yt($e,"users",e.uid),w=Object.fromEntries(Object.entries(b).filter(([,y])=>y!==void 0));if(w.updatedAt=new Date,Object.keys(w).length===0){console.warn("Aucune donnée valide à mettre à jour");return}await yn(S,w),i({...r,...w}),console.log("Profil mis à jour avec:",w),xe.success("Profil mis à jour !")}catch(S){throw console.error("Erreur mise à jour profil:",S),xe.error("Erreur lors de la mise à jour du profil"),S}};x.useEffect(()=>{const b=e$(Gi,async w=>{n(w),w?await u(w):i(null),o(!1)});return(async()=>{try{const w=await T$(Gi);w!=null&&w.user&&(await u(w.user),xe.success("Connexion Google réussie !"))}catch(w){if(console.error("Redirect result error:",w),w&&typeof w=="object"&&"code"in w&&w.code!=="auth/null-user"){const y=w instanceof Error?w.message:"Erreur inconnue";xe.error("Erreur de connexion Google : "+y)}}})(),b},[]);const N={currentUser:e,userProfile:r,loading:a,signIn:d,signUp:f,signInWithGoogle:p,logout:g,updateUserProfile:_};return s.jsx(F4.Provider,{value:N,children:!a&&t})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V4=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TG=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>x.createElement("svg",{ref:u,...kG,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:V4("lucide",i),...c},[...o.map(([d,f])=>x.createElement(d,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(t,e)=>{const n=x.forwardRef(({className:r,...i},a)=>x.createElement(TG,{ref:a,iconNode:e,className:V4(`lucide-${CG(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PG=ye("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=ye("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=ye("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=ye("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=ye("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=ye("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IG=ye("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=ye("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AG=ye("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RG=ye("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=ye("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=ye("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=ye("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=ye("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=ye("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=ye("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=ye("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MG=ye("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OG=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DG=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=ye("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=ye("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=ye("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=ye("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LG=ye("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ye("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ye("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FG=ye("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=ye("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VG=ye("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zG=ye("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UG=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=ye("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $G=ye("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=ye("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=ye("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=ye("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=ye("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ye("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=ye("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=ye("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BG=ye("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qG=ye("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=ye("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=ye("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=ye("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WG=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HG=ye("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ye("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GG=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ye("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=ye("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KG=ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=ye("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZG=ye("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YG=ye("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=ye("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QG=ye("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XG=ye("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=ye("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JG=ye("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=ye("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=ye("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=ye("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=ye("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=ye("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=ye("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=ye("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=ye("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=ye("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=ye("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=ye("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=ye("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=ye("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=ye("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=ye("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=ye("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=ye("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=ye("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=ye("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function MC(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ny(...t){return e=>{let n=!1;const r=t.map(i=>{const a=MC(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():MC(t[i],null)}}}}function ht(...t){return x.useCallback(Ny(...t),t)}function wl(t){const e=lK(t),n=x.forwardRef((r,i)=>{const{children:a,...o}=r,c=x.Children.toArray(a),u=c.find(uK);if(u){const d=u.props.children,f=c.map(p=>p===u?x.Children.count(d)>1?x.Children.only(null):x.isValidElement(d)?d.props.children:null:p);return s.jsx(e,{...o,ref:i,children:x.isValidElement(d)?x.cloneElement(d,void 0,f):null})}return s.jsx(e,{...o,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}var oK=wl("Slot");function lK(t){const e=x.forwardRef((n,r)=>{const{children:i,...a}=n;if(x.isValidElement(i)){const o=hK(i),c=dK(a,i.props);return i.type!==x.Fragment&&(c.ref=r?Ny(r,o):o),x.cloneElement(i,c)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var cK=Symbol("radix.slottable");function uK(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===cK}function dK(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...c)=>{const u=a(...c);return i(...c),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function hK(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function sM(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=sM(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function iM(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=sM(t))&&(r&&(r+=" "),r+=e);return r}const OC=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,DC=iM,Sy=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return DC(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(d=>{const f=n==null?void 0:n[d],p=a==null?void 0:a[d];if(f===null)return null;const g=OC(f)||OC(p);return i[d][g]}),c=n&&Object.entries(n).reduce((d,f)=>{let[p,g]=f;return g===void 0||(d[p]=g),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,f)=>{let{class:p,className:g,..._}=f;return Object.entries(_).every(N=>{let[b,S]=N;return Array.isArray(S)?S.includes({...a,...c}[b]):{...a,...c}[b]===S})?[...d,p,g]:d},[]);return DC(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},nN="-",fK=t=>{const e=pK(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const c=o.split(nN);return c[0]===""&&c.length!==1&&c.shift(),aM(c,e)||mK(o)},getConflictingClassGroupIds:(o,c)=>{const u=n[o]||[];return c&&r[o]?[...u,...r[o]]:u}}},aM=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?aM(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(nN);return(o=e.validators.find(({validator:c})=>c(a)))==null?void 0:o.classGroupId},LC=/^\[(.+)\]$/,mK=t=>{if(LC.test(t)){const e=LC.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},pK=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return vK(Object.entries(t.classGroups),n).forEach(([a,o])=>{sb(o,r,a,e)}),r},sb=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:FC(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(gK(i)){sb(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{sb(o,FC(e,a),n,r)})})},FC=(t,e)=>{let n=t;return e.split(nN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},gK=t=>t.isThemeGetter,vK=(t,e)=>e?t.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,c])=>[e+o,c])):a);return[n,i]}):t,xK=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},oM="!",yK=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],a=e.length,o=c=>{const u=[];let d=0,f=0,p;for(let S=0;S<c.length;S++){let w=c[S];if(d===0){if(w===i&&(r||c.slice(S,S+a)===e)){u.push(c.slice(f,S)),f=S+a;continue}if(w==="/"){p=S;continue}}w==="["?d++:w==="]"&&d--}const g=u.length===0?c:c.substring(f),_=g.startsWith(oM),N=_?g.substring(1):g,b=p&&p>f?p-f:void 0;return{modifiers:u,hasImportantModifier:_,baseClassName:N,maybePostfixModifierPosition:b}};return n?c=>n({className:c,parseClassName:o}):o},_K=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},wK=t=>({cache:xK(t.cacheSize),parseClassName:yK(t),...fK(t)}),bK=/\s+/,jK=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(bK);let c="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:f,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:_}=n(d);let N=!!_,b=r(N?g.substring(0,_):g);if(!b){if(!N){c=d+(c.length>0?" "+c:c);continue}if(b=r(g),!b){c=d+(c.length>0?" "+c:c);continue}N=!1}const S=_K(f).join(":"),w=p?S+oM:S,y=w+b;if(a.includes(y))continue;a.push(y);const E=i(b,N);for(let I=0;I<E.length;++I){const O=E[I];a.push(w+O)}c=d+(c.length>0?" "+c:c)}return c};function NK(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=lM(e))&&(r&&(r+=" "),r+=n);return r}const lM=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=lM(t[r]))&&(n&&(n+=" "),n+=e);return n};function SK(t,...e){let n,r,i,a=o;function o(u){const d=e.reduce((f,p)=>p(f),t());return n=wK(d),r=n.cache.get,i=n.cache.set,a=c,c(u)}function c(u){const d=r(u);if(d)return d;const f=jK(u,n);return i(u,f),f}return function(){return a(NK.apply(null,arguments))}}const un=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},cM=/^\[(?:([a-z-]+):)?(.+)\]$/i,EK=/^\d+\/\d+$/,CK=new Set(["px","full","screen"]),kK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,TK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,IK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,AK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Oa=t=>ud(t)||CK.has(t)||EK.test(t),To=t=>oh(t,"length",zK),ud=t=>!!t&&!Number.isNaN(Number(t)),a_=t=>oh(t,"number",ud),rf=t=>!!t&&Number.isInteger(Number(t)),RK=t=>t.endsWith("%")&&ud(t.slice(0,-1)),jt=t=>cM.test(t),Po=t=>kK.test(t),MK=new Set(["length","size","percentage"]),OK=t=>oh(t,MK,uM),DK=t=>oh(t,"position",uM),LK=new Set(["image","url"]),FK=t=>oh(t,LK,$K),VK=t=>oh(t,"",UK),sf=()=>!0,oh=(t,e,n)=>{const r=cM.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},zK=t=>TK.test(t)&&!PK.test(t),uM=()=>!1,UK=t=>IK.test(t),$K=t=>AK.test(t),BK=()=>{const t=un("colors"),e=un("spacing"),n=un("blur"),r=un("brightness"),i=un("borderColor"),a=un("borderRadius"),o=un("borderSpacing"),c=un("borderWidth"),u=un("contrast"),d=un("grayscale"),f=un("hueRotate"),p=un("invert"),g=un("gap"),_=un("gradientColorStops"),N=un("gradientColorStopPositions"),b=un("inset"),S=un("margin"),w=un("opacity"),y=un("padding"),E=un("saturate"),I=un("scale"),O=un("sepia"),q=un("skew"),R=un("space"),V=un("translate"),U=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",jt,e],D=()=>[jt,e],P=()=>["",Oa,To],H=()=>["auto",ud,jt],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",jt],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[ud,jt];return{cacheSize:500,separator:":",theme:{colors:[sf],spacing:[Oa,To],blur:["none","",Po,jt],brightness:X(),borderColor:[t],borderRadius:["none","","full",Po,jt],borderSpacing:D(),borderWidth:P(),contrast:X(),grayscale:z(),hueRotate:X(),invert:z(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[RK,To],inset:F(),margin:F(),opacity:X(),padding:D(),saturate:X(),scale:X(),sepia:z(),skew:X(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",jt]}],container:["container"],columns:[{columns:[Po]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),jt]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",rf,jt]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",jt]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",rf,jt]}],"grid-cols":[{"grid-cols":[sf]}],"col-start-end":[{col:["auto",{span:["full",rf,jt]},jt]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[sf]}],"row-start-end":[{row:["auto",{span:[rf,jt]},jt]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",jt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",jt]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",jt,e]}],"min-w":[{"min-w":[jt,e,"min","max","fit"]}],"max-w":[{"max-w":[jt,e,"none","full","min","max","fit","prose",{screen:[Po]},Po]}],h:[{h:[jt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[jt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[jt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[jt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Po,To]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",a_]}],"font-family":[{font:[sf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",jt]}],"line-clamp":[{"line-clamp":["none",ud,a_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Oa,jt]}],"list-image":[{"list-image":["none",jt]}],"list-style-type":[{list:["none","disc","decimal",jt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Oa,To]}],"underline-offset":[{"underline-offset":["auto",Oa,jt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",jt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",jt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),DK]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",OK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},FK]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:Z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[Oa,jt]}],"outline-w":[{outline:[Oa,To]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Oa,To]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Po,VK]}],"shadow-color":[{shadow:[sf]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Po,jt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[E]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",jt]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",jt]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",jt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[rf,jt]}],"translate-x":[{"translate-x":[V]}],"translate-y":[{"translate-y":[V]}],"skew-x":[{"skew-x":[q]}],"skew-y":[{"skew-y":[q]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",jt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",jt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",jt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Oa,To,a_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qK=SK(BK);function st(...t){return qK(iM(t))}const ib=Sy("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),J=x.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const o=r?oK:"button";return s.jsx(o,{className:st(ib({variant:e,size:n,className:t})),ref:a,...i})});J.displayName="Button";const Ge=x.forwardRef(({className:t,type:e,...n},r)=>s.jsx("input",{type:e,className:st("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Ge.displayName="Input";function Le(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function WK(t,e){const n=x.createContext(e),r=a=>{const{children:o,...c}=a,u=x.useMemo(()=>c,Object.values(c));return s.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function i(a){const o=x.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,i]}function Sr(t,e=[]){let n=[];function r(a,o){const c=x.createContext(o),u=n.length;n=[...n,o];const d=p=>{var w;const{scope:g,children:_,...N}=p,b=((w=g==null?void 0:g[t])==null?void 0:w[u])||c,S=x.useMemo(()=>N,Object.values(N));return s.jsx(b.Provider,{value:S,children:_})};d.displayName=a+"Provider";function f(p,g){var b;const _=((b=g==null?void 0:g[t])==null?void 0:b[u])||c,N=x.useContext(_);if(N)return N;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[d,f]}const i=()=>{const a=n.map(o=>x.createContext(o));return function(c){const u=(c==null?void 0:c[t])||a;return x.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,HK(i,...e)]}function HK(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:u,scopeName:d})=>{const p=u(a)[`__scope${d}`];return{...c,...p}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Bn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},GK=qb[" useInsertionEffect ".trim().toString()]||Bn;function Os({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,a,o]=KK({defaultProp:e,onChange:n}),c=t!==void 0,u=c?t:i;{const f=x.useRef(t!==void 0);x.useEffect(()=>{const p=f.current;p!==c&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,r])}const d=x.useCallback(f=>{var p;if(c){const g=ZK(f)?f(t):f;g!==t&&((p=o.current)==null||p.call(o,g))}else a(f)},[c,t,a,o]);return[u,d]}function KK({defaultProp:t,onChange:e}){const[n,r]=x.useState(t),i=x.useRef(n),a=x.useRef(e);return GK(()=>{a.current=e},[e]),x.useEffect(()=>{var o;i.current!==n&&((o=a.current)==null||o.call(a,n),i.current=n)},[n,i]),[n,r,a]}function ZK(t){return typeof t=="function"}var YK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ze=YK.reduce((t,e)=>{const n=wl(`Primitive.${e}`),r=x.forwardRef((i,a)=>{const{asChild:o,...c}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(u,{...c,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function dM(t,e){t&&Xd.flushSync(()=>t.dispatchEvent(e))}function rp(t){const e=t+"CollectionProvider",[n,r]=Sr(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:S,children:w}=b,y=Fe.useRef(null),E=Fe.useRef(new Map).current;return s.jsx(i,{scope:S,itemMap:E,collectionRef:y,children:w})};o.displayName=e;const c=t+"CollectionSlot",u=wl(c),d=Fe.forwardRef((b,S)=>{const{scope:w,children:y}=b,E=a(c,w),I=ht(S,E.collectionRef);return s.jsx(u,{ref:I,children:y})});d.displayName=c;const f=t+"CollectionItemSlot",p="data-radix-collection-item",g=wl(f),_=Fe.forwardRef((b,S)=>{const{scope:w,children:y,...E}=b,I=Fe.useRef(null),O=ht(S,I),q=a(f,w);return Fe.useEffect(()=>(q.itemMap.set(I,{ref:I,...E}),()=>void q.itemMap.delete(I))),s.jsx(g,{[p]:"",ref:O,children:y})});_.displayName=f;function N(b){const S=a(t+"CollectionConsumer",b);return Fe.useCallback(()=>{const y=S.collectionRef.current;if(!y)return[];const E=Array.from(y.querySelectorAll(`[${p}]`));return Array.from(S.itemMap.values()).sort((q,R)=>E.indexOf(q.ref.current)-E.indexOf(R.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:d,ItemSlot:_},N,r]}var QK=x.createContext(void 0);function Qc(t){const e=x.useContext(QK);return t||e||"ltr"}function mr(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function XK(t,e=globalThis==null?void 0:globalThis.document){const n=mr(t);x.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var JK="DismissableLayer",ab="dismissableLayer.update",eZ="dismissableLayer.pointerDownOutside",tZ="dismissableLayer.focusOutside",VC,hM=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sp=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:c,...u}=t,d=x.useContext(hM),[f,p]=x.useState(null),g=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,_]=x.useState({}),N=ht(e,R=>p(R)),b=Array.from(d.layers),[S]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=b.indexOf(S),y=f?b.indexOf(f):-1,E=d.layersWithOutsidePointerEventsDisabled.size>0,I=y>=w,O=sZ(R=>{const V=R.target,U=[...d.branches].some(k=>k.contains(V));!I||U||(i==null||i(R),o==null||o(R),R.defaultPrevented||c==null||c())},g),q=iZ(R=>{const V=R.target;[...d.branches].some(k=>k.contains(V))||(a==null||a(R),o==null||o(R),R.defaultPrevented||c==null||c())},g);return XK(R=>{y===d.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&c&&(R.preventDefault(),c()))},g),x.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(VC=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),zC(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=VC)}},[f,g,n,d]),x.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),zC())},[f,d]),x.useEffect(()=>{const R=()=>_({});return document.addEventListener(ab,R),()=>document.removeEventListener(ab,R)},[]),s.jsx(Ze.div,{...u,ref:N,style:{pointerEvents:E?I?"auto":"none":void 0,...t.style},onFocusCapture:Le(t.onFocusCapture,q.onFocusCapture),onBlurCapture:Le(t.onBlurCapture,q.onBlurCapture),onPointerDownCapture:Le(t.onPointerDownCapture,O.onPointerDownCapture)})});sp.displayName=JK;var nZ="DismissableLayerBranch",rZ=x.forwardRef((t,e)=>{const n=x.useContext(hM),r=x.useRef(null),i=ht(e,r);return x.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(Ze.div,{...t,ref:i})});rZ.displayName=nZ;function sZ(t,e=globalThis==null?void 0:globalThis.document){const n=mr(t),r=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let u=function(){fM(eZ,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function iZ(t,e=globalThis==null?void 0:globalThis.document){const n=mr(t),r=x.useRef(!1);return x.useEffect(()=>{const i=a=>{a.target&&!r.current&&fM(tZ,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function zC(){const t=new CustomEvent(ab);document.dispatchEvent(t)}function fM(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?dM(i,a):i.dispatchEvent(a)}var o_=0;function Ey(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??UC()),document.body.insertAdjacentElement("beforeend",t[1]??UC()),o_++,()=>{o_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),o_--}},[])}function UC(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var l_="focusScope.autoFocusOnMount",c_="focusScope.autoFocusOnUnmount",$C={bubbles:!1,cancelable:!0},aZ="FocusScope",ip=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[c,u]=x.useState(null),d=mr(i),f=mr(a),p=x.useRef(null),g=ht(e,b=>u(b)),_=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let b=function(E){if(_.paused||!c)return;const I=E.target;c.contains(I)?p.current=I:Ao(p.current,{select:!0})},S=function(E){if(_.paused||!c)return;const I=E.relatedTarget;I!==null&&(c.contains(I)||Ao(p.current,{select:!0}))},w=function(E){if(document.activeElement===document.body)for(const O of E)O.removedNodes.length>0&&Ao(c)};document.addEventListener("focusin",b),document.addEventListener("focusout",S);const y=new MutationObserver(w);return c&&y.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",S),y.disconnect()}}},[r,c,_.paused]),x.useEffect(()=>{if(c){qC.add(_);const b=document.activeElement;if(!c.contains(b)){const w=new CustomEvent(l_,$C);c.addEventListener(l_,d),c.dispatchEvent(w),w.defaultPrevented||(oZ(hZ(mM(c)),{select:!0}),document.activeElement===b&&Ao(c))}return()=>{c.removeEventListener(l_,d),setTimeout(()=>{const w=new CustomEvent(c_,$C);c.addEventListener(c_,f),c.dispatchEvent(w),w.defaultPrevented||Ao(b??document.body,{select:!0}),c.removeEventListener(c_,f),qC.remove(_)},0)}}},[c,d,f,_]);const N=x.useCallback(b=>{if(!n&&!r||_.paused)return;const S=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,w=document.activeElement;if(S&&w){const y=b.currentTarget,[E,I]=lZ(y);E&&I?!b.shiftKey&&w===I?(b.preventDefault(),n&&Ao(E,{select:!0})):b.shiftKey&&w===E&&(b.preventDefault(),n&&Ao(I,{select:!0})):w===y&&b.preventDefault()}},[n,r,_.paused]);return s.jsx(Ze.div,{tabIndex:-1,...o,ref:g,onKeyDown:N})});ip.displayName=aZ;function oZ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ao(r,{select:e}),document.activeElement!==n)return}function lZ(t){const e=mM(t),n=BC(e,t),r=BC(e.reverse(),t);return[n,r]}function mM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function BC(t,e){for(const n of t)if(!cZ(n,{upTo:e}))return n}function cZ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function uZ(t){return t instanceof HTMLInputElement&&"select"in t}function Ao(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&uZ(t)&&e&&t.select()}}var qC=dZ();function dZ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=WC(t,e),t.unshift(e)},remove(e){var n;t=WC(t,e),(n=t[0])==null||n.resume()}}}function WC(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function hZ(t){return t.filter(e=>e.tagName!=="A")}var fZ=qb[" useId ".trim().toString()]||(()=>{}),mZ=0;function As(t){const[e,n]=x.useState(fZ());return Bn(()=>{n(r=>r??String(mZ++))},[t]),e?`radix-${e}`:""}const pZ=["top","right","bottom","left"],bl=Math.min,Es=Math.max,rx=Math.round,_g=Math.floor,ua=t=>({x:t,y:t}),gZ={left:"right",right:"left",bottom:"top",top:"bottom"},vZ={start:"end",end:"start"};function ob(t,e,n){return Es(t,bl(e,n))}function io(t,e){return typeof t=="function"?t(e):t}function ao(t){return t.split("-")[0]}function lh(t){return t.split("-")[1]}function rN(t){return t==="x"?"y":"x"}function sN(t){return t==="y"?"height":"width"}function ea(t){return["top","bottom"].includes(ao(t))?"y":"x"}function iN(t){return rN(ea(t))}function xZ(t,e,n){n===void 0&&(n=!1);const r=lh(t),i=iN(t),a=sN(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=sx(o)),[o,sx(o)]}function yZ(t){const e=sx(t);return[lb(t),e,lb(e)]}function lb(t){return t.replace(/start|end/g,e=>vZ[e])}function _Z(t,e,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?a:o;default:return[]}}function wZ(t,e,n,r){const i=lh(t);let a=_Z(ao(t),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(lb)))),a}function sx(t){return t.replace(/left|right|bottom|top/g,e=>gZ[e])}function bZ(t){return{top:0,right:0,bottom:0,left:0,...t}}function pM(t){return typeof t!="number"?bZ(t):{top:t,right:t,bottom:t,left:t}}function ix(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function HC(t,e,n){let{reference:r,floating:i}=t;const a=ea(e),o=iN(e),c=sN(o),u=ao(e),d=a==="y",f=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,g=r[c]/2-i[c]/2;let _;switch(u){case"top":_={x:f,y:r.y-i.height};break;case"bottom":_={x:f,y:r.y+r.height};break;case"right":_={x:r.x+r.width,y:p};break;case"left":_={x:r.x-i.width,y:p};break;default:_={x:r.x,y:r.y}}switch(lh(e)){case"start":_[o]-=g*(n&&d?-1:1);break;case"end":_[o]+=g*(n&&d?-1:1);break}return _}const jZ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,c=a.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:p}=HC(d,r,u),g=r,_={},N=0;for(let b=0;b<c.length;b++){const{name:S,fn:w}=c[b],{x:y,y:E,data:I,reset:O}=await w({x:f,y:p,initialPlacement:r,placement:g,strategy:i,middlewareData:_,rects:d,platform:o,elements:{reference:t,floating:e}});f=y??f,p=E??p,_={..._,[S]:{..._[S],...I}},O&&N<=50&&(N++,typeof O=="object"&&(O.placement&&(g=O.placement),O.rects&&(d=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):O.rects),{x:f,y:p}=HC(d,g,u)),b=-1)}return{x:f,y:p,placement:g,strategy:i,middlewareData:_}};async function jm(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:o,elements:c,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:g=!1,padding:_=0}=io(e,t),N=pM(_),S=c[g?p==="floating"?"reference":"floating":p],w=ix(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(S)))==null||n?S:S.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:d,rootBoundary:f,strategy:u})),y=p==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),I=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},O=ix(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:E,strategy:u}):y);return{top:(w.top-O.top+N.top)/I.y,bottom:(O.bottom-w.bottom+N.bottom)/I.y,left:(w.left-O.left+N.left)/I.x,right:(O.right-w.right+N.right)/I.x}}const NZ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:o,elements:c,middlewareData:u}=e,{element:d,padding:f=0}=io(t,e)||{};if(d==null)return{};const p=pM(f),g={x:n,y:r},_=iN(i),N=sN(_),b=await o.getDimensions(d),S=_==="y",w=S?"top":"left",y=S?"bottom":"right",E=S?"clientHeight":"clientWidth",I=a.reference[N]+a.reference[_]-g[_]-a.floating[N],O=g[_]-a.reference[_],q=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let R=q?q[E]:0;(!R||!await(o.isElement==null?void 0:o.isElement(q)))&&(R=c.floating[E]||a.floating[N]);const V=I/2-O/2,U=R/2-b[N]/2-1,k=bl(p[w],U),F=bl(p[y],U),D=k,P=R-b[N]-F,H=R/2-b[N]/2+V,te=ob(D,H,P),Z=!u.arrow&&lh(i)!=null&&H!==te&&a.reference[N]/2-(H<D?k:F)-b[N]/2<0,K=Z?H<D?H-D:H-P:0;return{[_]:g[_]+K,data:{[_]:te,centerOffset:H-te-K,...Z&&{alignmentOffset:K}},reset:Z}}}),SZ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:c,platform:u,elements:d}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:b=!0,...S}=io(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const w=ao(i),y=ea(c),E=ao(c)===c,I=await(u.isRTL==null?void 0:u.isRTL(d.floating)),O=g||(E||!b?[sx(c)]:yZ(c)),q=N!=="none";!g&&q&&O.push(...wZ(c,b,N,I));const R=[c,...O],V=await jm(e,S),U=[];let k=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&U.push(V[w]),p){const H=xZ(i,o,I);U.push(V[H[0]],V[H[1]])}if(k=[...k,{placement:i,overflows:U}],!U.every(H=>H<=0)){var F,D;const H=(((F=a.flip)==null?void 0:F.index)||0)+1,te=R[H];if(te&&(!(p==="alignment"?y!==ea(te):!1)||k.every(A=>A.overflows[0]>0&&ea(A.placement)===y)))return{data:{index:H,overflows:k},reset:{placement:te}};let Z=(D=k.filter(K=>K.overflows[0]<=0).sort((K,A)=>K.overflows[1]-A.overflows[1])[0])==null?void 0:D.placement;if(!Z)switch(_){case"bestFit":{var P;const K=(P=k.filter(A=>{if(q){const z=ea(A.placement);return z===y||z==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(z=>z>0).reduce((z,B)=>z+B,0)]).sort((A,z)=>A[1]-z[1])[0])==null?void 0:P[0];K&&(Z=K);break}case"initialPlacement":Z=c;break}if(i!==Z)return{reset:{placement:Z}}}return{}}}};function GC(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function KC(t){return pZ.some(e=>t[e]>=0)}const EZ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=io(t,e);switch(r){case"referenceHidden":{const a=await jm(e,{...i,elementContext:"reference"}),o=GC(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:KC(o)}}}case"escaped":{const a=await jm(e,{...i,altBoundary:!0}),o=GC(a,n.floating);return{data:{escapedOffsets:o,escaped:KC(o)}}}default:return{}}}}};async function CZ(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ao(n),c=lh(n),u=ea(n)==="y",d=["left","top"].includes(o)?-1:1,f=a&&u?-1:1,p=io(e,t);let{mainAxis:g,crossAxis:_,alignmentAxis:N}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return c&&typeof N=="number"&&(_=c==="end"?N*-1:N),u?{x:_*f,y:g*d}:{x:g*d,y:_*f}}const kZ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:o,middlewareData:c}=e,u=await CZ(e,t);return o===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:a+u.y,data:{...u,placement:o}}}}},TZ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:c={fn:S=>{let{x:w,y}=S;return{x:w,y}}},...u}=io(t,e),d={x:n,y:r},f=await jm(e,u),p=ea(ao(i)),g=rN(p);let _=d[g],N=d[p];if(a){const S=g==="y"?"top":"left",w=g==="y"?"bottom":"right",y=_+f[S],E=_-f[w];_=ob(y,_,E)}if(o){const S=p==="y"?"top":"left",w=p==="y"?"bottom":"right",y=N+f[S],E=N-f[w];N=ob(y,N,E)}const b=c.fn({...e,[g]:_,[p]:N});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[g]:a,[p]:o}}}}}},PZ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=e,{offset:c=0,mainAxis:u=!0,crossAxis:d=!0}=io(t,e),f={x:n,y:r},p=ea(i),g=rN(p);let _=f[g],N=f[p];const b=io(c,e),S=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){const E=g==="y"?"height":"width",I=a.reference[g]-a.floating[E]+S.mainAxis,O=a.reference[g]+a.reference[E]-S.mainAxis;_<I?_=I:_>O&&(_=O)}if(d){var w,y;const E=g==="y"?"width":"height",I=["top","left"].includes(ao(i)),O=a.reference[p]-a.floating[E]+(I&&((w=o.offset)==null?void 0:w[p])||0)+(I?0:S.crossAxis),q=a.reference[p]+a.reference[E]+(I?0:((y=o.offset)==null?void 0:y[p])||0)-(I?S.crossAxis:0);N<O?N=O:N>q&&(N=q)}return{[g]:_,[p]:N}}}},IZ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:a,platform:o,elements:c}=e,{apply:u=()=>{},...d}=io(t,e),f=await jm(e,d),p=ao(i),g=lh(i),_=ea(i)==="y",{width:N,height:b}=a.floating;let S,w;p==="top"||p==="bottom"?(S=p,w=g===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(w=p,S=g==="end"?"top":"bottom");const y=b-f.top-f.bottom,E=N-f.left-f.right,I=bl(b-f[S],y),O=bl(N-f[w],E),q=!e.middlewareData.shift;let R=I,V=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(V=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=y),q&&!g){const k=Es(f.left,0),F=Es(f.right,0),D=Es(f.top,0),P=Es(f.bottom,0);_?V=N-2*(k!==0||F!==0?k+F:Es(f.left,f.right)):R=b-2*(D!==0||P!==0?D+P:Es(f.top,f.bottom))}await u({...e,availableWidth:V,availableHeight:R});const U=await o.getDimensions(c.floating);return N!==U.width||b!==U.height?{reset:{rects:!0}}:{}}}};function Cy(){return typeof window<"u"}function ch(t){return gM(t)?(t.nodeName||"").toLowerCase():"#document"}function Rs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _a(t){var e;return(e=(gM(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function gM(t){return Cy()?t instanceof Node||t instanceof Rs(t).Node:!1}function Ii(t){return Cy()?t instanceof Element||t instanceof Rs(t).Element:!1}function ga(t){return Cy()?t instanceof HTMLElement||t instanceof Rs(t).HTMLElement:!1}function ZC(t){return!Cy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Rs(t).ShadowRoot}function ap(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ai(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function AZ(t){return["table","td","th"].includes(ch(t))}function ky(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function aN(t){const e=oN(),n=Ii(t)?Ai(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function RZ(t){let e=jl(t);for(;ga(e)&&!Od(e);){if(aN(e))return e;if(ky(e))return null;e=jl(e)}return null}function oN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Od(t){return["html","body","#document"].includes(ch(t))}function Ai(t){return Rs(t).getComputedStyle(t)}function Ty(t){return Ii(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function jl(t){if(ch(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ZC(t)&&t.host||_a(t);return ZC(e)?e.host:e}function vM(t){const e=jl(t);return Od(e)?t.ownerDocument?t.ownerDocument.body:t.body:ga(e)&&ap(e)?e:vM(e)}function Nm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=vM(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),o=Rs(i);if(a){const c=cb(o);return e.concat(o,o.visualViewport||[],ap(i)?i:[],c&&n?Nm(c):[])}return e.concat(i,Nm(i,[],n))}function cb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function xM(t){const e=Ai(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ga(t),a=i?t.offsetWidth:n,o=i?t.offsetHeight:r,c=rx(n)!==a||rx(r)!==o;return c&&(n=a,r=o),{width:n,height:r,$:c}}function lN(t){return Ii(t)?t:t.contextElement}function dd(t){const e=lN(t);if(!ga(e))return ua(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=xM(e);let o=(a?rx(n.width):n.width)/r,c=(a?rx(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const MZ=ua(0);function yM(t){const e=Rs(t);return!oN()||!e.visualViewport?MZ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function OZ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Rs(t)?!1:e}function Dc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=lN(t);let o=ua(1);e&&(r?Ii(r)&&(o=dd(r)):o=dd(t));const c=OZ(a,n,r)?yM(a):ua(0);let u=(i.left+c.x)/o.x,d=(i.top+c.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(a){const g=Rs(a),_=r&&Ii(r)?Rs(r):r;let N=g,b=cb(N);for(;b&&r&&_!==N;){const S=dd(b),w=b.getBoundingClientRect(),y=Ai(b),E=w.left+(b.clientLeft+parseFloat(y.paddingLeft))*S.x,I=w.top+(b.clientTop+parseFloat(y.paddingTop))*S.y;u*=S.x,d*=S.y,f*=S.x,p*=S.y,u+=E,d+=I,N=Rs(b),b=cb(N)}}return ix({width:f,height:p,x:u,y:d})}function cN(t,e){const n=Ty(t).scrollLeft;return e?e.left+n:Dc(_a(t)).left+n}function _M(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:cN(t,r)),a=r.top+e.scrollTop;return{x:i,y:a}}function DZ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",o=_a(r),c=e?ky(e.floating):!1;if(r===o||c&&a)return n;let u={scrollLeft:0,scrollTop:0},d=ua(1);const f=ua(0),p=ga(r);if((p||!p&&!a)&&((ch(r)!=="body"||ap(o))&&(u=Ty(r)),ga(r))){const _=Dc(r);d=dd(r),f.x=_.x+r.clientLeft,f.y=_.y+r.clientTop}const g=o&&!p&&!a?_M(o,u,!0):ua(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+f.x+g.x,y:n.y*d.y-u.scrollTop*d.y+f.y+g.y}}function LZ(t){return Array.from(t.getClientRects())}function FZ(t){const e=_a(t),n=Ty(t),r=t.ownerDocument.body,i=Es(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Es(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+cN(t);const c=-n.scrollTop;return Ai(r).direction==="rtl"&&(o+=Es(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:c}}function VZ(t,e){const n=Rs(t),r=_a(t),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,c=0,u=0;if(i){a=i.width,o=i.height;const d=oN();(!d||d&&e==="fixed")&&(c=i.offsetLeft,u=i.offsetTop)}return{width:a,height:o,x:c,y:u}}function zZ(t,e){const n=Dc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=ga(t)?dd(t):ua(1),o=t.clientWidth*a.x,c=t.clientHeight*a.y,u=i*a.x,d=r*a.y;return{width:o,height:c,x:u,y:d}}function YC(t,e,n){let r;if(e==="viewport")r=VZ(t,n);else if(e==="document")r=FZ(_a(t));else if(Ii(e))r=zZ(e,n);else{const i=yM(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return ix(r)}function wM(t,e){const n=jl(t);return n===e||!Ii(n)||Od(n)?!1:Ai(n).position==="fixed"||wM(n,e)}function UZ(t,e){const n=e.get(t);if(n)return n;let r=Nm(t,[],!1).filter(c=>Ii(c)&&ch(c)!=="body"),i=null;const a=Ai(t).position==="fixed";let o=a?jl(t):t;for(;Ii(o)&&!Od(o);){const c=Ai(o),u=aN(o);!u&&c.position==="fixed"&&(i=null),(a?!u&&!i:!u&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ap(o)&&!u&&wM(t,o))?r=r.filter(f=>f!==o):i=c,o=jl(o)}return e.set(t,r),r}function $Z(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?ky(e)?[]:UZ(e,this._c):[].concat(n),r],c=o[0],u=o.reduce((d,f)=>{const p=YC(e,f,i);return d.top=Es(p.top,d.top),d.right=bl(p.right,d.right),d.bottom=bl(p.bottom,d.bottom),d.left=Es(p.left,d.left),d},YC(e,c,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function BZ(t){const{width:e,height:n}=xM(t);return{width:e,height:n}}function qZ(t,e,n){const r=ga(e),i=_a(e),a=n==="fixed",o=Dc(t,!0,a,e);let c={scrollLeft:0,scrollTop:0};const u=ua(0);function d(){u.x=cN(i)}if(r||!r&&!a)if((ch(e)!=="body"||ap(i))&&(c=Ty(e)),r){const _=Dc(e,!0,a,e);u.x=_.x+e.clientLeft,u.y=_.y+e.clientTop}else i&&d();a&&!r&&i&&d();const f=i&&!r&&!a?_M(i,c):ua(0),p=o.left+c.scrollLeft-u.x-f.x,g=o.top+c.scrollTop-u.y-f.y;return{x:p,y:g,width:o.width,height:o.height}}function u_(t){return Ai(t).position==="static"}function QC(t,e){if(!ga(t)||Ai(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return _a(t)===n&&(n=n.ownerDocument.body),n}function bM(t,e){const n=Rs(t);if(ky(t))return n;if(!ga(t)){let i=jl(t);for(;i&&!Od(i);){if(Ii(i)&&!u_(i))return i;i=jl(i)}return n}let r=QC(t,e);for(;r&&AZ(r)&&u_(r);)r=QC(r,e);return r&&Od(r)&&u_(r)&&!aN(r)?n:r||RZ(t)||n}const WZ=async function(t){const e=this.getOffsetParent||bM,n=this.getDimensions,r=await n(t.floating);return{reference:qZ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function HZ(t){return Ai(t).direction==="rtl"}const GZ={convertOffsetParentRelativeRectToViewportRelativeRect:DZ,getDocumentElement:_a,getClippingRect:$Z,getOffsetParent:bM,getElementRects:WZ,getClientRects:LZ,getDimensions:BZ,getScale:dd,isElement:Ii,isRTL:HZ};function jM(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function KZ(t,e){let n=null,r;const i=_a(t);function a(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function o(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),a();const d=t.getBoundingClientRect(),{left:f,top:p,width:g,height:_}=d;if(c||e(),!g||!_)return;const N=_g(p),b=_g(i.clientWidth-(f+g)),S=_g(i.clientHeight-(p+_)),w=_g(f),E={rootMargin:-N+"px "+-b+"px "+-S+"px "+-w+"px",threshold:Es(0,bl(1,u))||1};let I=!0;function O(q){const R=q[0].intersectionRatio;if(R!==u){if(!I)return o();R?o(!1,R):r=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!jM(d,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(O,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(O,E)}n.observe(t)}return o(!0),a}function ZZ(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=lN(t),f=i||a?[...d?Nm(d):[],...Nm(e)]:[];f.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),a&&w.addEventListener("resize",n)});const p=d&&c?KZ(d,n):null;let g=-1,_=null;o&&(_=new ResizeObserver(w=>{let[y]=w;y&&y.target===d&&_&&(_.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var E;(E=_)==null||E.observe(e)})),n()}),d&&!u&&_.observe(d),_.observe(e));let N,b=u?Dc(t):null;u&&S();function S(){const w=Dc(t);b&&!jM(b,w)&&n(),b=w,N=requestAnimationFrame(S)}return n(),()=>{var w;f.forEach(y=>{i&&y.removeEventListener("scroll",n),a&&y.removeEventListener("resize",n)}),p==null||p(),(w=_)==null||w.disconnect(),_=null,u&&cancelAnimationFrame(N)}}const YZ=kZ,QZ=TZ,XZ=SZ,JZ=IZ,eY=EZ,XC=NZ,tY=PZ,nY=(t,e,n)=>{const r=new Map,i={platform:GZ,...n},a={...i.platform,_c:r};return jZ(t,e,{...i,platform:a})};var rY=typeof document<"u",sY=function(){},ev=rY?x.useLayoutEffect:sY;function ax(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!ax(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!ax(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function NM(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function JC(t,e){const n=NM(t);return Math.round(e*n)/n}function d_(t){const e=x.useRef(t);return ev(()=>{e.current=t}),e}function iY(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:c=!0,whileElementsMounted:u,open:d}=t,[f,p]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,_]=x.useState(r);ax(g,r)||_(r);const[N,b]=x.useState(null),[S,w]=x.useState(null),y=x.useCallback(A=>{A!==q.current&&(q.current=A,b(A))},[]),E=x.useCallback(A=>{A!==R.current&&(R.current=A,w(A))},[]),I=a||N,O=o||S,q=x.useRef(null),R=x.useRef(null),V=x.useRef(f),U=u!=null,k=d_(u),F=d_(i),D=d_(d),P=x.useCallback(()=>{if(!q.current||!R.current)return;const A={placement:e,strategy:n,middleware:g};F.current&&(A.platform=F.current),nY(q.current,R.current,A).then(z=>{const B={...z,isPositioned:D.current!==!1};H.current&&!ax(V.current,B)&&(V.current=B,Xd.flushSync(()=>{p(B)}))})},[g,e,n,F,D]);ev(()=>{d===!1&&V.current.isPositioned&&(V.current.isPositioned=!1,p(A=>({...A,isPositioned:!1})))},[d]);const H=x.useRef(!1);ev(()=>(H.current=!0,()=>{H.current=!1}),[]),ev(()=>{if(I&&(q.current=I),O&&(R.current=O),I&&O){if(k.current)return k.current(I,O,P);P()}},[I,O,P,k,U]);const te=x.useMemo(()=>({reference:q,floating:R,setReference:y,setFloating:E}),[y,E]),Z=x.useMemo(()=>({reference:I,floating:O}),[I,O]),K=x.useMemo(()=>{const A={position:n,left:0,top:0};if(!Z.floating)return A;const z=JC(Z.floating,f.x),B=JC(Z.floating,f.y);return c?{...A,transform:"translate("+z+"px, "+B+"px)",...NM(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:B}},[n,c,Z.floating,f.x,f.y]);return x.useMemo(()=>({...f,update:P,refs:te,elements:Z,floatingStyles:K}),[f,P,te,Z,K])}const aY=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?XC({element:r.current,padding:i}).fn(n):{}:r?XC({element:r,padding:i}).fn(n):{}}}},oY=(t,e)=>({...YZ(t),options:[t,e]}),lY=(t,e)=>({...QZ(t),options:[t,e]}),cY=(t,e)=>({...tY(t),options:[t,e]}),uY=(t,e)=>({...XZ(t),options:[t,e]}),dY=(t,e)=>({...JZ(t),options:[t,e]}),hY=(t,e)=>({...eY(t),options:[t,e]}),fY=(t,e)=>({...aY(t),options:[t,e]});var mY="Arrow",SM=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...a}=t;return s.jsx(Ze.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});SM.displayName=mY;var pY=SM;function Py(t){const[e,n]=x.useState(void 0);return Bn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,c;if("borderBoxSize"in a){const u=a.borderBoxSize,d=Array.isArray(u)?u[0]:u;o=d.inlineSize,c=d.blockSize}else o=t.offsetWidth,c=t.offsetHeight;n({width:o,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var uN="Popper",[EM,uh]=Sr(uN),[gY,CM]=EM(uN),kM=t=>{const{__scopePopper:e,children:n}=t,[r,i]=x.useState(null);return s.jsx(gY,{scope:e,anchor:r,onAnchorChange:i,children:n})};kM.displayName=uN;var TM="PopperAnchor",PM=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,a=CM(TM,n),o=x.useRef(null),c=ht(e,o);return x.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(Ze.div,{...i,ref:c})});PM.displayName=TM;var dN="PopperContent",[vY,xY]=EM(dN),IM=x.forwardRef((t,e)=>{var Se,re,ee,ne,Y,oe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:g=!1,updatePositionStrategy:_="optimized",onPlaced:N,...b}=t,S=CM(dN,n),[w,y]=x.useState(null),E=ht(e,pe=>y(pe)),[I,O]=x.useState(null),q=Py(I),R=(q==null?void 0:q.width)??0,V=(q==null?void 0:q.height)??0,U=r+(a!=="center"?"-"+a:""),k=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},F=Array.isArray(d)?d:[d],D=F.length>0,P={padding:k,boundary:F.filter(_Y),altBoundary:D},{refs:H,floatingStyles:te,placement:Z,isPositioned:K,middlewareData:A}=iY({strategy:"fixed",placement:U,whileElementsMounted:(...pe)=>ZZ(...pe,{animationFrame:_==="always"}),elements:{reference:S.anchor},middleware:[oY({mainAxis:i+V,alignmentAxis:o}),u&&lY({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?cY():void 0,...P}),u&&uY({...P}),dY({...P,apply:({elements:pe,rects:Te,availableWidth:we,availableHeight:se})=>{const{width:_e,height:je}=Te.reference,We=pe.floating.style;We.setProperty("--radix-popper-available-width",`${we}px`),We.setProperty("--radix-popper-available-height",`${se}px`),We.setProperty("--radix-popper-anchor-width",`${_e}px`),We.setProperty("--radix-popper-anchor-height",`${je}px`)}}),I&&fY({element:I,padding:c}),wY({arrowWidth:R,arrowHeight:V}),g&&hY({strategy:"referenceHidden",...P})]}),[z,B]=MM(Z),X=mr(N);Bn(()=>{K&&(X==null||X())},[K,X]);const de=(Se=A.arrow)==null?void 0:Se.x,ve=(re=A.arrow)==null?void 0:re.y,be=((ee=A.arrow)==null?void 0:ee.centerOffset)!==0,[Ee,Oe]=x.useState();return Bn(()=>{w&&Oe(window.getComputedStyle(w).zIndex)},[w]),s.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:K?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ee,"--radix-popper-transform-origin":[(ne=A.transformOrigin)==null?void 0:ne.x,(Y=A.transformOrigin)==null?void 0:Y.y].join(" "),...((oe=A.hide)==null?void 0:oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx(vY,{scope:n,placedSide:z,onArrowChange:O,arrowX:de,arrowY:ve,shouldHideArrow:be,children:s.jsx(Ze.div,{"data-side":z,"data-align":B,...b,ref:E,style:{...b.style,animation:K?void 0:"none"}})})})});IM.displayName=dN;var AM="PopperArrow",yY={top:"bottom",right:"left",bottom:"top",left:"right"},RM=x.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,a=xY(AM,r),o=yY[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(pY,{...i,ref:n,style:{...i.style,display:"block"}})})});RM.displayName=AM;function _Y(t){return t!==null}var wY=t=>({name:"transformOrigin",options:t,fn(e){var S,w,y;const{placement:n,rects:r,middlewareData:i}=e,o=((S=i.arrow)==null?void 0:S.centerOffset)!==0,c=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[d,f]=MM(n),p={start:"0%",center:"50%",end:"100%"}[f],g=(((w=i.arrow)==null?void 0:w.x)??0)+c/2,_=(((y=i.arrow)==null?void 0:y.y)??0)+u/2;let N="",b="";return d==="bottom"?(N=o?p:`${g}px`,b=`${-u}px`):d==="top"?(N=o?p:`${g}px`,b=`${r.floating.height+u}px`):d==="right"?(N=`${-u}px`,b=o?p:`${_}px`):d==="left"&&(N=`${r.floating.width+u}px`,b=o?p:`${_}px`),{data:{x:N,y:b}}}});function MM(t){const[e,n="center"]=t.split("-");return[e,n]}var hN=kM,Iy=PM,fN=IM,mN=RM,bY="Portal",op=x.forwardRef((t,e)=>{var c;const{container:n,...r}=t,[i,a]=x.useState(!1);Bn(()=>a(!0),[]);const o=n||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?g8.createPortal(s.jsx(Ze.div,{...r,ref:e}),o):null});op.displayName=bY;function jY(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var Er=t=>{const{present:e,children:n}=t,r=NY(e),i=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),a=ht(r.ref,SY(i));return typeof n=="function"||r.isPresent?x.cloneElement(i,{ref:a}):null};Er.displayName="Presence";function NY(t){const[e,n]=x.useState(),r=x.useRef(null),i=x.useRef(t),a=x.useRef("none"),o=t?"mounted":"unmounted",[c,u]=jY(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const d=wg(r.current);a.current=c==="mounted"?d:"none"},[c]),Bn(()=>{const d=r.current,f=i.current;if(f!==t){const g=a.current,_=wg(d);t?u("MOUNT"):_==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(f&&g!==_?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),Bn(()=>{if(e){let d;const f=e.ownerDocument.defaultView??window,p=_=>{const b=wg(r.current).includes(_.animationName);if(_.target===e&&b&&(u("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",d=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},g=_=>{_.target===e&&(a.current=wg(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{f.clearTimeout(d),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:x.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function wg(t){return(t==null?void 0:t.animationName)||"none"}function SY(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var h_="rovingFocusGroup.onEntryFocus",EY={bubbles:!1,cancelable:!0},lp="RovingFocusGroup",[ub,OM,CY]=rp(lp),[kY,Ay]=Sr(lp,[CY]),[TY,PY]=kY(lp),DM=x.forwardRef((t,e)=>s.jsx(ub.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(ub.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(IY,{...t,ref:e})})}));DM.displayName=lp;var IY=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...p}=t,g=x.useRef(null),_=ht(e,g),N=Qc(a),[b,S]=Os({prop:o,defaultProp:c??null,onChange:u,caller:lp}),[w,y]=x.useState(!1),E=mr(d),I=OM(n),O=x.useRef(!1),[q,R]=x.useState(0);return x.useEffect(()=>{const V=g.current;if(V)return V.addEventListener(h_,E),()=>V.removeEventListener(h_,E)},[E]),s.jsx(TY,{scope:n,orientation:r,dir:N,loop:i,currentTabStopId:b,onItemFocus:x.useCallback(V=>S(V),[S]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>R(V=>V+1),[]),onFocusableItemRemove:x.useCallback(()=>R(V=>V-1),[]),children:s.jsx(Ze.div,{tabIndex:w||q===0?-1:0,"data-orientation":r,...p,ref:_,style:{outline:"none",...t.style},onMouseDown:Le(t.onMouseDown,()=>{O.current=!0}),onFocus:Le(t.onFocus,V=>{const U=!O.current;if(V.target===V.currentTarget&&U&&!w){const k=new CustomEvent(h_,EY);if(V.currentTarget.dispatchEvent(k),!k.defaultPrevented){const F=I().filter(Z=>Z.focusable),D=F.find(Z=>Z.active),P=F.find(Z=>Z.id===b),te=[D,P,...F].filter(Boolean).map(Z=>Z.ref.current);VM(te,f)}}O.current=!1}),onBlur:Le(t.onBlur,()=>y(!1))})})}),LM="RovingFocusGroupItem",FM=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...c}=t,u=As(),d=a||u,f=PY(LM,n),p=f.currentTabStopId===d,g=OM(n),{onFocusableItemAdd:_,onFocusableItemRemove:N,currentTabStopId:b}=f;return x.useEffect(()=>{if(r)return _(),()=>N()},[r,_,N]),s.jsx(ub.ItemSlot,{scope:n,id:d,focusable:r,active:i,children:s.jsx(Ze.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...c,ref:e,onMouseDown:Le(t.onMouseDown,S=>{r?f.onItemFocus(d):S.preventDefault()}),onFocus:Le(t.onFocus,()=>f.onItemFocus(d)),onKeyDown:Le(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){f.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const w=MY(S,f.orientation,f.dir);if(w!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let E=g().filter(I=>I.focusable).map(I=>I.ref.current);if(w==="last")E.reverse();else if(w==="prev"||w==="next"){w==="prev"&&E.reverse();const I=E.indexOf(S.currentTarget);E=f.loop?OY(E,I+1):E.slice(I+1)}setTimeout(()=>VM(E))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:b!=null}):o})})});FM.displayName=LM;var AY={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function RY(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function MY(t,e,n){const r=RY(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return AY[r]}function VM(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function OY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var zM=DM,UM=FM,DY=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ku=new WeakMap,bg=new WeakMap,jg={},f_=0,$M=function(t){return t&&(t.host||$M(t.parentNode))},LY=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=$M(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},FY=function(t,e,n,r){var i=LY(e,Array.isArray(t)?t:[t]);jg[n]||(jg[n]=new WeakMap);var a=jg[n],o=[],c=new Set,u=new Set(i),d=function(p){!p||c.has(p)||(c.add(p),d(p.parentNode))};i.forEach(d);var f=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(g){if(c.has(g))f(g);else try{var _=g.getAttribute(r),N=_!==null&&_!=="false",b=(ku.get(g)||0)+1,S=(a.get(g)||0)+1;ku.set(g,b),a.set(g,S),o.push(g),b===1&&N&&bg.set(g,!0),S===1&&g.setAttribute(n,"true"),N||g.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",g,w)}})};return f(e),c.clear(),f_++,function(){o.forEach(function(p){var g=ku.get(p)-1,_=a.get(p)-1;ku.set(p,g),a.set(p,_),g||(bg.has(p)||p.removeAttribute(r),bg.delete(p)),_||p.removeAttribute(n)}),f_--,f_||(ku=new WeakMap,ku=new WeakMap,bg=new WeakMap,jg={})}},Ry=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=DY(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),FY(r,i,n,"aria-hidden")):function(){return null}},tv="right-scroll-bar-position",nv="width-before-scroll-bar",VY="with-scroll-bars-hidden",zY="--removed-body-scroll-bar-size";function m_(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function UY(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var $Y=typeof window<"u"?x.useLayoutEffect:x.useEffect,ek=new WeakMap;function BY(t,e){var n=UY(null,function(r){return t.forEach(function(i){return m_(i,r)})});return $Y(function(){var r=ek.get(n);if(r){var i=new Set(r),a=new Set(t),o=n.current;i.forEach(function(c){a.has(c)||m_(c,null)}),a.forEach(function(c){i.has(c)||m_(c,o)})}ek.set(n,t)},[t]),n}function qY(t){return t}function WY(t,e){e===void 0&&(e=qY);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(c){return c!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(c){return a(c)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var c=n;n=[],c.forEach(a),o=n}var u=function(){var f=o;o=[],f.forEach(a)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(f){o.push(f),d()},filter:function(f){return o=o.filter(f),n}}}};return i}function HY(t){t===void 0&&(t={});var e=WY(null);return e.options=Zi({async:!0,ssr:!1},t),e}var BM=function(t){var e=t.sideCar,n=zm(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,Zi({},n))};BM.isSideCarExport=!0;function GY(t,e){return t.useMedium(e),BM}var qM=HY(),p_=function(){},My=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:p_,onWheelCapture:p_,onTouchMoveCapture:p_}),i=r[0],a=r[1],o=t.forwardProps,c=t.children,u=t.className,d=t.removeScrollBar,f=t.enabled,p=t.shards,g=t.sideCar,_=t.noRelative,N=t.noIsolation,b=t.inert,S=t.allowPinchZoom,w=t.as,y=w===void 0?"div":w,E=t.gapMode,I=zm(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=g,q=BY([n,e]),R=Zi(Zi({},I),i);return x.createElement(x.Fragment,null,f&&x.createElement(O,{sideCar:qM,removeScrollBar:d,shards:p,noRelative:_,noIsolation:N,inert:b,setCallbacks:a,allowPinchZoom:!!S,lockRef:n,gapMode:E}),o?x.cloneElement(x.Children.only(c),Zi(Zi({},R),{ref:q})):x.createElement(y,Zi({},R,{className:u,ref:q}),c))});My.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};My.classNames={fullWidth:nv,zeroRight:tv};var KY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ZY(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=KY();return e&&t.setAttribute("nonce",e),t}function YY(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function QY(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var XY=function(){var t=0,e=null;return{add:function(n){t==0&&(e=ZY())&&(YY(e,n),QY(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},JY=function(){var t=XY();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},WM=function(){var t=JY(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},eQ={left:0,top:0,right:0,gap:0},g_=function(t){return parseInt(t||"",10)||0},tQ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[g_(n),g_(r),g_(i)]},nQ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return eQ;var e=tQ(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},rQ=WM(),hd="data-scroll-locked",sQ=function(t,e,n,r){var i=t.left,a=t.top,o=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(VY,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(hd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tv,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(nv,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(tv," .").concat(tv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(nv," .").concat(nv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hd,`] {
    `).concat(zY,": ").concat(c,`px;
  }
`)},tk=function(){var t=parseInt(document.body.getAttribute(hd)||"0",10);return isFinite(t)?t:0},iQ=function(){x.useEffect(function(){return document.body.setAttribute(hd,(tk()+1).toString()),function(){var t=tk()-1;t<=0?document.body.removeAttribute(hd):document.body.setAttribute(hd,t.toString())}},[])},aQ=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;iQ();var a=x.useMemo(function(){return nQ(i)},[i]);return x.createElement(rQ,{styles:sQ(a,!e,i,n?"":"!important")})},db=!1;if(typeof window<"u")try{var Ng=Object.defineProperty({},"passive",{get:function(){return db=!0,!0}});window.addEventListener("test",Ng,Ng),window.removeEventListener("test",Ng,Ng)}catch{db=!1}var Tu=db?{passive:!1}:!1,oQ=function(t){return t.tagName==="TEXTAREA"},HM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!oQ(t)&&n[e]==="visible")},lQ=function(t){return HM(t,"overflowY")},cQ=function(t){return HM(t,"overflowX")},nk=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=GM(t,r);if(i){var a=KM(t,r),o=a[1],c=a[2];if(o>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},uQ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},dQ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},GM=function(t,e){return t==="v"?lQ(e):cQ(e)},KM=function(t,e){return t==="v"?uQ(e):dQ(e)},hQ=function(t,e){return t==="h"&&e==="rtl"?-1:1},fQ=function(t,e,n,r,i){var a=hQ(t,window.getComputedStyle(e).direction),o=a*r,c=n.target,u=e.contains(c),d=!1,f=o>0,p=0,g=0;do{if(!c)break;var _=KM(t,c),N=_[0],b=_[1],S=_[2],w=b-S-a*N;(N||w)&&GM(t,c)&&(p+=w,g+=N);var y=c.parentNode;c=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(f&&Math.abs(p)<1||!f&&Math.abs(g)<1)&&(d=!0),d},Sg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},rk=function(t){return[t.deltaX,t.deltaY]},sk=function(t){return t&&"current"in t?t.current:t},mQ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},pQ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},gQ=0,Pu=[];function vQ(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(gQ++)[0],a=x.useState(WM)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var b=ZU([t.lockRef.current],(t.shards||[]).map(sk),!0).filter(Boolean);return b.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),b.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var c=x.useCallback(function(b,S){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var w=Sg(b),y=n.current,E="deltaX"in b?b.deltaX:y[0]-w[0],I="deltaY"in b?b.deltaY:y[1]-w[1],O,q=b.target,R=Math.abs(E)>Math.abs(I)?"h":"v";if("touches"in b&&R==="h"&&q.type==="range")return!1;var V=nk(R,q);if(!V)return!0;if(V?O=R:(O=R==="v"?"h":"v",V=nk(R,q)),!V)return!1;if(!r.current&&"changedTouches"in b&&(E||I)&&(r.current=O),!O)return!0;var U=r.current||O;return fQ(U,S,b,U==="h"?E:I)},[]),u=x.useCallback(function(b){var S=b;if(!(!Pu.length||Pu[Pu.length-1]!==a)){var w="deltaY"in S?rk(S):Sg(S),y=e.current.filter(function(O){return O.name===S.type&&(O.target===S.target||S.target===O.shadowParent)&&mQ(O.delta,w)})[0];if(y&&y.should){S.cancelable&&S.preventDefault();return}if(!y){var E=(o.current.shards||[]).map(sk).filter(Boolean).filter(function(O){return O.contains(S.target)}),I=E.length>0?c(S,E[0]):!o.current.noIsolation;I&&S.cancelable&&S.preventDefault()}}},[]),d=x.useCallback(function(b,S,w,y){var E={name:b,delta:S,target:w,should:y,shadowParent:xQ(w)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(I){return I!==E})},1)},[]),f=x.useCallback(function(b){n.current=Sg(b),r.current=void 0},[]),p=x.useCallback(function(b){d(b.type,rk(b),b.target,c(b,t.lockRef.current))},[]),g=x.useCallback(function(b){d(b.type,Sg(b),b.target,c(b,t.lockRef.current))},[]);x.useEffect(function(){return Pu.push(a),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:g}),document.addEventListener("wheel",u,Tu),document.addEventListener("touchmove",u,Tu),document.addEventListener("touchstart",f,Tu),function(){Pu=Pu.filter(function(b){return b!==a}),document.removeEventListener("wheel",u,Tu),document.removeEventListener("touchmove",u,Tu),document.removeEventListener("touchstart",f,Tu)}},[]);var _=t.removeScrollBar,N=t.inert;return x.createElement(x.Fragment,null,N?x.createElement(a,{styles:pQ(i)}):null,_?x.createElement(aQ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function xQ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const yQ=GY(qM,vQ);var cp=x.forwardRef(function(t,e){return x.createElement(My,Zi({},t,{ref:e,sideCar:yQ}))});cp.classNames=My.classNames;var hb=["Enter"," "],_Q=["ArrowDown","PageUp","Home"],ZM=["ArrowUp","PageDown","End"],wQ=[..._Q,...ZM],bQ={ltr:[...hb,"ArrowRight"],rtl:[...hb,"ArrowLeft"]},jQ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},up="Menu",[Sm,NQ,SQ]=rp(up),[Xc,YM]=Sr(up,[SQ,uh,Ay]),Oy=uh(),QM=Ay(),[EQ,Jc]=Xc(up),[CQ,dp]=Xc(up),XM=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=t,c=Oy(e),[u,d]=x.useState(null),f=x.useRef(!1),p=mr(a),g=Qc(i);return x.useEffect(()=>{const _=()=>{f.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>f.current=!1;return document.addEventListener("keydown",_,{capture:!0}),()=>{document.removeEventListener("keydown",_,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),s.jsx(hN,{...c,children:s.jsx(EQ,{scope:e,open:n,onOpenChange:p,content:u,onContentChange:d,children:s.jsx(CQ,{scope:e,onClose:x.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:f,dir:g,modal:o,children:r})})})};XM.displayName=up;var kQ="MenuAnchor",pN=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Oy(n);return s.jsx(Iy,{...i,...r,ref:e})});pN.displayName=kQ;var gN="MenuPortal",[TQ,JM]=Xc(gN,{forceMount:void 0}),eO=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,a=Jc(gN,e);return s.jsx(TQ,{scope:e,forceMount:n,children:s.jsx(Er,{present:n||a.open,children:s.jsx(op,{asChild:!0,container:i,children:r})})})};eO.displayName=gN;var ni="MenuContent",[PQ,vN]=Xc(ni),tO=x.forwardRef((t,e)=>{const n=JM(ni,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=Jc(ni,t.__scopeMenu),o=dp(ni,t.__scopeMenu);return s.jsx(Sm.Provider,{scope:t.__scopeMenu,children:s.jsx(Er,{present:r||a.open,children:s.jsx(Sm.Slot,{scope:t.__scopeMenu,children:o.modal?s.jsx(IQ,{...i,ref:e}):s.jsx(AQ,{...i,ref:e})})})})}),IQ=x.forwardRef((t,e)=>{const n=Jc(ni,t.__scopeMenu),r=x.useRef(null),i=ht(e,r);return x.useEffect(()=>{const a=r.current;if(a)return Ry(a)},[]),s.jsx(xN,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Le(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),AQ=x.forwardRef((t,e)=>{const n=Jc(ni,t.__scopeMenu);return s.jsx(xN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),RQ=wl("MenuContent.ScrollLock"),xN=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:g,onDismiss:_,disableOutsideScroll:N,...b}=t,S=Jc(ni,n),w=dp(ni,n),y=Oy(n),E=QM(n),I=NQ(n),[O,q]=x.useState(null),R=x.useRef(null),V=ht(e,R,S.onContentChange),U=x.useRef(0),k=x.useRef(""),F=x.useRef(0),D=x.useRef(null),P=x.useRef("right"),H=x.useRef(0),te=N?cp:x.Fragment,Z=N?{as:RQ,allowPinchZoom:!0}:void 0,K=z=>{var Se,re;const B=k.current+z,X=I().filter(ee=>!ee.disabled),de=document.activeElement,ve=(Se=X.find(ee=>ee.ref.current===de))==null?void 0:Se.textValue,be=X.map(ee=>ee.textValue),Ee=WQ(be,B,ve),Oe=(re=X.find(ee=>ee.textValue===Ee))==null?void 0:re.ref.current;(function ee(ne){k.current=ne,window.clearTimeout(U.current),ne!==""&&(U.current=window.setTimeout(()=>ee(""),1e3))})(B),Oe&&setTimeout(()=>Oe.focus())};x.useEffect(()=>()=>window.clearTimeout(U.current),[]),Ey();const A=x.useCallback(z=>{var X,de;return P.current===((X=D.current)==null?void 0:X.side)&&GQ(z,(de=D.current)==null?void 0:de.area)},[]);return s.jsx(PQ,{scope:n,searchRef:k,onItemEnter:x.useCallback(z=>{A(z)&&z.preventDefault()},[A]),onItemLeave:x.useCallback(z=>{var B;A(z)||((B=R.current)==null||B.focus(),q(null))},[A]),onTriggerLeave:x.useCallback(z=>{A(z)&&z.preventDefault()},[A]),pointerGraceTimerRef:F,onPointerGraceIntentChange:x.useCallback(z=>{D.current=z},[]),children:s.jsx(te,{...Z,children:s.jsx(ip,{asChild:!0,trapped:i,onMountAutoFocus:Le(a,z=>{var B;z.preventDefault(),(B=R.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(sp,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:g,onDismiss:_,children:s.jsx(zM,{asChild:!0,...E,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:q,onEntryFocus:Le(u,z=>{w.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(fN,{role:"menu","aria-orientation":"vertical","data-state":vO(S.open),"data-radix-menu-content":"",dir:w.dir,...y,...b,ref:V,style:{outline:"none",...b.style},onKeyDown:Le(b.onKeyDown,z=>{const X=z.target.closest("[data-radix-menu-content]")===z.currentTarget,de=z.ctrlKey||z.altKey||z.metaKey,ve=z.key.length===1;X&&(z.key==="Tab"&&z.preventDefault(),!de&&ve&&K(z.key));const be=R.current;if(z.target!==be||!wQ.includes(z.key))return;z.preventDefault();const Oe=I().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);ZM.includes(z.key)&&Oe.reverse(),BQ(Oe)}),onBlur:Le(t.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(U.current),k.current="")}),onPointerMove:Le(t.onPointerMove,Em(z=>{const B=z.target,X=H.current!==z.clientX;if(z.currentTarget.contains(B)&&X){const de=z.clientX>H.current?"right":"left";P.current=de,H.current=z.clientX}}))})})})})})})});tO.displayName=ni;var MQ="MenuGroup",yN=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Ze.div,{role:"group",...r,ref:e})});yN.displayName=MQ;var OQ="MenuLabel",nO=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Ze.div,{...r,ref:e})});nO.displayName=OQ;var ox="MenuItem",ik="menu.itemSelect",Dy=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,a=x.useRef(null),o=dp(ox,t.__scopeMenu),c=vN(ox,t.__scopeMenu),u=ht(e,a),d=x.useRef(!1),f=()=>{const p=a.current;if(!n&&p){const g=new CustomEvent(ik,{bubbles:!0,cancelable:!0});p.addEventListener(ik,_=>r==null?void 0:r(_),{once:!0}),dM(p,g),g.defaultPrevented?d.current=!1:o.onClose()}};return s.jsx(rO,{...i,ref:u,disabled:n,onClick:Le(t.onClick,f),onPointerDown:p=>{var g;(g=t.onPointerDown)==null||g.call(t,p),d.current=!0},onPointerUp:Le(t.onPointerUp,p=>{var g;d.current||(g=p.currentTarget)==null||g.click()}),onKeyDown:Le(t.onKeyDown,p=>{const g=c.searchRef.current!=="";n||g&&p.key===" "||hb.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Dy.displayName=ox;var rO=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=t,o=vN(ox,n),c=QM(n),u=x.useRef(null),d=ht(e,u),[f,p]=x.useState(!1),[g,_]=x.useState("");return x.useEffect(()=>{const N=u.current;N&&_((N.textContent??"").trim())},[a.children]),s.jsx(Sm.ItemSlot,{scope:n,disabled:r,textValue:i??g,children:s.jsx(UM,{asChild:!0,...c,focusable:!r,children:s.jsx(Ze.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:Le(t.onPointerMove,Em(N=>{r?o.onItemLeave(N):(o.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Le(t.onPointerLeave,Em(N=>o.onItemLeave(N))),onFocus:Le(t.onFocus,()=>p(!0)),onBlur:Le(t.onBlur,()=>p(!1))})})})}),DQ="MenuCheckboxItem",sO=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return s.jsx(cO,{scope:t.__scopeMenu,checked:n,children:s.jsx(Dy,{role:"menuitemcheckbox","aria-checked":lx(n)?"mixed":n,...i,ref:e,"data-state":wN(n),onSelect:Le(i.onSelect,()=>r==null?void 0:r(lx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});sO.displayName=DQ;var iO="MenuRadioGroup",[LQ,FQ]=Xc(iO,{value:void 0,onValueChange:()=>{}}),aO=x.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,a=mr(r);return s.jsx(LQ,{scope:t.__scopeMenu,value:n,onValueChange:a,children:s.jsx(yN,{...i,ref:e})})});aO.displayName=iO;var oO="MenuRadioItem",lO=x.forwardRef((t,e)=>{const{value:n,...r}=t,i=FQ(oO,t.__scopeMenu),a=n===i.value;return s.jsx(cO,{scope:t.__scopeMenu,checked:a,children:s.jsx(Dy,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":wN(a),onSelect:Le(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});lO.displayName=oO;var _N="MenuItemIndicator",[cO,VQ]=Xc(_N,{checked:!1}),uO=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,a=VQ(_N,n);return s.jsx(Er,{present:r||lx(a.checked)||a.checked===!0,children:s.jsx(Ze.span,{...i,ref:e,"data-state":wN(a.checked)})})});uO.displayName=_N;var zQ="MenuSeparator",dO=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Ze.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});dO.displayName=zQ;var UQ="MenuArrow",hO=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Oy(n);return s.jsx(mN,{...i,...r,ref:e})});hO.displayName=UQ;var $Q="MenuSub",[Bue,fO]=Xc($Q),jf="MenuSubTrigger",mO=x.forwardRef((t,e)=>{const n=Jc(jf,t.__scopeMenu),r=dp(jf,t.__scopeMenu),i=fO(jf,t.__scopeMenu),a=vN(jf,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=a,d={__scopeMenu:t.__scopeMenu},f=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>f,[f]),x.useEffect(()=>{const p=c.current;return()=>{window.clearTimeout(p),u(null)}},[c,u]),s.jsx(pN,{asChild:!0,...d,children:s.jsx(rO,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":vO(n.open),...t,ref:Ny(e,i.onTriggerChange),onClick:p=>{var g;(g=t.onClick)==null||g.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Le(t.onPointerMove,Em(p=>{a.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Le(t.onPointerLeave,Em(p=>{var _,N;f();const g=(_=n.content)==null?void 0:_.getBoundingClientRect();if(g){const b=(N=n.content)==null?void 0:N.dataset.side,S=b==="right",w=S?-5:5,y=g[S?"left":"right"],E=g[S?"right":"left"];a.onPointerGraceIntentChange({area:[{x:p.clientX+w,y:p.clientY},{x:y,y:g.top},{x:E,y:g.top},{x:E,y:g.bottom},{x:y,y:g.bottom}],side:b}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(p),p.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Le(t.onKeyDown,p=>{var _;const g=a.searchRef.current!=="";t.disabled||g&&p.key===" "||bQ[r.dir].includes(p.key)&&(n.onOpenChange(!0),(_=n.content)==null||_.focus(),p.preventDefault())})})})});mO.displayName=jf;var pO="MenuSubContent",gO=x.forwardRef((t,e)=>{const n=JM(ni,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=Jc(ni,t.__scopeMenu),o=dp(ni,t.__scopeMenu),c=fO(pO,t.__scopeMenu),u=x.useRef(null),d=ht(e,u);return s.jsx(Sm.Provider,{scope:t.__scopeMenu,children:s.jsx(Er,{present:r||a.open,children:s.jsx(Sm.Slot,{scope:t.__scopeMenu,children:s.jsx(xN,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var p;o.isUsingKeyboardRef.current&&((p=u.current)==null||p.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Le(t.onFocusOutside,f=>{f.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Le(t.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Le(t.onKeyDown,f=>{var _;const p=f.currentTarget.contains(f.target),g=jQ[o.dir].includes(f.key);p&&g&&(a.onOpenChange(!1),(_=c.trigger)==null||_.focus(),f.preventDefault())})})})})})});gO.displayName=pO;function vO(t){return t?"open":"closed"}function lx(t){return t==="indeterminate"}function wN(t){return lx(t)?"indeterminate":t?"checked":"unchecked"}function BQ(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function qQ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function WQ(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=qQ(t,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function HQ(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const c=e[a],u=e[o],d=c.x,f=c.y,p=u.x,g=u.y;f>r!=g>r&&n<(p-d)*(r-f)/(g-f)+d&&(i=!i)}return i}function GQ(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return HQ(n,e)}function Em(t){return e=>e.pointerType==="mouse"?t(e):void 0}var KQ=XM,ZQ=pN,YQ=eO,QQ=tO,XQ=yN,JQ=nO,eX=Dy,tX=sO,nX=aO,rX=lO,sX=uO,iX=dO,aX=hO,oX=mO,lX=gO,Ly="DropdownMenu",[cX,que]=Sr(Ly,[YM]),ns=YM(),[uX,xO]=cX(Ly),yO=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:c=!0}=t,u=ns(e),d=x.useRef(null),[f,p]=Os({prop:i,defaultProp:a??!1,onChange:o,caller:Ly});return s.jsx(uX,{scope:e,triggerId:As(),triggerRef:d,contentId:As(),open:f,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(g=>!g),[p]),modal:c,children:s.jsx(KQ,{...u,open:f,onOpenChange:p,dir:r,modal:c,children:n})})};yO.displayName=Ly;var _O="DropdownMenuTrigger",wO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,a=xO(_O,n),o=ns(n);return s.jsx(ZQ,{asChild:!0,...o,children:s.jsx(Ze.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Ny(e,a.triggerRef),onPointerDown:Le(t.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:Le(t.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});wO.displayName=_O;var dX="DropdownMenuPortal",bO=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ns(e);return s.jsx(YQ,{...r,...n})};bO.displayName=dX;var jO="DropdownMenuContent",NO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=xO(jO,n),a=ns(n),o=x.useRef(!1);return s.jsx(QQ,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:Le(t.onCloseAutoFocus,c=>{var u;o.current||(u=i.triggerRef.current)==null||u.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:Le(t.onInteractOutside,c=>{const u=c.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,f=u.button===2||d;(!i.modal||f)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});NO.displayName=jO;var hX="DropdownMenuGroup",fX=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(XQ,{...i,...r,ref:e})});fX.displayName=hX;var mX="DropdownMenuLabel",SO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(JQ,{...i,...r,ref:e})});SO.displayName=mX;var pX="DropdownMenuItem",EO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(eX,{...i,...r,ref:e})});EO.displayName=pX;var gX="DropdownMenuCheckboxItem",CO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(tX,{...i,...r,ref:e})});CO.displayName=gX;var vX="DropdownMenuRadioGroup",xX=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(nX,{...i,...r,ref:e})});xX.displayName=vX;var yX="DropdownMenuRadioItem",kO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(rX,{...i,...r,ref:e})});kO.displayName=yX;var _X="DropdownMenuItemIndicator",TO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(sX,{...i,...r,ref:e})});TO.displayName=_X;var wX="DropdownMenuSeparator",PO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(iX,{...i,...r,ref:e})});PO.displayName=wX;var bX="DropdownMenuArrow",jX=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(aX,{...i,...r,ref:e})});jX.displayName=bX;var NX="DropdownMenuSubTrigger",IO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(oX,{...i,...r,ref:e})});IO.displayName=NX;var SX="DropdownMenuSubContent",AO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(lX,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});AO.displayName=SX;var EX=yO,CX=wO,kX=bO,RO=NO,MO=SO,OO=EO,DO=CO,LO=kO,FO=TO,VO=PO,zO=IO,UO=AO;function Rl(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var TX=["color"],PX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,TX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),IX=["color"],bN=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,IX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),AX=["color"],$O=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,AX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),RX=["color"],MX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,RX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),OX=["color"],BO=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,OX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),DX=["color"],LX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,DX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),FX=["color"],VX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,FX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),zX=["color"],UX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,zX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});const fb=EX,mb=CX,$X=x.forwardRef(({className:t,inset:e,children:n,...r},i)=>s.jsxs(zO,{ref:i,className:st("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,s.jsx(BO,{className:"ml-auto h-4 w-4"})]}));$X.displayName=zO.displayName;const BX=x.forwardRef(({className:t,...e},n)=>s.jsx(UO,{ref:n,className:st("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));BX.displayName=UO.displayName;const cx=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>s.jsx(kX,{children:s.jsx(RO,{ref:r,sideOffset:e,className:st("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));cx.displayName=RO.displayName;const en=x.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(OO,{ref:r,className:st("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));en.displayName=OO.displayName;const qX=x.forwardRef(({className:t,children:e,checked:n,...r},i)=>s.jsxs(DO,{ref:i,className:st("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(FO,{children:s.jsx(bN,{className:"h-4 w-4"})})}),e]}));qX.displayName=DO.displayName;const WX=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(LO,{ref:r,className:st("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(FO,{children:s.jsx(UX,{className:"h-4 w-4 fill-current"})})}),e]}));WX.displayName=LO.displayName;const HX=x.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(MO,{ref:r,className:st("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));HX.displayName=MO.displayName;const Wi=x.forwardRef(({className:t,...e},n)=>s.jsx(VO,{ref:n,className:st("-mx-1 my-1 h-px bg-muted",t),...e}));Wi.displayName=VO.displayName;var qO={exports:{}},WO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dd=x;function GX(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var KX=typeof Object.is=="function"?Object.is:GX,ZX=Dd.useState,YX=Dd.useEffect,QX=Dd.useLayoutEffect,XX=Dd.useDebugValue;function JX(t,e){var n=e(),r=ZX({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return QX(function(){i.value=n,i.getSnapshot=e,v_(i)&&a({inst:i})},[t,n,e]),YX(function(){return v_(i)&&a({inst:i}),t(function(){v_(i)&&a({inst:i})})},[t]),XX(n),n}function v_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!KX(t,n)}catch{return!0}}function eJ(t,e){return e()}var tJ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?eJ:JX;WO.useSyncExternalStore=Dd.useSyncExternalStore!==void 0?Dd.useSyncExternalStore:tJ;qO.exports=WO;var HO=qO.exports;function nJ(){return HO.useSyncExternalStore(rJ,()=>!0,()=>!1)}function rJ(){return()=>{}}var jN="Avatar",[sJ,Wue]=Sr(jN),[iJ,GO]=sJ(jN),KO=x.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,a]=x.useState("idle");return s.jsx(iJ,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(Ze.span,{...r,ref:e})})});KO.displayName=jN;var ZO="AvatarImage",YO=x.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=t,o=GO(ZO,n),c=aJ(r,a),u=mr(d=>{i(d),o.onImageLoadingStatusChange(d)});return Bn(()=>{c!=="idle"&&u(c)},[c,u]),c==="loaded"?s.jsx(Ze.img,{...a,ref:e,src:r}):null});YO.displayName=ZO;var QO="AvatarFallback",XO=x.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,a=GO(QO,n),[o,c]=x.useState(r===void 0);return x.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(u)}},[r]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(Ze.span,{...i,ref:e}):null});XO.displayName=QO;function ak(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function aJ(t,{referrerPolicy:e,crossOrigin:n}){const r=nJ(),i=x.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[o,c]=x.useState(()=>ak(a,t));return Bn(()=>{c(ak(a,t))},[a,t]),Bn(()=>{const u=p=>()=>{c(p)};if(!a)return;const d=u("loaded"),f=u("error");return a.addEventListener("load",d),a.addEventListener("error",f),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",d),a.removeEventListener("error",f)}},[a,n,e]),o}var JO=KO,eD=YO,tD=XO;const oo=x.forwardRef(({className:t,...e},n)=>s.jsx(JO,{ref:n,className:st("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));oo.displayName=JO.displayName;const lo=x.forwardRef(({className:t,...e},n)=>s.jsx(eD,{ref:n,className:st("aspect-square h-full w-full",t),...e}));lo.displayName=eD.displayName;const co=x.forwardRef(({className:t,...e},n)=>s.jsx(tD,{ref:n,className:st("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));co.displayName=tD.displayName;const oJ=Sy("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function at({className:t,variant:e,...n}){return s.jsx("div",{className:st(oJ({variant:e}),t),...n})}const lJ={},ok=t=>{let e;const n=new Set,r=(f,p)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const _=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(N=>N(e,_))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(lJ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,i,u);return u},cJ=t=>t?ok(t):ok;var nD={exports:{}},rD={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy=x,uJ=HO;function dJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hJ=typeof Object.is=="function"?Object.is:dJ,fJ=uJ.useSyncExternalStore,mJ=Fy.useRef,pJ=Fy.useEffect,gJ=Fy.useMemo,vJ=Fy.useDebugValue;rD.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var a=mJ(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=gJ(function(){function u(_){if(!d){if(d=!0,f=_,_=r(_),i!==void 0&&o.hasValue){var N=o.value;if(i(N,_))return p=N}return p=_}if(N=p,hJ(f,_))return N;var b=r(_);return i!==void 0&&i(N,b)?(f=_,N):(f=_,p=b)}var d=!1,f,p,g=n===void 0?null:n;return[function(){return u(e())},g===null?void 0:function(){return u(g())}]},[e,n,r,i]);var c=fJ(t,a[0],a[1]);return pJ(function(){o.hasValue=!0,o.value=c},[c]),vJ(c),c};nD.exports=rD;var xJ=nD.exports;const yJ=El(xJ),sD={},{useDebugValue:_J}=Fe,{useSyncExternalStoreWithSelector:wJ}=yJ;let lk=!1;const bJ=t=>t;function jJ(t,e=bJ,n){(sD?"production":void 0)!=="production"&&n&&!lk&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),lk=!0);const r=wJ(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return _J(r),r}const ck=t=>{(sD?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?cJ(t):t,n=(r,i)=>jJ(e,r,i);return Object.assign(n,e),n},dh=t=>t?ck(t):ck,Yl=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},NJ=(t,e,n)=>{const r=[t,e].sort();return`${r[0]}_${r[1]}_${n}`},SJ=async(t,e,n,r,i,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const c=`${window.location.origin}/messages?conversation=${o}`,u=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:n,senderUniversity:r,listingTitle:i,messagePreview:a,conversationUrl:c})});u.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await u.text())}catch(c){console.error("Error sending email notification:",c)}},Vy=dh((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:n=>{t({loading:!0});const{unsubscribeConversations:r}=e();r&&r();try{const i=_n(Vt($e,"conversations"),Xn("participants","array-contains",n)),a=NC(i,o=>{const c=[];o.docs.forEach(u=>{const d=u.data();d.deletedFor&&d.deletedFor.includes(n)||d.blockedBy&&d.blockedBy.includes(n)||c.push({id:u.id,participants:d.participants||[],listingId:d.listingId||"",listingTitle:d.listingTitle||"",listingImage:d.listingImage,listingPrice:d.listingPrice||0,participantDetails:d.participantDetails||{},lastMessage:d.lastMessage?{...d.lastMessage,sentAt:Yl(d.lastMessage.sentAt)}:void 0,unreadCount:d.unreadCount||{},blockedBy:d.blockedBy||[],deletedFor:d.deletedFor||[],status:d.status||"active",createdAt:Yl(d.createdAt),updatedAt:Yl(d.updatedAt)})}),c.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()),t({conversations:c,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),xe.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(i){console.error("Error setting up conversations listener:",i),t({loading:!1})}},fetchMessages:n=>{const{unsubscribeMessages:r}=e();r&&r();try{const i=_n(Vt($e,"conversations",n,"messages")),a=NC(i,o=>{const c=o.docs.map(u=>{const d=u.data();return{id:u.id,conversationId:n,senderId:d.senderId,senderName:d.senderName,senderAvatar:d.senderAvatar,text:d.text,type:d.type||"text",attachments:d.attachments||[],seen:d.seen||!1,sentAt:Yl(d.sentAt)}});c.sort((u,d)=>u.sentAt.getTime()-d.sentAt.getTime()),t({messages:c,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),xe.error("Erreur lors du chargement des messages")})}catch(i){console.error("Error setting up messages listener:",i)}},sendMessage:async(n,r,i,a,o)=>{try{console.log("Sending message:",{conversationId:n,text:r,senderId:i,senderName:a});const c=e().currentConversation;if(!c){console.error("No current conversation");return}if(c.blockedBy&&c.blockedBy.includes(i)){xe.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const u={conversationId:n,senderId:i,senderName:a,senderAvatar:o||null,text:r,type:"text",seen:!1,sentAt:sr()};console.log("Adding message to Firestore:",u);const d=await xl(Vt($e,"conversations",n,"messages"),u);console.log("Message added with ID:",d.id);const f=c.participants.filter(_=>_!==i),p={};f.forEach(_=>{p[`unreadCount.${_}`]=(c.unreadCount[_]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:r,sentAt:sr(),senderId:i,senderName:a},updatedAt:sr(),...p});const g=Object.fromEntries(Object.entries(p).filter(([,_])=>_!==void 0));await yn(yt($e,"conversations",n),{lastMessage:{text:r,sentAt:sr(),senderId:i,senderName:a},updatedAt:sr(),...g}),f.forEach(async _=>{const N=c.participantDetails[_];if(N&&N.email){const b=c.participantDetails[i];await SJ(N.email,N.name,a,(b==null?void 0:b.university)||"Université non spécifiée",c.listingTitle,r,n)}}),console.log("Message sent successfully")}catch(c){console.error("Error sending message:",c),xe.error("Erreur lors de l'envoi du message")}},createConversation:async(n,r,i,a,o,c,u,d,f)=>{try{console.log("Creating conversation:",{listingId:n,buyerId:o,sellerId:c});const p=NJ(o,c,n);console.log("Generated conversation ID:",p);const g=await Is(yt($e,"conversations",p));if(g.exists()){console.log("Conversation already exists, sending message");const S=g.data(),w={id:p,participants:S.participants||[],listingId:S.listingId||"",listingTitle:S.listingTitle||"",listingImage:S.listingImage,listingPrice:S.listingPrice||0,participantDetails:S.participantDetails||{},lastMessage:S.lastMessage?{...S.lastMessage,sentAt:Yl(S.lastMessage.sentAt)}:void 0,unreadCount:S.unreadCount||{},blockedBy:S.blockedBy||[],deletedFor:S.deletedFor||[],status:S.status||"active",createdAt:Yl(S.createdAt),updatedAt:Yl(S.updatedAt)};return t({currentConversation:w}),await e().sendMessage(p,f,o,u.displayName,u.photoURL),p}console.log("Creating new conversation");const _={participants:[o,c],listingId:n,listingTitle:r,listingImage:a||null,listingPrice:i,participantDetails:{[o]:{name:u.displayName,avatar:u.photoURL||null,university:u.university,verified:u.isVerified||!1,email:u.email||null},[c]:{name:d.sellerName,avatar:d.sellerAvatar||null,university:d.sellerUniversity,verified:d.sellerVerified||!1,email:d.email||null}},unreadCount:{[o]:0,[c]:1},status:"active",createdAt:sr(),updatedAt:sr()};console.log("Setting conversation document:",_);const N=Object.fromEntries(Object.entries(_).filter(([,S])=>S!==void 0));await lc(yt($e,"conversations",p),N);const b={id:p,participants:[o,c],listingId:n,listingTitle:r,listingImage:a||void 0,listingPrice:i,participantDetails:_.participantDetails,unreadCount:_.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:b}),console.log("Sending initial message"),await e().sendMessage(p,f,o,u.displayName,u.photoURL),p}catch(p){throw console.error("Error creating conversation:",p),xe.error("Erreur lors de la création de la conversation"),p}},markMessagesAsSeen:async(n,r)=>{try{const i=yt($e,"conversations",n),a=Object.fromEntries(Object.entries({[`unreadCount.${r}`]:0}).filter(([,o])=>o!==void 0));await yn(i,a)}catch(i){console.error("Error marking messages as seen:",i)}},setCurrentConversation:n=>{t({currentConversation:n})},blockUser:async(n,r)=>{try{const i=yt($e,"conversations",n),a=await Is(i);if(a.exists()){const c=a.data().blockedBy||[];if(!c.includes(r)){const u=Object.fromEntries(Object.entries({blockedBy:[...c,r],status:"blocked",updatedAt:sr()}).filter(([,d])=>d!==void 0));await yn(i,u),xe.success("Utilisateur bloqué")}}}catch(i){console.error("Error blocking user:",i),xe.error("Erreur lors du blocage")}},reportUser:async(n,r,i,a,o)=>{try{const c={reporterId:r,reportedUserId:i,conversationId:n,reason:a,description:o,status:"pending",createdAt:sr()},u=Object.fromEntries(Object.entries(c).filter(([,d])=>d!==void 0));await xl(Vt($e,"reports"),u),xe.success("Signalement envoyé")}catch(c){console.error("Error reporting user:",c),xe.error("Erreur lors du signalement")}},deleteConversation:async(n,r)=>{try{const i=yt($e,"conversations",n),a=await Is(i);if(a.exists()){const o=a.data(),c=o.deletedFor||[];if(!c.includes(r)){const u=[...c,r];if(u.length===o.participants.length)await Pd(i);else{const d=Object.fromEntries(Object.entries({deletedFor:u,updatedAt:sr()}).filter(([,f])=>f!==void 0));await yn(i,d)}xe.success("Conversation supprimée")}}}catch(i){console.error("Error deleting conversation:",i),xe.error("Erreur lors de la suppression")}},findConversationByListing:(n,r)=>{const{conversations:i}=e();return i.find(a=>a.listingId===n&&a.participants.includes(r))||null},cleanup:()=>{const{unsubscribeConversations:n,unsubscribeMessages:r}=e();n&&n(),r&&r(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),EJ={};function CJ(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const Cm=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Cm(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Cm(r)(n)}}}},kJ=(t,e)=>(n,r,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,w)=>({...w,...S}),...e},o=!1;const c=new Set,u=new Set;let d;try{d=a.getStorage()}catch{}if(!d)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...S)},r,i);const f=Cm(a.serialize),p=()=>{const S=a.partialize({...r()});let w;const y=f({state:S,version:a.version}).then(E=>d.setItem(a.name,E)).catch(E=>{w=E});if(w)throw w;return y},g=i.setState;i.setState=(S,w)=>{g(S,w),p()};const _=t((...S)=>{n(...S),p()},r,i);let N;const b=()=>{var S;if(!d)return;o=!1,c.forEach(y=>y(r()));const w=((S=a.onRehydrateStorage)==null?void 0:S.call(a,r()))||void 0;return Cm(d.getItem.bind(d))(a.name).then(y=>{if(y)return a.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==a.version){if(a.migrate)return a.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var E;return N=a.merge(y,(E=r())!=null?E:_),n(N,!0),p()}).then(()=>{w==null||w(N,void 0),o=!0,u.forEach(y=>y(N))}).catch(y=>{w==null||w(void 0,y)})};return i.persist={setOptions:S=>{a={...a,...S},S.getStorage&&(d=S.getStorage())},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:S=>(c.add(S),()=>{c.delete(S)}),onFinishHydration:S=>(u.add(S),()=>{u.delete(S)})},b(),N||_},TJ=(t,e)=>(n,r,i)=>{let a={storage:CJ(()=>localStorage),partialize:b=>b,version:0,merge:(b,S)=>({...S,...b}),...e},o=!1;const c=new Set,u=new Set;let d=a.storage;if(!d)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...b)},r,i);const f=()=>{const b=a.partialize({...r()});return d.setItem(a.name,{state:b,version:a.version})},p=i.setState;i.setState=(b,S)=>{p(b,S),f()};const g=t((...b)=>{n(...b),f()},r,i);i.getInitialState=()=>g;let _;const N=()=>{var b,S;if(!d)return;o=!1,c.forEach(y=>{var E;return y((E=r())!=null?E:g)});const w=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(b=r())!=null?b:g))||void 0;return Cm(d.getItem.bind(d))(a.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==a.version){if(a.migrate)return[!0,a.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var E;const[I,O]=y;if(_=a.merge(O,(E=r())!=null?E:g),n(_,!0),I)return f()}).then(()=>{w==null||w(_,void 0),_=r(),o=!0,u.forEach(y=>y(_))}).catch(y=>{w==null||w(void 0,y)})};return i.persist={setOptions:b=>{a={...a,...b},b.storage&&(d=b.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>N(),hasHydrated:()=>o,onHydrate:b=>(c.add(b),()=>{c.delete(b)}),onFinishHydration:b=>(u.add(b),()=>{u.delete(b)})},a.skipHydration||N(),_||g},PJ=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((EJ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),kJ(t,e)):TJ(t,e),IJ=PJ,hh=dh()(IJ((t,e)=>({cart:[],cartTotal:0,addToCart:n=>{const{cart:r}=e(),i=r.find(a=>a.id===n.id);t(i?{cart:r.map(a=>a.id===n.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+n.price}:{cart:[...r,{...n,quantity:1}],cartTotal:e().cartTotal+n.price}),xe.success("Article ajouté au panier")},removeFromCart:n=>{const{cart:r}=e(),i=r.find(a=>a.id===n);i&&t({cart:r.filter(a=>a.id!==n),cartTotal:e().cartTotal-i.price*i.quantity})},updateQuantity:(n,r)=>{const{cart:i}=e(),a=i.find(o=>o.id===n);if(a){const o=r-a.quantity;t({cart:i.map(c=>c.id===n?{...c,quantity:r}:c),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((n,r)=>n+r.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})})),AJ=()=>{var y,E;const{currentUser:t,userProfile:e,logout:n}=mn(),{conversations:r,fetchConversations:i}=Vy(),{getCartItemCount:a}=hh(),{theme:o,setTheme:c}=b9(),u=cr(),[d,f]=x.useState(""),p=Fe.useMemo(()=>!t||!r.length?0:r.reduce((I,O)=>{const q=O.unreadCount[t.uid]||0;return I+q},0),[r,t]);x.useEffect(()=>{t&&i(t.uid)},[t,i]);const g=I=>{I.preventDefault(),d.trim()&&u(`/listings?q=${encodeURIComponent(d.trim())}`)},_=async()=>{try{await n(),u("/")}catch(I){console.error("Logout error:",I)}},N=a(),b=localStorage.getItem("pendingUserData"),S=b?JSON.parse(b):{};let w="";return e!=null&&e.firstName&&(e!=null&&e.lastName)?w=`${e.firstName} ${e.lastName}`:e!=null&&e.displayName?w=e.displayName:t!=null&&t.displayName?w=t.displayName:t!=null&&t.email?w=t.email.split("@")[0]:w="Utilisateur",e!=null&&e.university||S.university,((e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||S.university==="Autre université"&&S.otherUniversity)&&(e&&e.otherUniversity||S.otherUniversity),x.useEffect(()=>{b&&(t!=null&&t.emailVerified)},[t,b]),s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[s.jsxs(Ue,{to:"/",className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:s.jsx(sh,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),s.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),s.jsx("form",{onSubmit:g,className:"flex-1 max-w-lg mx-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{type:"text",placeholder:"Rechercher entre étudiants...",value:d,onChange:I=>f(I.target.value),className:"pl-10 w-full"})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{onClick:()=>c(o==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors","aria-label":"Changer le thème",children:[s.jsx(tK,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(KG,{className:"absolute top-0 left-0 h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?s.jsxs(s.Fragment,{children:[s.jsx(J,{asChild:!0,className:"hidden sm:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsxs(Ue,{to:"/create",children:[s.jsx(vc,{className:"w-4 h-4 mr-2"}),"Publier"]})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(J,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(Ue,{to:"/cart",children:s.jsx(_l,{className:"w-4 h-4"})})}),N>0&&s.jsx(at,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:N>99?"99+":N})]}),s.jsx(J,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(Ue,{to:"/saved-searches",children:s.jsx(yi,{className:"w-4 h-4"})})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(J,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(Ue,{to:"/messages",children:s.jsx(wn,{className:"w-4 h-4"})})}),p>0&&s.jsx(at,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:p>99?"99+":p})]}),s.jsxs(fb,{children:[s.jsx(mb,{asChild:!0,children:s.jsxs(J,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:[s.jsxs(oo,{className:"h-8 w-8",children:[s.jsx(lo,{src:e==null?void 0:e.photoURL}),s.jsx(co,{children:((E=(y=e==null?void 0:e.displayName)==null?void 0:y[0])==null?void 0:E.toUpperCase())||"U"})]}),(e==null?void 0:e.isVerified)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(zt,{className:"w-2 h-2 text-white"})})]})}),s.jsxs(cx,{className:"w-64",align:"end",children:[s.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:s.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium",children:w}),(e==null?void 0:e.isVerified)&&s.jsxs(at,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:[s.jsx(zt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),e&&s.jsx("div",{children:s.jsx("div",{className:"text-xs text-muted-foreground",children:e.university==="Autre université"?e.otherUniversity:e.university})}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(Ei,{className:"w-3 h-3 text-green-600"}),s.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO₂ économisés"]})]})]})}),s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/profile",className:"cursor-pointer",children:[s.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/settings",className:"cursor-pointer",children:[s.jsx(wy,{className:"w-4 h-4 mr-2"}),"Paramètres"]})}),s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/orders",className:"cursor-pointer",children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/payments",className:"cursor-pointer",children:[s.jsx(tp,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(Or,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/saved-searches",className:"cursor-pointer",children:[s.jsx(eN,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardées"]})}),s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(wn,{className:"w-4 h-4 mr-2"}),"Messages",p>0&&s.jsx(at,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:p>99?"99+":p})]})}),s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/impact",className:"cursor-pointer",children:[s.jsx(Ei,{className:"w-4 h-4 mr-2"}),"Mon impact écologique"]})}),s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/help",className:"cursor-pointer",children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/safety",className:"cursor-pointer",children:[s.jsx(zt,{className:"w-4 h-4 mr-2"}),"Conseils de sécurité"]})}),s.jsx(Wi,{}),s.jsxs(en,{onClick:_,className:"cursor-pointer text-destructive",children:[s.jsx(WG,{className:"w-4 h-4 mr-2"}),"Se déconnecter"]})]})]}),s.jsx(J,{size:"icon",asChild:!0,className:"sm:hidden bg-gradient-to-r from-primary to-secondary",children:s.jsx(Ue,{to:"/create",children:s.jsx(vc,{className:"w-4 h-4"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx(J,{variant:"ghost",asChild:!0,children:s.jsx(Ue,{to:"/auth",children:"Se connecter"})}),s.jsx(J,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsx(Ue,{to:"/auth",children:"Rejoindre"})})]}),s.jsxs(fb,{children:[s.jsx(mb,{asChild:!0,className:"sm:hidden",children:s.jsx(J,{className:"p-2 text-foreground hover:text-primary transition-colors","aria-label":"Menu",children:s.jsx(GG,{className:"w-5 h-5"})})}),s.jsxs(cx,{className:"w-56",align:"end",children:[s.jsx(en,{asChild:!0,children:s.jsx(Ue,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),s.jsx(en,{asChild:!0,children:s.jsx(Ue,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre étudiants"})}),s.jsx(en,{asChild:!0,children:s.jsx(Ue,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & Échanges"})}),s.jsx(en,{asChild:!0,children:s.jsx(Ue,{to:"/listings?category=services",className:"cursor-pointer",children:"Services étudiants"})}),s.jsx(en,{asChild:!0,children:s.jsx(Ue,{to:"/listings?category=housing",className:"cursor-pointer",children:"Logement & Colocation"})}),s.jsx(en,{asChild:!0,children:s.jsx(Ue,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&s.jsxs(s.Fragment,{children:[s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/create",className:"cursor-pointer",children:[s.jsx(vc,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/cart",className:"cursor-pointer relative",children:[s.jsx(_l,{className:"w-4 h-4 mr-2 "}),"Panier",N>0&&s.jsx(at,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 ",children:N})]})}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(wn,{className:"w-4 h-4 mr-2"}),"Messages",p>0&&s.jsx(at,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:p>99?"99+":p})]})}),s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(Or,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})})]})]})]})]})]})})};function RJ({icon:t,size:e=32,gradientId:n}){return s.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:n,x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#2ECC71"}),s.jsx("stop",{offset:"100%",stopColor:"#4A90E2"})]})}),s.jsx(t,{width:e,height:e,fill:`url(#${n})`})]})}const MJ=()=>s.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto",children:s.jsxs("div",{className:"container mx-auto px-4 py-12",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(RJ,{icon:sh,gradientId:"gradient-footer",size:32}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),s.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"La première plateforme d'échange entre étudiants vérifiés. Achetez, vendez, donnez et échangez en toute sécurité au sein de votre communauté universitaire."}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"https://facebook.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(VG,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://twitter.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(iK,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://instagram.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(BG,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Navigation"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(Ue,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors",children:"Toutes les annonces"})}),s.jsx("li",{children:s.jsx(Ue,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors",children:"Dons entre étudiants"})}),s.jsx("li",{children:s.jsx(Ue,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors",children:"Troc & Échanges"})}),s.jsx("li",{children:s.jsx(Ue,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors",children:"Publier une annonce"})}),s.jsx("li",{children:s.jsx(Ue,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors",children:"Comment ça marche"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Catégories populaires"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(Ue,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors",children:"Livres & Cours"})}),s.jsx("li",{children:s.jsx(Ue,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors",children:"Électronique"})}),s.jsx("li",{children:s.jsx(Ue,{to:"/listings?category=housing",className:"text-muted-foreground hover:text-primary transition-colors",children:"Logement & Colocation"})}),s.jsx("li",{children:s.jsx(Ue,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors",children:"Services étudiants"})}),s.jsx("li",{children:s.jsx(Ue,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors",children:"Jobs & Stages"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Sécurité & Confiance"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(zt,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Étudiants 100% vérifiés"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(Ei,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Impact écologique mesuré"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(vs,{className:"w-4 h-4"}),s.jsx("span",{children:"support@studymarket.fr"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ue,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conseils de sécurité"}),s.jsx(Ue,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Processus de vérification"}),s.jsx(Ue,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Règles de la communauté"}),s.jsx(Ue,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Centre d'aide"})]})]})]}),s.jsxs("div",{className:"border-t border-border mt-8 pt-8 flex flex-col sm:flex-row justify-between items-center",children:[s.jsx("p",{className:"text-muted-foreground text-sm",children:"© 2024 StudyMarket. Tous droits réservés. Plateforme dédiée aux étudiants vérifiés."}),s.jsxs("div",{className:"flex space-x-6 mt-4 sm:mt-0",children:[s.jsx(Ue,{to:"/terms",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conditions d'utilisation"}),s.jsx(Ue,{to:"/privacy",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Politique de confidentialité"}),s.jsx(Ue,{to:"/cookies",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Cookies"}),s.jsxs("a",{href:"mailto:support@studymarket.fr",className:"text-muted-foreground hover:text-primary transition-colors text-sm flex items-center gap-1",children:[s.jsx(hs,{className:"w-3 h-3"}),"Contact"]})]})]})]})}),fe=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("rounded-xl border bg-card text-card-foreground shadow",t),...e}));fe.displayName="Card";const Qe=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("flex flex-col space-y-1.5 p-6",t),...e}));Qe.displayName="CardHeader";const Je=x.forwardRef(({className:t,...e},n)=>s.jsx("h3",{ref:n,className:st("font-semibold leading-none tracking-tight",t),...e}));Je.displayName="CardTitle";const Ct=x.forwardRef(({className:t,...e},n)=>s.jsx("p",{ref:n,className:st("text-sm text-muted-foreground",t),...e}));Ct.displayName="CardDescription";const me=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("p-6 pt-0",t),...e}));me.displayName="CardContent";const iD=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("flex items-center p-6 pt-0",t),...e}));iD.displayName="CardFooter";const ux=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(ux).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=ux(t[n]);r!==void 0&&(e[n]=r)}),e}return t},uk=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},x_=t=>{var n,r,i,a,o,c;const e=t.data();return{id:t.id,...e,createdAt:uk(e.createdAt),updatedAt:uk(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((n=e.location)==null?void 0:n.city)||"Paris",state:((r=e.location)==null?void 0:r.state)||"Île-de-France",country:((i=e.location)==null?void 0:i.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((c=e.location)==null?void 0:c.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Université non spécifiée",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},hp=dh((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(n={},r=!1)=>{const{listings:i,lastDoc:a}=e();if(!(!r&&!a)){t({loading:!0});try{let o=_n(Vt($e,"listings"),wC("createdAt","desc"),ei(20));!r&&a&&(o=_n(o,oH(a)));const c=await Fn(o);let u=c.docs.map(x_);if(n.category&&n.category!=="all"&&(u=u.filter(f=>f.category===n.category)),n.minPrice!==void 0&&(u=u.filter(f=>f.price>=n.minPrice)),n.maxPrice!==void 0&&(u=u.filter(f=>f.price<=n.maxPrice)),n.query){const f=n.query.toLowerCase();u=u.filter(p=>{var g;return p.title.toLowerCase().includes(f)||p.description.toLowerCase().includes(f)||((g=p.tags)==null?void 0:g.some(_=>_.toLowerCase().includes(f)))})}if(n.condition&&n.condition.length>0&&(u=u.filter(f=>n.condition.includes(f.condition))),n.sortBy)switch(n.sortBy){case"price-asc":u.sort((f,p)=>f.price-p.price);break;case"price-desc":u.sort((f,p)=>p.price-f.price);break;case"date":default:u.sort((f,p)=>new Date(p.createdAt).getTime()-new Date(f.createdAt).getTime());break}const d=c.docs[c.docs.length-1];t({listings:r?u:[...i,...u],lastDoc:d,hasMore:c.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),xe.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log("🔍 Fetching featured listings...");const n=_n(Vt($e,"listings"),wC("createdAt","desc"),ei(6)),r=await Fn(n);console.log(`📊 Found ${r.docs.length} documents`);const i=r.docs.map((a,o)=>{try{console.log(`🔄 Processing document ${o+1}:`,a.id);const c=x_(a);return console.log(`✅ Successfully converted listing: ${c.title}`),c}catch(c){return console.error(`❌ Error converting document ${a.id}:`,c),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas être affichée pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"Île-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Université non spécifiée",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(`🎉 Successfully processed ${i.length} featured listings`),t({featuredListings:i})}catch(n){console.error("❌ Error fetching featured listings:",n),t({featuredListings:[]})}},fetchListingById:async n=>{t({loading:!0});try{const r=yt($e,"listings",n),i=await Is(r);if(i.exists()){const a=x_(i);await yn(r,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),xe.error("Annonce introuvable")}catch(r){console.error("Error fetching listing:",r),xe.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async n=>{var r,i,a,o,c,u;try{const d=ux({...n,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((r=n.location)==null?void 0:r.city)||"Paris",state:((i=n.location)==null?void 0:i.state)||"Île-de-France",country:((a=n.location)==null?void 0:a.country)||"France",campus:((o=n.location)==null?void 0:o.campus)||null,university:((c=n.location)==null?void 0:c.university)||null,coordinates:((u=n.location)==null?void 0:u.coordinates)||null},currency:n.currency||"EUR",images:n.images||[],tags:n.tags||[],condition:n.condition||"good",transactionType:n.transactionType||"sale"});console.log("Creating listing with data:",d);const f=await xl(Vt($e,"listings"),d);return xe.success("Annonce créée avec succès !"),f.id}catch(d){throw console.error("Error creating listing:",d),xe.error("Erreur lors de la création de l'annonce"),d}},updateListing:async(n,r)=>{try{const i=yt($e,"listings",n),a=ux({...r,updatedAt:new Date});await yn(i,a);const{listings:o,currentListing:c}=e(),u=o.map(d=>d.id===n?{...d,...r}:d);t({listings:u,currentListing:(c==null?void 0:c.id)===n?{...c,...r}:c}),xe.success("Annonce mise à jour !")}catch(i){throw console.error("Error updating listing:",i),xe.error("Erreur lors de la mise à jour"),i}},deleteListing:async n=>{try{await Pd(yt($e,"listings",n));const{listings:r}=e(),i=r.filter(a=>a.id!==n);t({listings:i}),xe.success("Annonce supprimée !")}catch(r){throw console.error("Error deleting listing:",r),xe.error("Erreur lors de la suppression"),r}},searchListings:async n=>{await e().fetchListings(n,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),dk=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},aD=dh((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async n=>{if(n){t({loading:!0});try{const r=_n(Vt($e,"favorites"),Xn("userId","==",n),ei(100)),i=await Fn(r),a=[],o=new Set;i.forEach(c=>{const u=c.data(),d={id:c.id,...u,createdAt:dk(u.createdAt),updatedAt:dk(u.updatedAt)};a.push(d),o.add(d.listingId)}),a.sort((c,u)=>u.createdAt.getTime()-c.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(r){console.error("Erreur lors du chargement des favoris:",r),xe.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(n,r)=>{var i;if(!(!n||!r))try{if(e().userFavoriteIds.has(r.id)){xe.info("Déjà dans vos favoris");return}const a={userId:n,listingId:r.id,listingTitle:r.title,listingPrice:r.price,listingImage:((i=r.images)==null?void 0:i[0])||null,listingCategory:r.category,listingTransactionType:r.transactionType,sellerName:r.sellerName,sellerUniversity:r.sellerUniversity,notes:"",tags:r.tags||[],createdAt:sr(),updatedAt:sr()},c={id:(await xl(Vt($e,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:u,userFavoriteIds:d}=e(),f=new Set(d);f.add(r.id),t({favorites:[c,...u],userFavoriteIds:f});try{await yn(yt($e,"listings",r.id),{likes:(r.likes||0)+1})}catch(p){console.error("Erreur lors de la mise à jour du compteur de likes:",p)}xe.success("Ajouté aux favoris ❤️")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),xe.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(n,r)=>{if(!(!n||!r))try{const i=_n(Vt($e,"favorites"),Xn("userId","==",n),Xn("listingId","==",r)),a=await Fn(i);if(a.empty){xe.info("Pas dans vos favoris");return}const o=a.docs[0];await Pd(yt($e,"favorites",o.id));const{favorites:c,userFavoriteIds:u}=e(),d=new Set(u);d.delete(r),t({favorites:c.filter(f=>f.listingId!==r),userFavoriteIds:d});try{const f=yt($e,"listings",r),p=await Fn(_n(Vt($e,"listings"),Xn("__name__","==",r)));if(!p.empty){const g=p.docs[0].data().likes||0;await yn(f,{likes:Math.max(0,g-1)})}}catch(f){console.error("Erreur lors de la mise à jour du compteur de likes:",f)}xe.success("Retiré des favoris")}catch(i){console.error("Erreur lors de la suppression des favoris:",i),xe.error("Erreur lors de la suppression des favoris")}},isFavorite:n=>e().userFavoriteIds.has(n),toggleFavorite:async(n,r)=>{const{isFavorite:i,addToFavorites:a,removeFromFavorites:o}=e();i(r.id)?await o(n,r.id):await a(n,r)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),oD=({listing:t,size:e="default",className:n=""})=>{const{currentUser:r}=mn(),{isFavorite:i,toggleFavorite:a}=aD(),o=cr(),c=i(t.id),u=f=>{if(f.preventDefault(),f.stopPropagation(),!r){xe.error("Connectez-vous pour ajouter aux favoris"),o("/auth");return}a(r.uid,t)},d=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx(J,{variant:"ghost",size:"icon",onClick:u,className:`${d()} ${c?"text-red-500 hover:text-red-600":"text-blue-500 hover:text-red-500"} ${n}`,"aria-label":c?"Retirer des favoris":"Ajouter aux favoris",children:s.jsx(Or,{className:`w-4 h-4 ${c?"fill-current text-red-500":"stroke-current text-blue-500"}`,strokeWidth:2,fill:c?"currentColor":"none"})})},lD=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const i=async o=>{o.preventDefault(),o.stopPropagation();const c={title:t.title,text:`Découvrez cette annonce sur StudyMarket: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(c):(await navigator.clipboard.writeText(window.location.href),xe.success("Lien copié dans le presse-papiers"))}catch(u){console.error("Error sharing:",u)}},a=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx(J,{variant:"ghost",size:"icon",onClick:i,className:`${a()} ${r}`,"aria-label":"Partager",children:s.jsx(by,{className:"w-4 h-4"})})};function pt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ys(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Gr(t,e){const n=pt(t);return isNaN(e)?ys(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Ri(t,e){const n=pt(t);if(isNaN(e))return ys(t,NaN);if(!e)return n;const r=n.getDate(),i=ys(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return r>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const NN=6048e5,OJ=864e5,Eg=43200,hk=1440;let DJ={};function fh(){return DJ}function va(t,e){var c,u,d,f;const n=fh(),r=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=pt(t),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Lc(t){return va(t,{weekStartsOn:1})}function cD(t){const e=pt(t),n=e.getFullYear(),r=ys(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Lc(r),a=ys(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Lc(a);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Ld(t){const e=pt(t);return e.setHours(0,0,0,0),e}function Fd(t){const e=pt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ta(t,e){const n=Ld(t),r=Ld(e),i=+n-Fd(n),a=+r-Fd(r);return Math.round((i-a)/OJ)}function LJ(t){const e=cD(t),n=ys(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Lc(n)}function pb(t,e){const n=e*7;return Gr(t,n)}function FJ(t,e){return Ri(t,e*12)}function VJ(t){let e;return t.forEach(function(n){const r=pt(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function zJ(t){let e;return t.forEach(n=>{const r=pt(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function rv(t,e){const n=pt(t),r=pt(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function UJ(t){return ys(t,Date.now())}function fs(t,e){const n=Ld(t),r=Ld(e);return+n==+r}function SN(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $J(t){if(!SN(t)&&typeof t!="number")return!1;const e=pt(t);return!isNaN(Number(e))}function Vd(t,e){const n=pt(t),r=pt(e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function BJ(t,e,n){const r=va(t,n),i=va(e,n),a=+r-Fd(r),o=+i-Fd(i);return Math.round((a-o)/NN)}function qJ(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function WJ(t,e){return+pt(t)-+pt(e)}function HJ(t){const e=pt(t);return e.setHours(23,59,59,999),e}function zy(t){const e=pt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function GJ(t){const e=pt(t);return+HJ(e)==+zy(e)}function KJ(t,e){const n=pt(t),r=pt(e),i=rv(n,r),a=Math.abs(Vd(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let c=rv(n,r)===-i;GJ(pt(t))&&a===1&&rv(t,r)===1&&(c=!1),o=i*(a-Number(c))}return o===0?0:o}function ZJ(t,e,n){const r=WJ(t,e)/1e3;return qJ(n==null?void 0:n.roundingMethod)(r)}function xs(t){const e=pt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function uD(t){const e=pt(t),n=ys(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function EN(t,e){var c,u,d,f;const n=fh(),r=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=pt(t),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function dD(t){return EN(t,{weekStartsOn:1})}const YJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},QJ=(t,e,n)=>{let r;const i=YJ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function fd(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const XJ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},JJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eee={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tee={date:fd({formats:XJ,defaultWidth:"full"}),time:fd({formats:JJ,defaultWidth:"full"}),dateTime:fd({formats:eee,defaultWidth:"full"})},nee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ree=(t,e,n,r)=>nee[t];function Yi(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):o;i=t.formattingValues[c]||t.formattingValues[o]}else{const o=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[c]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const see={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},iee={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},oee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},uee=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},dee={ordinalNumber:uee,era:Yi({values:see,defaultWidth:"wide"}),quarter:Yi({values:iee,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Yi({values:aee,defaultWidth:"wide"}),day:Yi({values:oee,defaultWidth:"wide"}),dayPeriod:Yi({values:lee,defaultWidth:"wide",formattingValues:cee,defaultFormattingWidth:"wide"})};function Qi(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?fee(c,p=>p.test(o)):hee(c,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function hee(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function fee(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function hD(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const c=e.slice(i.length);return{value:o,rest:c}}}const mee=/^(\d+)(th|st|nd|rd)?/i,pee=/\d+/i,gee={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vee={any:[/^b/i,/^(a|c)/i]},xee={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yee={any:[/1/i,/2/i,/3/i,/4/i]},_ee={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wee={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},bee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},jee={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Nee={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},See={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Eee={ordinalNumber:hD({matchPattern:mee,parsePattern:pee,valueCallback:t=>parseInt(t,10)}),era:Qi({matchPatterns:gee,defaultMatchWidth:"wide",parsePatterns:vee,defaultParseWidth:"any"}),quarter:Qi({matchPatterns:xee,defaultMatchWidth:"wide",parsePatterns:yee,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qi({matchPatterns:_ee,defaultMatchWidth:"wide",parsePatterns:wee,defaultParseWidth:"any"}),day:Qi({matchPatterns:bee,defaultMatchWidth:"wide",parsePatterns:jee,defaultParseWidth:"any"}),dayPeriod:Qi({matchPatterns:Nee,defaultMatchWidth:"any",parsePatterns:See,defaultParseWidth:"any"})},CN={code:"en-US",formatDistance:QJ,formatLong:tee,formatRelative:ree,localize:dee,match:Eee,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Cee(t){const e=pt(t);return ta(e,uD(e))+1}function fD(t){const e=pt(t),n=+Lc(e)-+LJ(e);return Math.round(n/NN)+1}function mD(t,e){var f,p,g,_;const n=pt(t),r=n.getFullYear(),i=fh(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((_=(g=i.locale)==null?void 0:g.options)==null?void 0:_.firstWeekContainsDate)??1,o=ys(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const c=va(o,e),u=ys(t,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const d=va(u,e);return n.getTime()>=c.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function kee(t,e){var c,u,d,f;const n=fh(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=mD(t,e),a=ys(t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),va(a,e)}function pD(t,e){const n=pt(t),r=+va(n,e)-+kee(n,e);return Math.round(r/NN)+1}function Wt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Io={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Wt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Wt(n+1,2)},d(t,e){return Wt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Wt(t.getHours()%12||12,e.length)},H(t,e){return Wt(t.getHours(),e.length)},m(t,e){return Wt(t.getMinutes(),e.length)},s(t,e){return Wt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Wt(i,e.length)}},Iu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},fk={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Io.y(t,e)},Y:function(t,e,n,r){const i=mD(t,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return Wt(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Wt(a,e.length)},R:function(t,e){const n=cD(t);return Wt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Wt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Wt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Wt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Io.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Wt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=pD(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Wt(i,e.length)},I:function(t,e,n){const r=fD(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Wt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Io.d(t,e)},D:function(t,e,n){const r=Cee(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Wt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Wt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Wt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Wt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Iu.noon:r===0?i=Iu.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Iu.evening:r>=12?i=Iu.afternoon:r>=4?i=Iu.morning:i=Iu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Io.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Io.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Wt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Wt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Io.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Io.s(t,e)},S:function(t,e){return Io.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return pk(r);case"XXXX":case"XX":return nc(r);case"XXXXX":case"XXX":default:return nc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return pk(r);case"xxxx":case"xx":return nc(r);case"xxxxx":case"xxx":default:return nc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+mk(r,":");case"OOOO":default:return"GMT"+nc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+mk(r,":");case"zzzz":default:return"GMT"+nc(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Wt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Wt(r,e.length)}};function mk(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+Wt(a,2)}function pk(t,e){return t%60===0?(t>0?"-":"+")+Wt(Math.abs(t)/60,2):nc(t,e)}function nc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Wt(Math.trunc(r/60),2),a=Wt(r%60,2);return n+i+e+a}const gk=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},gD=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Tee=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return gk(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",gk(r,e)).replace("{{time}}",gD(i,e))},Pee={p:gD,P:Tee},Iee=/^D+$/,Aee=/^Y+$/,Ree=["D","DD","YY","YYYY"];function Mee(t){return Iee.test(t)}function Oee(t){return Aee.test(t)}function Dee(t,e,n){const r=Lee(t,e,n);if(console.warn(r),Ree.includes(t))throw new RangeError(r)}function Lee(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Fee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Vee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zee=/^'([^]*?)'?$/,Uee=/''/g,$ee=/[a-zA-Z]/;function or(t,e,n){var f,p,g,_,N,b,S,w;const r=fh(),i=(n==null?void 0:n.locale)??r.locale??CN,a=(n==null?void 0:n.firstWeekContainsDate)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((_=(g=r.locale)==null?void 0:g.options)==null?void 0:_.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((b=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((w=(S=r.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??0,c=pt(t);if(!$J(c))throw new RangeError("Invalid time value");let u=e.match(Vee).map(y=>{const E=y[0];if(E==="p"||E==="P"){const I=Pee[E];return I(y,i.formatLong)}return y}).join("").match(Fee).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const E=y[0];if(E==="'")return{isToken:!1,value:Bee(y)};if(fk[E])return{isToken:!0,value:y};if(E.match($ee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(u=i.localize.preprocessor(c,u));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return u.map(y=>{if(!y.isToken)return y.value;const E=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Oee(E)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Mee(E))&&Dee(E,e,String(t));const I=fk[E[0]];return I(c,E,i.localize,d)}).join("")}function Bee(t){const e=t.match(zee);return e?e[1].replace(Uee,"'"):t}function qee(t,e,n){const r=fh(),i=(n==null?void 0:n.locale)??r.locale??CN,a=2520,o=rv(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let u,d;o>0?(u=pt(e),d=pt(t)):(u=pt(t),d=pt(e));const f=ZJ(d,u),p=(Fd(d)-Fd(u))/1e3,g=Math.round((f-p)/60);let _;if(g<2)return n!=null&&n.includeSeconds?f<5?i.formatDistance("lessThanXSeconds",5,c):f<10?i.formatDistance("lessThanXSeconds",10,c):f<20?i.formatDistance("lessThanXSeconds",20,c):f<40?i.formatDistance("halfAMinute",0,c):f<60?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",1,c):g===0?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",g,c);if(g<45)return i.formatDistance("xMinutes",g,c);if(g<90)return i.formatDistance("aboutXHours",1,c);if(g<hk){const N=Math.round(g/60);return i.formatDistance("aboutXHours",N,c)}else{if(g<a)return i.formatDistance("xDays",1,c);if(g<Eg){const N=Math.round(g/hk);return i.formatDistance("xDays",N,c)}else if(g<Eg*2)return _=Math.round(g/Eg),i.formatDistance("aboutXMonths",_,c)}if(_=KJ(d,u),_<12){const N=Math.round(g/Eg);return i.formatDistance("xMonths",N,c)}else{const N=_%12,b=Math.trunc(_/12);return N<3?i.formatDistance("aboutXYears",b,c):N<9?i.formatDistance("overXYears",b,c):i.formatDistance("almostXYears",b+1,c)}}function mh(t,e){return qee(t,UJ(t),e)}function Wee(t){const e=pt(t),n=e.getFullYear(),r=e.getMonth(),i=ys(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function Hee(t){return Math.trunc(+pt(t)/1e3)}function Gee(t){const e=pt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function Kee(t,e){return BJ(Gee(t),xs(t),e)+1}function gb(t,e){const n=pt(t),r=pt(e);return n.getTime()>r.getTime()}function vD(t,e){const n=pt(t),r=pt(e);return+n<+r}function kN(t,e){const n=pt(t),r=pt(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Zee(t,e){const n=pt(t),r=pt(e);return n.getFullYear()===r.getFullYear()}function y_(t,e){return Gr(t,-e)}function __(t,e){const n=pt(t),r=n.getFullYear(),i=n.getDate(),a=ys(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const o=Wee(a);return n.setMonth(e,Math.min(i,o)),n}function vk(t,e){const n=pt(t);return isNaN(+n)?ys(t,NaN):(n.setFullYear(e),n)}const Yee={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Qee=(t,e,n)=>{let r;const i=Yee[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},Xee={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Jee={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},ete={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tte={date:fd({formats:Xee,defaultWidth:"full"}),time:fd({formats:Jee,defaultWidth:"full"}),dateTime:fd({formats:ete,defaultWidth:"full"})},nte={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},rte=(t,e,n,r)=>nte[t],ste={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},ite={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},ate={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},ote={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},lte={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},cte=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const i=["year","week","hour","minute","second"];let a;return n===1?a=r&&i.includes(r)?"ère":"er":a="ème",n+a},ute=["MMM","MMMM"],dte={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&ute.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:cte,era:Yi({values:ste,defaultWidth:"wide"}),quarter:Yi({values:ite,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Yi({values:ate,defaultWidth:"wide"}),day:Yi({values:ote,defaultWidth:"wide"}),dayPeriod:Yi({values:lte,defaultWidth:"wide"})},hte=/^(\d+)(ième|ère|ème|er|e)?/i,fte=/\d+/i,mte={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},pte={any:[/^av/i,/^ap/i]},gte={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},vte={any:[/1/i,/2/i,/3/i,/4/i]},xte={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},yte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},_te={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},wte={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},bte={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},jte={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},Nte={ordinalNumber:hD({matchPattern:hte,parsePattern:fte,valueCallback:t=>parseInt(t)}),era:Qi({matchPatterns:mte,defaultMatchWidth:"wide",parsePatterns:pte,defaultParseWidth:"any"}),quarter:Qi({matchPatterns:gte,defaultMatchWidth:"wide",parsePatterns:vte,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qi({matchPatterns:xte,defaultMatchWidth:"wide",parsePatterns:yte,defaultParseWidth:"any"}),day:Qi({matchPatterns:_te,defaultMatchWidth:"wide",parsePatterns:wte,defaultParseWidth:"any"}),dayPeriod:Qi({matchPatterns:bte,defaultMatchWidth:"any",parsePatterns:jte,defaultParseWidth:"any"})},Dr={code:"fr",formatDistance:Qee,formatLong:tte,formatRelative:rte,localize:dte,match:Nte,options:{weekStartsOn:1,firstWeekContainsDate:4}},km=({listing:t})=>{var p,g,_,N,b,S;const e=(w,y)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const E=y;try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:E}).format(w)}catch{return`${w} €`}},n=w=>{switch(w){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-orange-100 text-orange-700 border-orange-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},r=w=>{switch(w){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return w}},i=()=>{switch(t.transactionType){case"donation":return s.jsx(Rd,{className:"w-3 h-3"});case"exchange":return s.jsx(so,{className:"w-3 h-3"});default:return null}},a=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},o=w=>{try{let y;if(!w)return"Date inconnue";if(w instanceof Date)y=w;else if(typeof w=="string"||typeof w=="number")y=new Date(w);else if(w&&typeof w.toDate=="function")y=w.toDate();else if(w&&typeof w=="object"&&"seconds"in w)y=new Date(w.seconds*1e3);else return"Date inconnue";return isNaN(y.getTime())?"Date inconnue":mh(y,{addSuffix:!0,locale:Dr})}catch{return"Date inconnue"}},c=t.price||0,u=t.currency||"EUR",d=t.condition||"good",f=t.transactionType||"sale";return s.jsxs(fe,{className:"group relative bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 shadow-sm dark:shadow-lg hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[s.jsx(Ue,{to:`/listing/${t.id}`,className:"block",children:s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100",children:[s.jsx("img",{src:((p=t.images)==null?void 0:p[0])||"/assets/image.png",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[s.jsx(oD,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"}),s.jsx(lD,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"})]}),f!=="sale"&&s.jsxs(at,{className:`absolute top-3 left-3 ${a()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[i(),s.jsx("span",{className:"ml-1.5 text-sm",children:f==="donation"?"Don":"Troc"})]}),f==="sale"&&s.jsx(at,{className:`absolute top-3 left-3 ${n(d)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:r(d)}),t.environmentalImpact&&s.jsxs(at,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[s.jsx(Ei,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO₂"]}),t.images&&t.images.length>1&&s.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),s.jsxs(me,{className:"p-6 space-y-4",children:[s.jsxs(Ue,{to:`/listing/${t.id}`,className:"block",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:`text-2xl font-bold ${f==="donation"?"text-green-600":f==="exchange"?"text-purple-600":"text-slate-900 dark:text-white"}`,children:e(c,u)}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 bg-gray-50 px-2.5 py-1 rounded-full",children:[s.jsx(Ad,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"font-medium",children:t.views||0})]})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),f==="exchange"&&t.exchangeFor&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-purple-50 px-3 py-2 rounded-lg mb-4",children:[s.jsx(so,{className:"w-4 h-4 text-purple-500"}),s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[s.jsx(Mr,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-semibold truncate",children:((g=t.location)==null?void 0:g.campus)||((_=t.location)!=null&&_.city&&((N=t.location)!=null&&N.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spécifiée")})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[s.jsx(Un,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-300 whitespace-nowrap",children:o(t.createdAt)})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsxs(oo,{className:"w-9 h-9 border-2 border-gray-100",children:[s.jsx(lo,{src:t.sellerAvatar}),s.jsx(co,{className:"text-sm bg-gray-100 text-gray-600 font-medium",children:((S=(b=t.sellerName)==null?void 0:b[0])==null?void 0:S.toUpperCase())||"U"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&s.jsx(zt,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),s.jsx("span",{className:"text-xs text-gray-500 truncate block text-left",children:s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:t.sellerUniversity||"Université non spécifiée"})})]})]}),t.aiPriceEstimate&&f==="sale"&&s.jsx(at,{className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste ✓"})]})]})]})};var xD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},xk=Fe.createContext&&Fe.createContext(xD),Ste=["attr","size","title"];function Ete(t,e){if(t==null)return{};var n=Cte(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cte(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dx(){return dx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dx.apply(this,arguments)}function yk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yk(Object(n),!0).forEach(function(r){kte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kte(t,e,n){return e=Tte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tte(t){var e=Pte(t,"string");return typeof e=="symbol"?e:e+""}function Pte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yD(t){return t&&t.map((e,n)=>Fe.createElement(e.tag,hx({key:n},e.attr),yD(e.child)))}function Ml(t){return e=>Fe.createElement(Ite,dx({attr:hx({},t.attr)},e),yD(t.child))}function Ite(t){var e=n=>{var{attr:r,size:i,title:a}=t,o=Ete(t,Ste),c=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Fe.createElement("svg",dx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:hx(hx({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),a&&Fe.createElement("title",null,a),t.children)};return xk!==void 0?Fe.createElement(xk.Consumer,null,n=>e(n)):e(xD)}function Ate(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function Rte(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function Mte(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function Ote(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function Dte(t){return Ml({attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function Lte(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function Fte(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function Vte(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const zte=()=>{const[t,e]=x.useState(""),n=cr(),r=i=>{i.preventDefault(),t.trim()&&n(`/listings?q=${encodeURIComponent(t.trim())}`)};return s.jsxs("form",{onSubmit:r,className:"flex items-center w-full max-w-2xl mx-auto rounded-full border-2 border-primary/40 bg-white shadow-sm focus-within:ring-2 focus-within:ring-primary/30 transition px-1 sm:px-1",role:"search","aria-label":"Recherche",children:[s.jsx("span",{className:"pl-0 sm:pl-4 text-gray-400",children:s.jsx(_r,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",className:"flex-1 bg-transparent outline-none border-0 px-2 sm:px-4 py-2 sm:py-3 text-base rounded-l-full min-w-0",placeholder:"Rechercher parmi les étudiants de votre région...",value:t,onChange:i=>e(i.target.value),"aria-label":"Rechercher"}),s.jsx("button",{type:"submit",className:"rounded-full bg-gradient-to-r from-primary to-secondary text-white font-semibold px-3 sm:px-6 py-2 m-1 transition hover:from-primary/90 hover:to-secondary/90 focus:outline-none whitespace-nowrap text-sm sm:text-base",children:"Rechercher"})]})},Ute={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/troc.svg"},$te=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:"w-50 h-50"}),Bte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Trending Up",className:"w-50 h-50"}),qte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Trending Up",className:"w-50 h-50"}),Wte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Bleu/chat.svg",alt:"Trending Up",className:"w-50 h-50"}),Hte=[{id:"electronics",name:"Électronique",icon:Ote,color:"text-blue-600",description:"Ordinateurs, téléphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:Rte,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:Ate,color:"text-blue-600",description:"Meubles, déco, électroménager"},{id:"housing",name:"Logement",icon:Mte,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:Dte,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:Lte,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:Vte,color:"text-blue-600",description:"Objets gratuits, entraide"},{id:"exchange",name:"Troc",icon:Fte,color:"text-blue-600",description:"Échanges de services et objets"}],Gte=[{icon:zt,title:"Étudiants vérifiés uniquement",description:'Chaque membre est vérifié avec son adresse universitaire. Badge "Étudiant certifié" sur tous les profils.'},{icon:Wte,title:"Chat sécurisé intégré",description:"Messagerie avec proposition de rendez-vous, points de rencontre campus et protection des données."},{icon:Ei,title:"Impact écologique mesuré",description:"Suivez votre impact environnemental : CO₂ économisé, ressources préservées grâce à vos achats d'occasion."},{icon:U4,title:"Avis publics et réputation",description:"Système de notation transparent. Consultez les avis avant chaque transaction pour échanger en confiance."}],Kte=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",icon:$te,link:"/create",color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",icon:Bte,link:"/create?type=donation",color:"border-2 border-green-500 text-green-500"},{title:"Proposer un troc",description:"Échangez services et objets sans argent",icon:qte,link:"/create?type=exchange",color:"border-2 border-green-500 text-green-500"}],Zte=()=>{const{featuredListings:t,fetchFeaturedListings:e}=hp();return x.useEffect(()=>{e()},[e]),s.jsxs("div",{className:"max-w-7xl mx-auto px-1 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-8",children:"Bienvenue sur StudyMarket"}),s.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 py-8 sm:py-16 px-4",children:s.jsxs("div",{className:"container mx-auto text-center max-w-4xl",children:[s.jsx("div",{className:"flex items-center justify-center mb-4 sm:mb-6",children:s.jsxs(at,{className:"bg-green-100 text-green-800 border-green-200 px-3 py-1.5 sm:px-4 sm:py-2",children:[s.jsx(zt,{className:"w-4 h-4 mr-2"}),"Communauté 100% étudiants vérifiés"]})}),s.jsx("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-bold mb-4 sm:mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"La marketplace des étudiants"}),s.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-6 sm:mb-8 max-w-2xl mx-auto",children:"Achetez, vendez, donnez et échangez entre étudiants certifiés de votre région. Sécurisé, écologique et pensé pour la vie étudiante."}),s.jsx("div",{className:"mb-6 sm:mb-8 px-4",children:s.jsx(zte,{})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 sm:mb-8",children:Kte.map((n,r)=>s.jsx(Ue,{to:n.link,className:"group",children:s.jsx(fe,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:s.jsxs(me,{className:"p-4 text-center",children:[s.jsx("div",{className:`w-12 h-12 ${n.color} rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform`,children:s.jsx(n.icon,{})}),s.jsx("h3",{className:"font-semibold mb-1",children:n.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]})})},r))}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s.jsx(J,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary w-full sm:w-auto",children:s.jsxs(Ue,{to:"/listings",children:["Parcourir les annonces",s.jsx(wm,{className:"w-4 h-4 ml-2"})]})}),s.jsx(J,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:s.jsx(Ue,{to:"/auth",children:"Rejoindre la communauté"})})]})]})}),s.jsx("section",{className:"py-10 sm:py-16 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-3 sm:mb-4",children:"Catégories étudiantes"}),s.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-12 max-w-2xl mx-auto text-sm sm:text-base",children:"Des catégories pensées spécifiquement pour la vie étudiante, avec des filtres adaptés à vos besoins"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Hte.map(n=>{let r;return n.id==="jobs"?r="/jobs":n.id==="housing"?r="/housing":r=`/listings?category=${n.id}`,s.jsx(Ue,{to:r,className:"group",children:s.jsx(fe,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:s.jsxs(me,{className:"p-4 text-center",children:[s.jsx("img",{src:Ute[n.id],alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold text-sm mb-1",children:n.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})},n.id)})})]})}),t.length>0&&s.jsx("section",{className:"py-16 px-4 bg-muted/30",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 sm:mb-12 gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Annonces récentes"}),s.jsx("p",{className:"text-muted-foreground",children:"Les dernières offres de la communauté étudiante"})]}),s.jsx(J,{variant:"outline",asChild:!0,children:s.jsxs(Ue,{to:"/listings",children:["Voir tout",s.jsx(wm,{className:"w-4 h-4 ml-2"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.slice(0,6).map(n=>s.jsx(km,{listing:n},n.id))})]})}),s.jsx("section",{className:"py-16 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-4",children:"Pourquoi StudyMarket ?"}),s.jsx("p",{className:"text-center text-muted-foreground mb-12 max-w-2xl mx-auto",children:"Une plateforme pensée par et pour les étudiants, avec des fonctionnalités uniques pour votre sécurité et votre tranquillité d'esprit"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Gte.map((n,r)=>s.jsx(fe,{className:"border-0 shadow-none",children:s.jsx(me,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(n.icon,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:n.title}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:n.description})]})]})})},r))})]})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20",children:s.jsx("div",{className:"container mx-auto text-center",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx(Ei,{className:"w-12 h-12 sm:w-16 sm:h-16 text-green-600 mx-auto mb-6"}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"Votre impact écologique compte"}),s.jsx("p",{className:"text-base sm:text-xl text-muted-foreground mb-8",children:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental et découvrez combien de CO₂ vous économisez grâce à vos échanges étudiants."}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"2.5T"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"CO₂ économisé par la communauté"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"15K"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Objets donnés cette année"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"8K"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants engagés"})]})]}),s.jsx(J,{size:"lg",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:s.jsx(Ue,{to:"/impact",className:"cursor-pointer",children:"Découvrir mon impact"})})]})})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-primary to-secondary",children:s.jsxs("div",{className:"container mx-auto text-center",children:[s.jsx(sh,{className:"w-12 h-12 sm:w-16 sm:h-16 text-white mx-auto mb-6"}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Rejoignez la communauté étudiante"}),s.jsx("p",{className:"text-base sm:text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Plus de 10 000 étudiants font déjà confiance à StudyMarket pour leurs achats, ventes et échanges. Rejoignez une communauté sûre, vérifiée et solidaire."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(J,{size:"lg",variant:"secondary",asChild:!0,children:s.jsxs(Ue,{to:"/auth",children:[s.jsx(zt,{className:"w-4 h-4 mr-2"}),"Inscription vérifiée"]})}),s.jsx(J,{size:"lg",variant:"outline",className:"border-white text-white bg-transparent hover:bg-white hover:text-primary",asChild:!0,children:s.jsx(Ue,{to:"/listings",children:"Commencer à explorer"})})]})]})})]})};function Tm(t,[e,n]){return Math.min(n,Math.max(e,t))}function Uy(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var _D=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Yte="VisuallyHidden",Qte=x.forwardRef((t,e)=>s.jsx(Ze.span,{...t,ref:e,style:{..._D,...t.style}}));Qte.displayName=Yte;var Xte=[" ","Enter","ArrowUp","ArrowDown"],Jte=[" ","Enter"],Fc="Select",[$y,By,ene]=rp(Fc),[ph,Hue]=Sr(Fc,[ene,uh]),qy=uh(),[tne,Ol]=ph(Fc),[nne,rne]=ph(Fc),wD=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:c,onValueChange:u,dir:d,name:f,autoComplete:p,disabled:g,required:_,form:N}=t,b=qy(e),[S,w]=x.useState(null),[y,E]=x.useState(null),[I,O]=x.useState(!1),q=Qc(d),[R,V]=Os({prop:r,defaultProp:i??!1,onChange:a,caller:Fc}),[U,k]=Os({prop:o,defaultProp:c,onChange:u,caller:Fc}),F=x.useRef(null),D=S?N||!!S.closest("form"):!0,[P,H]=x.useState(new Set),te=Array.from(P).map(Z=>Z.props.value).join(";");return s.jsx(hN,{...b,children:s.jsxs(tne,{required:_,scope:e,trigger:S,onTriggerChange:w,valueNode:y,onValueNodeChange:E,valueNodeHasChildren:I,onValueNodeHasChildrenChange:O,contentId:As(),value:U,onValueChange:k,open:R,onOpenChange:V,dir:q,triggerPointerDownPosRef:F,disabled:g,children:[s.jsx($y.Provider,{scope:e,children:s.jsx(nne,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(Z=>{H(K=>new Set(K).add(Z))},[]),onNativeOptionRemove:x.useCallback(Z=>{H(K=>{const A=new Set(K);return A.delete(Z),A})},[]),children:n})}),D?s.jsxs(WD,{"aria-hidden":!0,required:_,tabIndex:-1,name:f,autoComplete:p,value:U,onChange:Z=>k(Z.target.value),disabled:g,form:N,children:[U===void 0?s.jsx("option",{value:""}):null,Array.from(P)]},te):null]})})};wD.displayName=Fc;var bD="SelectTrigger",jD=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,a=qy(n),o=Ol(bD,n),c=o.disabled||r,u=ht(e,o.onTriggerChange),d=By(n),f=x.useRef("touch"),[p,g,_]=GD(b=>{const S=d().filter(E=>!E.disabled),w=S.find(E=>E.value===o.value),y=KD(S,b,w);y!==void 0&&o.onValueChange(y.value)}),N=b=>{c||(o.onOpenChange(!0),_()),b&&(o.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return s.jsx(Iy,{asChild:!0,...a,children:s.jsx(Ze.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":HD(o.value)?"":void 0,...i,ref:u,onClick:Le(i.onClick,b=>{b.currentTarget.focus(),f.current!=="mouse"&&N(b)}),onPointerDown:Le(i.onPointerDown,b=>{f.current=b.pointerType;const S=b.target;S.hasPointerCapture(b.pointerId)&&S.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(N(b),b.preventDefault())}),onKeyDown:Le(i.onKeyDown,b=>{const S=p.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&g(b.key),!(S&&b.key===" ")&&Xte.includes(b.key)&&(N(),b.preventDefault())})})})});jD.displayName=bD;var ND="SelectValue",SD=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...c}=t,u=Ol(ND,n),{onValueNodeHasChildrenChange:d}=u,f=a!==void 0,p=ht(e,u.onValueNodeChange);return Bn(()=>{d(f)},[d,f]),s.jsx(Ze.span,{...c,ref:p,style:{pointerEvents:"none"},children:HD(u.value)?s.jsx(s.Fragment,{children:o}):a})});SD.displayName=ND;var sne="SelectIcon",ED=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return s.jsx(Ze.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});ED.displayName=sne;var ine="SelectPortal",CD=t=>s.jsx(op,{asChild:!0,...t});CD.displayName=ine;var Vc="SelectContent",kD=x.forwardRef((t,e)=>{const n=Ol(Vc,t.__scopeSelect),[r,i]=x.useState();if(Bn(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?Xd.createPortal(s.jsx(TD,{scope:t.__scopeSelect,children:s.jsx($y.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),a):null}return s.jsx(PD,{...t,ref:e})});kD.displayName=Vc;var gi=10,[TD,Dl]=ph(Vc),ane="SelectContentImpl",one=wl("SelectContent.RemoveScroll"),PD=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:c,sideOffset:u,align:d,alignOffset:f,arrowPadding:p,collisionBoundary:g,collisionPadding:_,sticky:N,hideWhenDetached:b,avoidCollisions:S,...w}=t,y=Ol(Vc,n),[E,I]=x.useState(null),[O,q]=x.useState(null),R=ht(e,Se=>I(Se)),[V,U]=x.useState(null),[k,F]=x.useState(null),D=By(n),[P,H]=x.useState(!1),te=x.useRef(!1);x.useEffect(()=>{if(E)return Ry(E)},[E]),Ey();const Z=x.useCallback(Se=>{const[re,...ee]=D().map(oe=>oe.ref.current),[ne]=ee.slice(-1),Y=document.activeElement;for(const oe of Se)if(oe===Y||(oe==null||oe.scrollIntoView({block:"nearest"}),oe===re&&O&&(O.scrollTop=0),oe===ne&&O&&(O.scrollTop=O.scrollHeight),oe==null||oe.focus(),document.activeElement!==Y))return},[D,O]),K=x.useCallback(()=>Z([V,E]),[Z,V,E]);x.useEffect(()=>{P&&K()},[P,K]);const{onOpenChange:A,triggerPointerDownPosRef:z}=y;x.useEffect(()=>{if(E){let Se={x:0,y:0};const re=ne=>{var Y,oe;Se={x:Math.abs(Math.round(ne.pageX)-(((Y=z.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((oe=z.current)==null?void 0:oe.y)??0))}},ee=ne=>{Se.x<=10&&Se.y<=10?ne.preventDefault():E.contains(ne.target)||A(!1),document.removeEventListener("pointermove",re),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",ee,{capture:!0})}}},[E,A,z]),x.useEffect(()=>{const Se=()=>A(!1);return window.addEventListener("blur",Se),window.addEventListener("resize",Se),()=>{window.removeEventListener("blur",Se),window.removeEventListener("resize",Se)}},[A]);const[B,X]=GD(Se=>{const re=D().filter(Y=>!Y.disabled),ee=re.find(Y=>Y.ref.current===document.activeElement),ne=KD(re,Se,ee);ne&&setTimeout(()=>ne.ref.current.focus())}),de=x.useCallback((Se,re,ee)=>{const ne=!te.current&&!ee;(y.value!==void 0&&y.value===re||ne)&&(U(Se),ne&&(te.current=!0))},[y.value]),ve=x.useCallback(()=>E==null?void 0:E.focus(),[E]),be=x.useCallback((Se,re,ee)=>{const ne=!te.current&&!ee;(y.value!==void 0&&y.value===re||ne)&&F(Se)},[y.value]),Ee=r==="popper"?vb:ID,Oe=Ee===vb?{side:c,sideOffset:u,align:d,alignOffset:f,arrowPadding:p,collisionBoundary:g,collisionPadding:_,sticky:N,hideWhenDetached:b,avoidCollisions:S}:{};return s.jsx(TD,{scope:n,content:E,viewport:O,onViewportChange:q,itemRefCallback:de,selectedItem:V,onItemLeave:ve,itemTextRefCallback:be,focusSelectedItem:K,selectedItemText:k,position:r,isPositioned:P,searchRef:B,children:s.jsx(cp,{as:one,allowPinchZoom:!0,children:s.jsx(ip,{asChild:!0,trapped:y.open,onMountAutoFocus:Se=>{Se.preventDefault()},onUnmountAutoFocus:Le(i,Se=>{var re;(re=y.trigger)==null||re.focus({preventScroll:!0}),Se.preventDefault()}),children:s.jsx(sp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Se=>Se.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(Ee,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Se=>Se.preventDefault(),...w,...Oe,onPlaced:()=>H(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Le(w.onKeyDown,Se=>{const re=Se.ctrlKey||Se.altKey||Se.metaKey;if(Se.key==="Tab"&&Se.preventDefault(),!re&&Se.key.length===1&&X(Se.key),["ArrowUp","ArrowDown","Home","End"].includes(Se.key)){let ne=D().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(Se.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(Se.key)){const Y=Se.target,oe=ne.indexOf(Y);ne=ne.slice(oe+1)}setTimeout(()=>Z(ne)),Se.preventDefault()}})})})})})})});PD.displayName=ane;var lne="SelectItemAlignedPosition",ID=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,a=Ol(Vc,n),o=Dl(Vc,n),[c,u]=x.useState(null),[d,f]=x.useState(null),p=ht(e,R=>f(R)),g=By(n),_=x.useRef(!1),N=x.useRef(!0),{viewport:b,selectedItem:S,selectedItemText:w,focusSelectedItem:y}=o,E=x.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&d&&b&&S&&w){const R=a.trigger.getBoundingClientRect(),V=d.getBoundingClientRect(),U=a.valueNode.getBoundingClientRect(),k=w.getBoundingClientRect();if(a.dir!=="rtl"){const Y=k.left-V.left,oe=U.left-Y,pe=R.left-oe,Te=R.width+pe,we=Math.max(Te,V.width),se=window.innerWidth-gi,_e=Tm(oe,[gi,Math.max(gi,se-we)]);c.style.minWidth=Te+"px",c.style.left=_e+"px"}else{const Y=V.right-k.right,oe=window.innerWidth-U.right-Y,pe=window.innerWidth-R.right-oe,Te=R.width+pe,we=Math.max(Te,V.width),se=window.innerWidth-gi,_e=Tm(oe,[gi,Math.max(gi,se-we)]);c.style.minWidth=Te+"px",c.style.right=_e+"px"}const F=g(),D=window.innerHeight-gi*2,P=b.scrollHeight,H=window.getComputedStyle(d),te=parseInt(H.borderTopWidth,10),Z=parseInt(H.paddingTop,10),K=parseInt(H.borderBottomWidth,10),A=parseInt(H.paddingBottom,10),z=te+Z+P+A+K,B=Math.min(S.offsetHeight*5,z),X=window.getComputedStyle(b),de=parseInt(X.paddingTop,10),ve=parseInt(X.paddingBottom,10),be=R.top+R.height/2-gi,Ee=D-be,Oe=S.offsetHeight/2,Se=S.offsetTop+Oe,re=te+Z+Se,ee=z-re;if(re<=be){const Y=F.length>0&&S===F[F.length-1].ref.current;c.style.bottom="0px";const oe=d.clientHeight-b.offsetTop-b.offsetHeight,pe=Math.max(Ee,Oe+(Y?ve:0)+oe+K),Te=re+pe;c.style.height=Te+"px"}else{const Y=F.length>0&&S===F[0].ref.current;c.style.top="0px";const pe=Math.max(be,te+b.offsetTop+(Y?de:0)+Oe)+ee;c.style.height=pe+"px",b.scrollTop=re-be+b.offsetTop}c.style.margin=`${gi}px 0`,c.style.minHeight=B+"px",c.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>_.current=!0)}},[g,a.trigger,a.valueNode,c,d,b,S,w,a.dir,r]);Bn(()=>E(),[E]);const[I,O]=x.useState();Bn(()=>{d&&O(window.getComputedStyle(d).zIndex)},[d]);const q=x.useCallback(R=>{R&&N.current===!0&&(E(),y==null||y(),N.current=!1)},[E,y]);return s.jsx(une,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:_,onScrollButtonChange:q,children:s.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:s.jsx(Ze.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});ID.displayName=lne;var cne="SelectPopperPosition",vb=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=gi,...a}=t,o=qy(n);return s.jsx(fN,{...o,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vb.displayName=cne;var[une,TN]=ph(Vc,{}),xb="SelectViewport",AD=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,a=Dl(xb,n),o=TN(xb,n),c=ht(e,a.onViewportChange),u=x.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx($y.Slot,{scope:n,children:s.jsx(Ze.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Le(i.onScroll,d=>{const f=d.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:g}=o;if(g!=null&&g.current&&p){const _=Math.abs(u.current-f.scrollTop);if(_>0){const N=window.innerHeight-gi*2,b=parseFloat(p.style.minHeight),S=parseFloat(p.style.height),w=Math.max(b,S);if(w<N){const y=w+_,E=Math.min(N,y),I=y-E;p.style.height=E+"px",p.style.bottom==="0px"&&(f.scrollTop=I>0?I:0,p.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});AD.displayName=xb;var RD="SelectGroup",[dne,hne]=ph(RD),fne=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=As();return s.jsx(dne,{scope:n,id:i,children:s.jsx(Ze.div,{role:"group","aria-labelledby":i,...r,ref:e})})});fne.displayName=RD;var MD="SelectLabel",OD=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=hne(MD,n);return s.jsx(Ze.div,{id:i.id,...r,ref:e})});OD.displayName=MD;var fx="SelectItem",[mne,DD]=ph(fx),LD=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=t,c=Ol(fx,n),u=Dl(fx,n),d=c.value===r,[f,p]=x.useState(a??""),[g,_]=x.useState(!1),N=ht(e,y=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,y,r,i)}),b=As(),S=x.useRef("touch"),w=()=>{i||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(mne,{scope:n,value:r,disabled:i,textId:b,isSelected:d,onItemTextChange:x.useCallback(y=>{p(E=>E||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx($y.ItemSlot,{scope:n,value:r,disabled:i,textValue:f,children:s.jsx(Ze.div,{role:"option","aria-labelledby":b,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:N,onFocus:Le(o.onFocus,()=>_(!0)),onBlur:Le(o.onBlur,()=>_(!1)),onClick:Le(o.onClick,()=>{S.current!=="mouse"&&w()}),onPointerUp:Le(o.onPointerUp,()=>{S.current==="mouse"&&w()}),onPointerDown:Le(o.onPointerDown,y=>{S.current=y.pointerType}),onPointerMove:Le(o.onPointerMove,y=>{var E;S.current=y.pointerType,i?(E=u.onItemLeave)==null||E.call(u):S.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Le(o.onPointerLeave,y=>{var E;y.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:Le(o.onKeyDown,y=>{var I;((I=u.searchRef)==null?void 0:I.current)!==""&&y.key===" "||(Jte.includes(y.key)&&w(),y.key===" "&&y.preventDefault())})})})})});LD.displayName=fx;var Nf="SelectItemText",FD=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...a}=t,o=Ol(Nf,n),c=Dl(Nf,n),u=DD(Nf,n),d=rne(Nf,n),[f,p]=x.useState(null),g=ht(e,w=>p(w),u.onItemTextChange,w=>{var y;return(y=c.itemTextRefCallback)==null?void 0:y.call(c,w,u.value,u.disabled)}),_=f==null?void 0:f.textContent,N=x.useMemo(()=>s.jsx("option",{value:u.value,disabled:u.disabled,children:_},u.value),[u.disabled,u.value,_]),{onNativeOptionAdd:b,onNativeOptionRemove:S}=d;return Bn(()=>(b(N),()=>S(N)),[b,S,N]),s.jsxs(s.Fragment,{children:[s.jsx(Ze.span,{id:u.textId,...a,ref:g}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Xd.createPortal(a.children,o.valueNode):null]})});FD.displayName=Nf;var VD="SelectItemIndicator",zD=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return DD(VD,n).isSelected?s.jsx(Ze.span,{"aria-hidden":!0,...r,ref:e}):null});zD.displayName=VD;var yb="SelectScrollUpButton",UD=x.forwardRef((t,e)=>{const n=Dl(yb,t.__scopeSelect),r=TN(yb,t.__scopeSelect),[i,a]=x.useState(!1),o=ht(e,r.onScrollButtonChange);return Bn(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=u.scrollTop>0;a(d)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?s.jsx(BD,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});UD.displayName=yb;var _b="SelectScrollDownButton",$D=x.forwardRef((t,e)=>{const n=Dl(_b,t.__scopeSelect),r=TN(_b,t.__scopeSelect),[i,a]=x.useState(!1),o=ht(e,r.onScrollButtonChange);return Bn(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<d;a(f)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?s.jsx(BD,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});$D.displayName=_b;var BD=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,a=Dl("SelectScrollButton",n),o=x.useRef(null),c=By(n),u=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>u(),[u]),Bn(()=>{var f;const d=c().find(p=>p.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[c]),s.jsx(Ze.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Le(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Le(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Le(i.onPointerLeave,()=>{u()})})}),pne="SelectSeparator",qD=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return s.jsx(Ze.div,{"aria-hidden":!0,...r,ref:e})});qD.displayName=pne;var wb="SelectArrow",gne=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=qy(n),a=Ol(wb,n),o=Dl(wb,n);return a.open&&o.position==="popper"?s.jsx(mN,{...i,...r,ref:e}):null});gne.displayName=wb;var vne="SelectBubbleInput",WD=x.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=x.useRef(null),a=ht(r,i),o=Uy(e);return x.useEffect(()=>{const c=i.current;if(!c)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&f){const p=new Event("change",{bubbles:!0});f.call(c,e),c.dispatchEvent(p)}},[o,e]),s.jsx(Ze.select,{...n,style:{..._D,...n.style},ref:a,defaultValue:e})});WD.displayName=vne;function HD(t){return t===""||t===void 0}function GD(t){const e=mr(t),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(o=>{const c=n.current+o;e(c),function u(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(c)},[e]),a=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function KD(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=xne(t,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function xne(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var yne=wD,ZD=jD,_ne=SD,wne=ED,bne=CD,YD=kD,jne=AD,QD=OD,XD=LD,Nne=FD,Sne=zD,JD=UD,eL=$D,tL=qD;const tn=yne,nn=_ne,Ht=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(ZD,{ref:r,className:st("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,s.jsx(wne,{asChild:!0,children:s.jsx(PX,{className:"h-4 w-4 opacity-50"})})]}));Ht.displayName=ZD.displayName;const nL=x.forwardRef(({className:t,...e},n)=>s.jsx(JD,{ref:n,className:st("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(LX,{})}));nL.displayName=JD.displayName;const rL=x.forwardRef(({className:t,...e},n)=>s.jsx(eL,{ref:n,className:st("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx($O,{})}));rL.displayName=eL.displayName;const Gt=x.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>s.jsx(bne,{children:s.jsxs(YD,{ref:i,className:st("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[s.jsx(nL,{}),s.jsx(jne,{className:st("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(rL,{})]})}));Gt.displayName=YD.displayName;const Ene=x.forwardRef(({className:t,...e},n)=>s.jsx(QD,{ref:n,className:st("px-2 py-1.5 text-sm font-semibold",t),...e}));Ene.displayName=QD.displayName;const Ke=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(XD,{ref:r,className:st("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Sne,{children:s.jsx(bN,{className:"h-4 w-4"})})}),s.jsx(Nne,{children:e})]}));Ke.displayName=XD.displayName;const Cne=x.forwardRef(({className:t,...e},n)=>s.jsx(tL,{ref:n,className:st("-mx-1 my-1 h-px bg-muted",t),...e}));Cne.displayName=tL.displayName;var kne="Separator",_k="horizontal",Tne=["horizontal","vertical"],sL=x.forwardRef((t,e)=>{const{decorative:n,orientation:r=_k,...i}=t,a=Pne(r)?r:_k,c=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(Ze.div,{"data-orientation":a,...c,...i,ref:e})});sL.displayName=kne;function Pne(t){return Tne.includes(t)}var iL=sL;const Zs=x.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>s.jsx(iL,{ref:i,decorative:n,orientation:e,className:st("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Zs.displayName=iL.displayName;const w_=[{value:"all",label:"Toutes catégories",icon:null},{value:"electronics",label:"Électronique",icon:Yc},{value:"vehicles",label:"Véhicules",icon:G4},{value:"real-estate",label:"Immobilier",icon:nx},{value:"fashion",label:"Mode",icon:tN},{value:"gaming",label:"Jeux & Jouets",icon:$G},{value:"baby",label:"Bébé & Enfant",icon:IG},{value:"business",label:"Équipement Pro",icon:W4}],Ine=[{value:"new",label:"Neuf"},{value:"like-new",label:"Comme neuf"},{value:"good",label:"Bon état"},{value:"fair",label:"État correct"},{value:"poor",label:"Mauvais état"}],Ane=[{value:"relevance",label:"Pertinence"},{value:"date",label:"Plus récent"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix décroissant"}],Rne=()=>{var w;const[t,e]=U1(),{listings:n,loading:r,hasMore:i,fetchListings:a,searchListings:o}=hp(),[c,u]=x.useState({query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"}),[d,f]=x.useState("grid"),[p,g]=x.useState(!1);x.useEffect(()=>{const y={query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"};u(y),o(y)},[t,o]);const _=()=>{const y={...c};o(y);const E=new URLSearchParams;y.query&&E.set("q",y.query),y.category&&E.set("category",y.category),e(E)},N=(y,E)=>{const I={...c,[y]:E};u(I)},b=()=>{a(c,!1)},S=()=>{const y={query:"",sortBy:"date"};u(y),o(y),e({})};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Toutes les annonces"}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{type:"text",placeholder:"Rechercher des articles...",value:c.query||"",onChange:y=>N("query",y.target.value),onKeyPress:y=>y.key==="Enter"&&_(),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{onClick:_,className:"whitespace-nowrap",children:[s.jsx(_r,{className:"w-4 h-4 mr-2"}),"Rechercher"]}),s.jsxs(J,{variant:"outline",onClick:()=>g(!p),className:"lg:hidden",children:[s.jsx(_y,{className:"w-4 h-4 mr-2"}),"Filtres"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:w_.slice(1,6).map(y=>{const E=y.icon;return s.jsxs(J,{variant:c.category===y.value?"default":"outline",size:"sm",onClick:()=>N("category",c.category===y.value?"":y.value),className:"flex items-center gap-2",children:[E&&s.jsx(E,{className:"w-4 h-4"}),y.label]},y.value)})})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsx("aside",{className:`lg:w-80 space-y-6 ${p?"block":"hidden lg:block"}`,children:s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Filtres"}),s.jsx(J,{variant:"ghost",size:"sm",onClick:S,children:"Effacer"})]})}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Catégorie"}),s.jsxs(tn,{value:c.category||"all",onValueChange:y=>N("category",y==="all"?"":y),children:[s.jsx(Ht,{children:s.jsx(nn,{})}),s.jsx(Gt,{children:w_.map(y=>{const E=y.icon;return s.jsx(Ke,{value:y.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[E&&s.jsx(E,{className:"w-4 h-4"}),y.label]})},y.value)})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Prix"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ge,{type:"number",placeholder:"Min",value:c.minPrice||"",onChange:y=>N("minPrice",y.target.value?parseInt(y.target.value):void 0)}),s.jsx(Ge,{type:"number",placeholder:"Max",value:c.maxPrice||"",onChange:y=>N("maxPrice",y.target.value?parseInt(y.target.value):void 0)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"État"}),s.jsx("div",{className:"space-y-2",children:Ine.map(y=>{var E;return s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:((E=c.condition)==null?void 0:E.includes(y.value))||!1,onChange:I=>{const O=c.condition||[],q=I.target.checked?[...O,y.value]:O.filter(R=>R!==y.value);N("condition",q.length>0?q:void 0)},className:"rounded border-border"}),s.jsx("span",{className:"text-sm",children:y.label})]},y.value)})})]}),s.jsx(J,{onClick:_,className:"w-full",children:"Appliquer les filtres"})]})]})}),s.jsxs("main",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-muted-foreground",children:[n.length," résultat(s)"]}),(c.query||c.category||c.minPrice||c.maxPrice)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtres actifs:"}),c.query&&s.jsxs(at,{variant:"secondary",children:['"',c.query,'"']}),c.category&&s.jsx(at,{variant:"secondary",children:(w=w_.find(y=>y.value===c.category))==null?void 0:w.label})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(tn,{value:c.sortBy||"date",onValueChange:y=>N("sortBy",y),children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{})}),s.jsx(Gt,{children:Ane.map(y=>s.jsx(Ke,{value:y.value,children:y.label},y.value))})]}),s.jsx(Zs,{orientation:"vertical",className:"h-6"}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx(J,{variant:d==="grid"?"default":"ghost",size:"icon",onClick:()=>f("grid"),className:"rounded-none w-15 h-15",title:"Vue en grille",children:s.jsx(Q4,{className:"w-4 h-4"})}),s.jsx(J,{variant:d==="list"?"default":"ghost",size:"icon",onClick:()=>f("list"),className:"rounded-none w-15 h-15",title:"Vue en liste",children:s.jsx(eM,{className:"w-4 h-4"})})]})]})]}),r&&n.length===0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((y,E)=>s.jsxs(fe,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(me,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},E))}):n.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`grid gap-6 ${d==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:n.map(y=>s.jsx(km,{listing:y},y.id))}),i&&s.jsx("div",{className:"text-center mt-8",children:s.jsx(J,{onClick:b,disabled:r,variant:"outline",size:"lg",children:r?"Chargement...":"Charger plus"})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos critères de recherche"}),s.jsx(J,{onClick:S,variant:"outline",children:"Effacer les filtres"})]})]})]})]})};var Wy="Dialog",[aL,Gue]=Sr(Wy),[Mne,Di]=aL(Wy),oL=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,c=x.useRef(null),u=x.useRef(null),[d,f]=Os({prop:r,defaultProp:i??!1,onChange:a,caller:Wy});return s.jsx(Mne,{scope:e,triggerRef:c,contentRef:u,contentId:As(),titleId:As(),descriptionId:As(),open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(p=>!p),[f]),modal:o,children:n})};oL.displayName=Wy;var lL="DialogTrigger",cL=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(lL,n),a=ht(e,i.triggerRef);return s.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":AN(i.open),...r,ref:a,onClick:Le(t.onClick,i.onOpenToggle)})});cL.displayName=lL;var PN="DialogPortal",[One,uL]=aL(PN,{forceMount:void 0}),dL=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,a=Di(PN,e);return s.jsx(One,{scope:e,forceMount:n,children:x.Children.map(r,o=>s.jsx(Er,{present:n||a.open,children:s.jsx(op,{asChild:!0,container:i,children:o})}))})};dL.displayName=PN;var mx="DialogOverlay",hL=x.forwardRef((t,e)=>{const n=uL(mx,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=Di(mx,t.__scopeDialog);return a.modal?s.jsx(Er,{present:r||a.open,children:s.jsx(Lne,{...i,ref:e})}):null});hL.displayName=mx;var Dne=wl("DialogOverlay.RemoveScroll"),Lne=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(mx,n);return s.jsx(cp,{as:Dne,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(Ze.div,{"data-state":AN(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),zc="DialogContent",fL=x.forwardRef((t,e)=>{const n=uL(zc,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=Di(zc,t.__scopeDialog);return s.jsx(Er,{present:r||a.open,children:a.modal?s.jsx(Fne,{...i,ref:e}):s.jsx(Vne,{...i,ref:e})})});fL.displayName=zc;var Fne=x.forwardRef((t,e)=>{const n=Di(zc,t.__scopeDialog),r=x.useRef(null),i=ht(e,n.contentRef,r);return x.useEffect(()=>{const a=r.current;if(a)return Ry(a)},[]),s.jsx(mL,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Le(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Le(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&a.preventDefault()}),onFocusOutside:Le(t.onFocusOutside,a=>a.preventDefault())})}),Vne=x.forwardRef((t,e)=>{const n=Di(zc,t.__scopeDialog),r=x.useRef(!1),i=x.useRef(!1);return s.jsx(mL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,c;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),mL=x.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,c=Di(zc,n),u=x.useRef(null),d=ht(e,u);return Ey(),s.jsxs(s.Fragment,{children:[s.jsx(ip,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(sp,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":AN(c.open),...o,ref:d,onDismiss:()=>c.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(zne,{titleId:c.titleId}),s.jsx($ne,{contentRef:u,descriptionId:c.descriptionId})]})]})}),IN="DialogTitle",pL=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(IN,n);return s.jsx(Ze.h2,{id:i.titleId,...r,ref:e})});pL.displayName=IN;var gL="DialogDescription",vL=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(gL,n);return s.jsx(Ze.p,{id:i.descriptionId,...r,ref:e})});vL.displayName=gL;var xL="DialogClose",yL=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(xL,n);return s.jsx(Ze.button,{type:"button",...r,ref:e,onClick:Le(t.onClick,()=>i.onOpenChange(!1))})});yL.displayName=xL;function AN(t){return t?"open":"closed"}var _L="DialogTitleWarning",[Kue,wL]=WK(_L,{contentName:zc,titleName:IN,docsSlug:"dialog"}),zne=({titleId:t})=>{const e=wL(_L),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Une="DialogDescriptionWarning",$ne=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wL(Une).contentName}}.`;return x.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Bne=oL,qne=cL,Wne=dL,bL=hL,jL=fL,NL=pL,SL=vL,Hne=yL;const da=Bne,md=qne,Gne=Wne,EL=x.forwardRef(({className:t,...e},n)=>s.jsx(bL,{ref:n,className:st("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));EL.displayName=bL.displayName;const Ci=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(Gne,{children:[s.jsx(EL,{}),s.jsxs(jL,{ref:r,className:st("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,s.jsxs(Hne,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(VX,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ci.displayName=jL.displayName;const ha=({className:t,...e})=>s.jsx("div",{className:st("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ha.displayName="DialogHeader";const sv=({className:t,...e})=>s.jsx("div",{className:st("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});sv.displayName="DialogFooter";const ki=x.forwardRef(({className:t,...e},n)=>s.jsx(NL,{ref:n,className:st("text-lg font-semibold leading-none tracking-tight",t),...e}));ki.displayName=NL.displayName;const yc=x.forwardRef(({className:t,...e},n)=>s.jsx(SL,{ref:n,className:st("text-sm text-muted-foreground",t),...e}));yc.displayName=SL.displayName;const ri=x.forwardRef(({className:t,...e},n)=>s.jsx("textarea",{className:st("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));ri.displayName="Textarea";var Kne="Label",CL=x.forwardRef((t,e)=>s.jsx(Ze.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));CL.displayName=Kne;var kL=CL;const Zne=Sy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Re=x.forwardRef(({className:t,...e},n)=>s.jsx(kL,{ref:n,className:st(Zne(),t),...e}));Re.displayName=kL.displayName;const Yne=Sy("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$t=x.forwardRef(({className:t,variant:e,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:st(Yne({variant:e}),t),...n}));$t.displayName="Alert";const Qne=x.forwardRef(({className:t,...e},n)=>s.jsx("h5",{ref:n,className:st("mb-1 font-medium leading-none tracking-tight",t),...e}));Qne.displayName="AlertTitle";const Bt=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("text-sm [&_p]:leading-relaxed",t),...e}));Bt.displayName="AlertDescription";var dt=function(){return dt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dt.apply(this,arguments)};function Xne(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function TL(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function fp(t){return t.mode==="multiple"}function mp(t){return t.mode==="range"}function Hy(t){return t.mode==="single"}var Jne={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function ere(t,e){return or(t,"LLLL y",e)}function tre(t,e){return or(t,"d",e)}function nre(t,e){return or(t,"LLLL",e)}function rre(t){return"".concat(t)}function sre(t,e){return or(t,"cccccc",e)}function ire(t,e){return or(t,"yyyy",e)}var are=Object.freeze({__proto__:null,formatCaption:ere,formatDay:tre,formatMonthCaption:nre,formatWeekNumber:rre,formatWeekdayName:sre,formatYearCaption:ire}),ore=function(t,e,n){return or(t,"do MMMM (EEEE)",n)},lre=function(){return"Month: "},cre=function(){return"Go to next month"},ure=function(){return"Go to previous month"},dre=function(t,e){return or(t,"cccc",e)},hre=function(t){return"Week n. ".concat(t)},fre=function(){return"Year: "},mre=Object.freeze({__proto__:null,labelDay:ore,labelMonthDropdown:lre,labelNext:cre,labelPrevious:ure,labelWeekNumber:hre,labelWeekday:dre,labelYearDropdown:fre});function pre(){var t="buttons",e=Jne,n=CN,r={},i={},a=1,o={},c=new Date;return{captionLayout:t,classNames:e,formatters:are,labels:mre,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:a,styles:o,today:c,mode:"default"}}function gre(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,a=t.fromDate,o=t.toDate;return r?a=xs(r):e&&(a=new Date(e,0,1)),i?o=zy(i):n&&(o=new Date(n,11,31)),{fromDate:a?Ld(a):void 0,toDate:o?Ld(o):void 0}}var PL=x.createContext(void 0);function vre(t){var e,n=t.initialProps,r=pre(),i=gre(n),a=i.fromDate,o=i.toDate,c=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;c!=="buttons"&&(!a||!o)&&(c="buttons");var u;(Hy(n)||fp(n)||mp(n))&&(u=n.onSelect);var d=dt(dt(dt({},r),n),{captionLayout:c,classNames:dt(dt({},r.classNames),n.classNames),components:dt({},n.components),formatters:dt(dt({},r.formatters),n.formatters),fromDate:a,labels:dt(dt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:dt(dt({},r.modifiers),n.modifiers),modifiersClassNames:dt(dt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:u,styles:dt(dt({},r.styles),n.styles),toDate:o});return s.jsx(PL.Provider,{value:d,children:t.children})}function cn(){var t=x.useContext(PL);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function IL(t){var e=cn(),n=e.locale,r=e.classNames,i=e.styles,a=e.formatters.formatCaption;return s.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function xre(t){return s.jsx("svg",dt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function AL(t){var e,n,r=t.onChange,i=t.value,a=t.children,o=t.caption,c=t.className,u=t.style,d=cn(),f=(n=(e=d.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:xre;return s.jsxs("div",{className:c,style:u,children:[s.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),s.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:i,onChange:r,children:a}),s.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(f,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function yre(t){var e,n=cn(),r=n.fromDate,i=n.toDate,a=n.styles,o=n.locale,c=n.formatters.formatMonthCaption,u=n.classNames,d=n.components,f=n.labels.labelMonthDropdown;if(!r)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});var p=[];if(Zee(r,i))for(var g=xs(r),_=r.getMonth();_<=i.getMonth();_++)p.push(__(g,_));else for(var g=xs(new Date),_=0;_<=11;_++)p.push(__(g,_));var N=function(S){var w=Number(S.target.value),y=__(xs(t.displayMonth),w);t.onChange(y)},b=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:AL;return s.jsx(b,{name:"months","aria-label":f(),className:u.dropdown_month,style:a.dropdown_month,onChange:N,value:t.displayMonth.getMonth(),caption:c(t.displayMonth,{locale:o}),children:p.map(function(S){return s.jsx("option",{value:S.getMonth(),children:c(S,{locale:o})},S.getMonth())})})}function _re(t){var e,n=t.displayMonth,r=cn(),i=r.fromDate,a=r.toDate,o=r.locale,c=r.styles,u=r.classNames,d=r.components,f=r.formatters.formatYearCaption,p=r.labels.labelYearDropdown,g=[];if(!i)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});for(var _=i.getFullYear(),N=a.getFullYear(),b=_;b<=N;b++)g.push(vk(uD(new Date),b));var S=function(y){var E=vk(xs(n),Number(y.target.value));t.onChange(E)},w=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:AL;return s.jsx(w,{name:"years","aria-label":p(),className:u.dropdown_year,style:c.dropdown_year,onChange:S,value:n.getFullYear(),caption:f(n,{locale:o}),children:g.map(function(y){return s.jsx("option",{value:y.getFullYear(),children:f(y,{locale:o})},y.getFullYear())})})}function wre(t,e){var n=x.useState(t),r=n[0],i=n[1],a=e===void 0?r:e;return[a,i]}function bre(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,a=t.toDate,o=t.fromDate,c=t.numberOfMonths,u=c===void 0?1:c;if(a&&Vd(a,i)<0){var d=-1*(u-1);i=Ri(a,d)}return o&&Vd(i,o)<0&&(i=o),xs(i)}function jre(){var t=cn(),e=bre(t),n=wre(e,t.month),r=n[0],i=n[1],a=function(o){var c;if(!t.disableNavigation){var u=xs(o);i(u),(c=t.onMonthChange)===null||c===void 0||c.call(t,u)}};return[r,a]}function Nre(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=xs(t),a=xs(Ri(i,r)),o=Vd(a,i),c=[],u=0;u<o;u++){var d=Ri(i,u);c.push(d)}return n&&(c=c.reverse()),c}function Sre(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,c=xs(t);if(!n)return Ri(c,o);var u=Vd(n,t);if(!(u<a))return Ri(c,o)}}function Ere(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,c=xs(t);if(!n)return Ri(c,-o);var u=Vd(c,n);if(!(u<=0))return Ri(c,-o)}}var RL=x.createContext(void 0);function Cre(t){var e=cn(),n=jre(),r=n[0],i=n[1],a=Nre(r,e),o=Sre(r,e),c=Ere(r,e),u=function(p){return a.some(function(g){return kN(p,g)})},d=function(p,g){u(p)||(g&&vD(p,g)?i(Ri(p,1+e.numberOfMonths*-1)):i(p))},f={currentMonth:r,displayMonths:a,goToMonth:i,goToDate:d,previousMonth:c,nextMonth:o,isDateDisplayed:u};return s.jsx(RL.Provider,{value:f,children:t.children})}function pp(){var t=x.useContext(RL);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function wk(t){var e,n=cn(),r=n.classNames,i=n.styles,a=n.components,o=pp().goToMonth,c=function(f){o(Ri(f,t.displayIndex?-t.displayIndex:0))},u=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:IL,d=s.jsx(u,{id:t.id,displayMonth:t.displayMonth});return s.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[s.jsx("div",{className:r.vhidden,children:d}),s.jsx(yre,{onChange:c,displayMonth:t.displayMonth}),s.jsx(_re,{onChange:c,displayMonth:t.displayMonth})]})}function kre(t){return s.jsx("svg",dt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Tre(t){return s.jsx("svg",dt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var px=x.forwardRef(function(t,e){var n=cn(),r=n.classNames,i=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var o=a.join(" "),c=dt(dt({},i.button_reset),i.button);return t.style&&Object.assign(c,t.style),s.jsx("button",dt({},t,{ref:e,type:"button",className:o,style:c}))});function Pre(t){var e,n,r=cn(),i=r.dir,a=r.locale,o=r.classNames,c=r.styles,u=r.labels,d=u.labelPrevious,f=u.labelNext,p=r.components;if(!t.nextMonth&&!t.previousMonth)return s.jsx(s.Fragment,{});var g=d(t.previousMonth,{locale:a}),_=[o.nav_button,o.nav_button_previous].join(" "),N=f(t.nextMonth,{locale:a}),b=[o.nav_button,o.nav_button_next].join(" "),S=(e=p==null?void 0:p.IconRight)!==null&&e!==void 0?e:Tre,w=(n=p==null?void 0:p.IconLeft)!==null&&n!==void 0?n:kre;return s.jsxs("div",{className:o.nav,style:c.nav,children:[!t.hidePrevious&&s.jsx(px,{name:"previous-month","aria-label":g,className:_,style:c.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?s.jsx(S,{className:o.nav_icon,style:c.nav_icon}):s.jsx(w,{className:o.nav_icon,style:c.nav_icon})}),!t.hideNext&&s.jsx(px,{name:"next-month","aria-label":N,className:b,style:c.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?s.jsx(w,{className:o.nav_icon,style:c.nav_icon}):s.jsx(S,{className:o.nav_icon,style:c.nav_icon})})]})}function bk(t){var e=cn().numberOfMonths,n=pp(),r=n.previousMonth,i=n.nextMonth,a=n.goToMonth,o=n.displayMonths,c=o.findIndex(function(N){return kN(t.displayMonth,N)}),u=c===0,d=c===o.length-1,f=e>1&&(u||!d),p=e>1&&(d||!u),g=function(){r&&a(r)},_=function(){i&&a(i)};return s.jsx(Pre,{displayMonth:t.displayMonth,hideNext:f,hidePrevious:p,nextMonth:i,previousMonth:r,onPreviousClick:g,onNextClick:_})}function Ire(t){var e,n=cn(),r=n.classNames,i=n.disableNavigation,a=n.styles,o=n.captionLayout,c=n.components,u=(e=c==null?void 0:c.CaptionLabel)!==null&&e!==void 0?e:IL,d;return i?d=s.jsx(u,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?d=s.jsx(wk,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?d=s.jsxs(s.Fragment,{children:[s.jsx(wk,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),s.jsx(bk,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=s.jsxs(s.Fragment,{children:[s.jsx(u,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(bk,{displayMonth:t.displayMonth,id:t.id})]}),s.jsx("div",{className:r.caption,style:a.caption,children:d})}function Are(t){var e=cn(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?s.jsx("tfoot",{className:i,style:r.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:n})})}):s.jsx(s.Fragment,{})}function Rre(t,e,n){for(var r=n?Lc(new Date):va(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var o=Gr(r,a);i.push(o)}return i}function Mre(){var t=cn(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,o=t.ISOWeek,c=t.formatters.formatWeekdayName,u=t.labels.labelWeekday,d=Rre(i,a,o);return s.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&s.jsx("td",{style:n.head_cell,className:e.head_cell}),d.map(function(f,p){return s.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":u(f,{locale:i}),children:c(f,{locale:i})},p)})]})}function Ore(){var t,e=cn(),n=e.classNames,r=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:Mre;return s.jsx("thead",{style:r.head,className:n.head,children:s.jsx(a,{})})}function Dre(t){var e=cn(),n=e.locale,r=e.formatters.formatDay;return s.jsx(s.Fragment,{children:r(t.date,{locale:n})})}var RN=x.createContext(void 0);function Lre(t){if(!fp(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return s.jsx(RN.Provider,{value:e,children:t.children})}return s.jsx(Fre,{initialProps:t.initialProps,children:t.children})}function Fre(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,a=e.max,o=function(d,f,p){var g,_;(g=e.onDayClick)===null||g===void 0||g.call(e,d,f,p);var N=!!(f.selected&&i&&(r==null?void 0:r.length)===i);if(!N){var b=!!(!f.selected&&a&&(r==null?void 0:r.length)===a);if(!b){var S=r?TL([],r):[];if(f.selected){var w=S.findIndex(function(y){return fs(d,y)});S.splice(w,1)}else S.push(d);(_=e.onSelect)===null||_===void 0||_.call(e,S,d,f,p)}}},c={disabled:[]};r&&c.disabled.push(function(d){var f=a&&r.length>a-1,p=r.some(function(g){return fs(g,d)});return!!(f&&!p)});var u={selected:r,onDayClick:o,modifiers:c};return s.jsx(RN.Provider,{value:u,children:n})}function MN(){var t=x.useContext(RN);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Vre(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?fs(i,t)&&fs(r,t)?void 0:fs(i,t)?{from:i,to:void 0}:fs(r,t)?void 0:gb(r,t)?{from:t,to:i}:{from:r,to:t}:i?gb(t,i)?{from:i,to:t}:{from:t,to:i}:r?vD(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var ON=x.createContext(void 0);function zre(t){if(!mp(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(ON.Provider,{value:e,children:t.children})}return s.jsx(Ure,{initialProps:t.initialProps,children:t.children})}function Ure(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},a=i.from,o=i.to,c=e.min,u=e.max,d=function(_,N,b){var S,w;(S=e.onDayClick)===null||S===void 0||S.call(e,_,N,b);var y=Vre(_,r);(w=e.onSelect)===null||w===void 0||w.call(e,y,_,N,b)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(f.range_start=[a],o?(f.range_end=[o],fs(a,o)||(f.range_middle=[{after:a,before:o}])):f.range_end=[a]):o&&(f.range_start=[o],f.range_end=[o]),c&&(a&&!o&&f.disabled.push({after:y_(a,c-1),before:Gr(a,c-1)}),a&&o&&f.disabled.push({after:a,before:Gr(a,c-1)}),!a&&o&&f.disabled.push({after:y_(o,c-1),before:Gr(o,c-1)})),u){if(a&&!o&&(f.disabled.push({before:Gr(a,-u+1)}),f.disabled.push({after:Gr(a,u-1)})),a&&o){var p=ta(o,a)+1,g=u-p;f.disabled.push({before:y_(a,g)}),f.disabled.push({after:Gr(o,g)})}!a&&o&&(f.disabled.push({before:Gr(o,-u+1)}),f.disabled.push({after:Gr(o,u-1)}))}return s.jsx(ON.Provider,{value:{selected:r,onDayClick:d,modifiers:f},children:n})}function DN(){var t=x.useContext(ON);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function iv(t){return Array.isArray(t)?TL([],t):t!==void 0?[t]:[]}function $re(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=iv(i)}),e}var Mi;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Mi||(Mi={}));var Bre=Mi.Selected,Da=Mi.Disabled,qre=Mi.Hidden,Wre=Mi.Today,b_=Mi.RangeEnd,j_=Mi.RangeMiddle,N_=Mi.RangeStart,Hre=Mi.Outside;function Gre(t,e,n){var r,i=(r={},r[Bre]=iv(t.selected),r[Da]=iv(t.disabled),r[qre]=iv(t.hidden),r[Wre]=[t.today],r[b_]=[],r[j_]=[],r[N_]=[],r[Hre]=[],r);return t.fromDate&&i[Da].push({before:t.fromDate}),t.toDate&&i[Da].push({after:t.toDate}),fp(t)?i[Da]=i[Da].concat(e.modifiers[Da]):mp(t)&&(i[Da]=i[Da].concat(n.modifiers[Da]),i[N_]=n.modifiers[N_],i[j_]=n.modifiers[j_],i[b_]=n.modifiers[b_]),i}var ML=x.createContext(void 0);function Kre(t){var e=cn(),n=MN(),r=DN(),i=Gre(e,n,r),a=$re(e.modifiers),o=dt(dt({},i),a);return s.jsx(ML.Provider,{value:o,children:t.children})}function OL(){var t=x.useContext(ML);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Zre(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Yre(t){return!!(t&&typeof t=="object"&&"from"in t)}function Qre(t){return!!(t&&typeof t=="object"&&"after"in t)}function Xre(t){return!!(t&&typeof t=="object"&&"before"in t)}function Jre(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function ese(t,e){var n,r=e.from,i=e.to;if(r&&i){var a=ta(i,r)<0;a&&(n=[i,r],r=n[0],i=n[1]);var o=ta(t,r)>=0&&ta(i,t)>=0;return o}return i?fs(i,t):r?fs(r,t):!1}function tse(t){return SN(t)}function nse(t){return Array.isArray(t)&&t.every(SN)}function rse(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(tse(n))return fs(t,n);if(nse(n))return n.includes(t);if(Yre(n))return ese(t,n);if(Jre(n))return n.dayOfWeek.includes(t.getDay());if(Zre(n)){var r=ta(n.before,t),i=ta(n.after,t),a=r>0,o=i<0,c=gb(n.before,n.after);return c?o&&a:a||o}return Qre(n)?ta(t,n.after)>0:Xre(n)?ta(n.before,t)>0:typeof n=="function"?n(t):!1})}function LN(t,e,n){var r=Object.keys(e).reduce(function(a,o){var c=e[o];return rse(t,c)&&a.push(o),a},[]),i={};return r.forEach(function(a){return i[a]=!0}),n&&!kN(t,n)&&(i.outside=!0),i}function sse(t,e){for(var n=xs(t[0]),r=zy(t[t.length-1]),i,a,o=n;o<=r;){var c=LN(o,e),u=!c.disabled&&!c.hidden;if(!u){o=Gr(o,1);continue}if(c.selected)return o;c.today&&!a&&(a=o),i||(i=o),o=Gr(o,1)}return a||i}var ise=365;function DL(t,e){var n=e.moveBy,r=e.direction,i=e.context,a=e.modifiers,o=e.retry,c=o===void 0?{count:0,lastFocused:t}:o,u=i.weekStartsOn,d=i.fromDate,f=i.toDate,p=i.locale,g={day:Gr,week:pb,month:Ri,year:FJ,startOfWeek:function(S){return i.ISOWeek?Lc(S):va(S,{locale:p,weekStartsOn:u})},endOfWeek:function(S){return i.ISOWeek?dD(S):EN(S,{locale:p,weekStartsOn:u})}},_=g[n](t,r==="after"?1:-1);r==="before"&&d?_=VJ([d,_]):r==="after"&&f&&(_=zJ([f,_]));var N=!0;if(a){var b=LN(_,a);N=!b.disabled&&!b.hidden}return N?_:c.count>ise?c.lastFocused:DL(_,{moveBy:n,direction:r,context:i,modifiers:a,retry:dt(dt({},c),{count:c.count+1})})}var LL=x.createContext(void 0);function ase(t){var e=pp(),n=OL(),r=x.useState(),i=r[0],a=r[1],o=x.useState(),c=o[0],u=o[1],d=sse(e.displayMonths,n),f=i??(c&&e.isDateDisplayed(c))?c:d,p=function(){u(i),a(void 0)},g=function(S){a(S)},_=cn(),N=function(S,w){if(i){var y=DL(i,{moveBy:S,direction:w,context:_,modifiers:n});fs(i,y)||(e.goToDate(y,i),g(y))}},b={focusedDay:i,focusTarget:f,blur:p,focus:g,focusDayAfter:function(){return N("day","after")},focusDayBefore:function(){return N("day","before")},focusWeekAfter:function(){return N("week","after")},focusWeekBefore:function(){return N("week","before")},focusMonthBefore:function(){return N("month","before")},focusMonthAfter:function(){return N("month","after")},focusYearBefore:function(){return N("year","before")},focusYearAfter:function(){return N("year","after")},focusStartOfWeek:function(){return N("startOfWeek","before")},focusEndOfWeek:function(){return N("endOfWeek","after")}};return s.jsx(LL.Provider,{value:b,children:t.children})}function FN(){var t=x.useContext(LL);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function ose(t,e){var n=OL(),r=LN(t,n,e);return r}var VN=x.createContext(void 0);function lse(t){if(!Hy(t.initialProps)){var e={selected:void 0};return s.jsx(VN.Provider,{value:e,children:t.children})}return s.jsx(cse,{initialProps:t.initialProps,children:t.children})}function cse(t){var e=t.initialProps,n=t.children,r=function(a,o,c){var u,d,f;if((u=e.onDayClick)===null||u===void 0||u.call(e,a,o,c),o.selected&&!e.required){(d=e.onSelect)===null||d===void 0||d.call(e,void 0,a,o,c);return}(f=e.onSelect)===null||f===void 0||f.call(e,a,a,o,c)},i={selected:e.selected,onDayClick:r};return s.jsx(VN.Provider,{value:i,children:n})}function FL(){var t=x.useContext(VN);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function use(t,e){var n=cn(),r=FL(),i=MN(),a=DN(),o=FN(),c=o.focusDayAfter,u=o.focusDayBefore,d=o.focusWeekAfter,f=o.focusWeekBefore,p=o.blur,g=o.focus,_=o.focusMonthBefore,N=o.focusMonthAfter,b=o.focusYearBefore,S=o.focusYearAfter,w=o.focusStartOfWeek,y=o.focusEndOfWeek,E=function(K){var A,z,B,X;Hy(n)?(A=r.onDayClick)===null||A===void 0||A.call(r,t,e,K):fp(n)?(z=i.onDayClick)===null||z===void 0||z.call(i,t,e,K):mp(n)?(B=a.onDayClick)===null||B===void 0||B.call(a,t,e,K):(X=n.onDayClick)===null||X===void 0||X.call(n,t,e,K)},I=function(K){var A;g(t),(A=n.onDayFocus)===null||A===void 0||A.call(n,t,e,K)},O=function(K){var A;p(),(A=n.onDayBlur)===null||A===void 0||A.call(n,t,e,K)},q=function(K){var A;(A=n.onDayMouseEnter)===null||A===void 0||A.call(n,t,e,K)},R=function(K){var A;(A=n.onDayMouseLeave)===null||A===void 0||A.call(n,t,e,K)},V=function(K){var A;(A=n.onDayPointerEnter)===null||A===void 0||A.call(n,t,e,K)},U=function(K){var A;(A=n.onDayPointerLeave)===null||A===void 0||A.call(n,t,e,K)},k=function(K){var A;(A=n.onDayTouchCancel)===null||A===void 0||A.call(n,t,e,K)},F=function(K){var A;(A=n.onDayTouchEnd)===null||A===void 0||A.call(n,t,e,K)},D=function(K){var A;(A=n.onDayTouchMove)===null||A===void 0||A.call(n,t,e,K)},P=function(K){var A;(A=n.onDayTouchStart)===null||A===void 0||A.call(n,t,e,K)},H=function(K){var A;(A=n.onDayKeyUp)===null||A===void 0||A.call(n,t,e,K)},te=function(K){var A;switch(K.key){case"ArrowLeft":K.preventDefault(),K.stopPropagation(),n.dir==="rtl"?c():u();break;case"ArrowRight":K.preventDefault(),K.stopPropagation(),n.dir==="rtl"?u():c();break;case"ArrowDown":K.preventDefault(),K.stopPropagation(),d();break;case"ArrowUp":K.preventDefault(),K.stopPropagation(),f();break;case"PageUp":K.preventDefault(),K.stopPropagation(),K.shiftKey?b():_();break;case"PageDown":K.preventDefault(),K.stopPropagation(),K.shiftKey?S():N();break;case"Home":K.preventDefault(),K.stopPropagation(),w();break;case"End":K.preventDefault(),K.stopPropagation(),y();break}(A=n.onDayKeyDown)===null||A===void 0||A.call(n,t,e,K)},Z={onClick:E,onFocus:I,onBlur:O,onKeyDown:te,onKeyUp:H,onMouseEnter:q,onMouseLeave:R,onPointerEnter:V,onPointerLeave:U,onTouchCancel:k,onTouchEnd:F,onTouchMove:D,onTouchStart:P};return Z}function dse(){var t=cn(),e=FL(),n=MN(),r=DN(),i=Hy(t)?e.selected:fp(t)?n.selected:mp(t)?r.selected:void 0;return i}function hse(t){return Object.values(Mi).includes(t)}function fse(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(hse(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function mse(t,e){var n=dt({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=dt(dt({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function pse(t,e,n){var r,i,a,o=cn(),c=FN(),u=ose(t,e),d=use(t,u),f=dse(),p=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var q;u.outside||c.focusedDay&&p&&fs(c.focusedDay,t)&&((q=n.current)===null||q===void 0||q.focus())},[c.focusedDay,t,n,p,u.outside]);var g=fse(o,u).join(" "),_=mse(o,u),N=!!(u.outside&&!o.showOutsideDays||u.hidden),b=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:Dre,S=s.jsx(b,{date:t,displayMonth:e,activeModifiers:u}),w={style:_,className:g,children:S,role:"gridcell"},y=c.focusTarget&&fs(c.focusTarget,t)&&!u.outside,E=c.focusedDay&&fs(c.focusedDay,t),I=dt(dt(dt({},w),(r={disabled:u.disabled,role:"gridcell"},r["aria-selected"]=u.selected,r.tabIndex=E||y?0:-1,r)),d),O={isButton:p,isHidden:N,activeModifiers:u,selectedDays:f,buttonProps:I,divProps:w};return O}function gse(t){var e=x.useRef(null),n=pse(t.date,t.displayMonth,e);return n.isHidden?s.jsx("div",{role:"gridcell"}):n.isButton?s.jsx(px,dt({name:"day",ref:e},n.buttonProps)):s.jsx("div",dt({},n.divProps))}function vse(t){var e=t.number,n=t.dates,r=cn(),i=r.onWeekNumberClick,a=r.styles,o=r.classNames,c=r.locale,u=r.labels.labelWeekNumber,d=r.formatters.formatWeekNumber,f=d(Number(e),{locale:c});if(!i)return s.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:f});var p=u(Number(e),{locale:c}),g=function(_){i(e,n,_)};return s.jsx(px,{name:"week-number","aria-label":p,className:o.weeknumber,style:a.weeknumber,onClick:g,children:f})}function xse(t){var e,n,r=cn(),i=r.styles,a=r.classNames,o=r.showWeekNumber,c=r.components,u=(e=c==null?void 0:c.Day)!==null&&e!==void 0?e:gse,d=(n=c==null?void 0:c.WeekNumber)!==null&&n!==void 0?n:vse,f;return o&&(f=s.jsx("td",{className:a.cell,style:i.cell,children:s.jsx(d,{number:t.weekNumber,dates:t.dates})})),s.jsxs("tr",{className:a.row,style:i.row,children:[f,t.dates.map(function(p){return s.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:s.jsx(u,{displayMonth:t.displayMonth,date:p})},Hee(p))})]})}function jk(t,e,n){for(var r=n!=null&&n.ISOWeek?dD(e):EN(e,n),i=n!=null&&n.ISOWeek?Lc(t):va(t,n),a=ta(r,i),o=[],c=0;c<=a;c++)o.push(Gr(i,c));var u=o.reduce(function(d,f){var p=n!=null&&n.ISOWeek?fD(f):pD(f,n),g=d.find(function(_){return _.weekNumber===p});return g?(g.dates.push(f),d):(d.push({weekNumber:p,dates:[f]}),d)},[]);return u}function yse(t,e){var n=jk(xs(t),zy(t),e);if(e!=null&&e.useFixedWeeks){var r=Kee(t,e);if(r<6){var i=n[n.length-1],a=i.dates[i.dates.length-1],o=pb(a,6-r),c=jk(pb(a,1),o,e);n.push.apply(n,c)}}return n}function _se(t){var e,n,r,i=cn(),a=i.locale,o=i.classNames,c=i.styles,u=i.hideHead,d=i.fixedWeeks,f=i.components,p=i.weekStartsOn,g=i.firstWeekContainsDate,_=i.ISOWeek,N=yse(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:_,locale:a,weekStartsOn:p,firstWeekContainsDate:g}),b=(e=f==null?void 0:f.Head)!==null&&e!==void 0?e:Ore,S=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:xse,w=(r=f==null?void 0:f.Footer)!==null&&r!==void 0?r:Are;return s.jsxs("table",{id:t.id,className:o.table,style:c.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!u&&s.jsx(b,{}),s.jsx("tbody",{className:o.tbody,style:c.tbody,children:N.map(function(y){return s.jsx(S,{displayMonth:t.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),s.jsx(w,{displayMonth:t.displayMonth})]})}function wse(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var bse=wse()?x.useLayoutEffect:x.useEffect,S_=!1,jse=0;function Nk(){return"react-day-picker-".concat(++jse)}function Nse(t){var e,n=t??(S_?Nk():null),r=x.useState(n),i=r[0],a=r[1];return bse(function(){i===null&&a(Nk())},[]),x.useEffect(function(){S_===!1&&(S_=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function Sse(t){var e,n,r=cn(),i=r.dir,a=r.classNames,o=r.styles,c=r.components,u=pp().displayMonths,d=Nse(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,p=[a.month],g=o.month,_=t.displayIndex===0,N=t.displayIndex===u.length-1,b=!_&&!N;i==="rtl"&&(e=[_,N],N=e[0],_=e[1]),_&&(p.push(a.caption_start),g=dt(dt({},g),o.caption_start)),N&&(p.push(a.caption_end),g=dt(dt({},g),o.caption_end)),b&&(p.push(a.caption_between),g=dt(dt({},g),o.caption_between));var S=(n=c==null?void 0:c.Caption)!==null&&n!==void 0?n:Ire;return s.jsxs("div",{className:p.join(" "),style:g,children:[s.jsx(S,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(_se,{id:f,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function Ese(t){var e=cn(),n=e.classNames,r=e.styles;return s.jsx("div",{className:n.months,style:r.months,children:t.children})}function Cse(t){var e,n,r=t.initialProps,i=cn(),a=FN(),o=pp(),c=x.useState(!1),u=c[0],d=c[1];x.useEffect(function(){i.initialFocus&&a.focusTarget&&(u||(a.focus(a.focusTarget),d(!0)))},[i.initialFocus,u,a.focus,a.focusTarget,a]);var f=[i.classNames.root,i.className];i.numberOfMonths>1&&f.push(i.classNames.multiple_months),i.showWeekNumber&&f.push(i.classNames.with_weeknumber);var p=dt(dt({},i.styles.root),i.style),g=Object.keys(r).filter(function(N){return N.startsWith("data-")}).reduce(function(N,b){var S;return dt(dt({},N),(S={},S[b]=r[b],S))},{}),_=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:Ese;return s.jsx("div",dt({className:f.join(" "),style:p,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},g,{children:s.jsx(_,{children:o.displayMonths.map(function(N,b){return s.jsx(Sse,{displayIndex:b,displayMonth:N},b)})})}))}function kse(t){var e=t.children,n=Xne(t,["children"]);return s.jsx(vre,{initialProps:n,children:s.jsx(Cre,{children:s.jsx(lse,{initialProps:n,children:s.jsx(Lre,{initialProps:n,children:s.jsx(zre,{initialProps:n,children:s.jsx(Kre,{children:s.jsx(ase,{children:e})})})})})})})}function Tse(t){return s.jsx(kse,dt({},t,{children:s.jsx(Cse,{initialProps:t})}))}function VL({className:t,classNames:e,showOutsideDays:n=!0,...r}){return s.jsx(Tse,{showOutsideDays:n,className:st("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:st(ib({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:st("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:st(ib({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...i})=>s.jsx(MX,{className:"h-4 w-4"}),IconRight:({...i})=>s.jsx(BO,{className:"h-4 w-4"})},...r})}VL.displayName="Calendar";var Gy="Popover",[zL,Zue]=Sr(Gy,[uh]),gp=uh(),[Pse,Ll]=zL(Gy),UL=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=t,c=gp(e),u=x.useRef(null),[d,f]=x.useState(!1),[p,g]=Os({prop:r,defaultProp:i??!1,onChange:a,caller:Gy});return s.jsx(hN,{...c,children:s.jsx(Pse,{scope:e,contentId:As(),triggerRef:u,open:p,onOpenChange:g,onOpenToggle:x.useCallback(()=>g(_=>!_),[g]),hasCustomAnchor:d,onCustomAnchorAdd:x.useCallback(()=>f(!0),[]),onCustomAnchorRemove:x.useCallback(()=>f(!1),[]),modal:o,children:n})})};UL.displayName=Gy;var $L="PopoverAnchor",Ise=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Ll($L,n),a=gp(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=i;return x.useEffect(()=>(o(),()=>c()),[o,c]),s.jsx(Iy,{...a,...r,ref:e})});Ise.displayName=$L;var BL="PopoverTrigger",qL=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Ll(BL,n),a=gp(n),o=ht(e,i.triggerRef),c=s.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":ZL(i.open),...r,ref:o,onClick:Le(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?c:s.jsx(Iy,{asChild:!0,...a,children:c})});qL.displayName=BL;var zN="PopoverPortal",[Ase,Rse]=zL(zN,{forceMount:void 0}),WL=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,a=Ll(zN,e);return s.jsx(Ase,{scope:e,forceMount:n,children:s.jsx(Er,{present:n||a.open,children:s.jsx(op,{asChild:!0,container:i,children:r})})})};WL.displayName=zN;var zd="PopoverContent",HL=x.forwardRef((t,e)=>{const n=Rse(zd,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,a=Ll(zd,t.__scopePopover);return s.jsx(Er,{present:r||a.open,children:a.modal?s.jsx(Ose,{...i,ref:e}):s.jsx(Dse,{...i,ref:e})})});HL.displayName=zd;var Mse=wl("PopoverContent.RemoveScroll"),Ose=x.forwardRef((t,e)=>{const n=Ll(zd,t.__scopePopover),r=x.useRef(null),i=ht(e,r),a=x.useRef(!1);return x.useEffect(()=>{const o=r.current;if(o)return Ry(o)},[]),s.jsx(cp,{as:Mse,allowPinchZoom:!0,children:s.jsx(GL,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Le(t.onCloseAutoFocus,o=>{var c;o.preventDefault(),a.current||(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Le(t.onPointerDownOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Le(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Dse=x.forwardRef((t,e)=>{const n=Ll(zd,t.__scopePopover),r=x.useRef(!1),i=x.useRef(!1);return s.jsx(GL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,c;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),GL=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,...p}=t,g=Ll(zd,n),_=gp(n);return Ey(),s.jsx(ip,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(sp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>g.onOpenChange(!1),children:s.jsx(fN,{"data-state":ZL(g.open),role:"dialog",id:g.contentId,..._,...p,ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),KL="PopoverClose",Lse=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Ll(KL,n);return s.jsx(Ze.button,{type:"button",...r,ref:e,onClick:Le(t.onClick,()=>i.onOpenChange(!1))})});Lse.displayName=KL;var Fse="PopoverArrow",Vse=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=gp(n);return s.jsx(mN,{...i,...r,ref:e})});Vse.displayName=Fse;function ZL(t){return t?"open":"closed"}var zse=UL,Use=qL,$se=WL,YL=HL;const Bse=zse,qse=Use,QL=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>s.jsx($se,{children:s.jsx(YL,{ref:i,align:e,sideOffset:n,className:st("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));QL.displayName=YL.displayName;const Au=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Ky=dh((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espèces",icon:"💵",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"🏦",description:"Virement SEPA sécurisé",fees:0,processingTime:"1-2 jours ouvrés",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"💳",description:"Paiement sécurisé via PayPal",fees:2.9,processingTime:"Immédiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"📱",description:"Paiement mobile instantané",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async n=>{try{t({loading:!0});const r=e().generateSecurityCode(),i={...n,securityCode:r,status:"pending",createdAt:sr(),updatedAt:sr()},a=await xl(Vt($e,"paymentRequests"),i),o={id:a.id,...n,securityCode:r,status:"pending",createdAt:new Date,updatedAt:new Date};return t(c=>({paymentRequests:[o,...c.paymentRequests],loading:!1})),xe.success("Demande de paiement créée avec succès"),a.id}catch(r){throw console.error("Erreur lors de la création de la demande de paiement:",r),xe.error("Erreur lors de la création de la demande de paiement"),t({loading:!1}),r}},updatePaymentStatus:async(n,r,i)=>{try{const a={status:r,updatedAt:sr()};i&&(a.notes=i),await yn(yt($e,"paymentRequests",n),a),t(c=>({paymentRequests:c.paymentRequests.map(u=>u.id===n?{...u,status:r,notes:i||u.notes,updatedAt:new Date}:u)}));const o={confirmed:"Paiement confirmé",completed:"Paiement terminé",cancelled:"Paiement annulé",disputed:"Litige signalé"};xe.success(o[r]||"Statut mis à jour")}catch(a){console.error("Erreur lors de la mise à jour du statut:",a),xe.error("Erreur lors de la mise à jour du statut")}},fetchUserPaymentRequests:async n=>{if(n)try{t({loading:!0});const r=_n(Vt($e,"paymentRequests"),Xn("buyerId","==",n),ei(50)),i=_n(Vt($e,"paymentRequests"),Xn("sellerId","==",n),ei(50)),[a,o]=await Promise.all([Fn(r),Fn(i)]),c=[];a.forEach(u=>{const d=u.data();c.push({id:u.id,...d,createdAt:Au(d.createdAt),updatedAt:Au(d.updatedAt),meetingDateTime:d.meetingDateTime?Au(d.meetingDateTime):void 0})}),o.forEach(u=>{const d=u.data();c.find(f=>f.id===u.id)||c.push({id:u.id,...d,createdAt:Au(d.createdAt),updatedAt:Au(d.updatedAt),meetingDateTime:d.meetingDateTime?Au(d.meetingDateTime):void 0})}),c.sort((u,d)=>d.createdAt.getTime()-u.createdAt.getTime()),t({paymentRequests:c,loading:!1})}catch(r){console.error("Erreur lors du chargement des demandes de paiement:",r),xe.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(n,r)=>{switch(n){case"cash":return!0;case"transfer":return r.bankDetails&&r.bankDetails.iban&&r.bankDetails.accountName;case"paypal":return r.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.paypalEmail);case"lydia":return r.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(r.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(n,r)=>{const{paymentMethods:i}=e(),a=i.find(o=>o.type===r);return a?n*a.fees/100:0},getPaymentInstructions:(n,r)=>{var a,o,c;const i=[];switch(n){case"cash":i.push("💵 Paiement en espèces","📍 Rencontrez-vous au lieu convenu","🔍 Vérifiez l'objet avant de payer","🧾 Demandez un reçu si nécessaire",`🔐 Code de sécurité : ${r.securityCode}`);break;case"transfer":i.push("🏦 Virement bancaire SEPA","📋 Utilisez les coordonnées bancaires fournies","💬 Indiquez la référence de transaction","⏱️ Délai : 1-2 jours ouvrés",`🔐 Code de sécurité : ${r.securityCode}`),(a=r.paymentDetails)!=null&&a.bankDetails&&i.push(`📊 IBAN : ${r.paymentDetails.bankDetails.iban}`,`🏛️ Titulaire : ${r.paymentDetails.bankDetails.accountName}`);break;case"paypal":i.push("💳 Paiement PayPal","📧 Envoyez le paiement à l'adresse email fournie",'🛡️ Utilisez "Biens et services" pour la protection',"⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(o=r.paymentDetails)!=null&&o.paypalEmail&&i.push(`📧 Email PayPal : ${r.paymentDetails.paypalEmail}`);break;case"lydia":i.push("📱 Paiement Lydia","📞 Envoyez le paiement au numéro fourni","💬 Indiquez la référence de transaction","⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(c=r.paymentDetails)!=null&&c.lydiaPhone&&i.push(`📞 Numéro Lydia : ${r.paymentDetails.lydiaPhone}`);break}return i}}));var XL="https://js.stripe.com/v3",Wse=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var Hse=function(){for(var e=document.querySelectorAll('script[src^="'.concat(XL,'"]')),n=0;n<e.length;n++){var r=e[n];if(Wse.test(r.src))return r}return null},Sk=function(e){var n="",r=document.createElement("script");r.src="".concat(XL).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},Gse=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:n})},af=null,Cg=null,kg=null,Kse=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},Zse=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},Yse=function(e){return af!==null?af:(af=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var i=Hse();if(!(i&&e)){if(!i)i=Sk(e);else if(i&&kg!==null&&Cg!==null){var a;i.removeEventListener("load",kg),i.removeEventListener("error",Cg),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=Sk(e)}}kg=Zse(n,r),Cg=Kse(r),i.addEventListener("load",kg),i.addEventListener("error",Cg)}catch(o){r(o);return}}),af.catch(function(n){return af=null,Promise.reject(n)}))},Qse=function(e,n,r){if(e===null)return null;var i=e.apply(void 0,n);return Gse(i,r),i},of,JL=!1,e3=function(){return of||(of=Yse(null).catch(function(e){return of=null,Promise.reject(e)}),of)};Promise.resolve().then(function(){return e3()}).catch(function(t){JL||console.warn(t)});var t3=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];JL=!0;var i=Date.now();return e3().then(function(a){return Qse(a,n,i)})},n3={exports:{}},Xse="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Jse=Xse,eie=Jse;function r3(){}function s3(){}s3.resetWarningCache=r3;var tie=function(){function t(r,i,a,o,c,u){if(u!==eie){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:s3,resetWarningCache:r3};return n.PropTypes=n,n};n3.exports=tie();var nie=n3.exports;const Nn=El(nie);function Ek(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ck(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ek(Object(n),!0).forEach(function(r){i3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ek(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function av(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?av=function(e){return typeof e}:av=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},av(t)}function i3(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a3(t,e){return rie(t)||sie(t,e)||iie(t,e)||aie()}function rie(t){if(Array.isArray(t))return t}function sie(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],i=!0,a=!1,o,c;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){a=!0,c=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw c}}return r}}function iie(t,e){if(t){if(typeof t=="string")return kk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kk(t,e)}}function kk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var js=function(e,n,r){var i=!!r,a=Fe.useRef(r);Fe.useEffect(function(){a.current=r},[r]),Fe.useEffect(function(){if(!i||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,o),function(){e.off(n,o)}},[i,n,e,a])},bb=function(e){var n=Fe.useRef(e);return Fe.useEffect(function(){n.current=e},[e]),n.current},Ud=function(e){return e!==null&&av(e)==="object"},oie=function(e){return Ud(e)&&typeof e.then=="function"},lie=function(e){return Ud(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Tk="[object Object]",cie=function t(e,n){if(!Ud(e)||!Ud(n))return e===n;var r=Array.isArray(e),i=Array.isArray(n);if(r!==i)return!1;var a=Object.prototype.toString.call(e)===Tk,o=Object.prototype.toString.call(n)===Tk;if(a!==o)return!1;if(!a&&!r)return e===n;var c=Object.keys(e),u=Object.keys(n);if(c.length!==u.length)return!1;for(var d={},f=0;f<c.length;f+=1)d[c[f]]=!0;for(var p=0;p<u.length;p+=1)d[u[p]]=!0;var g=Object.keys(d);if(g.length!==c.length)return!1;var _=e,N=n,b=function(w){return t(_[w],N[w])};return g.every(b)},o3=function(e,n,r){return Ud(e)?Object.keys(e).reduce(function(i,a){var o=!Ud(n)||!cie(e[a],n[a]);return r.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):o?Ck(Ck({},i||{}),{},i3({},a,e[a])):i},null):null},l3="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Pk=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l3;if(e===null||lie(e))return e;throw new Error(n)},uie=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l3;if(oie(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return Pk(i,n)})};var r=Pk(e,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},die=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},Zy=Fe.createContext(null);Zy.displayName="ElementsContext";var c3=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},u3=function(e){var n=e.stripe,r=e.options,i=e.children,a=Fe.useMemo(function(){return uie(n)},[n]),o=Fe.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),c=a3(o,2),u=c[0],d=c[1];Fe.useEffect(function(){var g=!0,_=function(b){d(function(S){return S.stripe?S:{stripe:b,elements:b.elements(r)}})};return a.tag==="async"&&!u.stripe?a.stripePromise.then(function(N){N&&g&&_(N)}):a.tag==="sync"&&!u.stripe&&_(a.stripe),function(){g=!1}},[a,u,r]);var f=bb(n);Fe.useEffect(function(){f!==null&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[f,n]);var p=bb(r);return Fe.useEffect(function(){if(u.elements){var g=o3(r,p,["clientSecret","fonts"]);g&&u.elements.update(g)}},[r,p,u.elements]),Fe.useEffect(function(){die(u.stripe)},[u.stripe]),Fe.createElement(Zy.Provider,{value:u},i)};u3.propTypes={stripe:Nn.any,options:Nn.object};var hie=function(e){var n=Fe.useContext(Zy);return c3(n,e)},fie=function(){var e=hie("calls useElements()"),n=e.elements;return n};Nn.func.isRequired;var d3=Fe.createContext(null);d3.displayName="CustomCheckoutSdkContext";var mie=function(e,n){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return e},pie=Fe.createContext(null);pie.displayName="CustomCheckoutContext";Nn.any,Nn.shape({clientSecret:Nn.string.isRequired,elementsOptions:Nn.object}).isRequired;var jb=function(e){var n=Fe.useContext(d3),r=Fe.useContext(Zy);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?mie(n,e):c3(r,e)},gie=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Jn=function(e,n){var r="".concat(gie(e),"Element"),i=function(u){var d=u.id,f=u.className,p=u.options,g=p===void 0?{}:p,_=u.onBlur,N=u.onFocus,b=u.onReady,S=u.onChange,w=u.onEscape,y=u.onClick,E=u.onLoadError,I=u.onLoaderStart,O=u.onNetworksChange,q=u.onConfirm,R=u.onCancel,V=u.onShippingAddressChange,U=u.onShippingRateChange,k=jb("mounts <".concat(r,">")),F="elements"in k?k.elements:null,D="customCheckoutSdk"in k?k.customCheckoutSdk:null,P=Fe.useState(null),H=a3(P,2),te=H[0],Z=H[1],K=Fe.useRef(null),A=Fe.useRef(null);js(te,"blur",_),js(te,"focus",N),js(te,"escape",w),js(te,"click",y),js(te,"loaderror",E),js(te,"loaderstart",I),js(te,"networkschange",O),js(te,"confirm",q),js(te,"cancel",R),js(te,"shippingaddresschange",V),js(te,"shippingratechange",U),js(te,"change",S);var z;b&&(e==="expressCheckout"?z=b:z=function(){b(te)}),js(te,"ready",z),Fe.useLayoutEffect(function(){if(K.current===null&&A.current!==null&&(F||D)){var X=null;D?X=D.createElement(e,g):F&&(X=F.create(e,g)),K.current=X,Z(X),X&&X.mount(A.current)}},[F,D,g]);var B=bb(g);return Fe.useEffect(function(){if(K.current){var X=o3(g,B,["paymentRequest"]);X&&"update"in K.current&&K.current.update(X)}},[g,B]),Fe.useLayoutEffect(function(){return function(){if(K.current&&typeof K.current.destroy=="function")try{K.current.destroy(),K.current=null}catch{}}},[]),Fe.createElement("div",{id:d,className:f,ref:A})},a=function(u){jb("mounts <".concat(r,">"));var d=u.id,f=u.className;return Fe.createElement("div",{id:d,className:f})},o=n?a:i;return o.propTypes={id:Nn.string,className:Nn.string,onChange:Nn.func,onBlur:Nn.func,onFocus:Nn.func,onReady:Nn.func,onEscape:Nn.func,onClick:Nn.func,onLoadError:Nn.func,onLoaderStart:Nn.func,onNetworksChange:Nn.func,onConfirm:Nn.func,onCancel:Nn.func,onShippingAddressChange:Nn.func,onShippingRateChange:Nn.func,options:Nn.object},o.displayName=r,o.__elementType=e,o},er=typeof window>"u",vie=Fe.createContext(null);vie.displayName="EmbeddedCheckoutProviderContext";var xie=function(){var e=jb("calls useStripe()"),n=e.stripe;return n};Jn("auBankAccount",er);Jn("card",er);Jn("cardNumber",er);Jn("cardExpiry",er);Jn("cardCvc",er);Jn("fpxBank",er);Jn("iban",er);Jn("idealBank",er);Jn("p24Bank",er);Jn("epsBank",er);Jn("payment",er);Jn("expressCheckout",er);Jn("currencySelector",er);Jn("paymentRequestButton",er);Jn("linkAuthentication",er);Jn("address",er);Jn("shippingAddress",er);Jn("paymentMethodMessaging",er);Jn("affirmMessage",er);Jn("afterpayClearpayMessage",er);const yie=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{xie(),fie();const[i,a]=x.useState(!1),[o,c]=x.useState(null),u=async d=>{d.preventDefault(),a(!0),c(null);try{await new Promise(p=>setTimeout(p,2e3));const f="pi_"+Math.random().toString(36).substring(2,15);xe.success("Paiement réussi !"),n(f)}catch(f){console.error("Payment error:",f),c(f.message||"Une erreur est survenue lors du paiement"),r(f.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),s.jsx(Ct,{children:"Paiement sécurisé via Stripe"})]}),s.jsx(me,{children:s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsx("div",{className:"p-4 border rounded-md",children:s.jsx("div",{className:"h-10 flex items-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&s.jsxs($t,{className:"border-red-200 bg-red-50",children:[s.jsx(In,{className:"h-4 w-4 text-red-600"}),s.jsx(Bt,{className:"text-red-800",children:o})]}),s.jsxs($t,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Oc,{className:"h-4 w-4 text-blue-600"}),s.jsx(Bt,{className:"text-blue-800",children:"Vos informations de paiement sont sécurisées et cryptées par Stripe."})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),s.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[s.jsx("li",{children:"Succès : 4242 4242 4242 4242"}),s.jsx("li",{children:"Échec : 4000 0000 0000 0002"}),s.jsx("li",{children:"Date : n'importe quelle date future"}),s.jsx("li",{children:"CVC : n'importe quel nombre à 3 chiffres"})]})]}),s.jsx(J,{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-primary to-secondary",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Oc,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},Ik=t3("pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p"),_ie=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{const i={appearance:{theme:"stripe"},locale:"fr"};return Ik?s.jsx(u3,{stripe:Ik,options:i,children:s.jsx(yie,{amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})}):s.jsxs($t,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(In,{className:"h-4 w-4 text-yellow-600"}),s.jsxs(Bt,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre clé publique Stripe dans le fichier .env"]})]})},h3=({amount:t,currency:e,onMethodSelect:n,selectedMethod:r})=>{const{paymentMethods:i,calculateFees:a}=Ky(),[o,c]=x.useState({}),[u,d]=x.useState({}),[f,p]=x.useState(null),g=[{id:"card",type:"card",name:"Carte bancaire",icon:Vn,description:"Paiement sécurisé par carte",fees:1.5,processingTime:"Immédiat",securityLevel:"high",available:!0},...i],_=O=>{switch(O){case"card":return Vn;case"cash":return $4;case"transfer":return H4;case"paypal":return Vn;case"lydia":return Yc;default:return Vn}},N=O=>{switch(O){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},b=(O,q)=>{var V,U;const R={};switch(O){case"card":return!0;case"transfer":(V=q.bankDetails)!=null&&V.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(q.bankDetails.iban.replace(/\s/g,""))||(R.iban="Format IBAN invalide"):R.iban="IBAN requis",(U=q.bankDetails)!=null&&U.accountName||(R.accountName="Nom du titulaire requis");break;case"paypal":q.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(q.paypalEmail)||(R.paypalEmail="Format email invalide"):R.paypalEmail="Email PayPal requis";break;case"lydia":q.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(q.lydiaPhone.replace(/\s/g,""))||(R.lydiaPhone="Format de téléphone invalide"):R.lydiaPhone="Numéro de téléphone requis";break}return d(R),Object.keys(R).length===0},S=O=>{if(O==="card"){n(O,{});return}const q=o[O]||{};(O==="cash"||b(O,q))&&n(O,q)},w=(O,q,R)=>{c(V=>({...V,[O]:{...V[O],[q]:R}}))},y=(O,q)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:q||"EUR"}).format(O),E=O=>{p(O),n("card",{stripePaymentId:O})},I=O=>{console.error("Stripe payment error:",O)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),s.jsxs("p",{className:"text-muted-foreground",children:["Montant à payer : ",s.jsx("span",{className:"font-semibold text-primary",children:y(t,e)})]})]}),r==="card"?s.jsx(_ie,{amount:t,currency:e,onPaymentSuccess:E,onPaymentError:I}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(O=>{var k,F,D,P,H,te,Z,K;const q=_(O.type),R=O.type==="card"?t*O.fees/100:a(t,O.type),V=t+R,U=r===O.type;return s.jsxs(fe,{className:`cursor-pointer transition-all hover:shadow-md ${U?"ring-2 ring-primary bg-primary/5":""} ${O.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>O.available&&S(O.type),children:[s.jsx(Qe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(q,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx(Je,{className:"text-lg",children:O.name}),s.jsx(Ct,{className:"text-sm",children:O.description})]})]}),U&&s.jsx(Pt,{className:"w-6 h-6 text-green-600"})]})}),s.jsxs(me,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Un,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{children:O.processingTime})]}),s.jsxs(at,{className:N(O.securityLevel),children:[s.jsx(zt,{className:"w-3 h-3 mr-1"}),O.securityLevel==="high"?"Très sécurisé":O.securityLevel==="medium"?"Sécurisé":"Basique"]})]}),R>0&&s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Montant :"}),s.jsx("span",{children:y(t,e)})]}),s.jsxs("div",{className:"flex justify-between text-orange-600",children:[s.jsxs("span",{children:["Frais (",O.fees,"%) :"]}),s.jsx("span",{children:y(R,e)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[s.jsx("span",{children:"Total :"}),s.jsx("span",{children:y(V,e)})]})]}),U&&O.type!=="cash"&&O.type!=="card"&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[O.type==="transfer"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:`iban-${O.id}`,children:"IBAN *"}),s.jsx(Ge,{id:`iban-${O.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((F=(k=o[O.type])==null?void 0:k.bankDetails)==null?void 0:F.iban)||"",onChange:A=>{var z;return w(O.type,"bankDetails",{...(z=o[O.type])==null?void 0:z.bankDetails,iban:A.target.value})},className:u.iban?"border-red-500":""}),u.iban&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.iban})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:`account-name-${O.id}`,children:"Nom du titulaire *"}),s.jsx(Ge,{id:`account-name-${O.id}`,placeholder:"Jean Dupont",value:((P=(D=o[O.type])==null?void 0:D.bankDetails)==null?void 0:P.accountName)||"",onChange:A=>{var z;return w(O.type,"bankDetails",{...(z=o[O.type])==null?void 0:z.bankDetails,accountName:A.target.value})},className:u.accountName?"border-red-500":""}),u.accountName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.accountName})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:`bic-${O.id}`,children:"BIC (optionnel)"}),s.jsx(Ge,{id:`bic-${O.id}`,placeholder:"BNPAFRPP",value:((te=(H=o[O.type])==null?void 0:H.bankDetails)==null?void 0:te.bic)||"",onChange:A=>{var z;return w(O.type,"bankDetails",{...(z=o[O.type])==null?void 0:z.bankDetails,bic:A.target.value})}})]})]}),O.type==="paypal"&&s.jsxs("div",{children:[s.jsx(Re,{htmlFor:`paypal-email-${O.id}`,children:"Email PayPal *"}),s.jsx(Ge,{id:`paypal-email-${O.id}`,type:"email",placeholder:"votre.email@example.com",value:((Z=o[O.type])==null?void 0:Z.paypalEmail)||"",onChange:A=>w(O.type,"paypalEmail",A.target.value),className:u.paypalEmail?"border-red-500":""}),u.paypalEmail&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.paypalEmail})]}),O.type==="lydia"&&s.jsxs("div",{children:[s.jsx(Re,{htmlFor:`lydia-phone-${O.id}`,children:"Numéro de téléphone *"}),s.jsx(Ge,{id:`lydia-phone-${O.id}`,type:"tel",placeholder:"06 12 34 56 78",value:((K=o[O.type])==null?void 0:K.lydiaPhone)||"",onChange:A=>w(O.type,"lydiaPhone",A.target.value),className:u.lydiaPhone?"border-red-500":""}),u.lydiaPhone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.lydiaPhone})]})]}),U&&O.type!=="card"&&s.jsxs($t,{className:"mt-3",children:[s.jsx(yl,{className:"h-4 w-4"}),s.jsxs(Bt,{children:[O.type==="cash"&&"Rencontrez-vous dans un lieu public et vérifiez l'objet avant de payer.",O.type==="transfer"&&"Le virement sera effectué après confirmation de la transaction. Délai : 1-2 jours ouvrés.",O.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bénéficier de la protection PayPal.",O.type==="lydia"&&"Le paiement Lydia est instantané. Vérifiez le numéro avant d'envoyer."]})]})]})]},O.id)})}),s.jsxs($t,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(In,{className:"h-4 w-4 text-yellow-600"}),s.jsxs(Bt,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux sécurisés de StudyMarket pour les transactions."]})]})]})};function wie(t,e){const n=x.useRef(e);x.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const bie=1;function jie(t){return Object.freeze({__version:bie,map:t})}function Nie(t,e){return Object.freeze({...t,...e})}const f3=x.createContext(null),m3=f3.Provider;function p3(){const t=x.useContext(f3);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Sie(t){function e(n,r){const{instance:i,context:a}=t(n).current;return x.useImperativeHandle(r,()=>i),n.children==null?null:Fe.createElement(m3,{value:a},n.children)}return x.forwardRef(e)}function Eie(t){function e(n,r){const{instance:i}=t(n).current;return x.useImperativeHandle(r,()=>i),null}return x.forwardRef(e)}function Cie(t,e){const n=x.useRef();x.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function g3(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Nb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Vu,function(n){var r="1.9.4";function i(l){var h,v,j,T;for(v=1,j=arguments.length;v<j;v++){T=arguments[v];for(h in T)l[h]=T[h]}return l}var a=Object.create||function(){function l(){}return function(h){return l.prototype=h,new l}}();function o(l,h){var v=Array.prototype.slice;if(l.bind)return l.bind.apply(l,v.call(arguments,1));var j=v.call(arguments,2);return function(){return l.apply(h,j.length?j.concat(v.call(arguments)):arguments)}}var c=0;function u(l){return"_leaflet_id"in l||(l._leaflet_id=++c),l._leaflet_id}function d(l,h,v){var j,T,$,Q;return Q=function(){j=!1,T&&($.apply(v,T),T=!1)},$=function(){j?T=arguments:(l.apply(v,arguments),setTimeout(Q,h),j=!0)},$}function f(l,h,v){var j=h[1],T=h[0],$=j-T;return l===j&&v?l:((l-T)%$+$)%$+T}function p(){return!1}function g(l,h){if(h===!1)return l;var v=Math.pow(10,h===void 0?6:h);return Math.round(l*v)/v}function _(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function N(l){return _(l).split(/\s+/)}function b(l,h){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?a(l.options):{});for(var v in h)l.options[v]=h[v];return l.options}function S(l,h,v){var j=[];for(var T in l)j.push(encodeURIComponent(v?T.toUpperCase():T)+"="+encodeURIComponent(l[T]));return(!h||h.indexOf("?")===-1?"?":"&")+j.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function y(l,h){return l.replace(w,function(v,j){var T=h[j];if(T===void 0)throw new Error("No value provided for variable "+v);return typeof T=="function"&&(T=T(h)),T})}var E=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function I(l,h){for(var v=0;v<l.length;v++)if(l[v]===h)return v;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function q(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var R=0;function V(l){var h=+new Date,v=Math.max(0,16-(h-R));return R=h+v,window.setTimeout(l,v)}var U=window.requestAnimationFrame||q("RequestAnimationFrame")||V,k=window.cancelAnimationFrame||q("CancelAnimationFrame")||q("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function F(l,h,v){if(v&&U===V)l.call(h);else return U.call(window,o(l,h))}function D(l){l&&k.call(window,l)}var P={__proto__:null,extend:i,create:a,bind:o,get lastId(){return c},stamp:u,throttle:d,wrapNum:f,falseFn:p,formatNum:g,trim:_,splitWords:N,setOptions:b,getParamString:S,template:y,isArray:E,indexOf:I,emptyImageUrl:O,requestFn:U,cancelFn:k,requestAnimFrame:F,cancelAnimFrame:D};function H(){}H.extend=function(l){var h=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=h.__super__=this.prototype,j=a(v);j.constructor=h,h.prototype=j;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(h[T]=this[T]);return l.statics&&i(h,l.statics),l.includes&&(te(l.includes),i.apply(null,[j].concat(l.includes))),i(j,l),delete j.statics,delete j.includes,j.options&&(j.options=v.options?a(v.options):{},i(j.options,l.options)),j._initHooks=[],j.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var $=0,Q=j._initHooks.length;$<Q;$++)j._initHooks[$].call(this)}},h},H.include=function(l){var h=this.prototype.options;return i(this.prototype,l),l.options&&(this.prototype.options=h,this.mergeOptions(l.options)),this},H.mergeOptions=function(l){return i(this.prototype.options,l),this},H.addInitHook=function(l){var h=Array.prototype.slice.call(arguments,1),v=typeof l=="function"?l:function(){this[l].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function te(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=E(l)?l:[l];for(var h=0;h<l.length;h++)l[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(l,h,v){if(typeof l=="object")for(var j in l)this._on(j,l[j],h);else{l=N(l);for(var T=0,$=l.length;T<$;T++)this._on(l[T],h,v)}return this},off:function(l,h,v){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var j in l)this._off(j,l[j],h);else{l=N(l);for(var T=arguments.length===1,$=0,Q=l.length;$<Q;$++)T?this._off(l[$]):this._off(l[$],h,v)}return this},_on:function(l,h,v,j){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(l,h,v)===!1){v===this&&(v=void 0);var T={fn:h,ctx:v};j&&(T.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(T)}},_off:function(l,h,v){var j,T,$;if(this._events&&(j=this._events[l],!!j)){if(arguments.length===1){if(this._firingCount)for(T=0,$=j.length;T<$;T++)j[T].fn=p;delete this._events[l];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var Q=this._listens(l,h,v);if(Q!==!1){var le=j[Q];this._firingCount&&(le.fn=p,this._events[l]=j=j.slice()),j.splice(Q,1)}}},fire:function(l,h,v){if(!this.listens(l,v))return this;var j=i({},h,{type:l,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var T=this._events[l];if(T){this._firingCount=this._firingCount+1||1;for(var $=0,Q=T.length;$<Q;$++){var le=T[$],ue=le.fn;le.once&&this.off(l,ue,le.ctx),ue.call(le.ctx||this,j)}this._firingCount--}}return v&&this._propagateEvent(j),this},listens:function(l,h,v,j){typeof l!="string"&&console.warn('"string" type argument expected');var T=h;typeof h!="function"&&(j=!!h,T=void 0,v=void 0);var $=this._events&&this._events[l];if($&&$.length&&this._listens(l,T,v)!==!1)return!0;if(j){for(var Q in this._eventParents)if(this._eventParents[Q].listens(l,h,v,j))return!0}return!1},_listens:function(l,h,v){if(!this._events)return!1;var j=this._events[l]||[];if(!h)return!!j.length;v===this&&(v=void 0);for(var T=0,$=j.length;T<$;T++)if(j[T].fn===h&&j[T].ctx===v)return T;return!1},once:function(l,h,v){if(typeof l=="object")for(var j in l)this._on(j,l[j],h,!0);else{l=N(l);for(var T=0,$=l.length;T<$;T++)this._on(l[T],h,v,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[u(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[u(l)],this},_propagateEvent:function(l){for(var h in this._eventParents)this._eventParents[h].fire(l.type,i({layer:l.target,propagatedFrom:l.target},l),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var K=H.extend(Z);function A(l,h,v){this.x=v?Math.round(l):l,this.y=v?Math.round(h):h}var z=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};A.prototype={clone:function(){return new A(this.x,this.y)},add:function(l){return this.clone()._add(B(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(B(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new A(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new A(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=z(this.x),this.y=z(this.y),this},distanceTo:function(l){l=B(l);var h=l.x-this.x,v=l.y-this.y;return Math.sqrt(h*h+v*v)},equals:function(l){return l=B(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=B(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function B(l,h,v){return l instanceof A?l:E(l)?new A(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new A(l.x,l.y):new A(l,h,v)}function X(l,h){if(l)for(var v=h?[l,h]:l,j=0,T=v.length;j<T;j++)this.extend(v[j])}X.prototype={extend:function(l){var h,v;if(!l)return this;if(l instanceof A||typeof l[0]=="number"||"x"in l)h=v=B(l);else if(l=de(l),h=l.min,v=l.max,!h||!v)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=v.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(l){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var h,v;return typeof l[0]=="number"||l instanceof A?l=B(l):l=de(l),l instanceof X?(h=l.min,v=l.max):h=v=l,h.x>=this.min.x&&v.x<=this.max.x&&h.y>=this.min.y&&v.y<=this.max.y},intersects:function(l){l=de(l);var h=this.min,v=this.max,j=l.min,T=l.max,$=T.x>=h.x&&j.x<=v.x,Q=T.y>=h.y&&j.y<=v.y;return $&&Q},overlaps:function(l){l=de(l);var h=this.min,v=this.max,j=l.min,T=l.max,$=T.x>h.x&&j.x<v.x,Q=T.y>h.y&&j.y<v.y;return $&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var h=this.min,v=this.max,j=Math.abs(h.x-v.x)*l,T=Math.abs(h.y-v.y)*l;return de(B(h.x-j,h.y-T),B(v.x+j,v.y+T))},equals:function(l){return l?(l=de(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function de(l,h){return!l||l instanceof X?l:new X(l,h)}function ve(l,h){if(l)for(var v=h?[l,h]:l,j=0,T=v.length;j<T;j++)this.extend(v[j])}ve.prototype={extend:function(l){var h=this._southWest,v=this._northEast,j,T;if(l instanceof Ee)j=l,T=l;else if(l instanceof ve){if(j=l._southWest,T=l._northEast,!j||!T)return this}else return l?this.extend(Oe(l)||be(l)):this;return!h&&!v?(this._southWest=new Ee(j.lat,j.lng),this._northEast=new Ee(T.lat,T.lng)):(h.lat=Math.min(j.lat,h.lat),h.lng=Math.min(j.lng,h.lng),v.lat=Math.max(T.lat,v.lat),v.lng=Math.max(T.lng,v.lng)),this},pad:function(l){var h=this._southWest,v=this._northEast,j=Math.abs(h.lat-v.lat)*l,T=Math.abs(h.lng-v.lng)*l;return new ve(new Ee(h.lat-j,h.lng-T),new Ee(v.lat+j,v.lng+T))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof Ee||"lat"in l?l=Oe(l):l=be(l);var h=this._southWest,v=this._northEast,j,T;return l instanceof ve?(j=l.getSouthWest(),T=l.getNorthEast()):j=T=l,j.lat>=h.lat&&T.lat<=v.lat&&j.lng>=h.lng&&T.lng<=v.lng},intersects:function(l){l=be(l);var h=this._southWest,v=this._northEast,j=l.getSouthWest(),T=l.getNorthEast(),$=T.lat>=h.lat&&j.lat<=v.lat,Q=T.lng>=h.lng&&j.lng<=v.lng;return $&&Q},overlaps:function(l){l=be(l);var h=this._southWest,v=this._northEast,j=l.getSouthWest(),T=l.getNorthEast(),$=T.lat>h.lat&&j.lat<v.lat,Q=T.lng>h.lng&&j.lng<v.lng;return $&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,h){return l?(l=be(l),this._southWest.equals(l.getSouthWest(),h)&&this._northEast.equals(l.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function be(l,h){return l instanceof ve?l:new ve(l,h)}function Ee(l,h,v){if(isNaN(l)||isNaN(h))throw new Error("Invalid LatLng object: ("+l+", "+h+")");this.lat=+l,this.lng=+h,v!==void 0&&(this.alt=+v)}Ee.prototype={equals:function(l,h){if(!l)return!1;l=Oe(l);var v=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return v<=(h===void 0?1e-9:h)},toString:function(l){return"LatLng("+g(this.lat,l)+", "+g(this.lng,l)+")"},distanceTo:function(l){return re.distance(this,Oe(l))},wrap:function(){return re.wrapLatLng(this)},toBounds:function(l){var h=180*l/40075017,v=h/Math.cos(Math.PI/180*this.lat);return be([this.lat-h,this.lng-v],[this.lat+h,this.lng+v])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function Oe(l,h,v){return l instanceof Ee?l:E(l)&&typeof l[0]!="object"?l.length===3?new Ee(l[0],l[1],l[2]):l.length===2?new Ee(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new Ee(l.lat,"lng"in l?l.lng:l.lon,l.alt):h===void 0?null:new Ee(l,h,v)}var Se={latLngToPoint:function(l,h){var v=this.projection.project(l),j=this.scale(h);return this.transformation._transform(v,j)},pointToLatLng:function(l,h){var v=this.scale(h),j=this.transformation.untransform(l,v);return this.projection.unproject(j)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var h=this.projection.bounds,v=this.scale(l),j=this.transformation.transform(h.min,v),T=this.transformation.transform(h.max,v);return new X(j,T)},infinite:!1,wrapLatLng:function(l){var h=this.wrapLng?f(l.lng,this.wrapLng,!0):l.lng,v=this.wrapLat?f(l.lat,this.wrapLat,!0):l.lat,j=l.alt;return new Ee(v,h,j)},wrapLatLngBounds:function(l){var h=l.getCenter(),v=this.wrapLatLng(h),j=h.lat-v.lat,T=h.lng-v.lng;if(j===0&&T===0)return l;var $=l.getSouthWest(),Q=l.getNorthEast(),le=new Ee($.lat-j,$.lng-T),ue=new Ee(Q.lat-j,Q.lng-T);return new ve(le,ue)}},re=i({},Se,{wrapLng:[-180,180],R:6371e3,distance:function(l,h){var v=Math.PI/180,j=l.lat*v,T=h.lat*v,$=Math.sin((h.lat-l.lat)*v/2),Q=Math.sin((h.lng-l.lng)*v/2),le=$*$+Math.cos(j)*Math.cos(T)*Q*Q,ue=2*Math.atan2(Math.sqrt(le),Math.sqrt(1-le));return this.R*ue}}),ee=6378137,ne={R:ee,MAX_LATITUDE:85.0511287798,project:function(l){var h=Math.PI/180,v=this.MAX_LATITUDE,j=Math.max(Math.min(v,l.lat),-v),T=Math.sin(j*h);return new A(this.R*l.lng*h,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(l){var h=180/Math.PI;return new Ee((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*h,l.x*h/this.R)},bounds:function(){var l=ee*Math.PI;return new X([-l,-l],[l,l])}()};function Y(l,h,v,j){if(E(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=h,this._c=v,this._d=j}Y.prototype={transform:function(l,h){return this._transform(l.clone(),h)},_transform:function(l,h){return h=h||1,l.x=h*(this._a*l.x+this._b),l.y=h*(this._c*l.y+this._d),l},untransform:function(l,h){return h=h||1,new A((l.x/h-this._b)/this._a,(l.y/h-this._d)/this._c)}};function oe(l,h,v,j){return new Y(l,h,v,j)}var pe=i({},re,{code:"EPSG:3857",projection:ne,transformation:function(){var l=.5/(Math.PI*ne.R);return oe(l,.5,-l,.5)}()}),Te=i({},pe,{code:"EPSG:900913"});function we(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function se(l,h){var v="",j,T,$,Q,le,ue;for(j=0,$=l.length;j<$;j++){for(le=l[j],T=0,Q=le.length;T<Q;T++)ue=le[T],v+=(T?"L":"M")+ue.x+" "+ue.y;v+=h?it.svg?"z":"x":""}return v||"M0 0"}var _e=document.documentElement.style,je="ActiveXObject"in window,We=je&&!document.addEventListener,G="msLaunchUri"in navigator&&!("documentMode"in document),ie=Vs("webkit"),ce=Vs("android"),Pe=Vs("android 2")||Vs("android 3"),Ae=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ce=ce&&Vs("Google")&&Ae<537&&!("AudioNode"in window),Ve=!!window.opera,He=!G&&Vs("chrome"),nt=Vs("gecko")&&!ie&&!Ve&&!je,Yt=!He&&Vs("safari"),tr=Vs("phantom"),qn="OTransition"in _e,zr=navigator.platform.indexOf("Win")===0,rs=je&&"transition"in _e,ss="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pe,Fi="MozPerspective"in _e,nu=!window.L_DISABLE_3D&&(rs||ss||Fi)&&!qn&&!tr,ba=typeof orientation<"u"||Vs("mobile"),vo=ba&&ie,yp=ba&&ss,xh=!window.PointerEvent&&window.MSPointerEvent,xo=!!(window.PointerEvent||xh),ru="ontouchstart"in window||!!window.TouchEvent,yh=!window.L_NO_TOUCH&&(ru||xo),ja=ba&&Ve,_p=ba&&nt,su=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,wp=function(){var l=!1;try{var h=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",p,h),window.removeEventListener("testPassiveEventSupport",p,h)}catch{}return l}(),Vl=function(){return!!document.createElement("canvas").getContext}(),iu=!!(document.createElementNS&&we("svg").createSVGRect),gr=!!iu&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),bp=!iu&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var h=l.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),zl=navigator.platform.indexOf("Mac")===0,Ul=navigator.platform.indexOf("Linux")===0;function Vs(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var it={ie:je,ielt9:We,edge:G,webkit:ie,android:ce,android23:Pe,androidStock:Ce,opera:Ve,chrome:He,gecko:nt,safari:Yt,phantom:tr,opera12:qn,win:zr,ie3d:rs,webkit3d:ss,gecko3d:Fi,any3d:nu,mobile:ba,mobileWebkit:vo,mobileWebkit3d:yp,msPointer:xh,pointer:xo,touch:yh,touchNative:ru,mobileOpera:ja,mobileGecko:_p,retina:su,passiveEvents:wp,canvas:Vl,svg:iu,vml:bp,inlineSvg:gr,mac:zl,linux:Ul},Na=it.msPointer?"MSPointerDown":"pointerdown",jp=it.msPointer?"MSPointerMove":"pointermove",Np=it.msPointer?"MSPointerUp":"pointerup",$l=it.msPointer?"MSPointerCancel":"pointercancel",au={touchstart:Na,touchmove:jp,touchend:Np,touchcancel:$l},ou={touchstart:cu,touchmove:lu,touchend:lu,touchcancel:lu},ci={},ui=!1;function Sp(l,h,v){return h==="touchstart"&&Cp(),ou[h]?(v=ou[h].bind(this,v),l.addEventListener(au[h],v,!1),v):(console.warn("wrong event specified:",h),p)}function Ep(l,h,v){if(!au[h]){console.warn("wrong event specified:",h);return}l.removeEventListener(au[h],v,!1)}function _h(l){ci[l.pointerId]=l}function wh(l){ci[l.pointerId]&&(ci[l.pointerId]=l)}function bh(l){delete ci[l.pointerId]}function Cp(){ui||(document.addEventListener(Na,_h,!0),document.addEventListener(jp,wh,!0),document.addEventListener(Np,bh,!0),document.addEventListener($l,bh,!0),ui=!0)}function lu(l,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var v in ci)h.touches.push(ci[v]);h.changedTouches=[h],l(h)}}function cu(l,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&bn(h),lu(l,h)}function kp(l){var h={},v,j;for(j in l)v=l[j],h[j]=v&&v.bind?v.bind(l):v;return l=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var jh=200;function Bl(l,h){l.addEventListener("dblclick",h);var v=0,j;function T($){if($.detail!==1){j=$.detail;return}if(!($.pointerType==="mouse"||$.sourceCapabilities&&!$.sourceCapabilities.firesTouchEvents)){var Q=Oh($);if(!(Q.some(function(ue){return ue instanceof HTMLLabelElement&&ue.attributes.for})&&!Q.some(function(ue){return ue instanceof HTMLInputElement||ue instanceof HTMLSelectElement}))){var le=Date.now();le-v<=jh?(j++,j===2&&h(kp($))):j=1,v=le}}}return l.addEventListener("click",T),{dblclick:h,simDblclick:T}}function Sa(l,h){l.removeEventListener("dblclick",h.dblclick),l.removeEventListener("click",h.simDblclick)}var ql=Ca(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Wl=Ca(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Nh=Wl==="webkitTransition"||Wl==="OTransition"?Wl+"End":"transitionend";function Sh(l){return typeof l=="string"?document.getElementById(l):l}function yo(l,h){var v=l.style[h]||l.currentStyle&&l.currentStyle[h];if((!v||v==="auto")&&document.defaultView){var j=document.defaultView.getComputedStyle(l,null);v=j?j[h]:null}return v==="auto"?null:v}function Tt(l,h,v){var j=document.createElement(l);return j.className=h||"",v&&v.appendChild(j),j}function rn(l){var h=l.parentNode;h&&h.removeChild(l)}function Hl(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function Ea(l){var h=l.parentNode;h&&h.lastChild!==l&&h.appendChild(l)}function _o(l){var h=l.parentNode;h&&h.firstChild!==l&&h.insertBefore(l,h.firstChild)}function Eh(l,h){if(l.classList!==void 0)return l.classList.contains(h);var v=zs(l);return v.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(v)}function bt(l,h){if(l.classList!==void 0)for(var v=N(h),j=0,T=v.length;j<T;j++)l.classList.add(v[j]);else if(!Eh(l,h)){var $=zs(l);Ch(l,($?$+" ":"")+h)}}function pn(l,h){l.classList!==void 0?l.classList.remove(h):Ch(l,_((" "+zs(l)+" ").replace(" "+h+" "," ")))}function Ch(l,h){l.className.baseVal===void 0?l.className=h:l.className.baseVal=h}function zs(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function Tn(l,h){"opacity"in l.style?l.style.opacity=h:"filter"in l.style&&uu(l,h)}function uu(l,h){var v=!1,j="DXImageTransform.Microsoft.Alpha";try{v=l.filters.item(j)}catch{if(h===1)return}h=Math.round(h*100),v?(v.Enabled=h!==100,v.Opacity=h):l.style.filter+=" progid:"+j+"(opacity="+h+")"}function Ca(l){for(var h=document.documentElement.style,v=0;v<l.length;v++)if(l[v]in h)return l[v];return!1}function Vi(l,h,v){var j=h||new A(0,0);l.style[ql]=(it.ie3d?"translate("+j.x+"px,"+j.y+"px)":"translate3d("+j.x+"px,"+j.y+"px,0)")+(v?" scale("+v+")":"")}function ft(l,h){l._leaflet_pos=h,it.any3d?Vi(l,h):(l.style.left=h.x+"px",l.style.top=h.y+"px")}function Us(l){return l._leaflet_pos||new A(0,0)}var di,hi,kh;if("onselectstart"in document)di=function(){ct(window,"selectstart",bn)},hi=function(){Qt(window,"selectstart",bn)};else{var wo=Ca(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);di=function(){if(wo){var l=document.documentElement.style;kh=l[wo],l[wo]="none"}},hi=function(){wo&&(document.documentElement.style[wo]=kh,kh=void 0)}}function Th(){ct(window,"dragstart",bn)}function Ph(){Qt(window,"dragstart",bn)}var du,Ih;function ka(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(_s(),du=l,Ih=l.style.outlineStyle,l.style.outlineStyle="none",ct(window,"keydown",_s))}function _s(){du&&(du.style.outlineStyle=Ih,du=void 0,Ih=void 0,Qt(window,"keydown",_s))}function Ah(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function hu(l){var h=l.getBoundingClientRect();return{x:h.width/l.offsetWidth||1,y:h.height/l.offsetHeight||1,boundingClientRect:h}}var Tp={__proto__:null,TRANSFORM:ql,TRANSITION:Wl,TRANSITION_END:Nh,get:Sh,getStyle:yo,create:Tt,remove:rn,empty:Hl,toFront:Ea,toBack:_o,hasClass:Eh,addClass:bt,removeClass:pn,setClass:Ch,getClass:zs,setOpacity:Tn,testProp:Ca,setTransform:Vi,setPosition:ft,getPosition:Us,get disableTextSelection(){return di},get enableTextSelection(){return hi},disableImageDrag:Th,enableImageDrag:Ph,preventOutline:ka,restoreOutline:_s,getSizedParentNode:Ah,getScale:hu};function ct(l,h,v,j){if(h&&typeof h=="object")for(var T in h)Rh(l,T,h[T],v);else{h=N(h);for(var $=0,Q=h.length;$<Q;$++)Rh(l,h[$],v,j)}return this}var $s="_leaflet_events";function Qt(l,h,v,j){if(arguments.length===1)Pp(l),delete l[$s];else if(h&&typeof h=="object")for(var T in h)Mh(l,T,h[T],v);else if(h=N(h),arguments.length===2)Pp(l,function(le){return I(h,le)!==-1});else for(var $=0,Q=h.length;$<Q;$++)Mh(l,h[$],v,j);return this}function Pp(l,h){for(var v in l[$s]){var j=v.split(/\d/)[0];(!h||h(j))&&Mh(l,j,null,null,v)}}var Bs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Rh(l,h,v,j){var T=h+u(v)+(j?"_"+u(j):"");if(l[$s]&&l[$s][T])return this;var $=function(le){return v.call(j||l,le||window.event)},Q=$;!it.touchNative&&it.pointer&&h.indexOf("touch")===0?$=Sp(l,h,$):it.touch&&h==="dblclick"?$=Bl(l,$):"addEventListener"in l?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?l.addEventListener(Bs[h]||h,$,it.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?($=function(le){le=le||window.event,Dh(l,le)&&Q(le)},l.addEventListener(Bs[h],$,!1)):l.addEventListener(h,Q,!1):l.attachEvent("on"+h,$),l[$s]=l[$s]||{},l[$s][T]=$}function Mh(l,h,v,j,T){T=T||h+u(v)+(j?"_"+u(j):"");var $=l[$s]&&l[$s][T];if(!$)return this;!it.touchNative&&it.pointer&&h.indexOf("touch")===0?Ep(l,h,$):it.touch&&h==="dblclick"?Sa(l,$):"removeEventListener"in l?l.removeEventListener(Bs[h]||h,$,!1):l.detachEvent("on"+h,$),l[$s][T]=null}function qs(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function bo(l){return Rh(l,"wheel",qs),this}function jo(l){return ct(l,"mousedown touchstart dblclick contextmenu",qs),l._leaflet_disable_click=!0,this}function bn(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function ws(l){return bn(l),qs(l),this}function Oh(l){if(l.composedPath)return l.composedPath();for(var h=[],v=l.target;v;)h.push(v),v=v.parentNode;return h}function fu(l,h){if(!h)return new A(l.clientX,l.clientY);var v=hu(h),j=v.boundingClientRect;return new A((l.clientX-j.left)/v.x-h.clientLeft,(l.clientY-j.top)/v.y-h.clientTop)}var gn=it.linux&&it.chrome?window.devicePixelRatio:it.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ip(l){return it.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/gn:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Dh(l,h){var v=h.relatedTarget;if(!v)return!0;try{for(;v&&v!==l;)v=v.parentNode}catch{return!1}return v!==l}var Ap={__proto__:null,on:ct,off:Qt,stopPropagation:qs,disableScrollPropagation:bo,disableClickPropagation:jo,preventDefault:bn,stop:ws,getPropagationPath:Oh,getMousePosition:fu,getWheelDelta:Ip,isExternalTarget:Dh,addListener:ct,removeListener:Qt},Lh=K.extend({run:function(l,h,v,j){this.stop(),this._el=l,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(j||.5,.2),this._startPos=Us(l),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(l){var h=+new Date-this._startTime,v=this._duration*1e3;h<v?this._runFrame(this._easeOut(h/v),l):(this._runFrame(1),this._complete())},_runFrame:function(l,h){var v=this._startPos.add(this._offset.multiplyBy(l));h&&v._round(),ft(this._el,v),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),Et=K.extend({options:{crs:pe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,h){h=b(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(Oe(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Wl&&it.any3d&&!it.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ct(this._proxy,Nh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,h,v){if(h=h===void 0?this._zoom:this._limitZoom(h),l=this._limitCenter(Oe(l),h,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=i({animate:v.animate},v.zoom),v.pan=i({animate:v.animate,duration:v.duration},v.pan));var j=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,h,v.zoom):this._tryAnimatedPan(l,v.pan);if(j)return clearTimeout(this._sizeTimer),this}return this._resetView(l,h,v.pan&&v.pan.noMoveStart),this},setZoom:function(l,h){return this._loaded?this.setView(this.getCenter(),l,{zoom:h}):(this._zoom=l,this)},zoomIn:function(l,h){return l=l||(it.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,h)},zoomOut:function(l,h){return l=l||(it.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,h)},setZoomAround:function(l,h,v){var j=this.getZoomScale(h),T=this.getSize().divideBy(2),$=l instanceof A?l:this.latLngToContainerPoint(l),Q=$.subtract(T).multiplyBy(1-1/j),le=this.containerPointToLatLng(T.add(Q));return this.setView(le,h,{zoom:v})},_getBoundsCenterZoom:function(l,h){h=h||{},l=l.getBounds?l.getBounds():be(l);var v=B(h.paddingTopLeft||h.padding||[0,0]),j=B(h.paddingBottomRight||h.padding||[0,0]),T=this.getBoundsZoom(l,!1,v.add(j));if(T=typeof h.maxZoom=="number"?Math.min(h.maxZoom,T):T,T===1/0)return{center:l.getCenter(),zoom:T};var $=j.subtract(v).divideBy(2),Q=this.project(l.getSouthWest(),T),le=this.project(l.getNorthEast(),T),ue=this.unproject(Q.add(le).divideBy(2).add($),T);return{center:ue,zoom:T}},fitBounds:function(l,h){if(l=be(l),!l.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(l,h);return this.setView(v.center,v.zoom,h)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,h){return this.setView(l,this._zoom,{pan:h})},panBy:function(l,h){if(l=B(l).round(),h=h||{},!l.x&&!l.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Lh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){bt(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,v,h.duration||.25,h.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,h,v){if(v=v||{},v.animate===!1||!it.any3d)return this.setView(l,h,v);this._stop();var j=this.project(this.getCenter()),T=this.project(l),$=this.getSize(),Q=this._zoom;l=Oe(l),h=h===void 0?Q:h;var le=Math.max($.x,$.y),ue=le*this.getZoomScale(Q,h),Ne=T.distanceTo(j)||1,Be=1.42,ut=Be*Be;function Nt(Hn){var Kp=Hn?-1:1,z6=Hn?ue:le,U6=ue*ue-le*le+Kp*ut*ut*Ne*Ne,$6=2*z6*ut*Ne,f0=U6/$6,zS=Math.sqrt(f0*f0+1)-f0,B6=zS<1e-9?-18:Math.log(zS);return B6}function $r(Hn){return(Math.exp(Hn)-Math.exp(-Hn))/2}function dr(Hn){return(Math.exp(Hn)+Math.exp(-Hn))/2}function Hs(Hn){return $r(Hn)/dr(Hn)}var as=Nt(0);function Eu(Hn){return le*(dr(as)/dr(as+Be*Hn))}function D6(Hn){return le*(dr(as)*Hs(as+Be*Hn)-$r(as))/ut}function L6(Hn){return 1-Math.pow(1-Hn,1.5)}var F6=Date.now(),FS=(Nt(1)-as)/Be,V6=v.duration?1e3*v.duration:1e3*FS*.8;function VS(){var Hn=(Date.now()-F6)/V6,Kp=L6(Hn)*FS;Hn<=1?(this._flyToFrame=F(VS,this),this._move(this.unproject(j.add(T.subtract(j).multiplyBy(D6(Kp)/Ne)),Q),this.getScaleZoom(le/Eu(Kp),Q),{flyTo:!0})):this._move(l,h)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),VS.call(this),this},flyToBounds:function(l,h){var v=this._getBoundsCenterZoom(l,h);return this.flyTo(v.center,v.zoom,h)},setMaxBounds:function(l){return l=be(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var h=this.options.minZoom;return this.options.minZoom=l,this._loaded&&h!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var h=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&h!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,h){this._enforcingBounds=!0;var v=this.getCenter(),j=this._limitCenter(v,this._zoom,be(l));return v.equals(j)||this.panTo(j,h),this._enforcingBounds=!1,this},panInside:function(l,h){h=h||{};var v=B(h.paddingTopLeft||h.padding||[0,0]),j=B(h.paddingBottomRight||h.padding||[0,0]),T=this.project(this.getCenter()),$=this.project(l),Q=this.getPixelBounds(),le=de([Q.min.add(v),Q.max.subtract(j)]),ue=le.getSize();if(!le.contains($)){this._enforcingBounds=!0;var Ne=$.subtract(le.getCenter()),Be=le.extend($).getSize().subtract(ue);T.x+=Ne.x<0?-Be.x:Be.x,T.y+=Ne.y<0?-Be.y:Be.y,this.panTo(this.unproject(T),h),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=i({animate:!1,pan:!0},l===!0?{animate:!0}:l);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),j=h.divideBy(2).round(),T=v.divideBy(2).round(),$=j.subtract(T);return!$.x&&!$.y?this:(l.animate&&l.pan?this.panBy($):(l.pan&&this._rawPanBy($),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=i({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=o(this._handleGeolocationResponse,this),v=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,v,l):navigator.geolocation.getCurrentPosition(h,v,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var h=l.code,v=l.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var h=l.coords.latitude,v=l.coords.longitude,j=new Ee(h,v),T=j.toBounds(l.coords.accuracy*2),$=this._locateOptions;if($.setView){var Q=this.getBoundsZoom(T);this.setView(j,$.maxZoom?Math.min(Q,$.maxZoom):Q)}var le={latlng:j,bounds:T,timestamp:l.timestamp};for(var ue in l.coords)typeof l.coords[ue]=="number"&&(le[ue]=l.coords[ue]);this.fire("locationfound",le)}},addHandler:function(l,h){if(!h)return this;var v=this[l]=new h(this);return this._handlers.push(v),this.options[l]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),rn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)rn(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,h){var v="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),j=Tt("div",v,h||this._mapPane);return l&&(this._panes[l]=j),j},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),h=this.unproject(l.getBottomLeft()),v=this.unproject(l.getTopRight());return new ve(h,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,h,v){l=be(l),v=B(v||[0,0]);var j=this.getZoom()||0,T=this.getMinZoom(),$=this.getMaxZoom(),Q=l.getNorthWest(),le=l.getSouthEast(),ue=this.getSize().subtract(v),Ne=de(this.project(le,j),this.project(Q,j)).getSize(),Be=it.any3d?this.options.zoomSnap:1,ut=ue.x/Ne.x,Nt=ue.y/Ne.y,$r=h?Math.max(ut,Nt):Math.min(ut,Nt);return j=this.getScaleZoom($r,j),Be&&(j=Math.round(j/(Be/100))*(Be/100),j=h?Math.ceil(j/Be)*Be:Math.floor(j/Be)*Be),Math.max(T,Math.min($,j))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new A(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,h){var v=this._getTopLeftPoint(l,h);return new X(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,h){var v=this.options.crs;return h=h===void 0?this._zoom:h,v.scale(l)/v.scale(h)},getScaleZoom:function(l,h){var v=this.options.crs;h=h===void 0?this._zoom:h;var j=v.zoom(l*v.scale(h));return isNaN(j)?1/0:j},project:function(l,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(Oe(l),h)},unproject:function(l,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(B(l),h)},layerPointToLatLng:function(l){var h=B(l).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(l){var h=this.project(Oe(l))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(Oe(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(be(l))},distance:function(l,h){return this.options.crs.distance(Oe(l),Oe(h))},containerPointToLayerPoint:function(l){return B(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return B(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var h=this.containerPointToLayerPoint(B(l));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Oe(l)))},mouseEventToContainerPoint:function(l){return fu(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var h=this._container=Sh(l);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ct(h,"scroll",this._onScroll,this),this._containerId=u(h)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&it.any3d,bt(l,"leaflet-container"+(it.touch?" leaflet-touch":"")+(it.retina?" leaflet-retina":"")+(it.ielt9?" leaflet-oldie":"")+(it.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=yo(l,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ft(this._mapPane,new A(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(bt(l.markerPane,"leaflet-zoom-hide"),bt(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,h,v){ft(this._mapPane,new A(0,0));var j=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var T=this._zoom!==h;this._moveStart(T,v)._move(l,h)._moveEnd(T),this.fire("viewreset"),j&&this.fire("load")},_moveStart:function(l,h){return l&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(l,h,v,j){h===void 0&&(h=this._zoom);var T=this._zoom!==h;return this._zoom=h,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),j?v&&v.pinch&&this.fire("zoom",v):((T||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){ft(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[u(this._container)]=this;var h=l?Qt:ct;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),it.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,h){for(var v=[],j,T=h==="mouseout"||h==="mouseover",$=l.target||l.srcElement,Q=!1;$;){if(j=this._targets[u($)],j&&(h==="click"||h==="preclick")&&this._draggableMoved(j)){Q=!0;break}if(j&&j.listens(h,!0)&&(T&&!Dh($,l)||(v.push(j),T))||$===this._container)break;$=$.parentNode}return!v.length&&!Q&&!T&&this.listens(h,!0)&&(v=[this]),v},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var h=l.target||l.srcElement;if(!(!this._loaded||h._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(h))){var v=l.type;v==="mousedown"&&ka(h),this._fireDOMEvent(l,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,h,v){if(l.type==="click"){var j=i({},l);j.type="preclick",this._fireDOMEvent(j,j.type,v)}var T=this._findEventTargets(l,h);if(v){for(var $=[],Q=0;Q<v.length;Q++)v[Q].listens(h,!0)&&$.push(v[Q]);T=$.concat(T)}if(T.length){h==="contextmenu"&&bn(l);var le=T[0],ue={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var Ne=le.getLatLng&&(!le._radius||le._radius<=10);ue.containerPoint=Ne?this.latLngToContainerPoint(le.getLatLng()):this.mouseEventToContainerPoint(l),ue.layerPoint=this.containerPointToLayerPoint(ue.containerPoint),ue.latlng=Ne?le.getLatLng():this.layerPointToLatLng(ue.layerPoint)}for(Q=0;Q<T.length;Q++)if(T[Q].fire(h,ue,!0),ue.originalEvent._stopped||T[Q].options.bubblingMouseEvents===!1&&I(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,h=this._handlers.length;l<h;l++)this._handlers[l].disable()},whenReady:function(l,h){return this._loaded?l.call(h||this,{target:this}):this.on("load",l,h),this},_getMapPanePos:function(){return Us(this._mapPane)||new A(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,h){var v=l&&h!==void 0?this._getNewPixelOrigin(l,h):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,h){var v=this.getSize()._divideBy(2);return this.project(l,h)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,h,v){var j=this._getNewPixelOrigin(v,h);return this.project(l,h)._subtract(j)},_latLngBoundsToNewLayerBounds:function(l,h,v){var j=this._getNewPixelOrigin(v,h);return de([this.project(l.getSouthWest(),h)._subtract(j),this.project(l.getNorthWest(),h)._subtract(j),this.project(l.getSouthEast(),h)._subtract(j),this.project(l.getNorthEast(),h)._subtract(j)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,h,v){if(!v)return l;var j=this.project(l,h),T=this.getSize().divideBy(2),$=new X(j.subtract(T),j.add(T)),Q=this._getBoundsOffset($,v,h);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?l:this.unproject(j.add(Q),h)},_limitOffset:function(l,h){if(!h)return l;var v=this.getPixelBounds(),j=new X(v.min.add(l),v.max.add(l));return l.add(this._getBoundsOffset(j,h))},_getBoundsOffset:function(l,h,v){var j=de(this.project(h.getNorthEast(),v),this.project(h.getSouthWest(),v)),T=j.min.subtract(l.min),$=j.max.subtract(l.max),Q=this._rebound(T.x,-$.x),le=this._rebound(T.y,-$.y);return new A(Q,le)},_rebound:function(l,h){return l+h>0?Math.round(l-h)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(h))},_limitZoom:function(l){var h=this.getMinZoom(),v=this.getMaxZoom(),j=it.any3d?this.options.zoomSnap:1;return j&&(l=Math.round(l/j)*j),Math.max(h,Math.min(v,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,h){var v=this._getCenterOffset(l)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,h),!0)},_createAnimProxy:function(){var l=this._proxy=Tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(h){var v=ql,j=this._proxy.style[v];Vi(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),j===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){rn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),h=this.getZoom();Vi(this._proxy,this.project(l,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,h,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var j=this.getZoomScale(h),T=this._getCenterOffset(l)._divideBy(1-1/j);return v.animate!==!0&&!this.getSize().contains(T)?!1:(F(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(l,h,!0)},this),!0)},_animateZoom:function(l,h,v,j){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=h,bt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:h,noUpdate:j}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function mu(l,h){return new Et(l,h)}var is=H.extend({options:{position:"topright"},initialize:function(l){b(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var h=this._map;return h&&h.removeControl(this),this.options.position=l,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var h=this._container=this.onAdd(l),v=this.getPosition(),j=l._controlCorners[v];return bt(h,"leaflet-control"),v.indexOf("bottom")!==-1?j.insertBefore(h,j.firstChild):j.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(rn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Ur=function(l){return new is(l)};Et.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},h="leaflet-",v=this._controlContainer=Tt("div",h+"control-container",this._container);function j(T,$){var Q=h+T+" "+h+$;l[T+$]=Tt("div",Q,v)}j("top","left"),j("top","right"),j("bottom","left"),j("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)rn(this._controlCorners[l]);rn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Fh=is.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,h,v,j){return v<j?-1:j<v?1:0}},initialize:function(l,h,v){b(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var j in l)this._addLayer(l[j],j);for(j in h)this._addLayer(h[j],j,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return is.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,h){return this._addLayer(l,h),this._map?this._update():this},addOverlay:function(l,h){return this._addLayer(l,h,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var h=this._getLayer(u(l));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){bt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(bt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):pn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",h=this._container=Tt("div",l),v=this.options.collapsed;h.setAttribute("aria-haspopup",!0),jo(h),bo(h);var j=this._section=Tt("section",l+"-list");v&&(this._map.on("click",this.collapse,this),ct(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=Tt("a",l+"-toggle",h);T.href="#",T.title="Layers",T.setAttribute("role","button"),ct(T,{keydown:function($){$.keyCode===13&&this._expandSafely()},click:function($){bn($),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=Tt("div",l+"-base",j),this._separator=Tt("div",l+"-separator",j),this._overlaysList=Tt("div",l+"-overlays",j),h.appendChild(j)},_getLayer:function(l){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&u(this._layers[h].layer)===l)return this._layers[h]},_addLayer:function(l,h,v){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:h,overlay:v}),this.options.sortLayers&&this._layers.sort(o(function(j,T){return this.options.sortFunction(j.layer,T.layer,j.name,T.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Hl(this._baseLayersList),Hl(this._overlaysList),this._layerControlInputs=[];var l,h,v,j,T=0;for(v=0;v<this._layers.length;v++)j=this._layers[v],this._addItem(j),h=h||j.overlay,l=l||!j.overlay,T+=j.overlay?0:1;return this.options.hideSingleBase&&(l=l&&T>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=h&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var h=this._getLayer(u(l.target)),v=h.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;v&&this._map.fire(v,h)},_createRadioElement:function(l,h){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(h?' checked="checked"':"")+"/>",j=document.createElement("div");return j.innerHTML=v,j.firstChild},_addItem:function(l){var h=document.createElement("label"),v=this._map.hasLayer(l.layer),j;l.overlay?(j=document.createElement("input"),j.type="checkbox",j.className="leaflet-control-layers-selector",j.defaultChecked=v):j=this._createRadioElement("leaflet-base-layers_"+u(this),v),this._layerControlInputs.push(j),j.layerId=u(l.layer),ct(j,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+l.name;var $=document.createElement("span");h.appendChild($),$.appendChild(j),$.appendChild(T);var Q=l.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,h,v,j=[],T=[];this._handlingClick=!0;for(var $=l.length-1;$>=0;$--)h=l[$],v=this._getLayer(h.layerId).layer,h.checked?j.push(v):h.checked||T.push(v);for($=0;$<T.length;$++)this._map.hasLayer(T[$])&&this._map.removeLayer(T[$]);for($=0;$<j.length;$++)this._map.hasLayer(j[$])||this._map.addLayer(j[$]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,h,v,j=this._map.getZoom(),T=l.length-1;T>=0;T--)h=l[T],v=this._getLayer(h.layerId).layer,h.disabled=v.options.minZoom!==void 0&&j<v.options.minZoom||v.options.maxZoom!==void 0&&j>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,ct(l,"click",bn),this.expand();var h=this;setTimeout(function(){Qt(l,"click",bn),h._preventClick=!1})}}),o0=function(l,h,v){return new Fh(l,h,v)},Ta=is.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var h="leaflet-control-zoom",v=Tt("div",h+" leaflet-bar"),j=this.options;return this._zoomInButton=this._createButton(j.zoomInText,j.zoomInTitle,h+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(j.zoomOutText,j.zoomOutTitle,h+"-out",v,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,h,v,j,T){var $=Tt("a",v,j);return $.innerHTML=l,$.href="#",$.title=h,$.setAttribute("role","button"),$.setAttribute("aria-label",h),jo($),ct($,"click",ws),ct($,"click",T,this),ct($,"click",this._refocusOnMap,this),$},_updateDisabled:function(){var l=this._map,h="leaflet-disabled";pn(this._zoomInButton,h),pn(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(bt(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(bt(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});Et.mergeOptions({zoomControl:!0}),Et.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ta,this.addControl(this.zoomControl))});var Rp=function(l){return new Ta(l)},pu=is.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var h="leaflet-control-scale",v=Tt("div",h),j=this.options;return this._addScales(j,h+"-line",v),l.on(j.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),v},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,h,v){l.metric&&(this._mScale=Tt("div",h,v)),l.imperial&&(this._iScale=Tt("div",h,v))},_update:function(){var l=this._map,h=l.getSize().y/2,v=l.distance(l.containerPointToLatLng([0,h]),l.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(v)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var h=this._getRoundNum(l),v=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,v,h/l)},_updateImperial:function(l){var h=l*3.2808399,v,j,T;h>5280?(v=h/5280,j=this._getRoundNum(v),this._updateScale(this._iScale,j+" mi",j/v)):(T=this._getRoundNum(h),this._updateScale(this._iScale,T+" ft",T/h))},_updateScale:function(l,h,v){l.style.width=Math.round(this.options.maxWidth*v)+"px",l.innerHTML=h},_getRoundNum:function(l){var h=Math.pow(10,(Math.floor(l)+"").length-1),v=l/h;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,h*v}}),gu=function(l){return new pu(l)},Mp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',No=is.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(it.inlineSvg?Mp+" ":"")+"Leaflet</a>"},initialize:function(l){b(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Tt("div","leaflet-control-attribution"),jo(this._container);for(var h in l._layers)l._layers[h].getAttribution&&this.addAttribution(l._layers[h].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var h in this._attributions)this._attributions[h]&&l.push(h);var v=[];this.options.prefix&&v.push(this.options.prefix),l.length&&v.push(l.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});Et.mergeOptions({attributionControl:!0}),Et.addInitHook(function(){this.options.attributionControl&&new No().addTo(this)});var l0=function(l){return new No(l)};is.Layers=Fh,is.Zoom=Ta,is.Scale=pu,is.Attribution=No,Ur.layers=o0,Ur.zoom=Rp,Ur.scale=gu,Ur.attribution=l0;var bs=H.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bs.addTo=function(l,h){return l.addHandler(h,this),this};var Gl={Events:Z},Vh=it.touch?"touchstart mousedown":"mousedown",fi=K.extend({options:{clickTolerance:3},initialize:function(l,h,v,j){b(this,j),this._element=l,this._dragStartTarget=h||l,this._preventOutline=v},enable:function(){this._enabled||(ct(this._dragStartTarget,Vh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fi._dragging===this&&this.finishDrag(!0),Qt(this._dragStartTarget,Vh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!Eh(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){fi._dragging===this&&this.finishDrag();return}if(!(fi._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(fi._dragging=this,this._preventOutline&&ka(this._element),Th(),di(),!this._moving)){this.fire("down");var h=l.touches?l.touches[0]:l,v=Ah(this._element);this._startPoint=new A(h.clientX,h.clientY),this._startPos=Us(this._element),this._parentScale=hu(v);var j=l.type==="mousedown";ct(document,j?"mousemove":"touchmove",this._onMove,this),ct(document,j?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var h=l.touches&&l.touches.length===1?l.touches[0]:l,v=new A(h.clientX,h.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,bn(l),this._moved||(this.fire("dragstart"),this._moved=!0,bt(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),bt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),ft(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){pn(document.body,"leaflet-dragging"),this._lastTarget&&(pn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qt(document,"mousemove touchmove",this._onMove,this),Qt(document,"mouseup touchend touchcancel",this._onUp,this),Ph(),hi();var h=this._moved&&this._moving;this._moving=!1,fi._dragging=!1,h&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function vu(l,h,v){var j,T=[1,4,2,8],$,Q,le,ue,Ne,Be,ut,Nt;for($=0,Be=l.length;$<Be;$++)l[$]._code=zi(l[$],h);for(le=0;le<4;le++){for(ut=T[le],j=[],$=0,Be=l.length,Q=Be-1;$<Be;Q=$++)ue=l[$],Ne=l[Q],ue._code&ut?Ne._code&ut||(Nt=ur(Ne,ue,ut,h,v),Nt._code=zi(Nt,h),j.push(Nt)):(Ne._code&ut&&(Nt=ur(Ne,ue,ut,h,v),Nt._code=zi(Nt,h),j.push(Nt)),j.push(ue));l=j}return l}function xu(l,h){var v,j,T,$,Q,le,ue,Ne,Be;if(!l||l.length===0)throw new Error("latlngs not passed");m(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var ut=Oe([0,0]),Nt=be(l),$r=Nt.getNorthWest().distanceTo(Nt.getSouthWest())*Nt.getNorthEast().distanceTo(Nt.getNorthWest());$r<1700&&(ut=yu(l));var dr=l.length,Hs=[];for(v=0;v<dr;v++){var as=Oe(l[v]);Hs.push(h.project(Oe([as.lat-ut.lat,as.lng-ut.lng])))}for(le=ue=Ne=0,v=0,j=dr-1;v<dr;j=v++)T=Hs[v],$=Hs[j],Q=T.y*$.x-$.y*T.x,ue+=(T.x+$.x)*Q,Ne+=(T.y+$.y)*Q,le+=Q*3;le===0?Be=Hs[0]:Be=[ue/le,Ne/le];var Eu=h.unproject(B(Be));return Oe([Eu.lat+ut.lat,Eu.lng+ut.lng])}function yu(l){for(var h=0,v=0,j=0,T=0;T<l.length;T++){var $=Oe(l[T]);h+=$.lat,v+=$.lng,j++}return Oe([h/j,v/j])}var _u={__proto__:null,clipPolygon:vu,polygonCenter:xu,centroid:yu};function zh(l,h){if(!h||!l.length)return l.slice();var v=h*h;return l=Dp(l,v),l=Op(l,v),l}function Uh(l,h,v){return Math.sqrt(Ws(l,h,v,!0))}function Pa(l,h,v){return Ws(l,h,v)}function Op(l,h){var v=l.length,j=typeof Uint8Array<"u"?Uint8Array:Array,T=new j(v);T[0]=T[v-1]=1,wu(l,T,h,0,v-1);var $,Q=[];for($=0;$<v;$++)T[$]&&Q.push(l[$]);return Q}function wu(l,h,v,j,T){var $=0,Q,le,ue;for(le=j+1;le<=T-1;le++)ue=Ws(l[le],l[j],l[T],!0),ue>$&&(Q=le,$=ue);$>v&&(h[Q]=1,wu(l,h,v,j,Q),wu(l,h,v,Q,T))}function Dp(l,h){for(var v=[l[0]],j=1,T=0,$=l.length;j<$;j++)Lp(l[j],l[T])>h&&(v.push(l[j]),T=j);return T<$-1&&v.push(l[$-1]),v}var $h;function Kl(l,h,v,j,T){var $=j?$h:zi(l,v),Q=zi(h,v),le,ue,Ne;for($h=Q;;){if(!($|Q))return[l,h];if($&Q)return!1;le=$||Q,ue=ur(l,h,le,v,T),Ne=zi(ue,v),le===$?(l=ue,$=Ne):(h=ue,Q=Ne)}}function ur(l,h,v,j,T){var $=h.x-l.x,Q=h.y-l.y,le=j.min,ue=j.max,Ne,Be;return v&8?(Ne=l.x+$*(ue.y-l.y)/Q,Be=ue.y):v&4?(Ne=l.x+$*(le.y-l.y)/Q,Be=le.y):v&2?(Ne=ue.x,Be=l.y+Q*(ue.x-l.x)/$):v&1&&(Ne=le.x,Be=l.y+Q*(le.x-l.x)/$),new A(Ne,Be,T)}function zi(l,h){var v=0;return l.x<h.min.x?v|=1:l.x>h.max.x&&(v|=2),l.y<h.min.y?v|=4:l.y>h.max.y&&(v|=8),v}function Lp(l,h){var v=h.x-l.x,j=h.y-l.y;return v*v+j*j}function Ws(l,h,v,j){var T=h.x,$=h.y,Q=v.x-T,le=v.y-$,ue=Q*Q+le*le,Ne;return ue>0&&(Ne=((l.x-T)*Q+(l.y-$)*le)/ue,Ne>1?(T=v.x,$=v.y):Ne>0&&(T+=Q*Ne,$+=le*Ne)),Q=l.x-T,le=l.y-$,j?Q*Q+le*le:new A(T,$)}function m(l){return!E(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function C(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),m(l)}function M(l,h){var v,j,T,$,Q,le,ue,Ne;if(!l||l.length===0)throw new Error("latlngs not passed");m(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Be=Oe([0,0]),ut=be(l),Nt=ut.getNorthWest().distanceTo(ut.getSouthWest())*ut.getNorthEast().distanceTo(ut.getNorthWest());Nt<1700&&(Be=yu(l));var $r=l.length,dr=[];for(v=0;v<$r;v++){var Hs=Oe(l[v]);dr.push(h.project(Oe([Hs.lat-Be.lat,Hs.lng-Be.lng])))}for(v=0,j=0;v<$r-1;v++)j+=dr[v].distanceTo(dr[v+1])/2;if(j===0)Ne=dr[0];else for(v=0,$=0;v<$r-1;v++)if(Q=dr[v],le=dr[v+1],T=Q.distanceTo(le),$+=T,$>j){ue=($-j)/T,Ne=[le.x-ue*(le.x-Q.x),le.y-ue*(le.y-Q.y)];break}var as=h.unproject(B(Ne));return Oe([as.lat+Be.lat,as.lng+Be.lng])}var W={__proto__:null,simplify:zh,pointToSegmentDistance:Uh,closestPointOnSegment:Pa,clipSegment:Kl,_getEdgeIntersection:ur,_getBitCode:zi,_sqClosestPointOnSegment:Ws,isFlat:m,_flat:C,polylineCenter:M},ae={project:function(l){return new A(l.lng,l.lat)},unproject:function(l){return new Ee(l.y,l.x)},bounds:new X([-180,-90],[180,90])},he={R:6378137,R_MINOR:6356752314245179e-9,bounds:new X([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var h=Math.PI/180,v=this.R,j=l.lat*h,T=this.R_MINOR/v,$=Math.sqrt(1-T*T),Q=$*Math.sin(j),le=Math.tan(Math.PI/4-j/2)/Math.pow((1-Q)/(1+Q),$/2);return j=-v*Math.log(Math.max(le,1e-10)),new A(l.lng*h*v,j)},unproject:function(l){for(var h=180/Math.PI,v=this.R,j=this.R_MINOR/v,T=Math.sqrt(1-j*j),$=Math.exp(-l.y/v),Q=Math.PI/2-2*Math.atan($),le=0,ue=.1,Ne;le<15&&Math.abs(ue)>1e-7;le++)Ne=T*Math.sin(Q),Ne=Math.pow((1-Ne)/(1+Ne),T/2),ue=Math.PI/2-2*Math.atan($*Ne)-Q,Q+=ue;return new Ee(Q*h,l.x*h/v)}},De={__proto__:null,LonLat:ae,Mercator:he,SphericalMercator:ne},qt=i({},re,{code:"EPSG:3395",projection:he,transformation:function(){var l=.5/(Math.PI*he.R);return oe(l,.5,-l,.5)}()}),Wn=i({},re,{code:"EPSG:4326",projection:ae,transformation:oe(1/180,1,-1/180,.5)}),Rt=i({},Se,{projection:ae,transformation:oe(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,h){var v=h.lng-l.lng,j=h.lat-l.lat;return Math.sqrt(v*v+j*j)},infinite:!0});Se.Earth=re,Se.EPSG3395=qt,Se.EPSG3857=pe,Se.EPSG900913=Te,Se.EPSG4326=Wn,Se.Simple=Rt;var Xt=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[u(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[u(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var h=l.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var v=this.getEvents();h.on(v,this),this.once("remove",function(){h.off(v,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});Et.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var h=u(l);return this._layers[h]?this:(this._layers[h]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var h=u(l);return this._layers[h]?(this._loaded&&l.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return u(l)in this._layers},eachLayer:function(l,h){for(var v in this._layers)l.call(h,this._layers[v]);return this},_addLayers:function(l){l=l?E(l)?l:[l]:[];for(var h=0,v=l.length;h<v;h++)this.addLayer(l[h])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[u(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var h=u(l);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,h=-1/0,v=this._getZoomSpan();for(var j in this._zoomBoundLayers){var T=this._zoomBoundLayers[j].options;l=T.minZoom===void 0?l:Math.min(l,T.minZoom),h=T.maxZoom===void 0?h:Math.max(h,T.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=l===1/0?void 0:l,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var jn=Xt.extend({initialize:function(l,h){b(this,h),this._layers={};var v,j;if(l)for(v=0,j=l.length;v<j;v++)this.addLayer(l[v])},addLayer:function(l){var h=this.getLayerId(l);return this._layers[h]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var h=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(l){var h=typeof l=="number"?l:this.getLayerId(l);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var h=Array.prototype.slice.call(arguments,1),v,j;for(v in this._layers)j=this._layers[v],j[l]&&j[l].apply(j,h);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,h){for(var v in this._layers)l.call(h,this._layers[v]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return u(l)}}),So=function(l,h){return new jn(l,h)},Mn=jn.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),jn.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),jn.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new ve;for(var h in this._layers){var v=this._layers[h];l.extend(v.getBounds?v.getBounds():v.getLatLng())}return l}}),bu=function(l,h){return new Mn(l,h)},Ui=H.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){b(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,h){var v=this._getIconUrl(l);if(!v){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var j=this._createImg(v,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(j,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(j.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),j},_setIconStyles:function(l,h){var v=this.options,j=v[h+"Size"];typeof j=="number"&&(j=[j,j]);var T=B(j),$=B(h==="shadow"&&v.shadowAnchor||v.iconAnchor||T&&T.divideBy(2,!0));l.className="leaflet-marker-"+h+" "+(v.className||""),$&&(l.style.marginLeft=-$.x+"px",l.style.marginTop=-$.y+"px"),T&&(l.style.width=T.x+"px",l.style.height=T.y+"px")},_createImg:function(l,h){return h=h||document.createElement("img"),h.src=l,h},_getIconUrl:function(l){return it.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function v6(l){return new Ui(l)}var Bh=Ui.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Bh.imagePath!="string"&&(Bh.imagePath=this._detectIconPath()),(this.options.imagePath||Bh.imagePath)+Ui.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var h=function(v,j,T){var $=j.exec(v);return $&&$[T]};return l=h(l,/^url\((['"])?(.+)\1\)$/,2),l&&h(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Tt("div","leaflet-default-icon-path",document.body),h=yo(l,"background-image")||yo(l,"backgroundImage");if(document.body.removeChild(l),h=this._stripUrl(h),h)return h;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),yS=bs.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new fi(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),bt(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var h=this._marker,v=h._map,j=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,$=Us(h._icon),Q=v.getPixelBounds(),le=v.getPixelOrigin(),ue=de(Q.min._subtract(le).add(T),Q.max._subtract(le).subtract(T));if(!ue.contains($)){var Ne=B((Math.max(ue.max.x,$.x)-ue.max.x)/(Q.max.x-ue.max.x)-(Math.min(ue.min.x,$.x)-ue.min.x)/(Q.min.x-ue.min.x),(Math.max(ue.max.y,$.y)-ue.max.y)/(Q.max.y-ue.max.y)-(Math.min(ue.min.y,$.y)-ue.min.y)/(Q.min.y-ue.min.y)).multiplyBy(j);v.panBy(Ne,{animate:!1}),this._draggable._newPos._add(Ne),this._draggable._startPos._add(Ne),ft(h._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=F(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,l)))},_onDrag:function(l){var h=this._marker,v=h._shadow,j=Us(h._icon),T=h._map.layerPointToLatLng(j);v&&ft(v,j),h._latlng=T,l.latlng=T,l.oldLatLng=this._oldLatLng,h.fire("move",l).fire("drag",l)},_onDragEnd:function(l){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),Fp=Xt.extend({options:{icon:new Bh,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,h){b(this,h),this._latlng=Oe(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var h=this._latlng;return this._latlng=Oe(l),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=l.icon.createIcon(this._icon),j=!1;v!==this._icon&&(this._icon&&this._removeIcon(),j=!0,l.title&&(v.title=l.title),v.tagName==="IMG"&&(v.alt=l.alt||"")),bt(v,h),l.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ct(v,"focus",this._panOnFocus,this);var T=l.icon.createShadow(this._shadow),$=!1;T!==this._shadow&&(this._removeShadow(),$=!0),T&&(bt(T,h),T.alt=""),this._shadow=T,l.opacity<1&&this._updateOpacity(),j&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&$&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qt(this._icon,"focus",this._panOnFocus,this),rn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&rn(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&ft(this._icon,l),this._shadow&&ft(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(bt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),yS)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new yS(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Tn(this._icon,l),this._shadow&&Tn(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var h=this.options.icon.options,v=h.iconSize?B(h.iconSize):B(0,0),j=h.iconAnchor?B(h.iconAnchor):B(0,0);l.panInside(this._latlng,{paddingTopLeft:j,paddingBottomRight:v.subtract(j)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function x6(l,h){return new Fp(l,h)}var Eo=Xt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return b(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Vp=Eo.extend({options:{fill:!0,radius:10},initialize:function(l,h){b(this,h),this._latlng=Oe(l),this._radius=this.options.radius},setLatLng:function(l){var h=this._latlng;return this._latlng=Oe(l),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var h=l&&l.radius||this._radius;return Eo.prototype.setStyle.call(this,l),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,h=this._radiusY||l,v=this._clickTolerance(),j=[l+v,h+v];this._pxBounds=new X(this._point.subtract(j),this._point.add(j))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function y6(l,h){return new Vp(l,h)}var c0=Vp.extend({initialize:function(l,h,v){if(typeof h=="number"&&(h=i({},v,{radius:h})),b(this,h),this._latlng=Oe(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new ve(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Eo.prototype.setStyle,_project:function(){var l=this._latlng.lng,h=this._latlng.lat,v=this._map,j=v.options.crs;if(j.distance===re.distance){var T=Math.PI/180,$=this._mRadius/re.R/T,Q=v.project([h+$,l]),le=v.project([h-$,l]),ue=Q.add(le).divideBy(2),Ne=v.unproject(ue).lat,Be=Math.acos((Math.cos($*T)-Math.sin(h*T)*Math.sin(Ne*T))/(Math.cos(h*T)*Math.cos(Ne*T)))/T;(isNaN(Be)||Be===0)&&(Be=$/Math.cos(Math.PI/180*h)),this._point=ue.subtract(v.getPixelOrigin()),this._radius=isNaN(Be)?0:ue.x-v.project([Ne,l-Be]).x,this._radiusY=ue.y-Q.y}else{var ut=j.unproject(j.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(ut).x}this._updateBounds()}});function _6(l,h,v){return new c0(l,h,v)}var Ia=Eo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,h){b(this,h),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var h=1/0,v=null,j=Ws,T,$,Q=0,le=this._parts.length;Q<le;Q++)for(var ue=this._parts[Q],Ne=1,Be=ue.length;Ne<Be;Ne++){T=ue[Ne-1],$=ue[Ne];var ut=j(l,T,$,!0);ut<h&&(h=ut,v=j(l,T,$))}return v&&(v.distance=Math.sqrt(h)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return M(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,h){return h=h||this._defaultShape(),l=Oe(l),h.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new ve,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return m(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var h=[],v=m(l),j=0,T=l.length;j<T;j++)v?(h[j]=Oe(l[j]),this._bounds.extend(h[j])):h[j]=this._convertLatLngs(l[j]);return h},_project:function(){var l=new X;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),h=new A(l,l);this._rawPxBounds&&(this._pxBounds=new X([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(l,h,v){var j=l[0]instanceof Ee,T=l.length,$,Q;if(j){for(Q=[],$=0;$<T;$++)Q[$]=this._map.latLngToLayerPoint(l[$]),v.extend(Q[$]);h.push(Q)}else for($=0;$<T;$++)this._projectLatlngs(l[$],h,v)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,v,j,T,$,Q,le,ue;for(v=0,T=0,$=this._rings.length;v<$;v++)for(ue=this._rings[v],j=0,Q=ue.length;j<Q-1;j++)le=Kl(ue[j],ue[j+1],l,j,!0),le&&(h[T]=h[T]||[],h[T].push(le[0]),(le[1]!==ue[j+1]||j===Q-2)&&(h[T].push(le[1]),T++))}},_simplifyPoints:function(){for(var l=this._parts,h=this.options.smoothFactor,v=0,j=l.length;v<j;v++)l[v]=zh(l[v],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,h){var v,j,T,$,Q,le,ue=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(v=0,$=this._parts.length;v<$;v++)for(le=this._parts[v],j=0,Q=le.length,T=Q-1;j<Q;T=j++)if(!(!h&&j===0)&&Uh(l,le[T],le[j])<=ue)return!0;return!1}});function w6(l,h){return new Ia(l,h)}Ia._flat=C;var ju=Ia.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var h=Ia.prototype._convertLatLngs.call(this,l),v=h.length;return v>=2&&h[0]instanceof Ee&&h[0].equals(h[v-1])&&h.pop(),h},_setLatLngs:function(l){Ia.prototype._setLatLngs.call(this,l),m(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return m(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,h=this.options.weight,v=new A(h,h);if(l=new X(l.min.subtract(v),l.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var j=0,T=this._rings.length,$;j<T;j++)$=vu(this._rings[j],l,!0),$.length&&this._parts.push($)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var h=!1,v,j,T,$,Q,le,ue,Ne;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for($=0,ue=this._parts.length;$<ue;$++)for(v=this._parts[$],Q=0,Ne=v.length,le=Ne-1;Q<Ne;le=Q++)j=v[Q],T=v[le],j.y>l.y!=T.y>l.y&&l.x<(T.x-j.x)*(l.y-j.y)/(T.y-j.y)+j.x&&(h=!h);return h||Ia.prototype._containsPoint.call(this,l,!0)}});function b6(l,h){return new ju(l,h)}var Aa=Mn.extend({initialize:function(l,h){b(this,h),this._layers={},l&&this.addData(l)},addData:function(l){var h=E(l)?l:l.features,v,j,T;if(h){for(v=0,j=h.length;v<j;v++)T=h[v],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var $=this.options;if($.filter&&!$.filter(l))return this;var Q=zp(l,$);return Q?(Q.feature=Bp(l),Q.defaultOptions=Q.options,this.resetStyle(Q),$.onEachFeature&&$.onEachFeature(l,Q),this.addLayer(Q)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=i({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(h){this._setLayerStyle(h,l)},this)},_setLayerStyle:function(l,h){l.setStyle&&(typeof h=="function"&&(h=h(l.feature)),l.setStyle(h))}});function zp(l,h){var v=l.type==="Feature"?l.geometry:l,j=v?v.coordinates:null,T=[],$=h&&h.pointToLayer,Q=h&&h.coordsToLatLng||u0,le,ue,Ne,Be;if(!j&&!v)return null;switch(v.type){case"Point":return le=Q(j),_S($,l,le,h);case"MultiPoint":for(Ne=0,Be=j.length;Ne<Be;Ne++)le=Q(j[Ne]),T.push(_S($,l,le,h));return new Mn(T);case"LineString":case"MultiLineString":return ue=Up(j,v.type==="LineString"?0:1,Q),new Ia(ue,h);case"Polygon":case"MultiPolygon":return ue=Up(j,v.type==="Polygon"?1:2,Q),new ju(ue,h);case"GeometryCollection":for(Ne=0,Be=v.geometries.length;Ne<Be;Ne++){var ut=zp({geometry:v.geometries[Ne],type:"Feature",properties:l.properties},h);ut&&T.push(ut)}return new Mn(T);case"FeatureCollection":for(Ne=0,Be=v.features.length;Ne<Be;Ne++){var Nt=zp(v.features[Ne],h);Nt&&T.push(Nt)}return new Mn(T);default:throw new Error("Invalid GeoJSON object.")}}function _S(l,h,v,j){return l?l(h,v):new Fp(v,j&&j.markersInheritOptions&&j)}function u0(l){return new Ee(l[1],l[0],l[2])}function Up(l,h,v){for(var j=[],T=0,$=l.length,Q;T<$;T++)Q=h?Up(l[T],h-1,v):(v||u0)(l[T]),j.push(Q);return j}function d0(l,h){return l=Oe(l),l.alt!==void 0?[g(l.lng,h),g(l.lat,h),g(l.alt,h)]:[g(l.lng,h),g(l.lat,h)]}function $p(l,h,v,j){for(var T=[],$=0,Q=l.length;$<Q;$++)T.push(h?$p(l[$],m(l[$])?0:h-1,v,j):d0(l[$],j));return!h&&v&&T.length>0&&T.push(T[0].slice()),T}function Nu(l,h){return l.feature?i({},l.feature,{geometry:h}):Bp(h)}function Bp(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var h0={toGeoJSON:function(l){return Nu(this,{type:"Point",coordinates:d0(this.getLatLng(),l)})}};Fp.include(h0),c0.include(h0),Vp.include(h0),Ia.include({toGeoJSON:function(l){var h=!m(this._latlngs),v=$p(this._latlngs,h?1:0,!1,l);return Nu(this,{type:(h?"Multi":"")+"LineString",coordinates:v})}}),ju.include({toGeoJSON:function(l){var h=!m(this._latlngs),v=h&&!m(this._latlngs[0]),j=$p(this._latlngs,v?2:h?1:0,!0,l);return h||(j=[j]),Nu(this,{type:(v?"Multi":"")+"Polygon",coordinates:j})}}),jn.include({toMultiPoint:function(l){var h=[];return this.eachLayer(function(v){h.push(v.toGeoJSON(l).geometry.coordinates)}),Nu(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(l){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(l);var v=h==="GeometryCollection",j=[];return this.eachLayer(function(T){if(T.toGeoJSON){var $=T.toGeoJSON(l);if(v)j.push($.geometry);else{var Q=Bp($);Q.type==="FeatureCollection"?j.push.apply(j,Q.features):j.push(Q)}}}),v?Nu(this,{geometries:j,type:"GeometryCollection"}):{type:"FeatureCollection",features:j}}});function wS(l,h){return new Aa(l,h)}var j6=wS,qp=Xt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,h,v){this._url=l,this._bounds=be(h),b(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(bt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){rn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&Ea(this._image),this},bringToBack:function(){return this._map&&_o(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=be(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",h=this._image=l?this._url:Tt("img");if(bt(h,"leaflet-image-layer"),this._zoomAnimated&&bt(h,"leaflet-zoom-animated"),this.options.className&&bt(h,this.options.className),h.onselectstart=p,h.onmousemove=p,h.onload=o(this.fire,this,"load"),h.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(l){var h=this._map.getZoomScale(l.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Vi(this._image,v,h)},_reset:function(){var l=this._image,h=new X(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=h.getSize();ft(l,h.min),l.style.width=v.x+"px",l.style.height=v.y+"px"},_updateOpacity:function(){Tn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),N6=function(l,h,v){return new qp(l,h,v)},bS=qp.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",h=this._image=l?this._url:Tt("video");if(bt(h,"leaflet-image-layer"),this._zoomAnimated&&bt(h,"leaflet-zoom-animated"),this.options.className&&bt(h,this.options.className),h.onselectstart=p,h.onmousemove=p,h.onloadeddata=o(this.fire,this,"load"),l){for(var v=h.getElementsByTagName("source"),j=[],T=0;T<v.length;T++)j.push(v[T].src);this._url=v.length>0?j:[h.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var $=0;$<this._url.length;$++){var Q=Tt("source");Q.src=this._url[$],h.appendChild(Q)}}});function S6(l,h,v){return new bS(l,h,v)}var jS=qp.extend({_initImage:function(){var l=this._image=this._url;bt(l,"leaflet-image-layer"),this._zoomAnimated&&bt(l,"leaflet-zoom-animated"),this.options.className&&bt(l,this.options.className),l.onselectstart=p,l.onmousemove=p}});function E6(l,h,v){return new jS(l,h,v)}var $i=Xt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,h){l&&(l instanceof Ee||E(l))?(this._latlng=Oe(l),b(this,h)):(b(this,l),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Tn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Tn(this._container,1),this.bringToFront(),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Tn(this._container,0),this._removeTimeout=setTimeout(o(rn,void 0,this._container),200)):rn(this._container),this.options.interactive&&(pn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=Oe(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ea(this._container),this},bringToBack:function(){return this._map&&_o(this._container),this},_prepareOpen:function(l){var h=this._source;if(!h._map)return!1;if(h instanceof Mn){h=null;var v=this._source._layers;for(var j in v)if(v[j]._map){h=v[j];break}if(!h)return!1;this._source=h}if(!l)if(h.getCenter)l=h.getCenter();else if(h.getLatLng)l=h.getLatLng();else if(h.getBounds)l=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")l.innerHTML=h;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),h=B(this.options.offset),v=this._getAnchor();this._zoomAnimated?ft(this._container,l.add(v)):h=h.add(l).add(v);var j=this._containerBottom=-h.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=j+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});Et.include({_initOverlay:function(l,h,v,j){var T=h;return T instanceof l||(T=new l(j).setContent(h)),v&&T.setLatLng(v),T}}),Xt.include({_initOverlay:function(l,h,v,j){var T=v;return T instanceof l?(b(T,j),T._source=this):(T=h&&!j?h:new l(j,this),T.setContent(v)),T}});var Wp=$i.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,$i.prototype.openOn.call(this,l)},onAdd:function(l){$i.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Eo||this._source.on("preclick",qs))},onRemove:function(l){$i.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Eo||this._source.off("preclick",qs))},getEvents:function(){var l=$i.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",h=this._container=Tt("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=Tt("div",l+"-content-wrapper",h);if(this._contentNode=Tt("div",l+"-content",v),jo(h),bo(this._contentNode),ct(h,"contextmenu",qs),this._tipContainer=Tt("div",l+"-tip-container",h),this._tip=Tt("div",l+"-tip",this._tipContainer),this.options.closeButton){var j=this._closeButton=Tt("a",l+"-close-button",h);j.setAttribute("role","button"),j.setAttribute("aria-label","Close popup"),j.href="#close",j.innerHTML='<span aria-hidden="true">&#215;</span>',ct(j,"click",function(T){bn(T),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,h=l.style;h.width="",h.whiteSpace="nowrap";var v=l.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),h.width=v+1+"px",h.whiteSpace="",h.height="";var j=l.offsetHeight,T=this.options.maxHeight,$="leaflet-popup-scrolled";T&&j>T?(h.height=T+"px",bt(l,$)):pn(l,$),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),v=this._getAnchor();ft(this._container,h.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,h=parseInt(yo(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+h,j=this._containerWidth,T=new A(this._containerLeft,-v-this._containerBottom);T._add(Us(this._container));var $=l.layerPointToContainerPoint(T),Q=B(this.options.autoPanPadding),le=B(this.options.autoPanPaddingTopLeft||Q),ue=B(this.options.autoPanPaddingBottomRight||Q),Ne=l.getSize(),Be=0,ut=0;$.x+j+ue.x>Ne.x&&(Be=$.x+j-Ne.x+ue.x),$.x-Be-le.x<0&&(Be=$.x-le.x),$.y+v+ue.y>Ne.y&&(ut=$.y+v-Ne.y+ue.y),$.y-ut-le.y<0&&(ut=$.y-le.y),(Be||ut)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Be,ut]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),C6=function(l,h){return new Wp(l,h)};Et.mergeOptions({closePopupOnClick:!0}),Et.include({openPopup:function(l,h,v){return this._initOverlay(Wp,l,h,v).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Xt.include({bindPopup:function(l,h){return this._popup=this._initOverlay(Wp,this._popup,l,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Mn||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){ws(l);var h=l.layer||l.target;if(this._popup._source===h&&!(h instanceof Eo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=h,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Hp=$i.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){$i.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){$i.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=$i.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",h=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Tt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var h,v,j=this._map,T=this._container,$=j.latLngToContainerPoint(j.getCenter()),Q=j.layerPointToContainerPoint(l),le=this.options.direction,ue=T.offsetWidth,Ne=T.offsetHeight,Be=B(this.options.offset),ut=this._getAnchor();le==="top"?(h=ue/2,v=Ne):le==="bottom"?(h=ue/2,v=0):le==="center"?(h=ue/2,v=Ne/2):le==="right"?(h=0,v=Ne/2):le==="left"?(h=ue,v=Ne/2):Q.x<$.x?(le="right",h=0,v=Ne/2):(le="left",h=ue+(Be.x+ut.x)*2,v=Ne/2),l=l.subtract(B(h,v,!0)).add(Be).add(ut),pn(T,"leaflet-tooltip-right"),pn(T,"leaflet-tooltip-left"),pn(T,"leaflet-tooltip-top"),pn(T,"leaflet-tooltip-bottom"),bt(T,"leaflet-tooltip-"+le),ft(T,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Tn(this._container,l)},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(h)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),k6=function(l,h){return new Hp(l,h)};Et.include({openTooltip:function(l,h,v){return this._initOverlay(Hp,l,h,v).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Xt.include({bindTooltip:function(l,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Hp,this._tooltip,l,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var h=l?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[h](v),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Mn||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var h=typeof l.getElement=="function"&&l.getElement();h&&(ct(h,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),ct(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var h=typeof l.getElement=="function"&&l.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var h=l.latlng,v,j;this._tooltip.options.sticky&&l.originalEvent&&(v=this._map.mouseEventToContainerPoint(l.originalEvent),j=this._map.containerPointToLayerPoint(v),h=this._map.layerPointToLatLng(j)),this._tooltip.setLatLng(h)}});var NS=Ui.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var h=l&&l.tagName==="DIV"?l:document.createElement("div"),v=this.options;if(v.html instanceof Element?(Hl(h),h.appendChild(v.html)):h.innerHTML=v.html!==!1?v.html:"",v.bgPos){var j=B(v.bgPos);h.style.backgroundPosition=-j.x+"px "+-j.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function T6(l){return new NS(l)}Ui.Default=Bh;var qh=Xt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:it.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){b(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),rn(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ea(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_o(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof A?l:new A(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var h=this.getPane().children,v=-l(-1/0,1/0),j=0,T=h.length,$;j<T;j++)$=h[j].style.zIndex,h[j]!==this._container&&$&&(v=l(v,+$));isFinite(v)&&(this.options.zIndex=v+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!it.ielt9){Tn(this._container,this.options.opacity);var l=+new Date,h=!1,v=!1;for(var j in this._tiles){var T=this._tiles[j];if(!(!T.current||!T.loaded)){var $=Math.min(1,(l-T.loaded)/200);Tn(T.el,$),$<1?h=!0:(T.active?v=!0:this._onOpaqueTile(T),T.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),h&&(D(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,h=this.options.maxZoom;if(l!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===l?(this._levels[v].el.style.zIndex=h-Math.abs(l-v),this._onUpdateLevel(v)):(rn(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var j=this._levels[l],T=this._map;return j||(j=this._levels[l]={},j.el=Tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),j.el.style.zIndex=h,j.origin=T.project(T.unproject(T.getPixelOrigin()),l).round(),j.zoom=l,this._setZoomTransform(j,T.getCenter(),T.getZoom()),p(j.el.offsetWidth),this._onCreateLevel(j)),this._level=j,j}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var l,h,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)h=this._tiles[l],h.retain=h.current;for(l in this._tiles)if(h=this._tiles[l],h.current&&!h.active){var j=h.coords;this._retainParent(j.x,j.y,j.z,j.z-5)||this._retainChildren(j.x,j.y,j.z,j.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var h in this._tiles)this._tiles[h].coords.z===l&&this._removeTile(h)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)rn(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,h,v,j){var T=Math.floor(l/2),$=Math.floor(h/2),Q=v-1,le=new A(+T,+$);le.z=+Q;var ue=this._tileCoordsToKey(le),Ne=this._tiles[ue];return Ne&&Ne.active?(Ne.retain=!0,!0):(Ne&&Ne.loaded&&(Ne.retain=!0),Q>j?this._retainParent(T,$,Q,j):!1)},_retainChildren:function(l,h,v,j){for(var T=2*l;T<2*l+2;T++)for(var $=2*h;$<2*h+2;$++){var Q=new A(T,$);Q.z=v+1;var le=this._tileCoordsToKey(Q),ue=this._tiles[le];if(ue&&ue.active){ue.retain=!0;continue}else ue&&ue.loaded&&(ue.retain=!0);v+1<j&&this._retainChildren(T,$,v+1,j)}},_resetView:function(l){var h=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var h=this.options;return h.minNativeZoom!==void 0&&l<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<l?h.maxNativeZoom:l},_setView:function(l,h,v,j){var T=Math.round(h);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var $=this.options.updateWhenZooming&&T!==this._tileZoom;(!j||$)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(l),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(l,h)},_setZoomTransforms:function(l,h){for(var v in this._levels)this._setZoomTransform(this._levels[v],l,h)},_setZoomTransform:function(l,h,v){var j=this._map.getZoomScale(v,l.zoom),T=l.origin.multiplyBy(j).subtract(this._map._getNewPixelOrigin(h,v)).round();it.any3d?Vi(l.el,T,j):ft(l.el,T)},_resetGrid:function(){var l=this._map,h=l.options.crs,v=this._tileSize=this.getTileSize(),j=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,h.wrapLng[0]],j).x/v.x),Math.ceil(l.project([0,h.wrapLng[1]],j).x/v.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([h.wrapLat[0],0],j).y/v.x),Math.ceil(l.project([h.wrapLat[1],0],j).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var h=this._map,v=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),j=h.getZoomScale(v,this._tileZoom),T=h.project(l,this._tileZoom).floor(),$=h.getSize().divideBy(j*2);return new X(T.subtract($),T.add($))},_update:function(l){var h=this._map;if(h){var v=this._clampZoom(h.getZoom());if(l===void 0&&(l=h.getCenter()),this._tileZoom!==void 0){var j=this._getTiledPixelBounds(l),T=this._pxBoundsToTileRange(j),$=T.getCenter(),Q=[],le=this.options.keepBuffer,ue=new X(T.getBottomLeft().subtract([le,-le]),T.getTopRight().add([le,-le]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ne in this._tiles){var Be=this._tiles[Ne].coords;(Be.z!==this._tileZoom||!ue.contains(new A(Be.x,Be.y)))&&(this._tiles[Ne].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(l,v);return}for(var ut=T.min.y;ut<=T.max.y;ut++)for(var Nt=T.min.x;Nt<=T.max.x;Nt++){var $r=new A(Nt,ut);if($r.z=this._tileZoom,!!this._isValidTile($r)){var dr=this._tiles[this._tileCoordsToKey($r)];dr?dr.current=!0:Q.push($r)}}if(Q.sort(function(as,Eu){return as.distanceTo($)-Eu.distanceTo($)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Hs=document.createDocumentFragment();for(Nt=0;Nt<Q.length;Nt++)this._addTile(Q[Nt],Hs);this._level.el.appendChild(Hs)}}}},_isValidTile:function(l){var h=this._map.options.crs;if(!h.infinite){var v=this._globalTileRange;if(!h.wrapLng&&(l.x<v.min.x||l.x>v.max.x)||!h.wrapLat&&(l.y<v.min.y||l.y>v.max.y))return!1}if(!this.options.bounds)return!0;var j=this._tileCoordsToBounds(l);return be(this.options.bounds).overlaps(j)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var h=this._map,v=this.getTileSize(),j=l.scaleBy(v),T=j.add(v),$=h.unproject(j,l.z),Q=h.unproject(T,l.z);return[$,Q]},_tileCoordsToBounds:function(l){var h=this._tileCoordsToNwSe(l),v=new ve(h[0],h[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var h=l.split(":"),v=new A(+h[0],+h[1]);return v.z=+h[2],v},_removeTile:function(l){var h=this._tiles[l];h&&(rn(h.el),delete this._tiles[l],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){bt(l,"leaflet-tile");var h=this.getTileSize();l.style.width=h.x+"px",l.style.height=h.y+"px",l.onselectstart=p,l.onmousemove=p,it.ielt9&&this.options.opacity<1&&Tn(l,this.options.opacity)},_addTile:function(l,h){var v=this._getTilePos(l),j=this._tileCoordsToKey(l),T=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(T),this.createTile.length<2&&F(o(this._tileReady,this,l,null,T)),ft(T,v),this._tiles[j]={el:T,coords:l,current:!0},h.appendChild(T),this.fire("tileloadstart",{tile:T,coords:l})},_tileReady:function(l,h,v){h&&this.fire("tileerror",{error:h,tile:v,coords:l});var j=this._tileCoordsToKey(l);v=this._tiles[j],v&&(v.loaded=+new Date,this._map._fadeAnimated?(Tn(v.el,0),D(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),h||(bt(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),it.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var h=new A(this._wrapX?f(l.x,this._wrapX):l.x,this._wrapY?f(l.y,this._wrapY):l.y);return h.z=l.z,h},_pxBoundsToTileRange:function(l){var h=this.getTileSize();return new X(l.min.unscaleBy(h).floor(),l.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function P6(l){return new qh(l)}var Su=qh.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,h){this._url=l,h=b(this,h),h.detectRetina&&it.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,h){return this._url===l&&h===void 0&&(h=!0),this._url=l,h||this.redraw(),this},createTile:function(l,h){var v=document.createElement("img");return ct(v,"load",o(this._tileOnLoad,this,h,v)),ct(v,"error",o(this._tileOnError,this,h,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(l),v},getTileUrl:function(l){var h={r:it.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-l.y;this.options.tms&&(h.y=v),h["-y"]=v}return y(this._url,i(h,this.options))},_tileOnLoad:function(l,h){it.ielt9?setTimeout(o(l,this,null,h),0):l(null,h)},_tileOnError:function(l,h,v){var j=this.options.errorTileUrl;j&&h.getAttribute("src")!==j&&(h.src=j),l(v,h)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,h=this.options.maxZoom,v=this.options.zoomReverse,j=this.options.zoomOffset;return v&&(l=h-l),l+j},_getSubdomain:function(l){var h=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var l,h;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(h=this._tiles[l].el,h.onload=p,h.onerror=p,!h.complete)){h.src=O;var v=this._tiles[l].coords;rn(h),delete this._tiles[l],this.fire("tileabort",{tile:h,coords:v})}},_removeTile:function(l){var h=this._tiles[l];if(h)return h.el.setAttribute("src",O),qh.prototype._removeTile.call(this,l)},_tileReady:function(l,h,v){if(!(!this._map||v&&v.getAttribute("src")===O))return qh.prototype._tileReady.call(this,l,h,v)}});function SS(l,h){return new Su(l,h)}var ES=Su.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,h){this._url=l;var v=i({},this.defaultWmsParams);for(var j in h)j in this.options||(v[j]=h[j]);h=b(this,h);var T=h.detectRetina&&it.retina?2:1,$=this.getTileSize();v.width=$.x*T,v.height=$.y*T,this.wmsParams=v},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Su.prototype.onAdd.call(this,l)},getTileUrl:function(l){var h=this._tileCoordsToNwSe(l),v=this._crs,j=de(v.project(h[0]),v.project(h[1])),T=j.min,$=j.max,Q=(this._wmsVersion>=1.3&&this._crs===Wn?[T.y,T.x,$.y,$.x]:[T.x,T.y,$.x,$.y]).join(","),le=Su.prototype.getTileUrl.call(this,l);return le+S(this.wmsParams,le,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(l,h){return i(this.wmsParams,l),h||this.redraw(),this}});function I6(l,h){return new ES(l,h)}Su.WMS=ES,SS.wms=I6;var Ra=Xt.extend({options:{padding:.1},initialize:function(l){b(this,l),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),bt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,h){var v=this._map.getZoomScale(h,this._zoom),j=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,h),$=j.multiplyBy(-v).add(T).subtract(this._map._getNewPixelOrigin(l,h));it.any3d?Vi(this._container,$,v):ft(this._container,$)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,h=this._map.getSize(),v=this._map.containerPointToLayerPoint(h.multiplyBy(-l)).round();this._bounds=new X(v,v.add(h.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),CS=Ra.extend({options:{tolerance:0},getEvents:function(){var l=Ra.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ra.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");ct(l,"mousemove",this._onMouseMove,this),ct(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ct(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,rn(this._container),Qt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var h in this._layers)l=this._layers[h],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ra.prototype._update.call(this);var l=this._bounds,h=this._container,v=l.getSize(),j=it.retina?2:1;ft(h,l.min),h.width=j*v.x,h.height=j*v.y,h.style.width=v.x+"px",h.style.height=v.y+"px",it.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Ra.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[u(l)]=l;var h=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var h=l._order,v=h.next,j=h.prev;v?v.prev=j:this._drawLast=j,j?j.next=v:this._drawFirst=v,delete l._order,delete this._layers[u(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var h=l.options.dashArray.split(/[, ]+/),v=[],j,T;for(T=0;T<h.length;T++){if(j=Number(h[T]),isNaN(j))return;v.push(j)}l.options._dashArray=v}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var h=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new X,this._redrawBounds.extend(l._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(l._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var h=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,h=this._redrawBounds;if(this._ctx.save(),h){var v=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var j=this._drawFirst;j;j=j.next)l=j.layer,(!h||l._pxBounds&&l._pxBounds.intersects(h))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,h){if(this._drawing){var v,j,T,$,Q=l._parts,le=Q.length,ue=this._ctx;if(le){for(ue.beginPath(),v=0;v<le;v++){for(j=0,T=Q[v].length;j<T;j++)$=Q[v][j],ue[j?"lineTo":"moveTo"]($.x,$.y);h&&ue.closePath()}this._fillStroke(ue,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var h=l._point,v=this._ctx,j=Math.max(Math.round(l._radius),1),T=(Math.max(Math.round(l._radiusY),1)||j)/j;T!==1&&(v.save(),v.scale(1,T)),v.beginPath(),v.arc(h.x,h.y/T,j,0,Math.PI*2,!1),T!==1&&v.restore(),this._fillStroke(v,l)}},_fillStroke:function(l,h){var v=h.options;v.fill&&(l.globalAlpha=v.fillOpacity,l.fillStyle=v.fillColor||v.color,l.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(l.setLineDash&&l.setLineDash(h.options&&h.options._dashArray||[]),l.globalAlpha=v.opacity,l.lineWidth=v.weight,l.strokeStyle=v.color,l.lineCap=v.lineCap,l.lineJoin=v.lineJoin,l.stroke())},_onClick:function(l){for(var h=this._map.mouseEventToLayerPoint(l),v,j,T=this._drawFirst;T;T=T.next)v=T.layer,v.options.interactive&&v._containsPoint(h)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(v))&&(j=v);this._fireEvent(j?[j]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,h)}},_handleMouseOut:function(l){var h=this._hoveredLayer;h&&(pn(this._container,"leaflet-interactive"),this._fireEvent([h],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,h){if(!this._mouseHoverThrottled){for(var v,j,T=this._drawFirst;T;T=T.next)v=T.layer,v.options.interactive&&v._containsPoint(h)&&(j=v);j!==this._hoveredLayer&&(this._handleMouseOut(l),j&&(bt(this._container,"leaflet-interactive"),this._fireEvent([j],l,"mouseover"),this._hoveredLayer=j)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,h,v){this._map._fireDOMEvent(h,v||h.type,l)},_bringToFront:function(l){var h=l._order;if(h){var v=h.next,j=h.prev;if(v)v.prev=j;else return;j?j.next=v:v&&(this._drawFirst=v),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(l)}},_bringToBack:function(l){var h=l._order;if(h){var v=h.next,j=h.prev;if(j)j.next=v;else return;v?v.prev=j:j&&(this._drawLast=j),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(l)}}});function kS(l){return it.canvas?new CS(l):null}var Wh=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),A6={_initContainer:function(){this._container=Tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ra.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var h=l._container=Wh("shape");bt(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",l._path=Wh("path"),h.appendChild(l._path),this._updateStyle(l),this._layers[u(l)]=l},_addPath:function(l){var h=l._container;this._container.appendChild(h),l.options.interactive&&l.addInteractiveTarget(h)},_removePath:function(l){var h=l._container;rn(h),l.removeInteractiveTarget(h),delete this._layers[u(l)]},_updateStyle:function(l){var h=l._stroke,v=l._fill,j=l.options,T=l._container;T.stroked=!!j.stroke,T.filled=!!j.fill,j.stroke?(h||(h=l._stroke=Wh("stroke")),T.appendChild(h),h.weight=j.weight+"px",h.color=j.color,h.opacity=j.opacity,j.dashArray?h.dashStyle=E(j.dashArray)?j.dashArray.join(" "):j.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=j.lineCap.replace("butt","flat"),h.joinstyle=j.lineJoin):h&&(T.removeChild(h),l._stroke=null),j.fill?(v||(v=l._fill=Wh("fill")),T.appendChild(v),v.color=j.fillColor||j.color,v.opacity=j.fillOpacity):v&&(T.removeChild(v),l._fill=null)},_updateCircle:function(l){var h=l._point.round(),v=Math.round(l._radius),j=Math.round(l._radiusY||v);this._setPath(l,l._empty()?"M0 0":"AL "+h.x+","+h.y+" "+v+","+j+" 0,"+65535*360)},_setPath:function(l,h){l._path.v=h},_bringToFront:function(l){Ea(l._container)},_bringToBack:function(l){_o(l._container)}},Gp=it.vml?Wh:we,Hh=Ra.extend({_initContainer:function(){this._container=Gp("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gp("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){rn(this._container),Qt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ra.prototype._update.call(this);var l=this._bounds,h=l.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,v.setAttribute("width",h.x),v.setAttribute("height",h.y)),ft(v,l.min),v.setAttribute("viewBox",[l.min.x,l.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(l){var h=l._path=Gp("path");l.options.className&&bt(h,l.options.className),l.options.interactive&&bt(h,"leaflet-interactive"),this._updateStyle(l),this._layers[u(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){rn(l._path),l.removeInteractiveTarget(l._path),delete this._layers[u(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var h=l._path,v=l.options;h&&(v.stroke?(h.setAttribute("stroke",v.color),h.setAttribute("stroke-opacity",v.opacity),h.setAttribute("stroke-width",v.weight),h.setAttribute("stroke-linecap",v.lineCap),h.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?h.setAttribute("stroke-dasharray",v.dashArray):h.removeAttribute("stroke-dasharray"),v.dashOffset?h.setAttribute("stroke-dashoffset",v.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),v.fill?(h.setAttribute("fill",v.fillColor||v.color),h.setAttribute("fill-opacity",v.fillOpacity),h.setAttribute("fill-rule",v.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(l,h){this._setPath(l,se(l._parts,h))},_updateCircle:function(l){var h=l._point,v=Math.max(Math.round(l._radius),1),j=Math.max(Math.round(l._radiusY),1)||v,T="a"+v+","+j+" 0 1,0 ",$=l._empty()?"M0 0":"M"+(h.x-v)+","+h.y+T+v*2+",0 "+T+-v*2+",0 ";this._setPath(l,$)},_setPath:function(l,h){l._path.setAttribute("d",h)},_bringToFront:function(l){Ea(l._path)},_bringToBack:function(l){_o(l._path)}});it.vml&&Hh.include(A6);function TS(l){return it.svg||it.vml?new Hh(l):null}Et.include({getRenderer:function(l){var h=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var h=this._paneRenderers[l];return h===void 0&&(h=this._createRenderer({pane:l}),this._paneRenderers[l]=h),h},_createRenderer:function(l){return this.options.preferCanvas&&kS(l)||TS(l)}});var PS=ju.extend({initialize:function(l,h){ju.prototype.initialize.call(this,this._boundsToLatLngs(l),h)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=be(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function R6(l,h){return new PS(l,h)}Hh.create=Gp,Hh.pointsToPath=se,Aa.geometryToLayer=zp,Aa.coordsToLatLng=u0,Aa.coordsToLatLngs=Up,Aa.latLngToCoords=d0,Aa.latLngsToCoords=$p,Aa.getFeature=Nu,Aa.asFeature=Bp,Et.mergeOptions({boxZoom:!0});var IS=bs.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){ct(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){rn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),di(),Th(),this._startPoint=this._map.mouseEventToContainerPoint(l),ct(document,{contextmenu:ws,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Tt("div","leaflet-zoom-box",this._container),bt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var h=new X(this._point,this._startPoint),v=h.getSize();ft(this._box,h.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(rn(this._box),pn(this._container,"leaflet-crosshair")),hi(),Ph(),Qt(document,{contextmenu:ws,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var h=new ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Et.addInitHook("addHandler","boxZoom",IS),Et.mergeOptions({doubleClickZoom:!0});var AS=bs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var h=this._map,v=h.getZoom(),j=h.options.zoomDelta,T=l.originalEvent.shiftKey?v-j:v+j;h.options.doubleClickZoom==="center"?h.setZoom(T):h.setZoomAround(l.containerPoint,T)}});Et.addInitHook("addHandler","doubleClickZoom",AS),Et.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var RS=bs.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new fi(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}bt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pn(this._map._container,"leaflet-grab"),pn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=be(this._map.options.maxBounds);this._offsetLimit=de(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var h=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(h),this._prunePositions(h)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,h){return l-(l-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;l.x<h.min.x&&(l.x=this._viscousLimit(l.x,h.min.x)),l.y<h.min.y&&(l.y=this._viscousLimit(l.y,h.min.y)),l.x>h.max.x&&(l.x=this._viscousLimit(l.x,h.max.x)),l.y>h.max.y&&(l.y=this._viscousLimit(l.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,h=Math.round(l/2),v=this._initialWorldOffset,j=this._draggable._newPos.x,T=(j-h+v)%l+h-v,$=(j+h+v)%l-h-v,Q=Math.abs(T+v)<Math.abs($+v)?T:$;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(l){var h=this._map,v=h.options,j=!v.inertia||l.noInertia||this._times.length<2;if(h.fire("dragend",l),j)h.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),$=(this._lastTime-this._times[0])/1e3,Q=v.easeLinearity,le=T.multiplyBy(Q/$),ue=le.distanceTo([0,0]),Ne=Math.min(v.inertiaMaxSpeed,ue),Be=le.multiplyBy(Ne/ue),ut=Ne/(v.inertiaDeceleration*Q),Nt=Be.multiplyBy(-ut/2).round();!Nt.x&&!Nt.y?h.fire("moveend"):(Nt=h._limitOffset(Nt,h.options.maxBounds),F(function(){h.panBy(Nt,{duration:ut,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});Et.addInitHook("addHandler","dragging",RS),Et.mergeOptions({keyboard:!0,keyboardPanDelta:80});var MS=bs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),ct(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,h=document.documentElement,v=l.scrollTop||h.scrollTop,j=l.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(j,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var h=this._panKeys={},v=this.keyCodes,j,T;for(j=0,T=v.left.length;j<T;j++)h[v.left[j]]=[-1*l,0];for(j=0,T=v.right.length;j<T;j++)h[v.right[j]]=[l,0];for(j=0,T=v.down.length;j<T;j++)h[v.down[j]]=[0,l];for(j=0,T=v.up.length;j<T;j++)h[v.up[j]]=[0,-1*l]},_setZoomDelta:function(l){var h=this._zoomKeys={},v=this.keyCodes,j,T;for(j=0,T=v.zoomIn.length;j<T;j++)h[v.zoomIn[j]]=l;for(j=0,T=v.zoomOut.length;j<T;j++)h[v.zoomOut[j]]=-l},_addHooks:function(){ct(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var h=l.keyCode,v=this._map,j;if(h in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(j=this._panKeys[h],l.shiftKey&&(j=B(j).multiplyBy(3)),v.options.maxBounds&&(j=v._limitOffset(B(j),v.options.maxBounds)),v.options.worldCopyJump){var T=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(j)));v.panTo(T)}else v.panBy(j)}else if(h in this._zoomKeys)v.setZoom(v.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;ws(l)}}});Et.addInitHook("addHandler","keyboard",MS),Et.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var OS=bs.extend({addHooks:function(){ct(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var h=Ip(l),v=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var j=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),j),ws(l)},_performZoom:function(){var l=this._map,h=l.getZoom(),v=this._map.options.zoomSnap||0;l._stop();var j=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(j))))/Math.LN2,$=v?Math.ceil(T/v)*v:T,Q=l._limitZoom(h+(this._delta>0?$:-$))-h;this._delta=0,this._startTime=null,Q&&(l.options.scrollWheelZoom==="center"?l.setZoom(h+Q):l.setZoomAround(this._lastMousePos,h+Q))}});Et.addInitHook("addHandler","scrollWheelZoom",OS);var M6=600;Et.mergeOptions({tapHold:it.touchNative&&it.safari&&it.mobile,tapTolerance:15});var DS=bs.extend({addHooks:function(){ct(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var h=l.touches[0];this._startPos=this._newPos=new A(h.clientX,h.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ct(document,"touchend",bn),ct(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),M6),ct(document,"touchend touchcancel contextmenu",this._cancel,this),ct(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Qt(document,"touchend",bn),Qt(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Qt(document,"touchend touchcancel contextmenu",this._cancel,this),Qt(document,"touchmove",this._onMove,this)},_onMove:function(l){var h=l.touches[0];this._newPos=new A(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,h){var v=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});v._simulated=!0,h.target.dispatchEvent(v)}});Et.addInitHook("addHandler","tapHold",DS),Et.mergeOptions({touchZoom:it.touch,bounceAtZoomLimits:!0});var LS=bs.extend({addHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),ct(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pn(this._map._container,"leaflet-touch-zoom"),Qt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var h=this._map;if(!(!l.touches||l.touches.length!==2||h._animatingZoom||this._zooming)){var v=h.mouseEventToContainerPoint(l.touches[0]),j=h.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(v.add(j)._divideBy(2))),this._startDist=v.distanceTo(j),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),ct(document,"touchmove",this._onTouchMove,this),ct(document,"touchend touchcancel",this._onTouchEnd,this),bn(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var h=this._map,v=h.mouseEventToContainerPoint(l.touches[0]),j=h.mouseEventToContainerPoint(l.touches[1]),T=v.distanceTo(j)/this._startDist;if(this._zoom=h.getScaleZoom(T,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&T<1||this._zoom>h.getMaxZoom()&&T>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var $=v._add(j)._divideBy(2)._subtract(this._centerPoint);if(T===1&&$.x===0&&$.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract($),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var Q=o(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(Q,this,!0),bn(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),Qt(document,"touchmove",this._onTouchMove,this),Qt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Et.addInitHook("addHandler","touchZoom",LS),Et.BoxZoom=IS,Et.DoubleClickZoom=AS,Et.Drag=RS,Et.Keyboard=MS,Et.ScrollWheelZoom=OS,Et.TapHold=DS,Et.TouchZoom=LS,n.Bounds=X,n.Browser=it,n.CRS=Se,n.Canvas=CS,n.Circle=c0,n.CircleMarker=Vp,n.Class=H,n.Control=is,n.DivIcon=NS,n.DivOverlay=$i,n.DomEvent=Ap,n.DomUtil=Tp,n.Draggable=fi,n.Evented=K,n.FeatureGroup=Mn,n.GeoJSON=Aa,n.GridLayer=qh,n.Handler=bs,n.Icon=Ui,n.ImageOverlay=qp,n.LatLng=Ee,n.LatLngBounds=ve,n.Layer=Xt,n.LayerGroup=jn,n.LineUtil=W,n.Map=Et,n.Marker=Fp,n.Mixin=Gl,n.Path=Eo,n.Point=A,n.PolyUtil=_u,n.Polygon=ju,n.Polyline=Ia,n.Popup=Wp,n.PosAnimation=Lh,n.Projection=De,n.Rectangle=PS,n.Renderer=Ra,n.SVG=Hh,n.SVGOverlay=jS,n.TileLayer=Su,n.Tooltip=Hp,n.Transformation=Y,n.Util=P,n.VideoOverlay=bS,n.bind=o,n.bounds=de,n.canvas=kS,n.circle=_6,n.circleMarker=y6,n.control=Ur,n.divIcon=T6,n.extend=i,n.featureGroup=bu,n.geoJSON=wS,n.geoJson=j6,n.gridLayer=P6,n.icon=v6,n.imageOverlay=N6,n.latLng=Oe,n.latLngBounds=be,n.layerGroup=So,n.map=mu,n.marker=x6,n.point=B,n.polygon=b6,n.polyline=w6,n.popup=C6,n.rectangle=R6,n.setOptions=b,n.stamp=u,n.svg=TS,n.svgOverlay=E6,n.tileLayer=SS,n.tooltip=k6,n.transformation=oe,n.version=r,n.videoOverlay=S6;var O6=window.L;n.noConflict=function(){return window.L=O6,this},window.L=n})})(Nb,Nb.exports);var Yy=Nb.exports;const gh=El(Yy);function v3(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function x3(t,e){return e==null?function(r,i){const a=x.useRef();return a.current||(a.current=t(r,i)),a}:function(r,i){const a=x.useRef();a.current||(a.current=t(r,i));const o=x.useRef(r),{instance:c}=a.current;return x.useEffect(function(){o.current!==r&&(e(c,r,o.current),o.current=r)},[c,r,i]),a}}function kie(t,e){x.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function y3(t){return function(n){const r=p3(),i=t(g3(n,r),r);return wie(r.map,n.attribution),Cie(i.current,n.eventHandlers),kie(i.current,r),i}}function Tie(t,e){const n=x3(t,e),r=y3(n);return Sie(r)}function Pie(t,e){const n=x3(t,e),r=y3(n);return Eie(r)}function Iie(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function Aie(){return p3().map}function UN(t){const e=Aie();return x.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Sb(){return Sb=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sb.apply(this,arguments)}function Rie({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:a,placeholder:o,style:c,whenReady:u,zoom:d,...f},p){const[g]=x.useState({className:i,id:a,style:c}),[_,N]=x.useState(null);x.useImperativeHandle(p,()=>(_==null?void 0:_.map)??null,[_]);const b=x.useCallback(w=>{if(w!==null&&_===null){const y=new Yy.Map(w,f);n!=null&&d!=null?y.setView(n,d):t!=null&&y.fitBounds(t,e),u!=null&&y.whenReady(u),N(jie(y))}},[]);x.useEffect(()=>()=>{_==null||_.map.remove()},[_]);const S=_?Fe.createElement(m3,{value:_},r):o??null;return Fe.createElement("div",Sb({},g,{ref:b}),S)}const $N=x.forwardRef(Rie),BN=Tie(function({position:e,...n},r){const i=new Yy.Marker(e,n);return v3(i,Nie(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),qN=Pie(function({url:e,...n},r){const i=new Yy.TileLayer(e,g3(n,r));return v3(i,r)},function(e,n,r){Iie(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});delete gh.Icon.Default.prototype._getIconUrl;gh.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const Mie=({open:t,onOpenChange:e,listing:n})=>{var F;const{currentUser:r,userProfile:i}=mn(),{createPaymentRequest:a,loading:o}=Ky(),[c,u]=x.useState("method"),[d,f]=x.useState(null),[p,g]=x.useState({}),[_,N]=x.useState({location:"",date:void 0,time:"",notes:""}),[b,S]=x.useState(!1),[w,y]=x.useState(null),E=(D,P)=>{f(D),g(P),u("details")},I=async()=>{if(!(!r||!d))try{const D=_.date&&_.time?new Date(`${or(_.date,"yyyy-MM-dd")} ${_.time}`):void 0;await a({listingId:n.id,buyerId:r.uid,sellerId:n.sellerId,amount:n.price,currency:n.currency||"EUR",paymentMethod:d,meetingLocation:_.location,meetingDateTime:D,paymentDetails:p,notes:_.notes}),e(!1),O()}catch(D){console.error("Erreur lors de la création de la demande:",D)}},O=()=>{u("method"),f(null),g({}),N({location:"",date:void 0,time:"",notes:""})},q=(D,P)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:P||"EUR"}).format(D),R=D=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[D]||D;async function V(D,P){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${D}&lon=${P}`)).json()).display_name||""}function U(){return UN({click:async D=>{y([D.latlng.lat,D.latlng.lng]),S(!0);const P=await V(D.latlng.lat,D.latlng.lng);N(H=>({...H,location:P})),S(!1),xe.success("Adresse détectée automatiquement !")}}),w?s.jsx(BN,{position:w}):null}const k=()=>{if(!navigator.geolocation){xe.error("La géolocalisation n'est pas supportée par ce navigateur.");return}S(!0),navigator.geolocation.getCurrentPosition(async D=>{const{latitude:P,longitude:H}=D.coords;y([P,H]);const te=await V(P,H);te&&N(Z=>({...Z,location:te})),S(!1)},()=>{xe.error("Impossible d'accéder à la position."),S(!1)})};return s.jsx(da,{open:t,onOpenChange:e,children:s.jsxs(Ci,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(ha,{children:[s.jsxs(ki,{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-5 h-5"}),"Demande de paiement"]}),s.jsxs(yc,{children:['Créez une demande de paiement sécurisée pour "',n.title,'"']})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsxs("div",{className:`flex items-center ${c==="method"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="details"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Détails"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),s.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-4",children:[((F=n.images)==null?void 0:F[0])&&s.jsx("img",{src:n.images[0],alt:n.title,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:n.title}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",n.sellerName," • ",n.sellerUniversity]}),s.jsx("p",{className:"text-lg font-bold text-primary",children:q(n.price,n.currency||"EUR")})]})]})}),c==="method"&&s.jsx(h3,{amount:n.price,currency:n.currency||"EUR",onMethodSelect:E,selectedMethod:d}),c==="details"&&d&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Pt,{className:"w-5 h-5 text-green-600"}),s.jsxs("span",{className:"font-medium",children:["Mode de paiement sélectionné : ",R(d)]})]}),d==="cash"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(Mr,{className:"w-5 h-5"}),"Détails de la rencontre"]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Ge,{id:"meeting-location",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",value:_.location,onChange:D=>N(P=>({...P,location:D.target.value})),className:"flex-1"}),s.jsx(J,{type:"button",variant:"outline",onClick:k,disabled:b,title:"Détecter ma position",children:b?s.jsx("span",{className:"animate-spin",children:"📍"}):s.jsx("span",{children:"📍"})})]})]}),s.jsx("div",{className:"mt-3",children:s.jsxs($N,{center:w||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[s.jsx(qN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),s.jsx(U,{})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Re,{children:"Date de rencontre"}),s.jsxs(Bse,{children:[s.jsx(qse,{asChild:!0,children:s.jsxs(J,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[s.jsx(Xs,{className:"mr-2 h-4 w-4"}),_.date?or(_.date,"PPP",{locale:Dr}):s.jsx("span",{children:"Choisir une date"})]})}),s.jsx(QL,{className:"w-auto p-0",children:s.jsx(VL,{mode:"single",selected:_.date,onSelect:D=>N(P=>({...P,date:D})),disabled:D=>D<new Date,initialFocus:!0})})]})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"meeting-time",children:"Heure de rencontre"}),s.jsx(Ge,{id:"meeting-time",type:"time",value:_.time,onChange:D=>N(P=>({...P,time:D.target.value})),className:"mt-1"})]})]})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),s.jsx(ri,{id:"payment-notes",placeholder:"Informations complémentaires pour le vendeur...",value:_.notes,onChange:D=>N(P=>({...P,notes:D.target.value})),rows:3,className:"mt-1"})]}),s.jsxs($t,{className:"border-blue-200 bg-blue-50",children:[s.jsx(zt,{className:"h-4 w-4 text-blue-600"}),s.jsxs(Bt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Sécurité :"})," Un code de sécurité unique sera généré pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(J,{variant:"outline",onClick:()=>u("method"),className:"flex-1",children:"Retour"}),s.jsx(J,{onClick:()=>u("confirmation"),className:"flex-1",disabled:d==="cash"&&!_.location,children:"Continuer"})]})]}),c==="confirmation"&&d&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Récapitulatif de la demande"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),s.jsx("p",{className:"font-medium",children:R(d)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),s.jsx("p",{className:"font-medium",children:q(n.price,n.currency||"EUR")})]}),d==="cash"&&_.location&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),s.jsx("p",{className:"font-medium",children:_.location})]}),_.date&&_.time&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),s.jsxs("p",{className:"font-medium",children:[or(_.date,"PPP",{locale:Dr})," à ",_.time]})]})]})]}),_.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),s.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:_.notes})]})]}),s.jsxs($t,{children:[s.jsx(yl,{className:"h-4 w-4"}),s.jsx(Bt,{children:"En créant cette demande, vous vous engagez à effectuer le paiement selon les modalités convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(J,{variant:"outline",onClick:()=>u("details"),className:"flex-1",children:"Retour"}),s.jsx(J,{onClick:I,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Créer la demande"]})})]})]})]})]})})},Oie=({listing:t,className:e})=>{const{currentUser:n,userProfile:r}=mn(),{createConversation:i,setCurrentConversation:a,conversations:o}=Vy(),c=cr(),[u,d]=x.useState(!1),[f,p]=x.useState(!1),[g,_]=x.useState(""),[N,b]=x.useState(""),[S,w]=x.useState(!1);if((n==null?void 0:n.uid)===t.sellerId)return null;const y=o.find(R=>R.listingId===t.id&&R.participants.includes((n==null?void 0:n.uid)||"")&&R.participants.includes(t.sellerId)),E=()=>{if(!n){c("/auth");return}if(y){a(y),c("/messages");return}const R=`Bonjour ${t.sellerName},

Je suis intéressé(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si nécessaire.

Cordialement,
${(r==null?void 0:r.displayName)||"Un étudiant intéressé"}`;_(R),b((r==null?void 0:r.email)||""),d(!0)},I=()=>{if(!n){c("/auth");return}p(!0)},O=async()=>{var R;if(!g.trim()||!N.trim()||!n||!r){xe.error("Veuillez remplir tous les champs");return}w(!0);try{const V=await i(t.id,t.title,t.price,(R=t.images)==null?void 0:R[0],n.uid,t.sellerId,{displayName:r.displayName,photoURL:r.photoURL,university:r.university,isVerified:r.isVerified,email:r.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},g.trim());d(!1),xe.success(s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Message envoyé !"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["📧 ",t.sellerName," recevra une notification email"]})]}),s.jsxs(J,{size:"sm",variant:"ghost",onClick:()=>{xe.dismiss(),c("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",s.jsx(wm,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{c("/messages")},2e3)}catch(V){console.error("Erreur lors de l'envoi du message:",V),xe.error("Erreur lors de l'envoi du message")}finally{w(!1)}},q=(R,V)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const U=V||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:U}).format(R)}catch{return`${R} €`}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{onClick:E,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[s.jsx(wn,{className:"w-4 h-4 mr-2"}),y?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&s.jsxs(J,{onClick:I,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-4 h-4"}),"Payer"]})]}),s.jsx(da,{open:u,onOpenChange:d,children:s.jsxs(Ci,{className:"max-w-md",children:[s.jsx(ha,{children:s.jsxs(ki,{className:"flex items-center gap-2",children:[s.jsx(wn,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(oo,{className:"w-8 h-8",children:[s.jsx(lo,{src:t.sellerAvatar||void 0}),s.jsx(co,{children:t.sellerName[0]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),s.jsx("p",{className:"text-sm font-medium",children:t.title}),s.jsx("p",{className:"text-sm text-primary font-semibold",children:q(t.price,t.currency)})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"contact-email",children:"Votre email"}),s.jsx(Ge,{id:"contact-email",type:"email",value:N,onChange:R=>b(R.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"contact-message",children:"Votre message"}),s.jsx(ri,{id:"contact-message",value:g,onChange:R=>_(R.target.value),placeholder:"Décrivez votre intérêt pour cette annonce...",rows:6,className:"mt-1"})]}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(yl,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"📧 Notification automatique"}),s.jsxs("p",{children:["Votre message sera envoyé via la messagerie StudyMarket ET ",t.sellerName," recevra une notification email pour répondre rapidement."]})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{variant:"outline",onClick:()=>d(!1),className:"flex-1",children:"Annuler"}),s.jsx(J,{onClick:O,disabled:S||!g.trim()||!N.trim(),className:"flex-1",children:S?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Md,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),s.jsx(Mie,{open:f,onOpenChange:p,listing:t})]})},Die=()=>{var y;const{id:t}=z1(),e=cr(),{currentUser:n}=mn(),{currentListing:r,loading:i,fetchListingById:a}=hp(),{fetchUserFavorites:o}=aD(),[c,u]=x.useState(0);if(x.useEffect(()=>{t&&a(t)},[t,a]),x.useEffect(()=>{n&&o(n.uid)},[n,o]),i)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"animate-pulse space-y-6",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!r)return s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx(In,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a été supprimée."}),s.jsx(J,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const d=r,f=(n==null?void 0:n.uid)===d.sellerId,p=(E,I)=>{if(d.transactionType==="donation")return"Gratuit";if(d.transactionType==="exchange")return"Échange";const O=I||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:O}).format(E)}catch{return`${E} €`}},g=E=>{switch(E){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return E}},_=E=>{switch(E){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-orange-100 text-orange-800 border-orange-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=()=>{switch(d.transactionType){case"donation":return s.jsx(Rd,{className:"w-4 h-4"});case"exchange":return s.jsx(so,{className:"w-4 h-4"});case"service":return s.jsx(ah,{className:"w-4 h-4"});default:return s.jsx(tx,{className:"w-4 h-4"})}},b=()=>{switch(d.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},S=()=>{d.images&&d.images.length>1&&u(E=>E===d.images.length-1?0:E+1)},w=()=>{d.images&&d.images.length>1&&u(E=>E===0?d.images.length-1:E-1)};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-muted/30",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Ue,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),s.jsx("span",{children:"/"}),s.jsx(Ue,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-foreground",children:d.title})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(J,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[s.jsx(pc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:d.images&&d.images.length>0?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:d.images[c],alt:d.title,className:"w-full h-full object-cover"}),d.images.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:w,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image précédente",children:s.jsx(DG,{className:"w-6 h-6"})}),s.jsx("div",{onClick:S,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:s.jsx(Ji,{className:"w-6 h-6"})}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[c+1," / ",d.images.length]})]}),s.jsxs(da,{children:[s.jsx(md,{asChild:!0,children:s.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:s.jsx(gc,{className:"w-5 h-5"})})}),s.jsxs(Ci,{className:"max-w-4xl",children:[s.jsx(ki,{children:"Image en plein écran de l'annonce"}),s.jsx("img",{src:d.images[c],alt:d.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(gc,{className:"w-16 h-16 mx-auto mb-4"}),s.jsx("p",{children:"Aucune image disponible"})]})})}),d.images&&d.images.length>1&&s.jsx("div",{className:"grid grid-cols-6 gap-2",children:d.images.map((E,I)=>s.jsx("button",{onClick:()=>u(I),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${I===c?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:s.jsx("img",{src:E,alt:`${d.title} ${I+1}`,className:"w-full h-full object-cover"})},I))})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(fe,{children:s.jsx(me,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(at,{className:"bg-primary/10 text-primary border-primary/20",children:[N(),s.jsx("span",{className:"ml-1",children:b()})]}),d.sellerVerified&&s.jsxs(at,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(zt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsxs("div",{className:"text-3xl font-bold text-primary",children:[p(d.price,d.currency),d.transactionType==="service"&&s.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),d.transactionType==="exchange"&&d.exchangeFor&&s.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[s.jsx(so,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Recherche en échange :"})]}),s.jsx("p",{className:"text-purple-700 mt-1",children:d.exchangeFor})]}),d.aiPriceEstimate&&d.transactionType==="sale"&&s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[s.jsx(tp,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Prix estimé par IA :"})]}),s.jsxs("p",{className:"text-green-700 text-sm",children:[d.aiPriceEstimate.min,"€ - ",d.aiPriceEstimate.max,"€",s.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(d.aiPriceEstimate.confidence*100),"%)"]})]})]}),s.jsx("div",{className:"space-y-3",children:f?s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ue,{to:`/edit-listing/${d.id}`,children:s.jsxs(J,{variant:"outline",className:"w-full",children:[s.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Oie,{listing:d,className:"w-full"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(oD,{listing:d,size:"lg",showText:!1}),s.jsx(lD,{listing:d,size:"lg",showText:!1})]}),s.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:s.jsx(cc,{className:"w-5 h-5"})})]})]})})]})})}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsx(Je,{className:"text-lg",children:"Vendeur"})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(oo,{className:"w-12 h-12",children:[s.jsx(lo,{src:d.sellerAvatar||void 0}),s.jsx(co,{children:(y=d.sellerName[0])==null?void 0:y.toUpperCase()})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold",children:d.sellerName}),d.sellerVerified&&s.jsx(zt,{className:"w-4 h-4 text-green-600"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:d.sellerUniversity})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"23"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"98%"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),d.environmentalImpact&&s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"text-lg flex items-center gap-2",children:[s.jsx(Ei,{className:"w-5 h-5 text-green-600"}),"Impact écologique"]})}),s.jsx(me,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",d.environmentalImpact.co2Saved," kg CO₂"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"économisés en achetant d'occasion"})]})})]})]})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:d.title}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ad,{className:"w-4 h-4"}),s.jsxs("span",{children:[d.views," vues"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Un,{className:"w-4 h-4"}),s.jsx("span",{children:mh(d.createdAt,{addSuffix:!0,locale:Dr})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),s.jsx("span",{children:d.location.city})]})]})]}),s.jsx(at,{className:_(d.condition),children:g(d.condition)})]})}),s.jsx(me,{children:s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"whitespace-pre-wrap",children:d.description})})})]}),d.tags&&d.tags.length>0&&s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsx(Je,{className:"text-lg",children:"Tags"})}),s.jsx(me,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:d.tags.map((E,I)=>s.jsx(at,{variant:"secondary",children:E},I))})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"text-lg flex items-center gap-2",children:[s.jsx(Mr,{className:"w-5 h-5"}),"Localisation"]})}),s.jsxs(me,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:d.location.city}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.location.state,", ",d.location.country]})]}),d.location.campus&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Campus"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:d.location.campus})]}),d.location.university&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Université"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:d.location.university})]})]})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"text-lg flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5"}),"Conseils de sécurité"]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Pt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Pt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Vérifiez l'identité de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Pt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(yl,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]})]})};var vp=t=>t.type==="checkbox",uc=t=>t instanceof Date,Kr=t=>t==null;const _3=t=>typeof t=="object";var $n=t=>!Kr(t)&&!Array.isArray(t)&&_3(t)&&!uc(t),Lie=t=>$n(t)&&t.target?vp(t.target)?t.target.checked:t.target.value:t,Fie=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Vie=(t,e)=>t.has(Fie(e)),zie=t=>{const e=t.constructor&&t.constructor.prototype;return $n(e)&&e.hasOwnProperty("isPrototypeOf")},WN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Pr(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(WN&&(t instanceof Blob||r))&&(n||$n(t)))if(e=n?[]:{},!n&&!zie(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Pr(t[i]));else return t;return e}var Qy=t=>/^\w*$/.test(t),Zn=t=>t===void 0,HN=t=>Array.isArray(t)?t.filter(Boolean):[],GN=t=>HN(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Xe=(t,e,n)=>{if(!e||!$n(t))return n;const r=(Qy(e)?[e]:GN(e)).reduce((i,a)=>Kr(i)?i:i[a],t);return Zn(r)||r===t?Zn(t[e])?n:t[e]:r},Hi=t=>typeof t=="boolean",Jt=(t,e,n)=>{let r=-1;const i=Qy(e)?[e]:GN(e),a=i.length,o=a-1;for(;++r<a;){const c=i[r];let u=n;if(r!==o){const d=t[c];u=$n(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=u,t=t[c]}};const Ak={BLUR:"blur",FOCUS_OUT:"focusout"},wi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},La={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Uie=Fe.createContext(null);Uie.displayName="HookFormContext";var $ie=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==wi.all&&(e._proxyFormState[o]=!r||wi.all),t[o]}});return i};const Bie=typeof window<"u"?x.useLayoutEffect:x.useEffect;var na=t=>typeof t=="string",qie=(t,e,n,r,i)=>na(t)?(r&&e.watch.add(t),Xe(n,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),Xe(n,a))):(r&&(e.watchAll=!0),n),w3=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},$f=t=>Array.isArray(t)?t:[t],Rk=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},Eb=t=>Kr(t)||!_3(t);function qo(t,e){if(Eb(t)||Eb(e))return t===e;if(uc(t)&&uc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const a=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(uc(a)&&uc(o)||$n(a)&&$n(o)||Array.isArray(a)&&Array.isArray(o)?!qo(a,o):a!==o)return!1}}return!0}var ls=t=>$n(t)&&!Object.keys(t).length,KN=t=>t.type==="file",bi=t=>typeof t=="function",gx=t=>{if(!WN)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},b3=t=>t.type==="select-multiple",ZN=t=>t.type==="radio",Wie=t=>ZN(t)||vp(t),E_=t=>gx(t)&&t.isConnected;function Hie(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Zn(t)?r++:t[e[r++]];return t}function Gie(t){for(const e in t)if(t.hasOwnProperty(e)&&!Zn(t[e]))return!1;return!0}function nr(t,e){const n=Array.isArray(e)?e:Qy(e)?[e]:GN(e),r=n.length===1?t:Hie(t,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&($n(r)&&ls(r)||Array.isArray(r)&&Gie(r))&&nr(t,n.slice(0,-1)),t}var j3=t=>{for(const e in t)if(bi(t[e]))return!0;return!1};function vx(t,e={}){const n=Array.isArray(t);if($n(t)||n)for(const r in t)Array.isArray(t[r])||$n(t[r])&&!j3(t[r])?(e[r]=Array.isArray(t[r])?[]:{},vx(t[r],e[r])):Kr(t[r])||(e[r]=!0);return e}function N3(t,e,n){const r=Array.isArray(t);if($n(t)||r)for(const i in t)Array.isArray(t[i])||$n(t[i])&&!j3(t[i])?Zn(e)||Eb(n[i])?n[i]=Array.isArray(t[i])?vx(t[i],[]):{...vx(t[i])}:N3(t[i],Kr(e)?{}:e[i],n[i]):n[i]=!qo(t[i],e[i]);return n}var lf=(t,e)=>N3(t,e,vx(e));const Mk={value:!1,isValid:!1},Ok={value:!0,isValid:!0};var S3=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Zn(t[0].attributes.value)?Zn(t[0].value)||t[0].value===""?Ok:{value:t[0].value,isValid:!0}:Ok:Mk}return Mk},E3=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Zn(t)?t:e?t===""?NaN:t&&+t:n&&na(t)?new Date(t):r?r(t):t;const Dk={isValid:!1,value:null};var C3=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Dk):Dk;function Lk(t){const e=t.ref;return KN(e)?e.files:ZN(e)?C3(t.refs).value:b3(e)?[...e.selectedOptions].map(({value:n})=>n):vp(e)?S3(t.refs).value:E3(Zn(e.value)?t.ref.value:e.value,t)}var Kie=(t,e,n,r)=>{const i={};for(const a of t){const o=Xe(e,a);o&&Jt(i,a,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},xx=t=>t instanceof RegExp,cf=t=>Zn(t)?t:xx(t)?t.source:$n(t)?xx(t.value)?t.value.source:t.value:t,Fk=t=>({isOnSubmit:!t||t===wi.onSubmit,isOnBlur:t===wi.onBlur,isOnChange:t===wi.onChange,isOnAll:t===wi.all,isOnTouch:t===wi.onTouched});const Vk="AsyncFunction";var Zie=t=>!!t&&!!t.validate&&!!(bi(t.validate)&&t.validate.constructor.name===Vk||$n(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Vk)),Yie=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),zk=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Bf=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const a=Xe(t,i);if(a){const{_f:o,...c}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Bf(c,e))break}else if($n(c)&&Bf(c,e))break}}};function Uk(t,e,n){const r=Xe(t,n);if(r||Qy(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=Xe(e,a),c=Xe(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(c&&c.type)return{name:a,error:c};if(c&&c.root&&c.root.type)return{name:`${a}.root`,error:c.root};i.pop()}return{name:n}}var Qie=(t,e,n,r)=>{n(t);const{name:i,...a}=t;return ls(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||wi.all))},Xie=(t,e,n)=>!t||!e||t===e||$f(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),Jie=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,eae=(t,e)=>!HN(Xe(t,e)).length&&nr(t,e),tae=(t,e,n)=>{const r=$f(Xe(t,n));return Jt(r,"root",e[n]),Jt(t,n,r),t},ov=t=>na(t);function $k(t,e,n="validate"){if(ov(t)||Array.isArray(t)&&t.every(ov)||Hi(t)&&!t)return{type:n,message:ov(t)?t:"",ref:e}}var Ru=t=>$n(t)&&!xx(t)?t:{value:t,message:""},Bk=async(t,e,n,r,i,a)=>{const{ref:o,refs:c,required:u,maxLength:d,minLength:f,min:p,max:g,pattern:_,validate:N,name:b,valueAsNumber:S,mount:w}=t._f,y=Xe(n,b);if(!w||e.has(b))return{};const E=c?c[0]:o,I=D=>{i&&E.reportValidity&&(E.setCustomValidity(Hi(D)?"":D||""),E.reportValidity())},O={},q=ZN(o),R=vp(o),V=q||R,U=(S||KN(o))&&Zn(o.value)&&Zn(y)||gx(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,k=w3.bind(null,b,r,O),F=(D,P,H,te=La.maxLength,Z=La.minLength)=>{const K=D?P:H;O[b]={type:D?te:Z,message:K,ref:o,...k(D?te:Z,K)}};if(a?!Array.isArray(y)||!y.length:u&&(!V&&(U||Kr(y))||Hi(y)&&!y||R&&!S3(c).isValid||q&&!C3(c).isValid)){const{value:D,message:P}=ov(u)?{value:!!u,message:u}:Ru(u);if(D&&(O[b]={type:La.required,message:P,ref:E,...k(La.required,P)},!r))return I(P),O}if(!U&&(!Kr(p)||!Kr(g))){let D,P;const H=Ru(g),te=Ru(p);if(!Kr(y)&&!isNaN(y)){const Z=o.valueAsNumber||y&&+y;Kr(H.value)||(D=Z>H.value),Kr(te.value)||(P=Z<te.value)}else{const Z=o.valueAsDate||new Date(y),K=B=>new Date(new Date().toDateString()+" "+B),A=o.type=="time",z=o.type=="week";na(H.value)&&y&&(D=A?K(y)>K(H.value):z?y>H.value:Z>new Date(H.value)),na(te.value)&&y&&(P=A?K(y)<K(te.value):z?y<te.value:Z<new Date(te.value))}if((D||P)&&(F(!!D,H.message,te.message,La.max,La.min),!r))return I(O[b].message),O}if((d||f)&&!U&&(na(y)||a&&Array.isArray(y))){const D=Ru(d),P=Ru(f),H=!Kr(D.value)&&y.length>+D.value,te=!Kr(P.value)&&y.length<+P.value;if((H||te)&&(F(H,D.message,P.message),!r))return I(O[b].message),O}if(_&&!U&&na(y)){const{value:D,message:P}=Ru(_);if(xx(D)&&!y.match(D)&&(O[b]={type:La.pattern,message:P,ref:o,...k(La.pattern,P)},!r))return I(P),O}if(N){if(bi(N)){const D=await N(y,n),P=$k(D,E);if(P&&(O[b]={...P,...k(La.validate,P.message)},!r))return I(P.message),O}else if($n(N)){let D={};for(const P in N){if(!ls(D)&&!r)break;const H=$k(await N[P](y,n),E,P);H&&(D={...H,...k(P,H.message)},I(H.message),r&&(O[b]=D))}if(!ls(D)&&(O[b]={ref:E,...D},!r))return O}}return I(!0),O};const nae={mode:wi.onSubmit,reValidateMode:wi.onChange,shouldFocusError:!0};function rae(t={}){let e={...nae,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:bi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let i=$n(e.defaultValues)||$n(e.values)?Pr(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Pr(i),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,d=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const g={array:Rk(),state:Rk()},_=e.criteriaMode===wi.all,N=G=>ie=>{clearTimeout(d),d=setTimeout(G,ie)},b=async G=>{if(!e.disabled&&(f.isValid||p.isValid||G)){const ie=e.resolver?ls((await R()).errors):await U(r,!0);ie!==n.isValid&&g.state.next({isValid:ie})}},S=(G,ie)=>{!e.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((G||Array.from(c.mount)).forEach(ce=>{ce&&(ie?Jt(n.validatingFields,ce,ie):nr(n.validatingFields,ce))}),g.state.next({validatingFields:n.validatingFields,isValidating:!ls(n.validatingFields)}))},w=(G,ie=[],ce,Pe,Ae=!0,Ce=!0)=>{if(Pe&&ce&&!e.disabled){if(o.action=!0,Ce&&Array.isArray(Xe(r,G))){const Ve=ce(Xe(r,G),Pe.argA,Pe.argB);Ae&&Jt(r,G,Ve)}if(Ce&&Array.isArray(Xe(n.errors,G))){const Ve=ce(Xe(n.errors,G),Pe.argA,Pe.argB);Ae&&Jt(n.errors,G,Ve),eae(n.errors,G)}if((f.touchedFields||p.touchedFields)&&Ce&&Array.isArray(Xe(n.touchedFields,G))){const Ve=ce(Xe(n.touchedFields,G),Pe.argA,Pe.argB);Ae&&Jt(n.touchedFields,G,Ve)}(f.dirtyFields||p.dirtyFields)&&(n.dirtyFields=lf(i,a)),g.state.next({name:G,isDirty:F(G,ie),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Jt(a,G,ie)},y=(G,ie)=>{Jt(n.errors,G,ie),g.state.next({errors:n.errors})},E=G=>{n.errors=G,g.state.next({errors:n.errors,isValid:!1})},I=(G,ie,ce,Pe)=>{const Ae=Xe(r,G);if(Ae){const Ce=Xe(a,G,Zn(ce)?Xe(i,G):ce);Zn(Ce)||Pe&&Pe.defaultChecked||ie?Jt(a,G,ie?Ce:Lk(Ae._f)):H(G,Ce),o.mount&&b()}},O=(G,ie,ce,Pe,Ae)=>{let Ce=!1,Ve=!1;const He={name:G};if(!e.disabled){if(!ce||Pe){(f.isDirty||p.isDirty)&&(Ve=n.isDirty,n.isDirty=He.isDirty=F(),Ce=Ve!==He.isDirty);const nt=qo(Xe(i,G),ie);Ve=!!Xe(n.dirtyFields,G),nt?nr(n.dirtyFields,G):Jt(n.dirtyFields,G,!0),He.dirtyFields=n.dirtyFields,Ce=Ce||(f.dirtyFields||p.dirtyFields)&&Ve!==!nt}if(ce){const nt=Xe(n.touchedFields,G);nt||(Jt(n.touchedFields,G,ce),He.touchedFields=n.touchedFields,Ce=Ce||(f.touchedFields||p.touchedFields)&&nt!==ce)}Ce&&Ae&&g.state.next(He)}return Ce?He:{}},q=(G,ie,ce,Pe)=>{const Ae=Xe(n.errors,G),Ce=(f.isValid||p.isValid)&&Hi(ie)&&n.isValid!==ie;if(e.delayError&&ce?(u=N(()=>y(G,ce)),u(e.delayError)):(clearTimeout(d),u=null,ce?Jt(n.errors,G,ce):nr(n.errors,G)),(ce?!qo(Ae,ce):Ae)||!ls(Pe)||Ce){const Ve={...Pe,...Ce&&Hi(ie)?{isValid:ie}:{},errors:n.errors,name:G};n={...n,...Ve},g.state.next(Ve)}},R=async G=>{S(G,!0);const ie=await e.resolver(a,e.context,Kie(G||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return S(G),ie},V=async G=>{const{errors:ie}=await R(G);if(G)for(const ce of G){const Pe=Xe(ie,ce);Pe?Jt(n.errors,ce,Pe):nr(n.errors,ce)}else n.errors=ie;return ie},U=async(G,ie,ce={valid:!0})=>{for(const Pe in G){const Ae=G[Pe];if(Ae){const{_f:Ce,...Ve}=Ae;if(Ce){const He=c.array.has(Ce.name),nt=Ae._f&&Zie(Ae._f);nt&&f.validatingFields&&S([Pe],!0);const Yt=await Bk(Ae,c.disabled,a,_,e.shouldUseNativeValidation&&!ie,He);if(nt&&f.validatingFields&&S([Pe]),Yt[Ce.name]&&(ce.valid=!1,ie))break;!ie&&(Xe(Yt,Ce.name)?He?tae(n.errors,Yt,Ce.name):Jt(n.errors,Ce.name,Yt[Ce.name]):nr(n.errors,Ce.name))}!ls(Ve)&&await U(Ve,ie,ce)}}return ce.valid},k=()=>{for(const G of c.unMount){const ie=Xe(r,G);ie&&(ie._f.refs?ie._f.refs.every(ce=>!E_(ce)):!E_(ie._f.ref))&&Se(G)}c.unMount=new Set},F=(G,ie)=>!e.disabled&&(G&&ie&&Jt(a,G,ie),!qo(B(),i)),D=(G,ie,ce)=>qie(G,c,{...o.mount?a:Zn(ie)?i:na(G)?{[G]:ie}:ie},ce,ie),P=G=>HN(Xe(o.mount?a:i,G,e.shouldUnregister?Xe(i,G,[]):[])),H=(G,ie,ce={})=>{const Pe=Xe(r,G);let Ae=ie;if(Pe){const Ce=Pe._f;Ce&&(!Ce.disabled&&Jt(a,G,E3(ie,Ce)),Ae=gx(Ce.ref)&&Kr(ie)?"":ie,b3(Ce.ref)?[...Ce.ref.options].forEach(Ve=>Ve.selected=Ae.includes(Ve.value)):Ce.refs?vp(Ce.ref)?Ce.refs.forEach(Ve=>{(!Ve.defaultChecked||!Ve.disabled)&&(Array.isArray(Ae)?Ve.checked=!!Ae.find(He=>He===Ve.value):Ve.checked=Ae===Ve.value||!!Ae)}):Ce.refs.forEach(Ve=>Ve.checked=Ve.value===Ae):KN(Ce.ref)?Ce.ref.value="":(Ce.ref.value=Ae,Ce.ref.type||g.state.next({name:G,values:Pr(a)})))}(ce.shouldDirty||ce.shouldTouch)&&O(G,Ae,ce.shouldTouch,ce.shouldDirty,!0),ce.shouldValidate&&z(G)},te=(G,ie,ce)=>{for(const Pe in ie){if(!ie.hasOwnProperty(Pe))return;const Ae=ie[Pe],Ce=G+"."+Pe,Ve=Xe(r,Ce);(c.array.has(G)||$n(Ae)||Ve&&!Ve._f)&&!uc(Ae)?te(Ce,Ae,ce):H(Ce,Ae,ce)}},Z=(G,ie,ce={})=>{const Pe=Xe(r,G),Ae=c.array.has(G),Ce=Pr(ie);Jt(a,G,Ce),Ae?(g.array.next({name:G,values:Pr(a)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&ce.shouldDirty&&g.state.next({name:G,dirtyFields:lf(i,a),isDirty:F(G,Ce)})):Pe&&!Pe._f&&!Kr(Ce)?te(G,Ce,ce):H(G,Ce,ce),zk(G,c)&&g.state.next({...n}),g.state.next({name:o.mount?G:void 0,values:Pr(a)})},K=async G=>{o.mount=!0;const ie=G.target;let ce=ie.name,Pe=!0;const Ae=Xe(r,ce),Ce=nt=>{Pe=Number.isNaN(nt)||uc(nt)&&isNaN(nt.getTime())||qo(nt,Xe(a,ce,nt))},Ve=Fk(e.mode),He=Fk(e.reValidateMode);if(Ae){let nt,Yt;const tr=ie.type?Lk(Ae._f):Lie(G),qn=G.type===Ak.BLUR||G.type===Ak.FOCUS_OUT,zr=!Yie(Ae._f)&&!e.resolver&&!Xe(n.errors,ce)&&!Ae._f.deps||Jie(qn,Xe(n.touchedFields,ce),n.isSubmitted,He,Ve),rs=zk(ce,c,qn);Jt(a,ce,tr),qn?(Ae._f.onBlur&&Ae._f.onBlur(G),u&&u(0)):Ae._f.onChange&&Ae._f.onChange(G);const ss=O(ce,tr,qn),Fi=!ls(ss)||rs;if(!qn&&g.state.next({name:ce,type:G.type,values:Pr(a)}),zr)return(f.isValid||p.isValid)&&(e.mode==="onBlur"?qn&&b():qn||b()),Fi&&g.state.next({name:ce,...rs?{}:ss});if(!qn&&rs&&g.state.next({...n}),e.resolver){const{errors:nu}=await R([ce]);if(Ce(tr),Pe){const ba=Uk(n.errors,r,ce),vo=Uk(nu,r,ba.name||ce);nt=vo.error,ce=vo.name,Yt=ls(nu)}}else S([ce],!0),nt=(await Bk(Ae,c.disabled,a,_,e.shouldUseNativeValidation))[ce],S([ce]),Ce(tr),Pe&&(nt?Yt=!1:(f.isValid||p.isValid)&&(Yt=await U(r,!0)));Pe&&(Ae._f.deps&&z(Ae._f.deps),q(ce,Yt,nt,ss))}},A=(G,ie)=>{if(Xe(n.errors,ie)&&G.focus)return G.focus(),1},z=async(G,ie={})=>{let ce,Pe;const Ae=$f(G);if(e.resolver){const Ce=await V(Zn(G)?G:Ae);ce=ls(Ce),Pe=G?!Ae.some(Ve=>Xe(Ce,Ve)):ce}else G?(Pe=(await Promise.all(Ae.map(async Ce=>{const Ve=Xe(r,Ce);return await U(Ve&&Ve._f?{[Ce]:Ve}:Ve)}))).every(Boolean),!(!Pe&&!n.isValid)&&b()):Pe=ce=await U(r);return g.state.next({...!na(G)||(f.isValid||p.isValid)&&ce!==n.isValid?{}:{name:G},...e.resolver||!G?{isValid:ce}:{},errors:n.errors}),ie.shouldFocus&&!Pe&&Bf(r,A,G?Ae:c.mount),Pe},B=G=>{const ie={...o.mount?a:i};return Zn(G)?ie:na(G)?Xe(ie,G):G.map(ce=>Xe(ie,ce))},X=(G,ie)=>({invalid:!!Xe((ie||n).errors,G),isDirty:!!Xe((ie||n).dirtyFields,G),error:Xe((ie||n).errors,G),isValidating:!!Xe(n.validatingFields,G),isTouched:!!Xe((ie||n).touchedFields,G)}),de=G=>{G&&$f(G).forEach(ie=>nr(n.errors,ie)),g.state.next({errors:G?n.errors:{}})},ve=(G,ie,ce)=>{const Pe=(Xe(r,G,{_f:{}})._f||{}).ref,Ae=Xe(n.errors,G)||{},{ref:Ce,message:Ve,type:He,...nt}=Ae;Jt(n.errors,G,{...nt,...ie,ref:Pe}),g.state.next({name:G,errors:n.errors,isValid:!1}),ce&&ce.shouldFocus&&Pe&&Pe.focus&&Pe.focus()},be=(G,ie)=>bi(G)?g.state.subscribe({next:ce=>G(D(void 0,ie),ce)}):D(G,ie,!0),Ee=G=>g.state.subscribe({next:ie=>{Xie(G.name,ie.name,G.exact)&&Qie(ie,G.formState||f,_e,G.reRenderRoot)&&G.callback({values:{...a},...n,...ie})}}).unsubscribe,Oe=G=>(o.mount=!0,p={...p,...G.formState},Ee({...G,formState:p})),Se=(G,ie={})=>{for(const ce of G?$f(G):c.mount)c.mount.delete(ce),c.array.delete(ce),ie.keepValue||(nr(r,ce),nr(a,ce)),!ie.keepError&&nr(n.errors,ce),!ie.keepDirty&&nr(n.dirtyFields,ce),!ie.keepTouched&&nr(n.touchedFields,ce),!ie.keepIsValidating&&nr(n.validatingFields,ce),!e.shouldUnregister&&!ie.keepDefaultValue&&nr(i,ce);g.state.next({values:Pr(a)}),g.state.next({...n,...ie.keepDirty?{isDirty:F()}:{}}),!ie.keepIsValid&&b()},re=({disabled:G,name:ie})=>{(Hi(G)&&o.mount||G||c.disabled.has(ie))&&(G?c.disabled.add(ie):c.disabled.delete(ie))},ee=(G,ie={})=>{let ce=Xe(r,G);const Pe=Hi(ie.disabled)||Hi(e.disabled);return Jt(r,G,{...ce||{},_f:{...ce&&ce._f?ce._f:{ref:{name:G}},name:G,mount:!0,...ie}}),c.mount.add(G),ce?re({disabled:Hi(ie.disabled)?ie.disabled:e.disabled,name:G}):I(G,!0,ie.value),{...Pe?{disabled:ie.disabled||e.disabled}:{},...e.progressive?{required:!!ie.required,min:cf(ie.min),max:cf(ie.max),minLength:cf(ie.minLength),maxLength:cf(ie.maxLength),pattern:cf(ie.pattern)}:{},name:G,onChange:K,onBlur:K,ref:Ae=>{if(Ae){ee(G,ie),ce=Xe(r,G);const Ce=Zn(Ae.value)&&Ae.querySelectorAll&&Ae.querySelectorAll("input,select,textarea")[0]||Ae,Ve=Wie(Ce),He=ce._f.refs||[];if(Ve?He.find(nt=>nt===Ce):Ce===ce._f.ref)return;Jt(r,G,{_f:{...ce._f,...Ve?{refs:[...He.filter(E_),Ce,...Array.isArray(Xe(i,G))?[{}]:[]],ref:{type:Ce.type,name:G}}:{ref:Ce}}}),I(G,!1,void 0,Ce)}else ce=Xe(r,G,{}),ce._f&&(ce._f.mount=!1),(e.shouldUnregister||ie.shouldUnregister)&&!(Vie(c.array,G)&&o.action)&&c.unMount.add(G)}}},ne=()=>e.shouldFocusError&&Bf(r,A,c.mount),Y=G=>{Hi(G)&&(g.state.next({disabled:G}),Bf(r,(ie,ce)=>{const Pe=Xe(r,ce);Pe&&(ie.disabled=Pe._f.disabled||G,Array.isArray(Pe._f.refs)&&Pe._f.refs.forEach(Ae=>{Ae.disabled=Pe._f.disabled||G}))},0,!1))},oe=(G,ie)=>async ce=>{let Pe;ce&&(ce.preventDefault&&ce.preventDefault(),ce.persist&&ce.persist());let Ae=Pr(a);if(g.state.next({isSubmitting:!0}),e.resolver){const{errors:Ce,values:Ve}=await R();n.errors=Ce,Ae=Ve}else await U(r);if(c.disabled.size)for(const Ce of c.disabled)Jt(Ae,Ce,void 0);if(nr(n.errors,"root"),ls(n.errors)){g.state.next({errors:{}});try{await G(Ae,ce)}catch(Ce){Pe=Ce}}else ie&&await ie({...n.errors},ce),ne(),setTimeout(ne);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ls(n.errors)&&!Pe,submitCount:n.submitCount+1,errors:n.errors}),Pe)throw Pe},pe=(G,ie={})=>{Xe(r,G)&&(Zn(ie.defaultValue)?Z(G,Pr(Xe(i,G))):(Z(G,ie.defaultValue),Jt(i,G,Pr(ie.defaultValue))),ie.keepTouched||nr(n.touchedFields,G),ie.keepDirty||(nr(n.dirtyFields,G),n.isDirty=ie.defaultValue?F(G,Pr(Xe(i,G))):F()),ie.keepError||(nr(n.errors,G),f.isValid&&b()),g.state.next({...n}))},Te=(G,ie={})=>{const ce=G?Pr(G):i,Pe=Pr(ce),Ae=ls(G),Ce=Ae?i:Pe;if(ie.keepDefaultValues||(i=ce),!ie.keepValues){if(ie.keepDirtyValues){const Ve=new Set([...c.mount,...Object.keys(lf(i,a))]);for(const He of Array.from(Ve))Xe(n.dirtyFields,He)?Jt(Ce,He,Xe(a,He)):Z(He,Xe(Ce,He))}else{if(WN&&Zn(G))for(const Ve of c.mount){const He=Xe(r,Ve);if(He&&He._f){const nt=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;if(gx(nt)){const Yt=nt.closest("form");if(Yt){Yt.reset();break}}}}for(const Ve of c.mount)Z(Ve,Xe(Ce,Ve))}a=Pr(Ce),g.array.next({values:{...Ce}}),g.state.next({values:{...Ce}})}c={mount:ie.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!ie.keepIsValid||!!ie.keepDirtyValues,o.watch=!!e.shouldUnregister,g.state.next({submitCount:ie.keepSubmitCount?n.submitCount:0,isDirty:Ae?!1:ie.keepDirty?n.isDirty:!!(ie.keepDefaultValues&&!qo(G,i)),isSubmitted:ie.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ae?{}:ie.keepDirtyValues?ie.keepDefaultValues&&a?lf(i,a):n.dirtyFields:ie.keepDefaultValues&&G?lf(i,G):ie.keepDirty?n.dirtyFields:{},touchedFields:ie.keepTouched?n.touchedFields:{},errors:ie.keepErrors?n.errors:{},isSubmitSuccessful:ie.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},we=(G,ie)=>Te(bi(G)?G(a):G,ie),se=(G,ie={})=>{const ce=Xe(r,G),Pe=ce&&ce._f;if(Pe){const Ae=Pe.refs?Pe.refs[0]:Pe.ref;Ae.focus&&(Ae.focus(),ie.shouldSelect&&bi(Ae.select)&&Ae.select())}},_e=G=>{n={...n,...G}},We={control:{register:ee,unregister:Se,getFieldState:X,handleSubmit:oe,setError:ve,_subscribe:Ee,_runSchema:R,_focusError:ne,_getWatch:D,_getDirty:F,_setValid:b,_setFieldArray:w,_setDisabledField:re,_setErrors:E,_getFieldArray:P,_reset:Te,_resetDefaultValues:()=>bi(e.defaultValues)&&e.defaultValues().then(G=>{we(G,e.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:k,_disableForm:Y,_subjects:g,_proxyFormState:f,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(G){o=G},get _defaultValues(){return i},get _names(){return c},set _names(G){c=G},get _formState(){return n},get _options(){return e},set _options(G){e={...e,...G}}},subscribe:Oe,trigger:z,register:ee,handleSubmit:oe,watch:be,setValue:Z,getValues:B,reset:we,resetField:pe,clearErrors:de,unregister:Se,setError:ve,setFocus:se,getFieldState:X};return{...We,formControl:We}}function _c(t={}){const e=Fe.useRef(void 0),n=Fe.useRef(void 0),[r,i]=Fe.useState({isDirty:!1,isValidating:!1,isLoading:bi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:bi(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!bi(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...c}=rae(t);e.current={...c,formState:r}}const a=e.current.control;return a._options=t,Bie(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(c=>({...c,isReady:!0})),a._formState.isReady=!0,o},[a]),Fe.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Fe.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),Fe.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),Fe.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),Fe.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),Fe.useEffect(()=>{t.values&&!qo(t.values,n.current)?(a._reset(t.values,a._options.resetOptions),n.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),Fe.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=$ie(r,a),e.current}const qk=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Xe(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},k3=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?qk(r.ref,n,t):r.refs&&r.refs.forEach(i=>qk(i,n,t))}},sae=(t,e)=>{e.shouldUseNativeValidation&&k3(t,e);const n={};for(const r in t){const i=Xe(e.fields,r),a=Object.assign(t[r]||{},{ref:i&&i.ref});if(iae(e.names||Object.keys(t),r)){const o=Object.assign({},Xe(n,r));Jt(o,"root",a),Jt(n,r,o)}else Jt(n,r,a)}return n},iae=(t,e)=>t.some(n=>n.startsWith(e+"."));var aae=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];n[o]={message:c.message,type:c.code}}else n[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(p){return t.push(p)})}),e){var u=n[o].types,d=u&&u[r.code];n[o]=w3(o,e,n,i,d?[].concat(d,r.message):r.message)}t.shift()}return n},wc=function(t,e,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve(function(o,c){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return a.shouldUseNativeValidation&&k3({},a),{errors:{},values:n.raw?r:d}})}catch(d){return c(d)}return u&&u.then?u.then(void 0,c):u}(0,function(o){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(o))return{values:{},errors:sae(aae(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Ft;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),o={};for(const c of a)o[c]=i[c];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Ft||(Ft={}));var Wk;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Wk||(Wk={}));const tt=Ft.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Oo=t=>{switch(typeof t){case"undefined":return tt.undefined;case"string":return tt.string;case"number":return Number.isNaN(t)?tt.nan:tt.number;case"boolean":return tt.boolean;case"function":return tt.function;case"bigint":return tt.bigint;case"symbol":return tt.symbol;case"object":return Array.isArray(t)?tt.array:t===null?tt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?tt.promise:typeof Map<"u"&&t instanceof Map?tt.map:typeof Set<"u"&&t instanceof Set?tt.set:typeof Date<"u"&&t instanceof Date?tt.date:tt.object;default:return tt.unknown}},Me=Ft.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class uo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let c=r,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(n(o))):c[d]=c[d]||{_errors:[]},c=c[d],u++}}};return i(this),r}static assert(e){if(!(e instanceof uo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ft.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}uo.create=t=>new uo(t);const Cb=(t,e)=>{let n;switch(t.code){case Me.invalid_type:t.received===tt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Me.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ft.jsonStringifyReplacer)}`;break;case Me.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ft.joinValues(t.keys,", ")}`;break;case Me.invalid_union:n="Invalid input";break;case Me.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ft.joinValues(t.options)}`;break;case Me.invalid_enum_value:n=`Invalid enum value. Expected ${Ft.joinValues(t.options)}, received '${t.received}'`;break;case Me.invalid_arguments:n="Invalid function arguments";break;case Me.invalid_return_type:n="Invalid function return type";break;case Me.invalid_date:n="Invalid date";break;case Me.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ft.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Me.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Me.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Me.custom:n="Invalid input";break;case Me.invalid_intersection_types:n="Intersection results could not be merged";break;case Me.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Me.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ft.assertNever(t)}return{message:n}};let oae=Cb;function lae(){return oae}const cae=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let c="";const u=r.filter(d=>!!d).slice().reverse();for(const d of u)c=d(o,{data:e,defaultError:c}).message;return{...i,path:a,message:c}};function qe(t,e){const n=lae(),r=cae({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Cb?void 0:Cb].filter(i=>!!i)});t.common.issues.push(r)}class Ds{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return xt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return Ds.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return xt;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const xt=Object.freeze({status:"aborted"}),Sf=t=>({status:"dirty",value:t}),oi=t=>({status:"valid",value:t}),Hk=t=>t.status==="aborted",Gk=t=>t.status==="dirty",$d=t=>t.status==="valid",yx=t=>typeof Promise<"u"&&t instanceof Promise;var rt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(rt||(rt={}));class Nl{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Kk=(t,e)=>{if($d(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new uo(t.common.issues);return this._error=n,this._error}}};function St(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,c)=>{const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??c.defaultError}:typeof c.data>"u"?{message:u??r??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:u??n??c.defaultError}},description:i}}class Dt{get description(){return this._def.description}_getType(e){return Oo(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Oo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ds,ctx:{common:e.parent.common,data:e.data,parsedType:Oo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(yx(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oo(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Kk(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oo(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return $d(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>$d(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oo(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(yx(i)?i:Promise.resolve(i));return Kk(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=e(i),c=()=>a.addIssue({code:Me.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Wd({schema:this,typeName:_t.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return cl.create(this,this._def)}nullable(){return Hd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return fa.create(this)}promise(){return jx.create(this,this._def)}or(e){return wx.create([this,e],this._def)}and(e){return bx.create(this,e,this._def)}transform(e){return new Wd({...St(this._def),schema:this,typeName:_t.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Tb({...St(this._def),innerType:this,defaultValue:n,typeName:_t.ZodDefault})}brand(){return new Aae({typeName:_t.ZodBranded,type:this,...St(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Pb({...St(this._def),innerType:this,catchValue:n,typeName:_t.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return YN.create(this,e)}readonly(){return Ib.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const uae=/^c[^\s-]{8,}$/i,dae=/^[0-9a-z]+$/,hae=/^[0-9A-HJKMNP-TV-Z]{26}$/i,fae=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,mae=/^[a-z0-9_-]{21}$/i,pae=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,gae=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vae=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xae="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let C_;const yae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_ae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,wae=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,bae=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,jae=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Nae=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,T3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Sae=new RegExp(`^${T3}$`);function P3(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function Eae(t){return new RegExp(`^${P3(t)}$`)}function Cae(t){let e=`${T3}T${P3(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function kae(t,e){return!!((e==="v4"||!e)&&yae.test(t)||(e==="v6"||!e)&&wae.test(t))}function Tae(t,e){if(!pae.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function Pae(t,e){return!!((e==="v4"||!e)&&_ae.test(t)||(e==="v6"||!e)&&bae.test(t))}class Yo extends Dt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==tt.string){const a=this._getOrReturnCtx(e);return qe(a,{code:Me.invalid_type,expected:tt.string,received:a.parsedType}),xt}const r=new Ds;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),qe(i,{code:Me.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),qe(i,{code:Me.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,c=e.data.length<a.value;(o||c)&&(i=this._getOrReturnCtx(e,i),o?qe(i,{code:Me.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&qe(i,{code:Me.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")vae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"email",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")C_||(C_=new RegExp(xae,"u")),C_.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"emoji",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")fae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"uuid",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")mae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"nanoid",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")uae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"cuid",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")dae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"cuid2",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")hae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"ulid",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),qe(i,{validation:"url",code:Me.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"regex",code:Me.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),qe(i,{code:Me.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),qe(i,{code:Me.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),qe(i,{code:Me.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?Cae(a).test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{code:Me.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Sae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{code:Me.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?Eae(a).test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{code:Me.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?gae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"duration",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?kae(e.data,a.version)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"ip",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?Tae(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"jwt",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?Pae(e.data,a.version)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"cidr",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?jae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"base64",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?Nae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"base64url",code:Me.invalid_string,message:a.message}),r.dirty()):Ft.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Me.invalid_string,...rt.errToObj(r)})}_addCheck(e){return new Yo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...rt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...rt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...rt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...rt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...rt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...rt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...rt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...rt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...rt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...rt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...rt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...rt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...rt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...rt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...rt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...rt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...rt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...rt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...rt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...rt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...rt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...rt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...rt.errToObj(n)})}nonempty(e){return this.min(1,rt.errToObj(e))}trim(){return new Yo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Yo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Yo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Yo.create=t=>new Yo({checks:[],typeName:_t.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...St(t)});function Iae(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/10**i}class Bd extends Dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==tt.number){const a=this._getOrReturnCtx(e);return qe(a,{code:Me.invalid_type,expected:tt.number,received:a.parsedType}),xt}let r;const i=new Ds;for(const a of this._def.checks)a.kind==="int"?Ft.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),qe(r,{code:Me.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Me.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Me.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?Iae(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Me.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),qe(r,{code:Me.not_finite,message:a.message}),i.dirty()):Ft.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,rt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,rt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,rt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,rt.toString(n))}setLimit(e,n,r,i){return new Bd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:rt.toString(i)}]})}_addCheck(e){return new Bd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:rt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:rt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:rt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:rt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:rt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:rt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:rt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:rt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:rt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ft.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Bd.create=t=>new Bd({checks:[],typeName:_t.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...St(t)});class Pm extends Dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==tt.bigint)return this._getInvalidInput(e);let r;const i=new Ds;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Me.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Me.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Me.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Ft.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return qe(n,{code:Me.invalid_type,expected:tt.bigint,received:n.parsedType}),xt}gte(e,n){return this.setLimit("min",e,!0,rt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,rt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,rt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,rt.toString(n))}setLimit(e,n,r,i){return new Pm({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:rt.toString(i)}]})}_addCheck(e){return new Pm({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:rt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:rt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:rt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:rt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:rt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Pm.create=t=>new Pm({checks:[],typeName:_t.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...St(t)});class Zk extends Dt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==tt.boolean){const r=this._getOrReturnCtx(e);return qe(r,{code:Me.invalid_type,expected:tt.boolean,received:r.parsedType}),xt}return oi(e.data)}}Zk.create=t=>new Zk({typeName:_t.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...St(t)});class _x extends Dt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==tt.date){const a=this._getOrReturnCtx(e);return qe(a,{code:Me.invalid_type,expected:tt.date,received:a.parsedType}),xt}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return qe(a,{code:Me.invalid_date}),xt}const r=new Ds;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),qe(i,{code:Me.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),qe(i,{code:Me.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Ft.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new _x({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:rt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:rt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}_x.create=t=>new _x({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:_t.ZodDate,...St(t)});class Yk extends Dt{_parse(e){if(this._getType(e)!==tt.symbol){const r=this._getOrReturnCtx(e);return qe(r,{code:Me.invalid_type,expected:tt.symbol,received:r.parsedType}),xt}return oi(e.data)}}Yk.create=t=>new Yk({typeName:_t.ZodSymbol,...St(t)});class Qk extends Dt{_parse(e){if(this._getType(e)!==tt.undefined){const r=this._getOrReturnCtx(e);return qe(r,{code:Me.invalid_type,expected:tt.undefined,received:r.parsedType}),xt}return oi(e.data)}}Qk.create=t=>new Qk({typeName:_t.ZodUndefined,...St(t)});class Xk extends Dt{_parse(e){if(this._getType(e)!==tt.null){const r=this._getOrReturnCtx(e);return qe(r,{code:Me.invalid_type,expected:tt.null,received:r.parsedType}),xt}return oi(e.data)}}Xk.create=t=>new Xk({typeName:_t.ZodNull,...St(t)});class Jk extends Dt{constructor(){super(...arguments),this._any=!0}_parse(e){return oi(e.data)}}Jk.create=t=>new Jk({typeName:_t.ZodAny,...St(t)});class eT extends Dt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return oi(e.data)}}eT.create=t=>new eT({typeName:_t.ZodUnknown,...St(t)});class Sl extends Dt{_parse(e){const n=this._getOrReturnCtx(e);return qe(n,{code:Me.invalid_type,expected:tt.never,received:n.parsedType}),xt}}Sl.create=t=>new Sl({typeName:_t.ZodNever,...St(t)});class tT extends Dt{_parse(e){if(this._getType(e)!==tt.undefined){const r=this._getOrReturnCtx(e);return qe(r,{code:Me.invalid_type,expected:tt.void,received:r.parsedType}),xt}return oi(e.data)}}tT.create=t=>new tT({typeName:_t.ZodVoid,...St(t)});class fa extends Dt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==tt.array)return qe(n,{code:Me.invalid_type,expected:tt.array,received:n.parsedType}),xt;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,c=n.data.length<i.exactLength.value;(o||c)&&(qe(n,{code:o?Me.too_big:Me.too_small,minimum:c?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(qe(n,{code:Me.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(qe(n,{code:Me.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,c)=>i.type._parseAsync(new Nl(n,o,n.path,c)))).then(o=>Ds.mergeArray(r,o));const a=[...n.data].map((o,c)=>i.type._parseSync(new Nl(n,o,n.path,c)));return Ds.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new fa({...this._def,minLength:{value:e,message:rt.toString(n)}})}max(e,n){return new fa({...this._def,maxLength:{value:e,message:rt.toString(n)}})}length(e,n){return new fa({...this._def,exactLength:{value:e,message:rt.toString(n)}})}nonempty(e){return this.min(1,e)}}fa.create=(t,e)=>new fa({type:t,minLength:null,maxLength:null,exactLength:null,typeName:_t.ZodArray,...St(e)});function Fu(t){if(t instanceof Kn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=cl.create(Fu(r))}return new Kn({...t._def,shape:()=>e})}else return t instanceof fa?new fa({...t._def,type:Fu(t.element)}):t instanceof cl?cl.create(Fu(t.unwrap())):t instanceof Hd?Hd.create(Fu(t.unwrap())):t instanceof Uc?Uc.create(t.items.map(e=>Fu(e))):t}class Kn extends Dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ft.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==tt.object){const d=this._getOrReturnCtx(e);return qe(d,{code:Me.invalid_type,expected:tt.object,received:d.parsedType}),xt}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Sl&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||c.push(d);const u=[];for(const d of o){const f=a[d],p=i.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new Nl(i,p,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof Sl){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of c)u.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(d==="strict")c.length>0&&(qe(i,{code:Me.unrecognized_keys,keys:c}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of c){const p=i.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new Nl(i,p,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of u){const p=await f.key,g=await f.value;d.push({key:p,value:g,alwaysSet:f.alwaysSet})}return d}).then(d=>Ds.mergeObjectSync(r,d)):Ds.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return rt.errToObj,new Kn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:rt.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Kn({...this._def,unknownKeys:"strip"})}passthrough(){return new Kn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Kn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Kn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:_t.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Kn({...this._def,catchall:e})}pick(e){const n={};for(const r of Ft.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Kn({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Ft.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Kn({...this._def,shape:()=>n})}deepPartial(){return Fu(this)}partial(e){const n={};for(const r of Ft.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new Kn({...this._def,shape:()=>n})}required(e){const n={};for(const r of Ft.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof cl;)a=a._def.innerType;n[r]=a}return new Kn({...this._def,shape:()=>n})}keyof(){return I3(Ft.objectKeys(this.shape))}}Kn.create=(t,e)=>new Kn({shape:()=>t,unknownKeys:"strip",catchall:Sl.create(),typeName:_t.ZodObject,...St(e)});Kn.strictCreate=(t,e)=>new Kn({shape:()=>t,unknownKeys:"strict",catchall:Sl.create(),typeName:_t.ZodObject,...St(e)});Kn.lazycreate=(t,e)=>new Kn({shape:t,unknownKeys:"strip",catchall:Sl.create(),typeName:_t.ZodObject,...St(e)});class wx extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const o=a.map(c=>new uo(c.ctx.common.issues));return qe(n,{code:Me.invalid_union,unionErrors:o}),xt}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const u of r){const d={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const c=o.map(u=>new uo(u));return qe(n,{code:Me.invalid_union,unionErrors:c}),xt}}get options(){return this._def.options}}wx.create=(t,e)=>new wx({options:t,typeName:_t.ZodUnion,...St(e)});function kb(t,e){const n=Oo(t),r=Oo(e);if(t===e)return{valid:!0,data:t};if(n===tt.object&&r===tt.object){const i=Ft.objectKeys(e),a=Ft.objectKeys(t).filter(c=>i.indexOf(c)!==-1),o={...t,...e};for(const c of a){const u=kb(t[c],e[c]);if(!u.valid)return{valid:!1};o[c]=u.data}return{valid:!0,data:o}}else if(n===tt.array&&r===tt.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],c=e[a],u=kb(o,c);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===tt.date&&r===tt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class bx extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,o)=>{if(Hk(a)||Hk(o))return xt;const c=kb(a.value,o.value);return c.valid?((Gk(a)||Gk(o))&&n.dirty(),{status:n.value,value:c.data}):(qe(r,{code:Me.invalid_intersection_types}),xt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}bx.create=(t,e,n)=>new bx({left:t,right:e,typeName:_t.ZodIntersection,...St(n)});class Uc extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==tt.array)return qe(r,{code:Me.invalid_type,expected:tt.array,received:r.parsedType}),xt;if(r.data.length<this._def.items.length)return qe(r,{code:Me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xt;!this._def.rest&&r.data.length>this._def.items.length&&(qe(r,{code:Me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,c)=>{const u=this._def.items[c]||this._def.rest;return u?u._parse(new Nl(r,o,r.path,c)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Ds.mergeArray(n,o)):Ds.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Uc({...this._def,rest:e})}}Uc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Uc({items:t,typeName:_t.ZodTuple,rest:null,...St(e)})};class nT extends Dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==tt.map)return qe(r,{code:Me.invalid_type,expected:tt.map,received:r.parsedType}),xt;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([c,u],d)=>({key:i._parse(new Nl(r,c,r.path,[d,"key"])),value:a._parse(new Nl(r,u,r.path,[d,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,f=await u.value;if(d.status==="aborted"||f.status==="aborted")return xt;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),c.set(d.value,f.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const u of o){const d=u.key,f=u.value;if(d.status==="aborted"||f.status==="aborted")return xt;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),c.set(d.value,f.value)}return{status:n.value,value:c}}}}nT.create=(t,e,n)=>new nT({valueType:e,keyType:t,typeName:_t.ZodMap,...St(n)});class Im extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==tt.set)return qe(r,{code:Me.invalid_type,expected:tt.set,received:r.parsedType}),xt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(qe(r,{code:Me.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(qe(r,{code:Me.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(u){const d=new Set;for(const f of u){if(f.status==="aborted")return xt;f.status==="dirty"&&n.dirty(),d.add(f.value)}return{status:n.value,value:d}}const c=[...r.data.values()].map((u,d)=>a._parse(new Nl(r,u,r.path,d)));return r.common.async?Promise.all(c).then(u=>o(u)):o(c)}min(e,n){return new Im({...this._def,minSize:{value:e,message:rt.toString(n)}})}max(e,n){return new Im({...this._def,maxSize:{value:e,message:rt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Im.create=(t,e)=>new Im({valueType:t,minSize:null,maxSize:null,typeName:_t.ZodSet,...St(e)});class rT extends Dt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}rT.create=(t,e)=>new rT({getter:t,typeName:_t.ZodLazy,...St(e)});class sT extends Dt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return qe(n,{received:n.data,code:Me.invalid_literal,expected:this._def.value}),xt}return{status:"valid",value:e.data}}get value(){return this._def.value}}sT.create=(t,e)=>new sT({value:t,typeName:_t.ZodLiteral,...St(e)});function I3(t,e){return new qd({values:t,typeName:_t.ZodEnum,...St(e)})}class qd extends Dt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return qe(n,{expected:Ft.joinValues(r),received:n.parsedType,code:Me.invalid_type}),xt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return qe(n,{received:n.data,code:Me.invalid_enum_value,options:r}),xt}return oi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return qd.create(e,{...this._def,...n})}exclude(e,n=this._def){return qd.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}qd.create=I3;class iT extends Dt{_parse(e){const n=Ft.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==tt.string&&r.parsedType!==tt.number){const i=Ft.objectValues(n);return qe(r,{expected:Ft.joinValues(i),received:r.parsedType,code:Me.invalid_type}),xt}if(this._cache||(this._cache=new Set(Ft.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Ft.objectValues(n);return qe(r,{received:r.data,code:Me.invalid_enum_value,options:i}),xt}return oi(e.data)}get enum(){return this._def.values}}iT.create=(t,e)=>new iT({values:t,typeName:_t.ZodNativeEnum,...St(e)});class jx extends Dt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==tt.promise&&n.common.async===!1)return qe(n,{code:Me.invalid_type,expected:tt.promise,received:n.parsedType}),xt;const r=n.parsedType===tt.promise?n.data:Promise.resolve(n.data);return oi(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}jx.create=(t,e)=>new jx({type:t,typeName:_t.ZodPromise,...St(e)});class Wd extends Dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{qe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async c=>{if(n.value==="aborted")return xt;const u=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return u.status==="aborted"?xt:u.status==="dirty"||n.value==="dirty"?Sf(u.value):u});{if(n.value==="aborted")return xt;const c=this._def.schema._parseSync({data:o,path:r.path,parent:r});return c.status==="aborted"?xt:c.status==="dirty"||n.value==="dirty"?Sf(c.value):c}}if(i.type==="refinement"){const o=c=>{const u=i.refinement(c,a);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?xt:(c.status==="dirty"&&n.dirty(),o(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?xt:(c.status==="dirty"&&n.dirty(),o(c.value).then(()=>({status:n.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!$d(o))return xt;const c=i.transform(o.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>$d(o)?Promise.resolve(i.transform(o.value,a)).then(c=>({status:n.value,value:c})):xt);Ft.assertNever(i)}}Wd.create=(t,e,n)=>new Wd({schema:t,typeName:_t.ZodEffects,effect:e,...St(n)});Wd.createWithPreprocess=(t,e,n)=>new Wd({schema:e,effect:{type:"preprocess",transform:t},typeName:_t.ZodEffects,...St(n)});class cl extends Dt{_parse(e){return this._getType(e)===tt.undefined?oi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}cl.create=(t,e)=>new cl({innerType:t,typeName:_t.ZodOptional,...St(e)});class Hd extends Dt{_parse(e){return this._getType(e)===tt.null?oi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Hd.create=(t,e)=>new Hd({innerType:t,typeName:_t.ZodNullable,...St(e)});class Tb extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===tt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Tb.create=(t,e)=>new Tb({innerType:t,typeName:_t.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...St(e)});class Pb extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return yx(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new uo(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new uo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Pb.create=(t,e)=>new Pb({innerType:t,typeName:_t.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...St(e)});class aT extends Dt{_parse(e){if(this._getType(e)!==tt.nan){const r=this._getOrReturnCtx(e);return qe(r,{code:Me.invalid_type,expected:tt.nan,received:r.parsedType}),xt}return{status:"valid",value:e.data}}}aT.create=t=>new aT({typeName:_t.ZodNaN,...St(t)});class Aae extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class YN extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?xt:a.status==="dirty"?(n.dirty(),Sf(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?xt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new YN({in:e,out:n,typeName:_t.ZodPipeline})}}class Ib extends Dt{_parse(e){const n=this._def.innerType._parse(e),r=i=>($d(i)&&(i.value=Object.freeze(i.value)),i);return yx(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Ib.create=(t,e)=>new Ib({innerType:t,typeName:_t.ZodReadonly,...St(e)});var _t;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(_t||(_t={}));const gt=Yo.create,A3=Bd.create;Sl.create;const QN=fa.create,eu=Kn.create;wx.create;bx.create;Uc.create;const Rae=qd.create;jx.create;cl.create;Hd.create;var Xy="Checkbox",[Mae,Yue]=Sr(Xy),[Oae,XN]=Mae(Xy);function Dae(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:i,disabled:a,form:o,name:c,onCheckedChange:u,required:d,value:f="on",internal_do_not_use_render:p}=t,[g,_]=Os({prop:n,defaultProp:i??!1,onChange:u,caller:Xy}),[N,b]=x.useState(null),[S,w]=x.useState(null),y=x.useRef(!1),E=N?!!o||!!N.closest("form"):!0,I={checked:g,disabled:a,setChecked:_,control:N,setControl:b,name:c,form:o,value:f,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:ul(i)?!1:i,isFormControl:E,bubbleInput:S,setBubbleInput:w};return s.jsx(Oae,{scope:e,...I,children:Lae(p)?p(I):r})}var R3="CheckboxTrigger",M3=x.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},i)=>{const{control:a,value:o,disabled:c,checked:u,required:d,setControl:f,setChecked:p,hasConsumerStoppedPropagationRef:g,isFormControl:_,bubbleInput:N}=XN(R3,t),b=ht(i,f),S=x.useRef(u);return x.useEffect(()=>{const w=a==null?void 0:a.form;if(w){const y=()=>p(S.current);return w.addEventListener("reset",y),()=>w.removeEventListener("reset",y)}},[a,p]),s.jsx(Ze.button,{type:"button",role:"checkbox","aria-checked":ul(u)?"mixed":u,"aria-required":d,"data-state":V3(u),"data-disabled":c?"":void 0,disabled:c,value:o,...r,ref:b,onKeyDown:Le(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Le(n,w=>{p(y=>ul(y)?!0:!y),N&&_&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})})});M3.displayName=R3;var JN=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:u,onCheckedChange:d,form:f,...p}=t;return s.jsx(Dae,{__scopeCheckbox:n,checked:i,defaultChecked:a,disabled:c,required:o,onCheckedChange:d,name:r,form:f,value:u,internal_do_not_use_render:({isFormControl:g})=>s.jsxs(s.Fragment,{children:[s.jsx(M3,{...p,ref:e,__scopeCheckbox:n}),g&&s.jsx(F3,{__scopeCheckbox:n})]})})});JN.displayName=Xy;var O3="CheckboxIndicator",D3=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,a=XN(O3,n);return s.jsx(Er,{present:r||ul(a.checked)||a.checked===!0,children:s.jsx(Ze.span,{"data-state":V3(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});D3.displayName=O3;var L3="CheckboxBubbleInput",F3=x.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:c,disabled:u,name:d,value:f,form:p,bubbleInput:g,setBubbleInput:_}=XN(L3,t),N=ht(n,_),b=Uy(a),S=Py(r);x.useEffect(()=>{const y=g;if(!y)return;const E=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(E,"checked").set,q=!i.current;if(b!==a&&O){const R=new Event("click",{bubbles:q});y.indeterminate=ul(a),O.call(y,ul(a)?!1:a),y.dispatchEvent(R)}},[g,b,a,i]);const w=x.useRef(ul(a)?!1:a);return s.jsx(Ze.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:c,disabled:u,name:d,value:f,form:p,...e,tabIndex:-1,ref:N,style:{...e.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});F3.displayName=L3;function Lae(t){return typeof t=="function"}function ul(t){return t==="indeterminate"}function V3(t){return ul(t)?"indeterminate":t?"checked":"unchecked"}const Nx=x.forwardRef(({className:t,...e},n)=>s.jsx(JN,{ref:n,className:st("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:s.jsx(D3,{className:st("flex items-center justify-center text-current"),children:s.jsx(bN,{className:"h-4 w-4"})})}));Nx.displayName=JN.displayName;var z3=["PageUp","PageDown"],U3=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$3={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},vh="Slider",[Ab,Fae,Vae]=rp(vh),[B3,Que]=Sr(vh,[Vae]),[zae,Jy]=B3(vh),q3=x.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:d=[r],value:f,onValueChange:p=()=>{},onValueCommit:g=()=>{},inverted:_=!1,form:N,...b}=t,S=x.useRef(new Set),w=x.useRef(0),E=o==="horizontal"?Uae:$ae,[I=[],O]=Os({prop:f,defaultProp:d,onChange:F=>{var P;(P=[...S.current][w.current])==null||P.focus(),p(F)}}),q=x.useRef(I);function R(F){const D=Gae(I,F);k(F,D)}function V(F){k(F,w.current)}function U(){const F=q.current[w.current];I[w.current]!==F&&g(I)}function k(F,D,{commit:P}={commit:!1}){const H=Qae(a),te=Xae(Math.round((F-r)/a)*a+r,H),Z=Tm(te,[r,i]);O((K=[])=>{const A=Wae(K,Z,D);if(Yae(A,u*a)){w.current=A.indexOf(Z);const z=String(A)!==String(K);return z&&P&&g(A),z?A:K}else return K})}return s.jsx(zae,{scope:t.__scopeSlider,name:n,disabled:c,min:r,max:i,valueIndexToChangeRef:w,thumbs:S.current,values:I,orientation:o,form:N,children:s.jsx(Ab.Provider,{scope:t.__scopeSlider,children:s.jsx(Ab.Slot,{scope:t.__scopeSlider,children:s.jsx(E,{"aria-disabled":c,"data-disabled":c?"":void 0,...b,ref:e,onPointerDown:Le(b.onPointerDown,()=>{c||(q.current=I)}),min:r,max:i,inverted:_,onSlideStart:c?void 0:R,onSlideMove:c?void 0:V,onSlideEnd:c?void 0:U,onHomeKeyDown:()=>!c&&k(r,0,{commit:!0}),onEndKeyDown:()=>!c&&k(i,I.length-1,{commit:!0}),onStepKeyDown:({event:F,direction:D})=>{if(!c){const te=z3.includes(F.key)||F.shiftKey&&U3.includes(F.key)?10:1,Z=w.current,K=I[Z],A=a*te*D;k(K+A,Z,{commit:!0})}}})})})})});q3.displayName=vh;var[W3,H3]=B3(vh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Uae=x.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:a,onSlideStart:o,onSlideMove:c,onSlideEnd:u,onStepKeyDown:d,...f}=t,[p,g]=x.useState(null),_=ht(e,E=>g(E)),N=x.useRef(void 0),b=Qc(i),S=b==="ltr",w=S&&!a||!S&&a;function y(E){const I=N.current||p.getBoundingClientRect(),O=[0,I.width],R=eS(O,w?[n,r]:[r,n]);return N.current=I,R(E-I.left)}return s.jsx(W3,{scope:t.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:s.jsx(G3,{dir:b,"data-orientation":"horizontal",...f,ref:_,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const I=y(E.clientX);o==null||o(I)},onSlideMove:E=>{const I=y(E.clientX);c==null||c(I)},onSlideEnd:()=>{N.current=void 0,u==null||u()},onStepKeyDown:E=>{const O=$3[w?"from-left":"from-right"].includes(E.key);d==null||d({event:E,direction:O?-1:1})}})})}),$ae=x.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:c,onStepKeyDown:u,...d}=t,f=x.useRef(null),p=ht(e,f),g=x.useRef(void 0),_=!i;function N(b){const S=g.current||f.current.getBoundingClientRect(),w=[0,S.height],E=eS(w,_?[r,n]:[n,r]);return g.current=S,E(b-S.top)}return s.jsx(W3,{scope:t.__scopeSlider,startEdge:_?"bottom":"top",endEdge:_?"top":"bottom",size:"height",direction:_?1:-1,children:s.jsx(G3,{"data-orientation":"vertical",...d,ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const S=N(b.clientY);a==null||a(S)},onSlideMove:b=>{const S=N(b.clientY);o==null||o(S)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:b=>{const w=$3[_?"from-bottom":"from-top"].includes(b.key);u==null||u({event:b,direction:w?-1:1})}})})}),G3=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:c,onStepKeyDown:u,...d}=t,f=Jy(vh,n);return s.jsx(Ze.span,{...d,ref:e,onKeyDown:Le(t.onKeyDown,p=>{p.key==="Home"?(o(p),p.preventDefault()):p.key==="End"?(c(p),p.preventDefault()):z3.concat(U3).includes(p.key)&&(u(p),p.preventDefault())}),onPointerDown:Le(t.onPointerDown,p=>{const g=p.target;g.setPointerCapture(p.pointerId),p.preventDefault(),f.thumbs.has(g)?g.focus():r(p)}),onPointerMove:Le(t.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&i(p)}),onPointerUp:Le(t.onPointerUp,p=>{const g=p.target;g.hasPointerCapture(p.pointerId)&&(g.releasePointerCapture(p.pointerId),a(p))})})}),K3="SliderTrack",Z3=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Jy(K3,n);return s.jsx(Ze.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});Z3.displayName=K3;var Rb="SliderRange",Y3=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Jy(Rb,n),a=H3(Rb,n),o=x.useRef(null),c=ht(e,o),u=i.values.length,d=i.values.map(g=>J3(g,i.min,i.max)),f=u>1?Math.min(...d):0,p=100-Math.max(...d);return s.jsx(Ze.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:c,style:{...t.style,[a.startEdge]:f+"%",[a.endEdge]:p+"%"}})});Y3.displayName=Rb;var Mb="SliderThumb",Q3=x.forwardRef((t,e)=>{const n=Fae(t.__scopeSlider),[r,i]=x.useState(null),a=ht(e,c=>i(c)),o=x.useMemo(()=>r?n().findIndex(c=>c.ref.current===r):-1,[n,r]);return s.jsx(Bae,{...t,ref:a,index:o})}),Bae=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...a}=t,o=Jy(Mb,n),c=H3(Mb,n),[u,d]=x.useState(null),f=ht(e,y=>d(y)),p=u?o.form||!!u.closest("form"):!0,g=Py(u),_=o.values[r],N=_===void 0?0:J3(_,o.min,o.max),b=Hae(r,o.values.length),S=g==null?void 0:g[c.size],w=S?Kae(S,N,c.direction):0;return x.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${N}% + ${w}px)`},children:[s.jsx(Ab.ItemSlot,{scope:t.__scopeSlider,children:s.jsx(Ze.span,{role:"slider","aria-label":t["aria-label"]||b,"aria-valuemin":o.min,"aria-valuenow":_,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:f,style:_===void 0?{display:"none"}:t.style,onFocus:Le(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),p&&s.jsx(X3,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:_},r)]})});Q3.displayName=Mb;var qae="RadioBubbleInput",X3=x.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=x.useRef(null),a=ht(i,r),o=Uy(e);return x.useEffect(()=>{const c=i.current;if(!c)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&f){const p=new Event("input",{bubbles:!0});f.call(c,e),c.dispatchEvent(p)}},[o,e]),s.jsx(Ze.input,{style:{display:"none"},...n,ref:a,defaultValue:e})});X3.displayName=qae;function Wae(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,a)=>i-a)}function J3(t,e,n){const a=100/(n-e)*(t-e);return Tm(a,[0,100])}function Hae(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Gae(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function Kae(t,e,n){const r=t/2,a=eS([0,50],[0,r]);return(r-a(e)*n)*n}function Zae(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Yae(t,e){if(e>0){const n=Zae(t);return Math.min(...n)>=e}return!0}function eS(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Qae(t){return(String(t).split(".")[1]||"").length}function Xae(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var e5=q3,Jae=Z3,eoe=Y3,toe=Q3;const t5=x.forwardRef(({className:t,...e},n)=>s.jsxs(e5,{ref:n,className:st("relative flex w-full touch-none select-none items-center",t),...e,children:[s.jsx(Jae,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:s.jsx(eoe,{className:"absolute h-full bg-primary"})}),s.jsx(toe,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));t5.displayName=e5.displayName;const xp=eu({title:gt().min(5,"Le titre doit contenir au moins 5 caractères").max(80,"Le titre ne peut pas dépasser 80 caractères"),description:gt().min(20,"La description doit contenir au moins 20 caractères").max(1e3,"La description ne peut pas dépasser 1000 caractères"),tags:QN(gt()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:gt().min(1,"Veuillez spécifier un lieu de rencontre")}),noe=xp.extend({price:gt().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit être d'au moins 1€");if(e>1e4)throw new Error("Le prix ne peut pas dépasser 10 000€");return e}),condition:Rae(["new","like-new","good","fair"]),paymentMethods:QN(gt()).min(1,"Sélectionnez au moins un mode de paiement")}),roe=xp.extend({donationReason:gt().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractères")}),soe=xp.extend({desiredItems:QN(gt()).min(1,"Ajoutez au moins un objet recherché"),estimatedValue:gt().min(1,"La valeur estimée est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estimée doit être d'au moins 1€");return e})}),ioe=xp.extend({hourlyRate:gt().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit être d'au moins 5€/h");if(e>200)throw new Error("Le tarif ne peut pas dépasser 200€/h");return e}),duration:A3().min(1,"La durée doit être d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:gt().min(20,"Décrivez vos compétences en détail").max(500,"Maximum 500 caractères"),availability:gt().optional()}),aoe=[{value:"new",label:"Neuf",description:"Jamais utilisé, dans son emballage"},{value:"like-new",label:"Très bon",description:"Utilisé très peu, aucun défaut visible"},{value:"good",label:"Bon",description:"Utilisé mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],oT=[{value:"cash",label:"Espèces",icon:$4},{value:"transfer",label:"Virement bancaire",icon:Vn},{value:"lydia",label:"Lydia",icon:Yc},{value:"paypal",label:"PayPal",icon:Vn}];delete gh.Icon.Default.prototype._getIconUrl;gh.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const ooe=()=>{var re,ee,ne,Y,oe,pe,Te,we;const{currentUser:t,userProfile:e}=mn(),{createListing:n}=hp(),r=cr(),[i]=U1(),[a,o]=x.useState(()=>i.get("type")||"sell"),[c,u]=x.useState([]),[d,f]=x.useState(!1),[p,g]=x.useState(""),[_,N]=x.useState([]),[b,S]=x.useState(!1),[w,y]=x.useState([""]),[E,I]=x.useState(""),[O,q]=x.useState([]),[R,V]=x.useState([1]),[U,k]=x.useState(null),[F,D]=x.useState(!1),H=_c({resolver:wc((()=>{switch(a){case"sell":return noe;case"gift":return roe;case"swap":return soe;case"service":return ioe;default:return xp}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});x.useEffect(()=>{H.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),N([]),y([""]),q([]),V([1]),u([])},[a,H]);const te=async se=>{if(!t)throw new Error("User not authenticated");const _e=Date.now(),je=`listings/${t.uid}/${_e}_${se.name}`,We=Qj(Jj,je),G=await Zj(We,se);return await Yj(G.ref)},Z=async se=>{const _e=se.target.files;if(!(!_e||_e.length===0)){f(!0);try{const We=Array.from(_e).slice(0,10-c.length).filter(ie=>ie.size<=15728640).map(ie=>te(ie)),G=await Promise.all(We);u(ie=>[...ie,...G])}catch(je){console.error("Error uploading images:",je)}finally{f(!1)}}},K=se=>{u(_e=>_e.filter((je,We)=>We!==se))},A=()=>{if(p.trim()&&!_.includes(p.trim())&&_.length<5){const se=[..._,p.trim()];N(se),H.setValue("tags",se),g("")}},z=se=>{const _e=_.filter(je=>je!==se);N(_e),H.setValue("tags",_e)},B=()=>{if(E.trim()){const se=[...w.filter(_e=>_e.trim()),E.trim()];y(se),H.setValue("desiredItems",se),I("")}},X=se=>{const _e=w.filter((je,We)=>We!==se);y(_e),H.setValue("desiredItems",_e)},de=(se,_e)=>{const je=_e?[...O,se]:O.filter(We=>We!==se);q(je),H.setValue("paymentMethods",je)};async function ve(se){const je=await(await fetch(`https://nominatim.openstreetmap.org/search?format=jsonv2&q=${encodeURIComponent(se)}`)).json();return je&&je[0]?[parseFloat(je[0].lat),parseFloat(je[0].lon)]:null}x.useEffect(()=>{const se=H.watch("meetingLocation");se&&se.length>5&&ve(se).then(_e=>{_e&&k(_e)})},[H.watch("meetingLocation")]);const be=async se=>{if(!(!t||!e)){S(!0);try{const _e={title:se.title,description:se.description,currency:"EUR",category:"electronics",images:c,tags:se.tags,location:{city:"Paris",state:"Île-de-France",country:"France",campus:e.campus||void 0,university:e.university||void 0,coordinates:void 0},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let je;switch(a){case"sell":je={..._e,price:se.price,condition:se.condition,transactionType:"sale",description:`${se.description}

Modes de paiement acceptés: ${O.map(G=>{var ie;return(ie=oT.find(ce=>ce.value===G))==null?void 0:ie.label}).join(", ")}`};break;case"gift":je={..._e,price:0,condition:"good",transactionType:"donation",description:`${se.description}

Raison du don: ${se.donationReason}`};break;case"swap":je={..._e,price:se.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:w.filter(G=>G.trim()).join(", "),description:`${se.description}

Recherche en échange: ${w.filter(G=>G.trim()).join(", ")}
Valeur estimée: ${se.estimatedValue}€`};break;case"service":je={..._e,price:se.hourlyRate,condition:"new",transactionType:"service",description:`${se.description}

Compétences: ${se.skills}
Tarif: ${se.hourlyRate}€/h
Durée prévue: ${R[0]}h${se.availability?`
Disponibilités: ${se.availability}`:""}`};break;default:throw new Error("Type de transaction non supporté")}console.log("Submitting listing data:",je);const We=await n(je);r(`/listing/${We}`)}catch(_e){console.error("Error creating listing:",_e)}finally{S(!1)}}},Ee=()=>{const se=H.formState.errors,_e=H.watch("title")&&H.watch("description")&&H.watch("meetingLocation")&&_.length>0;switch(a){case"sell":return _e&&H.watch("price")&&O.length>0&&!se.title&&!se.description&&!se.price;case"gift":return _e&&H.watch("donationReason")&&!se.title&&!se.description&&!se.donationReason;case"swap":return _e&&w.some(je=>je.trim())&&H.watch("estimatedValue")&&!se.title&&!se.description&&!se.estimatedValue;case"service":return _e&&H.watch("hourlyRate")&&H.watch("skills")&&!se.title&&!se.description&&!se.hourlyRate&&!se.skills;default:return!1}},Oe=()=>{if(!navigator.geolocation){alert("La géolocalisation n'est pas supportée par ce navigateur.");return}D(!0),navigator.geolocation.getCurrentPosition(async se=>{const{latitude:_e,longitude:je}=se.coords;k([_e,je]);const G=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${_e}&lon=${je}`)).json();G&&G.display_name&&H.setValue("meetingLocation",G.display_name,{shouldValidate:!0}),D(!1)},()=>{alert("Impossible d'accéder à la position."),D(!1)})};function Se(){return UN({click:async se=>{k([se.latlng.lat,se.latlng.lng]),D(!0);const je=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${se.latlng.lat}&lon=${se.latlng.lng}`)).json();je&&je.display_name&&H.setValue("meetingLocation",je.display_name,{shouldValidate:!0}),D(!1)}}),U?s.jsx(BN,{position:U}):null}return s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2 text-foreground",children:"Créer une annonce"}),s.jsx("p",{className:"text-muted-foreground",children:"Partagez vos objets, services ou recherches avec la communauté étudiante vérifiée"})]}),s.jsxs("form",{onSubmit:H.handleSubmit(be),className:"space-y-8",children:[s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(tb,{className:"w-5 h-5"}),"Type d'annonce"]}),s.jsx(Ct,{children:"Le formulaire s'adapte automatiquement selon votre choix"})]}),s.jsx(me,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(fe,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:s.jsxs(me,{className:"p-4 text-center",children:[s.jsx(tx,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Vendre"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendre un objet"})]})}),s.jsx(fe,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:s.jsxs(me,{className:"p-4 text-center",children:[s.jsx(Rd,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Donner"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),s.jsx(fe,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:s.jsxs(me,{className:"p-4 text-center",children:[s.jsx(so,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Troc"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Échanger des objets"})]})}),s.jsx(fe,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:s.jsxs(me,{className:"p-4 text-center",children:[s.jsx(Un,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Service"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsx(Je,{className:"text-foreground",children:"Informations principales"})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"title",className:"text-foreground",children:"Titre * (max 80 caractères)"}),s.jsx(Ge,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait état":a==="gift"?"Ex: Vélo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathématiques",...H.register("title"),className:"mt-1",maxLength:80}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(re=H.formState.errors.title)==null?void 0:re.message}),s.jsxs("span",{children:[((ee=H.watch("title"))==null?void 0:ee.length)||0,"/80"]})]})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"description",className:"text-foreground",children:"Description détaillée * (max 1000 caractères)"}),s.jsx(ri,{id:"description",placeholder:a==="sell"?"Décrivez l'état, l'utilisation, la raison de la vente...":a==="gift"?"Décrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Décrivez ce que vous proposez et ce que vous recherchez...":"Décrivez vos compétences, votre expérience, votre méthode...",rows:6,...H.register("description"),className:"mt-1",maxLength:1e3}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(ne=H.formState.errors.description)==null?void 0:ne.message}),s.jsxs("span",{children:[((Y=H.watch("description"))==null?void 0:Y.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(tx,{className:"w-5 h-5 text-blue-600"}),"Informations de vente"]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"price",className:"text-foreground",children:"Prix (€) *"}),s.jsx(Ge,{id:"price",type:"text",placeholder:"0,00",...H.register("price"),className:"mt-1"}),H.formState.errors.price&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:H.formState.errors.price.message})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"condition",className:"text-foreground",children:"État du produit *"}),s.jsxs(tn,{onValueChange:se=>H.setValue("condition",se),children:[s.jsx(Ht,{className:"mt-1",children:s.jsx(nn,{placeholder:"Sélectionnez un état"})}),s.jsx(Gt,{children:aoe.map(se=>s.jsx(Ke,{value:se.value,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-foreground",children:se.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:se.description})]})},se.value))})]}),H.formState.errors.condition&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:H.formState.errors.condition.message})]})]}),s.jsxs("div",{children:[s.jsx(Re,{className:"text-foreground",children:"Modes de paiement acceptés *"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:oT.map(se=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Nx,{id:se.value,checked:O.includes(se.value),onCheckedChange:_e=>de(se.value,_e)}),s.jsxs(Re,{htmlFor:se.value,className:"flex items-center gap-2 cursor-pointer text-foreground",children:[s.jsx(se.icon,{className:"w-4 h-4"}),se.label]})]},se.value))}),O.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Sélectionnez au moins un mode de paiement"})]})]})]}),a==="gift"&&s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Rd,{className:"w-5 h-5 text-green-600"}),"Informations du don"]})}),s.jsx(me,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractères)"}),s.jsx(ri,{id:"donationReason",placeholder:"Ex: Je déménage, plus besoin, fin d'études...",rows:3,...H.register("donationReason"),className:"mt-1",maxLength:140}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(oe=H.formState.errors.donationReason)==null?void 0:oe.message}),s.jsxs("span",{children:[((pe=H.watch("donationReason"))==null?void 0:pe.length)||0,"/140"]})]})]})})]}),a==="swap"&&s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(so,{className:"w-5 h-5 text-purple-600"}),"Informations d'échange"]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Re,{className:"text-foreground",children:"Objets recherchés * (minimum 1)"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[w.filter(se=>se.trim()).map((se,_e)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{value:se,readOnly:!0,className:"flex-1"}),s.jsx(J,{type:"button",variant:"outline",size:"icon",onClick:()=>X(_e),children:s.jsx(tM,{className:"w-4 h-4"})})]},_e)),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ge,{placeholder:"Ex: Livre de physique L2",value:E,onChange:se=>I(se.target.value),onKeyPress:se=>se.key==="Enter"&&(se.preventDefault(),B()),className:"flex-1"}),s.jsx(J,{type:"button",onClick:B,disabled:!E.trim(),children:s.jsx(vc,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estimée (€) *"}),s.jsx(Ge,{id:"estimatedValue",type:"text",placeholder:"0,00",...H.register("estimatedValue"),className:"mt-1"}),H.formState.errors.estimatedValue&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:H.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Un,{className:"w-5 h-5 text-orange-600"}),"Informations du service"]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"skills",className:"text-foreground",children:"Description des compétences *"}),s.jsx(ri,{id:"skills",placeholder:"Décrivez vos compétences, votre expérience, votre méthode d'enseignement...",rows:4,...H.register("skills"),className:"mt-1",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(Te=H.formState.errors.skills)==null?void 0:Te.message}),s.jsxs("span",{children:[((we=H.watch("skills"))==null?void 0:we.length)||0,"/500"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (€/h) *"}),s.jsx(Ge,{id:"hourlyRate",type:"text",placeholder:"15,00",...H.register("hourlyRate"),className:"mt-1"}),H.formState.errors.hourlyRate&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:H.formState.errors.hourlyRate.message})]}),s.jsxs("div",{children:[s.jsxs(Re,{className:"text-foreground",children:["Durée prévue: ",R[0],"h"]}),s.jsx(t5,{value:R,onValueChange:se=>{V(se),H.setValue("duration",se[0])},max:720,min:1,step:1,className:"mt-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{children:"1h"}),s.jsx("span",{children:"720h"})]})]})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"availability",className:"text-foreground",children:"Disponibilités (optionnel)"}),s.jsx(Ge,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...H.register("availability"),className:"mt-1"})]})]})]}),s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(gc,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),s.jsx(Ct,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Première photo = photo principale. Max 15MB par image."})]}),s.jsx(me,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[c.map((se,_e)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:se,alt:`Photo ${_e+1}`,className:"w-full h-20 object-cover rounded-lg"}),s.jsx(J,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>K(_e),children:s.jsx(rb,{className:"w-3 h-3"})}),_e===0&&s.jsx(at,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},_e)),c.length<10&&s.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[s.jsxs("div",{className:"text-center",children:[d?s.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):s.jsx(nb,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:d?"Upload...":"Ajouter"})]}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Z,className:"hidden",disabled:d})]})]})})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(bm,{className:"w-5 h-5"}),"Tags et localisation"]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Re,{className:"text-foreground",children:"Tags * (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:_.map(se=>s.jsxs(at,{variant:"secondary",className:"flex items-center gap-1",children:[se,s.jsx(J,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>z(se),children:s.jsx(rb,{className:"w-3 h-3"})})]},se))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ge,{placeholder:"Ajouter un tag...",value:p,onChange:se=>g(se.target.value),onKeyPress:se=>se.key==="Enter"&&(se.preventDefault(),A()),className:"flex-1"}),s.jsx(J,{type:"button",onClick:A,disabled:!p.trim()||_.length>=5,children:"Ajouter"})]}),_.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Ge,{id:"meetingLocation",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",...H.register("meetingLocation"),className:"flex-1"}),s.jsx(J,{type:"button",variant:"outline",onClick:Oe,disabled:F,title:"Détecter ma position",children:F?s.jsx("span",{className:"animate-spin",children:"📍"}):s.jsx("span",{children:"📍"})})]}),H.formState.errors.meetingLocation&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:H.formState.errors.meetingLocation.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilégiez les lieux publics et fréquentés"}),s.jsx("div",{className:"mt-3",children:s.jsxs($N,{center:U||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[s.jsx(qN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),s.jsx(Se,{})]})})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(Uf,{className:"w-4 h-4"}),"Validation"]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:`flex items-center gap-2 ${H.watch("title")&&H.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H.watch("title")&&H.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Titre (5-80 caractères)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${H.watch("description")&&H.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H.watch("description")&&H.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Description (20-1000 caractères)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${_.length>0?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${_.length>0?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Tags (1-5)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${H.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Point de rencontre"})]})]})})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(zt,{className:"w-4 h-4"}),"Conseils de sécurité"]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Vérifiez l'identité de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Privilégiez les paiements sécurisés"})]})]})})]}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6",children:[s.jsx(J,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:b||!Ee()||d,children:b?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tb,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),s.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:Ee()?"Votre annonce sera visible immédiatement":"Complétez tous les champs obligatoires"})]})})]})]})]})]})};var e0="Tabs",[loe,Xue]=Sr(e0,[Ay]),n5=Ay(),[coe,tS]=loe(e0),r5=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:c,activationMode:u="automatic",...d}=t,f=Qc(c),[p,g]=Os({prop:r,onChange:i,defaultProp:a??"",caller:e0});return s.jsx(coe,{scope:n,baseId:As(),value:p,onValueChange:g,orientation:o,dir:f,activationMode:u,children:s.jsx(Ze.div,{dir:f,"data-orientation":o,...d,ref:e})})});r5.displayName=e0;var s5="TabsList",i5=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=tS(s5,n),o=n5(n);return s.jsx(zM,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(Ze.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});i5.displayName=s5;var a5="TabsTrigger",o5=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,o=tS(a5,n),c=n5(n),u=u5(o.baseId,r),d=d5(o.baseId,r),f=r===o.value;return s.jsx(UM,{asChild:!0,...c,focusable:!i,active:f,children:s.jsx(Ze.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...a,ref:e,onMouseDown:Le(t.onMouseDown,p=>{!i&&p.button===0&&p.ctrlKey===!1?o.onValueChange(r):p.preventDefault()}),onKeyDown:Le(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(r)}),onFocus:Le(t.onFocus,()=>{const p=o.activationMode!=="manual";!f&&!i&&p&&o.onValueChange(r)})})})});o5.displayName=a5;var l5="TabsContent",c5=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=t,c=tS(l5,n),u=u5(c.baseId,r),d=d5(c.baseId,r),f=r===c.value,p=x.useRef(f);return x.useEffect(()=>{const g=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(g)},[]),s.jsx(Er,{present:i||f,children:({present:g})=>s.jsx(Ze.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!g,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:g&&a})})});c5.displayName=l5;function u5(t,e){return`${t}-trigger-${e}`}function d5(t,e){return`${t}-content-${e}`}var uoe=r5,h5=i5,f5=o5,m5=c5;const tu=uoe,Fl=x.forwardRef(({className:t,...e},n)=>s.jsx(h5,{ref:n,className:st("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Fl.displayName=h5.displayName;const on=x.forwardRef(({className:t,...e},n)=>s.jsx(f5,{ref:n,className:st("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));on.displayName=f5.displayName;const ln=x.forwardRef(({className:t,...e},n)=>s.jsx(m5,{ref:n,className:st("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ln.displayName=m5.displayName;const p5=({currentPhotoURL:t,displayName:e})=>{var w,y;const{currentUser:n,updateUserProfile:r}=mn(),[i,a]=x.useState(!1),[o,c]=x.useState(!1),[u,d]=x.useState(null),[f,p]=x.useState(null),g=x.useRef(null),_=E=>{var q;const I=(q=E.target.files)==null?void 0:q[0];if(!I)return;if(!I.type.startsWith("image/")){xe.error("Veuillez sélectionner une image");return}if(I.size>5*1024*1024){xe.error("L'image ne doit pas dépasser 5MB");return}p(I);const O=new FileReader;O.onload=R=>{var V;d((V=R.target)==null?void 0:V.result)},O.readAsDataURL(I)},N=async()=>{if(!(!f||!n)){c(!0);try{const E=`profile-photos/${n.uid}-${Date.now()}.${f.name.split(".").pop()}`,I=Qj(Jj,E),O=await Zj(I,f),q=await Yj(O.ref);await hm(n,{photoURL:q}),await r({photoURL:q}),xe.success("Photo de profil mise à jour !"),a(!1),d(null),p(null)}catch(E){console.error("Erreur lors de l'upload:",E),xe.error("Erreur lors de la mise à jour de la photo")}finally{c(!1)}}},b=async()=>{if(n){c(!0);try{await hm(n,{photoURL:null}),await r({photoURL:null}),xe.success("Photo de profil supprimée"),a(!1)}catch(E){console.error("Erreur lors de la suppression:",E),xe.error("Erreur lors de la suppression de la photo")}finally{c(!1)}}},S=()=>{p(null),d(null),g.current&&(g.current.value="")};return s.jsxs(da,{open:i,onOpenChange:a,children:[s.jsx(md,{asChild:!0,children:s.jsxs("div",{className:"relative group cursor-pointer",children:[s.jsxs(oo,{className:"h-20 w-20",children:[s.jsx(lo,{src:t||""}),s.jsx(co,{className:"text-lg bg-gradient-to-br from-primary to-secondary text-white",children:((w=e[0])==null?void 0:w.toUpperCase())||"U"})]}),s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(gc,{className:"w-6 h-6 text-white"})}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(gc,{className:"w-3 h-3 text-white"})})]})}),s.jsxs(Ci,{className:"max-w-md",children:[s.jsx(ha,{children:s.jsxs(ki,{className:"flex items-center gap-2",children:[s.jsx(gc,{className:"w-5 h-5"}),"Photo de profil"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs(oo,{className:"h-32 w-32",children:[s.jsx(lo,{src:u||t||""}),s.jsx(co,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((y=e[0])==null?void 0:y.toUpperCase())||"U"})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:_,className:"hidden"}),f?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[s.jsx("p",{className:"font-medium",children:f.name}),s.jsxs("p",{children:[(f.size/1024/1024).toFixed(2)," MB"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{onClick:S,variant:"outline",className:"flex-1",disabled:o,children:"Annuler"}),s.jsx(J,{onClick:N,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}),"Upload..."]}):s.jsxs(s.Fragment,{children:[s.jsx(nb,{className:"w-4 h-4 mr-2"}),"Confirmer"]})})]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs(J,{onClick:()=>{var E;return(E=g.current)==null?void 0:E.click()},variant:"outline",className:"w-full",children:[s.jsx(nb,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&s.jsxs(J,{onClick:b,variant:"outline",disabled:o,className:"w-full text-destructive hover:text-destructive",children:[o?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(rb,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsx("p",{children:"• Formats acceptés : JPG, PNG, GIF"}),s.jsx("p",{children:"• Taille maximale : 5MB"}),s.jsx("p",{children:"• Recommandé : image carrée, minimum 200x200px"})]})]})]})]})},qr=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return typeof t=="object"&&t!==null&&"seconds"in t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):new Date},doe=()=>{const{currentUser:t,userProfile:e}=mn(),[n,r]=x.useState([]),[i,a]=x.useState([]),[o,c]=x.useState([]),[u,d]=x.useState(null),[f,p]=x.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[g,_]=x.useState({profile:!0,listings:!0,reviews:!0,favorites:!0}),[N,b]=x.useState({}),[S,w]=x.useState(null),[y,E]=x.useState(""),[I,O]=x.useState((u==null?void 0:u.firstName)||(e==null?void 0:e.firstName)||""),[q,R]=x.useState((u==null?void 0:u.lastName)||(e==null?void 0:e.lastName)||""),V=async()=>{if(t)try{_(oe=>({...oe,profile:!0}));const Y=await Is(yt($e,"users",t.uid));if(Y.exists()){const oe=Y.data();d({...oe,createdAt:qr(oe.createdAt),updatedAt:qr(oe.updatedAt)})}else console.log("Aucun document utilisateur trouvé dans Firestore"),d(null)}catch(Y){console.error("Erreur lors du chargement du profil:",Y),d(null)}finally{_(Y=>({...Y,profile:!1}))}};x.useEffect(()=>{t&&(V(),U(),k(),F())},[t]);const U=async()=>{if(t)try{_(we=>({...we,listings:!0}));const Y=_n(Vt($e,"listings"),Xn("sellerId","==",t.uid),ei(20)),oe=await Fn(Y),pe=[];oe.forEach(we=>{const se=we.data();pe.push({id:we.id,...se,createdAt:qr(se.createdAt),updatedAt:qr(se.updatedAt)})}),pe.sort((we,se)=>qr(se.createdAt).getTime()-qr(we.createdAt).getTime()),r(pe);const Te=pe.filter(we=>we.status==="active");p(we=>({...we,totalListings:pe.length,activeListings:Te.length}))}catch(Y){console.error("Erreur lors du chargement des annonces:",Y)}finally{_(Y=>({...Y,listings:!1}))}},k=async()=>{if(t)try{_(je=>({...je,reviews:!0}));const Y=_n(Vt($e,"reviews"),Xn("revieweeId","==",t.uid),ei(10)),oe=await Fn(Y),pe=[];oe.forEach(je=>{const We=je.data();pe.push({id:je.id,...We,replies:Array.isArray(We.replies)?We.replies.map(G=>({...G,createdAt:G.createdAt instanceof Date?G.createdAt:G.createdAt&&typeof G.createdAt.toDate=="function"?G.createdAt.toDate():new Date})):[],likes:Array.isArray(We.likes)?We.likes:[],dislikes:Array.isArray(We.dislikes)?We.dislikes:[],createdAt:qr(We.createdAt)})}),pe.sort((je,We)=>qr(We.createdAt).getTime()-qr(je.createdAt).getTime()),a(pe);const Te=Array.from(new Set(pe.map(je=>je.reviewerId))),we={...N};await Promise.all(Te.map(async je=>{if(!we[je]){const We=await Is(yt($e,"users",je));if(We.exists()){const G=We.data();we[je]={displayName:G.displayName||"Utilisateur",photoURL:G.photoURL||void 0}}else we[je]={displayName:""}}})),b(we);const se=pe.reduce((je,We)=>je+We.rating,0),_e=pe.length>0?se/pe.length:0;p(je=>({...je,totalReviews:pe.length,averageRating:Math.round(_e*10)/10}))}catch(Y){console.error("Erreur lors du chargement des avis:",Y)}finally{_(Y=>({...Y,reviews:!1}))}},F=async()=>{if(t)try{_(Te=>({...Te,favorites:!0}));const Y=_n(Vt($e,"favorites"),Xn("userId","==",t.uid),ei(20)),oe=await Fn(Y),pe=[];if(oe.forEach(Te=>{const we=Te.data();pe.push({id:Te.id,...we,createdAt:qr(we.createdAt)})}),pe.sort((Te,we)=>qr(we.createdAt).getTime()-qr(Te.createdAt).getTime()),p(Te=>({...Te,totalFavorites:pe.length})),pe.length>0){const Te=pe.slice(0,6).map(async se=>{try{const _e=await Is(yt($e,"listings",se.listingId));if(_e.exists()){const je=_e.data();return{id:_e.id,...je,createdAt:qr(je.createdAt),updatedAt:qr(je.updatedAt)}}return null}catch(_e){return console.error("Erreur lors du chargement d'une annonce favorite:",_e),null}}),we=await Promise.all(Te);c(we.filter(se=>se!==null))}}catch(Y){console.error("Erreur lors du chargement des favoris:",Y)}finally{_(Y=>({...Y,favorites:!1}))}},D=Y=>{if(!Y)return"Date inconnue";try{const oe=qr(Y);return isNaN(oe.getTime())?"Date invalide":mh(oe,{addSuffix:!0,locale:Dr})}catch{return"Date invalide"}},P=Y=>Array.from({length:5},(oe,pe)=>s.jsx(Zo,{className:`h-4 w-4 ${pe<Y?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},pe)),H=localStorage.getItem("pendingUserData"),te=H?JSON.parse(H):{};let Z=(u==null?void 0:u.displayName)||(e==null?void 0:e.displayName)||te.displayName||"";!Z&&(t!=null&&t.displayName)&&(Z=t.displayName),!Z&&(t!=null&&t.email)&&(Z=t.email.split("@")[0]),Z||(Z="Utilisateur");let K=(u==null?void 0:u.university)||(e==null?void 0:e.university)||te.university||"";if((u==null?void 0:u.university)==="Autre université"&&u.otherUniversity||(e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||te.university==="Autre université"&&te.otherUniversity){const Y=u==null?void 0:u.otherUniversity,oe=e==null?void 0:e.otherUniversity,pe=te.otherUniversity;K=Y||oe||pe||"Université personnalisée"}K||(K="Université spécifiée lors de l'inscription");let A=(u==null?void 0:u.fieldOfStudy)||(e==null?void 0:e.fieldOfStudy)||te.fieldOfStudy||"";if((u==null?void 0:u.fieldOfStudy)==="Autre"&&u.otherFieldOfStudy||(e==null?void 0:e.fieldOfStudy)==="Autre"&&e.otherFieldOfStudy||te.fieldOfStudy==="Autre"&&te.otherFieldOfStudy){const Y=u==null?void 0:u.otherFieldOfStudy,oe=e==null?void 0:e.otherFieldOfStudy,pe=te.otherFieldOfStudy;A=Y||oe||pe||"Filière personnalisée"}A||(A="Filière non spécifiée");const z=(u==null?void 0:u.graduationYear)||(e==null?void 0:e.graduationYear)||te.graduationYear||"",B=(u==null?void 0:u.email)||(e==null?void 0:e.email)||te.email||(t==null?void 0:t.email)||"",X=(u==null?void 0:u.photoURL)||(e==null?void 0:e.photoURL)||"",de=(u==null?void 0:u.createdAt)||(e==null?void 0:e.createdAt),ve=(u==null?void 0:u.isVerified)||(e==null?void 0:e.isVerified),be=(u==null?void 0:u.location)||(e==null?void 0:e.location)||"",Ee=(u==null?void 0:u.co2Saved)||(e==null?void 0:e.co2Saved)||0,Oe=t&&e&&t.uid===e.id,Se=async Y=>{if(t)try{const oe=yt($e,"reviews",Y),pe=i.find(se=>se.id===Y);if(!pe)return;const Te=pe.likes||[],we=pe.dislikes||[];Te.includes(t.uid)?await yn(oe,{likes:Te.filter(se=>se!==t.uid)}):await yn(oe,{likes:[...Te,t.uid],dislikes:we.filter(se=>se!==t.uid)}),a(se=>se.map(_e=>{if(_e.id===Y){const je=_e.likes||[],We=_e.dislikes||[];return je.includes(t.uid)?{..._e,likes:je.filter(G=>G!==t.uid)}:{..._e,likes:[...je,t.uid],dislikes:We.filter(G=>G!==t.uid)}}return _e}))}catch(oe){console.error("Error liking review:",oe),Ln.error("Erreur lors du like")}},re=async Y=>{if(t)try{const oe=yt($e,"reviews",Y),pe=i.find(se=>se.id===Y);if(!pe)return;const Te=pe.likes||[],we=pe.dislikes||[];we.includes(t.uid)?await yn(oe,{dislikes:we.filter(se=>se!==t.uid)}):await yn(oe,{dislikes:[...we,t.uid],likes:Te.filter(se=>se!==t.uid)}),a(se=>se.map(_e=>{if(_e.id===Y){const je=_e.likes||[],We=_e.dislikes||[];return We.includes(t.uid)?{..._e,dislikes:We.filter(G=>G!==t.uid)}:{..._e,dislikes:[...We,t.uid],likes:je.filter(G=>G!==t.uid)}}return _e}))}catch(oe){console.error("Error disliking review:",oe),Ln.error("Erreur lors du dislike")}},ee=async Y=>{if(!(!t||!y.trim()))try{const oe=yt($e,"reviews",Y),pe=i.find(we=>we.id===Y);if(!pe)return;const Te={userId:t.uid,comment:y.trim(),createdAt:new Date};await yn(oe,{replies:[...pe.replies||[],Te]}),a(we=>we.map(se=>se.id===Y?{...se,replies:[...se.replies||[],Te]}:se)),E(""),w(null),Ln.success("Réponse envoyée")}catch(oe){console.error("Error replying to review:",oe),Ln.error("Erreur lors de l'envoi de la réponse")}},ne=async()=>{if(t)try{const Y=`${I} ${q}`.trim();await yn(yt($e,"users",t.uid),{firstName:I,lastName:q,displayName:Y,updatedAt:new Date}),await t.reload(),Ln.success("Nom mis à jour !")}catch{Ln.error("Erreur lors de la mise à jour du nom")}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsx(fe,{children:s.jsx(Qe,{className:"text-left",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:space-x-4 text-center sm:text-left",children:[s.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0",children:[s.jsx(p5,{currentPhotoURL:X,displayName:Z}),ve&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(zt,{className:"w-3 h-3 text-white"})})]}),s.jsxs("div",{className:"flex-1 w-full",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-2 mb-1",children:[s.jsx(Je,{className:"text-2xl text-center sm:text-left w-full sm:w-auto",children:Z}),ve&&s.jsxs(at,{className:"bg-green-100 text-green-800 border-green-200 mt-2 sm:mt-0",children:[s.jsx(zt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsx(Ct,{className:"text-base text-center sm:text-left break-all",children:B}),s.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-muted-foreground text-center sm:text-left",children:[s.jsxs("div",{children:[s.jsx(Jr,{className:"h-4 w-4 mr-1 inline"})," Université : ",s.jsx("span",{className:"text-sm",children:K})]}),s.jsxs("div",{children:[s.jsx(sh,{className:"h-4 w-4 mr-1 inline"})," Filière : ",s.jsx("span",{className:"text-sm",children:A})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold",children:"Année de diplôme :"})," ",s.jsx("span",{className:"text-sm",children:z})]})]}),be&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(Mr,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"text-sm",children:be})]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(Xs,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-sm",children:["Membre depuis ",D(de)]})]}),Ee&&Ee>0&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-green-600 text-center sm:text-left",children:[s.jsx(Ei,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-sm font-medium",children:[Ee," kg CO₂ économisés"]})]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vn,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.listings?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.totalListings}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(tp,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.listings?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.activeListings}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zo,{className:"h-5 w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.reviews?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.averageRating||"—"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Or,{className:"h-5 w-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.favorites?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),s.jsxs(tu,{defaultValue:"listings",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-3",children:[s.jsxs(on,{value:"listings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(vn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"}),s.jsx("span",{className:"sm:hidden",children:"Annonces"}),!g.listings&&f.totalListings>0&&s.jsx(at,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalListings})]}),s.jsxs(on,{value:"reviews",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(Zo,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Avis Reçus"}),s.jsx("span",{className:"sm:hidden",children:"Avis"}),!g.reviews&&f.totalReviews>0&&s.jsx(at,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalReviews})]}),s.jsxs(on,{value:"favorites",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(Or,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Favoris"}),s.jsx("span",{className:"sm:hidden",children:"Favoris"}),!g.favorites&&f.totalFavorites>0&&s.jsx(at,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalFavorites})]}),s.jsxs(on,{value:"settings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(Jr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Paramètres"}),s.jsx("span",{className:"sm:hidden",children:"Paramètres"})]})]}),s.jsx(ln,{value:"listings",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(vn,{className:"w-5 h-5"}),"Mes Annonces"]}),s.jsx(Ct,{children:"Gérez vos annonces publiées sur StudyMarket"})]}),s.jsx(me,{children:g.listings?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((Y,oe)=>s.jsxs(fe,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(me,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},oe))}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publié d'annonces."}),s.jsx(J,{asChild:!0,children:s.jsx(Ue,{to:"/create",children:"Publier ma première annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(Y=>s.jsx(km,{listing:Y},Y.id))})})]})}),s.jsx(ln,{value:"reviews",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Zo,{className:"w-5 h-5"}),"Avis Reçus"]}),s.jsx(Ct,{children:"Les avis laissés par d'autres étudiants"})]}),s.jsx(me,{children:g.reviews?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((Y,oe)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((pe,Te)=>s.jsx("div",{className:"w-4 h-4 bg-muted rounded"},Te))}),s.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},oe))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(wn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reçu pour le moment. Les avis apparaîtront après vos premières transactions."})]}):s.jsx("div",{className:"space-y-4",children:i.map(Y=>{var oe,pe,Te,we,se,_e;return s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex",children:P(Y.rating)}),s.jsxs(at,{variant:"secondary",className:"text-xs",children:[Y.rating,"/5"]})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:D(Y.createdAt)})]}),s.jsx("p",{className:"text-foreground mb-3 leading-relaxed text-left",children:Y.comment}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[((oe=N[Y.reviewerId])==null?void 0:oe.photoURL)&&s.jsx("img",{src:N[Y.reviewerId].photoURL,alt:"avatar",className:"w-7 h-7 rounded-full object-cover"}),Y.reviewerId===t.uid?(e==null?void 0:e.displayName)||"Vous":(pe=N[Y.reviewerId])!=null&&pe.displayName?N[Y.reviewerId].displayName:s.jsx("span",{className:"inline-block bg-gray-200 text-gray-600 px-2 py-0.5 rounded text-xs",children:"Profil supprimé"})]}),s.jsx(at,{variant:"outline",className:"text-xs",children:Y.reviewType==="buyer"?"Acheteur":"Vendeur"})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[s.jsxs(J,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(Te=Y.likes)!=null&&Te.includes((t==null?void 0:t.uid)||"")?"text-primary":""}`,onClick:()=>Se(Y.id),children:[s.jsx(rK,{className:"w-4 h-4"}),s.jsx("span",{children:((we=Y.likes)==null?void 0:we.length)||0})]}),s.jsxs(J,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(se=Y.dislikes)!=null&&se.includes((t==null?void 0:t.uid)||"")?"text-destructive":""}`,onClick:()=>re(Y.id),children:[s.jsx(nK,{className:"w-4 h-4"}),s.jsx("span",{children:((_e=Y.dislikes)==null?void 0:_e.length)||0})]}),s.jsxs(J,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>w(S===Y.id?null:Y.id),children:[s.jsx(wn,{className:"w-4 h-4"}),s.jsx("span",{children:"Répondre"})]})]}),S===Y.id&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx(ri,{placeholder:"Votre réponse...",value:y,onChange:je=>E(je.target.value),className:"min-h-[80px]"}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(J,{variant:"outline",size:"sm",onClick:()=>{w(null),E("")},children:"Annuler"}),s.jsx(J,{size:"sm",onClick:()=>ee(Y.id),disabled:!y.trim(),children:"Envoyer"})]})]}),Y.replies&&Y.replies.length>0&&s.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-muted",children:Y.replies.map((je,We)=>{var G;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-medium",children:Oe&&je.userId===(t==null?void 0:t.uid)?"Vous":((G=N[je.userId])==null?void 0:G.displayName)||"Utilisateur"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:D(je.createdAt)})]}),s.jsx("p",{className:"text-muted-foreground text-left",children:je.comment})]},We)})})]},Y.id)})})})]})}),s.jsx(ln,{value:"favorites",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Or,{className:"w-5 h-5"}),"Mes Favoris"]}),s.jsx(Ct,{children:"Les annonces que vous avez ajoutées à vos favoris"})]}),s.jsx(me,{children:g.favorites?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((Y,oe)=>s.jsxs(fe,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(me,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},oe))}):o.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Or,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les à vos favoris !"}),s.jsx(J,{asChild:!0,children:s.jsx(Ue,{to:"/create",children:"Publier ma première annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(Y=>s.jsx(km,{listing:Y},Y.id))})})]})}),s.jsx(ln,{value:"settings",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsx(Je,{children:"Paramètres du profil"}),s.jsx(Ct,{children:"Modifie tes informations principales."})]}),s.jsxs(me,{children:[s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Re,{htmlFor:"firstName",children:"Prénom"}),s.jsx(Ge,{id:"firstName",value:I,onChange:Y=>O(Y.target.value),autoComplete:"given-name"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Re,{htmlFor:"lastName",children:"Nom"}),s.jsx(Ge,{id:"lastName",value:q,onChange:Y=>R(Y.target.value),autoComplete:"family-name"})]})]}),s.jsx(J,{onClick:ne,disabled:!I||!q,children:"Enregistrer"})]})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour voir votre profil."})})})})};var t0="Switch",[hoe,Jue]=Sr(t0),[foe,moe]=hoe(t0),g5=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:u="on",onCheckedChange:d,form:f,...p}=t,[g,_]=x.useState(null),N=ht(e,E=>_(E)),b=x.useRef(!1),S=g?f||!!g.closest("form"):!0,[w,y]=Os({prop:i,defaultProp:a??!1,onChange:d,caller:t0});return s.jsxs(foe,{scope:n,checked:w,disabled:c,children:[s.jsx(Ze.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":_5(w),"data-disabled":c?"":void 0,disabled:c,value:u,...p,ref:N,onClick:Le(t.onClick,E=>{y(I=>!I),S&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),S&&s.jsx(y5,{control:g,bubbles:!b.current,name:r,value:u,checked:w,required:o,disabled:c,form:f,style:{transform:"translateX(-100%)"}})]})});g5.displayName=t0;var v5="SwitchThumb",x5=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=moe(v5,n);return s.jsx(Ze.span,{"data-state":_5(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});x5.displayName=v5;var poe="SwitchBubbleInput",y5=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},a)=>{const o=x.useRef(null),c=ht(o,a),u=Uy(n),d=Py(e);return x.useEffect(()=>{const f=o.current;if(!f)return;const p=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==n&&_){const N=new Event("click",{bubbles:r});_.call(f,n),f.dispatchEvent(N)}},[u,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:c,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});y5.displayName=poe;function _5(t){return t?"checked":"unchecked"}var w5=g5,goe=x5;const rr=x.forwardRef(({className:t,...e},n)=>s.jsx(w5,{className:st("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:s.jsx(goe,{className:st("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));rr.displayName=w5.displayName;const voe=eu({firstName:gt().min(2,"Le prénom doit contenir au moins 2 caractères"),lastName:gt().min(2,"Le nom doit contenir au moins 2 caractères"),displayName:gt().optional(),bio:gt().max(500,"La bio ne peut pas dépasser 500 caractères").optional(),phone:gt().optional(),university:gt().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:gt().min(1,"Veuillez indiquer votre filière"),graduationYear:A3().min(2020).max(2035),campus:gt().optional(),location:gt().optional()}),xoe=eu({currentPassword:gt().min(6,"Le mot de passe actuel est requis"),newPassword:gt().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractères"),confirmPassword:gt()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),yoe=eu({newEmail:gt().email("Email invalide"),password:gt().min(6,"Mot de passe requis pour changer l'email")}),_oe=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris Cité","Sciences Po Paris","Université de Lyon","Université de Marseille","Université de Toulouse","Université de Bordeaux","Université de Lille","Université de Strasbourg","Université de Nantes","Université de Montpellier","Autre université"],woe=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Économie","Psychologie","Communication","Design","Autre"],boe=()=>{var H,te,Z,K,A,z;const{currentUser:t,userProfile:e,updateUserProfile:n,logout:r}=mn(),i=cr(),[a,o]=x.useState("profile"),[c,u]=x.useState(!1),[d,f]=x.useState(!1),[p,g]=x.useState(!1),[_,N]=x.useState(!1),[b,S]=x.useState(""),[w,y]=x.useState({email:((H=e==null?void 0:e.notificationPreferences)==null?void 0:H.email)??!0,push:((te=e==null?void 0:e.notificationPreferences)==null?void 0:te.push)??!0,sms:((Z=e==null?void 0:e.notificationPreferences)==null?void 0:Z.sms)??!1,alerts:((K=e==null?void 0:e.notificationPreferences)==null?void 0:K.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[E,I]=x.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),O=_c({resolver:wc(voe),defaultValues:{firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),q=_c({resolver:wc(xoe)}),R=_c({resolver:wc(yoe)});x.useEffect(()=>{var B,X,de,ve;e&&(O.reset({firstName:e.firstName||"",lastName:e.lastName||"",displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),y({email:((B=e.notificationPreferences)==null?void 0:B.email)??!0,push:((X=e.notificationPreferences)==null?void 0:X.push)??!0,sms:((de=e.notificationPreferences)==null?void 0:de.sms)??!1,alerts:((ve=e.notificationPreferences)==null?void 0:ve.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,O]);const V=async B=>{u(!0);try{const{firstName:X,lastName:de,...ve}=B,be=`${X} ${de}`;await yn(yt($e,"users",t.uid),{...ve,firstName:X,lastName:de,displayName:be,updatedAt:new Date}),xe.success("Profil mis à jour !")}catch{xe.error("Erreur lors de la mise à jour du profil")}finally{u(!1)}},U=async()=>{u(!0);try{await n({notificationPreferences:{email:w.email,push:w.push,sms:w.sms,alerts:w.alerts}}),xe.success("Préférences de notification mises à jour !")}catch(B){console.error("Erreur lors de la mise à jour des notifications:",B),xe.error("Erreur lors de la mise à jour des notifications")}finally{u(!1)}},k=async B=>{if(t){u(!0);try{const X=ml.credential(t.email,B.currentPassword);await CE(t,X),await Q7(t,B.newPassword),xe.success("Mot de passe mis à jour avec succès !"),g(!1),q.reset()}catch(X){console.error("Erreur lors du changement de mot de passe:",X),X.code==="auth/wrong-password"?xe.error("Mot de passe actuel incorrect"):xe.error("Erreur lors du changement de mot de passe")}finally{u(!1)}}},F=async B=>{if(t){u(!0);try{const X=ml.credential(t.email,B.password);await CE(t,X),await Y7(t,B.newEmail),await n({email:B.newEmail}),xe.success("Email mis à jour avec succès !"),N(!1),R.reset()}catch(X){console.error("Erreur lors du changement d'email:",X),X.code==="auth/wrong-password"?xe.error("Mot de passe incorrect"):X.code==="auth/email-already-in-use"?xe.error("Cet email est déjà utilisé"):xe.error("Erreur lors du changement d'email")}finally{u(!1)}}},D=async()=>{if(!(!t||b!=="SUPPRIMER")){u(!0);try{const B=_4($e),X=["listings","conversations","reviews","favorites","reports"];for(const de of X){const ve=_n(Vt($e,de),Xn("userId","==",t.uid));(await Fn(ve)).forEach(Ee=>{B.delete(Ee.ref)})}B.delete(yt($e,"users",t.uid)),await B.commit(),await n$(t),xe.success("Compte supprimé avec succès"),i("/")}catch(B){console.error("Erreur lors de la suppression du compte:",B),xe.error("Erreur lors de la suppression du compte")}finally{u(!1)}}},P=async()=>{if(t){u(!0);try{const B={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},X=_n(Vt($e,"listings"),Xn("sellerId","==",t.uid)),de=await Fn(X);B.listings=de.docs.map(pe=>({id:pe.id,...pe.data()}));const ve=_n(Vt($e,"conversations"),Xn("participants","array-contains",t.uid)),be=await Fn(ve);B.conversations=be.docs.map(pe=>({id:pe.id,...pe.data()}));const Ee=_n(Vt($e,"reviews"),Xn("revieweeId","==",t.uid)),Oe=await Fn(Ee);B.reviews=Oe.docs.map(pe=>({id:pe.id,...pe.data()}));const Se=_n(Vt($e,"favorites"),Xn("userId","==",t.uid)),re=await Fn(Se);B.favorites=re.docs.map(pe=>({id:pe.id,...pe.data()}));const ee=JSON.stringify(B,null,2),ne=new Blob([ee],{type:"application/json"}),Y=URL.createObjectURL(ne),oe=document.createElement("a");oe.href=Y,oe.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,oe.click(),URL.revokeObjectURL(Y),xe.success("Données exportées avec succès !")}catch(B){console.error("Erreur lors de l'export des données:",B),xe.error("Erreur lors de l'export des données")}finally{u(!1)}}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[s.jsx(wy,{className:"w-8 h-8"}),"Paramètres"]}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez votre profil, vos préférences et votre sécurité"})]}),s.jsxs(tu,{value:a,onValueChange:o,className:"space-y-6",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-5",children:[s.jsxs(on,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(Jr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),s.jsxs(on,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(yi,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),s.jsxs(on,{value:"privacy",className:"flex items-center gap-2",children:[s.jsx(Ad,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Confidentialité"})]}),s.jsxs(on,{value:"security",className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Sécurité"})]}),s.jsxs(on,{value:"data",className:"flex items-center gap-2",children:[s.jsx(ti,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Données"})]})]}),s.jsx(ln,{value:"profile",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Jr,{className:"w-5 h-5"}),"Informations personnelles"]}),s.jsx(Ct,{children:"Mettez à jour vos informations de profil et vos préférences"})]}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(p5,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Photo de profil"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),s.jsx(Zs,{}),s.jsxs("form",{onSubmit:O.handleSubmit(V),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"firstName",children:"Prénom *"}),s.jsx(Ge,{id:"firstName",...O.register("firstName"),placeholder:"Votre prénom"}),O.formState.errors.firstName&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.firstName.message})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"lastName",children:"Nom *"}),s.jsx(Ge,{id:"lastName",...O.register("lastName"),placeholder:"Votre nom"}),O.formState.errors.lastName&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.lastName.message})]})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"phone",children:"Téléphone"}),s.jsx(Ge,{id:"phone",type:"tel",...O.register("phone"),placeholder:"+33 6 12 34 56 78"})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"bio",children:"Biographie"}),s.jsx(ri,{id:"bio",...O.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((A=O.watch("bio"))==null?void 0:A.length)||0,"/500 caractères"]})]}),s.jsx(Zs,{}),s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(sh,{className:"w-4 h-4"}),"Informations académiques"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"university",children:"Université *"}),s.jsxs(tn,{value:O.watch("university"),onValueChange:B=>O.setValue("university",B),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Sélectionnez votre université"})}),s.jsx(Gt,{children:_oe.map(B=>s.jsx(Ke,{value:B,children:B},B))})]}),O.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.university.message})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"fieldOfStudy",children:"Filière d'études *"}),s.jsxs(tn,{value:O.watch("fieldOfStudy"),onValueChange:B=>O.setValue("fieldOfStudy",B),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Sélectionnez votre filière"})}),s.jsx(Gt,{children:woe.map(B=>s.jsx(Ke,{value:B,children:B},B))})]}),O.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.fieldOfStudy.message})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"graduationYear",children:"Année de diplôme *"}),s.jsxs(tn,{value:(z=O.watch("graduationYear"))==null?void 0:z.toString(),onValueChange:B=>O.setValue("graduationYear",parseInt(B)),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Année de diplôme"})}),s.jsx(Gt,{children:Array.from({length:16},(B,X)=>2020+X).map(B=>s.jsx(Ke,{value:B.toString(),children:B},B))})]}),O.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.graduationYear.message})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"campus",children:"Campus"}),s.jsx(Ge,{id:"campus",...O.register("campus"),placeholder:"Campus principal"})]})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"location",children:"Localisation"}),s.jsx(Ge,{id:"location",...O.register("location"),placeholder:"Paris, France"})]}),s.jsx(J,{type:"submit",disabled:c,className:"w-full",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(i_,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),s.jsx(ln,{value:"notifications",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(yi,{className:"w-5 h-5"}),"Préférences de notification"]}),s.jsx(Ct,{children:"Choisissez comment vous souhaitez être notifié"})]}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(vs,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),s.jsx(rr,{checked:w.email,onCheckedChange:B=>y(X=>({...X,email:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Yc,{className:"w-4 h-4 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notifications push"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),s.jsx(rr,{checked:w.push,onCheckedChange:B=>y(X=>({...X,push:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ih,{className:"w-4 h-4 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"SMS"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientôt disponible)"})]})]}),s.jsx(rr,{checked:w.sms,onCheckedChange:B=>y(X=>({...X,sms:B})),disabled:!0})]})]})]}),s.jsx(Zs,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Types de notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(wn,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),s.jsx(rr,{checked:w.messages,onCheckedChange:B=>y(X=>({...X,messages:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(vn,{className:"w-4 h-4 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Annonces"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant à vos recherches"})]})]}),s.jsx(rr,{checked:w.listings,onCheckedChange:B=>y(X=>({...X,listings:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zo,{className:"w-4 h-4 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Avis et évaluations"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),s.jsx(rr,{checked:w.reviews,onCheckedChange:B=>y(X=>({...X,reviews:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(yi,{className:"w-4 h-4 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Alertes de sécurité"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises à jour de sécurité"})]})]}),s.jsx(rr,{checked:w.alerts,onCheckedChange:B=>y(X=>({...X,alerts:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ZG,{className:"w-4 h-4 text-pink-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Marketing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalités et promotions"})]})]}),s.jsx(rr,{checked:w.marketing,onCheckedChange:B=>y(X=>({...X,marketing:B}))})]})]})]}),s.jsx(J,{onClick:U,disabled:c,className:"w-full",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(i_,{className:"w-4 h-4 mr-2"}),"Sauvegarder les préférences"]})})]})]})}),s.jsx(ln,{value:"privacy",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Ad,{className:"w-5 h-5"}),"Confidentialité et visibilité"]}),s.jsx(Ct,{children:"Contrôlez qui peut voir vos informations"})]}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Visibilité du profil"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Profil public"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les étudiants vérifiés"})]}),s.jsx(rr,{checked:E.profileVisibility==="public",onCheckedChange:B=>I(X=>({...X,profileVisibility:B?"public":"private"}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),s.jsx(rr,{checked:E.showEmail,onCheckedChange:B=>I(X=>({...X,showEmail:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher le téléphone"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numéro de téléphone est visible sur votre profil"})]}),s.jsx(rr,{checked:E.showPhone,onCheckedChange:B=>I(X=>({...X,showPhone:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'université"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre université est visible sur votre profil"})]}),s.jsx(rr,{checked:E.showUniversity,onCheckedChange:B=>I(X=>({...X,showUniversity:B}))})]})]})]}),s.jsx(Zs,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Interactions"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres étudiants peuvent vous envoyer des messages"})]}),s.jsx(rr,{checked:E.allowMessages,onCheckedChange:B=>I(X=>({...X,allowMessages:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Statut en ligne"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous êtes en ligne"})]}),s.jsx(rr,{checked:E.showOnlineStatus,onCheckedChange:B=>I(X=>({...X,showOnlineStatus:B}))})]})]})]}),s.jsxs($t,{children:[s.jsx(zt,{className:"h-4 w-4"}),s.jsx(Bt,{children:"Vos informations personnelles sont toujours protégées et ne sont jamais partagées avec des tiers sans votre consentement."})]})]})]})}),s.jsx(ln,{value:"security",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5"}),"Sécurité du compte"]}),s.jsx(Ct,{children:"Gérez la sécurité de votre compte StudyMarket"})]}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Informations du compte"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(vs,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Email"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),s.jsxs(da,{open:_,onOpenChange:N,children:[s.jsx(md,{asChild:!0,children:s.jsx(J,{variant:"outline",size:"sm",children:"Changer l'email"})}),s.jsxs(Ci,{children:[s.jsxs(ha,{children:[s.jsx(ki,{children:"Changer l'adresse email"}),s.jsx(yc,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),s.jsxs("form",{onSubmit:R.handleSubmit(F),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"newEmail",children:"Nouvel email"}),s.jsx(Ge,{id:"newEmail",type:"email",...R.register("newEmail"),placeholder:"nouveau@email.com"}),R.formState.errors.newEmail&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.newEmail.message})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),s.jsx(Ge,{id:"emailPassword",type:"password",...R.register("password"),placeholder:"••••••••"}),R.formState.errors.password&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.password.message})]}),s.jsxs(sv,{children:[s.jsx(J,{type:"button",variant:"outline",onClick:()=>N(!1),children:"Annuler"}),s.jsxs(J,{type:"submit",disabled:c,children:[c?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(i_,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Oc,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernière modification : il y a 30 jours"}),s.jsxs(da,{open:p,onOpenChange:g,children:[s.jsx(md,{asChild:!0,children:s.jsx(J,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),s.jsxs(Ci,{children:[s.jsxs(ha,{children:[s.jsx(ki,{children:"Changer le mot de passe"}),s.jsx(yc,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),s.jsxs("form",{onSubmit:q.handleSubmit(k),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),s.jsx(Ge,{id:"currentPassword",type:"password",...q.register("currentPassword"),placeholder:"••••••••"}),q.formState.errors.currentPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.currentPassword.message})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),s.jsx(Ge,{id:"newPassword",type:"password",...q.register("newPassword"),placeholder:"••••••••"}),q.formState.errors.newPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.newPassword.message})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),s.jsx(Ge,{id:"confirmPassword",type:"password",...q.register("confirmPassword"),placeholder:"••••••••"}),q.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.confirmPassword.message})]}),s.jsxs(sv,{children:[s.jsx(J,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Annuler"}),s.jsxs(J,{type:"submit",disabled:c,children:[c?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(qG,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),s.jsx(Zs,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Vérification du compte"}),s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vérifié":"Vérification en attente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut étudiant a été vérifié":"Votre statut étudiant est en cours de vérification"})]})]}),e!=null&&e.isVerified?s.jsxs(at,{className:"bg-green-100 text-green-800",children:[s.jsx(Pt,{className:"w-3 h-3 mr-1"}),"Vérifié"]}):s.jsx(at,{variant:"outline",children:"En attente"})]})})]}),s.jsxs($t,{children:[s.jsx(zt,{className:"h-4 w-4"}),s.jsx(Bt,{children:"Pour votre sécurité, nous vous recommandons d'utiliser un mot de passe fort et de le changer régulièrement."})]})]})]})}),s.jsxs(ln,{value:"data",className:"space-y-6",children:[s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(ti,{className:"w-5 h-5"}),"Gestion des données"]}),s.jsx(Ct,{children:"Exportez ou supprimez vos données personnelles"})]}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Exporter mes données"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Téléchargez une copie de toutes vos données StudyMarket au format JSON."}),s.jsxs(J,{onClick:P,disabled:c,variant:"outline",children:[c?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(ti,{className:"w-4 h-4 mr-2"}),"Exporter mes données"]})]}),s.jsx(Zs,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),s.jsxs($t,{className:"border-destructive",children:[s.jsx(In,{className:"h-4 w-4"}),s.jsx(Bt,{children:"La suppression de votre compte est irréversible. Toutes vos données seront définitivement supprimées."})]}),s.jsxs(da,{open:d,onOpenChange:f,children:[s.jsx(md,{asChild:!0,children:s.jsxs(J,{variant:"destructive",children:[s.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),s.jsxs(Ci,{children:[s.jsxs(ha,{children:[s.jsx(ki,{className:"text-destructive",children:"Supprimer définitivement le compte"}),s.jsxs(yc,{children:["Cette action est irréversible. Toutes vos données seront supprimées :",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"Profil utilisateur"}),s.jsx("li",{children:"Toutes vos annonces"}),s.jsx("li",{children:"Conversations et messages"}),s.jsx("li",{children:"Avis et évaluations"}),s.jsx("li",{children:"Favoris et recherches sauvegardées"})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),s.jsx(Ge,{id:"deleteConfirm",value:b,onChange:B=>S(B.target.value),placeholder:"SUPPRIMER"})]})}),s.jsxs(sv,{children:[s.jsx(J,{variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsxs(J,{variant:"destructive",onClick:D,disabled:b!=="SUPPRIMER"||c,children:[c?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Supprimer définitivement"]})]})]})]})]})]})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(ex,{className:"w-5 h-5"}),"Informations légales"]})}),s.jsx(me,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(J,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(hs,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),s.jsx(J,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(hs,{className:"w-4 h-4"}),"Politique de confidentialité"]})}),s.jsx(J,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(hs,{className:"w-4 h-4"}),"Politique des cookies"]})}),s.jsx(J,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(hs,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour accéder aux paramètres."})})})})};var nS="Progress",rS=100,[joe,ede]=Sr(nS),[Noe,Soe]=joe(nS),b5=x.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=Eoe,...o}=t;(i||i===0)&&!lT(i)&&console.error(Coe(`${i}`,"Progress"));const c=lT(i)?i:rS;r!==null&&!cT(r,c)&&console.error(koe(`${r}`,"Progress"));const u=cT(r,c)?r:null,d=Sx(u)?a(u,c):void 0;return s.jsx(Noe,{scope:n,value:u,max:c,children:s.jsx(Ze.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Sx(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":S5(u,c),"data-value":u??void 0,"data-max":c,...o,ref:e})})});b5.displayName=nS;var j5="ProgressIndicator",N5=x.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=Soe(j5,n);return s.jsx(Ze.div,{"data-state":S5(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});N5.displayName=j5;function Eoe(t,e){return`${Math.round(t/e*100)}%`}function S5(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Sx(t){return typeof t=="number"}function lT(t){return Sx(t)&&!isNaN(t)&&t>0}function cT(t,e){return Sx(t)&&!isNaN(t)&&t<=e&&t>=0}function Coe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${rS}\`.`}function koe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${rS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var E5=b5,Toe=N5;const C5=x.forwardRef(({className:t,value:e,...n},r)=>s.jsx(E5,{ref:r,className:st("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:s.jsx(Toe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));C5.displayName=E5.displayName;const Ql={electronics:{category:"Électronique",icon:Yc,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:B4,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:nx,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, déco, électroménager"},clothing:{category:"Vêtements",icon:tN,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vêtements, chaussures, accessoires"}},Poe=[{id:"first_transaction",name:"Premier Pas",icon:"🌱",threshold:1,description:"Première transaction écologique"},{id:"co2_saver_10",name:"Éco-Warrior",icon:"🌍",threshold:10,description:"10 kg CO₂ économisés"},{id:"co2_saver_50",name:"Planète Protecteur",icon:"🛡️",threshold:50,description:"50 kg CO₂ économisés"},{id:"co2_saver_100",name:"Héros Climatique",icon:"🦸",threshold:100,description:"100 kg CO₂ économisés"},{id:"water_saver",name:"Gardien de l'Eau",icon:"💧",threshold:1e3,description:"1000L d'eau économisés"},{id:"recycling_master",name:"Maître du Recyclage",icon:"♻️",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"😇",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"🏆",threshold:10,description:"10 transactions en un mois"}],Mu=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Ioe=()=>{const{currentUser:t,userProfile:e}=mn(),[n,r]=x.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Débutant",percentile:0}),[i,a]=x.useState([]),[o,c]=x.useState(!0),[u,d]=x.useState("all");x.useEffect(()=>{t&&f()},[t,u]);const f=async()=>{if(t){c(!0);try{const y=_n(Vt($e,"listings"),Xn("sellerId","==",t.uid)),E=await Fn(y),I=[];E.forEach(q=>{const R=q.data();I.push({id:q.id,...R,createdAt:Mu(R.createdAt),updatedAt:Mu(R.updatedAt)})}),a(I);const O=p(I,u);r(O),await b(O)}catch(y){console.error("Erreur lors du chargement des données environnementales:",y)}finally{c(!1)}}},p=(y,E)=>{const I=new Date;let O=y;if(E==="month"){const te=new Date(I.getFullYear(),I.getMonth()-1,I.getDate());O=y.filter(Z=>Mu(Z.createdAt)>=te)}else if(E==="year"){const te=new Date(I.getFullYear()-1,I.getMonth(),I.getDate());O=y.filter(Z=>Mu(Z.createdAt)>=te)}let q=0,R=0,V=0,U=0;const k={};O.forEach(te=>{const Z=Ql[te.category]||Ql.electronics,K=1;let A=1;te.transactionType==="donation"?A=1.2:te.transactionType==="exchange"&&(A=.8),q+=Z.co2PerItem*K*A,R+=Z.waterPerItem*K*A,V+=Z.energyPerItem*K*A,U+=Z.wastePerItem*K*A,k[te.category]=(k[te.category]||0)+1});const F=g(y),D=_(y,q,R),{rank:P,percentile:H}=N(q,y.length);return{totalCo2Saved:Math.round(q*10)/10,totalWaterSaved:Math.round(R),totalEnergySaved:Math.round(V*10)/10,totalWasteAvoided:Math.round(U*10)/10,transactionsByCategory:k,monthlyImpact:F,badges:D,rank:P,percentile:H}},g=y=>{const E={};for(let I=11;I>=0;I--){const O=new Date;O.setMonth(O.getMonth()-I);const q=O.toISOString().slice(0,7);E[q]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return y.forEach(I=>{const q=Mu(I.createdAt).toISOString().slice(0,7);if(E[q]){const R=Ql[I.category]||Ql.electronics;let V=1;I.transactionType==="donation"?V=1.2:I.transactionType==="exchange"&&(V=.8),E[q].co2Saved+=R.co2PerItem*V,E[q].waterSaved+=R.waterPerItem*V,E[q].energySaved+=R.energyPerItem*V,E[q].transactions+=1}}),Object.entries(E).map(([I,O])=>({month:I,co2Saved:Math.round(O.co2Saved*10)/10,transactions:O.transactions,waterSaved:Math.round(O.waterSaved),energySaved:Math.round(O.energySaved*10)/10}))},_=(y,E,I)=>{const O=[];y.length>=1&&O.push("first_transaction"),E>=10&&O.push("co2_saver_10"),E>=50&&O.push("co2_saver_50"),E>=100&&O.push("co2_saver_100"),I>=1e3&&O.push("water_saver"),y.length>=20&&O.push("recycling_master"),y.filter(U=>U.transactionType==="donation").length>=5&&O.push("donation_hero");const R=new Date().toISOString().slice(0,7);return y.filter(U=>Mu(U.createdAt).toISOString().slice(0,7)===R).length>=10&&O.push("monthly_champion"),O},N=(y,E)=>{let I="Débutant",O=0;return y>=200?(I="Légende Écologique",O=95):y>=100?(I="Maître Environnemental",O=85):y>=50?(I="Expert Vert",O=70):y>=25?(I="Éco-Warrior",O=50):y>=10?(I="Protecteur",O=30):y>=5&&(I="Apprenti Vert",O=15),{rank:I,percentile:O}},b=async y=>{if(t)try{const E=yt($e,"users",t.uid);await yn(E,{co2Saved:y.totalCo2Saved,environmentalRank:y.rank,environmentalBadges:y.badges,lastEnvironmentalUpdate:new Date})}catch(E){console.error("Erreur lors de la mise à jour des données environnementales:",E)}},S=async()=>{const y=`🌍 Mon impact écologique sur StudyMarket :

🌱 ${n.totalCo2Saved} kg CO₂ économisés
💧 ${n.totalWaterSaved} L d'eau préservés
⚡ ${n.totalEnergySaved} kWh d'énergie économisés
🏆 Rang : ${n.rank}

Rejoignez la communauté étudiante éco-responsable ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mon Impact Écologique - StudyMarket",text:y,url:window.location.origin})}catch{navigator.clipboard.writeText(y)}else navigator.clipboard.writeText(y)},w=()=>{const y={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:n,transactions:i.length,period:u},E=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),I=URL.createObjectURL(E),O=document.createElement("a");O.href=I,O.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,O.click(),URL.revokeObjectURL(I)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Ei,{className:"w-8 h-8 text-green-600"}),"Mon Impact Écologique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez votre contribution à la protection de l'environnement"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{variant:"outline",onClick:S,className:"flex items-center gap-2",children:[s.jsx(by,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(J,{variant:"outline",onClick:w,className:"flex items-center gap-2",children:[s.jsx(ti,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xs,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Période d'analyse :"})]}),s.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette année"},{key:"all",label:"Tout"}].map(y=>s.jsx(J,{variant:u===y.key?"default":"outline",size:"sm",onClick:()=>d(y.key),children:y.label},y.key))})]})})}),o?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((y,E)=>s.jsx(fe,{className:"animate-pulse",children:s.jsx(me,{className:"pt-6",children:s.jsx("div",{className:"h-16 bg-muted rounded"})})},E))}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(fe,{className:"border-green-200 bg-green-50/50",children:s.jsxs(me,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-700",children:n.totalCo2Saved}),s.jsx("p",{className:"text-sm text-green-600",children:"kg CO₂ économisés"})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ei,{className:"w-6 h-6 text-green-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-green-600",children:["≈ ",Math.round(n.totalCo2Saved/2.3)," km en voiture évités"]})]})}),s.jsx(fe,{className:"border-blue-200 bg-blue-50/50",children:s.jsxs(me,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.totalWaterSaved.toLocaleString()}),s.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau préservés"})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(IC,{className:"w-6 h-6 text-blue-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["≈ ",Math.round(n.totalWaterSaved/150)," douches économisées"]})]})}),s.jsx(fe,{className:"border-yellow-200 bg-yellow-50/50",children:s.jsxs(me,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:n.totalEnergySaved}),s.jsx("p",{className:"text-sm text-yellow-600",children:"kWh économisés"})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(ah,{className:"w-6 h-6 text-yellow-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:["≈ ",Math.round(n.totalEnergySaved/3.5)," jours d'électricité"]})]})}),s.jsx(fe,{className:"border-purple-200 bg-purple-50/50",children:s.jsxs(me,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-700",children:n.totalWasteAvoided}),s.jsx("p",{className:"text-sm text-purple-600",children:"kg déchets évités"})]}),s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(XG,{className:"w-6 h-6 text-purple-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["≈ ",Math.round(n.totalWasteAvoided/.5)," sacs poubelle évités"]})]})})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(U4,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang Écologique"]})}),s.jsxs(me,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-primary",children:n.rank}),s.jsxs("p",{className:"text-muted-foreground",children:["Vous êtes dans le top ",100-n.percentile,"% des utilisateurs"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl",children:"🏆"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),s.jsx(C5,{value:n.percentile,className:"h-3"}),s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[s.jsx("span",{children:"Débutant"}),s.jsx("span",{children:"Légende Écologique"})]})]})]}),s.jsxs(tu,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-4",children:[s.jsx(on,{value:"overview",children:"Vue d'ensemble"}),s.jsx(on,{value:"categories",children:"Par catégorie"}),s.jsx(on,{value:"badges",children:"Badges"}),s.jsx(on,{value:"methodology",children:"Méthodologie"})]}),s.jsxs(ln,{value:"overview",className:"space-y-6",children:[s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(K4,{className:"w-5 h-5"}),"Évolution Mensuelle"]}),s.jsx(Ct,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),s.jsx(me,{children:s.jsx("div",{className:"space-y-4",children:n.monthlyImpact.slice(-6).map((y,E)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"font-medium",children:new Date(y.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),s.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[y.co2Saved," kg"]}),s.jsx("div",{className:"text-muted-foreground",children:"CO₂"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-blue-600",children:[y.waterSaved," L"]}),s.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-primary",children:y.transactions}),s.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},y.month))})})]}),s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Y4,{className:"w-5 h-5"}),"Équivalences Concrètes"]}),s.jsx(Ct,{children:"Votre impact traduit en équivalences du quotidien"})]}),s.jsx(me,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[s.jsx(G4,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/2.3)," km"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture évités"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[s.jsx(sK,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/22)," arbres"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"plantés (équivalent CO₂)"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[s.jsx(zG,{className:"w-8 h-8 text-yellow-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalEnergySaved/24)," jours"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation électrique"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[s.jsx(IC,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalWaterSaved/150)," douches"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes économisées"})]})]})]})})]})]}),s.jsx(ln,{value:"categories",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(vn,{className:"w-5 h-5"}),"Impact par Catégorie"]}),s.jsx(Ct,{children:"Détail de votre impact selon les types d'objets échangés"})]}),s.jsx(me,{children:s.jsx("div",{className:"space-y-4",children:Object.entries(n.transactionsByCategory).map(([y,E])=>{const I=Ql[y]||Ql.electronics,O=I.icon,q=E*I.co2PerItem;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx(O,{className:`w-5 h-5 ${I.color}`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:I.category}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[E," transaction",E>1?"s":""]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(q*10)/10," kg CO₂"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(E*I.waterPerItem)," L eau"]})]})]},y)})})})]})}),s.jsx(ln,{value:"badges",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(tb,{className:"w-5 h-5"}),"Badges Écologiques"]}),s.jsx(Ct,{children:"Vos récompenses pour votre engagement environnemental"})]}),s.jsx(me,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Poe.map(y=>{const E=n.badges.includes(y.id);return s.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${E?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl mb-2",children:y.icon}),s.jsx("h3",{className:`font-semibold ${E?"text-green-800":"text-gray-600"}`,children:y.name}),s.jsx("p",{className:`text-sm ${E?"text-green-600":"text-gray-500"}`,children:y.description}),E&&s.jsx(at,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},y.id)})})})]})}),s.jsx(ln,{value:"methodology",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(yl,{className:"w-5 h-5"}),"Méthodologie de Calcul"]}),s.jsx(Ct,{children:"Comment nous calculons votre impact environnemental"})]}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs($t,{children:[s.jsx(yl,{className:"h-4 w-4"}),s.jsx(Bt,{children:"Nos calculs sont basés sur des études scientifiques et des données de l'ADEME (Agence de l'Environnement et de la Maîtrise de l'Énergie)."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),s.jsx("p",{className:"text-muted-foreground",children:"Chaque objet acheté d'occasion évite la production d'un objet neuf. Nous calculons l'impact environnemental évité en nous basant sur l'empreinte carbone, hydrique et énergétique de la production de chaque catégorie d'objets."}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catégorie"}),s.jsx("div",{className:"space-y-3",children:Object.entries(Ql).map(([y,E])=>{const I=E.icon;return s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(I,{className:`w-4 h-4 ${E.color}`}),s.jsx("span",{className:"font-medium",children:E.category})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"CO₂:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[E.co2PerItem," kg"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[E.waterPerItem," L"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Énergie:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[E.energyPerItem," kWh"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Déchets:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[E.wastePerItem," kg"]})]})]})]},y)})}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondération"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rd,{className:"w-4 h-4 text-green-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(so,{className:"w-4 h-4 text-purple-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Échanges/Troc :"})," -20% d'impact (pas de transaction monétaire)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vn,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),s.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Références"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:"• ADEME - Base Carbone® pour les facteurs d'émission"}),s.jsx("li",{children:"• Water Footprint Network pour l'empreinte hydrique"}),s.jsx("li",{children:"• IEA (International Energy Agency) pour l'énergie"}),s.jsx("li",{children:"• Ellen MacArthur Foundation pour l'économie circulaire"})]})]})]})]})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(Ei,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),s.jsx("p",{className:"text-muted-foreground",children:"Découvrez combien vous contribuez à la protection de l'environnement"})]})})})},Tg=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Ex=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(Ex).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=Ex(t[n]);r!==void 0&&(e[n]=r)}),e}return t},uT=[{value:"all",label:"Toutes catégories"},{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],dT=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"Échange"},{value:"service",label:"Service"}],Aoe=[{value:"all",label:"Toutes universités"},{value:"sorbonne",label:"Sorbonne Université"},{value:"dauphine",label:"Université Paris-Dauphine"},{value:"polytechnique",label:"École Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSupélec"}],Roe=()=>{const{currentUser:t,userProfile:e}=mn(),[n,r]=x.useState([]),[i,a]=x.useState([]),[o,c]=x.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[u,d]=x.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[f,p]=x.useState(!1),[g,_]=x.useState(null),[N,b]=x.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});x.useEffect(()=>{t&&(S(),w())},[t]);const S=async()=>{if(t)try{d(H=>({...H,searches:!0}));const k=_n(Vt($e,"savedSearches"),Xn("userId","==",t.uid),ei(50)),F=await Fn(k),D=[];F.forEach(H=>{const te=H.data();D.push({id:H.id,...te,createdAt:Tg(te.createdAt),updatedAt:Tg(te.updatedAt),lastNotified:te.lastNotified?Tg(te.lastNotified):void 0})}),D.sort((H,te)=>te.createdAt.getTime()-H.createdAt.getTime()),r(D);const P=D.filter(H=>H.alertsEnabled).length;c(H=>({...H,totalSearches:D.length,activeAlerts:P}))}catch(k){console.error("Erreur lors du chargement des recherches sauvegardées:",k),xe.error("Erreur lors du chargement des recherches sauvegardées")}finally{d(k=>({...k,searches:!1}))}},w=async()=>{if(t)try{d(H=>({...H,matches:!0}));const k=_n(Vt($e,"alertMatches"),Xn("userId","==",t.uid),ei(100)),F=await Fn(k),D=[];F.forEach(H=>{const te=H.data();D.push({id:H.id,...te,matchedAt:Tg(te.matchedAt)})}),D.sort((H,te)=>te.matchedAt.getTime()-H.matchedAt.getTime()),a(D);const P=D.filter(H=>!H.seen).length;c(H=>({...H,totalMatches:D.length,newMatches:P}))}catch(k){console.error("Erreur lors du chargement des correspondances:",k),xe.error("Erreur lors du chargement des correspondances")}finally{d(k=>({...k,matches:!1}))}},y=async()=>{if(!t||!N.name.trim()){xe.error("Veuillez remplir le nom de la recherche");return}d(k=>({...k,creating:!0}));try{const k={};if(N.query&&N.query.trim()&&(k.query=N.query.trim()),N.category&&N.category!=="all"&&(k.category=N.category),N.transactionType&&N.transactionType!=="all"&&(k.transactionType=N.transactionType),N.university&&N.university!=="all"&&(k.university=N.university),N.minPrice&&N.minPrice.trim()){const P=parseFloat(N.minPrice);!isNaN(P)&&P>=0&&(k.minPrice=P)}if(N.maxPrice&&N.maxPrice.trim()){const P=parseFloat(N.maxPrice);!isNaN(P)&&P>=0&&(k.maxPrice=P)}const F={userId:t.uid,name:N.name.trim(),filters:k,alertsEnabled:N.alertsEnabled,notificationFrequency:N.notificationFrequency,notificationMethods:{email:N.notificationMethods.email,push:N.notificationMethods.push,sms:N.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},D=Ex(F);await xl(Vt($e,"savedSearches"),D),xe.success("Alerte créée avec succès !"),p(!1),R(),S()}catch(k){console.error("Erreur lors de la création de l'alerte:",k),xe.error("Erreur lors de la création de l'alerte")}finally{d(k=>({...k,creating:!1}))}},E=async(k,F)=>{try{d(P=>({...P,updating:!0}));const D=Ex({...F,updatedAt:new Date});await yn(yt($e,"savedSearches",k),D),xe.success("Recherche mise à jour !"),S()}catch(D){console.error("Erreur lors de la mise à jour:",D),xe.error("Erreur lors de la mise à jour")}finally{d(D=>({...D,updating:!1}))}},I=async k=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette recherche sauvegardée ?"))try{await Pd(yt($e,"savedSearches",k)),xe.success("Recherche supprimée !"),S()}catch(F){console.error("Erreur lors de la suppression:",F),xe.error("Erreur lors de la suppression")}},O=async(k,F)=>{await E(k,{alertsEnabled:F})},q=async k=>{try{await yn(yt($e,"alertMatches",k),{seen:!0,seenAt:new Date}),w()}catch(F){console.error("Erreur lors du marquage comme vu:",F)}},R=()=>{b({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),_(null)},V=k=>{try{return mh(k,{addSuffix:!0,locale:Dr})}catch{return"Date inconnue"}},U=k=>{const F=[];if(k.query&&F.push(`"${k.query}"`),k.category&&k.category!=="all"){const D=uT.find(P=>P.value===k.category);D&&F.push(D.label)}if(k.transactionType&&k.transactionType!=="all"){const D=dT.find(P=>P.value===k.transactionType);D&&F.push(D.label)}return k.minPrice!==void 0&&F.push(`≥ ${k.minPrice}€`),k.maxPrice!==void 0&&F.push(`≤ ${k.maxPrice}€`),F.length>0?F.join(" • "):"Tous les critères"};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(yi,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos recherches sauvegardées et recevez des notifications"})]}),s.jsxs(da,{open:f,onOpenChange:p,children:[s.jsx(md,{asChild:!0,children:s.jsxs(J,{className:"bg-gradient-to-r from-primary to-secondary",children:[s.jsx(vc,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),s.jsxs(Ci,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(ha,{children:[s.jsxs(ki,{className:"flex items-center gap-2",children:[s.jsx(Zl,{className:"w-5 h-5"}),"Créer une Alerte Personnalisée"]}),s.jsx(yc,{children:"Définissez vos critères de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),s.jsx(Ge,{id:"alert-name",value:N.name,onChange:k=>b(F=>({...F,name:k.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(_y,{className:"w-4 h-4"}),"Critères de Recherche"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"search-query",children:"Mots-clés"}),s.jsx(Ge,{id:"search-query",value:N.query,onChange:k=>b(F=>({...F,query:k.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"search-category",children:"Catégorie"}),s.jsxs(tn,{value:N.category,onValueChange:k=>b(F=>({...F,category:k})),children:[s.jsx(Ht,{className:"mt-1",children:s.jsx(nn,{})}),s.jsx(Gt,{children:uT.map(k=>s.jsx(Ke,{value:k.value,children:k.label},k.value))})]})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"transaction-type",children:"Type de transaction"}),s.jsxs(tn,{value:N.transactionType,onValueChange:k=>b(F=>({...F,transactionType:k})),children:[s.jsx(Ht,{className:"mt-1",children:s.jsx(nn,{})}),s.jsx(Gt,{children:dT.map(k=>s.jsx(Ke,{value:k.value,children:k.label},k.value))})]})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"search-university",children:"Université"}),s.jsxs(tn,{value:N.university,onValueChange:k=>b(F=>({...F,university:k})),children:[s.jsx(Ht,{className:"mt-1",children:s.jsx(nn,{})}),s.jsx(Gt,{children:Aoe.map(k=>s.jsx(Ke,{value:k.value,children:k.label},k.value))})]})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"min-price",children:"Prix minimum (€)"}),s.jsx(Ge,{id:"min-price",type:"number",value:N.minPrice,onChange:k=>b(F=>({...F,minPrice:k.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"max-price",children:"Prix maximum (€)"}),s.jsx(Ge,{id:"max-price",type:"number",value:N.maxPrice,onChange:k=>b(F=>({...F,maxPrice:k.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(yi,{className:"w-4 h-4"}),"Notifications"]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),s.jsx(rr,{id:"alerts-enabled",checked:N.alertsEnabled,onCheckedChange:k=>b(F=>({...F,alertsEnabled:k}))})]}),N.alertsEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Re,{children:"Fréquence des notifications"}),s.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantané",description:"Dès qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un résumé par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un résumé par semaine"}].map(k=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:k.value,name:"frequency",value:k.value,checked:N.notificationFrequency===k.value,onChange:F=>b(D=>({...D,notificationFrequency:F.target.value})),className:"rounded border-border"}),s.jsx(Re,{htmlFor:k.value,className:"cursor-pointer",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:k.label}),s.jsx("div",{className:"text-sm text-muted-foreground",children:k.description})]})})]},k.value))})]}),s.jsxs("div",{children:[s.jsx(Re,{children:"Méthodes de notification"}),s.jsxs("div",{className:"mt-2 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vs,{className:"w-4 h-4 text-blue-600"}),s.jsx(Re,{htmlFor:"email-notifications",children:"Email"})]}),s.jsx(rr,{id:"email-notifications",checked:N.notificationMethods.email,onCheckedChange:k=>b(F=>({...F,notificationMethods:{...F.notificationMethods,email:k}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yi,{className:"w-4 h-4 text-green-600"}),s.jsx(Re,{htmlFor:"push-notifications",children:"Notifications push"})]}),s.jsx(rr,{id:"push-notifications",checked:N.notificationMethods.push,onCheckedChange:k=>b(F=>({...F,notificationMethods:{...F.notificationMethods,push:k}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(AC,{className:"w-4 h-4 text-purple-600"}),s.jsx(Re,{htmlFor:"sms-notifications",children:"SMS"}),s.jsx(at,{variant:"outline",className:"text-xs",children:"Bientôt"})]}),s.jsx(rr,{id:"sms-notifications",checked:N.notificationMethods.sms,onCheckedChange:k=>b(F=>({...F,notificationMethods:{...F.notificationMethods,sms:k}})),disabled:!0})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(J,{variant:"outline",onClick:()=>p(!1),children:"Annuler"}),s.jsx(J,{onClick:y,disabled:u.creating||!N.name.trim(),children:u.creating?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Zl,{className:"w-4 h-4 mr-2"}),"Créer l'alerte"]})})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauvées"})]}),s.jsx(_r,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),s.jsx(yi,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),s.jsx(Zl,{className:"w-8 h-8 text-purple-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.newMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),s.jsx(ah,{className:"w-8 h-8 text-orange-600"})]})})})]}),s.jsxs(tu,{defaultValue:"searches",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-2",children:[s.jsxs(on,{value:"searches",className:"flex items-center gap-2",children:[s.jsx(_r,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsxs(on,{value:"matches",className:"flex items-center gap-2",children:[s.jsx(Zl,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&s.jsx(at,{className:"ml-1 bg-orange-500",children:o.newMatches})]})]}),s.jsx(ln,{value:"searches",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(eN,{className:"w-5 h-5"}),"Recherches Sauvegardées"]}),s.jsx(Ct,{children:"Gérez vos alertes et critères de recherche personnalisés"})]}),s.jsx(me,{children:u.searches?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((k,F)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},F))}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(_r,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegardée"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Créez votre première alerte pour être notifié des nouvelles annonces"}),s.jsxs(J,{onClick:()=>p(!0),children:[s.jsx(vc,{className:"w-4 h-4 mr-2"}),"Créer ma première alerte"]})]}):s.jsx("div",{className:"space-y-4",children:n.map(k=>s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold",children:k.name}),k.alertsEnabled?s.jsxs(at,{className:"bg-green-100 text-green-800",children:[s.jsx(yi,{className:"w-3 h-3 mr-1"}),"Actif"]}):s.jsxs(at,{variant:"secondary",children:[s.jsx(RC,{className:"w-3 h-3 mr-1"}),"Pausé"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:U(k.filters)}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Xs,{className:"w-3 h-3"}),"Créé ",V(k.createdAt)]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Zl,{className:"w-3 h-3"}),k.matchCount," correspondance",k.matchCount!==1?"s":""]}),k.lastNotified&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(yi,{className:"w-3 h-3"}),"Dernière alerte ",V(k.lastNotified)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"ghost",size:"icon",onClick:()=>O(k.id,!k.alertsEnabled),title:k.alertsEnabled?"Désactiver les alertes":"Activer les alertes",children:k.alertsEnabled?s.jsx(RC,{className:"w-4 h-4"}):s.jsx(QG,{className:"w-4 h-4"})}),s.jsx(J,{variant:"ghost",size:"icon",onClick:()=>{var F,D;_(k),b({name:k.name,query:k.filters.query||"",category:k.filters.category||"all",transactionType:k.filters.transactionType||"all",university:k.filters.university||"all",minPrice:((F=k.filters.minPrice)==null?void 0:F.toString())||"",maxPrice:((D=k.filters.maxPrice)==null?void 0:D.toString())||"",alertsEnabled:k.alertsEnabled,notificationFrequency:k.notificationFrequency,notificationMethods:k.notificationMethods}),p(!0)},title:"Modifier",children:s.jsx(eK,{className:"w-4 h-4"})}),s.jsx(J,{variant:"ghost",size:"icon",onClick:()=>I(k.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:s.jsx(Ka,{className:"w-4 h-4"})})]})]}),k.alertsEnabled&&s.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Un,{className:"w-3 h-3"}),s.jsxs("span",{children:["Fréquence: ",k.notificationFrequency==="instant"?"Instantané":k.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[k.notificationMethods.email&&s.jsx(vs,{className:"w-3 h-3 text-blue-600\\",title:"Email activé"}),k.notificationMethods.push&&s.jsx(yi,{className:"w-3 h-3 text-green-600\\",title:"Push activé"}),k.notificationMethods.sms&&s.jsx(AC,{className:"w-3 h-3 text-purple-600\\",title:"SMS activé"})]})]})]},k.id))})})]})}),s.jsx(ln,{value:"matches",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Zl,{className:"w-5 h-5"}),"Correspondances Trouvées"]}),s.jsx(Ct,{children:"Les annonces qui correspondent à vos critères de recherche"})]}),s.jsx(me,{children:u.matches?s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((k,F)=>s.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},F))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Zl,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore à vos critères. Les nouvelles correspondances apparaîtront ici."})]}):s.jsx("div",{className:"space-y-4",children:i.map(k=>s.jsx("div",{className:`border rounded-lg p-4 transition-colors ${k.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[k.listingImage?s.jsx("img",{src:k.listingImage,alt:k.listingTitle,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:k.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2",children:[!k.seen&&s.jsx(at,{className:"bg-blue-500",children:"Nouveau"}),s.jsx("span",{className:"font-semibold text-primary",children:k.listingPrice===0?"Gratuit":`${k.listingPrice}€`})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Un,{className:"w-3 h-3"}),"Trouvé ",V(k.matchedAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"outline",size:"sm",onClick:()=>q(k.id),disabled:k.seen,children:k.seen?s.jsxs(s.Fragment,{children:[s.jsx(Pt,{className:"w-3 h-3 mr-1"}),"Vu"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ad,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),s.jsxs(J,{size:"sm",onClick:()=>window.open(`/listing/${k.listingId}`,"_blank"),children:[s.jsx(hs,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},k.id))})})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(_r,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour gérer vos alertes"}),s.jsx("p",{className:"text-muted-foreground",children:"Créez des alertes personnalisées pour être notifié des nouvelles annonces"})]})})})},Pg=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},hT=[{value:"all",label:"Toutes catégories",icon:vn},{value:"electronics",label:"Électronique",icon:Yc},{value:"books",label:"Livres & Cours",icon:B4},{value:"furniture",label:"Mobilier",icon:nx},{value:"clothing",label:"Vêtements",icon:tN},{value:"services",label:"Services",icon:np},{value:"housing",label:"Logement",icon:nx},{value:"jobs",label:"Jobs & Stages",icon:W4}],Moe=[{value:"all",label:"Tous types",icon:vn},{value:"sale",label:"Vente",icon:tx},{value:"donation",label:"Don",icon:Rd},{value:"exchange",label:"Échange",icon:so},{value:"service",label:"Service",icon:np}],Ooe=[{value:"recent",label:"Plus récents",icon:Un},{value:"oldest",label:"Plus anciens",icon:Xs},{value:"price-asc",label:"Prix croissant",icon:PC},{value:"price-desc",label:"Prix décroissant",icon:z4},{value:"title",label:"Titre A-Z",icon:PC},{value:"category",label:"Par catégorie",icon:bm}],Doe=()=>{const{currentUser:t,userProfile:e}=mn(),[n,r]=x.useState([]),[i,a]=x.useState([]),[o,c]=x.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[u,d]=x.useState({favorites:!0,listings:!0,removing:!1}),[f,p]=x.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[g,_]=x.useState("recent"),[N,b]=x.useState("grid"),[S,w]=x.useState([]);x.useEffect(()=>{t&&y()},[t]),x.useEffect(()=>{n.length>0&&E()},[n]);const y=async()=>{if(t)try{d(Z=>({...Z,favorites:!0}));const P=_n(Vt($e,"favorites"),Xn("userId","==",t.uid),ei(100)),H=await Fn(P),te=[];H.forEach(Z=>{const K=Z.data();te.push({id:Z.id,...K,createdAt:Pg(K.createdAt),updatedAt:Pg(K.updatedAt)})}),te.sort((Z,K)=>K.createdAt.getTime()-Z.createdAt.getTime()),r(te),I(te)}catch(P){console.error("Erreur lors du chargement des favoris:",P),xe.error("Erreur lors du chargement des favoris")}finally{d(P=>({...P,favorites:!1}))}},E=async()=>{try{d(Z=>({...Z,listings:!0}));const P=n.map(async Z=>{try{const K=await Is(yt($e,"listings",Z.listingId));if(K.exists()){const A=K.data();return{id:K.id,...A,createdAt:Pg(A.createdAt),updatedAt:Pg(A.updatedAt)}}return null}catch(K){return console.error(`Erreur lors du chargement de l'annonce ${Z.listingId}:`,K),null}}),te=(await Promise.all(P)).filter(Z=>Z!==null);a(te)}catch(P){console.error("Erreur lors du chargement des annonces favorites:",P)}finally{d(P=>({...P,listings:!1}))}},I=P=>{const H={},te={};let Z=0,K=0;const A=new Date;A.setDate(A.getDate()-7);let z=0;P.forEach(B=>{H[B.listingCategory]=(H[B.listingCategory]||0)+1,te[B.listingTransactionType]=(te[B.listingTransactionType]||0)+1,B.listingPrice>0&&(Z+=B.listingPrice,K++),B.createdAt>=A&&z++}),c({totalFavorites:P.length,byCategory:H,byTransactionType:te,averagePrice:K>0?Math.round(Z/K):0,recentlyAdded:z,availableCount:P.length,soldCount:0})},O=async P=>{try{await Pd(yt($e,"favorites",P)),xe.success("Favori supprimé"),y()}catch(H){console.error("Erreur lors de la suppression:",H),xe.error("Erreur lors de la suppression")}},q=async()=>{if(S.length!==0&&window.confirm(`Supprimer ${S.length} favori(s) sélectionné(s) ?`)){d(P=>({...P,removing:!0}));try{const P=S.map(H=>Pd(yt($e,"favorites",H)));await Promise.all(P),xe.success(`${S.length} favori(s) supprimé(s)`),w([]),y()}catch(P){console.error("Erreur lors de la suppression multiple:",P),xe.error("Erreur lors de la suppression")}finally{d(P=>({...P,removing:!1}))}}},R=()=>{const P={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:n.length,favorites:n.map(K=>({title:K.listingTitle,price:K.listingPrice,category:K.listingCategory,transactionType:K.listingTransactionType,seller:K.sellerName,university:K.sellerUniversity,addedDate:K.createdAt.toISOString(),notes:K.notes||"",tags:K.tags}))},H=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),te=URL.createObjectURL(H),Z=document.createElement("a");Z.href=te,Z.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,Z.click(),URL.revokeObjectURL(te)},V=async()=>{const P=`🌟 Mes favoris StudyMarket :

📚 ${o.totalFavorites} annonces sauvegardées
💰 Prix moyen : ${o.averagePrice}€
🆕 ${o.recentlyAdded} ajoutées cette semaine

Découvrez la marketplace étudiante ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:P,url:window.location.origin})}catch{navigator.clipboard.writeText(P),xe.success("Lien copié dans le presse-papiers")}else navigator.clipboard.writeText(P),xe.success("Lien copié dans le presse-papiers")},U=()=>{let P=n;if(f.search){const H=f.search.toLowerCase();P=P.filter(te=>te.listingTitle.toLowerCase().includes(H)||te.sellerName.toLowerCase().includes(H)||te.tags.some(Z=>Z.toLowerCase().includes(H)))}if(f.category!=="all"&&(P=P.filter(H=>H.listingCategory===f.category)),f.transactionType!=="all"&&(P=P.filter(H=>H.listingTransactionType===f.transactionType)),f.priceRange!=="all")switch(f.priceRange){case"free":P=P.filter(H=>H.listingPrice===0);break;case"under-50":P=P.filter(H=>H.listingPrice>0&&H.listingPrice<50);break;case"50-200":P=P.filter(H=>H.listingPrice>=50&&H.listingPrice<=200);break;case"over-200":P=P.filter(H=>H.listingPrice>200);break}switch(g){case"recent":P.sort((H,te)=>te.createdAt.getTime()-H.createdAt.getTime());break;case"oldest":P.sort((H,te)=>H.createdAt.getTime()-te.createdAt.getTime());break;case"price-asc":P.sort((H,te)=>H.listingPrice-te.listingPrice);break;case"price-desc":P.sort((H,te)=>te.listingPrice-H.listingPrice);break;case"title":P.sort((H,te)=>H.listingTitle.localeCompare(te.listingTitle));break;case"category":P.sort((H,te)=>H.listingCategory.localeCompare(te.listingCategory));break}return P},k=P=>{try{return mh(P,{addSuffix:!0,locale:Dr})}catch{return"Date inconnue"}},F=(P,H)=>H==="donation"?"Gratuit":H==="exchange"?"Échange":P===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(P),D=U();return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Or,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardées"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{variant:"outline",onClick:V,className:"flex items-center gap-2",children:[s.jsx(by,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(J,{variant:"outline",onClick:R,className:"flex items-center gap-2",children:[s.jsx(ti,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),s.jsx(Or,{className:"w-8 h-8 text-red-500"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,"€"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),s.jsx(tp,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),s.jsx(ah,{className:"w-8 h-8 text-orange-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Catégories"})]}),s.jsx(bm,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{placeholder:"Rechercher dans vos favoris...",value:f.search,onChange:P=>p(H=>({...H,search:P.target.value})),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(tn,{value:g,onValueChange:_,children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{})}),s.jsx(Gt,{children:Ooe.map(P=>s.jsx(Ke,{value:P.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]})},P.value))})]}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx(J,{variant:N==="grid"?"default":"ghost",size:"icon",onClick:()=>b("grid"),className:"rounded-none",children:s.jsx(Q4,{className:"w-4 h-4"})}),s.jsx(J,{variant:N==="list"?"default":"ghost",size:"icon",onClick:()=>b("list"),className:"rounded-none",children:s.jsx(eM,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(tn,{value:f.category,onValueChange:P=>p(H=>({...H,category:P})),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Catégorie"})}),s.jsx(Gt,{children:hT.map(P=>s.jsx(Ke,{value:P.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]})},P.value))})]}),s.jsxs(tn,{value:f.transactionType,onValueChange:P=>p(H=>({...H,transactionType:P})),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Type"})}),s.jsx(Gt,{children:Moe.map(P=>s.jsx(Ke,{value:P.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]})},P.value))})]}),s.jsxs(tn,{value:f.priceRange,onValueChange:P=>p(H=>({...H,priceRange:P})),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Prix"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"all",children:"Tous les prix"}),s.jsx(Ke,{value:"free",children:"Gratuit"}),s.jsx(Ke,{value:"under-50",children:"Moins de 50€"}),s.jsx(Ke,{value:"50-200",children:"50€ - 200€"}),s.jsx(Ke,{value:"over-200",children:"Plus de 200€"})]})]}),s.jsxs(tn,{value:f.availability,onValueChange:P=>p(H=>({...H,availability:P})),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Disponibilité"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"all",children:"Toutes"}),s.jsx(Ke,{value:"available",children:"Disponibles"}),s.jsx(Ke,{value:"sold",children:"Vendues"}),s.jsx(Ke,{value:"reserved",children:"Réservées"})]})]})]}),S.length>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[S.length," favori(s) sélectionné(s)"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{variant:"outline",size:"sm",onClick:()=>w([]),children:"Désélectionner"}),s.jsx(J,{variant:"destructive",size:"sm",onClick:q,disabled:u.removing,children:u.removing?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ka,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),s.jsx("div",{className:"space-y-4",children:u.favorites?s.jsx("div",{className:`grid gap-6 ${N==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((P,H)=>s.jsxs(fe,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(me,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},H))}):D.length===0?s.jsx(fe,{children:s.jsx(me,{className:"pt-12 pb-12 text-center",children:n.length===0?s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'annonces à vos favoris. Explorez les annonces et cliquez sur ❤️ pour les sauvegarder !"}),s.jsx(J,{asChild:!0,children:s.jsxs("a",{href:"/listings",children:[s.jsx(_r,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(_y,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond à vos critères de recherche. Essayez de modifier vos filtres."}),s.jsx(J,{variant:"outline",onClick:()=>p({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Réinitialiser les filtres"})]})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-muted-foreground",children:[D.length," favori(s) trouvé(s)",D.length!==n.length&&` sur ${n.length}`]}),s.jsx(J,{variant:"outline",size:"sm",onClick:()=>{S.length===D.length?w([]):w(D.map(P=>P.id))},children:S.length===D.length?"Désélectionner tout":"Sélectionner tout"})]}),N==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(P=>{const H=i.find(te=>te.id===P.listingId);return s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("input",{type:"checkbox",checked:S.includes(P.id),onChange:te=>{te.target.checked?w(Z=>[...Z,P.id]):w(Z=>Z.filter(K=>K!==P.id))},className:"w-4 h-4 rounded border-border bg-background"})}),s.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(J,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>O(P.id),children:s.jsx(Ka,{className:"w-4 h-4"})})}),H?s.jsx(km,{listing:H}):s.jsxs(fe,{children:[s.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(Uf,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),s.jsxs(me,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-2",children:P.listingTitle}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:F(P.listingPrice,P.listingTransactionType)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajouté ",k(P.createdAt)]})]})]})]},P.id)})}):s.jsx("div",{className:"space-y-4",children:D.map(P=>{var te;const H=i.find(Z=>Z.id===P.listingId);return s.jsx(fe,{className:"hover:shadow-md transition-shadow",children:s.jsx(me,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",checked:S.includes(P.id),onChange:Z=>{Z.target.checked?w(K=>[...K,P.id]):w(K=>K.filter(A=>A!==P.id))},className:"w-4 h-4 rounded border-border"}),s.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:P.listingImage?s.jsx("img",{src:P.listingImage,alt:P.listingTitle,className:"w-full h-full object-cover rounded-lg"}):s.jsx(vn,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold truncate",children:P.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("span",{className:"font-semibold text-primary",children:F(P.listingPrice,P.listingTransactionType)}),(H==null?void 0:H.status)&&s.jsx(at,{variant:H.status==="active"?"default":"secondary",children:H.status==="active"?"Disponible":H.status==="sold"?"Vendu":"Réservé"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Jr,{className:"w-3 h-3"}),P.sellerName]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-3 h-3"}),P.sellerUniversity]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(bm,{className:"w-3 h-3"}),(te=hT.find(Z=>Z.value===P.listingCategory))==null?void 0:te.label]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajouté ",k(P.createdAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(J,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${P.listingId}`,"_blank"),children:[s.jsx(hs,{className:"w-3 h-3 mr-1"}),"Voir"]}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>O(P.id),className:"text-destructive hover:text-destructive",children:s.jsx(Ka,{className:"w-3 h-3"})})]})]})]})]})})},P.id)})})]})})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(Or,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),s.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces préférées et retrouvez-les facilement"})]})})})},k_=({request:t,userRole:e,onStatusUpdate:n})=>{const{updatePaymentStatus:r,getPaymentInstructions:i}=Ky(),a=N=>{switch(N){case"pending":return Un;case"confirmed":return Pt;case"completed":return Pt;case"cancelled":return Id;case"disputed":return In;default:return Un}},o=N=>{switch(N){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},c=N=>{switch(N){case"pending":return"En attente";case"confirmed":return"Confirmé";case"completed":return"Terminé";case"cancelled":return"Annulé";case"disputed":return"Litige";default:return N}},u=N=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[N]||N,d=(N,b)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:b||"EUR"}).format(N),f=(N,b)=>{navigator.clipboard.writeText(N),xe.success(`${b} copié dans le presse-papiers`)},p=async N=>{try{await r(t.id,N),n==null||n(N)}catch(b){console.error("Erreur lors de la mise à jour du statut:",b)}},g=a(t.status),_=i(t.paymentMethod,t);return s.jsxs(fe,{className:"w-full",children:[s.jsx(Qe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Vn,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsxs(Je,{className:"text-lg",children:["Paiement ",u(t.paymentMethod)]}),s.jsxs(Ct,{children:[d(t.amount,t.currency)," • ",e==="buyer"?"Achat":"Vente"]})]})]}),s.jsxs(at,{className:o(t.status),children:[s.jsx(g,{className:"w-3 h-3 mr-1"}),c(t.status)]})]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Créé le :"}),s.jsx("p",{className:"font-medium",children:or(t.createdAt,"PPP à HH:mm",{locale:Dr})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Dernière mise à jour :"}),s.jsx("p",{className:"font-medium",children:or(t.updatedAt,"PPP à HH:mm",{locale:Dr})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Détails de la rencontre"]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),s.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),s.jsx("p",{className:"font-medium",children:or(t.meetingDateTime,"PPP à HH:mm",{locale:Dr})})]})]})]}),t.securityCode&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(zt,{className:"w-4 h-4"}),"Code de sécurité"]}),s.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[s.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),s.jsx(J,{variant:"ghost",size:"icon",onClick:()=>f(t.securityCode,"Code de sécurité"),children:s.jsx(Z4,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&_.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:s.jsx("ul",{className:"space-y-1 text-sm",children:_.map((N,b)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600 mt-0.5",children:"•"}),s.jsx("span",{children:N})]},b))})})]}),t.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Notes"}),s.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(J,{onClick:()=>p("confirmed"),className:"flex-1",children:[s.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Accepter"]}),s.jsxs(J,{variant:"outline",onClick:()=>p("cancelled"),className:"flex-1",children:[s.jsx(Id,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&s.jsxs(J,{onClick:()=>p("completed"),className:"flex-1",children:[s.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Marquer comme payé"]}),e==="seller"&&t.status==="confirmed"&&s.jsxs(J,{onClick:()=>p("completed"),className:"flex-1",children:[s.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Confirmer la réception"]}),(t.status==="pending"||t.status==="confirmed")&&s.jsxs(J,{variant:"outline",onClick:()=>p("disputed"),className:"text-orange-600 hover:text-orange-700",children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Signaler un problème"]})]}),t.status==="pending"&&e==="buyer"&&s.jsxs($t,{children:[s.jsx(Un,{className:"h-4 w-4"}),s.jsx(Bt,{children:"Votre demande de paiement a été envoyée au vendeur. Vous recevrez une notification dès qu'il l'aura acceptée."})]}),t.status==="confirmed"&&e==="buyer"&&s.jsxs($t,{className:"border-green-200 bg-green-50",children:[s.jsx(Pt,{className:"h-4 w-4 text-green-600"}),s.jsx(Bt,{className:"text-green-800",children:"Le vendeur a accepté votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&s.jsxs($t,{className:"border-green-200 bg-green-50",children:[s.jsx(Pt,{className:"h-4 w-4 text-green-600"}),s.jsx(Bt,{className:"text-green-800",children:"Transaction terminée avec succès ! Merci d'avoir utilisé StudyMarket."})]}),t.status==="disputed"&&s.jsxs($t,{className:"border-orange-200 bg-orange-50",children:[s.jsx(In,{className:"h-4 w-4 text-orange-600"}),s.jsx(Bt,{className:"text-orange-800",children:"Un litige a été signalé. Notre équipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},Loe=()=>{const{currentUser:t,userProfile:e}=mn(),{paymentRequests:n,loading:r,fetchUserPaymentRequests:i,initializePaymentMethods:a}=Ky(),[o,c]=x.useState(""),[u,d]=x.useState("all"),[f,p]=x.useState("all"),[g,_]=x.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});x.useEffect(()=>{a()},[a]),x.useEffect(()=>{t&&i(t.uid)},[t,i]),x.useEffect(()=>{N()},[n]);const N=()=>{const I={},O={};let q=0;n.forEach(R=>{I[R.paymentMethod]=(I[R.paymentMethod]||0)+1,O[R.status]=(O[R.status]||0)+1,q+=R.amount}),_({totalRequests:n.length,pendingRequests:O.pending||0,completedRequests:O.completed||0,totalAmount:q,averageAmount:n.length>0?q/n.length:0,byMethod:I,byStatus:O})},b=()=>n.filter(I=>{const O=!o||I.listingId.toLowerCase().includes(o.toLowerCase())||I.id.toLowerCase().includes(o.toLowerCase()),q=u==="all"||I.status===u,R=f==="all"||I.paymentMethod===f;return O&&q&&R}),S=()=>b().filter(I=>I.buyerId===(t==null?void 0:t.uid)),w=()=>b().filter(I=>I.sellerId===(t==null?void 0:t.uid)),y=I=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(I),E=()=>{const I={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:g,payments:n.map(V=>({id:V.id,amount:V.amount,currency:V.currency,method:V.paymentMethod,status:V.status,role:V.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:V.createdAt.toISOString(),updatedAt:V.updatedAt.toISOString()}))},O=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),q=URL.createObjectURL(O),R=document.createElement("a");R.href=q,R.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,R.click(),URL.revokeObjectURL(q)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(aK,{className:"w-8 h-8 text-primary"}),"Mes Paiements",g.totalRequests>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:g.totalRequests})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos demandes de paiement et suivez vos transactions"})]}),s.jsxs(J,{variant:"outline",onClick:E,className:"flex items-center gap-2",children:[s.jsx(ti,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.totalRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),s.jsx(Vn,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.pendingRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),s.jsx(Un,{className:"w-8 h-8 text-orange-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.completedRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Terminées"})]}),s.jsx(Pt,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:y(g.totalAmount)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),s.jsx(tp,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:I=>c(I.target.value),className:"pl-10"})]}),s.jsxs(tn,{value:u,onValueChange:d,children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{placeholder:"Statut"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"all",children:"Tous les statuts"}),s.jsx(Ke,{value:"pending",children:"En attente"}),s.jsx(Ke,{value:"confirmed",children:"Confirmé"}),s.jsx(Ke,{value:"completed",children:"Terminé"}),s.jsx(Ke,{value:"cancelled",children:"Annulé"}),s.jsx(Ke,{value:"disputed",children:"Litige"})]})]}),s.jsxs(tn,{value:f,onValueChange:p,children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{placeholder:"Méthode"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"all",children:"Toutes les méthodes"}),s.jsx(Ke,{value:"cash",children:"Espèces"}),s.jsx(Ke,{value:"transfer",children:"Virement"}),s.jsx(Ke,{value:"paypal",children:"PayPal"}),s.jsx(Ke,{value:"lydia",children:"Lydia"})]})]})]})})}),s.jsxs(tu,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-3",children:[s.jsxs(on,{value:"all",className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-4 h-4"}),"Toutes",g.totalRequests>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:g.totalRequests})]}),s.jsxs(on,{value:"purchases",className:"flex items-center gap-2",children:[s.jsx(s_,{className:"w-4 h-4"}),"Mes achats",S().length>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:S().length})]}),s.jsxs(on,{value:"sales",className:"flex items-center gap-2",children:[s.jsx(r_,{className:"w-4 h-4"}),"Mes ventes",w().length>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:w().length})]})]}),s.jsx(ln,{value:"all",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(K4,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),s.jsx(Ct,{children:"Historique complet de vos transactions"})]}),s.jsx(me,{children:r?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((I,O)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},O))}):b().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),s.jsx("p",{className:"text-muted-foreground",children:n.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond à vos critères de recherche."})]}):s.jsx("div",{className:"space-y-4",children:b().map(I=>s.jsx(k_,{request:I,userRole:I.buyerId===t.uid?"buyer":"seller"},I.id))})})]})}),s.jsx(ln,{value:"purchases",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(s_,{className:"w-5 h-5"}),"Mes Achats"]}),s.jsx(Ct,{children:"Demandes de paiement que vous avez initiées"})]}),s.jsx(me,{children:S().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(s_,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initié de demandes de paiement pour vos achats."})]}):s.jsx("div",{className:"space-y-4",children:S().map(I=>s.jsx(k_,{request:I,userRole:"buyer"},I.id))})})]})}),s.jsx(ln,{value:"sales",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(r_,{className:"w-5 h-5"}),"Mes Ventes"]}),s.jsx(Ct,{children:"Demandes de paiement reçues pour vos annonces"})]}),s.jsx(me,{children:w().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(r_,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reçu de demandes de paiement pour vos annonces."})]}):s.jsx("div",{className:"space-y-4",children:w().map(I=>s.jsx(k_,{request:I,userRole:"seller"},I.id))})})]})})]}),s.jsxs($t,{className:"border-blue-200 bg-blue-50",children:[s.jsx(zt,{className:"h-4 w-4 text-blue-600"}),s.jsxs(Bt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message privé. Utilisez uniquement les canaux sécurisés de StudyMarket pour vos transactions."]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(Vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez vos demandes de paiement et suivez vos transactions"})]})})})};var n0="Collapsible",[Foe,k5]=Sr(n0),[Voe,sS]=Foe(n0),T5=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...c}=t,[u,d]=Os({prop:r,defaultProp:i??!1,onChange:o,caller:n0});return s.jsx(Voe,{scope:n,disabled:a,contentId:As(),open:u,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),children:s.jsx(Ze.div,{"data-state":aS(u),"data-disabled":a?"":void 0,...c,ref:e})})});T5.displayName=n0;var P5="CollapsibleTrigger",I5=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=sS(P5,n);return s.jsx(Ze.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":aS(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:Le(t.onClick,i.onOpenToggle)})});I5.displayName=P5;var iS="CollapsibleContent",A5=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=sS(iS,t.__scopeCollapsible);return s.jsx(Er,{present:n||i.open,children:({present:a})=>s.jsx(zoe,{...r,ref:e,present:a})})});A5.displayName=iS;var zoe=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...a}=t,o=sS(iS,n),[c,u]=x.useState(r),d=x.useRef(null),f=ht(e,d),p=x.useRef(0),g=p.current,_=x.useRef(0),N=_.current,b=o.open||c,S=x.useRef(b),w=x.useRef(void 0);return x.useEffect(()=>{const y=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(y)},[]),Bn(()=>{const y=d.current;if(y){w.current=w.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const E=y.getBoundingClientRect();p.current=E.height,_.current=E.width,S.current||(y.style.transitionDuration=w.current.transitionDuration,y.style.animationName=w.current.animationName),u(r)}},[o.open,r]),s.jsx(Ze.div,{"data-state":aS(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!b,...a,ref:f,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":N?`${N}px`:void 0,...t.style},children:b&&i})});function aS(t){return t?"open":"closed"}var Uoe=T5,$oe=I5,Boe=A5,Li="Accordion",qoe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[oS,Woe,Hoe]=rp(Li),[r0,tde]=Sr(Li,[Hoe,k5]),lS=k5(),R5=Fe.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,a=r;return s.jsx(oS.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?s.jsx(Yoe,{...a,ref:e}):s.jsx(Zoe,{...i,ref:e})})});R5.displayName=Li;var[M5,Goe]=r0(Li),[O5,Koe]=r0(Li,{collapsible:!1}),Zoe=Fe.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:a=!1,...o}=t,[c,u]=Os({prop:n,defaultProp:r??"",onChange:i,caller:Li});return s.jsx(M5,{scope:t.__scopeAccordion,value:Fe.useMemo(()=>c?[c]:[],[c]),onItemOpen:u,onItemClose:Fe.useCallback(()=>a&&u(""),[a,u]),children:s.jsx(O5,{scope:t.__scopeAccordion,collapsible:a,children:s.jsx(D5,{...o,ref:e})})})}),Yoe=Fe.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...a}=t,[o,c]=Os({prop:n,defaultProp:r??[],onChange:i,caller:Li}),u=Fe.useCallback(f=>c((p=[])=>[...p,f]),[c]),d=Fe.useCallback(f=>c((p=[])=>p.filter(g=>g!==f)),[c]);return s.jsx(M5,{scope:t.__scopeAccordion,value:o,onItemOpen:u,onItemClose:d,children:s.jsx(O5,{scope:t.__scopeAccordion,collapsible:!0,children:s.jsx(D5,{...a,ref:e})})})}),[Qoe,s0]=r0(Li),D5=Fe.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:a="vertical",...o}=t,c=Fe.useRef(null),u=ht(c,e),d=Woe(n),p=Qc(i)==="ltr",g=Le(t.onKeyDown,_=>{var V;if(!qoe.includes(_.key))return;const N=_.target,b=d().filter(U=>{var k;return!((k=U.ref.current)!=null&&k.disabled)}),S=b.findIndex(U=>U.ref.current===N),w=b.length;if(S===-1)return;_.preventDefault();let y=S;const E=0,I=w-1,O=()=>{y=S+1,y>I&&(y=E)},q=()=>{y=S-1,y<E&&(y=I)};switch(_.key){case"Home":y=E;break;case"End":y=I;break;case"ArrowRight":a==="horizontal"&&(p?O():q());break;case"ArrowDown":a==="vertical"&&O();break;case"ArrowLeft":a==="horizontal"&&(p?q():O());break;case"ArrowUp":a==="vertical"&&q();break}const R=y%w;(V=b[R].ref.current)==null||V.focus()});return s.jsx(Qoe,{scope:n,disabled:r,direction:i,orientation:a,children:s.jsx(oS.Slot,{scope:n,children:s.jsx(Ze.div,{...o,"data-orientation":a,ref:u,onKeyDown:r?void 0:g})})})}),Cx="AccordionItem",[Xoe,cS]=r0(Cx),L5=Fe.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,a=s0(Cx,n),o=Goe(Cx,n),c=lS(n),u=As(),d=r&&o.value.includes(r)||!1,f=a.disabled||t.disabled;return s.jsx(Xoe,{scope:n,open:d,disabled:f,triggerId:u,children:s.jsx(Uoe,{"data-orientation":a.orientation,"data-state":B5(d),...c,...i,ref:e,disabled:f,open:d,onOpenChange:p=>{p?o.onItemOpen(r):o.onItemClose(r)}})})});L5.displayName=Cx;var F5="AccordionHeader",V5=Fe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=s0(Li,n),a=cS(F5,n);return s.jsx(Ze.h3,{"data-orientation":i.orientation,"data-state":B5(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:e})});V5.displayName=F5;var Ob="AccordionTrigger",z5=Fe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=s0(Li,n),a=cS(Ob,n),o=Koe(Ob,n),c=lS(n);return s.jsx(oS.ItemSlot,{scope:n,children:s.jsx($oe,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...c,...r,ref:e})})});z5.displayName=Ob;var U5="AccordionContent",$5=Fe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=s0(Li,n),a=cS(U5,n),o=lS(n);return s.jsx(Boe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});$5.displayName=U5;function B5(t){return t?"open":"closed"}var Joe=R5,ele=L5,tle=V5,q5=z5,W5=$5;const nle=Joe,H5=x.forwardRef(({className:t,...e},n)=>s.jsx(ele,{ref:n,className:st("border-b",t),...e}));H5.displayName="AccordionItem";const G5=x.forwardRef(({className:t,children:e,...n},r)=>s.jsx(tle,{className:"flex",children:s.jsxs(q5,{ref:r,className:st("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,s.jsx($O,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));G5.displayName=q5.displayName;const K5=x.forwardRef(({className:t,children:e,...n},r)=>s.jsx(W5,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:st("pb-4 pt-0",t),children:e})}));K5.displayName=W5.displayName;const fT=[{category:"Compte et Inscription",icon:np,questions:[{question:"Comment créer un compte étudiant vérifié ?",answer:'Pour créer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre système vérifie automatiquement votre statut étudiant. Vous recevrez un badge "Étudiant certifié" une fois la vérification terminée.'},{question:"Pourquoi mon université n'est pas reconnue ?",answer:"Nous ajoutons régulièrement de nouvelles universités. Si la vôtre n'apparaît pas, contactez-nous avec votre carte étudiante et nous l'ajouterons rapidement à notre base de données."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, université, et préférences de notification. Certaines informations nécessitent une re-vérification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autorisé. Cela garantit la confiance et la sécurité de notre communauté étudiante."}]},{category:"Achats et Ventes",icon:Vn,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description détaillée, prix et lieu de rencontre. Votre annonce sera visible immédiatement après publication.'},{question:"Quels modes de paiement sont acceptés ?",answer:"Nous recommandons les paiements sécurisés : espèces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. Évitez les paiements à distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggère une fourchette de prix basée sur l'état et la catégorie. Consultez les annonces similaires et considérez l'état réel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se présente pas ?",answer:"Contactez-le via notre messagerie. Si pas de réponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au sérieux."}]},{category:"Sécurité et Confiance",icon:zt,questions:[{question:"Comment éviter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothèque). Vérifiez l'identité avec la carte étudiante. Ne payez jamais à l'avance sans avoir vu l'objet. Utilisez notre système de signalement en cas de doute."},{question:"Où se rencontrer en sécurité ?",answer:`Privilégiez les lieux publics de votre campus : bibliothèques, halls d'entrée, cafétérias. Évitez les parkings isolés ou les domiciles privés. Certaines universités ont des "zones d'échange sécurisées".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Décrivez précisément le problème. Notre équipe examine tous les signalements sous 24h et prend les mesures appropriées.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de résolution, utilisez notre service de médiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:wn,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rédigez un message poli et précis. Le vendeur recevra une notification email et pourra vous répondre via notre messagerie sécurisée.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reçoivent des notifications email mais peuvent avoir des délais de réponse. Soyez patient (24-48h). Si pas de réponse, l'annonce est peut-être déjà vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnées ?",answer:"Oui, mais seulement après les premiers échanges via notre messagerie. Cela nous permet de garder une trace en cas de problème et de vous protéger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez débloquer depuis vos paramètres si nécessaire.`}]},{category:"Impact Écologique",icon:Or,questions:[{question:"Comment est calculé mon impact CO₂ ?",answer:"Chaque objet acheté d'occasion évite la production d'un neuf. Nous calculons le CO₂ économisé selon des données ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges écologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1ère transaction), "Éco-Warrior" (10kg CO₂), "Héros Climatique" (100kg CO₂). Ils apparaissent sur votre profil et motivent la communauté.'},{question:"Comment améliorer mon rang écologique ?",answer:"Multipliez les transactions d'occasion, privilégiez les dons (bonus +20%), participez aux échanges. Plus vous économisez de CO₂, plus votre rang augmente : Débutant → Éco-Warrior → Maître Environnemental → Légende Écologique."}]},{category:"Technique et Bugs",icon:wy,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vérifiez votre connexion internet. Si le problème persiste, contactez-nous avec votre navigateur et système d'exploitation."},{question:"Je ne reçois pas les notifications email",answer:'Vérifiez vos spams/courriers indésirables. Ajoutez notifications@studymarket.fr à vos contacts. Vérifiez vos préférences de notification dans "Paramètres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vérifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous êtes sur mobile, autorisez l'accès à la galerie dans les paramètres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramètres" > "Compte" > "Supprimer mon compte". Cette action est irréversible et supprime toutes vos données. Vos annonces actives seront automatiquement retirées.'}]}],rle=[{title:"Chat en direct",description:"Réponse immédiate pendant les heures ouvrables",icon:wn,action:"Démarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Réponse sous 24h maximum",icon:vs,action:"support@studymarket.fr",available:!0,hours:"24h/7j"},{title:"Téléphone",description:"Pour les urgences uniquement",icon:ih,action:"01 23 45 67 89",available:!1,hours:"Bientôt disponible"},{title:"Centre de ressources",description:"Guides détaillés et tutoriels",icon:q4,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],sle=[{title:"Guide du vendeur débutant",description:"Tout savoir pour vendre efficacement",icon:Zo,duration:"5 min",type:"Article"},{title:"Sécurité : éviter les arnaques",description:"Reconnaître et éviter les situations dangereuses",icon:zt,duration:"3 min",type:"Vidéo"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:ah,duration:"7 min",type:"Article"},{title:"Impact écologique expliqué",description:"Comment nous calculons votre empreinte carbone",icon:Or,duration:"4 min",type:"Infographie"}],ile=()=>{const{currentUser:t,userProfile:e}=mn(),[n,r]=x.useState(""),[i,a]=x.useState("all"),[o,c]=x.useState({subject:"",category:"",message:"",priority:"normal"}),[u,d]=x.useState(!1),f=fT.filter(g=>{if(i!=="all"&&g.category!==i)return!1;if(n){const _=n.toLowerCase();return g.questions.some(N=>N.question.toLowerCase().includes(_)||N.answer.toLowerCase().includes(_))}return!0}),p=async g=>{if(g.preventDefault(),!o.subject||!o.message){xe.error("Veuillez remplir tous les champs obligatoires");return}d(!0);try{await new Promise(_=>setTimeout(_,1e3)),xe.success("Votre message a été envoyé ! Nous vous répondrons sous 24h."),c({subject:"",category:"",message:"",priority:"normal"})}catch{xe.error("Erreur lors de l'envoi. Veuillez réessayer.")}finally{d(!1)}};return s.jsxs("div",{className:"max-w-7xl mx-auto px-1 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:s.jsx(ex,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide StudyMarket"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les réponses à vos questions ou contactez notre équipe support"})]}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[s.jsx(_r,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(Ge,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, sécurité, notifications)",value:n,onChange:g=>r(g.target.value),className:"pl-12 h-14 text-lg"})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:rle.map((g,_)=>s.jsx(fe,{className:`transition-all hover:shadow-lg ${g.available?"hover:-translate-y-1":"opacity-60"}`,children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${g.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:s.jsx(g.icon,{className:"w-6 h-6"})}),s.jsx("h3",{className:"font-semibold mb-2",children:g.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:g.description}),s.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:g.hours}),s.jsx(J,{variant:g.available?"default":"secondary",size:"sm",disabled:!g.available,className:"w-full",children:g.action})]})},_))}),s.jsxs(tu,{defaultValue:"faq",className:"space-y-6",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-3",children:[s.jsxs(on,{value:"faq",className:"flex items-center gap-2",children:[s.jsx(ex,{className:"w-4 h-4"}),"FAQ"]}),s.jsxs(on,{value:"guides",className:"flex items-center gap-2",children:[s.jsx(q4,{className:"w-4 h-4"}),"Guides"]}),s.jsxs(on,{value:"contact",className:"flex items-center gap-2",children:[s.jsx(wn,{className:"w-4 h-4"}),"Contact"]})]}),s.jsxs(ln,{value:"faq",className:"space-y-6",children:[s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(J,{variant:i==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catégories"}),fT.map(g=>s.jsxs(J,{variant:i===g.category?"default":"outline",size:"sm",onClick:()=>a(g.category),className:"flex items-center gap-2",children:[s.jsx(g.icon,{className:"w-4 h-4"}),g.category]},g.category))]})})}),f.length===0?s.jsx(fe,{children:s.jsxs(me,{className:"pt-12 pb-12 text-center",children:[s.jsx(_r,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-clés ou contactez notre support"}),s.jsx(J,{variant:"outline",onClick:()=>r(""),children:"Effacer la recherche"})]})}):s.jsx("div",{className:"space-y-6",children:f.map((g,_)=>s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(g.icon,{className:"w-5 h-5"}),g.category]})}),s.jsx(me,{children:s.jsx(nle,{type:"single",collapsible:!0,className:"w-full",children:g.questions.map((N,b)=>s.jsxs(H5,{value:`${_}-${b}`,children:[s.jsx(G5,{className:"text-left",children:N.question}),s.jsx(K5,{className:"text-muted-foreground leading-relaxed",children:N.answer})]},b))})})]},_))})]}),s.jsxs(ln,{value:"guides",className:"space-y-6",children:[s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(J4,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),s.jsx(Ct,{children:"Apprenez à utiliser StudyMarket comme un pro avec nos guides détaillés"})]}),s.jsx(me,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:sle.map((g,_)=>s.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(g.icon,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold",children:g.title}),s.jsx(at,{variant:"outline",className:"text-xs",children:g.type})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:g.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Un,{className:"w-3 h-3"}),g.duration]}),s.jsxs(J,{size:"sm",variant:"outline",children:[s.jsx(hs,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},_))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(rM,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vidéo"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidéos courtes"}),s.jsxs(J,{variant:"outline",size:"sm",children:[s.jsx(hs,{className:"w-3 h-3 mr-1"}),"Voir les vidéos"]})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(ti,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez nos guides au format PDF"}),s.jsxs(J,{variant:"outline",size:"sm",children:[s.jsx(ti,{className:"w-3 h-3 mr-1"}),"Télécharger"]})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(np,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Communauté"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Échangez avec d'autres étudiants"}),s.jsxs(J,{variant:"outline",size:"sm",children:[s.jsx(hs,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),s.jsx(ln,{value:"contact",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Md,{className:"w-5 h-5"}),"Contactez notre équipe"]}),s.jsx(Ct,{children:"Décrivez votre problème en détail pour une réponse rapide et précise"})]}),s.jsx(me,{children:s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"subject",children:"Sujet *"}),s.jsx(Ge,{id:"subject",value:o.subject,onChange:g=>c(_=>({..._,subject:g.target.value})),placeholder:"Résumez votre problème en quelques mots",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"category",children:"Catégorie"}),s.jsxs(tn,{value:o.category,onValueChange:g=>c(_=>({..._,category:g})),children:[s.jsx(Ht,{className:"mt-1",children:s.jsx(nn,{placeholder:"Sélectionnez une catégorie"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"account",children:"Compte et profil"}),s.jsx(Ke,{value:"listing",children:"Annonces"}),s.jsx(Ke,{value:"payment",children:"Paiements"}),s.jsx(Ke,{value:"security",children:"Sécurité"}),s.jsx(Ke,{value:"technical",children:"Problème technique"}),s.jsx(Ke,{value:"other",children:"Autre"})]})]})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"priority",children:"Priorité"}),s.jsxs(tn,{value:o.priority,onValueChange:g=>c(_=>({..._,priority:g})),children:[s.jsx(Ht,{className:"mt-1",children:s.jsx(nn,{})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"low",children:"Basse - Question générale"}),s.jsx(Ke,{value:"normal",children:"Normale - Besoin d'aide"}),s.jsx(Ke,{value:"high",children:"Haute - Problème bloquant"}),s.jsx(Ke,{value:"urgent",children:"Urgente - Sécurité/Arnaque"})]})]})]}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"message",children:"Message *"}),s.jsx(ri,{id:"message",value:o.message,onChange:g=>c(_=>({..._,message:g.target.value})),placeholder:"Décrivez votre problème en détail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&s.jsxs($t,{children:[s.jsx(Pt,{className:"h-4 w-4"}),s.jsxs(Bt,{children:["Nous vous répondrons à l'adresse ",s.jsx("strong",{children:t.email})]})]}),s.jsx(J,{type:"submit",className:"w-full",disabled:u||!o.subject||!o.message,children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Md,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Un,{className:"w-5 h-5"}),"Temps de réponse"]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Questions générales"}),s.jsx(at,{variant:"secondary",children:"24h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Problèmes techniques"}),s.jsx(at,{variant:"secondary",children:"12h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Urgences sécurité"}),s.jsx(at,{className:"bg-red-500",children:"2h"})]})]})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Y4,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(vs,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Email direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"support@studymarket.fr"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(wn,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Chat en direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Yc,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Application mobile"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientôt disponible"})]})]})]})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(ah,{className:"w-5 h-5"}),"État du système"]})}),s.jsxs(me,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Plateforme web"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Messagerie"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Notifications email"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),s.jsxs(J,{variant:"outline",size:"sm",className:"w-full mt-3",children:[s.jsx(hs,{className:"w-3 h-3 mr-1"}),"Page de statut complète"]})]})]})]})]})})]})]})},ale=[{category:"Rencontres et Échanges",icon:Mr,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits fréquentés : bibliothèques universitaires, halls d'entrée, cafétérias du campus.",type:"do",icon:Pt},{title:"Évitez les lieux isolés",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privés ou endroits déserts.",type:"dont",icon:Id},{title:"Prévenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontrée.",type:"do",icon:Pt},{title:"Rencontrez en journée",description:"Privilégiez les rendez-vous en journée, évitez les rencontres tardives ou nocturnes.",type:"do",icon:Pt}]},{category:"Vérification d'Identité",icon:nM,color:"text-green-600",tips:[{title:"Demandez la carte étudiante",description:"Vérifiez toujours l'identité avec la carte étudiante. C'est votre garantie de sécurité.",type:"do",icon:Pt},{title:"Vérifiez le profil StudyMarket",description:"Consultez le profil : badge vérifié, avis, nombre de transactions, ancienneté du compte.",type:"do",icon:Pt},{title:"Méfiez-vous des profils récents",description:"Soyez prudent avec les comptes créés récemment sans historique de transactions.",type:"dont",icon:In},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos échanges via notre messagerie sécurisée.",type:"do",icon:Pt}]},{category:"Paiements Sécurisés",icon:Vn,color:"text-purple-600",tips:[{title:"Payez à la remise",description:"Ne payez qu'après avoir inspecté l'objet et lors de la remise en main propre.",type:"do",icon:Pt},{title:"Évitez les paiements à l'avance",description:"Ne versez jamais d'acompte ou de paiement intégral avant d'avoir vu l'objet.",type:"dont",icon:Id},{title:"Utilisez des moyens traçables",description:"Privilégiez Lydia, PayPal, virements ou espèces. Évitez les cryptomonnaies.",type:"do",icon:Pt},{title:"Méfiez-vous des prix trop bas",description:"Un iPhone à 50€ ou un MacBook à 200€ sont probablement des arnaques.",type:"dont",icon:In}]},{category:"Communication",icon:wn,color:"text-orange-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos échanges, même en cas de désaccord.",type:"do",icon:Pt},{title:"Posez des questions précises",description:"Demandez des détails sur l'état, l'âge, la raison de la vente, les défauts éventuels.",type:"do",icon:Pt},{title:"Méfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernière chance") sont suspects.',type:"dont",icon:In},{title:"Gardez les preuves",description:"Conservez les captures d'écran des conversations en cas de litige.",type:"do",icon:Pt}]}],ole=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:In},{title:"Paiement demandé à l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:Vn},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:Mr},{title:"Photos de mauvaise qualité",description:"Images floues, prises sur internet ou très peu nombreuses",severity:"medium",icon:gc},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte récent",severity:"medium",icon:np},{title:"Communication étrange",description:"Français approximatif, réponses évasives, pression temporelle",severity:"medium",icon:wn},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:Un},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres données sensibles",severity:"high",icon:Oc}],lle=[{title:"Urgence immédiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:ih,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des règles",contact:`Bouton "Signaler" dans l'app`,icon:cc,color:"text-orange-600"},{title:"Support StudyMarket",description:"Questions, aide, médiation de conflit",contact:"support@studymarket.fr",icon:wn,color:"text-blue-600"},{title:"Sécurité Campus",description:"Incidents sur le campus universitaire",contact:"Service sécurité de votre université",icon:zt,color:"text-green-600"}],cle=()=>s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:s.jsx(zt,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Sécurité & Conseils"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre sécurité est notre priorité. Suivez ces conseils pour des échanges sereins et sécurisés entre étudiants."})]}),s.jsxs($t,{className:"border-green-200 bg-green-50",children:[s.jsx(zt,{className:"h-4 w-4 text-green-600"}),s.jsx(Bt,{className:"text-green-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vérifiez l'identité avec la carte étudiante."]}),s.jsxs(J,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[s.jsx(ti,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(zt,{className:"w-6 h-6 text-green-600"})}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions sécurisées"})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(nM,{className:"w-6 h-6 text-blue-600"})}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants vérifiés"})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Un,{className:"w-6 h-6 text-purple-600"})}),s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Réponse aux signalements"})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Zo,{className:"w-6 h-6 text-orange-600"})}),s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"4.9/5"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction sécurité"})]})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Sécurité Complet"}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des échanges en toute sécurité"})]}),ale.map((t,e)=>s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),s.jsx(me,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((n,r)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${n.type==="do"?"border-green-200 bg-green-50":n.type==="dont"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(n.icon,{className:`w-5 h-5 mt-0.5 ${n.type==="do"?"text-green-600":n.type==="dont"?"text-red-600":"text-orange-600"}`}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-semibold mb-2 ${n.type==="do"?"text-green-800":n.type==="dont"?"text-red-800":"text-orange-800"}`,children:n.title}),s.jsx("p",{className:`text-sm ${n.type==="do"?"text-green-700":n.type==="dont"?"text-red-700":"text-orange-700"}`,children:n.description})]})]})},r))})})]},e))]}),s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(In,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme à Reconnaître"]}),s.jsx(Ct,{children:"Ces comportements doivent vous alerter et vous inciter à la prudence"})]}),s.jsx(me,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ole.map((t,e)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-orange-600"}`}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-orange-800"}`,children:t.title}),s.jsx(at,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),s.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-orange-700"}`,children:t.description})]})]})},e))})})]}),s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(ih,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),s.jsx(Ct,{children:"En cas de problème, voici qui contacter selon la situation"})]}),s.jsx(me,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:lle.map((t,e)=>s.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-orange-600"?"bg-orange-100":t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold mb-1",children:t.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),s.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(UG,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez notre guide de sécurité complet"}),s.jsxs(J,{variant:"outline",className:"w-full",children:[s.jsx(ti,{className:"w-4 h-4 mr-2"}),"Télécharger"]})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(ex,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions fréquentes sur la sécurité"}),s.jsx(J,{variant:"outline",className:"w-full",asChild:!0,children:s.jsxs(Ue,{to:"/help",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(wn,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problème"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre équipe de sécurité"}),s.jsxs(J,{variant:"outline",className:"w-full",children:[s.jsx(cc,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),s.jsxs($t,{className:"border-blue-200 bg-blue-50",children:[s.jsx(J4,{className:"h-4 w-4 text-blue-600"}),s.jsxs(Bt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hésitez pas à annuler la transaction. Votre sécurité vaut plus que n'importe quel objet. L'équipe StudyMarket est là pour vous aider 24h/7j."]})]})]});function ule(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var uS="ScrollArea",[Z5,nde]=Sr(uS),[dle,li]=Z5(uS),Y5=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=t,[c,u]=x.useState(null),[d,f]=x.useState(null),[p,g]=x.useState(null),[_,N]=x.useState(null),[b,S]=x.useState(null),[w,y]=x.useState(0),[E,I]=x.useState(0),[O,q]=x.useState(!1),[R,V]=x.useState(!1),U=ht(e,F=>u(F)),k=Qc(i);return s.jsx(dle,{scope:n,type:r,dir:k,scrollHideDelay:a,scrollArea:c,viewport:d,onViewportChange:f,content:p,onContentChange:g,scrollbarX:_,onScrollbarXChange:N,scrollbarXEnabled:O,onScrollbarXEnabledChange:q,scrollbarY:b,onScrollbarYChange:S,scrollbarYEnabled:R,onScrollbarYEnabledChange:V,onCornerWidthChange:y,onCornerHeightChange:I,children:s.jsx(Ze.div,{dir:k,...o,ref:U,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});Y5.displayName=uS;var Q5="ScrollAreaViewport",X5=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...a}=t,o=li(Q5,n),c=x.useRef(null),u=ht(e,c,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(Ze.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});X5.displayName=Q5;var wa="ScrollAreaScrollbar",dS=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=li(wa,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,c=t.orientation==="horizontal";return x.useEffect(()=>(c?a(!0):o(!0),()=>{c?a(!1):o(!1)}),[c,a,o]),i.type==="hover"?s.jsx(hle,{...r,ref:e,forceMount:n}):i.type==="scroll"?s.jsx(fle,{...r,ref:e,forceMount:n}):i.type==="auto"?s.jsx(J5,{...r,ref:e,forceMount:n}):i.type==="always"?s.jsx(hS,{...r,ref:e}):null});dS.displayName=wa;var hle=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=li(wa,t.__scopeScrollArea),[a,o]=x.useState(!1);return x.useEffect(()=>{const c=i.scrollArea;let u=0;if(c){const d=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(Er,{present:n||a,children:s.jsx(J5,{"data-state":a?"visible":"hidden",...r,ref:e})})}),fle=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=li(wa,t.__scopeScrollArea),a=t.orientation==="horizontal",o=a0(()=>u("SCROLL_END"),100),[c,u]=ule("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,i.scrollHideDelay,u]),x.useEffect(()=>{const d=i.viewport,f=a?"scrollLeft":"scrollTop";if(d){let p=d[f];const g=()=>{const _=d[f];p!==_&&(u("SCROLL"),o()),p=_};return d.addEventListener("scroll",g),()=>d.removeEventListener("scroll",g)}},[i.viewport,a,u,o]),s.jsx(Er,{present:n||c!=="hidden",children:s.jsx(hS,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Le(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Le(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),J5=x.forwardRef((t,e)=>{const n=li(wa,t.__scopeScrollArea),{forceMount:r,...i}=t,[a,o]=x.useState(!1),c=t.orientation==="horizontal",u=a0(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(c?d:f)}},10);return Gd(n.viewport,u),Gd(n.content,u),s.jsx(Er,{present:r||a,children:s.jsx(hS,{"data-state":a?"visible":"hidden",...i,ref:e})})}),hS=x.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=li(wa,t.__scopeScrollArea),a=x.useRef(null),o=x.useRef(0),[c,u]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=s6(c.viewport,c.content),f={...r,sizes:c,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:g=>a.current=g,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:g=>o.current=g};function p(g,_){return yle(g,o.current,c,_)}return n==="horizontal"?s.jsx(mle,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const g=i.viewport.scrollLeft,_=mT(g,c,i.dir);a.current.style.transform=`translate3d(${_}px, 0, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollLeft=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollLeft=p(g,i.dir))}}):n==="vertical"?s.jsx(ple,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const g=i.viewport.scrollTop,_=mT(g,c);a.current.style.transform=`translate3d(0, ${_}px, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollTop=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollTop=p(g))}}):null}),mle=x.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=li(wa,t.__scopeScrollArea),[o,c]=x.useState(),u=x.useRef(null),d=ht(e,u,a.onScrollbarXChange);return x.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),s.jsx(t6,{"data-orientation":"horizontal",...i,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":i0(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,p)=>{if(a.viewport){const g=a.viewport.scrollLeft+f.deltaX;t.onWheelScroll(g),a6(g,p)&&f.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Tx(o.paddingLeft),paddingEnd:Tx(o.paddingRight)}})}})}),ple=x.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=li(wa,t.__scopeScrollArea),[o,c]=x.useState(),u=x.useRef(null),d=ht(e,u,a.onScrollbarYChange);return x.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),s.jsx(t6,{"data-orientation":"vertical",...i,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":i0(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,p)=>{if(a.viewport){const g=a.viewport.scrollTop+f.deltaY;t.onWheelScroll(g),a6(g,p)&&f.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Tx(o.paddingTop),paddingEnd:Tx(o.paddingBottom)}})}})}),[gle,e6]=Z5(wa),t6=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:f,onResize:p,...g}=t,_=li(wa,n),[N,b]=x.useState(null),S=ht(e,U=>b(U)),w=x.useRef(null),y=x.useRef(""),E=_.viewport,I=r.content-r.viewport,O=mr(f),q=mr(u),R=a0(p,10);function V(U){if(w.current){const k=U.clientX-w.current.left,F=U.clientY-w.current.top;d({x:k,y:F})}}return x.useEffect(()=>{const U=k=>{const F=k.target;(N==null?void 0:N.contains(F))&&O(k,I)};return document.addEventListener("wheel",U,{passive:!1}),()=>document.removeEventListener("wheel",U,{passive:!1})},[E,N,I,O]),x.useEffect(q,[r,q]),Gd(N,R),Gd(_.content,R),s.jsx(gle,{scope:n,scrollbar:N,hasThumb:i,onThumbChange:mr(a),onThumbPointerUp:mr(o),onThumbPositionChange:q,onThumbPointerDown:mr(c),children:s.jsx(Ze.div,{...g,ref:S,style:{position:"absolute",...g.style},onPointerDown:Le(t.onPointerDown,U=>{U.button===0&&(U.target.setPointerCapture(U.pointerId),w.current=N.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",_.viewport&&(_.viewport.style.scrollBehavior="auto"),V(U))}),onPointerMove:Le(t.onPointerMove,V),onPointerUp:Le(t.onPointerUp,U=>{const k=U.target;k.hasPointerCapture(U.pointerId)&&k.releasePointerCapture(U.pointerId),document.body.style.webkitUserSelect=y.current,_.viewport&&(_.viewport.style.scrollBehavior=""),w.current=null})})})}),kx="ScrollAreaThumb",n6=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=e6(kx,t.__scopeScrollArea);return s.jsx(Er,{present:n||i.hasThumb,children:s.jsx(vle,{ref:e,...r})})}),vle=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,a=li(kx,n),o=e6(kx,n),{onThumbPositionChange:c}=o,u=ht(e,p=>o.onThumbChange(p)),d=x.useRef(void 0),f=a0(()=>{d.current&&(d.current(),d.current=void 0)},100);return x.useEffect(()=>{const p=a.viewport;if(p){const g=()=>{if(f(),!d.current){const _=_le(p,c);d.current=_,c()}};return c(),p.addEventListener("scroll",g),()=>p.removeEventListener("scroll",g)}},[a.viewport,f,c]),s.jsx(Ze.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Le(t.onPointerDownCapture,p=>{const _=p.target.getBoundingClientRect(),N=p.clientX-_.left,b=p.clientY-_.top;o.onThumbPointerDown({x:N,y:b})}),onPointerUp:Le(t.onPointerUp,o.onThumbPointerUp)})});n6.displayName=kx;var fS="ScrollAreaCorner",r6=x.forwardRef((t,e)=>{const n=li(fS,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(xle,{...t,ref:e}):null});r6.displayName=fS;var xle=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=li(fS,n),[a,o]=x.useState(0),[c,u]=x.useState(0),d=!!(a&&c);return Gd(i.scrollbarX,()=>{var p;const f=((p=i.scrollbarX)==null?void 0:p.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),Gd(i.scrollbarY,()=>{var p;const f=((p=i.scrollbarY)==null?void 0:p.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),d?s.jsx(Ze.div,{...r,ref:e,style:{width:a,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Tx(t){return t?parseInt(t,10):0}function s6(t,e){const n=t/e;return isNaN(n)?0:n}function i0(t){const e=s6(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function yle(t,e,n,r="ltr"){const i=i0(n),a=i/2,o=e||a,c=i-o,u=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-c,f=n.content-n.viewport,p=r==="ltr"?[0,f]:[f*-1,0];return i6([u,d],p)(t)}function mT(t,e,n="ltr"){const r=i0(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,c=a-r,u=n==="ltr"?[0,o]:[o*-1,0],d=Tm(t,u);return i6([0,o],[0,c])(d)}function i6(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function a6(t,e){return t>0&&t<e}var _le=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,c=n.top!==a.top;(o||c)&&e(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function a0(t,e){const n=mr(t),r=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),x.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Gd(t,e){const n=mr(e);Bn(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var o6=Y5,wle=X5,ble=r6;const mS=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(o6,{ref:r,className:st("relative overflow-hidden",t),...n,children:[s.jsx(wle,{className:"h-full w-full rounded-[inherit]",children:e}),s.jsx(l6,{}),s.jsx(ble,{})]}));mS.displayName=o6.displayName;const l6=x.forwardRef(({className:t,orientation:e="vertical",...n},r)=>s.jsx(dS,{ref:r,orientation:e,className:st("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:s.jsx(n6,{className:"relative flex-1 rounded-full bg-border"})}));l6.displayName=dS.displayName;const pT=({conversations:t,loading:e,searchQuery:n,setSearchQuery:r,currentConversation:i,currentUser:a,onSelectConversation:o})=>{const c=t.filter(f=>{const p=f.participants.find(_=>_!==(a==null?void 0:a.uid)),g=p?f.participantDetails[p]:null;return(g==null?void 0:g.name.toLowerCase().includes(n.toLowerCase()))||f.listingTitle.toLowerCase().includes(n.toLowerCase())}),u=f=>f===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(f),d=f=>{const p=f.participants.find(g=>g!==(a==null?void 0:a.uid));return p?f.participantDetails[p]:null};return s.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wn,{className:"w-5 h-5 text-primary"}),s.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:s.jsx(_y,{className:"w-4 h-4"})}),s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:s.jsx(z4,{className:"w-4 h-4"})}),s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramètres",children:s.jsx(wy,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(_r,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{placeholder:"Rechercher conversations...",value:n,onChange:f=>r(f.target.value),className:"pl-9 h-9 text-sm"})]})]}),s.jsx(mS,{className:"flex-1",children:e?s.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((f,p)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-2 p-2",children:[s.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:s.jsx(Jr,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},p))}):c.length===0?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx(wn,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),s.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n?s.jsxs(s.Fragment,{children:[s.jsx(_r,{className:"w-3 h-3 inline mr-1"}),'Aucun résultat pour "',n,'"']}):s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparaîtront ici"]})})]}):s.jsx("div",{className:"p-1",children:c.map(f=>{var N,b;const p=d(f),g=f.unreadCount[a==null?void 0:a.uid]||0,_=(i==null?void 0:i.id)===f.id;return s.jsx("div",{onClick:()=>o(f),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${_?"bg-accent":""}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(oo,{className:"w-10 h-10",children:[s.jsx(lo,{src:p==null?void 0:p.avatar}),s.jsx(co,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((b=(N=p==null?void 0:p.name)==null?void 0:N[0])==null?void 0:b.toUpperCase())||s.jsx(Jr,{className:"w-4 h-4"})})]}),(p==null?void 0:p.verified)&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(zt,{className:"w-1.5 h-1.5 text-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(Jr,{className:"w-3 h-3 text-muted-foreground"}),(p==null?void 0:p.name)||"Utilisateur"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[f.lastMessage&&s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Un,{className:"w-3 h-3"}),mh(f.lastMessage.sentAt,{addSuffix:!0,locale:Dr})]}),g>0&&s.jsx(at,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:g>99?"99+":g})]})]}),s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.listingImage?s.jsx("img",{src:f.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):s.jsx(X4,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:f.listingTitle}),s.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[f.listingPrice===0?s.jsx(Or,{className:"w-3 h-3 text-green-600"}):s.jsx("span",{children:"€"}),u(f.listingPrice)]})]}),f.lastMessage&&s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[f.lastMessage.senderId===(a==null?void 0:a.uid)?s.jsx(Md,{className:"w-3 h-3"}):s.jsx(wn,{className:"w-3 h-3"}),f.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",f.lastMessage.text]})]})]})},f.id)})})})]})},gT=({conversation:t,messages:e,loading:n,currentUser:r,onBack:i})=>{var B,X;const{sendMessage:a,markMessagesAsSeen:o,blockUser:c,reportUser:u,deleteConversation:d}=Vy(),[f,p]=x.useState(""),[g,_]=x.useState(40),[N,b]=x.useState(!1),[S,w]=x.useState(!1),[y,E]=x.useState(""),[I,O]=x.useState(""),q=x.useRef(null),R=x.useRef(null),V=()=>{var de;(de=R.current)==null||de.scrollIntoView({behavior:"smooth"})},U=x.useCallback(()=>{const de=q.current;if(!de)return;de.style.height="auto";const ve=Math.max(40,Math.min(de.scrollHeight,120));_(ve)},[]),k=x.useCallback(de=>{const ve=de.target.value;p(ve),b(!!ve.trim()),setTimeout(U,0)},[U]),F=async()=>{if(!f.trim()||!t||!r)return;const de=f.trim();p(""),b(!1),_(40),await a(t.id,de,r.uid,r.displayName||"Utilisateur",r.photoURL)},D=de=>{de.key==="Enter"&&!de.shiftKey&&(de.preventDefault(),F())},P=async()=>{!t||!r||await c(t.id,r.uid)},H=async()=>{if(!t||!r||!y.trim())return;const de=t.participants.find(ve=>ve!==r.uid);de&&(await u(t.id,r.uid,de,y,I),w(!1),E(""),O(""))},te=async()=>{!t||!r||(await d(t.id,r.uid),i())};if(x.useEffect(()=>{t&&r&&o(t.id,r.uid)},[t,r,o]),x.useEffect(V,[e]),!t)return s.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(wn,{className:"w-8 h-8 text-white"})}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sélectionnez une conversation"}),s.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(_r,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer à discuter"]})]})});const Z=t.participants.find(de=>de!==(r==null?void 0:r.uid)),K=Z?t.participantDetails[Z]:null,A=de=>{const ve=new Date,be=new Date(de);return be.toDateString()===ve.toDateString()?be.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((ve.getTime()-be.getTime())/(1e3*60*60*24))<7?be.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):be.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},z=de=>de.senderId!==(r==null?void 0:r.uid)?null:de.seen?s.jsx(MG,{className:"w-3 h-3 text-blue-500"}):s.jsx(OG,{className:"w-3 h-3 text-muted-foreground"});return s.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(J,{variant:"ghost",size:"icon",onClick:i,className:"lg:hidden h-8 w-8",children:s.jsx(pc,{className:"w-4 h-4"})}),s.jsxs(oo,{className:"w-8 h-8",children:[s.jsx(lo,{src:K==null?void 0:K.avatar}),s.jsx(co,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((X=(B=K==null?void 0:K.name)==null?void 0:B[0])==null?void 0:X.toUpperCase())||s.jsx(Jr,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[s.jsx(Jr,{className:"w-3 h-3 text-muted-foreground"}),(K==null?void 0:K.name)||"Utilisateur"]}),(K==null?void 0:K.verified)&&s.jsx(zt,{className:"w-3 h-3 text-green-600"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[s.jsx(Mr,{className:"w-3 h-3"}),K==null?void 0:K.university]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:s.jsx(ih,{className:"w-4 h-4"})}),s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vidéo",children:s.jsx(rM,{className:"w-4 h-4"})}),s.jsxs(fb,{children:[s.jsx(mb,{asChild:!0,children:s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(LG,{className:"w-4 h-4"})})}),s.jsxs(cx,{align:"end",children:[s.jsx(en,{asChild:!0,children:s.jsxs(Ue,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),s.jsxs(en,{children:[s.jsx(Zo,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),s.jsxs(en,{children:[s.jsx(PG,{className:"w-4 h-4 mr-2"}),"Archiver"]}),s.jsx(Wi,{}),s.jsxs(en,{onClick:()=>w(!0),children:[s.jsx(cc,{className:"w-4 h-4 mr-2"}),"Signaler"]}),s.jsxs(en,{onClick:P,children:[s.jsx(RG,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),s.jsxs(en,{onClick:te,className:"text-destructive",children:[s.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),s.jsx(fe,{className:"mt-2",children:s.jsx(me,{className:"p-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?s.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):s.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:s.jsx(X4,{className:"w-4 h-4 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(eN,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),s.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs",children:"€"}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),s.jsx(J,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:s.jsxs(Ue,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[s.jsx(hs,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsx(mS,{className:"flex-1 p-3",children:s.jsxs("div",{className:"space-y-3",children:[n?s.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((de,ve)=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:`flex ${ve%2===0?"justify-start":"justify-end"}`,children:s.jsxs("div",{className:"max-w-xs",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),s.jsx("div",{className:"h-8 bg-muted rounded"})]})})},ve))}):e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(wn,{className:"w-6 h-6 text-white"})}),s.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(Md,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(de=>{const ve=de.senderId===(r==null?void 0:r.uid);return s.jsx("div",{className:`flex ${ve?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${ve?"order-2":"order-1"}`,children:[s.jsx("div",{className:`rounded-2xl px-4 py-2 ${ve?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:s.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:de.text})}),s.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${ve?"justify-end":"justify-start"}`,children:[s.jsx(Un,{className:"w-3 h-3"}),s.jsx("span",{children:A(de.sentAt)}),z(de)]})]})},de.id)}),s.jsx("div",{ref:R})]})}),s.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[s.jsx(ri,{ref:q,value:f,placeholder:"Tapez votre message...",onChange:k,onKeyDown:D,rows:1,style:{height:g,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),s.jsx(J,{onClick:F,disabled:!f.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:s.jsx(Md,{className:"h-3.5 w-3.5"})})]}),N&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[s.jsx(wn,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),s.jsx(da,{open:S,onOpenChange:w,children:s.jsxs(Ci,{children:[s.jsx(ha,{children:s.jsxs(ki,{className:"flex items-center gap-2",children:[s.jsx(cc,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs(Re,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[s.jsx(In,{className:"w-4 h-4"}),"Motif du signalement"]}),s.jsxs(tn,{value:y,onValueChange:E,children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Sélectionnez un motif"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"spam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vs,{className:"w-4 h-4"}),"Spam"]})}),s.jsx(Ke,{value:"harassment",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(In,{className:"w-4 h-4"}),"Harcèlement"]})}),s.jsx(Ke,{value:"inappropriate",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cc,{className:"w-4 h-4"}),"Contenu inapproprié"]})}),s.jsx(Ke,{value:"scam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(In,{className:"w-4 h-4"}),"Arnaque"]})}),s.jsx(Ke,{value:"other",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yl,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),s.jsxs("div",{children:[s.jsxs(Re,{htmlFor:"report-description",className:"flex items-center gap-2",children:[s.jsx(wn,{className:"w-4 h-4"}),"Description (optionnel)"]}),s.jsx(ri,{id:"report-description",value:I,onChange:de=>O(de.target.value),placeholder:"Décrivez le problème...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(J,{variant:"outline",onClick:()=>w(!1),children:"Annuler"}),s.jsxs(J,{onClick:H,disabled:!y,className:"bg-red-500 hover:bg-red-600",children:[s.jsx(cc,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},jle=()=>{const{currentUser:t,userProfile:e}=mn(),{conversations:n,currentConversation:r,messages:i,loading:a,fetchConversations:o,fetchMessages:c,setCurrentConversation:u,cleanup:d}=Vy(),[f,p]=x.useState(""),[g,_]=x.useState(!1);x.useEffect(()=>(t&&o(t.uid),()=>{d()}),[t,o,d]),x.useEffect(()=>{r&&c(r.id)},[r,c]);const N=S=>{u(S),_(!0)},b=()=>{_(!1),u(null)};return t?s.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[s.jsx("div",{className:"lg:hidden w-full h-full",children:g?s.jsx(gT,{conversation:r,messages:i,loading:a,currentUser:t,onBack:b}):s.jsx(pT,{conversations:n,loading:a,searchQuery:f,setSearchQuery:p,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:N})}),s.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[s.jsx(pT,{conversations:n,loading:a,searchQuery:f,setSearchQuery:p,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:N}),s.jsx(gT,{conversation:r,messages:i,loading:a,currentUser:t,onBack:b})]})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(wn,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accéder à vos messages"}),s.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[s.jsx(Jr,{className:"w-4 h-4"}),"Vous devez être connecté pour voir et envoyer des messages."]}),s.jsx(J,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:s.jsxs(Ue,{to:"/auth",className:"flex items-center gap-2",children:[s.jsx(Jr,{className:"w-4 h-4"}),"Se connecter"]})})]})};var lv={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,a,o,c;return c=1.70158,o=0,a=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),a<Math.abs(i)?(a=i,c=o/4):c=o/(2*Math.PI)*Math.asin(i/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,a,o,c;return c=1.70158,o=0,a=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),a<Math.abs(i)?(a=i,c=o/4):c=o/(2*Math.PI)*Math.asin(i/a),a*Math.pow(2,-10*t)*Math.sin((t*r-c)*(2*Math.PI)/o)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,a,o,c;return c=1.70158,o=0,a=i,t===0?e:(t/=r/2)===2?e+i:(o||(o=r*(.3*1.5)),a<Math.abs(i)?(a=i,c=o/4):c=o/(2*Math.PI)*Math.asin(i/a),t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/o))+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/o)*.5+i+e)},easeInBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),a*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),a*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?a/2*(t*t*(((i*=1.525)+1)*t-i))+e:a/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,a;return a=lv.easeOutBounce(r-t,0,i,r),i-a+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,a;return t<r/2?(a=lv.easeInBounce(t*2,0,i,r),a*.5+e):(a=lv.easeOutBounce(t*2-r,0,i,r),a*.5+i*.5+e)}},Nle=lv;function Sle(t){return t*Math.PI/180}function Ns(t,e){return t+Math.random()*(e-t)}function Ele(t,e){return Math.floor(t+Math.random()*(e-t+1))}var qf;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(qf||(qf={}));var Do;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Do||(Do={}));const Cle=1e3/60;class kle{constructor(e,n,r,i){this.getOptions=n;const{colors:a,initialVelocityX:o,initialVelocityY:c}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=Ns(5,20),this.h=Ns(5,20),this.radius=Ns(5,10),this.vx=typeof o=="number"?Ns(-o,o):Ns(o.min,o.max),this.vy=typeof c=="number"?Ns(-c,0):Ns(c.min,c.max),this.shape=Ele(0,2),this.angle=Sle(Ns(0,360)),this.angularSpin=Ns(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=Ns(0,1),this.rotationDirection=Ns(0,1)?Do.Positive:Do.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:a,drawShape:o}=this.getOptions(),c=e/Cle;this.x+=this.vx*c,this.y+=this.vy*c,this.vy+=n*c,this.vx+=r*c,this.vx*=i**c,this.vy*=i**c,this.rotateY>=1&&this.rotationDirection===Do.Positive?this.rotationDirection=Do.Negative:this.rotateY<=-1&&this.rotationDirection===Do.Negative&&(this.rotationDirection=Do.Positive);const u=.1*this.rotationDirection*c;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=a,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case qf.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case qf.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case qf.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Tle{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=Ns(this.x,this.w+this.x),a=Ns(this.y,this.h+this.y);return new kle(this.context,this.getOptions,i,a)},this.animate=i=>{const{canvas:a,context:o,particlesGenerated:c,lastNumberOfPieces:u}=this,{run:d,recycle:f,numberOfPieces:p,debug:g,tweenFunction:_,tweenDuration:N}=this.getOptions();if(!d)return!1;const b=this.particles.length,S=f?b:c;if(S<p){u!==p&&(this.tweenProgress=0,this.tweenFrom=S,this.lastNumberOfPieces=p),this.tweenProgress=Math.min(N,Math.max(0,this.tweenProgress+i));const w=_(this.tweenProgress,this.tweenFrom,p,N),y=Math.round(w-S);for(let E=0;E<y;E++)this.particles.push(this.getParticle());this.particlesGenerated+=y}g&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${b}`,a.width-10,a.height-20));for(let w=this.particles.length-1;w>=0;w--){const y=this.particles[w];y.update(i),(y.y>a.height||y.y<-100||y.x>a.width+100||y.x<-100)&&(f&&S<=p?this.particles[w]=this.getParticle():this.removeParticleAt(w))}return b>0||S<p},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const pS={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:Nle.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Ple{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const a={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...a,...pS,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:a,onConfettiComplete:o,frameRate:c},canvas:u,context:d}=this,f=Math.min(i-this.lastFrameTime,50);if(c&&f<1e3/c){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(c?f%c:0),a&&(d.fillStyle="white",d.clearRect(0,0,u.width,u.height)),this.generator.animate(f)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new Tle(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,a;const n=(i=this._options)==null?void 0:i.run,r=(a=this._options)==null?void 0:a.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const Ile=Fe.createRef();class gS extends Fe.Component{constructor(e){super(e),this.canvas=Fe.createRef(),this.canvas=e.canvasRef||Ile}componentDidMount(){if(this.canvas.current){const e=T_(this.props)[0];this.confetti=new Ple(this.canvas.current,e)}}componentDidUpdate(){const e=T_(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=T_(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return s.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}gS.defaultProps={...pS};gS.displayName="ReactConfetti";function T_(t){const e={},n={},r={},i=[...Object.keys(pS),"confettiSource","drawShape","onConfettiComplete","frameRate"],a=["canvasRef"];for(const o in t){const c=t[o];i.includes(o)?e[o]=c:a.includes(o)?a[o]=c:r[o]=c}return[e,r,n]}const Ale=Fe.forwardRef((t,e)=>s.jsx(gS,{canvasRef:e,...t})),Rle=({open:t,loading:e,email:n,onResend:r,onCheck:i,onClose:a,verified:o})=>s.jsx(da,{open:t,children:s.jsxs(Ci,{className:"max-w-md text-center",children:[o&&s.jsx(Ale,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:250,recycle:!1}),s.jsxs(ha,{children:[s.jsxs(ki,{className:"flex items-center justify-center gap-2 text-lg",children:[o?s.jsx(YG,{className:"w-6 h-6 text-green-500 animate-bounce"}):s.jsx(HG,{className:"w-5 h-5 text-primary"}),o?"Félicitations !":"Vérifie ton email"]}),s.jsx(yc,{children:o?"Ton compte est maintenant activé. Tu peux accéder à la plateforme.":`Un lien de confirmation a été envoyé à ${n}. Clique dessus pour activer ton compte.`})]}),!o&&s.jsxs("div",{className:"space-y-3 mt-2",children:[s.jsxs("p",{className:"text-muted-foreground text-sm",children:["Pense à vérifier tes spams. ",s.jsx("br",{}),"La vérification est automatique dès que tu as cliqué sur le lien."]}),s.jsxs(J,{onClick:i,disabled:e,className:"w-full",children:[e?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"J'ai validé mon email"]}),s.jsxs(J,{onClick:r,variant:"outline",disabled:e,className:"w-full",children:[e?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Renvoyer l'email"]})]}),o&&s.jsxs("div",{className:"space-y-3 mt-4",children:[s.jsx("p",{className:"text-green-600 font-semibold text-lg",children:"Bienvenue sur StudyMarket !"}),s.jsx(J,{onClick:a,className:"w-full bg-gradient-to-r from-primary to-secondary",children:"Accéder au site"})]})]})}),Mle=eu({email:gt().email("Email invalide"),password:gt().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),Ole=eu({firstName:gt().min(2,"Le prénom doit contenir au moins 2 caractères"),lastName:gt().min(2,"Le nom doit contenir au moins 2 caractères"),displayName:gt().optional(),email:gt().email("Email invalide").refine(t=>["univ-","edu","gmail.com","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),"Vous devez utiliser une adresse email universitaire"),university:gt().min(1,"Veuillez sélectionner votre université"),otherUniversity:gt().optional(),fieldOfStudy:gt().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:gt().optional(),graduationYear:gt().min(1,"Veuillez indiquer votre année de diplôme"),password:gt().min(6,"Le mot de passe doit contenir au moins 6 caractères"),confirmPassword:gt()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),Dle=eu({university:gt().min(1,"Veuillez sélectionner votre université"),otherUniversity:gt().optional(),fieldOfStudy:gt().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:gt().optional(),graduationYear:gt().min(1,"Veuillez indiquer votre année de diplôme"),displayName:gt().min(2,"Le nom doit contenir au moins 2 caractères")}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),vT=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris 3 Sorbonne","Université Paris Cité","Sciences Po Paris","Autre université"],xT=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],Lle=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),Fle=()=>{var K,A;const{currentUser:t,signIn:e,signInWithGoogle:n,fetchUserProfile:r}=mn(),[i,a]=x.useState(!1),[o,c]=x.useState(!1),[u,d]=x.useState(!1),[f,p]=x.useState(!1),[g,_]=x.useState(""),[N,b]=x.useState(""),[S,w]=x.useState(!1),[y,E]=x.useState(null);mo();const[I,O]=x.useState(!1),[q,R]=x.useState(!1),[V,U]=x.useState(!1),k=cr(),F=_c({resolver:wc(Mle),defaultValues:{email:"",password:""}}),D=_c({resolver:wc(Ole),defaultValues:{firstName:"",lastName:"",displayName:"",email:"",university:"",otherUniversity:"",fieldOfStudy:"",otherFieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),P=_c({resolver:wc(Dle),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}});if(x.useEffect(()=>{(async()=>{if(t)try{const B=await Is(yt($e,"users",t.uid));if(B.exists()){const X=B.data();if(!(t.emailVerified||t.providerData.some(ve=>ve.providerId==="google.com"))&&!X.emailVerified){b(t.email||""),p(!0),O(!0),U(!1);return}}else{if(t.providerData.some(de=>de.providerId==="google.com")){if(!Lle(t.email||"")){_("Vous devez utiliser une adresse email universitaire"),Gi.signOut();return}E({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),w(!0);return}const X=localStorage.getItem("pendingUserData");if(X&&t.emailVerified){const de=JSON.parse(X),ve=Object.fromEntries(Object.entries(de).filter(([,be])=>be!==void 0));await lc(yt($e,"users",t.uid),ve),await r(t.uid),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}}catch(B){console.error("Error checking user profile:",B)}})()},[t,r]),x.useEffect(()=>{let z=null;return f&&t&&!t.emailVerified&&(z=setInterval(async()=>{await xf(t),t.emailVerified&&(p(!1),b(""),_(""),window.location.reload())},5e3)),()=>{z&&clearInterval(z)}},[f,t]),x.useEffect(()=>{t?t.emailVerified?(O(!1),U(!1)):(b(t.email||""),O(!0),U(!1)):(O(!1),U(!1))},[t]),x.useEffect(()=>{let z=null;return I&&t&&!t.emailVerified&&(z=setInterval(async()=>{await xf(t),t.emailVerified&&(U(!0),z&&clearInterval(z))},5e3)),()=>{z&&clearInterval(z)}},[I,t]),S&&y)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(fe,{className:"w-full max-w-md",children:[s.jsxs(Qe,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(JG,{className:"w-6 h-6 text-green-600"})})}),s.jsx(Je,{className:"text-2xl text-green-600",children:"Complétez votre profil étudiant"}),s.jsx(Ct,{children:"Dernière étape pour accéder à StudyMarket"})]}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs($t,{children:[s.jsx(Pt,{className:"h-4 w-4"}),s.jsxs(Bt,{children:["Connecté avec ",s.jsx("strong",{children:y.email})]})]}),g&&s.jsxs($t,{variant:"destructive",children:[s.jsx(Uf,{className:"h-4 w-4"}),s.jsx(Bt,{children:g})]}),s.jsxs("form",{onSubmit:P.handleSubmit(async z=>{d(!0),_("");try{const B=z.university==="Autre université"?z.otherUniversity:z.university,X=z.fieldOfStudy==="Autre"?z.otherFieldOfStudy:z.fieldOfStudy,de=Object.fromEntries(Object.entries(z).filter(([,ve])=>ve!==void 0));if(await lc(yt($e,"users",y.uid),{email:y.email,displayName:de.displayName,photoURL:y.photoURL,university:B,otherUniversity:z.university==="Autre université"?z.otherUniversity:void 0,fieldOfStudy:X,otherFieldOfStudy:z.fieldOfStudy==="Autre"?z.otherFieldOfStudy:void 0,graduationYear:parseInt(z.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),t&&y.displayName)try{await hm(t,{displayName:de.displayName})}catch{}await r(y.uid),w(!1),window.location.reload()}catch(B){console.error("Error completing profile:",B),_("Erreur lors de la sauvegarde du profil")}finally{d(!1)}}),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Re,{htmlFor:"university",children:"Université"}),s.jsxs(tn,{onValueChange:z=>P.setValue("university",z),value:P.watch("university"),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Sélectionnez votre université"})}),s.jsx(Gt,{children:vT.map(z=>s.jsx(Ke,{value:z,children:z},z))})]}),P.watch("university")==="Autre université"&&s.jsx(Ge,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...P.register("otherUniversity"),className:"mt-2"}),P.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.university.message}),P.watch("university")==="Autre université"&&P.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Re,{htmlFor:"fieldOfStudy",children:"Filière"}),s.jsxs(tn,{onValueChange:z=>P.setValue("fieldOfStudy",z),value:P.watch("fieldOfStudy"),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Filière"})}),s.jsx(Gt,{children:xT.map(z=>s.jsx(Ke,{value:z,children:z},z))})]}),P.watch("fieldOfStudy")==="Autre"&&s.jsx(Ge,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...P.register("otherFieldOfStudy"),className:"mt-2"}),P.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.fieldOfStudy.message}),P.watch("fieldOfStudy")==="Autre"&&P.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Re,{htmlFor:"graduationYear",children:"Année de diplôme"}),s.jsxs(tn,{onValueChange:z=>P.setValue("graduationYear",z),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Année"})}),s.jsx(Gt,{children:Array.from({length:8},(z,B)=>2024+B).map(z=>s.jsx(Ke,{value:z.toString(),children:z},z))})]}),P.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.graduationYear.message})]})]}),s.jsxs(J,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:u,children:[u?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),s.jsx(J,{variant:"outline",onClick:()=>{Gi.signOut(),w(!1),E(null)},className:"w-full",children:"Se déconnecter et recommencer"})]})]})});if(f)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(fe,{className:"w-full max-w-md",children:[s.jsxs(Qe,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(vs,{className:"w-6 h-6 text-blue-600"})})}),s.jsx(Je,{className:"text-2xl text-blue-600",children:"Vérifiez votre email"}),s.jsxs(Ct,{children:["Un lien d'activation a été envoyé à ",s.jsx("strong",{children:N}),".",s.jsx("br",{}),"Cliquez sur le lien pour activer votre compte.",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(Vous pouvez fermer cette page et revenir après avoir validé l'email)"})]})]}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs($t,{children:[s.jsx(Pt,{className:"h-4 w-4"}),s.jsxs(Bt,{children:["Nous avons envoyé un lien d'activation à ",s.jsx("strong",{children:N}),".",s.jsx("br",{}),s.jsx("span",{className:"text-xs",children:"Vérifiez vos spams si vous ne le trouvez pas."})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Important :"})}),s.jsx("p",{children:"• Cliquez sur le lien dans l'email pour activer votre compte"}),s.jsx("p",{children:"• Vérifiez votre boîte de réception et vos spams"}),s.jsx("p",{children:"• Le lien expire dans 24h"})]}),s.jsxs(J,{onClick:async()=>{if(t){d(!0);try{await G0(t),_(""),alert("Email d'activation renvoyé !")}catch(z){_("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",z)}d(!1)}},variant:"outline",className:"w-full",disabled:u||!t,children:[u?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(vs,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),s.jsx(J,{onClick:async()=>{if(t){d(!0);try{await xf(t),t.emailVerified?(p(!1),b(""),_(""),window.location.reload()):_("L'email n'est pas encore validé. Pensez à vérifier vos spams.")}catch{_("Erreur lors de la vérification de l'état de l'email")}d(!1)}},variant:"secondary",className:"w-full",disabled:u||!t,children:"J'ai déjà validé mon email"}),g&&s.jsxs($t,{variant:"destructive",children:[s.jsx(Uf,{className:"h-4 w-4"}),s.jsx(Bt,{children:g})]}),s.jsx(J,{variant:"link",onClick:()=>{p(!1),b(""),_(""),t&&Gi.signOut()},className:"w-full",children:"Retour à l'inscription"})]})]})});const H=async z=>{d(!0),_("");try{await e(z.email,z.password),k("/")}catch(B){B.code==="auth/invalid-credential"?_("Email ou mot de passe incorrect"):B.code==="auth/user-not-found"?_("Aucun compte trouvé avec cet email"):B.code==="auth/user-disabled"?_("Ce compte a été désactivé"):B.code==="auth/too-many-requests"?_("Trop de tentatives. Réessayez plus tard."):_("Erreur de connexion: "+(B.message||"Erreur inconnue")),console.error("Sign in error:",B)}finally{d(!1)}},te=async z=>{d(!0),_("");try{const{firstName:B,lastName:X,...de}=z,ve=`${B} ${X}`,Ee=(await FA(Gi,z.email,z.password)).user;await G0(Ee,{url:`${window.location.origin}/auth`,handleCodeInApp:!1});const Oe=z.university==="Autre université"?z.otherUniversity:z.university,Se=z.fieldOfStudy==="Autre"?z.otherFieldOfStudy:z.fieldOfStudy,re=Object.fromEntries(Object.entries(z).filter(([,ne])=>ne!==void 0)),ee={firstName:B,lastName:X,displayName:ve,university:Oe,otherUniversity:z.university==="Autre université"?z.otherUniversity:void 0,fieldOfStudy:Se,otherFieldOfStudy:z.fieldOfStudy==="Autre"?z.otherFieldOfStudy:void 0,graduationYear:parseInt(re.graduationYear),email:z.email,createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"email"};await lc(yt($e,"users",Ee.uid),ee),await r(Ee.uid),b(z.email),O(!0),U(!1),Ee&&await hm(Ee,{displayName:ve}),window.location.reload()}catch(B){console.error("Sign up error:",B),B.code==="auth/email-already-in-use"?_("Cette adresse email est déjà utilisée"):B.code==="auth/weak-password"?_("Le mot de passe est trop faible"):B.code==="auth/invalid-email"?_("Adresse email invalide"):_("Erreur lors de la création du compte")}finally{d(!1)}},Z=async()=>{d(!0),_("");try{await n()}catch(z){z.code==="auth/popup-closed-by-user"?_("Connexion annulée"):z.code==="auth/popup-blocked"?_("Popup bloquée par le navigateur"):z.code==="auth/account-exists-with-different-credential"?_("Un compte existe déjà avec cet email"):_("Erreur de connexion avec Google: "+(z.message||"Erreur inconnue")),console.error("Google sign in error:",z)}finally{d(!1)}};return x.useEffect(()=>{(async()=>{if(t&&t.emailVerified&&!(await Is(yt($e,"users",t.uid))).exists()){const X=localStorage.getItem("pendingUserData");if(X){const de=JSON.parse(X),ve=Object.fromEntries(Object.entries(de).filter(([,be])=>be!==void 0));await lc(yt($e,"users",t.uid),ve),await r(t.uid),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}})()},[t,r]),s.jsxs("div",{className:"min-h-screen flex items-center justify-center px-2 sm:px-0",children:[s.jsxs(fe,{className:"w-full max-w-md mx-auto px-2 py-4 sm:px-6",children:[s.jsxs(Qe,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:s.jsx(sh,{className:"w-6 h-6 text-white"})})}),s.jsx(Je,{className:"text-2xl",children:i?"Rejoindre StudyMarket":"Se connecter"}),s.jsx(Ct,{children:i?"Inscription sécurisée pour étudiants":"Connectez-vous à votre compte étudiant"}),i&&s.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:s.jsxs(at,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(zt,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),s.jsxs(me,{className:"space-y-6",children:[g&&s.jsxs($t,{variant:"destructive",children:[s.jsx(Uf,{className:"h-4 w-4"}),s.jsx(Bt,{children:g})]}),s.jsxs(J,{variant:"outline",className:"w-full",onClick:Z,disabled:u,children:[u?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google Éducation"]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx(Zs,{className:"w-full"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),s.jsxs("form",{onSubmit:i?D.handleSubmit(te):F.handleSubmit(H),className:"space-y-4",children:[i&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Re,{htmlFor:"firstName",children:"Prénom"}),s.jsx(Ge,{id:"firstName",...D.register("firstName"),autoComplete:"given-name"}),D.formState.errors.firstName&&s.jsx("span",{className:"text-red-500 text-xs",children:D.formState.errors.firstName.message})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Re,{htmlFor:"lastName",children:"Nom"}),s.jsx(Ge,{id:"lastName",...D.register("lastName"),autoComplete:"family-name"}),D.formState.errors.lastName&&s.jsx("span",{className:"text-red-500 text-xs",children:D.formState.errors.lastName.message})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Re,{htmlFor:"email",children:"Email universitaire"}),s.jsxs("div",{className:"relative",children:[s.jsx(vs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10",...i?D.register("email"):F.register("email")})]}),(i?D.formState.errors.email:F.formState.errors.email)&&s.jsx("p",{className:"text-sm text-destructive",children:(K=i?D.formState.errors.email:F.formState.errors.email)==null?void 0:K.message}),i&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoyé à cette adresse"})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Re,{htmlFor:"university",children:"Université"}),s.jsxs(tn,{onValueChange:z=>D.setValue("university",z),value:D.watch("university"),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Sélectionnez votre université"})}),s.jsx(Gt,{children:vT.map(z=>s.jsx(Ke,{value:z,children:z},z))})]}),D.watch("university")==="Autre université"&&s.jsx(Ge,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...D.register("otherUniversity"),className:"mt-2"}),D.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.university.message}),D.watch("university")==="Autre université"&&D.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Re,{htmlFor:"fieldOfStudy",children:"Filière"}),s.jsxs(tn,{onValueChange:z=>D.setValue("fieldOfStudy",z),value:D.watch("fieldOfStudy"),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Filière"})}),s.jsx(Gt,{children:xT.map(z=>s.jsx(Ke,{value:z,children:z},z))})]}),D.watch("fieldOfStudy")==="Autre"&&s.jsx(Ge,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...D.register("otherFieldOfStudy"),className:"mt-2"}),D.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.fieldOfStudy.message}),D.watch("fieldOfStudy")==="Autre"&&D.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Re,{htmlFor:"graduationYear",children:"Année de diplôme"}),s.jsxs(tn,{onValueChange:z=>D.setValue("graduationYear",z),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Année"})}),s.jsx(Gt,{children:Array.from({length:8},(z,B)=>2024+B).map(z=>s.jsx(Ke,{value:z.toString(),children:z},z))})]}),D.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.graduationYear.message})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Re,{htmlFor:"password",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Oc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{id:"password",type:o?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",...i?D.register("password"):F.register("password")}),s.jsx(J,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-1/2 transform -translate-y-1/2 h-full px-3",onClick:()=>c(!o),children:o?s.jsx(FG,{className:"w-4 h-4"}):s.jsx(Ad,{className:"w-4 h-4"})})]}),(i?D.formState.errors.password:F.formState.errors.password)&&s.jsx("p",{className:"text-sm text-destructive",children:(A=i?D.formState.errors.password:F.formState.errors.password)==null?void 0:A.message})]}),i&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Re,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Oc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{id:"confirmPassword",type:o?"text":"password",placeholder:"••••••••",className:"pl-10",...D.register("confirmPassword")})]}),D.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.confirmPassword.message})]}),s.jsxs(J,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",disabled:u,children:[u?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):null,i?"Créer le compte et envoyer l'email":"Se connecter"]})]}),s.jsx("div",{className:"w-full",children:s.jsx(J,{variant:"link",onClick:()=>a(!i),disabled:u,className:"w-full flex justify-center items-center text-center break-words px-1",children:i?"Déjà un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})}),i&&s.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En créant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptées."})]})]}),s.jsx(Rle,{open:I,loading:q,email:N,onResend:async()=>{R(!0);try{t&&await G0(t)}finally{R(!1)}},onCheck:async()=>{R(!0);try{t&&(await xf(t),t.emailVerified&&U(!0))}finally{R(!1)}},onClose:()=>{O(!1),U(!1),k("/")},verified:V})]})},pi=({children:t})=>{const{currentUser:e}=mn(),n=mo();return e?s.jsx(s.Fragment,{children:t}):s.jsx(a9,{to:"/auth",state:{from:n},replace:!0})},c6=({cart:t,total:e,showCheckoutButton:n=!0})=>{const r=cr(),i=e,a=0,o=0,c=i+a-o,u=d=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d);return s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(_l,{className:"w-5 h-5"}),"Récapitulatif de commande"]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Articles (",t.reduce((d,f)=>d+f.quantity,0),")"]}),s.jsx("span",{children:u(i)})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(jy,{className:"w-4 h-4"}),"Livraison"]}),s.jsx("span",{className:"text-green-600 font-medium",children:"Gratuite"})]}),o>0,s.jsx(Zs,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Total"}),s.jsx("span",{className:"font-bold text-lg",children:u(c)})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"* TVA incluse"}),n&&s.jsxs(J,{onClick:()=>r("/checkout"),className:"w-full mt-4 bg-gradient-to-r from-primary to-secondary",disabled:t.length===0,children:[s.jsx(Vn,{className:"mr-2 h-4 w-4"}),"Procéder au paiement",s.jsx(Ji,{className:"ml-2 h-4 w-4"})]})]})})]})},Vle=()=>{const{currentUser:t}=mn(),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:i,cartTotal:a}=hh(),o=cr(),[c,u]=x.useState(""),[d,f]=x.useState(!1),p=(N,b)=>{if(!(b<1)){if(b>10){xe.error("Maximum 10 articles par produit");return}n(N,b)}},g=N=>{r(N),xe.success("Article retiré du panier")},_=()=>{c.trim()&&(f(!0),setTimeout(()=>{c.toLowerCase()==="etudiant10"?xe.success("Code promo appliqué : 10% de réduction"):xe.error("Code promo invalide ou expiré"),f(!1)},1e3))};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(J,{variant:"ghost",onClick:()=>o(-1),className:"-ml-4",children:[s.jsx(pc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(_l,{className:"w-8 h-8"}),"Mon Panier"]}),e.length>0&&s.jsxs(J,{variant:"outline",onClick:i,className:"text-destructive hover:text-destructive",children:[s.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Vider le panier"]})]})]}),e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(_l,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre panier est vide"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'articles à votre panier."}),s.jsx(J,{asChild:!0,children:s.jsxs(Ue,{to:"/products",children:[s.jsx(xc,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Articles (",e.reduce((N,b)=>N+b.quantity,0),")"]}),s.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>o("/products"),children:[s.jsx(xc,{className:"w-4 h-4 mr-2"}),"Continuer mes achats"]})]})}),s.jsx(me,{children:s.jsx("div",{className:"space-y-4",children:e.map(N=>s.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[N.image?s.jsx("img",{src:N.image,alt:N.name,className:"w-20 h-20 object-cover rounded"}):s.jsx("div",{className:"w-20 h-20 bg-muted rounded flex items-center justify-center",children:s.jsx(xc,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:N.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:N.seller}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(J,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-r-none",onClick:()=>p(N.id,N.quantity-1),disabled:N.quantity<=1,children:s.jsx(tM,{className:"h-3 w-3"})}),s.jsx(Ge,{type:"number",value:N.quantity,onChange:b=>{const S=parseInt(b.target.value);isNaN(S)||p(N.id,S)},className:"h-8 w-12 rounded-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),s.jsx(J,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-l-none",onClick:()=>p(N.id,N.quantity+1),disabled:N.quantity>=10,children:s.jsx(vc,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(N.price*N.quantity)}),s.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>g(N.id),className:"text-destructive hover:text-destructive mt-2",children:[s.jsx(Ka,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})]},N.id))})})]}),s.jsx(fe,{className:"mt-6",children:s.jsxs(me,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(bm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{placeholder:"Code promo",value:c,onChange:N=>u(N.target.value),className:"pl-10"})]}),s.jsx(J,{onClick:_,disabled:!c.trim()||d,children:d?s.jsxs(s.Fragment,{children:[s.jsx(so,{className:"w-4 h-4 mr-2 animate-spin"}),"Application..."]}):"Appliquer"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Essayez le code "ETUDIANT10" pour 10% de réduction'})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(c6,{cart:e,total:a,showCheckoutButton:!0}),!t&&s.jsxs($t,{className:"border-orange-200 bg-orange-50",children:[s.jsx(In,{className:"h-4 w-4 text-orange-600"}),s.jsx(Bt,{className:"text-orange-800",children:"Vous devez être connecté pour finaliser votre commande."})]})]})]})]})},Ig=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},vS=dh((t,e)=>({orders:[],loading:!1,fetchUserOrders:async n=>{if(n)try{t({loading:!0});const r=_n(Vt($e,"orders"),Xn("userId","==",n),ei(100)),i=await Fn(r),a=[];i.forEach(o=>{const c=o.data();a.push({id:o.id,...c,createdAt:Ig(c.createdAt),updatedAt:Ig(c.updatedAt)})}),a.sort((o,c)=>c.createdAt.getTime()-o.createdAt.getTime()),t({orders:a,loading:!1})}catch(r){console.error("Error fetching orders:",r),xe.error("Erreur lors du chargement des commandes"),t({loading:!1})}},getOrderById:async n=>{try{const r=await Is(yt($e,"orders",n));if(r.exists()){const i=r.data();return{id:r.id,...i,createdAt:Ig(i.createdAt),updatedAt:Ig(i.updatedAt)}}return null}catch(r){return console.error("Error getting order:",r),xe.error("Erreur lors du chargement de la commande"),null}},createOrder:async n=>{try{const r=Math.random().toString(36).substring(2,8).toUpperCase(),i={...n,securityCode:r,createdAt:sr(),updatedAt:sr()},a=await xl(Vt($e,"orders"),i),o={id:a.id,...n,createdAt:new Date,updatedAt:new Date};return t(c=>({orders:[o,...c.orders]})),xe.success("Commande créée avec succès !"),a.id}catch(r){throw console.error("Error creating order:",r),xe.error("Erreur lors de la création de la commande"),r}},updateOrderStatus:async(n,r,i)=>{try{const a={status:r,updatedAt:sr()};i&&(a.notes=i),await yn(yt($e,"orders",n),a),t(o=>({orders:o.orders.map(c=>c.id===n?{...c,status:r,notes:i||c.notes,updatedAt:new Date}:c)})),xe.success(`Statut de la commande mis à jour : ${r}`)}catch(a){console.error("Error updating order status:",a),xe.error("Erreur lors de la mise à jour du statut")}},cancelOrder:async(n,r)=>{try{await yn(yt($e,"orders",n),{status:"cancelled",notes:r,updatedAt:sr()}),t(i=>({orders:i.orders.map(a=>a.id===n?{...a,status:"cancelled",notes:r,updatedAt:new Date}:a)})),xe.success("Commande annulée")}catch(i){console.error("Error cancelling order:",i),xe.error("Erreur lors de l'annulation de la commande")}}})),zle=()=>{const{currentUser:t,userProfile:e}=mn(),n=cr(),r=mo(),{cart:i,cartTotal:a,clearCart:o}=hh(),{createOrder:c}=vS(),[u,d]=x.useState("shipping"),[f,p]=x.useState(!1),[g,_]=x.useState(null),[N,b]=x.useState({}),[S,w]=x.useState({fullName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:"",city:"",postalCode:"",country:"France",university:(e==null?void 0:e.university)||"",saveInfo:!0}),[y,E]=x.useState({}),[I,O]=x.useState(!1);x.useEffect(()=>{var F;i.length===0&&!((F=r.state)!=null&&F.directCheckout)&&(n("/cart"),xe.error("Votre panier est vide"))},[i,n,r]);const q=()=>{const F={};return S.fullName||(F.fullName="Nom complet requis"),S.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S.email)||(F.email="Format d'email invalide"):F.email="Email requis",S.phone||(F.phone="Téléphone requis"),S.address||(F.address="Adresse requise"),S.city||(F.city="Ville requise"),S.postalCode||(F.postalCode="Code postal requis"),E(F),Object.keys(F).length===0},R=F=>{F.preventDefault(),q()&&(d("payment"),window.scrollTo(0,0))},V=(F,D)=>{_(F),b(D),F==="card"&&D.stripePaymentId&&(d("review"),window.scrollTo(0,0))},U=()=>{if(!g){xe.error("Veuillez sélectionner un mode de paiement");return}d("review"),window.scrollTo(0,0)},k=async()=>{if(!t){n("/auth");return}if(!I){xe.error("Veuillez accepter les conditions générales");return}p(!0);try{const F={userId:t.uid,items:i,total:a,shipping:S,payment:{method:g,details:N,transactionId:N.stripePaymentId},status:g==="card"?"processing":"pending"},D=await c(F);o(),n(`/order-confirmation/${D}`)}catch(F){console.error("Error placing order:",F),xe.error("Erreur lors de la création de la commande")}finally{p(!1)}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(J,{variant:"ghost",onClick:()=>n(-1),className:"-ml-4",children:[s.jsx(pc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Finaliser votre commande"}),s.jsxs("div",{className:"flex items-center mt-6",children:[s.jsxs("div",{className:`flex items-center ${u==="shipping"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="shipping"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 font-medium",children:"Livraison"})]}),s.jsx(Ji,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${u==="payment"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="payment"||u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 font-medium",children:"Paiement"})]}),s.jsx(Ji,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${u==="review"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 font-medium",children:"Vérification"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u==="shipping"&&s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(jy,{className:"w-5 h-5"}),"Informations de livraison"]}),s.jsx(Ct,{children:"Entrez vos coordonnées pour la livraison"})]}),s.jsx(me,{children:s.jsxs("form",{onSubmit:R,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(Re,{htmlFor:"fullName",className:"flex items-center gap-1",children:[s.jsx(Jr,{className:"w-4 h-4"}),"Nom complet *"]}),s.jsx(Ge,{id:"fullName",value:S.fullName,onChange:F=>w({...S,fullName:F.target.value}),className:y.fullName?"border-red-500":""}),y.fullName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.fullName})]}),s.jsxs("div",{children:[s.jsxs(Re,{htmlFor:"email",className:"flex items-center gap-1",children:[s.jsx(vs,{className:"w-4 h-4"}),"Email *"]}),s.jsx(Ge,{id:"email",type:"email",value:S.email,onChange:F=>w({...S,email:F.target.value}),className:y.email?"border-red-500":""}),y.email&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.email})]}),s.jsxs("div",{children:[s.jsxs(Re,{htmlFor:"phone",className:"flex items-center gap-1",children:[s.jsx(ih,{className:"w-4 h-4"}),"Téléphone *"]}),s.jsx(Ge,{id:"phone",value:S.phone,onChange:F=>w({...S,phone:F.target.value}),className:y.phone?"border-red-500":""}),y.phone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.phone})]}),s.jsxs("div",{children:[s.jsxs(Re,{htmlFor:"university",className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Université"]}),s.jsx(Ge,{id:"university",value:S.university,onChange:F=>w({...S,university:F.target.value})})]})]}),s.jsxs("div",{children:[s.jsxs(Re,{htmlFor:"address",className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Adresse *"]}),s.jsx(Ge,{id:"address",value:S.address,onChange:F=>w({...S,address:F.target.value}),className:y.address?"border-red-500":""}),y.address&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.address})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs(Re,{htmlFor:"city",className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Ville *"]}),s.jsx(Ge,{id:"city",value:S.city,onChange:F=>w({...S,city:F.target.value}),className:y.city?"border-red-500":""}),y.city&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.city})]}),s.jsxs("div",{children:[s.jsxs(Re,{htmlFor:"postalCode",className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Code postal *"]}),s.jsx(Ge,{id:"postalCode",value:S.postalCode,onChange:F=>w({...S,postalCode:F.target.value}),className:y.postalCode?"border-red-500":""}),y.postalCode&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.postalCode})]}),s.jsxs("div",{children:[s.jsxs(Re,{htmlFor:"country",className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Pays *"]}),s.jsx(Ge,{id:"country",value:S.country,onChange:F=>w({...S,country:F.target.value}),disabled:!0})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[s.jsx(Nx,{id:"saveInfo",checked:S.saveInfo,onCheckedChange:F=>w({...S,saveInfo:F})}),s.jsx(Re,{htmlFor:"saveInfo",children:"Sauvegarder ces informations pour mes prochaines commandes"})]}),s.jsx("div",{className:"pt-4 flex justify-end",children:s.jsxs(J,{type:"submit",className:"w-full md:w-auto",children:["Continuer vers le paiement",s.jsx(Ji,{className:"ml-2 h-4 w-4"})]})})]})})]}),u==="payment"&&s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-5 h-5"}),"Méthode de paiement"]}),s.jsx(Ct,{children:"Choisissez votre mode de paiement préféré"})]}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(h3,{amount:a,currency:"EUR",onMethodSelect:V,selectedMethod:g}),s.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[s.jsxs(J,{variant:"outline",onClick:()=>d("shipping"),children:[s.jsx(pc,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsxs(J,{onClick:U,disabled:!g||g==="card"&&!N.stripePaymentId,children:["Vérifier la commande",s.jsx(Ji,{className:"ml-2 h-4 w-4"})]})]})]})})]}),u==="review"&&s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Pt,{className:"w-5 h-5"}),"Vérification de la commande"]}),s.jsx(Ct,{children:"Vérifiez les détails de votre commande avant de confirmer"})]}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Informations de livraison"}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>d("shipping"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsx("p",{className:"font-medium",children:S.fullName}),s.jsx("p",{children:S.address}),s.jsxs("p",{children:[S.postalCode," ",S.city,", ",S.country]}),s.jsx("p",{children:S.email}),s.jsx("p",{children:S.phone})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Méthode de paiement"}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>d("payment"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsxs("p",{className:"font-medium",children:[g==="card"&&"Carte bancaire",g==="paypal"&&"PayPal",g==="transfer"&&"Virement bancaire",g==="cash"&&"Paiement à la livraison",g==="lydia"&&"Lydia"]}),g==="card"&&N.stripePaymentId&&s.jsxs("p",{className:"text-green-600 text-sm",children:[s.jsx(Pt,{className:"w-3 h-3 inline mr-1"}),"Paiement autorisé"]}),g==="paypal"&&N.paypalEmail&&s.jsx("p",{children:N.paypalEmail}),g==="lydia"&&N.lydiaPhone&&s.jsx("p",{children:N.lydiaPhone})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",i.length,")"]}),s.jsx("div",{className:"space-y-3",children:i.map(F=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[F.image&&s.jsx("img",{src:F.image,alt:F.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:F.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",F.quantity]})]}),s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(F.price*F.quantity)})]},F.id))})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(Nx,{id:"terms",checked:I,onCheckedChange:F=>O(F)}),s.jsxs("div",{children:[s.jsx(Re,{htmlFor:"terms",className:"font-medium",children:"J'accepte les conditions générales de vente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En passant commande, vous acceptez nos conditions générales de vente et notre politique de confidentialité."})]})]})}),s.jsxs("div",{className:"flex justify-between pt-4",children:[s.jsxs(J,{variant:"outline",onClick:()=>d("payment"),children:[s.jsx(pc,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsx(J,{onClick:k,disabled:f||!I,className:"bg-gradient-to-r from-primary to-secondary",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Oc,{className:"mr-2 h-4 w-4"}),"Confirmer la commande"]})})]})]})})]})]}),s.jsxs("div",{children:[s.jsx(c6,{cart:i,total:a,showCheckoutButton:!1}),s.jsxs($t,{className:"mt-4 border-blue-200 bg-blue-50",children:[s.jsx(zt,{className:"h-4 w-4 text-blue-600"}),s.jsxs(Bt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Paiement sécurisé :"})," Toutes vos informations sont cryptées et sécurisées."]})]}),s.jsx(fe,{className:"mt-4",children:s.jsx(me,{className:"pt-6",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(yl,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Besoin d'aide ?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre équipe est disponible 7j/7 pour vous aider avec votre commande."}),s.jsx(J,{variant:"link",className:"p-0 h-auto text-sm",children:"Contacter le support"})]})]})})})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6",children:[s.jsx(_l,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour finaliser votre achat"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder au processus de paiement"}),s.jsx(J,{onClick:()=>n("/auth"),children:"Se connecter"})]})})})},Ule=()=>{const{currentUser:t}=mn(),{orders:e,fetchUserOrders:n,loading:r}=vS(),i=cr(),[a,o]=x.useState(""),[c,u]=x.useState("all"),[d,f]=x.useState("date-desc"),[p,g]=x.useState("all");x.useEffect(()=>{t&&n(t.uid)},[t,n]);const _=()=>e.filter(w=>{const y=!a||w.id.toLowerCase().includes(a.toLowerCase()),E=c==="all"||w.status===c;let I=!0;if(p!=="all"){const O=new Date(w.createdAt),q=new Date;if(p==="last-30-days"){const R=new Date;R.setDate(q.getDate()-30),I=O>=R}else if(p==="last-6-months"){const R=new Date;R.setMonth(q.getMonth()-6),I=O>=R}}return y&&E&&I}).sort((w,y)=>d==="date-desc"?new Date(y.createdAt).getTime()-new Date(w.createdAt).getTime():d==="date-asc"?new Date(w.createdAt).getTime()-new Date(y.createdAt).getTime():d==="total-desc"?y.total-w.total:d==="total-asc"?w.total-y.total:0),N=w=>{switch(w){case"pending":return s.jsxs(at,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[s.jsx(Un,{className:"w-3 h-3 mr-1"}),"En attente"]});case"processing":return s.jsxs(at,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(vn,{className:"w-3 h-3 mr-1"}),"En traitement"]});case"shipped":return s.jsxs(at,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[s.jsx(jy,{className:"w-3 h-3 mr-1"}),"Expédiée"]});case"delivered":return s.jsxs(at,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(Pt,{className:"w-3 h-3 mr-1"}),"Livrée"]});case"cancelled":return s.jsxs(at,{className:"bg-red-100 text-red-800 border-red-200",children:[s.jsx(Id,{className:"w-3 h-3 mr-1"}),"Annulée"]});default:return s.jsx(at,{children:w})}},b=w=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(w),S=()=>{const w={user:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),date:new Date().toISOString(),orders:e.map(O=>({id:O.id,date:O.createdAt,status:O.status,total:O.total,items:O.items.length}))},y=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),E=URL.createObjectURL(y),I=document.createElement("a");I.href=E,I.download=`commandes-${new Date().toISOString().slice(0,10)}.json`,I.click(),URL.revokeObjectURL(E)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(vn,{className:"w-8 h-8"}),"Mes Commandes"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Suivez et gérez toutes vos commandes"})]}),s.jsxs(J,{variant:"outline",onClick:S,className:"flex items-center gap-2",children:[s.jsx(ti,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{placeholder:"Rechercher par numéro de commande...",value:a,onChange:w=>o(w.target.value),className:"pl-10"})]}),s.jsxs(tn,{value:c,onValueChange:u,children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{placeholder:"Statut"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"all",children:"Tous les statuts"}),s.jsx(Ke,{value:"pending",children:"En attente"}),s.jsx(Ke,{value:"processing",children:"En traitement"}),s.jsx(Ke,{value:"shipped",children:"Expédiée"}),s.jsx(Ke,{value:"delivered",children:"Livrée"}),s.jsx(Ke,{value:"cancelled",children:"Annulée"})]})]}),s.jsxs(tn,{value:p,onValueChange:g,children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{placeholder:"Période"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"all",children:"Toutes les périodes"}),s.jsx(Ke,{value:"last-30-days",children:"30 derniers jours"}),s.jsx(Ke,{value:"last-6-months",children:"6 derniers mois"})]})]}),s.jsxs(tn,{value:d,onValueChange:f,children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{placeholder:"Trier par"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"date-desc",children:"Date (récent → ancien)"}),s.jsx(Ke,{value:"date-asc",children:"Date (ancien → récent)"}),s.jsx(Ke,{value:"total-desc",children:"Prix (élevé → bas)"}),s.jsx(Ke,{value:"total-asc",children:"Prix (bas → élevé)"})]})]})]})})}),s.jsxs(tu,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-4",children:[s.jsx(on,{value:"all",children:"Toutes"}),s.jsx(on,{value:"active",children:"En cours"}),s.jsx(on,{value:"completed",children:"Terminées"}),s.jsx(on,{value:"cancelled",children:"Annulées"})]}),s.jsx(ln,{value:"all",className:"space-y-4",children:r?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((w,y)=>s.jsx(fe,{className:"animate-pulse",children:s.jsxs(me,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between mb-4",children:[s.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/6"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},y))}):_().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande trouvée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:e.length===0?"Vous n'avez pas encore passé de commande.":"Aucune commande ne correspond à vos critères de recherche."}),s.jsx(J,{asChild:!0,children:s.jsxs(Ue,{to:"/listings",children:[s.jsx(xc,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsx("div",{className:"space-y-4",children:_().map(w=>s.jsx(fe,{className:"hover:shadow-md transition-shadow",children:s.jsxs(me,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),N(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Xs,{className:"w-3 h-3"}),or(new Date(w.createdAt),"dd MMMM yyyy",{locale:Dr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:b(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(J,{asChild:!0,children:s.jsxs(Ue,{to:`/order/${w.id}`,children:["Détails",s.jsx(Ji,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,E)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(vn,{className:"w-6 h-6 text-muted-foreground"})})},E)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(ln,{value:"active",className:"space-y-4",children:_().filter(w=>["pending","processing","shipped"].includes(w.status)).length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Un,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande en cours"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes en cours de traitement."})]}):s.jsx("div",{className:"space-y-4",children:_().filter(w=>["pending","processing","shipped"].includes(w.status)).map(w=>s.jsx(fe,{className:"hover:shadow-md transition-shadow",children:s.jsxs(me,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),N(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Xs,{className:"w-3 h-3"}),or(new Date(w.createdAt),"dd MMMM yyyy",{locale:Dr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:b(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(J,{asChild:!0,children:s.jsxs(Ue,{to:`/order/${w.id}`,children:["Détails",s.jsx(Ji,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,E)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(vn,{className:"w-6 h-6 text-muted-foreground"})})},E)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(ln,{value:"completed",className:"space-y-4",children:_().filter(w=>w.status==="delivered").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Pt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande terminée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore de commandes livrées."})]}):s.jsx("div",{className:"space-y-4",children:_().filter(w=>w.status==="delivered").map(w=>s.jsx(fe,{className:"hover:shadow-md transition-shadow",children:s.jsxs(me,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),N(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Xs,{className:"w-3 h-3"}),or(new Date(w.createdAt),"dd MMMM yyyy",{locale:Dr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:b(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(J,{asChild:!0,children:s.jsxs(Ue,{to:`/order/${w.id}`,children:["Détails",s.jsx(Ji,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,E)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(vn,{className:"w-6 h-6 text-muted-foreground"})})},E)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(ln,{value:"cancelled",className:"space-y-4",children:_().filter(w=>w.status==="cancelled").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Id,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande annulée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes annulées."})]}):s.jsx("div",{className:"space-y-4",children:_().filter(w=>w.status==="cancelled").map(w=>s.jsx(fe,{className:"hover:shadow-md transition-shadow",children:s.jsxs(me,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),N(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Xs,{className:"w-3 h-3"}),or(new Date(w.createdAt),"dd MMMM yyyy",{locale:Dr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:b(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(J,{asChild:!0,children:s.jsxs(Ue,{to:`/order/${w.id}`,children:["Détails",s.jsx(Ji,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,E)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(vn,{className:"w-6 h-6 text-muted-foreground"})})},E)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6",children:[s.jsx(vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos commandes"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder à l'historique de vos commandes"}),s.jsx(J,{onClick:()=>i("/auth"),children:"Se connecter"})]})})})},$le=()=>{var f,p;const{orderId:t}=z1(),{getOrderById:e}=vS(),[n,r]=x.useState(null),[i,a]=x.useState(!0);x.useEffect(()=>{(async()=>{if(t)try{a(!0);const _=await e(t);r(_)}catch(_){console.error("Error loading order:",_)}finally{a(!1)}})()},[t,e]);const o=g=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(g),c=g=>({card:"Carte bancaire",paypal:"PayPal",transfer:"Virement bancaire",cash:"Paiement à la livraison"})[g]||g,u=()=>{const g=new Date,_=new Date(g);return _.setDate(g.getDate()+3),or(_,"EEEE d MMMM",{locale:Dr})},d=()=>{navigator.clipboard.writeText(t||""),xe.success("Numéro de commande copié !")};return i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-3xl mx-auto",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mx-auto"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),s.jsx("div",{className:"h-32 bg-muted rounded"}),s.jsx("div",{className:"h-64 bg-muted rounded"})]})})}):n?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Pt,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Commande confirmée !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre commande. Vous recevrez un email de confirmation à ",n.shipping.email,"."]})]}),s.jsxs(fe,{className:"mb-6",children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(vn,{className:"w-5 h-5"}),"Détails de la commande"]}),s.jsx(at,{className:"bg-green-100 text-green-800 border-green-200",children:n.status==="pending"?"En attente":n.status==="processing"?"En traitement":n.status==="shipped"?"Expédiée":n.status==="delivered"?"Livrée":"Confirmée"})]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Numéro de commande"}),s.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t,s.jsx(J,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:d,children:s.jsx(Z4,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),s.jsx("p",{className:"font-medium",children:or(new Date(n.createdAt),"dd/MM/yyyy")})]})]}),s.jsx(Zs,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Articles"}),s.jsx("div",{className:"space-y-3",children:n.items.map((g,_)=>s.jsxs("div",{className:"flex items-center gap-3",children:[g.image&&s.jsx("img",{src:g.image,alt:g.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:g.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",g.quantity]})]}),s.jsx("p",{className:"font-semibold",children:o(g.price*g.quantity)})]},_))})]}),s.jsx(Zs,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),s.jsx("span",{children:o(n.total)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Livraison"}),s.jsx("span",{className:"text-green-600",children:"Gratuite"})]}),s.jsxs("div",{className:"flex justify-between font-bold",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:o(n.total)})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-base",children:[s.jsx(jy,{className:"w-4 h-4"}),"Livraison"]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:n.shipping.fullName}),s.jsx("p",{children:n.shipping.address}),s.jsxs("p",{children:[n.shipping.postalCode," ",n.shipping.city,", ",n.shipping.country]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.shipping.phone}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Xs,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Livraison estimée: ",u()]})]})})]})})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-base",children:[s.jsx(Vn,{className:"w-4 h-4"}),"Paiement"]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:c(n.payment.method)}),n.payment.method==="card"&&((f=n.payment.details)==null?void 0:f.cardNumber)&&s.jsxs("p",{children:["Carte se terminant par ",n.payment.details.cardNumber.slice(-4)]}),n.payment.method==="paypal"&&((p=n.payment.details)==null?void 0:p.paypalEmail)&&s.jsx("p",{children:n.payment.details.paypalEmail}),n.payment.method==="transfer"&&s.jsxs($t,{className:"mt-2",children:[s.jsx(In,{className:"h-4 w-4"}),s.jsx(Bt,{children:"Veuillez effectuer le virement dans les 48h pour valider votre commande."})]}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Un,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Statut: ",n.status==="pending"?"En attente":"Confirmé"]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(J,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(Ue,{to:"/orders",children:[s.jsx(vn,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsxs(J,{variant:"outline",className:"flex-1",children:[s.jsx(ti,{className:"mr-2 h-4 w-4"}),"Télécharger la facture"]}),s.jsx(J,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(Ue,{to:"/listings",children:[s.jsx(xc,{className:"mr-2 h-4 w-4"}),"Continuer mes achats"]})})]}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-2",children:"Besoin d'aide avec votre commande ?"}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsxs(J,{variant:"link",className:"text-primary",children:[s.jsx(vs,{className:"mr-2 h-4 w-4"}),"Contacter le support"]}),s.jsxs(J,{variant:"link",className:"text-primary",children:[s.jsx(wm,{className:"mr-2 h-4 w-4"}),"FAQ"]})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6",children:[s.jsx(In,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Commande introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Nous n'avons pas pu trouver les détails de cette commande."}),s.jsx(J,{asChild:!0,children:s.jsx(Ue,{to:"/orders",children:"Voir mes commandes"})})]})})})},Ble=({id:t,name:e,description:n,price:r,currency:i,image:a,mode:o})=>{const{currentUser:c}=mn(),{addToCart:u}=hh(),d=cr(),f=(_,N)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:N}).format(_),p=()=>{if(!c){xe.error("Veuillez vous connecter pour ajouter au panier"),d("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t})},g=()=>{if(!c){xe.error("Veuillez vous connecter pour acheter"),d("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t}),d("/checkout")};return s.jsxs(fe,{className:"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-md dark:shadow-lg border border-gray-200 dark:border-gray-800 overflow-hidden transition-all hover:shadow-lg",children:[s.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a?s.jsx("img",{src:a,alt:e,className:"w-full h-full object-cover transition-transform hover:scale-105"}):s.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:s.jsx(AG,{className:"w-12 h-12 text-muted-foreground"})}),s.jsx(at,{className:"absolute top-2 right-2 bg-primary",children:o==="subscription"?"Abonnement":"Achat unique"})]}),s.jsxs(Qe,{children:[s.jsx(Je,{children:e}),s.jsx(Ct,{children:n})]}),s.jsx(me,{children:s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[f(r,i),o==="subscription"&&s.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/mois"})]})}),s.jsxs(iD,{className:"flex gap-2",children:[s.jsxs(J,{variant:"outline",className:"flex-1",onClick:p,children:[s.jsx(_l,{className:"w-4 h-4 mr-2"}),"Ajouter"]}),s.jsx(J,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",onClick:g,children:"Acheter"})]})]})},Db=[{id:"prod_ST3q24zsLbS28p",name:"Bicyclette",description:"Vélo",priceId:"price_1RY7iN2XLhzYQhT9ErigqaGg",price:10,currency:"EUR",mode:"payment",image:"https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"}],qle=t=>Db.find(e=>e.priceId===t),Wle="pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p";t3(Wle);async function Hle(){return{customer_id:"cus_mock123",subscription_id:"sub_mock123",subscription_status:"active",price_id:"price_1RY7iN2XLhzYQhT9ErigqaGg",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"}}async function Gle(){return[{order_id:"ord_mock123",checkout_session_id:"cs_mock123",payment_intent_id:"pi_mock123",amount_subtotal:1e3,amount_total:1e3,currency:"eur",payment_status:"paid",order_status:"completed",order_date:new Date().toISOString()}]}const Kle=()=>{const{getCartItemCount:t}=hh(),e=cr(),n=t();return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(J,{variant:"ghost",onClick:()=>e(-1),className:"-ml-4",children:[s.jsx(pc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(xc,{className:"w-8 h-8"}),"Boutique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez nos produits et services"})]}),n>0&&s.jsxs(J,{onClick:()=>e("/cart"),className:"flex items-center gap-2",children:[s.jsx(_l,{className:"w-4 h-4"}),"Panier (",n,")"]})]})]}),!1,s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Db.map(r=>s.jsx(Ble,{id:r.id,name:r.name,description:r.description,price:r.price,currency:r.currency,image:r.image,mode:r.mode},r.id))}),Db.length===0&&s.jsx(fe,{className:"text-center py-12",children:s.jsxs(me,{className:"pt-6",children:[s.jsx(vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit disponible"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Revenez bientôt pour découvrir nos nouveaux produits."})]})})]})},Zle=()=>{const[t]=U1(),e=cr(),{currentUser:n}=mn(),{clearCart:r}=hh(),[i,a]=x.useState(!0),[o,c]=x.useState(null),[u,d]=x.useState(null),[f,p]=x.useState(null),g=t.get("session_id"),_=t.get("type")==="subscription";x.useEffect(()=>{r();async function b(){if(n)try{if(a(!0),_){const w=await Hle();c(w)}else{const y=(await Gle())[0];d(y)}}catch(w){console.error("Error fetching checkout result:",w),p("Impossible de charger les détails de votre achat")}finally{a(!1)}}const S=setTimeout(()=>{b()},2e3);return()=>clearTimeout(S)},[n,_,g,r]);const N=()=>{if(_&&(o!=null&&o.price_id)){const b=qle(o.price_id);return b?b.name:"Abonnement"}else if(u)return"Commande";return"Achat"};return n?i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto text-center",children:[s.jsx(Zr,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement de votre paiement..."}),s.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous confirmons votre transaction."})]})}):f?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs($t,{className:"border-red-200 bg-red-50",children:[s.jsx(In,{className:"h-4 w-4 text-red-600"}),s.jsx(Bt,{className:"text-red-800",children:f})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(J,{asChild:!0,children:s.jsx(Ue,{to:"/",children:"Retour à l'accueil"})})})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Pt,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Merci pour votre achat !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Votre ",_?"abonnement":"commande"," a été confirmé",_?"":"e","."]})]}),s.jsxs(fe,{className:"mb-6",children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[_?s.jsx(Vn,{className:"w-5 h-5"}):s.jsx(vn,{className:"w-5 h-5"}),N()]})}),s.jsx(me,{children:s.jsx("div",{className:"space-y-4",children:_&&o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:o.subscription_status==="active"?"Actif":o.subscription_status==="trialing"?"Période d'essai":o.subscription_status})]}),o.current_period_end&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Prochain renouvellement:"}),s.jsx("span",{className:"font-medium",children:new Date(o.current_period_end*1e3).toLocaleDateString("fr-FR")})]}),o.payment_method_brand&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Méthode de paiement:"}),s.jsxs("span",{className:"font-medium",children:[o.payment_method_brand.toUpperCase()," •••• ",o.payment_method_last4]})]})]}):u?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Numéro de commande:"}),s.jsx("span",{className:"font-medium",children:u.order_id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date:"}),s.jsx("span",{className:"font-medium",children:new Date(u.order_date).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant:"}),s.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:u.currency}).format(u.amount_total/100)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:u.order_status==="completed"?"Complété":u.order_status==="pending"?"En attente":u.order_status})]})]}):s.jsx("p",{children:"Merci pour votre achat. Vous recevrez un email de confirmation."})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs($t,{className:"bg-blue-50 border-blue-200",children:[s.jsx(Xs,{className:"h-4 w-4 text-blue-600"}),s.jsx(Bt,{className:"text-blue-800",children:_?"Vous pouvez gérer votre abonnement à tout moment depuis votre compte.":"Vous recevrez un email de confirmation avec les détails de votre commande."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(J,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(Ue,{to:"/orders",children:[s.jsx(vn,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsx(J,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(Ue,{to:"/products",children:[s.jsx(xc,{className:"mr-2 h-4 w-4"}),"Continuer mes achats",s.jsx(wm,{className:"ml-2 h-4 w-4"})]})})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs($t,{className:"border-orange-200 bg-orange-50",children:[s.jsx(In,{className:"h-4 w-4 text-orange-600"}),s.jsx(Bt,{className:"text-orange-800",children:"Vous devez être connecté pour voir les détails de votre achat."})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(J,{onClick:()=>e("/auth"),children:"Se connecter"})})]})})};delete gh.Icon.Default.prototype._getIconUrl;gh.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});function Yle({position:t,onChange:e}){function n(){return UN({click(r){e([r.latlng.lat,r.latlng.lng])}}),t?s.jsx(BN,{position:t}):null}return s.jsxs($N,{center:t||[48.8584,2.2945],zoom:15,style:{height:300,width:"100%"},children:[s.jsx(qN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),s.jsx(n,{})]})}const Qle=[{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"},{value:"donations",label:"Dons"},{value:"exchange",label:"Troc"}],Xle=()=>{const{id:t}=z1(),e=cr(),{currentUser:n}=mn(),{fetchListingById:r,updateListing:i,currentListing:a,loading:o}=hp(),[c,u]=x.useState({title:"",description:"",price:"",images:[]}),[d,f]=x.useState([]),[p,g]=x.useState(!1),[_,N]=x.useState(null),[b,S]=x.useState(""),[w,y]=x.useState([]),[E,I]=x.useState(""),[O,q]=x.useState(""),[R,V]=x.useState(null),[U,k]=x.useState(!1);x.useEffect(()=>{t&&r(t)},[t,r]),x.useEffect(()=>{var A;a&&(u({title:a.title||"",description:a.description||"",price:((A=a.price)==null?void 0:A.toString())||"",images:a.images||[]}),S(a.category||""),y(a.tags||[]),q(a.meetingLocation||""),a.coordinates&&V(a.coordinates))},[a]);const F=A=>{u({...c,[A.target.name]:A.target.value})},D=A=>{if(!A.target.files)return;const z=Array.from(A.target.files);f(B=>[...B,...z])},P=A=>{u({...c,images:c.images.filter((z,B)=>B!==A)})},H=A=>{f(d.filter((z,B)=>B!==A))},te=()=>{E.trim()&&!w.includes(E.trim())&&w.length<5&&(y([...w,E.trim()]),I(""))},Z=A=>{y(w.filter(z=>z!==A))},K=async A=>{if(A.preventDefault(),!(!t||!n)){g(!0);try{let z=[];d.length>0&&(z=await Promise.all(d.map(X=>Jle(X,n.uid))));const B=[...c.images,...z];await i(t,{...c,price:parseFloat(c.price),images:B,category:b,tags:w,meetingLocation:O,coordinates:R}),e(`/listing/${t}`)}catch{N("Erreur lors de la mise à jour de l'annonce")}finally{g(!1)}}};return o?s.jsx("div",{children:"Chargement..."}):a?_?s.jsx("div",{className:"text-red-500",children:_}):s.jsx("form",{onSubmit:K,className:"max-w-lg mx-auto mt-10",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[s.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Modifier mon annonce"}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Re,{htmlFor:"title",className:"block mb-1 text-gray-700",children:"Titre"}),s.jsx(Ge,{id:"title",name:"title",value:c.title,onChange:F,placeholder:"Titre",className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Re,{htmlFor:"description",className:"block mb-1 text-gray-700",children:"Description"}),s.jsx(ri,{id:"description",name:"description",value:c.description,onChange:F,placeholder:"Description",className:"w-full",rows:4})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Re,{htmlFor:"price",className:"block mb-1 text-gray-700",children:"Prix (€)"}),s.jsx(Ge,{id:"price",name:"price",value:c.price,onChange:F,placeholder:"Prix",type:"number",min:0,className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Re,{htmlFor:"category",className:"block mb-1 text-gray-700",children:"Catégorie"}),s.jsxs("select",{id:"category",name:"category",value:b,onChange:A=>S(A.target.value),className:"w-full border rounded px-3 py-2 bg-gray-50",required:!0,children:[s.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),Qle.map(A=>s.jsx("option",{value:A.value,children:A.label},A.value))]})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Re,{htmlFor:"meetingLocation",className:"block mb-1 text-gray-700",children:"Point de rencontre"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(Ge,{id:"meetingLocation",name:"meetingLocation",value:O,onChange:A=>q(A.target.value),placeholder:"Ex: Bibliothèque universitaire, Hall principal...",className:"flex-1"}),s.jsx(J,{type:"button",variant:"outline",onClick:async()=>{if(!navigator.geolocation)return alert("Géolocalisation non supportée");k(!0),navigator.geolocation.getCurrentPosition(async A=>{const{latitude:z,longitude:B}=A.coords;V([z,B]);const X=await yT(z,B);q(X),k(!1)},()=>k(!1))},disabled:U,children:"📍"})]}),s.jsx("div",{className:"mt-3",children:s.jsx(Yle,{position:R,onChange:async A=>{V(A);const z=await yT(A[0],A[1]);q(z)}})})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Re,{className:"block mb-1 text-gray-700",children:"Tags (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:w.map(A=>s.jsxs("span",{className:"bg-gray-100 rounded px-2 py-1 flex items-center gap-1 text-sm",children:[A,s.jsx(J,{type:"button",size:"icon",variant:"ghost",className:"w-4 h-4 p-0",onClick:()=>Z(A),children:"×"})]},A))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ge,{placeholder:"Ajouter un tag...",value:E,onChange:A=>I(A.target.value),onKeyDown:A=>A.key==="Enter"&&(A.preventDefault(),te()),className:"flex-1"}),s.jsx(J,{type:"button",onClick:te,disabled:!E.trim()||w.length>=5,children:"Ajouter"})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx(Re,{className:"block mb-1 text-gray-700",children:"Photos"}),s.jsxs("div",{className:"flex flex-wrap gap-4 mt-2",children:[c.images.map((A,z)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:A,alt:`photo-${z}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx(J,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>P(z),children:"×"})]},z)),d.map((A,z)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:URL.createObjectURL(A),alt:`new-photo-${z}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx(J,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>H(z),children:"×"})]},z)),s.jsxs("label",{className:"w-20 h-20 flex items-center justify-center border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition",children:[s.jsx("span",{className:"text-2xl text-gray-400",children:"+"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:D,disabled:p})]})]})]}),s.jsx(J,{type:"submit",className:"w-full",disabled:p,children:p?"Enregistrement...":"Enregistrer les modifications"}),_&&s.jsx("div",{className:"text-red-500 text-center mt-2",children:_})]})}):s.jsx("div",{className:"text-red-500",children:"Annonce introuvable"})};async function Jle(t,e){const n=Date.now(),r=`listings/${e}/${n}_${t.name}`,i=Qj(Jj,r),a=await Zj(i,t);return await Yj(a.ref)}async function yT(t,e){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${t}&lon=${e}`)).json()).display_name}const u6="Q3E5Y56YF4",ece="5f0e550b9ede2710482ad296ad3b3cae",tce="ff26b6f0fa03bc6384566ea42dfe0ab4",d6="study-market-jobs",nce="study-market-services",rce="student-housing",sce="study-market-materiel";async function ice(t){try{return(await(await fetch(`https://remotive.com/api/remote-jobs?search=${encodeURIComponent(t)}`)).json()).jobs.map(r=>({id:r.id.toString(),title:r.title,company:r.company_name,company_logo:r.company_logo_url,location:r.candidate_required_location,description:r.description,url:r.url,source:"Remotive",publication_date:r.publication_date,contract_type:r.job_type,remote:r.remote,tags:r.tags}))}catch(e){return console.error("Erreur Remotive:",e),[]}}async function ace(t){try{return((await(await fetch("https://jooble.org/api/167d4120-b9bf-4c78-b340-83d55ef013fc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keywords:t,location:"France"})})).json()).jobs||[]).map((r,i)=>({id:r.id||`jooble-${i}`,title:r.title,company:r.company,location:r.location,description:r.snippet,url:r.link,source:"Jooble",publication_date:r.date}))}catch(e){return console.error("Erreur Jooble:",e),[]}}async function oce(t){try{return((await(await fetch(`https://jsearch.p.rapidapi.com/search?query=${encodeURIComponent(t)}&location=France`,{headers:{"X-RapidAPI-Key":"685dd8c263msh87410947d828a2ep1772d3jsn329584c927b7","X-RapidAPI-Host":"jsearch.p.rapidapi.com"}})).json()).data||[]).map(r=>({id:r.job_id,title:r.job_title,company:r.employer_name,company_logo:r.employer_logo,location:r.job_city||r.job_country,description:r.job_description,url:r.job_apply_link,source:"JSearch",publication_date:r.job_posted_at_datetime_utc,contract_type:r.job_employment_type,remote:r.job_is_remote,tags:r.job_tags}))}catch(e){return console.error("Erreur JSearch:",e),[]}}async function lce(t){try{const e=`https://api.adzuna.com/v1/api/jobs/fr/search/1?app_id=f9025803&app_key=70805f677e7ed58080609ad89bd18a47&results_per_page=20&what=${encodeURIComponent(t)}&where=France`;return((await(await fetch(e)).json()).results||[]).map(i=>{var o,c;const a=i;return{id:a.id,title:a.title,company:(o=a.company)==null?void 0:o.display_name,location:(c=a.location)==null?void 0:c.display_name,description:a.description,url:a.redirect_url,source:"Adzuna",publication_date:a.created,contract_type:a.contract_type}})}catch(e){return console.error("Erreur Adzuna:",e),[]}}async function cce(t){try{const e=`https://www.themuse.com/api/public/jobs?location=France&page=1&category=${encodeURIComponent(t)}`;return((await(await fetch(e)).json()).results||[]).map(i=>{var o,c;const a=i;return{id:a.id,title:a.name,company:(o=a.company)==null?void 0:o.name,location:Array.isArray(a.locations)?a.locations.map(u=>u.name).join(", "):"",description:a.contents,url:(c=a.refs)==null?void 0:c.landing_page,source:"The Muse",publication_date:a.publication_date}})}catch(e){return console.error("Erreur The Muse:",e),[]}}async function uce(t){try{const e=`https://linkedin-job-search-api.p.rapidapi.com/active-jb-7d?limit=10&offset=0&location_filter=France&keywords=${encodeURIComponent(t)}`;return((await(await fetch(e,{headers:{"X-RapidAPI-Key":"685dd8c263msh87410947d828a2ep1772d3jsn329584c927b7","X-RapidAPI-Host":"linkedin-job-search-api.p.rapidapi.com"}})).json()).jobs||[]).map((i,a)=>{const o=i;return{id:o.job_id||`linkedin-${a}`,title:o.title,company:o.company,location:o.location,description:o.description,url:o.job_url,source:"LinkedIn",publication_date:o.posted_date}})}catch(e){return console.error("Erreur LinkedIn:",e),[]}}async function h6(t){try{console.log("🔍 Recherche Algolia avec query:",t||"*");const e=u6,n=tce,i=`https://${e}-dsn.algolia.net/1/indexes/${d6}/query`,a={query:t||"*",hitsPerPage:1e3,page:0,attributesToRetrieve:["*"],typoTolerance:!0,ignorePlurals:!0,removeStopWords:!0,analyticsTags:["job-search"]};console.log("🧪 Recherche dans l'index: study-market-jobs"),console.log("🔗 URL:",i),console.log("📊 Récupération de toutes les offres disponibles...");let o=[],c=0;const u=10;for(;c<u;){const f={...a,page:c},p=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json","X-Algolia-API-Key":n,"X-Algolia-Application-Id":e},body:JSON.stringify(f)});if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const g=await p.json(),_=g.hits||[],N=g.nbHits||0;if(console.log(`📄 Page ${c+1}: ${_.length} offres récupérées`),_.length===0){console.log("✅ Plus d'offres à récupérer");break}if(o=o.concat(_),o.length>=N){console.log(`✅ Toutes les ${N} offres récupérées`);break}c++}return console.log(`📊 Total: ${o.length} offres récupérées depuis l'index "study-market-jobs"`),o.length===0?(console.log("ℹ️ Aucun résultat trouvé dans l'index study-market-jobs"),[]):(console.log("🔍 Structure du premier hit:",JSON.stringify(o[0],null,2)),o.map((f,p)=>{const g=f,_=()=>g.objectID||g.id||g.job_id||g._id||`algolia-${p}`,N=()=>g.title||g.job_title||g.position||g.name||"Titre non spécifié",b=()=>g.company||g.company_name||g.employer||g.employer_name||"Entreprise non spécifiée",S=()=>g.location||g.city||g.country||g.address||"France",w=()=>g.description||g.summary||g.job_description||g.content||"",y=()=>g.url||g.apply_url||g.job_url||g.link||"#",E=()=>g.publication_date||g.date||g.posted_date||g.created_at||"",I=()=>g.contract_type||g.job_type||g.employment_type||g.type||"";return{id:_(),title:N(),company:b(),company_logo:g.company_logo||g.logo||"",location:S(),description:w(),url:y(),source:"Algolia",publication_date:E(),contract_type:I(),remote:!!(g.remote||g.is_remote||g.remote_ok),tags:Array.isArray(g.tags)?g.tags:Array.isArray(g.skills)?g.skills:[]}}))}catch(e){throw console.error("❌ Erreur complète Algolia:",e),new Error(`Erreur Algolia: ${e instanceof Error?e.message:"Erreur inconnue"}`)}}async function dce(t){console.log("🚀 Début de la recherche pour:",t);const e=[{name:"Remotive",func:ice},{name:"Jooble",func:ace},{name:"JSearch",func:oce},{name:"Adzuna",func:lce},{name:"The Muse",func:cce},{name:"LinkedIn",func:uce},{name:"Algolia",func:h6}],r=(await Promise.allSettled(e.map(async a=>{console.log(`🔄 Appel API ${a.name}...`);try{const o=await a.func(t);return console.log(`✅ ${a.name}: ${o.length} offres récupérées`),o}catch(o){return console.error(`❌ ${a.name} a échoué:`,o),[]}}))).filter(a=>a.status==="fulfilled").flatMap(a=>a.value||[]);console.log(`📋 Total final: ${r.length} offres de ${e.length} sources`);const i=r.reduce((a,o)=>(a[o.source||"unknown"]=(a[o.source||"unknown"]||0)+1,a),{});return console.log("📊 Résumé par source:",i),r}function xS(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}async function hce(t,e){await xl(Vt($e,"users",t,"favoriteJobs"),xS(e))}async function _T(t){const e=_n(Vt($e,"users",t,"favoriteJobs"));return(await Fn(e)).docs.map(r=>({...r.data(),id:r.id}))}async function fce(t,e){const n=_4($e),r=Vt($e,"users",t,"searchedJobs");e.forEach(i=>{const a=yt(r);n.set(a,xS(i))}),await n.commit()}async function mce(t,e,n){const r=a4(),i=yt(r,"jobOffersCache",t),a=new Date().toISOString(),o=Array.isArray(n)?n.map(c=>xS(c)):[];await lc(i,{[e]:{jobs:o,fetchedAt:a}},{merge:!0})}const pce=({image:t,title:e,subtitle:n,location:r,date:i,isFavorite:a=!1,onFavoriteToggle:o,url:c,companyName:u})=>{const d=()=>{c&&window.open(c,"_blank","noopener,noreferrer")},f=g=>{g.stopPropagation(),o&&o()},p=g=>{g.stopPropagation()};return s.jsxs("div",{className:"job-card group relative flex flex-col rounded-[12px] bg-white dark:bg-gray-900 shadow-md dark:shadow-lg overflow-hidden transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-2xl min-h-[320px] md:min-h-[420px] font-sans cursor-pointer",style:{minHeight:320},onClick:d,children:[s.jsxs("div",{className:"card-image relative w-full aspect-[16/9] overflow-hidden",style:{minHeight:160,maxHeight:180},children:[s.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover",style:{objectFit:"cover",minHeight:160,maxHeight:180},onError:g=>{const _=g.target;_.src.endsWith("/assets/job-default.jpg")||(_.src="/assets/job-default.jpg")}}),s.jsx("div",{className:"overlay absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/70 pointer-events-none"}),s.jsxs("div",{className:"absolute top-2 right-2 md:top-3 md:right-3 flex flex-col gap-1 md:gap-2 z-10",children:[s.jsx("button",{className:"bg-white/90 dark:bg-gray-800/90 rounded-full p-1.5 md:p-2 shadow hover:bg-blue-100 dark:hover:bg-blue-900 transition","aria-label":a?"Retirer des favoris":"Ajouter aux favoris",onClick:f,children:s.jsx(Or,{className:a?"fill-red-500 text-red-500":"text-blue-400 dark:text-blue-300",strokeWidth:2,size:18,"aria-hidden":"true"})}),s.jsx("button",{className:"bg-white/90 dark:bg-gray-800/90 rounded-full p-1.5 md:p-2 shadow hover:bg-blue-100 dark:hover:bg-blue-900 transition","aria-label":"Partager",onClick:p,children:s.jsx(by,{className:"text-blue-400 dark:text-blue-300",strokeWidth:2,size:18,"aria-hidden":"true"})})]})]}),u&&s.jsxs("div",{className:"flex items-center gap-1 md:gap-2 mb-2 px-3 md:px-5 pt-3",children:[s.jsx(H4,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-400 dark:text-blue-300","aria-hidden":"true"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-medium text-xs md:text-sm",children:u})]}),s.jsxs("div",{className:"card-content flex-1 flex flex-col px-3 md:px-5 py-2 text-left bg-white/80 dark:bg-gray-900/80 backdrop-blur-md justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"job-title font-bold text-base md:text-lg mb-1 leading-tight break-words font-sans text-gray-900 dark:text-gray-100",children:e}),n&&s.jsx("div",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2 bg-blue-50 dark:bg-blue-900 px-2 py-1 rounded",children:n})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-4 w-full",children:[s.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-300 text-sm gap-2",children:[s.jsx(Mr,{className:"w-4 h-4 text-blue-400 dark:text-blue-300","aria-hidden":"true"}),s.jsx("span",{children:r})]}),i&&s.jsxs("div",{className:"flex items-center text-xs text-gray-400 ml-auto",children:[s.jsx(Xs,{className:"w-4 h-4 mr-1","aria-hidden":"true"}),i]})]})]})]})},gce="3eFVqLX19mBYTUVCMxhpPH156xmJ8K5ccP5TBwH5R2h90pHMmgb638AS";async function vce(t){const e=await fetch(`https://api.pexels.com/v1/search?query=${encodeURIComponent(t)}&per_page=1`,{headers:{Authorization:gce}});if(!e.ok)return null;const n=await e.json();return n.photos&&n.photos.length>0?n.photos[0].src.large:null}function xce(t){const e=typeof t=="string"?new Date(t):t,r=Math.floor((new Date().getTime()-e.getTime())/(1e3*60*60*24));return r===0?"aujourd'hui":r===1?"hier":r===2?"avant-hier":e.toLocaleDateString("fr-FR")}const uf=12;function yce(t){var c,u;const e={marketing:"marketing, digital, social media, office",developpeur:"developer, code, computer, laptop, programming, team",developer:"developer, code, computer, laptop, programming, team",business:"business, meeting, office, people, suit",stage:"internship, young people, learning, teamwork",alternance:"apprenticeship, student, learning, office",cdi:"career, professional, office, team",remote:"remote work, home office, laptop",design:"design, creative, digital, graphics",data:"data, analytics, charts, computer",sales:"sales, business, meeting, handshake"};let n="professional, office, business";const r=((c=t.title)==null?void 0:c.toLowerCase())||"",i=((u=t.contract_type)==null?void 0:u.toLowerCase())||"";for(const d in e)if(r.includes(d)||i.includes(d)){n=e[d];break}const a=t.location?`, ${t.location}`:"",o=t.company?`, ${t.company}`:"";return`${t.title}${o}${a}, ${n}`.trim()}const _ce=()=>{const[t,e]=x.useState(""),[n,r]=x.useState([]),[i,a]=x.useState(!1),{currentUser:o}=mn(),[c,u]=x.useState([]),[d,f]=x.useState(1),[p,g]=x.useState({}),[_,N]=x.useState(null),[b,S]=x.useState(!1),[w,y]=x.useState(null);x.useEffect(()=>{(async()=>{if(o)try{const F=await _T(o.uid);u(F)}catch(F){console.error("Erreur lors du chargement des favoris:",F)}})()},[o]),x.useEffect(()=>{(async()=>{try{console.log("🧪 Test de connexion Algolia...");const F=await h6("");console.log("✅ Test Algolia réussi:",F.length,"offres trouvées"),F.length===0&&console.log("⚠️ Aucune offre dans l'index Algolia")}catch(F){console.error("❌ Erreur test Algolia:",F)}})()},[]),x.useEffect(()=>{if(n.length===0)return;(async()=>{const F={},D={},P=(d-1)*uf,H=P+uf,te=n.slice(P,H);for(const Z of te){const K=yce(Z),A=Z.id+Z.source;if(p[A]){F[A]=p[A];continue}if(D[K]){F[A]=D[K];continue}try{const z=await vce(K);z?(D[K]=z,F[A]=z):F[A]="/assets/job-default.jpg"}catch(z){console.warn("Erreur chargement image pour",Z.title,z),F[A]="/assets/job-default.jpg"}}g(Z=>({...Z,...F}))})()},[n,d,p]),x.useEffect(()=>{E("")},[]);const E=async k=>{const F=k??t;a(!0),N(null),S(!0);try{console.log("🔍 Recherche avec query:",F);const D=await dce(F);console.log("📊 Résultats par source:");const P=D.reduce((H,te)=>(H[te.source||"unknown"]=(H[te.source||"unknown"]||0)+1,H),{});if(console.table(P),r(D),f(1),o&&D.length>0)try{await fce(o.uid,D);const H={};for(const te of D){const Z=te.source||"unknown";H[Z]||(H[Z]=[]),H[Z].push(te)}for(const te in H)await mce(o.uid,te,H[te])}catch(H){console.error("Erreur Firestore:",H)}D.length===0&&N("Aucune offre trouvée pour cette recherche. Essayez avec des mots-clés différents.")}catch(D){console.error("❌ Erreur lors de la recherche:",D),N("Erreur lors de la recherche : "+(D instanceof Error?D.message:String(D)))}finally{a(!1)}},I=async k=>{if(!o){alert("Vous devez être connecté pour ajouter aux favoris.");return}try{if(c.some(D=>D.id===k.id&&D.source===k.source)){alert("Cette offre est déjà dans vos favoris !");return}await hce(o.uid,k),u(D=>[...D,k]),alert("Offre ajoutée aux favoris !")}catch(F){console.error("Erreur ajout favori:",F),alert("Erreur lors de l'ajout aux favoris.")}},O=async()=>{if(!o){alert("Vous devez être connecté pour voir vos favoris.");return}try{const k=await _T(o.uid);u(k),console.log("Favoris chargés:",k.length)}catch(k){console.error("Erreur chargement favoris:",k),alert("Erreur lors du chargement des favoris.")}},q=w?n.filter(k=>(k.source||"unknown")===w):n,R=Math.ceil(q.length/uf),V=q.slice((d-1)*uf,d*uf),U=n.reduce((k,F)=>{const D=F.source||"unknown";return k[D]=(k[D]||0)+1,k},{});return s.jsxs("div",{className:"max-w-7xl mx-auto px-1 sm:px-6 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Recherche d'emploi"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-2 mb-4",children:[s.jsx("input",{className:"border rounded px-3 py-2 flex-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",value:t,onChange:k=>e(k.target.value),placeholder:"Ex: développeur, marketing, designer...",onKeyPress:k=>k.key==="Enter"&&E()}),s.jsx("button",{className:"bg-blue-600 dark:bg-blue-700 text-white px-4 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-800 transition disabled:opacity-50",onClick:()=>E(),disabled:i,children:i?"Recherche...":"Tout rechercher"}),s.jsxs("button",{onClick:O,className:"bg-yellow-500 dark:bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-600 dark:hover:bg-yellow-700 transition",children:["Mes favoris (",c.length,")"]})]}),b&&s.jsxs("div",{className:"mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow",children:[s.jsxs("div",{className:"text-gray-600 dark:text-gray-300 font-medium mb-2",children:[n.length," offres trouvées"]}),Object.keys(U).length>0&&s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsxs("button",{className:`text-xs px-2 py-1 rounded ${w?"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-blue-200 text-blue-900 font-bold"}`,onClick:()=>{y(null),f(1)},children:["Tous: ",n.length]}),Object.entries(U).map(([k,F])=>s.jsxs("button",{className:`text-xs px-2 py-1 rounded ${w===k?"bg-blue-500 text-white font-bold":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,onClick:()=>{y(k),f(1)},children:[k,": ",F]},k))]})]}),V.length>0&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-6 mb-6",children:V.map(k=>s.jsx(pce,{image:p[k.id+k.source]||"/assets/job-default.jpg",companyName:k.company||void 0,title:k.title||"Titre non spécifié",subtitle:k.contract_type,location:k.location||"Non spécifié",date:k.publication_date?xce(k.publication_date):void 0,isFavorite:c.some(F=>F.id===k.id&&F.source===k.source),onFavoriteToggle:()=>I(k),url:k.url},`${k.id}-${k.source}`))}),R>1&&s.jsxs("div",{className:"flex justify-center items-center gap-1 md:gap-2 mb-6 overflow-x-auto px-1 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[s.jsx("button",{className:"px-3 py-1 rounded border bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 disabled:opacity-50",onClick:()=>f(d-1),disabled:d===1,children:"Précédent"}),Array.from({length:R}).map((k,F)=>{const D=F+1,P=D===d;return D===1||D===2||D===R||D===R-1||Math.abs(D-d)<=1?s.jsx("button",{className:`px-3 py-1 rounded border ${P?"bg-blue-600 text-white font-bold":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700"} transition`,onClick:()=>f(D),disabled:P,children:D},D):D===3&&d>5||D===R-2&&d<R-4?s.jsx("span",{children:"..."},D):null}),s.jsx("button",{className:"px-3 py-1 rounded border bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 disabled:opacity-50",onClick:()=>f(d+1),disabled:d===R,children:"Suivant"})]}),c.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsxs("h2",{className:"font-bold text-xl mb-4 text-gray-900 dark:text-gray-100",children:["Mes offres favorites (",c.length,")"]}),s.jsx("div",{className:"space-y-4",children:c.map(k=>s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 rounded-lg shadow p-4 border border-yellow-200 dark:border-yellow-700",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:k.title}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[k.company," — ",k.location]}),s.jsxs("div",{className:"flex gap-2",children:[k.contract_type&&s.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 px-2 py-1 rounded",children:k.contract_type}),s.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:k.source})]})]}),s.jsx("div",{className:"flex gap-2 ml-4",children:s.jsx("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 dark:bg-blue-700 text-white px-3 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-800 transition text-sm",children:"Voir l'offre"})})]})},`fav-${k.id}-${k.source}`))})]}),n.length===0&&!i&&b&&s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8 bg-white dark:bg-gray-800 rounded-lg p-8",children:[s.jsx("p",{className:"text-lg mb-2",children:"Aucune offre trouvée"}),s.jsx("p",{className:"text-sm",children:"Essayez avec des mots-clés différents ou vérifiez votre configuration API."})]}),!b&&s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8 bg-white dark:bg-gray-800 rounded-lg p-8",children:[s.jsx("p",{className:"text-lg mb-2",children:"Commencez votre recherche"}),s.jsx("p",{className:"text-sm",children:`Saisissez des mots-clés et cliquez sur "Rechercher" pour trouver des offres d'emploi.`})]}),_&&s.jsx("div",{className:"text-center text-red-500 dark:text-red-400 mt-8 bg-red-50 dark:bg-red-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:s.jsx("p",{className:"font-semibold text-base",children:_})}),i&&s.jsx("div",{className:"text-center mt-8",children:s.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-current mr-3"}),"Recherche en cours..."]})})]})};var wce="Expected a function",wT=NaN,bce="[object Symbol]",jce=/^\s+|\s+$/g,Nce=/^[-+]0x[0-9a-f]+$/i,Sce=/^0b[01]+$/i,Ece=/^0o[0-7]+$/i,Cce=parseInt,kce=typeof Vu=="object"&&Vu&&Vu.Object===Object&&Vu,Tce=typeof self=="object"&&self&&self.Object===Object&&self,Pce=kce||Tce||Function("return this")(),Ice=Object.prototype,Ace=Ice.toString,Rce=Math.max,Mce=Math.min,P_=function(){return Pce.Date.now()};function Oce(t,e,n){var r,i,a,o,c,u,d=0,f=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(wce);e=bT(e)||0,Lb(n)&&(f=!!n.leading,p="maxWait"in n,a=p?Rce(bT(n.maxWait)||0,e):a,g="trailing"in n?!!n.trailing:g);function _(q){var R=r,V=i;return r=i=void 0,d=q,o=t.apply(V,R),o}function N(q){return d=q,c=setTimeout(w,e),f?_(q):o}function b(q){var R=q-u,V=q-d,U=e-R;return p?Mce(U,a-V):U}function S(q){var R=q-u,V=q-d;return u===void 0||R>=e||R<0||p&&V>=a}function w(){var q=P_();if(S(q))return y(q);c=setTimeout(w,b(q))}function y(q){return c=void 0,g&&r?_(q):(r=i=void 0,o)}function E(){c!==void 0&&clearTimeout(c),d=0,r=u=i=c=void 0}function I(){return c===void 0?o:y(P_())}function O(){var q=P_(),R=S(q);if(r=arguments,i=this,u=q,R){if(c===void 0)return N(u);if(p)return c=setTimeout(w,e),_(u)}return c===void 0&&(c=setTimeout(w,e)),o}return O.cancel=E,O.flush=I,O}function Lb(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Dce(t){return!!t&&typeof t=="object"}function Lce(t){return typeof t=="symbol"||Dce(t)&&Ace.call(t)==bce}function bT(t){if(typeof t=="number")return t;if(Lce(t))return wT;if(Lb(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Lb(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(jce,"");var n=Sce.test(t);return n||Ece.test(t)?Cce(t.slice(2),n?2:8):Nce.test(t)?wT:+t}var Fce=Oce;const Vce=El(Fce);var zce=typeof Element<"u",Uce=typeof Map=="function",$ce=typeof Set=="function",Bce=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function cv(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!cv(t[r],e[r]))return!1;return!0}var a;if(Uce&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;for(a=t.entries();!(r=a.next()).done;)if(!cv(r.value[1],e.get(r.value[0])))return!1;return!0}if($ce&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(Bce&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(zce&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&t.$$typeof)&&!cv(t[i[r]],e[i[r]]))return!1;return!0}return t!==t&&e!==e}var qce=function(e,n){try{return cv(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Wce=El(qce);var f6=x.createContext({onInternalStateUpdate:function(){},createHrefForState:function(){return"#"},onSearchForFacetValues:function(){},onSearchStateChange:function(){},onSearchParameters:function(){},store:{},widgetsManager:{},mainTargetedIndex:""}),Hce=f6.Consumer;f6.Provider;var m6=x.createContext(void 0),Gce=m6.Consumer;m6.Provider;function Fb(t){"@babel/helpers - typeof";return Fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fb(t)}var Kce=Object.prototype.hasOwnProperty,jT=function(e,n){if(e===n)return!0;var r=Object.keys(e),i=Object.keys(n);if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(!Kce.call(n,r[a])||e[r[a]]!==n[r[a]])return!1;return!0},Zce=function(e){return e.displayName||e.name||"UnknownComponent"};Promise.resolve();var Yce=function(e){return Fb(e)==="object"&&e!==null&&!Array.isArray(e)},Qce=function t(e){return Object.keys(e).forEach(function(n){var r=e[n];Yce(r)&&(Xce(r)?t(r):delete e[n])}),e};function Xce(t){return t&&Object.keys(t).length>0}var Jce=["contextValue"];function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}function Px(){return Px=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Px.apply(this,arguments)}function eue(t,e){if(t==null)return{};var n=tue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tue(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function NT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ST(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NT(Object(n),!0).forEach(function(r){Wr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p6(r.key),r)}}function sue(t,e,n){return e&&rue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function iue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vb(t,e)}function Vb(t,e){return Vb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Vb(t,e)}function aue(t){var e=lue();return function(){var r=Ix(t),i;if(e){var a=Ix(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return oue(this,i)}}function oue(t,e){if(e&&(Kd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return os(t)}function os(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ix(t){return Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ix(t)}function Wr(t,e,n){return e=p6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p6(t){var e=cue(t,"string");return Kd(e)==="symbol"?e:String(e)}function cue(t,e){if(Kd(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uue(t){if(!t.displayName)throw new Error("`createConnector` requires you to provide a `displayName` property.");var e=typeof t.getSearchParameters=="function"||typeof t.getMetadata=="function"||typeof t.transitionState=="function";return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=function(a){iue(c,a);var o=aue(c);function c(u){var d;return nue(this,c),d=o.call(this,u),Wr(os(d),"unsubscribe",void 0),Wr(os(d),"unregisterWidget",void 0),Wr(os(d),"cleanupTimerRef",null),Wr(os(d),"isUnmounting",!1),Wr(os(d),"state",{providedProps:d.getProvidedProps(d.props)}),Wr(os(d),"refine",function(){for(var f,p=arguments.length,g=new Array(p),_=0;_<p;_++)g[_]=arguments[_];d.props.contextValue.onInternalStateUpdate((f=t.refine).call.apply(f,[os(d),d.props,d.props.contextValue.store.getState().widgets].concat(g)))}),Wr(os(d),"createURL",function(){for(var f,p=arguments.length,g=new Array(p),_=0;_<p;_++)g[_]=arguments[_];return d.props.contextValue.createHrefForState((f=t.refine).call.apply(f,[os(d),d.props,d.props.contextValue.store.getState().widgets].concat(g)))}),Wr(os(d),"searchForFacetValues",function(){for(var f,p=arguments.length,g=new Array(p),_=0;_<p;_++)g[_]=arguments[_];d.props.contextValue.onSearchForFacetValues((f=t.searchForFacetValues).call.apply(f,[os(d),d.props,d.props.contextValue.store.getState().widgets].concat(g)))}),t.getSearchParameters&&d.props.contextValue.onSearchParameters(t.getSearchParameters.bind(os(d)),{ais:d.props.contextValue,multiIndexContext:d.props.indexContextValue},d.props,t.getMetadata&&t.getMetadata.bind(os(d)),t.displayName),d}return sue(c,[{key:"componentDidMount",value:function(){var d=this;this.cleanupTimerRef&&(clearTimeout(this.cleanupTimerRef),this.cleanupTimerRef=null),this.unsubscribe=this.props.contextValue.store.subscribe(function(){d.isUnmounting||d.setState({providedProps:d.getProvidedProps(d.props)})}),e&&(this.unregisterWidget=this.props.contextValue.widgetsManager.registerWidget(this))}},{key:"shouldComponentUpdate",value:function(d,f){if(typeof t.shouldComponentUpdate=="function")return t.shouldComponentUpdate.call(this,this.props,d,this.state,f);var p=jT(this.props,d);return this.state.providedProps===null||f.providedProps===null?this.state.providedProps===f.providedProps?!p:!0:!p||!jT(this.state.providedProps,f.providedProps)}},{key:"componentDidUpdate",value:function(d){Wce(d,this.props)||(this.setState({providedProps:this.getProvidedProps(this.props)}),e&&(this.props.contextValue.widgetsManager.update(),typeof t.transitionState=="function"&&this.props.contextValue.onSearchStateChange(t.transitionState.call(this,this.props,this.props.contextValue.store.getState().widgets,this.props.contextValue.store.getState().widgets))))}},{key:"componentWillUnmount",value:function(){var d=this;this.cleanupTimerRef=setTimeout(function(){if(d.isUnmounting=!0,d.unsubscribe&&d.unsubscribe(),d.unregisterWidget&&(d.unregisterWidget(),typeof t.cleanUp=="function")){var f=t.cleanUp.call(d,d.props,d.props.contextValue.store.getState().widgets);d.props.contextValue.store.setState(ST(ST({},d.props.contextValue.store.getState()),{},{widgets:f})),d.props.contextValue.onSearchStateChange(Qce(f))}})}},{key:"getProvidedProps",value:function(d){var f=this.props.contextValue.store.getState(),p=f.widgets,g=f.results,_=f.resultsFacetValues,N=f.searching,b=f.searchingForFacetValues,S=f.isSearchStalled,w=f.metadata,y=f.error,E={results:g,searching:N,searchingForFacetValues:b,isSearchStalled:S,error:y};return t.getProvidedProps.call(this,d,p,E,w,_)}},{key:"getSearchParameters",value:function(d){return typeof t.getSearchParameters=="function"?t.getSearchParameters.call(this,d,this.props,this.props.contextValue.store.getState().widgets):null}},{key:"getMetadata",value:function(d){return typeof t.getMetadata=="function"?t.getMetadata.call(this,this.props,d):{}}},{key:"transitionState",value:function(d,f){return typeof t.transitionState=="function"?t.transitionState.call(this,this.props,d,f):f}},{key:"render",value:function(){var d=this.props;d.contextValue;var f=eue(d,Jce),p=this.state.providedProps;if(p===null)return null;var g=typeof t.refine=="function"?{refine:this.refine,createURL:this.createURL}:{},_=typeof t.searchForFacetValues=="function"?{searchForItems:this.searchForFacetValues}:{};return Fe.createElement(n,Px({},f,p,g,_))}}]),c}(x.Component);return Wr(i,"displayName","".concat(t.displayName,"(").concat(Zce(n),")")),Wr(i,"$$type",t.$$type),Wr(i,"$$widgetType",r.$$widgetType),Wr(i,"propTypes",t.propTypes),Wr(i,"defaultProps",t.defaultProps),Wr(i,"_connectorDesc",t),i}}var due=function(e){return function(n,r){var i=uue(e)(n,r),a=function(c){return Fe.createElement(Hce,null,function(u){return Fe.createElement(Gce,null,function(d){return Fe.createElement(i,Px({contextValue:u,indexContextValue:d},c))})})};return a}};function hue(t){return mue(t)?t.multiIndexContext.targetedIndex:t.ais.mainTargetedIndex}function fue(t,e){if(t.results){if(t.results.hits)return t.results;var n=hue(e);if(t.results[n])return t.results[n]}return null}function mue(t){return t&&t.multiIndexContext}const pue=due({displayName:"AlgoliaStats",$$type:"ais.stats",getProvidedProps:function(e,n,r){var i=fue(r,{ais:e.contextValue,multiIndexContext:e.indexContextValue});return i?{areHitsSorted:i.appliedRelevancyStrictness!==void 0&&i.appliedRelevancyStrictness>0&&i.nbHits!==i.nbSortedHits,nbHits:i.nbHits,nbSortedHits:i.nbSortedHits,processingTimeMS:i.processingTimeMS}:null}}),I_={lokaviz:"Lokaviz",abele:"Abélé","location-etudiant":"Location Étudiant"},gue={lokaviz:"bg-green-500 text-white border-green-500",abele:"bg-blue-500 text-white border-blue-500","location-etudiant":"bg-red-500 text-white border-red-500"},vue={lokaviz:"bg-green-600",abele:"bg-blue-600","location-etudiant":"bg-red-600"},xue=["Résidence","Appartement","Studio","Chambre"],ET=[{key:"internet",label:"Internet",icon:"🌐"},{key:"laverie",label:"Laverie",icon:"🧺"},{key:"salle-sport",label:"Salle de sport",icon:"🏃"},{key:"parking",label:"Parking",icon:"🅿️"},{key:"securite",label:"Sécurité",icon:"🛡️"}],yue={internet:"internet",laverie:"laverie","salle-sport":"salle de sport",parking:"parking",securite:"sécurité"},_ue={internet:"🌐",laverie:"🧺","salle de sport":"🏃",parking:"🅿️",sécurité:"🛡️",fitness:"💪",cour:"🌳"};function wue(t){if(!t)return"";const[e,n]=t.split("-");return`${{"01":"Janvier","02":"Février","03":"Mars","04":"Avril","05":"Mai","06":"Juin","07":"Juillet","08":"Août","09":"Septembre",10:"Octobre",11:"Novembre",12:"Décembre"}[n]} ${e}`}function bue({onQuickFilter:t}){const n=[new Date().getHours()>18?"Proche transports":"Proche université","Internet inclus","Laverie","PMR","Coup de cœur"];return s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-center",children:[s.jsx("span",{className:"font-semibold text-blue-700",children:"Suggestions pour toi :"}),n.map(r=>s.jsx("button",{onClick:()=>t(r),className:"px-3 py-1 rounded-full font-semibold text-xs bg-blue-100 dark:bg-blue-900 dark:text-blue-200 ring-1 ring-inset ring-blue-300 dark:ring-blue-800 transition-all duration-150 hover:bg-blue-200 dark:hover:bg-blue-800 shadow",children:r},r))]})})}pue(({searchResults:t})=>s.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded",children:t?s.jsxs("div",{children:[s.jsxs("strong",{children:["Résultats: ",t.nbHits]}),' | Requête: "',t.query||"vide",'" | Temps: ',t.processingTimeMS,"ms"]}):s.jsx("div",{children:"Aucun résultat de recherche"})}));const jue=function(){var te,Z,K;const[e,n]=x.useState(""),[r,i]=x.useState([]),[a,o]=x.useState(!1),[c,u]=x.useState(1),[d,f]=x.useState({}),[p,g]=x.useState({sources:["lokaviz","abele","location-etudiant"],types:[],services:[],priceRange:{min:0,max:1500},location:"",situation:"",label:"",availability:"",hasPhoto:!1,pmr:!1,reference:""}),[_,N]=x.useState([]),[b,S]=x.useState(!1),w=x.useCallback(Vce((A,z,B)=>y(A,z,B),300),[]);x.useEffect(()=>{w(e,p,c)},[e,p,c]);const y=async(A,z,B)=>{o(!0);try{const X=[];if(z.sources.length>0){const be=z.sources.map(Ee=>`source:"${I_[Ee]}"`).join(" OR ");X.push(`(${be})`)}if(z.types.length>0){const be=z.types.map(Ee=>`types:"${Ee.toUpperCase()}"`).join(" OR ");X.push(`(${be})`)}if(z.services.length>0){const be=z.services.map(Ee=>`services:"${yue[Ee]}"`);X.push(...be)}(z.priceRange.min>0||z.priceRange.max<1500)&&X.push(`prix:${z.priceRange.min} TO ${z.priceRange.max}`),z.location&&X.push(`(adresse:${z.location} OR ville:${z.location} OR code_postal:${z.location})`),z.situation&&X.push(`situation:"${z.situation}"`),z.label&&X.push(`label:"${z.label}"`),z.availability&&X.push(`date_de_disponibilite >= ${z.availability}`),z.hasPhoto&&X.push("has_photo:true"),z.pmr&&X.push("pmr_accessible:true"),z.reference&&X.push(`reference:"${z.reference}"`);const de=X.join(" AND "),ve=await index.search(A,{filters:de,facets:["source","types","services","adresse"],maxValuesPerFacet:50,hitsPerPage:20,page:B-1});i(ve.hits),f(ve.facets),U(z)}catch{i([])}finally{o(!1)}},E=A=>{g(z=>({...z,sources:z.sources.includes(A)?z.sources.filter(B=>B!==A):[...z.sources,A]})),u(1)},I=A=>{g(z=>({...z,types:z.types.includes(A)?z.types.filter(B=>B!==A):[...z.types,A]})),u(1)},O=A=>{g(z=>({...z,services:z.services.includes(A)?z.services.filter(B=>B!==A):[...z.services,A]})),u(1)},q=(A,z)=>{g(B=>({...B,priceRange:{...B.priceRange,[A]:z}})),u(1)},R=()=>{g({sources:["lokaviz","abele","location-etudiant"],types:[],services:[],priceRange:{min:0,max:1500},location:"",situation:"",label:"",availability:"",hasPhoto:!1,pmr:!1,reference:""}),u(1)},V=(A,z)=>{g(B=>{const X=B[A];return Array.isArray(X)?{...B,[A]:X.filter(de=>de!==z)}:B}),u(1)},U=A=>{const z=[];A.sources.forEach(B=>z.push({type:"sources",value:B,label:I_[B]})),A.types.forEach(B=>z.push({type:"types",value:B,label:B})),A.services.forEach(B=>{var X;return z.push({type:"services",value:B,label:((X=ET.find(de=>de.key===B))==null?void 0:X.label)||B})}),(A.priceRange.min>0||A.priceRange.max<1500)&&z.push({type:"priceRange",value:"",label:`Prix: ${A.priceRange.min}€ - ${A.priceRange.max}€`}),N(z)},k=()=>{R()},F=()=>u(A=>Math.max(1,A-1)),D=()=>u(A=>A+1),P={lokaviz:((te=d==null?void 0:d.source)==null?void 0:te.Lokaviz)||0,abele:((Z=d==null?void 0:d.source)==null?void 0:Z.Abélé)||0,"location-etudiant":((K=d==null?void 0:d.source)==null?void 0:K["Location Étudiant"])||0},H=A=>{A==="Proche campus"||A==="Proche université"?g(z=>({...z,location:"campus"})):A==="Internet inclus"?g(z=>({...z,services:z.services.includes("internet")?z.services:[...z.services,"internet"]})):A==="Laverie"?g(z=>({...z,services:z.services.includes("laverie")?z.services:[...z.services,"laverie"]})):A==="PMR"&&g(z=>({...z,pmr:!0})),u(1)};return s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 min-h-screen pb-16",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row gap-8 px-2 md:px-6",children:[s.jsxs("aside",{className:"w-full md:w-72 md:sticky md:top-8 z-20 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-lg p-6 mb-4 md:mb-0 h-fit transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 md:hidden",children:[s.jsx("span",{className:"font-bold text-lg",children:"Filtres"}),s.jsx("button",{onClick:()=>S(!b),className:"text-blue-600 font-semibold",children:b?"Fermer":"Ouvrir"})]}),s.jsxs("div",{className:`space-y-6 ${b?"":"hidden md:block"}`,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Ville / Code postal"}),s.jsx("input",{type:"text",value:p.location,onChange:A=>g(z=>({...z,location:A.target.value})),placeholder:"Ex: Paris ou 75000",className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-400 transition"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Situation"}),s.jsxs("select",{value:p.situation,onChange:A=>g(z=>({...z,situation:A.target.value})),className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-400 transition",children:[s.jsx("option",{value:"",children:"Toutes"}),s.jsx("option",{value:"etudiant",children:"Étudiant"}),s.jsx("option",{value:"alternant",children:"Alternant"}),s.jsx("option",{value:"stagiaire",children:"Stagiaire"}),s.jsx("option",{value:"autre",children:"Autre"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Label"}),s.jsxs("select",{value:p.label,onChange:A=>g(z=>({...z,label:A.target.value})),className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-400 transition",children:[s.jsx("option",{value:"",children:"Tous"}),s.jsx("option",{value:"lokaviz",children:"Lokaviz"}),s.jsx("option",{value:"crous",children:"Crous"}),s.jsx("option",{value:"autre",children:"Autre"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Source"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["lokaviz","abele","location-etudiant"].map(A=>s.jsxs("button",{onClick:()=>E(A),className:`px-3 py-1 rounded-full border-2 flex items-center space-x-2 text-xs transition-all ${p.sources.includes(A)?gue[A]:"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-500"}`,children:[s.jsx("span",{children:I_[A]}),s.jsx("span",{className:`${vue[A]} text-white px-2 py-1 rounded-full text-xs font-bold`,children:P[A]})]},A))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Type"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:xue.map(A=>s.jsx("button",{onClick:()=>I(A),className:`px-3 py-1 rounded-full border-2 text-xs transition-all ${p.types.includes(A)?"bg-blue-600 text-white border-blue-600":"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-600 hover:text-blue-600"}`,children:A},A))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Équipements / Services"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ET.map(A=>s.jsxs("button",{onClick:()=>O(A.key),className:`px-3 py-1 rounded-full border-2 flex items-center space-x-1 text-xs transition-all ${p.services.includes(A.key)?"bg-blue-600 text-white border-blue-600":"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-600"}`,children:[s.jsx("span",{children:A.icon}),s.jsx("span",{children:A.label})]},A.key))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Loyer (€)"}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs("span",{className:"text-xs",children:[p.priceRange.min,"€"]}),s.jsx("input",{type:"range",min:0,max:1500,step:50,value:p.priceRange.min,onChange:A=>q("min",Number(A.target.value)),className:"w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer"}),s.jsx("input",{type:"range",min:0,max:1500,step:50,value:p.priceRange.max,onChange:A=>q("max",Number(A.target.value)),className:"w-full h-2 bg-blue-600 rounded-lg appearance-none cursor-pointer"}),s.jsxs("span",{className:"text-xs",children:[p.priceRange.max,"€"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Disponibilité"}),s.jsx("input",{type:"date",value:p.availability,onChange:A=>g(z=>({...z,availability:A.target.value})),className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-400 transition"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[s.jsx("input",{type:"checkbox",checked:p.hasPhoto,onChange:A=>g(z=>({...z,hasPhoto:A.target.checked})),className:"accent-blue-600"}),"Photo"]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[s.jsx("input",{type:"checkbox",checked:p.pmr,onChange:A=>g(z=>({...z,pmr:A.target.checked})),className:"accent-blue-600"}),"PMR"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Référence"}),s.jsx("input",{type:"text",value:p.reference,onChange:A=>g(z=>({...z,reference:A.target.value})),placeholder:"Référence annonce",className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-400 transition"})]}),s.jsx("button",{onClick:R,className:"w-full mt-2 py-2 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600 transition",children:"Effacer tous les filtres"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-center py-8",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Toutes les annonces"})}),s.jsx(bue,{onQuickFilter:H}),s.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mb-6",children:[s.jsx("button",{className:"px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-medium hover:bg-green-200",children:"Proche campus"}),s.jsx("button",{className:"px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-medium hover:bg-purple-200",children:"Internet inclus"}),s.jsx("button",{className:"px-3 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-medium hover:bg-yellow-200",children:"Laverie"}),s.jsx("button",{className:"px-3 py-1 rounded-full bg-pink-100 text-pink-700 text-xs font-medium hover:bg-pink-200",children:"PMR"}),s.jsx("button",{className:"px-3 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium hover:bg-red-200",children:"Coup de cœur"})]}),s.jsx("div",{className:"max-w-2xl mx-auto mb-8 px-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Rechercher un logement...",value:e,onChange:A=>n(A.target.value),className:"w-full px-6 py-4 text-lg border-2 border-gray-200 rounded-full shadow-sm focus:border-blue-500 focus:outline-none pr-16"}),s.jsx("button",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 p-2 bg-gray-100 rounded-full hover:bg-gray-200",children:"🔍"})]})}),s.jsx("div",{className:"max-w-6xl mx-auto px-4 mb-8",children:_.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-center",children:[_.map((A,z)=>s.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 px-3 py-2 rounded-full flex items-center space-x-2 shadow-sm",children:[s.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-white",children:A.label}),s.jsx("button",{onClick:()=>{A.type==="priceRange"?R():V(A.type,A.value)},className:"w-6 h-6 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-white rounded-full flex items-center justify-center text-base font-bold hover:bg-red-500 hover:text-white transition-colors border border-gray-400 dark:border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":`Retirer le filtre ${A.label}`,children:"×"})]},z)),s.jsx("button",{onClick:R,className:"px-4 py-2 bg-red-500 text-white rounded-full text-sm font-semibold hover:bg-red-600 transition shadow focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Effacer tout"})]})}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[a&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Recherche en cours..."})]}),!a&&r.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Essayez de modifier vos filtres ou votre recherche"}),s.jsx("button",{onClick:k,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Réinitialiser les filtres"})]}),!a&&r.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-6",children:s.jsxs("h2",{className:"text-xl font-semibold",children:[r.length," logement(s) trouvé(s)"]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(A=>{const z=String(A.source_normalized||"").toLowerCase(),B=z==="abele"||String(A.source).toLowerCase().includes("adele"),X=z==="lokaviz",de=z==="location-etudiant",ve=[];return B&&ve.push({label:"Adele",color:"bg-blue-500 text-white"}),X&&ve.push({label:"Lokaviz",color:"bg-green-500 text-white"}),de&&ve.push({label:"Location-Étudiant",color:"bg-red-500 text-white"}),(A.coup_de_coeur||A.recommande||A.note&&Number(A.note)>=4.5)&&ve.push({label:"Coup de cœur",color:"bg-pink-500 text-white"}),X&&(A.label_lokaviz||A.label_crous)&&ve.push({label:"Label Lokaviz",color:"bg-green-700 text-white"}),A.pmr_accessible&&ve.push({label:"PMR",color:"bg-yellow-500 text-white"}),Array.isArray(A.services)&&A.services.includes("internet")&&ve.push({label:"Internet inclus",color:"bg-blue-200 text-blue-800"}),Array.isArray(A.services)&&A.services.includes("laverie")&&ve.push({label:"Laverie",color:"bg-yellow-200 text-yellow-800"}),(String(A.adresse).toLowerCase().includes("université")||String(A.adresse).toLowerCase().includes("campus"))&&ve.push({label:"Proche campus",color:"bg-green-200 text-green-800"}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border dark:border-gray-700 hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1 hover:scale-[1.02] group",children:[s.jsxs("div",{className:"h-48 bg-gradient-to-br from-blue-100 to-blue-200 rounded-t-xl flex items-center justify-center overflow-hidden relative",children:[A.image?s.jsxs("picture",{children:[s.jsx("source",{srcSet:A.image.replace(/\.(jpg|png)$/i,".webp"),type:"image/webp"}),s.jsx("source",{srcSet:A.image.replace(/\.(jpg|png)$/i,".avif"),type:"image/avif"}),s.jsx("img",{src:A.image,alt:A.types||"Logement étudiant",className:"object-cover w-full h-full transition-transform duration-300 group-hover:scale-105",loading:"lazy"})]}):s.jsx("span",{className:"text-blue-600 text-4xl transition-transform duration-300 group-hover:scale-110",children:"🏠"}),s.jsx("button",{className:"absolute top-2 right-2 bg-white/80 rounded-full p-2 shadow hover:bg-pink-100 transition-colors group-hover:scale-110",children:s.jsx("svg",{className:"w-5 h-5 text-pink-500 animate-pulse group-hover:animate-heartbeat",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex flex-wrap gap-2 mb-2 transition-all duration-200",children:ve.map(be=>s.jsx("span",{className:`px-3 py-1 rounded-full font-semibold text-xs ${be.color} ring-1 ring-inset ring-black/10 dark:ring-white/20 transition-all duration-150 hover:scale-105 hover:shadow-md dark:bg-opacity-80`,children:be.label},be.label))}),s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${String(A.source_normalized)==="lokaviz"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":String(A.source_normalized)==="abele"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":String(A.source_normalized)==="locationetudiant"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:A.source}),s.jsx("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:B?A.note?`Note: ${A.note}/5`:"-":A.prix?`${A.prix}€`:"-"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded text-sm font-medium",children:A.types}),A.surface&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-200 text-sm",children:[A.surface,"m²"]})]}),A.adresse&&s.jsxs("p",{className:"text-gray-700 dark:text-white text-sm mb-3 line-clamp-2",children:["📍 ",A.adresse]}),A.services&&Array.isArray(A.services)&&A.services.length>0&&s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[A.services.slice(0,5).map(be=>s.jsxs("span",{className:"bg-gray-100 dark:bg-gray-700 dark:text-gray-100 px-2 py-1 rounded-full text-xs flex items-center gap-1 font-medium ring-1 ring-inset ring-black/5 dark:ring-white/10 transition-all duration-150 hover:bg-blue-100 dark:hover:bg-blue-800",children:[_ue[be]||"🔹"," ",be]},be)),A.services.length>5&&s.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:["+",A.services.length-5]})]})}),A.date_de_disponibilite&&s.jsx("div",{className:"mb-4",children:s.jsxs("span",{className:"text-green-600 text-sm font-medium",children:["📅 Disponible: ",wue(String(A.date_de_disponibilite))]})}),B&&A.note&&s.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs font-semibold",children:["Note: ",String(A.note),"/5"]}),s.jsx("a",{href:String(A.lien),target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-blue-600 text-white text-center py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Voir le logement"})]})]},A.objectID)})}),s.jsxs("div",{className:"flex flex-col items-center space-y-2 mt-12",children:[s.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[s.jsx("button",{onClick:F,disabled:c===1,className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded-lg disabled:opacity-50",children:"Précédent"}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Page ",c]}),s.jsx("button",{onClick:D,disabled:r.length<20,className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded-lg disabled:opacity-50",children:"Suivant"})]}),(()=>{let A=0;typeof d=="object"&&d!==null&&"nbHits"in d&&typeof d.nbHits=="number"?A=d.nbHits:Array.isArray(r)&&r.length>0&&typeof r[0]=="object"&&(A=r.length);const B=Math.ceil(A/20);if(B<=1)return null;let X=Math.max(1,c-3),de=Math.min(B,c+3);c<=4&&(X=1,de=Math.min(7,B)),c>B-4&&(de=B,X=Math.max(1,B-6));const ve=[];for(let be=X;be<=de;be++)ve.push(be);return s.jsxs("div",{className:"flex gap-1 mt-2",children:[X>1&&s.jsx("span",{className:"px-2",children:"..."}),ve.map(be=>s.jsx("button",{onClick:()=>u(be),className:`px-3 py-1 rounded-full text-sm font-semibold transition border-2 ${be===c?"bg-blue-600 text-white border-blue-600 shadow":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 border-gray-300 dark:border-gray-600 hover:bg-blue-100 dark:hover:bg-blue-900 hover:border-blue-400"}`,children:be},be)),de<B&&s.jsx("span",{className:"px-2",children:"..."})]})})()]})]})]})]})]})})};var g6={exports:{}};/*! algoliasearch-lite.umd.js | 4.25.2 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */(function(t,e){(function(n,r){t.exports=r()})(Vu,function(){function n(re,ee,ne){return ee in re?Object.defineProperty(re,ee,{value:ne,enumerable:!0,configurable:!0,writable:!0}):re[ee]=ne,re}function r(re,ee){var ne=Object.keys(re);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(re);ee&&(Y=Y.filter(function(oe){return Object.getOwnPropertyDescriptor(re,oe).enumerable})),ne.push.apply(ne,Y)}return ne}function i(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee]!=null?arguments[ee]:{};ee%2?r(Object(ne),!0).forEach(function(Y){n(re,Y,ne[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(re,Object.getOwnPropertyDescriptors(ne)):r(Object(ne)).forEach(function(Y){Object.defineProperty(re,Y,Object.getOwnPropertyDescriptor(ne,Y))})}return re}function a(re,ee){if(re==null)return{};var ne,Y,oe=function(Te,we){if(Te==null)return{};var se,_e,je={},We=Object.keys(Te);for(_e=0;_e<We.length;_e++)se=We[_e],we.indexOf(se)>=0||(je[se]=Te[se]);return je}(re,ee);if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(re);for(Y=0;Y<pe.length;Y++)ne=pe[Y],ee.indexOf(ne)>=0||Object.prototype.propertyIsEnumerable.call(re,ne)&&(oe[ne]=re[ne])}return oe}function o(re,ee){return function(ne){if(Array.isArray(ne))return ne}(re)||function(ne,Y){if(Symbol.iterator in Object(ne)||Object.prototype.toString.call(ne)==="[object Arguments]"){var oe=[],pe=!0,Te=!1,we=void 0;try{for(var se,_e=ne[Symbol.iterator]();!(pe=(se=_e.next()).done)&&(oe.push(se.value),!Y||oe.length!==Y);pe=!0);}catch(je){Te=!0,we=je}finally{try{pe||_e.return==null||_e.return()}finally{if(Te)throw we}}return oe}}(re,ee)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(re){return function(ee){if(Array.isArray(ee)){for(var ne=0,Y=new Array(ee.length);ne<ee.length;ne++)Y[ne]=ee[ne];return Y}}(re)||function(ee){if(Symbol.iterator in Object(ee)||Object.prototype.toString.call(ee)==="[object Arguments]")return Array.from(ee)}(re)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(re){var ee,ne="algoliasearch-client-js-".concat(re.key),Y=function(){return ee===void 0&&(ee=re.localStorage||window.localStorage),ee},oe=function(){return JSON.parse(Y().getItem(ne)||"{}")},pe=function(we){Y().setItem(ne,JSON.stringify(we))},Te=function(){var we=re.timeToLive?1e3*re.timeToLive:null,se=oe(),_e=Object.fromEntries(Object.entries(se).filter(function(We){return o(We,2)[1].timestamp!==void 0}));if(pe(_e),we){var je=Object.fromEntries(Object.entries(_e).filter(function(We){var G=o(We,2)[1],ie=new Date().getTime();return!(G.timestamp+we<ie)}));pe(je)}};return{get:function(we,se){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){Te();var je=JSON.stringify(we);return oe()[je]}).then(function(je){return Promise.all([je?je.value:se(),je!==void 0])}).then(function(je){var We=o(je,2),G=We[0],ie=We[1];return Promise.all([G,ie||_e.miss(G)])}).then(function(je){return o(je,1)[0]})},set:function(we,se){return Promise.resolve().then(function(){var _e=oe();return _e[JSON.stringify(we)]={timestamp:new Date().getTime(),value:se},Y().setItem(ne,JSON.stringify(_e)),se})},delete:function(we){return Promise.resolve().then(function(){var se=oe();delete se[JSON.stringify(we)],Y().setItem(ne,JSON.stringify(se))})},clear:function(){return Promise.resolve().then(function(){Y().removeItem(ne)})}}}function d(re){var ee=c(re.caches),ne=ee.shift();return ne===void 0?{get:function(Y,oe){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},Te=oe();return Te.then(function(we){return Promise.all([we,pe.miss(we)])}).then(function(we){return o(we,1)[0]})},set:function(Y,oe){return Promise.resolve(oe)},delete:function(Y){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(Y,oe){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return ne.get(Y,oe,pe).catch(function(){return d({caches:ee}).get(Y,oe,pe)})},set:function(Y,oe){return ne.set(Y,oe).catch(function(){return d({caches:ee}).set(Y,oe)})},delete:function(Y){return ne.delete(Y).catch(function(){return d({caches:ee}).delete(Y)})},clear:function(){return ne.clear().catch(function(){return d({caches:ee}).clear()})}}}function f(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},ee={};return{get:function(ne,Y){var oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},pe=JSON.stringify(ne);if(pe in ee)return Promise.resolve(re.serializable?JSON.parse(ee[pe]):ee[pe]);var Te=Y(),we=oe&&oe.miss||function(){return Promise.resolve()};return Te.then(function(se){return we(se)}).then(function(){return Te})},set:function(ne,Y){return ee[JSON.stringify(ne)]=re.serializable?JSON.stringify(Y):Y,Promise.resolve(Y)},delete:function(ne){return delete ee[JSON.stringify(ne)],Promise.resolve()},clear:function(){return ee={},Promise.resolve()}}}function p(re){for(var ee=re.length-1;ee>0;ee--){var ne=Math.floor(Math.random()*(ee+1)),Y=re[ee];re[ee]=re[ne],re[ne]=Y}return re}function g(re,ee){return ee&&Object.keys(ee).forEach(function(ne){re[ne]=ee[ne](re)}),re}function _(re){for(var ee=arguments.length,ne=new Array(ee>1?ee-1:0),Y=1;Y<ee;Y++)ne[Y-1]=arguments[Y];var oe=0;return re.replace(/%s/g,function(){return encodeURIComponent(ne[oe++])})}var N={WithinQueryParameters:0,WithinHeaders:1};function b(re,ee){var ne=re||{},Y=ne.data||{};return Object.keys(ne).forEach(function(oe){["timeout","headers","queryParameters","data","cacheable"].indexOf(oe)===-1&&(Y[oe]=ne[oe])}),{data:Object.entries(Y).length>0?Y:void 0,timeout:ne.timeout||ee,headers:ne.headers||{},queryParameters:ne.queryParameters||{},cacheable:ne.cacheable}}var S={Read:1,Write:2,Any:3},w=1,y=2,E=3;function I(re){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w;return i(i({},re),{},{status:ee,lastUpdate:Date.now()})}function O(re){return typeof re=="string"?{protocol:"https",url:re,accept:S.Any}:{protocol:re.protocol||"https",url:re.url,accept:re.accept||S.Any}}var q="GET",R="POST";function V(re,ee){return Promise.all(ee.map(function(ne){return re.get(ne,function(){return Promise.resolve(I(ne))})})).then(function(ne){var Y=ne.filter(function(Te){return function(we){return we.status===w||Date.now()-we.lastUpdate>12e4}(Te)}),oe=ne.filter(function(Te){return function(we){return we.status===E&&Date.now()-we.lastUpdate<=12e4}(Te)}),pe=[].concat(c(Y),c(oe));return{getTimeout:function(Te,we){return(oe.length===0&&Te===0?1:oe.length+3+Te)*we},statelessHosts:pe.length>0?pe.map(function(Te){return O(Te)}):ee}})}function U(re,ee,ne,Y){var oe=[],pe=function(G,ie){if(!(G.method===q||G.data===void 0&&ie.data===void 0)){var ce=Array.isArray(G.data)?G.data:i(i({},G.data),ie.data);return JSON.stringify(ce)}}(ne,Y),Te=function(G,ie){var ce=i(i({},G.headers),ie.headers),Pe={};return Object.keys(ce).forEach(function(Ae){var Ce=ce[Ae];Pe[Ae.toLowerCase()]=Ce}),Pe}(re,Y),we=ne.method,se=ne.method!==q?{}:i(i({},ne.data),Y.data),_e=i(i(i({"x-algolia-agent":re.userAgent.value},re.queryParameters),se),Y.queryParameters),je=0,We=function G(ie,ce){var Pe=ie.pop();if(Pe===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, please reach out to the Algolia Support team: https://alg.li/support .",transporterStackTrace:P(oe)};var Ae={data:pe,headers:Te,method:we,url:F(Pe,ne.path,_e),connectTimeout:ce(je,re.timeouts.connect),responseTimeout:ce(je,Y.timeout)},Ce=function(He){var nt={request:Ae,response:He,host:Pe,triesLeft:ie.length};return oe.push(nt),nt},Ve={onSuccess:function(He){return function(nt){try{return JSON.parse(nt.content)}catch(Yt){throw function(tr,qn){return{name:"DeserializationError",message:tr,response:qn}}(Yt.message,nt)}}(He)},onRetry:function(He){var nt=Ce(He);return He.isTimedOut&&je++,Promise.all([re.logger.info("Retryable failure",H(nt)),re.hostsCache.set(Pe,I(Pe,He.isTimedOut?E:y))]).then(function(){return G(ie,ce)})},onFail:function(He){throw Ce(He),function(nt,Yt){var tr=nt.content,qn=nt.status,zr=tr;try{zr=JSON.parse(tr).message}catch{}return function(rs,ss,Fi){return{name:"ApiError",message:rs,status:ss,transporterStackTrace:Fi}}(zr,qn,Yt)}(He,P(oe))}};return re.requester.send(Ae).then(function(He){return function(nt,Yt){return function(tr){var qn=tr.status;return tr.isTimedOut||function(zr){var rs=zr.isTimedOut,ss=zr.status;return!rs&&~~ss==0}(tr)||~~(qn/100)!=2&&~~(qn/100)!=4}(nt)?Yt.onRetry(nt):~~(nt.status/100)==2?Yt.onSuccess(nt):Yt.onFail(nt)}(He,Ve)})};return V(re.hostsCache,ee).then(function(G){return We(c(G.statelessHosts).reverse(),G.getTimeout)})}function k(re){var ee={value:"Algolia for JavaScript (".concat(re,")"),add:function(ne){var Y="; ".concat(ne.segment).concat(ne.version!==void 0?" (".concat(ne.version,")"):"");return ee.value.indexOf(Y)===-1&&(ee.value="".concat(ee.value).concat(Y)),ee}};return ee}function F(re,ee,ne){var Y=D(ne),oe="".concat(re.protocol,"://").concat(re.url,"/").concat(ee.charAt(0)==="/"?ee.substr(1):ee);return Y.length&&(oe+="?".concat(Y)),oe}function D(re){return Object.keys(re).map(function(ee){return _("%s=%s",ee,(ne=re[ee],Object.prototype.toString.call(ne)==="[object Object]"||Object.prototype.toString.call(ne)==="[object Array]"?JSON.stringify(re[ee]):re[ee]));var ne}).join("&")}function P(re){return re.map(function(ee){return H(ee)})}function H(re){var ee=re.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return i(i({},re),{},{request:i(i({},re.request),{},{headers:i(i({},re.request.headers),ee)})})}var te=function(re){var ee=re.appId,ne=function(oe,pe,Te){var we={"x-algolia-api-key":Te,"x-algolia-application-id":pe};return{headers:function(){return oe===N.WithinHeaders?we:{}},queryParameters:function(){return oe===N.WithinQueryParameters?we:{}}}}(re.authMode!==void 0?re.authMode:N.WithinHeaders,ee,re.apiKey),Y=function(oe){var pe=oe.hostsCache,Te=oe.logger,we=oe.requester,se=oe.requestsCache,_e=oe.responsesCache,je=oe.timeouts,We=oe.userAgent,G=oe.hosts,ie=oe.queryParameters,ce={hostsCache:pe,logger:Te,requester:we,requestsCache:se,responsesCache:_e,timeouts:je,userAgent:We,headers:oe.headers,queryParameters:ie,hosts:G.map(function(Pe){return O(Pe)}),read:function(Pe,Ae){var Ce=b(Ae,ce.timeouts.read),Ve=function(){return U(ce,ce.hosts.filter(function(nt){return(nt.accept&S.Read)!=0}),Pe,Ce)};if((Ce.cacheable!==void 0?Ce.cacheable:Pe.cacheable)!==!0)return Ve();var He={request:Pe,mappedRequestOptions:Ce,transporter:{queryParameters:ce.queryParameters,headers:ce.headers}};return ce.responsesCache.get(He,function(){return ce.requestsCache.get(He,function(){return ce.requestsCache.set(He,Ve()).then(function(nt){return Promise.all([ce.requestsCache.delete(He),nt])},function(nt){return Promise.all([ce.requestsCache.delete(He),Promise.reject(nt)])}).then(function(nt){var Yt=o(nt,2);return Yt[0],Yt[1]})})},{miss:function(nt){return ce.responsesCache.set(He,nt)}})},write:function(Pe,Ae){return U(ce,ce.hosts.filter(function(Ce){return(Ce.accept&S.Write)!=0}),Pe,b(Ae,ce.timeouts.write))}};return ce}(i(i({hosts:[{url:"".concat(ee,"-dsn.algolia.net"),accept:S.Read},{url:"".concat(ee,".algolia.net"),accept:S.Write}].concat(p([{url:"".concat(ee,"-1.algolianet.com")},{url:"".concat(ee,"-2.algolianet.com")},{url:"".concat(ee,"-3.algolianet.com")}]))},re),{},{headers:i(i(i({},ne.headers()),{"content-type":"application/x-www-form-urlencoded"}),re.headers),queryParameters:i(i({},ne.queryParameters()),re.queryParameters)}));return g({transporter:Y,appId:ee,addAlgoliaAgent:function(oe,pe){Y.userAgent.add({segment:oe,version:pe})},clearCache:function(){return Promise.all([Y.requestsCache.clear(),Y.responsesCache.clear()]).then(function(){})}},re.methods)},Z=function(re){return function(ee,ne){return ee.method===q?re.transporter.read(ee,ne):re.transporter.write(ee,ne)}},K=function(re){return function(ee){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y={transporter:re.transporter,appId:re.appId,indexName:ee};return g(Y,ne.methods)}},A=function(re){return function(ee,ne){var Y=ee.map(function(oe){return i(i({},oe),{},{params:D(oe.params||{})})});return re.transporter.read({method:R,path:"1/indexes/*/queries",data:{requests:Y},cacheable:!0},ne)}},z=function(re){return function(ee,ne){return Promise.all(ee.map(function(Y){var oe=Y.params,pe=oe.facetName,Te=oe.facetQuery,we=a(oe,["facetName","facetQuery"]);return K(re)(Y.indexName,{methods:{searchForFacetValues:de}}).searchForFacetValues(pe,Te,i(i({},ne),we))}))}},B=function(re){return function(ee,ne,Y){return re.transporter.read({method:R,path:_("1/answers/%s/prediction",re.indexName),data:{query:ee,queryLanguages:ne},cacheable:!0},Y)}},X=function(re){return function(ee,ne){return re.transporter.read({method:R,path:_("1/indexes/%s/query",re.indexName),data:{query:ee},cacheable:!0},ne)}},de=function(re){return function(ee,ne,Y){return re.transporter.read({method:R,path:_("1/indexes/%s/facets/%s/query",re.indexName,ee),data:{facetQuery:ne},cacheable:!0},Y)}},ve=1,be=2,Ee=3,Oe=function(re){return function(ee,ne){var Y=ee.map(function(oe){return i(i({},oe),{},{threshold:oe.threshold||0})});return re.transporter.read({method:R,path:"1/indexes/*/recommendations",data:{requests:Y},cacheable:!0},ne)}};function Se(re,ee,ne){var Y,oe={appId:re,apiKey:ee,timeouts:{connect:1,read:2,write:30},requester:{send:function(pe){return new Promise(function(Te){var we=new XMLHttpRequest;we.open(pe.method,pe.url,!0),Object.keys(pe.headers).forEach(function(We){return we.setRequestHeader(We,pe.headers[We])});var se,_e=function(We,G){return setTimeout(function(){we.abort(),Te({status:0,content:G,isTimedOut:!0})},1e3*We)},je=_e(pe.connectTimeout,"Connection timeout");we.onreadystatechange=function(){we.readyState>we.OPENED&&se===void 0&&(clearTimeout(je),se=_e(pe.responseTimeout,"Socket timeout"))},we.onerror=function(){we.status===0&&(clearTimeout(je),clearTimeout(se),Te({content:we.responseText||"Network request failed",status:we.status,isTimedOut:!1}))},we.onload=function(){clearTimeout(je),clearTimeout(se),Te({content:we.responseText,status:we.status,isTimedOut:!1})},we.send(pe.data)})}},logger:(Y=Ee,{debug:function(pe,Te){return ve>=Y&&console.debug(pe,Te),Promise.resolve()},info:function(pe,Te){return be>=Y&&console.info(pe,Te),Promise.resolve()},error:function(pe,Te){return console.error(pe,Te),Promise.resolve()}}),responsesCache:f(),requestsCache:f({serializable:!1}),hostsCache:d({caches:[u({key:"".concat("4.25.2","-").concat(re)}),f()]}),userAgent:k("4.25.2").add({segment:"Browser",version:"lite"}),authMode:N.WithinQueryParameters};return te(i(i(i({},oe),ne),{},{methods:{search:A,searchForFacetValues:z,multipleQueries:A,multipleSearchForFacetValues:z,customRequest:Z,initIndex:function(pe){return function(Te){return K(pe)(Te,{methods:{search:X,searchForFacetValues:de,findAnswers:B}})}},getRecommendations:Oe}}))}return Se.version="4.25.2",Se})})(g6);var Nue=g6.exports;const Sue=El(Nue),Xl={"deepseek/deepseek-r1:free":"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","meta-llama/llama-4-maverick:free":"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",openrouter:"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"},Eue={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_DEEPSEEK_API_KEY:"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",VITE_FIREBASE_API_KEY:"AIzaSyDXDGMpZoQNLNu0DAqH1wd3q9Q4vthONv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app",VITE_LLAMA_API_KEY:"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",VITE_OPENROUTER_API_KEY:"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"},df={appId:u6,apiKey:ece,indices:{jobs:d6,services:nce,logements:rce,materiel:sce}},CT="https://openrouter.ai/api/v1/chat/completions",kT=[{value:"deepseek/deepseek-r1:free",label:"DeepSeek R1 (Raisonnement avancé)",maxTokens:6144,temperature:.75,topP:.88},{value:"meta-llama/llama-4-maverick:free",label:"Llama 4 Maverick (Rapide)",maxTokens:3072,temperature:.65,topP:.82}],TT=`Tu es l'assistant IA de StudyMarket, une plateforme pour étudiants français.

RÔLE : Aider les étudiants à trouver des logements, jobs, services et matériel scolaire.

STYLE DE RÉPONSE :
- Naturel et conversationnel
- Réponses courtes et directes (2-3 phrases max)
- Éviter les listes à puces excessives
- Maximum 2-3 emojis par réponse
- Ton amical mais professionnel

SERVICES STUDYMARKET :
- Logements étudiants (studios, colocations, résidences)
- Jobs et stages compatibles avec les études
- Services entre étudiants (cours particuliers, aide)
- Matériel scolaire d'occasion (livres, ordinateurs, mobilier)

CONSEILS À DONNER :
- Budget logement Paris : 600-800€/mois, Lyon : 400-600€/mois
- Jobs étudiants : 15-20h/semaine max, cours particuliers 15-25€/h
- Vérifier toujours les annonces avant achat/location
- Utiliser la messagerie sécurisée de la plateforme

Réponds de manière utile et concise. Si tu ne peux pas rechercher dans la base de données, donne des conseils pratiques basés sur ton expertise du marché étudiant français.`,Cue={Logement:["Pense à élargir ta recherche aux villes voisines pour plus d'options.","La colocation est souvent plus économique et conviviale !","N'hésite pas à demander des photos récentes et à visiter avant de t'engager.","Vérifie si tu es éligible aux aides au logement (CAF, APL, etc.).","Sois vigilant face aux offres trop alléchantes : privilégie les contacts via StudyMarket."],Job:["Prépare un CV à jour et une lettre de motivation personnalisée.","Certains jobs étudiants sont compatibles avec ton emploi du temps universitaire.","N'hésite pas à postuler à plusieurs offres pour maximiser tes chances.","Utilise la messagerie StudyMarket pour échanger en toute sécurité avec les employeurs."],Service:["Précise bien tes besoins ou compétences pour trouver le bon service ou client.","Privilégie les échanges via la messagerie sécurisée StudyMarket.","Demande des recommandations ou avis si possible.","Sois clair sur les tarifs et modalités avant de t'engager."],Matériel:["Vérifie l'état du matériel avant d'acheter ou de vendre.","Privilégie la remise en main propre pour plus de sécurité.","N'hésite pas à négocier le prix si besoin.","Ajoute plusieurs photos pour rassurer les acheteurs."]};function kue(t){return t.length?t.length===1?t[0]:t.length===2?t[0]+" "+t[1]:t.slice(0,-1).join(" ")+" Enfin, "+t[t.length-1]:""}function Tue(t,e){const n=Cue[e]||[];return n.length?t+"<br /><br /><em>Conseil StudyMarket :</em> "+kue(n):t}const Pue=[{name:"Accueil",path:"/"},{name:"Logements",path:"/housing"},{name:"Jobs",path:"/jobs"},{name:"Services",path:"/listings?category=services"},{name:"Matériel",path:"/listings?category=material"},{name:"Favoris",path:"/favorites"},{name:"Profil",path:"/profile"},{name:"Messages",path:"/messages"},{name:"Paiements",path:"/payments"},{name:"Paramètres",path:"/settings"},{name:"Aide",path:"/help"}];function Iue(t){const e=t.toLowerCase();return e.includes("accueil")||e.includes("home")||e.includes("plateforme")||e.includes("site")||e.includes("explorer")||e.includes("menu")||e.includes("pages")||e.includes("sections")||e.includes("tout")||e.includes("navigation")}function Aue(){return"<ul>"+Pue.map(t=>`<li>🔗 <a href="${t.path}">${t.name}</a></li>`).join("")+"</ul>"}function Rue(t){return!t||t.trim()===""||t.trim().toLowerCase()==="undefined"||t.trim().toLowerCase()==="null"?"🤖 Je n'ai pas compris ta demande. Peux-tu reformuler ?":t}const Mue=()=>{const{userProfile:t,loading:e}=mn(),[n,r]=x.useState(!1),[i,a]=x.useState(!1),[o,c]=x.useState(!1),[u,d]=x.useState(""),[f,p]=x.useState(kT[0].value),g=x.useRef(null),_=x.useRef(null),N=x.useCallback(()=>{if(e)return"Connexion en cours...";let Z="";t&&(t.firstName&&t.lastName?Z=`${t.firstName} ${t.lastName}`:t.firstName?Z=t.firstName:t.displayName?Z=t.displayName:t.email&&(Z=t.email.split("@")[0]));let K=`Salut${Z?" "+Z:""} ! 👋`;if(K+=`

Je suis ton assistant StudyMarket. Je peux t'aider à trouver :`,K+=`
• Logements étudiants`,K+=`
• Jobs et stages`,K+=`
• Services entre étudiants`,K+=`
• Matériel scolaire`,t!=null&&t.location){const A=t.location.toLowerCase();A.includes("paris")?K+=`

💡 Pour Paris : budget logement 600-800€/mois, privilégie République, Belleville, Nation.`:A.includes("lyon")&&(K+=`

💡 Pour Lyon : budget logement 400-600€/mois, regarde Guillotière, Croix-Rousse.`)}return K+=`

Que cherches-tu aujourd'hui ?`,K},[t,e]),[b,S]=x.useState({messages:[],loading:!1,error:null,retryCount:0});x.useEffect(()=>{const Z={role:"assistant",content:N(),timestamp:Date.now()};S(K=>({...K,messages:[Z]}))},[N]);const w=x.useCallback(()=>{g.current&&g.current.scrollIntoView({behavior:"smooth"})},[]);x.useEffect(()=>{var Z;n&&!i&&(w(),(Z=_.current)==null||Z.focus())},[b.messages,n,i,w]),x.useEffect(()=>{if(!o)return;const Z=K=>{K.target.closest(".chatbot-fab-menu")||c(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[o]);async function y(Z,K){const{appId:A,apiKey:z}=df,X=Sue(A,z).initIndex(Z),de={hitsPerPage:20};return(await X.search(K,de)).hits}function E(Z){const K=Z.toLowerCase();return K.includes("logement")||K.includes("coloc")||K.includes("appartement")||K.includes("studio")?{index:df.indices.logements,label:"Logement"}:K.includes("job")||K.includes("emploi")||K.includes("stage")||K.includes("travail")?{index:df.indices.jobs,label:"Job"}:K.includes("service")||K.includes("cours")||K.includes("soutien")||K.includes("aide")?{index:df.indices.services,label:"Service"}:K.includes("matériel")||K.includes("livre")||K.includes("ordinateur")||K.includes("équipement")?{index:df.indices.materiel,label:"Matériel"}:null}const I=(Z,K)=>{const A={Logement:{emoji:"🏠",title:"EXPERTISE LOGEMENT ÉTUDIANT",budgetAdvice:{Paris:"Budget : 600-800€/mois • Quartiers : République, Belleville, Nation (ligne 1,2,3)",Lyon:"Budget : 400-600€/mois • Quartiers : Guillotière, Croix-Rousse, Part-Dieu",Toulouse:"Budget : 350-500€/mois • Quartiers : Rangueil, Mirail, Compans-Caffarelli",Marseille:"Budget : 400-550€/mois • Quartiers : Endoume, Vauban, Lodi",Default:"Budget moyen France : 400-600€/mois selon ville"},tips:["💰 **BUDGET & AIDES** : CAF jusqu'à 250€/mois, négociation loyer possible (-50€)","📋 **DOCUMENTS** : 3 bulletins salaire garant, assurance habitation, pièce identité","🔍 **RECHERCHE** : Alertes StudyMarket, visites groupées, réactivité <24h","⚠️ **SÉCURITÉ** : Jamais de virement avant visite, vérifier propriétaire","🏠 **COLOCATION** : Règlement intérieur, partage charges, bail solidaire","📍 **TRANSPORT** : <30min fac, proximité métro/bus, pass étudiant"]},Job:{emoji:"💼",title:"EXPERTISE JOBS ÉTUDIANTS",budgetAdvice:{Default:"Salaire moyen : 11,65€/h SMIC • Limite légale : 964h/an (60% temps plein)"},tips:["💰 **RÉMUNÉRATION** : SMIC 11,65€/h minimum, cours particuliers 15-25€/h","📝 **CONTRATS** : CDD étudiant, interim, auto-entrepreneur si >1000€/mois","⏰ **PLANNING** : Maximum 20h/semaine, éviter périodes examens","🎯 **JOBS POPULAIRES** : Cours particuliers, baby-sitting, événementiel, restauration","🏫 **CAMPUS** : Bibliothèque, RU, accueil, tutorat (priorité étudiants)","🔒 **DROITS** : Congés payés, protection sociale, chômage si >610h"]},Service:{emoji:"🤝",title:"EXPERTISE SERVICES ÉTUDIANTS",budgetAdvice:{Default:"Tarifs moyens : Cours particuliers 15-25€/h • Traduction 0,10€/mot • Rédaction 15€/page"},tips:["💰 **TARIFS MARCHÉ** : Maths/Physique 20-25€/h, Langues 15-20€/h, Informatique 25-30€/h","🏢 **MICRO-ENTREPRISE** : Obligatoire si >1000€/mois, 22% charges sociales","📚 **SPÉCIALISATIONS** : Matières scientifiques, langues rares, informatique","🎯 **CLIENTÈLE** : Collégiens/lycéens, étudiants, adultes formation","📍 **LIEUX** : Domicile, bibliothèque, visio (+ pratique)","🔒 **ASSURANCE** : Responsabilité civile obligatoire, StudyMarket 0% commission"]},Matériel:{emoji:"📚",title:"EXPERTISE MATÉRIEL ÉTUDIANT",budgetAdvice:{Default:"Économie moyenne : 30-50% vs neuf • Livres : 40-60% • Électronique : 20-40%"},tips:["💰 **PRIX MARCHÉ** : Livres 20-40€ vs 60€ neuf, PC portable 300-800€ vs 1200€","🔍 **VÉRIFICATIONS** : État général, fonctionnement, garantie constructeur","📚 **LIVRES** : Édition actuelle, annotations limitées, programme en cours","💻 **ÉLECTRONIQUE** : Test complet, déblocage opérateur, accessoires inclus","🚲 **MOBILIER/VÉLO** : Vérification sécurité, pièces détachées disponibles","🤝 **NÉGOCIATION** : Comparer 3 annonces, défauts = -10-20%, achat groupé"]}},z=A[Z]||A.Logement;if(!z||!z.title)return"🤖 Je n'ai pas d'expertise sur ce sujet. Essaie une autre question.";const B=K.match(/(paris|lyon|toulouse|marseille|bordeaux|lille|nice|nantes|strasbourg|montpellier)/i),X=B&&z.budgetAdvice[B[1].charAt(0).toUpperCase()+B[1].slice(1)]||z.budgetAdvice.Default;return`${z.emoji} **${z.title}** pour "${K}"

🎯 **STUDYMARKET : PLATEFORME TOUT-EN-UN POUR ÉTUDIANTS**

**Pourquoi StudyMarket révolutionne ta vie étudiante :**
• **Centralisation** : Plus besoin de 10 sites différents
• **Fiabilité** : Annonces vérifiées, utilisateurs authentifiés
• **Rapidité** : Recherche Algolia instantanée, alertes temps réel
• **Sécurité** : Messagerie protégée, paiement sécurisé
• **Personnalisation** : Recommandations IA selon ton profil

📊 **DONNÉES MARCHÉ** : ${X}

🎯 **CONSEILS EXPERT STUDYMARKET :**
${z.tips.join(`
`)}

🔄 **RECHERCHE TEMPORAIREMENT INDISPONIBLE**

💡 **UTILISE STUDYMARKET DIRECTEMENT :**
• **Interface moderne** : Filtres avancés, recherche instantanée
• **Alertes intelligentes** : Notifications dès qu'une annonce correspond
• **Favoris** : Sauvegarde tes annonces préférées
• **Messagerie** : Contacte directement les annonceurs en sécurité
• **App mobile** : Accès partout, notifications push

🚀 **StudyMarket = Ton compagnon digital pour réussir tes études !**`},O=(Z,K,A)=>{if(Z.length===0){let B=`❌ Aucun ${K.toLowerCase()} trouvé pour "${A}"<br />`;return B+="🔍 Essaie avec d'autres mots-clés ou poste une demande sur StudyMarket ! 😊<br />",B=Tue(B,K),B}let z=`✅ ${Z.length} ${K.toLowerCase()}(s) trouvé(s) :<br /><br />`;return Z.slice(0,10).forEach((B,X)=>{const de=ee=>ee.titre||ee.title||ee.types||"Logement",ve=ee=>{const ne=ee.prix||ee.price||ee.rent||ee.priceNumeric||ee.loyer||ee.montant;return typeof ne=="number"?ne+"€":typeof ne=="string"?ne.replace(/\s/g,"").match(/^\d+$/)?ne+"€":ne:"-"},be=ee=>ee.adresse||ee.location||ee.city||"-",Ee=ee=>ee.privilege||ee.url||ee.link||"#",Oe=ee=>ee.surface||ee.superficie||"",Se=ee=>ee.description||"";z+=`<strong>${X+1}. ${de(B)}</strong><br />`;const re=ve(B);if(re&&re!=="-"&&(z+=`💰 ${re}<br />`),be(B)&&be(B)!=="-"&&(z+=`📍 ${be(B)}<br />`),Oe(B)&&(z+=`📐 Surface: ${Oe(B)}<br />`),Se(B)){const ee=Se(B),ne=typeof ee=="string"?ee:"",Y=ne.length>100?ne.substring(0,100)+"...":ne;z+=`📝 ${Y}<br />`}Ee(B)&&Ee(B)!=="#"&&(z+=`🔗 <a href="${Ee(B)}" target="_blank">Voir l'annonce</a><br />`),z+="<br />"}),(!z||z.trim()===""||z.trim().toLowerCase()==="undefined"||z.trim().toLowerCase()==="null")&&(z="❌ Aucun résultat exploitable. Essaie de reformuler ta recherche."),z},q=()=>t?`${TT}

CONTEXTE UTILISATEUR:
- Nom: ${t.firstName||""} ${t.lastName||""}
- Email: ${t.email}
- Université: ${t.university||""}
- Domaine: ${t.fieldOfStudy||""}
- Localisation: ${t.location||""}`:TT,R=async()=>{var K,A,z,B,X,de,ve;if(!u.trim())return;const Z=[...b.messages,{role:"user",content:u,timestamp:Date.now()}];S(be=>({...be,messages:Z,loading:!0,error:null})),d("");try{if(Iue(u)){const Ee=`<strong>Voici les principales pages de StudyMarket :</strong><br />${Aue()}`;S(Oe=>({...Oe,messages:[...Z,{role:"assistant",content:Ee,timestamp:Date.now()}],loading:!1}));return}const be=E(u);if(be)try{const Ee=await y(be.index,u),Oe=O(Ee,be.label,u);S(Se=>({...Se,messages:[...Z,{role:"assistant",content:Oe,timestamp:Date.now()}],loading:!1}))}catch{const Ee=I(be.label,u);S(Oe=>({...Oe,messages:[...Z,{role:"assistant",content:Ee,timestamp:Date.now()}],loading:!1}))}else try{console.log("🔍 Vérification des clés API..."),console.log("API_KEYS disponibles:",Object.keys(Xl)),console.log("Modèle sélectionné:",f);let Ee;if(Xl[f]&&Xl[f].trim()!==""?(Ee=Xl[f],console.log("✅ Clé trouvée pour le modèle:",f)):Xl.openrouter&&Xl.openrouter.trim()!==""?(Ee=Xl.openrouter,console.log("✅ Clé OpenRouter générique utilisée")):(Ee="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",console.log("✅ Clé récupérée directement depuis Vite env")),console.log("🔑 Clé API disponible:",Ee?`${Ee.substring(0,8)}...`:"AUCUNE"),console.log("VITE_OPENROUTER_API_KEY:","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"),console.log("VITE_DEEPSEEK_API_KEY:","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"),console.log("VITE_LLAMA_API_KEY:","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"),!Ee||Ee.trim()===""){console.error("❌ Aucune clé API valide trouvée"),console.error("Variables Vite disponibles:",Object.keys(Eue).filter(ne=>ne.includes("API"))),S(ne=>({...ne,messages:[...Z,{role:"assistant",content:"🔑 **Configuration API manquante (Vite détecté)**\n\n❌ **Problème :** Aucune clé API valide trouvée\n\n🔧 **Solutions pour Vite :**\n\n1. **Fichier .env** (racine du projet) :\n   ```\n   VITE_OPENROUTER_API_KEY=sk-or-v1-ton-token-ici\n   ```\n\n2. **Redémarrage obligatoire** :\n   ```bash\n   npm run dev\n   ```\n\n💡 **Important :** Vite utilise le préfixe `VITE_` (pas `REACT_APP_`)",timestamp:Date.now()}],loading:!1,error:"Clé API manquante"}));return}const Oe={model:f,messages:[{role:"system",content:q()},...Z.filter(ne=>ne.role!=="system").map(ne=>({role:ne.role,content:ne.content}))],temperature:.7,max_tokens:800};console.log("🚀 Envoi requête vers:",CT);const Se=await fetch(CT,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ee}`,"HTTP-Referer":window.location.origin},body:JSON.stringify(Oe)});if(console.log("📡 Statut réponse:",Se.status,Se.statusText),!Se.ok){const ne=await Se.text();console.error("❌ Erreur HTTP:",Se.status,ne);let Y="";throw Se.status===401?Y=`🔑 **Clé API invalide**

Vérifie ta clé sur OpenRouter.ai`:Se.status===402?Y=`💳 **Crédit insuffisant**

Recharge ton compte OpenRouter`:Se.status===429?Y=`⏱️ **Limite atteinte**

Attends quelques minutes`:Y=`❌ **Erreur ${Se.status}**

${ne}`,new Error(Y)}const re=await Se.json();console.log("✅ Réponse reçue:",(z=(A=(K=re.choices)==null?void 0:K[0])==null?void 0:A.message)!=null&&z.content?"Contenu OK":"Pas de contenu");let ee=Rue((de=(X=(B=re.choices)==null?void 0:B[0])==null?void 0:X.message)==null?void 0:de.content);ee==="🤖 Je n'ai pas compris ta demande. Peux-tu reformuler ?"&&((ve=re.error)!=null&&ve.message?ee=`❌ **Erreur API :** ${re.error.message}`:re.detail&&(ee=`❌ **Erreur API :** ${re.detail}`)),S(ne=>({...ne,messages:[...Z,{role:"assistant",content:ee,timestamp:Date.now()}],loading:!1}))}catch(Ee){console.error("💥 Erreur dans sendMessage:",Ee),S(Oe=>({...Oe,messages:[...Z,{role:"assistant",content:`🚨 **Erreur de communication**

${Ee.message||"Erreur inconnue"}

🔧 **Solutions :**
- Vérifie ta clé API sur OpenRouter.ai
- Assure-toi d'avoir du crédit disponible  
- Teste avec une question simple`,timestamp:Date.now()}],loading:!1,error:`API Error: ${Ee.message}`}))}}catch{S(be=>({...be,messages:[...Z,{role:"assistant",content:`🚨 **Expert StudyMarket - Erreur technique**

🔧 **Diagnostic :** Problème de connexion détecté

🎯 **ACTIONS RECOMMANDÉES :**
• **Immédiat** : Rafraîchis la page (Ctrl+F5)
• **Alternative** : StudyMarket.fr fonctionne normalement
• **Support** : Équipe technique notifiée automatiquement

💡 **CONSEILS EXPERTS PENDANT L'ATTENTE :**

**Optimise ta recherche :**
• Utilise mots-clés précis : "Studio 20m2 Paris 11"
• Active notifications push sur l'app mobile
• Crée plusieurs alertes avec critères différents

**Négocie comme un pro :**
• Prépare 3 arguments de négociation
• Propose visite rapide (aujourd'hui/demain)
• Mentionne sérieux de ton dossier

🚀 **L'expertise StudyMarket revient dans quelques instants !**`,timestamp:Date.now()}],loading:!1,error:"Erreur technique - Expert disponible bientôt"}))}},V=Z=>{Z.key==="Enter"&&!Z.shiftKey&&(Z.preventDefault(),R())},U=()=>{S(Z=>({...Z,messages:[{role:"assistant",content:N(),timestamp:Date.now()}],loading:!1,error:null,retryCount:0}))},k=()=>{const Z=[...b.messages].reverse().find(K=>K.role==="user");Z&&(d(Z.content),setTimeout(()=>R(),100))},F=()=>{c(!1),window.open("mailto:contact@studymarket.com?subject=Contact%20depuis%20StudyMarket","_blank")},D=()=>{c(!1),r(!0)},P=()=>{a(!0)},H=()=>{a(!1)},te=Z=>Z.replace(/###?\s*(\d+)?\.?\s*(.*?)(\n|$)/g,(K,A,z)=>A?`
${A}⃣ ${z.trim()}
`:`
**${z.trim()}**
`).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br />");return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        @media (max-width: 768px) {
          .chatbot-modal {
            width: 95vw !important;
            max-width: 95vw !important;
            right: 2.5vw !important;
            bottom: 80px !important;
            height: 75vh !important;
            max-height: 75vh !important;
          }
          .chatbot-modal-minimized {
            width: 90vw !important;
            max-width: 320px !important;
            height: 60px !important;
            right: 5vw !important;
            bottom: 80px !important;
          }
          .chatbot-fab-btn {
            width: 56px !important;
            height: 56px !important;
            bottom: 20px !important;
            right: 20px !important;
          }
          .chatbot-fab-menu-items {
            bottom: 85px !important;
            right: 20px !important;
          }
          .chatbot-messages-container {
            max-height: 45vh !important;
          }
          .chatbot-input-container {
            padding: 12px !important;
          }
          .chatbot-input {
            padding: 12px 16px !important;
            font-size: 16px !important;
          }
          .chatbot-send-btn {
            min-width: 48px !important;
            height: 48px !important;
          }
          .chatbot-controls {
            padding: 8px 12px !important;
            flex-wrap: wrap !important;
            gap: 8px !important;
          }
          .chatbot-model-select {
            max-width: 140px !important;
            font-size: 11px !important;
          }
          .message-bubble {
            max-width: 90% !important;
          }
        }
        @media (max-width: 480px) {
          .chatbot-modal {
            width: 98vw !important;
            right: 1vw !important;
            bottom: 70px !important;
            height: 80vh !important;
            max-height: 80vh !important;
          }
          .chatbot-modal-minimized {
            width: 95vw !important;
            right: 2.5vw !important;
            bottom: 70px !important;
          }
          .chatbot-messages-container {
            max-height: 50vh !important;
          }
          .chatbot-fab-btn {
            width: 52px !important;
            height: 52px !important;
            bottom: 16px !important;
            right: 16px !important;
          }
          .chatbot-fab-menu-items {
            bottom: 75px !important;
            right: 16px !important;
          }
        }
        .chatbot-modal {
          animation: slideUpSmooth 0.3s ease-out;
        }
        .chatbot-modal-minimized {
          animation: slideUpSmooth 0.3s ease-out;
        }
        @keyframes slideUpSmooth {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .message-bubble {
          animation: fadeInMessage 0.3s ease-out;
        }
        @keyframes fadeInMessage {
          from { opacity: 0; transform: translateY(8px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .typing-indicator {
          animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
          0%, 100% { opacity: 0.7; }
          50% { opacity: 1; }
        }
        .dark ::-webkit-scrollbar-thumb {
          background: #374151; /* gray-700 */
        }
      `}),s.jsxs("div",{className:"chatbot-fab-menu",children:[s.jsxs("button",{"aria-label":"Ouvrir le menu StudyMarket",onClick:()=>c(Z=>!Z),className:"chatbot-fab-btn fixed bottom-6 right-6 z-50 shadow-lg rounded-full p-0 w-16 h-16 flex items-center justify-center transition-all duration-300 focus:outline-none bg-gradient-to-br from-blue-600 to-green-500 hover:from-blue-700 hover:to-green-600 hover:scale-105",children:[s.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})}),b.loading&&s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-ping"})]}),s.jsxs("div",{className:`fixed bottom-28 right-6 z-50 flex flex-col items-end gap-3 transition-all duration-300 chatbot-fab-menu-items ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"}`,children:[s.jsx("button",{onClick:F,className:"w-12 h-12 rounded-full flex items-center justify-center bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",title:"Contacter par email",children:s.jsx("span",{className:"text-xl",children:"📧"})}),s.jsx("button",{onClick:D,className:"w-12 h-12 rounded-full flex items-center justify-center bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",title:"Assistant IA",children:s.jsx("span",{className:"text-xl",children:"🤖"})})]})]}),n&&s.jsxs("div",{className:`chatbot-modal fixed bottom-24 right-6 z-50 w-96 max-w-[90vw] bg-white dark:bg-gray-900 rounded-xl shadow-2xl flex flex-col overflow-hidden border border-gray-200 dark:border-gray-700 ${i?"chatbot-modal-minimized":""}`,style:{maxHeight:i?"60px":"75vh"},children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-green-500 text-white rounded-t-xl",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-white/20 dark:bg-gray-700 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-bold",children:"🎯"})}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-sm dark:text-blue-100",children:"Assistant IA"}),s.jsx("div",{className:"text-xs text-blue-100 dark:text-blue-300",children:"• En ligne"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:i?H:P,className:"text-white/80 hover:text-white p-1 transition-colors focus:outline-none dark:text-blue-200 dark:hover:text-white",title:i?"Agrandir":"Réduire",style:{border:"none",outline:"none",boxShadow:"none",background:"transparent"},children:i?s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 3v3a2 2 0 01-2 2H3m18 0h-3a2 2 0 01-2-2V3m0 18v-3a2 2 0 012-2h3M3 16h3a2 2 0 012 2v3"})}):s.jsx("span",{className:"text-lg font-bold",children:"−"})}),s.jsx("button",{onClick:()=>r(!1),className:"text-white/80 hover:text-white p-1 transition-colors focus:outline-none dark:text-blue-200 dark:hover:text-white",title:"Fermer",style:{border:"none",outline:"none",boxShadow:"none",background:"transparent"},children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})]}),!i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between chatbot-controls",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Modèle:"}),s.jsx("select",{value:f,onChange:Z=>p(Z.target.value),className:"text-xs rounded px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-400 chatbot-model-select",disabled:b.loading,children:kT.map(Z=>s.jsx("option",{value:Z.value,children:Z.label},Z.value))})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[b.error&&s.jsx("button",{onClick:k,className:"text-xs px-2 py-1 bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300 rounded hover:bg-orange-200 dark:hover:bg-orange-800",title:"Réessayer",children:"🔄"}),s.jsx("button",{onClick:U,className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"Nouveau chat",children:"🗑️"})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-3 bg-gray-50 dark:bg-gray-800 chatbot-messages-container",style:{maxHeight:"50vh"},children:[b.messages.map((Z,K)=>s.jsx("div",{className:`flex ${Z.role==="user"?"justify-end":"justify-start"} message-bubble`,children:s.jsxs("div",{className:`rounded-lg px-3 py-2 text-sm message-bubble ${Z.role==="user"?"bg-blue-600 text-white max-w-[85%]":"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 shadow-sm border border-gray-200 dark:border-gray-600 max-w-[90%]"}`,children:[s.jsx("div",{dangerouslySetInnerHTML:{__html:te(Z.content)},style:{textAlign:"left"}}),Z.timestamp&&s.jsx("div",{className:`text-xs mt-1 ${Z.role==="user"?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:new Date(Z.timestamp).toLocaleTimeString()})]})},K)),b.loading&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-lg px-3 py-2 shadow-sm border border-gray-200 dark:border-gray-600 typing-indicator",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Réflexion..."})]})})}),s.jsx("div",{ref:g})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 chatbot-input-container",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{ref:_,type:"text",value:u,onChange:Z=>d(Z.target.value),onKeyDown:V,placeholder:"Pose ta question...",className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none chatbot-input",disabled:b.loading,maxLength:500}),s.jsx("button",{onClick:R,disabled:b.loading||!u.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors disabled:cursor-not-allowed chatbot-send-btn flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsxs("span",{children:[u.length,"/500"]}),u.length>450&&s.jsx("span",{className:"text-orange-500",children:"⚠️"})]}),s.jsx("span",{className:"hidden sm:inline",children:"Entrée pour envoyer"}),s.jsx("span",{className:"sm:hidden",children:"Entrée ↵"})]})]})]})]})]})};function Oue({children:t}){const[e,n]=Fe.useState(null);return Fe.useEffect(()=>{const r=i=>{n(i.error||new Error(i.message))};return window.addEventListener("error",r),()=>window.removeEventListener("error",r)},[]),e?s.jsxs("div",{style:{color:"red",padding:"2rem",textAlign:"center"},children:["Une erreur est survenue : ",e.message]}):s.jsx(s.Fragment,{children:t})}function Due(){return s.jsx(j9,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:s.jsx(EG,{children:s.jsxs(g9,{children:[s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx(AJ,{}),s.jsx("main",{className:"flex-1 pt-16",children:s.jsx(Oue,{children:s.jsxs(l9,{children:[s.jsx(hn,{path:"/",element:s.jsx(Zte,{})}),s.jsx(hn,{path:"/listings",element:s.jsx(Rne,{})}),s.jsx(hn,{path:"/listing/:id",element:s.jsx(Die,{})}),s.jsx(hn,{path:"/auth",element:s.jsx(Fle,{})}),s.jsx(hn,{path:"/help",element:s.jsx(ile,{})}),s.jsx(hn,{path:"/safety",element:s.jsx(cle,{})}),s.jsx(hn,{path:"/cart",element:s.jsx(Vle,{})}),s.jsx(hn,{path:"/products",element:s.jsx(Kle,{})}),s.jsx(hn,{path:"/checkout/success",element:s.jsx(Zle,{})}),s.jsx(hn,{path:"/checkout",element:s.jsx(pi,{children:s.jsx(zle,{})})}),s.jsx(hn,{path:"/orders",element:s.jsx(pi,{children:s.jsx(Ule,{})})}),s.jsx(hn,{path:"/order-confirmation/:orderId",element:s.jsx(pi,{children:s.jsx($le,{})})}),s.jsx(hn,{path:"/create",element:s.jsx(pi,{children:s.jsx(ooe,{})})}),s.jsx(hn,{path:"/profile",element:s.jsx(pi,{children:s.jsx(doe,{})})}),s.jsx(hn,{path:"/settings",element:s.jsx(pi,{children:s.jsx(boe,{})})}),s.jsx(hn,{path:"/impact",element:s.jsx(pi,{children:s.jsx(Ioe,{})})}),s.jsx(hn,{path:"/saved-searches",element:s.jsx(pi,{children:s.jsx(Roe,{})})}),s.jsx(hn,{path:"/favorites",element:s.jsx(pi,{children:s.jsx(Doe,{})})}),s.jsx(hn,{path:"/payments",element:s.jsx(pi,{children:s.jsx(Loe,{})})}),s.jsx(hn,{path:"/messages",element:s.jsx(pi,{children:s.jsx(jle,{})})}),s.jsx(hn,{path:"/edit-listing/:id",element:s.jsx(Xle,{})}),s.jsx(hn,{path:"/jobs",element:s.jsx(_ce,{})}),s.jsx(hn,{path:"/housing",element:s.jsx(jue,{})}),s.jsx(hn,{path:"*",element:s.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Page non trouvée (404)"})})]})})}),s.jsx(MJ,{}),s.jsx(Mue,{})]}),s.jsx(vz,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"1px solid hsl(var(--border))"}}})]})})})}$I(document.getElementById("root")).render(s.jsx(x.StrictMode,{children:s.jsx(Due,{})}));
