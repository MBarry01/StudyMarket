function OV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function LV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var LT={exports:{}},$v={},VT={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf=Symbol.for("react.element"),VV=Symbol.for("react.portal"),FV=Symbol.for("react.fragment"),$V=Symbol.for("react.strict_mode"),UV=Symbol.for("react.profiler"),zV=Symbol.for("react.provider"),BV=Symbol.for("react.context"),qV=Symbol.for("react.forward_ref"),WV=Symbol.for("react.suspense"),HV=Symbol.for("react.memo"),GV=Symbol.for("react.lazy"),BS=Symbol.iterator;function KV(t){return t===null||typeof t!="object"?null:(t=BS&&t[BS]||t["@@iterator"],typeof t=="function"?t:null)}var FT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$T=Object.assign,UT={};function Gu(t,e,n){this.props=t,this.context=e,this.refs=UT,this.updater=n||FT}Gu.prototype.isReactComponent={};Gu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zT(){}zT.prototype=Gu.prototype;function x_(t,e,n){this.props=t,this.context=e,this.refs=UT,this.updater=n||FT}var y_=x_.prototype=new zT;y_.constructor=x_;$T(y_,Gu.prototype);y_.isPureReactComponent=!0;var qS=Array.isArray,BT=Object.prototype.hasOwnProperty,w_={current:null},qT={key:!0,ref:!0,__self:!0,__source:!0};function WT(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)BT.call(e,r)&&!qT.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Vf,type:t,key:a,ref:o,props:s,_owner:w_.current}}function YV(t,e){return{$$typeof:Vf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function b_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vf}function QV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var WS=/\/+/g;function Dy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QV(""+t.key):e.toString(36)}function Mp(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vf:case VV:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Dy(o,0):r,qS(s)?(n="",t!=null&&(n=t.replace(WS,"$&/")+"/"),Mp(s,e,n,"",function(u){return u})):s!=null&&(b_(s)&&(s=YV(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(WS,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",qS(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+Dy(a,l);o+=Mp(a,e,n,c,s)}else if(c=KV(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+Dy(a,l++),o+=Mp(a,e,n,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Hm(t,e,n){if(t==null)return t;var r=[],s=0;return Mp(t,r,"","",function(a){return e.call(n,a,s++)}),r}function JV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jr={current:null},Op={transition:null},XV={ReactCurrentDispatcher:jr,ReactCurrentBatchConfig:Op,ReactCurrentOwner:w_};function HT(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:Hm,forEach:function(t,e,n){Hm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Hm(t,function(){e++}),e},toArray:function(t){return Hm(t,function(e){return e})||[]},only:function(t){if(!b_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ot.Component=Gu;ot.Fragment=FV;ot.Profiler=UV;ot.PureComponent=x_;ot.StrictMode=$V;ot.Suspense=WV;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XV;ot.act=HT;ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$T({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=w_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)BT.call(e,c)&&!qT.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Vf,type:t.type,key:s,ref:a,props:r,_owner:o}};ot.createContext=function(t){return t={$$typeof:BV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zV,_context:t},t.Consumer=t};ot.createElement=WT;ot.createFactory=function(t){var e=WT.bind(null,t);return e.type=t,e};ot.createRef=function(){return{current:null}};ot.forwardRef=function(t){return{$$typeof:qV,render:t}};ot.isValidElement=b_;ot.lazy=function(t){return{$$typeof:GV,_payload:{_status:-1,_result:t},_init:JV}};ot.memo=function(t,e){return{$$typeof:HV,type:t,compare:e===void 0?null:e}};ot.startTransition=function(t){var e=Op.transition;Op.transition={};try{t()}finally{Op.transition=e}};ot.unstable_act=HT;ot.useCallback=function(t,e){return jr.current.useCallback(t,e)};ot.useContext=function(t){return jr.current.useContext(t)};ot.useDebugValue=function(){};ot.useDeferredValue=function(t){return jr.current.useDeferredValue(t)};ot.useEffect=function(t,e){return jr.current.useEffect(t,e)};ot.useId=function(){return jr.current.useId()};ot.useImperativeHandle=function(t,e,n){return jr.current.useImperativeHandle(t,e,n)};ot.useInsertionEffect=function(t,e){return jr.current.useInsertionEffect(t,e)};ot.useLayoutEffect=function(t,e){return jr.current.useLayoutEffect(t,e)};ot.useMemo=function(t,e){return jr.current.useMemo(t,e)};ot.useReducer=function(t,e,n){return jr.current.useReducer(t,e,n)};ot.useRef=function(t){return jr.current.useRef(t)};ot.useState=function(t){return jr.current.useState(t)};ot.useSyncExternalStore=function(t,e,n){return jr.current.useSyncExternalStore(t,e,n)};ot.useTransition=function(){return jr.current.useTransition()};ot.version="18.3.1";VT.exports=ot;var g=VT.exports;const Se=Fv(g),GT=OV({__proto__:null,default:Se},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZV=g,eF=Symbol.for("react.element"),tF=Symbol.for("react.fragment"),nF=Object.prototype.hasOwnProperty,rF=ZV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sF={key:!0,ref:!0,__self:!0,__source:!0};function KT(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nF.call(e,r)&&!sF.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:eF,type:t,key:a,ref:o,props:s,_owner:rF.current}}$v.Fragment=tF;$v.jsx=KT;$v.jsxs=KT;LT.exports=$v;var i=LT.exports,YT={exports:{}},is={},QT={exports:{}},JT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,W){var U=L.length;L.push(W);e:for(;0<U;){var Z=U-1>>>1,oe=L[Z];if(0<s(oe,W))L[Z]=W,L[U]=oe,U=Z;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var W=L[0],U=L.pop();if(U!==W){L[0]=U;e:for(var Z=0,oe=L.length,ke=oe>>>1;Z<ke;){var et=2*(Z+1)-1,ae=L[et],fe=et+1,ce=L[fe];if(0>s(ae,U))fe<oe&&0>s(ce,ae)?(L[Z]=ce,L[fe]=U,Z=fe):(L[Z]=ae,L[et]=U,Z=et);else if(fe<oe&&0>s(ce,U))L[Z]=ce,L[fe]=U,Z=fe;else break e}}return W}function s(L,W){var U=L.sortIndex-W.sortIndex;return U!==0?U:L.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,v=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(L){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=L)r(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(u)}}function E(L){if(w=!1,_(L),!v)if(n(c)!==null)v=!0,H(S);else{var W=n(u);W!==null&&$(E,W.startTime-L)}}function S(L,W){v=!1,w&&(w=!1,y(A),A=-1),p=!0;var U=m;try{for(_(W),h=n(c);h!==null&&(!(h.expirationTime>W)||L&&!P());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,m=h.priorityLevel;var oe=Z(h.expirationTime<=W);W=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===n(c)&&r(c),_(W)}else r(c);h=n(c)}if(h!==null)var ke=!0;else{var et=n(u);et!==null&&$(E,et.startTime-W),ke=!1}return ke}finally{h=null,m=U,p=!1}}var D=!1,I=null,A=-1,R=5,N=-1;function P(){return!(t.unstable_now()-N<R)}function T(){if(I!==null){var L=t.unstable_now();N=L;var W=!0;try{W=I(!0,L)}finally{W?C():(D=!1,I=null)}}else D=!1}var C;if(typeof x=="function")C=function(){x(T)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,z=V.port2;V.port1.onmessage=T,C=function(){z.postMessage(null)}}else C=function(){b(T,0)};function H(L){I=L,D||(D=!0,C())}function $(L,W){A=b(function(){L(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,H(S))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(L){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var U=m;m=W;try{return L()}finally{m=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var U=m;m=L;try{return W()}finally{m=U}},t.unstable_scheduleCallback=function(L,W,U){var Z=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Z+U:Z):U=Z,L){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=U+oe,L={id:d++,callback:W,priorityLevel:L,startTime:U,expirationTime:oe,sortIndex:-1},U>Z?(L.sortIndex=U,e(u,L),n(c)===null&&L===n(u)&&(w?(y(A),A=-1):w=!0,$(E,U-Z))):(L.sortIndex=oe,e(c,L),v||p||(v=!0,H(S))),L},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(L){var W=m;return function(){var U=m;m=W;try{return L.apply(this,arguments)}finally{m=U}}}})(JT);QT.exports=JT;var iF=QT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF=g,rs=iF;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XT=new Set,Dh={};function Yl(t,e){gu(t,e),gu(t+"Capture",e)}function gu(t,e){for(Dh[t]=e,t=0;t<e.length;t++)XT.add(e[t])}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iw=Object.prototype.hasOwnProperty,oF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HS={},GS={};function lF(t){return iw.call(GS,t)?!0:iw.call(HS,t)?!1:oF.test(t)?GS[t]=!0:(HS[t]=!0,!1)}function cF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uF(t,e,n,r){if(e===null||typeof e>"u"||cF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nr(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gn[t]=new Nr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gn[e]=new Nr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gn[t]=new Nr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gn[t]=new Nr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gn[t]=new Nr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gn[t]=new Nr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gn[t]=new Nr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gn[t]=new Nr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gn[t]=new Nr(t,5,!1,t.toLowerCase(),null,!1,!1)});var __=/[\-:]([a-z])/g;function j_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(__,j_);Gn[e]=new Nr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(__,j_);Gn[e]=new Nr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(__,j_);Gn[e]=new Nr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gn[t]=new Nr(t,1,!1,t.toLowerCase(),null,!1,!1)});Gn.xlinkHref=new Nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gn[t]=new Nr(t,1,!1,t.toLowerCase(),null,!0,!0)});function N_(t,e,n,r){var s=Gn.hasOwnProperty(e)?Gn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uF(e,n,s,r)&&(n=null),r||s===null?lF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ja=aF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gm=Symbol.for("react.element"),Mc=Symbol.for("react.portal"),Oc=Symbol.for("react.fragment"),S_=Symbol.for("react.strict_mode"),aw=Symbol.for("react.profiler"),ZT=Symbol.for("react.provider"),eI=Symbol.for("react.context"),E_=Symbol.for("react.forward_ref"),ow=Symbol.for("react.suspense"),lw=Symbol.for("react.suspense_list"),C_=Symbol.for("react.memo"),Va=Symbol.for("react.lazy"),tI=Symbol.for("react.offscreen"),KS=Symbol.iterator;function Pd(t){return t===null||typeof t!="object"?null:(t=KS&&t[KS]||t["@@iterator"],typeof t=="function"?t:null)}var sn=Object.assign,My;function Yd(t){if(My===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);My=e&&e[1]||""}return`
`+My+t}var Oy=!1;function Ly(t,e){if(!t||Oy)return"";Oy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Oy=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yd(t):""}function dF(t){switch(t.tag){case 5:return Yd(t.type);case 16:return Yd("Lazy");case 13:return Yd("Suspense");case 19:return Yd("SuspenseList");case 0:case 2:case 15:return t=Ly(t.type,!1),t;case 11:return t=Ly(t.type.render,!1),t;case 1:return t=Ly(t.type,!0),t;default:return""}}function cw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oc:return"Fragment";case Mc:return"Portal";case aw:return"Profiler";case S_:return"StrictMode";case ow:return"Suspense";case lw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eI:return(t.displayName||"Context")+".Consumer";case ZT:return(t._context.displayName||"Context")+".Provider";case E_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C_:return e=t.displayName||null,e!==null?e:cw(t.type)||"Memo";case Va:e=t._payload,t=t._init;try{return cw(t(e))}catch{}}return null}function hF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cw(e);case 8:return e===S_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function go(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fF(t){var e=nI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Km(t){t._valueTracker||(t._valueTracker=fF(t))}function rI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=nI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uw(t,e){var n=e.checked;return sn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function YS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=go(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sI(t,e){e=e.checked,e!=null&&N_(t,"checked",e,!1)}function dw(t,e){sI(t,e);var n=go(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hw(t,e.type,n):e.hasOwnProperty("defaultValue")&&hw(t,e.type,go(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function QS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hw(t,e,n){(e!=="number"||hg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qd=Array.isArray;function Qc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+go(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function fw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return sn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function JS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(Qd(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:go(n)}}function iI(t,e){var n=go(e.value),r=go(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function XS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ym,oI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ym=Ym||document.createElement("div"),Ym.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ym.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Mh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var uh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mF=["Webkit","ms","Moz","O"];Object.keys(uh).forEach(function(t){mF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),uh[e]=uh[t]})});function lI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||uh.hasOwnProperty(t)&&uh[t]?(""+e).trim():e+"px"}function cI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=lI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var pF=sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pw(t,e){if(e){if(pF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function gw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vw=null;function k_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xw=null,Jc=null,Xc=null;function ZS(t){if(t=Uf(t)){if(typeof xw!="function")throw Error(le(280));var e=t.stateNode;e&&(e=Wv(e),xw(t.stateNode,t.type,e))}}function uI(t){Jc?Xc?Xc.push(t):Xc=[t]:Jc=t}function dI(){if(Jc){var t=Jc,e=Xc;if(Xc=Jc=null,ZS(t),e)for(t=0;t<e.length;t++)ZS(e[t])}}function hI(t,e){return t(e)}function fI(){}var Vy=!1;function mI(t,e,n){if(Vy)return t(e,n);Vy=!0;try{return hI(t,e,n)}finally{Vy=!1,(Jc!==null||Xc!==null)&&(fI(),dI())}}function Oh(t,e){var n=t.stateNode;if(n===null)return null;var r=Wv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var yw=!1;if(la)try{var Rd={};Object.defineProperty(Rd,"passive",{get:function(){yw=!0}}),window.addEventListener("test",Rd,Rd),window.removeEventListener("test",Rd,Rd)}catch{yw=!1}function gF(t,e,n,r,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var dh=!1,fg=null,mg=!1,ww=null,vF={onError:function(t){dh=!0,fg=t}};function xF(t,e,n,r,s,a,o,l,c){dh=!1,fg=null,gF.apply(vF,arguments)}function yF(t,e,n,r,s,a,o,l,c){if(xF.apply(this,arguments),dh){if(dh){var u=fg;dh=!1,fg=null}else throw Error(le(198));mg||(mg=!0,ww=u)}}function Ql(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function eE(t){if(Ql(t)!==t)throw Error(le(188))}function wF(t){var e=t.alternate;if(!e){if(e=Ql(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return eE(s),t;if(a===r)return eE(s),e;a=a.sibling}throw Error(le(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function gI(t){return t=wF(t),t!==null?vI(t):null}function vI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vI(t);if(e!==null)return e;t=t.sibling}return null}var xI=rs.unstable_scheduleCallback,tE=rs.unstable_cancelCallback,bF=rs.unstable_shouldYield,_F=rs.unstable_requestPaint,pn=rs.unstable_now,jF=rs.unstable_getCurrentPriorityLevel,T_=rs.unstable_ImmediatePriority,yI=rs.unstable_UserBlockingPriority,pg=rs.unstable_NormalPriority,NF=rs.unstable_LowPriority,wI=rs.unstable_IdlePriority,Uv=null,vi=null;function SF(t){if(vi&&typeof vi.onCommitFiberRoot=="function")try{vi.onCommitFiberRoot(Uv,t,void 0,(t.current.flags&128)===128)}catch{}}var Bs=Math.clz32?Math.clz32:kF,EF=Math.log,CF=Math.LN2;function kF(t){return t>>>=0,t===0?32:31-(EF(t)/CF|0)|0}var Qm=64,Jm=4194304;function Jd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Jd(l):(a&=o,a!==0&&(r=Jd(a)))}else o=n&~s,o!==0?r=Jd(o):a!==0&&(r=Jd(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bs(e),s=1<<n,r|=t[n],e&=~s;return r}function TF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Bs(a),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=TF(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function bw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bI(){var t=Qm;return Qm<<=1,!(Qm&4194240)&&(Qm=64),t}function Fy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ff(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bs(e),t[e]=n}function AF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Bs(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function I_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var At=0;function _I(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jI,A_,NI,SI,EI,_w=!1,Xm=[],no=null,ro=null,so=null,Lh=new Map,Vh=new Map,Ua=[],PF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nE(t,e){switch(t){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":Lh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vh.delete(e.pointerId)}}function Dd(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Uf(e),e!==null&&A_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function RF(t,e,n,r,s){switch(e){case"focusin":return no=Dd(no,t,e,n,r,s),!0;case"dragenter":return ro=Dd(ro,t,e,n,r,s),!0;case"mouseover":return so=Dd(so,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Lh.set(a,Dd(Lh.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Vh.set(a,Dd(Vh.get(a)||null,t,e,n,r,s)),!0}return!1}function CI(t){var e=ll(t.target);if(e!==null){var n=Ql(e);if(n!==null){if(e=n.tag,e===13){if(e=pI(n),e!==null){t.blockedOn=e,EI(t.priority,function(){NI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vw=r,n.target.dispatchEvent(r),vw=null}else return e=Uf(n),e!==null&&A_(e),t.blockedOn=n,!1;e.shift()}return!0}function rE(t,e,n){Lp(t)&&n.delete(e)}function DF(){_w=!1,no!==null&&Lp(no)&&(no=null),ro!==null&&Lp(ro)&&(ro=null),so!==null&&Lp(so)&&(so=null),Lh.forEach(rE),Vh.forEach(rE)}function Md(t,e){t.blockedOn===e&&(t.blockedOn=null,_w||(_w=!0,rs.unstable_scheduleCallback(rs.unstable_NormalPriority,DF)))}function Fh(t){function e(s){return Md(s,t)}if(0<Xm.length){Md(Xm[0],t);for(var n=1;n<Xm.length;n++){var r=Xm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(no!==null&&Md(no,t),ro!==null&&Md(ro,t),so!==null&&Md(so,t),Lh.forEach(e),Vh.forEach(e),n=0;n<Ua.length;n++)r=Ua[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ua.length&&(n=Ua[0],n.blockedOn===null);)CI(n),n.blockedOn===null&&Ua.shift()}var Zc=ja.ReactCurrentBatchConfig,vg=!0;function MF(t,e,n,r){var s=At,a=Zc.transition;Zc.transition=null;try{At=1,P_(t,e,n,r)}finally{At=s,Zc.transition=a}}function OF(t,e,n,r){var s=At,a=Zc.transition;Zc.transition=null;try{At=4,P_(t,e,n,r)}finally{At=s,Zc.transition=a}}function P_(t,e,n,r){if(vg){var s=jw(t,e,n,r);if(s===null)Yy(t,e,r,xg,n),nE(t,r);else if(RF(s,t,e,n,r))r.stopPropagation();else if(nE(t,r),e&4&&-1<PF.indexOf(t)){for(;s!==null;){var a=Uf(s);if(a!==null&&jI(a),a=jw(t,e,n,r),a===null&&Yy(t,e,r,xg,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Yy(t,e,r,null,n)}}var xg=null;function jw(t,e,n,r){if(xg=null,t=k_(r),t=ll(t),t!==null)if(e=Ql(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xg=t,null}function kI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jF()){case T_:return 1;case yI:return 4;case pg:case NF:return 16;case wI:return 536870912;default:return 16}default:return 16}}var Ja=null,R_=null,Vp=null;function TI(){if(Vp)return Vp;var t,e=R_,n=e.length,r,s="value"in Ja?Ja.value:Ja.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return Vp=s.slice(t,1<r?1-r:void 0)}function Fp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zm(){return!0}function sE(){return!1}function as(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Zm:sE,this.isPropagationStopped=sE,this}return sn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zm)},persist:function(){},isPersistent:Zm}),e}var Ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},D_=as(Ku),$f=sn({},Ku,{view:0,detail:0}),LF=as($f),$y,Uy,Od,zv=sn({},$f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:M_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Od&&(Od&&t.type==="mousemove"?($y=t.screenX-Od.screenX,Uy=t.screenY-Od.screenY):Uy=$y=0,Od=t),$y)},movementY:function(t){return"movementY"in t?t.movementY:Uy}}),iE=as(zv),VF=sn({},zv,{dataTransfer:0}),FF=as(VF),$F=sn({},$f,{relatedTarget:0}),zy=as($F),UF=sn({},Ku,{animationName:0,elapsedTime:0,pseudoElement:0}),zF=as(UF),BF=sn({},Ku,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qF=as(BF),WF=sn({},Ku,{data:0}),aE=as(WF),HF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KF[t])?!!e[t]:!1}function M_(){return YF}var QF=sn({},$f,{key:function(t){if(t.key){var e=HF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:M_,charCode:function(t){return t.type==="keypress"?Fp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JF=as(QF),XF=sn({},zv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oE=as(XF),ZF=sn({},$f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:M_}),e$=as(ZF),t$=sn({},Ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),n$=as(t$),r$=sn({},zv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),s$=as(r$),i$=[9,13,27,32],O_=la&&"CompositionEvent"in window,hh=null;la&&"documentMode"in document&&(hh=document.documentMode);var a$=la&&"TextEvent"in window&&!hh,II=la&&(!O_||hh&&8<hh&&11>=hh),lE=" ",cE=!1;function AI(t,e){switch(t){case"keyup":return i$.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lc=!1;function o$(t,e){switch(t){case"compositionend":return PI(e);case"keypress":return e.which!==32?null:(cE=!0,lE);case"textInput":return t=e.data,t===lE&&cE?null:t;default:return null}}function l$(t,e){if(Lc)return t==="compositionend"||!O_&&AI(t,e)?(t=TI(),Vp=R_=Ja=null,Lc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return II&&e.locale!=="ko"?null:e.data;default:return null}}var c$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!c$[t.type]:e==="textarea"}function RI(t,e,n,r){uI(r),e=yg(e,"onChange"),0<e.length&&(n=new D_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fh=null,$h=null;function u$(t){qI(t,0)}function Bv(t){var e=$c(t);if(rI(e))return t}function d$(t,e){if(t==="change")return e}var DI=!1;if(la){var By;if(la){var qy="oninput"in document;if(!qy){var dE=document.createElement("div");dE.setAttribute("oninput","return;"),qy=typeof dE.oninput=="function"}By=qy}else By=!1;DI=By&&(!document.documentMode||9<document.documentMode)}function hE(){fh&&(fh.detachEvent("onpropertychange",MI),$h=fh=null)}function MI(t){if(t.propertyName==="value"&&Bv($h)){var e=[];RI(e,$h,t,k_(t)),mI(u$,e)}}function h$(t,e,n){t==="focusin"?(hE(),fh=e,$h=n,fh.attachEvent("onpropertychange",MI)):t==="focusout"&&hE()}function f$(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bv($h)}function m$(t,e){if(t==="click")return Bv(e)}function p$(t,e){if(t==="input"||t==="change")return Bv(e)}function g$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ks=typeof Object.is=="function"?Object.is:g$;function Uh(t,e){if(Ks(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!iw.call(e,s)||!Ks(t[s],e[s]))return!1}return!0}function fE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mE(t,e){var n=fE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fE(n)}}function OI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function LI(){for(var t=window,e=hg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hg(t.document)}return e}function L_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function v$(t){var e=LI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&OI(n.ownerDocument.documentElement,n)){if(r!==null&&L_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=mE(n,a);var o=mE(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var x$=la&&"documentMode"in document&&11>=document.documentMode,Vc=null,Nw=null,mh=null,Sw=!1;function pE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sw||Vc==null||Vc!==hg(r)||(r=Vc,"selectionStart"in r&&L_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mh&&Uh(mh,r)||(mh=r,r=yg(Nw,"onSelect"),0<r.length&&(e=new D_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vc)))}function ep(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fc={animationend:ep("Animation","AnimationEnd"),animationiteration:ep("Animation","AnimationIteration"),animationstart:ep("Animation","AnimationStart"),transitionend:ep("Transition","TransitionEnd")},Wy={},VI={};la&&(VI=document.createElement("div").style,"AnimationEvent"in window||(delete Fc.animationend.animation,delete Fc.animationiteration.animation,delete Fc.animationstart.animation),"TransitionEvent"in window||delete Fc.transitionend.transition);function qv(t){if(Wy[t])return Wy[t];if(!Fc[t])return t;var e=Fc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in VI)return Wy[t]=e[n];return t}var FI=qv("animationend"),$I=qv("animationiteration"),UI=qv("animationstart"),zI=qv("transitionend"),BI=new Map,gE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Po(t,e){BI.set(t,e),Yl(e,[t])}for(var Hy=0;Hy<gE.length;Hy++){var Gy=gE[Hy],y$=Gy.toLowerCase(),w$=Gy[0].toUpperCase()+Gy.slice(1);Po(y$,"on"+w$)}Po(FI,"onAnimationEnd");Po($I,"onAnimationIteration");Po(UI,"onAnimationStart");Po("dblclick","onDoubleClick");Po("focusin","onFocus");Po("focusout","onBlur");Po(zI,"onTransitionEnd");gu("onMouseEnter",["mouseout","mouseover"]);gu("onMouseLeave",["mouseout","mouseover"]);gu("onPointerEnter",["pointerout","pointerover"]);gu("onPointerLeave",["pointerout","pointerover"]);Yl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xd));function vE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yF(r,e,void 0,t),t.currentTarget=null}function qI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;vE(s,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;vE(s,l,u),a=c}}}if(mg)throw t=ww,mg=!1,ww=null,t}function Ht(t,e){var n=e[Iw];n===void 0&&(n=e[Iw]=new Set);var r=t+"__bubble";n.has(r)||(WI(e,t,2,!1),n.add(r))}function Ky(t,e,n){var r=0;e&&(r|=4),WI(n,t,r,e)}var tp="_reactListening"+Math.random().toString(36).slice(2);function zh(t){if(!t[tp]){t[tp]=!0,XT.forEach(function(n){n!=="selectionchange"&&(b$.has(n)||Ky(n,!1,t),Ky(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tp]||(e[tp]=!0,Ky("selectionchange",!1,e))}}function WI(t,e,n,r){switch(kI(e)){case 1:var s=MF;break;case 4:s=OF;break;default:s=P_}n=s.bind(null,e,n,t),s=void 0,!yw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Yy(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ll(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}mI(function(){var u=a,d=k_(n),h=[];e:{var m=BI.get(t);if(m!==void 0){var p=D_,v=t;switch(t){case"keypress":if(Fp(n)===0)break e;case"keydown":case"keyup":p=JF;break;case"focusin":v="focus",p=zy;break;case"focusout":v="blur",p=zy;break;case"beforeblur":case"afterblur":p=zy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=iE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=FF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=e$;break;case FI:case $I:case UI:p=zF;break;case zI:p=n$;break;case"scroll":p=LF;break;case"wheel":p=s$;break;case"copy":case"cut":case"paste":p=qF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=oE}var w=(e&4)!==0,b=!w&&t==="scroll",y=w?m!==null?m+"Capture":null:m;w=[];for(var x=u,_;x!==null;){_=x;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,y!==null&&(E=Oh(x,y),E!=null&&w.push(Bh(x,E,_)))),b)break;x=x.return}0<w.length&&(m=new p(m,v,null,n,d),h.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==vw&&(v=n.relatedTarget||n.fromElement)&&(ll(v)||v[ca]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=u,v=v?ll(v):null,v!==null&&(b=Ql(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(w=iE,E="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(w=oE,E="onPointerLeave",y="onPointerEnter",x="pointer"),b=p==null?m:$c(p),_=v==null?m:$c(v),m=new w(E,x+"leave",p,n,d),m.target=b,m.relatedTarget=_,E=null,ll(d)===u&&(w=new w(y,x+"enter",v,n,d),w.target=_,w.relatedTarget=b,E=w),b=E,p&&v)t:{for(w=p,y=v,x=0,_=w;_;_=vc(_))x++;for(_=0,E=y;E;E=vc(E))_++;for(;0<x-_;)w=vc(w),x--;for(;0<_-x;)y=vc(y),_--;for(;x--;){if(w===y||y!==null&&w===y.alternate)break t;w=vc(w),y=vc(y)}w=null}else w=null;p!==null&&xE(h,m,p,w,!1),v!==null&&b!==null&&xE(h,b,v,w,!0)}}e:{if(m=u?$c(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=d$;else if(uE(m))if(DI)S=p$;else{S=f$;var D=h$}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=m$);if(S&&(S=S(t,u))){RI(h,S,n,d);break e}D&&D(t,m,u),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&hw(m,"number",m.value)}switch(D=u?$c(u):window,t){case"focusin":(uE(D)||D.contentEditable==="true")&&(Vc=D,Nw=u,mh=null);break;case"focusout":mh=Nw=Vc=null;break;case"mousedown":Sw=!0;break;case"contextmenu":case"mouseup":case"dragend":Sw=!1,pE(h,n,d);break;case"selectionchange":if(x$)break;case"keydown":case"keyup":pE(h,n,d)}var I;if(O_)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Lc?AI(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(II&&n.locale!=="ko"&&(Lc||A!=="onCompositionStart"?A==="onCompositionEnd"&&Lc&&(I=TI()):(Ja=d,R_="value"in Ja?Ja.value:Ja.textContent,Lc=!0)),D=yg(u,A),0<D.length&&(A=new aE(A,t,null,n,d),h.push({event:A,listeners:D}),I?A.data=I:(I=PI(n),I!==null&&(A.data=I)))),(I=a$?o$(t,n):l$(t,n))&&(u=yg(u,"onBeforeInput"),0<u.length&&(d=new aE("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=I))}qI(h,e)})}function Bh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yg(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Oh(t,n),a!=null&&r.unshift(Bh(t,a,s)),a=Oh(t,e),a!=null&&r.push(Bh(t,a,s))),t=t.return}return r}function vc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xE(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Oh(n,a),c!=null&&o.unshift(Bh(n,c,l))):s||(c=Oh(n,a),c!=null&&o.push(Bh(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _$=/\r\n?/g,j$=/\u0000|\uFFFD/g;function yE(t){return(typeof t=="string"?t:""+t).replace(_$,`
`).replace(j$,"")}function np(t,e,n){if(e=yE(e),yE(t)!==e&&n)throw Error(le(425))}function wg(){}var Ew=null,Cw=null;function kw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tw=typeof setTimeout=="function"?setTimeout:void 0,N$=typeof clearTimeout=="function"?clearTimeout:void 0,wE=typeof Promise=="function"?Promise:void 0,S$=typeof queueMicrotask=="function"?queueMicrotask:typeof wE<"u"?function(t){return wE.resolve(null).then(t).catch(E$)}:Tw;function E$(t){setTimeout(function(){throw t})}function Qy(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fh(e)}function io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yu=Math.random().toString(36).slice(2),li="__reactFiber$"+Yu,qh="__reactProps$"+Yu,ca="__reactContainer$"+Yu,Iw="__reactEvents$"+Yu,C$="__reactListeners$"+Yu,k$="__reactHandles$"+Yu;function ll(t){var e=t[li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ca]||n[li]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bE(t);t!==null;){if(n=t[li])return n;t=bE(t)}return e}t=n,n=t.parentNode}return null}function Uf(t){return t=t[li]||t[ca],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $c(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function Wv(t){return t[qh]||null}var Aw=[],Uc=-1;function Ro(t){return{current:t}}function Yt(t){0>Uc||(t.current=Aw[Uc],Aw[Uc]=null,Uc--)}function Ft(t,e){Uc++,Aw[Uc]=t.current,t.current=e}var vo={},lr=Ro(vo),Or=Ro(!1),Sl=vo;function vu(t,e){var n=t.type.contextTypes;if(!n)return vo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Lr(t){return t=t.childContextTypes,t!=null}function bg(){Yt(Or),Yt(lr)}function _E(t,e,n){if(lr.current!==vo)throw Error(le(168));Ft(lr,e),Ft(Or,n)}function HI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(le(108,hF(t)||"Unknown",s));return sn({},n,r)}function _g(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vo,Sl=lr.current,Ft(lr,t),Ft(Or,Or.current),!0}function jE(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=HI(t,e,Sl),r.__reactInternalMemoizedMergedChildContext=t,Yt(Or),Yt(lr),Ft(lr,t)):Yt(Or),Ft(Or,n)}var Hi=null,Hv=!1,Jy=!1;function GI(t){Hi===null?Hi=[t]:Hi.push(t)}function T$(t){Hv=!0,GI(t)}function Do(){if(!Jy&&Hi!==null){Jy=!0;var t=0,e=At;try{var n=Hi;for(At=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hi=null,Hv=!1}catch(s){throw Hi!==null&&(Hi=Hi.slice(t+1)),xI(T_,Do),s}finally{At=e,Jy=!1}}return null}var zc=[],Bc=0,jg=null,Ng=0,ds=[],hs=0,El=null,Yi=1,Qi="";function nl(t,e){zc[Bc++]=Ng,zc[Bc++]=jg,jg=t,Ng=e}function KI(t,e,n){ds[hs++]=Yi,ds[hs++]=Qi,ds[hs++]=El,El=t;var r=Yi;t=Qi;var s=32-Bs(r)-1;r&=~(1<<s),n+=1;var a=32-Bs(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Yi=1<<32-Bs(e)+s|n<<s|r,Qi=a+t}else Yi=1<<a|n<<s|r,Qi=t}function V_(t){t.return!==null&&(nl(t,1),KI(t,1,0))}function F_(t){for(;t===jg;)jg=zc[--Bc],zc[Bc]=null,Ng=zc[--Bc],zc[Bc]=null;for(;t===El;)El=ds[--hs],ds[hs]=null,Qi=ds[--hs],ds[hs]=null,Yi=ds[--hs],ds[hs]=null}var Xr=null,Kr=null,Xt=!1,Fs=null;function YI(t,e){var n=ps(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function NE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xr=t,Kr=io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xr=t,Kr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=El!==null?{id:Yi,overflow:Qi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ps(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xr=t,Kr=null,!0):!1;default:return!1}}function Pw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rw(t){if(Xt){var e=Kr;if(e){var n=e;if(!NE(t,e)){if(Pw(t))throw Error(le(418));e=io(n.nextSibling);var r=Xr;e&&NE(t,e)?YI(r,n):(t.flags=t.flags&-4097|2,Xt=!1,Xr=t)}}else{if(Pw(t))throw Error(le(418));t.flags=t.flags&-4097|2,Xt=!1,Xr=t}}}function SE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xr=t}function rp(t){if(t!==Xr)return!1;if(!Xt)return SE(t),Xt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kw(t.type,t.memoizedProps)),e&&(e=Kr)){if(Pw(t))throw QI(),Error(le(418));for(;e;)YI(t,e),e=io(e.nextSibling)}if(SE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kr=io(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kr=null}}else Kr=Xr?io(t.stateNode.nextSibling):null;return!0}function QI(){for(var t=Kr;t;)t=io(t.nextSibling)}function xu(){Kr=Xr=null,Xt=!1}function $_(t){Fs===null?Fs=[t]:Fs.push(t)}var I$=ja.ReactCurrentBatchConfig;function Ld(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function sp(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function EE(t){var e=t._init;return e(t._payload)}function JI(t){function e(y,x){if(t){var _=y.deletions;_===null?(y.deletions=[x],y.flags|=16):_.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=co(y,x),y.index=0,y.sibling=null,y}function a(y,x,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<x?(y.flags|=2,x):_):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,x,_,E){return x===null||x.tag!==6?(x=s0(_,y.mode,E),x.return=y,x):(x=s(x,_),x.return=y,x)}function c(y,x,_,E){var S=_.type;return S===Oc?d(y,x,_.props.children,E,_.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Va&&EE(S)===x.type)?(E=s(x,_.props),E.ref=Ld(y,x,_),E.return=y,E):(E=Hp(_.type,_.key,_.props,null,y.mode,E),E.ref=Ld(y,x,_),E.return=y,E)}function u(y,x,_,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=i0(_,y.mode,E),x.return=y,x):(x=s(x,_.children||[]),x.return=y,x)}function d(y,x,_,E,S){return x===null||x.tag!==7?(x=gl(_,y.mode,E,S),x.return=y,x):(x=s(x,_),x.return=y,x)}function h(y,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=s0(""+x,y.mode,_),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Gm:return _=Hp(x.type,x.key,x.props,null,y.mode,_),_.ref=Ld(y,null,x),_.return=y,_;case Mc:return x=i0(x,y.mode,_),x.return=y,x;case Va:var E=x._init;return h(y,E(x._payload),_)}if(Qd(x)||Pd(x))return x=gl(x,y.mode,_,null),x.return=y,x;sp(y,x)}return null}function m(y,x,_,E){var S=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:l(y,x,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Gm:return _.key===S?c(y,x,_,E):null;case Mc:return _.key===S?u(y,x,_,E):null;case Va:return S=_._init,m(y,x,S(_._payload),E)}if(Qd(_)||Pd(_))return S!==null?null:d(y,x,_,E,null);sp(y,_)}return null}function p(y,x,_,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(_)||null,l(x,y,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Gm:return y=y.get(E.key===null?_:E.key)||null,c(x,y,E,S);case Mc:return y=y.get(E.key===null?_:E.key)||null,u(x,y,E,S);case Va:var D=E._init;return p(y,x,_,D(E._payload),S)}if(Qd(E)||Pd(E))return y=y.get(_)||null,d(x,y,E,S,null);sp(x,E)}return null}function v(y,x,_,E){for(var S=null,D=null,I=x,A=x=0,R=null;I!==null&&A<_.length;A++){I.index>A?(R=I,I=null):R=I.sibling;var N=m(y,I,_[A],E);if(N===null){I===null&&(I=R);break}t&&I&&N.alternate===null&&e(y,I),x=a(N,x,A),D===null?S=N:D.sibling=N,D=N,I=R}if(A===_.length)return n(y,I),Xt&&nl(y,A),S;if(I===null){for(;A<_.length;A++)I=h(y,_[A],E),I!==null&&(x=a(I,x,A),D===null?S=I:D.sibling=I,D=I);return Xt&&nl(y,A),S}for(I=r(y,I);A<_.length;A++)R=p(I,y,A,_[A],E),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?A:R.key),x=a(R,x,A),D===null?S=R:D.sibling=R,D=R);return t&&I.forEach(function(P){return e(y,P)}),Xt&&nl(y,A),S}function w(y,x,_,E){var S=Pd(_);if(typeof S!="function")throw Error(le(150));if(_=S.call(_),_==null)throw Error(le(151));for(var D=S=null,I=x,A=x=0,R=null,N=_.next();I!==null&&!N.done;A++,N=_.next()){I.index>A?(R=I,I=null):R=I.sibling;var P=m(y,I,N.value,E);if(P===null){I===null&&(I=R);break}t&&I&&P.alternate===null&&e(y,I),x=a(P,x,A),D===null?S=P:D.sibling=P,D=P,I=R}if(N.done)return n(y,I),Xt&&nl(y,A),S;if(I===null){for(;!N.done;A++,N=_.next())N=h(y,N.value,E),N!==null&&(x=a(N,x,A),D===null?S=N:D.sibling=N,D=N);return Xt&&nl(y,A),S}for(I=r(y,I);!N.done;A++,N=_.next())N=p(I,y,A,N.value,E),N!==null&&(t&&N.alternate!==null&&I.delete(N.key===null?A:N.key),x=a(N,x,A),D===null?S=N:D.sibling=N,D=N);return t&&I.forEach(function(T){return e(y,T)}),Xt&&nl(y,A),S}function b(y,x,_,E){if(typeof _=="object"&&_!==null&&_.type===Oc&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Gm:e:{for(var S=_.key,D=x;D!==null;){if(D.key===S){if(S=_.type,S===Oc){if(D.tag===7){n(y,D.sibling),x=s(D,_.props.children),x.return=y,y=x;break e}}else if(D.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Va&&EE(S)===D.type){n(y,D.sibling),x=s(D,_.props),x.ref=Ld(y,D,_),x.return=y,y=x;break e}n(y,D);break}else e(y,D);D=D.sibling}_.type===Oc?(x=gl(_.props.children,y.mode,E,_.key),x.return=y,y=x):(E=Hp(_.type,_.key,_.props,null,y.mode,E),E.ref=Ld(y,x,_),E.return=y,y=E)}return o(y);case Mc:e:{for(D=_.key;x!==null;){if(x.key===D)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(y,x.sibling),x=s(x,_.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=i0(_,y.mode,E),x.return=y,y=x}return o(y);case Va:return D=_._init,b(y,x,D(_._payload),E)}if(Qd(_))return v(y,x,_,E);if(Pd(_))return w(y,x,_,E);sp(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(y,x.sibling),x=s(x,_),x.return=y,y=x):(n(y,x),x=s0(_,y.mode,E),x.return=y,y=x),o(y)):n(y,x)}return b}var yu=JI(!0),XI=JI(!1),Sg=Ro(null),Eg=null,qc=null,U_=null;function z_(){U_=qc=Eg=null}function B_(t){var e=Sg.current;Yt(Sg),t._currentValue=e}function Dw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function eu(t,e){Eg=t,U_=qc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rr=!0),t.firstContext=null)}function Ns(t){var e=t._currentValue;if(U_!==t)if(t={context:t,memoizedValue:e,next:null},qc===null){if(Eg===null)throw Error(le(308));qc=t,Eg.dependencies={lanes:0,firstContext:t}}else qc=qc.next=t;return e}var cl=null;function q_(t){cl===null?cl=[t]:cl.push(t)}function ZI(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,q_(e)):(n.next=s.next,s.next=n),e.interleaved=n,ua(t,r)}function ua(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fa=!1;function W_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ta(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ao(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,jt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ua(t,n)}return s=r.interleaved,s===null?(e.next=e,q_(r)):(e.next=s.next,s.next=e),r.interleaved=e,ua(t,n)}function $p(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,I_(t,n)}}function CE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cg(t,e,n,r){var s=t.updateQueue;Fa=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;o=0,d=u=c=null,l=a;do{var m=l.lane,p=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,w=l;switch(m=e,p=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(p,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,m=typeof v=="function"?v.call(p,h,m):v,m==null)break e;h=sn({},h,m);break e;case 2:Fa=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);kl|=o,t.lanes=o,t.memoizedState=h}}function kE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(le(191,s));s.call(r)}}}var zf={},xi=Ro(zf),Wh=Ro(zf),Hh=Ro(zf);function ul(t){if(t===zf)throw Error(le(174));return t}function H_(t,e){switch(Ft(Hh,e),Ft(Wh,t),Ft(xi,zf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mw(e,t)}Yt(xi),Ft(xi,e)}function wu(){Yt(xi),Yt(Wh),Yt(Hh)}function tA(t){ul(Hh.current);var e=ul(xi.current),n=mw(e,t.type);e!==n&&(Ft(Wh,t),Ft(xi,n))}function G_(t){Wh.current===t&&(Yt(xi),Yt(Wh))}var nn=Ro(0);function kg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xy=[];function K_(){for(var t=0;t<Xy.length;t++)Xy[t]._workInProgressVersionPrimary=null;Xy.length=0}var Up=ja.ReactCurrentDispatcher,Zy=ja.ReactCurrentBatchConfig,Cl=0,rn=null,Tn=null,Vn=null,Tg=!1,ph=!1,Gh=0,A$=0;function Xn(){throw Error(le(321))}function Y_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ks(t[n],e[n]))return!1;return!0}function Q_(t,e,n,r,s,a){if(Cl=a,rn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Up.current=t===null||t.memoizedState===null?M$:O$,t=n(r,s),ph){a=0;do{if(ph=!1,Gh=0,25<=a)throw Error(le(301));a+=1,Vn=Tn=null,e.updateQueue=null,Up.current=L$,t=n(r,s)}while(ph)}if(Up.current=Ig,e=Tn!==null&&Tn.next!==null,Cl=0,Vn=Tn=rn=null,Tg=!1,e)throw Error(le(300));return t}function J_(){var t=Gh!==0;return Gh=0,t}function ai(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?rn.memoizedState=Vn=t:Vn=Vn.next=t,Vn}function Ss(){if(Tn===null){var t=rn.alternate;t=t!==null?t.memoizedState:null}else t=Tn.next;var e=Vn===null?rn.memoizedState:Vn.next;if(e!==null)Vn=e,Tn=t;else{if(t===null)throw Error(le(310));Tn=t,t={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},Vn===null?rn.memoizedState=Vn=t:Vn=Vn.next=t}return Vn}function Kh(t,e){return typeof e=="function"?e(t):e}function e0(t){var e=Ss(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=Tn,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Cl&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,rn.lanes|=d,kl|=d}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,Ks(r,e.memoizedState)||(Rr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,rn.lanes|=a,kl|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function t0(t){var e=Ss(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);Ks(a,e.memoizedState)||(Rr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function nA(){}function rA(t,e){var n=rn,r=Ss(),s=e(),a=!Ks(r.memoizedState,s);if(a&&(r.memoizedState=s,Rr=!0),r=r.queue,X_(aA.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Vn!==null&&Vn.memoizedState.tag&1){if(n.flags|=2048,Yh(9,iA.bind(null,n,r,s,e),void 0,null),Fn===null)throw Error(le(349));Cl&30||sA(n,e,s)}return s}function sA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rn.updateQueue,e===null?(e={lastEffect:null,stores:null},rn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iA(t,e,n,r){e.value=n,e.getSnapshot=r,oA(e)&&lA(t)}function aA(t,e,n){return n(function(){oA(e)&&lA(t)})}function oA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ks(t,n)}catch{return!0}}function lA(t){var e=ua(t,1);e!==null&&qs(e,t,1,-1)}function TE(t){var e=ai();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kh,lastRenderedState:t},e.queue=t,t=t.dispatch=D$.bind(null,rn,t),[e.memoizedState,t]}function Yh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rn.updateQueue,e===null?(e={lastEffect:null,stores:null},rn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function cA(){return Ss().memoizedState}function zp(t,e,n,r){var s=ai();rn.flags|=t,s.memoizedState=Yh(1|e,n,void 0,r===void 0?null:r)}function Gv(t,e,n,r){var s=Ss();r=r===void 0?null:r;var a=void 0;if(Tn!==null){var o=Tn.memoizedState;if(a=o.destroy,r!==null&&Y_(r,o.deps)){s.memoizedState=Yh(e,n,a,r);return}}rn.flags|=t,s.memoizedState=Yh(1|e,n,a,r)}function IE(t,e){return zp(8390656,8,t,e)}function X_(t,e){return Gv(2048,8,t,e)}function uA(t,e){return Gv(4,2,t,e)}function dA(t,e){return Gv(4,4,t,e)}function hA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fA(t,e,n){return n=n!=null?n.concat([t]):null,Gv(4,4,hA.bind(null,e,t),n)}function Z_(){}function mA(t,e){var n=Ss();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Y_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pA(t,e){var n=Ss();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Y_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function gA(t,e,n){return Cl&21?(Ks(n,e)||(n=bI(),rn.lanes|=n,kl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rr=!0),t.memoizedState=n)}function P$(t,e){var n=At;At=n!==0&&4>n?n:4,t(!0);var r=Zy.transition;Zy.transition={};try{t(!1),e()}finally{At=n,Zy.transition=r}}function vA(){return Ss().memoizedState}function R$(t,e,n){var r=lo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xA(t))yA(e,n);else if(n=ZI(t,e,n,r),n!==null){var s=yr();qs(n,t,r,s),wA(n,e,r)}}function D$(t,e,n){var r=lo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xA(t))yA(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,Ks(l,o)){var c=e.interleaved;c===null?(s.next=s,q_(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=ZI(t,e,s,r),n!==null&&(s=yr(),qs(n,t,r,s),wA(n,e,r))}}function xA(t){var e=t.alternate;return t===rn||e!==null&&e===rn}function yA(t,e){ph=Tg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,I_(t,n)}}var Ig={readContext:Ns,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useInsertionEffect:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useSyncExternalStore:Xn,useId:Xn,unstable_isNewReconciler:!1},M$={readContext:Ns,useCallback:function(t,e){return ai().memoizedState=[t,e===void 0?null:e],t},useContext:Ns,useEffect:IE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zp(4194308,4,hA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zp(4194308,4,t,e)},useInsertionEffect:function(t,e){return zp(4,2,t,e)},useMemo:function(t,e){var n=ai();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ai();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=R$.bind(null,rn,t),[r.memoizedState,t]},useRef:function(t){var e=ai();return t={current:t},e.memoizedState=t},useState:TE,useDebugValue:Z_,useDeferredValue:function(t){return ai().memoizedState=t},useTransition:function(){var t=TE(!1),e=t[0];return t=P$.bind(null,t[1]),ai().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rn,s=ai();if(Xt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),Fn===null)throw Error(le(349));Cl&30||sA(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,IE(aA.bind(null,r,a,t),[t]),r.flags|=2048,Yh(9,iA.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=ai(),e=Fn.identifierPrefix;if(Xt){var n=Qi,r=Yi;n=(r&~(1<<32-Bs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=A$++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},O$={readContext:Ns,useCallback:mA,useContext:Ns,useEffect:X_,useImperativeHandle:fA,useInsertionEffect:uA,useLayoutEffect:dA,useMemo:pA,useReducer:e0,useRef:cA,useState:function(){return e0(Kh)},useDebugValue:Z_,useDeferredValue:function(t){var e=Ss();return gA(e,Tn.memoizedState,t)},useTransition:function(){var t=e0(Kh)[0],e=Ss().memoizedState;return[t,e]},useMutableSource:nA,useSyncExternalStore:rA,useId:vA,unstable_isNewReconciler:!1},L$={readContext:Ns,useCallback:mA,useContext:Ns,useEffect:X_,useImperativeHandle:fA,useInsertionEffect:uA,useLayoutEffect:dA,useMemo:pA,useReducer:t0,useRef:cA,useState:function(){return t0(Kh)},useDebugValue:Z_,useDeferredValue:function(t){var e=Ss();return Tn===null?e.memoizedState=t:gA(e,Tn.memoizedState,t)},useTransition:function(){var t=t0(Kh)[0],e=Ss().memoizedState;return[t,e]},useMutableSource:nA,useSyncExternalStore:rA,useId:vA,unstable_isNewReconciler:!1};function Ms(t,e){if(t&&t.defaultProps){e=sn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:sn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kv={isMounted:function(t){return(t=t._reactInternals)?Ql(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yr(),s=lo(t),a=ta(r,s);a.payload=e,n!=null&&(a.callback=n),e=ao(t,a,s),e!==null&&(qs(e,t,s,r),$p(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yr(),s=lo(t),a=ta(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=ao(t,a,s),e!==null&&(qs(e,t,s,r),$p(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yr(),r=lo(t),s=ta(n,r);s.tag=2,e!=null&&(s.callback=e),e=ao(t,s,r),e!==null&&(qs(e,t,r,n),$p(e,t,r))}};function AE(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Uh(n,r)||!Uh(s,a):!0}function bA(t,e,n){var r=!1,s=vo,a=e.contextType;return typeof a=="object"&&a!==null?a=Ns(a):(s=Lr(e)?Sl:lr.current,r=e.contextTypes,a=(r=r!=null)?vu(t,s):vo),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function PE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Kv.enqueueReplaceState(e,e.state,null)}function Ow(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},W_(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Ns(a):(a=Lr(e)?Sl:lr.current,s.context=vu(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Mw(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Kv.enqueueReplaceState(s,s.state,null),Cg(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function bu(t,e){try{var n="",r=e;do n+=dF(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function n0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var V$=typeof WeakMap=="function"?WeakMap:Map;function _A(t,e,n){n=ta(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pg||(Pg=!0,Gw=r),Lw(t,e)},n}function jA(t,e,n){n=ta(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Lw(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Lw(t,e),typeof r!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function RE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new V$;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=X$.bind(null,t,e,n),e.then(t,t))}function DE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ME(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ta(-1,1),e.tag=2,ao(n,e,1))),n.lanes|=1),t)}var F$=ja.ReactCurrentOwner,Rr=!1;function pr(t,e,n,r){e.child=t===null?XI(e,null,n,r):yu(e,t.child,n,r)}function OE(t,e,n,r,s){n=n.render;var a=e.ref;return eu(e,s),r=Q_(t,e,n,r,a,s),n=J_(),t!==null&&!Rr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,da(t,e,s)):(Xt&&n&&V_(e),e.flags|=1,pr(t,e,r,s),e.child)}function LE(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!o1(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,NA(t,e,a,r,s)):(t=Hp(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Uh,n(o,r)&&t.ref===e.ref)return da(t,e,s)}return e.flags|=1,t=co(a,r),t.ref=e.ref,t.return=e,e.child=t}function NA(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(Uh(a,r)&&t.ref===e.ref)if(Rr=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(Rr=!0);else return e.lanes=t.lanes,da(t,e,s)}return Vw(t,e,n,r,s)}function SA(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(Hc,Wr),Wr|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ft(Hc,Wr),Wr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Ft(Hc,Wr),Wr|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Ft(Hc,Wr),Wr|=r;return pr(t,e,s,n),e.child}function EA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vw(t,e,n,r,s){var a=Lr(n)?Sl:lr.current;return a=vu(e,a),eu(e,s),n=Q_(t,e,n,r,a,s),r=J_(),t!==null&&!Rr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,da(t,e,s)):(Xt&&r&&V_(e),e.flags|=1,pr(t,e,n,s),e.child)}function VE(t,e,n,r,s){if(Lr(n)){var a=!0;_g(e)}else a=!1;if(eu(e,s),e.stateNode===null)Bp(t,e),bA(e,n,r),Ow(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ns(u):(u=Lr(n)?Sl:lr.current,u=vu(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&PE(e,o,r,u),Fa=!1;var m=e.memoizedState;o.state=m,Cg(e,r,o,s),c=e.memoizedState,l!==r||m!==c||Or.current||Fa?(typeof d=="function"&&(Mw(e,n,d,r),c=e.memoizedState),(l=Fa||AE(e,n,l,r,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,eA(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ms(e.type,l),o.props=u,h=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ns(c):(c=Lr(n)?Sl:lr.current,c=vu(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&PE(e,o,r,c),Fa=!1,m=e.memoizedState,o.state=m,Cg(e,r,o,s);var v=e.memoizedState;l!==h||m!==v||Or.current||Fa?(typeof p=="function"&&(Mw(e,n,p,r),v=e.memoizedState),(u=Fa||AE(e,n,u,r,m,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Fw(t,e,n,r,a,s)}function Fw(t,e,n,r,s,a){EA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&jE(e,n,!1),da(t,e,a);r=e.stateNode,F$.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=yu(e,t.child,null,a),e.child=yu(e,null,l,a)):pr(t,e,l,a),e.memoizedState=r.state,s&&jE(e,n,!0),e.child}function CA(t){var e=t.stateNode;e.pendingContext?_E(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_E(t,e.context,!1),H_(t,e.containerInfo)}function FE(t,e,n,r,s){return xu(),$_(s),e.flags|=256,pr(t,e,n,r),e.child}var $w={dehydrated:null,treeContext:null,retryLane:0};function Uw(t){return{baseLanes:t,cachePool:null,transitions:null}}function kA(t,e,n){var r=e.pendingProps,s=nn.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ft(nn,s&1),t===null)return Rw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Jv(o,r,0,null),t=gl(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Uw(n),e.memoizedState=$w,t):e1(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return $$(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=co(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=co(l,a):(a=gl(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Uw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=$w,r}return a=t.child,t=a.sibling,r=co(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function e1(t,e){return e=Jv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ip(t,e,n,r){return r!==null&&$_(r),yu(e,t.child,null,n),t=e1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $$(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=n0(Error(le(422))),ip(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=Jv({mode:"visible",children:r.children},s,0,null),a=gl(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&yu(e,t.child,null,o),e.child.memoizedState=Uw(o),e.memoizedState=$w,a);if(!(e.mode&1))return ip(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(le(419)),r=n0(a,r,void 0),ip(t,e,o,r)}if(l=(o&t.childLanes)!==0,Rr||l){if(r=Fn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ua(t,s),qs(r,t,s,-1))}return a1(),r=n0(Error(le(421))),ip(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Z$.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Kr=io(s.nextSibling),Xr=e,Xt=!0,Fs=null,t!==null&&(ds[hs++]=Yi,ds[hs++]=Qi,ds[hs++]=El,Yi=t.id,Qi=t.overflow,El=e),e=e1(e,r.children),e.flags|=4096,e)}function $E(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dw(t.return,e,n)}function r0(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function TA(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(pr(t,e,r.children,n),r=nn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$E(t,n,e);else if(t.tag===19)$E(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ft(nn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&kg(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),r0(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&kg(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}r0(e,!0,n,null,a);break;case"together":r0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function da(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=co(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=co(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function U$(t,e,n){switch(e.tag){case 3:CA(e),xu();break;case 5:tA(e);break;case 1:Lr(e.type)&&_g(e);break;case 4:H_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ft(Sg,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ft(nn,nn.current&1),e.flags|=128,null):n&e.child.childLanes?kA(t,e,n):(Ft(nn,nn.current&1),t=da(t,e,n),t!==null?t.sibling:null);Ft(nn,nn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return TA(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ft(nn,nn.current),r)break;return null;case 22:case 23:return e.lanes=0,SA(t,e,n)}return da(t,e,n)}var IA,zw,AA,PA;IA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zw=function(){};AA=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ul(xi.current);var a=null;switch(n){case"input":s=uw(t,s),r=uw(t,r),a=[];break;case"select":s=sn({},s,{value:void 0}),r=sn({},r,{value:void 0}),a=[];break;case"textarea":s=fw(t,s),r=fw(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wg)}pw(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Dh.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Dh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ht("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};PA=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vd(t,e){if(!Xt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function z$(t,e,n){var r=e.pendingProps;switch(F_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(e),null;case 1:return Lr(e.type)&&bg(),Zn(e),null;case 3:return r=e.stateNode,wu(),Yt(Or),Yt(lr),K_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(rp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fs!==null&&(Qw(Fs),Fs=null))),zw(t,e),Zn(e),null;case 5:G_(e);var s=ul(Hh.current);if(n=e.type,t!==null&&e.stateNode!=null)AA(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return Zn(e),null}if(t=ul(xi.current),rp(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[li]=e,r[qh]=a,t=(e.mode&1)!==0,n){case"dialog":Ht("cancel",r),Ht("close",r);break;case"iframe":case"object":case"embed":Ht("load",r);break;case"video":case"audio":for(s=0;s<Xd.length;s++)Ht(Xd[s],r);break;case"source":Ht("error",r);break;case"img":case"image":case"link":Ht("error",r),Ht("load",r);break;case"details":Ht("toggle",r);break;case"input":YS(r,a),Ht("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ht("invalid",r);break;case"textarea":JS(r,a),Ht("invalid",r)}pw(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&np(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&np(r.textContent,l,t),s=["children",""+l]):Dh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ht("scroll",r)}switch(n){case"input":Km(r),QS(r,a,!0);break;case"textarea":Km(r),XS(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=wg)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[li]=e,t[qh]=r,IA(t,e,!1,!1),e.stateNode=t;e:{switch(o=gw(n,r),n){case"dialog":Ht("cancel",t),Ht("close",t),s=r;break;case"iframe":case"object":case"embed":Ht("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xd.length;s++)Ht(Xd[s],t);s=r;break;case"source":Ht("error",t),s=r;break;case"img":case"image":case"link":Ht("error",t),Ht("load",t),s=r;break;case"details":Ht("toggle",t),s=r;break;case"input":YS(t,r),s=uw(t,r),Ht("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=sn({},r,{value:void 0}),Ht("invalid",t);break;case"textarea":JS(t,r),s=fw(t,r),Ht("invalid",t);break;default:s=r}pw(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?cI(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&oI(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Mh(t,c):typeof c=="number"&&Mh(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Dh.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ht("scroll",t):c!=null&&N_(t,a,c,o))}switch(n){case"input":Km(t),QS(t,r,!1);break;case"textarea":Km(t),XS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+go(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Qc(t,!!r.multiple,a,!1):r.defaultValue!=null&&Qc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=wg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zn(e),null;case 6:if(t&&e.stateNode!=null)PA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=ul(Hh.current),ul(xi.current),rp(e)){if(r=e.stateNode,n=e.memoizedProps,r[li]=e,(a=r.nodeValue!==n)&&(t=Xr,t!==null))switch(t.tag){case 3:np(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&np(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[li]=e,e.stateNode=r}return Zn(e),null;case 13:if(Yt(nn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xt&&Kr!==null&&e.mode&1&&!(e.flags&128))QI(),xu(),e.flags|=98560,a=!1;else if(a=rp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(le(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(le(317));a[li]=e}else xu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zn(e),a=!1}else Fs!==null&&(Qw(Fs),Fs=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nn.current&1?In===0&&(In=3):a1())),e.updateQueue!==null&&(e.flags|=4),Zn(e),null);case 4:return wu(),zw(t,e),t===null&&zh(e.stateNode.containerInfo),Zn(e),null;case 10:return B_(e.type._context),Zn(e),null;case 17:return Lr(e.type)&&bg(),Zn(e),null;case 19:if(Yt(nn),a=e.memoizedState,a===null)return Zn(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Vd(a,!1);else{if(In!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kg(t),o!==null){for(e.flags|=128,Vd(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ft(nn,nn.current&1|2),e.child}t=t.sibling}a.tail!==null&&pn()>_u&&(e.flags|=128,r=!0,Vd(a,!1),e.lanes=4194304)}else{if(!r)if(t=kg(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vd(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Xt)return Zn(e),null}else 2*pn()-a.renderingStartTime>_u&&n!==1073741824&&(e.flags|=128,r=!0,Vd(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=pn(),e.sibling=null,n=nn.current,Ft(nn,r?n&1|2:n&1),e):(Zn(e),null);case 22:case 23:return i1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wr&1073741824&&(Zn(e),e.subtreeFlags&6&&(e.flags|=8192)):Zn(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function B$(t,e){switch(F_(e),e.tag){case 1:return Lr(e.type)&&bg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wu(),Yt(Or),Yt(lr),K_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return G_(e),null;case 13:if(Yt(nn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));xu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Yt(nn),null;case 4:return wu(),null;case 10:return B_(e.type._context),null;case 22:case 23:return i1(),null;case 24:return null;default:return null}}var ap=!1,nr=!1,q$=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Wc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){cn(t,e,r)}else n.current=null}function Bw(t,e,n){try{n()}catch(r){cn(t,e,r)}}var UE=!1;function W$(t,e){if(Ew=vg,t=LI(),L_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==a||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++u===s&&(l=o),m===a&&++d===r&&(c=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cw={focusedElem:t,selectionRange:n},vg=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,b=v.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:Ms(e.type,w),b);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(E){cn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return v=UE,UE=!1,v}function gh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Bw(e,n,a)}s=s.next}while(s!==r)}}function Yv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function RA(t){var e=t.alternate;e!==null&&(t.alternate=null,RA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[li],delete e[qh],delete e[Iw],delete e[C$],delete e[k$])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function DA(t){return t.tag===5||t.tag===3||t.tag===4}function zE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||DA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ww(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wg));else if(r!==4&&(t=t.child,t!==null))for(Ww(t,e,n),t=t.sibling;t!==null;)Ww(t,e,n),t=t.sibling}function Hw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hw(t,e,n),t=t.sibling;t!==null;)Hw(t,e,n),t=t.sibling}var Un=null,Os=!1;function Aa(t,e,n){for(n=n.child;n!==null;)MA(t,e,n),n=n.sibling}function MA(t,e,n){if(vi&&typeof vi.onCommitFiberUnmount=="function")try{vi.onCommitFiberUnmount(Uv,n)}catch{}switch(n.tag){case 5:nr||Wc(n,e);case 6:var r=Un,s=Os;Un=null,Aa(t,e,n),Un=r,Os=s,Un!==null&&(Os?(t=Un,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Un.removeChild(n.stateNode));break;case 18:Un!==null&&(Os?(t=Un,n=n.stateNode,t.nodeType===8?Qy(t.parentNode,n):t.nodeType===1&&Qy(t,n),Fh(t)):Qy(Un,n.stateNode));break;case 4:r=Un,s=Os,Un=n.stateNode.containerInfo,Os=!0,Aa(t,e,n),Un=r,Os=s;break;case 0:case 11:case 14:case 15:if(!nr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Bw(n,e,o),s=s.next}while(s!==r)}Aa(t,e,n);break;case 1:if(!nr&&(Wc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){cn(n,e,l)}Aa(t,e,n);break;case 21:Aa(t,e,n);break;case 22:n.mode&1?(nr=(r=nr)||n.memoizedState!==null,Aa(t,e,n),nr=r):Aa(t,e,n);break;default:Aa(t,e,n)}}function BE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new q$),e.forEach(function(r){var s=e8.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function As(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Un=l.stateNode,Os=!1;break e;case 3:Un=l.stateNode.containerInfo,Os=!0;break e;case 4:Un=l.stateNode.containerInfo,Os=!0;break e}l=l.return}if(Un===null)throw Error(le(160));MA(a,o,s),Un=null,Os=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){cn(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)OA(e,t),e=e.sibling}function OA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(As(e,t),si(t),r&4){try{gh(3,t,t.return),Yv(3,t)}catch(w){cn(t,t.return,w)}try{gh(5,t,t.return)}catch(w){cn(t,t.return,w)}}break;case 1:As(e,t),si(t),r&512&&n!==null&&Wc(n,n.return);break;case 5:if(As(e,t),si(t),r&512&&n!==null&&Wc(n,n.return),t.flags&32){var s=t.stateNode;try{Mh(s,"")}catch(w){cn(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&sI(s,a),gw(l,o);var u=gw(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?cI(s,h):d==="dangerouslySetInnerHTML"?oI(s,h):d==="children"?Mh(s,h):N_(s,d,h,u)}switch(l){case"input":dw(s,a);break;case"textarea":iI(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Qc(s,!!a.multiple,p,!1):m!==!!a.multiple&&(a.defaultValue!=null?Qc(s,!!a.multiple,a.defaultValue,!0):Qc(s,!!a.multiple,a.multiple?[]:"",!1))}s[qh]=a}catch(w){cn(t,t.return,w)}}break;case 6:if(As(e,t),si(t),r&4){if(t.stateNode===null)throw Error(le(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(w){cn(t,t.return,w)}}break;case 3:if(As(e,t),si(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fh(e.containerInfo)}catch(w){cn(t,t.return,w)}break;case 4:As(e,t),si(t);break;case 13:As(e,t),si(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(r1=pn())),r&4&&BE(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(nr=(u=nr)||d,As(e,t),nr=u):As(e,t),si(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Te=t,d=t.child;d!==null;){for(h=Te=d;Te!==null;){switch(m=Te,p=m.child,m.tag){case 0:case 11:case 14:case 15:gh(4,m,m.return);break;case 1:Wc(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){cn(r,n,w)}}break;case 5:Wc(m,m.return);break;case 22:if(m.memoizedState!==null){WE(h);continue}}p!==null?(p.return=m,Te=p):WE(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=lI("display",o))}catch(w){cn(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){cn(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:As(e,t),si(t),r&4&&BE(t);break;case 21:break;default:As(e,t),si(t)}}function si(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(DA(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Mh(s,""),r.flags&=-33);var a=zE(t);Hw(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=zE(t);Ww(t,l,o);break;default:throw Error(le(161))}}catch(c){cn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function H$(t,e,n){Te=t,LA(t)}function LA(t,e,n){for(var r=(t.mode&1)!==0;Te!==null;){var s=Te,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ap;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||nr;l=ap;var u=nr;if(ap=o,(nr=c)&&!u)for(Te=s;Te!==null;)o=Te,c=o.child,o.tag===22&&o.memoizedState!==null?HE(s):c!==null?(c.return=o,Te=c):HE(s);for(;a!==null;)Te=a,LA(a),a=a.sibling;Te=s,ap=l,nr=u}qE(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Te=a):qE(t)}}function qE(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nr||Yv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ms(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&kE(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kE(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Fh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}nr||e.flags&512&&qw(e)}catch(m){cn(e,e.return,m)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function WE(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function HE(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yv(4,e)}catch(c){cn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){cn(e,s,c)}}var a=e.return;try{qw(e)}catch(c){cn(e,a,c)}break;case 5:var o=e.return;try{qw(e)}catch(c){cn(e,o,c)}}}catch(c){cn(e,e.return,c)}if(e===t){Te=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Te=l;break}Te=e.return}}var G$=Math.ceil,Ag=ja.ReactCurrentDispatcher,t1=ja.ReactCurrentOwner,vs=ja.ReactCurrentBatchConfig,jt=0,Fn=null,bn=null,Wn=0,Wr=0,Hc=Ro(0),In=0,Qh=null,kl=0,Qv=0,n1=0,vh=null,Tr=null,r1=0,_u=1/0,qi=null,Pg=!1,Gw=null,oo=null,op=!1,Xa=null,Rg=0,xh=0,Kw=null,qp=-1,Wp=0;function yr(){return jt&6?pn():qp!==-1?qp:qp=pn()}function lo(t){return t.mode&1?jt&2&&Wn!==0?Wn&-Wn:I$.transition!==null?(Wp===0&&(Wp=bI()),Wp):(t=At,t!==0||(t=window.event,t=t===void 0?16:kI(t.type)),t):1}function qs(t,e,n,r){if(50<xh)throw xh=0,Kw=null,Error(le(185));Ff(t,n,r),(!(jt&2)||t!==Fn)&&(t===Fn&&(!(jt&2)&&(Qv|=n),In===4&&za(t,Wn)),Vr(t,r),n===1&&jt===0&&!(e.mode&1)&&(_u=pn()+500,Hv&&Do()))}function Vr(t,e){var n=t.callbackNode;IF(t,e);var r=gg(t,t===Fn?Wn:0);if(r===0)n!==null&&tE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&tE(n),e===1)t.tag===0?T$(GE.bind(null,t)):GI(GE.bind(null,t)),S$(function(){!(jt&6)&&Do()}),n=null;else{switch(_I(r)){case 1:n=T_;break;case 4:n=yI;break;case 16:n=pg;break;case 536870912:n=wI;break;default:n=pg}n=WA(n,VA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function VA(t,e){if(qp=-1,Wp=0,jt&6)throw Error(le(327));var n=t.callbackNode;if(tu()&&t.callbackNode!==n)return null;var r=gg(t,t===Fn?Wn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Dg(t,r);else{e=r;var s=jt;jt|=2;var a=$A();(Fn!==t||Wn!==e)&&(qi=null,_u=pn()+500,pl(t,e));do try{Q$();break}catch(l){FA(t,l)}while(!0);z_(),Ag.current=a,jt=s,bn!==null?e=0:(Fn=null,Wn=0,e=In)}if(e!==0){if(e===2&&(s=bw(t),s!==0&&(r=s,e=Yw(t,s))),e===1)throw n=Qh,pl(t,0),za(t,r),Vr(t,pn()),n;if(e===6)za(t,r);else{if(s=t.current.alternate,!(r&30)&&!K$(s)&&(e=Dg(t,r),e===2&&(a=bw(t),a!==0&&(r=a,e=Yw(t,a))),e===1))throw n=Qh,pl(t,0),za(t,r),Vr(t,pn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:rl(t,Tr,qi);break;case 3:if(za(t,r),(r&130023424)===r&&(e=r1+500-pn(),10<e)){if(gg(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Tw(rl.bind(null,t,Tr,qi),e);break}rl(t,Tr,qi);break;case 4:if(za(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Bs(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=pn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*G$(r/1960))-r,10<r){t.timeoutHandle=Tw(rl.bind(null,t,Tr,qi),r);break}rl(t,Tr,qi);break;case 5:rl(t,Tr,qi);break;default:throw Error(le(329))}}}return Vr(t,pn()),t.callbackNode===n?VA.bind(null,t):null}function Yw(t,e){var n=vh;return t.current.memoizedState.isDehydrated&&(pl(t,e).flags|=256),t=Dg(t,e),t!==2&&(e=Tr,Tr=n,e!==null&&Qw(e)),t}function Qw(t){Tr===null?Tr=t:Tr.push.apply(Tr,t)}function K$(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Ks(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function za(t,e){for(e&=~n1,e&=~Qv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bs(e),r=1<<n;t[n]=-1,e&=~r}}function GE(t){if(jt&6)throw Error(le(327));tu();var e=gg(t,0);if(!(e&1))return Vr(t,pn()),null;var n=Dg(t,e);if(t.tag!==0&&n===2){var r=bw(t);r!==0&&(e=r,n=Yw(t,r))}if(n===1)throw n=Qh,pl(t,0),za(t,e),Vr(t,pn()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rl(t,Tr,qi),Vr(t,pn()),null}function s1(t,e){var n=jt;jt|=1;try{return t(e)}finally{jt=n,jt===0&&(_u=pn()+500,Hv&&Do())}}function Tl(t){Xa!==null&&Xa.tag===0&&!(jt&6)&&tu();var e=jt;jt|=1;var n=vs.transition,r=At;try{if(vs.transition=null,At=1,t)return t()}finally{At=r,vs.transition=n,jt=e,!(jt&6)&&Do()}}function i1(){Wr=Hc.current,Yt(Hc)}function pl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,N$(n)),bn!==null)for(n=bn.return;n!==null;){var r=n;switch(F_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bg();break;case 3:wu(),Yt(Or),Yt(lr),K_();break;case 5:G_(r);break;case 4:wu();break;case 13:Yt(nn);break;case 19:Yt(nn);break;case 10:B_(r.type._context);break;case 22:case 23:i1()}n=n.return}if(Fn=t,bn=t=co(t.current,null),Wn=Wr=e,In=0,Qh=null,n1=Qv=kl=0,Tr=vh=null,cl!==null){for(e=0;e<cl.length;e++)if(n=cl[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}cl=null}return t}function FA(t,e){do{var n=bn;try{if(z_(),Up.current=Ig,Tg){for(var r=rn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Tg=!1}if(Cl=0,Vn=Tn=rn=null,ph=!1,Gh=0,t1.current=null,n===null||n.return===null){In=1,Qh=e,bn=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=Wn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=DE(o);if(p!==null){p.flags&=-257,ME(p,o,l,a,e),p.mode&1&&RE(a,u,e),e=p,c=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(c),e.updateQueue=w}else v.add(c);break e}else{if(!(e&1)){RE(a,u,e),a1();break e}c=Error(le(426))}}else if(Xt&&l.mode&1){var b=DE(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ME(b,o,l,a,e),$_(bu(c,l));break e}}a=c=bu(c,l),In!==4&&(In=2),vh===null?vh=[a]:vh.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=_A(a,c,e);CE(a,y);break e;case 1:l=c;var x=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(oo===null||!oo.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var E=jA(a,l,e);CE(a,E);break e}}a=a.return}while(a!==null)}zA(n)}catch(S){e=S,bn===n&&n!==null&&(bn=n=n.return);continue}break}while(!0)}function $A(){var t=Ag.current;return Ag.current=Ig,t===null?Ig:t}function a1(){(In===0||In===3||In===2)&&(In=4),Fn===null||!(kl&268435455)&&!(Qv&268435455)||za(Fn,Wn)}function Dg(t,e){var n=jt;jt|=2;var r=$A();(Fn!==t||Wn!==e)&&(qi=null,pl(t,e));do try{Y$();break}catch(s){FA(t,s)}while(!0);if(z_(),jt=n,Ag.current=r,bn!==null)throw Error(le(261));return Fn=null,Wn=0,In}function Y$(){for(;bn!==null;)UA(bn)}function Q$(){for(;bn!==null&&!bF();)UA(bn)}function UA(t){var e=qA(t.alternate,t,Wr);t.memoizedProps=t.pendingProps,e===null?zA(t):bn=e,t1.current=null}function zA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=B$(n,e),n!==null){n.flags&=32767,bn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{In=6,bn=null;return}}else if(n=z$(n,e,Wr),n!==null){bn=n;return}if(e=e.sibling,e!==null){bn=e;return}bn=e=t}while(e!==null);In===0&&(In=5)}function rl(t,e,n){var r=At,s=vs.transition;try{vs.transition=null,At=1,J$(t,e,n,r)}finally{vs.transition=s,At=r}return null}function J$(t,e,n,r){do tu();while(Xa!==null);if(jt&6)throw Error(le(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(AF(t,a),t===Fn&&(bn=Fn=null,Wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||op||(op=!0,WA(pg,function(){return tu(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=vs.transition,vs.transition=null;var o=At;At=1;var l=jt;jt|=4,t1.current=null,W$(t,n),OA(n,t),v$(Cw),vg=!!Ew,Cw=Ew=null,t.current=n,H$(n),_F(),jt=l,At=o,vs.transition=a}else t.current=n;if(op&&(op=!1,Xa=t,Rg=s),a=t.pendingLanes,a===0&&(oo=null),SF(n.stateNode),Vr(t,pn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Pg)throw Pg=!1,t=Gw,Gw=null,t;return Rg&1&&t.tag!==0&&tu(),a=t.pendingLanes,a&1?t===Kw?xh++:(xh=0,Kw=t):xh=0,Do(),null}function tu(){if(Xa!==null){var t=_I(Rg),e=vs.transition,n=At;try{if(vs.transition=null,At=16>t?16:t,Xa===null)var r=!1;else{if(t=Xa,Xa=null,Rg=0,jt&6)throw Error(le(331));var s=jt;for(jt|=4,Te=t.current;Te!==null;){var a=Te,o=a.child;if(Te.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Te=u;Te!==null;){var d=Te;switch(d.tag){case 0:case 11:case 15:gh(8,d,a)}var h=d.child;if(h!==null)h.return=d,Te=h;else for(;Te!==null;){d=Te;var m=d.sibling,p=d.return;if(RA(d),d===u){Te=null;break}if(m!==null){m.return=p,Te=m;break}Te=p}}}var v=a.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}Te=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Te=o;else e:for(;Te!==null;){if(a=Te,a.flags&2048)switch(a.tag){case 0:case 11:case 15:gh(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,Te=y;break e}Te=a.return}}var x=t.current;for(Te=x;Te!==null;){o=Te;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Te=_;else e:for(o=x;Te!==null;){if(l=Te,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yv(9,l)}}catch(S){cn(l,l.return,S)}if(l===o){Te=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,Te=E;break e}Te=l.return}}if(jt=s,Do(),vi&&typeof vi.onPostCommitFiberRoot=="function")try{vi.onPostCommitFiberRoot(Uv,t)}catch{}r=!0}return r}finally{At=n,vs.transition=e}}return!1}function KE(t,e,n){e=bu(n,e),e=_A(t,e,1),t=ao(t,e,1),e=yr(),t!==null&&(Ff(t,1,e),Vr(t,e))}function cn(t,e,n){if(t.tag===3)KE(t,t,n);else for(;e!==null;){if(e.tag===3){KE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oo===null||!oo.has(r))){t=bu(n,t),t=jA(e,t,1),e=ao(e,t,1),t=yr(),e!==null&&(Ff(e,1,t),Vr(e,t));break}}e=e.return}}function X$(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yr(),t.pingedLanes|=t.suspendedLanes&n,Fn===t&&(Wn&n)===n&&(In===4||In===3&&(Wn&130023424)===Wn&&500>pn()-r1?pl(t,0):n1|=n),Vr(t,e)}function BA(t,e){e===0&&(t.mode&1?(e=Jm,Jm<<=1,!(Jm&130023424)&&(Jm=4194304)):e=1);var n=yr();t=ua(t,e),t!==null&&(Ff(t,e,n),Vr(t,n))}function Z$(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),BA(t,n)}function e8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),BA(t,n)}var qA;qA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Or.current)Rr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rr=!1,U$(t,e,n);Rr=!!(t.flags&131072)}else Rr=!1,Xt&&e.flags&1048576&&KI(e,Ng,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bp(t,e),t=e.pendingProps;var s=vu(e,lr.current);eu(e,n),s=Q_(null,e,r,t,s,n);var a=J_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lr(r)?(a=!0,_g(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,W_(e),s.updater=Kv,e.stateNode=s,s._reactInternals=e,Ow(e,r,t,n),e=Fw(null,e,r,!0,a,n)):(e.tag=0,Xt&&a&&V_(e),pr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bp(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=n8(r),t=Ms(r,t),s){case 0:e=Vw(null,e,r,t,n);break e;case 1:e=VE(null,e,r,t,n);break e;case 11:e=OE(null,e,r,t,n);break e;case 14:e=LE(null,e,r,Ms(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ms(r,s),Vw(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ms(r,s),VE(t,e,r,s,n);case 3:e:{if(CA(e),t===null)throw Error(le(387));r=e.pendingProps,a=e.memoizedState,s=a.element,eA(t,e),Cg(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=bu(Error(le(423)),e),e=FE(t,e,r,n,s);break e}else if(r!==s){s=bu(Error(le(424)),e),e=FE(t,e,r,n,s);break e}else for(Kr=io(e.stateNode.containerInfo.firstChild),Xr=e,Xt=!0,Fs=null,n=XI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xu(),r===s){e=da(t,e,n);break e}pr(t,e,r,n)}e=e.child}return e;case 5:return tA(e),t===null&&Rw(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,kw(r,s)?o=null:a!==null&&kw(r,a)&&(e.flags|=32),EA(t,e),pr(t,e,o,n),e.child;case 6:return t===null&&Rw(e),null;case 13:return kA(t,e,n);case 4:return H_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=yu(e,null,r,n):pr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ms(r,s),OE(t,e,r,s,n);case 7:return pr(t,e,e.pendingProps,n),e.child;case 8:return pr(t,e,e.pendingProps.children,n),e.child;case 12:return pr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Ft(Sg,r._currentValue),r._currentValue=o,a!==null)if(Ks(a.value,o)){if(a.children===s.children&&!Or.current){e=da(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=ta(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Dw(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(le(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Dw(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}pr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,eu(e,n),s=Ns(s),r=r(s),e.flags|=1,pr(t,e,r,n),e.child;case 14:return r=e.type,s=Ms(r,e.pendingProps),s=Ms(r.type,s),LE(t,e,r,s,n);case 15:return NA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ms(r,s),Bp(t,e),e.tag=1,Lr(r)?(t=!0,_g(e)):t=!1,eu(e,n),bA(e,r,s),Ow(e,r,s,n),Fw(null,e,r,!0,t,n);case 19:return TA(t,e,n);case 22:return SA(t,e,n)}throw Error(le(156,e.tag))};function WA(t,e){return xI(t,e)}function t8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(t,e,n,r){return new t8(t,e,n,r)}function o1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function n8(t){if(typeof t=="function")return o1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===E_)return 11;if(t===C_)return 14}return 2}function co(t,e){var n=t.alternate;return n===null?(n=ps(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hp(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")o1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Oc:return gl(n.children,s,a,e);case S_:o=8,s|=8;break;case aw:return t=ps(12,n,e,s|2),t.elementType=aw,t.lanes=a,t;case ow:return t=ps(13,n,e,s),t.elementType=ow,t.lanes=a,t;case lw:return t=ps(19,n,e,s),t.elementType=lw,t.lanes=a,t;case tI:return Jv(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ZT:o=10;break e;case eI:o=9;break e;case E_:o=11;break e;case C_:o=14;break e;case Va:o=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=ps(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function gl(t,e,n,r){return t=ps(7,t,r,e),t.lanes=n,t}function Jv(t,e,n,r){return t=ps(22,t,r,e),t.elementType=tI,t.lanes=n,t.stateNode={isHidden:!1},t}function s0(t,e,n){return t=ps(6,t,null,e),t.lanes=n,t}function i0(t,e,n){return e=ps(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function r8(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fy(0),this.expirationTimes=Fy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fy(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function l1(t,e,n,r,s,a,o,l,c){return t=new r8(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ps(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},W_(a),t}function s8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function HA(t){if(!t)return vo;t=t._reactInternals;e:{if(Ql(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Lr(n))return HI(t,n,e)}return e}function GA(t,e,n,r,s,a,o,l,c){return t=l1(n,r,!0,t,s,a,o,l,c),t.context=HA(null),n=t.current,r=yr(),s=lo(n),a=ta(r,s),a.callback=e??null,ao(n,a,s),t.current.lanes=s,Ff(t,s,r),Vr(t,r),t}function Xv(t,e,n,r){var s=e.current,a=yr(),o=lo(s);return n=HA(n),e.context===null?e.context=n:e.pendingContext=n,e=ta(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ao(s,e,o),t!==null&&(qs(t,s,o,a),$p(t,s,o)),o}function Mg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function YE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function c1(t,e){YE(t,e),(t=t.alternate)&&YE(t,e)}function i8(){return null}var KA=typeof reportError=="function"?reportError:function(t){console.error(t)};function u1(t){this._internalRoot=t}Zv.prototype.render=u1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));Xv(t,e,null,null)};Zv.prototype.unmount=u1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tl(function(){Xv(null,t,null,null)}),e[ca]=null}};function Zv(t){this._internalRoot=t}Zv.prototype.unstable_scheduleHydration=function(t){if(t){var e=SI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ua.length&&e!==0&&e<Ua[n].priority;n++);Ua.splice(n,0,t),n===0&&CI(t)}};function d1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ex(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function QE(){}function a8(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=Mg(o);a.call(u)}}var o=GA(e,r,t,0,null,!1,!1,"",QE);return t._reactRootContainer=o,t[ca]=o.current,zh(t.nodeType===8?t.parentNode:t),Tl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Mg(c);l.call(u)}}var c=l1(t,0,!1,null,null,!1,!1,"",QE);return t._reactRootContainer=c,t[ca]=c.current,zh(t.nodeType===8?t.parentNode:t),Tl(function(){Xv(e,c,n,r)}),c}function tx(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=Mg(o);l.call(c)}}Xv(e,o,t,s)}else o=a8(n,e,t,s,r);return Mg(o)}jI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jd(e.pendingLanes);n!==0&&(I_(e,n|1),Vr(e,pn()),!(jt&6)&&(_u=pn()+500,Do()))}break;case 13:Tl(function(){var r=ua(t,1);if(r!==null){var s=yr();qs(r,t,1,s)}}),c1(t,1)}};A_=function(t){if(t.tag===13){var e=ua(t,134217728);if(e!==null){var n=yr();qs(e,t,134217728,n)}c1(t,134217728)}};NI=function(t){if(t.tag===13){var e=lo(t),n=ua(t,e);if(n!==null){var r=yr();qs(n,t,e,r)}c1(t,e)}};SI=function(){return At};EI=function(t,e){var n=At;try{return At=t,e()}finally{At=n}};xw=function(t,e,n){switch(e){case"input":if(dw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Wv(r);if(!s)throw Error(le(90));rI(r),dw(r,s)}}}break;case"textarea":iI(t,n);break;case"select":e=n.value,e!=null&&Qc(t,!!n.multiple,e,!1)}};hI=s1;fI=Tl;var o8={usingClientEntryPoint:!1,Events:[Uf,$c,Wv,uI,dI,s1]},Fd={findFiberByHostInstance:ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l8={bundleType:Fd.bundleType,version:Fd.version,rendererPackageName:Fd.rendererPackageName,rendererConfig:Fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gI(t),t===null?null:t.stateNode},findFiberByHostInstance:Fd.findFiberByHostInstance||i8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lp.isDisabled&&lp.supportsFiber)try{Uv=lp.inject(l8),vi=lp}catch{}}is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o8;is.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d1(e))throw Error(le(200));return s8(t,e,null,n)};is.createRoot=function(t,e){if(!d1(t))throw Error(le(299));var n=!1,r="",s=KA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=l1(t,1,!1,null,null,n,!1,r,s),t[ca]=e.current,zh(t.nodeType===8?t.parentNode:t),new u1(e)};is.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=gI(e),t=t===null?null:t.stateNode,t};is.flushSync=function(t){return Tl(t)};is.hydrate=function(t,e,n){if(!ex(e))throw Error(le(200));return tx(null,t,e,!0,n)};is.hydrateRoot=function(t,e,n){if(!d1(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=KA;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=GA(e,null,t,1,n??null,s,!1,a,o),t[ca]=e.current,zh(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Zv(e)};is.render=function(t,e,n){if(!ex(e))throw Error(le(200));return tx(null,t,e,!1,n)};is.unmountComponentAtNode=function(t){if(!ex(t))throw Error(le(40));return t._reactRootContainer?(Tl(function(){tx(null,null,t,!1,function(){t._reactRootContainer=null,t[ca]=null})}),!0):!1};is.unstable_batchedUpdates=s1;is.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ex(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return tx(t,e,n,!1,r)};is.version="18.3.1-next-f1338f8080-20240426";function YA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YA)}catch(t){console.error(t)}}YA(),YT.exports=is;var Qu=YT.exports;const c8=Fv(Qu);var QA,JE=Qu;QA=JE.createRoot,JE.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jh(){return Jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jh.apply(this,arguments)}var Za;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Za||(Za={}));const XE="popstate";function u8(t){t===void 0&&(t={});function e(s,a){let{pathname:o="/",search:l="",hash:c=""}=Jl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Jw("",{pathname:o,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof a=="string"?a:Og(a))}function r(s,a){h1(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return h8(e,n,r,t)}function xn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function h1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d8(){return Math.random().toString(36).substr(2,8)}function ZE(t,e){return{usr:t.state,key:t.key,idx:e}}function Jw(t,e,n,r){return n===void 0&&(n=null),Jh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Jl(e):e,{state:n,key:e&&e.key||r||d8()})}function Og(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Jl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function h8(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=Za.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Jh({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Za.Pop;let b=d(),y=b==null?null:b-u;u=b,c&&c({action:l,location:w.location,delta:y})}function m(b,y){l=Za.Push;let x=Jw(w.location,b,y);n&&n(x,b),u=d()+1;let _=ZE(x,u),E=w.createHref(x);try{o.pushState(_,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(E)}a&&c&&c({action:l,location:w.location,delta:1})}function p(b,y){l=Za.Replace;let x=Jw(w.location,b,y);n&&n(x,b),u=d();let _=ZE(x,u),E=w.createHref(x);o.replaceState(_,"",E),a&&c&&c({action:l,location:w.location,delta:0})}function v(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof b=="string"?b:Og(b);return x=x.replace(/ $/,"%20"),xn(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let w={get action(){return l},get location(){return t(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(XE,h),c=b,()=>{s.removeEventListener(XE,h),c=null}},createHref(b){return e(s,b)},createURL:v,encodeLocation(b){let y=v(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:p,go(b){return o.go(b)}};return w}var eC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(eC||(eC={}));function f8(t,e,n){return n===void 0&&(n="/"),m8(t,e,n,!1)}function m8(t,e,n,r){let s=typeof e=="string"?Jl(e):e,a=f1(s.pathname||"/",n);if(a==null)return null;let o=JA(t);p8(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=E8(a);l=N8(o[c],u,r)}return l}function JA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(xn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=uo([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(xn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),JA(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:_8(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of XA(a.path))s(a,o,c)}),e}function XA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=XA(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function p8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:j8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const g8=/^:[\w-]+$/,v8=3,x8=2,y8=1,w8=10,b8=-2,tC=t=>t==="*";function _8(t,e){let n=t.split("/"),r=n.length;return n.some(tC)&&(r+=b8),e&&(r+=x8),n.filter(s=>!tC(s)).reduce((s,a)=>s+(g8.test(a)?v8:a===""?y8:w8),r)}function j8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function N8(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=nC({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=nC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:uo([a,h.pathname]),pathnameBase:I8(uo([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=uo([a,h.pathnameBase]))}return o}function nC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=S8(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let w=l[h]||"";o=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const v=l[h];return p&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function S8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),h1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function E8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return h1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function f1(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function C8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Jl(t):t;return{pathname:n?n.startsWith("/")?n:k8(n,e):e,search:A8(r),hash:P8(s)}}function k8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function a0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function T8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function m1(t,e){let n=T8(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function p1(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Jl(t):(s=Jh({},t),xn(!s.pathname||!s.pathname.includes("?"),a0("?","pathname","search",s)),xn(!s.pathname||!s.pathname.includes("#"),a0("#","pathname","hash",s)),xn(!s.search||!s.search.includes("#"),a0("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=C8(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const uo=t=>t.join("/").replace(/\/\/+/g,"/"),I8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),A8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,P8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function R8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ZA=["post","put","patch","delete"];new Set(ZA);const D8=["get",...ZA];new Set(D8);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xh(){return Xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xh.apply(this,arguments)}const g1=g.createContext(null),M8=g.createContext(null),Mo=g.createContext(null),nx=g.createContext(null),Na=g.createContext({outlet:null,matches:[],isDataRoute:!1}),eP=g.createContext(null);function O8(t,e){let{relative:n}=e===void 0?{}:e;Ju()||xn(!1);let{basename:r,navigator:s}=g.useContext(Mo),{hash:a,pathname:o,search:l}=nP(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:uo([r,o])),s.createHref({pathname:c,search:l,hash:a})}function Ju(){return g.useContext(nx)!=null}function Oo(){return Ju()||xn(!1),g.useContext(nx).location}function tP(t){g.useContext(Mo).static||g.useLayoutEffect(t)}function Mn(){let{isDataRoute:t}=g.useContext(Na);return t?Y8():L8()}function L8(){Ju()||xn(!1);let t=g.useContext(g1),{basename:e,future:n,navigator:r}=g.useContext(Mo),{matches:s}=g.useContext(Na),{pathname:a}=Oo(),o=JSON.stringify(m1(s,n.v7_relativeSplatPath)),l=g.useRef(!1);return tP(()=>{l.current=!0}),g.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=p1(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:uo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,a,t])}function v1(){let{matches:t}=g.useContext(Na),e=t[t.length-1];return e?e.params:{}}function nP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(Mo),{matches:s}=g.useContext(Na),{pathname:a}=Oo(),o=JSON.stringify(m1(s,r.v7_relativeSplatPath));return g.useMemo(()=>p1(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function V8(t,e){return F8(t,e)}function F8(t,e,n,r){Ju()||xn(!1);let{navigator:s}=g.useContext(Mo),{matches:a}=g.useContext(Na),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Oo(),d;if(e){var h;let b=typeof e=="string"?Jl(e):e;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||xn(!1),d=b}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=f8(t,{pathname:p}),w=q8(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:uo([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:uo([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,r);return e&&w?g.createElement(nx.Provider,{value:{location:Xh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Za.Pop}},w):w}function $8(){let t=K8(),e=R8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,null)}const U8=g.createElement($8,null);class z8 extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(Na.Provider,{value:this.props.routeContext},g.createElement(eP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function B8(t){let{routeContext:e,match:n,children:r}=t,s=g.useContext(g1);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(Na.Provider,{value:e},r)}function q8(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||xn(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:p}=n,v=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let p,v=!1,w=null,b=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,w=h.route.errorElement||U8,c&&(u<0&&m===0?(v=!0,b=null):u===m&&(v=!0,b=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,m+1)),x=()=>{let _;return p?_=w:v?_=b:h.route.Component?_=g.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,g.createElement(B8,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?g.createElement(z8,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var rP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(rP||{}),Lg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Lg||{});function W8(t){let e=g.useContext(g1);return e||xn(!1),e}function H8(t){let e=g.useContext(M8);return e||xn(!1),e}function G8(t){let e=g.useContext(Na);return e||xn(!1),e}function sP(t){let e=G8(),n=e.matches[e.matches.length-1];return n.route.id||xn(!1),n.route.id}function K8(){var t;let e=g.useContext(eP),n=H8(Lg.UseRouteError),r=sP(Lg.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Y8(){let{router:t}=W8(rP.UseNavigateStable),e=sP(Lg.UseNavigateStable),n=g.useRef(!1);return tP(()=>{n.current=!0}),g.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Xh({fromRouteId:e},a)))},[t,e])}function Q8(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function J8(t){let{to:e,replace:n,state:r,relative:s}=t;Ju()||xn(!1);let{future:a,static:o}=g.useContext(Mo),{matches:l}=g.useContext(Na),{pathname:c}=Oo(),u=Mn(),d=p1(e,m1(l,a.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return g.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function Gt(t){xn(!1)}function X8(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Za.Pop,navigator:a,static:o=!1,future:l}=t;Ju()&&xn(!1);let c=e.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:a,static:o,future:Xh({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=Jl(r));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:v="default"}=r,w=g.useMemo(()=>{let b=f1(d,c);return b==null?null:{location:{pathname:b,search:h,hash:m,state:p,key:v},navigationType:s}},[c,d,h,m,p,v,s]);return w==null?null:g.createElement(Mo.Provider,{value:u},g.createElement(nx.Provider,{children:n,value:w}))}function Z8(t){let{children:e,location:n}=t;return V8(Xw(e),n)}new Promise(()=>{});function Xw(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let a=[...e,s];if(r.type===g.Fragment){n.push.apply(n,Xw(r.props.children,a));return}r.type!==Gt&&xn(!1),!r.props.index||!r.props.children||xn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Xw(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zw(){return Zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zw.apply(this,arguments)}function eU(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function tU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nU(t,e){return t.button===0&&(!e||e==="_self")&&!tU(t)}function eb(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function rU(t,e){let n=eb(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const sU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],iU="6";try{window.__reactRouterVersion=iU}catch{}const aU="startTransition",rC=GT[aU];function oU(t){let{basename:e,children:n,future:r,window:s}=t,a=g.useRef();a.current==null&&(a.current=u8({window:s,v5Compat:!0}));let o=a.current,[l,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=g.useCallback(h=>{u&&rC?rC(()=>c(h)):c(h)},[c,u]);return g.useLayoutEffect(()=>o.listen(d),[o,d]),g.useEffect(()=>Q8(r),[r]),g.createElement(X8,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const lU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,be=g.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,m=eU(e,sU),{basename:p}=g.useContext(Mo),v,w=!1;if(typeof u=="string"&&cU.test(u)&&(v=u,lU))try{let _=new URL(window.location.href),E=u.startsWith("//")?new URL(_.protocol+u):new URL(u),S=f1(E.pathname,p);E.origin===_.origin&&S!=null?u=S+E.search+E.hash:w=!0}catch{}let b=O8(u,{relative:s}),y=uU(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function x(_){r&&r(_),_.defaultPrevented||y(_)}return g.createElement("a",Zw({},m,{href:v||b,onClick:w||a?r:x,ref:n,target:c}))});var sC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sC||(sC={}));var iC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(iC||(iC={}));function uU(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=Mn(),u=Oo(),d=nP(t,{relative:o});return g.useCallback(h=>{if(nU(h,n)){h.preventDefault();let m=r!==void 0?r:Og(u)===Og(d);c(t,{replace:m,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,s,n,t,a,o,l])}function x1(t){let e=g.useRef(eb(t)),n=g.useRef(!1),r=Oo(),s=g.useMemo(()=>rU(r.search,n.current?null:e.current),[r.search]),a=Mn(),o=g.useCallback((l,c)=>{const u=eb(typeof l=="function"?l(s):l);n.current=!0,a("?"+u,c)},[a,s]);return[s,o]}var Vg=["light","dark"],y1="(prefers-color-scheme: dark)",dU=typeof window>"u",w1=g.createContext(void 0),hU={setTheme:t=>{},themes:[]},fU=()=>{var t;return(t=g.useContext(w1))!=null?t:hU},mU=t=>g.useContext(w1)?t.children:g.createElement(gU,{...t}),pU=["light","dark"],gU=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:a=pU,defaultTheme:o=n?"system":"light",attribute:l="data-theme",value:c,children:u,nonce:d})=>{let[h,m]=g.useState(()=>aC(s,o)),[p,v]=g.useState(()=>aC(s)),w=c?Object.values(c):a,b=g.useCallback(E=>{let S=E;if(!S)return;E==="system"&&n&&(S=oC());let D=c?c[S]:S,I=e?xU():null,A=document.documentElement;if(l==="class"?(A.classList.remove(...w),D&&A.classList.add(D)):D?A.setAttribute(l,D):A.removeAttribute(l),r){let R=Vg.includes(o)?o:null,N=Vg.includes(S)?S:R;A.style.colorScheme=N}I==null||I()},[]),y=g.useCallback(E=>{let S=typeof E=="function"?E(E):E;m(S);try{localStorage.setItem(s,S)}catch{}},[t]),x=g.useCallback(E=>{let S=oC(E);v(S),h==="system"&&n&&!t&&b("system")},[h,t]);g.useEffect(()=>{let E=window.matchMedia(y1);return E.addListener(x),x(E),()=>E.removeListener(x)},[x]),g.useEffect(()=>{let E=S=>{if(S.key!==s)return;let D=S.newValue||o;y(D)};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)},[y]),g.useEffect(()=>{b(t??h)},[t,h]);let _=g.useMemo(()=>({theme:h,setTheme:y,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:n?[...a,"system"]:a,systemTheme:n?p:void 0}),[h,y,t,p,n,a]);return g.createElement(w1.Provider,{value:_},g.createElement(vU,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:a,defaultTheme:o,attribute:l,value:c,children:u,attrs:w,nonce:d}),u)},vU=g.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Vg.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(v,w=!1,b=!0)=>{let y=o?o[v]:v,x=w?v+"|| ''":`'${y}'`,_="";return s&&b&&!w&&Vg.includes(v)&&(_+=`d.style.colorScheme = '${v}';`),n==="class"?w||y?_+=`c.add(${x})`:_+="null":y&&(_+=`d[s](n,${x})`),_},p=t?`!function(){${d}${m(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${y1}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${h}}catch(t){}}();`;return g.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})}),aC=(t,e)=>{if(dU)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},xU=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},oC=t=>(t||(t=window.matchMedia(y1)),t.matches?"dark":"light");let yU={data:""},wU=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||yU,bU=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,_U=/\/\*[^]*?\*\/|  +/g,lC=/\n+/g,Ba=(t,e)=>{let n="",r="",s="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?Ba(o,a):a+"{"+Ba(o,a[1]=="k"?"":e)+"}":typeof o=="object"?r+=Ba(o,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ba.p?Ba.p(a,o):a+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Vi={},iP=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+iP(t[n]);return e}return t},jU=(t,e,n,r,s)=>{let a=iP(t),o=Vi[a]||(Vi[a]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(a));if(!Vi[o]){let c=a!==t?t:(u=>{let d,h,m=[{}];for(;d=bU.exec(u.replace(_U,""));)d[4]?m.shift():d[3]?(h=d[3].replace(lC," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][d[1]]=d[2].replace(lC," ").trim();return m[0]})(t);Vi[o]=Ba(s?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&Vi.g?Vi.g:null;return n&&(Vi.g=Vi[o]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(Vi[o],e,r,l),o},NU=(t,e,n)=>t.reduce((r,s,a)=>{let o=e[a];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Ba(l,""):l===!1?"":l}return r+s+(o??"")},"");function rx(t){let e=this||{},n=t.call?t(e.p):t;return jU(n.unshift?n.raw?NU(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,wU(e.target),e.g,e.o,e.k)}let aP,tb,nb;rx.bind({g:1});let ha=rx.bind({k:1});function SU(t,e,n,r){Ba.p=e,aP=t,tb=n,nb=r}function Lo(t,e){let n=this||{};return function(){let r=arguments;function s(a,o){let l=Object.assign({},a),c=l.className||s.className;n.p=Object.assign({theme:tb&&tb()},l),n.o=/ *go\d+/.test(c),l.className=rx.apply(n,r)+(c?" "+c:"");let u=t;return t[0]&&(u=l.as||t,delete l.as),nb&&u[0]&&nb(l),aP(u,l)}return s}}var EU=t=>typeof t=="function",Fg=(t,e)=>EU(t)?t(e):t,CU=(()=>{let t=0;return()=>(++t).toString()})(),oP=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),kU=20,lP=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,kU)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return lP(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+s}))}}},Gp=[],dl={toasts:[],pausedAt:void 0},Xl=t=>{dl=lP(dl,t),Gp.forEach(e=>{e(dl)})},TU={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},IU=(t={})=>{let[e,n]=g.useState(dl),r=g.useRef(dl);g.useEffect(()=>(r.current!==dl&&n(dl),Gp.push(n),()=>{let a=Gp.indexOf(n);a>-1&&Gp.splice(a,1)}),[]);let s=e.toasts.map(a=>{var o,l,c;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||TU[a.type],style:{...t.style,...(c=t[a.type])==null?void 0:c.style,...a.style}}});return{...e,toasts:s}},AU=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||CU()}),Bf=t=>(e,n)=>{let r=AU(e,t,n);return Xl({type:2,toast:r}),r.id},gn=(t,e)=>Bf("blank")(t,e);gn.error=Bf("error");gn.success=Bf("success");gn.loading=Bf("loading");gn.custom=Bf("custom");gn.dismiss=t=>{Xl({type:3,toastId:t})};gn.remove=t=>Xl({type:4,toastId:t});gn.promise=(t,e,n)=>{let r=gn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let a=e.success?Fg(e.success,s):void 0;return a?gn.success(a,{id:r,...n,...n==null?void 0:n.success}):gn.dismiss(r),s}).catch(s=>{let a=e.error?Fg(e.error,s):void 0;a?gn.error(a,{id:r,...n,...n==null?void 0:n.error}):gn.dismiss(r)}),t};var PU=(t,e)=>{Xl({type:1,toast:{id:t,height:e}})},RU=()=>{Xl({type:5,time:Date.now()})},yh=new Map,DU=1e3,MU=(t,e=DU)=>{if(yh.has(t))return;let n=setTimeout(()=>{yh.delete(t),Xl({type:4,toastId:t})},e);yh.set(t,n)},OU=t=>{let{toasts:e,pausedAt:n}=IU(t);g.useEffect(()=>{if(n)return;let a=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&gn.dismiss(l.id);return}return setTimeout(()=>gn.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=g.useCallback(()=>{n&&Xl({type:6,time:Date.now()})},[n]),s=g.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=e.filter(p=>(p.position||u)===(a.position||u)&&p.height),h=d.findIndex(p=>p.id===a.id),m=d.filter((p,v)=>v<h&&p.visible).length;return d.filter(p=>p.visible).slice(...l?[m+1]:[0,m]).reduce((p,v)=>p+(v.height||0)+c,0)},[e]);return g.useEffect(()=>{e.forEach(a=>{if(a.dismissed)MU(a.id,a.removeDelay);else{let o=yh.get(a.id);o&&(clearTimeout(o),yh.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:PU,startPause:RU,endPause:r,calculateOffset:s}}},LU=ha`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,VU=ha`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,FU=ha`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,$U=Lo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${LU} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${VU} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${FU} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,UU=ha`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,zU=Lo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${UU} 1s linear infinite;
`,BU=ha`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,qU=ha`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,WU=Lo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${BU} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${qU} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,HU=Lo("div")`
  position: absolute;
`,GU=Lo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,KU=ha`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,YU=Lo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${KU} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,QU=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?g.createElement(YU,null,e):e:n==="blank"?null:g.createElement(GU,null,g.createElement(zU,{...r}),n!=="loading"&&g.createElement(HU,null,n==="error"?g.createElement($U,{...r}):g.createElement(WU,{...r})))},JU=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,XU=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,ZU="0%{opacity:0;} 100%{opacity:1;}",e9="0%{opacity:1;} 100%{opacity:0;}",t9=Lo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,n9=Lo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,r9=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=oP()?[ZU,e9]:[JU(n),XU(n)];return{animation:e?`${ha(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ha(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},s9=g.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?r9(t.position||e||"top-center",t.visible):{opacity:0},a=g.createElement(QU,{toast:t}),o=g.createElement(n9,{...t.ariaProps},Fg(t.message,t));return g.createElement(t9,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:a,message:o}):g.createElement(g.Fragment,null,a,o))});SU(g.createElement);var i9=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let a=g.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;r(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return g.createElement("div",{ref:a,className:e,style:n},s)},a9=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:oP()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},o9=rx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,cp=16,l9=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:c}=OU(n);return g.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:cp,left:cp,right:cp,bottom:cp,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||e,h=c.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),m=a9(d,h);return g.createElement(i9,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?o9:"",style:m},u.type==="custom"?Fg(u.message,u):s?s(u):g.createElement(s9,{toast:u,position:d}))}))},te=gn,cC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},c9=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},uP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=a>>2,h=(a&3)<<4|l>>4;let m=(l&15)<<2|u>>6,p=u&63;c||(p=64,o||(m=64)),r.push(n[d],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):c9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||u==null||h==null)throw new u9;const m=a<<2|l>>4;if(r.push(m),u!==64){const p=l<<4&240|u>>2;if(r.push(p),h!==64){const v=u<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d9=function(t){const e=cP(t);return uP.encodeByteArray(e,!0)},$g=function(t){return d9(t).replace(/\./g,"")},dP=function(t){try{return uP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9=()=>h9().__FIREBASE_DEFAULTS__,m9=()=>{if(typeof process>"u"||typeof cC>"u")return;const t=cC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},p9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dP(t[1]);return e&&JSON.parse(e)},sx=()=>{try{return f9()||m9()||p9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hP=t=>{var e,n;return(n=(e=sx())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},fP=t=>{const e=hP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mP=()=>{var t;return(t=sx())===null||t===void 0?void 0:t.config},pP=t=>{var e;return(e=sx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g9=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[$g(JSON.stringify(n)),$g(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v9(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cr())}function x9(){var t;const e=(t=sx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function w9(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b9(){const t=cr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _9(){return!x9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xP(){try{return typeof indexedDB=="object"}catch{return!1}}function yP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}function j9(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9="FirebaseError";class ks extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=N9,Object.setPrototypeOf(this,ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?S9(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ks(s,l,r)}}function S9(t,e){return t.replace(E9,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const E9=/\{\$([^}]+)}/g;function C9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(uC(a)&&uC(o)){if(!Zh(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function uC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function eh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function k9(t,e){const n=new T9(t,e);return n.subscribe.bind(n)}class T9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");I9(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=o0),s.error===void 0&&(s.error=o0),s.complete===void 0&&(s.complete=o0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function I9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function o0(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=1e3,P9=2,R9=4*60*60*1e3,D9=.5;function dC(t,e=A9,n=P9){const r=e*Math.pow(n,t),s=Math.round(D9*r*(Math.random()-.5)*2);return Math.min(R9,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t){return t&&t._delegate?t._delegate:t}class Es{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new g9;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(L9(e))try{this.getOrInitializeService({instanceIdentifier:sl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=sl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sl){return this.instances.has(e)}getOptions(e=sl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:O9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sl){return this.component?this.component.multipleInstances?e:sl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function O9(t){return t===sl?void 0:t}function L9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new M9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ft||(ft={}));const F9={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},$9=ft.INFO,U9={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},z9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=U9[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ix{constructor(e){this.name=e,this._logLevel=$9,this._logHandler=z9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const B9=(t,e)=>e.some(n=>t instanceof n);let hC,fC;function q9(){return hC||(hC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W9(){return fC||(fC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wP=new WeakMap,rb=new WeakMap,bP=new WeakMap,l0=new WeakMap,b1=new WeakMap;function H9(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(ho(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&wP.set(n,t)}).catch(()=>{}),b1.set(e,t),e}function G9(t){if(rb.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});rb.set(t,e)}let sb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ho(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K9(t){sb=t(sb)}function Y9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(c0(this),e,...n);return bP.set(r,e.sort?e.sort():[e]),ho(r)}:W9().includes(t)?function(...e){return t.apply(c0(this),e),ho(wP.get(this))}:function(...e){return ho(t.apply(c0(this),e))}}function Q9(t){return typeof t=="function"?Y9(t):(t instanceof IDBTransaction&&G9(t),B9(t,q9())?new Proxy(t,sb):t)}function ho(t){if(t instanceof IDBRequest)return H9(t);if(l0.has(t))return l0.get(t);const e=Q9(t);return e!==t&&(l0.set(t,e),b1.set(e,t)),e}const c0=t=>b1.get(t);function _P(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=ho(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ho(o.result),c.oldVersion,c.newVersion,ho(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const J9=["get","getKey","getAll","getAllKeys","count"],X9=["put","add","delete","clear"],u0=new Map;function mC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(u0.get(e))return u0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=X9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||J9.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return u0.set(e,a),a}K9(t=>({...t,get:(e,n,r)=>mC(e,n)||t.get(e,n,r),has:(e,n)=>!!mC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ez(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ez(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ib="@firebase/app",pC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new ix("@firebase/app"),tz="@firebase/app-compat",nz="@firebase/analytics-compat",rz="@firebase/analytics",sz="@firebase/app-check-compat",iz="@firebase/app-check",az="@firebase/auth",oz="@firebase/auth-compat",lz="@firebase/database",cz="@firebase/data-connect",uz="@firebase/database-compat",dz="@firebase/functions",hz="@firebase/functions-compat",fz="@firebase/installations",mz="@firebase/installations-compat",pz="@firebase/messaging",gz="@firebase/messaging-compat",vz="@firebase/performance",xz="@firebase/performance-compat",yz="@firebase/remote-config",wz="@firebase/remote-config-compat",bz="@firebase/storage",_z="@firebase/storage-compat",jz="@firebase/firestore",Nz="@firebase/vertexai-preview",Sz="@firebase/firestore-compat",Ez="firebase",Cz="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="[DEFAULT]",kz={[ib]:"fire-core",[tz]:"fire-core-compat",[rz]:"fire-analytics",[nz]:"fire-analytics-compat",[iz]:"fire-app-check",[sz]:"fire-app-check-compat",[az]:"fire-auth",[oz]:"fire-auth-compat",[lz]:"fire-rtdb",[cz]:"fire-data-connect",[uz]:"fire-rtdb-compat",[dz]:"fire-fn",[hz]:"fire-fn-compat",[fz]:"fire-iid",[mz]:"fire-iid-compat",[pz]:"fire-fcm",[gz]:"fire-fcm-compat",[vz]:"fire-perf",[xz]:"fire-perf-compat",[yz]:"fire-rc",[wz]:"fire-rc-compat",[bz]:"fire-gcs",[_z]:"fire-gcs-compat",[jz]:"fire-fst",[Sz]:"fire-fst-compat",[Nz]:"fire-vertex","fire-js":"fire-js",[Ez]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=new Map,Tz=new Map,ob=new Map;function gC(t,e){try{t.container.addComponent(e)}catch(n){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ys(t){const e=t.name;if(ob.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;ob.set(e,t);for(const n of Ug.values())gC(n,t);for(const n of Tz.values())gC(n,t);return!0}function Vo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new Zl("app","Firebase",Iz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=Cz;function jP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ab,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw fo.create("bad-app-name",{appName:String(s)});if(n||(n=mP()),!n)throw fo.create("no-options");const a=Ug.get(s);if(a){if(Zh(n,a.options)&&Zh(r,a.config))return a;throw fo.create("duplicate-app",{appName:s})}const o=new V9(s);for(const c of ob.values())o.addComponent(c);const l=new Az(n,r,o);return Ug.set(s,l),l}function ax(t=ab){const e=Ug.get(t);if(!e&&t===ab&&mP())return jP();if(!e)throw fo.create("no-app",{appName:t});return e}function Fr(t,e,n){var r;let s=(r=kz[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(l.join(" "));return}Ys(new Es(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz="firebase-heartbeat-database",Rz=1,ef="firebase-heartbeat-store";let d0=null;function NP(){return d0||(d0=_P(Pz,Rz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ef)}catch(n){console.warn(n)}}}}).catch(t=>{throw fo.create("idb-open",{originalErrorMessage:t.message})})),d0}async function Dz(t){try{const n=(await NP()).transaction(ef),r=await n.objectStore(ef).get(SP(t));return await n.done,r}catch(e){if(e instanceof ks)fa.warn(e.message);else{const n=fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fa.warn(n.message)}}}async function vC(t,e){try{const r=(await NP()).transaction(ef,"readwrite");await r.objectStore(ef).put(e,SP(t)),await r.done}catch(n){if(n instanceof ks)fa.warn(n.message);else{const r=fo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fa.warn(r.message)}}}function SP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=1024,Oz=30*24*60*60*1e3;class Lz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Fz(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=xC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Oz}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xC(),{heartbeatsToSend:r,unsentEntries:s}=Vz(this._heartbeatsCache.heartbeats),a=$g(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return fa.warn(n),""}}}function xC(){return new Date().toISOString().substring(0,10)}function Vz(t,e=Mz){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),yC(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),yC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Fz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xP()?yP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Dz(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return vC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return vC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function yC(t){return $g(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(t){Ys(new Es("platform-logger",e=>new Z9(e),"PRIVATE")),Ys(new Es("heartbeat",e=>new Lz(e),"PRIVATE")),Fr(ib,pC,t),Fr(ib,pC,"esm2017"),Fr("fire-js","")}$z("");var ci=function(){return ci=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ci.apply(this,arguments)};function Wf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Uz(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function EP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zz=EP,CP=new Zl("auth","Firebase",EP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=new ix("@firebase/auth");function Bz(t,...e){zg.logLevel<=ft.WARN&&zg.warn(`Auth (${ec}): ${t}`,...e)}function Kp(t,...e){zg.logLevel<=ft.ERROR&&zg.error(`Auth (${ec}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t,...e){throw j1(t,...e)}function yi(t,...e){return j1(t,...e)}function _1(t,e,n){const r=Object.assign(Object.assign({},zz()),{[e]:n});return new Zl("auth","Firebase",r).create(e,{appName:t.name})}function Ws(t){return _1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qz(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cs(t,"argument-error"),_1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function j1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return CP.create(t,...e)}function Be(t,e,...n){if(!t)throw j1(e,...n)}function Ji(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kp(e),new Error(e)}function ma(t,e){t||Ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Wz(){return wC()==="http:"||wC()==="https:"}function wC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wz()||vP()||"connection"in navigator)?navigator.onLine:!0}function Gz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n){this.shortDelay=e,this.longDelay=n,ma(n>e,"Short delay should be less than long delay!"),this.isMobile=v9()||w9()}get(){return Hz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t,e){ma(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz=new Hf(3e4,6e4);function Sa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ni(t,e,n,r,s={}){return TP(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=qf(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},a);return y9()||(u.referrerPolicy="no-referrer"),kP.fetch()(IP(t,t.config.apiHost,n,l),u)})}async function TP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Kz),e);try{const s=new Jz(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw up(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw up(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw up(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw up(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw _1(t,d,u);Cs(t,d)}}catch(s){if(s instanceof ks)throw s;Cs(t,"network-request-failed",{message:String(s)})}}async function Gf(t,e,n,r,s={}){const a=await ni(t,e,n,r,s);return"mfaPendingCredential"in a&&Cs(t,"multi-factor-auth-required",{_serverResponse:a}),a}function IP(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?N1(t.config,s):`${t.config.apiScheme}://${s}`}function Qz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Jz{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yi(this.auth,"network-request-failed")),Yz.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function up(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yi(t,e,r);return s.customData._tokenResponse=n,s}function bC(t){return t!==void 0&&t.enterprise!==void 0}class Xz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Qz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Zz(t,e){return ni(t,"GET","/v2/recaptchaConfig",Sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e7(t,e){return ni(t,"POST","/v1/accounts:delete",e)}async function AP(t,e){return ni(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function t7(t,e=!1){const n=dt(t),r=await n.getIdToken(e),s=S1(r);Be(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:wh(h0(s.auth_time)),issuedAtTime:wh(h0(s.iat)),expirationTime:wh(h0(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function h0(t){return Number(t)*1e3}function S1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Kp("JWT malformed, contained fewer than 3 sections"),null;try{const s=dP(n);return s?JSON.parse(s):(Kp("Failed to decode base64 JWT payload"),null)}catch(s){return Kp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function _C(t){const e=S1(t);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ks&&n7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function n7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wh(this.lastLoginAt),this.creationTime=wh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bg(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Il(t,AP(n,{idToken:r}));Be(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?PP(a.providerUserInfo):[],l=s7(t.providerData,o),c=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new cb(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function ub(t){const e=dt(t);await Bg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function s7(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function PP(t){return t.map(e=>{var{providerId:n}=e,r=Wf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i7(t,e){const n=await TP(t,{},async()=>{const r=qf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=IP(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",kP.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function a7(t,e){return ni(t,"POST","/v2/accounts:revokeToken",Sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_C(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const n=_C(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await i7(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new nu;return r&&(Be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Be(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(Be(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nu,this.toJSON())}_performRefresh(){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t,e){Be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xi{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=Wf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new r7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new cb(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Il(this,this.stsTokenManager.getToken(this.auth,e));return Be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return t7(this,e)}reload(){return ub(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gs(this.auth.app))return Promise.reject(Ws(this.auth));const e=await this.getIdToken();return await Il(this,e7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,o,l,c,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,p=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(l=n.tenantId)!==null&&l!==void 0?l:void 0,b=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,x=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:E,isAnonymous:S,providerData:D,stsTokenManager:I}=n;Be(_&&I,e,"internal-error");const A=nu.fromJSON(this.name,I);Be(typeof _=="string",e,"internal-error"),Pa(h,e.name),Pa(m,e.name),Be(typeof E=="boolean",e,"internal-error"),Be(typeof S=="boolean",e,"internal-error"),Pa(p,e.name),Pa(v,e.name),Pa(w,e.name),Pa(b,e.name),Pa(y,e.name),Pa(x,e.name);const R=new Xi({uid:_,auth:e,email:m,emailVerified:E,displayName:h,isAnonymous:S,photoURL:v,phoneNumber:p,tenantId:w,stsTokenManager:A,createdAt:y,lastLoginAt:x});return D&&Array.isArray(D)&&(R.providerData=D.map(N=>Object.assign({},N))),b&&(R._redirectEventId=b),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new nu;s.updateFromServerResponse(n);const a=new Xi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Bg(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Be(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?PP(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new nu;l.updateFromIdToken(r);const c=new Xi({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new Map;function Zi(t){ma(t instanceof Function,"Expected a class definition");let e=jC.get(t);return e?(ma(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}RP.type="NONE";const NC=RP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t,e,n){return`firebase:${t}:${e}:${n}`}class ru{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Yp(this.userKey,s.apiKey,a),this.fullPersistenceKey=Yp("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ru(Zi(NC),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||Zi(NC);const o=Yp(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){const h=Xi._fromJSON(e,d);u!==a&&(l=h),a=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new ru(a,e,r):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new ru(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FP(e))return"Blackberry";if($P(e))return"Webos";if(MP(e))return"Safari";if((e.includes("chrome/")||OP(e))&&!e.includes("edge/"))return"Chrome";if(VP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DP(t=cr()){return/firefox\//i.test(t)}function MP(t=cr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OP(t=cr()){return/crios\//i.test(t)}function LP(t=cr()){return/iemobile/i.test(t)}function VP(t=cr()){return/android/i.test(t)}function FP(t=cr()){return/blackberry/i.test(t)}function $P(t=cr()){return/webos/i.test(t)}function E1(t=cr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function o7(t=cr()){var e;return E1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function l7(){return b9()&&document.documentMode===10}function UP(t=cr()){return E1(t)||VP(t)||$P(t)||FP(t)||/windows phone/i.test(t)||LP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t,e=[]){let n;switch(t){case"Browser":n=SC(cr());break;case"Worker":n=`${SC(cr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ec}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(t,e={}){return ni(t,"GET","/v2/passwordPolicy",Sa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=6;class h7{constructor(e){var n,r,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:d7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new EC(this),this.idTokenSubscription=new EC(this),this.beforeStateQueue=new c7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zi(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ru.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await AP(this,{idToken:e}),r=await Xi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Gz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gs(this.app))return Promise.reject(Ws(this));const n=e?dt(e):null;return n&&Be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gs(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gs(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await u7(this),n=new h7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await a7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zi(e)||this._popupRedirectResolver;Be(n,this,"argument-error"),this.redirectPersistenceManager=await ru.create(this,[Zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Bz(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ea(t){return dt(t)}class EC{constructor(e){this.auth=e,this.observer=null,this.addObserver=k9(n=>this.observer=n)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ox={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m7(t){ox=t}function BP(t){return ox.loadJS(t)}function p7(){return ox.recaptchaEnterpriseScript}function g7(){return ox.gapiScript}function v7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const x7="recaptcha-enterprise",y7="NO_RECAPTCHA";class w7{constructor(e){this.type=x7,this.auth=Ea(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{Zz(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Xz(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(a,o,l){const c=window.grecaptcha;bC(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(y7)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&bC(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=p7();c.length!==0&&(c+=l),BP(c).then(()=>{s(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function CC(t,e,n,r=!1){const s=new w7(t);let a;try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function db(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await CC(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await CC(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b7(t,e){const n=Vo(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Zh(a,e??{}))return s;Cs(s,"already-initialized")}return n.initialize({options:e})}function _7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function j7(t,e,n){const r=Ea(t);Be(r._canInitEmulator,r,"emulator-config-failed"),Be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=qP(e),{host:o,port:l}=N7(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${a}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),S7()}function qP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function N7(t){const e=qP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:kC(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:kC(o)}}}function kC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function S7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ji("not implemented")}_getIdTokenResponse(e){return Ji("not implemented")}_linkToIdToken(e,n){return Ji("not implemented")}_getReauthenticationResolver(e){return Ji("not implemented")}}async function E7(t,e){return ni(t,"POST","/v1/accounts:update",e)}async function C7(t,e){return ni(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k7(t,e){return Gf(t,"POST","/v1/accounts:signInWithPassword",Sa(t,e))}async function T7(t,e){return ni(t,"POST","/v1/accounts:sendOobCode",Sa(t,e))}async function I7(t,e){return T7(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A7(t,e){return Gf(t,"POST","/v1/accounts:signInWithEmailLink",Sa(t,e))}async function P7(t,e){return Gf(t,"POST","/v1/accounts:signInWithEmailLink",Sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends C1{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new tf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new tf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return db(e,n,"signInWithPassword",k7);case"emailLink":return A7(e,{email:this._email,oobCode:this._password});default:Cs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return db(e,r,"signUpPassword",C7);case"emailLink":return P7(e,{idToken:n,email:this._email,oobCode:this._password});default:Cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(t,e){return Gf(t,"POST","/v1/accounts:signInWithIdp",Sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7="http://localhost";class Al extends C1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Al(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=Wf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Al(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return su(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,su(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,su(e,n)}buildRequest(){const e={requestUri:R7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function M7(t){const e=Zd(eh(t)).link,n=e?Zd(eh(e)).deep_link_id:null,r=Zd(eh(t)).deep_link_id;return(r?Zd(eh(r)).link:null)||r||n||e||t}class k1{constructor(e){var n,r,s,a,o,l;const c=Zd(eh(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,h=D7((s=c.mode)!==null&&s!==void 0?s:null);Be(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=M7(e);try{return new k1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.providerId=xo.PROVIDER_ID}static credential(e,n){return tf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=k1.parseLink(n);return Be(r,"argument-error"),tf._fromEmailAndCode(e,r.code,r.tenantId)}}xo.PROVIDER_ID="password";xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends T1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends Kf{constructor(){super("facebook.com")}static credential(e){return Al._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qa.credentialFromTaggedObject(e)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qa.credential(e.oauthAccessToken)}catch{return null}}}qa.FACEBOOK_SIGN_IN_METHOD="facebook.com";qa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Kf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Al._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gi.credential(n,r)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends Kf{constructor(){super("github.com")}static credential(e){return Al._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wa.credential(e.oauthAccessToken)}catch{return null}}}Wa.GITHUB_SIGN_IN_METHOD="github.com";Wa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends Kf{constructor(){super("twitter.com")}static credential(e,n){return Al._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ha.credentialFromTaggedObject(e)}static credentialFromError(e){return Ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ha.credential(n,r)}catch{return null}}}Ha.TWITTER_SIGN_IN_METHOD="twitter.com";Ha.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O7(t,e){return Gf(t,"POST","/v1/accounts:signUp",Sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Xi._fromIdTokenResponse(e,r,s),o=TC(r);return new Pl({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=TC(r);return new Pl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function TC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends ks{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,qg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new qg(e,n,r,s)}}function WP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?qg._fromErrorAndOperation(t,a,e,r):a})}async function L7(t,e,n=!1){const r=await Il(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(t,e,n=!1){const{auth:r}=t;if(gs(r.app))return Promise.reject(Ws(r));const s="reauthenticate";try{const a=await Il(t,WP(r,s,e,t),n);Be(a.idToken,r,"internal-error");const o=S1(a.idToken);Be(o,r,"internal-error");const{sub:l}=o;return Be(t.uid===l,r,"user-mismatch"),Pl._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Cs(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(t,e,n=!1){if(gs(t.app))return Promise.reject(Ws(t));const r="signIn",s=await WP(t,r,e),a=await Pl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function V7(t,e){return GP(Ea(t),e)}async function IC(t,e){return HP(dt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(t,e,n){var r;Be(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Be(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Be(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Be(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(t){const e=Ea(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YP(t,e,n){if(gs(t.app))return Promise.reject(Ws(t));const r=Ea(t),o=await db(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",O7).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&KP(t),c}),l=await Pl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function $7(t,e,n){return gs(t.app)?Promise.reject(Ws(t)):V7(dt(t),xo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&KP(t),r})}async function AC(t,e){const n=dt(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&F7(n.auth,s,e);const{email:a}=await I7(n.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U7(t,e){return ni(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nf(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=dt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Il(r,U7(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function z7(t,e){const n=dt(t);return gs(n.auth.app)?Promise.reject(Ws(n.auth)):QP(n,e,null)}function B7(t,e){return QP(dt(t),null,e)}async function QP(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const o=await Il(t,E7(r,a));await t._updateTokensIfNecessary(o,!0)}function q7(t,e,n,r){return dt(t).onIdTokenChanged(e,n,r)}function W7(t,e,n){return dt(t).beforeAuthStateChanged(e,n)}function H7(t,e,n,r){return dt(t).onAuthStateChanged(e,n,r)}function G7(t){return dt(t).signOut()}async function K7(t){return dt(t).delete()}const Wg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wg,"1"),this.storage.removeItem(Wg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=1e3,Q7=10;class XP extends JP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);l7()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Q7):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Y7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}XP.type="LOCAL";const J7=XP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP extends JP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ZP.type="SESSION";const eR=ZP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new lx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,a)),c=await X7(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=I1("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(m.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(){return window}function eB(t){wi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function tB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function rB(){return tR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="firebaseLocalStorageDb",sB=1,Hg="firebaseLocalStorage",rR="fbase_key";class Yf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cx(t,e){return t.transaction([Hg],e?"readwrite":"readonly").objectStore(Hg)}function iB(){const t=indexedDB.deleteDatabase(nR);return new Yf(t).toPromise()}function hb(){const t=indexedDB.open(nR,sB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hg,{keyPath:rR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hg)?e(r):(r.close(),await iB(),e(await hb()))})})}async function PC(t,e,n){const r=cx(t,!0).put({[rR]:e,value:n});return new Yf(r).toPromise()}async function aB(t,e){const n=cx(t,!1).get(e),r=await new Yf(n).toPromise();return r===void 0?null:r.value}function RC(t,e){const n=cx(t,!0).delete(e);return new Yf(n).toPromise()}const oB=800,lB=3;class sR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hb(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>lB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lx._getInstance(rB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tB(),!this.activeServiceWorker)return;this.sender=new Z7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hb();return await PC(e,Wg,"1"),await RC(e,Wg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>PC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>aB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>RC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=cx(s,!1).getAll();return new Yf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sR.type="LOCAL";const cB=sR;new Hf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(t,e){return e?Zi(e):(Be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1 extends C1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return su(e,this._buildIdpRequest())}_linkToIdToken(e,n){return su(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return su(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function uB(t){return GP(t.auth,new A1(t),t.bypassAuthState)}function dB(t){const{auth:e,user:n}=t;return Be(n,e,"internal-error"),HP(n,new A1(t),t.bypassAuthState)}async function hB(t){const{auth:e,user:n}=t;return Be(n,e,"internal-error"),L7(n,new A1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uB;case"linkViaPopup":case"linkViaRedirect":return hB;case"reauthViaPopup":case"reauthViaRedirect":return dB;default:Cs(this.auth,"internal-error")}}resolve(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB=new Hf(2e3,1e4);class Gc extends aR{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Gc.currentPopupAction&&Gc.currentPopupAction.cancel(),Gc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){ma(this.filter.length===1,"Popup operations only handle one event");const e=I1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fB.get())};e()}}Gc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB="pendingRedirect",Qp=new Map;class pB extends aR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qp.get(this.auth._key());if(!e){try{const r=await gB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qp.set(this.auth._key(),e)}return this.bypassAuthState||Qp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gB(t,e){const n=lR(e),r=oR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function vB(t,e){return oR(t)._set(lR(e),"true")}function xB(t,e){Qp.set(t._key(),e)}function oR(t){return Zi(t._redirectPersistence)}function lR(t){return Yp(mB,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(t,e,n){return wB(t,e,n)}async function wB(t,e,n){if(gs(t.app))return Promise.reject(Ws(t));const r=Ea(t);qz(t,e,T1),await r._initializationPromise;const s=iR(r,n);return await vB(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function bB(t,e){return await Ea(t)._initializationPromise,cR(t,e,!1)}async function cR(t,e,n=!1){if(gs(t.app))return Promise.reject(Ws(t));const r=Ea(t),s=iR(r,e),o=await new pB(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=10*60*1e3;class jB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!uR(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(yi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_B&&this.cachedEventUids.clear(),this.cachedEventUids.has(DC(e))}saveEventToCache(e){this.cachedEventUids.add(DC(e)),this.lastProcessedEventTime=Date.now()}}function DC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(t,e={}){return ni(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CB=/^https?/;async function kB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SB(t);for(const n of e)try{if(TB(n))return}catch{}Cs(t,"unauthorized-domain")}function TB(t){const e=lb(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!CB.test(n))return!1;if(EB.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB=new Hf(3e4,6e4);function MC(){const t=wi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AB(t){return new Promise((e,n)=>{var r,s,a;function o(){MC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MC(),n(yi(t,"network-request-failed"))},timeout:IB.get()})}if(!((s=(r=wi().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=wi().gapi)===null||a===void 0)&&a.load)o();else{const l=v7("iframefcb");return wi()[l]=()=>{gapi.load?o():n(yi(t,"network-request-failed"))},BP(`${g7()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Jp=null,e})}let Jp=null;function PB(t){return Jp=Jp||AB(t),Jp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=new Hf(5e3,15e3),DB="__/auth/iframe",MB="emulator/auth/iframe",OB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VB(t){const e=t.config;Be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?N1(e,MB):`https://${t.config.authDomain}/${DB}`,r={apiKey:e.apiKey,appName:t.name,v:ec},s=LB.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${qf(r).slice(1)}`}async function FB(t){const e=await PB(t),n=wi().gapi;return Be(n,t,"internal-error"),e.open({where:document.body,url:VB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OB,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=yi(t,"network-request-failed"),l=wi().setTimeout(()=>{a(o)},RB.get());function c(){wi().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UB=500,zB=600,BB="_blank",qB="http://localhost";class OC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WB(t,e,n,r=UB,s=zB){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},$B),{width:r.toString(),height:s.toString(),top:a,left:o}),u=cr().toLowerCase();n&&(l=OP(u)?BB:n),DP(u)&&(e=e||qB,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[p,v])=>`${m}${p}=${v},`,"");if(o7(u)&&l!=="_self")return HB(e||"",l),new OC(null);const h=window.open(e||"",l,d);Be(h,t,"popup-blocked");try{h.focus()}catch{}return new OC(h)}function HB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB="__/auth/handler",KB="emulator/auth/handler",YB=encodeURIComponent("fac");async function LC(t,e,n,r,s,a){Be(t.config.authDomain,t,"auth-domain-config-required"),Be(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ec,eventId:s};if(e instanceof T1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",C9(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Kf){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${YB}=${encodeURIComponent(c)}`:"";return`${QB(t)}?${qf(l).slice(1)}${u}`}function QB({config:t}){return t.emulator?N1(t,KB):`https://${t.authDomain}/${GB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="webStorageSupport";class JB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eR,this._completeRedirectFn=cR,this._overrideRedirectResult=xB}async _openPopup(e,n,r,s){var a;ma((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await LC(e,n,r,lb(),s);return WB(e,o,I1())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await LC(e,n,r,lb(),s);return eB(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(ma(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await FB(e),r=new jB(e);return n.register("authEvent",s=>(Be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(f0,{type:f0},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[f0];o!==void 0&&n(!!o),Cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return UP()||MP()||E1()}}const XB=JB;var VC="@firebase/auth",FC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tq(t){Ys(new Es("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zP(t)},u=new f7(r,s,a,c);return _7(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ys(new Es("auth-internal",e=>{const n=Ea(e.getProvider("auth").getImmediate());return(r=>new ZB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fr(VC,FC,eq(t)),Fr(VC,FC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq=5*60,rq=pP("authIdTokenMaxAge")||nq;let $C=null;const sq=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rq)return;const s=n==null?void 0:n.token;$C!==s&&($C=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iq(t=ax()){const e=Vo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=b7(t,{popupRedirectResolver:XB,persistence:[cB,J7,eR]}),r=pP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=sq(a.toString());W7(n,o,()=>o(n.currentUser)),q7(n,l=>o(l))}}const s=hP("auth");return s&&j7(n,`http://${s}`),n}function aq(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}m7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=yi("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",aq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tq("Browser");var oq="firebase",lq="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fr(oq,lq,"app");var UC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vl,dR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function R(){}R.prototype=A.prototype,I.D=A.prototype,I.prototype=new R,I.prototype.constructor=I,I.C=function(N,P,T){for(var C=Array(arguments.length-2),V=2;V<arguments.length;V++)C[V-2]=arguments[V];return A.prototype[P].apply(N,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,A,R){R||(R=0);var N=Array(16);if(typeof A=="string")for(var P=0;16>P;++P)N[P]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(P=0;16>P;++P)N[P]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=I.g[0],R=I.g[1],P=I.g[2];var T=I.g[3],C=A+(T^R&(P^T))+N[0]+3614090360&4294967295;A=R+(C<<7&4294967295|C>>>25),C=T+(P^A&(R^P))+N[1]+3905402710&4294967295,T=A+(C<<12&4294967295|C>>>20),C=P+(R^T&(A^R))+N[2]+606105819&4294967295,P=T+(C<<17&4294967295|C>>>15),C=R+(A^P&(T^A))+N[3]+3250441966&4294967295,R=P+(C<<22&4294967295|C>>>10),C=A+(T^R&(P^T))+N[4]+4118548399&4294967295,A=R+(C<<7&4294967295|C>>>25),C=T+(P^A&(R^P))+N[5]+1200080426&4294967295,T=A+(C<<12&4294967295|C>>>20),C=P+(R^T&(A^R))+N[6]+2821735955&4294967295,P=T+(C<<17&4294967295|C>>>15),C=R+(A^P&(T^A))+N[7]+4249261313&4294967295,R=P+(C<<22&4294967295|C>>>10),C=A+(T^R&(P^T))+N[8]+1770035416&4294967295,A=R+(C<<7&4294967295|C>>>25),C=T+(P^A&(R^P))+N[9]+2336552879&4294967295,T=A+(C<<12&4294967295|C>>>20),C=P+(R^T&(A^R))+N[10]+4294925233&4294967295,P=T+(C<<17&4294967295|C>>>15),C=R+(A^P&(T^A))+N[11]+2304563134&4294967295,R=P+(C<<22&4294967295|C>>>10),C=A+(T^R&(P^T))+N[12]+1804603682&4294967295,A=R+(C<<7&4294967295|C>>>25),C=T+(P^A&(R^P))+N[13]+4254626195&4294967295,T=A+(C<<12&4294967295|C>>>20),C=P+(R^T&(A^R))+N[14]+2792965006&4294967295,P=T+(C<<17&4294967295|C>>>15),C=R+(A^P&(T^A))+N[15]+1236535329&4294967295,R=P+(C<<22&4294967295|C>>>10),C=A+(P^T&(R^P))+N[1]+4129170786&4294967295,A=R+(C<<5&4294967295|C>>>27),C=T+(R^P&(A^R))+N[6]+3225465664&4294967295,T=A+(C<<9&4294967295|C>>>23),C=P+(A^R&(T^A))+N[11]+643717713&4294967295,P=T+(C<<14&4294967295|C>>>18),C=R+(T^A&(P^T))+N[0]+3921069994&4294967295,R=P+(C<<20&4294967295|C>>>12),C=A+(P^T&(R^P))+N[5]+3593408605&4294967295,A=R+(C<<5&4294967295|C>>>27),C=T+(R^P&(A^R))+N[10]+38016083&4294967295,T=A+(C<<9&4294967295|C>>>23),C=P+(A^R&(T^A))+N[15]+3634488961&4294967295,P=T+(C<<14&4294967295|C>>>18),C=R+(T^A&(P^T))+N[4]+3889429448&4294967295,R=P+(C<<20&4294967295|C>>>12),C=A+(P^T&(R^P))+N[9]+568446438&4294967295,A=R+(C<<5&4294967295|C>>>27),C=T+(R^P&(A^R))+N[14]+3275163606&4294967295,T=A+(C<<9&4294967295|C>>>23),C=P+(A^R&(T^A))+N[3]+4107603335&4294967295,P=T+(C<<14&4294967295|C>>>18),C=R+(T^A&(P^T))+N[8]+1163531501&4294967295,R=P+(C<<20&4294967295|C>>>12),C=A+(P^T&(R^P))+N[13]+2850285829&4294967295,A=R+(C<<5&4294967295|C>>>27),C=T+(R^P&(A^R))+N[2]+4243563512&4294967295,T=A+(C<<9&4294967295|C>>>23),C=P+(A^R&(T^A))+N[7]+1735328473&4294967295,P=T+(C<<14&4294967295|C>>>18),C=R+(T^A&(P^T))+N[12]+2368359562&4294967295,R=P+(C<<20&4294967295|C>>>12),C=A+(R^P^T)+N[5]+4294588738&4294967295,A=R+(C<<4&4294967295|C>>>28),C=T+(A^R^P)+N[8]+2272392833&4294967295,T=A+(C<<11&4294967295|C>>>21),C=P+(T^A^R)+N[11]+1839030562&4294967295,P=T+(C<<16&4294967295|C>>>16),C=R+(P^T^A)+N[14]+4259657740&4294967295,R=P+(C<<23&4294967295|C>>>9),C=A+(R^P^T)+N[1]+2763975236&4294967295,A=R+(C<<4&4294967295|C>>>28),C=T+(A^R^P)+N[4]+1272893353&4294967295,T=A+(C<<11&4294967295|C>>>21),C=P+(T^A^R)+N[7]+4139469664&4294967295,P=T+(C<<16&4294967295|C>>>16),C=R+(P^T^A)+N[10]+3200236656&4294967295,R=P+(C<<23&4294967295|C>>>9),C=A+(R^P^T)+N[13]+681279174&4294967295,A=R+(C<<4&4294967295|C>>>28),C=T+(A^R^P)+N[0]+3936430074&4294967295,T=A+(C<<11&4294967295|C>>>21),C=P+(T^A^R)+N[3]+3572445317&4294967295,P=T+(C<<16&4294967295|C>>>16),C=R+(P^T^A)+N[6]+76029189&4294967295,R=P+(C<<23&4294967295|C>>>9),C=A+(R^P^T)+N[9]+3654602809&4294967295,A=R+(C<<4&4294967295|C>>>28),C=T+(A^R^P)+N[12]+3873151461&4294967295,T=A+(C<<11&4294967295|C>>>21),C=P+(T^A^R)+N[15]+530742520&4294967295,P=T+(C<<16&4294967295|C>>>16),C=R+(P^T^A)+N[2]+3299628645&4294967295,R=P+(C<<23&4294967295|C>>>9),C=A+(P^(R|~T))+N[0]+4096336452&4294967295,A=R+(C<<6&4294967295|C>>>26),C=T+(R^(A|~P))+N[7]+1126891415&4294967295,T=A+(C<<10&4294967295|C>>>22),C=P+(A^(T|~R))+N[14]+2878612391&4294967295,P=T+(C<<15&4294967295|C>>>17),C=R+(T^(P|~A))+N[5]+4237533241&4294967295,R=P+(C<<21&4294967295|C>>>11),C=A+(P^(R|~T))+N[12]+1700485571&4294967295,A=R+(C<<6&4294967295|C>>>26),C=T+(R^(A|~P))+N[3]+2399980690&4294967295,T=A+(C<<10&4294967295|C>>>22),C=P+(A^(T|~R))+N[10]+4293915773&4294967295,P=T+(C<<15&4294967295|C>>>17),C=R+(T^(P|~A))+N[1]+2240044497&4294967295,R=P+(C<<21&4294967295|C>>>11),C=A+(P^(R|~T))+N[8]+1873313359&4294967295,A=R+(C<<6&4294967295|C>>>26),C=T+(R^(A|~P))+N[15]+4264355552&4294967295,T=A+(C<<10&4294967295|C>>>22),C=P+(A^(T|~R))+N[6]+2734768916&4294967295,P=T+(C<<15&4294967295|C>>>17),C=R+(T^(P|~A))+N[13]+1309151649&4294967295,R=P+(C<<21&4294967295|C>>>11),C=A+(P^(R|~T))+N[4]+4149444226&4294967295,A=R+(C<<6&4294967295|C>>>26),C=T+(R^(A|~P))+N[11]+3174756917&4294967295,T=A+(C<<10&4294967295|C>>>22),C=P+(A^(T|~R))+N[2]+718787259&4294967295,P=T+(C<<15&4294967295|C>>>17),C=R+(T^(P|~A))+N[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,A){A===void 0&&(A=I.length);for(var R=A-this.blockSize,N=this.B,P=this.h,T=0;T<A;){if(P==0)for(;T<=R;)s(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<A;)if(N[P++]=I.charCodeAt(T++),P==this.blockSize){s(this,N),P=0;break}}else for(;T<A;)if(N[P++]=I[T++],P==this.blockSize){s(this,N),P=0;break}}this.h=P,this.o+=A},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;var R=8*this.o;for(A=I.length-8;A<I.length;++A)I[A]=R&255,R/=256;for(this.u(I),I=Array(16),A=R=0;4>A;++A)for(var N=0;32>N;N+=8)I[R++]=this.g[A]>>>N&255;return I};function a(I,A){var R=l;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=A(I)}function o(I,A){this.h=A;for(var R=[],N=!0,P=I.length-1;0<=P;P--){var T=I[P]|0;N&&T==A||(R[P]=T,N=!1)}this.g=R}var l={};function c(I){return-128<=I&&128>I?a(I,function(A){return new o([A|0],0>A?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return b(u(-I));for(var A=[],R=1,N=0;I>=R;N++)A[N]=I/R|0,R*=4294967296;return new o(A,0)}function d(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return b(d(I.substring(1),A));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(A,8)),N=h,P=0;P<I.length;P+=8){var T=Math.min(8,I.length-P),C=parseInt(I.substring(P,P+T),A);8>T?(T=u(Math.pow(A,T)),N=N.j(T).add(u(C))):(N=N.j(R),N=N.add(u(C)))}return N}var h=c(0),m=c(1),p=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-b(this).m();for(var I=0,A=1,R=0;R<this.g.length;R++){var N=this.i(R);I+=(0<=N?N:4294967296+N)*A,A*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(w(this))return"-"+b(this).toString(I);for(var A=u(Math.pow(I,6)),R=this,N="";;){var P=E(R,A).g;R=y(R,P.j(A));var T=((0<R.g.length?R.g[0]:R.h)>>>0).toString(I);if(R=P,v(R))return T+N;for(;6>T.length;)T="0"+T;N=T+N}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(var A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function w(I){return I.h==-1}t.l=function(I){return I=y(this,I),w(I)?-1:v(I)?0:1};function b(I){for(var A=I.g.length,R=[],N=0;N<A;N++)R[N]=~I.g[N];return new o(R,~I.h).add(m)}t.abs=function(){return w(this)?b(this):this},t.add=function(I){for(var A=Math.max(this.g.length,I.g.length),R=[],N=0,P=0;P<=A;P++){var T=N+(this.i(P)&65535)+(I.i(P)&65535),C=(T>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);N=C>>>16,T&=65535,C&=65535,R[P]=C<<16|T}return new o(R,R[R.length-1]&-2147483648?-1:0)};function y(I,A){return I.add(b(A))}t.j=function(I){if(v(this)||v(I))return h;if(w(this))return w(I)?b(this).j(b(I)):b(b(this).j(I));if(w(I))return b(this.j(b(I)));if(0>this.l(p)&&0>I.l(p))return u(this.m()*I.m());for(var A=this.g.length+I.g.length,R=[],N=0;N<2*A;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(var P=0;P<I.g.length;P++){var T=this.i(N)>>>16,C=this.i(N)&65535,V=I.i(P)>>>16,z=I.i(P)&65535;R[2*N+2*P]+=C*z,x(R,2*N+2*P),R[2*N+2*P+1]+=T*z,x(R,2*N+2*P+1),R[2*N+2*P+1]+=C*V,x(R,2*N+2*P+1),R[2*N+2*P+2]+=T*V,x(R,2*N+2*P+2)}for(N=0;N<A;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=A;N<2*A;N++)R[N]=0;return new o(R,0)};function x(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function _(I,A){this.g=I,this.h=A}function E(I,A){if(v(A))throw Error("division by zero");if(v(I))return new _(h,h);if(w(I))return A=E(b(I),A),new _(b(A.g),b(A.h));if(w(A))return A=E(I,b(A)),new _(b(A.g),A.h);if(30<I.g.length){if(w(I)||w(A))throw Error("slowDivide_ only works with positive integers.");for(var R=m,N=A;0>=N.l(I);)R=S(R),N=S(N);var P=D(R,1),T=D(N,1);for(N=D(N,2),R=D(R,2);!v(N);){var C=T.add(N);0>=C.l(I)&&(P=P.add(R),T=C),N=D(N,1),R=D(R,1)}return A=y(I,P.j(A)),new _(P,A)}for(P=h;0<=I.l(A);){for(R=Math.max(1,Math.floor(I.m()/A.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),T=u(R),C=T.j(A);w(C)||0<C.l(I);)R-=N,T=u(R),C=T.j(A);v(T)&&(T=m),P=P.add(T),I=y(I,C)}return new _(P,I)}t.A=function(I){return E(this,I).h},t.and=function(I){for(var A=Math.max(this.g.length,I.g.length),R=[],N=0;N<A;N++)R[N]=this.i(N)&I.i(N);return new o(R,this.h&I.h)},t.or=function(I){for(var A=Math.max(this.g.length,I.g.length),R=[],N=0;N<A;N++)R[N]=this.i(N)|I.i(N);return new o(R,this.h|I.h)},t.xor=function(I){for(var A=Math.max(this.g.length,I.g.length),R=[],N=0;N<A;N++)R[N]=this.i(N)^I.i(N);return new o(R,this.h^I.h)};function S(I){for(var A=I.g.length+1,R=[],N=0;N<A;N++)R[N]=I.i(N)<<1|I.i(N-1)>>>31;return new o(R,I.h)}function D(I,A){var R=A>>5;A%=32;for(var N=I.g.length-R,P=[],T=0;T<N;T++)P[T]=0<A?I.i(T+R)>>>A|I.i(T+R+1)<<32-A:I.i(T+R);return new o(P,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,vl=o}).apply(typeof UC<"u"?UC:typeof self<"u"?self:typeof window<"u"?window:{});var dp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hR,th,fR,Xp,fb,mR,pR,gR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,j,k){return f==Array.prototype||f==Object.prototype||(f[j]=k.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof dp=="object"&&dp];for(var j=0;j<f.length;++j){var k=f[j];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=n(this);function s(f,j){if(j)e:{var k=r;f=f.split(".");for(var M=0;M<f.length-1;M++){var q=f[M];if(!(q in k))break e;k=k[q]}f=f[f.length-1],M=k[f],j=j(M),j!=M&&j!=null&&e(k,f,{configurable:!0,writable:!0,value:j})}}function a(f,j){f instanceof String&&(f+="");var k=0,M=!1,q={next:function(){if(!M&&k<f.length){var X=k++;return{value:j(X,f[X]),done:!1}}return M=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(f){return f||function(){return a(this,function(j,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(f){var j=typeof f;return j=j!="object"?j:f?Array.isArray(f)?"array":j:"null",j=="array"||j=="object"&&typeof f.length=="number"}function u(f){var j=typeof f;return j=="object"&&f!=null||j=="function"}function d(f,j,k){return f.call.apply(f.bind,arguments)}function h(f,j,k){if(!f)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,M),f.apply(j,q)}}return function(){return f.apply(j,arguments)}}function m(f,j,k){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function p(f,j){var k=Array.prototype.slice.call(arguments,1);return function(){var M=k.slice();return M.push.apply(M,arguments),f.apply(this,M)}}function v(f,j){function k(){}k.prototype=j.prototype,f.aa=j.prototype,f.prototype=new k,f.prototype.constructor=f,f.Qb=function(M,q,X){for(var ve=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)ve[Dt-2]=arguments[Dt];return j.prototype[q].apply(M,ve)}}function w(f){const j=f.length;if(0<j){const k=Array(j);for(let M=0;M<j;M++)k[M]=f[M];return k}return[]}function b(f,j){for(let k=1;k<arguments.length;k++){const M=arguments[k];if(c(M)){const q=f.length||0,X=M.length||0;f.length=q+X;for(let ve=0;ve<X;ve++)f[q+ve]=M[ve]}else f.push(M)}}class y{constructor(j,k){this.i=j,this.j=k,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function x(f){return/^[\s\xa0]*$/.test(f)}function _(){var f=l.navigator;return f&&(f=f.userAgent)?f:""}function E(f){return E[" "](f),f}E[" "]=function(){};var S=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function D(f,j,k){for(const M in f)j.call(k,f[M],M,f)}function I(f,j){for(const k in f)j.call(void 0,f[k],k,f)}function A(f){const j={};for(const k in f)j[k]=f[k];return j}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(f,j){let k,M;for(let q=1;q<arguments.length;q++){M=arguments[q];for(k in M)f[k]=M[k];for(let X=0;X<R.length;X++)k=R[X],Object.prototype.hasOwnProperty.call(M,k)&&(f[k]=M[k])}}function P(f){var j=1;f=f.split(":");const k=[];for(;0<j&&f.length;)k.push(f.shift()),j--;return f.length&&k.push(f.join(":")),k}function T(f){l.setTimeout(()=>{throw f},0)}function C(){var f=W;let j=null;return f.g&&(j=f.g,f.g=f.g.next,f.g||(f.h=null),j.next=null),j}class V{constructor(){this.h=this.g=null}add(j,k){const M=z.get();M.set(j,k),this.h?this.h.next=M:this.g=M,this.h=M}}var z=new y(()=>new H,f=>f.reset());class H{constructor(){this.next=this.g=this.h=null}set(j,k){this.h=j,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let $,L=!1,W=new V,U=()=>{const f=l.Promise.resolve(void 0);$=()=>{f.then(Z)}};var Z=()=>{for(var f;f=C();){try{f.h.call(f.g)}catch(k){T(k)}var j=z;j.j(f),100>j.h&&(j.h++,f.next=j.g,j.g=f)}L=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(f,j){this.type=f,this.g=this.target=j,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var et=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var f=!1,j=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const k=()=>{};l.addEventListener("test",k,j),l.removeEventListener("test",k,j)}catch{}return f}();function ae(f,j){if(ke.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var k=this.type=f.type,M=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=j,j=f.relatedTarget){if(S){e:{try{E(j.nodeName);var q=!0;break e}catch{}q=!1}q||(j=null)}}else k=="mouseover"?j=f.fromElement:k=="mouseout"&&(j=f.toElement);this.relatedTarget=j,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:fe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ae.aa.h.call(this)}}v(ae,ke);var fe={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function J(f,j,k,M,q){this.listener=f,this.proxy=null,this.src=j,this.type=k,this.capture=!!M,this.ha=q,this.key=++Ue,this.da=this.fa=!1}function pe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function G(f){this.src=f,this.g={},this.h=0}G.prototype.add=function(f,j,k,M,q){var X=f.toString();f=this.g[X],f||(f=this.g[X]=[],this.h++);var ve=ie(f,j,M,q);return-1<ve?(j=f[ve],k||(j.fa=!1)):(j=new J(j,this.src,X,!!M,q),j.fa=k,f.push(j)),j};function re(f,j){var k=j.type;if(k in f.g){var M=f.g[k],q=Array.prototype.indexOf.call(M,j,void 0),X;(X=0<=q)&&Array.prototype.splice.call(M,q,1),X&&(pe(j),f.g[k].length==0&&(delete f.g[k],f.h--))}}function ie(f,j,k,M){for(var q=0;q<f.length;++q){var X=f[q];if(!X.da&&X.listener==j&&X.capture==!!k&&X.ha==M)return q}return-1}var Ae="closure_lm_"+(1e6*Math.random()|0),ze={};function We(f,j,k,M,q){if(Array.isArray(j)){for(var X=0;X<j.length;X++)We(f,j[X],k,M,q);return null}return k=_t(k),f&&f[ce]?f.K(j,k,u(M)?!!M.capture:!!M,q):bt(f,j,k,!1,M,q)}function bt(f,j,k,M,q,X){if(!j)throw Error("Invalid event type");var ve=u(q)?!!q.capture:!!q,Dt=me(f);if(Dt||(f[Ae]=Dt=new G(f)),k=Dt.add(j,k,M,ve,X),k.proxy)return k;if(M=O(),k.proxy=M,M.src=f,M.listener=k,f.addEventListener)et||(q=ve),q===void 0&&(q=!1),f.addEventListener(j.toString(),M,q);else if(f.attachEvent)f.attachEvent(je(j.toString()),M);else if(f.addListener&&f.removeListener)f.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return k}function O(){function f(k){return j.call(f.src,f.listener,k)}const j=xe;return f}function B(f,j,k,M,q){if(Array.isArray(j))for(var X=0;X<j.length;X++)B(f,j[X],k,M,q);else M=u(M)?!!M.capture:!!M,k=_t(k),f&&f[ce]?(f=f.i,j=String(j).toString(),j in f.g&&(X=f.g[j],k=ie(X,k,M,q),-1<k&&(pe(X[k]),Array.prototype.splice.call(X,k,1),X.length==0&&(delete f.g[j],f.h--)))):f&&(f=me(f))&&(j=f.g[j.toString()],f=-1,j&&(f=ie(j,k,M,q)),(k=-1<f?j[f]:null)&&K(k))}function K(f){if(typeof f!="number"&&f&&!f.da){var j=f.src;if(j&&j[ce])re(j.i,f);else{var k=f.type,M=f.proxy;j.removeEventListener?j.removeEventListener(k,M,f.capture):j.detachEvent?j.detachEvent(je(k),M):j.addListener&&j.removeListener&&j.removeListener(M),(k=me(j))?(re(k,f),k.h==0&&(k.src=null,j[Ae]=null)):pe(f)}}}function je(f){return f in ze?ze[f]:ze[f]="on"+f}function xe(f,j){if(f.da)f=!0;else{j=new ae(j,this);var k=f.listener,M=f.ha||f.src;f.fa&&K(f),f=k.call(M,j)}return f}function me(f){return f=f[Ae],f instanceof G?f:null}var Oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(f){return typeof f=="function"?f:(f[Oe]||(f[Oe]=function(j){return f.handleEvent(j)}),f[Oe])}function ht(){oe.call(this),this.i=new G(this),this.M=this,this.F=null}v(ht,oe),ht.prototype[ce]=!0,ht.prototype.removeEventListener=function(f,j,k,M){B(this,f,j,k,M)};function gt(f,j){var k,M=f.F;if(M)for(k=[];M;M=M.F)k.push(M);if(f=f.M,M=j.type||j,typeof j=="string")j=new ke(j,f);else if(j instanceof ke)j.target=j.target||f;else{var q=j;j=new ke(M,f),N(j,q)}if(q=!0,k)for(var X=k.length-1;0<=X;X--){var ve=j.g=k[X];q=ls(ve,M,!0,j)&&q}if(ve=j.g=f,q=ls(ve,M,!0,j)&&q,q=ls(ve,M,!1,j)&&q,k)for(X=0;X<k.length;X++)ve=j.g=k[X],q=ls(ve,M,!1,j)&&q}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var f=this.i,j;for(j in f.g){for(var k=f.g[j],M=0;M<k.length;M++)pe(k[M]);delete f.g[j],f.h--}}this.F=null},ht.prototype.K=function(f,j,k,M){return this.i.add(String(f),j,!1,k,M)},ht.prototype.L=function(f,j,k,M){return this.i.add(String(f),j,!0,k,M)};function ls(f,j,k,M){if(j=f.i.g[String(j)],!j)return!0;j=j.concat();for(var q=!0,X=0;X<j.length;++X){var ve=j[X];if(ve&&!ve.da&&ve.capture==k){var Dt=ve.listener,$n=ve.ha||ve.src;ve.fa&&re(f.i,ve),q=Dt.call($n,M)!==!1&&q}}return q&&!M.defaultPrevented}function Tm(f,j,k){if(typeof f=="function")k&&(f=m(f,k));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:l.setTimeout(f,j||0)}function dc(f){f.g=Tm(()=>{f.g=null,f.i&&(f.i=!1,dc(f))},f.l);const j=f.h;f.h=null,f.m.apply(null,j)}class xd extends oe{constructor(j,k){super(),this.m=j,this.l=k,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:dc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Go(f){oe.call(this),this.h=f,this.g={}}v(Go,oe);var yd=[];function Im(f){D(f.g,function(j,k){this.g.hasOwnProperty(k)&&K(j)},f),f.g={}}Go.prototype.N=function(){Go.aa.N.call(this),Im(this)},Go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hc=l.JSON.stringify,dV=l.JSON.parse,hV=class{stringify(f){return l.JSON.stringify(f,void 0)}parse(f){return l.JSON.parse(f,void 0)}};function yy(){}yy.prototype.h=null;function XN(f){return f.h||(f.h=f.i())}function ZN(){}var wd={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wy(){ke.call(this,"d")}v(wy,ke);function by(){ke.call(this,"c")}v(by,ke);var Ko={},eS=null;function Am(){return eS=eS||new ht}Ko.La="serverreachability";function tS(f){ke.call(this,Ko.La,f)}v(tS,ke);function bd(f){const j=Am();gt(j,new tS(j))}Ko.STAT_EVENT="statevent";function nS(f,j){ke.call(this,Ko.STAT_EVENT,f),this.stat=j}v(nS,ke);function dr(f){const j=Am();gt(j,new nS(j,f))}Ko.Ma="timingevent";function rS(f,j){ke.call(this,Ko.Ma,f),this.size=j}v(rS,ke);function _d(f,j){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){f()},j)}function jd(){this.g=!0}jd.prototype.xa=function(){this.g=!1};function fV(f,j,k,M,q,X){f.info(function(){if(f.g)if(X)for(var ve="",Dt=X.split("&"),$n=0;$n<Dt.length;$n++){var Nt=Dt[$n].split("=");if(1<Nt.length){var Qn=Nt[0];Nt=Nt[1];var Jn=Qn.split("_");ve=2<=Jn.length&&Jn[1]=="type"?ve+(Qn+"="+Nt+"&"):ve+(Qn+"=redacted&")}}else ve=null;else ve=X;return"XMLHTTP REQ ("+M+") [attempt "+q+"]: "+j+`
`+k+`
`+ve})}function mV(f,j,k,M,q,X,ve){f.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+q+"]: "+j+`
`+k+`
`+X+" "+ve})}function fc(f,j,k,M){f.info(function(){return"XMLHTTP TEXT ("+j+"): "+gV(f,k)+(M?" "+M:"")})}function pV(f,j){f.info(function(){return"TIMEOUT: "+j})}jd.prototype.info=function(){};function gV(f,j){if(!f.g)return j;if(!j)return null;try{var k=JSON.parse(j);if(k){for(f=0;f<k.length;f++)if(Array.isArray(k[f])){var M=k[f];if(!(2>M.length)){var q=M[1];if(Array.isArray(q)&&!(1>q.length)){var X=q[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ve=1;ve<q.length;ve++)q[ve]=""}}}}return hc(k)}catch{return j}}var Pm={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_y;function Rm(){}v(Rm,yy),Rm.prototype.g=function(){return new XMLHttpRequest},Rm.prototype.i=function(){return{}},_y=new Rm;function ka(f,j,k,M){this.j=f,this.i=j,this.l=k,this.R=M||1,this.U=new Go(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iS}function iS(){this.i=null,this.g="",this.h=!1}var aS={},jy={};function Ny(f,j,k){f.L=1,f.v=Lm(Oi(j)),f.m=k,f.P=!0,oS(f,null)}function oS(f,j){f.F=Date.now(),Dm(f),f.A=Oi(f.v);var k=f.A,M=f.R;Array.isArray(M)||(M=[String(M)]),bS(k.i,"t",M),f.C=0,k=f.j.J,f.h=new iS,f.g=FS(f.j,k?j:null,!f.m),0<f.O&&(f.M=new xd(m(f.Y,f,f.g),f.O)),j=f.U,k=f.g,M=f.ca;var q="readystatechange";Array.isArray(q)||(q&&(yd[0]=q.toString()),q=yd);for(var X=0;X<q.length;X++){var ve=We(k,q[X],M||j.handleEvent,!1,j.h||j);if(!ve)break;j.g[ve.key]=ve}j=f.H?A(f.H):{},f.m?(f.u||(f.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,j)):(f.u="GET",f.g.ea(f.A,f.u,null,j)),bd(),fV(f.i,f.u,f.A,f.l,f.R,f.m)}ka.prototype.ca=function(f){f=f.target;const j=this.M;j&&Li(f)==3?j.j():this.Y(f)},ka.prototype.Y=function(f){try{if(f==this.g)e:{const Jn=Li(this.g);var j=this.g.Ba();const gc=this.g.Z();if(!(3>Jn)&&(Jn!=3||this.g&&(this.h.h||this.g.oa()||kS(this.g)))){this.J||Jn!=4||j==7||(j==8||0>=gc?bd(3):bd(2)),Sy(this);var k=this.g.Z();this.X=k;t:if(lS(this)){var M=kS(this.g);f="";var q=M.length,X=Li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yo(this),Nd(this);var ve="";break t}this.h.i=new l.TextDecoder}for(j=0;j<q;j++)this.h.h=!0,f+=this.h.i.decode(M[j],{stream:!(X&&j==q-1)});M.length=0,this.h.g+=f,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=k==200,mV(this.i,this.u,this.A,this.l,this.R,Jn,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Dt,$n=this.g;if((Dt=$n.g?$n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Dt)){var Nt=Dt;break t}}Nt=null}if(k=Nt)fc(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ey(this,k);else{this.o=!1,this.s=3,dr(12),Yo(this),Nd(this);break e}}if(this.P){k=!0;let Is;for(;!this.J&&this.C<ve.length;)if(Is=vV(this,ve),Is==jy){Jn==4&&(this.s=4,dr(14),k=!1),fc(this.i,this.l,null,"[Incomplete Response]");break}else if(Is==aS){this.s=4,dr(15),fc(this.i,this.l,ve,"[Invalid Chunk]"),k=!1;break}else fc(this.i,this.l,Is,null),Ey(this,Is);if(lS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jn!=4||ve.length!=0||this.h.h||(this.s=1,dr(16),k=!1),this.o=this.o&&k,!k)fc(this.i,this.l,ve,"[Invalid Chunked Response]"),Yo(this),Nd(this);else if(0<ve.length&&!this.W){this.W=!0;var Qn=this.j;Qn.g==this&&Qn.ba&&!Qn.M&&(Qn.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),Py(Qn),Qn.M=!0,dr(11))}}else fc(this.i,this.l,ve,null),Ey(this,ve);Jn==4&&Yo(this),this.o&&!this.J&&(Jn==4?MS(this.j,this):(this.o=!1,Dm(this)))}else DV(this.g),k==400&&0<ve.indexOf("Unknown SID")?(this.s=3,dr(12)):(this.s=0,dr(13)),Yo(this),Nd(this)}}}catch{}finally{}};function lS(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function vV(f,j){var k=f.C,M=j.indexOf(`
`,k);return M==-1?jy:(k=Number(j.substring(k,M)),isNaN(k)?aS:(M+=1,M+k>j.length?jy:(j=j.slice(M,M+k),f.C=M+k,j)))}ka.prototype.cancel=function(){this.J=!0,Yo(this)};function Dm(f){f.S=Date.now()+f.I,cS(f,f.I)}function cS(f,j){if(f.B!=null)throw Error("WatchDog timer not null");f.B=_d(m(f.ba,f),j)}function Sy(f){f.B&&(l.clearTimeout(f.B),f.B=null)}ka.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(pV(this.i,this.A),this.L!=2&&(bd(),dr(17)),Yo(this),this.s=2,Nd(this)):cS(this,this.S-f)};function Nd(f){f.j.G==0||f.J||MS(f.j,f)}function Yo(f){Sy(f);var j=f.M;j&&typeof j.ma=="function"&&j.ma(),f.M=null,Im(f.U),f.g&&(j=f.g,f.g=null,j.abort(),j.ma())}function Ey(f,j){try{var k=f.j;if(k.G!=0&&(k.g==f||Cy(k.h,f))){if(!f.K&&Cy(k.h,f)&&k.G==3){try{var M=k.Da.g.parse(j)}catch{M=null}if(Array.isArray(M)&&M.length==3){var q=M;if(q[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<f.F)Bm(k),Um(k);else break e;Ay(k),dr(18)}}else k.za=q[1],0<k.za-k.T&&37500>q[2]&&k.F&&k.v==0&&!k.C&&(k.C=_d(m(k.Za,k),6e3));if(1>=hS(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else Jo(k,11)}else if((f.K||k.g==f)&&Bm(k),!x(j))for(q=k.Da.g.parse(j),j=0;j<q.length;j++){let Nt=q[j];if(k.T=Nt[0],Nt=Nt[1],k.G==2)if(Nt[0]=="c"){k.K=Nt[1],k.ia=Nt[2];const Qn=Nt[3];Qn!=null&&(k.la=Qn,k.j.info("VER="+k.la));const Jn=Nt[4];Jn!=null&&(k.Aa=Jn,k.j.info("SVER="+k.Aa));const gc=Nt[5];gc!=null&&typeof gc=="number"&&0<gc&&(M=1.5*gc,k.L=M,k.j.info("backChannelRequestTimeoutMs_="+M)),M=k;const Is=f.g;if(Is){const Wm=Is.g?Is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wm){var X=M.h;X.g||Wm.indexOf("spdy")==-1&&Wm.indexOf("quic")==-1&&Wm.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ky(X,X.h),X.h=null))}if(M.D){const Ry=Is.g?Is.g.getResponseHeader("X-HTTP-Session-Id"):null;Ry&&(M.ya=Ry,qt(M.I,M.D,Ry))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-f.F,k.j.info("Handshake RTT: "+k.R+"ms")),M=k;var ve=f;if(M.qa=VS(M,M.J?M.ia:null,M.W),ve.K){fS(M.h,ve);var Dt=ve,$n=M.L;$n&&(Dt.I=$n),Dt.B&&(Sy(Dt),Dm(Dt)),M.g=ve}else RS(M);0<k.i.length&&zm(k)}else Nt[0]!="stop"&&Nt[0]!="close"||Jo(k,7);else k.G==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?Jo(k,7):Iy(k):Nt[0]!="noop"&&k.l&&k.l.ta(Nt),k.v=0)}}bd(4)}catch{}}var xV=class{constructor(f,j){this.g=f,this.map=j}};function uS(f){this.l=f||10,l.PerformanceNavigationTiming?(f=l.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dS(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function hS(f){return f.h?1:f.g?f.g.size:0}function Cy(f,j){return f.h?f.h==j:f.g?f.g.has(j):!1}function ky(f,j){f.g?f.g.add(j):f.h=j}function fS(f,j){f.h&&f.h==j?f.h=null:f.g&&f.g.has(j)&&f.g.delete(j)}uS.prototype.cancel=function(){if(this.i=mS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function mS(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let j=f.i;for(const k of f.g.values())j=j.concat(k.D);return j}return w(f.i)}function yV(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var j=[],k=f.length,M=0;M<k;M++)j.push(f[M]);return j}j=[],k=0;for(M in f)j[k++]=f[M];return j}function wV(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var j=[];f=f.length;for(var k=0;k<f;k++)j.push(k);return j}j=[],k=0;for(const M in f)j[k++]=M;return j}}}function pS(f,j){if(f.forEach&&typeof f.forEach=="function")f.forEach(j,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,j,void 0);else for(var k=wV(f),M=yV(f),q=M.length,X=0;X<q;X++)j.call(void 0,M[X],k&&k[X],f)}var gS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bV(f,j){if(f){f=f.split("&");for(var k=0;k<f.length;k++){var M=f[k].indexOf("="),q=null;if(0<=M){var X=f[k].substring(0,M);q=f[k].substring(M+1)}else X=f[k];j(X,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Qo(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Qo){this.h=f.h,Mm(this,f.j),this.o=f.o,this.g=f.g,Om(this,f.s),this.l=f.l;var j=f.i,k=new Cd;k.i=j.i,j.g&&(k.g=new Map(j.g),k.h=j.h),vS(this,k),this.m=f.m}else f&&(j=String(f).match(gS))?(this.h=!1,Mm(this,j[1]||"",!0),this.o=Sd(j[2]||""),this.g=Sd(j[3]||"",!0),Om(this,j[4]),this.l=Sd(j[5]||"",!0),vS(this,j[6]||"",!0),this.m=Sd(j[7]||"")):(this.h=!1,this.i=new Cd(null,this.h))}Qo.prototype.toString=function(){var f=[],j=this.j;j&&f.push(Ed(j,xS,!0),":");var k=this.g;return(k||j=="file")&&(f.push("//"),(j=this.o)&&f.push(Ed(j,xS,!0),"@"),f.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&f.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&f.push("/"),f.push(Ed(k,k.charAt(0)=="/"?NV:jV,!0))),(k=this.i.toString())&&f.push("?",k),(k=this.m)&&f.push("#",Ed(k,EV)),f.join("")};function Oi(f){return new Qo(f)}function Mm(f,j,k){f.j=k?Sd(j,!0):j,f.j&&(f.j=f.j.replace(/:$/,""))}function Om(f,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);f.s=j}else f.s=null}function vS(f,j,k){j instanceof Cd?(f.i=j,CV(f.i,f.h)):(k||(j=Ed(j,SV)),f.i=new Cd(j,f.h))}function qt(f,j,k){f.i.set(j,k)}function Lm(f){return qt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Sd(f,j){return f?j?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ed(f,j,k){return typeof f=="string"?(f=encodeURI(f).replace(j,_V),k&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function _V(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var xS=/[#\/\?@]/g,jV=/[#\?:]/g,NV=/[#\?]/g,SV=/[#\?@]/g,EV=/#/g;function Cd(f,j){this.h=this.g=null,this.i=f||null,this.j=!!j}function Ta(f){f.g||(f.g=new Map,f.h=0,f.i&&bV(f.i,function(j,k){f.add(decodeURIComponent(j.replace(/\+/g," ")),k)}))}t=Cd.prototype,t.add=function(f,j){Ta(this),this.i=null,f=mc(this,f);var k=this.g.get(f);return k||this.g.set(f,k=[]),k.push(j),this.h+=1,this};function yS(f,j){Ta(f),j=mc(f,j),f.g.has(j)&&(f.i=null,f.h-=f.g.get(j).length,f.g.delete(j))}function wS(f,j){return Ta(f),j=mc(f,j),f.g.has(j)}t.forEach=function(f,j){Ta(this),this.g.forEach(function(k,M){k.forEach(function(q){f.call(j,q,M,this)},this)},this)},t.na=function(){Ta(this);const f=Array.from(this.g.values()),j=Array.from(this.g.keys()),k=[];for(let M=0;M<j.length;M++){const q=f[M];for(let X=0;X<q.length;X++)k.push(j[M])}return k},t.V=function(f){Ta(this);let j=[];if(typeof f=="string")wS(this,f)&&(j=j.concat(this.g.get(mc(this,f))));else{f=Array.from(this.g.values());for(let k=0;k<f.length;k++)j=j.concat(f[k])}return j},t.set=function(f,j){return Ta(this),this.i=null,f=mc(this,f),wS(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[j]),this.h+=1,this},t.get=function(f,j){return f?(f=this.V(f),0<f.length?String(f[0]):j):j};function bS(f,j,k){yS(f,j),0<k.length&&(f.i=null,f.g.set(mc(f,j),w(k)),f.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],j=Array.from(this.g.keys());for(var k=0;k<j.length;k++){var M=j[k];const X=encodeURIComponent(String(M)),ve=this.V(M);for(M=0;M<ve.length;M++){var q=X;ve[M]!==""&&(q+="="+encodeURIComponent(String(ve[M]))),f.push(q)}}return this.i=f.join("&")};function mc(f,j){return j=String(j),f.j&&(j=j.toLowerCase()),j}function CV(f,j){j&&!f.j&&(Ta(f),f.i=null,f.g.forEach(function(k,M){var q=M.toLowerCase();M!=q&&(yS(this,M),bS(this,q,k))},f)),f.j=j}function kV(f,j){const k=new jd;if(l.Image){const M=new Image;M.onload=p(Ia,k,"TestLoadImage: loaded",!0,j,M),M.onerror=p(Ia,k,"TestLoadImage: error",!1,j,M),M.onabort=p(Ia,k,"TestLoadImage: abort",!1,j,M),M.ontimeout=p(Ia,k,"TestLoadImage: timeout",!1,j,M),l.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=f}else j(!1)}function TV(f,j){const k=new jd,M=new AbortController,q=setTimeout(()=>{M.abort(),Ia(k,"TestPingServer: timeout",!1,j)},1e4);fetch(f,{signal:M.signal}).then(X=>{clearTimeout(q),X.ok?Ia(k,"TestPingServer: ok",!0,j):Ia(k,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(q),Ia(k,"TestPingServer: error",!1,j)})}function Ia(f,j,k,M,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),M(k)}catch{}}function IV(){this.g=new hV}function AV(f,j,k){const M=k||"";try{pS(f,function(q,X){let ve=q;u(q)&&(ve=hc(q)),j.push(M+X+"="+encodeURIComponent(ve))})}catch(q){throw j.push(M+"type="+encodeURIComponent("_badmap")),q}}function Vm(f){this.l=f.Ub||null,this.j=f.eb||!1}v(Vm,yy),Vm.prototype.g=function(){return new Fm(this.l,this.j)},Vm.prototype.i=function(f){return function(){return f}}({});function Fm(f,j){ht.call(this),this.D=f,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Fm,ht),t=Fm.prototype,t.open=function(f,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=j,this.readyState=1,Td(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(j.body=f),(this.D||l).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kd(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Td(this)),this.g&&(this.readyState=3,Td(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_S(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function _S(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var j=f.value?f.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!f.done}))&&(this.response=this.responseText+=j)}f.done?kd(this):Td(this),this.readyState==3&&_S(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,kd(this))},t.Qa=function(f){this.g&&(this.response=f,kd(this))},t.ga=function(){this.g&&kd(this)};function kd(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Td(f)}t.setRequestHeader=function(f,j){this.u.append(f,j)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],j=this.h.entries();for(var k=j.next();!k.done;)k=k.value,f.push(k[0]+": "+k[1]),k=j.next();return f.join(`\r
`)};function Td(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Fm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function jS(f){let j="";return D(f,function(k,M){j+=M,j+=":",j+=k,j+=`\r
`}),j}function Ty(f,j,k){e:{for(M in k){var M=!1;break e}M=!0}M||(k=jS(k),typeof f=="string"?k!=null&&encodeURIComponent(String(k)):qt(f,j,k))}function on(f){ht.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(on,ht);var PV=/^https?$/i,RV=["POST","PUT"];t=on.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,j,k,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);j=j?j.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_y.g(),this.v=this.o?XN(this.o):XN(_y),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(j,String(f),!0),this.B=!1}catch(X){NS(this,X);return}if(f=k||"",k=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var q in M)k.set(q,M[q]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const X of M.keys())k.set(X,M.get(X));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(k.keys()).find(X=>X.toLowerCase()=="content-type"),q=l.FormData&&f instanceof l.FormData,!(0<=Array.prototype.indexOf.call(RV,j,void 0))||M||q||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ve]of k)this.g.setRequestHeader(X,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{CS(this),this.u=!0,this.g.send(f),this.u=!1}catch(X){NS(this,X)}};function NS(f,j){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=j,f.m=5,SS(f),$m(f)}function SS(f){f.A||(f.A=!0,gt(f,"complete"),gt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,gt(this,"complete"),gt(this,"abort"),$m(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$m(this,!0)),on.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ES(this):this.bb())},t.bb=function(){ES(this)};function ES(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Li(f)!=4||f.Z()!=2)){if(f.u&&Li(f)==4)Tm(f.Ea,0,f);else if(gt(f,"readystatechange"),Li(f)==4){f.h=!1;try{const ve=f.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var k;if(!(k=j)){var M;if(M=ve===0){var q=String(f.D).match(gS)[1]||null;!q&&l.self&&l.self.location&&(q=l.self.location.protocol.slice(0,-1)),M=!PV.test(q?q.toLowerCase():"")}k=M}if(k)gt(f,"complete"),gt(f,"success");else{f.m=6;try{var X=2<Li(f)?f.g.statusText:""}catch{X=""}f.l=X+" ["+f.Z()+"]",SS(f)}}finally{$m(f)}}}}function $m(f,j){if(f.g){CS(f);const k=f.g,M=f.v[0]?()=>{}:null;f.g=null,f.v=null,j||gt(f,"ready");try{k.onreadystatechange=M}catch{}}}function CS(f){f.I&&(l.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Li(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Li(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var j=this.g.responseText;return f&&j.indexOf(f)==0&&(j=j.substring(f.length)),dV(j)}};function kS(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function DV(f){const j={};f=(f.g&&2<=Li(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<f.length;M++){if(x(f[M]))continue;var k=P(f[M]);const q=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const X=j[q]||[];j[q]=X,X.push(k)}I(j,function(M){return M.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Id(f,j,k){return k&&k.internalChannelParams&&k.internalChannelParams[f]||j}function TS(f){this.Aa=0,this.i=[],this.j=new jd,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Id("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Id("baseRetryDelayMs",5e3,f),this.cb=Id("retryDelaySeedMs",1e4,f),this.Wa=Id("forwardChannelMaxRetries",2,f),this.wa=Id("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new uS(f&&f.concurrentRequestLimit),this.Da=new IV,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=TS.prototype,t.la=8,t.G=1,t.connect=function(f,j,k,M){dr(0),this.W=f,this.H=j||{},k&&M!==void 0&&(this.H.OSID=k,this.H.OAID=M),this.F=this.X,this.I=VS(this,null,this.W),zm(this)};function Iy(f){if(IS(f),f.G==3){var j=f.U++,k=Oi(f.I);if(qt(k,"SID",f.K),qt(k,"RID",j),qt(k,"TYPE","terminate"),Ad(f,k),j=new ka(f,f.j,j),j.L=2,j.v=Lm(Oi(k)),k=!1,l.navigator&&l.navigator.sendBeacon)try{k=l.navigator.sendBeacon(j.v.toString(),"")}catch{}!k&&l.Image&&(new Image().src=j.v,k=!0),k||(j.g=FS(j.j,null),j.g.ea(j.v)),j.F=Date.now(),Dm(j)}LS(f)}function Um(f){f.g&&(Py(f),f.g.cancel(),f.g=null)}function IS(f){Um(f),f.u&&(l.clearTimeout(f.u),f.u=null),Bm(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&l.clearTimeout(f.s),f.s=null)}function zm(f){if(!dS(f.h)&&!f.s){f.s=!0;var j=f.Ga;$||U(),L||($(),L=!0),W.add(j,f),f.B=0}}function MV(f,j){return hS(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=j.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=_d(m(f.Ga,f,j),OS(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const q=new ka(this,this.j,f);let X=this.o;if(this.S&&(X?(X=A(X),N(X,this.S)):X=this.S),this.m!==null||this.O||(q.H=X,X=null),this.P)e:{for(var j=0,k=0;k<this.i.length;k++){t:{var M=this.i[k];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(j+=M,4096<j){j=k;break e}if(j===4096||k===this.i.length-1){j=k+1;break e}}j=1e3}else j=1e3;j=PS(this,q,j),k=Oi(this.I),qt(k,"RID",f),qt(k,"CVER",22),this.D&&qt(k,"X-HTTP-Session-Id",this.D),Ad(this,k),X&&(this.O?j="headers="+encodeURIComponent(String(jS(X)))+"&"+j:this.m&&Ty(k,this.m,X)),ky(this.h,q),this.Ua&&qt(k,"TYPE","init"),this.P?(qt(k,"$req",j),qt(k,"SID","null"),q.T=!0,Ny(q,k,null)):Ny(q,k,j),this.G=2}}else this.G==3&&(f?AS(this,f):this.i.length==0||dS(this.h)||AS(this))};function AS(f,j){var k;j?k=j.l:k=f.U++;const M=Oi(f.I);qt(M,"SID",f.K),qt(M,"RID",k),qt(M,"AID",f.T),Ad(f,M),f.m&&f.o&&Ty(M,f.m,f.o),k=new ka(f,f.j,k,f.B+1),f.m===null&&(k.H=f.o),j&&(f.i=j.D.concat(f.i)),j=PS(f,k,1e3),k.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ky(f.h,k),Ny(k,M,j)}function Ad(f,j){f.H&&D(f.H,function(k,M){qt(j,M,k)}),f.l&&pS({},function(k,M){qt(j,M,k)})}function PS(f,j,k){k=Math.min(f.i.length,k);var M=f.l?m(f.l.Na,f.l,f):null;e:{var q=f.i;let X=-1;for(;;){const ve=["count="+k];X==-1?0<k?(X=q[0].g,ve.push("ofs="+X)):X=0:ve.push("ofs="+X);let Dt=!0;for(let $n=0;$n<k;$n++){let Nt=q[$n].g;const Qn=q[$n].map;if(Nt-=X,0>Nt)X=Math.max(0,q[$n].g-100),Dt=!1;else try{AV(Qn,ve,"req"+Nt+"_")}catch{M&&M(Qn)}}if(Dt){M=ve.join("&");break e}}}return f=f.i.splice(0,k),j.D=f,M}function RS(f){if(!f.g&&!f.u){f.Y=1;var j=f.Fa;$||U(),L||($(),L=!0),W.add(j,f),f.v=0}}function Ay(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=_d(m(f.Fa,f),OS(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,DS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=_d(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dr(10),Um(this),DS(this))};function Py(f){f.A!=null&&(l.clearTimeout(f.A),f.A=null)}function DS(f){f.g=new ka(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var j=Oi(f.qa);qt(j,"RID","rpc"),qt(j,"SID",f.K),qt(j,"AID",f.T),qt(j,"CI",f.F?"0":"1"),!f.F&&f.ja&&qt(j,"TO",f.ja),qt(j,"TYPE","xmlhttp"),Ad(f,j),f.m&&f.o&&Ty(j,f.m,f.o),f.L&&(f.g.I=f.L);var k=f.g;f=f.ia,k.L=1,k.v=Lm(Oi(j)),k.m=null,k.P=!0,oS(k,f)}t.Za=function(){this.C!=null&&(this.C=null,Um(this),Ay(this),dr(19))};function Bm(f){f.C!=null&&(l.clearTimeout(f.C),f.C=null)}function MS(f,j){var k=null;if(f.g==j){Bm(f),Py(f),f.g=null;var M=2}else if(Cy(f.h,j))k=j.D,fS(f.h,j),M=1;else return;if(f.G!=0){if(j.o)if(M==1){k=j.m?j.m.length:0,j=Date.now()-j.F;var q=f.B;M=Am(),gt(M,new rS(M,k)),zm(f)}else RS(f);else if(q=j.s,q==3||q==0&&0<j.X||!(M==1&&MV(f,j)||M==2&&Ay(f)))switch(k&&0<k.length&&(j=f.h,j.i=j.i.concat(k)),q){case 1:Jo(f,5);break;case 4:Jo(f,10);break;case 3:Jo(f,6);break;default:Jo(f,2)}}}function OS(f,j){let k=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(k*=2),k*j}function Jo(f,j){if(f.j.info("Error code "+j),j==2){var k=m(f.fb,f),M=f.Xa;const q=!M;M=new Qo(M||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Mm(M,"https"),Lm(M),q?kV(M.toString(),k):TV(M.toString(),k)}else dr(2);f.G=0,f.l&&f.l.sa(j),LS(f),IS(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),dr(2)):(this.j.info("Failed to ping google.com"),dr(1))};function LS(f){if(f.G=0,f.ka=[],f.l){const j=mS(f.h);(j.length!=0||f.i.length!=0)&&(b(f.ka,j),b(f.ka,f.i),f.h.i.length=0,w(f.i),f.i.length=0),f.l.ra()}}function VS(f,j,k){var M=k instanceof Qo?Oi(k):new Qo(k);if(M.g!="")j&&(M.g=j+"."+M.g),Om(M,M.s);else{var q=l.location;M=q.protocol,j=j?j+"."+q.hostname:q.hostname,q=+q.port;var X=new Qo(null);M&&Mm(X,M),j&&(X.g=j),q&&Om(X,q),k&&(X.l=k),M=X}return k=f.D,j=f.ya,k&&j&&qt(M,k,j),qt(M,"VER",f.la),Ad(f,M),M}function FS(f,j,k){if(j&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=f.Ca&&!f.pa?new on(new Vm({eb:k})):new on(f.pa),j.Ha(f.J),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $S(){}t=$S.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qm(){}qm.prototype.g=function(f,j){return new Br(f,j)};function Br(f,j){ht.call(this),this.g=new TS(j),this.l=f,this.h=j&&j.messageUrlParams||null,f=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(f?f["X-WebChannel-Content-Type"]=j.messageContentType:f={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(f?f["X-WebChannel-Client-Profile"]=j.va:f={"X-WebChannel-Client-Profile":j.va}),this.g.S=f,(f=j&&j.Sb)&&!x(f)&&(this.g.m=f),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!x(j)&&(this.g.D=j,f=this.h,f!==null&&j in f&&(f=this.h,j in f&&delete f[j])),this.j=new pc(this)}v(Br,ht),Br.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Br.prototype.close=function(){Iy(this.g)},Br.prototype.o=function(f){var j=this.g;if(typeof f=="string"){var k={};k.__data__=f,f=k}else this.u&&(k={},k.__data__=hc(f),f=k);j.i.push(new xV(j.Ya++,f)),j.G==3&&zm(j)},Br.prototype.N=function(){this.g.l=null,delete this.j,Iy(this.g),delete this.g,Br.aa.N.call(this)};function US(f){wy.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var j=f.__sm__;if(j){e:{for(const k in j){f=k;break e}f=void 0}(this.i=f)&&(f=this.i,j=j!==null&&f in j?j[f]:void 0),this.data=j}else this.data=f}v(US,wy);function zS(){by.call(this),this.status=1}v(zS,by);function pc(f){this.g=f}v(pc,$S),pc.prototype.ua=function(){gt(this.g,"a")},pc.prototype.ta=function(f){gt(this.g,new US(f))},pc.prototype.sa=function(f){gt(this.g,new zS)},pc.prototype.ra=function(){gt(this.g,"b")},qm.prototype.createWebChannel=qm.prototype.g,Br.prototype.send=Br.prototype.o,Br.prototype.open=Br.prototype.m,Br.prototype.close=Br.prototype.close,gR=function(){return new qm},pR=function(){return Am()},mR=Ko,fb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pm.NO_ERROR=0,Pm.TIMEOUT=8,Pm.HTTP_ERROR=6,Xp=Pm,sS.COMPLETE="complete",fR=sS,ZN.EventType=wd,wd.OPEN="a",wd.CLOSE="b",wd.ERROR="c",wd.MESSAGE="d",ht.prototype.listen=ht.prototype.K,th=ZN,on.prototype.listenOnce=on.prototype.L,on.prototype.getLastError=on.prototype.Ka,on.prototype.getLastErrorCode=on.prototype.Ba,on.prototype.getStatus=on.prototype.Z,on.prototype.getResponseJson=on.prototype.Oa,on.prototype.getResponseText=on.prototype.oa,on.prototype.send=on.prototype.ea,on.prototype.setWithCredentials=on.prototype.Ha,hR=on}).apply(typeof dp<"u"?dp:typeof self<"u"?self:typeof window<"u"?window:{});const zC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tr.UNAUTHENTICATED=new tr(null),tr.GOOGLE_CREDENTIALS=new tr("google-credentials-uid"),tr.FIRST_PARTY=new tr("first-party-uid"),tr.MOCK_USER=new tr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=new ix("@firebase/firestore");function $d(){return Rl.logLevel}function Me(t,...e){if(Rl.logLevel<=ft.DEBUG){const n=e.map(P1);Rl.debug(`Firestore (${Xu}): ${t}`,...n)}}function pa(t,...e){if(Rl.logLevel<=ft.ERROR){const n=e.map(P1);Rl.error(`Firestore (${Xu}): ${t}`,...n)}}function ju(t,...e){if(Rl.logLevel<=ft.WARN){const n=e.map(P1);Rl.warn(`Firestore (${Xu}): ${t}`,...n)}}function P1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t="Unexpected state"){const e=`FIRESTORE (${Xu}) INTERNAL ASSERTION FAILED: `+t;throw pa(e),new Error(e)}function Pt(t,e){t||Ke()}function Je(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends ks{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tr.UNAUTHENTICATED))}shutdown(){}}class uq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dq{constructor(e){this.t=e,this.currentUser=tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pt(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new na;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new na,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new na)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt(typeof r.accessToken=="string"),new vR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string"),new tr(e)}}class hq{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=tr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fq{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hq(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(tr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mq{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pq{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Pt(this.o===void 0);const r=a=>{a.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pt(typeof n.token=="string"),this.R=n.token,new mq(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=gq(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function St(t,e){return t<e?-1:t>e?1:0}function Nu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new we(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new we(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new we(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Rn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new Rn(0,0))}static max(){return new Qe(new Rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ke(),r===void 0?r=e.length-n:r>e.length-n&&Ke(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),o=n.get(s);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Lt extends rf{construct(e,n,r){return new Lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Lt(n)}static emptyPath(){return new Lt([])}}const vq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends rf{construct(e,n,r){return new Bn(e,n,r)}static isValidIdentifier(e){return vq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Bn(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new we(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new we(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new we(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new we(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(n)}static emptyPath(){return new Bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Lt.fromString(e))}static fromName(e){return new $e(Lt.fromString(e).popFirst(5))}static empty(){return new $e(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Lt(e.slice()))}}function xq(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Qe.fromTimestamp(r===1e9?new Rn(n+1,0):new Rn(n,r));return new yo(s,$e.empty(),e)}function yq(t){return new yo(t.readTime,t.key,-1)}class yo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yo(Qe.min(),$e.empty(),-1)}static max(){return new yo(Qe.max(),$e.empty(),-1)}}function wq(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$e.comparator(t.documentKey,e.documentKey),n!==0?n:St(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _q{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qf(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==bq)throw t;Me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,r)=>{n(e)})}static reject(e){return new se((n,r)=>{r(e)})}static waitFor(e){return new se((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},c=>r(c))}),o=!0,a===s&&n()})}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next(s=>s?se.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new se((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===a&&r(o)},d=>s(d))}})}static doWhile(e,n){return new se((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function jq(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}R1.oe=-1;function ux(t){return t==null}function Gg(t){return t===0&&1/t==-1/0}function Nq(t){return typeof t=="number"&&Number.isInteger(t)&&!Gg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function tc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){this.comparator=e,this.root=n||zn.EMPTY}insert(e,n){return new an(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(e){return new an(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hp(this.root,e,this.comparator,!1)}getReverseIterator(){return new hp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hp(this.root,e,this.comparator,!0)}}class hp{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??zn.RED,this.left=s??zn.EMPTY,this.right=a??zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new zn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return zn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ke();const e=this.left.check();if(e!==this.right.check())throw Ke();return e+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1;zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke()}get value(){throw Ke()}get color(){throw Ke()}get left(){throw Ke()}get right(){throw Ke()}copy(e,n,r,s,a){return this}insert(e,n,r){return new zn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.comparator=e,this.data=new an(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qC(this.data.getIterator())}getIteratorFrom(e){return new qC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Hn(this.comparator);return n.data=e,n}}class qC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new Yr([])}unionWith(e){let n=new Hn(Bn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Nu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new wR("Invalid base64 string: "+a):a}}(e);return new Kn(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const Sq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wo(t){if(Pt(!!t),typeof t=="string"){let e=0;const n=Sq.exec(t);if(Pt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mn(t.seconds),nanos:mn(t.nanos)}}function mn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dl(t){return typeof t=="string"?Kn.fromBase64String(t):Kn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function D1(t){const e=t.mapValue.fields.__previous_value__;return dx(e)?D1(e):e}function sf(t){const e=wo(t.mapValue.fields.__local_write_time__.timestampValue);return new Rn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(e,n,r,s,a,o,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class af{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new af("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof af&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ml(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dx(t)?4:kq(t)?9007199254740991:Cq(t)?10:11:Ke()}function Ci(t,e){if(t===e)return!0;const n=Ml(t);if(n!==Ml(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sf(t).isEqual(sf(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=wo(s.timestampValue),l=wo(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Dl(s.bytesValue).isEqual(Dl(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return mn(s.geoPointValue.latitude)===mn(a.geoPointValue.latitude)&&mn(s.geoPointValue.longitude)===mn(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return mn(s.integerValue)===mn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=mn(s.doubleValue),l=mn(a.doubleValue);return o===l?Gg(o)===Gg(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Nu(t.arrayValue.values||[],e.arrayValue.values||[],Ci);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(BC(o)!==BC(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Ci(o[c],l[c])))return!1;return!0}(t,e);default:return Ke()}}function of(t,e){return(t.values||[]).find(n=>Ci(n,e))!==void 0}function Su(t,e){if(t===e)return 0;const n=Ml(t),r=Ml(e);if(n!==r)return St(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return St(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=mn(a.integerValue||a.doubleValue),c=mn(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return WC(t.timestampValue,e.timestampValue);case 4:return WC(sf(t),sf(e));case 5:return St(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Dl(a),c=Dl(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=St(l[u],c[u]);if(d!==0)return d}return St(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=St(mn(a.latitude),mn(o.latitude));return l!==0?l:St(mn(a.longitude),mn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return HC(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,c,u,d;const h=a.fields||{},m=o.fields||{},p=(l=h.value)===null||l===void 0?void 0:l.arrayValue,v=(c=m.value)===null||c===void 0?void 0:c.arrayValue,w=St(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0);return w!==0?w:HC(p,v)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===fp.mapValue&&o===fp.mapValue)return 0;if(a===fp.mapValue)return 1;if(o===fp.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const m=St(c[h],d[h]);if(m!==0)return m;const p=Su(l[c[h]],u[d[h]]);if(p!==0)return p}return St(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Ke()}}function WC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return St(t,e);const n=wo(t),r=wo(e),s=St(n.seconds,r.seconds);return s!==0?s:St(n.nanos,r.nanos)}function HC(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Su(n[s],r[s]);if(a)return a}return St(n.length,r.length)}function Eu(t){return mb(t)}function mb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=wo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Dl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=mb(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${mb(n.fields[o])}`;return s+"}"}(t.mapValue):Ke()}function Kg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pb(t){return!!t&&"integerValue"in t}function M1(t){return!!t&&"arrayValue"in t}function GC(t){return!!t&&"nullValue"in t}function KC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zp(t){return!!t&&"mapValue"in t}function Cq(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function bh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return tc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.value=e}static empty(){return new Ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bh(n)}setAll(e){let n=Bn.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=bh(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Zp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ci(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Zp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){tc(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Ar(bh(this.value))}}function bR(t){const e=[];return tc(t.fields,(n,r)=>{const s=new Bn([n]);if(Zp(r)){const a=bR(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Yr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new rr(e,0,Qe.min(),Qe.min(),Qe.min(),Ar.empty(),0)}static newFoundDocument(e,n,r,s){return new rr(e,1,n,Qe.min(),r,s,0)}static newNoDocument(e,n){return new rr(e,2,n,Qe.min(),Qe.min(),Ar.empty(),0)}static newUnknownDocument(e,n){return new rr(e,3,n,Qe.min(),Qe.min(),Ar.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n){this.position=e,this.inclusive=n}}function YC(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=$e.comparator($e.fromName(o.referenceValue),n.key):r=Su(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function QC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ci(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n="asc"){this.field=e,this.dir=n}}function Tq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _R=class{};class _n extends _R{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Aq(e,n,r):n==="array-contains"?new Dq(e,r):n==="in"?new Mq(e,r):n==="not-in"?new Oq(e,r):n==="array-contains-any"?new Lq(e,r):new _n(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Pq(e,r):new Rq(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Su(n,this.value)):n!==null&&Ml(this.value)===Ml(n)&&this.matchesComparison(Su(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qs extends _R{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Qs(e,n)}matches(e){return jR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jR(t){return t.op==="and"}function NR(t){return Iq(t)&&jR(t)}function Iq(t){for(const e of t.filters)if(e instanceof Qs)return!1;return!0}function gb(t){if(t instanceof _n)return t.field.canonicalString()+t.op.toString()+Eu(t.value);if(NR(t))return t.filters.map(e=>gb(e)).join(",");{const e=t.filters.map(n=>gb(n)).join(",");return`${t.op}(${e})`}}function SR(t,e){return t instanceof _n?function(r,s){return s instanceof _n&&r.op===s.op&&r.field.isEqual(s.field)&&Ci(r.value,s.value)}(t,e):t instanceof Qs?function(r,s){return s instanceof Qs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&SR(o,s.filters[l]),!0):!1}(t,e):void Ke()}function ER(t){return t instanceof _n?function(n){return`${n.field.canonicalString()} ${n.op} ${Eu(n.value)}`}(t):t instanceof Qs?function(n){return n.op.toString()+" {"+n.getFilters().map(ER).join(" ,")+"}"}(t):"Filter"}class Aq extends _n{constructor(e,n,r){super(e,n,r),this.key=$e.fromName(r.referenceValue)}matches(e){const n=$e.comparator(e.key,this.key);return this.matchesComparison(n)}}class Pq extends _n{constructor(e,n){super(e,"in",n),this.keys=CR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Rq extends _n{constructor(e,n){super(e,"not-in",n),this.keys=CR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function CR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$e.fromName(r.referenceValue))}class Dq extends _n{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return M1(n)&&of(n.arrayValue,this.value)}}class Mq extends _n{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&of(this.value.arrayValue,n)}}class Oq extends _n{constructor(e,n){super(e,"not-in",n)}matches(e){if(of(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!of(this.value.arrayValue,n)}}class Lq extends _n{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!M1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>of(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function JC(t,e=null,n=[],r=[],s=null,a=null,o=null){return new Vq(t,e,n,r,s,a,o)}function O1(t){const e=Je(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),ux(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Eu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Eu(r)).join(",")),e.ue=n}return e.ue}function L1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Tq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!SR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QC(t.startAt,e.startAt)&&QC(t.endAt,e.endAt)}function vb(t){return $e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Fq(t,e,n,r,s,a,o,l){return new nc(t,e,n,r,s,a,o,l)}function hx(t){return new nc(t)}function XC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function V1(t){return t.collectionGroup!==null}function iu(t){const e=Je(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Hn(Bn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new lf(a,r))}),n.has(Bn.keyField().canonicalString())||e.ce.push(new lf(Bn.keyField(),r))}return e.ce}function bi(t){const e=Je(t);return e.le||(e.le=$q(e,iu(t))),e.le}function $q(t,e){if(t.limitType==="F")return JC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new lf(s.field,a)});const n=t.endAt?new Cu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cu(t.startAt.position,t.startAt.inclusive):null;return JC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xb(t,e){const n=t.filters.concat([e]);return new nc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yg(t,e,n){return new nc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fx(t,e){return L1(bi(t),bi(e))&&t.limitType===e.limitType}function kR(t){return`${O1(bi(t))}|lt:${t.limitType}`}function Ic(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>ER(s)).join(", ")}]`),ux(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Eu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Eu(s)).join(",")),`Target(${r})`}(bi(t))}; limitType=${t.limitType})`}function mx(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):$e.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of iu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=YC(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,iu(r),s)||r.endAt&&!function(o,l,c){const u=YC(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,iu(r),s))}(t,e)}function Uq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TR(t){return(e,n)=>{let r=!1;for(const s of iu(t)){const a=zq(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function zq(t,e,n){const r=t.field.isKeyField()?$e.comparator(e.key,n.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?Su(c,u):Ke()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ke()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){tc(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return yR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bq=new an($e.comparator);function ga(){return Bq}const IR=new an($e.comparator);function nh(...t){let e=IR;for(const n of t)e=e.insert(n.key,n);return e}function AR(t){let e=IR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hl(){return _h()}function PR(){return _h()}function _h(){return new Zu(t=>t.toString(),(t,e)=>t.isEqual(e))}const qq=new an($e.comparator),Wq=new Hn($e.comparator);function lt(...t){let e=Wq;for(const n of t)e=e.add(n);return e}const Hq=new Hn(St);function Gq(){return Hq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gg(e)?"-0":e}}function RR(t){return{integerValue:""+t}}function DR(t,e){return Nq(e)?RR(e):F1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this._=void 0}}function Kq(t,e,n){return t instanceof cf?function(s,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&dx(a)&&(a=D1(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof uf?OR(t,e):t instanceof df?LR(t,e):function(s,a){const o=MR(s,a),l=ZC(o)+ZC(s.Pe);return pb(o)&&pb(s.Pe)?RR(l):F1(s.serializer,l)}(t,e)}function Yq(t,e,n){return t instanceof uf?OR(t,e):t instanceof df?LR(t,e):n}function MR(t,e){return t instanceof hf?function(r){return pb(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class cf extends px{}class uf extends px{constructor(e){super(),this.elements=e}}function OR(t,e){const n=VR(e);for(const r of t.elements)n.some(s=>Ci(s,r))||n.push(r);return{arrayValue:{values:n}}}class df extends px{constructor(e){super(),this.elements=e}}function LR(t,e){let n=VR(e);for(const r of t.elements)n=n.filter(s=>!Ci(s,r));return{arrayValue:{values:n}}}class hf extends px{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ZC(t){return mn(t.integerValue||t.doubleValue)}function VR(t){return M1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n){this.field=e,this.transform=n}}function Qq(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof uf&&s instanceof uf||r instanceof df&&s instanceof df?Nu(r.elements,s.elements,Ci):r instanceof hf&&s instanceof hf?Ci(r.Pe,s.Pe):r instanceof cf&&s instanceof cf}(t.transform,e.transform)}class Jq{constructor(e,n){this.version=e,this.transformResults=n}}class wr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class gx{}function $R(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vx(t.key,wr.none()):new Xf(t.key,t.data,wr.none());{const n=t.data,r=Ar.empty();let s=new Hn(Bn.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Fo(t.key,r,new Yr(s.toArray()),wr.none())}}function Xq(t,e,n){t instanceof Xf?function(s,a,o){const l=s.value.clone(),c=tk(s.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Fo?function(s,a,o){if(!eg(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=tk(s.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(UR(s)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function jh(t,e,n,r){return t instanceof Xf?function(a,o,l,c){if(!eg(a.precondition,o))return l;const u=a.value.clone(),d=nk(a.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fo?function(a,o,l,c){if(!eg(a.precondition,o))return l;const u=nk(a.fieldTransforms,c,o),d=o.data;return d.setAll(UR(a)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(a,o,l){return eg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Zq(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=MR(r.transform,s||null);a!=null&&(n===null&&(n=Ar.empty()),n.set(r.field,a))}return n||null}function ek(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Nu(r,s,(a,o)=>Qq(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xf extends gx{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fo extends gx{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function UR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tk(t,e,n){const r=new Map;Pt(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,Yq(o,l,n[s]))}return r}function nk(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,Kq(a,o,e))}return r}class vx extends gx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eW extends gx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Xq(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=PR();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const c=$R(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Qe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),lt())}isEqual(e){return this.batchId===e.batchId&&Nu(this.mutations,e.mutations,(n,r)=>ek(n,r))&&Nu(this.baseMutations,e.baseMutations,(n,r)=>ek(n,r))}}class $1{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Pt(e.mutations.length===r.length);let s=function(){return qq}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new $1(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nW=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn,vt;function sW(t){switch(t){default:return Ke();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function zR(t){if(t===void 0)return pa("GRPC error has no .code"),ee.UNKNOWN;switch(t){case wn.OK:return ee.OK;case wn.CANCELLED:return ee.CANCELLED;case wn.UNKNOWN:return ee.UNKNOWN;case wn.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case wn.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case wn.INTERNAL:return ee.INTERNAL;case wn.UNAVAILABLE:return ee.UNAVAILABLE;case wn.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case wn.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case wn.NOT_FOUND:return ee.NOT_FOUND;case wn.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case wn.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case wn.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case wn.ABORTED:return ee.ABORTED;case wn.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case wn.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case wn.DATA_LOSS:return ee.DATA_LOSS;default:return Ke()}}(vt=wn||(wn={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW=new vl([4294967295,4294967295],0);function rk(t){const e=iW().encode(t),n=new dR;return n.update(e),new Uint8Array(n.digest())}function sk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new vl([n,r],0),new vl([s,a],0)]}class U1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new rh(`Invalid padding: ${n}`);if(r<0)throw new rh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new rh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=vl.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(vl.fromNumber(r)));return s.compare(aW)===1&&(s=new vl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=rk(e),[r,s]=sk(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new U1(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=rk(e),[r,s]=sk(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class rh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Zf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xx(Qe.min(),s,new an(St),ga(),lt())}}class Zf{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zf(r,n,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class BR{constructor(e,n){this.targetId=e,this.me=n}}class qR{constructor(e,n,r=Kn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ik{constructor(){this.fe=0,this.ge=ok(),this.pe=Kn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=lt(),n=lt(),r=lt();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ke()}}),new Zf(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ok()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oW{constructor(e){this.Le=e,this.Be=new Map,this.ke=ga(),this.qe=ak(),this.Qe=new an(St)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ke()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(vb(a))if(r===0){const o=new $e(a.path);this.Ue(n,o,rr.newNoDocument(o,Qe.min()))}else Pt(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=Dl(r).toUint8Array()}catch(c){if(c instanceof wR)return ju("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new U1(o,s,a)}catch(c){return ju(c instanceof rh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,a,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&vb(l.target)){const c=new $e(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,rr.newNoDocument(c,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=lt();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const s=new xx(e,n,this.Qe,this.ke,r);return this.ke=ga(),this.qe=ak(),this.Qe=new an(St),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ik,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Hn(St),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Me("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ik),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function ak(){return new an($e.comparator)}function ok(){return new an($e.comparator)}const lW={asc:"ASCENDING",desc:"DESCENDING"},cW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uW={and:"AND",or:"OR"};class dW{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yb(t,e){return t.useProto3Json||ux(e)?e:{value:e}}function Qg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hW(t,e){return Qg(t,e.toTimestamp())}function _i(t){return Pt(!!t),Qe.fromTimestamp(function(n){const r=wo(n);return new Rn(r.seconds,r.nanos)}(t))}function z1(t,e){return wb(t,e).canonicalString()}function wb(t,e){const n=function(s){return new Lt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function HR(t){const e=Lt.fromString(t);return Pt(JR(e)),e}function bb(t,e){return z1(t.databaseId,e.path)}function m0(t,e){const n=HR(e);if(n.get(1)!==t.databaseId.projectId)throw new we(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new we(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $e(KR(n))}function GR(t,e){return z1(t.databaseId,e)}function fW(t){const e=HR(t);return e.length===4?Lt.emptyPath():KR(e)}function _b(t){return new Lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function KR(t){return Pt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lk(t,e,n){return{name:bb(t,e),fields:n.value.mapValue.fields}}function mW(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ke()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(Pt(d===void 0||typeof d=="string"),Kn.fromBase64String(d||"")):(Pt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Kn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?ee.UNKNOWN:zR(u.code);return new we(d,u.message||"")}(o);n=new qR(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=m0(t,r.document.name),a=_i(r.document.updateTime),o=r.document.createTime?_i(r.document.createTime):Qe.min(),l=new Ar({mapValue:{fields:r.document.fields}}),c=rr.newFoundDocument(s,a,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new tg(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=m0(t,r.document),a=r.readTime?_i(r.readTime):Qe.min(),o=rr.newNoDocument(s,a),l=r.removedTargetIds||[];n=new tg([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=m0(t,r.document),a=r.removedTargetIds||[];n=new tg([],a,s,null)}else{if(!("filter"in e))return Ke();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new rW(s,a),l=r.targetId;n=new BR(l,o)}}return n}function pW(t,e){let n;if(e instanceof Xf)n={update:lk(t,e.key,e.value)};else if(e instanceof vx)n={delete:bb(t,e.key)};else if(e instanceof Fo)n={update:lk(t,e.key,e.data),updateMask:NW(e.fieldMask)};else{if(!(e instanceof eW))return Ke();n={verify:bb(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof cf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof uf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof df)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof hf)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Ke()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:hW(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ke()}(t,e.precondition)),n}function gW(t,e){return t&&t.length>0?(Pt(e!==void 0),t.map(n=>function(s,a){let o=s.updateTime?_i(s.updateTime):_i(a);return o.isEqual(Qe.min())&&(o=_i(a)),new Jq(o,s.transformResults||[])}(n,e))):[]}function vW(t,e){return{documents:[GR(t,e.path)]}}function xW(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=GR(t,s);const a=function(u){if(u.length!==0)return QR(Qs.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Ac(m.field),direction:bW(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=yb(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function yW(t){let e=fW(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Pt(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(h){const m=YR(h);return m instanceof Qs&&NR(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(v){return new lf(Pc(v.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(h){let m;return m=typeof h=="object"?h.value:h,ux(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(h){const m=!!h.before,p=h.values||[];return new Cu(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const m=!h.before,p=h.values||[];return new Cu(p,m)}(n.endAt)),Fq(e,s,o,a,l,"F",c,u)}function wW(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function YR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Pc(n.unaryFilter.field);return _n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Pc(n.unaryFilter.field);return _n.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Pc(n.unaryFilter.field);return _n.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pc(n.unaryFilter.field);return _n.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ke()}}(t):t.fieldFilter!==void 0?function(n){return _n.create(Pc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ke()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qs.create(n.compositeFilter.filters.map(r=>YR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ke()}}(n.compositeFilter.op))}(t):Ke()}function bW(t){return lW[t]}function _W(t){return cW[t]}function jW(t){return uW[t]}function Ac(t){return{fieldPath:t.canonicalString()}}function Pc(t){return Bn.fromServerFormat(t.fieldPath)}function QR(t){return t instanceof _n?function(n){if(n.op==="=="){if(KC(n.value))return{unaryFilter:{field:Ac(n.field),op:"IS_NAN"}};if(GC(n.value))return{unaryFilter:{field:Ac(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(KC(n.value))return{unaryFilter:{field:Ac(n.field),op:"IS_NOT_NAN"}};if(GC(n.value))return{unaryFilter:{field:Ac(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ac(n.field),op:_W(n.op),value:n.value}}}(t):t instanceof Qs?function(n){const r=n.getFilters().map(s=>QR(s));return r.length===1?r[0]:{compositeFilter:{op:jW(n.op),filters:r}}}(t):Ke()}function NW(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,r,s,a=Qe.min(),o=Qe.min(),l=Kn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new eo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(e){this.ct=e}}function EW(t){const e=yW({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(){this.un=new kW}addToCollectionParentIndex(e,n){return this.un.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(yo.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(yo.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class kW{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Hn(Lt.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Hn(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ku(0)}static kn(){return new ku(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(){this.changes=new Zu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&jh(r.mutation,s,Yr.empty(),Rn.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,lt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=lt()){const s=hl();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=nh();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=hl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,lt()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=ga();const o=_h(),l=function(){return _h()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Fo)?a=a.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),jh(d.mutation,u,d.mutation.getFieldMask(),Rn.now())):o.set(u.key,Yr.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return l.set(u,new IW(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),l))}recalculateAndSaveOverlays(e,n){const r=_h();let s=new an((o,l)=>o-l),a=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Yr.empty();d=l.applyToLocalView(u,d),r.set(c,d);const h=(s.get(l.batchId)||lt()).add(c);s=s.insert(l.batchId,h)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=PR();d.forEach(m=>{if(!a.has(m)){const p=$R(n.get(m),r.get(m));p!==null&&h.set(m,p),a=a.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return se.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return $e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):V1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):se.resolve(hl());let l=-1,c=a;return o.next(u=>se.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),a.get(d)?se.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,lt())).next(d=>({batchId:l,changes:AR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $e(n)).next(r=>{let s=nh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=nh();return this.indexManager.getCollectionParents(e,a).next(l=>se.forEach(l,c=>{const u=function(h,m){return new nc(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,rr.newInvalidDocument(d)))});let l=nh();return o.forEach((c,u)=>{const d=a.get(c);d!==void 0&&jh(d.mutation,u,Yr.empty(),Rn.now()),mx(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return se.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_i(s.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:EW(s.bundledQuery),readTime:_i(s.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(){this.overlays=new an($e.comparator),this.Ir=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hl();return se.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.ht(e,n,a)}),se.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const s=hl(),a=n.length+1,o=new $e(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&s.set(c.getKey(),c)}return se.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new an((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=hl(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=hl(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return se.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nW(n,r));let a=this.Ir.get(n);a===void 0&&(a=lt(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(){this.sessionToken=Kn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.Tr=new Hn(Ln.Er),this.dr=new Hn(Ln.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ln(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ln(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new $e(new Lt([])),r=new Ln(n,e),s=new Ln(n,e+1),a=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new $e(new Lt([])),r=new Ln(n,e),s=new Ln(n,e+1);let a=lt();return this.dr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Ln(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ln{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return $e.comparator(e.key,n.key)||St(e.wr,n.wr)}static Ar(e,n){return St(e.wr,n.wr)||$e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Hn(Ln.Er)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tW(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Ln(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return se.resolve(o)}lookupMutationBatch(e,n){return se.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ln(n,0),s=new Ln(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);a.push(l)}),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Hn(St);return n.forEach(s=>{const a=new Ln(s,0),o=new Ln(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{r=r.add(l.wr)})}),se.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;$e.isDocumentKey(a)||(a=a.child(""));const o=new Ln(new $e(a),0);let l=new Hn(St);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.wr)),!0)},o),se.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Pt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return se.forEach(n.mutations,s=>{const a=new Ln(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ln(n,0),s=this.br.firstAfterOrEqual(r);return se.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e){this.Mr=e,this.docs=function(){return new an($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():rr.newInvalidDocument(n))}getEntries(e,n){let r=ga();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():rr.newInvalidDocument(s))}),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=ga();const o=n.path,l=new $e(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||wq(yq(d),r)<=0||(s.has(d.key)||mx(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Ke()}Or(e,n){return se.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LW(this)}getSize(e){return se.resolve(this.size)}}class LW extends TW{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),se.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(e){this.persistence=e,this.Nr=new Zu(n=>O1(n),L1),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new B1,this.targetCount=0,this.kr=ku.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),se.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ku(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Kn(n),se.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),se.waitFor(a).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),se.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),se.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(e,n){this.qr={},this.overlays={},this.Qr=new R1(0),this.Kr=!1,this.Kr=!0,this.$r=new DW,this.referenceDelegate=e(this),this.Ur=new VW(this),this.indexManager=new CW,this.remoteDocumentCache=function(s){return new OW(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new SW(n),this.Gr=new PW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new MW(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Me("MemoryPersistence","Starting transaction:",e);const s=new $W(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,n){return se.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class $W extends _q{constructor(e){super(),this.currentSequenceNumber=e}}class q1{constructor(e){this.persistence=e,this.Jr=new B1,this.Yr=null}static Zr(e){return new q1(e)}get Xr(){if(this.Yr)return this.Yr;throw Ke()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),se.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Xr,r=>{const s=$e.fromPath(r);return this.ei(e,s).next(a=>{a||n.removeEntry(s,Qe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return se.or([()=>se.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=lt(),s=lt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new W1(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _9()?8:jq(cr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new UW;return this.Xi(e,n,o).next(l=>{if(a.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>a.result)}es(e,n,r,s){return r.documentReadCount<this.ji?($d()<=ft.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",Ic(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),se.resolve()):($d()<=ft.DEBUG&&Me("QueryEngine","Query:",Ic(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?($d()<=ft.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",Ic(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(n))):se.resolve())}Yi(e,n){if(XC(n))return se.resolve(null);let r=bi(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Yg(n,null,"F"),r=bi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=lt(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,l);return this.ns(n,u,o,c.readTime)?this.Yi(e,Yg(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,s){return XC(n)||s.isEqual(Qe.min())?se.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,s)?se.resolve(null):($d()<=ft.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ic(n)),this.rs(e,o,n,xq(s,-1)).next(l=>l))})}ts(e,n){let r=new Hn(TR(e));return n.forEach((s,a)=>{mx(e,a)&&(r=r.add(a))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return $d()<=ft.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Ic(n)),this.Ji.getDocumentsMatchingQuery(e,n,yo.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new an(St),this._s=new Zu(a=>O1(a),L1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AW(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function qW(t,e,n,r){return new BW(t,e,n,r)}async function XR(t,e){const n=Je(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let c=lt();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function WW(t,e){const n=Je(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,m=h.keys();let p=se.resolve();return m.forEach(v=>{p=p.next(()=>d.getEntry(c,v)).next(w=>{const b=u.docVersions.get(v);Pt(b!==null),w.version.compareTo(b)<0&&(h.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),d.addEntry(w)))})}),p.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=lt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ZR(t){const e=Je(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function HW(t,e){const n=Je(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;l.push(n.Ur.removeMatchingKeys(a,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(a,d.addedDocuments,h)));let p=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Kn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(w,b,y){return w.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,p,d)&&l.push(n.Ur.updateTargetData(a,p))});let c=ga(),u=lt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(GW(a,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(Qe.min())){const d=n.Ur.getLastRemoteSnapshotVersion(a).next(h=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(d)}return se.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(n.os=s,a))}function GW(t,e,n){let r=lt(),s=lt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=ga();return n.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Qe.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Me("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function KW(t,e){const n=Je(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YW(t,e){const n=Je(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(a=>a?(s=a,se.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new eo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function jb(t,e,n){const r=Je(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Jf(o))throw o;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function ck(t,e,n){const r=Je(t);let s=Qe.min(),a=lt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=Je(c),m=h._s.get(d);return m!==void 0?se.resolve(h.os.get(m)):h.Ur.getTargetData(u,d)}(r,o,bi(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Qe.min(),n?a:lt())).next(l=>(QW(r,Uq(e),l),{documents:l,Ts:a})))}function QW(t,e,n){let r=t.us.get(e)||Qe.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class uk{constructor(){this.activeTargetIds=Gq()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JW{constructor(){this.so=new uk,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new uk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XW{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mp=null;function p0(){return mp===null?mp=function(){return 268435456+Math.round(2147483648*Math.random())}():mp++,"0x"+mp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="WebChannelConnection";class tH extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,o){const l=p0(),c=this.xo(n,r.toUriEncodedString());Me("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,a,o),this.No(n,c,u,s).then(d=>(Me("RestConnection",`Received RPC '${n}' ${l}: `,d),d),d=>{throw ju("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",c,"request:",s),d})}Lo(n,r,s,a,o,l){return this.Mo(n,r,s,a,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),s&&s.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const s=ZW[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=p0();return new Promise((o,l)=>{const c=new hR;c.setWithCredentials(!0),c.listenOnce(fR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Xp.NO_ERROR:const d=c.getResponseJson();Me(er,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case Xp.TIMEOUT:Me(er,`RPC '${e}' ${a} timed out`),l(new we(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Xp.HTTP_ERROR:const h=c.getStatus();if(Me(er,`RPC '${e}' ${a} failed with status:`,h,"response text:",c.getResponseText()),h>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const v=function(b){const y=b.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(y)>=0?y:ee.UNKNOWN}(p.status);l(new we(v,p.message))}else l(new we(ee.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new we(ee.UNAVAILABLE,"Connection failed."));break;default:Ke()}}finally{Me(er,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(s);Me(er,`RPC '${e}' ${a} sending request:`,s),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=p0(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gR(),l=pR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=a.join("");Me(er,`Creating RPC '${e}' stream ${s}: ${d}`,c);const h=o.createWebChannel(d,c);let m=!1,p=!1;const v=new eH({Io:b=>{p?Me(er,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(m||(Me(er,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),Me(er,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},To:()=>h.close()}),w=(b,y,x)=>{b.listen(y,_=>{try{x(_)}catch(E){setTimeout(()=>{throw E},0)}})};return w(h,th.EventType.OPEN,()=>{p||(Me(er,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),w(h,th.EventType.CLOSE,()=>{p||(p=!0,Me(er,`RPC '${e}' stream ${s} transport closed`),v.So())}),w(h,th.EventType.ERROR,b=>{p||(p=!0,ju(er,`RPC '${e}' stream ${s} transport errored:`,b),v.So(new we(ee.UNAVAILABLE,"The operation could not be completed")))}),w(h,th.EventType.MESSAGE,b=>{var y;if(!p){const x=b.data[0];Pt(!!x);const _=x,E=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(E){Me(er,`RPC '${e}' stream ${s} received error:`,E);const S=E.status;let D=function(R){const N=wn[R];if(N!==void 0)return zR(N)}(S),I=E.message;D===void 0&&(D=ee.INTERNAL,I="Unknown error status: "+S+" with message "+E.message),p=!0,v.So(new we(D,I)),h.close()}else Me(er,`RPC '${e}' stream ${s} received:`,x),v.bo(x)}}),w(l,mR.STAT_EVENT,b=>{b.stat===fb.PROXY?Me(er,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===fb.NOPROXY&&Me(er,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function g0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t){return new dW(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n,r,s,a,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new e4(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(pa(n.toString()),pa("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new we(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nH extends t4{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=mW(this.serializer,e),r=function(a){if(!("targetChange"in a))return Qe.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Qe.min():o.readTime?_i(o.readTime):Qe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=_b(this.serializer),n.addTarget=function(a,o){let l;const c=o.target;if(l=vb(c)?{documents:vW(a,c)}:{query:xW(a,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=WR(a,o.resumeToken);const u=yb(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Qe.min())>0){l.readTime=Qg(a,o.snapshotVersion.toTimestamp());const u=yb(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=wW(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=_b(this.serializer),n.removeTarget=e,this.a_(n)}}class rH extends t4{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=gW(e.writeResults,e.commitTime),r=_i(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=_b(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pW(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new we(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,wb(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new we(ee.UNKNOWN,a.toString())})}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,wb(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(ee.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class iH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pa(n),this.D_=!1):Me("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{rc(this)&&(Me("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Je(c);u.L_.add(4),await em(u),u.q_.set("Unknown"),u.L_.delete(4),await wx(u)}(this))})}),this.q_=new iH(r,s)}}async function wx(t){if(rc(t))for(const e of t.B_)await e(!0)}async function em(t){for(const e of t.B_)await e(!1)}function n4(t,e){const n=Je(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Y1(n)?K1(n):ed(n).r_()&&G1(n,e))}function H1(t,e){const n=Je(t),r=ed(n);n.N_.delete(e),r.r_()&&r4(n,e),n.N_.size===0&&(r.r_()?r.o_():rc(n)&&n.q_.set("Unknown"))}function G1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ed(t).A_(e)}function r4(t,e){t.Q_.xe(e),ed(t).R_(e)}function K1(t){t.Q_=new oW({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ed(t).start(),t.q_.v_()}function Y1(t){return rc(t)&&!ed(t).n_()&&t.N_.size>0}function rc(t){return Je(t).L_.size===0}function s4(t){t.Q_=void 0}async function oH(t){t.q_.set("Online")}async function lH(t){t.N_.forEach((e,n)=>{G1(t,e)})}async function cH(t,e){s4(t),Y1(t)?(t.q_.M_(e),K1(t)):t.q_.set("Unknown")}async function uH(t,e,n){if(t.q_.set("Online"),e instanceof qR&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jg(t,r)}else if(e instanceof tg?t.Q_.Ke(e):e instanceof BR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Qe.min()))try{const r=await ZR(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.N_.get(u);d&&a.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=a.N_.get(c);if(!d)return;a.N_.set(c,d.withResumeToken(Kn.EMPTY_BYTE_STRING,d.snapshotVersion)),r4(a,c);const h=new eo(d.target,c,u,d.sequenceNumber);G1(a,h)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Me("RemoteStore","Failed to raise snapshot:",r),await Jg(t,r)}}async function Jg(t,e,n){if(!Jf(e))throw e;t.L_.add(1),await em(t),t.q_.set("Offline"),n||(n=()=>ZR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Me("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await wx(t)})}function i4(t,e){return e().catch(n=>Jg(t,n,e))}async function bx(t){const e=Je(t),n=bo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;dH(e);)try{const s=await KW(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,hH(e,s)}catch(s){await Jg(e,s)}a4(e)&&o4(e)}function dH(t){return rc(t)&&t.O_.length<10}function hH(t,e){t.O_.push(e);const n=bo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function a4(t){return rc(t)&&!bo(t).n_()&&t.O_.length>0}function o4(t){bo(t).start()}async function fH(t){bo(t).p_()}async function mH(t){const e=bo(t);for(const n of t.O_)e.m_(n.mutations)}async function pH(t,e,n){const r=t.O_.shift(),s=$1.from(r,e,n);await i4(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await bx(t)}async function gH(t,e){e&&bo(t).V_&&await async function(r,s){if(function(o){return sW(o)&&o!==ee.ABORTED}(s.code)){const a=r.O_.shift();bo(r).s_(),await i4(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await bx(r)}}(t,e),a4(t)&&o4(t)}async function hk(t,e){const n=Je(t);n.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const r=rc(n);n.L_.add(3),await em(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await wx(n)}async function vH(t,e){const n=Je(t);e?(n.L_.delete(2),await wx(n)):e||(n.L_.add(2),await em(n),n.q_.set("Unknown"))}function ed(t){return t.K_||(t.K_=function(n,r,s){const a=Je(n);return a.w_(),new nH(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:oH.bind(null,t),Ro:lH.bind(null,t),mo:cH.bind(null,t),d_:uH.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Y1(t)?K1(t):t.q_.set("Unknown")):(await t.K_.stop(),s4(t))})),t.K_}function bo(t){return t.U_||(t.U_=function(n,r,s){const a=Je(n);return a.w_(),new rH(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fH.bind(null,t),mo:gH.bind(null,t),f_:mH.bind(null,t),g_:pH.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bx(t)):(await t.U_.stop(),t.O_.length>0&&(Me("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new na,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new Q1(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function J1(t,e){if(pa("AsyncQueue",`${e}: ${t}`),Jf(t))return new we(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e){this.comparator=e?(n,r)=>e(n,r)||$e.comparator(n.key,r.key):(n,r)=>$e.comparator(n.key,r.key),this.keyedMap=nh(),this.sortedSet=new an(this.comparator)}static emptySet(e){return new au(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof au)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new au;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.W_=new an($e.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ke():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Tu{constructor(e,n,r,s,a,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Tu(e,n,au.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class yH{constructor(){this.queries=mk(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Je(n),a=s.queries;s.queries=mk(),a.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new we(ee.ABORTED,"Firestore shutting down"))}}function mk(){return new Zu(t=>kR(t),fx)}async function X1(t,e){const n=Je(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new xH,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=J1(o,`Initialization of query '${Ic(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&ej(n)}async function Z1(t,e){const n=Je(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wH(t,e){const n=Je(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&ej(n)}function bH(t,e,n){const r=Je(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function ej(t){t.Y_.forEach(e=>{e.next()})}var Nb,pk;(pk=Nb||(Nb={})).ea="default",pk.Cache="cache";class tj{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Tu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Nb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.key=e}}class c4{constructor(e){this.key=e}}class _H{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=lt(),this.mutatedKeys=lt(),this.Aa=TR(e),this.Ra=new au(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new fk,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),p=mx(this.query,h)?h:null,v=!!m&&this.mutatedKeys.has(m.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;m&&p?m.data.isEqual(p.data)?v!==w&&(r.track({type:3,doc:p}),b=!0):this.ga(m,p)||(r.track({type:2,doc:p}),b=!0,(c&&this.Aa(p,c)>0||u&&this.Aa(p,u)<0)&&(l=!0)):!m&&p?(r.track({type:0,doc:p}),b=!0):m&&!p&&(r.track({type:1,doc:m}),b=!0,(c||u)&&(l=!0)),b&&(p?(o=o.add(p),a=w?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:l,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(p,v){const w=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke()}};return w(p)-w(v)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Tu(this.query,e.Ra,a,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fk,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=lt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new c4(r))}),this.da.forEach(r=>{e.has(r)||n.push(new l4(r))}),n}ba(e){this.Ta=e.Ts,this.da=lt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Tu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class jH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class NH{constructor(e){this.key=e,this.va=!1}}class SH{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Zu(l=>kR(l),fx),this.Ma=new Map,this.xa=new Set,this.Oa=new an($e.comparator),this.Na=new Map,this.La=new B1,this.Ba={},this.ka=new Map,this.qa=ku.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function EH(t,e,n=!0){const r=p4(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await u4(r,e,n,!0),s}async function CH(t,e){const n=p4(t);await u4(n,e,!0,!1)}async function u4(t,e,n,r){const s=await YW(t.localStore,bi(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await kH(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&n4(t.remoteStore,s),l}async function kH(t,e,n,r,s){t.Ka=(h,m,p)=>async function(w,b,y,x){let _=b.view.ma(y);_.ns&&(_=await ck(w.localStore,b.query,!1).then(({documents:I})=>b.view.ma(I,_)));const E=x&&x.targetChanges.get(b.targetId),S=x&&x.targetMismatches.get(b.targetId)!=null,D=b.view.applyChanges(_,w.isPrimaryClient,E,S);return vk(w,b.targetId,D.wa),D.snapshot}(t,h,m,p);const a=await ck(t.localStore,e,!0),o=new _H(e,a.Ts),l=o.ma(a.documents),c=Zf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);vk(t,n,u.wa);const d=new jH(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function TH(t,e,n){const r=Je(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter(o=>!fx(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await jb(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&H1(r.remoteStore,s.targetId),Sb(r,s.targetId)}).catch(Qf)):(Sb(r,s.targetId),await jb(r.localStore,s.targetId,!0))}async function IH(t,e){const n=Je(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),H1(n.remoteStore,r.targetId))}async function AH(t,e,n){const r=VH(t);try{const s=await function(o,l){const c=Je(o),u=Rn.now(),d=l.reduce((p,v)=>p.add(v.key),lt());let h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=ga(),w=lt();return c.cs.getEntries(p,d).next(b=>{v=b,v.forEach((y,x)=>{x.isValidDocument()||(w=w.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,v)).next(b=>{h=b;const y=[];for(const x of l){const _=Zq(x,h.get(x.key).overlayedDocument);_!=null&&y.push(new Fo(x.key,_,bR(_.value.mapValue),wr.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,y,l)}).next(b=>{m=b;const y=b.applyToLocalDocumentSet(h,w);return c.documentOverlayCache.saveOverlays(p,b.batchId,y)})}).then(()=>({batchId:m.batchId,changes:AR(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new an(St)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await tm(r,s.changes),await bx(r.remoteStore)}catch(s){const a=J1(s,"Failed to persist write");n.reject(a)}}async function d4(t,e){const n=Je(t);try{const r=await HW(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Na.get(a);o&&(Pt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Pt(o.va):s.removedDocuments.size>0&&(Pt(o.va),o.va=!1))}),await tm(n,r,e)}catch(r){await Qf(r)}}function gk(t,e,n){const r=Je(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Je(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const m of h.j_)m.Z_(l)&&(u=!0)}),u&&ej(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PH(t,e,n){const r=Je(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let o=new an($e.comparator);o=o.insert(a,rr.newNoDocument(a,Qe.min()));const l=lt().add(a),c=new xx(Qe.min(),new Map,new an(St),o,l);await d4(r,c),r.Oa=r.Oa.remove(a),r.Na.delete(e),nj(r)}else await jb(r.localStore,e,!1).then(()=>Sb(r,e,n)).catch(Qf)}async function RH(t,e){const n=Je(t),r=e.batch.batchId;try{const s=await WW(n.localStore,e);f4(n,r,null),h4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await tm(n,s)}catch(s){await Qf(s)}}async function DH(t,e,n){const r=Je(t);try{const s=await function(o,l){const c=Je(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(Pt(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);f4(r,e,n),h4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await tm(r,s)}catch(s){await Qf(s)}}function h4(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function f4(t,e,n){const r=Je(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Sb(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||m4(t,r)})}function m4(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(H1(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),nj(t))}function vk(t,e,n){for(const r of n)r instanceof l4?(t.La.addReference(r.key,e),MH(t,r)):r instanceof c4?(Me("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||m4(t,r.key)):Ke()}function MH(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Me("SyncEngine","New document in limbo: "+n),t.xa.add(r),nj(t))}function nj(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new $e(Lt.fromString(e)),r=t.qa.next();t.Na.set(r,new NH(n)),t.Oa=t.Oa.insert(n,r),n4(t.remoteStore,new eo(bi(hx(n.path)),r,"TargetPurposeLimboResolution",R1.oe))}}async function tm(t,e,n){const r=Je(t),s=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=W1.Wi(c.targetId,u);a.push(h)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,u){const d=Je(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>se.forEach(u,m=>se.forEach(m.$i,p=>d.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>se.forEach(m.Ui,p=>d.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!Jf(h))throw h;Me("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const p=d.os.get(m),v=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(v);d.os=d.os.insert(m,w)}}}(r.localStore,a))}async function OH(t,e){const n=Je(t);if(!n.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const r=await XR(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(c=>{c.reject(new we(ee.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tm(n,r.hs)}}function LH(t,e){const n=Je(t),r=n.Na.get(e);if(r&&r.va)return lt().add(r.key);{let s=lt();const a=n.Ma.get(e);if(!a)return s;for(const o of a){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function p4(t){const e=Je(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=d4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PH.bind(null,e),e.Ca.d_=wH.bind(null,e.eventManager),e.Ca.$a=bH.bind(null,e.eventManager),e}function VH(t){const e=Je(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DH.bind(null,e),e}class Xg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yx(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return qW(this.persistence,new zW,e.initialUser,this.serializer)}Ga(e){return new FW(q1.Zr,this.serializer)}Wa(e){return new JW}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xg.provider={build:()=>new Xg};class Eb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OH.bind(null,this.syncEngine),await vH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yH}()}createDatastore(e){const n=yx(e.databaseInfo.databaseId),r=function(a){return new tH(a)}(e.databaseInfo);return function(a,o,l,c){return new sH(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new aH(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>gk(this.syncEngine,n,0),function(){return dk.D()?new dk:new XW}())}createSyncEngine(e,n){return function(s,a,o,l,c,u,d){const h=new SH(s,a,o,l,c,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Je(s);Me("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await em(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Eb.provider={build:()=>new Eb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pa("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=tr.UNAUTHENTICATED,this.clientId=xR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Me("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Me("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new na;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=J1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function v0(t,e){t.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await XR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xk(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $H(t);Me("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hk(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>hk(e.remoteStore,s)),t._onlineComponents=e}async function $H(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Me("FirestoreClient","Using user provided OfflineComponentProvider");try{await v0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ju("Error using user provided cache. Falling back to memory cache: "+n),await v0(t,new Xg)}}else Me("FirestoreClient","Using default OfflineComponentProvider"),await v0(t,new Xg);return t._offlineComponents}async function g4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Me("FirestoreClient","Using user provided OnlineComponentProvider"),await xk(t,t._uninitializedComponentsProvider._online)):(Me("FirestoreClient","Using default OnlineComponentProvider"),await xk(t,new Eb))),t._onlineComponents}function UH(t){return g4(t).then(e=>e.syncEngine)}async function Zg(t){const e=await g4(t),n=e.eventManager;return n.onListen=EH.bind(null,e.syncEngine),n.onUnlisten=TH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IH.bind(null,e.syncEngine),n}function zH(t,e,n={}){const r=new na;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new rj({next:m=>{d.Za(),o.enqueueAndForget(()=>Z1(a,h));const p=m.docs.has(l);!p&&m.fromCache?u.reject(new we(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&c&&c.source==="server"?u.reject(new we(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new tj(hx(l.path),d,{includeMetadataChanges:!0,_a:!0});return X1(a,h)}(await Zg(t),t.asyncQueue,e,n,r)),r.promise}function BH(t,e,n={}){const r=new na;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new rj({next:m=>{d.Za(),o.enqueueAndForget(()=>Z1(a,h)),m.fromCache&&c.source==="server"?u.reject(new we(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new tj(l,d,{includeMetadataChanges:!0,_a:!0});return X1(a,h)}(await Zg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t,e,n){if(!n)throw new we(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qH(t,e,n,r){if(e===!0&&r===!0)throw new we(ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wk(t){if(!$e.isDocumentKey(t))throw new we(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bk(t){if($e.isDocumentKey(t))throw new we(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _x(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ke()}function br(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_x(t);throw new we(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function WH(t,e){if(e<=0)throw new we(ee.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new we(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new we(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new we(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new we(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new we(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jx{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _k({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _k(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cq;switch(r.type){case"firstParty":return new fq(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=yk.get(n);r&&(Me("ComponentProvider","Removing Datastore"),yk.delete(n),r.terminate())}(this),Promise.resolve()}}function HH(t,e,n,r={}){var s;const a=(t=br(t,jx))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&ju("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=tr.MOCK_USER;else{l=gP(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new we(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new tr(u)}t._authCredentials=new uq(new vR(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ri(this.firestore,e,this._query)}}class ir{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ir(this.firestore,e,this._key)}}class mo extends Ri{constructor(e,n,r){super(e,n,hx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ir(this.firestore,null,new $e(e))}withConverter(e){return new mo(this.firestore,e,this._path)}}function wt(t,e,...n){if(t=dt(t),x4("collection","path",e),t instanceof jx){const r=Lt.fromString(e,...n);return bk(r),new mo(t,null,r)}{if(!(t instanceof ir||t instanceof mo))throw new we(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return bk(r),new mo(t.firestore,null,r)}}function Ze(t,e,...n){if(t=dt(t),arguments.length===1&&(e=xR.newId()),x4("doc","path",e),t instanceof jx){const r=Lt.fromString(e,...n);return wk(r),new ir(t,null,new $e(r))}{if(!(t instanceof ir||t instanceof mo))throw new we(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return wk(r),new ir(t.firestore,t instanceof mo?t.converter:null,new $e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new e4(this,"async_queue_retry"),this.Vu=()=>{const r=g0();r&&Me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=g0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=g0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new na;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Jf(e))throw e;Me("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw pa("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Q1.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&Ke()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Nk(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class ki extends jx{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new jk,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jk(e),this._firestoreClient=void 0,await e}}}function GH(t,e){const n=typeof t=="object"?t:ax(),r=typeof t=="string"?t:"(default)",s=Vo(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=fP("firestore");a&&HH(s,...a)}return s}function nm(t){if(t._terminated)throw new we(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||KH(t),t._firestoreClient}function KH(t){var e,n,r;const s=t._freezeSettings(),a=function(l,c,u,d){return new Eq(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,v4(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new FH(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Iu(Kn.fromBase64String(e))}catch(n){throw new we(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Iu(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new we(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new we(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new we(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH=/^__.*__$/;class QH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xf(e,this.data,n,this.fieldTransforms)}}class y4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function w4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke()}}class aj{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new aj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ev(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(w4(this.Cu)&&YH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class JH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yx(e)}Qu(e,n,r,s=!1){return new aj({Cu:e,methodName:n,qu:r,path:Bn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function td(t){const e=t._freezeSettings(),n=yx(t._databaseId);return new JH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oj(t,e,n,r,s,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);uj("Data must be an object, but it was:",o,r);const l=N4(r,o);let c,u;if(a.merge)c=new Yr(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const m=Cb(e,h,n);if(!o.contains(m))throw new we(ee.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);E4(d,m)||d.push(m)}c=new Yr(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new QH(new Ar(l),c,u)}class Nx extends sm{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nx}}class lj extends sm{_toFieldTransform(e){return new FR(e.path,new cf)}isEqual(e){return e instanceof lj}}class cj extends sm{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new hf(e.serializer,DR(e.serializer,this.$u));return new FR(e.path,n)}isEqual(e){return e instanceof cj&&this.$u===e.$u}}function b4(t,e,n,r){const s=t.Qu(1,e,n);uj("Data must be an object, but it was:",s,r);const a=[],o=Ar.empty();tc(r,(c,u)=>{const d=dj(e,c,n);u=dt(u);const h=s.Nu(d);if(u instanceof Nx)a.push(d);else{const m=im(u,h);m!=null&&(a.push(d),o.set(d,m))}});const l=new Yr(a);return new y4(o,l,s.fieldTransforms)}function _4(t,e,n,r,s,a){const o=t.Qu(1,e,n),l=[Cb(e,r,n)],c=[s];if(a.length%2!=0)throw new we(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)l.push(Cb(e,a[m])),c.push(a[m+1]);const u=[],d=Ar.empty();for(let m=l.length-1;m>=0;--m)if(!E4(u,l[m])){const p=l[m];let v=c[m];v=dt(v);const w=o.Nu(p);if(v instanceof Nx)u.push(p);else{const b=im(v,w);b!=null&&(u.push(p),d.set(p,b))}}const h=new Yr(u);return new y4(d,h,o.fieldTransforms)}function j4(t,e,n,r=!1){return im(n,t.Qu(r?4:3,e))}function im(t,e){if(S4(t=dt(t)))return uj("Unsupported field value:",e,t),N4(t,e);if(t instanceof sm)return function(r,s){if(!w4(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let c=im(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Rn.fromDate(r);return{timestampValue:Qg(s.serializer,a)}}if(r instanceof Rn){const a=new Rn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qg(s.serializer,a)}}if(r instanceof sj)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Iu)return{bytesValue:WR(s.serializer,r._byteString)};if(r instanceof ir){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:z1(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ij)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return F1(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${_x(r)}`)}(t,e)}function N4(t,e){const n={};return yR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tc(t,(r,s)=>{const a=im(s,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function S4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rn||t instanceof sj||t instanceof Iu||t instanceof ir||t instanceof sm||t instanceof ij)}function uj(t,e,n){if(!S4(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=_x(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Cb(t,e,n){if((e=dt(e))instanceof rm)return e._internalPath;if(typeof e=="string")return dj(t,e);throw ev("Field path arguments must be of type string or ",t,!1,void 0,n)}const XH=new RegExp("[~\\*/\\[\\]]");function dj(t,e,n){if(e.search(XH)>=0)throw ev(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rm(...e.split("."))._internalPath}catch{throw ev(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ev(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new we(ee.INVALID_ARGUMENT,l+t+c)}function E4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ir(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZH extends hj{data(){return super.data()}}function Sx(t,e){return typeof e=="string"?dj(t,e):e instanceof rm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new we(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fj{}class Ex extends fj{}function Mt(t,e,...n){let r=[];e instanceof fj&&r.push(e),r=r.concat(n),function(a){const o=a.filter(c=>c instanceof mj).length,l=a.filter(c=>c instanceof Cx).length;if(o>1||o>0&&l>0)throw new we(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Cx extends Ex{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Cx(e,n,r)}_apply(e){const n=this._parse(e);return k4(e._query,n),new Ri(e.firestore,e.converter,xb(e._query,n))}_parse(e){const n=td(e.firestore);return function(a,o,l,c,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new we(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Ek(h,d);const p=[];for(const v of h)p.push(Sk(c,a,v));m={arrayValue:{values:p}}}else m=Sk(c,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Ek(h,d),m=j4(l,o,h,d==="in"||d==="not-in");return _n.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vt(t,e,n){const r=e,s=Sx("where",t);return Cx._create(s,r,n)}class mj extends fj{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mj(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const c of l)k4(o,c),o=xb(o,c)}(e._query,n),new Ri(e.firestore,e.converter,xb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pj extends Ex{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pj(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new we(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new we(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lf(a,o)}(e._query,this._field,this._direction);return new Ri(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new nc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function tv(t,e="asc"){const n=e,r=Sx("orderBy",t);return pj._create(r,n)}class gj extends Ex{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new gj(e,n,r)}_apply(e){return new Ri(e.firestore,e.converter,Yg(e._query,this._limit,this._limitType))}}function xs(t){return WH("limit",t),gj._create("limit",t,"F")}class vj extends Ex{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new vj(e,n,r)}_apply(e){const n=tG(e,this.type,this._docOrFields,this._inclusive);return new Ri(e.firestore,e.converter,function(s,a){return new nc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)}(e._query,n))}}function eG(...t){return vj._create("startAfter",t,!1)}function tG(t,e,n,r){if(n[0]=dt(n[0]),n[0]instanceof hj)return function(a,o,l,c,u){if(!c)throw new we(ee.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const h of iu(a))if(h.field.isKeyField())d.push(Kg(o,c.key));else{const m=c.data.field(h.field);if(dx(m))throw new we(ee.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const p=h.field.canonicalString();throw new we(ee.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(m)}return new Cu(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=td(t.firestore);return function(o,l,c,u,d,h){const m=o.explicitOrderBy;if(d.length>m.length)throw new we(ee.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let v=0;v<d.length;v++){const w=d[v];if(m[v].field.isKeyField()){if(typeof w!="string")throw new we(ee.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof w}`);if(!V1(o)&&w.indexOf("/")!==-1)throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${w}' contains a slash.`);const b=o.path.child(Lt.fromString(w));if(!$e.isDocumentKey(b))throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const y=new $e(b);p.push(Kg(l,y))}else{const b=j4(c,u,w);p.push(b)}}return new Cu(p,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function Sk(t,e,n){if(typeof(n=dt(n))=="string"){if(n==="")throw new we(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V1(e)&&n.indexOf("/")!==-1)throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Lt.fromString(n));if(!$e.isDocumentKey(r))throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kg(t,new $e(r))}if(n instanceof ir)return Kg(t,n._key);throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_x(n)}.`)}function Ek(t,e){if(!Array.isArray(t)||t.length===0)throw new we(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function k4(t,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new we(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class nG{convertValue(e,n="none"){switch(Ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return tc(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>mn(o.doubleValue));return new ij(a)}convertGeoPoint(e){return new sj(mn(e.latitude),mn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=D1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sf(e));default:return null}}convertTimestamp(e){const n=wo(e);return new Rn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Lt.fromString(e);Pt(JR(r));const s=new af(r.get(1),r.get(3)),a=new $e(r.popFirst(5));return s.isEqual(n)||pa(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class T4 extends hj{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ng(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ng extends T4{data(e={}){return super.data(e)}}class I4{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new sh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ng(this._firestore,this._userDataWriter,r.key,r,new sh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new we(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new ng(s._firestore,s._userDataWriter,l.doc.key,l.doc,new sh(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new ng(s._firestore,s._userDataWriter,l.doc.key,l.doc,new sh(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:rG(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function rG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t){t=br(t,ir);const e=br(t.firestore,ki);return zH(nm(e),t._key).then(n=>A4(e,t,n))}class yj extends nG{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,n)}}function Kt(t){t=br(t,Ri);const e=br(t.firestore,ki),n=nm(e),r=new yj(e);return C4(t._query),BH(n,t._query).then(s=>new I4(e,r,t,s))}function ou(t,e,n){t=br(t,ir);const r=br(t.firestore,ki),s=xj(t.converter,e,n);return am(r,[oj(td(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,wr.none())])}function un(t,e,n,...r){t=br(t,ir);const s=br(t.firestore,ki),a=td(s);let o;return o=typeof(e=dt(e))=="string"||e instanceof rm?_4(a,"updateDoc",t._key,e,n,r):b4(a,"updateDoc",t._key,e),am(s,[o.toMutation(t._key,wr.exists(!0))])}function Au(t){return am(br(t.firestore,ki),[new vx(t._key,wr.none())])}function Ol(t,e){const n=br(t.firestore,ki),r=Ze(t),s=xj(t.converter,e);return am(n,[oj(td(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,wr.exists(!1))]).then(()=>r)}function Ck(t,...e){var n,r,s;t=dt(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Nk(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Nk(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let c,u,d;if(t instanceof ir)u=br(t.firestore,ki),d=hx(t._key.path),c={next:h=>{e[o]&&e[o](A4(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=br(t,Ri);u=br(h.firestore,ki),d=h._query;const m=new yj(u);c={next:p=>{e[o]&&e[o](new I4(u,m,h,p))},error:e[o+1],complete:e[o+2]},C4(t._query)}return function(m,p,v,w){const b=new rj(w),y=new tj(p,b,v);return m.asyncQueue.enqueueAndForget(async()=>X1(await Zg(m),y)),()=>{b.Za(),m.asyncQueue.enqueueAndForget(async()=>Z1(await Zg(m),y))}}(nm(u),d,l,c)}function am(t,e){return function(r,s){const a=new na;return r.asyncQueue.enqueueAndForget(async()=>AH(await UH(r),s,a)),a.promise}(nm(t),e)}function A4(t,e,n){const r=n.docs.get(e._key),s=new yj(t);return new T4(t,s,e._key,r,new sh(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=td(e)}set(e,n,r){this._verifyNotCommitted();const s=x0(e,this._firestore),a=xj(s.converter,n,r),o=oj(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,wr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=x0(e,this._firestore);let o;return o=typeof(n=dt(n))=="string"||n instanceof rm?_4(this._dataReader,"WriteBatch.update",a._key,n,r,s):b4(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,wr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=x0(e,this._firestore);return this._mutations=this._mutations.concat(new vx(n._key,wr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function x0(t,e){if((t=dt(t)).firestore!==e)throw new we(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ln(){return new lj("serverTimestamp")}function kk(t){return new cj("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(t){return nm(t=br(t,ki)),new sG(t,e=>am(t,e))}(function(e,n=!0){(function(s){Xu=s})(ec),Ys(new Es("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new ki(new dq(r.getProvider("auth-internal")),new pq(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new we(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new af(u.options.projectId,d)}(o,s),o);return a=Object.assign({useFetchStreams:n},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Fr(zC,"4.7.3",e),Fr(zC,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4="firebasestorage.googleapis.com",D4="storageBucket",iG=2*60*1e3,aG=10*60*1e3,oG=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yn=class M4 extends ks{constructor(e,n,r=0){super(y0(e),`Firebase Storage: ${n} (${y0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,M4.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return y0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Qt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qt||(Qt={}));function y0(t){return"storage/"+t}function wj(){const t="An unknown error occurred, please check the error payload for server response.";return new yn(Qt.UNKNOWN,t)}function lG(t){return new yn(Qt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function cG(t){return new yn(Qt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uG(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yn(Qt.UNAUTHENTICATED,t)}function dG(){return new yn(Qt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function hG(t){return new yn(Qt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function O4(){return new yn(Qt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function L4(){return new yn(Qt.CANCELED,"User canceled the upload/download.")}function fG(t){return new yn(Qt.INVALID_URL,"Invalid URL '"+t+"'.")}function mG(t){return new yn(Qt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pG(){return new yn(Qt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+D4+"' property when initializing the app?")}function V4(){return new yn(Qt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gG(){return new yn(Qt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function vG(){return new yn(Qt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xG(t){return new yn(Qt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function kb(t){return new yn(Qt.INVALID_ARGUMENT,t)}function F4(){return new yn(Qt.APP_DELETED,"The Firebase app was deleted.")}function yG(t){return new yn(Qt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nh(t,e){return new yn(Qt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ud(t){throw new yn(Qt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Qr.makeFromUrl(e,n)}catch{return new Qr(e,"")}if(r.path==="")return r;throw mG(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${m}`,"i"),v={bucket:1,path:3},w=n===R4?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",y=new RegExp(`^https?://${w}/${s}/${b}`,"i"),_=[{regex:l,indices:c,postModify:a},{regex:p,indices:v,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<_.length;E++){const S=_[E],D=S.regex.exec(e);if(D){const I=D[S.indices.bucket];let A=D[S.indices.path];A||(A=""),r=new Qr(I,A),S.postModify(r);break}}if(r==null)throw fG(e);return r}}class wG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bG(t,e,n){let r=1,s=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...b){u||(u=!0,e.apply(null,b))}function h(b){s=setTimeout(()=>{s=null,t(p,c())},b)}function m(){a&&clearTimeout(a)}function p(b,...y){if(u){m();return}if(b){m(),d.call(null,b,...y);return}if(c()||o){m(),d.call(null,b,...y);return}r<64&&(r*=2);let _;l===1?(l=2,_=0):_=(r+Math.random())*1e3,h(_)}let v=!1;function w(b){v||(v=!0,m(),!u&&(s!==null?(b||(l=2),clearTimeout(s),h(0)):b||(l=1)))}return h(0),a=setTimeout(()=>{o=!0,w(!0)},n),w}function _G(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jG(t){return t!==void 0}function NG(t){return typeof t=="function"}function SG(t){return typeof t=="object"&&!Array.isArray(t)}function kx(t){return typeof t=="string"||t instanceof String}function Tk(t){return bj()&&t instanceof Blob}function bj(){return typeof Blob<"u"}function Ik(t,e,n,r){if(r<e)throw kb(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw kb(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function $4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var xl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(xl||(xl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(e,n,r,s,a,o,l,c,u,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,v)=>{this.resolve_=p,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new pp(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===xl.NO_ERROR,c=a.getStatus();if(!l||U4(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===xl.ABORT;r(!1,new pp(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new pp(u,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());jG(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=wj();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?F4():L4();o(c)}else{const c=O4();o(c)}};this.canceled_?n(!1,new pp(!1,null,!0)):this.backoffId_=bG(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_G(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function CG(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kG(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function TG(t,e){e&&(t["X-Firebase-GMPID"]=e)}function IG(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function AG(t,e,n,r,s,a,o=!0){const l=$4(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return TG(u,e),CG(u,n),kG(u,a),IG(u,r),new EG(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function RG(...t){const e=PG();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(bj())return new Blob(t);throw new yn(Qt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function DG(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MG(t){if(typeof atob>"u")throw xG("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class w0{constructor(e,n){this.data=e,this.contentType=n||null}}function OG(t,e){switch(t){case fi.RAW:return new w0(z4(e));case fi.BASE64:case fi.BASE64URL:return new w0(B4(t,e));case fi.DATA_URL:return new w0(VG(e),FG(e))}throw wj()}function z4(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function LG(t){let e;try{e=decodeURIComponent(t)}catch{throw Nh(fi.DATA_URL,"Malformed data URL.")}return z4(e)}function B4(t,e){switch(t){case fi.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw Nh(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case fi.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw Nh(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=MG(e)}catch(s){throw s.message.includes("polyfill")?s:Nh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class q4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Nh(fi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=$G(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function VG(t){const e=new q4(t);return e.base64?B4(fi.BASE64,e.rest):LG(e.rest)}function FG(t){return new q4(t).contentType}function $G(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){let r=0,s="";Tk(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Tk(this.data_)){const r=this.data_,s=DG(r,e,n);return s===null?null:new Ki(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ki(r,!0)}}static getBlob(...e){if(bj()){const n=e.map(r=>r instanceof Ki?r.data_:r);return new Ki(RG.apply(null,n))}else{const n=e.map(o=>kx(o)?OG(fi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[a++]=o[l]}),new Ki(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t){let e;try{e=JSON.parse(t)}catch{return null}return SG(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zG(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function H4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BG(t,e){return e}class hr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||BG}}let gp=null;function qG(t){return!kx(t)||t.length<2?t:H4(t)}function _j(){if(gp)return gp;const t=[];t.push(new hr("bucket")),t.push(new hr("generation")),t.push(new hr("metageneration")),t.push(new hr("name","fullPath",!0));function e(a,o){return qG(o)}const n=new hr("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const s=new hr("size");return s.xform=r,t.push(s),t.push(new hr("timeCreated")),t.push(new hr("updated")),t.push(new hr("md5Hash",null,!0)),t.push(new hr("cacheControl",null,!0)),t.push(new hr("contentDisposition",null,!0)),t.push(new hr("contentEncoding",null,!0)),t.push(new hr("contentLanguage",null,!0)),t.push(new hr("contentType",null,!0)),t.push(new hr("metadata","customMetadata",!0)),gp=t,gp}function WG(t,e){function n(){const r=t.bucket,s=t.fullPath,a=new Qr(r,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function HG(t,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return WG(r,t),r}function G4(t,e,n){const r=W4(e);return r===null?null:HG(t,r,n)}function GG(t,e,n,r){const s=W4(e);if(s===null||!kx(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(u=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),p=nd(m,n,r),v=$4({alt:"media",token:u});return p+v})[0]}function K4(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class sc{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){if(!t)throw wj()}function jj(t,e){function n(r,s){const a=G4(t,s,e);return ra(a!==null),a}return n}function KG(t,e){function n(r,s){const a=G4(t,s,e);return ra(a!==null),GG(a,s,t.host,t._protocol)}return n}function om(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=dG():s=uG():n.getStatus()===402?s=cG(t.bucket):n.getStatus()===403?s=hG(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Nj(t){const e=om(t);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=lG(t.path)),a.serverResponse=s.serverResponse,a}return n}function YG(t,e,n){const r=e.fullServerUrl(),s=nd(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new sc(s,a,jj(t,n),o);return l.errorHandler=Nj(e),l}function QG(t,e,n){const r=e.fullServerUrl(),s=nd(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new sc(s,a,KG(t,n),o);return l.errorHandler=Nj(e),l}function JG(t,e){const n=e.fullServerUrl(),r=nd(n,t.host,t._protocol),s="DELETE",a=t.maxOperationRetryTime;function o(c,u){}const l=new sc(r,s,o,a);return l.successCodes=[200,204],l.errorHandler=Nj(e),l}function XG(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Y4(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=XG(null,e)),r}function Q4(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let E=0;E<2;E++)_=_+Math.random().toString().slice(2);return _}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=Y4(e,r,s),d=K4(u,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",p=Ki.getBlob(h,r,m);if(p===null)throw V4();const v={name:u.fullPath},w=nd(a,t.host,t._protocol),b="POST",y=t.maxUploadRetryTime,x=new sc(w,b,jj(t,n),y);return x.urlParams=v,x.headers=o,x.body=p.uploadData(),x.errorHandler=om(e),x}class nv{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Sj(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ra(!1)}return ra(!!n&&(e||["active"]).indexOf(n)!==-1),n}function ZG(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o=Y4(e,r,s),l={name:o.fullPath},c=nd(a,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=K4(o,n),m=t.maxUploadRetryTime;function p(w){Sj(w);let b;try{b=w.getResponseHeader("X-Goog-Upload-URL")}catch{ra(!1)}return ra(kx(b)),b}const v=new sc(c,u,p,m);return v.urlParams=l,v.headers=d,v.body=h,v.errorHandler=om(e),v}function eK(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function a(u){const d=Sj(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ra(!1)}h||ra(!1);const m=Number(h);return ra(!isNaN(m)),new nv(m,r.size(),d==="final")}const o="POST",l=t.maxUploadRetryTime,c=new sc(n,o,a,l);return c.headers=s,c.errorHandler=om(e),c}const Ak=256*1024;function tK(t,e,n,r,s,a,o,l){const c=new nv(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw gG();const u=c.total-c.current;let d=u;s>0&&(d=Math.min(d,s));const h=c.current,m=h+d;let p="";d===0?p="finalize":u===d?p="upload, finalize":p="upload";const v={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${c.current}`},w=r.slice(h,m);if(w===null)throw V4();function b(E,S){const D=Sj(E,["active","final"]),I=c.current+d,A=r.size();let R;return D==="final"?R=jj(e,a)(E,S):R=null,new nv(I,A,D==="final",R)}const y="POST",x=e.maxUploadRetryTime,_=new sc(n,y,b,x);return _.headers=v,_.body=w.uploadData(),_.progressCallback=l||null,_.errorHandler=om(t),_}const kr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function b0(t){switch(t){case"running":case"pausing":case"canceling":return kr.RUNNING;case"paused":return kr.PAUSED;case"success":return kr.SUCCESS;case"canceled":return kr.CANCELED;case"error":return kr.ERROR;default:return kr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nK{constructor(e,n,r){if(NG(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class rK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ud("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ud("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ud("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ud("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ud("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class sK extends rK{initXhr(){this.xhr_.responseType="text"}}function Ga(){return new sK}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=_j(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Qt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(U4(s.status,[]))if(a)s=O4();else{this.sleepTime=Math.max(this.sleepTime*2,oG),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Qt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,a)=>{this._resolve=s,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=ZG(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ga,e,n);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=eK(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(s,Ga,n,r);this._request=a,a.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Ak*this._chunkMultiplier,n=new nv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,a)=>{let o;try{o=tK(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,Ga,s,a,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Ak*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=YG(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Ga,e,n);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Q4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ga,e,n);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=L4(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=b0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const a=new nK(n||void 0,r||void 0,s||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(b0(this._state)){case kr.SUCCESS:xc(this._resolve.bind(null,this.snapshot))();break;case kr.CANCELED:case kr.ERROR:const n=this._reject;xc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(b0(this._state)){case kr.RUNNING:case kr.PAUSED:e.next&&xc(e.next.bind(e,this.snapshot))();break;case kr.SUCCESS:e.complete&&xc(e.complete.bind(e))();break;case kr.CANCELED:case kr.ERROR:e.error&&xc(e.error.bind(e,this._error))();break;default:e.error&&xc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n){this._service=e,n instanceof Qr?this._location=n:this._location=Qr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ll(e,n)}get root(){const e=new Qr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return H4(this._location.path)}get storage(){return this._service}get parent(){const e=UG(this._location.path);if(e===null)return null;const n=new Qr(this._location.bucket,e);return new Ll(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw yG(e)}}function aK(t,e,n){t._throwIfRoot("uploadBytes");const r=Q4(t.storage,t._location,_j(),new Ki(e,!0),n);return t.storage.makeRequestWithTokens(r,Ga).then(s=>({metadata:s,ref:t}))}function oK(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new iK(t,new Ki(e),n)}function lK(t){t._throwIfRoot("getDownloadURL");const e=QG(t.storage,t._location,_j());return t.storage.makeRequestWithTokens(e,Ga).then(n=>{if(n===null)throw vG();return n})}function cK(t){t._throwIfRoot("deleteObject");const e=JG(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Ga)}function uK(t,e){const n=zG(t._location.path,e),r=new Qr(t._location.bucket,n);return new Ll(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dK(t){return/^[A-Za-z]+:\/\//.test(t)}function hK(t,e){return new Ll(t,e)}function J4(t,e){if(t instanceof Ej){const n=t;if(n._bucket==null)throw pG();const r=new Ll(n,n._bucket);return e!=null?J4(r,e):r}else return e!==void 0?uK(t,e):t}function fK(t,e){if(e&&dK(e)){if(t instanceof Ej)return hK(t,e);throw kb("To use ref(service, url), the first argument must be a Storage instance.")}else return J4(t,e)}function Pk(t,e){const n=e==null?void 0:e[D4];return n==null?null:Qr.makeFromBucketSpec(n,t)}function mK(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:gP(s,t.app.options.projectId))}class Ej{constructor(e,n,r,s,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=R4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=iG,this._maxUploadRetryTime=aG,this._requests=new Set,s!=null?this._bucket=Qr.makeFromBucketSpec(s,this._host):this._bucket=Pk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qr.makeFromBucketSpec(this._url,e):this._bucket=Pk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ik("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ik("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ll(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new wG(F4());{const o=AG(e,this._appId,r,s,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Rk="@firebase/storage",Dk="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="storage";function Z4(t,e,n){return t=dt(t),aK(t,e,n)}function Mk(t,e,n){return t=dt(t),oK(t,e,n)}function rv(t){return t=dt(t),lK(t)}function pK(t){return t=dt(t),cK(t)}function Sh(t,e){return t=dt(t),fK(t,e)}function gK(t=ax(),e){t=dt(t);const r=Vo(t,X4).getImmediate({identifier:e}),s=fP("storage");return s&&vK(r,...s),r}function vK(t,e,n,r={}){mK(t,e,n,r)}function xK(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ej(n,r,s,e,ec)}function yK(){Ys(new Es(X4,xK,"PUBLIC").setMultipleInstances(!0)),Fr(Rk,Dk,""),Fr(Rk,Dk,"esm2017")}yK();const eD="@firebase/installations",Cj="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=1e4,nD=`w:${Cj}`,rD="FIS_v2",wK="https://firebaseinstallations.googleapis.com/v1",bK=60*60*1e3,_K="installations",jK="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vl=new Zl(_K,jK,NK);function sD(t){return t instanceof ks&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD({projectId:t}){return`${wK}/projects/${t}/installations`}function aD(t){return{token:t.token,requestStatus:2,expiresIn:EK(t.expiresIn),creationTime:Date.now()}}async function oD(t,e){const r=(await e.json()).error;return Vl.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function lD({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function SK(t,{refreshToken:e}){const n=lD(t);return n.append("Authorization",CK(e)),n}async function cD(t){const e=await t();return e.status>=500&&e.status<600?t():e}function EK(t){return Number(t.replace("s","000"))}function CK(t){return`${rD} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kK({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=iD(t),s=lD(t),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:rD,appId:t.appId,sdkVersion:nD},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await cD(()=>fetch(r,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:aD(u.authToken)}}else throw await oD("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IK=/^[cdef][\w-]{21}$/,Tb="";function AK(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=PK(t);return IK.test(n)?n:Tb}catch{return Tb}}function PK(t){return TK(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=new Map;function hD(t,e){const n=Tx(t);fD(n,e),RK(n,e)}function fD(t,e){const n=dD.get(t);if(n)for(const r of n)r(e)}function RK(t,e){const n=DK();n&&n.postMessage({key:t,fid:e}),MK()}let fl=null;function DK(){return!fl&&"BroadcastChannel"in self&&(fl=new BroadcastChannel("[Firebase] FID Change"),fl.onmessage=t=>{fD(t.data.key,t.data.fid)}),fl}function MK(){dD.size===0&&fl&&(fl.close(),fl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OK="firebase-installations-database",LK=1,Fl="firebase-installations-store";let _0=null;function kj(){return _0||(_0=_P(OK,LK,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Fl)}}})),_0}async function sv(t,e){const n=Tx(t),s=(await kj()).transaction(Fl,"readwrite"),a=s.objectStore(Fl),o=await a.get(n);return await a.put(e,n),await s.done,(!o||o.fid!==e.fid)&&hD(t,e.fid),e}async function mD(t){const e=Tx(t),r=(await kj()).transaction(Fl,"readwrite");await r.objectStore(Fl).delete(e),await r.done}async function Ix(t,e){const n=Tx(t),s=(await kj()).transaction(Fl,"readwrite"),a=s.objectStore(Fl),o=await a.get(n),l=e(o);return l===void 0?await a.delete(n):await a.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&hD(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(t){let e;const n=await Ix(t.appConfig,r=>{const s=VK(r),a=FK(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===Tb?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function VK(t){const e=t||{fid:AK(),registrationStatus:0};return pD(e)}function FK(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Vl.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=$K(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:UK(t)}:{installationEntry:e}}async function $K(t,e){try{const n=await kK(t,e);return sv(t.appConfig,n)}catch(n){throw sD(n)&&n.customData.serverCode===409?await mD(t.appConfig):await sv(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function UK(t){let e=await Ok(t.appConfig);for(;e.registrationStatus===1;)await uD(100),e=await Ok(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Tj(t);return r||n}return e}function Ok(t){return Ix(t,e=>{if(!e)throw Vl.create("installation-not-found");return pD(e)})}function pD(t){return zK(t)?{fid:t.fid,registrationStatus:0}:t}function zK(t){return t.registrationStatus===1&&t.registrationTime+tD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BK({appConfig:t,heartbeatServiceProvider:e},n){const r=qK(t,n),s=SK(t,n),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:nD,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await cD(()=>fetch(r,l));if(c.ok){const u=await c.json();return aD(u)}else throw await oD("Generate Auth Token",c)}function qK(t,{fid:e}){return`${iD(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij(t,e=!1){let n;const r=await Ix(t.appConfig,a=>{if(!gD(a))throw Vl.create("not-registered");const o=a.authToken;if(!e&&GK(o))return a;if(o.requestStatus===1)return n=WK(t,e),a;{if(!navigator.onLine)throw Vl.create("app-offline");const l=YK(a);return n=HK(t,l),l}});return n?await n:r.authToken}async function WK(t,e){let n=await Lk(t.appConfig);for(;n.authToken.requestStatus===1;)await uD(100),n=await Lk(t.appConfig);const r=n.authToken;return r.requestStatus===0?Ij(t,e):r}function Lk(t){return Ix(t,e=>{if(!gD(e))throw Vl.create("not-registered");const n=e.authToken;return QK(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function HK(t,e){try{const n=await BK(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await sv(t.appConfig,r),n}catch(n){if(sD(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await mD(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await sv(t.appConfig,r)}throw n}}function gD(t){return t!==void 0&&t.registrationStatus===2}function GK(t){return t.requestStatus===2&&!KK(t)}function KK(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+bK}function YK(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function QK(t){return t.requestStatus===1&&t.requestTime+tD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JK(t){const e=t,{installationEntry:n,registrationPromise:r}=await Tj(e);return r?r.catch(console.error):Ij(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XK(t,e=!1){const n=t;return await ZK(n),(await Ij(n,e)).token}async function ZK(t){const{registrationPromise:e}=await Tj(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eY(t){if(!t||!t.options)throw j0("App Configuration");if(!t.name)throw j0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw j0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function j0(t){return Vl.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD="installations",tY="installations-internal",nY=t=>{const e=t.getProvider("app").getImmediate(),n=eY(e),r=Vo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},rY=t=>{const e=t.getProvider("app").getImmediate(),n=Vo(e,vD).getImmediate();return{getId:()=>JK(n),getToken:s=>XK(n,s)}};function sY(){Ys(new Es(vD,nY,"PUBLIC")),Ys(new Es(tY,rY,"PRIVATE"))}sY();Fr(eD,Cj);Fr(eD,Cj,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="analytics",iY="firebase_id",aY="origin",oY=60*1e3,lY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Aj="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new ix("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cY={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zr=new Zl("analytics","Analytics",cY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uY(t){if(!t.startsWith(Aj)){const e=Zr.create("invalid-gtag-resource",{gtagURL:t});return $r.warn(e.message),""}return t}function xD(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function dY(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function hY(t,e){const n=dY("firebase-js-sdk-policy",{createScriptURL:uY}),r=document.createElement("script"),s=`${Aj}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function fY(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function mY(t,e,n,r,s,a){const o=r[s];try{if(o)await e[o];else{const c=(await xD(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(l){$r.error(l)}t("config",s,a)}async function pY(t,e,n,r,s){try{let a=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await xD(n);for(const c of o){const u=l.find(h=>h.measurementId===c),d=u&&e[u.appId];if(d)a.push(d);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",r,s||{})}catch(a){$r.error(a)}}function gY(t,e,n,r){async function s(a,...o){try{if(a==="event"){const[l,c]=o;await pY(t,e,n,l,c)}else if(a==="config"){const[l,c]=o;await mY(t,e,n,r,l,c)}else if(a==="consent"){const[l,c]=o;t("consent",l,c)}else if(a==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(a==="set"){const[l]=o;t("set",l)}else t(a,...o)}catch(l){$r.error(l)}}return s}function vY(t,e,n,r,s){let a=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=gY(a,t,e,n),{gtagCore:a,wrappedGtag:window[s]}}function xY(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Aj)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yY=30,wY=1e3;class bY{constructor(e={},n=wY){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const yD=new bY;function _Y(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function jY(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:_Y(r)},a=lY.replace("{app-id}",n),o=await fetch(a,s);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw Zr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function NY(t,e=yD,n){const{appId:r,apiKey:s,measurementId:a}=t.options;if(!r)throw Zr.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw Zr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new CY;return setTimeout(async()=>{l.abort()},oY),wD({appId:r,apiKey:s,measurementId:a},o,l,e)}async function wD(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=yD){var a;const{appId:o,measurementId:l}=t;try{await SY(r,e)}catch(c){if(l)return $r.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await jY(t);return s.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!EY(u)){if(s.deleteThrottleMetadata(o),l)return $r.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw c}const d=Number((a=u==null?void 0:u.customData)===null||a===void 0?void 0:a.httpStatus)===503?dC(n,s.intervalMillis,yY):dC(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,h),$r.debug(`Calling attemptFetch again in ${d} millis`),wD(t,h,r,s)}}function SY(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(a),r(Zr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function EY(t){if(!(t instanceof ks)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class CY{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function kY(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const a=await e,o=Object.assign(Object.assign({},r),{send_to:a});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TY(){if(xP())try{await yP()}catch(t){return $r.warn(Zr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return $r.warn(Zr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function IY(t,e,n,r,s,a,o){var l;const c=NY(t);c.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&$r.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>$r.error(p)),e.push(c);const u=TY().then(p=>{if(p)return r.getId()}),[d,h]=await Promise.all([c,u]);xY(a)||hY(a,d.measurementId),s("js",new Date);const m=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return m[aY]="firebase",m.update=!0,h!=null&&(m[iY]=h),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AY{constructor(e){this.app=e}_delete(){return delete Eh[this.app.options.appId],Promise.resolve()}}let Eh={},Vk=[];const Fk={};let N0="dataLayer",PY="gtag",$k,bD,Uk=!1;function RY(){const t=[];if(vP()&&t.push("This is a browser extension environment."),j9()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Zr.create("invalid-analytics-context",{errorInfo:e});$r.warn(n.message)}}function DY(t,e,n){RY();const r=t.options.appId;if(!r)throw Zr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)$r.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zr.create("no-api-key");if(Eh[r]!=null)throw Zr.create("already-exists",{id:r});if(!Uk){fY(N0);const{wrappedGtag:a,gtagCore:o}=vY(Eh,Vk,Fk,N0,PY);bD=a,$k=o,Uk=!0}return Eh[r]=IY(t,Vk,Fk,e,$k,N0,n),new AY(t)}function MY(t=ax()){t=dt(t);const e=Vo(t,iv);return e.isInitialized()?e.getImmediate():OY(t)}function OY(t,e={}){const n=Vo(t,iv);if(n.isInitialized()){const s=n.getImmediate();if(Zh(e,n.getOptions()))return s;throw Zr.create("already-initialized")}return n.initialize({options:e})}function LY(t,e,n,r){t=dt(t),kY(bD,Eh[t.app.options.appId],e,n,r).catch(s=>$r.error(s))}const zk="@firebase/analytics",Bk="0.10.8";function VY(){Ys(new Es(iv,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return DY(r,s,n)},"PUBLIC")),Ys(new Es("analytics-internal",t,"PRIVATE")),Fr(zk,Bk),Fr(zk,Bk,"esm2017");function t(e){try{const n=e.getProvider(iv).getImmediate();return{logEvent:(r,s,a)=>LY(n,r,s,a)}}catch(n){throw Zr.create("interop-component-reg-failed",{reason:n})}}}VY();const FY={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},Ax=jP(FY),fs=iq(Ax),ye=GH(Ax),Ch=gK(Ax);MY(Ax);const ii={USERS:"users",LISTINGS:"listings",REVIEWS:"reviews",FAVORITES:"favorites",CONVERSATIONS:"conversations",MESSAGES:"messages",REPORTS:"reports",CHAT_HISTORY:"chatHistory"},qk={actionCodeSettings:{url:`${window.location.origin}/StudyMarket/auth`,handleCodeInApp:!1}};fs.useDeviceLanguage();fs.settings.appVerificationDisabledForTesting=!1;class zd{static async createUser(e,n){const r=Ze(ye,ii.USERS,e),s={id:e,email:n.email,displayName:n.displayName||"Utilisateur",photoURL:n.photoURL||null,phone:null,isVerified:!1,verificationStatus:"pending",university:n.university||"Université non spécifiée",fieldOfStudy:n.fieldOfStudy||"Non spécifié",graduationYear:n.graduationYear||new Date().getFullYear()+2,campus:n.campus||"Campus principal",bio:null,location:"Paris, France",rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date};await ou(r,{...s,createdAt:ln(),lastSeen:ln()})}static async getUser(e){var n,r;try{const s=await ys(Ze(ye,ii.USERS,e));if(!s.exists())return null;const a=s.data();return{...a,id:e,createdAt:((n=a.createdAt)==null?void 0:n.toDate())||new Date,lastSeen:((r=a.lastSeen)==null?void 0:r.toDate())||new Date}}catch(s){return console.error("Error getting user:",s),null}}static async updateUser(e,n){const r=Ze(ye,ii.USERS,e),s=Object.fromEntries(Object.entries(n).filter(([a,o])=>o!==void 0));await un(r,{...s,updatedAt:ln()})}static async updateUserStats(e,n){const r=Ze(ye,ii.USERS,e),s={};n.reviewCount!==void 0&&(s.reviewCount=n.reviewCount),n.averageRating!==void 0&&(s.rating=n.averageRating),n.transactionsCount!==void 0&&(s.transactionsCount=kk(n.transactionsCount)),n.co2Saved!==void 0&&(s.co2Saved=kk(n.co2Saved)),await un(r,s)}static async deleteUser(e){const n=P4(ye);n.delete(Ze(ye,ii.USERS,e));const r=Mt(wt(ye,ii.LISTINGS),Vt("sellerId","==",e));(await Kt(r)).forEach(u=>{n.delete(u.ref)});const a=Mt(wt(ye,ii.FAVORITES),Vt("userId","==",e));(await Kt(a)).forEach(u=>{n.delete(u.ref)});const l=Mt(wt(ye,ii.REVIEWS),Vt("reviewerId","==",e));(await Kt(l)).forEach(u=>{n.delete(u.ref)}),await n.commit()}static async searchUsers(e,n=10){try{const r=wt(ye,ii.USERS),s=e(r,Vt("displayName",">=",e),Vt("displayName","<=",e+""),tv("displayName"),n(n));return(await Kt(s)).docs.map(o=>{var l,c;return{...o.data(),id:o.id,createdAt:((l=o.data().createdAt)==null?void 0:l.toDate())||new Date,lastSeen:((c=o.data().lastSeen)==null?void 0:c.toDate())||new Date}})}catch(r){return console.error("Error searching users:",r),[]}}static async getUsersByUniversity(e,n=20){try{const r=wt(ye,ii.USERS),s=Mt(r,Vt("university","==",e),tv("createdAt","desc"),n(n));return(await Kt(s)).docs.map(o=>{var l,c;return{...o.data(),id:o.id,createdAt:((l=o.data().createdAt)==null?void 0:l.toDate())||new Date,lastSeen:((c=o.data().lastSeen)==null?void 0:c.toDate())||new Date}})}catch(r){return console.error("Error getting users by university:",r),[]}}}const _D=g.createContext(void 0),Zt=()=>{const t=g.useContext(_D);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},$Y=({children:t})=>{const[e,n]=g.useState(null),[r,s]=g.useState(null),[a,o]=g.useState(!0),l=async(w,b)=>{try{await zd.getUser(w.uid)||await zd.createUser(w.uid,{email:w.email,displayName:w.displayName||"Utilisateur",photoURL:w.photoURL||void 0,university:b==null?void 0:b.university,fieldOfStudy:b==null?void 0:b.fieldOfStudy,graduationYear:b==null?void 0:b.graduationYear,campus:b==null?void 0:b.campus,...b});const x=await zd.getUser(w.uid);s(x)}catch(y){console.error("Error creating/updating user profile:",y),te.error("Erreur lors de la création du profil")}},c=async()=>{if(e)try{const w=await zd.getUser(e.uid);s(w)}catch(w){console.error("Error refreshing user profile:",w)}},u=async(w,b)=>{try{await $7(fs,w,b),te.success("Connexion réussie !")}catch(y){let x="Erreur de connexion";if(y instanceof Error){const _=y;switch(_.code){case"auth/user-not-found":x="Aucun compte trouvé avec cet email";break;case"auth/wrong-password":x="Mot de passe incorrect";break;case"auth/invalid-email":x="Format d'email invalide";break;case"auth/too-many-requests":x="Trop de tentatives. Réessayez plus tard";break;default:x=_.message}}throw te.error(x),y}},d=async(w,b,y,x)=>{try{const{user:_}=await YP(fs,w,b);await nf(_,{displayName:y}),await l(_,x),te.success("Compte créé avec succès !")}catch(_){let E="Erreur lors de la création du compte";if(_ instanceof Error){const S=_;switch(S.code){case"auth/email-already-in-use":E="Cet email est déjà utilisé";break;case"auth/weak-password":E="Le mot de passe est trop faible";break;case"auth/invalid-email":E="Format d'email invalide";break;default:E=S.message}}throw te.error(E),_}},h=async()=>{try{const w=new Gi;w.setCustomParameters({prompt:"select_account"}),w.addScope("email"),w.addScope("profile"),await yB(fs,w)}catch(w){throw console.error("Google sign in error:",w),w instanceof Error&&te.error("Erreur de connexion Google : "+w.message),w}},m=async()=>{try{await G7(fs),s(null),te.success("Déconnexion réussie !")}catch(w){throw te.error("Erreur lors de la déconnexion"),w}},p=async w=>{if(!(!e||!r))try{await zd.updateUser(e.uid,w),s({...r,...w}),te.success("Profil mis à jour !")}catch(b){throw console.error("Error updating profile:",b),te.error("Erreur lors de la mise à jour du profil"),b}};g.useEffect(()=>{const w=H7(fs,async y=>{n(y),y?await l(y):s(null),o(!1)});return(async()=>{try{const y=await bB(fs);y!=null&&y.user&&(await l(y.user),te.success("Connexion Google réussie !"))}catch(y){if(console.error("Redirect result error:",y),y instanceof Error){const x=y;x.code!=="auth/null-user"&&te.error("Erreur de connexion Google : "+x.message)}}})(),w},[]);const v={currentUser:e,userProfile:r,loading:a,signIn:u,signUp:d,signInWithGoogle:h,logout:m,updateUserProfile:p,refreshUserProfile:c};return i.jsx(_D.Provider,{value:v,children:!a&&t})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jD=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},c)=>g.createElement("svg",{ref:c,...zY,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:jD("lucide",s),...l},[...o.map(([u,d])=>g.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(t,e)=>{const n=g.forwardRef(({className:r,...s},a)=>g.createElement(BY,{ref:a,iconNode:e,className:jD(`lucide-${UY(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=ne("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=ne("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=ne("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=ne("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=ne("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ne("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=ne("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=ne("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=ne("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=ne("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KY=ne("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=ne("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=ne("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=ne("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=ne("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=ne("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=ne("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=ne("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=ne("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=ne("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JY=ne("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=ne("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=ne("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=ne("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=ne("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=ne("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=ne("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=ne("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=ne("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=ne("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=ne("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eQ=ne("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=ne("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=ne("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nQ=ne("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=ne("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=ne("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=ne("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=ne("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ne("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=ne("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=ne("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=ne("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=ne("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iQ=ne("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=ne("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=ne("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=ne("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=ne("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=ne("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=ne("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ne("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=ne("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=ne("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=ne("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=ne("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=ne("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=ne("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=ne("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=ne("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=ne("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=ne("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=ne("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=ne("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=ne("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=ne("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ne("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=ne("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=ne("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=ne("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=ne("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=ne("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=ne("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=ne("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=ne("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=ne("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=ne("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=ne("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=ne("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=ne("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=ne("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=ne("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=ne("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function xQ(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Mx(...t){return e=>t.forEach(n=>xQ(n,e))}function Xe(...t){return g.useCallback(Mx(...t),t)}var xa=g.forwardRef((t,e)=>{const{children:n,...r}=t,s=g.Children.toArray(n),a=s.find(wQ);if(a){const o=a.props.children,l=s.map(c=>c===a?g.Children.count(o)>1?g.Children.only(null):g.isValidElement(o)?o.props.children:null:c);return i.jsx(Pb,{...r,ref:e,children:g.isValidElement(o)?g.cloneElement(o,void 0,l):null})}return i.jsx(Pb,{...r,ref:e,children:n})});xa.displayName="Slot";var Pb=g.forwardRef((t,e)=>{const{children:n,...r}=t;if(g.isValidElement(n)){const s=_Q(n);return g.cloneElement(n,{...bQ(r,n.props),ref:e?Mx(e,s):s})}return g.Children.count(n)>1?g.Children.only(null):null});Pb.displayName="SlotClone";var yQ=({children:t})=>i.jsx(i.Fragment,{children:t});function wQ(t){return g.isValidElement(t)&&t.type===yQ}function bQ(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{a(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function _Q(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function UD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=UD(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function jQ(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=UD(t))&&(r&&(r+=" "),r+=e);return r}const Xk=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,Zk=jQ,Ox=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Zk(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=a==null?void 0:a[u];if(d===null)return null;const m=Xk(d)||Xk(h);return s[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(v=>{let[w,b]=v;return Array.isArray(b)?b.includes({...a,...l}[w]):{...a,...l}[w]===b})?[...u,h,m]:u},[]);return Zk(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};function zD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=zD(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function NQ(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=zD(t))&&(r&&(r+=" "),r+=e);return r}const Mj="-",SQ=t=>{const e=CQ(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Mj);return l[0]===""&&l.length!==1&&l.shift(),BD(l,e)||EQ(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},BD=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?BD(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(Mj);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},e2=/^\[(.+)\]$/,EQ=t=>{if(e2.test(t)){const e=e2.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},CQ=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return TQ(Object.entries(t.classGroups),n).forEach(([a,o])=>{Rb(o,r,a,e)}),r},Rb=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:t2(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(kQ(s)){Rb(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{Rb(o,t2(e,a),n,r)})})},t2=(t,e)=>{let n=t;return e.split(Mj).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},kQ=t=>t.isThemeGetter,TQ=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,s]}):t,IQ=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},qD="!",AQ=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let b=0;b<l.length;b++){let y=l[b];if(u===0){if(y===s&&(r||l.slice(b,b+a)===e)){c.push(l.slice(d,b)),d=b+a;continue}if(y==="/"){h=b;continue}}y==="["?u++:y==="]"&&u--}const m=c.length===0?l:l.substring(d),p=m.startsWith(qD),v=p?m.substring(1):m,w=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:w}};return n?l=>n({className:l,parseClassName:o}):o},PQ=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},RQ=t=>({cache:IQ(t.cacheSize),parseClassName:AQ(t),...SQ(t)}),DQ=/\s+/,MQ=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(DQ);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=n(u);let v=!!p,w=r(v?m.substring(0,p):m);if(!w){if(!v){l=u+(l.length>0?" "+l:l);continue}if(w=r(m),!w){l=u+(l.length>0?" "+l:l);continue}v=!1}const b=PQ(d).join(":"),y=h?b+qD:b,x=y+w;if(a.includes(x))continue;a.push(x);const _=s(w,v);for(let E=0;E<_.length;++E){const S=_[E];a.push(y+S)}l=u+(l.length>0?" "+l:l)}return l};function OQ(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=WD(e))&&(r&&(r+=" "),r+=n);return r}const WD=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=WD(t[r]))&&(n&&(n+=" "),n+=e);return n};function LQ(t,...e){let n,r,s,a=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return n=RQ(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=MQ(c,n);return s(c,d),d}return function(){return a(OQ.apply(null,arguments))}}const Wt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},HD=/^\[(?:([a-z-]+):)?(.+)\]$/i,VQ=/^\d+\/\d+$/,FQ=new Set(["px","full","screen"]),$Q=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,UQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,BQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fi=t=>lu(t)||FQ.has(t)||VQ.test(t),Ra=t=>ad(t,"length",XQ),lu=t=>!!t&&!Number.isNaN(Number(t)),k0=t=>ad(t,"number",lu),Bd=t=>!!t&&Number.isInteger(Number(t)),WQ=t=>t.endsWith("%")&&lu(t.slice(0,-1)),rt=t=>HD.test(t),Da=t=>$Q.test(t),HQ=new Set(["length","size","percentage"]),GQ=t=>ad(t,HQ,GD),KQ=t=>ad(t,"position",GD),YQ=new Set(["image","url"]),QQ=t=>ad(t,YQ,eJ),JQ=t=>ad(t,"",ZQ),qd=()=>!0,ad=(t,e,n)=>{const r=HD.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},XQ=t=>UQ.test(t)&&!zQ.test(t),GD=()=>!1,ZQ=t=>BQ.test(t),eJ=t=>qQ.test(t),tJ=()=>{const t=Wt("colors"),e=Wt("spacing"),n=Wt("blur"),r=Wt("brightness"),s=Wt("borderColor"),a=Wt("borderRadius"),o=Wt("borderSpacing"),l=Wt("borderWidth"),c=Wt("contrast"),u=Wt("grayscale"),d=Wt("hueRotate"),h=Wt("invert"),m=Wt("gap"),p=Wt("gradientColorStops"),v=Wt("gradientColorStopPositions"),w=Wt("inset"),b=Wt("margin"),y=Wt("opacity"),x=Wt("padding"),_=Wt("saturate"),E=Wt("scale"),S=Wt("sepia"),D=Wt("skew"),I=Wt("space"),A=Wt("translate"),R=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",rt,e],T=()=>[rt,e],C=()=>["",Fi,Ra],V=()=>["auto",lu,rt],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",rt],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[lu,rt];return{cacheSize:500,separator:":",theme:{colors:[qd],spacing:[Fi,Ra],blur:["none","",Da,rt],brightness:Z(),borderColor:[t],borderRadius:["none","","full",Da,rt],borderSpacing:T(),borderWidth:C(),contrast:Z(),grayscale:W(),hueRotate:Z(),invert:W(),gap:T(),gradientColorStops:[t],gradientColorStopPositions:[WQ,Ra],inset:P(),margin:P(),opacity:Z(),padding:T(),saturate:Z(),scale:Z(),sepia:W(),skew:Z(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",rt]}],container:["container"],columns:[{columns:[Da]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),rt]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bd,rt]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",rt]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Bd,rt]}],"grid-cols":[{"grid-cols":[qd]}],"col-start-end":[{col:["auto",{span:["full",Bd,rt]},rt]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[qd]}],"row-start-end":[{row:["auto",{span:[Bd,rt]},rt]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",rt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",rt,e]}],"min-w":[{"min-w":[rt,e,"min","max","fit"]}],"max-w":[{"max-w":[rt,e,"none","full","min","max","fit","prose",{screen:[Da]},Da]}],h:[{h:[rt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[rt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[rt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[rt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Da,Ra]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",k0]}],"font-family":[{font:[qd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",rt]}],"line-clamp":[{"line-clamp":["none",lu,k0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Fi,rt]}],"list-image":[{"list-image":["none",rt]}],"list-style-type":[{list:["none","disc","decimal",rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Fi,Ra]}],"underline-offset":[{"underline-offset":["auto",Fi,rt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),KQ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",GQ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},QQ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:H()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[Fi,rt]}],"outline-w":[{outline:[Fi,Ra]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Fi,Ra]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Da,JQ]}],"shadow-color":[{shadow:[qd]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Da,rt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",rt]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",rt]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Bd,rt]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",rt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Fi,Ra,k0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},nJ=LQ(tJ);function Le(...t){return nJ(NQ(t))}const Db=Ox("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),F=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const o=r?xa:"button";return i.jsx(o,{className:Le(Db({variant:e,size:n,className:t})),ref:a,...s})});F.displayName="Button";const _e=g.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:Le("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));_e.displayName="Input";function ge(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function rJ(t,e){const n=g.createContext(e),r=a=>{const{children:o,...l}=a,c=g.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(a){const o=g.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function os(t,e=[]){let n=[];function r(a,o){const l=g.createContext(o),c=n.length;n=[...n,o];const u=h=>{var y;const{scope:m,children:p,...v}=h,w=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,b=g.useMemo(()=>v,Object.values(v));return i.jsx(w.Provider,{value:b,children:p})};u.displayName=a+"Provider";function d(h,m){var w;const p=((w=m==null?void 0:m[t])==null?void 0:w[c])||l,v=g.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(o=>g.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,sJ(s,...e)]}function sJ(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function jn(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function ss({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=iJ({defaultProp:e,onChange:n}),a=t!==void 0,o=a?t:r,l=jn(n),c=g.useCallback(u=>{if(a){const h=typeof u=="function"?u(t):u;h!==t&&l(h)}else s(u)},[a,t,s,l]);return[o,c]}function iJ({defaultProp:t,onChange:e}){const n=g.useState(t),[r]=n,s=g.useRef(r),a=jn(e);return g.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),n}var aJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],De=aJ.reduce((t,e)=>{const n=g.forwardRef((r,s)=>{const{asChild:a,...o}=r,l=a?xa:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(l,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function KD(t,e){t&&Qu.flushSync(()=>t.dispatchEvent(e))}function oJ(t,e=[]){let n=[];function r(a,o){const l=g.createContext(o),c=n.length;n=[...n,o];function u(h){const{scope:m,children:p,...v}=h,w=(m==null?void 0:m[t][c])||l,b=g.useMemo(()=>v,Object.values(v));return i.jsx(w.Provider,{value:b,children:p})}function d(h,m){const p=(m==null?void 0:m[t][c])||l,v=g.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=n.map(o=>g.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,lJ(s,...e)]}function lJ(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function cm(t){const e=t+"CollectionProvider",[n,r]=oJ(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:w}=p,b=Se.useRef(null),y=Se.useRef(new Map).current;return i.jsx(s,{scope:v,itemMap:y,collectionRef:b,children:w})};o.displayName=e;const l=t+"CollectionSlot",c=Se.forwardRef((p,v)=>{const{scope:w,children:b}=p,y=a(l,w),x=Xe(v,y.collectionRef);return i.jsx(xa,{ref:x,children:b})});c.displayName=l;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=Se.forwardRef((p,v)=>{const{scope:w,children:b,...y}=p,x=Se.useRef(null),_=Xe(v,x),E=a(u,w);return Se.useEffect(()=>(E.itemMap.set(x,{ref:x,...y}),()=>void E.itemMap.delete(x))),i.jsx(xa,{[d]:"",ref:_,children:b})});h.displayName=u;function m(p){const v=a(t+"CollectionConsumer",p);return Se.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((E,S)=>y.indexOf(E.ref.current)-y.indexOf(S.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},m,r]}var cJ=g.createContext(void 0);function ac(t){const e=g.useContext(cJ);return t||e||"ltr"}function uJ(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var dJ="DismissableLayer",Mb="dismissableLayer.update",hJ="dismissableLayer.pointerDownOutside",fJ="dismissableLayer.focusOutside",n2,YD=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),um=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=g.useContext(YD),[d,h]=g.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=g.useState({}),v=Xe(e,I=>h(I)),w=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=w.indexOf(b),x=d?w.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,E=x>=y,S=gJ(I=>{const A=I.target,R=[...u.branches].some(N=>N.contains(A));!E||R||(s==null||s(I),o==null||o(I),I.defaultPrevented||l==null||l())},m),D=vJ(I=>{const A=I.target;[...u.branches].some(N=>N.contains(A))||(a==null||a(I),o==null||o(I),I.defaultPrevented||l==null||l())},m);return uJ(I=>{x===u.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},m),g.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(n2=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),r2(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=n2)}},[d,m,n,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),r2())},[d,u]),g.useEffect(()=>{const I=()=>p({});return document.addEventListener(Mb,I),()=>document.removeEventListener(Mb,I)},[]),i.jsx(De.div,{...c,ref:v,style:{pointerEvents:_?E?"auto":"none":void 0,...t.style},onFocusCapture:ge(t.onFocusCapture,D.onFocusCapture),onBlurCapture:ge(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:ge(t.onPointerDownCapture,S.onPointerDownCapture)})});um.displayName=dJ;var mJ="DismissableLayerBranch",pJ=g.forwardRef((t,e)=>{const n=g.useContext(YD),r=g.useRef(null),s=Xe(e,r);return g.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(De.div,{...t,ref:s})});pJ.displayName=mJ;function gJ(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){QD(hJ,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function vJ(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=g.useRef(!1);return g.useEffect(()=>{const s=a=>{a.target&&!r.current&&QD(fJ,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function r2(){const t=new CustomEvent(Mb);document.dispatchEvent(t)}function QD(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?KD(s,a):s.dispatchEvent(a)}var T0=0;function Lx(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??s2()),document.body.insertAdjacentElement("beforeend",t[1]??s2()),T0++,()=>{T0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),T0--}},[])}function s2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var I0="focusScope.autoFocusOnMount",A0="focusScope.autoFocusOnUnmount",i2={bubbles:!1,cancelable:!0},xJ="FocusScope",dm=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,c]=g.useState(null),u=jn(s),d=jn(a),h=g.useRef(null),m=Xe(e,w=>c(w)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let w=function(_){if(p.paused||!l)return;const E=_.target;l.contains(E)?h.current=E:Oa(h.current,{select:!0})},b=function(_){if(p.paused||!l)return;const E=_.relatedTarget;E!==null&&(l.contains(E)||Oa(h.current,{select:!0}))},y=function(_){if(document.activeElement===document.body)for(const S of _)S.removedNodes.length>0&&Oa(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",b);const x=new MutationObserver(y);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",b),x.disconnect()}}},[r,l,p.paused]),g.useEffect(()=>{if(l){o2.add(p);const w=document.activeElement;if(!l.contains(w)){const y=new CustomEvent(I0,i2);l.addEventListener(I0,u),l.dispatchEvent(y),y.defaultPrevented||(yJ(NJ(JD(l)),{select:!0}),document.activeElement===w&&Oa(l))}return()=>{l.removeEventListener(I0,u),setTimeout(()=>{const y=new CustomEvent(A0,i2);l.addEventListener(A0,d),l.dispatchEvent(y),y.defaultPrevented||Oa(w??document.body,{select:!0}),l.removeEventListener(A0,d),o2.remove(p)},0)}}},[l,u,d,p]);const v=g.useCallback(w=>{if(!n&&!r||p.paused)return;const b=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,y=document.activeElement;if(b&&y){const x=w.currentTarget,[_,E]=wJ(x);_&&E?!w.shiftKey&&y===E?(w.preventDefault(),n&&Oa(_,{select:!0})):w.shiftKey&&y===_&&(w.preventDefault(),n&&Oa(E,{select:!0})):y===x&&w.preventDefault()}},[n,r,p.paused]);return i.jsx(De.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});dm.displayName=xJ;function yJ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Oa(r,{select:e}),document.activeElement!==n)return}function wJ(t){const e=JD(t),n=a2(e,t),r=a2(e.reverse(),t);return[n,r]}function JD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function a2(t,e){for(const n of t)if(!bJ(n,{upTo:e}))return n}function bJ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function _J(t){return t instanceof HTMLInputElement&&"select"in t}function Oa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&_J(t)&&e&&t.select()}}var o2=jJ();function jJ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=l2(t,e),t.unshift(e)},remove(e){var n;t=l2(t,e),(n=t[0])==null||n.resume()}}}function l2(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function NJ(t){return t.filter(e=>e.tagName!=="A")}var Dn=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},SJ=GT.useId||(()=>{}),EJ=0;function es(t){const[e,n]=g.useState(SJ());return Dn(()=>{n(r=>r??String(EJ++))},[t]),e?`radix-${e}`:""}const CJ=["top","right","bottom","left"],No=Math.min,Gr=Math.max,ov=Math.round,vp=Math.floor,So=t=>({x:t,y:t}),kJ={left:"right",right:"left",bottom:"top",top:"bottom"},TJ={start:"end",end:"start"};function Ob(t,e,n){return Gr(t,No(e,n))}function ya(t,e){return typeof t=="function"?t(e):t}function wa(t){return t.split("-")[0]}function od(t){return t.split("-")[1]}function Oj(t){return t==="x"?"y":"x"}function Lj(t){return t==="y"?"height":"width"}function Eo(t){return["top","bottom"].includes(wa(t))?"y":"x"}function Vj(t){return Oj(Eo(t))}function IJ(t,e,n){n===void 0&&(n=!1);const r=od(t),s=Vj(t),a=Lj(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=lv(o)),[o,lv(o)]}function AJ(t){const e=lv(t);return[Lb(t),e,Lb(e)]}function Lb(t){return t.replace(/start|end/g,e=>TJ[e])}function PJ(t,e,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?a:o;default:return[]}}function RJ(t,e,n,r){const s=od(t);let a=PJ(wa(t),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(Lb)))),a}function lv(t){return t.replace(/left|right|bottom|top/g,e=>kJ[e])}function DJ(t){return{top:0,right:0,bottom:0,left:0,...t}}function XD(t){return typeof t!="number"?DJ(t):{top:t,right:t,bottom:t,left:t}}function cv(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function c2(t,e,n){let{reference:r,floating:s}=t;const a=Eo(e),o=Vj(e),l=Lj(o),c=wa(e),u=a==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(od(e)){case"start":p[o]-=m*(n&&u?-1:1);break;case"end":p[o]+=m*(n&&u?-1:1);break}return p}const MJ=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=c2(u,r,c),m=r,p={},v=0;for(let w=0;w<l.length;w++){const{name:b,fn:y}=l[w],{x,y:_,data:E,reset:S}=await y({x:d,y:h,initialPlacement:r,placement:m,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});d=x??d,h=_??h,p={...p,[b]:{...p[b],...E}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:h}=c2(u,m,c)),w=-1)}return{x:d,y:h,placement:m,strategy:s,middlewareData:p}};async function gf(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=ya(e,t),v=XD(p),b=l[m?h==="floating"?"reference":"floating":h],y=cv(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),E=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},S=cv(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:_,strategy:c}):x);return{top:(y.top-S.top+v.top)/E.y,bottom:(S.bottom-y.bottom+v.bottom)/E.y,left:(y.left-S.left+v.left)/E.x,right:(S.right-y.right+v.right)/E.x}}const OJ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=ya(t,e)||{};if(u==null)return{};const h=XD(d),m={x:n,y:r},p=Vj(s),v=Lj(p),w=await o.getDimensions(u),b=p==="y",y=b?"top":"left",x=b?"bottom":"right",_=b?"clientHeight":"clientWidth",E=a.reference[v]+a.reference[p]-m[p]-a.floating[v],S=m[p]-a.reference[p],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let I=D?D[_]:0;(!I||!await(o.isElement==null?void 0:o.isElement(D)))&&(I=l.floating[_]||a.floating[v]);const A=E/2-S/2,R=I/2-w[v]/2-1,N=No(h[y],R),P=No(h[x],R),T=N,C=I-w[v]-P,V=I/2-w[v]/2+A,z=Ob(T,V,C),H=!c.arrow&&od(s)!=null&&V!==z&&a.reference[v]/2-(V<T?N:P)-w[v]/2<0,$=H?V<T?V-T:V-C:0;return{[p]:m[p]+$,data:{[p]:z,centerOffset:V-z-$,...H&&{alignmentOffset:$}},reset:H}}}),LJ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0,...b}=ya(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const y=wa(s),x=Eo(l),_=wa(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=m||(_||!w?[lv(l)]:AJ(l)),D=v!=="none";!m&&D&&S.push(...RJ(l,w,v,E));const I=[l,...S],A=await gf(e,b),R=[];let N=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&R.push(A[y]),h){const V=IJ(s,o,E);R.push(A[V[0]],A[V[1]])}if(N=[...N,{placement:s,overflows:R}],!R.every(V=>V<=0)){var P,T;const V=(((P=a.flip)==null?void 0:P.index)||0)+1,z=I[V];if(z)return{data:{index:V,overflows:N},reset:{placement:z}};let H=(T=N.filter($=>$.overflows[0]<=0).sort(($,L)=>$.overflows[1]-L.overflows[1])[0])==null?void 0:T.placement;if(!H)switch(p){case"bestFit":{var C;const $=(C=N.filter(L=>{if(D){const W=Eo(L.placement);return W===x||W==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(W=>W>0).reduce((W,U)=>W+U,0)]).sort((L,W)=>L[1]-W[1])[0])==null?void 0:C[0];$&&(H=$);break}case"initialPlacement":H=l;break}if(s!==H)return{reset:{placement:H}}}return{}}}};function u2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function d2(t){return CJ.some(e=>t[e]>=0)}const VJ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ya(t,e);switch(r){case"referenceHidden":{const a=await gf(e,{...s,elementContext:"reference"}),o=u2(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:d2(o)}}}case"escaped":{const a=await gf(e,{...s,altBoundary:!0}),o=u2(a,n.floating);return{data:{escapedOffsets:o,escaped:d2(o)}}}default:return{}}}}};async function FJ(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=wa(n),l=od(n),c=Eo(n)==="y",u=["left","top"].includes(o)?-1:1,d=a&&c?-1:1,h=ya(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*d,y:m*u}:{x:m*u,y:p*d}}const $J=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=e,c=await FJ(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},UJ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:y,y:x}=b;return{x:y,y:x}}},...c}=ya(t,e),u={x:n,y:r},d=await gf(e,c),h=Eo(wa(s)),m=Oj(h);let p=u[m],v=u[h];if(a){const b=m==="y"?"top":"left",y=m==="y"?"bottom":"right",x=p+d[b],_=p-d[y];p=Ob(x,p,_)}if(o){const b=h==="y"?"top":"left",y=h==="y"?"bottom":"right",x=v+d[b],_=v-d[y];v=Ob(x,v,_)}const w=l.fn({...e,[m]:p,[h]:v});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[m]:a,[h]:o}}}}}},zJ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ya(t,e),d={x:n,y:r},h=Eo(s),m=Oj(h);let p=d[m],v=d[h];const w=ya(l,e),b=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const _=m==="y"?"height":"width",E=a.reference[m]-a.floating[_]+b.mainAxis,S=a.reference[m]+a.reference[_]-b.mainAxis;p<E?p=E:p>S&&(p=S)}if(u){var y,x;const _=m==="y"?"width":"height",E=["top","left"].includes(wa(s)),S=a.reference[h]-a.floating[_]+(E&&((y=o.offset)==null?void 0:y[h])||0)+(E?0:b.crossAxis),D=a.reference[h]+a.reference[_]+(E?0:((x=o.offset)==null?void 0:x[h])||0)-(E?b.crossAxis:0);v<S?v=S:v>D&&(v=D)}return{[m]:p,[h]:v}}}},BJ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=ya(t,e),d=await gf(e,u),h=wa(s),m=od(s),p=Eo(s)==="y",{width:v,height:w}=a.floating;let b,y;h==="top"||h==="bottom"?(b=h,y=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=h,b=m==="end"?"top":"bottom");const x=w-d.top-d.bottom,_=v-d.left-d.right,E=No(w-d[b],x),S=No(v-d[y],_),D=!e.middlewareData.shift;let I=E,A=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=x),D&&!m){const N=Gr(d.left,0),P=Gr(d.right,0),T=Gr(d.top,0),C=Gr(d.bottom,0);p?A=v-2*(N!==0||P!==0?N+P:Gr(d.left,d.right)):I=w-2*(T!==0||C!==0?T+C:Gr(d.top,d.bottom))}await c({...e,availableWidth:A,availableHeight:I});const R=await o.getDimensions(l.floating);return v!==R.width||w!==R.height?{reset:{rects:!0}}:{}}}};function Vx(){return typeof window<"u"}function ld(t){return ZD(t)?(t.nodeName||"").toLowerCase():"#document"}function ts(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Di(t){var e;return(e=(ZD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ZD(t){return Vx()?t instanceof Node||t instanceof ts(t).Node:!1}function Js(t){return Vx()?t instanceof Element||t instanceof ts(t).Element:!1}function Ti(t){return Vx()?t instanceof HTMLElement||t instanceof ts(t).HTMLElement:!1}function h2(t){return!Vx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ts(t).ShadowRoot}function hm(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Xs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function qJ(t){return["table","td","th"].includes(ld(t))}function Fx(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Fj(t){const e=$j(),n=Js(t)?Xs(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function WJ(t){let e=Co(t);for(;Ti(e)&&!Mu(e);){if(Fj(e))return e;if(Fx(e))return null;e=Co(e)}return null}function $j(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Mu(t){return["html","body","#document"].includes(ld(t))}function Xs(t){return ts(t).getComputedStyle(t)}function $x(t){return Js(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Co(t){if(ld(t)==="html")return t;const e=t.assignedSlot||t.parentNode||h2(t)&&t.host||Di(t);return h2(e)?e.host:e}function eM(t){const e=Co(t);return Mu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ti(e)&&hm(e)?e:eM(e)}function vf(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=eM(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),o=ts(s);if(a){const l=Vb(o);return e.concat(o,o.visualViewport||[],hm(s)?s:[],l&&n?vf(l):[])}return e.concat(s,vf(s,[],n))}function Vb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function tM(t){const e=Xs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ti(t),a=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=ov(n)!==a||ov(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function Uj(t){return Js(t)?t:t.contextElement}function cu(t){const e=Uj(t);if(!Ti(e))return So(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=tM(e);let o=(a?ov(n.width):n.width)/r,l=(a?ov(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const HJ=So(0);function nM(t){const e=ts(t);return!$j()||!e.visualViewport?HJ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function GJ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ts(t)?!1:e}function Bl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=Uj(t);let o=So(1);e&&(r?Js(r)&&(o=cu(r)):o=cu(t));const l=GJ(a,n,r)?nM(a):So(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(a){const m=ts(a),p=r&&Js(r)?ts(r):r;let v=m,w=Vb(v);for(;w&&r&&p!==v;){const b=cu(w),y=w.getBoundingClientRect(),x=Xs(w),_=y.left+(w.clientLeft+parseFloat(x.paddingLeft))*b.x,E=y.top+(w.clientTop+parseFloat(x.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,h*=b.y,c+=_,u+=E,v=ts(w),w=Vb(v)}}return cv({width:d,height:h,x:c,y:u})}function KJ(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",o=Di(r),l=e?Fx(e.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=So(1);const d=So(0),h=Ti(r);if((h||!h&&!a)&&((ld(r)!=="body"||hm(o))&&(c=$x(r)),Ti(r))){const m=Bl(r);u=cu(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x,y:n.y*u.y-c.scrollTop*u.y+d.y}}function YJ(t){return Array.from(t.getClientRects())}function Fb(t,e){const n=$x(t).scrollLeft;return e?e.left+n:Bl(Di(t)).left+n}function QJ(t){const e=Di(t),n=$x(t),r=t.ownerDocument.body,s=Gr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Gr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Fb(t);const l=-n.scrollTop;return Xs(r).direction==="rtl"&&(o+=Gr(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function JJ(t,e){const n=ts(t),r=Di(t),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=$j();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}function XJ(t,e){const n=Bl(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=Ti(t)?cu(t):So(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function f2(t,e,n){let r;if(e==="viewport")r=JJ(t,n);else if(e==="document")r=QJ(Di(t));else if(Js(e))r=XJ(e,n);else{const s=nM(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return cv(r)}function rM(t,e){const n=Co(t);return n===e||!Js(n)||Mu(n)?!1:Xs(n).position==="fixed"||rM(n,e)}function ZJ(t,e){const n=e.get(t);if(n)return n;let r=vf(t,[],!1).filter(l=>Js(l)&&ld(l)!=="body"),s=null;const a=Xs(t).position==="fixed";let o=a?Co(t):t;for(;Js(o)&&!Mu(o);){const l=Xs(o),c=Fj(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||hm(o)&&!c&&rM(t,o))?r=r.filter(d=>d!==o):s=l,o=Co(o)}return e.set(t,r),r}function eX(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Fx(e)?[]:ZJ(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=f2(e,d,s);return u.top=Gr(h.top,u.top),u.right=No(h.right,u.right),u.bottom=No(h.bottom,u.bottom),u.left=Gr(h.left,u.left),u},f2(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function tX(t){const{width:e,height:n}=tM(t);return{width:e,height:n}}function nX(t,e,n){const r=Ti(e),s=Di(e),a=n==="fixed",o=Bl(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=So(0);if(r||!r&&!a)if((ld(e)!=="body"||hm(s))&&(l=$x(e)),r){const p=Bl(e,!0,a,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=Fb(s));let u=0,d=0;if(s&&!r&&!a){const p=s.getBoundingClientRect();d=p.top+l.scrollTop,u=p.left+l.scrollLeft-Fb(s,p)}const h=o.left+l.scrollLeft-c.x-u,m=o.top+l.scrollTop-c.y-d;return{x:h,y:m,width:o.width,height:o.height}}function P0(t){return Xs(t).position==="static"}function m2(t,e){if(!Ti(t)||Xs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Di(t)===n&&(n=n.ownerDocument.body),n}function sM(t,e){const n=ts(t);if(Fx(t))return n;if(!Ti(t)){let s=Co(t);for(;s&&!Mu(s);){if(Js(s)&&!P0(s))return s;s=Co(s)}return n}let r=m2(t,e);for(;r&&qJ(r)&&P0(r);)r=m2(r,e);return r&&Mu(r)&&P0(r)&&!Fj(r)?n:r||WJ(t)||n}const rX=async function(t){const e=this.getOffsetParent||sM,n=this.getDimensions,r=await n(t.floating);return{reference:nX(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function sX(t){return Xs(t).direction==="rtl"}const iX={convertOffsetParentRelativeRectToViewportRelativeRect:KJ,getDocumentElement:Di,getClippingRect:eX,getOffsetParent:sM,getElementRects:rX,getClientRects:YJ,getDimensions:tX,getScale:cu,isElement:Js,isRTL:sX};function aX(t,e){let n=null,r;const s=Di(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const{left:u,top:d,width:h,height:m}=t.getBoundingClientRect();if(l||e(),!h||!m)return;const p=vp(d),v=vp(s.clientWidth-(u+h)),w=vp(s.clientHeight-(d+m)),b=vp(u),x={rootMargin:-p+"px "+-v+"px "+-w+"px "+-b+"px",threshold:Gr(0,No(1,c))||1};let _=!0;function E(S){const D=S[0].intersectionRatio;if(D!==c){if(!_)return o();D?o(!1,D):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(E,{...x,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,x)}n.observe(t)}return o(!0),a}function oX(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Uj(t),d=s||a?[...u?vf(u):[],...vf(e)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),a&&y.addEventListener("resize",n)});const h=u&&l?aX(u,n):null;let m=-1,p=null;o&&(p=new ResizeObserver(y=>{let[x]=y;x&&x.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(e)})),n()}),u&&!c&&p.observe(u),p.observe(e));let v,w=c?Bl(t):null;c&&b();function b(){const y=Bl(t);w&&(y.x!==w.x||y.y!==w.y||y.width!==w.width||y.height!==w.height)&&n(),w=y,v=requestAnimationFrame(b)}return n(),()=>{var y;d.forEach(x=>{s&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),h==null||h(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const lX=$J,cX=UJ,uX=LJ,dX=BJ,hX=VJ,p2=OJ,fX=zJ,mX=(t,e,n)=>{const r=new Map,s={platform:iX,...n},a={...s.platform,_c:r};return MJ(t,e,{...s,platform:a})};var rg=typeof document<"u"?g.useLayoutEffect:g.useEffect;function uv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!uv(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!uv(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function iM(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function g2(t,e){const n=iM(t);return Math.round(e*n)/n}function R0(t){const e=g.useRef(t);return rg(()=>{e.current=t}),e}function pX(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=g.useState(r);uv(m,r)||p(r);const[v,w]=g.useState(null),[b,y]=g.useState(null),x=g.useCallback(L=>{L!==D.current&&(D.current=L,w(L))},[]),_=g.useCallback(L=>{L!==I.current&&(I.current=L,y(L))},[]),E=a||v,S=o||b,D=g.useRef(null),I=g.useRef(null),A=g.useRef(d),R=c!=null,N=R0(c),P=R0(s),T=R0(u),C=g.useCallback(()=>{if(!D.current||!I.current)return;const L={placement:e,strategy:n,middleware:m};P.current&&(L.platform=P.current),mX(D.current,I.current,L).then(W=>{const U={...W,isPositioned:T.current!==!1};V.current&&!uv(A.current,U)&&(A.current=U,Qu.flushSync(()=>{h(U)}))})},[m,e,n,P,T]);rg(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(L=>({...L,isPositioned:!1})))},[u]);const V=g.useRef(!1);rg(()=>(V.current=!0,()=>{V.current=!1}),[]),rg(()=>{if(E&&(D.current=E),S&&(I.current=S),E&&S){if(N.current)return N.current(E,S,C);C()}},[E,S,C,N,R]);const z=g.useMemo(()=>({reference:D,floating:I,setReference:x,setFloating:_}),[x,_]),H=g.useMemo(()=>({reference:E,floating:S}),[E,S]),$=g.useMemo(()=>{const L={position:n,left:0,top:0};if(!H.floating)return L;const W=g2(H.floating,d.x),U=g2(H.floating,d.y);return l?{...L,transform:"translate("+W+"px, "+U+"px)",...iM(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:U}},[n,l,H.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:C,refs:z,elements:H,floatingStyles:$}),[d,C,z,H,$])}const gX=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?p2({element:r.current,padding:s}).fn(n):{}:r?p2({element:r,padding:s}).fn(n):{}}}},vX=(t,e)=>({...lX(t),options:[t,e]}),xX=(t,e)=>({...cX(t),options:[t,e]}),yX=(t,e)=>({...fX(t),options:[t,e]}),wX=(t,e)=>({...uX(t),options:[t,e]}),bX=(t,e)=>({...dX(t),options:[t,e]}),_X=(t,e)=>({...hX(t),options:[t,e]}),jX=(t,e)=>({...gX(t),options:[t,e]});var NX="Arrow",aM=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return i.jsx(De.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});aM.displayName=NX;var SX=aM;function EX(t,e=[]){let n=[];function r(a,o){const l=g.createContext(o),c=n.length;n=[...n,o];function u(h){const{scope:m,children:p,...v}=h,w=(m==null?void 0:m[t][c])||l,b=g.useMemo(()=>v,Object.values(v));return i.jsx(w.Provider,{value:b,children:p})}function d(h,m){const p=(m==null?void 0:m[t][c])||l,v=g.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=n.map(o=>g.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,CX(s,...e)]}function CX(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ux(t){const[e,n]=g.useState(void 0);return Dn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var zj="Popper",[oM,cd]=EX(zj),[kX,lM]=oM(zj),cM=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return i.jsx(kX,{scope:e,anchor:r,onAnchorChange:s,children:n})};cM.displayName=zj;var uM="PopperAnchor",dM=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=lM(uM,n),o=g.useRef(null),l=Xe(e,o);return g.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(De.div,{...s,ref:l})});dM.displayName=uM;var Bj="PopperContent",[TX,IX]=oM(Bj),hM=g.forwardRef((t,e)=>{var ce,Ue,J,pe,G,re;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:v,...w}=t,b=lM(Bj,n),[y,x]=g.useState(null),_=Xe(e,ie=>x(ie)),[E,S]=g.useState(null),D=Ux(E),I=(D==null?void 0:D.width)??0,A=(D==null?void 0:D.height)??0,R=r+(a!=="center"?"-"+a:""),N=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],T=P.length>0,C={padding:N,boundary:P.filter(PX),altBoundary:T},{refs:V,floatingStyles:z,placement:H,isPositioned:$,middlewareData:L}=pX({strategy:"fixed",placement:R,whileElementsMounted:(...ie)=>oX(...ie,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[vX({mainAxis:s+A,alignmentAxis:o}),c&&xX({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?yX():void 0,...C}),c&&wX({...C}),bX({...C,apply:({elements:ie,rects:Ae,availableWidth:ze,availableHeight:We})=>{const{width:bt,height:O}=Ae.reference,B=ie.floating.style;B.setProperty("--radix-popper-available-width",`${ze}px`),B.setProperty("--radix-popper-available-height",`${We}px`),B.setProperty("--radix-popper-anchor-width",`${bt}px`),B.setProperty("--radix-popper-anchor-height",`${O}px`)}}),E&&jX({element:E,padding:l}),RX({arrowWidth:I,arrowHeight:A}),m&&_X({strategy:"referenceHidden",...C})]}),[W,U]=pM(H),Z=jn(v);Dn(()=>{$&&(Z==null||Z())},[$,Z]);const oe=(ce=L.arrow)==null?void 0:ce.x,ke=(Ue=L.arrow)==null?void 0:Ue.y,et=((J=L.arrow)==null?void 0:J.centerOffset)!==0,[ae,fe]=g.useState();return Dn(()=>{y&&fe(window.getComputedStyle(y).zIndex)},[y]),i.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:$?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[(pe=L.transformOrigin)==null?void 0:pe.x,(G=L.transformOrigin)==null?void 0:G.y].join(" "),...((re=L.hide)==null?void 0:re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(TX,{scope:n,placedSide:W,onArrowChange:S,arrowX:oe,arrowY:ke,shouldHideArrow:et,children:i.jsx(De.div,{"data-side":W,"data-align":U,...w,ref:_,style:{...w.style,animation:$?void 0:"none"}})})})});hM.displayName=Bj;var fM="PopperArrow",AX={top:"bottom",right:"left",bottom:"top",left:"right"},mM=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=IX(fM,r),o=AX[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(SX,{...s,ref:n,style:{...s.style,display:"block"}})})});mM.displayName=fM;function PX(t){return t!==null}var RX=t=>({name:"transformOrigin",options:t,fn(e){var b,y,x;const{placement:n,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=pM(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((y=s.arrow)==null?void 0:y.x)??0)+l/2,p=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let v="",w="";return u==="bottom"?(v=o?h:`${m}px`,w=`${-c}px`):u==="top"?(v=o?h:`${m}px`,w=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,w=o?h:`${p}px`):u==="left"&&(v=`${r.floating.width+c}px`,w=o?h:`${p}px`),{data:{x:v,y:w}}}});function pM(t){const[e,n="center"]=t.split("-");return[e,n]}var qj=cM,zx=dM,Wj=hM,Hj=mM,DX="Portal",fm=g.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,a]=g.useState(!1);Dn(()=>a(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?c8.createPortal(i.jsx(De.div,{...r,ref:e}),o):null});fm.displayName=DX;function MX(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var Yn=t=>{const{present:e,children:n}=t,r=OX(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),a=Xe(r.ref,LX(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:a}):null};Yn.displayName="Presence";function OX(t){const[e,n]=g.useState(),r=g.useRef({}),s=g.useRef(t),a=g.useRef("none"),o=t?"mounted":"unmounted",[l,c]=MX(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=xp(r.current);a.current=l==="mounted"?u:"none"},[l]),Dn(()=>{const u=r.current,d=s.current;if(d!==t){const m=a.current,p=xp(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Dn(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const w=xp(r.current).includes(p.animationName);if(p.target===e&&w&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=p=>{p.target===e&&(a.current=xp(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function xp(t){return(t==null?void 0:t.animationName)||"none"}function LX(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function VX(t,e=[]){let n=[];function r(a,o){const l=g.createContext(o),c=n.length;n=[...n,o];function u(h){const{scope:m,children:p,...v}=h,w=(m==null?void 0:m[t][c])||l,b=g.useMemo(()=>v,Object.values(v));return i.jsx(w.Provider,{value:b,children:p})}function d(h,m){const p=(m==null?void 0:m[t][c])||l,v=g.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=n.map(o=>g.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,FX(s,...e)]}function FX(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var D0="rovingFocusGroup.onEntryFocus",$X={bubbles:!1,cancelable:!0},Bx="RovingFocusGroup",[$b,gM,UX]=cm(Bx),[zX,qx]=VX(Bx,[UX]),[BX,qX]=zX(Bx),vM=g.forwardRef((t,e)=>i.jsx($b.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx($b.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(WX,{...t,ref:e})})}));vM.displayName=Bx;var WX=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,m=g.useRef(null),p=Xe(e,m),v=ac(a),[w=null,b]=ss({prop:o,defaultProp:l,onChange:c}),[y,x]=g.useState(!1),_=jn(u),E=gM(n),S=g.useRef(!1),[D,I]=g.useState(0);return g.useEffect(()=>{const A=m.current;if(A)return A.addEventListener(D0,_),()=>A.removeEventListener(D0,_)},[_]),i.jsx(BX,{scope:n,orientation:r,dir:v,loop:s,currentTabStopId:w,onItemFocus:g.useCallback(A=>b(A),[b]),onItemShiftTab:g.useCallback(()=>x(!0),[]),onFocusableItemAdd:g.useCallback(()=>I(A=>A+1),[]),onFocusableItemRemove:g.useCallback(()=>I(A=>A-1),[]),children:i.jsx(De.div,{tabIndex:y||D===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:ge(t.onMouseDown,()=>{S.current=!0}),onFocus:ge(t.onFocus,A=>{const R=!S.current;if(A.target===A.currentTarget&&R&&!y){const N=new CustomEvent(D0,$X);if(A.currentTarget.dispatchEvent(N),!N.defaultPrevented){const P=E().filter(H=>H.focusable),T=P.find(H=>H.active),C=P.find(H=>H.id===w),z=[T,C,...P].filter(Boolean).map(H=>H.ref.current);wM(z,d)}}S.current=!1}),onBlur:ge(t.onBlur,()=>x(!1))})})}),xM="RovingFocusGroupItem",yM=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,...o}=t,l=es(),c=a||l,u=qX(xM,n),d=u.currentTabStopId===c,h=gM(n),{onFocusableItemAdd:m,onFocusableItemRemove:p}=u;return g.useEffect(()=>{if(r)return m(),()=>p()},[r,m,p]),i.jsx($b.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:i.jsx(De.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ge(t.onMouseDown,v=>{r?u.onItemFocus(c):v.preventDefault()}),onFocus:ge(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ge(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const w=KX(v,u.orientation,u.dir);if(w!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let y=h().filter(x=>x.focusable).map(x=>x.ref.current);if(w==="last")y.reverse();else if(w==="prev"||w==="next"){w==="prev"&&y.reverse();const x=y.indexOf(v.currentTarget);y=u.loop?YX(y,x+1):y.slice(x+1)}setTimeout(()=>wM(y))}})})})});yM.displayName=xM;var HX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function GX(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function KX(t,e,n){const r=GX(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return HX[r]}function wM(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function YX(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var bM=vM,_M=yM,QX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},yc=new WeakMap,yp=new WeakMap,wp={},M0=0,jM=function(t){return t&&(t.host||jM(t.parentNode))},JX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=jM(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},XX=function(t,e,n,r){var s=JX(e,Array.isArray(t)?t:[t]);wp[n]||(wp[n]=new WeakMap);var a=wp[n],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var p=m.getAttribute(r),v=p!==null&&p!=="false",w=(yc.get(m)||0)+1,b=(a.get(m)||0)+1;yc.set(m,w),a.set(m,b),o.push(m),w===1&&v&&yp.set(m,!0),b===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",m,y)}})};return d(e),l.clear(),M0++,function(){o.forEach(function(h){var m=yc.get(h)-1,p=a.get(h)-1;yc.set(h,m),a.set(h,p),m||(yp.has(h)||h.removeAttribute(r),yp.delete(h)),p||h.removeAttribute(n)}),M0--,M0||(yc=new WeakMap,yc=new WeakMap,yp=new WeakMap,wp={})}},Wx=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=QX(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),XX(r,s,n,"aria-hidden")):function(){return null}},sg="right-scroll-bar-position",ig="width-before-scroll-bar",ZX="with-scroll-bars-hidden",eZ="--removed-body-scroll-bar-size";function O0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function tZ(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var nZ=typeof window<"u"?g.useLayoutEffect:g.useEffect,v2=new WeakMap;function rZ(t,e){var n=tZ(null,function(r){return t.forEach(function(s){return O0(s,r)})});return nZ(function(){var r=v2.get(n);if(r){var s=new Set(r),a=new Set(t),o=n.current;s.forEach(function(l){a.has(l)||O0(l,null)}),a.forEach(function(l){s.has(l)||O0(l,o)})}v2.set(n,t)},[t]),n}function sZ(t){return t}function iZ(t,e){e===void 0&&(e=sZ);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function aZ(t){t===void 0&&(t={});var e=iZ(null);return e.options=ci({async:!0,ssr:!1},t),e}var NM=function(t){var e=t.sideCar,n=Wf(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,ci({},n))};NM.isSideCarExport=!0;function oZ(t,e){return t.useMedium(e),NM}var SM=aZ(),L0=function(){},Hx=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:L0,onWheelCapture:L0,onTouchMoveCapture:L0}),s=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,p=t.noIsolation,v=t.inert,w=t.allowPinchZoom,b=t.as,y=b===void 0?"div":b,x=t.gapMode,_=Wf(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=m,S=rZ([n,e]),D=ci(ci({},_),s);return g.createElement(g.Fragment,null,d&&g.createElement(E,{sideCar:SM,removeScrollBar:u,shards:h,noIsolation:p,inert:v,setCallbacks:a,allowPinchZoom:!!w,lockRef:n,gapMode:x}),o?g.cloneElement(g.Children.only(l),ci(ci({},D),{ref:S})):g.createElement(y,ci({},D,{className:c,ref:S}),l))});Hx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hx.classNames={fullWidth:ig,zeroRight:sg};var lZ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cZ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=lZ();return e&&t.setAttribute("nonce",e),t}function uZ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function dZ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var hZ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=cZ())&&(uZ(e,n),dZ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},fZ=function(){var t=hZ();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},EM=function(){var t=fZ(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},mZ={left:0,top:0,right:0,gap:0},V0=function(t){return parseInt(t||"",10)||0},pZ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[V0(n),V0(r),V0(s)]},gZ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return mZ;var e=pZ(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},vZ=EM(),uu="data-scroll-locked",xZ=function(t,e,n,r){var s=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(ZX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(uu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sg,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ig,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(sg," .").concat(sg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ig," .").concat(ig,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(uu,`] {
    `).concat(eZ,": ").concat(l,`px;
  }
`)},x2=function(){var t=parseInt(document.body.getAttribute(uu)||"0",10);return isFinite(t)?t:0},yZ=function(){g.useEffect(function(){return document.body.setAttribute(uu,(x2()+1).toString()),function(){var t=x2()-1;t<=0?document.body.removeAttribute(uu):document.body.setAttribute(uu,t.toString())}},[])},wZ=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;yZ();var a=g.useMemo(function(){return gZ(s)},[s]);return g.createElement(vZ,{styles:xZ(a,!e,s,n?"":"!important")})},Ub=!1;if(typeof window<"u")try{var bp=Object.defineProperty({},"passive",{get:function(){return Ub=!0,!0}});window.addEventListener("test",bp,bp),window.removeEventListener("test",bp,bp)}catch{Ub=!1}var wc=Ub?{passive:!1}:!1,bZ=function(t){return t.tagName==="TEXTAREA"},CM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!bZ(t)&&n[e]==="visible")},_Z=function(t){return CM(t,"overflowY")},jZ=function(t){return CM(t,"overflowX")},y2=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=kM(t,r);if(s){var a=TM(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},NZ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},SZ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},kM=function(t,e){return t==="v"?_Z(e):jZ(e)},TM=function(t,e){return t==="v"?NZ(e):SZ(e)},EZ=function(t,e){return t==="h"&&e==="rtl"?-1:1},CZ=function(t,e,n,r,s){var a=EZ(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,c=e.contains(l),u=!1,d=o>0,h=0,m=0;do{var p=TM(t,l),v=p[0],w=p[1],b=p[2],y=w-b-a*v;(v||y)&&kM(t,l)&&(h+=y,m+=v),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},_p=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},w2=function(t){return[t.deltaX,t.deltaY]},b2=function(t){return t&&"current"in t?t.current:t},kZ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},TZ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},IZ=0,bc=[];function AZ(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(IZ++)[0],a=g.useState(EM)[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var w=Uz([t.lockRef.current],(t.shards||[]).map(b2),!0).filter(Boolean);return w.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(w,b){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var y=_p(w),x=n.current,_="deltaX"in w?w.deltaX:x[0]-y[0],E="deltaY"in w?w.deltaY:x[1]-y[1],S,D=w.target,I=Math.abs(_)>Math.abs(E)?"h":"v";if("touches"in w&&I==="h"&&D.type==="range")return!1;var A=y2(I,D);if(!A)return!0;if(A?S=I:(S=I==="v"?"h":"v",A=y2(I,D)),!A)return!1;if(!r.current&&"changedTouches"in w&&(_||E)&&(r.current=S),!S)return!0;var R=r.current||S;return CZ(R,b,w,R==="h"?_:E,!0)},[]),c=g.useCallback(function(w){var b=w;if(!(!bc.length||bc[bc.length-1]!==a)){var y="deltaY"in b?w2(b):_p(b),x=e.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&kZ(S.delta,y)})[0];if(x&&x.should){b.cancelable&&b.preventDefault();return}if(!x){var _=(o.current.shards||[]).map(b2).filter(Boolean).filter(function(S){return S.contains(b.target)}),E=_.length>0?l(b,_[0]):!o.current.noIsolation;E&&b.cancelable&&b.preventDefault()}}},[]),u=g.useCallback(function(w,b,y,x){var _={name:w,delta:b,target:y,should:x,shadowParent:PZ(y)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(E){return E!==_})},1)},[]),d=g.useCallback(function(w){n.current=_p(w),r.current=void 0},[]),h=g.useCallback(function(w){u(w.type,w2(w),w.target,l(w,t.lockRef.current))},[]),m=g.useCallback(function(w){u(w.type,_p(w),w.target,l(w,t.lockRef.current))},[]);g.useEffect(function(){return bc.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,wc),document.addEventListener("touchmove",c,wc),document.addEventListener("touchstart",d,wc),function(){bc=bc.filter(function(w){return w!==a}),document.removeEventListener("wheel",c,wc),document.removeEventListener("touchmove",c,wc),document.removeEventListener("touchstart",d,wc)}},[]);var p=t.removeScrollBar,v=t.inert;return g.createElement(g.Fragment,null,v?g.createElement(a,{styles:TZ(s)}):null,p?g.createElement(wZ,{gapMode:t.gapMode}):null)}function PZ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const RZ=oZ(SM,AZ);var mm=g.forwardRef(function(t,e){return g.createElement(Hx,ci({},t,{ref:e,sideCar:RZ}))});mm.classNames=Hx.classNames;var zb=["Enter"," "],DZ=["ArrowDown","PageUp","Home"],IM=["ArrowUp","PageDown","End"],MZ=[...DZ,...IM],OZ={ltr:[...zb,"ArrowRight"],rtl:[...zb,"ArrowLeft"]},LZ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pm="Menu",[xf,VZ,FZ]=cm(pm),[oc,AM]=os(pm,[FZ,cd,qx]),Gx=cd(),PM=qx(),[$Z,lc]=oc(pm),[UZ,gm]=oc(pm),RM=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:a,modal:o=!0}=t,l=Gx(e),[c,u]=g.useState(null),d=g.useRef(!1),h=jn(a),m=ac(s);return g.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),i.jsx(qj,{...l,children:i.jsx($Z,{scope:e,open:n,onOpenChange:h,content:c,onContentChange:u,children:i.jsx(UZ,{scope:e,onClose:g.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:o,children:r})})})};RM.displayName=pm;var zZ="MenuAnchor",Gj=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Gx(n);return i.jsx(zx,{...s,...r,ref:e})});Gj.displayName=zZ;var Kj="MenuPortal",[BZ,DM]=oc(Kj,{forceMount:void 0}),MM=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,a=lc(Kj,e);return i.jsx(BZ,{scope:e,forceMount:n,children:i.jsx(Yn,{present:n||a.open,children:i.jsx(fm,{asChild:!0,container:s,children:r})})})};MM.displayName=Kj;var bs="MenuContent",[qZ,Yj]=oc(bs),OM=g.forwardRef((t,e)=>{const n=DM(bs,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=lc(bs,t.__scopeMenu),o=gm(bs,t.__scopeMenu);return i.jsx(xf.Provider,{scope:t.__scopeMenu,children:i.jsx(Yn,{present:r||a.open,children:i.jsx(xf.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx(WZ,{...s,ref:e}):i.jsx(HZ,{...s,ref:e})})})})}),WZ=g.forwardRef((t,e)=>{const n=lc(bs,t.__scopeMenu),r=g.useRef(null),s=Xe(e,r);return g.useEffect(()=>{const a=r.current;if(a)return Wx(a)},[]),i.jsx(Qj,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ge(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),HZ=g.forwardRef((t,e)=>{const n=lc(bs,t.__scopeMenu);return i.jsx(Qj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Qj=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,disableOutsideScroll:v,...w}=t,b=lc(bs,n),y=gm(bs,n),x=Gx(n),_=PM(n),E=VZ(n),[S,D]=g.useState(null),I=g.useRef(null),A=Xe(e,I,b.onContentChange),R=g.useRef(0),N=g.useRef(""),P=g.useRef(0),T=g.useRef(null),C=g.useRef("right"),V=g.useRef(0),z=v?mm:g.Fragment,H=v?{as:xa,allowPinchZoom:!0}:void 0,$=W=>{var ce,Ue;const U=N.current+W,Z=E().filter(J=>!J.disabled),oe=document.activeElement,ke=(ce=Z.find(J=>J.ref.current===oe))==null?void 0:ce.textValue,et=Z.map(J=>J.textValue),ae=see(et,U,ke),fe=(Ue=Z.find(J=>J.textValue===ae))==null?void 0:Ue.ref.current;(function J(pe){N.current=pe,window.clearTimeout(R.current),pe!==""&&(R.current=window.setTimeout(()=>J(""),1e3))})(U),fe&&setTimeout(()=>fe.focus())};g.useEffect(()=>()=>window.clearTimeout(R.current),[]),Lx();const L=g.useCallback(W=>{var Z,oe;return C.current===((Z=T.current)==null?void 0:Z.side)&&aee(W,(oe=T.current)==null?void 0:oe.area)},[]);return i.jsx(qZ,{scope:n,searchRef:N,onItemEnter:g.useCallback(W=>{L(W)&&W.preventDefault()},[L]),onItemLeave:g.useCallback(W=>{var U;L(W)||((U=I.current)==null||U.focus(),D(null))},[L]),onTriggerLeave:g.useCallback(W=>{L(W)&&W.preventDefault()},[L]),pointerGraceTimerRef:P,onPointerGraceIntentChange:g.useCallback(W=>{T.current=W},[]),children:i.jsx(z,{...H,children:i.jsx(dm,{asChild:!0,trapped:s,onMountAutoFocus:ge(a,W=>{var U;W.preventDefault(),(U=I.current)==null||U.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(um,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,children:i.jsx(bM,{asChild:!0,..._,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:D,onEntryFocus:ge(c,W=>{y.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Wj,{role:"menu","aria-orientation":"vertical","data-state":XM(b.open),"data-radix-menu-content":"",dir:y.dir,...x,...w,ref:A,style:{outline:"none",...w.style},onKeyDown:ge(w.onKeyDown,W=>{const Z=W.target.closest("[data-radix-menu-content]")===W.currentTarget,oe=W.ctrlKey||W.altKey||W.metaKey,ke=W.key.length===1;Z&&(W.key==="Tab"&&W.preventDefault(),!oe&&ke&&$(W.key));const et=I.current;if(W.target!==et||!MZ.includes(W.key))return;W.preventDefault();const fe=E().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);IM.includes(W.key)&&fe.reverse(),nee(fe)}),onBlur:ge(t.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(R.current),N.current="")}),onPointerMove:ge(t.onPointerMove,yf(W=>{const U=W.target,Z=V.current!==W.clientX;if(W.currentTarget.contains(U)&&Z){const oe=W.clientX>V.current?"right":"left";C.current=oe,V.current=W.clientX}}))})})})})})})});OM.displayName=bs;var GZ="MenuGroup",Jj=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(De.div,{role:"group",...r,ref:e})});Jj.displayName=GZ;var KZ="MenuLabel",LM=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(De.div,{...r,ref:e})});LM.displayName=KZ;var dv="MenuItem",_2="menu.itemSelect",Kx=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,a=g.useRef(null),o=gm(dv,t.__scopeMenu),l=Yj(dv,t.__scopeMenu),c=Xe(e,a),u=g.useRef(!1),d=()=>{const h=a.current;if(!n&&h){const m=new CustomEvent(_2,{bubbles:!0,cancelable:!0});h.addEventListener(_2,p=>r==null?void 0:r(p),{once:!0}),KD(h,m),m.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(VM,{...s,ref:c,disabled:n,onClick:ge(t.onClick,d),onPointerDown:h=>{var m;(m=t.onPointerDown)==null||m.call(t,h),u.current=!0},onPointerUp:ge(t.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:ge(t.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||zb.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Kx.displayName=dv;var VM=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=t,o=Yj(dv,n),l=PM(n),c=g.useRef(null),u=Xe(e,c),[d,h]=g.useState(!1),[m,p]=g.useState("");return g.useEffect(()=>{const v=c.current;v&&p((v.textContent??"").trim())},[a.children]),i.jsx(xf.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:i.jsx(_M,{asChild:!0,...l,focusable:!r,children:i.jsx(De.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:ge(t.onPointerMove,yf(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ge(t.onPointerLeave,yf(v=>o.onItemLeave(v))),onFocus:ge(t.onFocus,()=>h(!0)),onBlur:ge(t.onBlur,()=>h(!1))})})})}),YZ="MenuCheckboxItem",FM=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(qM,{scope:t.__scopeMenu,checked:n,children:i.jsx(Kx,{role:"menuitemcheckbox","aria-checked":hv(n)?"mixed":n,...s,ref:e,"data-state":Zj(n),onSelect:ge(s.onSelect,()=>r==null?void 0:r(hv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});FM.displayName=YZ;var $M="MenuRadioGroup",[QZ,JZ]=oc($M,{value:void 0,onValueChange:()=>{}}),UM=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,a=jn(r);return i.jsx(QZ,{scope:t.__scopeMenu,value:n,onValueChange:a,children:i.jsx(Jj,{...s,ref:e})})});UM.displayName=$M;var zM="MenuRadioItem",BM=g.forwardRef((t,e)=>{const{value:n,...r}=t,s=JZ(zM,t.__scopeMenu),a=n===s.value;return i.jsx(qM,{scope:t.__scopeMenu,checked:a,children:i.jsx(Kx,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":Zj(a),onSelect:ge(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});BM.displayName=zM;var Xj="MenuItemIndicator",[qM,XZ]=oc(Xj,{checked:!1}),WM=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,a=XZ(Xj,n);return i.jsx(Yn,{present:r||hv(a.checked)||a.checked===!0,children:i.jsx(De.span,{...s,ref:e,"data-state":Zj(a.checked)})})});WM.displayName=Xj;var ZZ="MenuSeparator",HM=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(De.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});HM.displayName=ZZ;var eee="MenuArrow",GM=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Gx(n);return i.jsx(Hj,{...s,...r,ref:e})});GM.displayName=eee;var tee="MenuSub",[Wfe,KM]=oc(tee),ih="MenuSubTrigger",YM=g.forwardRef((t,e)=>{const n=lc(ih,t.__scopeMenu),r=gm(ih,t.__scopeMenu),s=KM(ih,t.__scopeMenu),a=Yj(ih,t.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>d,[d]),g.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),i.jsx(Gj,{asChild:!0,...u,children:i.jsx(VM,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":XM(n.open),...t,ref:Mx(e,s.onTriggerChange),onClick:h=>{var m;(m=t.onClick)==null||m.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ge(t.onPointerMove,yf(h=>{a.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ge(t.onPointerLeave,yf(h=>{var p,v;d();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const w=(v=n.content)==null?void 0:v.dataset.side,b=w==="right",y=b?-5:5,x=m[b?"left":"right"],_=m[b?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x,y:m.top},{x:_,y:m.top},{x:_,y:m.bottom},{x,y:m.bottom}],side:w}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ge(t.onKeyDown,h=>{var p;const m=a.searchRef.current!=="";t.disabled||m&&h.key===" "||OZ[r.dir].includes(h.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),h.preventDefault())})})})});YM.displayName=ih;var QM="MenuSubContent",JM=g.forwardRef((t,e)=>{const n=DM(bs,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=lc(bs,t.__scopeMenu),o=gm(bs,t.__scopeMenu),l=KM(QM,t.__scopeMenu),c=g.useRef(null),u=Xe(e,c);return i.jsx(xf.Provider,{scope:t.__scopeMenu,children:i.jsx(Yn,{present:r||a.open,children:i.jsx(xf.Slot,{scope:t.__scopeMenu,children:i.jsx(Qj,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ge(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ge(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ge(t.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),m=LZ[o.dir].includes(d.key);h&&m&&(a.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});JM.displayName=QM;function XM(t){return t?"open":"closed"}function hv(t){return t==="indeterminate"}function Zj(t){return hv(t)?"indeterminate":t?"checked":"unchecked"}function nee(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function ree(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function see(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=ree(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function iee(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a].x,c=e[a].y,u=e[o].x,d=e[o].y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(s=!s)}return s}function aee(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return iee(n,e)}function yf(t){return e=>e.pointerType==="mouse"?t(e):void 0}var oee=RM,lee=Gj,cee=MM,uee=OM,dee=Jj,hee=LM,fee=Kx,mee=FM,pee=UM,gee=BM,vee=WM,xee=HM,yee=GM,wee=YM,bee=JM,eN="DropdownMenu",[_ee,Hfe]=os(eN,[AM]),Sr=AM(),[jee,ZM]=_ee(eN),eO=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=Sr(e),u=g.useRef(null),[d=!1,h]=ss({prop:s,defaultProp:a,onChange:o});return i.jsx(jee,{scope:e,triggerId:es(),triggerRef:u,contentId:es(),open:d,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(m=>!m),[h]),modal:l,children:i.jsx(oee,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};eO.displayName=eN;var tO="DropdownMenuTrigger",nO=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,a=ZM(tO,n),o=Sr(n);return i.jsx(lee,{asChild:!0,...o,children:i.jsx(De.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Mx(e,a.triggerRef),onPointerDown:ge(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:ge(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});nO.displayName=tO;var Nee="DropdownMenuPortal",rO=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Sr(e);return i.jsx(cee,{...r,...n})};rO.displayName=Nee;var sO="DropdownMenuContent",iO=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ZM(sO,n),a=Sr(n),o=g.useRef(!1);return i.jsx(uee,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:e,onCloseAutoFocus:ge(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ge(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});iO.displayName=sO;var See="DropdownMenuGroup",Eee=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Sr(n);return i.jsx(dee,{...s,...r,ref:e})});Eee.displayName=See;var Cee="DropdownMenuLabel",aO=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Sr(n);return i.jsx(hee,{...s,...r,ref:e})});aO.displayName=Cee;var kee="DropdownMenuItem",oO=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Sr(n);return i.jsx(fee,{...s,...r,ref:e})});oO.displayName=kee;var Tee="DropdownMenuCheckboxItem",lO=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Sr(n);return i.jsx(mee,{...s,...r,ref:e})});lO.displayName=Tee;var Iee="DropdownMenuRadioGroup",Aee=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Sr(n);return i.jsx(pee,{...s,...r,ref:e})});Aee.displayName=Iee;var Pee="DropdownMenuRadioItem",cO=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Sr(n);return i.jsx(gee,{...s,...r,ref:e})});cO.displayName=Pee;var Ree="DropdownMenuItemIndicator",uO=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Sr(n);return i.jsx(vee,{...s,...r,ref:e})});uO.displayName=Ree;var Dee="DropdownMenuSeparator",dO=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Sr(n);return i.jsx(xee,{...s,...r,ref:e})});dO.displayName=Dee;var Mee="DropdownMenuArrow",Oee=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Sr(n);return i.jsx(yee,{...s,...r,ref:e})});Oee.displayName=Mee;var Lee="DropdownMenuSubTrigger",hO=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Sr(n);return i.jsx(wee,{...s,...r,ref:e})});hO.displayName=Lee;var Vee="DropdownMenuSubContent",fO=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Sr(n);return i.jsx(bee,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fO.displayName=Vee;var Fee=eO,$ee=nO,Uee=rO,mO=iO,pO=aO,gO=oO,vO=lO,xO=cO,yO=uO,wO=dO,bO=hO,_O=fO;function $o(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var zee=["color"],Bee=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=$o(t,zee);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),g.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),qee=["color"],tN=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=$o(t,qee);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),g.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Wee=["color"],jO=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=$o(t,Wee);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),g.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Hee=["color"],Gee=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=$o(t,Hee);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),g.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Kee=["color"],NO=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=$o(t,Kee);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),g.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Yee=["color"],Qee=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=$o(t,Yee);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),g.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Jee=["color"],Xee=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=$o(t,Jee);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),g.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Zee=["color"],ete=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=$o(t,Zee);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),g.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});const Bb=Fee,qb=$ee,tte=g.forwardRef(({className:t,inset:e,children:n,...r},s)=>i.jsxs(bO,{ref:s,className:Le("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,i.jsx(NO,{className:"ml-auto h-4 w-4"})]}));tte.displayName=bO.displayName;const nte=g.forwardRef(({className:t,...e},n)=>i.jsx(_O,{ref:n,className:Le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));nte.displayName=_O.displayName;const fv=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(Uee,{children:i.jsx(mO,{ref:r,sideOffset:e,className:Le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));fv.displayName=mO.displayName;const Ct=g.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(gO,{ref:r,className:Le("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Ct.displayName=gO.displayName;const rte=g.forwardRef(({className:t,children:e,checked:n,...r},s)=>i.jsxs(vO,{ref:s,className:Le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(yO,{children:i.jsx(tN,{className:"h-4 w-4"})})}),e]}));rte.displayName=vO.displayName;const ste=g.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(xO,{ref:r,className:Le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(yO,{children:i.jsx(ete,{className:"h-4 w-4 fill-current"})})}),e]}));ste.displayName=xO.displayName;const ite=g.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(pO,{ref:r,className:Le("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));ite.displayName=pO.displayName;const us=g.forwardRef(({className:t,...e},n)=>i.jsx(wO,{ref:n,className:Le("-mx-1 my-1 h-px bg-muted",t),...e}));us.displayName=wO.displayName;var nN="Avatar",[ate,Gfe]=os(nN),[ote,SO]=ate(nN),EO=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=g.useState("idle");return i.jsx(ote,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(De.span,{...r,ref:e})})});EO.displayName=nN;var CO="AvatarImage",kO=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,o=SO(CO,n),l=lte(r,a.referrerPolicy),c=jn(u=>{s(u),o.onImageLoadingStatusChange(u)});return Dn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(De.img,{...a,ref:e,src:r}):null});kO.displayName=CO;var TO="AvatarFallback",IO=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=SO(TO,n),[o,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(De.span,{...s,ref:e}):null});IO.displayName=TO;function lte(t,e){const[n,r]=g.useState("idle");return Dn(()=>{if(!t){r("error");return}let s=!0;const a=new window.Image,o=l=>()=>{s&&r(l)};return r("loading"),a.onload=o("loaded"),a.onerror=o("error"),a.src=t,e&&(a.referrerPolicy=e),()=>{s=!1}},[t,e]),n}var AO=EO,PO=kO,RO=IO;const Jr=g.forwardRef(({className:t,...e},n)=>i.jsx(AO,{ref:n,className:Le("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Jr.displayName=AO.displayName;const ba=g.forwardRef(({className:t,...e},n)=>i.jsx(PO,{ref:n,className:Le("aspect-square h-full w-full",t),...e}));ba.displayName=PO.displayName;const Pr=g.forwardRef(({className:t,...e},n)=>i.jsx(RO,{ref:n,className:Le("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Pr.displayName=RO.displayName;const cte=Ox("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ie({className:t,variant:e,...n}){return i.jsx("div",{className:Le(cte({variant:e}),t),...n})}const ute={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",VITE_SUPABASE_URL:"https://kbbhglxrcywpcktkamhl.supabase.co"},j2=t=>{let e;const n=new Set,r=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const p=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(v=>v(e,p))}},s=()=>e,c={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(ute?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,s,c);return c},dte=t=>t?j2(t):j2;var DO={exports:{}},MO={},OO={exports:{}},LO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ou=g;function hte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fte=typeof Object.is=="function"?Object.is:hte,mte=Ou.useState,pte=Ou.useEffect,gte=Ou.useLayoutEffect,vte=Ou.useDebugValue;function xte(t,e){var n=e(),r=mte({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return gte(function(){s.value=n,s.getSnapshot=e,F0(s)&&a({inst:s})},[t,n,e]),pte(function(){return F0(s)&&a({inst:s}),t(function(){F0(s)&&a({inst:s})})},[t]),vte(n),n}function F0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fte(t,n)}catch{return!0}}function yte(t,e){return e()}var wte=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yte:xte;LO.useSyncExternalStore=Ou.useSyncExternalStore!==void 0?Ou.useSyncExternalStore:wte;OO.exports=LO;var bte=OO.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yx=g,_te=bte;function jte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nte=typeof Object.is=="function"?Object.is:jte,Ste=_te.useSyncExternalStore,Ete=Yx.useRef,Cte=Yx.useEffect,kte=Yx.useMemo,Tte=Yx.useDebugValue;MO.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var a=Ete(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=kte(function(){function c(p){if(!u){if(u=!0,d=p,p=r(p),s!==void 0&&o.hasValue){var v=o.value;if(s(v,p))return h=v}return h=p}if(v=h,Nte(d,p))return v;var w=r(p);return s!==void 0&&s(v,w)?(d=p,v):(d=p,h=w)}var u=!1,d,h,m=n===void 0?null:n;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,n,r,s]);var l=Ste(t,a[0],a[1]);return Cte(function(){o.hasValue=!0,o.value=l},[l]),Tte(l),l};DO.exports=MO;var Ite=DO.exports;const Ate=Fv(Ite),VO={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",VITE_SUPABASE_URL:"https://kbbhglxrcywpcktkamhl.supabase.co"},{useDebugValue:Pte}=Se,{useSyncExternalStoreWithSelector:Rte}=Ate;let N2=!1;const Dte=t=>t;function Mte(t,e=Dte,n){(VO?"production":void 0)!=="production"&&n&&!N2&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),N2=!0);const r=Rte(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Pte(r),r}const S2=t=>{(VO?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?dte(t):t,n=(r,s)=>Mte(e,r,s);return Object.assign(n,e),n},ud=t=>t?S2(t):S2,Zo=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Ote=(t,e,n)=>{const r=[t,e].sort();return`${r[0]}_${r[1]}_${n}`},Lte=async(t,e,n,r,s,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const l=`${window.location.origin}/messages?conversation=${o}`,c=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:n,senderUniversity:r,listingTitle:s,messagePreview:a,conversationUrl:l})});c.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await c.text())}catch(l){console.error("Error sending email notification:",l)}},Qx=ud((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:n=>{t({loading:!0});const{unsubscribeConversations:r}=e();r&&r();try{const s=Mt(wt(ye,"conversations"),Vt("participants","array-contains",n)),a=Ck(s,o=>{const l=[];o.docs.forEach(c=>{const u=c.data();u.deletedFor&&u.deletedFor.includes(n)||u.blockedBy&&u.blockedBy.includes(n)||l.push({id:c.id,participants:u.participants||[],listingId:u.listingId||"",listingTitle:u.listingTitle||"",listingImage:u.listingImage,listingPrice:u.listingPrice||0,participantDetails:u.participantDetails||{},lastMessage:u.lastMessage?{...u.lastMessage,sentAt:Zo(u.lastMessage.sentAt)}:void 0,unreadCount:u.unreadCount||{},blockedBy:u.blockedBy||[],deletedFor:u.deletedFor||[],status:u.status||"active",createdAt:Zo(u.createdAt),updatedAt:Zo(u.updatedAt)})}),l.sort((c,u)=>u.updatedAt.getTime()-c.updatedAt.getTime()),t({conversations:l,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),te.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(s){console.error("Error setting up conversations listener:",s),t({loading:!1})}},fetchMessages:n=>{const{unsubscribeMessages:r}=e();r&&r();try{const s=Mt(wt(ye,"conversations",n,"messages")),a=Ck(s,o=>{const l=o.docs.map(c=>{const u=c.data();return{id:c.id,conversationId:n,senderId:u.senderId,senderName:u.senderName,senderAvatar:u.senderAvatar,text:u.text,type:u.type||"text",attachments:u.attachments||[],seen:u.seen||!1,sentAt:Zo(u.sentAt)}});l.sort((c,u)=>c.sentAt.getTime()-u.sentAt.getTime()),t({messages:l,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),te.error("Erreur lors du chargement des messages")})}catch(s){console.error("Error setting up messages listener:",s)}},sendMessage:async(n,r,s,a,o)=>{try{console.log("Sending message:",{conversationId:n,text:r,senderId:s,senderName:a});const l=e().currentConversation;if(!l){console.error("No current conversation");return}if(l.blockedBy&&l.blockedBy.includes(s)){te.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const c={conversationId:n,senderId:s,senderName:a,senderAvatar:o||null,text:r,type:"text",seen:!1,sentAt:ln()};console.log("Adding message to Firestore:",c);const u=await Ol(wt(ye,"conversations",n,"messages"),c);console.log("Message added with ID:",u.id);const d=l.participants.filter(m=>m!==s),h={};d.forEach(m=>{h[`unreadCount.${m}`]=(l.unreadCount[m]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:r,sentAt:ln(),senderId:s,senderName:a},updatedAt:ln(),...h}),await un(Ze(ye,"conversations",n),{lastMessage:{text:r,sentAt:ln(),senderId:s,senderName:a},updatedAt:ln(),...h}),d.forEach(async m=>{const p=l.participantDetails[m];if(p&&p.email){const v=l.participantDetails[s];await Lte(p.email,p.name,a,(v==null?void 0:v.university)||"Université non spécifiée",l.listingTitle,r,n)}}),console.log("Message sent successfully")}catch(l){console.error("Error sending message:",l),te.error("Erreur lors de l'envoi du message")}},createConversation:async(n,r,s,a,o,l,c,u,d)=>{try{console.log("Creating conversation:",{listingId:n,buyerId:o,sellerId:l});const h=Ote(o,l,n);console.log("Generated conversation ID:",h);const m=await ys(Ze(ye,"conversations",h));if(m.exists()){console.log("Conversation already exists, sending message");const w=m.data(),b={id:h,participants:w.participants||[],listingId:w.listingId||"",listingTitle:w.listingTitle||"",listingImage:w.listingImage,listingPrice:w.listingPrice||0,participantDetails:w.participantDetails||{},lastMessage:w.lastMessage?{...w.lastMessage,sentAt:Zo(w.lastMessage.sentAt)}:void 0,unreadCount:w.unreadCount||{},blockedBy:w.blockedBy||[],deletedFor:w.deletedFor||[],status:w.status||"active",createdAt:Zo(w.createdAt),updatedAt:Zo(w.updatedAt)};return t({currentConversation:b}),await e().sendMessage(h,d,o,c.displayName,c.photoURL),h}console.log("Creating new conversation");const p={participants:[o,l],listingId:n,listingTitle:r,listingImage:a||null,listingPrice:s,participantDetails:{[o]:{name:c.displayName,avatar:c.photoURL||null,university:c.university,verified:c.isVerified||!1,email:c.email||null},[l]:{name:u.sellerName,avatar:u.sellerAvatar||null,university:u.sellerUniversity,verified:u.sellerVerified||!1,email:u.email||null}},unreadCount:{[o]:0,[l]:1},status:"active",createdAt:ln(),updatedAt:ln()};console.log("Setting conversation document:",p),await ou(Ze(ye,"conversations",h),p);const v={id:h,participants:[o,l],listingId:n,listingTitle:r,listingImage:a||void 0,listingPrice:s,participantDetails:p.participantDetails,unreadCount:p.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:v}),console.log("Sending initial message"),await e().sendMessage(h,d,o,c.displayName,c.photoURL),h}catch(h){throw console.error("Error creating conversation:",h),te.error("Erreur lors de la création de la conversation"),h}},markMessagesAsSeen:async(n,r)=>{try{const s=Ze(ye,"conversations",n);await un(s,{[`unreadCount.${r}`]:0})}catch(s){console.error("Error marking messages as seen:",s)}},setCurrentConversation:n=>{t({currentConversation:n})},blockUser:async(n,r)=>{try{const s=Ze(ye,"conversations",n),a=await ys(s);if(a.exists()){const l=a.data().blockedBy||[];l.includes(r)||(await un(s,{blockedBy:[...l,r],status:"blocked",updatedAt:ln()}),te.success("Utilisateur bloqué"))}}catch(s){console.error("Error blocking user:",s),te.error("Erreur lors du blocage")}},reportUser:async(n,r,s,a,o)=>{try{const l={reporterId:r,reportedUserId:s,conversationId:n,reason:a,description:o,status:"pending",createdAt:ln()};await Ol(wt(ye,"reports"),l),te.success("Signalement envoyé")}catch(l){console.error("Error reporting user:",l),te.error("Erreur lors du signalement")}},deleteConversation:async(n,r)=>{try{const s=Ze(ye,"conversations",n),a=await ys(s);if(a.exists()){const o=a.data(),l=o.deletedFor||[];if(!l.includes(r)){const c=[...l,r];c.length===o.participants.length?await Au(s):await un(s,{deletedFor:c,updatedAt:ln()}),te.success("Conversation supprimée")}}}catch(s){console.error("Error deleting conversation:",s),te.error("Erreur lors de la suppression")}},findConversationByListing:(n,r)=>{const{conversations:s}=e();return s.find(a=>a.listingId===n&&a.participants.includes(r))||null},cleanup:()=>{const{unsubscribeConversations:n,unsubscribeMessages:r}=e();n&&n(),r&&r(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),Vte={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",VITE_SUPABASE_URL:"https://kbbhglxrcywpcktkamhl.supabase.co"};function Fte(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var a;const o=c=>c===null?null:JSON.parse(c,void 0),l=(a=n.getItem(s))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,a)=>n.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>n.removeItem(s)}}const wf=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return wf(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return wf(r)(n)}}}},$te=(t,e)=>(n,r,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,y)=>({...y,...b}),...e},o=!1;const l=new Set,c=new Set;let u;try{u=a.getStorage()}catch{}if(!u)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...b)},r,s);const d=wf(a.serialize),h=()=>{const b=a.partialize({...r()});let y;const x=d({state:b,version:a.version}).then(_=>u.setItem(a.name,_)).catch(_=>{y=_});if(y)throw y;return x},m=s.setState;s.setState=(b,y)=>{m(b,y),h()};const p=t((...b)=>{n(...b),h()},r,s);let v;const w=()=>{var b;if(!u)return;o=!1,l.forEach(x=>x(r()));const y=((b=a.onRehydrateStorage)==null?void 0:b.call(a,r()))||void 0;return wf(u.getItem.bind(u))(a.name).then(x=>{if(x)return a.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return a.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var _;return v=a.merge(x,(_=r())!=null?_:p),n(v,!0),h()}).then(()=>{y==null||y(v,void 0),o=!0,c.forEach(x=>x(v))}).catch(x=>{y==null||y(void 0,x)})};return s.persist={setOptions:b=>{a={...a,...b},b.getStorage&&(u=b.getStorage())},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>w(),hasHydrated:()=>o,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},w(),v||p},Ute=(t,e)=>(n,r,s)=>{let a={storage:Fte(()=>localStorage),partialize:w=>w,version:0,merge:(w,b)=>({...b,...w}),...e},o=!1;const l=new Set,c=new Set;let u=a.storage;if(!u)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,s);const d=()=>{const w=a.partialize({...r()});return u.setItem(a.name,{state:w,version:a.version})},h=s.setState;s.setState=(w,b)=>{h(w,b),d()};const m=t((...w)=>{n(...w),d()},r,s);s.getInitialState=()=>m;let p;const v=()=>{var w,b;if(!u)return;o=!1,l.forEach(x=>{var _;return x((_=r())!=null?_:m)});const y=((b=a.onRehydrateStorage)==null?void 0:b.call(a,(w=r())!=null?w:m))||void 0;return wf(u.getItem.bind(u))(a.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return[!0,a.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var _;const[E,S]=x;if(p=a.merge(S,(_=r())!=null?_:m),n(p,!0),E)return d()}).then(()=>{y==null||y(p,void 0),p=r(),o=!0,c.forEach(x=>x(p))}).catch(x=>{y==null||y(void 0,x)})};return s.persist={setOptions:w=>{a={...a,...w},w.storage&&(u=w.storage)},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},a.skipHydration||v(),p||m},zte=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Vte?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),$te(t,e)):Ute(t,e),Bte=zte,dd=ud()(Bte((t,e)=>({cart:[],cartTotal:0,addToCart:n=>{const{cart:r}=e(),s=r.find(a=>a.id===n.id);t(s?{cart:r.map(a=>a.id===n.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+n.price}:{cart:[...r,{...n,quantity:1}],cartTotal:e().cartTotal+n.price}),te.success("Article ajouté au panier")},removeFromCart:n=>{const{cart:r}=e(),s=r.find(a=>a.id===n);s&&t({cart:r.filter(a=>a.id!==n),cartTotal:e().cartTotal-s.price*s.quantity})},updateQuantity:(n,r)=>{const{cart:s}=e(),a=s.find(o=>o.id===n);if(a){const o=r-a.quantity;t({cart:s.map(l=>l.id===n?{...l,quantity:r}:l),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((n,r)=>n+r.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})})),qte=()=>{var w,b;const{currentUser:t,userProfile:e,logout:n}=Zt(),{conversations:r,fetchConversations:s}=Qx(),{getCartItemCount:a}=dd(),{theme:o,setTheme:l}=fU(),c=Mn(),[u,d]=g.useState(""),h=Se.useMemo(()=>!t||!r.length?0:r.reduce((y,x)=>{const _=x.unreadCount[t.uid]||0;return y+_},0),[r,t]);g.useEffect(()=>{t&&s(t.uid)},[t,s]);const m=y=>{y.preventDefault(),u.trim()&&c(`/listings?q=${encodeURIComponent(u.trim())}`)},p=async()=>{try{await n(),c("/")}catch(y){console.error("Logout error:",y)}},v=a();return i.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border w-full overflow-x-hidden",children:i.jsx("div",{className:"w-full max-w-full mx-auto px-3 sm:px-4 lg:px-6 overflow-hidden",children:i.jsxs("div",{className:"flex h-14 sm:h-16 items-center justify-between gap-2 sm:gap-4 min-w-0",children:[i.jsxs(be,{to:"/",className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:i.jsx(ji,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),i.jsxs("div",{className:"hidden sm:block",children:[i.jsx("span",{className:"font-bold text-lg sm:text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),i.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),i.jsx("form",{onSubmit:m,className:"flex-1 max-w-sm sm:max-w-md lg:max-w-lg mx-2 sm:mx-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(An,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(_e,{type:"text",placeholder:"Rechercher...",value:u,onChange:y=>d(y.target.value),className:"pl-8 sm:pl-10 pr-3 h-9 sm:h-10 text-sm w-full"})]})}),i.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[i.jsxs("div",{onClick:()=>l(o==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors p-2","aria-label":"Changer le thème",children:[i.jsx(Jk,{className:"h-4 w-4 sm:h-5 sm:w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),i.jsx(Kk,{className:"absolute top-2 left-2 h-4 w-4 sm:h-5 sm:w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?i.jsxs(i.Fragment,{children:[i.jsx(F,{asChild:!0,className:"hidden md:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 h-8 sm:h-9 text-xs sm:text-sm",children:i.jsxs(be,{to:"/create",children:[i.jsx(wl,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden lg:inline",children:"Publier"})]})}),i.jsxs("div",{className:"relative hidden sm:block",children:[i.jsx(F,{variant:"ghost",size:"icon",asChild:!0,className:"h-8 w-8 sm:h-9 sm:w-9",children:i.jsx(be,{to:"/cart",children:i.jsx(jo,{className:"w-4 h-4"})})}),v>0&&i.jsx(Ie,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 rounded-full border-2 border-background",children:v>99?"99+":v})]}),i.jsx(F,{variant:"ghost",size:"icon",asChild:!0,className:"hidden sm:flex h-8 w-8 sm:h-9 sm:w-9",children:i.jsx(be,{to:"/saved-searches",children:i.jsx(Ls,{className:"w-4 h-4"})})}),i.jsxs("div",{className:"relative hidden sm:block",children:[i.jsx(F,{variant:"ghost",size:"icon",asChild:!0,className:"h-8 w-8 sm:h-9 sm:w-9",children:i.jsx(be,{to:"/messages",children:i.jsx(zt,{className:"w-4 h-4"})})}),h>0&&i.jsx(Ie,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 rounded-full border-2 border-background",children:h>99?"99+":h})]}),i.jsxs(Bb,{children:[i.jsx(qb,{asChild:!0,children:i.jsxs(F,{variant:"ghost",className:"relative h-8 w-8 sm:h-9 sm:w-9 rounded-full p-0",children:[i.jsxs(Jr,{className:"h-7 w-7 sm:h-8 sm:w-8",children:[i.jsx(ba,{src:e==null?void 0:e.photoURL}),i.jsx(Pr,{className:"text-xs sm:text-sm",children:((b=(w=e==null?void 0:e.displayName)==null?void 0:w[0])==null?void 0:b.toUpperCase())||"U"})]}),(e==null?void 0:e.isVerified)&&i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx(Et,{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 text-white"})})]})}),i.jsxs(fv,{className:"w-64",align:"end",children:[i.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:i.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"font-medium",children:e==null?void 0:e.displayName}),(e==null?void 0:e.isVerified)&&i.jsxs(Ie,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:[i.jsx(Et,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),i.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:e==null?void 0:e.university}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(Hs,{className:"w-3 h-3 text-green-600"}),i.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO₂ économisés"]})]})]})}),i.jsx(us,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/profile",className:"cursor-pointer",children:[i.jsx(or,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/settings",className:"cursor-pointer",children:[i.jsx(Rx,{className:"w-4 h-4 mr-2"}),"Paramètres"]})}),i.jsx(us,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/orders",className:"cursor-pointer",children:[i.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/payments",className:"cursor-pointer",children:[i.jsx(lm,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),i.jsx(us,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/favorites",className:"cursor-pointer",children:[i.jsx(xr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/saved-searches",className:"cursor-pointer",children:[i.jsx(Pj,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardées"]})}),i.jsx(us,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/messages",className:"cursor-pointer relative",children:[i.jsx(zt,{className:"w-4 h-4 mr-2"}),"Messages",h>0&&i.jsx(Ie,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:h>99?"99+":h})]})}),i.jsx(us,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/impact",className:"cursor-pointer",children:[i.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Mon impact écologique"]})}),i.jsx(us,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/help",className:"cursor-pointer",children:[i.jsx(hn,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/safety",className:"cursor-pointer",children:[i.jsx(Et,{className:"w-4 h-4 mr-2"}),"Conseils de sécurité"]})}),i.jsx(us,{}),i.jsxs(Ct,{onClick:p,className:"cursor-pointer text-destructive",children:[i.jsx(oQ,{className:"w-4 h-4 mr-2"}),"Se déconnecter"]})]})]}),i.jsx(F,{size:"icon",asChild:!0,className:"md:hidden bg-gradient-to-r from-primary to-secondary h-8 w-8",children:i.jsx(be,{to:"/create",children:i.jsx(wl,{className:"w-4 h-4"})})})]}):i.jsxs(i.Fragment,{children:[i.jsx(F,{variant:"ghost",asChild:!0,className:"hidden sm:flex h-8 sm:h-9 text-xs sm:text-sm",children:i.jsx(be,{to:"/auth",children:"Se connecter"})}),i.jsx(F,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 h-8 sm:h-9 text-xs sm:text-sm px-2 sm:px-4",children:i.jsxs(be,{to:"/auth",children:[i.jsx("span",{className:"hidden sm:inline",children:"Rejoindre"}),i.jsx("span",{className:"sm:hidden",children:"Connexion"})]})})]}),i.jsxs(Bb,{children:[i.jsx(qb,{asChild:!0,className:"sm:hidden",children:i.jsx(F,{className:"p-2 text-foreground hover:text-primary transition-colors sm:hidden","aria-label":"Menu mobile",children:i.jsx(lQ,{className:"w-4 h-4"})})}),i.jsxs(fv,{className:"w-56",align:"end",children:[i.jsxs(Ct,{onClick:()=>l(o==="dark"?"light":"dark"),className:"cursor-pointer",children:[i.jsxs("div",{className:"relative mr-2",children:[i.jsx(Jk,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),i.jsx(Kk,{className:"absolute top-0 left-0 h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),"Changer le thème"]}),i.jsx(us,{}),i.jsx(Ct,{asChild:!0,children:i.jsx(be,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),i.jsx(Ct,{asChild:!0,children:i.jsx(be,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre étudiants"})}),i.jsx(Ct,{asChild:!0,children:i.jsx(be,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & Échanges"})}),i.jsx(Ct,{asChild:!0,children:i.jsx(be,{to:"/listings?category=services",className:"cursor-pointer",children:"Services étudiants"})}),i.jsx(Ct,{asChild:!0,children:i.jsx(be,{to:"/housing",className:"cursor-pointer",children:"Logement & Colocation"})}),i.jsx(Ct,{asChild:!0,children:i.jsx(be,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&i.jsxs(i.Fragment,{children:[i.jsx(us,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/create",className:"cursor-pointer",children:[i.jsx(wl,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/cart",className:"cursor-pointer relative",children:[i.jsx(jo,{className:"w-4 h-4 mr-2"}),"Panier",v>0&&i.jsx(Ie,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:v>99?"99+":v})]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/messages",className:"cursor-pointer relative",children:[i.jsx(zt,{className:"w-4 h-4 mr-2"}),"Messages",h>0&&i.jsx(Ie,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:h>99?"99+":h})]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/favorites",className:"cursor-pointer",children:[i.jsx(xr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})})]}),!t&&i.jsxs(i.Fragment,{children:[i.jsx(us,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:"/auth",className:"cursor-pointer",children:[i.jsx(or,{className:"w-4 h-4 mr-2"}),"Se connecter"]})})]})]})]})]})]})})})};function Wte({icon:t,size:e=100,gradientId:n}){return i.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:n,x1:"0",y1:"0",x2:"1",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#2ECC71"}),i.jsx("stop",{offset:"100%",stopColor:"#4A90E2"})]})}),i.jsx(t,{width:e,height:e,fill:`url(#${n})`})]})}const Hte=()=>i.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto w-full overflow-x-hidden",children:i.jsxs("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-8 sm:py-12 max-w-full overflow-hidden",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8",children:[i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Wte,{icon:ji,gradientId:"gradient-footer",size:28}),i.jsxs("div",{children:[i.jsx("span",{className:"font-bold text-lg sm:text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),i.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),i.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:"La première plateforme d'échange entre étudiants vérifiés. Achetez, vendez, donnez et échangez en toute sécurité au sein de votre communauté universitaire."}),i.jsxs("div",{className:"flex space-x-3 sm:space-x-4",children:[i.jsx("a",{href:"https://facebook.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors p-2 -m-2",children:i.jsx(tQ,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),i.jsx("a",{href:"https://twitter.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors p-2 -m-2",children:i.jsx(gQ,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),i.jsx("a",{href:"https://instagram.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors p-2 -m-2",children:i.jsx(iQ,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Navigation"}),i.jsxs("ul",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm",children:[i.jsx("li",{children:i.jsx(be,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Toutes les annonces"})}),i.jsx("li",{children:i.jsx(be,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Dons entre étudiants"})}),i.jsx("li",{children:i.jsx(be,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Troc & Échanges"})}),i.jsx("li",{children:i.jsx(be,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Publier une annonce"})}),i.jsx("li",{children:i.jsx(be,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Comment ça marche"})})]})]}),i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Catégories populaires"}),i.jsxs("ul",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm",children:[i.jsx("li",{children:i.jsx(be,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Livres & Cours"})}),i.jsx("li",{children:i.jsx(be,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Électronique"})}),i.jsx("li",{children:i.jsx(be,{to:"/housing",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Logement & Colocation"})}),i.jsx("li",{children:i.jsx(be,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Services étudiants"})}),i.jsx("li",{children:i.jsx(be,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Jobs & Stages"})})]})]}),i.jsxs("div",{className:"space-y-3 sm:space-y-4 text-center",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Sécurité & Confiance"}),i.jsxs("div",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[i.jsx(Et,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 flex-shrink-0"}),i.jsx("span",{children:"Étudiants 100% vérifiés"})]}),i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[i.jsx(Hs,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 flex-shrink-0"}),i.jsx("span",{children:"Impact écologique mesuré"})]}),i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[i.jsx(ar,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),i.jsx("span",{className:"break-all",children:"support@studymarket.fr"})]})]}),i.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[i.jsx(be,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Conseils de sécurité"}),i.jsx(be,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Processus de vérification"}),i.jsx(be,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Règles de la communauté"}),i.jsx(be,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Centre d'aide"})]})]})]}),i.jsx("div",{className:"border-t border-border mt-6 sm:mt-8 pt-6 sm:pt-8",children:i.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:justify-between sm:items-center",children:[i.jsxs("div",{className:"text-center sm:text-left",children:[i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground leading-relaxed",children:"© 2024 StudyMarket. Tous droits réservés."}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Plateforme dédiée aux étudiants vérifiés."})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-row gap-3 sm:gap-6 justify-center sm:justify-end",children:[i.jsx(be,{to:"/terms",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1",children:"Conditions d'utilisation"}),i.jsx(be,{to:"/privacy",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1",children:"Politique de confidentialité"}),i.jsx(be,{to:"/cookies",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1",children:"Cookies"}),i.jsxs("a",{href:"mailto:support@studymarket.fr",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1 flex items-center justify-center sm:justify-start gap-1",children:[i.jsx(Dr,{className:"w-3 h-3"}),"Contact"]})]})]})})]})}),Y=g.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Le("rounded-xl border bg-card text-card-foreground shadow",t),...e}));Y.displayName="Card";const Pe=g.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Le("flex flex-col space-y-1.5 p-6",t),...e}));Pe.displayName="CardHeader";const Re=g.forwardRef(({className:t,...e},n)=>i.jsx("h3",{ref:n,className:Le("font-semibold leading-none tracking-tight",t),...e}));Re.displayName="CardTitle";const at=g.forwardRef(({className:t,...e},n)=>i.jsx("p",{ref:n,className:Le("text-sm text-muted-foreground",t),...e}));at.displayName="CardDescription";const Q=g.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Le("p-6 pt-0",t),...e}));Q.displayName="CardContent";const FO=g.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Le("flex items-center p-6 pt-0",t),...e}));FO.displayName="CardFooter";const mv=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(mv).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=mv(t[n]);r!==void 0&&(e[n]=r)}),e}return t},E2=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},$0=t=>{var n,r,s,a,o,l;const e=t.data();return{id:t.id,...e,createdAt:E2(e.createdAt),updatedAt:E2(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((n=e.location)==null?void 0:n.city)||"Paris",state:((r=e.location)==null?void 0:r.state)||"Île-de-France",country:((s=e.location)==null?void 0:s.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((l=e.location)==null?void 0:l.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Université non spécifiée",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},vm=ud((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(n={},r=!1)=>{const{listings:s,lastDoc:a}=e();if(!(!r&&!a)){t({loading:!0});try{let o=Mt(wt(ye,"listings"),tv("createdAt","desc"),xs(20));!r&&a&&(o=Mt(o,eG(a)));const l=await Kt(o);let c=l.docs.map($0);if(n.category&&n.category!=="all"&&(c=c.filter(d=>d.category===n.category)),n.minPrice!==void 0&&(c=c.filter(d=>d.price>=n.minPrice)),n.maxPrice!==void 0&&(c=c.filter(d=>d.price<=n.maxPrice)),n.query){const d=n.query.toLowerCase();c=c.filter(h=>{var m;return h.title.toLowerCase().includes(d)||h.description.toLowerCase().includes(d)||((m=h.tags)==null?void 0:m.some(p=>p.toLowerCase().includes(d)))})}if(n.condition&&n.condition.length>0&&(c=c.filter(d=>n.condition.includes(d.condition))),n.sortBy)switch(n.sortBy){case"price-asc":c.sort((d,h)=>d.price-h.price);break;case"price-desc":c.sort((d,h)=>h.price-d.price);break;case"date":default:c.sort((d,h)=>new Date(h.createdAt).getTime()-new Date(d.createdAt).getTime());break}const u=l.docs[l.docs.length-1];t({listings:r?c:[...s,...c],lastDoc:u,hasMore:l.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),te.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log("🔍 Fetching featured listings...");const n=Mt(wt(ye,"listings"),tv("createdAt","desc"),xs(6)),r=await Kt(n);console.log(`📊 Found ${r.docs.length} documents`);const s=r.docs.map((a,o)=>{try{console.log(`🔄 Processing document ${o+1}:`,a.id);const l=$0(a);return console.log(`✅ Successfully converted listing: ${l.title}`),l}catch(l){return console.error(`❌ Error converting document ${a.id}:`,l),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas être affichée pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"Île-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Université non spécifiée",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(`🎉 Successfully processed ${s.length} featured listings`),t({featuredListings:s})}catch(n){console.error("❌ Error fetching featured listings:",n),t({featuredListings:[]})}},fetchListingById:async n=>{t({loading:!0});try{const r=Ze(ye,"listings",n),s=await ys(r);if(s.exists()){const a=$0(s);await un(r,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),te.error("Annonce introuvable")}catch(r){console.error("Error fetching listing:",r),te.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async n=>{var r,s,a,o,l,c;try{const u=mv({...n,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((r=n.location)==null?void 0:r.city)||"Paris",state:((s=n.location)==null?void 0:s.state)||"Île-de-France",country:((a=n.location)==null?void 0:a.country)||"France",campus:((o=n.location)==null?void 0:o.campus)||null,university:((l=n.location)==null?void 0:l.university)||null,coordinates:((c=n.location)==null?void 0:c.coordinates)||null},currency:n.currency||"EUR",images:n.images||[],tags:n.tags||[],condition:n.condition||"good",transactionType:n.transactionType||"sale"});console.log("Creating listing with data:",u);const d=await Ol(wt(ye,"listings"),u);return te.success("Annonce créée avec succès !"),d.id}catch(u){throw console.error("Error creating listing:",u),te.error("Erreur lors de la création de l'annonce"),u}},updateListing:async(n,r)=>{try{const s=Ze(ye,"listings",n),a=mv({...r,updatedAt:new Date});await un(s,a);const{listings:o,currentListing:l}=e(),c=o.map(u=>u.id===n?{...u,...r}:u);t({listings:c,currentListing:(l==null?void 0:l.id)===n?{...l,...r}:l}),te.success("Annonce mise à jour !")}catch(s){throw console.error("Error updating listing:",s),te.error("Erreur lors de la mise à jour"),s}},deleteListing:async n=>{try{await Au(Ze(ye,"listings",n));const{listings:r}=e(),s=r.filter(a=>a.id!==n);t({listings:s}),te.success("Annonce supprimée !")}catch(r){throw console.error("Error deleting listing:",r),te.error("Erreur lors de la suppression"),r}},searchListings:async n=>{await e().fetchListings(n,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),C2=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},$O=ud((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async n=>{if(n){t({loading:!0});try{const r=Mt(wt(ye,"favorites"),Vt("userId","==",n),xs(100)),s=await Kt(r),a=[],o=new Set;s.forEach(l=>{const c=l.data(),u={id:l.id,...c,createdAt:C2(c.createdAt),updatedAt:C2(c.updatedAt)};a.push(u),o.add(u.listingId)}),a.sort((l,c)=>c.createdAt.getTime()-l.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(r){console.error("Erreur lors du chargement des favoris:",r),te.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(n,r)=>{var s;if(!(!n||!r))try{if(e().userFavoriteIds.has(r.id)){te.info("Déjà dans vos favoris");return}const a={userId:n,listingId:r.id,listingTitle:r.title,listingPrice:r.price,listingImage:((s=r.images)==null?void 0:s[0])||null,listingCategory:r.category,listingTransactionType:r.transactionType,sellerName:r.sellerName,sellerUniversity:r.sellerUniversity,notes:"",tags:r.tags||[],createdAt:ln(),updatedAt:ln()},l={id:(await Ol(wt(ye,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:c,userFavoriteIds:u}=e(),d=new Set(u);d.add(r.id),t({favorites:[l,...c],userFavoriteIds:d});try{await un(Ze(ye,"listings",r.id),{likes:(r.likes||0)+1})}catch(h){console.error("Erreur lors de la mise à jour du compteur de likes:",h)}te.success("Ajouté aux favoris ❤️")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),te.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(n,r)=>{if(!(!n||!r))try{const s=Mt(wt(ye,"favorites"),Vt("userId","==",n),Vt("listingId","==",r)),a=await Kt(s);if(a.empty){te.info("Pas dans vos favoris");return}const o=a.docs[0];await Au(Ze(ye,"favorites",o.id));const{favorites:l,userFavoriteIds:c}=e(),u=new Set(c);u.delete(r),t({favorites:l.filter(d=>d.listingId!==r),userFavoriteIds:u});try{const d=Ze(ye,"listings",r),h=await Kt(Mt(wt(ye,"listings"),Vt("__name__","==",r)));if(!h.empty){const m=h.docs[0].data().likes||0;await un(d,{likes:Math.max(0,m-1)})}}catch(d){console.error("Erreur lors de la mise à jour du compteur de likes:",d)}te.success("Retiré des favoris")}catch(s){console.error("Erreur lors de la suppression des favoris:",s),te.error("Erreur lors de la suppression des favoris")}},isFavorite:n=>e().userFavoriteIds.has(n),toggleFavorite:async(n,r)=>{const{isFavorite:s,addToFavorites:a,removeFromFavorites:o}=e();s(r.id)?await o(n,r.id):await a(n,r)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),UO=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const{currentUser:s}=Zt(),{isFavorite:a,toggleFavorite:o}=$O(),l=Mn(),c=a(t.id),u=h=>{if(h.preventDefault(),h.stopPropagation(),!s){te.error("Connectez-vous pour ajouter aux favoris"),l("/auth");return}o(s.uid,t)},d=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return i.jsx(F,{variant:"ghost",size:"icon",onClick:u,className:`${d()} ${c?"text-red-500 hover:text-red-600":"text-foreground hover:text-red-500"} ${r}`,"aria-label":c?"Retirer des favoris":"Ajouter aux favoris",children:i.jsx(xr,{className:`w-4 h-4 ${c?"fill-current":""}`})})},zO=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const s=async o=>{o.preventDefault(),o.stopPropagation();const l={title:t.title,text:`Découvrez cette annonce sur StudyMarket: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(l):(await navigator.clipboard.writeText(window.location.href),te.success("Lien copié dans le presse-papiers"))}catch(c){console.error("Error sharing:",c)}},a=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return i.jsx(F,{variant:"ghost",size:"icon",onClick:s,className:`${a()} ${r}`,"aria-label":"Partager",children:i.jsx(Rj,{className:"w-4 h-4"})})};function Ye(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function zr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function gr(t,e){const n=Ye(t);return isNaN(e)?zr(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Zs(t,e){const n=Ye(t);if(isNaN(e))return zr(t,NaN);if(!e)return n;const r=n.getDate(),s=zr(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const a=s.getDate();return r>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const rN=6048e5,Gte=864e5,jp=43200,k2=1440;let Kte={};function hd(){return Kte}function Ii(t,e){var l,c,u,d;const n=hd(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ye(t),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function ql(t){return Ii(t,{weekStartsOn:1})}function BO(t){const e=Ye(t),n=e.getFullYear(),r=zr(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=ql(r),a=zr(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=ql(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Lu(t){const e=Ye(t);return e.setHours(0,0,0,0),e}function Vu(t){const e=Ye(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function pi(t,e){const n=Lu(t),r=Lu(e),s=+n-Vu(n),a=+r-Vu(r);return Math.round((s-a)/Gte)}function Yte(t){const e=BO(t),n=zr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),ql(n)}function Wb(t,e){const n=e*7;return gr(t,n)}function Qte(t,e){return Zs(t,e*12)}function Jte(t){let e;return t.forEach(function(n){const r=Ye(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function Xte(t){let e;return t.forEach(n=>{const r=Ye(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function ag(t,e){const n=Ye(t),r=Ye(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function Zte(t){return zr(t,Date.now())}function Mr(t,e){const n=Lu(t),r=Lu(e);return+n==+r}function sN(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ene(t){if(!sN(t)&&typeof t!="number")return!1;const e=Ye(t);return!isNaN(Number(e))}function Fu(t,e){const n=Ye(t),r=Ye(e),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function tne(t,e,n){const r=Ii(t,n),s=Ii(e,n),a=+r-Vu(r),o=+s-Vu(s);return Math.round((a-o)/rN)}function nne(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function rne(t,e){return+Ye(t)-+Ye(e)}function sne(t){const e=Ye(t);return e.setHours(23,59,59,999),e}function Jx(t){const e=Ye(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function ine(t){const e=Ye(t);return+sne(e)==+Jx(e)}function ane(t,e){const n=Ye(t),r=Ye(e),s=ag(n,r),a=Math.abs(Fu(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);let l=ag(n,r)===-s;ine(Ye(t))&&a===1&&ag(t,r)===1&&(l=!1),o=s*(a-Number(l))}return o===0?0:o}function one(t,e,n){const r=rne(t,e)/1e3;return nne(n==null?void 0:n.roundingMethod)(r)}function Ur(t){const e=Ye(t);return e.setDate(1),e.setHours(0,0,0,0),e}function qO(t){const e=Ye(t),n=zr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function iN(t,e){var l,c,u,d;const n=hd(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ye(t),a=s.getDay(),o=(a<r?-7:0)+6-(a-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function WO(t){return iN(t,{weekStartsOn:1})}const lne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},cne=(t,e,n)=>{let r;const s=lne[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function du(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const une={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},dne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hne={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fne={date:du({formats:une,defaultWidth:"full"}),time:du({formats:dne,defaultWidth:"full"}),dateTime:du({formats:hne,defaultWidth:"full"})},mne={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pne=(t,e,n,r)=>mne[t];function di(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const gne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_ne=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},jne={ordinalNumber:_ne,era:di({values:gne,defaultWidth:"wide"}),quarter:di({values:vne,defaultWidth:"wide",argumentCallback:t=>t-1}),month:di({values:xne,defaultWidth:"wide"}),day:di({values:yne,defaultWidth:"wide"}),dayPeriod:di({values:wne,defaultWidth:"wide",formattingValues:bne,defaultFormattingWidth:"wide"})};function hi(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Sne(l,h=>h.test(o)):Nne(l,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function Nne(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Sne(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function HO(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const Ene=/^(\d+)(th|st|nd|rd)?/i,Cne=/\d+/i,kne={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Tne={any:[/^b/i,/^(a|c)/i]},Ine={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ane={any:[/1/i,/2/i,/3/i,/4/i]},Pne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Rne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Dne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Mne={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},One={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Lne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Vne={ordinalNumber:HO({matchPattern:Ene,parsePattern:Cne,valueCallback:t=>parseInt(t,10)}),era:hi({matchPatterns:kne,defaultMatchWidth:"wide",parsePatterns:Tne,defaultParseWidth:"any"}),quarter:hi({matchPatterns:Ine,defaultMatchWidth:"wide",parsePatterns:Ane,defaultParseWidth:"any",valueCallback:t=>t+1}),month:hi({matchPatterns:Pne,defaultMatchWidth:"wide",parsePatterns:Rne,defaultParseWidth:"any"}),day:hi({matchPatterns:Dne,defaultMatchWidth:"wide",parsePatterns:Mne,defaultParseWidth:"any"}),dayPeriod:hi({matchPatterns:One,defaultMatchWidth:"any",parsePatterns:Lne,defaultParseWidth:"any"})},aN={code:"en-US",formatDistance:cne,formatLong:fne,formatRelative:pne,localize:jne,match:Vne,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Fne(t){const e=Ye(t);return pi(e,qO(e))+1}function GO(t){const e=Ye(t),n=+ql(e)-+Yte(e);return Math.round(n/rN)+1}function KO(t,e){var d,h,m,p;const n=Ye(t),r=n.getFullYear(),s=hd(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=zr(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=Ii(o,e),c=zr(t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=Ii(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function $ne(t,e){var l,c,u,d;const n=hd(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=KO(t,e),a=zr(t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Ii(a,e)}function YO(t,e){const n=Ye(t),r=+Ii(n,e)-+$ne(n,e);return Math.round(r/rN)+1}function It(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ma={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return It(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):It(n+1,2)},d(t,e){return It(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return It(t.getHours()%12||12,e.length)},H(t,e){return It(t.getHours(),e.length)},m(t,e){return It(t.getMinutes(),e.length)},s(t,e){return It(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return It(s,e.length)}},_c={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},T2={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Ma.y(t,e)},Y:function(t,e,n,r){const s=KO(t,r),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return It(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):It(a,e.length)},R:function(t,e){const n=BO(t);return It(n,e.length)},u:function(t,e){const n=t.getFullYear();return It(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return It(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return It(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ma.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return It(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=YO(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):It(s,e.length)},I:function(t,e,n){const r=GO(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):It(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ma.d(t,e)},D:function(t,e,n){const r=Fne(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):It(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return It(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return It(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return It(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=_c.noon:r===0?s=_c.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=_c.evening:r>=12?s=_c.afternoon:r>=4?s=_c.morning:s=_c.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ma.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ma.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):It(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):It(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ma.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ma.s(t,e)},S:function(t,e){return Ma.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return A2(r);case"XXXX":case"XX":return il(r);case"XXXXX":case"XXX":default:return il(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return A2(r);case"xxxx":case"xx":return il(r);case"xxxxx":case"xxx":default:return il(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+I2(r,":");case"OOOO":default:return"GMT"+il(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+I2(r,":");case"zzzz":default:return"GMT"+il(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return It(r,e.length)},T:function(t,e,n){const r=t.getTime();return It(r,e.length)}};function I2(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+It(a,2)}function A2(t,e){return t%60===0?(t>0?"-":"+")+It(Math.abs(t)/60,2):il(t,e)}function il(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=It(Math.trunc(r/60),2),a=It(r%60,2);return n+s+e+a}const P2=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},QO=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Une=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return P2(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",P2(r,e)).replace("{{time}}",QO(s,e))},zne={p:QO,P:Une},Bne=/^D+$/,qne=/^Y+$/,Wne=["D","DD","YY","YYYY"];function Hne(t){return Bne.test(t)}function Gne(t){return qne.test(t)}function Kne(t,e,n){const r=Yne(t,e,n);if(console.warn(r),Wne.includes(t))throw new RangeError(r)}function Yne(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Qne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Jne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Xne=/^'([^]*?)'?$/,Zne=/''/g,ere=/[a-zA-Z]/;function Pn(t,e,n){var d,h,m,p,v,w,b,y;const r=hd(),s=(n==null?void 0:n.locale)??r.locale??aN,a=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((w=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:w.weekStartsOn)??r.weekStartsOn??((y=(b=r.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,l=Ye(t);if(!ene(l))throw new RangeError("Invalid time value");let c=e.match(Jne).map(x=>{const _=x[0];if(_==="p"||_==="P"){const E=zne[_];return E(x,s.formatLong)}return x}).join("").match(Qne).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const _=x[0];if(_==="'")return{isToken:!1,value:tre(x)};if(T2[_])return{isToken:!0,value:x};if(_.match(ere))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(x=>{if(!x.isToken)return x.value;const _=x.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Gne(_)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Hne(_))&&Kne(_,e,String(t));const E=T2[_[0]];return E(l,_,s.localize,u)}).join("")}function tre(t){const e=t.match(Xne);return e?e[1].replace(Zne,"'"):t}function nre(t,e,n){const r=hd(),s=(n==null?void 0:n.locale)??r.locale??aN,a=2520,o=ag(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,u;o>0?(c=Ye(e),u=Ye(t)):(c=Ye(t),u=Ye(e));const d=one(u,c),h=(Vu(u)-Vu(c))/1e3,m=Math.round((d-h)/60);let p;if(m<2)return n!=null&&n.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",0,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):m===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",m,l);if(m<45)return s.formatDistance("xMinutes",m,l);if(m<90)return s.formatDistance("aboutXHours",1,l);if(m<k2){const v=Math.round(m/60);return s.formatDistance("aboutXHours",v,l)}else{if(m<a)return s.formatDistance("xDays",1,l);if(m<jp){const v=Math.round(m/k2);return s.formatDistance("xDays",v,l)}else if(m<jp*2)return p=Math.round(m/jp),s.formatDistance("aboutXMonths",p,l)}if(p=ane(u,c),p<12){const v=Math.round(m/jp);return s.formatDistance("xMonths",v,l)}else{const v=p%12,w=Math.trunc(p/12);return v<3?s.formatDistance("aboutXYears",w,l):v<9?s.formatDistance("overXYears",w,l):s.formatDistance("almostXYears",w+1,l)}}function fd(t,e){return nre(t,Zte(t),e)}function rre(t){const e=Ye(t),n=e.getFullYear(),r=e.getMonth(),s=zr(t,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function sre(t){return Math.trunc(+Ye(t)/1e3)}function ire(t){const e=Ye(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function are(t,e){return tne(ire(t),Ur(t),e)+1}function Hb(t,e){const n=Ye(t),r=Ye(e);return n.getTime()>r.getTime()}function JO(t,e){const n=Ye(t),r=Ye(e);return+n<+r}function oN(t,e){const n=Ye(t),r=Ye(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function ore(t,e){const n=Ye(t),r=Ye(e);return n.getFullYear()===r.getFullYear()}function U0(t,e){return gr(t,-e)}function z0(t,e){const n=Ye(t),r=n.getFullYear(),s=n.getDate(),a=zr(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const o=rre(a);return n.setMonth(e,Math.min(s,o)),n}function R2(t,e){const n=Ye(t);return isNaN(+n)?zr(t,NaN):(n.setFullYear(e),n)}const lre={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},cre=(t,e,n)=>{let r;const s=lre[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},ure={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},dre={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},hre={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fre={date:du({formats:ure,defaultWidth:"full"}),time:du({formats:dre,defaultWidth:"full"}),dateTime:du({formats:hre,defaultWidth:"full"})},mre={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},pre=(t,e,n,r)=>mre[t],gre={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},vre={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},xre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},yre={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},wre={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},bre=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let a;return n===1?a=r&&s.includes(r)?"ère":"er":a="ème",n+a},_re=["MMM","MMMM"],jre={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&_re.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:bre,era:di({values:gre,defaultWidth:"wide"}),quarter:di({values:vre,defaultWidth:"wide",argumentCallback:t=>t-1}),month:di({values:xre,defaultWidth:"wide"}),day:di({values:yre,defaultWidth:"wide"}),dayPeriod:di({values:wre,defaultWidth:"wide"})},Nre=/^(\d+)(ième|ère|ème|er|e)?/i,Sre=/\d+/i,Ere={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},Cre={any:[/^av/i,/^ap/i]},kre={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},Tre={any:[/1/i,/2/i,/3/i,/4/i]},Ire={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},Are={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Pre={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},Rre={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Dre={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},Mre={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},Ore={ordinalNumber:HO({matchPattern:Nre,parsePattern:Sre,valueCallback:t=>parseInt(t)}),era:hi({matchPatterns:Ere,defaultMatchWidth:"wide",parsePatterns:Cre,defaultParseWidth:"any"}),quarter:hi({matchPatterns:kre,defaultMatchWidth:"wide",parsePatterns:Tre,defaultParseWidth:"any",valueCallback:t=>t+1}),month:hi({matchPatterns:Ire,defaultMatchWidth:"wide",parsePatterns:Are,defaultParseWidth:"any"}),day:hi({matchPatterns:Pre,defaultMatchWidth:"wide",parsePatterns:Rre,defaultParseWidth:"any"}),dayPeriod:hi({matchPatterns:Dre,defaultMatchWidth:"any",parsePatterns:Mre,defaultParseWidth:"any"})},sr={code:"fr",formatDistance:cre,formatLong:fre,formatRelative:pre,localize:jre,match:Ore,options:{weekStartsOn:1,firstWeekContainsDate:4}},bf=({listing:t})=>{var h,m,p,v,w,b;const e=(y,x)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const _=x||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:_}).format(y)}catch{return`${y} €`}},n=y=>{switch(y){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-orange-100 text-orange-700 border-orange-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},r=y=>{switch(y){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return y}},s=()=>{switch(t.transactionType){case"donation":return i.jsx(Du,{className:"w-3 h-3"});case"exchange":return i.jsx(va,{className:"w-3 h-3"});default:return null}},a=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},o=y=>{try{let x;if(!y)return"Date inconnue";if(y instanceof Date)x=y;else if(typeof y=="string"||typeof y=="number")x=new Date(y);else if(y&&typeof y.toDate=="function")x=y.toDate();else if(y&&typeof y=="object"&&y.seconds)x=new Date(y.seconds*1e3);else return"Date inconnue";return isNaN(x.getTime())?"Date inconnue":fd(x,{addSuffix:!0,locale:sr})}catch(x){return console.warn("Error formatting date:",x),"Date inconnue"}},l=t.price||0,c=t.currency||"EUR",u=t.condition||"good",d=t.transactionType||"sale";return i.jsxs(Y,{className:"group relative bg-white rounded-xl border border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[i.jsx(be,{to:`/listing/${t.id}`,className:"block",children:i.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100",children:[i.jsx("img",{src:((h=t.images)==null?void 0:h[0])||"/placeholder.jpg",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),i.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[i.jsx(UO,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"}),i.jsx(zO,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"})]}),d!=="sale"&&i.jsxs(Ie,{className:`absolute top-3 left-3 ${a()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[s(),i.jsx("span",{className:"ml-1.5 text-sm",children:d==="donation"?"Don":"Troc"})]}),d==="sale"&&i.jsx(Ie,{className:`absolute top-3 left-3 ${n(u)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:r(u)}),t.environmentalImpact&&i.jsxs(Ie,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[i.jsx(Hs,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO₂"]}),t.images&&t.images.length>1&&i.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),i.jsxs(Q,{className:"p-6 space-y-4",children:[i.jsxs(be,{to:`/listing/${t.id}`,className:"block",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:`text-2xl font-bold ${d==="donation"?"text-green-600":d==="exchange"?"text-purple-600":"text-slate-900"}`,children:e(l,c)}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 bg-gray-50 px-2.5 py-1 rounded-full",children:[i.jsx(Ru,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"font-medium",children:t.views||0})]})]}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),d==="exchange"&&t.exchangeFor&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-purple-50 px-3 py-2 rounded-lg mb-4",children:[i.jsx(va,{className:"w-4 h-4 text-purple-500"}),i.jsxs("span",{children:[i.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[i.jsx(qn,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:((m=t.location)==null?void 0:m.campus)||((p=t.location)!=null&&p.city&&((v=t.location)!=null&&v.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spécifiée")})]}),i.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[i.jsx(dn,{className:"w-4 h-4 text-gray-400"}),i.jsx("span",{className:"whitespace-nowrap",children:o(t.createdAt)})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsxs(Jr,{className:"w-9 h-9 border-2 border-gray-100",children:[i.jsx(ba,{src:t.sellerAvatar}),i.jsx(Pr,{className:"text-sm bg-gray-100 text-gray-600 font-medium",children:((b=(w=t.sellerName)==null?void 0:w[0])==null?void 0:b.toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&i.jsx(Et,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),i.jsx("span",{className:"text-xs text-gray-500 truncate block text-left",children:t.sellerUniversity||"Université non spécifiée"})]})]}),t.aiPriceEstimate&&d==="sale"&&i.jsx(Ie,{className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste ✓"})]})]})]})};var XO={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},D2=Se.createContext&&Se.createContext(XO),Lre=["attr","size","title"];function Vre(t,e){if(t==null)return{};var n=Fre(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pv(){return pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pv.apply(this,arguments)}function M2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M2(Object(n),!0).forEach(function(r){$re(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $re(t,e,n){return e=Ure(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ure(t){var e=zre(t,"string");return typeof e=="symbol"?e:e+""}function zre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZO(t){return t&&t.map((e,n)=>Se.createElement(e.tag,gv({key:n},e.attr),ZO(e.child)))}function Uo(t){return e=>Se.createElement(Bre,pv({attr:gv({},t.attr)},e),ZO(t.child))}function Bre(t){var e=n=>{var{attr:r,size:s,title:a}=t,o=Vre(t,Lre),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Se.createElement("svg",pv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:gv(gv({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&Se.createElement("title",null,a),t.children)};return D2!==void 0?Se.createElement(D2.Consumer,null,n=>e(n)):e(XO)}function qre(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function Wre(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function Hre(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function Gre(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function Kre(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function Yre(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function Qre(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function Jre(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const Xre=()=>{const[t,e]=g.useState(""),n=Mn(),r=s=>{s.preventDefault(),t.trim()&&n(`/listings?search=${encodeURIComponent(t.trim())}`)};return i.jsx("form",{onSubmit:r,className:"w-full max-w-2xl mx-auto",children:i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(An,{className:"absolute left-3 text-muted-foreground w-4 h-4"}),i.jsx(_e,{type:"text",placeholder:"Rechercher des annonces, services, logements...",value:t,onChange:s=>e(s.target.value),className:"pl-10 pr-24 h-12 text-base"}),i.jsx(F,{type:"submit",className:"absolute right-1 h-10 px-4 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:"Rechercher"})]})})},Zre={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/troc.svg"},ese=({className:t})=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:t}),tse=({className:t})=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Give Up",className:t}),nse=({className:t})=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Exchange",className:t}),rse=[{id:"electronics",name:"Électronique",icon:Gre,color:"text-blue-600",description:"Ordinateurs, téléphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:Wre,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:qre,color:"text-blue-600",description:"Meubles, déco, électroménager"},{id:"housing",name:"Logement",icon:Hre,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:Kre,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:Yre,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:Jre,color:"text-green-600",description:"Donnez ce dont vous n'avez plus besoin"},{id:"exchange",name:"Échanges",icon:Qre,color:"text-purple-600",description:"Échangez vos objets contre d'autres"}],sse=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",link:"/create",icon:ese,color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",link:"/create?type=donation",icon:tse,color:"border-2 border-green-500 text-green-50"},{title:"Échanger facilement",description:"Trouvez des échanges équitables",link:"/create?type=exchange",icon:nse,color:"border-2 border-green-500 text-green-50"}],ise=[{title:"Vérification étudiante",description:"Tous nos utilisateurs sont vérifiés avec leur carte étudiante pour garantir une communauté sûre et authentique.",icon:Et},{title:"Impact écologique",description:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental en temps réel.",icon:Hs},{title:"Communauté locale",description:"Connectez-vous avec des étudiants de votre région pour des échanges rapides et des rencontres enrichissantes.",icon:ji},{title:"Sécurité garantie",description:"Système de notation et de modération pour assurer des transactions sûres et transparentes.",icon:SD}],ase=()=>{const{featuredListings:t,fetchFeaturedListings:e}=vm();return g.useEffect(()=>{e()},[e]),i.jsx("div",{className:"w-full min-h-screen bg-gray-50 dark:bg-gray-950 overflow-x-hidden",children:i.jsxs("div",{className:"w-full max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 py-3 sm:py-4 overflow-hidden",children:[i.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 rounded-lg sm:rounded-xl overflow-hidden mb-8",children:i.jsx("div",{className:"w-full py-6 sm:py-8 lg:py-12 px-3 sm:px-6 lg:px-8 overflow-hidden",children:i.jsxs("div",{className:"w-full max-w-4xl mx-auto text-center overflow-hidden",children:[i.jsx("div",{className:"flex items-center justify-center mb-3 sm:mb-4 lg:mb-6",children:i.jsxs(Ie,{className:"bg-green-100 text-green-800 border-green-200 px-2 sm:px-3 lg:px-4 py-1 sm:py-1.5 lg:py-2 text-xs sm:text-sm",children:[i.jsx(Et,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Communauté 100% étudiants vérifiés"}),i.jsx("span",{className:"sm:hidden",children:"Étudiants vérifiés"})]})}),i.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold mb-3 sm:mb-4 lg:mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent px-2",children:"La marketplace des étudiants"}),i.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-muted-foreground mb-4 sm:mb-6 lg:mb-8 max-w-2xl mx-auto px-2",children:"Achetez, vendez, donnez et échangez entre étudiants certifiés de votre région. Sécurisé, écologique et pensé pour la vie étudiante."}),i.jsx("div",{className:"mb-4 sm:mb-6 lg:mb-8 px-2 sm:px-4",children:i.jsx(Xre,{})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 sm:mb-8",children:sse.map((n,r)=>i.jsx(be,{to:n.link,className:"group",children:i.jsx(Y,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:i.jsxs(Q,{className:"p-3 sm:p-4 text-center",children:[i.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 ${n.color} rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-3 group-hover:scale-110 transition-transform`,children:i.jsx(n.icon,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),i.jsx("h3",{className:"font-semibold mb-1 text-sm sm:text-base",children:n.title}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:n.description})]})})},r))}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center px-2",children:[i.jsx(F,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary w-full sm:w-auto text-sm sm:text-base",children:i.jsxs(be,{to:"/listings",children:["Parcourir les annonces",i.jsx($l,{className:"w-4 h-4 ml-2"})]})}),i.jsx(F,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto text-sm sm:text-base",children:i.jsx(be,{to:"/auth",children:"Rejoindre la communauté"})})]})]})})}),i.jsx("section",{className:"py-8 sm:py-10 lg:py-16 px-2 sm:px-4",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center mb-2 sm:mb-3 lg:mb-4",children:"Catégories étudiantes"}),i.jsx("p",{className:"text-center text-muted-foreground mb-6 sm:mb-8 lg:mb-12 max-w-2xl mx-auto text-xs sm:text-sm lg:text-base px-2",children:"Des catégories pensées spécifiquement pour la vie étudiante, avec des filtres adaptés à vos besoins"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:rse.map(n=>{let r;return n.id==="jobs"?r="/jobs":n.id==="housing"?r="/housing":r=`/listings?category=${n.id}`,i.jsx(be,{to:r,className:"group",children:i.jsx(Y,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:i.jsxs(Q,{className:"p-3 sm:p-4 text-center",children:[i.jsx("img",{src:Zre[n.id],alt:n.name,className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 mx-auto mb-2 sm:mb-3"}),i.jsx("h3",{className:"font-semibold text-xs sm:text-sm lg:text-base mb-1",children:n.name}),i.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:n.description})]})})},n.id)})})]})}),t.length>0&&i.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-muted/30",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto mb-6",children:[i.jsx("div",{className:"text-center sm:text-left",children:i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-1 sm:mb-2",children:"Annonces récentes"})}),i.jsx(F,{variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:i.jsxs(be,{to:"/listings",children:["Voir tout",i.jsx($l,{className:"w-4 h-4 ml-2"})]})})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:t.slice(0,6).map(n=>i.jsx(bf,{listing:n},n.id))})]})}),i.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center mb-3 sm:mb-4",children:"Pourquoi StudyMarket ?"}),i.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-12 max-w-2xl mx-auto text-sm sm:text-base px-2",children:"Une plateforme pensée par et pour les étudiants, avec des fonctionnalités uniques pour votre sécurité et votre tranquillité d'esprit"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:ise.map((n,r)=>i.jsx(Y,{className:"border-0 shadow-none",children:i.jsx(Q,{className:"p-4 sm:p-6",children:i.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4",children:[i.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(n.icon,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-primary"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-semibold mb-1 sm:mb-2",children:n.title}),i.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-muted-foreground",children:n.description})]})]})})},r))})]})}),i.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 rounded-lg sm:rounded-xl",children:i.jsx("div",{className:"container mx-auto text-center",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsx(Hs,{className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 text-green-600 mx-auto mb-4 sm:mb-6"}),i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-3 sm:mb-4",children:"Votre impact écologique compte"}),i.jsx("p",{className:"text-sm sm:text-base lg:text-xl text-muted-foreground mb-6 sm:mb-8 px-2",children:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental et découvrez combien de CO₂ vous économisez grâce à vos échanges étudiants."}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"2.5T"}),i.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"CO₂ économisé par la communauté"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"15K"}),i.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Objets donnés cette année"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"8K"}),i.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Étudiants engagés"})]})]}),i.jsx(F,{size:"lg",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white w-full sm:w-auto",children:i.jsx(be,{to:"/impact",className:"cursor-pointer",children:"Découvrir mon impact"})})]})})}),i.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-gradient-to-r from-primary to-secondary rounded-lg sm:rounded-xl",children:i.jsxs("div",{className:"container mx-auto text-center",children:[i.jsx(ji,{className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 text-white mx-auto mb-4 sm:mb-6"}),i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-3 sm:mb-4",children:"Rejoignez la communauté étudiante"}),i.jsx("p",{className:"text-sm sm:text-base lg:text-xl text-white/90 mb-6 sm:mb-8 max-w-2xl mx-auto px-2",children:"Plus de 10 000 étudiants font déjà confiance à StudyMarket pour leurs achats, ventes et échanges. Rejoignez une communauté sûre, vérifiée et solidaire."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[i.jsx(F,{size:"lg",variant:"secondary",asChild:!0,className:"w-full sm:w-auto",children:i.jsxs(be,{to:"/auth",children:[i.jsx(Et,{className:"w-4 h-4 mr-2"}),"Inscription vérifiée"]})}),i.jsx(F,{size:"lg",variant:"outline",className:"border-white text-white bg-transparent hover:bg-white hover:text-primary w-full sm:w-auto",asChild:!0,children:i.jsx(be,{to:"/listings",children:"Commencer à explorer"})})]})]})})]})})};function _f(t,[e,n]){return Math.min(n,Math.max(e,t))}function Xx(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var ose="VisuallyHidden",e3=g.forwardRef((t,e)=>i.jsx(De.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));e3.displayName=ose;var lse=[" ","Enter","ArrowUp","ArrowDown"],cse=[" ","Enter"],xm="Select",[Zx,ey,use]=cm(xm),[md,Kfe]=os(xm,[use,cd]),ty=cd(),[dse,zo]=md(xm),[hse,fse]=md(xm),t3=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:p,form:v}=t,w=ty(e),[b,y]=g.useState(null),[x,_]=g.useState(null),[E,S]=g.useState(!1),D=ac(u),[I=!1,A]=ss({prop:r,defaultProp:s,onChange:a}),[R,N]=ss({prop:o,defaultProp:l,onChange:c}),P=g.useRef(null),T=b?v||!!b.closest("form"):!0,[C,V]=g.useState(new Set),z=Array.from(C).map(H=>H.props.value).join(";");return i.jsx(qj,{...w,children:i.jsxs(dse,{required:p,scope:e,trigger:b,onTriggerChange:y,valueNode:x,onValueNodeChange:_,valueNodeHasChildren:E,onValueNodeHasChildrenChange:S,contentId:es(),value:R,onValueChange:N,open:I,onOpenChange:A,dir:D,triggerPointerDownPosRef:P,disabled:m,children:[i.jsx(Zx.Provider,{scope:e,children:i.jsx(hse,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(H=>{V($=>new Set($).add(H))},[]),onNativeOptionRemove:g.useCallback(H=>{V($=>{const L=new Set($);return L.delete(H),L})},[]),children:n})}),T?i.jsxs(E3,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:R,onChange:H=>N(H.target.value),disabled:m,form:v,children:[R===void 0?i.jsx("option",{value:""}):null,Array.from(C)]},z):null]})})};t3.displayName=xm;var n3="SelectTrigger",r3=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=ty(n),o=zo(n3,n),l=o.disabled||r,c=Xe(e,o.onTriggerChange),u=ey(n),d=g.useRef("touch"),[h,m,p]=C3(w=>{const b=u().filter(_=>!_.disabled),y=b.find(_=>_.value===o.value),x=k3(b,w,y);x!==void 0&&o.onValueChange(x.value)}),v=w=>{l||(o.onOpenChange(!0),p()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return i.jsx(zx,{asChild:!0,...a,children:i.jsx(De.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":S3(o.value)?"":void 0,...s,ref:c,onClick:ge(s.onClick,w=>{w.currentTarget.focus(),d.current!=="mouse"&&v(w)}),onPointerDown:ge(s.onPointerDown,w=>{d.current=w.pointerType;const b=w.target;b.hasPointerCapture(w.pointerId)&&b.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(v(w),w.preventDefault())}),onKeyDown:ge(s.onKeyDown,w=>{const b=h.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&m(w.key),!(b&&w.key===" ")&&lse.includes(w.key)&&(v(),w.preventDefault())})})})});r3.displayName=n3;var s3="SelectValue",i3=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=t,c=zo(s3,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=Xe(e,c.onValueNodeChange);return Dn(()=>{u(d)},[u,d]),i.jsx(De.span,{...l,ref:h,style:{pointerEvents:"none"},children:S3(c.value)?i.jsx(i.Fragment,{children:o}):a})});i3.displayName=s3;var mse="SelectIcon",a3=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(De.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});a3.displayName=mse;var pse="SelectPortal",o3=t=>i.jsx(fm,{asChild:!0,...t});o3.displayName=pse;var Wl="SelectContent",l3=g.forwardRef((t,e)=>{const n=zo(Wl,t.__scopeSelect),[r,s]=g.useState();if(Dn(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?Qu.createPortal(i.jsx(c3,{scope:t.__scopeSelect,children:i.jsx(Zx.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(u3,{...t,ref:e})});l3.displayName=Wl;var Ds=10,[c3,Bo]=md(Wl),gse="SelectContentImpl",u3=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:w,avoidCollisions:b,...y}=t,x=zo(Wl,n),[_,E]=g.useState(null),[S,D]=g.useState(null),I=Xe(e,ce=>E(ce)),[A,R]=g.useState(null),[N,P]=g.useState(null),T=ey(n),[C,V]=g.useState(!1),z=g.useRef(!1);g.useEffect(()=>{if(_)return Wx(_)},[_]),Lx();const H=g.useCallback(ce=>{const[Ue,...J]=T().map(re=>re.ref.current),[pe]=J.slice(-1),G=document.activeElement;for(const re of ce)if(re===G||(re==null||re.scrollIntoView({block:"nearest"}),re===Ue&&S&&(S.scrollTop=0),re===pe&&S&&(S.scrollTop=S.scrollHeight),re==null||re.focus(),document.activeElement!==G))return},[T,S]),$=g.useCallback(()=>H([A,_]),[H,A,_]);g.useEffect(()=>{C&&$()},[C,$]);const{onOpenChange:L,triggerPointerDownPosRef:W}=x;g.useEffect(()=>{if(_){let ce={x:0,y:0};const Ue=pe=>{var G,re;ce={x:Math.abs(Math.round(pe.pageX)-(((G=W.current)==null?void 0:G.x)??0)),y:Math.abs(Math.round(pe.pageY)-(((re=W.current)==null?void 0:re.y)??0))}},J=pe=>{ce.x<=10&&ce.y<=10?pe.preventDefault():_.contains(pe.target)||L(!1),document.removeEventListener("pointermove",Ue),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",Ue),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ue),document.removeEventListener("pointerup",J,{capture:!0})}}},[_,L,W]),g.useEffect(()=>{const ce=()=>L(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[L]);const[U,Z]=C3(ce=>{const Ue=T().filter(G=>!G.disabled),J=Ue.find(G=>G.ref.current===document.activeElement),pe=k3(Ue,ce,J);pe&&setTimeout(()=>pe.ref.current.focus())}),oe=g.useCallback((ce,Ue,J)=>{const pe=!z.current&&!J;(x.value!==void 0&&x.value===Ue||pe)&&(R(ce),pe&&(z.current=!0))},[x.value]),ke=g.useCallback(()=>_==null?void 0:_.focus(),[_]),et=g.useCallback((ce,Ue,J)=>{const pe=!z.current&&!J;(x.value!==void 0&&x.value===Ue||pe)&&P(ce)},[x.value]),ae=r==="popper"?Gb:d3,fe=ae===Gb?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:w,avoidCollisions:b}:{};return i.jsx(c3,{scope:n,content:_,viewport:S,onViewportChange:D,itemRefCallback:oe,selectedItem:A,onItemLeave:ke,itemTextRefCallback:et,focusSelectedItem:$,selectedItemText:N,position:r,isPositioned:C,searchRef:U,children:i.jsx(mm,{as:xa,allowPinchZoom:!0,children:i.jsx(dm,{asChild:!0,trapped:x.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:ge(s,ce=>{var Ue;(Ue=x.trigger)==null||Ue.focus({preventScroll:!0}),ce.preventDefault()}),children:i.jsx(um,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:i.jsx(ae,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:ce=>ce.preventDefault(),...y,...fe,onPlaced:()=>V(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ge(y.onKeyDown,ce=>{const Ue=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!Ue&&ce.key.length===1&&Z(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let pe=T().filter(G=>!G.disabled).map(G=>G.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const G=ce.target,re=pe.indexOf(G);pe=pe.slice(re+1)}setTimeout(()=>H(pe)),ce.preventDefault()}})})})})})})});u3.displayName=gse;var vse="SelectItemAlignedPosition",d3=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=zo(Wl,n),o=Bo(Wl,n),[l,c]=g.useState(null),[u,d]=g.useState(null),h=Xe(e,I=>d(I)),m=ey(n),p=g.useRef(!1),v=g.useRef(!0),{viewport:w,selectedItem:b,selectedItemText:y,focusSelectedItem:x}=o,_=g.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&w&&b&&y){const I=a.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),R=a.valueNode.getBoundingClientRect(),N=y.getBoundingClientRect();if(a.dir!=="rtl"){const G=N.left-A.left,re=R.left-G,ie=I.left-re,Ae=I.width+ie,ze=Math.max(Ae,A.width),We=window.innerWidth-Ds,bt=_f(re,[Ds,Math.max(Ds,We-ze)]);l.style.minWidth=Ae+"px",l.style.left=bt+"px"}else{const G=A.right-N.right,re=window.innerWidth-R.right-G,ie=window.innerWidth-I.right-re,Ae=I.width+ie,ze=Math.max(Ae,A.width),We=window.innerWidth-Ds,bt=_f(re,[Ds,Math.max(Ds,We-ze)]);l.style.minWidth=Ae+"px",l.style.right=bt+"px"}const P=m(),T=window.innerHeight-Ds*2,C=w.scrollHeight,V=window.getComputedStyle(u),z=parseInt(V.borderTopWidth,10),H=parseInt(V.paddingTop,10),$=parseInt(V.borderBottomWidth,10),L=parseInt(V.paddingBottom,10),W=z+H+C+L+$,U=Math.min(b.offsetHeight*5,W),Z=window.getComputedStyle(w),oe=parseInt(Z.paddingTop,10),ke=parseInt(Z.paddingBottom,10),et=I.top+I.height/2-Ds,ae=T-et,fe=b.offsetHeight/2,ce=b.offsetTop+fe,Ue=z+H+ce,J=W-Ue;if(Ue<=et){const G=P.length>0&&b===P[P.length-1].ref.current;l.style.bottom="0px";const re=u.clientHeight-w.offsetTop-w.offsetHeight,ie=Math.max(ae,fe+(G?ke:0)+re+$),Ae=Ue+ie;l.style.height=Ae+"px"}else{const G=P.length>0&&b===P[0].ref.current;l.style.top="0px";const ie=Math.max(et,z+w.offsetTop+(G?oe:0)+fe)+J;l.style.height=ie+"px",w.scrollTop=Ue-et+w.offsetTop}l.style.margin=`${Ds}px 0`,l.style.minHeight=U+"px",l.style.maxHeight=T+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[m,a.trigger,a.valueNode,l,u,w,b,y,a.dir,r]);Dn(()=>_(),[_]);const[E,S]=g.useState();Dn(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const D=g.useCallback(I=>{I&&v.current===!0&&(_(),x==null||x(),v.current=!1)},[_,x]);return i.jsx(yse,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:D,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:i.jsx(De.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});d3.displayName=vse;var xse="SelectPopperPosition",Gb=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Ds,...a}=t,o=ty(n);return i.jsx(Wj,{...o,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Gb.displayName=xse;var[yse,lN]=md(Wl,{}),Kb="SelectViewport",h3=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=Bo(Kb,n),o=lN(Kb,n),l=Xe(e,a.onViewportChange),c=g.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(Zx.Slot,{scope:n,children:i.jsx(De.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ge(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const v=window.innerHeight-Ds*2,w=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),y=Math.max(w,b);if(y<v){const x=y+p,_=Math.min(v,x),E=x-_;h.style.height=_+"px",h.style.bottom==="0px"&&(d.scrollTop=E>0?E:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});h3.displayName=Kb;var f3="SelectGroup",[wse,bse]=md(f3),_se=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=es();return i.jsx(wse,{scope:n,id:s,children:i.jsx(De.div,{role:"group","aria-labelledby":s,...r,ref:e})})});_se.displayName=f3;var m3="SelectLabel",p3=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=bse(m3,n);return i.jsx(De.div,{id:s.id,...r,ref:e})});p3.displayName=m3;var vv="SelectItem",[jse,g3]=md(vv),v3=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=t,l=zo(vv,n),c=Bo(vv,n),u=l.value===r,[d,h]=g.useState(a??""),[m,p]=g.useState(!1),v=Xe(e,x=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,x,r,s)}),w=es(),b=g.useRef("touch"),y=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(jse,{scope:n,value:r,disabled:s,textId:w,isSelected:u,onItemTextChange:g.useCallback(x=>{h(_=>_||((x==null?void 0:x.textContent)??"").trim())},[]),children:i.jsx(Zx.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:i.jsx(De.div,{role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:v,onFocus:ge(o.onFocus,()=>p(!0)),onBlur:ge(o.onBlur,()=>p(!1)),onClick:ge(o.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:ge(o.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:ge(o.onPointerDown,x=>{b.current=x.pointerType}),onPointerMove:ge(o.onPointerMove,x=>{var _;b.current=x.pointerType,s?(_=c.onItemLeave)==null||_.call(c):b.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(o.onPointerLeave,x=>{var _;x.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:ge(o.onKeyDown,x=>{var E;((E=c.searchRef)==null?void 0:E.current)!==""&&x.key===" "||(cse.includes(x.key)&&y(),x.key===" "&&x.preventDefault())})})})})});v3.displayName=vv;var ah="SelectItemText",x3=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,o=zo(ah,n),l=Bo(ah,n),c=g3(ah,n),u=fse(ah,n),[d,h]=g.useState(null),m=Xe(e,y=>h(y),c.onItemTextChange,y=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,y,c.value,c.disabled)}),p=d==null?void 0:d.textContent,v=g.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:w,onNativeOptionRemove:b}=u;return Dn(()=>(w(v),()=>b(v)),[w,b,v]),i.jsxs(i.Fragment,{children:[i.jsx(De.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Qu.createPortal(a.children,o.valueNode):null]})});x3.displayName=ah;var y3="SelectItemIndicator",w3=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return g3(y3,n).isSelected?i.jsx(De.span,{"aria-hidden":!0,...r,ref:e}):null});w3.displayName=y3;var Yb="SelectScrollUpButton",b3=g.forwardRef((t,e)=>{const n=Bo(Yb,t.__scopeSelect),r=lN(Yb,t.__scopeSelect),[s,a]=g.useState(!1),o=Xe(e,r.onScrollButtonChange);return Dn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(j3,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});b3.displayName=Yb;var Qb="SelectScrollDownButton",_3=g.forwardRef((t,e)=>{const n=Bo(Qb,t.__scopeSelect),r=lN(Qb,t.__scopeSelect),[s,a]=g.useState(!1),o=Xe(e,r.onScrollButtonChange);return Dn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(j3,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});_3.displayName=Qb;var j3=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=Bo("SelectScrollButton",n),o=g.useRef(null),l=ey(n),c=g.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),Dn(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(De.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ge(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ge(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ge(s.onPointerLeave,()=>{c()})})}),Nse="SelectSeparator",N3=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(De.div,{"aria-hidden":!0,...r,ref:e})});N3.displayName=Nse;var Jb="SelectArrow",Sse=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ty(n),a=zo(Jb,n),o=Bo(Jb,n);return a.open&&o.position==="popper"?i.jsx(Hj,{...s,...r,ref:e}):null});Sse.displayName=Jb;function S3(t){return t===""||t===void 0}var E3=g.forwardRef((t,e)=>{const{value:n,...r}=t,s=g.useRef(null),a=Xe(e,s),o=Xx(n);return g.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&d){const h=new Event("change",{bubbles:!0});d.call(l,n),l.dispatchEvent(h)}},[o,n]),i.jsx(e3,{asChild:!0,children:i.jsx("select",{...r,ref:a,defaultValue:n})})});E3.displayName="BubbleSelect";function C3(t){const e=jn(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function k3(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=Ese(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Ese(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Cse=t3,T3=r3,kse=i3,Tse=a3,Ise=o3,I3=l3,Ase=h3,A3=p3,P3=v3,Pse=x3,Rse=w3,R3=b3,D3=_3,M3=N3;const mt=Cse,pt=kse,ct=g.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(T3,{ref:r,className:Le("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(Tse,{asChild:!0,children:i.jsx(Bee,{className:"h-4 w-4 opacity-50"})})]}));ct.displayName=T3.displayName;const O3=g.forwardRef(({className:t,...e},n)=>i.jsx(R3,{ref:n,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Qee,{})}));O3.displayName=R3.displayName;const L3=g.forwardRef(({className:t,...e},n)=>i.jsx(D3,{ref:n,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(jO,{})}));L3.displayName=D3.displayName;const ut=g.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>i.jsx(Ise,{children:i.jsxs(I3,{ref:s,className:Le("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(O3,{}),i.jsx(Ase,{className:Le("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(L3,{})]})}));ut.displayName=I3.displayName;const Dse=g.forwardRef(({className:t,...e},n)=>i.jsx(A3,{ref:n,className:Le("px-2 py-1.5 text-sm font-semibold",t),...e}));Dse.displayName=A3.displayName;const de=g.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(P3,{ref:r,className:Le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Rse,{children:i.jsx(tN,{className:"h-4 w-4"})})}),i.jsx(Pse,{children:e})]}));de.displayName=P3.displayName;const Mse=g.forwardRef(({className:t,...e},n)=>i.jsx(M3,{ref:n,className:Le("-mx-1 my-1 h-px bg-muted",t),...e}));Mse.displayName=M3.displayName;var Ose="Separator",O2="horizontal",Lse=["horizontal","vertical"],V3=g.forwardRef((t,e)=>{const{decorative:n,orientation:r=O2,...s}=t,a=Vse(r)?r:O2,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(De.div,{"data-orientation":a,...l,...s,ref:e})});V3.displayName=Ose;function Vse(t){return Lse.includes(t)}var F3=V3;const ms=g.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>i.jsx(F3,{ref:s,decorative:n,orientation:e,className:Le("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));ms.displayName=F3.displayName;const B0=[{value:"all",label:"Toutes catégories",icon:null},{value:"electronics",label:"Électronique",icon:ic},{value:"vehicles",label:"Véhicules",icon:TD},{value:"real-estate",label:"Immobilier",icon:ui},{value:"fashion",label:"Mode",icon:Dj},{value:"gaming",label:"Jeux & Jouets",icon:sQ},{value:"baby",label:"Bébé & Enfant",icon:HY},{value:"business",label:"Équipement Pro",icon:kh}],Fse=[{value:"new",label:"Neuf"},{value:"like-new",label:"Comme neuf"},{value:"good",label:"Bon état"},{value:"fair",label:"État correct"},{value:"poor",label:"Mauvais état"}],$se=[{value:"relevance",label:"Pertinence"},{value:"date",label:"Plus récent"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix décroissant"}],Use=()=>{var y;const[t,e]=x1(),{listings:n,loading:r,hasMore:s,fetchListings:a,searchListings:o}=vm(),[l,c]=g.useState({query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"}),[u,d]=g.useState("grid"),[h,m]=g.useState(!1);g.useEffect(()=>{const x={query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"};c(x),o(x)},[t,o]);const p=()=>{const x={...l};o(x);const _=new URLSearchParams;x.query&&_.set("q",x.query),x.category&&_.set("category",x.category),e(_)},v=(x,_)=>{const E={...l,[x]:_};c(E)},w=()=>{a(l,!1)},b=()=>{const x={query:"",sortBy:"date"};c(x),o(x),e({})};return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Toutes les annonces"}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(An,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(_e,{type:"text",placeholder:"Rechercher des articles...",value:l.query||"",onChange:x=>v("query",x.target.value),onKeyPress:x=>x.key==="Enter"&&p(),className:"pl-10"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(F,{onClick:p,className:"whitespace-nowrap",children:[i.jsx(An,{className:"w-4 h-4 mr-2"}),"Rechercher"]}),i.jsxs(F,{variant:"outline",onClick:()=>m(!h),className:"lg:hidden",children:[i.jsx(Px,{className:"w-4 h-4 mr-2"}),"Filtres"]})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:B0.slice(1,6).map(x=>{const _=x.icon;return i.jsxs(F,{variant:l.category===x.value?"default":"outline",size:"sm",onClick:()=>v("category",l.category===x.value?"":x.value),className:"flex items-center gap-2",children:[_&&i.jsx(_,{className:"w-4 h-4"}),x.label]},x.value)})})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[i.jsx("aside",{className:`lg:w-80 space-y-6 ${h?"block":"hidden lg:block"}`,children:i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Filtres"}),i.jsx(F,{variant:"ghost",size:"sm",onClick:b,children:"Effacer"})]})}),i.jsxs(Q,{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Catégorie"}),i.jsxs(mt,{value:l.category||"all",onValueChange:x=>v("category",x==="all"?"":x),children:[i.jsx(ct,{children:i.jsx(pt,{})}),i.jsx(ut,{children:B0.map(x=>{const _=x.icon;return i.jsx(de,{value:x.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[_&&i.jsx(_,{className:"w-4 h-4"}),x.label]})},x.value)})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Prix"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(_e,{type:"number",placeholder:"Min",value:l.minPrice||"",onChange:x=>v("minPrice",x.target.value?parseInt(x.target.value):void 0)}),i.jsx(_e,{type:"number",placeholder:"Max",value:l.maxPrice||"",onChange:x=>v("maxPrice",x.target.value?parseInt(x.target.value):void 0)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"État"}),i.jsx("div",{className:"space-y-2",children:Fse.map(x=>{var _;return i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:((_=l.condition)==null?void 0:_.includes(x.value))||!1,onChange:E=>{const S=l.condition||[],D=E.target.checked?[...S,x.value]:S.filter(I=>I!==x.value);v("condition",D.length>0?D:void 0)},className:"rounded border-border"}),i.jsx("span",{className:"text-sm",children:x.label})]},x.value)})})]}),i.jsx(F,{onClick:p,className:"w-full",children:"Appliquer les filtres"})]})]})}),i.jsxs("main",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("span",{className:"text-muted-foreground",children:[n.length," résultat(s)"]}),(l.query||l.category||l.minPrice||l.maxPrice)&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtres actifs:"}),l.query&&i.jsxs(Ie,{variant:"secondary",children:['"',l.query,'"']}),l.category&&i.jsx(Ie,{variant:"secondary",children:(y=B0.find(x=>x.value===l.category))==null?void 0:y.label})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(mt,{value:l.sortBy||"date",onValueChange:x=>v("sortBy",x),children:[i.jsx(ct,{className:"w-40",children:i.jsx(pt,{})}),i.jsx(ut,{children:$se.map(x=>i.jsx(de,{value:x.value,children:x.label},x.value))})]}),i.jsx(ms,{orientation:"vertical",className:"h-6"}),i.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[i.jsx(F,{variant:u==="grid"?"default":"ghost",size:"icon",onClick:()=>d("grid"),className:"rounded-none w-15 h-15",title:"Vue en grille",children:i.jsx(DD,{className:"w-4 h-4"})}),i.jsx(F,{variant:u==="list"?"default":"ghost",size:"icon",onClick:()=>d("list"),className:"rounded-none w-15 h-15",title:"Vue en liste",children:i.jsx(LD,{className:"w-4 h-4"})})]})]})]}),r&&n.length===0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((x,_)=>i.jsxs(Y,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(Q,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},_))}):n.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`grid gap-8 justify-items-center ${u==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:n.map(x=>i.jsx(bf,{listing:x},x.id))}),s&&i.jsx("div",{className:"text-center mt-8",children:i.jsx(F,{onClick:w,disabled:r,variant:"outline",size:"lg",children:r?"Chargement...":"Charger plus"})})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun résultat trouvé"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos critères de recherche"}),i.jsx(F,{onClick:b,variant:"outline",children:"Effacer les filtres"})]})]})]})]})};var cN="Dialog",[$3,Yfe]=os(cN),[zse,ri]=$3(cN),U3=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=g.useRef(null),c=g.useRef(null),[u=!1,d]=ss({prop:r,defaultProp:s,onChange:a});return i.jsx(zse,{scope:e,triggerRef:l,contentRef:c,contentId:es(),titleId:es(),descriptionId:es(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};U3.displayName=cN;var z3="DialogTrigger",B3=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ri(z3,n),a=Xe(e,s.triggerRef);return i.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":hN(s.open),...r,ref:a,onClick:ge(t.onClick,s.onOpenToggle)})});B3.displayName=z3;var uN="DialogPortal",[Bse,q3]=$3(uN,{forceMount:void 0}),W3=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=ri(uN,e);return i.jsx(Bse,{scope:e,forceMount:n,children:g.Children.map(r,o=>i.jsx(Yn,{present:n||a.open,children:i.jsx(fm,{asChild:!0,container:s,children:o})}))})};W3.displayName=uN;var xv="DialogOverlay",H3=g.forwardRef((t,e)=>{const n=q3(xv,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=ri(xv,t.__scopeDialog);return a.modal?i.jsx(Yn,{present:r||a.open,children:i.jsx(qse,{...s,ref:e})}):null});H3.displayName=xv;var qse=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ri(xv,n);return i.jsx(mm,{as:xa,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(De.div,{"data-state":hN(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Hl="DialogContent",G3=g.forwardRef((t,e)=>{const n=q3(Hl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=ri(Hl,t.__scopeDialog);return i.jsx(Yn,{present:r||a.open,children:a.modal?i.jsx(Wse,{...s,ref:e}):i.jsx(Hse,{...s,ref:e})})});G3.displayName=Hl;var Wse=g.forwardRef((t,e)=>{const n=ri(Hl,t.__scopeDialog),r=g.useRef(null),s=Xe(e,n.contentRef,r);return g.useEffect(()=>{const a=r.current;if(a)return Wx(a)},[]),i.jsx(K3,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ge(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:ge(t.onFocusOutside,a=>a.preventDefault())})}),Hse=g.forwardRef((t,e)=>{const n=ri(Hl,t.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return i.jsx(K3,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),K3=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=ri(Hl,n),c=g.useRef(null),u=Xe(e,c);return Lx(),i.jsxs(i.Fragment,{children:[i.jsx(dm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(um,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":hN(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Gse,{titleId:l.titleId}),i.jsx(Yse,{contentRef:c,descriptionId:l.descriptionId})]})]})}),dN="DialogTitle",Y3=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ri(dN,n);return i.jsx(De.h2,{id:s.titleId,...r,ref:e})});Y3.displayName=dN;var Q3="DialogDescription",J3=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ri(Q3,n);return i.jsx(De.p,{id:s.descriptionId,...r,ref:e})});J3.displayName=Q3;var X3="DialogClose",Z3=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ri(X3,n);return i.jsx(De.button,{type:"button",...r,ref:e,onClick:ge(t.onClick,()=>s.onOpenChange(!1))})});Z3.displayName=X3;function hN(t){return t?"open":"closed"}var eL="DialogTitleWarning",[Qfe,tL]=rJ(eL,{contentName:Hl,titleName:dN,docsSlug:"dialog"}),Gse=({titleId:t})=>{const e=tL(eL),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Kse="DialogDescriptionWarning",Yse=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tL(Kse).contentName}}.`;return g.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Qse=U3,Jse=B3,Xse=W3,nL=H3,rL=G3,sL=Y3,iL=J3,Zse=Z3;const aa=Qse,hu=Jse,eie=Xse,aL=g.forwardRef(({className:t,...e},n)=>i.jsx(nL,{ref:n,className:Le("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));aL.displayName=nL.displayName;const Ni=g.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(eie,{children:[i.jsx(aL,{}),i.jsxs(rL,{ref:r,className:Le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(Zse,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Xee,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ni.displayName=rL.displayName;const oa=({className:t,...e})=>i.jsx("div",{className:Le("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});oa.displayName="DialogHeader";const og=({className:t,...e})=>i.jsx("div",{className:Le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});og.displayName="DialogFooter";const Si=g.forwardRef(({className:t,...e},n)=>i.jsx(sL,{ref:n,className:Le("text-lg font-semibold leading-none tracking-tight",t),...e}));Si.displayName=sL.displayName;const fu=g.forwardRef(({className:t,...e},n)=>i.jsx(iL,{ref:n,className:Le("text-sm text-muted-foreground",t),...e}));fu.displayName=iL.displayName;const _s=g.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:Le("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));_s.displayName="Textarea";var tie="Label",oL=g.forwardRef((t,e)=>i.jsx(De.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));oL.displayName=tie;var lL=oL;const nie=Ox("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),he=g.forwardRef(({className:t,...e},n)=>i.jsx(lL,{ref:n,className:Le(nie(),t),...e}));he.displayName=lL.displayName;const rie=Ox("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),kt=g.forwardRef(({className:t,variant:e,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:Le(rie({variant:e}),t),...n}));kt.displayName="Alert";const sie=g.forwardRef(({className:t,...e},n)=>i.jsx("h5",{ref:n,className:Le("mb-1 font-medium leading-none tracking-tight",t),...e}));sie.displayName="AlertTitle";const Tt=g.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Le("text-sm [&_p]:leading-relaxed",t),...e}));Tt.displayName="AlertDescription";var He=function(){return He=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},He.apply(this,arguments)};function iie(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function cL(t,e,n){for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function ym(t){return t.mode==="multiple"}function wm(t){return t.mode==="range"}function ny(t){return t.mode==="single"}var aie={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function oie(t,e){return Pn(t,"LLLL y",e)}function lie(t,e){return Pn(t,"d",e)}function cie(t,e){return Pn(t,"LLLL",e)}function uie(t){return"".concat(t)}function die(t,e){return Pn(t,"cccccc",e)}function hie(t,e){return Pn(t,"yyyy",e)}var fie=Object.freeze({__proto__:null,formatCaption:oie,formatDay:lie,formatMonthCaption:cie,formatWeekNumber:uie,formatWeekdayName:die,formatYearCaption:hie}),mie=function(t,e,n){return Pn(t,"do MMMM (EEEE)",n)},pie=function(){return"Month: "},gie=function(){return"Go to next month"},vie=function(){return"Go to previous month"},xie=function(t,e){return Pn(t,"cccc",e)},yie=function(t){return"Week n. ".concat(t)},wie=function(){return"Year: "},bie=Object.freeze({__proto__:null,labelDay:mie,labelMonthDropdown:pie,labelNext:gie,labelPrevious:vie,labelWeekNumber:yie,labelWeekday:xie,labelYearDropdown:wie});function _ie(){var t="buttons",e=aie,n=aN,r={},s={},a=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:fie,labels:bie,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:a,styles:o,today:l,mode:"default"}}function jie(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,s=t.toMonth,a=t.fromDate,o=t.toDate;return r?a=Ur(r):e&&(a=new Date(e,0,1)),s?o=Jx(s):n&&(o=new Date(n,11,31)),{fromDate:a?Lu(a):void 0,toDate:o?Lu(o):void 0}}var uL=g.createContext(void 0);function Nie(t){var e,n=t.initialProps,r=_ie(),s=jie(n),a=s.fromDate,o=s.toDate,l=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var c;(ny(n)||ym(n)||wm(n))&&(c=n.onSelect);var u=He(He(He({},r),n),{captionLayout:l,classNames:He(He({},r.classNames),n.classNames),components:He({},n.components),formatters:He(He({},r.formatters),n.formatters),fromDate:a,labels:He(He({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:He(He({},r.modifiers),n.modifiers),modifiersClassNames:He(He({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:He(He({},r.styles),n.styles),toDate:o});return i.jsx(uL.Provider,{value:u,children:t.children})}function Bt(){var t=g.useContext(uL);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function dL(t){var e=Bt(),n=e.locale,r=e.classNames,s=e.styles,a=e.formatters.formatCaption;return i.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function Sie(t){return i.jsx("svg",He({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function hL(t){var e,n,r=t.onChange,s=t.value,a=t.children,o=t.caption,l=t.className,c=t.style,u=Bt(),d=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:Sie;return i.jsxs("div",{className:l,style:c,children:[i.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),i.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:r,children:a}),i.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Eie(t){var e,n=Bt(),r=n.fromDate,s=n.toDate,a=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});var h=[];if(ore(r,s))for(var m=Ur(r),p=r.getMonth();p<=s.getMonth();p++)h.push(z0(m,p));else for(var m=Ur(new Date),p=0;p<=11;p++)h.push(z0(m,p));var v=function(b){var y=Number(b.target.value),x=z0(Ur(t.displayMonth),y);t.onChange(x)},w=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:hL;return i.jsx(w,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:v,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:h.map(function(b){return i.jsx("option",{value:b.getMonth(),children:l(b,{locale:o})},b.getMonth())})})}function Cie(t){var e,n=t.displayMonth,r=Bt(),s=r.fromDate,a=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,h=r.labels.labelYearDropdown,m=[];if(!s)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});for(var p=s.getFullYear(),v=a.getFullYear(),w=p;w<=v;w++)m.push(R2(qO(new Date),w));var b=function(x){var _=R2(Ur(n),Number(x.target.value));t.onChange(_)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:hL;return i.jsx(y,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:n.getFullYear(),caption:d(n,{locale:o}),children:m.map(function(x){return i.jsx("option",{value:x.getFullYear(),children:d(x,{locale:o})},x.getFullYear())})})}function kie(t,e){var n=g.useState(t),r=n[0],s=n[1],a=e===void 0?r:e;return[a,s]}function Tie(t){var e=t.month,n=t.defaultMonth,r=t.today,s=e||n||r||new Date,a=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(a&&Fu(a,s)<0){var u=-1*(c-1);s=Zs(a,u)}return o&&Fu(s,o)<0&&(s=o),Ur(s)}function Iie(){var t=Bt(),e=Tie(t),n=kie(e,t.month),r=n[0],s=n[1],a=function(o){var l;if(!t.disableNavigation){var c=Ur(o);s(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[r,a]}function Aie(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,s=Ur(t),a=Ur(Zs(s,r)),o=Fu(a,s),l=[],c=0;c<o;c++){var u=Zs(s,c);l.push(u)}return n&&(l=l.reverse()),l}function Pie(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,o=r?a:1,l=Ur(t);if(!n)return Zs(l,o);var c=Fu(n,t);if(!(c<a))return Zs(l,o)}}function Rie(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,o=r?a:1,l=Ur(t);if(!n)return Zs(l,-o);var c=Fu(l,n);if(!(c<=0))return Zs(l,-o)}}var fL=g.createContext(void 0);function Die(t){var e=Bt(),n=Iie(),r=n[0],s=n[1],a=Aie(r,e),o=Pie(r,e),l=Rie(r,e),c=function(h){return a.some(function(m){return oN(h,m)})},u=function(h,m){c(h)||(m&&JO(h,m)?s(Zs(h,1+e.numberOfMonths*-1)):s(h))},d={currentMonth:r,displayMonths:a,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return i.jsx(fL.Provider,{value:d,children:t.children})}function bm(){var t=g.useContext(fL);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function L2(t){var e,n=Bt(),r=n.classNames,s=n.styles,a=n.components,o=bm().goToMonth,l=function(d){o(Zs(d,t.displayIndex?-t.displayIndex:0))},c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:dL,u=i.jsx(c,{id:t.id,displayMonth:t.displayMonth});return i.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[i.jsx("div",{className:r.vhidden,children:u}),i.jsx(Eie,{onChange:l,displayMonth:t.displayMonth}),i.jsx(Cie,{onChange:l,displayMonth:t.displayMonth})]})}function Mie(t){return i.jsx("svg",He({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Oie(t){return i.jsx("svg",He({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var yv=g.forwardRef(function(t,e){var n=Bt(),r=n.classNames,s=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var o=a.join(" "),l=He(He({},s.button_reset),s.button);return t.style&&Object.assign(l,t.style),i.jsx("button",He({},t,{ref:e,type:"button",className:o,style:l}))});function Lie(t){var e,n,r=Bt(),s=r.dir,a=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,h=r.components;if(!t.nextMonth&&!t.previousMonth)return i.jsx(i.Fragment,{});var m=u(t.previousMonth,{locale:a}),p=[o.nav_button,o.nav_button_previous].join(" "),v=d(t.nextMonth,{locale:a}),w=[o.nav_button,o.nav_button_next].join(" "),b=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:Oie,y=(n=h==null?void 0:h.IconLeft)!==null&&n!==void 0?n:Mie;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&i.jsx(yv,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?i.jsx(b,{className:o.nav_icon,style:l.nav_icon}):i.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&i.jsx(yv,{name:"next-month","aria-label":v,className:w,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?i.jsx(y,{className:o.nav_icon,style:l.nav_icon}):i.jsx(b,{className:o.nav_icon,style:l.nav_icon})})]})}function V2(t){var e=Bt().numberOfMonths,n=bm(),r=n.previousMonth,s=n.nextMonth,a=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(v){return oN(t.displayMonth,v)}),c=l===0,u=l===o.length-1,d=e>1&&(c||!u),h=e>1&&(u||!c),m=function(){r&&a(r)},p=function(){s&&a(s)};return i.jsx(Lie,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:h,nextMonth:s,previousMonth:r,onPreviousClick:m,onNextClick:p})}function Vie(t){var e,n=Bt(),r=n.classNames,s=n.disableNavigation,a=n.styles,o=n.captionLayout,l=n.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:dL,u;return s?u=i.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=i.jsx(L2,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=i.jsxs(i.Fragment,{children:[i.jsx(L2,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),i.jsx(V2,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=i.jsxs(i.Fragment,{children:[i.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),i.jsx(V2,{displayMonth:t.displayMonth,id:t.id})]}),i.jsx("div",{className:r.caption,style:a.caption,children:u})}function Fie(t){var e=Bt(),n=e.footer,r=e.styles,s=e.classNames.tfoot;return n?i.jsx("tfoot",{className:s,style:r.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:n})})}):i.jsx(i.Fragment,{})}function $ie(t,e,n){for(var r=n?ql(new Date):Ii(new Date,{locale:t,weekStartsOn:e}),s=[],a=0;a<7;a++){var o=gr(r,a);s.push(o)}return s}function Uie(){var t=Bt(),e=t.classNames,n=t.styles,r=t.showWeekNumber,s=t.locale,a=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=$ie(s,a,o);return i.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&i.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(d,h){return i.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":c(d,{locale:s}),children:l(d,{locale:s})},h)})]})}function zie(){var t,e=Bt(),n=e.classNames,r=e.styles,s=e.components,a=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:Uie;return i.jsx("thead",{style:r.head,className:n.head,children:i.jsx(a,{})})}function Bie(t){var e=Bt(),n=e.locale,r=e.formatters.formatDay;return i.jsx(i.Fragment,{children:r(t.date,{locale:n})})}var fN=g.createContext(void 0);function qie(t){if(!ym(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return i.jsx(fN.Provider,{value:e,children:t.children})}return i.jsx(Wie,{initialProps:t.initialProps,children:t.children})}function Wie(t){var e=t.initialProps,n=t.children,r=e.selected,s=e.min,a=e.max,o=function(u,d,h){var m,p;(m=e.onDayClick)===null||m===void 0||m.call(e,u,d,h);var v=!!(d.selected&&s&&(r==null?void 0:r.length)===s);if(!v){var w=!!(!d.selected&&a&&(r==null?void 0:r.length)===a);if(!w){var b=r?cL([],r):[];if(d.selected){var y=b.findIndex(function(x){return Mr(u,x)});b.splice(y,1)}else b.push(u);(p=e.onSelect)===null||p===void 0||p.call(e,b,u,d,h)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=a&&r.length>a-1,h=r.some(function(m){return Mr(m,u)});return!!(d&&!h)});var c={selected:r,onDayClick:o,modifiers:l};return i.jsx(fN.Provider,{value:c,children:n})}function mN(){var t=g.useContext(fN);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Hie(t,e){var n=e||{},r=n.from,s=n.to;return r&&s?Mr(s,t)&&Mr(r,t)?void 0:Mr(s,t)?{from:s,to:void 0}:Mr(r,t)?void 0:Hb(r,t)?{from:t,to:s}:{from:r,to:t}:s?Hb(t,s)?{from:s,to:t}:{from:t,to:s}:r?JO(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var pN=g.createContext(void 0);function Gie(t){if(!wm(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(pN.Provider,{value:e,children:t.children})}return i.jsx(Kie,{initialProps:t.initialProps,children:t.children})}function Kie(t){var e=t.initialProps,n=t.children,r=e.selected,s=r||{},a=s.from,o=s.to,l=e.min,c=e.max,u=function(p,v,w){var b,y;(b=e.onDayClick)===null||b===void 0||b.call(e,p,v,w);var x=Hie(p,r);(y=e.onSelect)===null||y===void 0||y.call(e,x,p,v,w)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],o?(d.range_end=[o],Mr(a,o)||(d.range_middle=[{after:a,before:o}])):d.range_end=[a]):o&&(d.range_start=[o],d.range_end=[o]),l&&(a&&!o&&d.disabled.push({after:U0(a,l-1),before:gr(a,l-1)}),a&&o&&d.disabled.push({after:a,before:gr(a,l-1)}),!a&&o&&d.disabled.push({after:U0(o,l-1),before:gr(o,l-1)})),c){if(a&&!o&&(d.disabled.push({before:gr(a,-c+1)}),d.disabled.push({after:gr(a,c-1)})),a&&o){var h=pi(o,a)+1,m=c-h;d.disabled.push({before:U0(a,m)}),d.disabled.push({after:gr(o,m)})}!a&&o&&(d.disabled.push({before:gr(o,-c+1)}),d.disabled.push({after:gr(o,c-1)}))}return i.jsx(pN.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function gN(){var t=g.useContext(pN);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function lg(t){return Array.isArray(t)?cL([],t):t!==void 0?[t]:[]}function Yie(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],s=n[1];e[r]=lg(s)}),e}var ei;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ei||(ei={}));var Qie=ei.Selected,$i=ei.Disabled,Jie=ei.Hidden,Xie=ei.Today,q0=ei.RangeEnd,W0=ei.RangeMiddle,H0=ei.RangeStart,Zie=ei.Outside;function eae(t,e,n){var r,s=(r={},r[Qie]=lg(t.selected),r[$i]=lg(t.disabled),r[Jie]=lg(t.hidden),r[Xie]=[t.today],r[q0]=[],r[W0]=[],r[H0]=[],r[Zie]=[],r);return t.fromDate&&s[$i].push({before:t.fromDate}),t.toDate&&s[$i].push({after:t.toDate}),ym(t)?s[$i]=s[$i].concat(e.modifiers[$i]):wm(t)&&(s[$i]=s[$i].concat(n.modifiers[$i]),s[H0]=n.modifiers[H0],s[W0]=n.modifiers[W0],s[q0]=n.modifiers[q0]),s}var mL=g.createContext(void 0);function tae(t){var e=Bt(),n=mN(),r=gN(),s=eae(e,n,r),a=Yie(e.modifiers),o=He(He({},s),a);return i.jsx(mL.Provider,{value:o,children:t.children})}function pL(){var t=g.useContext(mL);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function nae(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function rae(t){return!!(t&&typeof t=="object"&&"from"in t)}function sae(t){return!!(t&&typeof t=="object"&&"after"in t)}function iae(t){return!!(t&&typeof t=="object"&&"before"in t)}function aae(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function oae(t,e){var n,r=e.from,s=e.to;if(r&&s){var a=pi(s,r)<0;a&&(n=[s,r],r=n[0],s=n[1]);var o=pi(t,r)>=0&&pi(s,t)>=0;return o}return s?Mr(s,t):r?Mr(r,t):!1}function lae(t){return sN(t)}function cae(t){return Array.isArray(t)&&t.every(sN)}function uae(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(lae(n))return Mr(t,n);if(cae(n))return n.includes(t);if(rae(n))return oae(t,n);if(aae(n))return n.dayOfWeek.includes(t.getDay());if(nae(n)){var r=pi(n.before,t),s=pi(n.after,t),a=r>0,o=s<0,l=Hb(n.before,n.after);return l?o&&a:a||o}return sae(n)?pi(t,n.after)>0:iae(n)?pi(n.before,t)>0:typeof n=="function"?n(t):!1})}function vN(t,e,n){var r=Object.keys(e).reduce(function(a,o){var l=e[o];return uae(t,l)&&a.push(o),a},[]),s={};return r.forEach(function(a){return s[a]=!0}),n&&!oN(t,n)&&(s.outside=!0),s}function dae(t,e){for(var n=Ur(t[0]),r=Jx(t[t.length-1]),s,a,o=n;o<=r;){var l=vN(o,e),c=!l.disabled&&!l.hidden;if(!c){o=gr(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),s||(s=o),o=gr(o,1)}return a||s}var hae=365;function gL(t,e){var n=e.moveBy,r=e.direction,s=e.context,a=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,h=s.locale,m={day:gr,week:Wb,month:Zs,year:Qte,startOfWeek:function(b){return s.ISOWeek?ql(b):Ii(b,{locale:h,weekStartsOn:c})},endOfWeek:function(b){return s.ISOWeek?WO(b):iN(b,{locale:h,weekStartsOn:c})}},p=m[n](t,r==="after"?1:-1);r==="before"&&u?p=Jte([u,p]):r==="after"&&d&&(p=Xte([d,p]));var v=!0;if(a){var w=vN(p,a);v=!w.disabled&&!w.hidden}return v?p:l.count>hae?l.lastFocused:gL(p,{moveBy:n,direction:r,context:s,modifiers:a,retry:He(He({},l),{count:l.count+1})})}var vL=g.createContext(void 0);function fae(t){var e=bm(),n=pL(),r=g.useState(),s=r[0],a=r[1],o=g.useState(),l=o[0],c=o[1],u=dae(e.displayMonths,n),d=s??(l&&e.isDateDisplayed(l))?l:u,h=function(){c(s),a(void 0)},m=function(b){a(b)},p=Bt(),v=function(b,y){if(s){var x=gL(s,{moveBy:b,direction:y,context:p,modifiers:n});Mr(s,x)||(e.goToDate(x,s),m(x))}},w={focusedDay:s,focusTarget:d,blur:h,focus:m,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return i.jsx(vL.Provider,{value:w,children:t.children})}function xN(){var t=g.useContext(vL);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function mae(t,e){var n=pL(),r=vN(t,n,e);return r}var yN=g.createContext(void 0);function pae(t){if(!ny(t.initialProps)){var e={selected:void 0};return i.jsx(yN.Provider,{value:e,children:t.children})}return i.jsx(gae,{initialProps:t.initialProps,children:t.children})}function gae(t){var e=t.initialProps,n=t.children,r=function(a,o,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,a,o,l),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,o,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,o,l)},s={selected:e.selected,onDayClick:r};return i.jsx(yN.Provider,{value:s,children:n})}function xL(){var t=g.useContext(yN);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function vae(t,e){var n=Bt(),r=xL(),s=mN(),a=gN(),o=xN(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,h=o.blur,m=o.focus,p=o.focusMonthBefore,v=o.focusMonthAfter,w=o.focusYearBefore,b=o.focusYearAfter,y=o.focusStartOfWeek,x=o.focusEndOfWeek,_=function($){var L,W,U,Z;ny(n)?(L=r.onDayClick)===null||L===void 0||L.call(r,t,e,$):ym(n)?(W=s.onDayClick)===null||W===void 0||W.call(s,t,e,$):wm(n)?(U=a.onDayClick)===null||U===void 0||U.call(a,t,e,$):(Z=n.onDayClick)===null||Z===void 0||Z.call(n,t,e,$)},E=function($){var L;m(t),(L=n.onDayFocus)===null||L===void 0||L.call(n,t,e,$)},S=function($){var L;h(),(L=n.onDayBlur)===null||L===void 0||L.call(n,t,e,$)},D=function($){var L;(L=n.onDayMouseEnter)===null||L===void 0||L.call(n,t,e,$)},I=function($){var L;(L=n.onDayMouseLeave)===null||L===void 0||L.call(n,t,e,$)},A=function($){var L;(L=n.onDayPointerEnter)===null||L===void 0||L.call(n,t,e,$)},R=function($){var L;(L=n.onDayPointerLeave)===null||L===void 0||L.call(n,t,e,$)},N=function($){var L;(L=n.onDayTouchCancel)===null||L===void 0||L.call(n,t,e,$)},P=function($){var L;(L=n.onDayTouchEnd)===null||L===void 0||L.call(n,t,e,$)},T=function($){var L;(L=n.onDayTouchMove)===null||L===void 0||L.call(n,t,e,$)},C=function($){var L;(L=n.onDayTouchStart)===null||L===void 0||L.call(n,t,e,$)},V=function($){var L;(L=n.onDayKeyUp)===null||L===void 0||L.call(n,t,e,$)},z=function($){var L;switch($.key){case"ArrowLeft":$.preventDefault(),$.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":$.preventDefault(),$.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":$.preventDefault(),$.stopPropagation(),u();break;case"ArrowUp":$.preventDefault(),$.stopPropagation(),d();break;case"PageUp":$.preventDefault(),$.stopPropagation(),$.shiftKey?w():p();break;case"PageDown":$.preventDefault(),$.stopPropagation(),$.shiftKey?b():v();break;case"Home":$.preventDefault(),$.stopPropagation(),y();break;case"End":$.preventDefault(),$.stopPropagation(),x();break}(L=n.onDayKeyDown)===null||L===void 0||L.call(n,t,e,$)},H={onClick:_,onFocus:E,onBlur:S,onKeyDown:z,onKeyUp:V,onMouseEnter:D,onMouseLeave:I,onPointerEnter:A,onPointerLeave:R,onTouchCancel:N,onTouchEnd:P,onTouchMove:T,onTouchStart:C};return H}function xae(){var t=Bt(),e=xL(),n=mN(),r=gN(),s=ny(t)?e.selected:ym(t)?n.selected:wm(t)?r.selected:void 0;return s}function yae(t){return Object.values(ei).includes(t)}function wae(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var s=t.modifiersClassNames[r];if(s)n.push(s);else if(yae(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function bae(t,e){var n=He({},t.styles.day);return Object.keys(e).forEach(function(r){var s;n=He(He({},n),(s=t.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function _ae(t,e,n){var r,s,a,o=Bt(),l=xN(),c=mae(t,e),u=vae(t,c),d=xae(),h=!!(o.onDayClick||o.mode!=="default");g.useEffect(function(){var D;c.outside||l.focusedDay&&h&&Mr(l.focusedDay,t)&&((D=n.current)===null||D===void 0||D.focus())},[l.focusedDay,t,n,h,c.outside]);var m=wae(o,c).join(" "),p=bae(o,c),v=!!(c.outside&&!o.showOutsideDays||c.hidden),w=(a=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:Bie,b=i.jsx(w,{date:t,displayMonth:e,activeModifiers:c}),y={style:p,className:m,children:b,role:"gridcell"},x=l.focusTarget&&Mr(l.focusTarget,t)&&!c.outside,_=l.focusedDay&&Mr(l.focusedDay,t),E=He(He(He({},y),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=_||x?0:-1,r)),u),S={isButton:h,isHidden:v,activeModifiers:c,selectedDays:d,buttonProps:E,divProps:y};return S}function jae(t){var e=g.useRef(null),n=_ae(t.date,t.displayMonth,e);return n.isHidden?i.jsx("div",{role:"gridcell"}):n.isButton?i.jsx(yv,He({name:"day",ref:e},n.buttonProps)):i.jsx("div",He({},n.divProps))}function Nae(t){var e=t.number,n=t.dates,r=Bt(),s=r.onWeekNumberClick,a=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!s)return i.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:d});var h=c(Number(e),{locale:l}),m=function(p){s(e,n,p)};return i.jsx(yv,{name:"week-number","aria-label":h,className:o.weeknumber,style:a.weeknumber,onClick:m,children:d})}function Sae(t){var e,n,r=Bt(),s=r.styles,a=r.classNames,o=r.showWeekNumber,l=r.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:jae,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:Nae,d;return o&&(d=i.jsx("td",{className:a.cell,style:s.cell,children:i.jsx(u,{number:t.weekNumber,dates:t.dates})})),i.jsxs("tr",{className:a.row,style:s.row,children:[d,t.dates.map(function(h){return i.jsx("td",{className:a.cell,style:s.cell,role:"presentation",children:i.jsx(c,{displayMonth:t.displayMonth,date:h})},sre(h))})]})}function F2(t,e,n){for(var r=n!=null&&n.ISOWeek?WO(e):iN(e,n),s=n!=null&&n.ISOWeek?ql(t):Ii(t,n),a=pi(r,s),o=[],l=0;l<=a;l++)o.push(gr(s,l));var c=o.reduce(function(u,d){var h=n!=null&&n.ISOWeek?GO(d):YO(d,n),m=u.find(function(p){return p.weekNumber===h});return m?(m.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function Eae(t,e){var n=F2(Ur(t),Jx(t),e);if(e!=null&&e.useFixedWeeks){var r=are(t,e);if(r<6){var s=n[n.length-1],a=s.dates[s.dates.length-1],o=Wb(a,6-r),l=F2(Wb(a,1),o,e);n.push.apply(n,l)}}return n}function Cae(t){var e,n,r,s=Bt(),a=s.locale,o=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,h=s.weekStartsOn,m=s.firstWeekContainsDate,p=s.ISOWeek,v=Eae(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:a,weekStartsOn:h,firstWeekContainsDate:m}),w=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:zie,b=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:Sae,y=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:Fie;return i.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&i.jsx(w,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:v.map(function(x){return i.jsx(b,{displayMonth:t.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),i.jsx(y,{displayMonth:t.displayMonth})]})}function kae(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Tae=kae()?g.useLayoutEffect:g.useEffect,G0=!1,Iae=0;function $2(){return"react-day-picker-".concat(++Iae)}function Aae(t){var e,n=t??(G0?$2():null),r=g.useState(n),s=r[0],a=r[1];return Tae(function(){s===null&&a($2())},[]),g.useEffect(function(){G0===!1&&(G0=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function Pae(t){var e,n,r=Bt(),s=r.dir,a=r.classNames,o=r.styles,l=r.components,c=bm().displayMonths,u=Aae(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,h=[a.month],m=o.month,p=t.displayIndex===0,v=t.displayIndex===c.length-1,w=!p&&!v;s==="rtl"&&(e=[p,v],v=e[0],p=e[1]),p&&(h.push(a.caption_start),m=He(He({},m),o.caption_start)),v&&(h.push(a.caption_end),m=He(He({},m),o.caption_end)),w&&(h.push(a.caption_between),m=He(He({},m),o.caption_between));var b=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:Vie;return i.jsxs("div",{className:h.join(" "),style:m,children:[i.jsx(b,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),i.jsx(Cae,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function Rae(t){var e=Bt(),n=e.classNames,r=e.styles;return i.jsx("div",{className:n.months,style:r.months,children:t.children})}function Dae(t){var e,n,r=t.initialProps,s=Bt(),a=xN(),o=bm(),l=g.useState(!1),c=l[0],u=l[1];g.useEffect(function(){s.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),u(!0)))},[s.initialFocus,c,a.focus,a.focusTarget,a]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var h=He(He({},s.styles.root),s.style),m=Object.keys(r).filter(function(v){return v.startsWith("data-")}).reduce(function(v,w){var b;return He(He({},v),(b={},b[w]=r[w],b))},{}),p=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:Rae;return i.jsx("div",He({className:d.join(" "),style:h,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},m,{children:i.jsx(p,{children:o.displayMonths.map(function(v,w){return i.jsx(Pae,{displayIndex:w,displayMonth:v},w)})})}))}function Mae(t){var e=t.children,n=iie(t,["children"]);return i.jsx(Nie,{initialProps:n,children:i.jsx(Die,{children:i.jsx(pae,{initialProps:n,children:i.jsx(qie,{initialProps:n,children:i.jsx(Gie,{initialProps:n,children:i.jsx(tae,{children:i.jsx(fae,{children:e})})})})})})})}function Oae(t){return i.jsx(Mae,He({},t,{children:i.jsx(Dae,{initialProps:t})}))}function yL({className:t,classNames:e,showOutsideDays:n=!0,...r}){return i.jsx(Oae,{showOutsideDays:n,className:Le("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Le(Db({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Le("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Le(Db({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>i.jsx(Gee,{className:"h-4 w-4"}),IconRight:({...s})=>i.jsx(NO,{className:"h-4 w-4"})},...r})}yL.displayName="Calendar";var wN="Popover",[wL,Jfe]=os(wN,[cd]),_m=cd(),[Lae,qo]=wL(wN),bL=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!1}=t,l=_m(e),c=g.useRef(null),[u,d]=g.useState(!1),[h=!1,m]=ss({prop:r,defaultProp:s,onChange:a});return i.jsx(qj,{...l,children:i.jsx(Lae,{scope:e,contentId:es(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:g.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:g.useCallback(()=>d(!0),[]),onCustomAnchorRemove:g.useCallback(()=>d(!1),[]),modal:o,children:n})})};bL.displayName=wN;var _L="PopoverAnchor",Vae=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=qo(_L,n),a=_m(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return g.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(zx,{...a,...r,ref:e})});Vae.displayName=_L;var jL="PopoverTrigger",NL=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=qo(jL,n),a=_m(n),o=Xe(e,s.triggerRef),l=i.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":TL(s.open),...r,ref:o,onClick:ge(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(zx,{asChild:!0,...a,children:l})});NL.displayName=jL;var bN="PopoverPortal",[Fae,$ae]=wL(bN,{forceMount:void 0}),SL=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,a=qo(bN,e);return i.jsx(Fae,{scope:e,forceMount:n,children:i.jsx(Yn,{present:n||a.open,children:i.jsx(fm,{asChild:!0,container:s,children:r})})})};SL.displayName=bN;var $u="PopoverContent",EL=g.forwardRef((t,e)=>{const n=$ae($u,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,a=qo($u,t.__scopePopover);return i.jsx(Yn,{present:r||a.open,children:a.modal?i.jsx(Uae,{...s,ref:e}):i.jsx(zae,{...s,ref:e})})});EL.displayName=$u;var Uae=g.forwardRef((t,e)=>{const n=qo($u,t.__scopePopover),r=g.useRef(null),s=Xe(e,r),a=g.useRef(!1);return g.useEffect(()=>{const o=r.current;if(o)return Wx(o)},[]),i.jsx(mm,{as:xa,allowPinchZoom:!0,children:i.jsx(CL,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ge(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ge(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),zae=g.forwardRef((t,e)=>{const n=qo($u,t.__scopePopover),r=g.useRef(!1),s=g.useRef(!1);return i.jsx(CL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),CL=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,m=qo($u,n),p=_m(n);return Lx(),i.jsx(dm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(um,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:i.jsx(Wj,{"data-state":TL(m.open),role:"dialog",id:m.contentId,...p,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),kL="PopoverClose",Bae=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=qo(kL,n);return i.jsx(De.button,{type:"button",...r,ref:e,onClick:ge(t.onClick,()=>s.onOpenChange(!1))})});Bae.displayName=kL;var qae="PopoverArrow",Wae=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=_m(n);return i.jsx(Hj,{...s,...r,ref:e})});Wae.displayName=qae;function TL(t){return t?"open":"closed"}var Hae=bL,Gae=NL,Kae=SL,IL=EL;const Yae=Hae,Qae=Gae,AL=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>i.jsx(Kae,{children:i.jsx(IL,{ref:s,align:e,sideOffset:n,className:Le("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));AL.displayName=IL.displayName;const jc=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},ry=ud((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espèces",icon:"💵",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"🏦",description:"Virement SEPA sécurisé",fees:0,processingTime:"1-2 jours ouvrés",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"💳",description:"Paiement sécurisé via PayPal",fees:2.9,processingTime:"Immédiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"📱",description:"Paiement mobile instantané",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async n=>{try{t({loading:!0});const r=e().generateSecurityCode(),s={...n,securityCode:r,status:"pending",createdAt:ln(),updatedAt:ln()},a=await Ol(wt(ye,"paymentRequests"),s),o={id:a.id,...n,securityCode:r,status:"pending",createdAt:new Date,updatedAt:new Date};return t(l=>({paymentRequests:[o,...l.paymentRequests],loading:!1})),te.success("Demande de paiement créée avec succès"),a.id}catch(r){throw console.error("Erreur lors de la création de la demande de paiement:",r),te.error("Erreur lors de la création de la demande de paiement"),t({loading:!1}),r}},updatePaymentStatus:async(n,r,s)=>{try{const a={status:r,updatedAt:ln()};s&&(a.notes=s),await un(Ze(ye,"paymentRequests",n),a),t(l=>({paymentRequests:l.paymentRequests.map(c=>c.id===n?{...c,status:r,notes:s||c.notes,updatedAt:new Date}:c)}));const o={confirmed:"Paiement confirmé",completed:"Paiement terminé",cancelled:"Paiement annulé",disputed:"Litige signalé"};te.success(o[r]||"Statut mis à jour")}catch(a){console.error("Erreur lors de la mise à jour du statut:",a),te.error("Erreur lors de la mise à jour du statut")}},fetchUserPaymentRequests:async n=>{if(n)try{t({loading:!0});const r=Mt(wt(ye,"paymentRequests"),Vt("buyerId","==",n),xs(50)),s=Mt(wt(ye,"paymentRequests"),Vt("sellerId","==",n),xs(50)),[a,o]=await Promise.all([Kt(r),Kt(s)]),l=[];a.forEach(c=>{const u=c.data();l.push({id:c.id,...u,createdAt:jc(u.createdAt),updatedAt:jc(u.updatedAt),meetingDateTime:u.meetingDateTime?jc(u.meetingDateTime):void 0})}),o.forEach(c=>{const u=c.data();l.find(d=>d.id===c.id)||l.push({id:c.id,...u,createdAt:jc(u.createdAt),updatedAt:jc(u.updatedAt),meetingDateTime:u.meetingDateTime?jc(u.meetingDateTime):void 0})}),l.sort((c,u)=>u.createdAt.getTime()-c.createdAt.getTime()),t({paymentRequests:l,loading:!1})}catch(r){console.error("Erreur lors du chargement des demandes de paiement:",r),te.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(n,r)=>{switch(n){case"cash":return!0;case"transfer":return r.bankDetails&&r.bankDetails.iban&&r.bankDetails.accountName;case"paypal":return r.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.paypalEmail);case"lydia":return r.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(r.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(n,r)=>{const{paymentMethods:s}=e(),a=s.find(o=>o.type===r);return a?n*a.fees/100:0},getPaymentInstructions:(n,r)=>{var a,o,l;const s=[];switch(n){case"cash":s.push("💵 Paiement en espèces","📍 Rencontrez-vous au lieu convenu","🔍 Vérifiez l'objet avant de payer","🧾 Demandez un reçu si nécessaire",`🔐 Code de sécurité : ${r.securityCode}`);break;case"transfer":s.push("🏦 Virement bancaire SEPA","📋 Utilisez les coordonnées bancaires fournies","💬 Indiquez la référence de transaction","⏱️ Délai : 1-2 jours ouvrés",`🔐 Code de sécurité : ${r.securityCode}`),(a=r.paymentDetails)!=null&&a.bankDetails&&s.push(`📊 IBAN : ${r.paymentDetails.bankDetails.iban}`,`🏛️ Titulaire : ${r.paymentDetails.bankDetails.accountName}`);break;case"paypal":s.push("💳 Paiement PayPal","📧 Envoyez le paiement à l'adresse email fournie",'🛡️ Utilisez "Biens et services" pour la protection',"⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(o=r.paymentDetails)!=null&&o.paypalEmail&&s.push(`📧 Email PayPal : ${r.paymentDetails.paypalEmail}`);break;case"lydia":s.push("📱 Paiement Lydia","📞 Envoyez le paiement au numéro fourni","💬 Indiquez la référence de transaction","⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(l=r.paymentDetails)!=null&&l.lydiaPhone&&s.push(`📞 Numéro Lydia : ${r.paymentDetails.lydiaPhone}`);break}return s}}));var PL="https://js.stripe.com/v3",Jae=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,U2="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Xae=function(){for(var e=document.querySelectorAll('script[src^="'.concat(PL,'"]')),n=0;n<e.length;n++){var r=e[n];if(Jae.test(r.src))return r}return null},z2=function(e){var n="",r=document.createElement("script");r.src="".concat(PL).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},Zae=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:n})},Wd=null,Np=null,Sp=null,eoe=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},toe=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},noe=function(e){return Wd!==null?Wd:(Wd=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(U2),window.Stripe){n(window.Stripe);return}try{var s=Xae();if(s&&e)console.warn(U2);else if(!s)s=z2(e);else if(s&&Sp!==null&&Np!==null){var a;s.removeEventListener("load",Sp),s.removeEventListener("error",Np),(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=z2(e)}Sp=toe(n,r),Np=eoe(r),s.addEventListener("load",Sp),s.addEventListener("error",Np)}catch(o){r(o);return}}),Wd.catch(function(n){return Wd=null,Promise.reject(n)}))},roe=function(e,n,r){if(e===null)return null;var s=e.apply(void 0,n);return Zae(s,r),s},Hd,RL=!1,DL=function(){return Hd||(Hd=noe(null).catch(function(e){return Hd=null,Promise.reject(e)}),Hd)};Promise.resolve().then(function(){return DL()}).catch(function(t){RL||console.warn(t)});var ML=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];RL=!0;var s=Date.now();return DL().then(function(a){return roe(a,n,s)})},OL={exports:{}},soe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ioe=soe,aoe=ioe;function LL(){}function VL(){}VL.resetWarningCache=LL;var ooe=function(){function t(r,s,a,o,l,c){if(c!==aoe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:VL,resetWarningCache:LL};return n.PropTypes=n,n};OL.exports=ooe();var loe=OL.exports;const en=Fv(loe);function B2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function q2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B2(Object(n),!0).forEach(function(r){FL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cg(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cg=function(e){return typeof e}:cg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}function FL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $L(t,e){return coe(t)||uoe(t,e)||doe(t,e)||hoe()}function coe(t){if(Array.isArray(t))return t}function uoe(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],s=!0,a=!1,o,l;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(c){a=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function doe(t,e){if(t){if(typeof t=="string")return W2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W2(t,e)}}function W2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qr=function(e,n,r){var s=!!r,a=Se.useRef(r);Se.useEffect(function(){a.current=r},[r]),Se.useEffect(function(){if(!s||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,o),function(){e.off(n,o)}},[s,n,e,a])},Xb=function(e){var n=Se.useRef(e);return Se.useEffect(function(){n.current=e},[e]),n.current},Uu=function(e){return e!==null&&cg(e)==="object"},foe=function(e){return Uu(e)&&typeof e.then=="function"},moe=function(e){return Uu(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},H2="[object Object]",poe=function t(e,n){if(!Uu(e)||!Uu(n))return e===n;var r=Array.isArray(e),s=Array.isArray(n);if(r!==s)return!1;var a=Object.prototype.toString.call(e)===H2,o=Object.prototype.toString.call(n)===H2;if(a!==o)return!1;if(!a&&!r)return e===n;var l=Object.keys(e),c=Object.keys(n);if(l.length!==c.length)return!1;for(var u={},d=0;d<l.length;d+=1)u[l[d]]=!0;for(var h=0;h<c.length;h+=1)u[c[h]]=!0;var m=Object.keys(u);if(m.length!==l.length)return!1;var p=e,v=n,w=function(y){return t(p[y],v[y])};return m.every(w)},UL=function(e,n,r){return Uu(e)?Object.keys(e).reduce(function(s,a){var o=!Uu(n)||!poe(e[a],n[a]);return r.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):o?q2(q2({},s||{}),{},FL({},a,e[a])):s},null):null},zL="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",G2=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zL;if(e===null||moe(e))return e;throw new Error(n)},goe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zL;if(foe(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(s){return G2(s,n)})};var r=G2(e,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},voe=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},sy=Se.createContext(null);sy.displayName="ElementsContext";var BL=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},qL=function(e){var n=e.stripe,r=e.options,s=e.children,a=Se.useMemo(function(){return goe(n)},[n]),o=Se.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),l=$L(o,2),c=l[0],u=l[1];Se.useEffect(function(){var m=!0,p=function(w){u(function(b){return b.stripe?b:{stripe:w,elements:w.elements(r)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(v){v&&m&&p(v)}):a.tag==="sync"&&!c.stripe&&p(a.stripe),function(){m=!1}},[a,c,r]);var d=Xb(n);Se.useEffect(function(){d!==null&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,n]);var h=Xb(r);return Se.useEffect(function(){if(c.elements){var m=UL(r,h,["clientSecret","fonts"]);m&&c.elements.update(m)}},[r,h,c.elements]),Se.useEffect(function(){voe(c.stripe)},[c.stripe]),Se.createElement(sy.Provider,{value:c},s)};qL.propTypes={stripe:en.any,options:en.object};var xoe=function(e){var n=Se.useContext(sy);return BL(n,e)},yoe=function(){var e=xoe("calls useElements()"),n=e.elements;return n};en.func.isRequired;var WL=Se.createContext(null);WL.displayName="CustomCheckoutSdkContext";var woe=function(e,n){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return e},boe=Se.createContext(null);boe.displayName="CustomCheckoutContext";en.any,en.shape({clientSecret:en.string.isRequired,elementsOptions:en.object}).isRequired;var Zb=function(e){var n=Se.useContext(WL),r=Se.useContext(sy);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?woe(n,e):BL(r,e)},_oe=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Sn=function(e,n){var r="".concat(_oe(e),"Element"),s=function(c){var u=c.id,d=c.className,h=c.options,m=h===void 0?{}:h,p=c.onBlur,v=c.onFocus,w=c.onReady,b=c.onChange,y=c.onEscape,x=c.onClick,_=c.onLoadError,E=c.onLoaderStart,S=c.onNetworksChange,D=c.onConfirm,I=c.onCancel,A=c.onShippingAddressChange,R=c.onShippingRateChange,N=Zb("mounts <".concat(r,">")),P="elements"in N?N.elements:null,T="customCheckoutSdk"in N?N.customCheckoutSdk:null,C=Se.useState(null),V=$L(C,2),z=V[0],H=V[1],$=Se.useRef(null),L=Se.useRef(null);qr(z,"blur",p),qr(z,"focus",v),qr(z,"escape",y),qr(z,"click",x),qr(z,"loaderror",_),qr(z,"loaderstart",E),qr(z,"networkschange",S),qr(z,"confirm",D),qr(z,"cancel",I),qr(z,"shippingaddresschange",A),qr(z,"shippingratechange",R),qr(z,"change",b);var W;w&&(e==="expressCheckout"?W=w:W=function(){w(z)}),qr(z,"ready",W),Se.useLayoutEffect(function(){if($.current===null&&L.current!==null&&(P||T)){var Z=null;T?Z=T.createElement(e,m):P&&(Z=P.create(e,m)),$.current=Z,H(Z),Z&&Z.mount(L.current)}},[P,T,m]);var U=Xb(m);return Se.useEffect(function(){if($.current){var Z=UL(m,U,["paymentRequest"]);Z&&"update"in $.current&&$.current.update(Z)}},[m,U]),Se.useLayoutEffect(function(){return function(){if($.current&&typeof $.current.destroy=="function")try{$.current.destroy(),$.current=null}catch{}}},[]),Se.createElement("div",{id:u,className:d,ref:L})},a=function(c){Zb("mounts <".concat(r,">"));var u=c.id,d=c.className;return Se.createElement("div",{id:u,className:d})},o=n?a:s;return o.propTypes={id:en.string,className:en.string,onChange:en.func,onBlur:en.func,onFocus:en.func,onReady:en.func,onEscape:en.func,onClick:en.func,onLoadError:en.func,onLoaderStart:en.func,onNetworksChange:en.func,onConfirm:en.func,onCancel:en.func,onShippingAddressChange:en.func,onShippingRateChange:en.func,options:en.object},o.displayName=r,o.__elementType=e,o},En=typeof window>"u",joe=Se.createContext(null);joe.displayName="EmbeddedCheckoutProviderContext";var Noe=function(){var e=Zb("calls useStripe()"),n=e.stripe;return n};Sn("auBankAccount",En);Sn("card",En);Sn("cardNumber",En);Sn("cardExpiry",En);Sn("cardCvc",En);Sn("fpxBank",En);Sn("iban",En);Sn("idealBank",En);Sn("p24Bank",En);Sn("epsBank",En);Sn("payment",En);Sn("expressCheckout",En);Sn("currencySelector",En);Sn("paymentRequestButton",En);Sn("linkAuthentication",En);Sn("address",En);Sn("shippingAddress",En);Sn("paymentMethodMessaging",En);Sn("affirmMessage",En);Sn("afterpayClearpayMessage",En);const Soe=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{Noe(),yoe();const[s,a]=g.useState(!1),[o,l]=g.useState(null),c=async u=>{u.preventDefault(),a(!0),l(null);try{await new Promise(h=>setTimeout(h,2e3));const d="pi_"+Math.random().toString(36).substring(2,15);te.success("Paiement réussi !"),n(d)}catch(d){console.error("Payment error:",d),l(d.message||"Une erreur est survenue lors du paiement"),r(d.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(vn,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),i.jsx(at,{children:"Paiement sécurisé via Stripe"})]}),i.jsx(Q,{children:i.jsxs("form",{onSubmit:c,className:"space-y-4",children:[i.jsx("div",{className:"p-4 border rounded-md",children:i.jsx("div",{className:"h-10 flex items-center",children:i.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&i.jsxs(kt,{className:"border-red-200 bg-red-50",children:[i.jsx(hn,{className:"h-4 w-4 text-red-600"}),i.jsx(Tt,{className:"text-red-800",children:o})]}),i.jsxs(kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(Ul,{className:"h-4 w-4 text-blue-600"}),i.jsx(Tt,{className:"text-blue-800",children:"Vos informations de paiement sont sécurisées et cryptées par Stripe."})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),i.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[i.jsx("li",{children:"Succès : 4242 4242 4242 4242"}),i.jsx("li",{children:"Échec : 4000 0000 0000 0002"}),i.jsx("li",{children:"Date : n'importe quelle date future"}),i.jsx("li",{children:"CVC : n'importe quel nombre à 3 chiffres"})]})]}),i.jsx(F,{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-primary to-secondary",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ul,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},K2=ML("pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p"),Eoe=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{const s={appearance:{theme:"stripe"},locale:"fr"};return K2?i.jsx(qL,{stripe:K2,options:s,children:i.jsx(Soe,{amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})}):i.jsxs(kt,{className:"border-yellow-200 bg-yellow-50",children:[i.jsx(hn,{className:"h-4 w-4 text-yellow-600"}),i.jsxs(Tt,{className:"text-yellow-800",children:[i.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre clé publique Stripe dans le fichier .env"]})]})},HL=({amount:t,currency:e,onMethodSelect:n,selectedMethod:r})=>{const{paymentMethods:s,calculateFees:a}=ry(),[o,l]=g.useState({}),[c,u]=g.useState({}),[d,h]=g.useState(null),m=[{id:"card",type:"card",name:"Carte bancaire",icon:vn,description:"Paiement sécurisé par carte",fees:1.5,processingTime:"Immédiat",securityLevel:"high",available:!0},...s],p=S=>{switch(S){case"card":return vn;case"cash":return ED;case"transfer":return QY;case"paypal":return vn;case"lydia":return ic;default:return vn}},v=S=>{switch(S){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},w=(S,D)=>{var A,R;const I={};switch(S){case"card":return!0;case"transfer":(A=D.bankDetails)!=null&&A.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(D.bankDetails.iban.replace(/\s/g,""))||(I.iban="Format IBAN invalide"):I.iban="IBAN requis",(R=D.bankDetails)!=null&&R.accountName||(I.accountName="Nom du titulaire requis");break;case"paypal":D.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D.paypalEmail)||(I.paypalEmail="Format email invalide"):I.paypalEmail="Email PayPal requis";break;case"lydia":D.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(D.lydiaPhone.replace(/\s/g,""))||(I.lydiaPhone="Format de téléphone invalide"):I.lydiaPhone="Numéro de téléphone requis";break}return u(I),Object.keys(I).length===0},b=S=>{if(S==="card"){n(S,{});return}const D=o[S]||{};(S==="cash"||w(S,D))&&n(S,D)},y=(S,D,I)=>{l(A=>({...A,[S]:{...A[S],[D]:I}}))},x=(S,D)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:D||"EUR"}).format(S),_=S=>{h(S),n("card",{stripePaymentId:S})},E=S=>{console.error("Stripe payment error:",S)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),i.jsxs("p",{className:"text-muted-foreground",children:["Montant à payer : ",i.jsx("span",{className:"font-semibold text-primary",children:x(t,e)})]})]}),r==="card"?i.jsx(Eoe,{amount:t,currency:e,onPaymentSuccess:_,onPaymentError:E}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(S=>{var N,P,T,C,V,z,H,$;const D=p(S.type),I=S.type==="card"?t*S.fees/100:a(t,S.type),A=t+I,R=r===S.type;return i.jsxs(Y,{className:`cursor-pointer transition-all hover:shadow-md ${R?"ring-2 ring-primary bg-primary/5":""} ${S.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>S.available&&b(S.type),children:[i.jsx(Pe,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(D,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{children:[i.jsx(Re,{className:"text-lg",children:S.name}),i.jsx(at,{className:"text-sm",children:S.description})]})]}),R&&i.jsx(xt,{className:"w-6 h-6 text-green-600"})]})}),i.jsxs(Q,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(dn,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:S.processingTime})]}),i.jsxs(Ie,{className:v(S.securityLevel),children:[i.jsx(Et,{className:"w-3 h-3 mr-1"}),S.securityLevel==="high"?"Très sécurisé":S.securityLevel==="medium"?"Sécurisé":"Basique"]})]}),I>0&&i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Montant :"}),i.jsx("span",{children:x(t,e)})]}),i.jsxs("div",{className:"flex justify-between text-orange-600",children:[i.jsxs("span",{children:["Frais (",S.fees,"%) :"]}),i.jsx("span",{children:x(I,e)})]}),i.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[i.jsx("span",{children:"Total :"}),i.jsx("span",{children:x(A,e)})]})]}),R&&S.type!=="cash"&&S.type!=="card"&&i.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[S.type==="transfer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:`iban-${S.id}`,children:"IBAN *"}),i.jsx(_e,{id:`iban-${S.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((P=(N=o[S.type])==null?void 0:N.bankDetails)==null?void 0:P.iban)||"",onChange:L=>{var W;return y(S.type,"bankDetails",{...(W=o[S.type])==null?void 0:W.bankDetails,iban:L.target.value})},className:c.iban?"border-red-500":""}),c.iban&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.iban})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:`account-name-${S.id}`,children:"Nom du titulaire *"}),i.jsx(_e,{id:`account-name-${S.id}`,placeholder:"Jean Dupont",value:((C=(T=o[S.type])==null?void 0:T.bankDetails)==null?void 0:C.accountName)||"",onChange:L=>{var W;return y(S.type,"bankDetails",{...(W=o[S.type])==null?void 0:W.bankDetails,accountName:L.target.value})},className:c.accountName?"border-red-500":""}),c.accountName&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.accountName})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:`bic-${S.id}`,children:"BIC (optionnel)"}),i.jsx(_e,{id:`bic-${S.id}`,placeholder:"BNPAFRPP",value:((z=(V=o[S.type])==null?void 0:V.bankDetails)==null?void 0:z.bic)||"",onChange:L=>{var W;return y(S.type,"bankDetails",{...(W=o[S.type])==null?void 0:W.bankDetails,bic:L.target.value})}})]})]}),S.type==="paypal"&&i.jsxs("div",{children:[i.jsx(he,{htmlFor:`paypal-email-${S.id}`,children:"Email PayPal *"}),i.jsx(_e,{id:`paypal-email-${S.id}`,type:"email",placeholder:"votre.email@example.com",value:((H=o[S.type])==null?void 0:H.paypalEmail)||"",onChange:L=>y(S.type,"paypalEmail",L.target.value),className:c.paypalEmail?"border-red-500":""}),c.paypalEmail&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.paypalEmail})]}),S.type==="lydia"&&i.jsxs("div",{children:[i.jsx(he,{htmlFor:`lydia-phone-${S.id}`,children:"Numéro de téléphone *"}),i.jsx(_e,{id:`lydia-phone-${S.id}`,type:"tel",placeholder:"06 12 34 56 78",value:(($=o[S.type])==null?void 0:$.lydiaPhone)||"",onChange:L=>y(S.type,"lydiaPhone",L.target.value),className:c.lydiaPhone?"border-red-500":""}),c.lydiaPhone&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.lydiaPhone})]})]}),R&&S.type!=="card"&&i.jsxs(kt,{className:"mt-3",children:[i.jsx(_o,{className:"h-4 w-4"}),i.jsxs(Tt,{children:[S.type==="cash"&&"Rencontrez-vous dans un lieu public et vérifiez l'objet avant de payer.",S.type==="transfer"&&"Le virement sera effectué après confirmation de la transaction. Délai : 1-2 jours ouvrés.",S.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bénéficier de la protection PayPal.",S.type==="lydia"&&"Le paiement Lydia est instantané. Vérifiez le numéro avant d'envoyer."]})]})]})]},S.id)})}),i.jsxs(kt,{className:"border-yellow-200 bg-yellow-50",children:[i.jsx(hn,{className:"h-4 w-4 text-yellow-600"}),i.jsxs(Tt,{className:"text-yellow-800",children:[i.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux sécurisés de StudyMarket pour les transactions."]})]})]})},Coe=({open:t,onOpenChange:e,listing:n})=>{var E;const{currentUser:r,userProfile:s}=Zt(),{createPaymentRequest:a,loading:o}=ry(),[l,c]=g.useState("method"),[u,d]=g.useState(null),[h,m]=g.useState({}),[p,v]=g.useState({location:"",date:void 0,time:"",notes:""}),w=(S,D)=>{d(S),m(D),c("details")},b=async()=>{if(!(!r||!u))try{const S=p.date&&p.time?new Date(`${Pn(p.date,"yyyy-MM-dd")} ${p.time}`):void 0;await a({listingId:n.id,buyerId:r.uid,sellerId:n.sellerId,amount:n.price,currency:n.currency||"EUR",paymentMethod:u,meetingLocation:p.location,meetingDateTime:S,paymentDetails:h,notes:p.notes}),e(!1),y()}catch(S){console.error("Erreur lors de la création de la demande:",S)}},y=()=>{c("method"),d(null),m({}),v({location:"",date:void 0,time:"",notes:""})},x=(S,D)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:D||"EUR"}).format(S),_=S=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[S]||S;return i.jsx(aa,{open:t,onOpenChange:e,children:i.jsxs(Ni,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(oa,{children:[i.jsxs(Si,{className:"flex items-center gap-2",children:[i.jsx(vn,{className:"w-5 h-5"}),"Demande de paiement"]}),i.jsxs(fu,{children:['Créez une demande de paiement sécurisée pour "',n.title,'"']})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[i.jsxs("div",{className:`flex items-center ${l==="method"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),i.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${l==="details"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Détails"})]}),i.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${l==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),i.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-4",children:[((E=n.images)==null?void 0:E[0])&&i.jsx("img",{src:n.images[0],alt:n.title,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:n.title}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",n.sellerName," • ",n.sellerUniversity]}),i.jsx("p",{className:"text-lg font-bold text-primary",children:x(n.price,n.currency||"EUR")})]})]})}),l==="method"&&i.jsx(HL,{amount:n.price,currency:n.currency||"EUR",onMethodSelect:w,selectedMethod:u}),l==="details"&&u&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(xt,{className:"w-5 h-5 text-green-600"}),i.jsxs("span",{className:"font-medium",children:["Mode de paiement sélectionné : ",_(u)]})]}),u==="cash"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[i.jsx(qn,{className:"w-5 h-5"}),"Détails de la rencontre"]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),i.jsx(_e,{id:"meeting-location",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",value:p.location,onChange:S=>v(D=>({...D,location:S.target.value})),className:"mt-1"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(he,{children:"Date de rencontre"}),i.jsxs(Yae,{children:[i.jsx(Qae,{asChild:!0,children:i.jsxs(F,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[i.jsx(Us,{className:"mr-2 h-4 w-4"}),p.date?Pn(p.date,"PPP",{locale:sr}):i.jsx("span",{children:"Choisir une date"})]})}),i.jsx(AL,{className:"w-auto p-0",children:i.jsx(yL,{mode:"single",selected:p.date,onSelect:S=>v(D=>({...D,date:S})),disabled:S=>S<new Date,initialFocus:!0})})]})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"meeting-time",children:"Heure de rencontre"}),i.jsx(_e,{id:"meeting-time",type:"time",value:p.time,onChange:S=>v(D=>({...D,time:S.target.value})),className:"mt-1"})]})]})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),i.jsx(_s,{id:"payment-notes",placeholder:"Informations complémentaires pour le vendeur...",value:p.notes,onChange:S=>v(D=>({...D,notes:S.target.value})),rows:3,className:"mt-1"})]}),i.jsxs(kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(Et,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Tt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Sécurité :"})," Un code de sécurité unique sera généré pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(F,{variant:"outline",onClick:()=>c("method"),className:"flex-1",children:"Retour"}),i.jsx(F,{onClick:()=>c("confirmation"),className:"flex-1",disabled:u==="cash"&&!p.location,children:"Continuer"})]})]}),l==="confirmation"&&u&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Récapitulatif de la demande"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),i.jsx("p",{className:"font-medium",children:_(u)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),i.jsx("p",{className:"font-medium",children:x(n.price,n.currency||"EUR")})]}),u==="cash"&&p.location&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),i.jsx("p",{className:"font-medium",children:p.location})]}),p.date&&p.time&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),i.jsxs("p",{className:"font-medium",children:[Pn(p.date,"PPP",{locale:sr})," à ",p.time]})]})]})]}),p.notes&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),i.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:p.notes})]})]}),i.jsxs(kt,{children:[i.jsx(_o,{className:"h-4 w-4"}),i.jsx(Tt,{children:"En créant cette demande, vous vous engagez à effectuer le paiement selon les modalités convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(F,{variant:"outline",onClick:()=>c("details"),className:"flex-1",children:"Retour"}),i.jsx(F,{onClick:b,className:"flex-1",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):i.jsxs(i.Fragment,{children:[i.jsx(xt,{className:"w-4 h-4 mr-2"}),"Créer la demande"]})})]})]})]})]})})},koe=({listing:t,className:e})=>{const{currentUser:n,userProfile:r}=Zt(),{createConversation:s,setCurrentConversation:a,conversations:o}=Qx(),l=Mn(),[c,u]=g.useState(!1),[d,h]=g.useState(!1),[m,p]=g.useState(""),[v,w]=g.useState(""),[b,y]=g.useState(!1);if((n==null?void 0:n.uid)===t.sellerId)return null;const x=o.find(I=>I.listingId===t.id&&I.participants.includes((n==null?void 0:n.uid)||"")&&I.participants.includes(t.sellerId)),_=()=>{if(!n){l("/auth");return}if(x){a(x),l("/messages");return}const I=`Bonjour ${t.sellerName},

Je suis intéressé(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si nécessaire.

Cordialement,
${(r==null?void 0:r.displayName)||"Un étudiant intéressé"}`;p(I),w((r==null?void 0:r.email)||""),u(!0)},E=()=>{if(!n){l("/auth");return}h(!0)},S=async()=>{var I;if(!m.trim()||!v.trim()||!n||!r){te.error("Veuillez remplir tous les champs");return}y(!0);try{const A=await s(t.id,t.title,t.price,(I=t.images)==null?void 0:I[0],n.uid,t.sellerId,{displayName:r.displayName,photoURL:r.photoURL,university:r.university,isVerified:r.isVerified,email:r.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},m.trim());u(!1),te.success(i.jsxs("div",{className:"flex items-center justify-between w-full",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Message envoyé !"}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["📧 ",t.sellerName," recevra une notification email"]})]}),i.jsxs(F,{size:"sm",variant:"ghost",onClick:()=>{te.dismiss(),l("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",i.jsx($l,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{l("/messages")},2e3)}catch(A){console.error("Erreur lors de l'envoi du message:",A),te.error("Erreur lors de l'envoi du message")}finally{y(!1)}},D=(I,A)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const R=A||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:R}).format(I)}catch{return`${I} €`}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(F,{onClick:_,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[i.jsx(zt,{className:"w-4 h-4 mr-2"}),x?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&i.jsxs(F,{onClick:E,variant:"outline",className:"flex items-center gap-2",children:[i.jsx(vn,{className:"w-4 h-4"}),"Payer"]})]}),i.jsx(aa,{open:c,onOpenChange:u,children:i.jsxs(Ni,{className:"max-w-md",children:[i.jsx(oa,{children:i.jsxs(Si,{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs(Jr,{className:"w-8 h-8",children:[i.jsx(ba,{src:t.sellerAvatar||void 0}),i.jsx(Pr,{children:t.sellerName[0]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),i.jsx("p",{className:"text-sm font-medium",children:t.title}),i.jsx("p",{className:"text-sm text-primary font-semibold",children:D(t.price,t.currency)})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"contact-email",children:"Votre email"}),i.jsx(_e,{id:"contact-email",type:"email",value:v,onChange:I=>w(I.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"contact-message",children:"Votre message"}),i.jsx(_s,{id:"contact-message",value:m,onChange:I=>p(I.target.value),placeholder:"Décrivez votre intérêt pour cette annonce...",rows:6,className:"mt-1"})]}),i.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(_o,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"📧 Notification automatique"}),i.jsxs("p",{children:["Votre message sera envoyé via la messagerie StudyMarket ET ",t.sellerName," recevra une notification email pour répondre rapidement."]})]})]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(F,{variant:"outline",onClick:()=>u(!1),className:"flex-1",children:"Annuler"}),i.jsx(F,{onClick:S,disabled:b||!m.trim()||!v.trim(),className:"flex-1",children:b?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):i.jsxs(i.Fragment,{children:[i.jsx(zl,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),i.jsx(Coe,{open:d,onOpenChange:h,listing:t})]})},Toe=()=>{var x;const{id:t}=v1(),e=Mn(),{currentUser:n}=Zt(),{currentListing:r,loading:s,fetchListingById:a}=vm(),{fetchUserFavorites:o}=$O(),[l,c]=g.useState(0);if(g.useEffect(()=>{t&&a(t)},[t,a]),g.useEffect(()=>{n&&o(n.uid)},[n,o]),s)return i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"animate-pulse space-y-6",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!r)return i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsx(hn,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a été supprimée."}),i.jsx(F,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const u=r,d=(n==null?void 0:n.uid)===u.sellerId,h=(_,E)=>{if(u.transactionType==="donation")return"Gratuit";if(u.transactionType==="exchange")return"Échange";const S=E||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:S}).format(_)}catch{return`${_} €`}},m=_=>{switch(_){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return _}},p=_=>{switch(_){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-orange-100 text-orange-800 border-orange-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},v=()=>{switch(u.transactionType){case"donation":return i.jsx(Du,{className:"w-4 h-4"});case"exchange":return i.jsx(va,{className:"w-4 h-4"});case"service":return i.jsx(id,{className:"w-4 h-4"});default:return i.jsx(ff,{className:"w-4 h-4"})}},w=()=>{switch(u.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},b=()=>{u.images&&u.images.length>1&&c(_=>_===u.images.length-1?0:_+1)},y=()=>{u.images&&u.images.length>1&&c(_=>_===0?u.images.length-1:_-1)};return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx("div",{className:"border-b border-border bg-muted/30",children:i.jsx("div",{className:"container mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(be,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),i.jsx("span",{children:"/"}),i.jsx(be,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),i.jsx("span",{children:"/"}),i.jsx("span",{className:"text-foreground",children:u.title})]})})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs(F,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[i.jsx(sa,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:u.images&&u.images.length>0?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:u.images[l],alt:u.title,className:"w-full h-full object-cover"}),u.images.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:y,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image précédente",children:i.jsx(XY,{className:"w-6 h-6"})}),i.jsx("div",{onClick:b,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:i.jsx(mi,{className:"w-6 h-6"})}),i.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[l+1," / ",u.images.length]})]}),i.jsxs(aa,{children:[i.jsx(hu,{asChild:!0,children:i.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:i.jsx(yl,{className:"w-5 h-5"})})}),i.jsxs(Ni,{className:"max-w-4xl",children:[i.jsx(Si,{children:"Image en plein écran de l'annonce"}),i.jsx("img",{src:u.images[l],alt:u.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(yl,{className:"w-16 h-16 mx-auto mb-4"}),i.jsx("p",{children:"Aucune image disponible"})]})})}),u.images&&u.images.length>1&&i.jsx("div",{className:"grid grid-cols-6 gap-2",children:u.images.map((_,E)=>i.jsx("button",{onClick:()=>c(E),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${E===l?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:i.jsx("img",{src:_,alt:`${u.title} ${E+1}`,className:"w-full h-full object-cover"})},E))})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(Y,{children:i.jsx(Q,{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Ie,{className:"bg-primary/10 text-primary border-primary/20",children:[v(),i.jsx("span",{className:"ml-1",children:w()})]}),u.sellerVerified&&i.jsxs(Ie,{className:"bg-green-100 text-green-800 border-green-200",children:[i.jsx(Et,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),i.jsxs("div",{className:"text-3xl font-bold text-primary",children:[h(u.price,u.currency),u.transactionType==="service"&&i.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),u.transactionType==="exchange"&&u.exchangeFor&&i.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[i.jsx(va,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:"Recherche en échange :"})]}),i.jsx("p",{className:"text-purple-700 mt-1",children:u.exchangeFor})]}),u.aiPriceEstimate&&u.transactionType==="sale"&&i.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[i.jsx(lm,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:"Prix estimé par IA :"})]}),i.jsxs("p",{className:"text-green-700 text-sm",children:[u.aiPriceEstimate.min,"€ - ",u.aiPriceEstimate.max,"€",i.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(u.aiPriceEstimate.confidence*100),"%)"]})]})]}),i.jsx("div",{className:"space-y-3",children:d?i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{to:`/edit-listing/${u.id}`,children:i.jsxs(F,{variant:"outline",className:"w-full",children:[i.jsx(or,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),i.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):i.jsxs(i.Fragment,{children:[i.jsx(koe,{listing:u,className:"w-full"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(UO,{listing:u,size:"lg",showText:!1}),i.jsx(zO,{listing:u,size:"lg",showText:!1})]}),i.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:i.jsx(ml,{className:"w-5 h-5"})})]})]})})]})})}),i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsx(Re,{className:"text-lg",children:"Vendeur"})}),i.jsx(Q,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Jr,{className:"w-12 h-12",children:[i.jsx(ba,{src:u.sellerAvatar||void 0}),i.jsx(Pr,{children:(x=u.sellerName[0])==null?void 0:x.toUpperCase()})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-semibold",children:u.sellerName}),u.sellerVerified&&i.jsx(Et,{className:"w-4 h-4 text-green-600"})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:u.sellerUniversity})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"23"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"98%"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),u.environmentalImpact&&i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"text-lg flex items-center gap-2",children:[i.jsx(Hs,{className:"w-5 h-5 text-green-600"}),"Impact écologique"]})}),i.jsx(Q,{children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",u.environmentalImpact.co2Saved," kg CO₂"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"économisés en achetant d'occasion"})]})})]})]})]}),i.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:u.title}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ru,{className:"w-4 h-4"}),i.jsxs("span",{children:[u.views," vues"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(dn,{className:"w-4 h-4"}),i.jsx("span",{children:fd(u.createdAt,{addSuffix:!0,locale:sr})})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qn,{className:"w-4 h-4"}),i.jsx("span",{children:u.location.city})]})]})]}),i.jsx(Ie,{className:p(u.condition),children:m(u.condition)})]})}),i.jsx(Q,{children:i.jsx("div",{className:"prose prose-sm max-w-none",children:i.jsx("p",{className:"whitespace-pre-wrap",children:u.description})})})]}),u.tags&&u.tags.length>0&&i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsx(Re,{className:"text-lg",children:"Tags"})}),i.jsx(Q,{children:i.jsx("div",{className:"flex flex-wrap gap-2",children:u.tags.map((_,E)=>i.jsx(Ie,{variant:"secondary",children:_},E))})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"text-lg flex items-center gap-2",children:[i.jsx(qn,{className:"w-5 h-5"}),"Localisation"]})}),i.jsxs(Q,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:u.location.city}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.location.state,", ",u.location.country]})]}),u.location.campus&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Campus"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:u.location.campus})]}),u.location.university&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Université"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:u.location.university})]})]})]}),i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"text-lg flex items-center gap-2",children:[i.jsx(Et,{className:"w-5 h-5"}),"Conseils de sécurité"]})}),i.jsx(Q,{children:i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(xt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(xt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Vérifiez l'identité de l'autre personne"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(xt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Testez l'objet avant la transaction"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(_o,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]})]})};var jm=t=>t.type==="checkbox",Kc=t=>t instanceof Date,vr=t=>t==null;const GL=t=>typeof t=="object";var Nn=t=>!vr(t)&&!Array.isArray(t)&&GL(t)&&!Kc(t),Ioe=t=>Nn(t)&&t.target?jm(t.target)?t.target.checked:t.target.value:t,Aoe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Poe=(t,e)=>t.has(Aoe(e)),Roe=t=>{const e=t.constructor&&t.constructor.prototype;return Nn(e)&&e.hasOwnProperty("isPrototypeOf")},_N=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cs(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(_N&&(t instanceof Blob||t instanceof FileList))&&(n||Nn(t)))if(e=n?[]:{},!n&&!Roe(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=cs(t[r]));else return t;return e}var iy=t=>Array.isArray(t)?t.filter(Boolean):[],fn=t=>t===void 0,Ce=(t,e,n)=>{if(!e||!Nn(t))return n;const r=iy(e.split(/[,[\].]+?/)).reduce((s,a)=>vr(s)?s:s[a],t);return fn(r)||r===t?fn(t[e])?n:t[e]:r},oi=t=>typeof t=="boolean",jN=t=>/^\w*$/.test(t),KL=t=>iy(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Rt=(t,e,n)=>{let r=-1;const s=jN(e)?[e]:KL(e),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let c=n;if(r!==o){const u=t[l];c=Nn(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(l==="__proto__")return;t[l]=c,t=t[l]}return t};const Y2={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},$s={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ui={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Se.createContext(null);var Doe=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const o=a;return e._proxyFormState[o]!==$s.all&&(e._proxyFormState[o]=!r||$s.all),t[o]}});return s},Cr=t=>Nn(t)&&!Object.keys(t).length,Moe=(t,e,n,r)=>{n(t);const{name:s,...a}=t;return Cr(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===$s.all)},ug=t=>Array.isArray(t)?t:[t];function Ooe(t){const e=Se.useRef(t);e.current=t,Se.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var gi=t=>typeof t=="string",Loe=(t,e,n,r,s)=>gi(t)?(r&&e.watch.add(t),Ce(n,t,s)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),Ce(n,a))):(r&&(e.watchAll=!0),n),YL=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Q2=t=>({isOnSubmit:!t||t===$s.onSubmit,isOnBlur:t===$s.onBlur,isOnChange:t===$s.onChange,isOnAll:t===$s.all,isOnTouch:t===$s.onTouched}),J2=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Ih=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const a=Ce(t,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Ih(l,e))break}else if(Nn(l)&&Ih(l,e))break}}};var Voe=(t,e,n)=>{const r=ug(Ce(t,n));return Rt(r,"root",e[n]),Rt(t,n,r),t},NN=t=>t.type==="file",ea=t=>typeof t=="function",wv=t=>{if(!_N)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},dg=t=>gi(t),SN=t=>t.type==="radio",bv=t=>t instanceof RegExp;const X2={value:!1,isValid:!1},Z2={value:!0,isValid:!0};var QL=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!fn(t[0].attributes.value)?fn(t[0].value)||t[0].value===""?Z2:{value:t[0].value,isValid:!0}:Z2:X2}return X2};const eT={isValid:!1,value:null};var JL=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,eT):eT;function tT(t,e,n="validate"){if(dg(t)||Array.isArray(t)&&t.every(dg)||oi(t)&&!t)return{type:n,message:dg(t)?t:"",ref:e}}var Nc=t=>Nn(t)&&!bv(t)?t:{value:t,message:""},nT=async(t,e,n,r,s)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:m,validate:p,name:v,valueAsNumber:w,mount:b,disabled:y}=t._f,x=Ce(e,v);if(!b||y)return{};const _=o?o[0]:a,E=T=>{r&&_.reportValidity&&(_.setCustomValidity(oi(T)?"":T||""),_.reportValidity())},S={},D=SN(a),I=jm(a),A=D||I,R=(w||NN(a))&&fn(a.value)&&fn(x)||wv(a)&&a.value===""||x===""||Array.isArray(x)&&!x.length,N=YL.bind(null,v,n,S),P=(T,C,V,z=Ui.maxLength,H=Ui.minLength)=>{const $=T?C:V;S[v]={type:T?z:H,message:$,ref:a,...N(T?z:H,$)}};if(s?!Array.isArray(x)||!x.length:l&&(!A&&(R||vr(x))||oi(x)&&!x||I&&!QL(o).isValid||D&&!JL(o).isValid)){const{value:T,message:C}=dg(l)?{value:!!l,message:l}:Nc(l);if(T&&(S[v]={type:Ui.required,message:C,ref:_,...N(Ui.required,C)},!n))return E(C),S}if(!R&&(!vr(d)||!vr(h))){let T,C;const V=Nc(h),z=Nc(d);if(!vr(x)&&!isNaN(x)){const H=a.valueAsNumber||x&&+x;vr(V.value)||(T=H>V.value),vr(z.value)||(C=H<z.value)}else{const H=a.valueAsDate||new Date(x),$=U=>new Date(new Date().toDateString()+" "+U),L=a.type=="time",W=a.type=="week";gi(V.value)&&x&&(T=L?$(x)>$(V.value):W?x>V.value:H>new Date(V.value)),gi(z.value)&&x&&(C=L?$(x)<$(z.value):W?x<z.value:H<new Date(z.value))}if((T||C)&&(P(!!T,V.message,z.message,Ui.max,Ui.min),!n))return E(S[v].message),S}if((c||u)&&!R&&(gi(x)||s&&Array.isArray(x))){const T=Nc(c),C=Nc(u),V=!vr(T.value)&&x.length>+T.value,z=!vr(C.value)&&x.length<+C.value;if((V||z)&&(P(V,T.message,C.message),!n))return E(S[v].message),S}if(m&&!R&&gi(x)){const{value:T,message:C}=Nc(m);if(bv(T)&&!x.match(T)&&(S[v]={type:Ui.pattern,message:C,ref:a,...N(Ui.pattern,C)},!n))return E(C),S}if(p){if(ea(p)){const T=await p(x,e),C=tT(T,_);if(C&&(S[v]={...C,...N(Ui.validate,C.message)},!n))return E(C.message),S}else if(Nn(p)){let T={};for(const C in p){if(!Cr(T)&&!n)break;const V=tT(await p[C](x,e),_,C);V&&(T={...V,...N(C,V.message)},E(V.message),n&&(S[v]=T))}if(!Cr(T)&&(S[v]={ref:_,...T},!n))return S}}return E(!0),S};function Foe(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=fn(t)?r++:t[e[r++]];return t}function $oe(t){for(const e in t)if(t.hasOwnProperty(e)&&!fn(t[e]))return!1;return!0}function Cn(t,e){const n=Array.isArray(e)?e:jN(e)?[e]:KL(e),r=n.length===1?t:Foe(t,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(Nn(r)&&Cr(r)||Array.isArray(r)&&$oe(r))&&Cn(t,n.slice(0,-1)),t}var K0=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},_v=t=>vr(t)||!GL(t);function Ka(t,e){if(_v(t)||_v(e))return t===e;if(Kc(t)&&Kc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const a=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(Kc(a)&&Kc(o)||Nn(a)&&Nn(o)||Array.isArray(a)&&Array.isArray(o)?!Ka(a,o):a!==o)return!1}}return!0}var XL=t=>t.type==="select-multiple",Uoe=t=>SN(t)||jm(t),Y0=t=>wv(t)&&t.isConnected,ZL=t=>{for(const e in t)if(ea(t[e]))return!0;return!1};function jv(t,e={}){const n=Array.isArray(t);if(Nn(t)||n)for(const r in t)Array.isArray(t[r])||Nn(t[r])&&!ZL(t[r])?(e[r]=Array.isArray(t[r])?[]:{},jv(t[r],e[r])):vr(t[r])||(e[r]=!0);return e}function e5(t,e,n){const r=Array.isArray(t);if(Nn(t)||r)for(const s in t)Array.isArray(t[s])||Nn(t[s])&&!ZL(t[s])?fn(e)||_v(n[s])?n[s]=Array.isArray(t[s])?jv(t[s],[]):{...jv(t[s])}:e5(t[s],vr(e)?{}:e[s],n[s]):n[s]=!Ka(t[s],e[s]);return n}var Ep=(t,e)=>e5(t,e,jv(e)),t5=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>fn(t)?t:e?t===""?NaN:t&&+t:n&&gi(t)?new Date(t):r?r(t):t;function Q0(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return NN(e)?e.files:SN(e)?JL(t.refs).value:XL(e)?[...e.selectedOptions].map(({value:n})=>n):jm(e)?QL(t.refs).value:t5(fn(e.value)?t.ref.value:e.value,t)}var zoe=(t,e,n,r)=>{const s={};for(const a of t){const o=Ce(e,a);o&&Rt(s,a,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Gd=t=>fn(t)?t:bv(t)?t.source:Nn(t)?bv(t.value)?t.value.source:t.value:t;const rT="AsyncFunction";var Boe=t=>(!t||!t.validate)&&!!(ea(t.validate)&&t.validate.constructor.name===rT||Nn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===rT)),qoe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function sT(t,e,n){const r=Ce(t,n);if(r||jN(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=Ce(e,a),l=Ce(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};s.pop()}return{name:n}}var Woe=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,Hoe=(t,e)=>!iy(Ce(t,e)).length&&Cn(t,e);const Goe={mode:$s.onSubmit,reValidateMode:$s.onChange,shouldFocusError:!0};function Koe(t={}){let e={...Goe,...t},n={submitCount:0,isDirty:!1,isLoading:ea(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=Nn(e.defaultValues)||Nn(e.values)?cs(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:cs(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:K0(),array:K0(),state:K0()},m=Q2(e.mode),p=Q2(e.reValidateMode),v=e.criteriaMode===$s.all,w=O=>B=>{clearTimeout(u),u=setTimeout(O,B)},b=async O=>{if(d.isValid||O){const B=e.resolver?Cr((await A()).errors):await N(r,!0);B!==n.isValid&&h.state.next({isValid:B})}},y=(O,B)=>{(d.isValidating||d.validatingFields)&&((O||Array.from(l.mount)).forEach(K=>{K&&(B?Rt(n.validatingFields,K,B):Cn(n.validatingFields,K))}),h.state.next({validatingFields:n.validatingFields,isValidating:!Cr(n.validatingFields)}))},x=(O,B=[],K,je,xe=!0,me=!0)=>{if(je&&K){if(o.action=!0,me&&Array.isArray(Ce(r,O))){const Oe=K(Ce(r,O),je.argA,je.argB);xe&&Rt(r,O,Oe)}if(me&&Array.isArray(Ce(n.errors,O))){const Oe=K(Ce(n.errors,O),je.argA,je.argB);xe&&Rt(n.errors,O,Oe),Hoe(n.errors,O)}if(d.touchedFields&&me&&Array.isArray(Ce(n.touchedFields,O))){const Oe=K(Ce(n.touchedFields,O),je.argA,je.argB);xe&&Rt(n.touchedFields,O,Oe)}d.dirtyFields&&(n.dirtyFields=Ep(s,a)),h.state.next({name:O,isDirty:T(O,B),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Rt(a,O,B)},_=(O,B)=>{Rt(n.errors,O,B),h.state.next({errors:n.errors})},E=O=>{n.errors=O,h.state.next({errors:n.errors,isValid:!1})},S=(O,B,K,je)=>{const xe=Ce(r,O);if(xe){const me=Ce(a,O,fn(K)?Ce(s,O):K);fn(me)||je&&je.defaultChecked||B?Rt(a,O,B?me:Q0(xe._f)):z(O,me),o.mount&&b()}},D=(O,B,K,je,xe)=>{let me=!1,Oe=!1;const _t={name:O},ht=!!(Ce(r,O)&&Ce(r,O)._f&&Ce(r,O)._f.disabled);if(!K||je){d.isDirty&&(Oe=n.isDirty,n.isDirty=_t.isDirty=T(),me=Oe!==_t.isDirty);const gt=ht||Ka(Ce(s,O),B);Oe=!!(!ht&&Ce(n.dirtyFields,O)),gt||ht?Cn(n.dirtyFields,O):Rt(n.dirtyFields,O,!0),_t.dirtyFields=n.dirtyFields,me=me||d.dirtyFields&&Oe!==!gt}if(K){const gt=Ce(n.touchedFields,O);gt||(Rt(n.touchedFields,O,K),_t.touchedFields=n.touchedFields,me=me||d.touchedFields&&gt!==K)}return me&&xe&&h.state.next(_t),me?_t:{}},I=(O,B,K,je)=>{const xe=Ce(n.errors,O),me=d.isValid&&oi(B)&&n.isValid!==B;if(t.delayError&&K?(c=w(()=>_(O,K)),c(t.delayError)):(clearTimeout(u),c=null,K?Rt(n.errors,O,K):Cn(n.errors,O)),(K?!Ka(xe,K):xe)||!Cr(je)||me){const Oe={...je,...me&&oi(B)?{isValid:B}:{},errors:n.errors,name:O};n={...n,...Oe},h.state.next(Oe)}},A=async O=>{y(O,!0);const B=await e.resolver(a,e.context,zoe(O||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return y(O),B},R=async O=>{const{errors:B}=await A(O);if(O)for(const K of O){const je=Ce(B,K);je?Rt(n.errors,K,je):Cn(n.errors,K)}else n.errors=B;return B},N=async(O,B,K={valid:!0})=>{for(const je in O){const xe=O[je];if(xe){const{_f:me,...Oe}=xe;if(me){const _t=l.array.has(me.name),ht=xe._f&&Boe(xe._f);ht&&d.validatingFields&&y([je],!0);const gt=await nT(xe,a,v,e.shouldUseNativeValidation&&!B,_t);if(ht&&d.validatingFields&&y([je]),gt[me.name]&&(K.valid=!1,B))break;!B&&(Ce(gt,me.name)?_t?Voe(n.errors,gt,me.name):Rt(n.errors,me.name,gt[me.name]):Cn(n.errors,me.name))}!Cr(Oe)&&await N(Oe,B,K)}}return K.valid},P=()=>{for(const O of l.unMount){const B=Ce(r,O);B&&(B._f.refs?B._f.refs.every(K=>!Y0(K)):!Y0(B._f.ref))&&fe(O)}l.unMount=new Set},T=(O,B)=>(O&&B&&Rt(a,O,B),!Ka(Z(),s)),C=(O,B,K)=>Loe(O,l,{...o.mount?a:fn(B)?s:gi(O)?{[O]:B}:B},K,B),V=O=>iy(Ce(o.mount?a:s,O,t.shouldUnregister?Ce(s,O,[]):[])),z=(O,B,K={})=>{const je=Ce(r,O);let xe=B;if(je){const me=je._f;me&&(!me.disabled&&Rt(a,O,t5(B,me)),xe=wv(me.ref)&&vr(B)?"":B,XL(me.ref)?[...me.ref.options].forEach(Oe=>Oe.selected=xe.includes(Oe.value)):me.refs?jm(me.ref)?me.refs.length>1?me.refs.forEach(Oe=>(!Oe.defaultChecked||!Oe.disabled)&&(Oe.checked=Array.isArray(xe)?!!xe.find(_t=>_t===Oe.value):xe===Oe.value)):me.refs[0]&&(me.refs[0].checked=!!xe):me.refs.forEach(Oe=>Oe.checked=Oe.value===xe):NN(me.ref)?me.ref.value="":(me.ref.value=xe,me.ref.type||h.values.next({name:O,values:{...a}})))}(K.shouldDirty||K.shouldTouch)&&D(O,xe,K.shouldTouch,K.shouldDirty,!0),K.shouldValidate&&U(O)},H=(O,B,K)=>{for(const je in B){const xe=B[je],me=`${O}.${je}`,Oe=Ce(r,me);(l.array.has(O)||!_v(xe)||Oe&&!Oe._f)&&!Kc(xe)?H(me,xe,K):z(me,xe,K)}},$=(O,B,K={})=>{const je=Ce(r,O),xe=l.array.has(O),me=cs(B);Rt(a,O,me),xe?(h.array.next({name:O,values:{...a}}),(d.isDirty||d.dirtyFields)&&K.shouldDirty&&h.state.next({name:O,dirtyFields:Ep(s,a),isDirty:T(O,me)})):je&&!je._f&&!vr(me)?H(O,me,K):z(O,me,K),J2(O,l)&&h.state.next({...n}),h.values.next({name:o.mount?O:void 0,values:{...a}})},L=async O=>{o.mount=!0;const B=O.target;let K=B.name,je=!0;const xe=Ce(r,K),me=()=>B.type?Q0(xe._f):Ioe(O),Oe=_t=>{je=Number.isNaN(_t)||Ka(_t,Ce(a,K,_t))};if(xe){let _t,ht;const gt=me(),ls=O.type===Y2.BLUR||O.type===Y2.FOCUS_OUT,Tm=!qoe(xe._f)&&!e.resolver&&!Ce(n.errors,K)&&!xe._f.deps||Woe(ls,Ce(n.touchedFields,K),n.isSubmitted,p,m),dc=J2(K,l,ls);Rt(a,K,gt),ls?(xe._f.onBlur&&xe._f.onBlur(O),c&&c(0)):xe._f.onChange&&xe._f.onChange(O);const xd=D(K,gt,ls,!1),Go=!Cr(xd)||dc;if(!ls&&h.values.next({name:K,type:O.type,values:{...a}}),Tm)return d.isValid&&(t.mode==="onBlur"?ls&&b():b()),Go&&h.state.next({name:K,...dc?{}:xd});if(!ls&&dc&&h.state.next({...n}),e.resolver){const{errors:yd}=await A([K]);if(Oe(gt),je){const Im=sT(n.errors,r,K),hc=sT(yd,r,Im.name||K);_t=hc.error,K=hc.name,ht=Cr(yd)}}else y([K],!0),_t=(await nT(xe,a,v,e.shouldUseNativeValidation))[K],y([K]),Oe(gt),je&&(_t?ht=!1:d.isValid&&(ht=await N(r,!0)));je&&(xe._f.deps&&U(xe._f.deps),I(K,ht,_t,xd))}},W=(O,B)=>{if(Ce(n.errors,B)&&O.focus)return O.focus(),1},U=async(O,B={})=>{let K,je;const xe=ug(O);if(e.resolver){const me=await R(fn(O)?O:xe);K=Cr(me),je=O?!xe.some(Oe=>Ce(me,Oe)):K}else O?(je=(await Promise.all(xe.map(async me=>{const Oe=Ce(r,me);return await N(Oe&&Oe._f?{[me]:Oe}:Oe)}))).every(Boolean),!(!je&&!n.isValid)&&b()):je=K=await N(r);return h.state.next({...!gi(O)||d.isValid&&K!==n.isValid?{}:{name:O},...e.resolver||!O?{isValid:K}:{},errors:n.errors}),B.shouldFocus&&!je&&Ih(r,W,O?xe:l.mount),je},Z=O=>{const B={...o.mount?a:s};return fn(O)?B:gi(O)?Ce(B,O):O.map(K=>Ce(B,K))},oe=(O,B)=>({invalid:!!Ce((B||n).errors,O),isDirty:!!Ce((B||n).dirtyFields,O),error:Ce((B||n).errors,O),isValidating:!!Ce(n.validatingFields,O),isTouched:!!Ce((B||n).touchedFields,O)}),ke=O=>{O&&ug(O).forEach(B=>Cn(n.errors,B)),h.state.next({errors:O?n.errors:{}})},et=(O,B,K)=>{const je=(Ce(r,O,{_f:{}})._f||{}).ref,xe=Ce(n.errors,O)||{},{ref:me,message:Oe,type:_t,...ht}=xe;Rt(n.errors,O,{...ht,...B,ref:je}),h.state.next({name:O,errors:n.errors,isValid:!1}),K&&K.shouldFocus&&je&&je.focus&&je.focus()},ae=(O,B)=>ea(O)?h.values.subscribe({next:K=>O(C(void 0,B),K)}):C(O,B,!0),fe=(O,B={})=>{for(const K of O?ug(O):l.mount)l.mount.delete(K),l.array.delete(K),B.keepValue||(Cn(r,K),Cn(a,K)),!B.keepError&&Cn(n.errors,K),!B.keepDirty&&Cn(n.dirtyFields,K),!B.keepTouched&&Cn(n.touchedFields,K),!B.keepIsValidating&&Cn(n.validatingFields,K),!e.shouldUnregister&&!B.keepDefaultValue&&Cn(s,K);h.values.next({values:{...a}}),h.state.next({...n,...B.keepDirty?{isDirty:T()}:{}}),!B.keepIsValid&&b()},ce=({disabled:O,name:B,field:K,fields:je,value:xe})=>{if(oi(O)&&o.mount||O){const me=O?void 0:fn(xe)?Q0(K?K._f:Ce(je,B)._f):xe;Rt(a,B,me),D(B,me,!1,!1,!0)}},Ue=(O,B={})=>{let K=Ce(r,O);const je=oi(B.disabled)||oi(t.disabled);return Rt(r,O,{...K||{},_f:{...K&&K._f?K._f:{ref:{name:O}},name:O,mount:!0,...B}}),l.mount.add(O),K?ce({field:K,disabled:oi(B.disabled)?B.disabled:t.disabled,name:O,value:B.value}):S(O,!0,B.value),{...je?{disabled:B.disabled||t.disabled}:{},...e.progressive?{required:!!B.required,min:Gd(B.min),max:Gd(B.max),minLength:Gd(B.minLength),maxLength:Gd(B.maxLength),pattern:Gd(B.pattern)}:{},name:O,onChange:L,onBlur:L,ref:xe=>{if(xe){Ue(O,B),K=Ce(r,O);const me=fn(xe.value)&&xe.querySelectorAll&&xe.querySelectorAll("input,select,textarea")[0]||xe,Oe=Uoe(me),_t=K._f.refs||[];if(Oe?_t.find(ht=>ht===me):me===K._f.ref)return;Rt(r,O,{_f:{...K._f,...Oe?{refs:[..._t.filter(Y0),me,...Array.isArray(Ce(s,O))?[{}]:[]],ref:{type:me.type,name:O}}:{ref:me}}}),S(O,!1,void 0,me)}else K=Ce(r,O,{}),K._f&&(K._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(Poe(l.array,O)&&o.action)&&l.unMount.add(O)}}},J=()=>e.shouldFocusError&&Ih(r,W,l.mount),pe=O=>{oi(O)&&(h.state.next({disabled:O}),Ih(r,(B,K)=>{const je=Ce(r,K);je&&(B.disabled=je._f.disabled||O,Array.isArray(je._f.refs)&&je._f.refs.forEach(xe=>{xe.disabled=je._f.disabled||O}))},0,!1))},G=(O,B)=>async K=>{let je;K&&(K.preventDefault&&K.preventDefault(),K.persist&&K.persist());let xe=cs(a);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:me,values:Oe}=await A();n.errors=me,xe=Oe}else await N(r);if(Cn(n.errors,"root"),Cr(n.errors)){h.state.next({errors:{}});try{await O(xe,K)}catch(me){je=me}}else B&&await B({...n.errors},K),J(),setTimeout(J);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Cr(n.errors)&&!je,submitCount:n.submitCount+1,errors:n.errors}),je)throw je},re=(O,B={})=>{Ce(r,O)&&(fn(B.defaultValue)?$(O,cs(Ce(s,O))):($(O,B.defaultValue),Rt(s,O,cs(B.defaultValue))),B.keepTouched||Cn(n.touchedFields,O),B.keepDirty||(Cn(n.dirtyFields,O),n.isDirty=B.defaultValue?T(O,cs(Ce(s,O))):T()),B.keepError||(Cn(n.errors,O),d.isValid&&b()),h.state.next({...n}))},ie=(O,B={})=>{const K=O?cs(O):s,je=cs(K),xe=Cr(O),me=xe?s:je;if(B.keepDefaultValues||(s=K),!B.keepValues){if(B.keepDirtyValues)for(const Oe of l.mount)Ce(n.dirtyFields,Oe)?Rt(me,Oe,Ce(a,Oe)):$(Oe,Ce(me,Oe));else{if(_N&&fn(O))for(const Oe of l.mount){const _t=Ce(r,Oe);if(_t&&_t._f){const ht=Array.isArray(_t._f.refs)?_t._f.refs[0]:_t._f.ref;if(wv(ht)){const gt=ht.closest("form");if(gt){gt.reset();break}}}}r={}}a=t.shouldUnregister?B.keepDefaultValues?cs(s):{}:cs(me),h.array.next({values:{...me}}),h.values.next({values:{...me}})}l={mount:B.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:B.keepSubmitCount?n.submitCount:0,isDirty:xe?!1:B.keepDirty?n.isDirty:!!(B.keepDefaultValues&&!Ka(O,s)),isSubmitted:B.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:xe?{}:B.keepDirtyValues?B.keepDefaultValues&&a?Ep(s,a):n.dirtyFields:B.keepDefaultValues&&O?Ep(s,O):B.keepDirty?n.dirtyFields:{},touchedFields:B.keepTouched?n.touchedFields:{},errors:B.keepErrors?n.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ae=(O,B)=>ie(ea(O)?O(a):O,B);return{control:{register:Ue,unregister:fe,getFieldState:oe,handleSubmit:G,setError:et,_executeSchema:A,_getWatch:C,_getDirty:T,_updateValid:b,_removeUnmounted:P,_updateFieldArray:x,_updateDisabledField:ce,_getFieldArray:V,_reset:ie,_resetDefaultValues:()=>ea(e.defaultValues)&&e.defaultValues().then(O=>{Ae(O,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:O=>{n={...n,...O}},_disableForm:pe,_subjects:h,_proxyFormState:d,_setErrors:E,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(O){o=O},get _defaultValues(){return s},get _names(){return l},set _names(O){l=O},get _formState(){return n},set _formState(O){n=O},get _options(){return e},set _options(O){e={...e,...O}}},trigger:U,register:Ue,handleSubmit:G,watch:ae,setValue:$,getValues:Z,reset:Ae,resetField:re,clearErrors:ke,unregister:fe,setError:et,setFocus:(O,B={})=>{const K=Ce(r,O),je=K&&K._f;if(je){const xe=je.refs?je.refs[0]:je.ref;xe.focus&&(xe.focus(),B.shouldSelect&&xe.select())}},getFieldState:oe}}function _l(t={}){const e=Se.useRef(),n=Se.useRef(),[r,s]=Se.useState({isDirty:!1,isValidating:!1,isLoading:ea(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:ea(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Koe(t),formState:r});const a=e.current.control;return a._options=t,Ooe({subject:a._subjects.state,next:o=>{Moe(o,a._proxyFormState,a._updateFormState)&&s({...a._formState})}}),Se.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Se.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),Se.useEffect(()=>{t.values&&!Ka(t.values,n.current)?(a._reset(t.values,a._options.resetOptions),n.current=t.values,s(o=>({...o}))):a._resetDefaultValues()},[t.values,a]),Se.useEffect(()=>{t.errors&&a._setErrors(t.errors)},[t.errors,a]),Se.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),Se.useEffect(()=>{t.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[t.shouldUnregister,a]),e.current.formState=Doe(r,a),e.current}const iT=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Ce(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},n5=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?iT(r.ref,n,t):r.refs&&r.refs.forEach(s=>iT(s,n,t))}},Yoe=(t,e)=>{e.shouldUseNativeValidation&&n5(t,e);const n={};for(const r in t){const s=Ce(e.fields,r),a=Object.assign(t[r]||{},{ref:s&&s.ref});if(Qoe(e.names||Object.keys(t),r)){const o=Object.assign({},Ce(n,r));Rt(o,"root",a),Rt(n,r,o)}else Rt(n,r,a)}return n},Qoe=(t,e)=>t.some(n=>n.startsWith(e+"."));var Joe=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=YL(o,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n},jl=function(t,e,n){return n===void 0&&(n={}),function(r,s,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return a.shouldUseNativeValidation&&n5({},a),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Yoe(Joe(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},yt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const a={};for(const o of s)a[o]=o;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of a)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(const o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(yt||(yt={}));var e_;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(e_||(e_={}));const Ee=yt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ya=t=>{switch(typeof t){case"undefined":return Ee.undefined;case"string":return Ee.string;case"number":return isNaN(t)?Ee.nan:Ee.number;case"boolean":return Ee.boolean;case"function":return Ee.function;case"bigint":return Ee.bigint;case"symbol":return Ee.symbol;case"object":return Array.isArray(t)?Ee.array:t===null?Ee.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ee.promise:typeof Map<"u"&&t instanceof Map?Ee.map:typeof Set<"u"&&t instanceof Set?Ee.set:typeof Date<"u"&&t instanceof Date?Ee.date:Ee.object;default:return Ee.unknown}},ue=yt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Xoe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ns extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),r}static assert(e){if(!(e instanceof ns))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,yt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ns.create=t=>new ns(t);const zu=(t,e)=>{let n;switch(t.code){case ue.invalid_type:t.received===Ee.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,yt.jsonStringifyReplacer)}`;break;case ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${yt.joinValues(t.keys,", ")}`;break;case ue.invalid_union:n="Invalid input";break;case ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${yt.joinValues(t.options)}`;break;case ue.invalid_enum_value:n=`Invalid enum value. Expected ${yt.joinValues(t.options)}, received '${t.received}'`;break;case ue.invalid_arguments:n="Invalid function arguments";break;case ue.invalid_return_type:n="Invalid function return type";break;case ue.invalid_date:n="Invalid date";break;case ue.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:yt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ue.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ue.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ue.custom:n="Invalid input";break;case ue.invalid_intersection_types:n="Intersection results could not be merged";break;case ue.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ue.not_finite:n="Number must be finite";break;default:n=e.defaultError,yt.assertNever(t)}return{message:n}};let r5=zu;function Zoe(t){r5=t}function Nv(){return r5}const Sv=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,a=[...n,...s.path||[]],o={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...s,path:a,message:l}},ele=[];function Ne(t,e){const n=Nv(),r=Sv({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===zu?void 0:zu].filter(s=>!!s)});t.common.issues.push(r)}class ur{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ge;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const a=await s.key,o=await s.value;r.push({key:a,value:o})}return ur.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return Ge;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const Ge=Object.freeze({status:"aborted"}),Yc=t=>({status:"dirty",value:t}),_r=t=>({status:"valid",value:t}),t_=t=>t.status==="aborted",n_=t=>t.status==="dirty",jf=t=>t.status==="valid",Nf=t=>typeof Promise<"u"&&t instanceof Promise;function Ev(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function s5(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Ve;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ve||(Ve={}));var oh,lh;class Ai{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const aT=(t,e)=>{if(jf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ns(t.common.issues);return this._error=n,this._error}}};function nt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{var c,u;const{message:d}=t;return o.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:l.defaultError}},description:s}}class st{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ya(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ya(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ur,ctx:{common:e.parent.common,data:e.data,parsedType:Ya(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Nf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ya(e)},a=this._parseSync({data:e,path:s.path,parent:s});return aT(s,a)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ya(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(Nf(s)?s:Promise.resolve(s));return aT(r,a)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,a)=>{const o=e(s),l=()=>a.addIssue({code:ue.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new ti({schema:this,typeName:qe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ei.create(this,this._def)}nullable(){return Ao.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Gs.create(this,this._def)}promise(){return qu.create(this,this._def)}or(e){return kf.create([this,e],this._def)}and(e){return Tf.create(this,e,this._def)}transform(e){return new ti({...nt(this._def),schema:this,typeName:qe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Df({...nt(this._def),innerType:this,defaultValue:n,typeName:qe.ZodDefault})}brand(){return new EN({typeName:qe.ZodBranded,type:this,...nt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Mf({...nt(this._def),innerType:this,catchValue:n,typeName:qe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Nm.create(this,e)}readonly(){return Of.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const tle=/^c[^\s-]{8,}$/i,nle=/^[0-9a-z]+$/,rle=/^[0-9A-HJKMNP-TV-Z]{26}$/,sle=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ile=/^[a-z0-9_-]{21}$/i,ale=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ole=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,lle="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let J0;const cle=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ule=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,dle=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,i5="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hle=new RegExp(`^${i5}$`);function a5(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function fle(t){return new RegExp(`^${a5(t)}$`)}function o5(t){let e=`${i5}T${a5(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function mle(t,e){return!!((e==="v4"||!e)&&cle.test(t)||(e==="v6"||!e)&&ule.test(t))}class zs extends st{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ee.string){const a=this._getOrReturnCtx(e);return Ne(a,{code:ue.invalid_type,expected:Ee.string,received:a.parsedType}),Ge}const r=new ur;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?Ne(s,{code:ue.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ne(s,{code:ue.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")ole.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"email",code:ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")J0||(J0=new RegExp(lle,"u")),J0.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"emoji",code:ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")sle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"uuid",code:ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")ile.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"nanoid",code:ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")tle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"cuid",code:ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")nle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"cuid2",code:ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")rle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"ulid",code:ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ne(s,{validation:"url",code:ue.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"regex",code:ue.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?o5(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?hle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?fle(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?ale.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"duration",code:ue.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?mle(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"ip",code:ue.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?dle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"base64",code:ue.invalid_string,message:a.message}),r.dirty()):yt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ue.invalid_string,...Ve.errToObj(r)})}_addCheck(e){return new zs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ve.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ve.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ve.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ve.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ve.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ve.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ve.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ve.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ve.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ve.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Ve.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ve.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ve.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ve.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ve.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ve.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ve.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ve.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ve.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ve.errToObj(n)})}nonempty(e){return this.min(1,Ve.errToObj(e))}trim(){return new zs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new zs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new zs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}zs.create=t=>{var e;return new zs({checks:[],typeName:qe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...nt(t)})};function ple(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,a=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return a%o/Math.pow(10,s)}class ko extends st{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ee.number){const a=this._getOrReturnCtx(e);return Ne(a,{code:ue.invalid_type,expected:Ee.number,received:a.parsedType}),Ge}let r;const s=new ur;for(const a of this._def.checks)a.kind==="int"?yt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ne(r,{code:ue.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ne(r,{code:ue.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ne(r,{code:ue.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?ple(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Ne(r,{code:ue.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ne(r,{code:ue.not_finite,message:a.message}),s.dirty()):yt.assertNever(a);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ve.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ve.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ve.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ve.toString(n))}setLimit(e,n,r,s){return new ko({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ve.toString(s)}]})}_addCheck(e){return new ko({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ve.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ve.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ve.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ve.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ve.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ve.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&yt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ko.create=t=>new ko({checks:[],typeName:qe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...nt(t)});class To extends st{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ee.bigint){const a=this._getOrReturnCtx(e);return Ne(a,{code:ue.invalid_type,expected:Ee.bigint,received:a.parsedType}),Ge}let r;const s=new ur;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ne(r,{code:ue.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ne(r,{code:ue.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ne(r,{code:ue.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):yt.assertNever(a);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ve.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ve.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ve.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ve.toString(n))}setLimit(e,n,r,s){return new To({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ve.toString(s)}]})}_addCheck(e){return new To({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ve.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ve.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}To.create=t=>{var e;return new To({checks:[],typeName:qe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...nt(t)})};class Sf extends st{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ee.boolean){const r=this._getOrReturnCtx(e);return Ne(r,{code:ue.invalid_type,expected:Ee.boolean,received:r.parsedType}),Ge}return _r(e.data)}}Sf.create=t=>new Sf({typeName:qe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...nt(t)});class Gl extends st{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ee.date){const a=this._getOrReturnCtx(e);return Ne(a,{code:ue.invalid_type,expected:Ee.date,received:a.parsedType}),Ge}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Ne(a,{code:ue.invalid_date}),Ge}const r=new ur;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):yt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Gl({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ve.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ve.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Gl.create=t=>new Gl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:qe.ZodDate,...nt(t)});class Cv extends st{_parse(e){if(this._getType(e)!==Ee.symbol){const r=this._getOrReturnCtx(e);return Ne(r,{code:ue.invalid_type,expected:Ee.symbol,received:r.parsedType}),Ge}return _r(e.data)}}Cv.create=t=>new Cv({typeName:qe.ZodSymbol,...nt(t)});class Ef extends st{_parse(e){if(this._getType(e)!==Ee.undefined){const r=this._getOrReturnCtx(e);return Ne(r,{code:ue.invalid_type,expected:Ee.undefined,received:r.parsedType}),Ge}return _r(e.data)}}Ef.create=t=>new Ef({typeName:qe.ZodUndefined,...nt(t)});class Cf extends st{_parse(e){if(this._getType(e)!==Ee.null){const r=this._getOrReturnCtx(e);return Ne(r,{code:ue.invalid_type,expected:Ee.null,received:r.parsedType}),Ge}return _r(e.data)}}Cf.create=t=>new Cf({typeName:qe.ZodNull,...nt(t)});class Bu extends st{constructor(){super(...arguments),this._any=!0}_parse(e){return _r(e.data)}}Bu.create=t=>new Bu({typeName:qe.ZodAny,...nt(t)});class Nl extends st{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _r(e.data)}}Nl.create=t=>new Nl({typeName:qe.ZodUnknown,...nt(t)});class _a extends st{_parse(e){const n=this._getOrReturnCtx(e);return Ne(n,{code:ue.invalid_type,expected:Ee.never,received:n.parsedType}),Ge}}_a.create=t=>new _a({typeName:qe.ZodNever,...nt(t)});class kv extends st{_parse(e){if(this._getType(e)!==Ee.undefined){const r=this._getOrReturnCtx(e);return Ne(r,{code:ue.invalid_type,expected:Ee.void,received:r.parsedType}),Ge}return _r(e.data)}}kv.create=t=>new kv({typeName:qe.ZodVoid,...nt(t)});class Gs extends st{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ee.array)return Ne(n,{code:ue.invalid_type,expected:Ee.array,received:n.parsedType}),Ge;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(o||l)&&(Ne(n,{code:o?ue.too_big:ue.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ne(n,{code:ue.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ne(n,{code:ue.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>s.type._parseAsync(new Ai(n,o,n.path,l)))).then(o=>ur.mergeArray(r,o));const a=[...n.data].map((o,l)=>s.type._parseSync(new Ai(n,o,n.path,l)));return ur.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Gs({...this._def,minLength:{value:e,message:Ve.toString(n)}})}max(e,n){return new Gs({...this._def,maxLength:{value:e,message:Ve.toString(n)}})}length(e,n){return new Gs({...this._def,exactLength:{value:e,message:Ve.toString(n)}})}nonempty(e){return this.min(1,e)}}Gs.create=(t,e)=>new Gs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:qe.ZodArray,...nt(e)});function Rc(t){if(t instanceof tn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ei.create(Rc(r))}return new tn({...t._def,shape:()=>e})}else return t instanceof Gs?new Gs({...t._def,type:Rc(t.element)}):t instanceof Ei?Ei.create(Rc(t.unwrap())):t instanceof Ao?Ao.create(Rc(t.unwrap())):t instanceof Pi?Pi.create(t.items.map(e=>Rc(e))):t}class tn extends st{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=yt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ee.object){const u=this._getOrReturnCtx(e);return Ne(u,{code:ue.invalid_type,expected:Ee.object,received:u.parsedType}),Ge}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof _a&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=a[u],h=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Ai(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof _a){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")l.length>0&&(Ne(s,{code:ue.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Ai(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>ur.mergeObjectSync(r,u)):ur.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ve.errToObj,new tn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,a,o,l;const c=(o=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Ve.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new tn({...this._def,unknownKeys:"strip"})}passthrough(){return new tn({...this._def,unknownKeys:"passthrough"})}extend(e){return new tn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new tn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:qe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new tn({...this._def,catchall:e})}pick(e){const n={};return yt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new tn({...this._def,shape:()=>n})}omit(e){const n={};return yt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new tn({...this._def,shape:()=>n})}deepPartial(){return Rc(this)}partial(e){const n={};return yt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new tn({...this._def,shape:()=>n})}required(e){const n={};return yt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Ei;)a=a._def.innerType;n[r]=a}}),new tn({...this._def,shape:()=>n})}keyof(){return l5(yt.objectKeys(this.shape))}}tn.create=(t,e)=>new tn({shape:()=>t,unknownKeys:"strip",catchall:_a.create(),typeName:qe.ZodObject,...nt(e)});tn.strictCreate=(t,e)=>new tn({shape:()=>t,unknownKeys:"strict",catchall:_a.create(),typeName:qe.ZodObject,...nt(e)});tn.lazycreate=(t,e)=>new tn({shape:t,unknownKeys:"strip",catchall:_a.create(),typeName:qe.ZodObject,...nt(e)});class kf extends st{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new ns(l.ctx.common.issues));return Ne(n,{code:ue.invalid_union,unionErrors:o}),Ge}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let a;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new ns(c));return Ne(n,{code:ue.invalid_union,unionErrors:l}),Ge}}get options(){return this._def.options}}kf.create=(t,e)=>new kf({options:t,typeName:qe.ZodUnion,...nt(e)});const zi=t=>t instanceof Af?zi(t.schema):t instanceof ti?zi(t.innerType()):t instanceof Pf?[t.value]:t instanceof Io?t.options:t instanceof Rf?yt.objectValues(t.enum):t instanceof Df?zi(t._def.innerType):t instanceof Ef?[void 0]:t instanceof Cf?[null]:t instanceof Ei?[void 0,...zi(t.unwrap())]:t instanceof Ao?[null,...zi(t.unwrap())]:t instanceof EN||t instanceof Of?zi(t.unwrap()):t instanceof Mf?zi(t._def.innerType):[];class ay extends st{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.object)return Ne(n,{code:ue.invalid_type,expected:Ee.object,received:n.parsedType}),Ge;const r=this.discriminator,s=n.data[r],a=this.optionsMap.get(s);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(Ne(n,{code:ue.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ge)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const a of n){const o=zi(a.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,a)}}return new ay({typeName:qe.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...nt(r)})}}function r_(t,e){const n=Ya(t),r=Ya(e);if(t===e)return{valid:!0,data:t};if(n===Ee.object&&r===Ee.object){const s=yt.objectKeys(e),a=yt.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=r_(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===Ee.array&&r===Ee.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=r_(o,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Ee.date&&r===Ee.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Tf extends st{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(a,o)=>{if(t_(a)||t_(o))return Ge;const l=r_(a.value,o.value);return l.valid?((n_(a)||n_(o))&&n.dirty(),{status:n.value,value:l.data}):(Ne(r,{code:ue.invalid_intersection_types}),Ge)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Tf.create=(t,e,n)=>new Tf({left:t,right:e,typeName:qe.ZodIntersection,...nt(n)});class Pi extends st{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.array)return Ne(r,{code:ue.invalid_type,expected:Ee.array,received:r.parsedType}),Ge;if(r.data.length<this._def.items.length)return Ne(r,{code:ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ge;!this._def.rest&&r.data.length>this._def.items.length&&(Ne(r,{code:ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ai(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>ur.mergeArray(n,o)):ur.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Pi({...this._def,rest:e})}}Pi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Pi({items:t,typeName:qe.ZodTuple,rest:null,...nt(e)})};class If extends st{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.object)return Ne(r,{code:ue.invalid_type,expected:Ee.object,received:r.parsedType}),Ge;const s=[],a=this._def.keyType,o=this._def.valueType;for(const l in r.data)s.push({key:a._parse(new Ai(r,l,r.path,l)),value:o._parse(new Ai(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?ur.mergeObjectAsync(n,s):ur.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof st?new If({keyType:e,valueType:n,typeName:qe.ZodRecord,...nt(r)}):new If({keyType:zs.create(),valueType:e,typeName:qe.ZodRecord,...nt(n)})}}class Tv extends st{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.map)return Ne(r,{code:ue.invalid_type,expected:Ee.map,received:r.parsedType}),Ge;const s=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:s._parse(new Ai(r,l,r.path,[u,"key"])),value:a._parse(new Ai(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Ge;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Ge;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}Tv.create=(t,e,n)=>new Tv({valueType:e,keyType:t,typeName:qe.ZodMap,...nt(n)});class Kl extends st{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.set)return Ne(r,{code:ue.invalid_type,expected:Ee.set,received:r.parsedType}),Ge;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ne(r,{code:ue.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ne(r,{code:ue.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Ge;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>a._parse(new Ai(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new Kl({...this._def,minSize:{value:e,message:Ve.toString(n)}})}max(e,n){return new Kl({...this._def,maxSize:{value:e,message:Ve.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Kl.create=(t,e)=>new Kl({valueType:t,minSize:null,maxSize:null,typeName:qe.ZodSet,...nt(e)});class mu extends st{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.function)return Ne(n,{code:ue.invalid_type,expected:Ee.function,received:n.parsedType}),Ge;function r(l,c){return Sv({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Nv(),zu].filter(u=>!!u),issueData:{code:ue.invalid_arguments,argumentsError:c}})}function s(l,c){return Sv({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Nv(),zu].filter(u=>!!u),issueData:{code:ue.invalid_return_type,returnTypeError:c}})}const a={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof qu){const l=this;return _r(async function(...c){const u=new ns([]),d=await l._def.args.parseAsync(c,a).catch(p=>{throw u.addIssue(r(c,p)),u}),h=await Reflect.apply(o,this,d);return await l._def.returns._def.type.parseAsync(h,a).catch(p=>{throw u.addIssue(s(h,p)),u})})}else{const l=this;return _r(function(...c){const u=l._def.args.safeParse(c,a);if(!u.success)throw new ns([r(c,u.error)]);const d=Reflect.apply(o,this,u.data),h=l._def.returns.safeParse(d,a);if(!h.success)throw new ns([s(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new mu({...this._def,args:Pi.create(e).rest(Nl.create())})}returns(e){return new mu({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new mu({args:e||Pi.create([]).rest(Nl.create()),returns:n||Nl.create(),typeName:qe.ZodFunction,...nt(r)})}}class Af extends st{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Af.create=(t,e)=>new Af({getter:t,typeName:qe.ZodLazy,...nt(e)});class Pf extends st{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ne(n,{received:n.data,code:ue.invalid_literal,expected:this._def.value}),Ge}return{status:"valid",value:e.data}}get value(){return this._def.value}}Pf.create=(t,e)=>new Pf({value:t,typeName:qe.ZodLiteral,...nt(e)});function l5(t,e){return new Io({values:t,typeName:qe.ZodEnum,...nt(e)})}class Io extends st{constructor(){super(...arguments),oh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ne(n,{expected:yt.joinValues(r),received:n.parsedType,code:ue.invalid_type}),Ge}if(Ev(this,oh)||s5(this,oh,new Set(this._def.values)),!Ev(this,oh).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ne(n,{received:n.data,code:ue.invalid_enum_value,options:r}),Ge}return _r(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Io.create(e,{...this._def,...n})}exclude(e,n=this._def){return Io.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}oh=new WeakMap;Io.create=l5;class Rf extends st{constructor(){super(...arguments),lh.set(this,void 0)}_parse(e){const n=yt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ee.string&&r.parsedType!==Ee.number){const s=yt.objectValues(n);return Ne(r,{expected:yt.joinValues(s),received:r.parsedType,code:ue.invalid_type}),Ge}if(Ev(this,lh)||s5(this,lh,new Set(yt.getValidEnumValues(this._def.values))),!Ev(this,lh).has(e.data)){const s=yt.objectValues(n);return Ne(r,{received:r.data,code:ue.invalid_enum_value,options:s}),Ge}return _r(e.data)}get enum(){return this._def.values}}lh=new WeakMap;Rf.create=(t,e)=>new Rf({values:t,typeName:qe.ZodNativeEnum,...nt(e)});class qu extends st{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.promise&&n.common.async===!1)return Ne(n,{code:ue.invalid_type,expected:Ee.promise,received:n.parsedType}),Ge;const r=n.parsedType===Ee.promise?n.data:Promise.resolve(n.data);return _r(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}qu.create=(t,e)=>new qu({type:t,typeName:qe.ZodPromise,...nt(e)});class ti extends st{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{Ne(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const o=s.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Ge;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Ge:c.status==="dirty"||n.value==="dirty"?Yc(c.value):c});{if(n.value==="aborted")return Ge;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?Ge:l.status==="dirty"||n.value==="dirty"?Yc(l.value):l}}if(s.type==="refinement"){const o=l=>{const c=s.refinement(l,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Ge:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Ge:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!jf(o))return o;const l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>jf(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:n.value,value:l})):o);yt.assertNever(s)}}ti.create=(t,e,n)=>new ti({schema:t,typeName:qe.ZodEffects,effect:e,...nt(n)});ti.createWithPreprocess=(t,e,n)=>new ti({schema:e,effect:{type:"preprocess",transform:t},typeName:qe.ZodEffects,...nt(n)});class Ei extends st{_parse(e){return this._getType(e)===Ee.undefined?_r(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ei.create=(t,e)=>new Ei({innerType:t,typeName:qe.ZodOptional,...nt(e)});class Ao extends st{_parse(e){return this._getType(e)===Ee.null?_r(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ao.create=(t,e)=>new Ao({innerType:t,typeName:qe.ZodNullable,...nt(e)});class Df extends st{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ee.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Df.create=(t,e)=>new Df({innerType:t,typeName:qe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...nt(e)});class Mf extends st{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Nf(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ns(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ns(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Mf.create=(t,e)=>new Mf({innerType:t,typeName:qe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...nt(e)});class Iv extends st{_parse(e){if(this._getType(e)!==Ee.nan){const r=this._getOrReturnCtx(e);return Ne(r,{code:ue.invalid_type,expected:Ee.nan,received:r.parsedType}),Ge}return{status:"valid",value:e.data}}}Iv.create=t=>new Iv({typeName:qe.ZodNaN,...nt(t)});const gle=Symbol("zod_brand");class EN extends st{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Nm extends st{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ge:a.status==="dirty"?(n.dirty(),Yc(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ge:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Nm({in:e,out:n,typeName:qe.ZodPipeline})}}class Of extends st{_parse(e){const n=this._def.innerType._parse(e),r=s=>(jf(s)&&(s.value=Object.freeze(s.value)),s);return Nf(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Of.create=(t,e)=>new Of({innerType:t,typeName:qe.ZodReadonly,...nt(e)});function c5(t,e={},n){return t?Bu.create().superRefine((r,s)=>{var a,o;if(!t(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(a=l.fatal)!==null&&a!==void 0?a:n)!==null&&o!==void 0?o:!0,u=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...u,fatal:c})}}):Bu.create()}const vle={object:tn.lazycreate};var qe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(qe||(qe={}));const xle=(t,e={message:`Input not instance of ${t.name}`})=>c5(n=>n instanceof t,e),u5=zs.create,d5=ko.create,yle=Iv.create,wle=To.create,h5=Sf.create,ble=Gl.create,_le=Cv.create,jle=Ef.create,Nle=Cf.create,Sle=Bu.create,Ele=Nl.create,Cle=_a.create,kle=kv.create,Tle=Gs.create,Ile=tn.create,Ale=tn.strictCreate,Ple=kf.create,Rle=ay.create,Dle=Tf.create,Mle=Pi.create,Ole=If.create,Lle=Tv.create,Vle=Kl.create,Fle=mu.create,$le=Af.create,Ule=Pf.create,zle=Io.create,Ble=Rf.create,qle=qu.create,oT=ti.create,Wle=Ei.create,Hle=Ao.create,Gle=ti.createWithPreprocess,Kle=Nm.create,Yle=()=>u5().optional(),Qle=()=>d5().optional(),Jle=()=>h5().optional(),Xle={string:t=>zs.create({...t,coerce:!0}),number:t=>ko.create({...t,coerce:!0}),boolean:t=>Sf.create({...t,coerce:!0}),bigint:t=>To.create({...t,coerce:!0}),date:t=>Gl.create({...t,coerce:!0})},Zle=Ge;var Fe=Object.freeze({__proto__:null,defaultErrorMap:zu,setErrorMap:Zoe,getErrorMap:Nv,makeIssue:Sv,EMPTY_PATH:ele,addIssueToContext:Ne,ParseStatus:ur,INVALID:Ge,DIRTY:Yc,OK:_r,isAborted:t_,isDirty:n_,isValid:jf,isAsync:Nf,get util(){return yt},get objectUtil(){return e_},ZodParsedType:Ee,getParsedType:Ya,ZodType:st,datetimeRegex:o5,ZodString:zs,ZodNumber:ko,ZodBigInt:To,ZodBoolean:Sf,ZodDate:Gl,ZodSymbol:Cv,ZodUndefined:Ef,ZodNull:Cf,ZodAny:Bu,ZodUnknown:Nl,ZodNever:_a,ZodVoid:kv,ZodArray:Gs,ZodObject:tn,ZodUnion:kf,ZodDiscriminatedUnion:ay,ZodIntersection:Tf,ZodTuple:Pi,ZodRecord:If,ZodMap:Tv,ZodSet:Kl,ZodFunction:mu,ZodLazy:Af,ZodLiteral:Pf,ZodEnum:Io,ZodNativeEnum:Rf,ZodPromise:qu,ZodEffects:ti,ZodTransformer:ti,ZodOptional:Ei,ZodNullable:Ao,ZodDefault:Df,ZodCatch:Mf,ZodNaN:Iv,BRAND:gle,ZodBranded:EN,ZodPipeline:Nm,ZodReadonly:Of,custom:c5,Schema:st,ZodSchema:st,late:vle,get ZodFirstPartyTypeKind(){return qe},coerce:Xle,any:Sle,array:Tle,bigint:wle,boolean:h5,date:ble,discriminatedUnion:Rle,effect:oT,enum:zle,function:Fle,instanceof:xle,intersection:Dle,lazy:$le,literal:Ule,map:Lle,nan:yle,nativeEnum:Ble,never:Cle,null:Nle,nullable:Hle,number:d5,object:Ile,oboolean:Jle,onumber:Qle,optional:Wle,ostring:Yle,pipeline:Kle,preprocess:Gle,promise:qle,record:Ole,set:Vle,strictObject:Ale,string:u5,symbol:_le,transformer:oT,tuple:Mle,undefined:jle,union:Ple,unknown:Ele,void:kle,NEVER:Zle,ZodIssueCode:ue,quotelessJson:Xoe,ZodError:ns}),CN="Checkbox",[ece,Xfe]=os(CN),[tce,nce]=ece(CN),f5=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,p]=g.useState(null),v=Xe(e,E=>p(E)),w=g.useRef(!1),b=m?d||!!m.closest("form"):!0,[y=!1,x]=ss({prop:s,defaultProp:a,onChange:u}),_=g.useRef(y);return g.useEffect(()=>{const E=m==null?void 0:m.form;if(E){const S=()=>x(_.current);return E.addEventListener("reset",S),()=>E.removeEventListener("reset",S)}},[m,x]),i.jsxs(tce,{scope:n,state:y,disabled:l,children:[i.jsx(De.button,{type:"button",role:"checkbox","aria-checked":po(y)?"mixed":y,"aria-required":o,"data-state":g5(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onKeyDown:ge(t.onKeyDown,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:ge(t.onClick,E=>{x(S=>po(S)?!0:!S),b&&(w.current=E.isPropagationStopped(),w.current||E.stopPropagation())})}),b&&i.jsx(rce,{control:m,bubbles:!w.current,name:r,value:c,checked:y,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"},defaultChecked:po(a)?!1:a})]})});f5.displayName=CN;var m5="CheckboxIndicator",p5=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,a=nce(m5,n);return i.jsx(Yn,{present:r||po(a.state)||a.state===!0,children:i.jsx(De.span,{"data-state":g5(a.state),"data-disabled":a.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});p5.displayName=m5;var rce=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:s,...a}=t,o=g.useRef(null),l=Xx(n),c=Ux(e);g.useEffect(()=>{const d=o.current,h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&p){const v=new Event("click",{bubbles:r});d.indeterminate=po(n),p.call(d,po(n)?!1:n),d.dispatchEvent(v)}},[l,n,r]);const u=g.useRef(po(n)?!1:n);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??u.current,...a,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function po(t){return t==="indeterminate"}function g5(t){return po(t)?"indeterminate":t?"checked":"unchecked"}var v5=f5,sce=p5;const Av=g.forwardRef(({className:t,...e},n)=>i.jsx(v5,{ref:n,className:Le("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:i.jsx(sce,{className:Le("flex items-center justify-center text-current"),children:i.jsx(tN,{className:"h-4 w-4"})})}));Av.displayName=v5.displayName;var x5=["PageUp","PageDown"],y5=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],w5={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},pd="Slider",[s_,ice,ace]=cm(pd),[b5,Zfe]=os(pd,[ace]),[oce,oy]=b5(pd),_5=g.forwardRef((t,e)=>{const{name:n,min:r=0,max:s=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:v,...w}=t,b=g.useRef(new Set),y=g.useRef(0),_=o==="horizontal"?lce:cce,[E=[],S]=ss({prop:d,defaultProp:u,onChange:P=>{var C;(C=[...b.current][y.current])==null||C.focus(),h(P)}}),D=g.useRef(E);function I(P){const T=mce(E,P);N(P,T)}function A(P){N(P,y.current)}function R(){const P=D.current[y.current];E[y.current]!==P&&m(E)}function N(P,T,{commit:C}={commit:!1}){const V=xce(a),z=yce(Math.round((P-r)/a)*a+r,V),H=_f(z,[r,s]);S(($=[])=>{const L=hce($,H,T);if(vce(L,c*a)){y.current=L.indexOf(H);const W=String(L)!==String($);return W&&C&&m(L),W?L:$}else return $})}return i.jsx(oce,{scope:t.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:y,thumbs:b.current,values:E,orientation:o,form:v,children:i.jsx(s_.Provider,{scope:t.__scopeSlider,children:i.jsx(s_.Slot,{scope:t.__scopeSlider,children:i.jsx(_,{"aria-disabled":l,"data-disabled":l?"":void 0,...w,ref:e,onPointerDown:ge(w.onPointerDown,()=>{l||(D.current=E)}),min:r,max:s,inverted:p,onSlideStart:l?void 0:I,onSlideMove:l?void 0:A,onSlideEnd:l?void 0:R,onHomeKeyDown:()=>!l&&N(r,0,{commit:!0}),onEndKeyDown:()=>!l&&N(s,E.length-1,{commit:!0}),onStepKeyDown:({event:P,direction:T})=>{if(!l){const z=x5.includes(P.key)||P.shiftKey&&y5.includes(P.key)?10:1,H=y.current,$=E[H],L=a*z*T;N($+L,H,{commit:!0})}}})})})})});_5.displayName=pd;var[j5,N5]=b5(pd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),lce=g.forwardRef((t,e)=>{const{min:n,max:r,dir:s,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,[h,m]=g.useState(null),p=Xe(e,_=>m(_)),v=g.useRef(),w=ac(s),b=w==="ltr",y=b&&!a||!b&&a;function x(_){const E=v.current||h.getBoundingClientRect(),S=[0,E.width],I=kN(S,y?[n,r]:[r,n]);return v.current=E,I(_-E.left)}return i.jsx(j5,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:i.jsx(S5,{dir:w,"data-orientation":"horizontal",...d,ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const E=x(_.clientX);o==null||o(E)},onSlideMove:_=>{const E=x(_.clientX);l==null||l(E)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:_=>{const S=w5[y?"from-left":"from-right"].includes(_.key);u==null||u({event:_,direction:S?-1:1})}})})}),cce=g.forwardRef((t,e)=>{const{min:n,max:r,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,d=g.useRef(null),h=Xe(e,d),m=g.useRef(),p=!s;function v(w){const b=m.current||d.current.getBoundingClientRect(),y=[0,b.height],_=kN(y,p?[r,n]:[n,r]);return m.current=b,_(w-b.top)}return i.jsx(j5,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:i.jsx(S5,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const b=v(w.clientY);a==null||a(b)},onSlideMove:w=>{const b=v(w.clientY);o==null||o(b)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:w=>{const y=w5[p?"from-bottom":"from-top"].includes(w.key);c==null||c({event:w,direction:y?-1:1})}})})}),S5=g.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=t,d=oy(pd,n);return i.jsx(De.span,{...u,ref:e,onKeyDown:ge(t.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):x5.concat(y5).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:ge(t.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():r(h)}),onPointerMove:ge(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:ge(t.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),a(h))})})}),E5="SliderTrack",C5=g.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=oy(E5,n);return i.jsx(De.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});C5.displayName=E5;var i_="SliderRange",k5=g.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=oy(i_,n),a=N5(i_,n),o=g.useRef(null),l=Xe(e,o),c=s.values.length,u=s.values.map(m=>I5(m,s.min,s.max)),d=c>1?Math.min(...u):0,h=100-Math.max(...u);return i.jsx(De.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...t.style,[a.startEdge]:d+"%",[a.endEdge]:h+"%"}})});k5.displayName=i_;var a_="SliderThumb",T5=g.forwardRef((t,e)=>{const n=ice(t.__scopeSlider),[r,s]=g.useState(null),a=Xe(e,l=>s(l)),o=g.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return i.jsx(uce,{...t,ref:a,index:o})}),uce=g.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:s,...a}=t,o=oy(a_,n),l=N5(a_,n),[c,u]=g.useState(null),d=Xe(e,x=>u(x)),h=c?o.form||!!c.closest("form"):!0,m=Ux(c),p=o.values[r],v=p===void 0?0:I5(p,o.min,o.max),w=fce(r,o.values.length),b=m==null?void 0:m[l.size],y=b?pce(b,v,l.direction):0;return g.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${v}% + ${y}px)`},children:[i.jsx(s_.ItemSlot,{scope:t.__scopeSlider,children:i.jsx(De.span,{role:"slider","aria-label":t["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:d,style:p===void 0?{display:"none"}:t.style,onFocus:ge(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&i.jsx(dce,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},r)]})});T5.displayName=a_;var dce=t=>{const{value:e,...n}=t,r=g.useRef(null),s=Xx(e);return g.useEffect(()=>{const a=r.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(s!==e&&c){const u=new Event("input",{bubbles:!0});c.call(a,e),a.dispatchEvent(u)}},[s,e]),i.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:e})};function hce(t=[],e,n){const r=[...t];return r[n]=e,r.sort((s,a)=>s-a)}function I5(t,e,n){const a=100/(n-e)*(t-e);return _f(a,[0,100])}function fce(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function mce(t,e){if(t.length===1)return 0;const n=t.map(s=>Math.abs(s-e)),r=Math.min(...n);return n.indexOf(r)}function pce(t,e,n){const r=t/2,a=kN([0,50],[0,r]);return(r-a(e)*n)*n}function gce(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function vce(t,e){if(e>0){const n=gce(t);return Math.min(...n)>=e}return!0}function kN(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function xce(t){return(String(t).split(".")[1]||"").length}function yce(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var A5=_5,wce=C5,bce=k5,_ce=T5;const P5=g.forwardRef(({className:t,...e},n)=>i.jsxs(A5,{ref:n,className:Le("relative flex w-full touch-none select-none items-center",t),...e,children:[i.jsx(wce,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:i.jsx(bce,{className:"absolute h-full bg-primary"})}),i.jsx(_ce,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));P5.displayName=A5.displayName;const Sm=Fe.object({title:Fe.string().min(5,"Le titre doit contenir au moins 5 caractères").max(80,"Le titre ne peut pas dépasser 80 caractères"),description:Fe.string().min(20,"La description doit contenir au moins 20 caractères").max(1e3,"La description ne peut pas dépasser 1000 caractères"),tags:Fe.array(Fe.string()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:Fe.string().min(1,"Veuillez spécifier un lieu de rencontre")}),jce=Sm.extend({price:Fe.string().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit être d'au moins 1€");if(e>1e4)throw new Error("Le prix ne peut pas dépasser 10 000€");return e}),condition:Fe.enum(["new","like-new","good","fair"]),paymentMethods:Fe.array(Fe.string()).min(1,"Sélectionnez au moins un mode de paiement")}),Nce=Sm.extend({donationReason:Fe.string().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractères")}),Sce=Sm.extend({desiredItems:Fe.array(Fe.string()).min(1,"Ajoutez au moins un objet recherché"),estimatedValue:Fe.string().min(1,"La valeur estimée est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estimée doit être d'au moins 1€");return e})}),Ece=Sm.extend({hourlyRate:Fe.string().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit être d'au moins 5€/h");if(e>200)throw new Error("Le tarif ne peut pas dépasser 200€/h");return e}),duration:Fe.number().min(1,"La durée doit être d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:Fe.string().min(20,"Décrivez vos compétences en détail").max(500,"Maximum 500 caractères"),availability:Fe.string().optional()}),Cce=[{value:"new",label:"Neuf",description:"Jamais utilisé, dans son emballage"},{value:"like-new",label:"Très bon",description:"Utilisé très peu, aucun défaut visible"},{value:"good",label:"Bon",description:"Utilisé mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],lT=[{value:"cash",label:"Espèces",icon:ED},{value:"transfer",label:"Virement bancaire",icon:vn},{value:"lydia",label:"Lydia",icon:ic},{value:"paypal",label:"PayPal",icon:vn}],kce=()=>{var Z,oe,ke,et,ae,fe,ce,Ue;const{currentUser:t,userProfile:e}=Zt(),{createListing:n}=vm(),r=Mn(),[s]=x1(),[a,o]=g.useState(()=>s.get("type")||"sell"),[l,c]=g.useState([]),[u,d]=g.useState(!1),[h,m]=g.useState(""),[p,v]=g.useState([]),[w,b]=g.useState(!1),[y,x]=g.useState([""]),[_,E]=g.useState(""),[S,D]=g.useState([]),[I,A]=g.useState([1]),N=_l({resolver:jl((()=>{switch(a){case"sell":return jce;case"gift":return Nce;case"swap":return Sce;case"service":return Ece;default:return Sm}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});g.useEffect(()=>{N.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),v([]),x([""]),D([]),A([1]),c([])},[a,N]);const P=async J=>{if(!t)throw new Error("User not authenticated");const pe=Date.now(),G=`listings/${t.uid}/${pe}_${J.name}`,re=Sh(Ch,G),ie=await Z4(re,J);return await rv(ie.ref)},T=async J=>{const pe=J.target.files;if(!(!pe||pe.length===0)){d(!0);try{const re=Array.from(pe).slice(0,10-l.length).filter(Ae=>Ae.size<=15728640).map(Ae=>P(Ae)),ie=await Promise.all(re);c(Ae=>[...Ae,...ie])}catch(G){console.error("Error uploading images:",G)}finally{d(!1)}}},C=J=>{c(pe=>pe.filter((G,re)=>re!==J))},V=()=>{if(h.trim()&&!p.includes(h.trim())&&p.length<5){const J=[...p,h.trim()];v(J),N.setValue("tags",J),m("")}},z=J=>{const pe=p.filter(G=>G!==J);v(pe),N.setValue("tags",pe)},H=()=>{if(_.trim()){const J=[...y.filter(pe=>pe.trim()),_.trim()];x(J),N.setValue("desiredItems",J),E("")}},$=J=>{const pe=y.filter((G,re)=>re!==J);x(pe),N.setValue("desiredItems",pe)},L=(J,pe)=>{const G=pe?[...S,J]:S.filter(re=>re!==J);D(G),N.setValue("paymentMethods",G)},W=async J=>{if(!(!t||!e)){b(!0);try{const pe={title:J.title,description:J.description,currency:"EUR",category:"electronics",images:l,tags:J.tags,location:{city:"Paris",state:"Île-de-France",country:"France",campus:e.campus||null,university:e.university||null,coordinates:null},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let G;switch(a){case"sell":G={...pe,price:J.price,condition:J.condition,transactionType:"sale",description:`${J.description}

Modes de paiement acceptés: ${S.map(ie=>{var Ae;return(Ae=lT.find(ze=>ze.value===ie))==null?void 0:Ae.label}).join(", ")}`};break;case"gift":G={...pe,price:0,condition:"good",transactionType:"donation",description:`${J.description}

Raison du don: ${J.donationReason}`};break;case"swap":G={...pe,price:J.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:y.filter(ie=>ie.trim()).join(", "),description:`${J.description}

Recherche en échange: ${y.filter(ie=>ie.trim()).join(", ")}
Valeur estimée: ${J.estimatedValue}€`};break;case"service":G={...pe,price:J.hourlyRate,condition:"new",transactionType:"service",description:`${J.description}

Compétences: ${J.skills}
Tarif: ${J.hourlyRate}€/h
Durée prévue: ${I[0]}h${J.availability?`
Disponibilités: ${J.availability}`:""}`};break;default:throw new Error("Type de transaction non supporté")}console.log("Submitting listing data:",G);const re=await n(G);r(`/listing/${re}`)}catch(pe){console.error("Error creating listing:",pe)}finally{b(!1)}}},U=()=>{const J=N.formState.errors,pe=N.watch("title")&&N.watch("description")&&N.watch("meetingLocation")&&p.length>0;switch(a){case"sell":return pe&&N.watch("price")&&S.length>0&&!J.title&&!J.description&&!J.price;case"gift":return pe&&N.watch("donationReason")&&!J.title&&!J.description&&!J.donationReason;case"swap":return pe&&y.some(G=>G.trim())&&N.watch("estimatedValue")&&!J.title&&!J.description&&!J.estimatedValue;case"service":return pe&&N.watch("hourlyRate")&&N.watch("skills")&&!J.title&&!J.description&&!J.hourlyRate&&!J.skills;default:return!1}};return i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2 text-foreground",children:"Créer une annonce"}),i.jsx("p",{className:"text-muted-foreground",children:"Partagez vos objets, services ou recherches avec la communauté étudiante vérifiée"})]}),i.jsxs("form",{onSubmit:N.handleSubmit(W),className:"space-y-8",children:[i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Ib,{className:"w-5 h-5"}),"Type d'annonce"]}),i.jsx(at,{children:"Le formulaire s'adapte automatiquement selon votre choix"})]}),i.jsx(Q,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Y,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:i.jsxs(Q,{className:"p-4 text-center",children:[i.jsx(ff,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Vendre"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendre un objet"})]})}),i.jsx(Y,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:i.jsxs(Q,{className:"p-4 text-center",children:[i.jsx(Du,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Donner"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),i.jsx(Y,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:i.jsxs(Q,{className:"p-4 text-center",children:[i.jsx(va,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Troc"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Échanger des objets"})]})}),i.jsx(Y,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:i.jsxs(Q,{className:"p-4 text-center",children:[i.jsx(dn,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Service"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsx(Re,{className:"text-foreground",children:"Informations principales"})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"title",className:"text-foreground",children:"Titre * (max 80 caractères)"}),i.jsx(_e,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait état":a==="gift"?"Ex: Vélo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathématiques",...N.register("title"),className:"mt-1",maxLength:80}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(Z=N.formState.errors.title)==null?void 0:Z.message}),i.jsxs("span",{children:[((oe=N.watch("title"))==null?void 0:oe.length)||0,"/80"]})]})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"description",className:"text-foreground",children:"Description détaillée * (max 1000 caractères)"}),i.jsx(_s,{id:"description",placeholder:a==="sell"?"Décrivez l'état, l'utilisation, la raison de la vente...":a==="gift"?"Décrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Décrivez ce que vous proposez et ce que vous recherchez...":"Décrivez vos compétences, votre expérience, votre méthode...",rows:6,...N.register("description"),className:"mt-1",maxLength:1e3}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(ke=N.formState.errors.description)==null?void 0:ke.message}),i.jsxs("span",{children:[((et=N.watch("description"))==null?void 0:et.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(ff,{className:"w-5 h-5 text-blue-600"}),"Informations de vente"]})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"price",className:"text-foreground",children:"Prix (€) *"}),i.jsx(_e,{id:"price",type:"text",placeholder:"0,00",...N.register("price"),className:"mt-1"}),N.formState.errors.price&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.price.message})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"condition",className:"text-foreground",children:"État du produit *"}),i.jsxs(mt,{onValueChange:J=>N.setValue("condition",J),children:[i.jsx(ct,{className:"mt-1",children:i.jsx(pt,{placeholder:"Sélectionnez un état"})}),i.jsx(ut,{children:Cce.map(J=>i.jsx(de,{value:J.value,children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-foreground",children:J.label}),i.jsx("div",{className:"text-xs text-muted-foreground",children:J.description})]})},J.value))})]}),N.formState.errors.condition&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.condition.message})]})]}),i.jsxs("div",{children:[i.jsx(he,{className:"text-foreground",children:"Modes de paiement acceptés *"}),i.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:lT.map(J=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Av,{id:J.value,checked:S.includes(J.value),onCheckedChange:pe=>L(J.value,pe)}),i.jsxs(he,{htmlFor:J.value,className:"flex items-center gap-2 cursor-pointer text-foreground",children:[i.jsx(J.icon,{className:"w-4 h-4"}),J.label]})]},J.value))}),S.length===0&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:"Sélectionnez au moins un mode de paiement"})]})]})]}),a==="gift"&&i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Du,{className:"w-5 h-5 text-green-600"}),"Informations du don"]})}),i.jsx(Q,{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(he,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractères)"}),i.jsx(_s,{id:"donationReason",placeholder:"Ex: Je déménage, plus besoin, fin d'études...",rows:3,...N.register("donationReason"),className:"mt-1",maxLength:140}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(ae=N.formState.errors.donationReason)==null?void 0:ae.message}),i.jsxs("span",{children:[((fe=N.watch("donationReason"))==null?void 0:fe.length)||0,"/140"]})]})]})})]}),a==="swap"&&i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(va,{className:"w-5 h-5 text-purple-600"}),"Informations d'échange"]})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(he,{className:"text-foreground",children:"Objets recherchés * (minimum 1)"}),i.jsxs("div",{className:"space-y-2 mt-2",children:[y.filter(J=>J.trim()).map((J,pe)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_e,{value:J,readOnly:!0,className:"flex-1"}),i.jsx(F,{type:"button",variant:"outline",size:"icon",onClick:()=>$(pe),children:i.jsx(VD,{className:"w-4 h-4"})})]},pe)),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(_e,{placeholder:"Ex: Livre de physique L2",value:_,onChange:J=>E(J.target.value),onKeyPress:J=>J.key==="Enter"&&(J.preventDefault(),H()),className:"flex-1"}),i.jsx(F,{type:"button",onClick:H,disabled:!_.trim(),children:i.jsx(wl,{className:"w-4 h-4"})})]})]})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estimée (€) *"}),i.jsx(_e,{id:"estimatedValue",type:"text",placeholder:"0,00",...N.register("estimatedValue"),className:"mt-1"}),N.formState.errors.estimatedValue&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(dn,{className:"w-5 h-5 text-orange-600"}),"Informations du service"]})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"skills",className:"text-foreground",children:"Description des compétences *"}),i.jsx(_s,{id:"skills",placeholder:"Décrivez vos compétences, votre expérience, votre méthode d'enseignement...",rows:4,...N.register("skills"),className:"mt-1",maxLength:500}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(ce=N.formState.errors.skills)==null?void 0:ce.message}),i.jsxs("span",{children:[((Ue=N.watch("skills"))==null?void 0:Ue.length)||0,"/500"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (€/h) *"}),i.jsx(_e,{id:"hourlyRate",type:"text",placeholder:"15,00",...N.register("hourlyRate"),className:"mt-1"}),N.formState.errors.hourlyRate&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.hourlyRate.message})]}),i.jsxs("div",{children:[i.jsxs(he,{className:"text-foreground",children:["Durée prévue: ",I[0],"h"]}),i.jsx(P5,{value:I,onValueChange:J=>{A(J),N.setValue("duration",J[0])},max:720,min:1,step:1,className:"mt-2"}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{children:"1h"}),i.jsx("span",{children:"720h"})]})]})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"availability",className:"text-foreground",children:"Disponibilités (optionnel)"}),i.jsx(_e,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...N.register("availability"),className:"mt-1"})]})]})]}),i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(yl,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),i.jsx(at,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Première photo = photo principale. Max 15MB par image."})]}),i.jsx(Q,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[l.map((J,pe)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:J,alt:`Photo ${pe+1}`,className:"w-full h-20 object-cover rounded-lg"}),i.jsx(F,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>C(pe),children:i.jsx(pf,{className:"w-3 h-3"})}),pe===0&&i.jsx(Ie,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},pe)),l.length<10&&i.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[i.jsxs("div",{className:"text-center",children:[u?i.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):i.jsx(Ab,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:u?"Upload...":"Ajouter"})]}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:T,className:"hidden",disabled:u})]})]})})]}),i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(mf,{className:"w-5 h-5"}),"Tags et localisation"]})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(he,{className:"text-foreground",children:"Tags * (max 5)"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:p.map(J=>i.jsxs(Ie,{variant:"secondary",className:"flex items-center gap-1",children:[J,i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>z(J),children:i.jsx(pf,{className:"w-3 h-3"})})]},J))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(_e,{placeholder:"Ajouter un tag...",value:h,onChange:J=>m(J.target.value),onKeyPress:J=>J.key==="Enter"&&(J.preventDefault(),V()),className:"flex-1"}),i.jsx(F,{type:"button",onClick:V,disabled:!h.trim()||p.length>=5,children:"Ajouter"})]}),p.length===0&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),i.jsx(_e,{id:"meetingLocation",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",...N.register("meetingLocation"),className:"mt-1"}),N.formState.errors.meetingLocation&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.meetingLocation.message}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilégiez les lieux publics et fréquentés"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-sm text-foreground",children:[i.jsx(Th,{className:"w-4 h-4"}),"Validation"]})}),i.jsx(Q,{children:i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:`flex items-center gap-2 ${N.watch("title")&&N.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("title")&&N.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Titre (5-80 caractères)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${N.watch("description")&&N.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("description")&&N.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Description (20-1000 caractères)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${p.length>0?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${p.length>0?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Tags (1-5)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${N.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Point de rencontre"})]}),a==="sell"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-2 ${N.watch("price")?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("price")?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Prix (≥ 1€)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${S.length>0?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${S.length>0?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Modes de paiement"})]})]}),a==="gift"&&i.jsxs("div",{className:`flex items-center gap-2 ${N.watch("donationReason")&&N.watch("donationReason").length>=10?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("donationReason")&&N.watch("donationReason").length>=10?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Motif du don"})]}),a==="swap"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-2 ${y.some(J=>J.trim())?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${y.some(J=>J.trim())?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Objets recherchés"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${N.watch("estimatedValue")?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("estimatedValue")?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Valeur estimée"})]})]}),a==="service"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-2 ${N.watch("hourlyRate")?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("hourlyRate")?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Tarif (≥ 5€/h)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${N.watch("skills")&&N.watch("skills").length>=20?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("skills")&&N.watch("skills").length>=20?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Compétences"})]})]})]})})]}),i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-sm text-foreground",children:[i.jsx(Et,{className:"w-4 h-4"}),"Conseils de sécurité"]})}),i.jsx(Q,{children:i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Vérifiez l'identité de l'autre personne"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Privilégiez les paiements sécurisés"})]})]})})]}),i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6",children:[i.jsx(F,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:w||!U()||u,children:w?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):u?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ib,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:U()?"Votre annonce sera visible immédiatement":"Complétez tous les champs obligatoires"})]})})]})]})]})]})};var TN="Tabs",[Tce,eme]=os(TN,[qx]),R5=qx(),[Ice,IN]=Tce(TN),D5=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=ac(l),[h,m]=ss({prop:r,onChange:s,defaultProp:a});return i.jsx(Ice,{scope:n,baseId:es(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:c,children:i.jsx(De.div,{dir:d,"data-orientation":o,...u,ref:e})})});D5.displayName=TN;var M5="TabsList",O5=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=IN(M5,n),o=R5(n);return i.jsx(bM,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(De.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});O5.displayName=M5;var L5="TabsTrigger",V5=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,o=IN(L5,n),l=R5(n),c=U5(o.baseId,r),u=z5(o.baseId,r),d=r===o.value;return i.jsx(_M,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(De.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:e,onMouseDown:ge(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:ge(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:ge(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});V5.displayName=L5;var F5="TabsContent",$5=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=t,l=IN(F5,n),c=U5(l.baseId,r),u=z5(l.baseId,r),d=r===l.value,h=g.useRef(d);return g.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(Yn,{present:s||d,children:({present:m})=>i.jsx(De.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&a})})});$5.displayName=F5;function U5(t,e){return`${t}-trigger-${e}`}function z5(t,e){return`${t}-content-${e}`}var Ace=D5,B5=O5,q5=V5,W5=$5;const cc=Ace,Wo=g.forwardRef(({className:t,...e},n)=>i.jsx(B5,{ref:n,className:Le("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Wo.displayName=B5.displayName;const $t=g.forwardRef(({className:t,...e},n)=>i.jsx(q5,{ref:n,className:Le("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));$t.displayName=q5.displayName;const Ut=g.forwardRef(({className:t,...e},n)=>i.jsx(W5,{ref:n,className:Le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ut.displayName=W5.displayName;class Pce{static async uploadProfilePhoto(e,n,r){if(!n.type.startsWith("image/"))throw new Error("Le fichier doit être une image");if(n.size>5*1024*1024)throw new Error("L'image ne peut pas dépasser 5MB");const a=`profile_${Date.now()}.${n.name.split(".").pop()}`,o=Sh(Ch,`users/${e}/${a}`);return new Promise((l,c)=>{const u=Mk(o,n,{contentType:n.type,cacheControl:"public,max-age=3600",customMetadata:{uploadedAt:new Date().toISOString(),userId:e}});u.on("state_changed",d=>{const h=d.bytesTransferred/d.totalBytes*100;r==null||r({progress:h,isComplete:!1})},d=>{console.error("Upload error:",d);let h="Erreur lors de l'upload";switch(d.code){case"storage/unauthorized":h="Vous n'êtes pas autorisé à upload ce fichier";break;case"storage/canceled":h="Upload annulé";break;case"storage/quota-exceeded":h="Quota de stockage dépassé";break;case"storage/invalid-format":h="Format de fichier invalide";break}r==null||r({progress:0,isComplete:!1,error:h}),c(new Error(h))},async()=>{try{const d=await rv(u.snapshot.ref);r==null||r({progress:100,isComplete:!0,downloadURL:d}),l(d)}catch(d){c(d)}})})}static async deleteFile(e){try{const n=Sh(Ch,e);await pK(n)}catch(n){console.error("Error deleting file:",n)}}static async uploadListingImages(e,n,r){const s=n.map(async(a,o)=>{const l=Date.now(),c=`image_${o}_${l}.${a.name.split(".").pop()}`,u=Sh(Ch,`listings/${e}/${c}`);return new Promise((d,h)=>{const m=Mk(u,a,{contentType:a.type,cacheControl:"public,max-age=3600"});m.on("state_changed",p=>{const v=p.bytesTransferred/p.totalBytes*100;r==null||r(o,{progress:v,isComplete:!1})},p=>{r==null||r(o,{progress:0,isComplete:!1,error:p.message}),h(p)},async()=>{const p=await rv(m.snapshot.ref);r==null||r(o,{progress:100,isComplete:!0,downloadURL:p}),d(p)})})});return Promise.all(s)}static async uploadCompressedImage(e,n=1200,r=1200,s=.8){return new Promise(a=>{const o=document.createElement("canvas"),l=o.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:d}=c;u>d?u>n&&(d=d*n/u,u=n):d>r&&(u=u*r/d,d=r),o.width=u,o.height=d,l.drawImage(c,0,0,u,d),o.toBlob(h=>{if(h){const m=new File([h],e.name,{type:e.type,lastModified:Date.now()});a(m)}else a(e)},e.type,s)},c.src=URL.createObjectURL(e)})}}const H5=({currentPhotoURL:t,displayName:e,onPhotoUpdate:n})=>{var x,_;const{currentUser:r,updateUserProfile:s}=Zt(),[a,o]=g.useState(!1),[l,c]=g.useState(!1),[u,d]=g.useState(null),[h,m]=g.useState(null),p=g.useRef(null),v=E=>{var I;const S=(I=E.target.files)==null?void 0:I[0];if(!S)return;if(!S.type.startsWith("image/")){te.error("Veuillez sélectionner une image");return}if(S.size>5*1024*1024){te.error("L'image ne doit pas dépasser 5MB");return}m(S);const D=new FileReader;D.onload=A=>{var R;d((R=A.target)==null?void 0:R.result)},D.readAsDataURL(S)},w=async()=>{if(!(!h||!r)){c(!0);try{const E=await Pce.uploadProfilePhoto(r.uid,h,S=>{S.error&&te.error(S.error)});await nf(r,{photoURL:E}),await s({photoURL:E}),n&&n(E),te.success("Photo de profil mise à jour avec succès !"),o(!1),d(null),m(null)}catch(E){console.error("Erreur lors de l'upload:",E);let S="Erreur lors de la mise à jour de la photo";E&&typeof E=="object"&&"message"in E&&typeof E.message=="string"&&(E.message.includes("duplicate")?S="Une photo avec ce nom existe déjà, réessayez":E.message.includes("size")?S="Fichier trop volumineux":E.message.includes("type")&&(S="Type de fichier non supporté")),te.error(S)}finally{c(!1)}}},b=async()=>{if(r){c(!0);try{await nf(r,{photoURL:void 0}),await s({photoURL:void 0}),n&&n(void 0),te.success("Photo de profil supprimée"),o(!1)}catch(E){console.error("Erreur lors de la suppression:",E),te.error("Erreur lors de la suppression de la photo")}finally{c(!1)}}},y=()=>{m(null),d(null),p.current&&(p.current.value="")};return i.jsxs(aa,{open:a,onOpenChange:o,children:[i.jsx(hu,{asChild:!0,children:i.jsxs("div",{className:"relative group cursor-pointer",children:[i.jsxs(Jr,{className:"h-20 w-20",children:[i.jsx(ba,{src:t||""}),i.jsx(Pr,{className:"bg-gradient-to-br from-primary to-secondary text-white text-xl font-semibold",children:((x=e[0])==null?void 0:x.toUpperCase())||"U"})]}),i.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(yl,{className:"w-6 h-6 text-white"})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:i.jsx(yl,{className:"w-3 h-3 text-white"})})]})}),i.jsxs(Ni,{className:"max-w-md",children:[i.jsx(oa,{children:i.jsxs(Si,{className:"flex items-center gap-2",children:[i.jsx(yl,{className:"w-5 h-5"}),"Photo de profil"]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center",children:i.jsxs(Jr,{className:"h-32 w-32",children:[i.jsx(ba,{src:u||t||""}),i.jsx(Pr,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((_=e[0])==null?void 0:_.toUpperCase())||"U"})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:v,className:"hidden"}),h?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[i.jsx("p",{className:"font-medium",children:h.name}),i.jsxs("p",{children:[(h.size/1024/1024).toFixed(2)," MB"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(F,{onClick:w,disabled:l,className:"flex-1",children:[l?i.jsx(Hr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(Ab,{className:"w-4 h-4 mr-2"}),l?"Upload en cours...":"Uploader"]}),i.jsx(F,{onClick:y,variant:"outline",disabled:l,children:i.jsx(pf,{className:"w-4 h-4"})})]})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs(F,{onClick:()=>{var E;return(E=p.current)==null?void 0:E.click()},variant:"outline",className:"w-full",children:[i.jsx(Ab,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&i.jsxs(F,{onClick:b,variant:"outline",disabled:l,className:"w-full text-destructive hover:text-destructive",children:[l?i.jsx(Hr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(pf,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]})]})]})]})},fr=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return typeof t=="object"&&t!==null&&"seconds"in t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):new Date},Rce=()=>{const{currentUser:t,userProfile:e}=Zt(),[n,r]=g.useState([]),[s,a]=g.useState([]),[o,l]=g.useState([]),[c,u]=g.useState(null),[d,h]=g.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[m,p]=g.useState({profile:!0,listings:!0,reviews:!0,favorites:!0}),[v,w]=g.useState({}),[b,y]=g.useState(null),[x,_]=g.useState(""),[E,S]=g.useState((c==null?void 0:c.firstName)||""),[D,I]=g.useState((c==null?void 0:c.lastName)||""),A=async()=>{if(t)try{p(re=>({...re,profile:!0}));const G=await ys(Ze(ye,"users",t.uid));if(G.exists()){const re=G.data();u({...re,createdAt:fr(re.createdAt),updatedAt:fr(re.updatedAt)})}else console.log("Aucun document utilisateur trouvé dans Firestore"),u(null)}catch(G){console.error("Erreur lors du chargement du profil:",G),u(null)}finally{p(G=>({...G,profile:!1}))}};g.useEffect(()=>{t&&(A(),R(),N(),P())},[t]);const R=async()=>{if(t)try{p(ze=>({...ze,listings:!0}));const G=Mt(wt(ye,"listings"),Vt("sellerId","==",t.uid),xs(20)),re=await Kt(G),ie=[];re.forEach(ze=>{const We=ze.data();ie.push({id:ze.id,...We,createdAt:fr(We.createdAt),updatedAt:fr(We.updatedAt)})}),ie.sort((ze,We)=>fr(We.createdAt).getTime()-fr(ze.createdAt).getTime()),r(ie);const Ae=ie.filter(ze=>ze.status==="active");h(ze=>({...ze,totalListings:ie.length,activeListings:Ae.length}))}catch(G){console.error("Erreur lors du chargement des annonces:",G)}finally{p(G=>({...G,listings:!1}))}},N=async()=>{if(t)try{p(O=>({...O,reviews:!0}));const G=Mt(wt(ye,"reviews"),Vt("revieweeId","==",t.uid),xs(10)),re=await Kt(G),ie=[];re.forEach(O=>{const B=O.data();ie.push({id:O.id,...B,replies:Array.isArray(B.replies)?B.replies.map(K=>({...K,createdAt:K.createdAt instanceof Date?K.createdAt:K.createdAt&&typeof K.createdAt.toDate=="function"?K.createdAt.toDate():new Date})):[],likes:Array.isArray(B.likes)?B.likes:[],dislikes:Array.isArray(B.dislikes)?B.dislikes:[],createdAt:fr(B.createdAt)})}),ie.sort((O,B)=>fr(B.createdAt).getTime()-fr(O.createdAt).getTime()),a(ie);const Ae=Array.from(new Set(ie.map(O=>O.reviewerId))),ze={...v};await Promise.all(Ae.map(async O=>{if(!ze[O]){const B=await ys(Ze(ye,"users",O));if(B.exists()){const K=B.data();ze[O]={displayName:K.displayName||"Utilisateur",photoURL:K.photoURL||void 0}}else ze[O]={displayName:""}}})),w(ze);const We=ie.reduce((O,B)=>O+B.rating,0),bt=ie.length>0?We/ie.length:0;h(O=>({...O,totalReviews:ie.length,averageRating:Math.round(bt*10)/10}))}catch(G){console.error("Erreur lors du chargement des avis:",G)}finally{p(G=>({...G,reviews:!1}))}},P=async()=>{if(t)try{p(Ae=>({...Ae,favorites:!0}));const G=Mt(wt(ye,"favorites"),Vt("userId","==",t.uid),xs(20)),re=await Kt(G),ie=[];if(re.forEach(Ae=>{const ze=Ae.data();ie.push({id:Ae.id,...ze,createdAt:fr(ze.createdAt)})}),ie.sort((Ae,ze)=>fr(ze.createdAt).getTime()-fr(Ae.createdAt).getTime()),h(Ae=>({...Ae,totalFavorites:ie.length})),ie.length>0){const Ae=ie.slice(0,6).map(async We=>{try{const bt=await ys(Ze(ye,"listings",We.listingId));if(bt.exists()){const O=bt.data();return{id:bt.id,...O,createdAt:fr(O.createdAt),updatedAt:fr(O.updatedAt)}}return null}catch(bt){return console.error("Erreur lors du chargement d'une annonce favorite:",bt),null}}),ze=await Promise.all(Ae);l(ze.filter(We=>We!==null))}}catch(G){console.error("Erreur lors du chargement des favoris:",G)}finally{p(G=>({...G,favorites:!1}))}},T=G=>{if(!G)return"Date inconnue";try{const re=fr(G);return isNaN(re.getTime())?"Date invalide":fd(re,{addSuffix:!0,locale:sr})}catch{return"Date invalide"}},C=G=>Array.from({length:5},(re,ie)=>i.jsx(to,{className:`h-4 w-4 ${ie<G?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},ie)),V=localStorage.getItem("pendingUserData"),z=V?JSON.parse(V):{};let H=(c==null?void 0:c.displayName)||(e==null?void 0:e.displayName)||z.displayName||"";!H&&(t!=null&&t.displayName)&&(H=t.displayName),!H&&(t!=null&&t.email)&&(H=t.email.split("@")[0]),H||(H="Utilisateur");let $=(c==null?void 0:c.university)||(e==null?void 0:e.university)||z.university||"";if((c==null?void 0:c.university)==="Autre université"&&c.otherUniversity||(e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||z.university==="Autre université"&&z.otherUniversity){const G=c==null?void 0:c.otherUniversity,re=e==null?void 0:e.otherUniversity,ie=z.otherUniversity;$=G||re||ie||"Université personnalisée"}$||($="Université spécifiée lors de l'inscription");let L=(c==null?void 0:c.fieldOfStudy)||(e==null?void 0:e.fieldOfStudy)||z.fieldOfStudy||"";if((c==null?void 0:c.fieldOfStudy)==="Autre"&&c.otherFieldOfStudy||(e==null?void 0:e.fieldOfStudy)==="Autre"&&e.otherFieldOfStudy||z.fieldOfStudy==="Autre"&&z.otherFieldOfStudy){const G=c==null?void 0:c.otherFieldOfStudy,re=e==null?void 0:e.otherFieldOfStudy,ie=z.otherFieldOfStudy;L=G||re||ie||"Filière personnalisée"}L||(L="Filière non spécifiée");const W=(c==null?void 0:c.graduationYear)||(e==null?void 0:e.graduationYear)||z.graduationYear||"",U=(c==null?void 0:c.email)||(e==null?void 0:e.email)||z.email||(t==null?void 0:t.email)||"",Z=(c==null?void 0:c.photoURL)||(e==null?void 0:e.photoURL)||"",oe=(c==null?void 0:c.createdAt)||(e==null?void 0:e.createdAt),ke=(c==null?void 0:c.isVerified)||(e==null?void 0:e.isVerified),et=(c==null?void 0:c.location)||(e==null?void 0:e.location)||"",ae=(c==null?void 0:c.co2Saved)||(e==null?void 0:e.co2Saved)||0,fe=t&&e&&t.uid===e.id,ce=async G=>{if(t)try{const re=Ze(ye,"reviews",G),ie=s.find(We=>We.id===G);if(!ie)return;const Ae=ie.likes||[],ze=ie.dislikes||[];Ae.includes(t.uid)?await un(re,{likes:Ae.filter(We=>We!==t.uid)}):await un(re,{likes:[...Ae,t.uid],dislikes:ze.filter(We=>We!==t.uid)}),a(We=>We.map(bt=>{if(bt.id===G){const O=bt.likes||[],B=bt.dislikes||[];return O.includes(t.uid)?{...bt,likes:O.filter(K=>K!==t.uid)}:{...bt,likes:[...O,t.uid],dislikes:B.filter(K=>K!==t.uid)}}return bt}))}catch(re){console.error("Error liking review:",re),gn.error("Erreur lors du like")}},Ue=async G=>{if(t)try{const re=Ze(ye,"reviews",G),ie=s.find(We=>We.id===G);if(!ie)return;const Ae=ie.likes||[],ze=ie.dislikes||[];ze.includes(t.uid)?await un(re,{dislikes:ze.filter(We=>We!==t.uid)}):await un(re,{dislikes:[...ze,t.uid],likes:Ae.filter(We=>We!==t.uid)}),a(We=>We.map(bt=>{if(bt.id===G){const O=bt.likes||[],B=bt.dislikes||[];return B.includes(t.uid)?{...bt,dislikes:B.filter(K=>K!==t.uid)}:{...bt,dislikes:[...B,t.uid],likes:O.filter(K=>K!==t.uid)}}return bt}))}catch(re){console.error("Error disliking review:",re),gn.error("Erreur lors du dislike")}},J=async G=>{if(!(!t||!x.trim()))try{const re=Ze(ye,"reviews",G),ie=s.find(ze=>ze.id===G);if(!ie)return;const Ae={userId:t.uid,comment:x.trim(),createdAt:new Date};await un(re,{replies:[...ie.replies||[],Ae]}),a(ze=>ze.map(We=>We.id===G?{...We,replies:[...We.replies||[],Ae]}:We)),_(""),y(null),gn.success("Réponse envoyée")}catch(re){console.error("Error replying to review:",re),gn.error("Erreur lors de l'envoi de la réponse")}},pe=async()=>{if(t)try{const G=`${E} ${D}`.trim();await un(Ze(ye,"users",t.uid),{firstName:E,lastName:D,displayName:G,updatedAt:new Date}),await t.reload(),gn.success("Nom mis à jour !")}catch{gn.error("Erreur lors de la mise à jour du nom")}};return t?i.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8 space-y-4 sm:space-y-6",children:[i.jsx(Y,{children:i.jsx(Pe,{className:"text-left",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:space-x-4 text-center sm:text-left",children:[i.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0",children:[i.jsx(H5,{currentPhotoURL:Z,displayName:H}),ke&&i.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 sm:w-6 sm:h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:i.jsx(Et,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 text-white"})})]}),i.jsxs("div",{className:"flex-1 w-full",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-2 mb-1",children:[i.jsx(Re,{className:"text-xl sm:text-2xl lg:text-3xl text-center sm:text-left w-full sm:w-auto",children:H}),ke&&i.jsxs(Ie,{className:"bg-green-100 text-green-800 border-green-200 mt-2 sm:mt-0 text-xs sm:text-sm",children:[i.jsx(Et,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),i.jsx(at,{className:"text-sm sm:text-base text-center sm:text-left break-all",children:U}),i.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-muted-foreground text-center sm:text-left text-xs sm:text-sm",children:[i.jsxs("div",{children:[i.jsx(or,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 inline"})," Université : ",i.jsx("span",{className:"text-xs sm:text-sm",children:$})]}),i.jsxs("div",{children:[i.jsx(ji,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 inline"})," Filière : ",i.jsx("span",{className:"text-xs sm:text-sm",children:L})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-bold",children:"Année de diplôme :"})," ",i.jsx("span",{className:"text-xs sm:text-sm",children:W})]})]}),et&&i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[i.jsx(qn,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),i.jsx("span",{className:"text-xs sm:text-sm",children:et})]}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[i.jsx(Us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),i.jsxs("span",{className:"text-xs sm:text-sm",children:["Membre depuis ",T(oe)]})]}),ae&&ae>0&&i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-green-600 text-center sm:text-left",children:[i.jsx(Hs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),i.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[ae," kg CO₂ économisés"]})]})]})]})})}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[i.jsx(Y,{children:i.jsx(Q,{className:"pt-4 sm:pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Jt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.listings?i.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.totalListings}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-4 sm:pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(lm,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.listings?i.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.activeListings}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-4 sm:pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(to,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.reviews?i.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.averageRating||"—"}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-4 sm:pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(xr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-red-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.favorites?i.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.totalFavorites}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),i.jsxs(cc,{defaultValue:"listings",className:"space-y-4",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-4 sm:grid-cols-4",children:[i.jsxs($t,{value:"listings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(Jt,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"}),i.jsx("span",{className:"sm:hidden",children:"Annonces"}),!m.listings&&d.totalListings>0&&i.jsx(Ie,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:d.totalListings})]}),i.jsxs($t,{value:"reviews",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(to,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Avis Reçus"}),i.jsx("span",{className:"sm:hidden",children:"Avis"}),!m.reviews&&d.totalReviews>0&&i.jsx(Ie,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:d.totalReviews})]}),i.jsxs($t,{value:"favorites",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(xr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Favoris"}),i.jsx("span",{className:"sm:hidden",children:"Favoris"}),!m.favorites&&d.totalFavorites>0&&i.jsx(Ie,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:d.totalFavorites})]}),i.jsxs($t,{value:"settings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(or,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Paramètres"}),i.jsx("span",{className:"sm:hidden",children:"Paramètres"})]})]}),i.jsx(Ut,{value:"listings",className:"space-y-4",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Jt,{className:"w-5 h-5"}),"Mes Annonces"]}),i.jsx(at,{children:"Gérez vos annonces publiées sur StudyMarket"})]}),i.jsx(Q,{children:m.listings?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((G,re)=>i.jsxs(Y,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(Q,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},re))}):n.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Jt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publié d'annonces."}),i.jsx(F,{asChild:!0,children:i.jsx(be,{to:"/create",children:"Publier ma première annonce"})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(G=>i.jsx(bf,{listing:G},G.id))})})]})}),i.jsx(Ut,{value:"reviews",className:"space-y-4",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(to,{className:"w-5 h-5"}),"Avis Reçus"]}),i.jsx(at,{children:"Les avis laissés par d'autres étudiants"})]}),i.jsx(Q,{children:m.reviews?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((G,re)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((ie,Ae)=>i.jsx("div",{className:"w-4 h-4 bg-muted rounded"},Ae))}),i.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},re))}):s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(zt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),i.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reçu pour le moment. Les avis apparaîtront après vos premières transactions."})]}):i.jsx("div",{className:"space-y-4",children:s.map(G=>{var re,ie,Ae,ze,We,bt;return i.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"flex",children:C(G.rating)}),i.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[G.rating,"/5"]})]}),i.jsx("span",{className:"text-sm text-muted-foreground",children:T(G.createdAt)})]}),i.jsx("p",{className:"text-foreground mb-3 leading-relaxed text-left",children:G.comment}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[((re=v[G.reviewerId])==null?void 0:re.photoURL)&&i.jsx("img",{src:v[G.reviewerId].photoURL,alt:"avatar",className:"w-7 h-7 rounded-full object-cover"}),G.reviewerId===t.uid?(e==null?void 0:e.displayName)||"Vous":(ie=v[G.reviewerId])!=null&&ie.displayName?v[G.reviewerId].displayName:i.jsx("span",{className:"inline-block bg-gray-200 text-gray-600 px-2 py-0.5 rounded text-xs",children:"Profil supprimé"})]}),i.jsx(Ie,{variant:"outline",className:"text-xs",children:G.reviewType==="buyer"?"Acheteur":"Vendeur"})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[i.jsxs(F,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(Ae=G.likes)!=null&&Ae.includes((t==null?void 0:t.uid)||"")?"text-primary":""}`,onClick:()=>ce(G.id),children:[i.jsx(mQ,{className:"w-4 h-4"}),i.jsx("span",{children:((ze=G.likes)==null?void 0:ze.length)||0})]}),i.jsxs(F,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(We=G.dislikes)!=null&&We.includes((t==null?void 0:t.uid)||"")?"text-destructive":""}`,onClick:()=>Ue(G.id),children:[i.jsx(fQ,{className:"w-4 h-4"}),i.jsx("span",{children:((bt=G.dislikes)==null?void 0:bt.length)||0})]}),i.jsxs(F,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>y(b===G.id?null:G.id),children:[i.jsx(zt,{className:"w-4 h-4"}),i.jsx("span",{children:"Répondre"})]})]}),b===G.id&&i.jsxs("div",{className:"mt-3 space-y-2",children:[i.jsx(_s,{placeholder:"Votre réponse...",value:x,onChange:O=>_(O.target.value),className:"min-h-[80px]"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(F,{variant:"outline",size:"sm",onClick:()=>{y(null),_("")},children:"Annuler"}),i.jsx(F,{size:"sm",onClick:()=>J(G.id),disabled:!x.trim(),children:"Envoyer"})]})]}),G.replies&&G.replies.length>0&&i.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-muted",children:G.replies.map((O,B)=>{var K;return i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"font-medium",children:fe&&O.userId===(t==null?void 0:t.uid)?"Vous":((K=v[O.userId])==null?void 0:K.displayName)||"Utilisateur"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:T(O.createdAt)})]}),i.jsx("p",{className:"text-muted-foreground text-left",children:O.comment})]},B)})})]},G.id)})})})]})}),i.jsx(Ut,{value:"favorites",className:"space-y-4",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(xr,{className:"w-5 h-5"}),"Mes Favoris"]}),i.jsx(at,{children:"Les annonces que vous avez ajoutées à vos favoris"})]}),i.jsx(Q,{children:m.favorites?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((G,re)=>i.jsxs(Y,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(Q,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},re))}):o.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(xr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les à vos favoris !"}),i.jsx(F,{asChild:!0,children:i.jsx(be,{to:"/create",children:"Publier ma première annonce"})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(G=>i.jsx(bf,{listing:G},G.id))})})]})}),i.jsx(Ut,{value:"settings",className:"space-y-4",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsx(Re,{children:"Paramètres du profil"}),i.jsx(at,{children:"Modifie tes informations principales."})]}),i.jsxs(Q,{children:[i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(he,{htmlFor:"firstName",children:"Prénom"}),i.jsx(_e,{id:"firstName",value:E,onChange:G=>S(G.target.value),autoComplete:"given-name"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx(he,{htmlFor:"lastName",children:"Nom"}),i.jsx(_e,{id:"lastName",value:D,onChange:G=>I(G.target.value),autoComplete:"family-name"})]})]}),i.jsx(F,{onClick:pe,disabled:!E||!D,children:"Enregistrer"})]})]})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour voir votre profil."})})})})};var AN="Switch",[Dce,tme]=os(AN),[Mce,Oce]=Dce(AN),G5=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,p]=g.useState(null),v=Xe(e,_=>p(_)),w=g.useRef(!1),b=m?d||!!m.closest("form"):!0,[y=!1,x]=ss({prop:s,defaultProp:a,onChange:u});return i.jsxs(Mce,{scope:n,checked:y,disabled:l,children:[i.jsx(De.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":Q5(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:ge(t.onClick,_=>{x(E=>!E),b&&(w.current=_.isPropagationStopped(),w.current||_.stopPropagation())})}),b&&i.jsx(Lce,{control:m,bubbles:!w.current,name:r,value:c,checked:y,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});G5.displayName=AN;var K5="SwitchThumb",Y5=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=Oce(K5,n);return i.jsx(De.span,{"data-state":Q5(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});Y5.displayName=K5;var Lce=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,a=g.useRef(null),o=Xx(n),l=Ux(e);return g.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&h){const m=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(m)}},[o,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Q5(t){return t?"checked":"unchecked"}var J5=G5,Vce=Y5;const kn=g.forwardRef(({className:t,...e},n)=>i.jsx(J5,{className:Le("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:i.jsx(Vce,{className:Le("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));kn.displayName=J5.displayName;const Fce=Fe.object({displayName:Fe.string().min(2,"Le nom doit contenir au moins 2 caractères"),bio:Fe.string().max(500,"La bio ne peut pas dépasser 500 caractères").optional(),phone:Fe.string().optional(),university:Fe.string().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:Fe.string().min(1,"Veuillez indiquer votre filière"),graduationYear:Fe.number().min(2020).max(2035),campus:Fe.string().optional(),location:Fe.string().optional()}),$ce=Fe.object({currentPassword:Fe.string().min(6,"Le mot de passe actuel est requis"),newPassword:Fe.string().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractères"),confirmPassword:Fe.string()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),Uce=Fe.object({newEmail:Fe.string().email("Email invalide"),password:Fe.string().min(6,"Mot de passe requis pour changer l'email")}),zce=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris Cité","Sciences Po Paris","Université de Lyon","Université de Marseille","Université de Toulouse","Université de Bordeaux","Université de Lille","Université de Strasbourg","Université de Nantes","Université de Montpellier","Autre université"],Bce=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Économie","Psychologie","Communication","Design","Autre"],qce=()=>{var V,z,H,$,L,W;const{currentUser:t,userProfile:e,updateUserProfile:n,logout:r}=Zt(),s=Mn(),[a,o]=g.useState("profile"),[l,c]=g.useState(!1),[u,d]=g.useState(!1),[h,m]=g.useState(!1),[p,v]=g.useState(!1),[w,b]=g.useState(""),[y,x]=g.useState({email:((V=e==null?void 0:e.notificationPreferences)==null?void 0:V.email)??!0,push:((z=e==null?void 0:e.notificationPreferences)==null?void 0:z.push)??!0,sms:((H=e==null?void 0:e.notificationPreferences)==null?void 0:H.sms)??!1,alerts:(($=e==null?void 0:e.notificationPreferences)==null?void 0:$.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[_,E]=g.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),S=_l({resolver:jl(Fce),defaultValues:{displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),D=_l({resolver:jl($ce)}),I=_l({resolver:jl(Uce)});g.useEffect(()=>{var U,Z,oe,ke;e&&(S.reset({displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),x({email:((U=e.notificationPreferences)==null?void 0:U.email)??!0,push:((Z=e.notificationPreferences)==null?void 0:Z.push)??!0,sms:((oe=e.notificationPreferences)==null?void 0:oe.sms)??!1,alerts:((ke=e.notificationPreferences)==null?void 0:ke.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,S]);const A=async U=>{c(!0);try{await n({displayName:U.displayName,bio:U.bio||void 0,phone:U.phone||void 0,university:U.university,fieldOfStudy:U.fieldOfStudy,graduationYear:U.graduationYear,campus:U.campus||void 0,location:U.location||void 0}),te.success("Profil mis à jour avec succès !")}catch(Z){console.error("Erreur lors de la mise à jour du profil:",Z),te.error("Erreur lors de la mise à jour du profil")}finally{c(!1)}},R=async()=>{c(!0);try{await n({notificationPreferences:{email:y.email,push:y.push,sms:y.sms,alerts:y.alerts}}),te.success("Préférences de notification mises à jour !")}catch(U){console.error("Erreur lors de la mise à jour des notifications:",U),te.error("Erreur lors de la mise à jour des notifications")}finally{c(!1)}},N=async U=>{if(t){c(!0);try{const Z=xo.credential(t.email,U.currentPassword);await IC(t,Z),await B7(t,U.newPassword),te.success("Mot de passe mis à jour avec succès !"),m(!1),D.reset()}catch(Z){console.error("Erreur lors du changement de mot de passe:",Z),Z.code==="auth/wrong-password"?te.error("Mot de passe actuel incorrect"):te.error("Erreur lors du changement de mot de passe")}finally{c(!1)}}},P=async U=>{if(t){c(!0);try{const Z=xo.credential(t.email,U.password);await IC(t,Z),await z7(t,U.newEmail),await n({email:U.newEmail}),te.success("Email mis à jour avec succès !"),v(!1),I.reset()}catch(Z){console.error("Erreur lors du changement d'email:",Z),Z.code==="auth/wrong-password"?te.error("Mot de passe incorrect"):Z.code==="auth/email-already-in-use"?te.error("Cet email est déjà utilisé"):te.error("Erreur lors du changement d'email")}finally{c(!1)}}},T=async()=>{if(!(!t||w!=="SUPPRIMER")){c(!0);try{const U=P4(ye),Z=["listings","conversations","reviews","favorites","reports"];for(const oe of Z){const ke=Mt(wt(ye,oe),Vt("userId","==",t.uid));(await Kt(ke)).forEach(ae=>{U.delete(ae.ref)})}U.delete(Ze(ye,"users",t.uid)),await U.commit(),await K7(t),te.success("Compte supprimé avec succès"),s("/")}catch(U){console.error("Erreur lors de la suppression du compte:",U),te.error("Erreur lors de la suppression du compte")}finally{c(!1)}}},C=async()=>{if(t){c(!0);try{const U={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},Z=Mt(wt(ye,"listings"),Vt("sellerId","==",t.uid)),oe=await Kt(Z);U.listings=oe.docs.map(ie=>({id:ie.id,...ie.data()}));const ke=Mt(wt(ye,"conversations"),Vt("participants","array-contains",t.uid)),et=await Kt(ke);U.conversations=et.docs.map(ie=>({id:ie.id,...ie.data()}));const ae=Mt(wt(ye,"reviews"),Vt("revieweeId","==",t.uid)),fe=await Kt(ae);U.reviews=fe.docs.map(ie=>({id:ie.id,...ie.data()}));const ce=Mt(wt(ye,"favorites"),Vt("userId","==",t.uid)),Ue=await Kt(ce);U.favorites=Ue.docs.map(ie=>({id:ie.id,...ie.data()}));const J=JSON.stringify(U,null,2),pe=new Blob([J],{type:"application/json"}),G=URL.createObjectURL(pe),re=document.createElement("a");re.href=G,re.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,re.click(),URL.revokeObjectURL(G),te.success("Données exportées avec succès !")}catch(U){console.error("Erreur lors de l'export des données:",U),te.error("Erreur lors de l'export des données")}finally{c(!1)}}};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[i.jsx(Rx,{className:"w-8 h-8"}),"Paramètres"]}),i.jsx("p",{className:"text-muted-foreground",children:"Gérez votre profil, vos préférences et votre sécurité"})]}),i.jsxs(cc,{value:a,onValueChange:o,className:"space-y-6",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-5",children:[i.jsxs($t,{value:"profile",className:"flex items-center gap-2",children:[i.jsx(or,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),i.jsxs($t,{value:"notifications",className:"flex items-center gap-2",children:[i.jsx(Ls,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),i.jsxs($t,{value:"privacy",className:"flex items-center gap-2",children:[i.jsx(Ru,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Confidentialité"})]}),i.jsxs($t,{value:"security",className:"flex items-center gap-2",children:[i.jsx(Et,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Sécurité"})]}),i.jsxs($t,{value:"data",className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Données"})]})]}),i.jsx(Ut,{value:"profile",className:"space-y-6",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(or,{className:"w-5 h-5"}),"Informations personnelles"]}),i.jsx(at,{children:"Mettez à jour vos informations de profil et vos préférences"})]}),i.jsxs(Q,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(H5,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Photo de profil"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),i.jsx(ms,{}),i.jsxs("form",{onSubmit:S.handleSubmit(A),className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"displayName",children:"Nom complet *"}),i.jsx(_e,{id:"displayName",...S.register("displayName"),placeholder:"Votre nom complet"}),S.formState.errors.displayName&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.displayName.message})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"phone",children:"Téléphone"}),i.jsx(_e,{id:"phone",type:"tel",...S.register("phone"),placeholder:"+33 6 12 34 56 78"})]})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"bio",children:"Biographie"}),i.jsx(_s,{id:"bio",...S.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((L=S.watch("bio"))==null?void 0:L.length)||0,"/500 caractères"]})]}),i.jsx(ms,{}),i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(ji,{className:"w-4 h-4"}),"Informations académiques"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"university",children:"Université *"}),i.jsxs(mt,{value:S.watch("university"),onValueChange:U=>S.setValue("university",U),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Sélectionnez votre université"})}),i.jsx(ut,{children:zce.map(U=>i.jsx(de,{value:U,children:U},U))})]}),S.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.university.message})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"fieldOfStudy",children:"Filière d'études *"}),i.jsxs(mt,{value:S.watch("fieldOfStudy"),onValueChange:U=>S.setValue("fieldOfStudy",U),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Sélectionnez votre filière"})}),i.jsx(ut,{children:Bce.map(U=>i.jsx(de,{value:U,children:U},U))})]}),S.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.fieldOfStudy.message})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"graduationYear",children:"Année de diplôme *"}),i.jsxs(mt,{value:(W=S.watch("graduationYear"))==null?void 0:W.toString(),onValueChange:U=>S.setValue("graduationYear",parseInt(U)),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Année de diplôme"})}),i.jsx(ut,{children:Array.from({length:16},(U,Z)=>2020+Z).map(U=>i.jsx(de,{value:U.toString(),children:U},U))})]}),S.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.graduationYear.message})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"campus",children:"Campus"}),i.jsx(_e,{id:"campus",...S.register("campus"),placeholder:"Campus principal"})]})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"location",children:"Localisation"}),i.jsx(_e,{id:"location",...S.register("location"),placeholder:"Paris, France"})]}),i.jsx(F,{type:"submit",disabled:l,className:"w-full",children:l?i.jsxs(i.Fragment,{children:[i.jsx(Hr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):i.jsxs(i.Fragment,{children:[i.jsx(C0,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),i.jsx(Ut,{value:"notifications",className:"space-y-6",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Ls,{className:"w-5 h-5"}),"Préférences de notification"]}),i.jsx(at,{children:"Choisissez comment vous souhaitez être notifié"})]}),i.jsxs(Q,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ar,{className:"w-4 h-4 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),i.jsx(kn,{checked:y.email,onCheckedChange:U=>x(Z=>({...Z,email:U}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ic,{className:"w-4 h-4 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Notifications push"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),i.jsx(kn,{checked:y.push,onCheckedChange:U=>x(Z=>({...Z,push:U}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(rd,{className:"w-4 h-4 text-purple-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"SMS"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientôt disponible)"})]})]}),i.jsx(kn,{checked:y.sms,onCheckedChange:U=>x(Z=>({...Z,sms:U})),disabled:!0})]})]})]}),i.jsx(ms,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Types de notifications"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zt,{className:"w-4 h-4 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Messages"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),i.jsx(kn,{checked:y.messages,onCheckedChange:U=>x(Z=>({...Z,messages:U}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Jt,{className:"w-4 h-4 text-orange-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Annonces"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant à vos recherches"})]})]}),i.jsx(kn,{checked:y.listings,onCheckedChange:U=>x(Z=>({...Z,listings:U}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(to,{className:"w-4 h-4 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Avis et évaluations"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),i.jsx(kn,{checked:y.reviews,onCheckedChange:U=>x(Z=>({...Z,reviews:U}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ls,{className:"w-4 h-4 text-red-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Alertes de sécurité"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises à jour de sécurité"})]})]}),i.jsx(kn,{checked:y.alerts,onCheckedChange:U=>x(Z=>({...Z,alerts:U}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(cQ,{className:"w-4 h-4 text-pink-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Marketing"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalités et promotions"})]})]}),i.jsx(kn,{checked:y.marketing,onCheckedChange:U=>x(Z=>({...Z,marketing:U}))})]})]})]}),i.jsx(F,{onClick:R,disabled:l,className:"w-full",children:l?i.jsxs(i.Fragment,{children:[i.jsx(Hr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):i.jsxs(i.Fragment,{children:[i.jsx(C0,{className:"w-4 h-4 mr-2"}),"Sauvegarder les préférences"]})})]})]})}),i.jsx(Ut,{value:"privacy",className:"space-y-6",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Ru,{className:"w-5 h-5"}),"Confidentialité et visibilité"]}),i.jsx(at,{children:"Contrôlez qui peut voir vos informations"})]}),i.jsxs(Q,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Visibilité du profil"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Profil public"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les étudiants vérifiés"})]}),i.jsx(kn,{checked:_.profileVisibility==="public",onCheckedChange:U=>E(Z=>({...Z,profileVisibility:U?"public":"private"}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher l'email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),i.jsx(kn,{checked:_.showEmail,onCheckedChange:U=>E(Z=>({...Z,showEmail:U}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher le téléphone"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numéro de téléphone est visible sur votre profil"})]}),i.jsx(kn,{checked:_.showPhone,onCheckedChange:U=>E(Z=>({...Z,showPhone:U}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher l'université"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre université est visible sur votre profil"})]}),i.jsx(kn,{checked:_.showUniversity,onCheckedChange:U=>E(Z=>({...Z,showUniversity:U}))})]})]})]}),i.jsx(ms,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Interactions"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres étudiants peuvent vous envoyer des messages"})]}),i.jsx(kn,{checked:_.allowMessages,onCheckedChange:U=>E(Z=>({...Z,allowMessages:U}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Statut en ligne"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous êtes en ligne"})]}),i.jsx(kn,{checked:_.showOnlineStatus,onCheckedChange:U=>E(Z=>({...Z,showOnlineStatus:U}))})]})]})]}),i.jsxs(kt,{children:[i.jsx(Et,{className:"h-4 w-4"}),i.jsx(Tt,{children:"Vos informations personnelles sont toujours protégées et ne sont jamais partagées avec des tiers sans votre consentement."})]})]})]})}),i.jsx(Ut,{value:"security",className:"space-y-6",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Et,{className:"w-5 h-5"}),"Sécurité du compte"]}),i.jsx(at,{children:"Gérez la sécurité de votre compte StudyMarket"})]}),i.jsxs(Q,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Informations du compte"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(ar,{className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"font-medium",children:"Email"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),i.jsxs(aa,{open:p,onOpenChange:v,children:[i.jsx(hu,{asChild:!0,children:i.jsx(F,{variant:"outline",size:"sm",children:"Changer l'email"})}),i.jsxs(Ni,{children:[i.jsxs(oa,{children:[i.jsx(Si,{children:"Changer l'adresse email"}),i.jsx(fu,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),i.jsxs("form",{onSubmit:I.handleSubmit(P),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"newEmail",children:"Nouvel email"}),i.jsx(_e,{id:"newEmail",type:"email",...I.register("newEmail"),placeholder:"nouveau@email.com"}),I.formState.errors.newEmail&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:I.formState.errors.newEmail.message})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),i.jsx(_e,{id:"emailPassword",type:"password",...I.register("password"),placeholder:"••••••••"}),I.formState.errors.password&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:I.formState.errors.password.message})]}),i.jsxs(og,{children:[i.jsx(F,{type:"button",variant:"outline",onClick:()=>v(!1),children:"Annuler"}),i.jsxs(F,{type:"submit",disabled:l,children:[l?i.jsx(Hr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(C0,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ul,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernière modification : il y a 30 jours"}),i.jsxs(aa,{open:h,onOpenChange:m,children:[i.jsx(hu,{asChild:!0,children:i.jsx(F,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),i.jsxs(Ni,{children:[i.jsxs(oa,{children:[i.jsx(Si,{children:"Changer le mot de passe"}),i.jsx(fu,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),i.jsxs("form",{onSubmit:D.handleSubmit(N),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),i.jsx(_e,{id:"currentPassword",type:"password",...D.register("currentPassword"),placeholder:"••••••••"}),D.formState.errors.currentPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:D.formState.errors.currentPassword.message})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),i.jsx(_e,{id:"newPassword",type:"password",...D.register("newPassword"),placeholder:"••••••••"}),D.formState.errors.newPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:D.formState.errors.newPassword.message})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),i.jsx(_e,{id:"confirmPassword",type:"password",...D.register("confirmPassword"),placeholder:"••••••••"}),D.formState.errors.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:D.formState.errors.confirmPassword.message})]}),i.jsxs(og,{children:[i.jsx(F,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Annuler"}),i.jsxs(F,{type:"submit",disabled:l,children:[l?i.jsx(Hr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(aQ,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),i.jsx(ms,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Vérification du compte"}),i.jsx("div",{className:"p-4 border rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vérifié":"Vérification en attente"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut étudiant a été vérifié":"Votre statut étudiant est en cours de vérification"})]})]}),e!=null&&e.isVerified?i.jsxs(Ie,{className:"bg-green-100 text-green-800",children:[i.jsx(xt,{className:"w-3 h-3 mr-1"}),"Vérifié"]}):i.jsx(Ie,{variant:"outline",children:"En attente"})]})})]}),i.jsxs(kt,{children:[i.jsx(Et,{className:"h-4 w-4"}),i.jsx(Tt,{children:"Pour votre sécurité, nous vous recommandons d'utiliser un mot de passe fort et de le changer régulièrement."})]})]})]})}),i.jsxs(Ut,{value:"data",className:"space-y-6",children:[i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-5 h-5"}),"Gestion des données"]}),i.jsx(at,{children:"Exportez ou supprimez vos données personnelles"})]}),i.jsxs(Q,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Exporter mes données"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Téléchargez une copie de toutes vos données StudyMarket au format JSON."}),i.jsxs(F,{onClick:C,disabled:l,variant:"outline",children:[l?i.jsx(Hr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(ws,{className:"w-4 h-4 mr-2"}),"Exporter mes données"]})]}),i.jsx(ms,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),i.jsxs(kt,{className:"border-destructive",children:[i.jsx(hn,{className:"h-4 w-4"}),i.jsx(Tt,{children:"La suppression de votre compte est irréversible. Toutes vos données seront définitivement supprimées."})]}),i.jsxs(aa,{open:u,onOpenChange:d,children:[i.jsx(hu,{asChild:!0,children:i.jsxs(F,{variant:"destructive",children:[i.jsx(ia,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),i.jsxs(Ni,{children:[i.jsxs(oa,{children:[i.jsx(Si,{className:"text-destructive",children:"Supprimer définitivement le compte"}),i.jsxs(fu,{children:["Cette action est irréversible. Toutes vos données seront supprimées :",i.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[i.jsx("li",{children:"Profil utilisateur"}),i.jsx("li",{children:"Toutes vos annonces"}),i.jsx("li",{children:"Conversations et messages"}),i.jsx("li",{children:"Avis et évaluations"}),i.jsx("li",{children:"Favoris et recherches sauvegardées"})]})]})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(he,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),i.jsx(_e,{id:"deleteConfirm",value:w,onChange:U=>b(U.target.value),placeholder:"SUPPRIMER"})]})}),i.jsxs(og,{children:[i.jsx(F,{variant:"outline",onClick:()=>d(!1),children:"Annuler"}),i.jsxs(F,{variant:"destructive",onClick:T,disabled:w!=="SUPPRIMER"||l,children:[l?i.jsx(Hr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(ia,{className:"w-4 h-4 mr-2"}),"Supprimer définitivement"]})]})]})]})]})]})]}),i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(av,{className:"w-5 h-5"}),"Informations légales"]})}),i.jsx(Q,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(F,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Dr,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),i.jsx(F,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Dr,{className:"w-4 h-4"}),"Politique de confidentialité"]})}),i.jsx(F,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Dr,{className:"w-4 h-4"}),"Politique des cookies"]})}),i.jsx(F,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Dr,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour accéder aux paramètres."})})})})};function Wce(t,e=[]){let n=[];function r(a,o){const l=g.createContext(o),c=n.length;n=[...n,o];function u(h){const{scope:m,children:p,...v}=h,w=(m==null?void 0:m[t][c])||l,b=g.useMemo(()=>v,Object.values(v));return i.jsx(w.Provider,{value:b,children:p})}function d(h,m){const p=(m==null?void 0:m[t][c])||l,v=g.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=n.map(o=>g.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,Hce(s,...e)]}function Hce(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var PN="Progress",RN=100,[Gce,nme]=Wce(PN),[Kce,Yce]=Gce(PN),X5=g.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=Qce,...o}=t;(s||s===0)&&!cT(s)&&console.error(Jce(`${s}`,"Progress"));const l=cT(s)?s:RN;r!==null&&!uT(r,l)&&console.error(Xce(`${r}`,"Progress"));const c=uT(r,l)?r:null,u=Pv(c)?a(c,l):void 0;return i.jsx(Kce,{scope:n,value:c,max:l,children:i.jsx(De.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Pv(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":t6(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});X5.displayName=PN;var Z5="ProgressIndicator",e6=g.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=Yce(Z5,n);return i.jsx(De.div,{"data-state":t6(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});e6.displayName=Z5;function Qce(t,e){return`${Math.round(t/e*100)}%`}function t6(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Pv(t){return typeof t=="number"}function cT(t){return Pv(t)&&!isNaN(t)&&t>0}function uT(t,e){return Pv(t)&&!isNaN(t)&&t<=e&&t>=0}function Jce(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${RN}\`.`}function Xce(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${RN} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var n6=X5,Zce=e6;const r6=g.forwardRef(({className:t,value:e,...n},r)=>i.jsx(n6,{ref:r,className:Le("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:i.jsx(Zce,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));r6.displayName=n6.displayName;const el={electronics:{category:"Électronique",icon:ic,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:CD,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:ui,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, déco, électroménager"},clothing:{category:"Vêtements",icon:Dj,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vêtements, chaussures, accessoires"}},eue=[{id:"first_transaction",name:"Premier Pas",icon:"🌱",threshold:1,description:"Première transaction écologique"},{id:"co2_saver_10",name:"Éco-Warrior",icon:"🌍",threshold:10,description:"10 kg CO₂ économisés"},{id:"co2_saver_50",name:"Planète Protecteur",icon:"🛡️",threshold:50,description:"50 kg CO₂ économisés"},{id:"co2_saver_100",name:"Héros Climatique",icon:"🦸",threshold:100,description:"100 kg CO₂ économisés"},{id:"water_saver",name:"Gardien de l'Eau",icon:"💧",threshold:1e3,description:"1000L d'eau économisés"},{id:"recycling_master",name:"Maître du Recyclage",icon:"♻️",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"😇",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"🏆",threshold:10,description:"10 transactions en un mois"}],Sc=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},tue=()=>{const{currentUser:t,userProfile:e}=Zt(),[n,r]=g.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Débutant",percentile:0}),[s,a]=g.useState([]),[o,l]=g.useState(!0),[c,u]=g.useState("all");g.useEffect(()=>{t&&d()},[t,c]);const d=async()=>{if(t){l(!0);try{const x=Mt(wt(ye,"listings"),Vt("sellerId","==",t.uid)),_=await Kt(x),E=[];_.forEach(D=>{const I=D.data();E.push({id:D.id,...I,createdAt:Sc(I.createdAt),updatedAt:Sc(I.updatedAt)})}),a(E);const S=h(E,c);r(S),await w(S)}catch(x){console.error("Erreur lors du chargement des données environnementales:",x)}finally{l(!1)}}},h=(x,_)=>{const E=new Date;let S=x;if(_==="month"){const z=new Date(E.getFullYear(),E.getMonth()-1,E.getDate());S=x.filter(H=>Sc(H.createdAt)>=z)}else if(_==="year"){const z=new Date(E.getFullYear()-1,E.getMonth(),E.getDate());S=x.filter(H=>Sc(H.createdAt)>=z)}let D=0,I=0,A=0,R=0;const N={};S.forEach(z=>{const H=el[z.category]||el.electronics,$=1;let L=1;z.transactionType==="donation"?L=1.2:z.transactionType==="exchange"&&(L=.8),D+=H.co2PerItem*$*L,I+=H.waterPerItem*$*L,A+=H.energyPerItem*$*L,R+=H.wastePerItem*$*L,N[z.category]=(N[z.category]||0)+1});const P=m(x),T=p(x,D,I),{rank:C,percentile:V}=v(D,x.length);return{totalCo2Saved:Math.round(D*10)/10,totalWaterSaved:Math.round(I),totalEnergySaved:Math.round(A*10)/10,totalWasteAvoided:Math.round(R*10)/10,transactionsByCategory:N,monthlyImpact:P,badges:T,rank:C,percentile:V}},m=x=>{const _={};for(let E=11;E>=0;E--){const S=new Date;S.setMonth(S.getMonth()-E);const D=S.toISOString().slice(0,7);_[D]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return x.forEach(E=>{const D=Sc(E.createdAt).toISOString().slice(0,7);if(_[D]){const I=el[E.category]||el.electronics;let A=1;E.transactionType==="donation"?A=1.2:E.transactionType==="exchange"&&(A=.8),_[D].co2Saved+=I.co2PerItem*A,_[D].waterSaved+=I.waterPerItem*A,_[D].energySaved+=I.energyPerItem*A,_[D].transactions+=1}}),Object.entries(_).map(([E,S])=>({month:E,co2Saved:Math.round(S.co2Saved*10)/10,transactions:S.transactions,waterSaved:Math.round(S.waterSaved),energySaved:Math.round(S.energySaved*10)/10}))},p=(x,_,E)=>{const S=[];x.length>=1&&S.push("first_transaction"),_>=10&&S.push("co2_saver_10"),_>=50&&S.push("co2_saver_50"),_>=100&&S.push("co2_saver_100"),E>=1e3&&S.push("water_saver"),x.length>=20&&S.push("recycling_master"),x.filter(R=>R.transactionType==="donation").length>=5&&S.push("donation_hero");const I=new Date().toISOString().slice(0,7);return x.filter(R=>Sc(R.createdAt).toISOString().slice(0,7)===I).length>=10&&S.push("monthly_champion"),S},v=(x,_)=>{let E="Débutant",S=0;return x>=200?(E="Légende Écologique",S=95):x>=100?(E="Maître Environnemental",S=85):x>=50?(E="Expert Vert",S=70):x>=25?(E="Éco-Warrior",S=50):x>=10?(E="Protecteur",S=30):x>=5&&(E="Apprenti Vert",S=15),{rank:E,percentile:S}},w=async x=>{if(t)try{const _=Ze(ye,"users",t.uid);await un(_,{co2Saved:x.totalCo2Saved,environmentalRank:x.rank,environmentalBadges:x.badges,lastEnvironmentalUpdate:new Date})}catch(_){console.error("Erreur lors de la mise à jour des données environnementales:",_)}},b=async()=>{const x=`🌍 Mon impact écologique sur StudyMarket :

🌱 ${n.totalCo2Saved} kg CO₂ économisés
💧 ${n.totalWaterSaved} L d'eau préservés
⚡ ${n.totalEnergySaved} kWh d'énergie économisés
🏆 Rang : ${n.rank}

Rejoignez la communauté étudiante éco-responsable ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mon Impact Écologique - StudyMarket",text:x,url:window.location.origin})}catch{navigator.clipboard.writeText(x)}else navigator.clipboard.writeText(x)},y=()=>{const x={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:n,transactions:s.length,period:c},_=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),E=URL.createObjectURL(_),S=document.createElement("a");S.href=E,S.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,S.click(),URL.revokeObjectURL(E)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Hs,{className:"w-8 h-8 text-green-600"}),"Mon Impact Écologique"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez votre contribution à la protection de l'environnement"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(F,{variant:"outline",onClick:b,className:"flex items-center gap-2",children:[i.jsx(Rj,{className:"w-4 h-4"}),"Partager"]}),i.jsxs(F,{variant:"outline",onClick:y,className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4"}),"Exporter"]})]})]}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Us,{className:"w-5 h-5 text-muted-foreground"}),i.jsx("span",{className:"font-medium",children:"Période d'analyse :"})]}),i.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette année"},{key:"all",label:"Tout"}].map(x=>i.jsx(F,{variant:c===x.key?"default":"outline",size:"sm",onClick:()=>u(x.key),children:x.label},x.key))})]})})}),o?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((x,_)=>i.jsx(Y,{className:"animate-pulse",children:i.jsx(Q,{className:"pt-6",children:i.jsx("div",{className:"h-16 bg-muted rounded"})})},_))}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Y,{className:"border-green-200 bg-green-50/50",children:i.jsxs(Q,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-green-700",children:n.totalCo2Saved}),i.jsx("p",{className:"text-sm text-green-600",children:"kg CO₂ économisés"})]}),i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(Hs,{className:"w-6 h-6 text-green-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-green-600",children:["≈ ",Math.round(n.totalCo2Saved/2.3)," km en voiture évités"]})]})}),i.jsx(Y,{className:"border-blue-200 bg-blue-50/50",children:i.jsxs(Q,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.totalWaterSaved.toLocaleString()}),i.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau préservés"})]}),i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx(Hk,{className:"w-6 h-6 text-blue-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["≈ ",Math.round(n.totalWaterSaved/150)," douches économisées"]})]})}),i.jsx(Y,{className:"border-yellow-200 bg-yellow-50/50",children:i.jsxs(Q,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:n.totalEnergySaved}),i.jsx("p",{className:"text-sm text-yellow-600",children:"kWh économisés"})]}),i.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:i.jsx(id,{className:"w-6 h-6 text-yellow-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:["≈ ",Math.round(n.totalEnergySaved/3.5)," jours d'électricité"]})]})}),i.jsx(Y,{className:"border-purple-200 bg-purple-50/50",children:i.jsxs(Q,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-purple-700",children:n.totalWasteAvoided}),i.jsx("p",{className:"text-sm text-purple-600",children:"kg déchets évités"})]}),i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:i.jsx(dQ,{className:"w-6 h-6 text-purple-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["≈ ",Math.round(n.totalWasteAvoided/.5)," sacs poubelle évités"]})]})})]}),i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(SD,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang Écologique"]})}),i.jsxs(Q,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-primary",children:n.rank}),i.jsxs("p",{className:"text-muted-foreground",children:["Vous êtes dans le top ",100-n.percentile,"% des utilisateurs"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl",children:"🏆"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),i.jsx(r6,{value:n.percentile,className:"h-3"}),i.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[i.jsx("span",{children:"Débutant"}),i.jsx("span",{children:"Légende Écologique"})]})]})]}),i.jsxs(cc,{defaultValue:"overview",className:"space-y-4",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-4",children:[i.jsx($t,{value:"overview",children:"Vue d'ensemble"}),i.jsx($t,{value:"categories",children:"Par catégorie"}),i.jsx($t,{value:"badges",children:"Badges"}),i.jsx($t,{value:"methodology",children:"Méthodologie"})]}),i.jsxs(Ut,{value:"overview",className:"space-y-6",children:[i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(ID,{className:"w-5 h-5"}),"Évolution Mensuelle"]}),i.jsx(at,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),i.jsx(Q,{children:i.jsx("div",{className:"space-y-4",children:n.monthlyImpact.slice(-6).map((x,_)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),i.jsx("span",{className:"font-medium",children:new Date(x.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),i.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-green-600",children:[x.co2Saved," kg"]}),i.jsx("div",{className:"text-muted-foreground",children:"CO₂"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-blue-600",children:[x.waterSaved," L"]}),i.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold text-primary",children:x.transactions}),i.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},x.month))})})]}),i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(RD,{className:"w-5 h-5"}),"Équivalences Concrètes"]}),i.jsx(at,{children:"Votre impact traduit en équivalences du quotidien"})]}),i.jsx(Q,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[i.jsx(TD,{className:"w-8 h-8 text-green-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/2.3)," km"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture évités"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[i.jsx(pQ,{className:"w-8 h-8 text-blue-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/22)," arbres"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"plantés (équivalent CO₂)"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[i.jsx(nQ,{className:"w-8 h-8 text-yellow-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalEnergySaved/24)," jours"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation électrique"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[i.jsx(Hk,{className:"w-8 h-8 text-purple-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalWaterSaved/150)," douches"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes économisées"})]})]})]})})]})]}),i.jsx(Ut,{value:"categories",className:"space-y-6",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Jt,{className:"w-5 h-5"}),"Impact par Catégorie"]}),i.jsx(at,{children:"Détail de votre impact selon les types d'objets échangés"})]}),i.jsx(Q,{children:i.jsx("div",{className:"space-y-4",children:Object.entries(n.transactionsByCategory).map(([x,_])=>{const E=el[x]||el.electronics,S=E.icon,D=_*E.co2PerItem;return i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:i.jsx(S,{className:`w-5 h-5 ${E.color}`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:E.category}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[_," transaction",_>1?"s":""]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(D*10)/10," kg CO₂"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(_*E.waterPerItem)," L eau"]})]})]},x)})})})]})}),i.jsx(Ut,{value:"badges",className:"space-y-6",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Ib,{className:"w-5 h-5"}),"Badges Écologiques"]}),i.jsx(at,{children:"Vos récompenses pour votre engagement environnemental"})]}),i.jsx(Q,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:eue.map(x=>{const _=n.badges.includes(x.id);return i.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${_?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl mb-2",children:x.icon}),i.jsx("h3",{className:`font-semibold ${_?"text-green-800":"text-gray-600"}`,children:x.name}),i.jsx("p",{className:`text-sm ${_?"text-green-600":"text-gray-500"}`,children:x.description}),_&&i.jsx(Ie,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},x.id)})})})]})}),i.jsx(Ut,{value:"methodology",className:"space-y-6",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(_o,{className:"w-5 h-5"}),"Méthodologie de Calcul"]}),i.jsx(at,{children:"Comment nous calculons votre impact environnemental"})]}),i.jsxs(Q,{className:"space-y-6",children:[i.jsxs(kt,{children:[i.jsx(_o,{className:"h-4 w-4"}),i.jsx(Tt,{children:"Nos calculs sont basés sur des études scientifiques et des données de l'ADEME (Agence de l'Environnement et de la Maîtrise de l'Énergie)."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),i.jsx("p",{className:"text-muted-foreground",children:"Chaque objet acheté d'occasion évite la production d'un objet neuf. Nous calculons l'impact environnemental évité en nous basant sur l'empreinte carbone, hydrique et énergétique de la production de chaque catégorie d'objets."}),i.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catégorie"}),i.jsx("div",{className:"space-y-3",children:Object.entries(el).map(([x,_])=>{const E=_.icon;return i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(E,{className:`w-4 h-4 ${_.color}`}),i.jsx("span",{className:"font-medium",children:_.category})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"CO₂:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[_.co2PerItem," kg"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[_.waterPerItem," L"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Énergie:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[_.energyPerItem," kWh"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Déchets:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[_.wastePerItem," kg"]})]})]})]},x)})}),i.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondération"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Du,{className:"w-4 h-4 text-green-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(va,{className:"w-4 h-4 text-purple-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Échanges/Troc :"})," -20% d'impact (pas de transaction monétaire)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Jt,{className:"w-4 h-4 text-blue-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),i.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Références"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• ADEME - Base Carbone® pour les facteurs d'émission"}),i.jsx("li",{children:"• Water Footprint Network pour l'empreinte hydrique"}),i.jsx("li",{children:"• IEA (International Energy Agency) pour l'énergie"}),i.jsx("li",{children:"• Ellen MacArthur Foundation pour l'économie circulaire"})]})]})]})]})})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx(Hs,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),i.jsx("p",{className:"text-muted-foreground",children:"Découvrez combien vous contribuez à la protection de l'environnement"})]})})})},Cp=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Rv=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(Rv).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=Rv(t[n]);r!==void 0&&(e[n]=r)}),e}return t},dT=[{value:"all",label:"Toutes catégories"},{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],hT=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"Échange"},{value:"service",label:"Service"}],nue=[{value:"all",label:"Toutes universités"},{value:"sorbonne",label:"Sorbonne Université"},{value:"dauphine",label:"Université Paris-Dauphine"},{value:"polytechnique",label:"École Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSupélec"}],rue=()=>{const{currentUser:t,userProfile:e}=Zt(),[n,r]=g.useState([]),[s,a]=g.useState([]),[o,l]=g.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[c,u]=g.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[d,h]=g.useState(!1),[m,p]=g.useState(null),[v,w]=g.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});g.useEffect(()=>{t&&(b(),y())},[t]);const b=async()=>{if(t)try{u(V=>({...V,searches:!0}));const N=Mt(wt(ye,"savedSearches"),Vt("userId","==",t.uid),xs(50)),P=await Kt(N),T=[];P.forEach(V=>{const z=V.data();T.push({id:V.id,...z,createdAt:Cp(z.createdAt),updatedAt:Cp(z.updatedAt),lastNotified:z.lastNotified?Cp(z.lastNotified):void 0})}),T.sort((V,z)=>z.createdAt.getTime()-V.createdAt.getTime()),r(T);const C=T.filter(V=>V.alertsEnabled).length;l(V=>({...V,totalSearches:T.length,activeAlerts:C}))}catch(N){console.error("Erreur lors du chargement des recherches sauvegardées:",N),te.error("Erreur lors du chargement des recherches sauvegardées")}finally{u(N=>({...N,searches:!1}))}},y=async()=>{if(t)try{u(V=>({...V,matches:!0}));const N=Mt(wt(ye,"alertMatches"),Vt("userId","==",t.uid),xs(100)),P=await Kt(N),T=[];P.forEach(V=>{const z=V.data();T.push({id:V.id,...z,matchedAt:Cp(z.matchedAt)})}),T.sort((V,z)=>z.matchedAt.getTime()-V.matchedAt.getTime()),a(T);const C=T.filter(V=>!V.seen).length;l(V=>({...V,totalMatches:T.length,newMatches:C}))}catch(N){console.error("Erreur lors du chargement des correspondances:",N),te.error("Erreur lors du chargement des correspondances")}finally{u(N=>({...N,matches:!1}))}},x=async()=>{if(!t||!v.name.trim()){te.error("Veuillez remplir le nom de la recherche");return}u(N=>({...N,creating:!0}));try{const N={};if(v.query&&v.query.trim()&&(N.query=v.query.trim()),v.category&&v.category!=="all"&&(N.category=v.category),v.transactionType&&v.transactionType!=="all"&&(N.transactionType=v.transactionType),v.university&&v.university!=="all"&&(N.university=v.university),v.minPrice&&v.minPrice.trim()){const C=parseFloat(v.minPrice);!isNaN(C)&&C>=0&&(N.minPrice=C)}if(v.maxPrice&&v.maxPrice.trim()){const C=parseFloat(v.maxPrice);!isNaN(C)&&C>=0&&(N.maxPrice=C)}const P={userId:t.uid,name:v.name.trim(),filters:N,alertsEnabled:v.alertsEnabled,notificationFrequency:v.notificationFrequency,notificationMethods:{email:v.notificationMethods.email,push:v.notificationMethods.push,sms:v.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},T=Rv(P);await Ol(wt(ye,"savedSearches"),T),te.success("Alerte créée avec succès !"),h(!1),I(),b()}catch(N){console.error("Erreur lors de la création de l'alerte:",N),te.error("Erreur lors de la création de l'alerte")}finally{u(N=>({...N,creating:!1}))}},_=async(N,P)=>{try{u(C=>({...C,updating:!0}));const T=Rv({...P,updatedAt:new Date});await un(Ze(ye,"savedSearches",N),T),te.success("Recherche mise à jour !"),b()}catch(T){console.error("Erreur lors de la mise à jour:",T),te.error("Erreur lors de la mise à jour")}finally{u(T=>({...T,updating:!1}))}},E=async N=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette recherche sauvegardée ?"))try{await Au(Ze(ye,"savedSearches",N)),te.success("Recherche supprimée !"),b()}catch(P){console.error("Erreur lors de la suppression:",P),te.error("Erreur lors de la suppression")}},S=async(N,P)=>{await _(N,{alertsEnabled:P})},D=async N=>{try{await un(Ze(ye,"alertMatches",N),{seen:!0,seenAt:new Date}),y()}catch(P){console.error("Erreur lors du marquage comme vu:",P)}},I=()=>{w({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),p(null)},A=N=>{try{return fd(N,{addSuffix:!0,locale:sr})}catch{return"Date inconnue"}},R=N=>{const P=[];if(N.query&&P.push(`"${N.query}"`),N.category&&N.category!=="all"){const T=dT.find(C=>C.value===N.category);T&&P.push(T.label)}if(N.transactionType&&N.transactionType!=="all"){const T=hT.find(C=>C.value===N.transactionType);T&&P.push(T.label)}return N.minPrice!==void 0&&P.push(`≥ ${N.minPrice}€`),N.maxPrice!==void 0&&P.push(`≤ ${N.maxPrice}€`),P.length>0?P.join(" • "):"Tous les critères"};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Ls,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos recherches sauvegardées et recevez des notifications"})]}),i.jsxs(aa,{open:d,onOpenChange:h,children:[i.jsx(hu,{asChild:!0,children:i.jsxs(F,{className:"bg-gradient-to-r from-primary to-secondary",children:[i.jsx(wl,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),i.jsxs(Ni,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(oa,{children:[i.jsxs(Si,{className:"flex items-center gap-2",children:[i.jsx(Xo,{className:"w-5 h-5"}),"Créer une Alerte Personnalisée"]}),i.jsx(fu,{children:"Définissez vos critères de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),i.jsx(_e,{id:"alert-name",value:v.name,onChange:N=>w(P=>({...P,name:N.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(Px,{className:"w-4 h-4"}),"Critères de Recherche"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"search-query",children:"Mots-clés"}),i.jsx(_e,{id:"search-query",value:v.query,onChange:N=>w(P=>({...P,query:N.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"search-category",children:"Catégorie"}),i.jsxs(mt,{value:v.category,onValueChange:N=>w(P=>({...P,category:N})),children:[i.jsx(ct,{className:"mt-1",children:i.jsx(pt,{})}),i.jsx(ut,{children:dT.map(N=>i.jsx(de,{value:N.value,children:N.label},N.value))})]})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"transaction-type",children:"Type de transaction"}),i.jsxs(mt,{value:v.transactionType,onValueChange:N=>w(P=>({...P,transactionType:N})),children:[i.jsx(ct,{className:"mt-1",children:i.jsx(pt,{})}),i.jsx(ut,{children:hT.map(N=>i.jsx(de,{value:N.value,children:N.label},N.value))})]})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"search-university",children:"Université"}),i.jsxs(mt,{value:v.university,onValueChange:N=>w(P=>({...P,university:N})),children:[i.jsx(ct,{className:"mt-1",children:i.jsx(pt,{})}),i.jsx(ut,{children:nue.map(N=>i.jsx(de,{value:N.value,children:N.label},N.value))})]})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"min-price",children:"Prix minimum (€)"}),i.jsx(_e,{id:"min-price",type:"number",value:v.minPrice,onChange:N=>w(P=>({...P,minPrice:N.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"max-price",children:"Prix maximum (€)"}),i.jsx(_e,{id:"max-price",type:"number",value:v.maxPrice,onChange:N=>w(P=>({...P,maxPrice:N.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(Ls,{className:"w-4 h-4"}),"Notifications"]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),i.jsx(kn,{id:"alerts-enabled",checked:v.alertsEnabled,onCheckedChange:N=>w(P=>({...P,alertsEnabled:N}))})]}),v.alertsEnabled&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(he,{children:"Fréquence des notifications"}),i.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantané",description:"Dès qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un résumé par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un résumé par semaine"}].map(N=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:N.value,name:"frequency",value:N.value,checked:v.notificationFrequency===N.value,onChange:P=>w(T=>({...T,notificationFrequency:P.target.value})),className:"rounded border-border"}),i.jsx(he,{htmlFor:N.value,className:"cursor-pointer",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:N.label}),i.jsx("div",{className:"text-sm text-muted-foreground",children:N.description})]})})]},N.value))})]}),i.jsxs("div",{children:[i.jsx(he,{children:"Méthodes de notification"}),i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ar,{className:"w-4 h-4 text-blue-600"}),i.jsx(he,{htmlFor:"email-notifications",children:"Email"})]}),i.jsx(kn,{id:"email-notifications",checked:v.notificationMethods.email,onCheckedChange:N=>w(P=>({...P,notificationMethods:{...P.notificationMethods,email:N}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ls,{className:"w-4 h-4 text-green-600"}),i.jsx(he,{htmlFor:"push-notifications",children:"Notifications push"})]}),i.jsx(kn,{id:"push-notifications",checked:v.notificationMethods.push,onCheckedChange:N=>w(P=>({...P,notificationMethods:{...P.notificationMethods,push:N}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gk,{className:"w-4 h-4 text-purple-600"}),i.jsx(he,{htmlFor:"sms-notifications",children:"SMS"}),i.jsx(Ie,{variant:"outline",className:"text-xs",children:"Bientôt"})]}),i.jsx(kn,{id:"sms-notifications",checked:v.notificationMethods.sms,onCheckedChange:N=>w(P=>({...P,notificationMethods:{...P.notificationMethods,sms:N}})),disabled:!0})]})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[i.jsx(F,{variant:"outline",onClick:()=>h(!1),children:"Annuler"}),i.jsx(F,{onClick:x,disabled:c.creating||!v.name.trim(),children:c.creating?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Xo,{className:"w-4 h-4 mr-2"}),"Créer l'alerte"]})})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauvées"})]}),i.jsx(An,{className:"w-8 h-8 text-blue-600"})]})})}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),i.jsx(Ls,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),i.jsx(Xo,{className:"w-8 h-8 text-purple-600"})]})})}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.newMatches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),i.jsx(id,{className:"w-8 h-8 text-orange-600"})]})})})]}),i.jsxs(cc,{defaultValue:"searches",className:"space-y-4",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-2",children:[i.jsxs($t,{value:"searches",className:"flex items-center gap-2",children:[i.jsx(An,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),i.jsxs($t,{value:"matches",className:"flex items-center gap-2",children:[i.jsx(Xo,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&i.jsx(Ie,{className:"ml-1 bg-orange-500",children:o.newMatches})]})]}),i.jsx(Ut,{value:"searches",className:"space-y-4",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Pj,{className:"w-5 h-5"}),"Recherches Sauvegardées"]}),i.jsx(at,{children:"Gérez vos alertes et critères de recherche personnalisés"})]}),i.jsx(Q,{children:c.searches?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((N,P)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),i.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},P))}):n.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(An,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegardée"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Créez votre première alerte pour être notifié des nouvelles annonces"}),i.jsxs(F,{onClick:()=>h(!0),children:[i.jsx(wl,{className:"w-4 h-4 mr-2"}),"Créer ma première alerte"]})]}):i.jsx("div",{className:"space-y-4",children:n.map(N=>i.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h3",{className:"font-semibold",children:N.name}),N.alertsEnabled?i.jsxs(Ie,{className:"bg-green-100 text-green-800",children:[i.jsx(Ls,{className:"w-3 h-3 mr-1"}),"Actif"]}):i.jsxs(Ie,{variant:"secondary",children:[i.jsx(Yk,{className:"w-3 h-3 mr-1"}),"Pausé"]})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:R(N.filters)}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Us,{className:"w-3 h-3"}),"Créé ",A(N.createdAt)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Xo,{className:"w-3 h-3"}),N.matchCount," correspondance",N.matchCount!==1?"s":""]}),N.lastNotified&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ls,{className:"w-3 h-3"}),"Dernière alerte ",A(N.lastNotified)]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>S(N.id,!N.alertsEnabled),title:N.alertsEnabled?"Désactiver les alertes":"Activer les alertes",children:N.alertsEnabled?i.jsx(Yk,{className:"w-4 h-4"}):i.jsx(uQ,{className:"w-4 h-4"})}),i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>{var P,T;p(N),w({name:N.name,query:N.filters.query||"",category:N.filters.category||"all",transactionType:N.filters.transactionType||"all",university:N.filters.university||"all",minPrice:((P=N.filters.minPrice)==null?void 0:P.toString())||"",maxPrice:((T=N.filters.maxPrice)==null?void 0:T.toString())||"",alertsEnabled:N.alertsEnabled,notificationFrequency:N.notificationFrequency,notificationMethods:N.notificationMethods}),h(!0)},title:"Modifier",children:i.jsx(hQ,{className:"w-4 h-4"})}),i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>E(N.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:i.jsx(ia,{className:"w-4 h-4"})})]})]}),N.alertsEnabled&&i.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(dn,{className:"w-3 h-3"}),i.jsxs("span",{children:["Fréquence: ",N.notificationFrequency==="instant"?"Instantané":N.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[N.notificationMethods.email&&i.jsx(ar,{className:"w-3 h-3 text-blue-600\\",title:"Email activé"}),N.notificationMethods.push&&i.jsx(Ls,{className:"w-3 h-3 text-green-600\\",title:"Push activé"}),N.notificationMethods.sms&&i.jsx(Gk,{className:"w-3 h-3 text-purple-600\\",title:"SMS activé"})]})]})]},N.id))})})]})}),i.jsx(Ut,{value:"matches",className:"space-y-4",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Xo,{className:"w-5 h-5"}),"Correspondances Trouvées"]}),i.jsx(at,{children:"Les annonces qui correspondent à vos critères de recherche"})]}),i.jsx(Q,{children:c.matches?i.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((N,P)=>i.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},P))}):s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Xo,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),i.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore à vos critères. Les nouvelles correspondances apparaîtront ici."})]}):i.jsx("div",{className:"space-y-4",children:s.map(N=>i.jsx("div",{className:`border rounded-lg p-4 transition-colors ${N.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[N.listingImage?i.jsx("img",{src:N.listingImage,alt:N.listingTitle,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:N.listingTitle}),i.jsxs("div",{className:"flex items-center gap-2",children:[!N.seen&&i.jsx(Ie,{className:"bg-blue-500",children:"Nouveau"}),i.jsx("span",{className:"font-semibold text-primary",children:N.listingPrice===0?"Gratuit":`${N.listingPrice}€`})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(dn,{className:"w-3 h-3"}),"Trouvé ",A(N.matchedAt)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(F,{variant:"outline",size:"sm",onClick:()=>D(N.id),disabled:N.seen,children:N.seen?i.jsxs(i.Fragment,{children:[i.jsx(xt,{className:"w-3 h-3 mr-1"}),"Vu"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ru,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),i.jsxs(F,{size:"sm",onClick:()=>window.open(`/listing/${N.listingId}`,"_blank"),children:[i.jsx(Dr,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},N.id))})})]})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx(An,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour gérer vos alertes"}),i.jsx("p",{className:"text-muted-foreground",children:"Créez des alertes personnalisées pour être notifié des nouvelles annonces"})]})})})},kp=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},fT=[{value:"all",label:"Toutes catégories",icon:Jt},{value:"electronics",label:"Électronique",icon:ic},{value:"books",label:"Livres & Cours",icon:CD},{value:"furniture",label:"Mobilier",icon:ui},{value:"clothing",label:"Vêtements",icon:Dj},{value:"services",label:"Services",icon:sd},{value:"housing",label:"Logement",icon:ui},{value:"jobs",label:"Jobs & Stages",icon:kh}],sue=[{value:"all",label:"Tous types",icon:Jt},{value:"sale",label:"Vente",icon:ff},{value:"donation",label:"Don",icon:Du},{value:"exchange",label:"Échange",icon:va},{value:"service",label:"Service",icon:sd}],iue=[{value:"recent",label:"Plus récents",icon:dn},{value:"oldest",label:"Plus anciens",icon:Us},{value:"price-asc",label:"Prix croissant",icon:Wk},{value:"price-desc",label:"Prix décroissant",icon:ND},{value:"title",label:"Titre A-Z",icon:Wk},{value:"category",label:"Par catégorie",icon:mf}],aue=()=>{const{currentUser:t,userProfile:e}=Zt(),[n,r]=g.useState([]),[s,a]=g.useState([]),[o,l]=g.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[c,u]=g.useState({favorites:!0,listings:!0,removing:!1}),[d,h]=g.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[m,p]=g.useState("recent"),[v,w]=g.useState("grid"),[b,y]=g.useState([]);g.useEffect(()=>{t&&x()},[t]),g.useEffect(()=>{n.length>0&&_()},[n]);const x=async()=>{if(t)try{u(H=>({...H,favorites:!0}));const C=Mt(wt(ye,"favorites"),Vt("userId","==",t.uid),xs(100)),V=await Kt(C),z=[];V.forEach(H=>{const $=H.data();z.push({id:H.id,...$,createdAt:kp($.createdAt),updatedAt:kp($.updatedAt)})}),z.sort((H,$)=>$.createdAt.getTime()-H.createdAt.getTime()),r(z),E(z)}catch(C){console.error("Erreur lors du chargement des favoris:",C),te.error("Erreur lors du chargement des favoris")}finally{u(C=>({...C,favorites:!1}))}},_=async()=>{try{u(H=>({...H,listings:!0}));const C=n.map(async H=>{try{const $=await ys(Ze(ye,"listings",H.listingId));if($.exists()){const L=$.data();return{id:$.id,...L,createdAt:kp(L.createdAt),updatedAt:kp(L.updatedAt)}}return null}catch($){return console.error(`Erreur lors du chargement de l'annonce ${H.listingId}:`,$),null}}),z=(await Promise.all(C)).filter(H=>H!==null);a(z)}catch(C){console.error("Erreur lors du chargement des annonces favorites:",C)}finally{u(C=>({...C,listings:!1}))}},E=C=>{const V={},z={};let H=0,$=0;const L=new Date;L.setDate(L.getDate()-7);let W=0;C.forEach(U=>{V[U.listingCategory]=(V[U.listingCategory]||0)+1,z[U.listingTransactionType]=(z[U.listingTransactionType]||0)+1,U.listingPrice>0&&(H+=U.listingPrice,$++),U.createdAt>=L&&W++}),l({totalFavorites:C.length,byCategory:V,byTransactionType:z,averagePrice:$>0?Math.round(H/$):0,recentlyAdded:W,availableCount:C.length,soldCount:0})},S=async C=>{try{await Au(Ze(ye,"favorites",C)),te.success("Favori supprimé"),x()}catch(V){console.error("Erreur lors de la suppression:",V),te.error("Erreur lors de la suppression")}},D=async()=>{if(b.length!==0&&window.confirm(`Supprimer ${b.length} favori(s) sélectionné(s) ?`)){u(C=>({...C,removing:!0}));try{const C=b.map(V=>Au(Ze(ye,"favorites",V)));await Promise.all(C),te.success(`${b.length} favori(s) supprimé(s)`),y([]),x()}catch(C){console.error("Erreur lors de la suppression multiple:",C),te.error("Erreur lors de la suppression")}finally{u(C=>({...C,removing:!1}))}}},I=()=>{const C={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:n.length,favorites:n.map($=>({title:$.listingTitle,price:$.listingPrice,category:$.listingCategory,transactionType:$.listingTransactionType,seller:$.sellerName,university:$.sellerUniversity,addedDate:$.createdAt.toISOString(),notes:$.notes||"",tags:$.tags}))},V=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),z=URL.createObjectURL(V),H=document.createElement("a");H.href=z,H.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,H.click(),URL.revokeObjectURL(z)},A=async()=>{const C=`🌟 Mes favoris StudyMarket :

📚 ${o.totalFavorites} annonces sauvegardées
💰 Prix moyen : ${o.averagePrice}€
🆕 ${o.recentlyAdded} ajoutées cette semaine

Découvrez la marketplace étudiante ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:C,url:window.location.origin})}catch{navigator.clipboard.writeText(C),te.success("Lien copié dans le presse-papiers")}else navigator.clipboard.writeText(C),te.success("Lien copié dans le presse-papiers")},R=()=>{let C=n;if(d.search){const V=d.search.toLowerCase();C=C.filter(z=>z.listingTitle.toLowerCase().includes(V)||z.sellerName.toLowerCase().includes(V)||z.tags.some(H=>H.toLowerCase().includes(V)))}if(d.category!=="all"&&(C=C.filter(V=>V.listingCategory===d.category)),d.transactionType!=="all"&&(C=C.filter(V=>V.listingTransactionType===d.transactionType)),d.priceRange!=="all")switch(d.priceRange){case"free":C=C.filter(V=>V.listingPrice===0);break;case"under-50":C=C.filter(V=>V.listingPrice>0&&V.listingPrice<50);break;case"50-200":C=C.filter(V=>V.listingPrice>=50&&V.listingPrice<=200);break;case"over-200":C=C.filter(V=>V.listingPrice>200);break}switch(m){case"recent":C.sort((V,z)=>z.createdAt.getTime()-V.createdAt.getTime());break;case"oldest":C.sort((V,z)=>V.createdAt.getTime()-z.createdAt.getTime());break;case"price-asc":C.sort((V,z)=>V.listingPrice-z.listingPrice);break;case"price-desc":C.sort((V,z)=>z.listingPrice-V.listingPrice);break;case"title":C.sort((V,z)=>V.listingTitle.localeCompare(z.listingTitle));break;case"category":C.sort((V,z)=>V.listingCategory.localeCompare(z.listingCategory));break}return C},N=C=>{try{return fd(C,{addSuffix:!0,locale:sr})}catch{return"Date inconnue"}},P=(C,V)=>V==="donation"?"Gratuit":V==="exchange"?"Échange":C===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(C),T=R();return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(xr,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardées"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(F,{variant:"outline",onClick:A,className:"flex items-center gap-2",children:[i.jsx(Rj,{className:"w-4 h-4"}),"Partager"]}),i.jsxs(F,{variant:"outline",onClick:I,className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4"}),"Exporter"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),i.jsx(xr,{className:"w-8 h-8 text-red-500"})]})})}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,"€"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),i.jsx(lm,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),i.jsx(id,{className:"w-8 h-8 text-orange-600"})]})})}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Catégories"})]}),i.jsx(mf,{className:"w-8 h-8 text-purple-600"})]})})})]}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(An,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(_e,{placeholder:"Rechercher dans vos favoris...",value:d.search,onChange:C=>h(V=>({...V,search:C.target.value})),className:"pl-10"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(mt,{value:m,onValueChange:p,children:[i.jsx(ct,{className:"w-40",children:i.jsx(pt,{})}),i.jsx(ut,{children:iue.map(C=>i.jsx(de,{value:C.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(C.icon,{className:"w-4 h-4"}),C.label]})},C.value))})]}),i.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[i.jsx(F,{variant:v==="grid"?"default":"ghost",size:"icon",onClick:()=>w("grid"),className:"rounded-none",children:i.jsx(DD,{className:"w-4 h-4"})}),i.jsx(F,{variant:v==="list"?"default":"ghost",size:"icon",onClick:()=>w("list"),className:"rounded-none",children:i.jsx(LD,{className:"w-4 h-4"})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(mt,{value:d.category,onValueChange:C=>h(V=>({...V,category:C})),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Catégorie"})}),i.jsx(ut,{children:fT.map(C=>i.jsx(de,{value:C.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(C.icon,{className:"w-4 h-4"}),C.label]})},C.value))})]}),i.jsxs(mt,{value:d.transactionType,onValueChange:C=>h(V=>({...V,transactionType:C})),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Type"})}),i.jsx(ut,{children:sue.map(C=>i.jsx(de,{value:C.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(C.icon,{className:"w-4 h-4"}),C.label]})},C.value))})]}),i.jsxs(mt,{value:d.priceRange,onValueChange:C=>h(V=>({...V,priceRange:C})),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Prix"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"all",children:"Tous les prix"}),i.jsx(de,{value:"free",children:"Gratuit"}),i.jsx(de,{value:"under-50",children:"Moins de 50€"}),i.jsx(de,{value:"50-200",children:"50€ - 200€"}),i.jsx(de,{value:"over-200",children:"Plus de 200€"})]})]}),i.jsxs(mt,{value:d.availability,onValueChange:C=>h(V=>({...V,availability:C})),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Disponibilité"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"all",children:"Toutes"}),i.jsx(de,{value:"available",children:"Disponibles"}),i.jsx(de,{value:"sold",children:"Vendues"}),i.jsx(de,{value:"reserved",children:"Réservées"})]})]})]}),b.length>0&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[b.length," favori(s) sélectionné(s)"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(F,{variant:"outline",size:"sm",onClick:()=>y([]),children:"Désélectionner"}),i.jsx(F,{variant:"destructive",size:"sm",onClick:D,disabled:c.removing,children:c.removing?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ia,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),i.jsx("div",{className:"space-y-4",children:c.favorites?i.jsx("div",{className:`grid gap-6 ${v==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((C,V)=>i.jsxs(Y,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(Q,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},V))}):T.length===0?i.jsx(Y,{children:i.jsx(Q,{className:"pt-12 pb-12 text-center",children:n.length===0?i.jsxs(i.Fragment,{children:[i.jsx(xr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'annonces à vos favoris. Explorez les annonces et cliquez sur ❤️ pour les sauvegarder !"}),i.jsx(F,{asChild:!0,children:i.jsxs("a",{href:"/listings",children:[i.jsx(An,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):i.jsxs(i.Fragment,{children:[i.jsx(Px,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond à vos critères de recherche. Essayez de modifier vos filtres."}),i.jsx(F,{variant:"outline",onClick:()=>h({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Réinitialiser les filtres"})]})})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("p",{className:"text-muted-foreground",children:[T.length," favori(s) trouvé(s)",T.length!==n.length&&` sur ${n.length}`]}),i.jsx(F,{variant:"outline",size:"sm",onClick:()=>{b.length===T.length?y([]):y(T.map(C=>C.id))},children:b.length===T.length?"Désélectionner tout":"Sélectionner tout"})]}),v==="grid"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(C=>{const V=s.find(z=>z.id===C.listingId);return i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute top-2 left-2 z-10",children:i.jsx("input",{type:"checkbox",checked:b.includes(C.id),onChange:z=>{z.target.checked?y(H=>[...H,C.id]):y(H=>H.filter($=>$!==C.id))},className:"w-4 h-4 rounded border-border bg-background"})}),i.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(F,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>S(C.id),children:i.jsx(ia,{className:"w-4 h-4"})})}),V?i.jsx(bf,{listing:V}):i.jsxs(Y,{children:[i.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Th,{className:"w-8 h-8 mx-auto mb-2"}),i.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold mb-2",children:C.listingTitle}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:P(C.listingPrice,C.listingTransactionType)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajouté ",N(C.createdAt)]})]})]})]},C.id)})}):i.jsx("div",{className:"space-y-4",children:T.map(C=>{var z;const V=s.find(H=>H.id===C.listingId);return i.jsx(Y,{className:"hover:shadow-md transition-shadow",children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("input",{type:"checkbox",checked:b.includes(C.id),onChange:H=>{H.target.checked?y($=>[...$,C.id]):y($=>$.filter(L=>L!==C.id))},className:"w-4 h-4 rounded border-border"}),i.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:C.listingImage?i.jsx("img",{src:C.listingImage,alt:C.listingTitle,className:"w-full h-full object-cover rounded-lg"}):i.jsx(Jt,{className:"w-8 h-8 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold truncate",children:C.listingTitle}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("span",{className:"font-semibold text-primary",children:P(C.listingPrice,C.listingTransactionType)}),(V==null?void 0:V.status)&&i.jsx(Ie,{variant:V.status==="active"?"default":"secondary",children:V.status==="active"?"Disponible":V.status==="sold"?"Vendu":"Réservé"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(or,{className:"w-3 h-3"}),C.sellerName]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(qn,{className:"w-3 h-3"}),C.sellerUniversity]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(mf,{className:"w-3 h-3"}),(z=fT.find(H=>H.value===C.listingCategory))==null?void 0:z.label]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajouté ",N(C.createdAt)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(F,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${C.listingId}`,"_blank"),children:[i.jsx(Dr,{className:"w-3 h-3 mr-1"}),"Voir"]}),i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>S(C.id),className:"text-destructive hover:text-destructive",children:i.jsx(ia,{className:"w-3 h-3"})})]})]})]})]})})},C.id)})})]})})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx(xr,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),i.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces préférées et retrouvez-les facilement"})]})})})},X0=({request:t,userRole:e,onStatusUpdate:n})=>{const{updatePaymentStatus:r,getPaymentInstructions:s}=ry(),a=v=>{switch(v){case"pending":return dn;case"confirmed":return xt;case"completed":return xt;case"cancelled":return Pu;case"disputed":return hn;default:return dn}},o=v=>{switch(v){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},l=v=>{switch(v){case"pending":return"En attente";case"confirmed":return"Confirmé";case"completed":return"Terminé";case"cancelled":return"Annulé";case"disputed":return"Litige";default:return v}},c=v=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[v]||v,u=(v,w)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:w||"EUR"}).format(v),d=(v,w)=>{navigator.clipboard.writeText(v),te.success(`${w} copié dans le presse-papiers`)},h=async v=>{try{await r(t.id,v),n==null||n(v)}catch(w){console.error("Erreur lors de la mise à jour du statut:",w)}},m=a(t.status),p=s(t.paymentMethod,t);return i.jsxs(Y,{className:"w-full",children:[i.jsx(Pe,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(vn,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{children:[i.jsxs(Re,{className:"text-lg",children:["Paiement ",c(t.paymentMethod)]}),i.jsxs(at,{children:[u(t.amount,t.currency)," • ",e==="buyer"?"Achat":"Vente"]})]})]}),i.jsxs(Ie,{className:o(t.status),children:[i.jsx(m,{className:"w-3 h-3 mr-1"}),l(t.status)]})]})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Créé le :"}),i.jsx("p",{className:"font-medium",children:Pn(t.createdAt,"PPP à HH:mm",{locale:sr})})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Dernière mise à jour :"}),i.jsx("p",{className:"font-medium",children:Pn(t.updatedAt,"PPP à HH:mm",{locale:sr})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[i.jsx(qn,{className:"w-4 h-4"}),"Détails de la rencontre"]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),i.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),i.jsx("p",{className:"font-medium",children:Pn(t.meetingDateTime,"PPP à HH:mm",{locale:sr})})]})]})]}),t.securityCode&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[i.jsx(Et,{className:"w-4 h-4"}),"Code de sécurité"]}),i.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[i.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>d(t.securityCode,"Code de sécurité"),children:i.jsx(PD,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&p.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:i.jsx("ul",{className:"space-y-1 text-sm",children:p.map((v,w)=>i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-blue-600 mt-0.5",children:"•"}),i.jsx("span",{children:v})]},w))})})]}),t.notes&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Notes"}),i.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),i.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsxs(F,{onClick:()=>h("confirmed"),className:"flex-1",children:[i.jsx(xt,{className:"w-4 h-4 mr-2"}),"Accepter"]}),i.jsxs(F,{variant:"outline",onClick:()=>h("cancelled"),className:"flex-1",children:[i.jsx(Pu,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&i.jsxs(F,{onClick:()=>h("completed"),className:"flex-1",children:[i.jsx(xt,{className:"w-4 h-4 mr-2"}),"Marquer comme payé"]}),e==="seller"&&t.status==="confirmed"&&i.jsxs(F,{onClick:()=>h("completed"),className:"flex-1",children:[i.jsx(xt,{className:"w-4 h-4 mr-2"}),"Confirmer la réception"]}),(t.status==="pending"||t.status==="confirmed")&&i.jsxs(F,{variant:"outline",onClick:()=>h("disputed"),className:"text-orange-600 hover:text-orange-700",children:[i.jsx(hn,{className:"w-4 h-4 mr-2"}),"Signaler un problème"]})]}),t.status==="pending"&&e==="buyer"&&i.jsxs(kt,{children:[i.jsx(dn,{className:"h-4 w-4"}),i.jsx(Tt,{children:"Votre demande de paiement a été envoyée au vendeur. Vous recevrez une notification dès qu'il l'aura acceptée."})]}),t.status==="confirmed"&&e==="buyer"&&i.jsxs(kt,{className:"border-green-200 bg-green-50",children:[i.jsx(xt,{className:"h-4 w-4 text-green-600"}),i.jsx(Tt,{className:"text-green-800",children:"Le vendeur a accepté votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&i.jsxs(kt,{className:"border-green-200 bg-green-50",children:[i.jsx(xt,{className:"h-4 w-4 text-green-600"}),i.jsx(Tt,{className:"text-green-800",children:"Transaction terminée avec succès ! Merci d'avoir utilisé StudyMarket."})]}),t.status==="disputed"&&i.jsxs(kt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(hn,{className:"h-4 w-4 text-orange-600"}),i.jsx(Tt,{className:"text-orange-800",children:"Un litige a été signalé. Notre équipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},oue=()=>{const{currentUser:t,userProfile:e}=Zt(),{paymentRequests:n,loading:r,fetchUserPaymentRequests:s,initializePaymentMethods:a}=ry(),[o,l]=g.useState(""),[c,u]=g.useState("all"),[d,h]=g.useState("all"),[m,p]=g.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});g.useEffect(()=>{a()},[a]),g.useEffect(()=>{t&&s(t.uid)},[t,s]),g.useEffect(()=>{v()},[n]);const v=()=>{const E={},S={};let D=0;n.forEach(I=>{E[I.paymentMethod]=(E[I.paymentMethod]||0)+1,S[I.status]=(S[I.status]||0)+1,D+=I.amount}),p({totalRequests:n.length,pendingRequests:S.pending||0,completedRequests:S.completed||0,totalAmount:D,averageAmount:n.length>0?D/n.length:0,byMethod:E,byStatus:S})},w=()=>n.filter(E=>{const S=!o||E.listingId.toLowerCase().includes(o.toLowerCase())||E.id.toLowerCase().includes(o.toLowerCase()),D=c==="all"||E.status===c,I=d==="all"||E.paymentMethod===d;return S&&D&&I}),b=()=>w().filter(E=>E.buyerId===(t==null?void 0:t.uid)),y=()=>w().filter(E=>E.sellerId===(t==null?void 0:t.uid)),x=E=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(E),_=()=>{const E={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:m,payments:n.map(A=>({id:A.id,amount:A.amount,currency:A.currency,method:A.paymentMethod,status:A.status,role:A.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:A.createdAt.toISOString(),updatedAt:A.updatedAt.toISOString()}))},S=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),D=URL.createObjectURL(S),I=document.createElement("a");I.href=D,I.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,I.click(),URL.revokeObjectURL(D)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(vQ,{className:"w-8 h-8 text-primary"}),"Mes Paiements",m.totalRequests>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:m.totalRequests})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos demandes de paiement et suivez vos transactions"})]}),i.jsxs(F,{variant:"outline",onClick:_,className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4"}),"Exporter"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:m.totalRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),i.jsx(vn,{className:"w-8 h-8 text-blue-600"})]})})}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:m.pendingRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),i.jsx(dn,{className:"w-8 h-8 text-orange-600"})]})})}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:m.completedRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Terminées"})]}),i.jsx(xt,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:x(m.totalAmount)}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),i.jsx(lm,{className:"w-8 h-8 text-purple-600"})]})})})]}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(An,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(_e,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:E=>l(E.target.value),className:"pl-10"})]}),i.jsxs(mt,{value:c,onValueChange:u,children:[i.jsx(ct,{className:"w-40",children:i.jsx(pt,{placeholder:"Statut"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"all",children:"Tous les statuts"}),i.jsx(de,{value:"pending",children:"En attente"}),i.jsx(de,{value:"confirmed",children:"Confirmé"}),i.jsx(de,{value:"completed",children:"Terminé"}),i.jsx(de,{value:"cancelled",children:"Annulé"}),i.jsx(de,{value:"disputed",children:"Litige"})]})]}),i.jsxs(mt,{value:d,onValueChange:h,children:[i.jsx(ct,{className:"w-40",children:i.jsx(pt,{placeholder:"Méthode"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"all",children:"Toutes les méthodes"}),i.jsx(de,{value:"cash",children:"Espèces"}),i.jsx(de,{value:"transfer",children:"Virement"}),i.jsx(de,{value:"paypal",children:"PayPal"}),i.jsx(de,{value:"lydia",children:"Lydia"})]})]})]})})}),i.jsxs(cc,{defaultValue:"all",className:"space-y-4",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-3",children:[i.jsxs($t,{value:"all",className:"flex items-center gap-2",children:[i.jsx(vn,{className:"w-4 h-4"}),"Toutes",m.totalRequests>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:m.totalRequests})]}),i.jsxs($t,{value:"purchases",className:"flex items-center gap-2",children:[i.jsx(E0,{className:"w-4 h-4"}),"Mes achats",b().length>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:b().length})]}),i.jsxs($t,{value:"sales",className:"flex items-center gap-2",children:[i.jsx(S0,{className:"w-4 h-4"}),"Mes ventes",y().length>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:y().length})]})]}),i.jsx(Ut,{value:"all",className:"space-y-4",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(ID,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),i.jsx(at,{children:"Historique complet de vos transactions"})]}),i.jsx(Q,{children:r?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((E,S)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),i.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},S))}):w().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),i.jsx("p",{className:"text-muted-foreground",children:n.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond à vos critères de recherche."})]}):i.jsx("div",{className:"space-y-4",children:w().map(E=>i.jsx(X0,{request:E,userRole:E.buyerId===t.uid?"buyer":"seller"},E.id))})})]})}),i.jsx(Ut,{value:"purchases",className:"space-y-4",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(E0,{className:"w-5 h-5"}),"Mes Achats"]}),i.jsx(at,{children:"Demandes de paiement que vous avez initiées"})]}),i.jsx(Q,{children:b().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(E0,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),i.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initié de demandes de paiement pour vos achats."})]}):i.jsx("div",{className:"space-y-4",children:b().map(E=>i.jsx(X0,{request:E,userRole:"buyer"},E.id))})})]})}),i.jsx(Ut,{value:"sales",className:"space-y-4",children:i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(S0,{className:"w-5 h-5"}),"Mes Ventes"]}),i.jsx(at,{children:"Demandes de paiement reçues pour vos annonces"})]}),i.jsx(Q,{children:y().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(S0,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),i.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reçu de demandes de paiement pour vos annonces."})]}):i.jsx("div",{className:"space-y-4",children:y().map(E=>i.jsx(X0,{request:E,userRole:"seller"},E.id))})})]})})]}),i.jsxs(kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(Et,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Tt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message privé. Utilisez uniquement les canaux sécurisés de StudyMarket pour vos transactions."]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx(vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),i.jsx("p",{className:"text-muted-foreground",children:"Gérez vos demandes de paiement et suivez vos transactions"})]})})})};var DN="Collapsible",[lue,s6]=os(DN),[cue,MN]=lue(DN),i6=g.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:a,onOpenChange:o,...l}=t,[c=!1,u]=ss({prop:r,defaultProp:s,onChange:o});return i.jsx(cue,{scope:n,disabled:a,contentId:es(),open:c,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),children:i.jsx(De.div,{"data-state":LN(c),"data-disabled":a?"":void 0,...l,ref:e})})});i6.displayName=DN;var a6="CollapsibleTrigger",o6=g.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=MN(a6,n);return i.jsx(De.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":LN(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:ge(t.onClick,s.onOpenToggle)})});o6.displayName=a6;var ON="CollapsibleContent",l6=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=MN(ON,t.__scopeCollapsible);return i.jsx(Yn,{present:n||s.open,children:({present:a})=>i.jsx(uue,{...r,ref:e,present:a})})});l6.displayName=ON;var uue=g.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...a}=t,o=MN(ON,n),[l,c]=g.useState(r),u=g.useRef(null),d=Xe(e,u),h=g.useRef(0),m=h.current,p=g.useRef(0),v=p.current,w=o.open||l,b=g.useRef(w),y=g.useRef();return g.useEffect(()=>{const x=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(x)},[]),Dn(()=>{const x=u.current;if(x){y.current=y.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const _=x.getBoundingClientRect();h.current=_.height,p.current=_.width,b.current||(x.style.transitionDuration=y.current.transitionDuration,x.style.animationName=y.current.animationName),c(r)}},[o.open,r]),i.jsx(De.div,{"data-state":LN(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!w,...a,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...t.style},children:w&&s})});function LN(t){return t?"open":"closed"}var due=i6,hue=o6,fue=l6,Ca="Accordion",mue=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[VN,pue,gue]=cm(Ca),[ly,rme]=os(Ca,[gue,s6]),FN=s6(),c6=Se.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,a=r;return i.jsx(VN.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?i.jsx(wue,{...a,ref:e}):i.jsx(yue,{...s,ref:e})})});c6.displayName=Ca;var[u6,vue]=ly(Ca),[d6,xue]=ly(Ca,{collapsible:!1}),yue=Se.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:a=!1,...o}=t,[l,c]=ss({prop:n,defaultProp:r,onChange:s});return i.jsx(u6,{scope:t.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:Se.useCallback(()=>a&&c(""),[a,c]),children:i.jsx(d6,{scope:t.__scopeAccordion,collapsible:a,children:i.jsx(h6,{...o,ref:e})})})}),wue=Se.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=t,[o=[],l]=ss({prop:n,defaultProp:r,onChange:s}),c=Se.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=Se.useCallback(d=>l((h=[])=>h.filter(m=>m!==d)),[l]);return i.jsx(u6,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:i.jsx(d6,{scope:t.__scopeAccordion,collapsible:!0,children:i.jsx(h6,{...a,ref:e})})})}),[bue,cy]=ly(Ca),h6=Se.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:a="vertical",...o}=t,l=Se.useRef(null),c=Xe(l,e),u=pue(n),h=ac(s)==="ltr",m=ge(t.onKeyDown,p=>{var A;if(!mue.includes(p.key))return;const v=p.target,w=u().filter(R=>{var N;return!((N=R.ref.current)!=null&&N.disabled)}),b=w.findIndex(R=>R.ref.current===v),y=w.length;if(b===-1)return;p.preventDefault();let x=b;const _=0,E=y-1,S=()=>{x=b+1,x>E&&(x=_)},D=()=>{x=b-1,x<_&&(x=E)};switch(p.key){case"Home":x=_;break;case"End":x=E;break;case"ArrowRight":a==="horizontal"&&(h?S():D());break;case"ArrowDown":a==="vertical"&&S();break;case"ArrowLeft":a==="horizontal"&&(h?D():S());break;case"ArrowUp":a==="vertical"&&D();break}const I=x%y;(A=w[I].ref.current)==null||A.focus()});return i.jsx(bue,{scope:n,disabled:r,direction:s,orientation:a,children:i.jsx(VN.Slot,{scope:n,children:i.jsx(De.div,{...o,"data-orientation":a,ref:c,onKeyDown:r?void 0:m})})})}),Dv="AccordionItem",[_ue,$N]=ly(Dv),f6=Se.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,a=cy(Dv,n),o=vue(Dv,n),l=FN(n),c=es(),u=r&&o.value.includes(r)||!1,d=a.disabled||t.disabled;return i.jsx(_ue,{scope:n,open:u,disabled:d,triggerId:c,children:i.jsx(due,{"data-orientation":a.orientation,"data-state":y6(u),...l,...s,ref:e,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});f6.displayName=Dv;var m6="AccordionHeader",p6=Se.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=cy(Ca,n),a=$N(m6,n);return i.jsx(De.h3,{"data-orientation":s.orientation,"data-state":y6(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:e})});p6.displayName=m6;var o_="AccordionTrigger",g6=Se.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=cy(Ca,n),a=$N(o_,n),o=xue(o_,n),l=FN(n);return i.jsx(VN.ItemSlot,{scope:n,children:i.jsx(hue,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:a.triggerId,...l,...r,ref:e})})});g6.displayName=o_;var v6="AccordionContent",x6=Se.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=cy(Ca,n),a=$N(v6,n),o=FN(n);return i.jsx(fue,{role:"region","aria-labelledby":a.triggerId,"data-orientation":s.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});x6.displayName=v6;function y6(t){return t?"open":"closed"}var jue=c6,Nue=f6,Sue=p6,w6=g6,b6=x6;const Eue=jue,_6=g.forwardRef(({className:t,...e},n)=>i.jsx(Nue,{ref:n,className:Le("border-b",t),...e}));_6.displayName="AccordionItem";const j6=g.forwardRef(({className:t,children:e,...n},r)=>i.jsx(Sue,{className:"flex",children:i.jsxs(w6,{ref:r,className:Le("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,i.jsx(jO,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));j6.displayName=w6.displayName;const N6=g.forwardRef(({className:t,children:e,...n},r)=>i.jsx(b6,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:Le("pb-4 pt-0",t),children:e})}));N6.displayName=b6.displayName;const mT=[{category:"Compte et Inscription",icon:sd,questions:[{question:"Comment créer un compte étudiant vérifié ?",answer:'Pour créer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre système vérifie automatiquement votre statut étudiant. Vous recevrez un badge "Étudiant certifié" une fois la vérification terminée.'},{question:"Pourquoi mon université n'est pas reconnue ?",answer:"Nous ajoutons régulièrement de nouvelles universités. Si la vôtre n'apparaît pas, contactez-nous avec votre carte étudiante et nous l'ajouterons rapidement à notre base de données."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, université, et préférences de notification. Certaines informations nécessitent une re-vérification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autorisé. Cela garantit la confiance et la sécurité de notre communauté étudiante."}]},{category:"Achats et Ventes",icon:vn,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description détaillée, prix et lieu de rencontre. Votre annonce sera visible immédiatement après publication.'},{question:"Quels modes de paiement sont acceptés ?",answer:"Nous recommandons les paiements sécurisés : espèces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. Évitez les paiements à distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggère une fourchette de prix basée sur l'état et la catégorie. Consultez les annonces similaires et considérez l'état réel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se présente pas ?",answer:"Contactez-le via notre messagerie. Si pas de réponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au sérieux."}]},{category:"Sécurité et Confiance",icon:Et,questions:[{question:"Comment éviter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothèque). Vérifiez l'identité avec la carte étudiante. Ne payez jamais à l'avance sans avoir vu l'objet. Utilisez notre système de signalement en cas de doute."},{question:"Où se rencontrer en sécurité ?",answer:`Privilégiez les lieux publics de votre campus : bibliothèques, halls d'entrée, cafétérias. Évitez les parkings isolés ou les domiciles privés. Certaines universités ont des "zones d'échange sécurisées".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Décrivez précisément le problème. Notre équipe examine tous les signalements sous 24h et prend les mesures appropriées.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de résolution, utilisez notre service de médiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:zt,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rédigez un message poli et précis. Le vendeur recevra une notification email et pourra vous répondre via notre messagerie sécurisée.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reçoivent des notifications email mais peuvent avoir des délais de réponse. Soyez patient (24-48h). Si pas de réponse, l'annonce est peut-être déjà vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnées ?",answer:"Oui, mais seulement après les premiers échanges via notre messagerie. Cela nous permet de garder une trace en cas de problème et de vous protéger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez débloquer depuis vos paramètres si nécessaire.`}]},{category:"Impact Écologique",icon:xr,questions:[{question:"Comment est calculé mon impact CO₂ ?",answer:"Chaque objet acheté d'occasion évite la production d'un neuf. Nous calculons le CO₂ économisé selon des données ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges écologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1ère transaction), "Éco-Warrior" (10kg CO₂), "Héros Climatique" (100kg CO₂). Ils apparaissent sur votre profil et motivent la communauté.'},{question:"Comment améliorer mon rang écologique ?",answer:"Multipliez les transactions d'occasion, privilégiez les dons (bonus +20%), participez aux échanges. Plus vous économisez de CO₂, plus votre rang augmente : Débutant → Éco-Warrior → Maître Environnemental → Légende Écologique."}]},{category:"Technique et Bugs",icon:Rx,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vérifiez votre connexion internet. Si le problème persiste, contactez-nous avec votre navigateur et système d'exploitation."},{question:"Je ne reçois pas les notifications email",answer:'Vérifiez vos spams/courriers indésirables. Ajoutez notifications@studymarket.fr à vos contacts. Vérifiez vos préférences de notification dans "Paramètres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vérifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous êtes sur mobile, autorisez l'accès à la galerie dans les paramètres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramètres" > "Compte" > "Supprimer mon compte". Cette action est irréversible et supprime toutes vos données. Vos annonces actives seront automatiquement retirées.'}]}],Cue=[{title:"Chat en direct",description:"Réponse immédiate pendant les heures ouvrables",icon:zt,action:"Démarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Réponse sous 24h maximum",icon:ar,action:"support@studymarket.fr",available:!0,hours:"24h/7j"},{title:"Téléphone",description:"Pour les urgences uniquement",icon:rd,action:"01 23 45 67 89",available:!1,hours:"Bientôt disponible"},{title:"Centre de ressources",description:"Guides détaillés et tutoriels",icon:kD,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],kue=[{title:"Guide du vendeur débutant",description:"Tout savoir pour vendre efficacement",icon:to,duration:"5 min",type:"Article"},{title:"Sécurité : éviter les arnaques",description:"Reconnaître et éviter les situations dangereuses",icon:Et,duration:"3 min",type:"Vidéo"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:id,duration:"7 min",type:"Article"},{title:"Impact écologique expliqué",description:"Comment nous calculons votre empreinte carbone",icon:xr,duration:"4 min",type:"Infographie"}],Tue=()=>{const{currentUser:t,userProfile:e}=Zt(),[n,r]=g.useState(""),[s,a]=g.useState("all"),[o,l]=g.useState({subject:"",category:"",message:"",priority:"normal"}),[c,u]=g.useState(!1),d=mT.filter(m=>{if(s!=="all"&&m.category!==s)return!1;if(n){const p=n.toLowerCase();return m.questions.some(v=>v.question.toLowerCase().includes(p)||v.answer.toLowerCase().includes(p))}return!0}),h=async m=>{if(m.preventDefault(),!o.subject||!o.message){te.error("Veuillez remplir tous les champs obligatoires");return}u(!0);try{await new Promise(p=>setTimeout(p,1e3)),te.success("Votre message a été envoyé ! Nous vous répondrons sous 24h."),l({subject:"",category:"",message:"",priority:"normal"})}catch{te.error("Erreur lors de l'envoi. Veuillez réessayer.")}finally{u(!1)}};return i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:i.jsx(av,{className:"w-6 h-6 text-white"})})}),i.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide StudyMarket"}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les réponses à vos questions ou contactez notre équipe support"})]}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[i.jsx(An,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),i.jsx(_e,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, sécurité, notifications)",value:n,onChange:m=>r(m.target.value),className:"pl-12 h-14 text-lg"})]})})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Cue.map((m,p)=>i.jsx(Y,{className:`transition-all hover:shadow-lg ${m.available?"hover:-translate-y-1":"opacity-60"}`,children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${m.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:i.jsx(m.icon,{className:"w-6 h-6"})}),i.jsx("h3",{className:"font-semibold mb-2",children:m.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),i.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:m.hours}),i.jsx(F,{variant:m.available?"default":"secondary",size:"sm",disabled:!m.available,className:"w-full",children:m.action})]})},p))}),i.jsxs(cc,{defaultValue:"faq",className:"space-y-6",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-3",children:[i.jsxs($t,{value:"faq",className:"flex items-center gap-2",children:[i.jsx(av,{className:"w-4 h-4"}),"FAQ"]}),i.jsxs($t,{value:"guides",className:"flex items-center gap-2",children:[i.jsx(kD,{className:"w-4 h-4"}),"Guides"]}),i.jsxs($t,{value:"contact",className:"flex items-center gap-2",children:[i.jsx(zt,{className:"w-4 h-4"}),"Contact"]})]}),i.jsxs(Ut,{value:"faq",className:"space-y-6",children:[i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(F,{variant:s==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catégories"}),mT.map(m=>i.jsxs(F,{variant:s===m.category?"default":"outline",size:"sm",onClick:()=>a(m.category),className:"flex items-center gap-2",children:[i.jsx(m.icon,{className:"w-4 h-4"}),m.category]},m.category))]})})}),d.length===0?i.jsx(Y,{children:i.jsxs(Q,{className:"pt-12 pb-12 text-center",children:[i.jsx(An,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat trouvé"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-clés ou contactez notre support"}),i.jsx(F,{variant:"outline",onClick:()=>r(""),children:"Effacer la recherche"})]})}):i.jsx("div",{className:"space-y-6",children:d.map((m,p)=>i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(m.icon,{className:"w-5 h-5"}),m.category]})}),i.jsx(Q,{children:i.jsx(Eue,{type:"single",collapsible:!0,className:"w-full",children:m.questions.map((v,w)=>i.jsxs(_6,{value:`${p}-${w}`,children:[i.jsx(j6,{className:"text-left",children:v.question}),i.jsx(N6,{className:"text-muted-foreground leading-relaxed",children:v.answer})]},w))})})]},p))})]}),i.jsxs(Ut,{value:"guides",className:"space-y-6",children:[i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(OD,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),i.jsx(at,{children:"Apprenez à utiliser StudyMarket comme un pro avec nos guides détaillés"})]}),i.jsx(Q,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:kue.map((m,p)=>i.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:i.jsx(m.icon,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h3",{className:"font-semibold",children:m.title}),i.jsx(Ie,{variant:"outline",className:"text-xs",children:m.type})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(dn,{className:"w-3 h-3"}),m.duration]}),i.jsxs(F,{size:"sm",variant:"outline",children:[i.jsx(Dr,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},p))})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx($D,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vidéo"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidéos courtes"}),i.jsxs(F,{variant:"outline",size:"sm",children:[i.jsx(Dr,{className:"w-3 h-3 mr-1"}),"Voir les vidéos"]})]})}),i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx(ws,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez nos guides au format PDF"}),i.jsxs(F,{variant:"outline",size:"sm",children:[i.jsx(ws,{className:"w-3 h-3 mr-1"}),"Télécharger"]})]})}),i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx(sd,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Communauté"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Échangez avec d'autres étudiants"}),i.jsxs(F,{variant:"outline",size:"sm",children:[i.jsx(Dr,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),i.jsx(Ut,{value:"contact",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(zl,{className:"w-5 h-5"}),"Contactez notre équipe"]}),i.jsx(at,{children:"Décrivez votre problème en détail pour une réponse rapide et précise"})]}),i.jsx(Q,{children:i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(he,{htmlFor:"subject",children:"Sujet *"}),i.jsx(_e,{id:"subject",value:o.subject,onChange:m=>l(p=>({...p,subject:m.target.value})),placeholder:"Résumez votre problème en quelques mots",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"category",children:"Catégorie"}),i.jsxs(mt,{value:o.category,onValueChange:m=>l(p=>({...p,category:m})),children:[i.jsx(ct,{className:"mt-1",children:i.jsx(pt,{placeholder:"Sélectionnez une catégorie"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"account",children:"Compte et profil"}),i.jsx(de,{value:"listing",children:"Annonces"}),i.jsx(de,{value:"payment",children:"Paiements"}),i.jsx(de,{value:"security",children:"Sécurité"}),i.jsx(de,{value:"technical",children:"Problème technique"}),i.jsx(de,{value:"other",children:"Autre"})]})]})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"priority",children:"Priorité"}),i.jsxs(mt,{value:o.priority,onValueChange:m=>l(p=>({...p,priority:m})),children:[i.jsx(ct,{className:"mt-1",children:i.jsx(pt,{})}),i.jsxs(ut,{children:[i.jsx(de,{value:"low",children:"Basse - Question générale"}),i.jsx(de,{value:"normal",children:"Normale - Besoin d'aide"}),i.jsx(de,{value:"high",children:"Haute - Problème bloquant"}),i.jsx(de,{value:"urgent",children:"Urgente - Sécurité/Arnaque"})]})]})]}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"message",children:"Message *"}),i.jsx(_s,{id:"message",value:o.message,onChange:m=>l(p=>({...p,message:m.target.value})),placeholder:"Décrivez votre problème en détail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&i.jsxs(kt,{children:[i.jsx(xt,{className:"h-4 w-4"}),i.jsxs(Tt,{children:["Nous vous répondrons à l'adresse ",i.jsx("strong",{children:t.email})]})]}),i.jsx(F,{type:"submit",className:"w-full",disabled:c||!o.subject||!o.message,children:c?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):i.jsxs(i.Fragment,{children:[i.jsx(zl,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(dn,{className:"w-5 h-5"}),"Temps de réponse"]})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Questions générales"}),i.jsx(Ie,{variant:"secondary",children:"24h"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Problèmes techniques"}),i.jsx(Ie,{variant:"secondary",children:"12h"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Urgences sécurité"}),i.jsx(Ie,{className:"bg-red-500",children:"2h"})]})]})]}),i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(RD,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ar,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Email direct"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"support@studymarket.fr"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zt,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Chat en direct"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ic,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Application mobile"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientôt disponible"})]})]})]})]}),i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(id,{className:"w-5 h-5"}),"État du système"]})}),i.jsxs(Q,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Plateforme web"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Messagerie"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Notifications email"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),i.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),i.jsxs(F,{variant:"outline",size:"sm",className:"w-full mt-3",children:[i.jsx(Dr,{className:"w-3 h-3 mr-1"}),"Page de statut complète"]})]})]})]})]})})]})]})},Iue=[{category:"Rencontres et Échanges",icon:qn,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits fréquentés : bibliothèques universitaires, halls d'entrée, cafétérias du campus.",type:"do",icon:xt},{title:"Évitez les lieux isolés",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privés ou endroits déserts.",type:"dont",icon:Pu},{title:"Prévenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontrée.",type:"do",icon:xt},{title:"Rencontrez en journée",description:"Privilégiez les rendez-vous en journée, évitez les rencontres tardives ou nocturnes.",type:"do",icon:xt}]},{category:"Vérification d'Identité",icon:FD,color:"text-green-600",tips:[{title:"Demandez la carte étudiante",description:"Vérifiez toujours l'identité avec la carte étudiante. C'est votre garantie de sécurité.",type:"do",icon:xt},{title:"Vérifiez le profil StudyMarket",description:"Consultez le profil : badge vérifié, avis, nombre de transactions, ancienneté du compte.",type:"do",icon:xt},{title:"Méfiez-vous des profils récents",description:"Soyez prudent avec les comptes créés récemment sans historique de transactions.",type:"dont",icon:hn},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos échanges via notre messagerie sécurisée.",type:"do",icon:xt}]},{category:"Paiements Sécurisés",icon:vn,color:"text-purple-600",tips:[{title:"Payez à la remise",description:"Ne payez qu'après avoir inspecté l'objet et lors de la remise en main propre.",type:"do",icon:xt},{title:"Évitez les paiements à l'avance",description:"Ne versez jamais d'acompte ou de paiement intégral avant d'avoir vu l'objet.",type:"dont",icon:Pu},{title:"Utilisez des moyens traçables",description:"Privilégiez Lydia, PayPal, virements ou espèces. Évitez les cryptomonnaies.",type:"do",icon:xt},{title:"Méfiez-vous des prix trop bas",description:"Un iPhone à 50€ ou un MacBook à 200€ sont probablement des arnaques.",type:"dont",icon:hn}]},{category:"Communication",icon:zt,color:"text-orange-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos échanges, même en cas de désaccord.",type:"do",icon:xt},{title:"Posez des questions précises",description:"Demandez des détails sur l'état, l'âge, la raison de la vente, les défauts éventuels.",type:"do",icon:xt},{title:"Méfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernière chance") sont suspects.',type:"dont",icon:hn},{title:"Gardez les preuves",description:"Conservez les captures d'écran des conversations en cas de litige.",type:"do",icon:xt}]}],Aue=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:hn},{title:"Paiement demandé à l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:vn},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:qn},{title:"Photos de mauvaise qualité",description:"Images floues, prises sur internet ou très peu nombreuses",severity:"medium",icon:yl},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte récent",severity:"medium",icon:sd},{title:"Communication étrange",description:"Français approximatif, réponses évasives, pression temporelle",severity:"medium",icon:zt},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:dn},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres données sensibles",severity:"high",icon:Ul}],Pue=[{title:"Urgence immédiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:rd,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des règles",contact:`Bouton "Signaler" dans l'app`,icon:ml,color:"text-orange-600"},{title:"Support StudyMarket",description:"Questions, aide, médiation de conflit",contact:"support@studymarket.fr",icon:zt,color:"text-blue-600"},{title:"Sécurité Campus",description:"Incidents sur le campus universitaire",contact:"Service sécurité de votre université",icon:Et,color:"text-green-600"}],Rue=()=>i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:i.jsx(Et,{className:"w-6 h-6 text-white"})})}),i.jsx("h1",{className:"text-4xl font-bold",children:"Sécurité & Conseils"}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre sécurité est notre priorité. Suivez ces conseils pour des échanges sereins et sécurisés entre étudiants."})]}),i.jsxs(kt,{className:"border-green-200 bg-green-50",children:[i.jsx(Et,{className:"h-4 w-4 text-green-600"}),i.jsx(Tt,{className:"text-green-800",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vérifiez l'identité avec la carte étudiante."]}),i.jsxs(F,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[i.jsx(ws,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Et,{className:"w-6 h-6 text-green-600"})}),i.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions sécurisées"})]})}),i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(FD,{className:"w-6 h-6 text-blue-600"})}),i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants vérifiés"})]})}),i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(dn,{className:"w-6 h-6 text-purple-600"})}),i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Réponse aux signalements"})]})}),i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(to,{className:"w-6 h-6 text-orange-600"})}),i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"4.9/5"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction sécurité"})]})})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Sécurité Complet"}),i.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des échanges en toute sécurité"})]}),Iue.map((t,e)=>i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),i.jsx(Q,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((n,r)=>i.jsx("div",{className:`p-4 rounded-lg border-2 ${n.type==="do"?"border-green-200 bg-green-50":n.type==="dont"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(n.icon,{className:`w-5 h-5 mt-0.5 ${n.type==="do"?"text-green-600":n.type==="dont"?"text-red-600":"text-orange-600"}`}),i.jsxs("div",{children:[i.jsx("h4",{className:`font-semibold mb-2 ${n.type==="do"?"text-green-800":n.type==="dont"?"text-red-800":"text-orange-800"}`,children:n.title}),i.jsx("p",{className:`text-sm ${n.type==="do"?"text-green-700":n.type==="dont"?"text-red-700":"text-orange-700"}`,children:n.description})]})]})},r))})})]},e))]}),i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme à Reconnaître"]}),i.jsx(at,{children:"Ces comportements doivent vous alerter et vous inciter à la prudence"})]}),i.jsx(Q,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Aue.map((t,e)=>i.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-orange-600"}`}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-orange-800"}`,children:t.title}),i.jsx(Ie,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),i.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-orange-700"}`,children:t.description})]})]})},e))})})]}),i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(rd,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),i.jsx(at,{children:"En cas de problème, voici qui contacter selon la situation"})]}),i.jsx(Q,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Pue.map((t,e)=>i.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-orange-600"?"bg-orange-100":t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:i.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold mb-1",children:t.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),i.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx(rQ,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez notre guide de sécurité complet"}),i.jsxs(F,{variant:"outline",className:"w-full",children:[i.jsx(ws,{className:"w-4 h-4 mr-2"}),"Télécharger"]})]})}),i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx(av,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions fréquentes sur la sécurité"}),i.jsx(F,{variant:"outline",className:"w-full",asChild:!0,children:i.jsxs(be,{to:"/help",children:[i.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6 text-center",children:[i.jsx(zt,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problème"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre équipe de sécurité"}),i.jsxs(F,{variant:"outline",className:"w-full",children:[i.jsx(ml,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),i.jsxs(kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(OD,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Tt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hésitez pas à annuler la transaction. Votre sécurité vaut plus que n'importe quel objet. L'équipe StudyMarket est là pour vous aider 24h/7j."]})]})]});function Due(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var UN="ScrollArea",[S6,sme]=os(UN),[Mue,Ts]=S6(UN),E6=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=t,[l,c]=g.useState(null),[u,d]=g.useState(null),[h,m]=g.useState(null),[p,v]=g.useState(null),[w,b]=g.useState(null),[y,x]=g.useState(0),[_,E]=g.useState(0),[S,D]=g.useState(!1),[I,A]=g.useState(!1),R=Xe(e,P=>c(P)),N=ac(s);return i.jsx(Mue,{scope:n,type:r,dir:N,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:S,onScrollbarXEnabledChange:D,scrollbarY:w,onScrollbarYChange:b,scrollbarYEnabled:I,onScrollbarYEnabledChange:A,onCornerWidthChange:x,onCornerHeightChange:E,children:i.jsx(De.div,{dir:N,...o,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});E6.displayName=UN;var C6="ScrollAreaViewport",k6=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,asChild:s,nonce:a,...o}=t,l=Ts(C6,n),c=g.useRef(null),u=Xe(e,c,l.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),i.jsx(De.div,{"data-radix-scroll-area-viewport":"",...o,asChild:s,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:Wue({asChild:s,children:r},d=>i.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:d}))})]})});k6.displayName=C6;var Mi="ScrollAreaScrollbar",zN=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Ts(Mi,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return g.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(Oue,{...r,ref:e,forceMount:n}):s.type==="scroll"?i.jsx(Lue,{...r,ref:e,forceMount:n}):s.type==="auto"?i.jsx(T6,{...r,ref:e,forceMount:n}):s.type==="always"?i.jsx(BN,{...r,ref:e}):null});zN.displayName=Mi;var Oue=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Ts(Mi,t.__scopeScrollArea),[a,o]=g.useState(!1);return g.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Yn,{present:n||a,children:i.jsx(T6,{"data-state":a?"visible":"hidden",...r,ref:e})})}),Lue=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Ts(Mi,t.__scopeScrollArea),a=t.orientation==="horizontal",o=dy(()=>c("SCROLL_END"),100),[l,c]=Due("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),g.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const p=u[d];h!==p&&(c("SCROLL"),o()),h=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,a,c,o]),i.jsx(Yn,{present:n||l!=="hidden",children:i.jsx(BN,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:ge(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ge(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),T6=g.forwardRef((t,e)=>{const n=Ts(Mi,t.__scopeScrollArea),{forceMount:r,...s}=t,[a,o]=g.useState(!1),l=t.orientation==="horizontal",c=dy(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return Wu(n.viewport,c),Wu(n.content,c),i.jsx(Yn,{present:r||a,children:i.jsx(BN,{"data-state":a?"visible":"hidden",...s,ref:e})})}),BN=g.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Ts(Mi,t.__scopeScrollArea),a=g.useRef(null),o=g.useRef(0),[l,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=D6(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,p){return Bue(m,o.current,l,p)}return n==="horizontal"?i.jsx(Vue,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,p=pT(m,l,s.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):n==="vertical"?i.jsx(Fue,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,p=pT(m,l);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),Vue=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=Ts(Mi,t.__scopeScrollArea),[o,l]=g.useState(),c=g.useRef(null),u=Xe(e,c,a.onScrollbarXChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(A6,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":uy(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const m=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),O6(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ov(o.paddingLeft),paddingEnd:Ov(o.paddingRight)}})}})}),Fue=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=Ts(Mi,t.__scopeScrollArea),[o,l]=g.useState(),c=g.useRef(null),u=Xe(e,c,a.onScrollbarYChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(A6,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":uy(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const m=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),O6(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ov(o.paddingTop),paddingEnd:Ov(o.paddingBottom)}})}})}),[$ue,I6]=S6(Mi),A6=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=t,p=Ts(Mi,n),[v,w]=g.useState(null),b=Xe(e,R=>w(R)),y=g.useRef(null),x=g.useRef(""),_=p.viewport,E=r.content-r.viewport,S=jn(d),D=jn(c),I=dy(h,10);function A(R){if(y.current){const N=R.clientX-y.current.left,P=R.clientY-y.current.top;u({x:N,y:P})}}return g.useEffect(()=>{const R=N=>{const P=N.target;(v==null?void 0:v.contains(P))&&S(N,E)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[_,v,E,S]),g.useEffect(D,[r,D]),Wu(v,I),Wu(p.content,I),i.jsx($ue,{scope:n,scrollbar:v,hasThumb:s,onThumbChange:jn(a),onThumbPointerUp:jn(o),onThumbPositionChange:D,onThumbPointerDown:jn(l),children:i.jsx(De.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:ge(t.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),y.current=v.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),A(R))}),onPointerMove:ge(t.onPointerMove,A),onPointerUp:ge(t.onPointerUp,R=>{const N=R.target;N.hasPointerCapture(R.pointerId)&&N.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=x.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),Mv="ScrollAreaThumb",P6=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=I6(Mv,t.__scopeScrollArea);return i.jsx(Yn,{present:n||s.hasThumb,children:i.jsx(Uue,{ref:e,...r})})}),Uue=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,a=Ts(Mv,n),o=I6(Mv,n),{onThumbPositionChange:l}=o,c=Xe(e,h=>o.onThumbChange(h)),u=g.useRef(),d=dy(()=>{u.current&&(u.current(),u.current=void 0)},100);return g.useEffect(()=>{const h=a.viewport;if(h){const m=()=>{if(d(),!u.current){const p=que(h,l);u.current=p,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[a.viewport,d,l]),i.jsx(De.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ge(t.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),v=h.clientX-p.left,w=h.clientY-p.top;o.onThumbPointerDown({x:v,y:w})}),onPointerUp:ge(t.onPointerUp,o.onThumbPointerUp)})});P6.displayName=Mv;var qN="ScrollAreaCorner",R6=g.forwardRef((t,e)=>{const n=Ts(qN,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(zue,{...t,ref:e}):null});R6.displayName=qN;var zue=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Ts(qN,n),[a,o]=g.useState(0),[l,c]=g.useState(0),u=!!(a&&l);return Wu(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Wu(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?i.jsx(De.div,{...r,ref:e,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Ov(t){return t?parseInt(t,10):0}function D6(t,e){const n=t/e;return isNaN(n)?0:n}function uy(t){const e=D6(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Bue(t,e,n,r="ltr"){const s=uy(n),a=s/2,o=e||a,l=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return M6([c,u],h)(t)}function pT(t,e,n="ltr"){const r=uy(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,o=e.content-e.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],u=_f(t,c);return M6([0,o],[0,l])(u)}function M6(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function O6(t,e){return t>0&&t<e}var que=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&e(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function dy(t,e){const n=jn(t),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Wu(t,e){const n=jn(e);Dn(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}function Wue(t,e){const{asChild:n,children:r}=t;if(!n)return typeof e=="function"?e(r):e;const s=g.Children.only(r);return g.cloneElement(s,{children:typeof e=="function"?e(s.props.children):e})}var L6=E6,Hue=k6,Gue=R6;const WN=g.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(L6,{ref:r,className:Le("relative overflow-hidden",t),...n,children:[i.jsx(Hue,{className:"h-full w-full rounded-[inherit]",children:e}),i.jsx(V6,{}),i.jsx(Gue,{})]}));WN.displayName=L6.displayName;const V6=g.forwardRef(({className:t,orientation:e="vertical",...n},r)=>i.jsx(zN,{ref:r,orientation:e,className:Le("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:i.jsx(P6,{className:"relative flex-1 rounded-full bg-border"})}));V6.displayName=zN.displayName;const gT=({conversations:t,loading:e,searchQuery:n,setSearchQuery:r,currentConversation:s,currentUser:a,onSelectConversation:o})=>{const l=t.filter(d=>{const h=d.participants.find(p=>p!==(a==null?void 0:a.uid)),m=h?d.participantDetails[h]:null;return(m==null?void 0:m.name.toLowerCase().includes(n.toLowerCase()))||d.listingTitle.toLowerCase().includes(n.toLowerCase())}),c=d=>d===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d),u=d=>{const h=d.participants.find(m=>m!==(a==null?void 0:a.uid));return h?d.participantDetails[h]:null};return i.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[i.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"w-5 h-5 text-primary"}),i.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:i.jsx(Px,{className:"w-4 h-4"})}),i.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:i.jsx(ND,{className:"w-4 h-4"})}),i.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramètres",children:i.jsx(Rx,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(An,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(_e,{placeholder:"Rechercher conversations...",value:n,onChange:d=>r(d.target.value),className:"pl-9 h-9 text-sm"})]})]}),i.jsx(WN,{className:"flex-1",children:e?i.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((d,h)=>i.jsx("div",{className:"animate-pulse",children:i.jsxs("div",{className:"flex items-center gap-2 p-2",children:[i.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:i.jsx(or,{className:"w-5 h-5 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 space-y-1",children:[i.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},h))}):l.length===0?i.jsxs("div",{className:"p-6 text-center",children:[i.jsx(zt,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),i.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:n?i.jsxs(i.Fragment,{children:[i.jsx(An,{className:"w-3 h-3 inline mr-1"}),'Aucun résultat pour "',n,'"']}):i.jsxs(i.Fragment,{children:[i.jsx(ar,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparaîtront ici"]})})]}):i.jsx("div",{className:"p-1",children:l.map(d=>{var v,w;const h=u(d),m=d.unreadCount[a==null?void 0:a.uid]||0,p=(s==null?void 0:s.id)===d.id;return i.jsx("div",{onClick:()=>o(d),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${p?"bg-accent":""}`,children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsxs(Jr,{className:"w-10 h-10",children:[i.jsx(ba,{src:h==null?void 0:h.avatar}),i.jsx(Pr,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((w=(v=h==null?void 0:h.name)==null?void 0:v[0])==null?void 0:w.toUpperCase())||i.jsx(or,{className:"w-4 h-4"})})]}),(h==null?void 0:h.verified)&&i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx(Et,{className:"w-1.5 h-1.5 text-white"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[i.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[i.jsx(or,{className:"w-3 h-3 text-muted-foreground"}),(h==null?void 0:h.name)||"Utilisateur"]}),i.jsxs("div",{className:"flex items-center gap-1",children:[d.lastMessage&&i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(dn,{className:"w-3 h-3"}),fd(d.lastMessage.sentAt,{addSuffix:!0,locale:sr})]}),m>0&&i.jsx(Ie,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})]}),i.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[d.listingImage?i.jsx("img",{src:d.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):i.jsx(MD,{className:"w-3 h-3 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:d.listingTitle}),i.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[d.listingPrice===0?i.jsx(xr,{className:"w-3 h-3 text-green-600"}):i.jsx("span",{children:"€"}),c(d.listingPrice)]})]}),d.lastMessage&&i.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[d.lastMessage.senderId===(a==null?void 0:a.uid)?i.jsx(zl,{className:"w-3 h-3"}):i.jsx(zt,{className:"w-3 h-3"}),d.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",d.lastMessage.text]})]})]})},d.id)})})})]})},vT=({conversation:t,messages:e,loading:n,currentUser:r,onBack:s})=>{var U,Z;const{sendMessage:a,markMessagesAsSeen:o,blockUser:l,reportUser:c,deleteConversation:u}=Qx(),[d,h]=g.useState(""),[m,p]=g.useState(40),[v,w]=g.useState(!1),[b,y]=g.useState(!1),[x,_]=g.useState(""),[E,S]=g.useState(""),D=g.useRef(null),I=g.useRef(null),A=()=>{var oe;(oe=I.current)==null||oe.scrollIntoView({behavior:"smooth"})},R=g.useCallback(()=>{const oe=D.current;if(!oe)return;oe.style.height="auto";const ke=Math.max(40,Math.min(oe.scrollHeight,120));p(ke)},[]),N=g.useCallback(oe=>{const ke=oe.target.value;h(ke),w(!!ke.trim()),setTimeout(R,0)},[R]),P=async()=>{if(!d.trim()||!t||!r)return;const oe=d.trim();h(""),w(!1),p(40),await a(t.id,oe,r.uid,r.displayName||"Utilisateur",r.photoURL)},T=oe=>{oe.key==="Enter"&&!oe.shiftKey&&(oe.preventDefault(),P())},C=async()=>{!t||!r||await l(t.id,r.uid)},V=async()=>{if(!t||!r||!x.trim())return;const oe=t.participants.find(ke=>ke!==r.uid);oe&&(await c(t.id,r.uid,oe,x,E),y(!1),_(""),S(""))},z=async()=>{!t||!r||(await u(t.id,r.uid),s())};if(g.useEffect(()=>{t&&r&&o(t.id,r.uid)},[t,r,o]),g.useEffect(A,[e]),!t)return i.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zt,{className:"w-8 h-8 text-white"})}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sélectionnez une conversation"}),i.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[i.jsx(An,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer à discuter"]})]})});const H=t.participants.find(oe=>oe!==(r==null?void 0:r.uid)),$=H?t.participantDetails[H]:null,L=oe=>{const ke=new Date,et=new Date(oe);return et.toDateString()===ke.toDateString()?et.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((ke.getTime()-et.getTime())/(1e3*60*60*24))<7?et.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):et.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},W=oe=>oe.senderId!==(r==null?void 0:r.uid)?null:oe.seen?i.jsx(JY,{className:"w-3 h-3 text-blue-500"}):i.jsx(AD,{className:"w-3 h-3 text-muted-foreground"});return i.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[i.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx(F,{variant:"ghost",size:"icon",onClick:s,className:"lg:hidden h-8 w-8",children:i.jsx(sa,{className:"w-4 h-4"})}),i.jsxs(Jr,{className:"w-8 h-8",children:[i.jsx(ba,{src:$==null?void 0:$.avatar}),i.jsx(Pr,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((Z=(U=$==null?void 0:$.name)==null?void 0:U[0])==null?void 0:Z.toUpperCase())||i.jsx(or,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[i.jsx(or,{className:"w-3 h-3 text-muted-foreground"}),($==null?void 0:$.name)||"Utilisateur"]}),($==null?void 0:$.verified)&&i.jsx(Et,{className:"w-3 h-3 text-green-600"})]}),i.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[i.jsx(qn,{className:"w-3 h-3"}),$==null?void 0:$.university]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:i.jsx(rd,{className:"w-4 h-4"})}),i.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vidéo",children:i.jsx($D,{className:"w-4 h-4"})}),i.jsxs(Bb,{children:[i.jsx(qb,{asChild:!0,children:i.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8",children:i.jsx(ZY,{className:"w-4 h-4"})})}),i.jsxs(fv,{align:"end",children:[i.jsx(Ct,{asChild:!0,children:i.jsxs(be,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[i.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),i.jsxs(Ct,{children:[i.jsx(to,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),i.jsxs(Ct,{children:[i.jsx(qY,{className:"w-4 h-4 mr-2"}),"Archiver"]}),i.jsx(us,{}),i.jsxs(Ct,{onClick:()=>y(!0),children:[i.jsx(ml,{className:"w-4 h-4 mr-2"}),"Signaler"]}),i.jsxs(Ct,{onClick:C,children:[i.jsx(KY,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),i.jsxs(Ct,{onClick:z,className:"text-destructive",children:[i.jsx(ia,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),i.jsx(Y,{className:"mt-2",children:i.jsx(Q,{className:"p-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?i.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):i.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:i.jsx(MD,{className:"w-4 h-4 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[i.jsx(Pj,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),i.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?i.jsxs(i.Fragment,{children:[i.jsx(xr,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-xs",children:"€"}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),i.jsx(F,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:i.jsxs(be,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[i.jsx(Dr,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[i.jsx(WN,{className:"flex-1 p-3",children:i.jsxs("div",{className:"space-y-3",children:[n?i.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((oe,ke)=>i.jsx("div",{className:"animate-pulse",children:i.jsx("div",{className:`flex ${ke%2===0?"justify-start":"justify-end"}`,children:i.jsxs("div",{className:"max-w-xs",children:[i.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),i.jsx("div",{className:"h-8 bg-muted rounded"})]})})},ke))}):e.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zt,{className:"w-6 h-6 text-white"})}),i.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[i.jsx(zl,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(oe=>{const ke=oe.senderId===(r==null?void 0:r.uid);return i.jsx("div",{className:`flex ${ke?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${ke?"order-2":"order-1"}`,children:[i.jsx("div",{className:`rounded-2xl px-4 py-2 ${ke?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:i.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:oe.text})}),i.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${ke?"justify-end":"justify-start"}`,children:[i.jsx(dn,{className:"w-3 h-3"}),i.jsx("span",{children:L(oe.sentAt)}),W(oe)]})]})},oe.id)}),i.jsx("div",{ref:I})]})}),i.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[i.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[i.jsx(_s,{ref:D,value:d,placeholder:"Tapez votre message...",onChange:N,onKeyDown:T,rows:1,style:{height:m,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),i.jsx(F,{onClick:P,disabled:!d.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:i.jsx(zl,{className:"h-3.5 w-3.5"})})]}),v&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[i.jsx(zt,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),i.jsx(aa,{open:b,onOpenChange:y,children:i.jsxs(Ni,{children:[i.jsx(oa,{children:i.jsxs(Si,{className:"flex items-center gap-2",children:[i.jsx(ml,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs(he,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[i.jsx(hn,{className:"w-4 h-4"}),"Motif du signalement"]}),i.jsxs(mt,{value:x,onValueChange:_,children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Sélectionnez un motif"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"spam",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ar,{className:"w-4 h-4"}),"Spam"]})}),i.jsx(de,{value:"harassment",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"w-4 h-4"}),"Harcèlement"]})}),i.jsx(de,{value:"inappropriate",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ml,{className:"w-4 h-4"}),"Contenu inapproprié"]})}),i.jsx(de,{value:"scam",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"w-4 h-4"}),"Arnaque"]})}),i.jsx(de,{value:"other",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_o,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),i.jsxs("div",{children:[i.jsxs(he,{htmlFor:"report-description",className:"flex items-center gap-2",children:[i.jsx(zt,{className:"w-4 h-4"}),"Description (optionnel)"]}),i.jsx(_s,{id:"report-description",value:E,onChange:oe=>S(oe.target.value),placeholder:"Décrivez le problème...",rows:3})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(F,{variant:"outline",onClick:()=>y(!1),children:"Annuler"}),i.jsxs(F,{onClick:V,disabled:!x,className:"bg-red-500 hover:bg-red-600",children:[i.jsx(ml,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},Kue=()=>{const{currentUser:t,userProfile:e}=Zt(),{conversations:n,currentConversation:r,messages:s,loading:a,fetchConversations:o,fetchMessages:l,setCurrentConversation:c,cleanup:u}=Qx(),[d,h]=g.useState(""),[m,p]=g.useState(!1);g.useEffect(()=>(t&&o(t.uid),()=>{u()}),[t,o,u]),g.useEffect(()=>{r&&l(r.id)},[r,l]);const v=b=>{c(b),p(!0)},w=()=>{p(!1),c(null)};return t?i.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[i.jsx("div",{className:"lg:hidden w-full h-full",children:m?i.jsx(vT,{conversation:r,messages:s,loading:a,currentUser:t,onBack:w}):i.jsx(gT,{conversations:n,loading:a,searchQuery:d,setSearchQuery:h,currentConversation:r,setCurrentConversation:c,currentUser:t,onSelectConversation:v})}),i.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[i.jsx(gT,{conversations:n,loading:a,searchQuery:d,setSearchQuery:h,currentConversation:r,setCurrentConversation:c,currentUser:t,onSelectConversation:v}),i.jsx(vT,{conversation:r,messages:s,loading:a,currentUser:t,onBack:w})]})]}):i.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zt,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accéder à vos messages"}),i.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[i.jsx(or,{className:"w-4 h-4"}),"Vous devez être connecté pour voir et envoyer des messages."]}),i.jsx(F,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:i.jsxs(be,{to:"/auth",className:"flex items-center gap-2",children:[i.jsx(or,{className:"w-4 h-4"}),"Se connecter"]})})]})},Yue=Fe.object({email:Fe.string().email("Email invalide"),password:Fe.string().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),Que=Fe.object({firstName:Fe.string().min(2,"Le prénom doit contenir au moins 2 caractères"),lastName:Fe.string().min(2,"Le nom doit contenir au moins 2 caractères"),displayName:Fe.string().optional(),email:Fe.string().email("Email invalide").refine(t=>["univ-","edu","gmail.com","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),"Vous devez utiliser une adresse email universitaire"),university:Fe.string().min(1,"Veuillez sélectionner votre université"),otherUniversity:Fe.string().optional(),fieldOfStudy:Fe.string().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:Fe.string().optional(),graduationYear:Fe.string().min(1,"Veuillez indiquer votre année de diplôme"),password:Fe.string().min(6,"Le mot de passe doit contenir au moins 6 caractères"),confirmPassword:Fe.string()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),Jue=Fe.object({university:Fe.string().min(1,"Veuillez sélectionner votre université"),otherUniversity:Fe.string().optional(),fieldOfStudy:Fe.string().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:Fe.string().optional(),graduationYear:Fe.string().min(1,"Veuillez indiquer votre année de diplôme"),displayName:Fe.string().min(2,"Le nom doit contenir au moins 2 caractères")}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),xT=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris 3 Sorbonne","Université Paris Cité","Sciences Po Paris","Autre université"],yT=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],Xue=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),Zue=()=>{var N,P;const{currentUser:t,signIn:e,signInWithGoogle:n}=Zt(),[r,s]=g.useState(!1),[a,o]=g.useState(!1),[l,c]=g.useState(!1),[u,d]=g.useState(!1),[h,m]=g.useState(""),[p,v]=g.useState(""),[w,b]=g.useState(!1),[y,x]=g.useState(null),_=Mn(),E=_l({resolver:jl(Yue),defaultValues:{email:"",password:""}}),S=_l({resolver:jl(Que),defaultValues:{firstName:"",lastName:"",displayName:"",email:"",university:"",otherUniversity:"",fieldOfStudy:"",otherFieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),D=_l({resolver:jl(Jue),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}});if(g.useEffect(()=>{(async()=>{if(!t){b(!1),x(null);return}try{const C=await ys(Ze(ye,"users",t.uid));if(C.exists()){const V=C.data();try{const H=localStorage.getItem("pendingUserData"),$=localStorage.getItem("pendingUserEmail");if(H&&$===t.email&&t.emailVerified){const L=JSON.parse(H),W=Object.fromEntries(Object.entries(L).filter(([,U])=>U!==void 0));await ou(Ze(ye,"users",t.uid),{...W,emailVerified:!0,profileCompleted:!0},{merge:!0}),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload();return}}catch(H){console.error("Error merging pending data into existing profile:",H)}!(t.emailVerified||t.providerData.some(H=>H.providerId==="google.com"))&&!V.emailVerified&&(v(t.email||""),d(!0)),b(!1)}else{if(t.providerData.some(H=>H.providerId==="google.com")){if(!Xue(t.email||"")){m("Vous devez utiliser une adresse email universitaire"),fs.signOut();return}x({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),b(!0);return}const V=localStorage.getItem("pendingUserData"),z=localStorage.getItem("pendingUserEmail");if(V&&z===t.email&&t.emailVerified)try{const H=JSON.parse(V),$=Object.fromEntries(Object.entries(H).filter(([,L])=>L!==void 0));await ou(Ze(ye,"users",t.uid),{...$,emailVerified:!0,profileCompleted:!0}),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}catch(H){console.error("Error saving pending user data:",H),m("Erreur lors de la sauvegarde du profil")}else V&&z===t.email&&!t.emailVerified&&(v(t.email||""),d(!0),b(!1))}}catch(C){console.error("Error checking user profile:",C),b(!1)}})()},[t]),g.useEffect(()=>{let T=null;return u&&t&&!t.emailVerified&&(T=setInterval(async()=>{try{await ub(t),t.emailVerified&&(d(!1),v(""),m(""),window.location.reload())}catch(C){console.error("Error checking email verification:",C)}},5e3)),()=>{T&&clearInterval(T)}},[u,t]),w&&y)return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:i.jsxs(Y,{className:"w-full max-w-md",children:[i.jsxs(Pe,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:i.jsx(Qk,{className:"w-6 h-6 text-green-600"})})}),i.jsx(Re,{className:"text-2xl text-green-600",children:"Complétez votre profil étudiant"}),i.jsx(at,{children:"Dernière étape pour accéder à StudyMarket"})]}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs(kt,{children:[i.jsx(Qk,{className:"h-4 w-4"}),i.jsxs(Tt,{children:["Connecté avec ",i.jsx("strong",{children:y.email})]})]}),h&&i.jsxs(kt,{variant:"destructive",children:[i.jsx(Th,{className:"h-4 w-4"}),i.jsx(Tt,{children:h})]}),i.jsxs("form",{onSubmit:D.handleSubmit(async T=>{c(!0),m("");try{const C=T.university==="Autre université"?T.otherUniversity:T.university,V=T.fieldOfStudy==="Autre"?T.otherFieldOfStudy:T.fieldOfStudy,z=Object.fromEntries(Object.entries(T).filter(([,H])=>H!==void 0));if(await ou(Ze(ye,"users",y.uid),{email:y.email,displayName:z.displayName,photoURL:y.photoURL,university:C,otherUniversity:T.university==="Autre université"?T.otherUniversity:null,fieldOfStudy:V,otherFieldOfStudy:T.fieldOfStudy==="Autre"?T.otherFieldOfStudy:null,graduationYear:parseInt(T.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),t&&y.displayName)try{await nf(t,{displayName:z.displayName})}catch(H){console.error("Error updating profile:",H)}window.location.reload()}catch(C){console.error("Error completing profile:",C),m("Erreur lors de la sauvegarde du profil")}finally{c(!1)}}),className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(he,{htmlFor:"university",children:"Université"}),i.jsxs(mt,{onValueChange:T=>D.setValue("university",T),value:D.watch("university"),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Sélectionnez votre université"})}),i.jsx(ut,{children:xT.map(T=>i.jsx(de,{value:T,children:T},T))})]}),D.watch("university")==="Autre université"&&i.jsx(_e,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...D.register("otherUniversity"),className:"mt-2"}),D.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.university.message}),D.watch("university")==="Autre université"&&D.formState.errors.otherUniversity&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.otherUniversity.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(he,{htmlFor:"fieldOfStudy",children:"Filière"}),i.jsxs(mt,{onValueChange:T=>D.setValue("fieldOfStudy",T),value:D.watch("fieldOfStudy"),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Filière"})}),i.jsx(ut,{children:yT.map(T=>i.jsx(de,{value:T,children:T},T))})]}),D.watch("fieldOfStudy")==="Autre"&&i.jsx(_e,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...D.register("otherFieldOfStudy"),className:"mt-2"}),D.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.fieldOfStudy.message}),D.watch("fieldOfStudy")==="Autre"&&D.formState.errors.otherFieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.otherFieldOfStudy.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(he,{htmlFor:"graduationYear",children:"Année de diplôme"}),i.jsxs(mt,{onValueChange:T=>D.setValue("graduationYear",T),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Année"})}),i.jsx(ut,{children:Array.from({length:8},(T,C)=>2024+C).map(T=>i.jsx(de,{value:T.toString(),children:T},T))})]}),D.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.graduationYear.message})]})]}),i.jsxs(F,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:l,children:[l?i.jsx(Hr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),i.jsx(F,{variant:"outline",onClick:()=>{fs.signOut(),b(!1),x(null)},className:"w-full",children:"Se déconnecter et recommencer"})]})]})});if(u)return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:i.jsxs(Y,{className:"w-full max-w-md",children:[i.jsxs(Pe,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(ar,{className:"w-6 h-6 text-blue-600"})})}),i.jsx(Re,{className:"text-2xl text-blue-600",children:"Vérifiez votre email"}),i.jsxs(at,{children:["Un lien d'activation a été envoyé à ",i.jsx("strong",{children:p}),".",i.jsx("br",{}),"Cliquez sur le lien pour activer votre compte.",i.jsx("br",{}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"(Vous pouvez fermer cette page et revenir après avoir validé l'email)"})]})]}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[i.jsx("p",{children:i.jsx("strong",{children:"Important :"})}),i.jsx("p",{children:"• Cliquez sur le lien dans l'email pour activer votre compte"}),i.jsx("p",{children:"• Vérifiez votre boîte de réception et vos spams"}),i.jsx("p",{children:"• Le lien expire dans 24h"})]}),i.jsxs(F,{onClick:async()=>{if(t){c(!0);try{await AC(t,qk.actionCodeSettings),m(""),alert("Email d'activation renvoyé !")}catch(T){m("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",T)}c(!1)}},variant:"outline",className:"w-full",disabled:l||!t,children:[l?i.jsx(Hr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(ar,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),i.jsx(F,{onClick:async()=>{if(t){c(!0);try{await ub(t),t.emailVerified?(d(!1),v(""),m(""),window.location.reload()):m("L'email n'est pas encore validé. Pensez à vérifier vos spams.")}catch{m("Erreur lors de la vérification de l'état de l'email")}c(!1)}},variant:"secondary",className:"w-full",disabled:l||!t,children:"J'ai déjà validé mon email"}),h&&i.jsxs(kt,{variant:"destructive",children:[i.jsx(Th,{className:"h-4 w-4"}),i.jsx(Tt,{children:h})]}),i.jsx(F,{variant:"link",onClick:()=>{d(!1),v(""),m(""),t&&fs.signOut()},className:"w-full",children:"Retour à l'inscription"})]})]})});const I=async T=>{c(!0),m("");try{await e(T.email,T.password),_("/")}catch(C){const V=C instanceof Error?C.message:"Erreur inconnue",z=C==null?void 0:C.code;m(z==="auth/invalid-credential"?"Email ou mot de passe incorrect":z==="auth/user-not-found"?"Aucun compte trouvé avec cet email":z==="auth/user-disabled"?"Ce compte a été désactivé":z==="auth/too-many-requests"?"Trop de tentatives. Réessayez plus tard.":"Erreur de connexion: "+V),console.error("Sign in error:",C)}finally{c(!1)}},A=async T=>{c(!0),m("");try{const{firstName:C,lastName:V}=T,z=`${C} ${V}`,$=(await YP(fs,T.email,T.password)).user;await AC($,qk.actionCodeSettings);const L=T.university==="Autre université"?T.otherUniversity:T.university,W=T.fieldOfStudy==="Autre"?T.otherFieldOfStudy:T.fieldOfStudy,U={firstName:C,lastName:V,displayName:z,university:L,otherUniversity:T.university==="Autre université"?T.otherUniversity:null,fieldOfStudy:W,otherFieldOfStudy:T.fieldOfStudy==="Autre"?T.otherFieldOfStudy:null,graduationYear:parseInt(T.graduationYear),email:T.email,createdAt:new Date().toISOString(),emailVerified:!1,isStudent:!0,provider:"email"};localStorage.setItem("pendingUserData",JSON.stringify(U)),localStorage.setItem("pendingUserEmail",T.email),$&&await nf($,{displayName:z}),v(T.email),d(!0)}catch(C){const V=C==null?void 0:C.code;m(V==="auth/email-already-in-use"?"Cette adresse email est déjà utilisée":V==="auth/weak-password"?"Le mot de passe est trop faible":V==="auth/invalid-email"?"Adresse email invalide":"Erreur lors de la création du compte"),console.error("Sign up error:",C)}finally{c(!1)}},R=async()=>{c(!0),m("");try{await n()}catch(T){const C=T instanceof Error?T.message:"Erreur inconnue",V=T==null?void 0:T.code;m(V==="auth/popup-closed-by-user"?"Connexion annulée":V==="auth/popup-blocked"?"Popup bloquée par le navigateur":V==="auth/account-exists-with-different-credential"?"Un compte existe déjà avec cet email":"Erreur de connexion avec Google: "+C),console.error("Google sign in error:",T)}finally{c(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-2 sm:px-4 py-4 sm:py-8 bg-gradient-to-br from-primary/5 via-background to-secondary/5",children:i.jsxs(Y,{className:"w-full max-w-md sm:max-w-lg lg:max-w-xl mx-auto",children:[i.jsxs(Pe,{className:"text-center space-y-2 sm:space-y-4",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:i.jsx(ji,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),i.jsx(Re,{className:"text-xl sm:text-2xl lg:text-3xl",children:r?"Rejoindre StudyMarket":"Connectez-vous à votre compte étudiant"}),i.jsx(at,{className:"text-sm sm:text-base",children:r?"Créez votre compte étudiant vérifié et rejoignez la communauté":"Connectez-vous à votre compte étudiant"}),r&&i.jsx("div",{className:"flex items-center justify-center gap-2 mt-2 sm:mt-4",children:i.jsxs(Ie,{className:"bg-blue-100 text-blue-800 border-blue-200 text-xs sm:text-sm",children:[i.jsx(Et,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),i.jsxs(Q,{className:"space-y-4 sm:space-y-6",children:[h&&i.jsxs(kt,{variant:"destructive",children:[i.jsx(Th,{className:"h-4 w-4"}),i.jsx(Tt,{children:h})]}),i.jsxs(F,{variant:"outline",className:"w-full",onClick:R,disabled:l,children:[l?i.jsx(Hr,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),i.jsx("span",{className:"hidden sm:inline",children:"Continuer avec Google Éducation"}),i.jsx("span",{className:"sm:hidden",children:"Google Éducation"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx(ms,{className:"w-full"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),i.jsxs("form",{onSubmit:r?S.handleSubmit(A):E.handleSubmit(I),className:"space-y-4",children:[r&&i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(he,{htmlFor:"firstName",className:"text-sm",children:"Prénom"}),i.jsx(_e,{id:"firstName",...S.register("firstName"),autoComplete:"given-name",className:"text-sm"}),S.formState.errors.firstName&&i.jsx("span",{className:"text-red-500 text-xs",children:S.formState.errors.firstName.message})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx(he,{htmlFor:"lastName",className:"text-sm",children:"Nom"}),i.jsx(_e,{id:"lastName",...S.register("lastName"),autoComplete:"family-name",className:"text-sm"}),S.formState.errors.lastName&&i.jsx("span",{className:"text-red-500 text-xs",children:S.formState.errors.lastName.message})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(he,{htmlFor:"email",className:"text-sm",children:"Email universitaire"}),i.jsxs("div",{className:"relative",children:[i.jsx(ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(_e,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10 text-sm",...r?S.register("email"):E.register("email")})]}),(r?S.formState.errors.email:E.formState.errors.email)&&i.jsx("p",{className:"text-sm text-destructive",children:(N=r?S.formState.errors.email:E.formState.errors.email)==null?void 0:N.message}),r&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoyé à cette adresse"})]}),r&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(he,{htmlFor:"university",className:"text-sm",children:"Université"}),i.jsxs(mt,{onValueChange:T=>S.setValue("university",T),value:S.watch("university"),children:[i.jsx(ct,{className:"text-sm",children:i.jsx(pt,{placeholder:"Sélectionnez votre université"})}),i.jsx(ut,{children:xT.map(T=>i.jsx(de,{value:T,children:T},T))})]}),S.watch("university")==="Autre université"&&i.jsx(_e,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...S.register("otherUniversity"),className:"mt-2 text-sm"}),S.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive",children:S.formState.errors.university.message}),S.watch("university")==="Autre université"&&S.formState.errors.otherUniversity&&i.jsx("p",{className:"text-sm text-destructive",children:S.formState.errors.otherUniversity.message})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(he,{htmlFor:"fieldOfStudy",className:"text-sm",children:"Filière"}),i.jsxs(mt,{onValueChange:T=>S.setValue("fieldOfStudy",T),value:S.watch("fieldOfStudy"),children:[i.jsx(ct,{className:"text-sm",children:i.jsx(pt,{placeholder:"Sélectionnez votre filière"})}),i.jsx(ut,{children:yT.map(T=>i.jsx(de,{value:T,children:T},T))})]}),S.watch("fieldOfStudy")==="Autre"&&i.jsx(_e,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...S.register("otherFieldOfStudy"),className:"mt-2 text-sm"}),S.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:S.formState.errors.fieldOfStudy.message}),S.watch("fieldOfStudy")==="Autre"&&S.formState.errors.otherFieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:S.formState.errors.otherFieldOfStudy.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(he,{htmlFor:"graduationYear",className:"text-sm",children:"Année de diplôme"}),i.jsxs(mt,{onValueChange:T=>S.setValue("graduationYear",T),value:S.watch("graduationYear"),children:[i.jsx(ct,{className:"text-sm",children:i.jsx(pt,{placeholder:"Sélectionnez votre année"})}),i.jsx(ut,{children:Array.from({length:8},(T,C)=>2024+C).map(T=>i.jsx(de,{value:T.toString(),children:T},T))})]}),S.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive",children:S.formState.errors.graduationYear.message})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(he,{htmlFor:"password",className:"text-sm",children:"Mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ul,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(_e,{id:"password",type:a?"text":"password",placeholder:"••••••••",className:"pl-10 text-sm",...r?S.register("password"):E.register("password")}),i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>o(!a),children:a?i.jsx(eQ,{className:"w-4 h-4"}):i.jsx(Ru,{className:"w-4 h-4"})})]}),(r?S.formState.errors.password:E.formState.errors.password)&&i.jsx("p",{className:"text-sm text-destructive",children:(P=r?S.formState.errors.password:E.formState.errors.password)==null?void 0:P.message})]}),r&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(he,{htmlFor:"confirmPassword",className:"text-sm",children:"Confirmer le mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ul,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(_e,{id:"confirmPassword",type:a?"text":"password",placeholder:"••••••••",className:"pl-10 text-sm",...S.register("confirmPassword")})]}),S.formState.errors.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive",children:S.formState.errors.confirmPassword.message})]}),i.jsxs(F,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-sm sm:text-base",disabled:l,children:[l?i.jsx(Hr,{className:"w-4 h-4 mr-2 animate-spin"}):null,r?"Créer le compte et envoyer l'email":"Se connecter"]})]}),i.jsx("div",{className:"w-full",children:i.jsx(F,{variant:"link",onClick:()=>s(!r),disabled:l,className:"w-full flex justify-center items-center text-center break-words px-1 text-sm sm:text-base",children:r?"Déjà un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})}),r&&i.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En créant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptées."})]})]})})},Ps=({children:t})=>{const{currentUser:e}=Zt(),n=Oo();return e?i.jsx(i.Fragment,{children:t}):i.jsx(J8,{to:"/auth\\",state:{from:n},replace:!0})},F6=({cart:t,total:e,showCheckoutButton:n=!0})=>{const r=Mn(),s=e,a=0,o=0,l=s+a-o,c=u=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(u);return i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(jo,{className:"w-5 h-5"}),"Récapitulatif de commande"]})}),i.jsx(Q,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["Articles (",t.reduce((u,d)=>u+d.quantity,0),")"]}),i.jsx("span",{children:c(s)})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx(Dx,{className:"w-4 h-4"}),"Livraison"]}),i.jsx("span",{className:"text-green-600 font-medium",children:"Gratuite"})]}),o>0,i.jsx(ms,{}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Total"}),i.jsx("span",{className:"font-bold text-lg",children:c(l)})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"* TVA incluse"}),n&&i.jsxs(F,{onClick:()=>r("/checkout"),className:"w-full mt-4 bg-gradient-to-r from-primary to-secondary",disabled:t.length===0,children:[i.jsx(vn,{className:"mr-2 h-4 w-4"}),"Procéder au paiement",i.jsx(mi,{className:"ml-2 h-4 w-4"})]})]})})]})},ede=()=>{const{currentUser:t}=Zt(),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:s,cartTotal:a}=dd(),o=Mn(),[l,c]=g.useState(""),[u,d]=g.useState(!1),h=(v,w)=>{if(!(w<1)){if(w>10){te.error("Maximum 10 articles par produit");return}n(v,w)}},m=v=>{r(v),te.success("Article retiré du panier")},p=()=>{l.trim()&&(d(!0),setTimeout(()=>{l.toLowerCase()==="etudiant10"?te.success("Code promo appliqué : 10% de réduction"):te.error("Code promo invalide ou expiré"),d(!1)},1e3))};return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(F,{variant:"ghost",onClick:()=>o(-1),className:"-ml-4",children:[i.jsx(sa,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(jo,{className:"w-8 h-8"}),"Mon Panier"]}),e.length>0&&i.jsxs(F,{variant:"outline",onClick:s,className:"text-destructive hover:text-destructive",children:[i.jsx(ia,{className:"w-4 h-4 mr-2"}),"Vider le panier"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(jo,{className:"w-8 h-8 text-muted-foreground"})}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre panier est vide"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'articles à votre panier."}),i.jsx(F,{asChild:!0,children:i.jsxs(be,{to:"/products",children:[i.jsx(bl,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center justify-between",children:[i.jsxs("span",{children:["Articles (",e.reduce((v,w)=>v+w.quantity,0),")"]}),i.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>o("/products"),children:[i.jsx(bl,{className:"w-4 h-4 mr-2"}),"Continuer mes achats"]})]})}),i.jsx(Q,{children:i.jsx("div",{className:"space-y-4",children:e.map(v=>i.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[v.image?i.jsx("img",{src:v.image,alt:v.name,className:"w-20 h-20 object-cover rounded"}):i.jsx("div",{className:"w-20 h-20 bg-muted rounded flex items-center justify-center",children:i.jsx(bl,{className:"w-8 h-8 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:v.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:v.seller}),i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx(F,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-r-none",onClick:()=>h(v.id,v.quantity-1),disabled:v.quantity<=1,children:i.jsx(VD,{className:"h-3 w-3"})}),i.jsx(_e,{type:"number",value:v.quantity,onChange:w=>{const b=parseInt(w.target.value);isNaN(b)||h(v.id,b)},className:"h-8 w-12 rounded-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),i.jsx(F,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-l-none",onClick:()=>h(v.id,v.quantity+1),disabled:v.quantity>=10,children:i.jsx(wl,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(v.price*v.quantity)}),i.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>m(v.id),className:"text-destructive hover:text-destructive mt-2",children:[i.jsx(ia,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})]},v.id))})})]}),i.jsx(Y,{className:"mt-6",children:i.jsxs(Q,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(mf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(_e,{placeholder:"Code promo",value:l,onChange:v=>c(v.target.value),className:"pl-10"})]}),i.jsx(F,{onClick:p,disabled:!l.trim()||u,children:u?i.jsxs(i.Fragment,{children:[i.jsx(va,{className:"w-4 h-4 mr-2 animate-spin"}),"Application..."]}):"Appliquer"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Essayez le code "ETUDIANT10" pour 10% de réduction'})]})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(F6,{cart:e,total:a,showCheckoutButton:!0}),!t&&i.jsxs(kt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(hn,{className:"h-4 w-4 text-orange-600"}),i.jsx(Tt,{className:"text-orange-800",children:"Vous devez être connecté pour finaliser votre commande."})]})]})]})]})},Tp=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},HN=ud((t,e)=>({orders:[],loading:!1,fetchUserOrders:async n=>{if(n)try{t({loading:!0});const r=Mt(wt(ye,"orders"),Vt("userId","==",n),xs(100)),s=await Kt(r),a=[];s.forEach(o=>{const l=o.data();a.push({id:o.id,...l,createdAt:Tp(l.createdAt),updatedAt:Tp(l.updatedAt)})}),a.sort((o,l)=>l.createdAt.getTime()-o.createdAt.getTime()),t({orders:a,loading:!1})}catch(r){console.error("Error fetching orders:",r),te.error("Erreur lors du chargement des commandes"),t({loading:!1})}},getOrderById:async n=>{try{const r=await ys(Ze(ye,"orders",n));if(r.exists()){const s=r.data();return{id:r.id,...s,createdAt:Tp(s.createdAt),updatedAt:Tp(s.updatedAt)}}return null}catch(r){return console.error("Error getting order:",r),te.error("Erreur lors du chargement de la commande"),null}},createOrder:async n=>{try{const r=Math.random().toString(36).substring(2,8).toUpperCase(),s={...n,securityCode:r,createdAt:ln(),updatedAt:ln()},a=await Ol(wt(ye,"orders"),s),o={id:a.id,...n,createdAt:new Date,updatedAt:new Date};return t(l=>({orders:[o,...l.orders]})),te.success("Commande créée avec succès !"),a.id}catch(r){throw console.error("Error creating order:",r),te.error("Erreur lors de la création de la commande"),r}},updateOrderStatus:async(n,r,s)=>{try{const a={status:r,updatedAt:ln()};s&&(a.notes=s),await un(Ze(ye,"orders",n),a),t(o=>({orders:o.orders.map(l=>l.id===n?{...l,status:r,notes:s||l.notes,updatedAt:new Date}:l)})),te.success(`Statut de la commande mis à jour : ${r}`)}catch(a){console.error("Error updating order status:",a),te.error("Erreur lors de la mise à jour du statut")}},cancelOrder:async(n,r)=>{try{await un(Ze(ye,"orders",n),{status:"cancelled",notes:r,updatedAt:ln()}),t(s=>({orders:s.orders.map(a=>a.id===n?{...a,status:"cancelled",notes:r,updatedAt:new Date}:a)})),te.success("Commande annulée")}catch(s){console.error("Error cancelling order:",s),te.error("Erreur lors de l'annulation de la commande")}}})),tde=()=>{const{currentUser:t,userProfile:e}=Zt(),n=Mn(),r=Oo(),{cart:s,cartTotal:a,clearCart:o}=dd(),{createOrder:l}=HN(),[c,u]=g.useState("shipping"),[d,h]=g.useState(!1),[m,p]=g.useState(null),[v,w]=g.useState({}),[b,y]=g.useState({fullName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:"",city:"",postalCode:"",country:"France",university:(e==null?void 0:e.university)||"",saveInfo:!0}),[x,_]=g.useState({}),[E,S]=g.useState(!1);g.useEffect(()=>{var P;s.length===0&&!((P=r.state)!=null&&P.directCheckout)&&(n("/cart"),te.error("Votre panier est vide"))},[s,n,r]);const D=()=>{const P={};return b.fullName||(P.fullName="Nom complet requis"),b.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.email)||(P.email="Format d'email invalide"):P.email="Email requis",b.phone||(P.phone="Téléphone requis"),b.address||(P.address="Adresse requise"),b.city||(P.city="Ville requise"),b.postalCode||(P.postalCode="Code postal requis"),_(P),Object.keys(P).length===0},I=P=>{P.preventDefault(),D()&&(u("payment"),window.scrollTo(0,0))},A=(P,T)=>{p(P),w(T),P==="card"&&T.stripePaymentId&&(u("review"),window.scrollTo(0,0))},R=()=>{if(!m){te.error("Veuillez sélectionner un mode de paiement");return}u("review"),window.scrollTo(0,0)},N=async()=>{if(!t){n("/auth");return}if(!E){te.error("Veuillez accepter les conditions générales");return}h(!0);try{const P={userId:t.uid,items:s,total:a,shipping:b,payment:{method:m,details:v,transactionId:v.stripePaymentId},status:m==="card"?"processing":"pending"},T=await l(P);o(),n(`/order-confirmation/${T}`)}catch(P){console.error("Error placing order:",P),te.error("Erreur lors de la création de la commande")}finally{h(!1)}};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(F,{variant:"ghost",onClick:()=>n(-1),className:"-ml-4",children:[i.jsx(sa,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Finaliser votre commande"}),i.jsxs("div",{className:"flex items-center mt-6",children:[i.jsxs("div",{className:`flex items-center ${c==="shipping"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="shipping"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),i.jsx("span",{className:"ml-2 font-medium",children:"Livraison"})]}),i.jsx(mi,{className:"mx-2 text-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${c==="payment"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="payment"||c==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),i.jsx("span",{className:"ml-2 font-medium",children:"Paiement"})]}),i.jsx(mi,{className:"mx-2 text-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${c==="review"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),i.jsx("span",{className:"ml-2 font-medium",children:"Vérification"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c==="shipping"&&i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Dx,{className:"w-5 h-5"}),"Informations de livraison"]}),i.jsx(at,{children:"Entrez vos coordonnées pour la livraison"})]}),i.jsx(Q,{children:i.jsxs("form",{onSubmit:I,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs(he,{htmlFor:"fullName",className:"flex items-center gap-1",children:[i.jsx(or,{className:"w-4 h-4"}),"Nom complet *"]}),i.jsx(_e,{id:"fullName",value:b.fullName,onChange:P=>y({...b,fullName:P.target.value}),className:x.fullName?"border-red-500":""}),x.fullName&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.fullName})]}),i.jsxs("div",{children:[i.jsxs(he,{htmlFor:"email",className:"flex items-center gap-1",children:[i.jsx(ar,{className:"w-4 h-4"}),"Email *"]}),i.jsx(_e,{id:"email",type:"email",value:b.email,onChange:P=>y({...b,email:P.target.value}),className:x.email?"border-red-500":""}),x.email&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.email})]}),i.jsxs("div",{children:[i.jsxs(he,{htmlFor:"phone",className:"flex items-center gap-1",children:[i.jsx(rd,{className:"w-4 h-4"}),"Téléphone *"]}),i.jsx(_e,{id:"phone",value:b.phone,onChange:P=>y({...b,phone:P.target.value}),className:x.phone?"border-red-500":""}),x.phone&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.phone})]}),i.jsxs("div",{children:[i.jsxs(he,{htmlFor:"university",className:"flex items-center gap-1",children:[i.jsx(qn,{className:"w-4 h-4"}),"Université"]}),i.jsx(_e,{id:"university",value:b.university,onChange:P=>y({...b,university:P.target.value})})]})]}),i.jsxs("div",{children:[i.jsxs(he,{htmlFor:"address",className:"flex items-center gap-1",children:[i.jsx(qn,{className:"w-4 h-4"}),"Adresse *"]}),i.jsx(_e,{id:"address",value:b.address,onChange:P=>y({...b,address:P.target.value}),className:x.address?"border-red-500":""}),x.address&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.address})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsxs(he,{htmlFor:"city",className:"flex items-center gap-1",children:[i.jsx(qn,{className:"w-4 h-4"}),"Ville *"]}),i.jsx(_e,{id:"city",value:b.city,onChange:P=>y({...b,city:P.target.value}),className:x.city?"border-red-500":""}),x.city&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.city})]}),i.jsxs("div",{children:[i.jsxs(he,{htmlFor:"postalCode",className:"flex items-center gap-1",children:[i.jsx(qn,{className:"w-4 h-4"}),"Code postal *"]}),i.jsx(_e,{id:"postalCode",value:b.postalCode,onChange:P=>y({...b,postalCode:P.target.value}),className:x.postalCode?"border-red-500":""}),x.postalCode&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.postalCode})]}),i.jsxs("div",{children:[i.jsxs(he,{htmlFor:"country",className:"flex items-center gap-1",children:[i.jsx(qn,{className:"w-4 h-4"}),"Pays *"]}),i.jsx(_e,{id:"country",value:b.country,onChange:P=>y({...b,country:P.target.value}),disabled:!0})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[i.jsx(Av,{id:"saveInfo",checked:b.saveInfo,onCheckedChange:P=>y({...b,saveInfo:P})}),i.jsx(he,{htmlFor:"saveInfo",children:"Sauvegarder ces informations pour mes prochaines commandes"})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsxs(F,{type:"submit",className:"w-full md:w-auto",children:["Continuer vers le paiement",i.jsx(mi,{className:"ml-2 h-4 w-4"})]})})]})})]}),c==="payment"&&i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(vn,{className:"w-5 h-5"}),"Méthode de paiement"]}),i.jsx(at,{children:"Choisissez votre mode de paiement préféré"})]}),i.jsx(Q,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsx(HL,{amount:a,currency:"EUR",onMethodSelect:A,selectedMethod:m}),i.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[i.jsxs(F,{variant:"outline",onClick:()=>u("shipping"),children:[i.jsx(sa,{className:"mr-2 h-4 w-4"}),"Retour"]}),i.jsxs(F,{onClick:R,disabled:!m||m==="card"&&!v.stripePaymentId,children:["Vérifier la commande",i.jsx(mi,{className:"ml-2 h-4 w-4"})]})]})]})})]}),c==="review"&&i.jsxs(Y,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(xt,{className:"w-5 h-5"}),"Vérification de la commande"]}),i.jsx(at,{children:"Vérifiez les détails de votre commande avant de confirmer"})]}),i.jsx(Q,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:"Informations de livraison"}),i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>u("shipping"),children:"Modifier"})]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[i.jsx("p",{className:"font-medium",children:b.fullName}),i.jsx("p",{children:b.address}),i.jsxs("p",{children:[b.postalCode," ",b.city,", ",b.country]}),i.jsx("p",{children:b.email}),i.jsx("p",{children:b.phone})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:"Méthode de paiement"}),i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>u("payment"),children:"Modifier"})]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[i.jsxs("p",{className:"font-medium",children:[m==="card"&&"Carte bancaire",m==="paypal"&&"PayPal",m==="transfer"&&"Virement bancaire",m==="cash"&&"Paiement à la livraison",m==="lydia"&&"Lydia"]}),m==="card"&&v.stripePaymentId&&i.jsxs("p",{className:"text-green-600 text-sm",children:[i.jsx(xt,{className:"w-3 h-3 inline mr-1"}),"Paiement autorisé"]}),m==="paypal"&&v.paypalEmail&&i.jsx("p",{children:v.paypalEmail}),m==="lydia"&&v.lydiaPhone&&i.jsx("p",{children:v.lydiaPhone})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",s.length,")"]}),i.jsx("div",{className:"space-y-3",children:s.map(P=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[P.image&&i.jsx("img",{src:P.image,alt:P.name,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:P.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",P.quantity]})]}),i.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(P.price*P.quantity)})]},P.id))})]}),i.jsx("div",{className:"pt-4 border-t",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(Av,{id:"terms",checked:E,onCheckedChange:P=>S(P)}),i.jsxs("div",{children:[i.jsx(he,{htmlFor:"terms",className:"font-medium",children:"J'accepte les conditions générales de vente"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"En passant commande, vous acceptez nos conditions générales de vente et notre politique de confidentialité."})]})]})}),i.jsxs("div",{className:"flex justify-between pt-4",children:[i.jsxs(F,{variant:"outline",onClick:()=>u("payment"),children:[i.jsx(sa,{className:"mr-2 h-4 w-4"}),"Retour"]}),i.jsx(F,{onClick:N,disabled:d||!E,className:"bg-gradient-to-r from-primary to-secondary",children:d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ul,{className:"mr-2 h-4 w-4"}),"Confirmer la commande"]})})]})]})})]})]}),i.jsxs("div",{children:[i.jsx(F6,{cart:s,total:a,showCheckoutButton:!1}),i.jsxs(kt,{className:"mt-4 border-blue-200 bg-blue-50",children:[i.jsx(Et,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Tt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Paiement sécurisé :"})," Toutes vos informations sont cryptées et sécurisées."]})]}),i.jsx(Y,{className:"mt-4",children:i.jsx(Q,{className:"pt-6",children:i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(_o,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Besoin d'aide ?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre équipe est disponible 7j/7 pour vous aider avec votre commande."}),i.jsx(F,{variant:"link",className:"p-0 h-auto text-sm",children:"Contacter le support"})]})]})})})})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6",children:[i.jsx(jo,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour finaliser votre achat"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder au processus de paiement"}),i.jsx(F,{onClick:()=>n("/auth"),children:"Se connecter"})]})})})},nde=()=>{const{currentUser:t}=Zt(),{orders:e,fetchUserOrders:n,loading:r}=HN(),s=Mn(),[a,o]=g.useState(""),[l,c]=g.useState("all"),[u,d]=g.useState("date-desc"),[h,m]=g.useState("all");g.useEffect(()=>{t&&n(t.uid)},[t,n]);const p=()=>e.filter(y=>{const x=!a||y.id.toLowerCase().includes(a.toLowerCase()),_=l==="all"||y.status===l;let E=!0;if(h!=="all"){const S=new Date(y.createdAt),D=new Date;if(h==="last-30-days"){const I=new Date;I.setDate(D.getDate()-30),E=S>=I}else if(h==="last-6-months"){const I=new Date;I.setMonth(D.getMonth()-6),E=S>=I}}return x&&_&&E}).sort((y,x)=>u==="date-desc"?new Date(x.createdAt).getTime()-new Date(y.createdAt).getTime():u==="date-asc"?new Date(y.createdAt).getTime()-new Date(x.createdAt).getTime():u==="total-desc"?x.total-y.total:u==="total-asc"?y.total-x.total:0),v=y=>{switch(y){case"pending":return i.jsxs(Ie,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[i.jsx(dn,{className:"w-3 h-3 mr-1"}),"En attente"]});case"processing":return i.jsxs(Ie,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[i.jsx(Jt,{className:"w-3 h-3 mr-1"}),"En traitement"]});case"shipped":return i.jsxs(Ie,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[i.jsx(Dx,{className:"w-3 h-3 mr-1"}),"Expédiée"]});case"delivered":return i.jsxs(Ie,{className:"bg-green-100 text-green-800 border-green-200",children:[i.jsx(xt,{className:"w-3 h-3 mr-1"}),"Livrée"]});case"cancelled":return i.jsxs(Ie,{className:"bg-red-100 text-red-800 border-red-200",children:[i.jsx(Pu,{className:"w-3 h-3 mr-1"}),"Annulée"]});default:return i.jsx(Ie,{children:y})}},w=y=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(y),b=()=>{const y={user:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),date:new Date().toISOString(),orders:e.map(S=>({id:S.id,date:S.createdAt,status:S.status,total:S.total,items:S.items.length}))},x=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),_=URL.createObjectURL(x),E=document.createElement("a");E.href=_,E.download=`commandes-${new Date().toISOString().slice(0,10)}.json`,E.click(),URL.revokeObjectURL(_)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Jt,{className:"w-8 h-8"}),"Mes Commandes"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Suivez et gérez toutes vos commandes"})]}),i.jsxs(F,{variant:"outline",onClick:b,className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4"}),"Exporter"]})]}),i.jsx(Y,{children:i.jsx(Q,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(An,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(_e,{placeholder:"Rechercher par numéro de commande...",value:a,onChange:y=>o(y.target.value),className:"pl-10"})]}),i.jsxs(mt,{value:l,onValueChange:c,children:[i.jsx(ct,{className:"w-40",children:i.jsx(pt,{placeholder:"Statut"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"all",children:"Tous les statuts"}),i.jsx(de,{value:"pending",children:"En attente"}),i.jsx(de,{value:"processing",children:"En traitement"}),i.jsx(de,{value:"shipped",children:"Expédiée"}),i.jsx(de,{value:"delivered",children:"Livrée"}),i.jsx(de,{value:"cancelled",children:"Annulée"})]})]}),i.jsxs(mt,{value:h,onValueChange:m,children:[i.jsx(ct,{className:"w-40",children:i.jsx(pt,{placeholder:"Période"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"all",children:"Toutes les périodes"}),i.jsx(de,{value:"last-30-days",children:"30 derniers jours"}),i.jsx(de,{value:"last-6-months",children:"6 derniers mois"})]})]}),i.jsxs(mt,{value:u,onValueChange:d,children:[i.jsx(ct,{className:"w-40",children:i.jsx(pt,{placeholder:"Trier par"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"date-desc",children:"Date (récent → ancien)"}),i.jsx(de,{value:"date-asc",children:"Date (ancien → récent)"}),i.jsx(de,{value:"total-desc",children:"Prix (élevé → bas)"}),i.jsx(de,{value:"total-asc",children:"Prix (bas → élevé)"})]})]})]})})}),i.jsxs(cc,{defaultValue:"all",className:"space-y-4",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-4",children:[i.jsx($t,{value:"all",children:"Toutes"}),i.jsx($t,{value:"active",children:"En cours"}),i.jsx($t,{value:"completed",children:"Terminées"}),i.jsx($t,{value:"cancelled",children:"Annulées"})]}),i.jsx(Ut,{value:"all",className:"space-y-4",children:r?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((y,x)=>i.jsx(Y,{className:"animate-pulse",children:i.jsxs(Q,{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),i.jsx("div",{className:"h-6 bg-muted rounded w-1/6"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},x))}):p().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Jt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande trouvée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:e.length===0?"Vous n'avez pas encore passé de commande.":"Aucune commande ne correspond à vos critères de recherche."}),i.jsx(F,{asChild:!0,children:i.jsxs(be,{to:"/listings",children:[i.jsx(bl,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):i.jsx("div",{className:"space-y-4",children:p().map(y=>i.jsx(Y,{className:"hover:shadow-md transition-shadow",children:i.jsxs(Q,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",y.id.slice(0,8)]}),v(y.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(Us,{className:"w-3 h-3"}),Pn(new Date(y.createdAt),"dd MMMM yyyy",{locale:sr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:w(y.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.items.length," article",y.items.length>1?"s":""]})]}),i.jsx(F,{asChild:!0,children:i.jsxs(be,{to:`/order/${y.id}`,children:["Détails",i.jsx(mi,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[y.items.slice(0,4).map((x,_)=>i.jsx("div",{className:"flex-shrink-0",children:x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Jt,{className:"w-6 h-6 text-muted-foreground"})})},_)),y.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",y.items.length-4]})})]})]})},y.id))})}),i.jsx(Ut,{value:"active",className:"space-y-4",children:p().filter(y=>["pending","processing","shipped"].includes(y.status)).length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(dn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande en cours"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes en cours de traitement."})]}):i.jsx("div",{className:"space-y-4",children:p().filter(y=>["pending","processing","shipped"].includes(y.status)).map(y=>i.jsx(Y,{className:"hover:shadow-md transition-shadow",children:i.jsxs(Q,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",y.id.slice(0,8)]}),v(y.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(Us,{className:"w-3 h-3"}),Pn(new Date(y.createdAt),"dd MMMM yyyy",{locale:sr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:w(y.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.items.length," article",y.items.length>1?"s":""]})]}),i.jsx(F,{asChild:!0,children:i.jsxs(be,{to:`/order/${y.id}`,children:["Détails",i.jsx(mi,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[y.items.slice(0,4).map((x,_)=>i.jsx("div",{className:"flex-shrink-0",children:x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Jt,{className:"w-6 h-6 text-muted-foreground"})})},_)),y.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",y.items.length-4]})})]})]})},y.id))})}),i.jsx(Ut,{value:"completed",className:"space-y-4",children:p().filter(y=>y.status==="delivered").length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(xt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande terminée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore de commandes livrées."})]}):i.jsx("div",{className:"space-y-4",children:p().filter(y=>y.status==="delivered").map(y=>i.jsx(Y,{className:"hover:shadow-md transition-shadow",children:i.jsxs(Q,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",y.id.slice(0,8)]}),v(y.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(Us,{className:"w-3 h-3"}),Pn(new Date(y.createdAt),"dd MMMM yyyy",{locale:sr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:w(y.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.items.length," article",y.items.length>1?"s":""]})]}),i.jsx(F,{asChild:!0,children:i.jsxs(be,{to:`/order/${y.id}`,children:["Détails",i.jsx(mi,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[y.items.slice(0,4).map((x,_)=>i.jsx("div",{className:"flex-shrink-0",children:x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Jt,{className:"w-6 h-6 text-muted-foreground"})})},_)),y.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",y.items.length-4]})})]})]})},y.id))})}),i.jsx(Ut,{value:"cancelled",className:"space-y-4",children:p().filter(y=>y.status==="cancelled").length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Pu,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande annulée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes annulées."})]}):i.jsx("div",{className:"space-y-4",children:p().filter(y=>y.status==="cancelled").map(y=>i.jsx(Y,{className:"hover:shadow-md transition-shadow",children:i.jsxs(Q,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",y.id.slice(0,8)]}),v(y.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(Us,{className:"w-3 h-3"}),Pn(new Date(y.createdAt),"dd MMMM yyyy",{locale:sr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:w(y.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.items.length," article",y.items.length>1?"s":""]})]}),i.jsx(F,{asChild:!0,children:i.jsxs(be,{to:`/order/${y.id}`,children:["Détails",i.jsx(mi,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[y.items.slice(0,4).map((x,_)=>i.jsx("div",{className:"flex-shrink-0",children:x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Jt,{className:"w-6 h-6 text-muted-foreground"})})},_)),y.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",y.items.length-4]})})]})]})},y.id))})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6",children:[i.jsx(Jt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos commandes"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder à l'historique de vos commandes"}),i.jsx(F,{onClick:()=>s("/auth"),children:"Se connecter"})]})})})},rde=()=>{var d,h;const{orderId:t}=v1(),{getOrderById:e}=HN(),[n,r]=g.useState(null),[s,a]=g.useState(!0);g.useEffect(()=>{(async()=>{if(t)try{a(!0);const p=await e(t);r(p)}catch(p){console.error("Error loading order:",p)}finally{a(!1)}})()},[t,e]);const o=m=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(m),l=m=>({card:"Carte bancaire",paypal:"PayPal",transfer:"Virement bancaire",cash:"Paiement à la livraison"})[m]||m,c=()=>{const m=new Date,p=new Date(m);return p.setDate(m.getDate()+3),Pn(p,"EEEE d MMMM",{locale:sr})},u=()=>{navigator.clipboard.writeText(t||""),te.success("Numéro de commande copié !")};return s?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx("div",{className:"max-w-3xl mx-auto",children:i.jsxs("div",{className:"animate-pulse space-y-4",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mx-auto"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),i.jsx("div",{className:"h-32 bg-muted rounded"}),i.jsx("div",{className:"h-64 bg-muted rounded"})]})})}):n?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(xt,{className:"w-8 h-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Commande confirmée !"}),i.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre commande. Vous recevrez un email de confirmation à ",n.shipping.email,"."]})]}),i.jsxs(Y,{className:"mb-6",children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Jt,{className:"w-5 h-5"}),"Détails de la commande"]}),i.jsx(Ie,{className:"bg-green-100 text-green-800 border-green-200",children:n.status==="pending"?"En attente":n.status==="processing"?"En traitement":n.status==="shipped"?"Expédiée":n.status==="delivered"?"Livrée":"Confirmée"})]})}),i.jsx(Q,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Numéro de commande"}),i.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t,i.jsx(F,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:u,children:i.jsx(PD,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),i.jsx("p",{className:"font-medium",children:Pn(new Date(n.createdAt),"dd/MM/yyyy")})]})]}),i.jsx(ms,{}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Articles"}),i.jsx("div",{className:"space-y-3",children:n.items.map((m,p)=>i.jsxs("div",{className:"flex items-center gap-3",children:[m.image&&i.jsx("img",{src:m.image,alt:m.name,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:m.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",m.quantity]})]}),i.jsx("p",{className:"font-semibold",children:o(m.price*m.quantity)})]},p))})]}),i.jsx(ms,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),i.jsx("span",{children:o(n.total)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Livraison"}),i.jsx("span",{className:"text-green-600",children:"Gratuite"})]}),i.jsxs("div",{className:"flex justify-between font-bold",children:[i.jsx("span",{children:"Total"}),i.jsx("span",{children:o(n.total)})]})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-base",children:[i.jsx(Dx,{className:"w-4 h-4"}),"Livraison"]})}),i.jsx(Q,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:n.shipping.fullName}),i.jsx("p",{children:n.shipping.address}),i.jsxs("p",{children:[n.shipping.postalCode," ",n.shipping.city,", ",n.shipping.country]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:n.shipping.phone}),i.jsx("div",{className:"pt-2 mt-2 border-t",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Us,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{children:["Livraison estimée: ",c()]})]})})]})})]}),i.jsxs(Y,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-base",children:[i.jsx(vn,{className:"w-4 h-4"}),"Paiement"]})}),i.jsx(Q,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:l(n.payment.method)}),n.payment.method==="card"&&((d=n.payment.details)==null?void 0:d.cardNumber)&&i.jsxs("p",{children:["Carte se terminant par ",n.payment.details.cardNumber.slice(-4)]}),n.payment.method==="paypal"&&((h=n.payment.details)==null?void 0:h.paypalEmail)&&i.jsx("p",{children:n.payment.details.paypalEmail}),n.payment.method==="transfer"&&i.jsxs(kt,{className:"mt-2",children:[i.jsx(hn,{className:"h-4 w-4"}),i.jsx(Tt,{children:"Veuillez effectuer le virement dans les 48h pour valider votre commande."})]}),i.jsx("div",{className:"pt-2 mt-2 border-t",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(dn,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{children:["Statut: ",n.status==="pending"?"En attente":"Confirmé"]})]})})]})})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(F,{variant:"outline",className:"flex-1",asChild:!0,children:i.jsxs(be,{to:"/orders",children:[i.jsx(Jt,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),i.jsxs(F,{variant:"outline",className:"flex-1",children:[i.jsx(ws,{className:"mr-2 h-4 w-4"}),"Télécharger la facture"]}),i.jsx(F,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:i.jsxs(be,{to:"/listings",children:[i.jsx(bl,{className:"mr-2 h-4 w-4"}),"Continuer mes achats"]})})]}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("p",{className:"text-muted-foreground mb-2",children:"Besoin d'aide avec votre commande ?"}),i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsxs(F,{variant:"link",className:"text-primary",children:[i.jsx(ar,{className:"mr-2 h-4 w-4"}),"Contacter le support"]}),i.jsxs(F,{variant:"link",className:"text-primary",children:[i.jsx($l,{className:"mr-2 h-4 w-4"}),"FAQ"]})]})]})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(Y,{children:i.jsxs(Q,{className:"pt-6",children:[i.jsx(hn,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Commande introuvable"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Nous n'avons pas pu trouver les détails de cette commande."}),i.jsx(F,{asChild:!0,children:i.jsx(be,{to:"/orders",children:"Voir mes commandes"})})]})})})},sde=({id:t,name:e,description:n,price:r,currency:s,image:a,mode:o})=>{const{currentUser:l}=Zt(),{addToCart:c}=dd(),u=Mn(),d=(p,v)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:v}).format(p),h=()=>{if(!l){te.error("Veuillez vous connecter pour ajouter au panier"),u("/auth");return}c({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t})},m=()=>{if(!l){te.error("Veuillez vous connecter pour acheter"),u("/auth");return}c({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t}),u("/checkout")};return i.jsxs(Y,{className:"overflow-hidden transition-all hover:shadow-lg",children:[i.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a?i.jsx("img",{src:a,alt:e,className:"w-full h-full object-cover transition-transform hover:scale-105"}):i.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:i.jsx(GY,{className:"w-12 h-12 text-muted-foreground"})}),i.jsx(Ie,{className:"absolute top-2 right-2 bg-primary",children:o==="subscription"?"Abonnement":"Achat unique"})]}),i.jsxs(Pe,{children:[i.jsx(Re,{children:e}),i.jsx(at,{children:n})]}),i.jsx(Q,{children:i.jsxs("div",{className:"text-2xl font-bold text-primary",children:[d(r,s),o==="subscription"&&i.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/mois"})]})}),i.jsxs(FO,{className:"flex gap-2",children:[i.jsxs(F,{variant:"outline",className:"flex-1",onClick:h,children:[i.jsx(jo,{className:"w-4 h-4 mr-2"}),"Ajouter"]}),i.jsx(F,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",onClick:m,children:"Acheter"})]})]})},l_=[{id:"prod_ST3q24zsLbS28p",name:"Bicyclette",description:"Vélo",priceId:"price_1RY7iN2XLhzYQhT9ErigqaGg",price:10,currency:"EUR",mode:"payment",image:"https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"}],ide=t=>l_.find(e=>e.priceId===t),$6="pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p";ML($6);const ade={isConfigured:!0,key:`${$6.substring(0,8)}...`};async function ode(){return{customer_id:"cus_mock123",subscription_id:"sub_mock123",subscription_status:"active",price_id:"price_1RY7iN2XLhzYQhT9ErigqaGg",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"}}async function lde(){return[{order_id:"ord_mock123",checkout_session_id:"cs_mock123",payment_intent_id:"pi_mock123",amount_subtotal:1e3,amount_total:1e3,currency:"eur",payment_status:"paid",order_status:"completed",order_date:new Date().toISOString()}]}const cde=()=>{const{getCartItemCount:t}=dd(),e=Mn(),n=t();return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(F,{variant:"ghost",onClick:()=>e(-1),className:"-ml-4",children:[i.jsx(sa,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(bl,{className:"w-8 h-8"}),"Boutique"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez nos produits et services"})]}),n>0&&i.jsxs(F,{onClick:()=>e("/cart"),className:"flex items-center gap-2",children:[i.jsx(jo,{className:"w-4 h-4"}),"Panier (",n,")"]})]})]}),!ade.isConfigured,i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l_.map(r=>i.jsx(sde,{id:r.id,name:r.name,description:r.description,price:r.price,currency:r.currency,image:r.image,mode:r.mode},r.id))}),l_.length===0&&i.jsx(Y,{className:"text-center py-12",children:i.jsxs(Q,{className:"pt-6",children:[i.jsx(Jt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit disponible"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Revenez bientôt pour découvrir nos nouveaux produits."})]})})]})},ude=()=>{const[t]=x1(),e=Mn(),{currentUser:n}=Zt(),{clearCart:r}=dd(),[s,a]=g.useState(!0),[o,l]=g.useState(null),[c,u]=g.useState(null),[d,h]=g.useState(null),m=t.get("session_id"),p=t.get("type")==="subscription";g.useEffect(()=>{r();async function w(){if(n)try{if(a(!0),p){const y=await ode();l(y)}else{const x=(await lde())[0];u(x)}}catch(y){console.error("Error fetching checkout result:",y),h("Impossible de charger les détails de votre achat")}finally{a(!1)}}const b=setTimeout(()=>{w()},2e3);return()=>clearTimeout(b)},[n,p,m,r]);const v=()=>{if(p&&(o!=null&&o.price_id)){const w=ide(o.price_id);return w?w.name:"Abonnement"}else if(c)return"Commande";return"Achat"};return n?s?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto text-center",children:[i.jsx(Hr,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement de votre paiement..."}),i.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous confirmons votre transaction."})]})}):d?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs(kt,{className:"border-red-200 bg-red-50",children:[i.jsx(hn,{className:"h-4 w-4 text-red-600"}),i.jsx(Tt,{className:"text-red-800",children:d})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx(F,{asChild:!0,children:i.jsx(be,{to:"/",children:"Retour à l'accueil"})})})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(xt,{className:"w-8 h-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Merci pour votre achat !"}),i.jsxs("p",{className:"text-muted-foreground",children:["Votre ",p?"abonnement":"commande"," a été confirmé",p?"":"e","."]})]}),i.jsxs(Y,{className:"mb-6",children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[p?i.jsx(vn,{className:"w-5 h-5"}):i.jsx(Jt,{className:"w-5 h-5"}),v()]})}),i.jsx(Q,{children:i.jsx("div",{className:"space-y-4",children:p&&o?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),i.jsx("span",{className:"font-medium",children:o.subscription_status==="active"?"Actif":o.subscription_status==="trialing"?"Période d'essai":o.subscription_status})]}),o.current_period_end&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Prochain renouvellement:"}),i.jsx("span",{className:"font-medium",children:new Date(o.current_period_end*1e3).toLocaleDateString("fr-FR")})]}),o.payment_method_brand&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Méthode de paiement:"}),i.jsxs("span",{className:"font-medium",children:[o.payment_method_brand.toUpperCase()," •••• ",o.payment_method_last4]})]})]}):c?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Numéro de commande:"}),i.jsx("span",{className:"font-medium",children:c.order_id})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Date:"}),i.jsx("span",{className:"font-medium",children:new Date(c.order_date).toLocaleDateString("fr-FR")})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Montant:"}),i.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:c.currency}).format(c.amount_total/100)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),i.jsx("span",{className:"font-medium",children:c.order_status==="completed"?"Complété":c.order_status==="pending"?"En attente":c.order_status})]})]}):i.jsx("p",{children:"Merci pour votre achat. Vous recevrez un email de confirmation."})})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(kt,{className:"bg-blue-50 border-blue-200",children:[i.jsx(Us,{className:"h-4 w-4 text-blue-600"}),i.jsx(Tt,{className:"text-blue-800",children:p?"Vous pouvez gérer votre abonnement à tout moment depuis votre compte.":"Vous recevrez un email de confirmation avec les détails de votre commande."})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx(F,{variant:"outline",className:"flex-1",asChild:!0,children:i.jsxs(be,{to:"/orders",children:[i.jsx(Jt,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),i.jsx(F,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:i.jsxs(be,{to:"/products",children:[i.jsx(bl,{className:"mr-2 h-4 w-4"}),"Continuer mes achats",i.jsx($l,{className:"ml-2 h-4 w-4"})]})})]})]})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs(kt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(hn,{className:"h-4 w-4 text-orange-600"}),i.jsx(Tt,{className:"text-orange-800",children:"Vous devez être connecté pour voir les détails de votre achat."})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx(F,{onClick:()=>e("/auth"),children:"Se connecter"})})]})})},dde=[{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"},{value:"donations",label:"Dons"},{value:"exchange",label:"Troc"}],hde=()=>{const{id:t}=v1(),e=Mn(),{currentUser:n}=Zt(),{fetchListingById:r,updateListing:s,currentListing:a,loading:o}=vm(),[l,c]=g.useState({title:"",description:"",price:"",images:[]}),[u,d]=g.useState([]),[h,m]=g.useState(!1),[p,v]=g.useState(null),[w,b]=g.useState(""),[y,x]=g.useState([]),[_,E]=g.useState("");g.useEffect(()=>{t&&r(t)},[t,r]),g.useEffect(()=>{var T;a&&(c({title:a.title||"",description:a.description||"",price:((T=a.price)==null?void 0:T.toString())||"",images:a.images||[]}),b(a.category||""),x(a.tags||[]))},[a]);const S=T=>{c({...l,[T.target.name]:T.target.value})},D=T=>{if(!T.target.files)return;const C=Array.from(T.target.files);d(V=>[...V,...C])},I=T=>{c({...l,images:l.images.filter((C,V)=>V!==T)})},A=T=>{d(u.filter((C,V)=>V!==T))},R=()=>{_.trim()&&!y.includes(_.trim())&&y.length<5&&(x([...y,_.trim()]),E(""))},N=T=>{x(y.filter(C=>C!==T))},P=async T=>{if(T.preventDefault(),!(!t||!n)){m(!0);try{let C=[];u.length>0&&(C=await Promise.all(u.map(z=>fde(z,n.uid))));const V=[...l.images,...C];await s(t,{...l,price:parseFloat(l.price),images:V,category:w,tags:y}),e(`/listing/${t}`)}catch{v("Erreur lors de la mise à jour de l'annonce")}finally{m(!1)}}};return o?i.jsx("div",{children:"Chargement..."}):a?p?i.jsx("div",{className:"text-red-500",children:p}):i.jsx("form",{onSubmit:P,className:"max-w-lg mx-auto mt-10",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[i.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Modifier mon annonce"}),i.jsxs("div",{className:"mb-5",children:[i.jsx(he,{htmlFor:"title",className:"block mb-1 text-gray-700",children:"Titre"}),i.jsx(_e,{id:"title",name:"title",value:l.title,onChange:S,placeholder:"Titre",className:"w-full"})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(he,{htmlFor:"description",className:"block mb-1 text-gray-700",children:"Description"}),i.jsx(_s,{id:"description",name:"description",value:l.description,onChange:S,placeholder:"Description",className:"w-full",rows:4})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(he,{htmlFor:"price",className:"block mb-1 text-gray-700",children:"Prix (€)"}),i.jsx(_e,{id:"price",name:"price",value:l.price,onChange:S,placeholder:"Prix",type:"number",min:0,className:"w-full"})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(he,{htmlFor:"category",className:"block mb-1 text-gray-700",children:"Catégorie"}),i.jsxs("select",{id:"category",name:"category",value:w,onChange:T=>b(T.target.value),className:"w-full border rounded px-3 py-2 bg-gray-50",required:!0,children:[i.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),dde.map(T=>i.jsx("option",{value:T.value,children:T.label},T.value))]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(he,{className:"block mb-1 text-gray-700",children:"Tags (max 5)"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:y.map(T=>i.jsxs("span",{className:"bg-gray-100 rounded px-2 py-1 flex items-center gap-1 text-sm",children:[T,i.jsx(F,{type:"button",size:"icon",variant:"ghost",className:"w-4 h-4 p-0",onClick:()=>N(T),children:"×"})]},T))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(_e,{placeholder:"Ajouter un tag...",value:_,onChange:T=>E(T.target.value),onKeyDown:T=>T.key==="Enter"&&(T.preventDefault(),R()),className:"flex-1"}),i.jsx(F,{type:"button",onClick:R,disabled:!_.trim()||y.length>=5,children:"Ajouter"})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx(he,{className:"block mb-1 text-gray-700",children:"Photos"}),i.jsxs("div",{className:"flex flex-wrap gap-4 mt-2",children:[l.images.map((T,C)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:T,alt:`photo-${C}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),i.jsx(F,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>I(C),children:"×"})]},C)),u.map((T,C)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:URL.createObjectURL(T),alt:`new-photo-${C}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),i.jsx(F,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>A(C),children:"×"})]},C)),i.jsxs("label",{className:"w-20 h-20 flex items-center justify-center border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition",children:[i.jsx("span",{className:"text-2xl text-gray-400",children:"+"}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:D,disabled:h})]})]})]}),i.jsx(F,{type:"submit",className:"w-full",disabled:h,children:h?"Enregistrement...":"Enregistrer les modifications"}),p&&i.jsx("div",{className:"text-red-500 text-center mt-2",children:p})]})}):i.jsx("div",{className:"text-red-500",children:"Annonce introuvable"})};async function fde(t,e){const n=Date.now(),r=`listings/${e}/${n}_${t.name}`,s=Sh(Ch,r),a=await Z4(s,t);return await rv(a.ref)}const mde=()=>{const[t,e]=g.useState([]),[n,r]=g.useState(!0),[s,a]=g.useState(""),[o,l]=g.useState({type:"",contract:"",level:"",city:"",remote:""}),c=[{id:"1",title:"Développeur Frontend React - Stage",company:"TechStart Paris",description:"Rejoins notre équipe pour développer des interfaces modernes avec React et TypeScript. Formation et mentoring assurés.",type:"stage",contract:"stage",salary:{min:600,max:800,period:"month"},location:{city:"Paris",remote:!0,university:"Sorbonne Université"},requirements:{level:"master",experience:"Débutant accepté",skills:["React","TypeScript","CSS"]},schedule:{hours:"35h/semaine",flexible:!0},contact:{email:"stage@techstart.fr",website:"techstart.fr"},postedAt:new Date,deadline:new Date("2025-02-28")},{id:"2",title:"Cours particuliers Mathématiques",company:"Particulier",description:"Recherche étudiant en Master Maths pour donner des cours à domicile niveau lycée.",type:"cours-particuliers",contract:"freelance",salary:{min:20,max:25,period:"hour"},location:{city:"Paris 16e",remote:!1},requirements:{level:"master",experience:"Première expérience souhaitée",skills:["Mathématiques","Pédagogie"]},schedule:{hours:"2h/semaine",flexible:!0},contact:{email:"marie.martin@example.com",phone:"06.12.34.56.78"},postedAt:new Date,deadline:new Date("2025-01-30")},{id:"3",title:"Assistant Marketing Digital",company:"Agence Digital Plus",description:"Job étudiant flexible. Gestion réseaux sociaux et création de contenu pour nos clients.",type:"job-etudiant",contract:"cdd",salary:{min:12,max:15,period:"hour"},location:{city:"Lyon",remote:!0},requirements:{level:"licence",experience:"Débutant accepté",skills:["Réseaux sociaux","Canva","Communication"]},schedule:{hours:"15h/semaine",flexible:!0},contact:{email:"recrutement@digitalplus.fr"},postedAt:new Date}];g.useEffect(()=>{(async()=>{r(!0);try{s||Object.keys(o).length>0,setTimeout(()=>{e(c),r(!1)},1e3)}catch(w){console.error("Erreur recherche emplois:",w),r(!1)}})()},[s,o]);const u=v=>{a(v)},d=(v,w)=>{l(b=>({...b,[v]:w}))},h=v=>{switch(v){case"stage":return i.jsx(ji,{className:"w-4 h-4"});case"job-etudiant":return i.jsx(kh,{className:"w-4 h-4"});case"cours-particuliers":return i.jsx(ji,{className:"w-4 h-4"});case"babysitting":return i.jsx(kh,{className:"w-4 h-4"});default:return i.jsx(kh,{className:"w-4 h-4"})}},m=v=>{switch(v){case"stage":return"bg-blue-100 text-blue-800";case"job-etudiant":return"bg-green-100 text-green-800";case"cours-particuliers":return"bg-purple-100 text-purple-800";case"babysitting":return"bg-pink-100 text-pink-800";case"freelance":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},p=v=>{const{min:w,max:b,period:y}=v,x=y==="hour"?"/h":y==="month"?"/mois":"/an";return w===b?`${w}€${x}`:`${w}-${b}€${x}`};return i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Jobs & Stages étudiants"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Trouvez l'opportunité parfaite compatible avec vos études"})]}),i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(An,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx(_e,{type:"text",placeholder:"Rechercher par poste, entreprise, compétences...",value:s,onChange:v=>u(v.target.value),className:"pl-10 py-3 text-lg"})]})}),i.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-5 gap-4",children:[i.jsxs(mt,{onValueChange:v=>d("type",v),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Type d'emploi"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"stage",children:"Stages"}),i.jsx(de,{value:"job-etudiant",children:"Jobs étudiants"}),i.jsx(de,{value:"cours-particuliers",children:"Cours particuliers"}),i.jsx(de,{value:"babysitting",children:"Baby-sitting"}),i.jsx(de,{value:"freelance",children:"Freelance"})]})]}),i.jsxs(mt,{onValueChange:v=>d("level",v),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Niveau d'études"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"tous-niveaux",children:"Tous niveaux"}),i.jsx(de,{value:"licence",children:"Licence"}),i.jsx(de,{value:"master",children:"Master"}),i.jsx(de,{value:"doctorat",children:"Doctorat"})]})]}),i.jsx(_e,{type:"text",placeholder:"Ville",value:o.city,onChange:v=>d("city",v.target.value)}),i.jsxs(mt,{onValueChange:v=>d("remote",v),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Modalité"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"true",children:"Télétravail"}),i.jsx(de,{value:"false",children:"Présentiel"})]})]}),i.jsxs(mt,{onValueChange:v=>d("contract",v),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Contrat"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"stage",children:"Stage"}),i.jsx(de,{value:"cdd",children:"CDD"}),i.jsx(de,{value:"freelance",children:"Freelance"}),i.jsx(de,{value:"interim",children:"Intérim"})]})]})]}),n?i.jsx("div",{className:"space-y-4",children:[...Array(5)].map((v,w)=>i.jsx(Y,{className:"animate-pulse",children:i.jsxs(Q,{className:"p-6",children:[i.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})},w))}):i.jsx("div",{className:"space-y-4",children:t.map(v=>i.jsx(Y,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:i.jsxs(Q,{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"text-xl font-semibold",children:v.title}),i.jsxs(Ie,{className:m(v.type),children:[h(v.type),i.jsx("span",{className:"ml-1 capitalize",children:v.type.replace("-"," ")})]})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium mb-2",children:v.company}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 line-clamp-2",children:v.description})]}),i.jsxs("div",{className:"text-right ml-4",children:[i.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:p(v.salary)}),i.jsx("div",{className:"text-sm text-gray-500",children:v.schedule.hours})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 text-sm text-gray-600 dark:text-gray-400",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(qn,{className:"w-4 h-4 mr-1"}),v.location.city,v.location.remote&&i.jsx(Ie,{variant:"secondary",className:"ml-2 text-xs",children:"Télétravail possible"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(ji,{className:"w-4 h-4 mr-1"}),v.requirements.level]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(dn,{className:"w-4 h-4 mr-1"}),"Publié il y a ",Math.floor((Date.now()-v.postedAt.getTime())/(1e3*60*60*24))," jours"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[v.requirements.skills.slice(0,4).map((w,b)=>i.jsx(Ie,{variant:"outline",className:"text-xs",children:w},b)),v.requirements.skills.length>4&&i.jsxs(Ie,{variant:"outline",className:"text-xs",children:["+",v.requirements.skills.length-4," autres"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-sm text-gray-500",children:v.deadline&&i.jsxs("span",{children:["Candidature avant le ",v.deadline.toLocaleDateString("fr-FR")]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(F,{variant:"outline",size:"sm",children:"Sauvegarder"}),i.jsx(F,{size:"sm",children:"Postuler"})]})]})]})},v.id))})]})})},pde=()=>{const[t,e]=g.useState([]),[n,r]=g.useState(!0),[s,a]=g.useState(""),[o,l]=g.useState({type:"",minPrice:"",maxPrice:"",university:"",furnished:""}),c=[{id:"1",title:"Studio proche Sorbonne",description:"Joli studio meublé à 5min à pied de la Sorbonne. Parfait pour étudiant.",price:650,type:"studio",location:{address:"12 rue de la Sorbonne",city:"Paris",university:"Sorbonne Université",distance:.3},features:{rooms:1,surface:25,furnished:!0,charges:!0},images:["/api/placeholder/400/300"],contact:{name:"Marie D.",email:"marie.d@example.com"},availability:new Date("2025-02-01"),createdAt:new Date},{id:"2",title:"Chambre en colocation - Dauphine",description:"Chambre dans coloc sympa avec 3 autres étudiants. Cuisine équipée.",price:480,type:"colocation",location:{address:"45 avenue de Neuilly",city:"Paris",university:"Université Paris-Dauphine",distance:.8},features:{rooms:1,surface:15,furnished:!0,charges:!0},images:["/api/placeholder/400/300"],contact:{name:"Thomas L.",email:"thomas.l@example.com"},availability:new Date("2025-01-20"),createdAt:new Date}];g.useEffect(()=>{(async()=>{r(!0);try{s||Object.keys(o).length>0,setTimeout(()=>{e(c),r(!1)},1e3)}catch(v){console.error("Erreur recherche logements:",v),r(!1)}})()},[s,o]);const u=p=>{a(p)},d=(p,v)=>{l(w=>({...w,[p]:v}))},h=p=>{switch(p){case"studio":return i.jsx(ui,{className:"w-4 h-4"});case"appartement":return i.jsx(ui,{className:"w-4 h-4"});case"chambre":return i.jsx(ui,{className:"w-4 h-4"});case"colocation":return i.jsx(sd,{className:"w-4 h-4"});default:return i.jsx(ui,{className:"w-4 h-4"})}},m=p=>{switch(p){case"studio":return"bg-blue-100 text-blue-800";case"appartement":return"bg-green-100 text-green-800";case"chambre":return"bg-purple-100 text-purple-800";case"colocation":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Logements étudiants"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Trouvez le logement parfait près de votre campus"})]}),i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(An,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx(_e,{type:"text",placeholder:"Rechercher par ville, université, quartier...",value:s,onChange:p=>u(p.target.value),className:"pl-10 py-3 text-lg"})]})}),i.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-5 gap-4",children:[i.jsxs(mt,{onValueChange:p=>d("type",p),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Type de logement"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"studio",children:"Studio"}),i.jsx(de,{value:"appartement",children:"Appartement"}),i.jsx(de,{value:"chambre",children:"Chambre"}),i.jsx(de,{value:"colocation",children:"Colocation"})]})]}),i.jsx(_e,{type:"number",placeholder:"Prix min (€)",value:o.minPrice,onChange:p=>d("minPrice",p.target.value)}),i.jsx(_e,{type:"number",placeholder:"Prix max (€)",value:o.maxPrice,onChange:p=>d("maxPrice",p.target.value)}),i.jsxs(mt,{onValueChange:p=>d("university",p),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Université"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"sorbonne",children:"Sorbonne Université"}),i.jsx(de,{value:"dauphine",children:"Paris-Dauphine"}),i.jsx(de,{value:"assas",children:"Panthéon-Assas"}),i.jsx(de,{value:"sciences-po",children:"Sciences Po"})]})]}),i.jsxs(mt,{onValueChange:p=>d("furnished",p),children:[i.jsx(ct,{children:i.jsx(pt,{placeholder:"Meublé"})}),i.jsxs(ut,{children:[i.jsx(de,{value:"true",children:"Meublé"}),i.jsx(de,{value:"false",children:"Non meublé"})]})]})]}),n?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((p,v)=>i.jsxs(Y,{className:"animate-pulse",children:[i.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg"}),i.jsxs(Q,{className:"p-4",children:[i.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},v))}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>i.jsxs(Y,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:p.images[0],alt:p.title,className:"w-full h-48 object-cover rounded-t-lg"}),i.jsxs(Ie,{className:`absolute top-3 left-3 ${m(p.type)}`,children:[h(p.type),i.jsx("span",{className:"ml-1 capitalize",children:p.type})]})]}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2",children:p.title}),i.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400 mb-2",children:[i.jsx(qn,{className:"w-4 h-4 mr-1"}),i.jsxs("span",{className:"text-sm",children:[p.location.city," • ",p.location.distance,"km du campus"]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center text-primary font-bold text-xl",children:[i.jsx(ff,{className:"w-5 h-5 mr-1"}),p.price,i.jsx("span",{className:"text-sm font-normal text-gray-500 ml-1",children:"/mois"})]}),i.jsxs("span",{className:"text-sm text-gray-500",children:[p.features.surface,"m²"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[p.features.furnished&&i.jsx(Ie,{variant:"secondary",className:"text-xs",children:"Meublé"}),p.features.charges&&i.jsx(Ie,{variant:"secondary",className:"text-xs",children:"Charges comprises"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-500",children:["Disponible le ",p.availability.toLocaleDateString("fr-FR")]}),i.jsx(F,{size:"sm",children:"Contacter"})]})]})]},p.id))}),!n&&t.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ui,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Aucun logement trouvé"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Essayez de modifier vos critères de recherche"})]}),i.jsx("div",{className:"mt-12 text-center",children:i.jsx(Y,{className:"bg-gradient-to-r from-primary/10 to-secondary/10 border-primary/20",children:i.jsxs(Q,{className:"p-6",children:[i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Vous proposez un logement ?"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Publiez votre annonce gratuitement et touchez des milliers d'étudiants"}),i.jsx(F,{size:"lg",children:"Publier une annonce logement"})]})})})]})})},gde="modulepreload",vde=function(t){return"/StudyMarket/"+t},wT={},Em=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=vde(c),c in wT)return;wT[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":gde,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},xde=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Em(async()=>{const{default:r}=await Promise.resolve().then(()=>gd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class GN extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class yde extends GN{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class wde extends GN{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class bde extends GN{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var c_;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(c_||(c_={}));var _de=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class jde{constructor(e,{headers:n={},customFetch:r,region:s=c_.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=xde(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return _de(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=n;let l={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(v=>{throw new yde(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new wde(d);if(!d.ok)throw new bde(d);let m=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return m==="application/json"?p=yield d.json():m==="application/octet-stream"?p=yield d.blob():m==="text/event-stream"?p=d:m==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var Ir={},KN={},hy={},Cm={},fy={},my={},Nde=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hu=Nde();const Sde=Hu.fetch,U6=Hu.fetch.bind(Hu),z6=Hu.Headers,Ede=Hu.Request,Cde=Hu.Response,gd=Object.freeze(Object.defineProperty({__proto__:null,Headers:z6,Request:Ede,Response:Cde,default:U6,fetch:Sde},Symbol.toStringTag,{value:"Module"})),kde=LV(gd);var py={};Object.defineProperty(py,"__esModule",{value:!0});let Tde=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};py.default=Tde;var B6=js&&js.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(my,"__esModule",{value:!0});const Ide=B6(kde),Ade=B6(py);let Pde=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ide.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let u=null,d=null,h=null,m=a.status,p=a.statusText;if(a.ok){if(this.method!=="HEAD"){const y=await a.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=y:d=JSON.parse(y))}const w=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const w=await a.text();try{u=JSON.parse(w),Array.isArray(u)&&a.status===404&&(d=[],u=null,m=200,p="OK")}catch{a.status===404&&w===""?(m=204,p="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,p="OK"),u&&this.shouldThrowOnError)throw new Ade.default(u)}return{error:u,data:d,count:h,status:m,statusText:p}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};my.default=Pde;var Rde=js&&js.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fy,"__esModule",{value:!0});const Dde=Rde(my);let Mde=class extends Dde.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};fy.default=Mde;var Ode=js&&js.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cm,"__esModule",{value:!0});const Lde=Ode(fy);let Vde=class extends Lde.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Cm.default=Vde;var Fde=js&&js.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hy,"__esModule",{value:!0});const Kd=Fde(Cm);let $de=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Kd.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Kd.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Kd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Kd.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Kd.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};hy.default=$de;var gy={},vy={};Object.defineProperty(vy,"__esModule",{value:!0});vy.version=void 0;vy.version="0.0.0-automated";Object.defineProperty(gy,"__esModule",{value:!0});gy.DEFAULT_HEADERS=void 0;const Ude=vy;gy.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Ude.version}`};var q6=js&&js.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(KN,"__esModule",{value:!0});const zde=q6(hy),Bde=q6(Cm),qde=gy;let Wde=class W6{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},qde.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new zde.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new W6(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=n);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new Bde.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};KN.default=Wde;var vd=js&&js.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.PostgrestError=Ir.PostgrestBuilder=Ir.PostgrestTransformBuilder=Ir.PostgrestFilterBuilder=Ir.PostgrestQueryBuilder=Ir.PostgrestClient=void 0;const H6=vd(KN);Ir.PostgrestClient=H6.default;const G6=vd(hy);Ir.PostgrestQueryBuilder=G6.default;const K6=vd(Cm);Ir.PostgrestFilterBuilder=K6.default;const Y6=vd(fy);Ir.PostgrestTransformBuilder=Y6.default;const Q6=vd(my);Ir.PostgrestBuilder=Q6.default;const J6=vd(py);Ir.PostgrestError=J6.default;var Hde=Ir.default={PostgrestClient:H6.default,PostgrestQueryBuilder:G6.default,PostgrestFilterBuilder:K6.default,PostgrestTransformBuilder:Y6.default,PostgrestBuilder:Q6.default,PostgrestError:J6.default};const{PostgrestClient:Gde,PostgrestQueryBuilder:ume,PostgrestFilterBuilder:dme,PostgrestTransformBuilder:hme,PostgrestBuilder:fme,PostgrestError:mme}=Hde;let u_;typeof window>"u"?u_=require("ws"):u_=window.WebSocket;const Kde=u_,Yde="2.11.10",Qde={"X-Client-Info":`realtime-js/${Yde}`},Jde="1.0.0",X6=1e4,Xde=1e3;var pu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(pu||(pu={}));var mr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(mr||(mr={}));var Vs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vs||(Vs={}));var d_;(function(t){t.websocket="websocket"})(d_||(d_={}));var ol;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ol||(ol={}));class Zde{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Z6{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ot||(Ot={}));const bT=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,o)=>(a[o]=ehe(o,t,e,s),a),{})},ehe=(t,e,n,r)=>{const s=e.find(l=>l.name===t),a=s==null?void 0:s.type,o=n[t];return a&&!r.includes(a)?eV(a,o):h_(o)},eV=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return she(e,n)}switch(t){case Ot.bool:return the(e);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return nhe(e);case Ot.json:case Ot.jsonb:return rhe(e);case Ot.timestamp:return ihe(e);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:return h_(e);default:return h_(e)}},h_=t=>t,the=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},nhe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},rhe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},she=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const o=t.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>eV(e,l))}return t},ihe=t=>typeof t=="string"?t.replace(" ","T"):t,tV=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Z0{constructor(e,n,r={},s=X6){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _T;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(_T||(_T={}));class Ah{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ah.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=Ah.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ah.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),o=this.transformState(n),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const m=d.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),v=d.filter(b=>p.indexOf(b.presence_ref)<0),w=h.filter(b=>m.indexOf(b.presence_ref)<0);v.length>0&&(l[u]=v),w.length>0&&(c[u]=w)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(p=>p.presence_ref),m=d.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...m)}r(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jT;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(jT||(jT={}));var NT;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(NT||(NT={}));var Wi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Wi||(Wi={}));class YN{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=mr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Z0(this,Vs.join,this.params,this.timeout),this.rejoinTimer=new Z6(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=mr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vs.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Ah(this),this.broadcastEndpointURL=tV(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(d=>e==null?void 0:e(Wi.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Wi.CLOSED));const c={},u={broadcast:a,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(Wi.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,p=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,v=[];for(let w=0;w<p;w++){const b=m[w],{filter:{event:y,schema:x,table:_,filter:E}}=b,S=d&&d[w];if(S&&S.event===y&&S.schema===x&&S.table===_&&S.filter===E)v.push(Object.assign(Object.assign({},b),{id:S.id}));else{this.unsubscribe(),this.state=mr.errored,e==null||e(Wi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Wi.SUBSCRIBED);return}}).receive("error",d=>{this.state=mr.errored,e==null||e(Wi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Wi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=mr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vs.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const s=new Z0(this,Vs.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Z0(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Vs;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,w,b;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(w=p.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(m,r)):(a=this.bindings[o])===null||a===void 0||a.filter(p=>{var v,w,b,y,x,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const E=p.id,S=(v=p.filter)===null||v===void 0?void 0:v.event;return E&&((w=n.ids)===null||w===void 0?void 0:w.includes(E))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const E=(x=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return E==="*"||E===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:w,table:b,commit_timestamp:y,type:x,errors:_}=v;m=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:y,eventType:x,new:{},old:{},errors:_}),this._getPayloadRecords(v))}p.callback(m,r)})}_isClosed(){return this.state===mr.closed}_isJoined(){return this.state===mr.joined}_isJoining(){return this.state===mr.joining}_isLeaving(){return this.state===mr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&YN.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vs.close,{},e)}_onError(e){this._on(Vs.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=bT(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=bT(e.columns,e.old_record)),n}}const ST=()=>{},ahe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ohe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Qde,this.params={},this.timeout=X6,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ST,this.ref=0,this.logger=ST,this.conn=null,this.sendBuffer=[],this.serializer=new Zde,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>Em(async()=>{const{default:c}=await Promise.resolve().then(()=>gd);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${d_.websocket}`,this.httpEndpoint=tV(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,o)=>o(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Z6(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Kde),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new lhe(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Jde}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case pu.connecting:return ol.Connecting;case pu.open:return ol.Open;case pu.closing:return ol.Closing;default:return ol.Closed}}isConnected(){return this.connectionState()===ol.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new YN(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:s,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Vs.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Xde,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:a,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vs.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([ahe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class lhe{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=pu.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class QN extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function On(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class che extends QN{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class f_ extends QN{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var uhe=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const nV=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Em(async()=>{const{default:r}=await Promise.resolve().then(()=>gd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},dhe=()=>uhe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Em(()=>Promise.resolve().then(()=>gd),void 0)).Response:Response}),m_=t=>{if(Array.isArray(t))return t.map(n=>m_(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=m_(r)}),e};var uc=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const ew=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hhe=(t,e,n)=>uc(void 0,void 0,void 0,function*(){const r=yield dhe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new che(ew(s),t.status||500))}).catch(s=>{e(new f_(ew(s),s))}):e(new f_(ew(t),t))}),fhe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function km(t,e,n,r,s,a){return uc(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,fhe(e,r,s,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>hhe(c,l,r))})})}function Lv(t,e,n,r){return uc(this,void 0,void 0,function*(){return km(t,"GET",e,n,r)})}function $a(t,e,n,r,s){return uc(this,void 0,void 0,function*(){return km(t,"POST",e,r,s,n)})}function mhe(t,e,n,r,s){return uc(this,void 0,void 0,function*(){return km(t,"PUT",e,r,s,n)})}function phe(t,e,n,r){return uc(this,void 0,void 0,function*(){return km(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function rV(t,e,n,r,s){return uc(this,void 0,void 0,function*(){return km(t,"DELETE",e,r,s,n)})}var Er=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const ghe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ET={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vhe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=nV(s)}uploadOrUpdate(e,n,r,s){return Er(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},ET),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(On(a))return{data:null,error:a};throw a}})}upload(e,n,r){return Er(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Er(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:ET.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),m=yield h.json();return h.ok?{data:{path:a,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(On(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Er(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield $a(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new QN("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(On(r))return{data:null,error:r};throw r}})}update(e,n,r){return Er(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Er(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Er(this,void 0,void 0,function*(){try{return{data:{path:(yield $a(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Er(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield $a(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Er(this,void 0,void 0,function*(){try{const s=yield $a(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}})}download(e,n){return Er(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Lv(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(On(l))return{data:null,error:l};throw l}})}info(e){return Er(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Lv(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:m_(r),error:null}}catch(r){if(On(r))return{data:null,error:r};throw r}})}exists(e){return Er(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield phe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(On(r)&&r instanceof f_){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return Er(this,void 0,void 0,function*(){try{return{data:yield rV(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(On(n))return{data:null,error:n};throw n}})}list(e,n,r){return Er(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},ghe),n),{prefix:e||""});return{data:yield $a(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const xhe="2.7.1",yhe={"X-Client-Info":`storage-js/${xhe}`};var Ec=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class whe{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},yhe),n),this.fetch=nV(r)}listBuckets(){return Ec(this,void 0,void 0,function*(){try{return{data:yield Lv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(On(e))return{data:null,error:e};throw e}})}getBucket(e){return Ec(this,void 0,void 0,function*(){try{return{data:yield Lv(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(On(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ec(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(On(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ec(this,void 0,void 0,function*(){try{return{data:yield mhe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(On(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ec(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(On(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ec(this,void 0,void 0,function*(){try{return{data:yield rV(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(On(n))return{data:null,error:n};throw n}})}}class bhe extends whe{constructor(e,n={},r){super(e,n,r)}from(e){return new vhe(this.url,this.headers,e,this.fetch)}}const _he="2.50.0";let ch="";typeof Deno<"u"?ch="deno":typeof document<"u"?ch="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ch="react-native":ch="node";const jhe={"X-Client-Info":`supabase-js-${ch}/${_he}`},Nhe={headers:jhe},She={schema:"public"},Ehe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Che={};var khe=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const The=t=>{let e;return t?e=t:typeof fetch>"u"?e=U6:e=fetch,(...n)=>e(...n)},Ihe=()=>typeof Headers>"u"?z6:Headers,Ahe=(t,e,n)=>{const r=The(n),s=Ihe();return(a,o)=>khe(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(a,Object.assign(Object.assign({},o),{headers:u}))})};var Phe=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};function Rhe(t){return t.endsWith("/")?t:t+"/"}function Dhe(t,e){var n,r;const{db:s,auth:a,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Phe(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const sV="2.70.0",Dc=30*1e3,p_=3,tw=p_*Dc,Mhe="http://localhost:9999",Ohe="supabase.auth.token",Lhe={"X-Client-Info":`gotrue-js/${sV}`},g_="X-Supabase-Api-Version",iV={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Vhe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Fhe=6e5;class JN extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function tt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class $he extends JN{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Uhe(t){return tt(t)&&t.name==="AuthApiError"}class aV extends JN{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ho extends JN{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class La extends Ho{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zhe(t){return tt(t)&&t.name==="AuthSessionMissingError"}class Ip extends Ho{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ap extends Ho{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Pp extends Ho{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Bhe(t){return tt(t)&&t.name==="AuthImplicitGrantRedirectError"}class CT extends Ho{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class v_ extends Ho{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function nw(t){return tt(t)&&t.name==="AuthRetryableFetchError"}class kT extends Ho{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Ph extends Ho{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),TT=` 	
\r=`.split(""),qhe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<TT.length;e+=1)t[TT[e].charCodeAt(0)]=-2;for(let e=0;e<Vv.length;e+=1)t[Vv[e].charCodeAt(0)]=e;return t})();function IT(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Vv[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Vv[r]),e.queuedBits-=6}}function oV(t,e,n){const r=qhe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function AT(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{Ghe(o,r,n)};for(let o=0;o<t.length;o+=1)oV(t.charCodeAt(o),s,a);return e.join("")}function Whe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Hhe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Whe(r,e)}}function Ghe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Khe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)oV(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Yhe(t){const e=[];return Hhe(t,n=>e.push(n)),new Uint8Array(e)}function Qhe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>IT(s,n,r)),IT(null,n,r),e.join("")}function Jhe(t){return Math.round(Date.now()/1e3)+t}function Xhe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Rs=()=>typeof window<"u"&&typeof document<"u",tl={tested:!1,writable:!1},Rh=()=>{if(!Rs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tl.tested)return tl.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),tl.tested=!0,tl.writable=!0}catch{tl.tested=!0,tl.writable=!1}return tl.writable};function Zhe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const lV=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Em(async()=>{const{default:r}=await Promise.resolve().then(()=>gd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},efe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",cV=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Rp=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Dp=async(t,e)=>{await t.removeItem(e)};class xy{constructor(){this.promise=new xy.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}xy.promiseConstructor=Promise;function rw(t){const e=t.split(".");if(e.length!==3)throw new Ph("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Vhe.test(e[r]))throw new Ph("JWT not in base64url format");return{header:JSON.parse(AT(e[0])),payload:JSON.parse(AT(e[1])),signature:Khe(e[2]),raw:{header:e[0],payload:e[1]}}}async function tfe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function nfe(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){r(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function rfe(t){return("0"+t.toString(16)).substr(-2)}function sfe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,rfe).join("")}async function ife(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function afe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await ife(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cc(t,e,n=!1){const r=sfe();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await cV(t,`${e}-code-verifier`,s);const a=await afe(r);return[a,r===a?"plain":"s256"]}const ofe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lfe(t){const e=t.headers.get(g_);if(!e||!e.match(ofe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function cfe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ufe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dfe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kc(t){if(!dfe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var hfe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const al=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ffe=[502,503,504];async function PT(t){var e;if(!efe(t))throw new v_(al(t),0);if(ffe.includes(t.status))throw new v_(al(t),t.status);let n;try{n=await t.json()}catch(a){throw new aV(al(a),a)}let r;const s=lfe(t);if(s&&s.getTime()>=iV["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new kT(al(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new La}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new kT(al(n),t.status,n.weak_password.reasons);throw new $he(al(n),t.status||500,r)}const mfe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function it(t,e,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[g_]||(a[g_]=iV["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await pfe(t,e,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function pfe(t,e,n,r,s,a){const o=mfe(e,r,s,a);let l;try{l=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new v_(al(c),0)}if(l.ok||await PT(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await PT(c)}}function Bi(t){var e;let n=null;yfe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Jhe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function RT(t){const e=Bi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qa(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gfe(t){return{data:t,error:null}}function vfe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,o=hfe(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function xfe(t){return t}function yfe(t){return t.access_token&&t.refresh_token&&t.expires_in}const sw=["global","local","others"];var wfe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class bfe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=lV(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=sw[0]){if(sw.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sw.join(", ")}`);try{return await it(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await it(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Qa})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=wfe(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await it(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:vfe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(tt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await it(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qa})}catch(n){if(tt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await it(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:xfe});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);u[`${b}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(tt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){kc(e);try{return await it(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qa})}catch(n){if(tt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){kc(e);try{return await it(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Qa})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){kc(e);try{return await it(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Qa})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){kc(e.userId);try{const{data:n,error:r}=await it(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){kc(e.userId),kc(e.id);try{return{data:await it(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}}}const _fe={getItem:t=>Rh()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Rh()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Rh()&&globalThis.localStorage.removeItem(t)}};function DT(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function jfe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Tc={debug:!!(globalThis&&Rh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uV extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Nfe extends uV{}async function Sfe(t,e,n){Tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Tc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Nfe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Tc.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}jfe();const Efe={url:Mhe,storageKey:Ohe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Lhe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function MT(t,e,n){return await n()}class Lf{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Lf.nextInstanceID,Lf.nextInstanceID+=1,this.instanceID>0&&Rs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Efe),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new bfe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=lV(s.fetch),this.lock=s.lock||MT,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Rs()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Sfe:this.lock=MT,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Rh()?this.storage=_fe:(this.memoryStorage={},this.storage=DT(this.memoryStorage)):(this.memoryStorage={},this.storage=DT(this.memoryStorage)),Rs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${sV}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Zhe(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Rs()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Bhe(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return tt(n)?{error:n}:{error:new aV("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Bi}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(tt(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:d,password:h,options:m}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Cc(this.storage,this.storageKey)),a=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:v},xform:Bi})}else if("phone"in e){const{phone:d,password:h,options:m}=e;a=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Bi})}else throw new Ap("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(tt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:o,options:l}=e;n=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:RT})}else if("phone"in e){const{phone:a,password:o,options:l}=e;n=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:RT})}else throw new Ap("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ip}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(tt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,a,o,l,c,u,d,h,m,p;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:b,wallet:y,statement:x,options:_}=e;let E;if(Rs())if(typeof y=="object")E=y;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))E=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=y}const S=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const D=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),x?{statement:x}:null));let I;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")I=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)I=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)v=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),w=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${S.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(d=_==null?void 0:_.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const D=await E.signMessage(new TextEncoder().encode(v),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=D}}try{const{data:b,error:y}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Qhe(w)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Bi});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ip}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(tt(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const n=await Rp(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:o}=await it(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Bi});if(await Dp(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Ip}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(tt(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:o}=e,l=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Bi}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ip}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(tt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,a,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Cc(this.storage,this.storageKey));const{error:h}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ap("You must provide either an email or phone number.")}catch(l){if(tt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await it(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Bi});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(tt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Cc(this.storage,this.storageKey)),await it(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:gfe})}catch(a){if(tt(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new La;const{error:s}=await it(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(tt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:o}=await it(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:o,error:l}=await it(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ap("You must provide either an email or phone number and a type")}catch(n){if(tt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Rp(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<tw:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qa}):await this._useSession(async n=>{var r,s,a;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new La}:await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Qa})})}catch(n){if(tt(n))return zhe(n)&&(await this._removeSession(),await Dp(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new La;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Cc(this.storage,this.storageKey));const{data:u,error:d}=await it(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Qa});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new La;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:o}=rw(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(tt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new La;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(tt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Rs())throw new Pp("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Pp(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new CT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pp("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new CT("No code detected.");const{data:x,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!o||!u)throw new Pp("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const p=m-d;p*1e3<=Dc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:w,error:b}=await this._getUser(a);if(b)throw b;const y={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(tt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Rp(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{error:a};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Uhe(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Dp(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Xhe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Cc(this.storage,this.storageKey,!0));try{return await it(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(tt(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:m}=a;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await it(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Rs()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(tt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)throw o;return await it(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await nfe(async s=>(s>0&&await tfe(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await it(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Bi})),(s,a)=>{const o=200*Math.pow(2,s);return a&&nw(a)&&Date.now()+o-r<Dc})}catch(r){if(this._debug(n,"error",r),tt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Rs()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Rp(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<tw;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${tw}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),nw(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new La;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new xy;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new La;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),tt(a)){const o={session:null,error:a};return nw(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await cV(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Dp(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Dc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Dc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Dc}ms, refresh threshold is ${p_} ticks`),s<=p_&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof uV)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await Cc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await it(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await it(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:o,error:l}=await it(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(tt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await it(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(tt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=rw(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Fhe>Date.now()))return r;const{data:s,error:a}=await it(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!s.keys||s.keys.length===0)throw new Ph("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new Ph("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};r=p.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=rw(r);if(cfe(a.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:a,header:s,signature:o},error:null}}const u=ufe(s.alg),d=await this.fetchJwk(s.kid,n),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Yhe(`${l}.${c}`)))throw new Ph("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}}Lf.nextInstanceID=0;const Cfe=Lf;class kfe extends Cfe{constructor(e){super(e)}}var Tfe=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class Ife{constructor(e,n,r){var s,a,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=Rhe(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:She,realtime:Che,auth:Object.assign(Object.assign({},Ehe),{storageKey:u}),global:Nhe},h=Dhe(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Ahe(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Gde(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new jde(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new bhe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Tfe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:a,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kfe({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ohe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Afe=(t,e,n)=>new Ife(t,e,n),Pfe="https://kbbhglxrcywpcktkamhl.supabase.co",Rfe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",OT=Afe(Pfe,Rfe,{auth:{persistSession:!0}}),Dfe=[{value:"support",label:"🛠️ Support Technique"},{value:"annonce",label:"📊 Problème avec une annonce"},{value:"compte",label:"👤 Compte et Authentification"},{value:"autre",label:"❓ Autre"}],Mfe=()=>{const{currentUser:t,userProfile:e}=Zt(),[n,r]=g.useState(!1),[s,a]=g.useState(!1),[o,l]=g.useState("menu"),[c,u]=g.useState([]),[d,h]=g.useState(""),[m,p]=g.useState(!1),[v,w]=g.useState({name:"",email:"",subject:"",message:"",category:"support"}),[b,y]=g.useState(!1),[x,_]=g.useState(!1),E=g.useRef(null),S=g.useRef(null),D=()=>{var ae;(ae=E.current)==null||ae.scrollIntoView({behavior:"smooth"})};g.useEffect(()=>{D()},[c]),g.useEffect(()=>{n&&o==="chat"&&S.current&&S.current.focus()},[n,o]),g.useEffect(()=>{(async()=>{const fe=await U();u(fe)})()},[t]),g.useEffect(()=>{t&&e&&w(ae=>({...ae,name:ae.name||e.displayName||t.displayName||"",email:ae.email||e.email||t.email||""}))},[t,e]);const I=ae=>{const fe=ae.toLowerCase();if(fe.includes("bonjour")||fe.includes("salut")||fe.includes("hello")){const ce=(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||"étudiant";return t?`Salut ${ce} ! 😊 Comment ça va ? Je peux t'aider avec tes annonces ou répondre à tes questions sur StudyMarket.`:"Salut ! 😊 Bienvenue sur StudyMarket ! Je peux t'aider à naviguer sur la plateforme. Que cherches-tu ?"}return fe.includes("annonce")||fe.includes("publier")||fe.includes("vendre")?`Pour publier une annonce, va sur "Créer une annonce" ! 📝 Tu peux vendre des livres, de l'électronique, proposer des services ou même faire du troc. Besoin d'aide pour une catégorie spécifique ?`:fe.includes("acheter")||fe.includes("trouver")||fe.includes("rechercher")?"Pour trouver des articles, utilise la barre de recherche ou parcours les catégories ! 🔍 Tu peux filtrer par prix et université. Que cherches-tu exactement ?":fe.includes("sécurité")||fe.includes("sûr")||fe.includes("confiance")?"StudyMarket est sécurisé ! 🛡️ Tous les étudiants sont vérifiés avec leur email universitaire. Utilise notre chat intégré et rencontrez-vous dans des lieux publics du campus.":fe.includes("prix")||fe.includes("coût")||fe.includes("gratuit")?"StudyMarket est 100% gratuit pour les étudiants ! 🎓 Pas de frais cachés pour publier ou contacter des vendeurs. On veut juste faciliter les échanges !":fe.includes("logement")||fe.includes("chambre")||fe.includes("colocation")?"🏠 Section Logement ! Tu peux chercher des colocations, studios ou chambres près de ton campus. Utilise les filtres par prix et distance. Visite toujours avant de t'engager !":fe.includes("job")||fe.includes("stage")||fe.includes("travail")?"💼 Jobs & Stages ! Parfait pour ton budget étudiant. Tu trouveras des petits boulots, cours particuliers, stages... Postule directement via la plateforme !":fe.includes("problème")||fe.includes("bug")||fe.includes("erreur")?"Oh non ! 😅 Peux-tu me dire quel problème ? Essaie de rafraîchir la page. Si ça persiste, contacte notre support !":fe.includes("merci")||fe.includes("thanks")?"De rien ! 😊 C'est un plaisir d'aider la communauté étudiante. N'hésite pas si tu as d'autres questions !":`Hmm, je ne suis pas sûr de comprendre ! 🤔 Je peux t'aider avec :

• Créer/gérer des annonces
• Questions de sécurité
• Navigation sur le site
• Infos sur les catégories

Pose-moi une question plus spécifique ! 😊`},A=async()=>{if(!d.trim())return;const ae={id:Date.now().toString(),text:d,sender:"user",timestamp:new Date},fe=[...c,ae];u(fe),h(""),p(!0),$(fe),t&&W(fe),setTimeout(()=>{const ce={id:(Date.now()+1).toString(),text:I(d),sender:"bot",timestamp:new Date},Ue=[...fe,ce];u(Ue),p(!1),$(Ue),t&&W(Ue)},1e3+Math.random()*1e3)},R=ae=>{ae.key==="Enter"&&!ae.shiftKey&&(ae.preventDefault(),A())},N=()=>{const ae=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return v.name.trim()?v.email.trim()?ae.test(v.email)?v.subject.trim()?v.message.trim()?!0:(te.error("Veuillez écrire votre message"),!1):(te.error("Veuillez préciser le sujet"),!1):(te.error("Format d'email invalide"),!1):(te.error("Veuillez entrer votre email"),!1):(te.error("Veuillez entrer votre nom complet"),!1)},P=async ae=>{var fe,ce,Ue,J,pe,G;if(ae.preventDefault(),!!N()){y(!0);try{console.log("Envoi du message via fetch direct...",{name:v.name,email:v.email,subject:v.subject,message:v.message.substring(0,50)+"...",category:v.category,user_id:t==null?void 0:t.uid});const re=await fetch("https://kbbhglxrcywpcktkamhl.supabase.co/functions/v1/envoi_email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${((fe=(await OT.auth.getSession()).data.session)==null?void 0:fe.access_token)||""}`},body:JSON.stringify({name:v.name.trim(),email:v.email.trim(),subject:v.subject.trim(),message:v.message.trim(),category:v.category,user_id:(t==null?void 0:t.uid)||null})});if(console.log("Statut de la réponse:",re.status),console.log("Headers de la réponse:",Object.fromEntries(re.headers.entries())),re.status===401){console.log("Erreur 401, tentative sans Authorization...");const Ae=await fetch("https://kbbhglxrcywpcktkamhl.supabase.co/functions/v1/envoi_email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${((ce=(await OT.auth.getSession()).data.session)==null?void 0:ce.access_token)||""}`},body:JSON.stringify({name:v.name.trim(),email:v.email.trim(),subject:v.subject.trim(),message:v.message.trim(),category:v.category,user_id:(t==null?void 0:t.uid)||null})});if(console.log("Statut retry:",Ae.status),!Ae.ok){const We=await Ae.text();throw console.error("Erreur retry:",We),new Error(`Erreur HTTP ${Ae.status}: ${We}`)}const ze=await Ae.json();if(console.log("Réponse retry:",ze),ze.success){_(!0),te.success("Message envoyé avec succès ! Nous vous répondrons rapidement."),setTimeout(()=>{_(!1),w({name:"",email:"",subject:"",message:"",category:"support"}),l("menu")},3e3);return}else throw new Error(ze.error||"Échec de l'envoi")}if(!re.ok){const Ae=await re.text();throw console.error("Erreur response:",Ae),new Error(`Erreur HTTP ${re.status}: ${Ae}`)}const ie=await re.json();if(console.log("Réponse finale:",ie),ie.success)_(!0),te.success("Message envoyé avec succès ! Nous vous répondrons rapidement."),setTimeout(()=>{_(!1),w({name:"",email:"",subject:"",message:"",category:"support"}),l("menu")},3e3);else throw new Error(ie.error||"Échec de l'envoi côté serveur")}catch(re){console.error("Erreur complète:",re);let ie="Erreur lors de l'envoi du message";(Ue=re.message)!=null&&Ue.includes("401")?ie="Problème d'autorisation. Configuration Supabase à vérifier.":(J=re.message)!=null&&J.includes("network")||(pe=re.message)!=null&&pe.includes("fetch")?ie="Problème de connexion. Vérifiez votre internet.":(G=re.message)!=null&&G.includes("timeout")?ie="Délai d'attente dépassé. Réessayez plus tard.":re.message&&(ie=re.message),te.error(ie)}finally{y(!1)}}},T=(ae,fe)=>{w(ce=>({...ce,[ae]:fe}))},C=()=>{r(!0),a(!1),l("menu")},V=()=>{r(!1),a(!1),l("menu")},z=()=>{a(!s)},H=()=>{l("menu")},$=ae=>{try{localStorage.setItem("chatbot_messages",JSON.stringify(ae))}catch(fe){console.warn("Erreur sauvegarde cache:",fe)}},L=()=>{try{const ae=localStorage.getItem("chatbot_messages");if(ae)return JSON.parse(ae).map(ce=>({...ce,timestamp:new Date(ce.timestamp)}))}catch(ae){console.warn("Erreur chargement cache:",ae)}return[{id:"1",text:"Salut ! 👋 Je suis l'assistant StudyMarket. Comment puis-je t'aider aujourd'hui ?",sender:"bot",timestamp:new Date}]},W=async ae=>{if(t)try{const fe=Ze(ye,"chatHistory",t.uid);await ou(fe,{messages:ae.map(ce=>({...ce,timestamp:ce.timestamp.toISOString()})),lastUpdated:new Date().toISOString()},{merge:!0})}catch(fe){console.warn("Erreur sauvegarde Firestore:",fe)}},U=async()=>{if(!t)return L();try{const ae=Ze(ye,"chatHistory",t.uid),fe=await ys(ae);if(fe.exists()){const Ue=fe.data().messages.map(J=>({...J,timestamp:new Date(J.timestamp)}));return $(Ue),Ue}}catch(ae){console.warn("Erreur chargement Firestore:",ae)}return L()},Z=()=>i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-2xl font-bold text-white",children:"T"})}),i.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:["Salut ",(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||"Étudiant"," ! 👋"]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Comment peut-on t'aider ?"})]}),i.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors rounded-lg",onClick:()=>l("chat"),children:[i.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Message récent"}),c.length>0&&c.some(ae=>ae.sender==="user")?i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(Jr,{className:"w-8 h-8",children:i.jsx(Pr,{className:"bg-gradient-to-br from-primary to-secondary text-white text-xs",children:c[c.length-1].sender==="bot"?"T":"U"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:c[c.length-1].text.length>50?`${c[c.length-1].text.substring(0,50)}...`:c[c.length-1].text}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[c[c.length-1].sender==="bot"?"Assistant":"Vous"," • ",new Date(c[c.length-1].timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),i.jsx($l,{className:"w-4 h-4 text-gray-400"})]}):i.jsxs("div",{className:"flex items-center justify-between py-4",children:[i.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun message récent"}),i.jsx($l,{className:"w-4 h-4 text-gray-400"})]})]})]}),oe=()=>i.jsxs("div",{className:"flex items-center justify-around p-4 bg-white dark:bg-gray-900",children:[i.jsx(F,{variant:"ghost",size:"sm",onClick:H,className:`p-2 ${o==="home"?"text-primary":"text-gray-500"}`,children:i.jsx(ui,{className:"w-5 h-5"})}),i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>l("chat"),className:`p-2 ${o==="chat"?"text-primary":"text-gray-500"}`,children:i.jsx(YY,{className:"w-5 h-5"})}),i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>l("contact"),className:`p-2 ${o==="contact"?"text-primary":"text-gray-500"}`,children:i.jsx(ar,{className:"w-5 h-5"})})]}),ke=()=>i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary/5 to-secondary/5",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>l("menu"),className:"p-2",children:i.jsx(sa,{className:"w-4 h-4"})}),i.jsx(Jr,{className:"w-8 h-8",children:i.jsx(Pr,{className:"bg-gradient-to-br from-primary to-secondary text-white text-xs",children:"SM"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm",children:"Assistant StudyMarket"}),i.jsx("p",{className:"text-xs text-green-600",children:"En ligne"})]})]}),i.jsx(Ie,{className:"bg-green-100 text-green-800 text-xs",children:"Actif"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[c.map((ae,fe)=>{var J,pe;const ce=ae.sender==="user",Ue=fe===0||c[fe-1].sender!==ae.sender;return i.jsxs("div",{className:`flex items-end space-x-2 ${ce?"flex-row-reverse space-x-reverse":""}`,children:[i.jsx("div",{className:"flex-shrink-0",children:Ue?i.jsx(Jr,{className:"w-8 h-8",children:ce?e!=null&&e.photoURL?i.jsx("img",{src:e.photoURL,alt:"User Avatar",className:"w-full h-full object-cover rounded-full"}):i.jsx(Pr,{className:"bg-gradient-to-br from-blue-500 to-purple-500 text-white text-sm font-semibold",children:((J=e==null?void 0:e.displayName)==null?void 0:J.charAt(0))||((pe=t==null?void 0:t.displayName)==null?void 0:pe.charAt(0))||"U"}):i.jsx(Pr,{className:"bg-gradient-to-br from-primary to-secondary text-white text-sm font-semibold",children:"T"})}):i.jsx("div",{className:"w-8 h-8"})}),i.jsxs("div",{className:"flex flex-col max-w-[75%]",children:[i.jsx("div",{className:`px-4 py-2 ${ce?"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl rounded-br-md":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-2xl rounded-bl-md"}`,children:i.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed text-left",children:ae.text})}),i.jsx("p",{className:`text-xs text-gray-500 mt-1 px-1 ${ce?"text-right":"text-left"}`,children:ae.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},ae.id)}),m&&i.jsxs("div",{className:"flex items-end space-x-2",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Jr,{className:"w-8 h-8",children:i.jsx(Pr,{className:"bg-gradient-to-br from-primary to-secondary text-white text-sm font-semibold",children:"T"})})}),i.jsx("div",{className:"max-w-[75%]",children:i.jsx("div",{className:"px-4 py-3 bg-gray-100 dark:bg-gray-700 rounded-2xl rounded-bl-md",children:i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),i.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),i.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),i.jsx("div",{ref:E})]}),i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(_e,{ref:S,value:d,onChange:ae=>h(ae.target.value),onKeyPress:R,placeholder:"Tape ton message...",className:"flex-1 border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700",disabled:m}),i.jsx(F,{onClick:A,disabled:!d.trim()||m,size:"icon",className:"w-12 h-12 rounded-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:i.jsx(zl,{className:"w-6 h-6 text-white"})})]})})]}),et=()=>i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gradient-to-r from-primary/5 to-secondary/5",children:[i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>l("menu"),className:"p-2",children:i.jsx(sa,{className:"w-4 h-4"})}),i.jsx(ar,{className:"w-6 h-6 text-primary"}),i.jsx("h3",{className:"font-semibold",children:"Nous contacter"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:x?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 flex items-center justify-center mx-auto mb-4",children:i.jsx(AD,{className:"w-8 h-8 text-green-600"})}),i.jsx("h4",{className:"text-lg font-semibold text-green-600 mb-2",children:"Message envoyé !"}),i.jsx("p",{className:"text-gray-600",children:"Nous te répondrons rapidement."})]}):i.jsxs("form",{onSubmit:P,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nom complet *"}),i.jsx(_e,{type:"text",value:v.name,onChange:ae=>T("name",ae.target.value),required:!0,placeholder:"Ton nom complet",className:"w-full border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email *"}),i.jsx(_e,{type:"email",value:v.email,onChange:ae=>T("email",ae.target.value),required:!0,placeholder:"ton.email@univ.fr",className:"w-full border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Catégorie du message *"}),i.jsx("select",{value:v.category,onChange:ae=>T("category",ae.target.value),required:!0,className:"w-full px-3 py-2 border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-md",children:Dfe.map(ae=>i.jsx("option",{value:ae.value,children:ae.label},ae.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sujet *"}),i.jsx(_e,{type:"text",value:v.subject,onChange:ae=>T("subject",ae.target.value),required:!0,placeholder:"Sujet de ton message",className:"w-full border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message *"}),i.jsx("textarea",{value:v.message,onChange:ae=>{const fe=ae.target.value;fe.length<=1e3&&T("message",fe)},maxLength:1e3,required:!0,rows:4,placeholder:"Décris ta demande... (max 1000 caractères)",className:"w-full px-3 py-2 border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 resize-none"}),i.jsxs("div",{className:"text-right text-xs text-gray-500 mt-1",children:[v.message.length,"/1000"]})]}),i.jsx(F,{type:"submit",disabled:b,className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",children:b?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):"Envoyer le message"})]})})]});return i.jsxs(i.Fragment,{children:[i.jsx(F,{onClick:n?V:C,className:"fixed bottom-4 right-4 md:bottom-6 md:right-6 z-50 w-12 h-12 md:w-14 md:h-14 rounded-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",children:n?i.jsx("img",{src:"/StudyMarket/assets/arrow.svg",alt:"Arrow",className:"w-5 h-5 md:w-6 md:h-6"}):i.jsx(zt,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),n&&i.jsx(Y,{className:`fixed z-40 shadow-2xl border-0 bg-white dark:bg-gray-900 overflow-hidden transition-all duration-300 ease-in-out
            ${s?"bottom-24 right-4 w-80 max-w-[calc(100vw-2rem)] h-10":"bottom-24 right-4 w-80 max-w-[calc(100vw-2rem)] h-[500px] max-h-[calc(100vh-8rem)]"}
            md:${s?"bottom-20 md:right-6 md:w-80":"bottom-20 md:right-6 md:w-96 md:h-[550px] md:max-h-[calc(100vh-8rem)]"}
            md:max-w-none
          `,children:i.jsxs(Q,{className:"p-0 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary to-secondary text-white cursor-pointer",onClick:z,children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:s?i.jsx(WY,{className:"w-4 h-4 text-white transform rotate-180"}):i.jsx(zt,{className:"w-4 h-4 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-semibold text-sm",children:"StudyMarket"}),!s&&i.jsx("p",{className:"text-xs text-white/80",children:"Assistant en ligne"})]})]}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx(F,{onClick:ae=>{ae.stopPropagation(),V()},variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 p-1",children:i.jsx(pf,{className:"w-4 h-4"})})})]}),!s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex-1 overflow-hidden",children:[o==="menu"&&Z(),o==="chat"&&ke(),o==="contact"&&et()]}),oe()]})]})})]})};function Ofe({children:t}){const[e,n]=Se.useState(null);return Se.useEffect(()=>{const r=s=>{n(s.error||new Error(s.message))};return window.addEventListener("error",r),()=>window.removeEventListener("error",r)},[]),e?i.jsxs("div",{style:{color:"red",padding:"2rem",textAlign:"center"},children:["Une erreur est survenue : ",e.message]}):i.jsx(i.Fragment,{children:t})}function Lfe(){return i.jsx(mU,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:i.jsx($Y,{children:i.jsx(oU,{children:i.jsxs("div",{className:"min-h-screen w-full overflow-x-hidden bg-background flex flex-col",children:[i.jsxs("div",{className:"max-w-[100vw] overflow-x-hidden",children:[i.jsx(qte,{}),i.jsx("main",{className:"flex-1 pt-16",children:i.jsx(Ofe,{children:i.jsxs(Z8,{children:[i.jsx(Gt,{path:"/",element:i.jsx(ase,{})}),i.jsx(Gt,{path:"/listings",element:i.jsx(Use,{})}),i.jsx(Gt,{path:"/listing/:id",element:i.jsx(Toe,{})}),i.jsx(Gt,{path:"/auth",element:i.jsx(Zue,{})}),i.jsx(Gt,{path:"/help",element:i.jsx(Tue,{})}),i.jsx(Gt,{path:"/safety",element:i.jsx(Rue,{})}),i.jsx(Gt,{path:"/cart",element:i.jsx(ede,{})}),i.jsx(Gt,{path:"/products",element:i.jsx(cde,{})}),i.jsx(Gt,{path:"/checkout/success",element:i.jsx(ude,{})}),i.jsx(Gt,{path:"/checkout",element:i.jsx(Ps,{children:i.jsx(tde,{})})}),i.jsx(Gt,{path:"/orders",element:i.jsx(Ps,{children:i.jsx(nde,{})})}),i.jsx(Gt,{path:"/order-confirmation/:orderId",element:i.jsx(Ps,{children:i.jsx(rde,{})})}),i.jsx(Gt,{path:"/create",element:i.jsx(Ps,{children:i.jsx(kce,{})})}),i.jsx(Gt,{path:"/profile",element:i.jsx(Ps,{children:i.jsx(Rce,{})})}),i.jsx(Gt,{path:"/settings",element:i.jsx(Ps,{children:i.jsx(qce,{})})}),i.jsx(Gt,{path:"/impact",element:i.jsx(Ps,{children:i.jsx(tue,{})})}),i.jsx(Gt,{path:"/saved-searches",element:i.jsx(Ps,{children:i.jsx(rue,{})})}),i.jsx(Gt,{path:"/favorites",element:i.jsx(Ps,{children:i.jsx(aue,{})})}),i.jsx(Gt,{path:"/payments",element:i.jsx(Ps,{children:i.jsx(oue,{})})}),i.jsx(Gt,{path:"/messages",element:i.jsx(Ps,{children:i.jsx(Kue,{})})}),i.jsx(Gt,{path:"/edit-listing/:id",element:i.jsx(hde,{})}),i.jsx(Gt,{path:"/jobs",element:i.jsx(mde,{})}),i.jsx(Gt,{path:"/housing",element:i.jsx(pde,{})}),i.jsx(Gt,{path:"*",element:i.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Page non trouvée (404)"})})]})})}),i.jsx(Hte,{}),i.jsx(Mfe,{})]}),i.jsx(l9,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"1px solid hsl(var(--border))"}}})]})})})})}QA(document.getElementById("root")).render(i.jsx(g.StrictMode,{children:i.jsx(Lfe,{})}));
