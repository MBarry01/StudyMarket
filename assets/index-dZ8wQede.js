function OV(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function LV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var OT={exports:{}},$v={},LT={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf=Symbol.for("react.element"),VV=Symbol.for("react.portal"),FV=Symbol.for("react.fragment"),$V=Symbol.for("react.strict_mode"),UV=Symbol.for("react.profiler"),zV=Symbol.for("react.provider"),BV=Symbol.for("react.context"),qV=Symbol.for("react.forward_ref"),WV=Symbol.for("react.suspense"),HV=Symbol.for("react.memo"),GV=Symbol.for("react.lazy"),BS=Symbol.iterator;function KV(t){return t===null||typeof t!="object"?null:(t=BS&&t[BS]||t["@@iterator"],typeof t=="function"?t:null)}var VT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FT=Object.assign,$T={};function Gu(t,e,r){this.props=t,this.context=e,this.refs=$T,this.updater=r||VT}Gu.prototype.isReactComponent={};Gu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function UT(){}UT.prototype=Gu.prototype;function y_(t,e,r){this.props=t,this.context=e,this.refs=$T,this.updater=r||VT}var w_=y_.prototype=new UT;w_.constructor=y_;FT(w_,Gu.prototype);w_.isPureReactComponent=!0;var qS=Array.isArray,zT=Object.prototype.hasOwnProperty,b_={current:null},BT={key:!0,ref:!0,__self:!0,__source:!0};function qT(t,e,r){var n,s={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)zT.call(e,n)&&!BT.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Vf,type:t,key:a,ref:o,props:s,_owner:b_.current}}function YV(t,e){return{$$typeof:Vf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function __(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vf}function QV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var WS=/\/+/g;function My(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QV(""+t.key):e.toString(36)}function Mp(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vf:case VV:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+My(o,0):n,qS(s)?(r="",t!=null&&(r=t.replace(WS,"$&/")+"/"),Mp(s,e,r,"",function(u){return u})):s!=null&&(__(s)&&(s=YV(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(WS,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",qS(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+My(a,l);o+=Mp(a,e,r,c,s)}else if(c=KV(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+My(a,l++),o+=Mp(a,e,r,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Hm(t,e,r){if(t==null)return t;var n=[],s=0;return Mp(t,n,"","",function(a){return e.call(r,a,s++)}),n}function JV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jn={current:null},Op={transition:null},XV={ReactCurrentDispatcher:jn,ReactCurrentBatchConfig:Op,ReactCurrentOwner:b_};function WT(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:Hm,forEach:function(t,e,r){Hm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Hm(t,function(){e++}),e},toArray:function(t){return Hm(t,function(e){return e})||[]},only:function(t){if(!__(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=Gu;ct.Fragment=FV;ct.Profiler=UV;ct.PureComponent=y_;ct.StrictMode=$V;ct.Suspense=WV;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XV;ct.act=WT;ct.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=FT({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=b_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)zT.call(e,c)&&!BT.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Vf,type:t.type,key:s,ref:a,props:n,_owner:o}};ct.createContext=function(t){return t={$$typeof:BV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zV,_context:t},t.Consumer=t};ct.createElement=qT;ct.createFactory=function(t){var e=qT.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:qV,render:t}};ct.isValidElement=__;ct.lazy=function(t){return{$$typeof:GV,_payload:{_status:-1,_result:t},_init:JV}};ct.memo=function(t,e){return{$$typeof:HV,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=Op.transition;Op.transition={};try{t()}finally{Op.transition=e}};ct.unstable_act=WT;ct.useCallback=function(t,e){return jn.current.useCallback(t,e)};ct.useContext=function(t){return jn.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return jn.current.useDeferredValue(t)};ct.useEffect=function(t,e){return jn.current.useEffect(t,e)};ct.useId=function(){return jn.current.useId()};ct.useImperativeHandle=function(t,e,r){return jn.current.useImperativeHandle(t,e,r)};ct.useInsertionEffect=function(t,e){return jn.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return jn.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return jn.current.useMemo(t,e)};ct.useReducer=function(t,e,r){return jn.current.useReducer(t,e,r)};ct.useRef=function(t){return jn.current.useRef(t)};ct.useState=function(t){return jn.current.useState(t)};ct.useSyncExternalStore=function(t,e,r){return jn.current.useSyncExternalStore(t,e,r)};ct.useTransition=function(){return jn.current.useTransition()};ct.version="18.3.1";LT.exports=ct;var p=LT.exports;const Ce=Fv(p),HT=OV({__proto__:null,default:Ce},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZV=p,eF=Symbol.for("react.element"),tF=Symbol.for("react.fragment"),rF=Object.prototype.hasOwnProperty,nF=ZV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sF={key:!0,ref:!0,__self:!0,__source:!0};function GT(t,e,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)rF.call(e,n)&&!sF.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:eF,type:t,key:a,ref:o,props:s,_owner:nF.current}}$v.Fragment=tF;$v.jsx=GT;$v.jsxs=GT;OT.exports=$v;var i=OT.exports,KT={exports:{}},as={},YT={exports:{}},QT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,W){var z=L.length;L.push(W);e:for(;0<z;){var X=z-1>>>1,oe=L[X];if(0<s(oe,W))L[X]=W,L[z]=oe,z=X;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var W=L[0],z=L.pop();if(z!==W){L[0]=z;e:for(var X=0,oe=L.length,Se=oe>>>1;X<Se;){var Ze=2*(X+1)-1,mt=L[Ze],st=Ze+1,_e=L[st];if(0>s(mt,z))st<oe&&0>s(_e,mt)?(L[X]=_e,L[st]=z,X=st):(L[X]=mt,L[Ze]=z,X=Ze);else if(st<oe&&0>s(_e,z))L[X]=_e,L[st]=z,X=st;else break e}}return W}function s(L,W){var z=L.sortIndex-W.sortIndex;return z!==0?z:L.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,g=!1,x=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(L){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=L)n(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=r(u)}}function E(L){if(w=!1,_(L),!x)if(r(c)!==null)x=!0,H(C);else{var W=r(u);W!==null&&F(E,W.startTime-L)}}function C(L,W){x=!1,w&&(w=!1,y(k),k=-1),g=!0;var z=m;try{for(_(W),h=r(c);h!==null&&(!(h.expirationTime>W)||L&&!A());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var oe=X(h.expirationTime<=W);W=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===r(c)&&n(c),_(W)}else n(c);h=r(c)}if(h!==null)var Se=!0;else{var Ze=r(u);Ze!==null&&F(E,Ze.startTime-W),Se=!1}return Se}finally{h=null,m=z,g=!1}}var D=!1,T=null,k=-1,R=5,S=-1;function A(){return!(t.unstable_now()-S<R)}function P(){if(T!==null){var L=t.unstable_now();S=L;var W=!0;try{W=T(!0,L)}finally{W?N():(D=!1,T=null)}}else D=!1}var N;if(typeof v=="function")N=function(){v(P)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,U=V.port2;V.port1.onmessage=P,N=function(){U.postMessage(null)}}else N=function(){b(P,0)};function H(L){T=L,D||(D=!0,N())}function F(L,W){k=b(function(){L(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,H(C))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(L){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var z=m;m=W;try{return L()}finally{m=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=m;m=L;try{return W()}finally{m=z}},t.unstable_scheduleCallback=function(L,W,z){var X=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?X+z:X):z=X,L){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=z+oe,L={id:d++,callback:W,priorityLevel:L,startTime:z,expirationTime:oe,sortIndex:-1},z>X?(L.sortIndex=z,e(u,L),r(c)===null&&L===r(u)&&(w?(y(k),k=-1):w=!0,F(E,z-X))):(L.sortIndex=oe,e(c,L),x||g||(x=!0,H(C))),L},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(L){var W=m;return function(){var z=m;m=W;try{return L.apply(this,arguments)}finally{m=z}}}})(QT);YT.exports=QT;var iF=YT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF=p,ss=iF;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JT=new Set,Dh={};function Ql(t,e){gu(t,e),gu(t+"Capture",e)}function gu(t,e){for(Dh[t]=e,t=0;t<e.length;t++)JT.add(e[t])}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aw=Object.prototype.hasOwnProperty,oF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HS={},GS={};function lF(t){return aw.call(GS,t)?!0:aw.call(HS,t)?!1:oF.test(t)?GS[t]=!0:(HS[t]=!0,!1)}function cF(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uF(t,e,r,n){if(e===null||typeof e>"u"||cF(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nn(t,e,r,n,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hr[t]=new Nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hr[e]=new Nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hr[t]=new Nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hr[t]=new Nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hr[t]=new Nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hr[t]=new Nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hr[t]=new Nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hr[t]=new Nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hr[t]=new Nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var j_=/[\-:]([a-z])/g;function N_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(j_,N_);Hr[e]=new Nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(j_,N_);Hr[e]=new Nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(j_,N_);Hr[e]=new Nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hr[t]=new Nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Hr.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hr[t]=new Nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function S_(t,e,r,n){var s=Hr.hasOwnProperty(e)?Hr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uF(e,r,s,n)&&(r=null),n||s===null?lF(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ja=aF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gm=Symbol.for("react.element"),Oc=Symbol.for("react.portal"),Lc=Symbol.for("react.fragment"),E_=Symbol.for("react.strict_mode"),ow=Symbol.for("react.profiler"),XT=Symbol.for("react.provider"),ZT=Symbol.for("react.context"),C_=Symbol.for("react.forward_ref"),lw=Symbol.for("react.suspense"),cw=Symbol.for("react.suspense_list"),k_=Symbol.for("react.memo"),Va=Symbol.for("react.lazy"),eI=Symbol.for("react.offscreen"),KS=Symbol.iterator;function Pd(t){return t===null||typeof t!="object"?null:(t=KS&&t[KS]||t["@@iterator"],typeof t=="function"?t:null)}var sr=Object.assign,Oy;function Yd(t){if(Oy===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Oy=e&&e[1]||""}return`
`+Oy+t}var Ly=!1;function Vy(t,e){if(!t||Ly)return"";Ly=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ly=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Yd(t):""}function dF(t){switch(t.tag){case 5:return Yd(t.type);case 16:return Yd("Lazy");case 13:return Yd("Suspense");case 19:return Yd("SuspenseList");case 0:case 2:case 15:return t=Vy(t.type,!1),t;case 11:return t=Vy(t.type.render,!1),t;case 1:return t=Vy(t.type,!0),t;default:return""}}function uw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lc:return"Fragment";case Oc:return"Portal";case ow:return"Profiler";case E_:return"StrictMode";case lw:return"Suspense";case cw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ZT:return(t.displayName||"Context")+".Consumer";case XT:return(t._context.displayName||"Context")+".Provider";case C_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k_:return e=t.displayName||null,e!==null?e:uw(t.type)||"Memo";case Va:e=t._payload,t=t._init;try{return uw(t(e))}catch{}}return null}function hF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uw(e);case 8:return e===E_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function go(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fF(t){var e=tI(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Km(t){t._valueTracker||(t._valueTracker=fF(t))}function rI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=tI(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function hg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dw(t,e){var r=e.checked;return sr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function YS(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=go(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nI(t,e){e=e.checked,e!=null&&S_(t,"checked",e,!1)}function hw(t,e){nI(t,e);var r=go(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fw(t,e.type,r):e.hasOwnProperty("defaultValue")&&fw(t,e.type,go(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function QS(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function fw(t,e,r){(e!=="number"||hg(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Qd=Array.isArray;function Jc(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+go(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function mw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return sr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function JS(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ce(92));if(Qd(r)){if(1<r.length)throw Error(ce(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:go(r)}}function sI(t,e){var r=go(e.value),n=go(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function XS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ym,aI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ym=Ym||document.createElement("div"),Ym.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ym.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Mh(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var uh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mF=["Webkit","ms","Moz","O"];Object.keys(uh).forEach(function(t){mF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),uh[e]=uh[t]})});function oI(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||uh.hasOwnProperty(t)&&uh[t]?(""+e).trim():e+"px"}function lI(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=oI(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var pF=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gw(t,e){if(e){if(pF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function vw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xw=null;function T_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yw=null,Xc=null,Zc=null;function ZS(t){if(t=Uf(t)){if(typeof yw!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=Wv(e),yw(t.stateNode,t.type,e))}}function cI(t){Xc?Zc?Zc.push(t):Zc=[t]:Xc=t}function uI(){if(Xc){var t=Xc,e=Zc;if(Zc=Xc=null,ZS(t),e)for(t=0;t<e.length;t++)ZS(e[t])}}function dI(t,e){return t(e)}function hI(){}var Fy=!1;function fI(t,e,r){if(Fy)return t(e,r);Fy=!0;try{return dI(t,e,r)}finally{Fy=!1,(Xc!==null||Zc!==null)&&(hI(),uI())}}function Oh(t,e){var r=t.stateNode;if(r===null)return null;var n=Wv(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ce(231,e,typeof r));return r}var ww=!1;if(la)try{var Rd={};Object.defineProperty(Rd,"passive",{get:function(){ww=!0}}),window.addEventListener("test",Rd,Rd),window.removeEventListener("test",Rd,Rd)}catch{ww=!1}function gF(t,e,r,n,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var dh=!1,fg=null,mg=!1,bw=null,vF={onError:function(t){dh=!0,fg=t}};function xF(t,e,r,n,s,a,o,l,c){dh=!1,fg=null,gF.apply(vF,arguments)}function yF(t,e,r,n,s,a,o,l,c){if(xF.apply(this,arguments),dh){if(dh){var u=fg;dh=!1,fg=null}else throw Error(ce(198));mg||(mg=!0,bw=u)}}function Jl(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function mI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function eE(t){if(Jl(t)!==t)throw Error(ce(188))}function wF(t){var e=t.alternate;if(!e){if(e=Jl(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return eE(s),t;if(a===n)return eE(s),e;a=a.sibling}throw Error(ce(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(ce(189))}}if(r.alternate!==n)throw Error(ce(190))}if(r.tag!==3)throw Error(ce(188));return r.stateNode.current===r?t:e}function pI(t){return t=wF(t),t!==null?gI(t):null}function gI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gI(t);if(e!==null)return e;t=t.sibling}return null}var vI=ss.unstable_scheduleCallback,tE=ss.unstable_cancelCallback,bF=ss.unstable_shouldYield,_F=ss.unstable_requestPaint,mr=ss.unstable_now,jF=ss.unstable_getCurrentPriorityLevel,I_=ss.unstable_ImmediatePriority,xI=ss.unstable_UserBlockingPriority,pg=ss.unstable_NormalPriority,NF=ss.unstable_LowPriority,yI=ss.unstable_IdlePriority,Uv=null,vi=null;function SF(t){if(vi&&typeof vi.onCommitFiberRoot=="function")try{vi.onCommitFiberRoot(Uv,t,void 0,(t.current.flags&128)===128)}catch{}}var Bs=Math.clz32?Math.clz32:kF,EF=Math.log,CF=Math.LN2;function kF(t){return t>>>=0,t===0?32:31-(EF(t)/CF|0)|0}var Qm=64,Jm=4194304;function Jd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gg(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Jd(l):(a&=o,a!==0&&(n=Jd(a)))}else o=r&~s,o!==0?n=Jd(o):a!==0&&(n=Jd(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Bs(e),s=1<<r,n|=t[r],e&=~s;return n}function TF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IF(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Bs(a),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=TF(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function _w(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wI(){var t=Qm;return Qm<<=1,!(Qm&4194240)&&(Qm=64),t}function $y(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ff(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bs(e),t[e]=r}function AF(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Bs(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function A_(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Bs(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var At=0;function bI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _I,P_,jI,NI,SI,jw=!1,Xm=[],ro=null,no=null,so=null,Lh=new Map,Vh=new Map,Ua=[],PF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rE(t,e){switch(t){case"focusin":case"focusout":ro=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":Lh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vh.delete(e.pointerId)}}function Dd(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Uf(e),e!==null&&P_(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function RF(t,e,r,n,s){switch(e){case"focusin":return ro=Dd(ro,t,e,r,n,s),!0;case"dragenter":return no=Dd(no,t,e,r,n,s),!0;case"mouseover":return so=Dd(so,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return Lh.set(a,Dd(Lh.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Vh.set(a,Dd(Vh.get(a)||null,t,e,r,n,s)),!0}return!1}function EI(t){var e=ll(t.target);if(e!==null){var r=Jl(e);if(r!==null){if(e=r.tag,e===13){if(e=mI(r),e!==null){t.blockedOn=e,SI(t.priority,function(){jI(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Nw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);xw=n,r.target.dispatchEvent(n),xw=null}else return e=Uf(r),e!==null&&P_(e),t.blockedOn=r,!1;e.shift()}return!0}function nE(t,e,r){Lp(t)&&r.delete(e)}function DF(){jw=!1,ro!==null&&Lp(ro)&&(ro=null),no!==null&&Lp(no)&&(no=null),so!==null&&Lp(so)&&(so=null),Lh.forEach(nE),Vh.forEach(nE)}function Md(t,e){t.blockedOn===e&&(t.blockedOn=null,jw||(jw=!0,ss.unstable_scheduleCallback(ss.unstable_NormalPriority,DF)))}function Fh(t){function e(s){return Md(s,t)}if(0<Xm.length){Md(Xm[0],t);for(var r=1;r<Xm.length;r++){var n=Xm[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ro!==null&&Md(ro,t),no!==null&&Md(no,t),so!==null&&Md(so,t),Lh.forEach(e),Vh.forEach(e),r=0;r<Ua.length;r++)n=Ua[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ua.length&&(r=Ua[0],r.blockedOn===null);)EI(r),r.blockedOn===null&&Ua.shift()}var eu=ja.ReactCurrentBatchConfig,vg=!0;function MF(t,e,r,n){var s=At,a=eu.transition;eu.transition=null;try{At=1,R_(t,e,r,n)}finally{At=s,eu.transition=a}}function OF(t,e,r,n){var s=At,a=eu.transition;eu.transition=null;try{At=4,R_(t,e,r,n)}finally{At=s,eu.transition=a}}function R_(t,e,r,n){if(vg){var s=Nw(t,e,r,n);if(s===null)Qy(t,e,n,xg,r),rE(t,n);else if(RF(s,t,e,r,n))n.stopPropagation();else if(rE(t,n),e&4&&-1<PF.indexOf(t)){for(;s!==null;){var a=Uf(s);if(a!==null&&_I(a),a=Nw(t,e,r,n),a===null&&Qy(t,e,n,xg,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Qy(t,e,n,null,r)}}var xg=null;function Nw(t,e,r,n){if(xg=null,t=T_(n),t=ll(t),t!==null)if(e=Jl(t),e===null)t=null;else if(r=e.tag,r===13){if(t=mI(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xg=t,null}function CI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jF()){case I_:return 1;case xI:return 4;case pg:case NF:return 16;case yI:return 536870912;default:return 16}default:return 16}}var Ja=null,D_=null,Vp=null;function kI(){if(Vp)return Vp;var t,e=D_,r=e.length,n,s="value"in Ja?Ja.value:Ja.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[a-n];n++);return Vp=s.slice(t,1<n?1-n:void 0)}function Fp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zm(){return!0}function sE(){return!1}function os(t){function e(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Zm:sE,this.isPropagationStopped=sE,this}return sr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zm)},persist:function(){},isPersistent:Zm}),e}var Ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},M_=os(Ku),$f=sr({},Ku,{view:0,detail:0}),LF=os($f),Uy,zy,Od,zv=sr({},$f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:O_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Od&&(Od&&t.type==="mousemove"?(Uy=t.screenX-Od.screenX,zy=t.screenY-Od.screenY):zy=Uy=0,Od=t),Uy)},movementY:function(t){return"movementY"in t?t.movementY:zy}}),iE=os(zv),VF=sr({},zv,{dataTransfer:0}),FF=os(VF),$F=sr({},$f,{relatedTarget:0}),By=os($F),UF=sr({},Ku,{animationName:0,elapsedTime:0,pseudoElement:0}),zF=os(UF),BF=sr({},Ku,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qF=os(BF),WF=sr({},Ku,{data:0}),aE=os(WF),HF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KF[t])?!!e[t]:!1}function O_(){return YF}var QF=sr({},$f,{key:function(t){if(t.key){var e=HF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:O_,charCode:function(t){return t.type==="keypress"?Fp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JF=os(QF),XF=sr({},zv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oE=os(XF),ZF=sr({},$f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:O_}),e$=os(ZF),t$=sr({},Ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),r$=os(t$),n$=sr({},zv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),s$=os(n$),i$=[9,13,27,32],L_=la&&"CompositionEvent"in window,hh=null;la&&"documentMode"in document&&(hh=document.documentMode);var a$=la&&"TextEvent"in window&&!hh,TI=la&&(!L_||hh&&8<hh&&11>=hh),lE=" ",cE=!1;function II(t,e){switch(t){case"keyup":return i$.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vc=!1;function o$(t,e){switch(t){case"compositionend":return AI(e);case"keypress":return e.which!==32?null:(cE=!0,lE);case"textInput":return t=e.data,t===lE&&cE?null:t;default:return null}}function l$(t,e){if(Vc)return t==="compositionend"||!L_&&II(t,e)?(t=kI(),Vp=D_=Ja=null,Vc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TI&&e.locale!=="ko"?null:e.data;default:return null}}var c$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!c$[t.type]:e==="textarea"}function PI(t,e,r,n){cI(n),e=yg(e,"onChange"),0<e.length&&(r=new M_("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var fh=null,$h=null;function u$(t){BI(t,0)}function Bv(t){var e=Uc(t);if(rI(e))return t}function d$(t,e){if(t==="change")return e}var RI=!1;if(la){var qy;if(la){var Wy="oninput"in document;if(!Wy){var dE=document.createElement("div");dE.setAttribute("oninput","return;"),Wy=typeof dE.oninput=="function"}qy=Wy}else qy=!1;RI=qy&&(!document.documentMode||9<document.documentMode)}function hE(){fh&&(fh.detachEvent("onpropertychange",DI),$h=fh=null)}function DI(t){if(t.propertyName==="value"&&Bv($h)){var e=[];PI(e,$h,t,T_(t)),fI(u$,e)}}function h$(t,e,r){t==="focusin"?(hE(),fh=e,$h=r,fh.attachEvent("onpropertychange",DI)):t==="focusout"&&hE()}function f$(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bv($h)}function m$(t,e){if(t==="click")return Bv(e)}function p$(t,e){if(t==="input"||t==="change")return Bv(e)}function g$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ks=typeof Object.is=="function"?Object.is:g$;function Uh(t,e){if(Ks(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!aw.call(e,s)||!Ks(t[s],e[s]))return!1}return!0}function fE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mE(t,e){var r=fE(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fE(r)}}function MI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OI(){for(var t=window,e=hg();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=hg(t.document)}return e}function V_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function v$(t){var e=OI(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&MI(r.ownerDocument.documentElement,r)){if(n!==null&&V_(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=mE(r,a);var o=mE(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var x$=la&&"documentMode"in document&&11>=document.documentMode,Fc=null,Sw=null,mh=null,Ew=!1;function pE(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ew||Fc==null||Fc!==hg(n)||(n=Fc,"selectionStart"in n&&V_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),mh&&Uh(mh,n)||(mh=n,n=yg(Sw,"onSelect"),0<n.length&&(e=new M_("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Fc)))}function ep(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var $c={animationend:ep("Animation","AnimationEnd"),animationiteration:ep("Animation","AnimationIteration"),animationstart:ep("Animation","AnimationStart"),transitionend:ep("Transition","TransitionEnd")},Hy={},LI={};la&&(LI=document.createElement("div").style,"AnimationEvent"in window||(delete $c.animationend.animation,delete $c.animationiteration.animation,delete $c.animationstart.animation),"TransitionEvent"in window||delete $c.transitionend.transition);function qv(t){if(Hy[t])return Hy[t];if(!$c[t])return t;var e=$c[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in LI)return Hy[t]=e[r];return t}var VI=qv("animationend"),FI=qv("animationiteration"),$I=qv("animationstart"),UI=qv("transitionend"),zI=new Map,gE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Po(t,e){zI.set(t,e),Ql(e,[t])}for(var Gy=0;Gy<gE.length;Gy++){var Ky=gE[Gy],y$=Ky.toLowerCase(),w$=Ky[0].toUpperCase()+Ky.slice(1);Po(y$,"on"+w$)}Po(VI,"onAnimationEnd");Po(FI,"onAnimationIteration");Po($I,"onAnimationStart");Po("dblclick","onDoubleClick");Po("focusin","onFocus");Po("focusout","onBlur");Po(UI,"onTransitionEnd");gu("onMouseEnter",["mouseout","mouseover"]);gu("onMouseLeave",["mouseout","mouseover"]);gu("onPointerEnter",["pointerout","pointerover"]);gu("onPointerLeave",["pointerout","pointerover"]);Ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xd));function vE(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,yF(n,e,void 0,t),t.currentTarget=null}function BI(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;vE(s,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;vE(s,l,u),a=c}}}if(mg)throw t=bw,mg=!1,bw=null,t}function Ht(t,e){var r=e[Aw];r===void 0&&(r=e[Aw]=new Set);var n=t+"__bubble";r.has(n)||(qI(e,t,2,!1),r.add(n))}function Yy(t,e,r){var n=0;e&&(n|=4),qI(r,t,n,e)}var tp="_reactListening"+Math.random().toString(36).slice(2);function zh(t){if(!t[tp]){t[tp]=!0,JT.forEach(function(r){r!=="selectionchange"&&(b$.has(r)||Yy(r,!1,t),Yy(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tp]||(e[tp]=!0,Yy("selectionchange",!1,e))}}function qI(t,e,r,n){switch(CI(e)){case 1:var s=MF;break;case 4:s=OF;break;default:s=R_}r=s.bind(null,e,r,t),s=void 0,!ww||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Qy(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ll(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}fI(function(){var u=a,d=T_(r),h=[];e:{var m=zI.get(t);if(m!==void 0){var g=M_,x=t;switch(t){case"keypress":if(Fp(r)===0)break e;case"keydown":case"keyup":g=JF;break;case"focusin":x="focus",g=By;break;case"focusout":x="blur",g=By;break;case"beforeblur":case"afterblur":g=By;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=iE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=FF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=e$;break;case VI:case FI:case $I:g=zF;break;case UI:g=r$;break;case"scroll":g=LF;break;case"wheel":g=s$;break;case"copy":case"cut":case"paste":g=qF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=oE}var w=(e&4)!==0,b=!w&&t==="scroll",y=w?m!==null?m+"Capture":null:m;w=[];for(var v=u,_;v!==null;){_=v;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,y!==null&&(E=Oh(v,y),E!=null&&w.push(Bh(v,E,_)))),b)break;v=v.return}0<w.length&&(m=new g(m,x,null,r,d),h.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&r!==xw&&(x=r.relatedTarget||r.fromElement)&&(ll(x)||x[ca]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=r.relatedTarget||r.toElement,g=u,x=x?ll(x):null,x!==null&&(b=Jl(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=u),g!==x)){if(w=iE,E="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(w=oE,E="onPointerLeave",y="onPointerEnter",v="pointer"),b=g==null?m:Uc(g),_=x==null?m:Uc(x),m=new w(E,v+"leave",g,r,d),m.target=b,m.relatedTarget=_,E=null,ll(d)===u&&(w=new w(y,v+"enter",x,r,d),w.target=_,w.relatedTarget=b,E=w),b=E,g&&x)t:{for(w=g,y=x,v=0,_=w;_;_=xc(_))v++;for(_=0,E=y;E;E=xc(E))_++;for(;0<v-_;)w=xc(w),v--;for(;0<_-v;)y=xc(y),_--;for(;v--;){if(w===y||y!==null&&w===y.alternate)break t;w=xc(w),y=xc(y)}w=null}else w=null;g!==null&&xE(h,m,g,w,!1),x!==null&&b!==null&&xE(h,b,x,w,!0)}}e:{if(m=u?Uc(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var C=d$;else if(uE(m))if(RI)C=p$;else{C=f$;var D=h$}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=m$);if(C&&(C=C(t,u))){PI(h,C,r,d);break e}D&&D(t,m,u),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&fw(m,"number",m.value)}switch(D=u?Uc(u):window,t){case"focusin":(uE(D)||D.contentEditable==="true")&&(Fc=D,Sw=u,mh=null);break;case"focusout":mh=Sw=Fc=null;break;case"mousedown":Ew=!0;break;case"contextmenu":case"mouseup":case"dragend":Ew=!1,pE(h,r,d);break;case"selectionchange":if(x$)break;case"keydown":case"keyup":pE(h,r,d)}var T;if(L_)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Vc?II(t,r)&&(k="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(TI&&r.locale!=="ko"&&(Vc||k!=="onCompositionStart"?k==="onCompositionEnd"&&Vc&&(T=kI()):(Ja=d,D_="value"in Ja?Ja.value:Ja.textContent,Vc=!0)),D=yg(u,k),0<D.length&&(k=new aE(k,t,null,r,d),h.push({event:k,listeners:D}),T?k.data=T:(T=AI(r),T!==null&&(k.data=T)))),(T=a$?o$(t,r):l$(t,r))&&(u=yg(u,"onBeforeInput"),0<u.length&&(d=new aE("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=T))}BI(h,e)})}function Bh(t,e,r){return{instance:t,listener:e,currentTarget:r}}function yg(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Oh(t,r),a!=null&&n.unshift(Bh(t,a,s)),a=Oh(t,e),a!=null&&n.push(Bh(t,a,s))),t=t.return}return n}function xc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xE(t,e,r,n,s){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Oh(r,a),c!=null&&o.unshift(Bh(r,c,l))):s||(c=Oh(r,a),c!=null&&o.push(Bh(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var _$=/\r\n?/g,j$=/\u0000|\uFFFD/g;function yE(t){return(typeof t=="string"?t:""+t).replace(_$,`
`).replace(j$,"")}function rp(t,e,r){if(e=yE(e),yE(t)!==e&&r)throw Error(ce(425))}function wg(){}var Cw=null,kw=null;function Tw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Iw=typeof setTimeout=="function"?setTimeout:void 0,N$=typeof clearTimeout=="function"?clearTimeout:void 0,wE=typeof Promise=="function"?Promise:void 0,S$=typeof queueMicrotask=="function"?queueMicrotask:typeof wE<"u"?function(t){return wE.resolve(null).then(t).catch(E$)}:Iw;function E$(t){setTimeout(function(){throw t})}function Jy(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Fh(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Fh(e)}function io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Yu=Math.random().toString(36).slice(2),li="__reactFiber$"+Yu,qh="__reactProps$"+Yu,ca="__reactContainer$"+Yu,Aw="__reactEvents$"+Yu,C$="__reactListeners$"+Yu,k$="__reactHandles$"+Yu;function ll(t){var e=t[li];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ca]||r[li]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=bE(t);t!==null;){if(r=t[li])return r;t=bE(t)}return e}t=r,r=t.parentNode}return null}function Uf(t){return t=t[li]||t[ca],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Uc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function Wv(t){return t[qh]||null}var Pw=[],zc=-1;function Ro(t){return{current:t}}function Yt(t){0>zc||(t.current=Pw[zc],Pw[zc]=null,zc--)}function Ft(t,e){zc++,Pw[zc]=t.current,t.current=e}var vo={},ln=Ro(vo),On=Ro(!1),El=vo;function vu(t,e){var r=t.type.contextTypes;if(!r)return vo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ln(t){return t=t.childContextTypes,t!=null}function bg(){Yt(On),Yt(ln)}function _E(t,e,r){if(ln.current!==vo)throw Error(ce(168));Ft(ln,e),Ft(On,r)}function WI(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ce(108,hF(t)||"Unknown",s));return sr({},r,n)}function _g(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vo,El=ln.current,Ft(ln,t),Ft(On,On.current),!0}function jE(t,e,r){var n=t.stateNode;if(!n)throw Error(ce(169));r?(t=WI(t,e,El),n.__reactInternalMemoizedMergedChildContext=t,Yt(On),Yt(ln),Ft(ln,t)):Yt(On),Ft(On,r)}var Hi=null,Hv=!1,Xy=!1;function HI(t){Hi===null?Hi=[t]:Hi.push(t)}function T$(t){Hv=!0,HI(t)}function Do(){if(!Xy&&Hi!==null){Xy=!0;var t=0,e=At;try{var r=Hi;for(At=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Hi=null,Hv=!1}catch(s){throw Hi!==null&&(Hi=Hi.slice(t+1)),vI(I_,Do),s}finally{At=e,Xy=!1}}return null}var Bc=[],qc=0,jg=null,Ng=0,hs=[],fs=0,Cl=null,Yi=1,Qi="";function rl(t,e){Bc[qc++]=Ng,Bc[qc++]=jg,jg=t,Ng=e}function GI(t,e,r){hs[fs++]=Yi,hs[fs++]=Qi,hs[fs++]=Cl,Cl=t;var n=Yi;t=Qi;var s=32-Bs(n)-1;n&=~(1<<s),r+=1;var a=32-Bs(e)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Yi=1<<32-Bs(e)+s|r<<s|n,Qi=a+t}else Yi=1<<a|r<<s|n,Qi=t}function F_(t){t.return!==null&&(rl(t,1),GI(t,1,0))}function $_(t){for(;t===jg;)jg=Bc[--qc],Bc[qc]=null,Ng=Bc[--qc],Bc[qc]=null;for(;t===Cl;)Cl=hs[--fs],hs[fs]=null,Qi=hs[--fs],hs[fs]=null,Yi=hs[--fs],hs[fs]=null}var Xn=null,Kn=null,Xt=!1,Fs=null;function KI(t,e){var r=gs(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function NE(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xn=t,Kn=io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xn=t,Kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Cl!==null?{id:Yi,overflow:Qi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=gs(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Xn=t,Kn=null,!0):!1;default:return!1}}function Rw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dw(t){if(Xt){var e=Kn;if(e){var r=e;if(!NE(t,e)){if(Rw(t))throw Error(ce(418));e=io(r.nextSibling);var n=Xn;e&&NE(t,e)?KI(n,r):(t.flags=t.flags&-4097|2,Xt=!1,Xn=t)}}else{if(Rw(t))throw Error(ce(418));t.flags=t.flags&-4097|2,Xt=!1,Xn=t}}}function SE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xn=t}function np(t){if(t!==Xn)return!1;if(!Xt)return SE(t),Xt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tw(t.type,t.memoizedProps)),e&&(e=Kn)){if(Rw(t))throw YI(),Error(ce(418));for(;e;)KI(t,e),e=io(e.nextSibling)}if(SE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Kn=io(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Kn=null}}else Kn=Xn?io(t.stateNode.nextSibling):null;return!0}function YI(){for(var t=Kn;t;)t=io(t.nextSibling)}function xu(){Kn=Xn=null,Xt=!1}function U_(t){Fs===null?Fs=[t]:Fs.push(t)}var I$=ja.ReactCurrentBatchConfig;function Ld(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ce(309));var n=r.stateNode}if(!n)throw Error(ce(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ce(284));if(!r._owner)throw Error(ce(290,t))}return t}function sp(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function EE(t){var e=t._init;return e(t._payload)}function QI(t){function e(y,v){if(t){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function r(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function n(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=co(y,v),y.index=0,y.sibling=null,y}function a(y,v,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,v,_,E){return v===null||v.tag!==6?(v=i0(_,y.mode,E),v.return=y,v):(v=s(v,_),v.return=y,v)}function c(y,v,_,E){var C=_.type;return C===Lc?d(y,v,_.props.children,E,_.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Va&&EE(C)===v.type)?(E=s(v,_.props),E.ref=Ld(y,v,_),E.return=y,E):(E=Hp(_.type,_.key,_.props,null,y.mode,E),E.ref=Ld(y,v,_),E.return=y,E)}function u(y,v,_,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=a0(_,y.mode,E),v.return=y,v):(v=s(v,_.children||[]),v.return=y,v)}function d(y,v,_,E,C){return v===null||v.tag!==7?(v=gl(_,y.mode,E,C),v.return=y,v):(v=s(v,_),v.return=y,v)}function h(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=i0(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Gm:return _=Hp(v.type,v.key,v.props,null,y.mode,_),_.ref=Ld(y,null,v),_.return=y,_;case Oc:return v=a0(v,y.mode,_),v.return=y,v;case Va:var E=v._init;return h(y,E(v._payload),_)}if(Qd(v)||Pd(v))return v=gl(v,y.mode,_,null),v.return=y,v;sp(y,v)}return null}function m(y,v,_,E){var C=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:l(y,v,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Gm:return _.key===C?c(y,v,_,E):null;case Oc:return _.key===C?u(y,v,_,E):null;case Va:return C=_._init,m(y,v,C(_._payload),E)}if(Qd(_)||Pd(_))return C!==null?null:d(y,v,_,E,null);sp(y,_)}return null}function g(y,v,_,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(_)||null,l(v,y,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Gm:return y=y.get(E.key===null?_:E.key)||null,c(v,y,E,C);case Oc:return y=y.get(E.key===null?_:E.key)||null,u(v,y,E,C);case Va:var D=E._init;return g(y,v,_,D(E._payload),C)}if(Qd(E)||Pd(E))return y=y.get(_)||null,d(v,y,E,C,null);sp(v,E)}return null}function x(y,v,_,E){for(var C=null,D=null,T=v,k=v=0,R=null;T!==null&&k<_.length;k++){T.index>k?(R=T,T=null):R=T.sibling;var S=m(y,T,_[k],E);if(S===null){T===null&&(T=R);break}t&&T&&S.alternate===null&&e(y,T),v=a(S,v,k),D===null?C=S:D.sibling=S,D=S,T=R}if(k===_.length)return r(y,T),Xt&&rl(y,k),C;if(T===null){for(;k<_.length;k++)T=h(y,_[k],E),T!==null&&(v=a(T,v,k),D===null?C=T:D.sibling=T,D=T);return Xt&&rl(y,k),C}for(T=n(y,T);k<_.length;k++)R=g(T,y,k,_[k],E),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?k:R.key),v=a(R,v,k),D===null?C=R:D.sibling=R,D=R);return t&&T.forEach(function(A){return e(y,A)}),Xt&&rl(y,k),C}function w(y,v,_,E){var C=Pd(_);if(typeof C!="function")throw Error(ce(150));if(_=C.call(_),_==null)throw Error(ce(151));for(var D=C=null,T=v,k=v=0,R=null,S=_.next();T!==null&&!S.done;k++,S=_.next()){T.index>k?(R=T,T=null):R=T.sibling;var A=m(y,T,S.value,E);if(A===null){T===null&&(T=R);break}t&&T&&A.alternate===null&&e(y,T),v=a(A,v,k),D===null?C=A:D.sibling=A,D=A,T=R}if(S.done)return r(y,T),Xt&&rl(y,k),C;if(T===null){for(;!S.done;k++,S=_.next())S=h(y,S.value,E),S!==null&&(v=a(S,v,k),D===null?C=S:D.sibling=S,D=S);return Xt&&rl(y,k),C}for(T=n(y,T);!S.done;k++,S=_.next())S=g(T,y,k,S.value,E),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?k:S.key),v=a(S,v,k),D===null?C=S:D.sibling=S,D=S);return t&&T.forEach(function(P){return e(y,P)}),Xt&&rl(y,k),C}function b(y,v,_,E){if(typeof _=="object"&&_!==null&&_.type===Lc&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Gm:e:{for(var C=_.key,D=v;D!==null;){if(D.key===C){if(C=_.type,C===Lc){if(D.tag===7){r(y,D.sibling),v=s(D,_.props.children),v.return=y,y=v;break e}}else if(D.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Va&&EE(C)===D.type){r(y,D.sibling),v=s(D,_.props),v.ref=Ld(y,D,_),v.return=y,y=v;break e}r(y,D);break}else e(y,D);D=D.sibling}_.type===Lc?(v=gl(_.props.children,y.mode,E,_.key),v.return=y,y=v):(E=Hp(_.type,_.key,_.props,null,y.mode,E),E.ref=Ld(y,v,_),E.return=y,y=E)}return o(y);case Oc:e:{for(D=_.key;v!==null;){if(v.key===D)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){r(y,v.sibling),v=s(v,_.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else e(y,v);v=v.sibling}v=a0(_,y.mode,E),v.return=y,y=v}return o(y);case Va:return D=_._init,b(y,v,D(_._payload),E)}if(Qd(_))return x(y,v,_,E);if(Pd(_))return w(y,v,_,E);sp(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(r(y,v.sibling),v=s(v,_),v.return=y,y=v):(r(y,v),v=i0(_,y.mode,E),v.return=y,y=v),o(y)):r(y,v)}return b}var yu=QI(!0),JI=QI(!1),Sg=Ro(null),Eg=null,Wc=null,z_=null;function B_(){z_=Wc=Eg=null}function q_(t){var e=Sg.current;Yt(Sg),t._currentValue=e}function Mw(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function tu(t,e){Eg=t,z_=Wc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rn=!0),t.firstContext=null)}function Ns(t){var e=t._currentValue;if(z_!==t)if(t={context:t,memoizedValue:e,next:null},Wc===null){if(Eg===null)throw Error(ce(308));Wc=t,Eg.dependencies={lanes:0,firstContext:t}}else Wc=Wc.next=t;return e}var cl=null;function W_(t){cl===null?cl=[t]:cl.push(t)}function XI(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,W_(e)):(r.next=s.next,s.next=r),e.interleaved=r,ua(t,n)}function ua(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Fa=!1;function H_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ta(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ao(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,jt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ua(t,r)}return s=n.interleaved,s===null?(e.next=e,W_(n)):(e.next=s.next,s.next=e),n.interleaved=e,ua(t,r)}function $p(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,A_(t,r)}}function CE(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Cg(t,e,r,n){var s=t.updateQueue;Fa=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;o=0,d=u=c=null,l=a;do{var m=l.lane,g=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,w=l;switch(m=e,g=r,w.tag){case 1:if(x=w.payload,typeof x=="function"){h=x.call(g,h,m);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,m=typeof x=="function"?x.call(g,h,m):x,m==null)break e;h=sr({},h,m);break e;case 2:Fa=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Tl|=o,t.lanes=o,t.memoizedState=h}}function kE(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ce(191,s));s.call(n)}}}var zf={},xi=Ro(zf),Wh=Ro(zf),Hh=Ro(zf);function ul(t){if(t===zf)throw Error(ce(174));return t}function G_(t,e){switch(Ft(Hh,e),Ft(Wh,t),Ft(xi,zf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pw(e,t)}Yt(xi),Ft(xi,e)}function wu(){Yt(xi),Yt(Wh),Yt(Hh)}function eA(t){ul(Hh.current);var e=ul(xi.current),r=pw(e,t.type);e!==r&&(Ft(Wh,t),Ft(xi,r))}function K_(t){Wh.current===t&&(Yt(xi),Yt(Wh))}var rr=Ro(0);function kg(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zy=[];function Y_(){for(var t=0;t<Zy.length;t++)Zy[t]._workInProgressVersionPrimary=null;Zy.length=0}var Up=ja.ReactCurrentDispatcher,e0=ja.ReactCurrentBatchConfig,kl=0,nr=null,kr=null,Lr=null,Tg=!1,ph=!1,Gh=0,A$=0;function Jr(){throw Error(ce(321))}function Q_(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ks(t[r],e[r]))return!1;return!0}function J_(t,e,r,n,s,a){if(kl=a,nr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Up.current=t===null||t.memoizedState===null?M$:O$,t=r(n,s),ph){a=0;do{if(ph=!1,Gh=0,25<=a)throw Error(ce(301));a+=1,Lr=kr=null,e.updateQueue=null,Up.current=L$,t=r(n,s)}while(ph)}if(Up.current=Ig,e=kr!==null&&kr.next!==null,kl=0,Lr=kr=nr=null,Tg=!1,e)throw Error(ce(300));return t}function X_(){var t=Gh!==0;return Gh=0,t}function ai(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lr===null?nr.memoizedState=Lr=t:Lr=Lr.next=t,Lr}function Ss(){if(kr===null){var t=nr.alternate;t=t!==null?t.memoizedState:null}else t=kr.next;var e=Lr===null?nr.memoizedState:Lr.next;if(e!==null)Lr=e,kr=t;else{if(t===null)throw Error(ce(310));kr=t,t={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},Lr===null?nr.memoizedState=Lr=t:Lr=Lr.next=t}return Lr}function Kh(t,e){return typeof e=="function"?e(t):e}function t0(t){var e=Ss(),r=e.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=t;var n=kr,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((kl&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,nr.lanes|=d,Tl|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,Ks(n,e.memoizedState)||(Rn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,nr.lanes|=a,Tl|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function r0(t){var e=Ss(),r=e.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);Ks(a,e.memoizedState)||(Rn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function tA(){}function rA(t,e){var r=nr,n=Ss(),s=e(),a=!Ks(n.memoizedState,s);if(a&&(n.memoizedState=s,Rn=!0),n=n.queue,Z_(iA.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Lr!==null&&Lr.memoizedState.tag&1){if(r.flags|=2048,Yh(9,sA.bind(null,r,n,s,e),void 0,null),Vr===null)throw Error(ce(349));kl&30||nA(r,e,s)}return s}function nA(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=nr.updateQueue,e===null?(e={lastEffect:null,stores:null},nr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function sA(t,e,r,n){e.value=r,e.getSnapshot=n,aA(e)&&oA(t)}function iA(t,e,r){return r(function(){aA(e)&&oA(t)})}function aA(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ks(t,r)}catch{return!0}}function oA(t){var e=ua(t,1);e!==null&&qs(e,t,1,-1)}function TE(t){var e=ai();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kh,lastRenderedState:t},e.queue=t,t=t.dispatch=D$.bind(null,nr,t),[e.memoizedState,t]}function Yh(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=nr.updateQueue,e===null?(e={lastEffect:null,stores:null},nr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function lA(){return Ss().memoizedState}function zp(t,e,r,n){var s=ai();nr.flags|=t,s.memoizedState=Yh(1|e,r,void 0,n===void 0?null:n)}function Gv(t,e,r,n){var s=Ss();n=n===void 0?null:n;var a=void 0;if(kr!==null){var o=kr.memoizedState;if(a=o.destroy,n!==null&&Q_(n,o.deps)){s.memoizedState=Yh(e,r,a,n);return}}nr.flags|=t,s.memoizedState=Yh(1|e,r,a,n)}function IE(t,e){return zp(8390656,8,t,e)}function Z_(t,e){return Gv(2048,8,t,e)}function cA(t,e){return Gv(4,2,t,e)}function uA(t,e){return Gv(4,4,t,e)}function dA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hA(t,e,r){return r=r!=null?r.concat([t]):null,Gv(4,4,dA.bind(null,e,t),r)}function e1(){}function fA(t,e){var r=Ss();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Q_(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function mA(t,e){var r=Ss();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Q_(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function pA(t,e,r){return kl&21?(Ks(r,e)||(r=wI(),nr.lanes|=r,Tl|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rn=!0),t.memoizedState=r)}function P$(t,e){var r=At;At=r!==0&&4>r?r:4,t(!0);var n=e0.transition;e0.transition={};try{t(!1),e()}finally{At=r,e0.transition=n}}function gA(){return Ss().memoizedState}function R$(t,e,r){var n=lo(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},vA(t))xA(e,r);else if(r=XI(t,e,r,n),r!==null){var s=yn();qs(r,t,n,s),yA(r,e,n)}}function D$(t,e,r){var n=lo(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(vA(t))xA(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,Ks(l,o)){var c=e.interleaved;c===null?(s.next=s,W_(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=XI(t,e,s,n),r!==null&&(s=yn(),qs(r,t,n,s),yA(r,e,n))}}function vA(t){var e=t.alternate;return t===nr||e!==null&&e===nr}function xA(t,e){ph=Tg=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function yA(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,A_(t,r)}}var Ig={readContext:Ns,useCallback:Jr,useContext:Jr,useEffect:Jr,useImperativeHandle:Jr,useInsertionEffect:Jr,useLayoutEffect:Jr,useMemo:Jr,useReducer:Jr,useRef:Jr,useState:Jr,useDebugValue:Jr,useDeferredValue:Jr,useTransition:Jr,useMutableSource:Jr,useSyncExternalStore:Jr,useId:Jr,unstable_isNewReconciler:!1},M$={readContext:Ns,useCallback:function(t,e){return ai().memoizedState=[t,e===void 0?null:e],t},useContext:Ns,useEffect:IE,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,zp(4194308,4,dA.bind(null,e,t),r)},useLayoutEffect:function(t,e){return zp(4194308,4,t,e)},useInsertionEffect:function(t,e){return zp(4,2,t,e)},useMemo:function(t,e){var r=ai();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ai();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=R$.bind(null,nr,t),[n.memoizedState,t]},useRef:function(t){var e=ai();return t={current:t},e.memoizedState=t},useState:TE,useDebugValue:e1,useDeferredValue:function(t){return ai().memoizedState=t},useTransition:function(){var t=TE(!1),e=t[0];return t=P$.bind(null,t[1]),ai().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=nr,s=ai();if(Xt){if(r===void 0)throw Error(ce(407));r=r()}else{if(r=e(),Vr===null)throw Error(ce(349));kl&30||nA(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,IE(iA.bind(null,n,a,t),[t]),n.flags|=2048,Yh(9,sA.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=ai(),e=Vr.identifierPrefix;if(Xt){var r=Qi,n=Yi;r=(n&~(1<<32-Bs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Gh++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=A$++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},O$={readContext:Ns,useCallback:fA,useContext:Ns,useEffect:Z_,useImperativeHandle:hA,useInsertionEffect:cA,useLayoutEffect:uA,useMemo:mA,useReducer:t0,useRef:lA,useState:function(){return t0(Kh)},useDebugValue:e1,useDeferredValue:function(t){var e=Ss();return pA(e,kr.memoizedState,t)},useTransition:function(){var t=t0(Kh)[0],e=Ss().memoizedState;return[t,e]},useMutableSource:tA,useSyncExternalStore:rA,useId:gA,unstable_isNewReconciler:!1},L$={readContext:Ns,useCallback:fA,useContext:Ns,useEffect:Z_,useImperativeHandle:hA,useInsertionEffect:cA,useLayoutEffect:uA,useMemo:mA,useReducer:r0,useRef:lA,useState:function(){return r0(Kh)},useDebugValue:e1,useDeferredValue:function(t){var e=Ss();return kr===null?e.memoizedState=t:pA(e,kr.memoizedState,t)},useTransition:function(){var t=r0(Kh)[0],e=Ss().memoizedState;return[t,e]},useMutableSource:tA,useSyncExternalStore:rA,useId:gA,unstable_isNewReconciler:!1};function Ms(t,e){if(t&&t.defaultProps){e=sr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Ow(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:sr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Kv={isMounted:function(t){return(t=t._reactInternals)?Jl(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=yn(),s=lo(t),a=ta(n,s);a.payload=e,r!=null&&(a.callback=r),e=ao(t,a,s),e!==null&&(qs(e,t,s,n),$p(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=yn(),s=lo(t),a=ta(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=ao(t,a,s),e!==null&&(qs(e,t,s,n),$p(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=yn(),n=lo(t),s=ta(r,n);s.tag=2,e!=null&&(s.callback=e),e=ao(t,s,n),e!==null&&(qs(e,t,n,r),$p(e,t,n))}};function AE(t,e,r,n,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Uh(r,n)||!Uh(s,a):!0}function wA(t,e,r){var n=!1,s=vo,a=e.contextType;return typeof a=="object"&&a!==null?a=Ns(a):(s=Ln(e)?El:ln.current,n=e.contextTypes,a=(n=n!=null)?vu(t,s):vo),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kv,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function PE(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Kv.enqueueReplaceState(e,e.state,null)}function Lw(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},H_(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Ns(a):(a=Ln(e)?El:ln.current,s.context=vu(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Ow(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Kv.enqueueReplaceState(s,s.state,null),Cg(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function bu(t,e){try{var r="",n=e;do r+=dF(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function n0(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Vw(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var V$=typeof WeakMap=="function"?WeakMap:Map;function bA(t,e,r){r=ta(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Pg||(Pg=!0,Kw=n),Vw(t,e)},r}function _A(t,e,r){r=ta(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Vw(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Vw(t,e),typeof n!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function RE(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new V$;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=X$.bind(null,t,e,r),e.then(t,t))}function DE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ME(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ta(-1,1),e.tag=2,ao(r,e,1))),r.lanes|=1),t)}var F$=ja.ReactCurrentOwner,Rn=!1;function pn(t,e,r,n){e.child=t===null?JI(e,null,r,n):yu(e,t.child,r,n)}function OE(t,e,r,n,s){r=r.render;var a=e.ref;return tu(e,s),n=J_(t,e,r,n,a,s),r=X_(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,da(t,e,s)):(Xt&&r&&F_(e),e.flags|=1,pn(t,e,n,s),e.child)}function LE(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!l1(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,jA(t,e,a,n,s)):(t=Hp(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Uh,r(o,n)&&t.ref===e.ref)return da(t,e,s)}return e.flags|=1,t=co(a,n),t.ref=e.ref,t.return=e,e.child=t}function jA(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(Uh(a,n)&&t.ref===e.ref)if(Rn=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(Rn=!0);else return e.lanes=t.lanes,da(t,e,s)}return Fw(t,e,r,n,s)}function NA(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(Gc,Wn),Wn|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ft(Gc,Wn),Wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Ft(Gc,Wn),Wn|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Ft(Gc,Wn),Wn|=n;return pn(t,e,s,r),e.child}function SA(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Fw(t,e,r,n,s){var a=Ln(r)?El:ln.current;return a=vu(e,a),tu(e,s),r=J_(t,e,r,n,a,s),n=X_(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,da(t,e,s)):(Xt&&n&&F_(e),e.flags|=1,pn(t,e,r,s),e.child)}function VE(t,e,r,n,s){if(Ln(r)){var a=!0;_g(e)}else a=!1;if(tu(e,s),e.stateNode===null)Bp(t,e),wA(e,r,n),Lw(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ns(u):(u=Ln(r)?El:ln.current,u=vu(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&PE(e,o,n,u),Fa=!1;var m=e.memoizedState;o.state=m,Cg(e,n,o,s),c=e.memoizedState,l!==n||m!==c||On.current||Fa?(typeof d=="function"&&(Ow(e,r,d,n),c=e.memoizedState),(l=Fa||AE(e,r,l,n,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,ZI(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ms(e.type,l),o.props=u,h=e.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ns(c):(c=Ln(r)?El:ln.current,c=vu(e,c));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&PE(e,o,n,c),Fa=!1,m=e.memoizedState,o.state=m,Cg(e,n,o,s);var x=e.memoizedState;l!==h||m!==x||On.current||Fa?(typeof g=="function"&&(Ow(e,r,g,n),x=e.memoizedState),(u=Fa||AE(e,r,u,n,m,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return $w(t,e,r,n,a,s)}function $w(t,e,r,n,s,a){SA(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&jE(e,r,!1),da(t,e,a);n=e.stateNode,F$.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=yu(e,t.child,null,a),e.child=yu(e,null,l,a)):pn(t,e,l,a),e.memoizedState=n.state,s&&jE(e,r,!0),e.child}function EA(t){var e=t.stateNode;e.pendingContext?_E(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_E(t,e.context,!1),G_(t,e.containerInfo)}function FE(t,e,r,n,s){return xu(),U_(s),e.flags|=256,pn(t,e,r,n),e.child}var Uw={dehydrated:null,treeContext:null,retryLane:0};function zw(t){return{baseLanes:t,cachePool:null,transitions:null}}function CA(t,e,r){var n=e.pendingProps,s=rr.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ft(rr,s&1),t===null)return Dw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Jv(o,n,0,null),t=gl(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=zw(r),e.memoizedState=Uw,t):t1(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return $$(t,e,o,n,l,s,r);if(a){a=n.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=co(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=co(l,a):(a=gl(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?zw(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Uw,n}return a=t.child,t=a.sibling,n=co(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function t1(t,e){return e=Jv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ip(t,e,r,n){return n!==null&&U_(n),yu(e,t.child,null,r),t=t1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $$(t,e,r,n,s,a,o){if(r)return e.flags&256?(e.flags&=-257,n=n0(Error(ce(422))),ip(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=Jv({mode:"visible",children:n.children},s,0,null),a=gl(a,s,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&yu(e,t.child,null,o),e.child.memoizedState=zw(o),e.memoizedState=Uw,a);if(!(e.mode&1))return ip(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ce(419)),n=n0(a,n,void 0),ip(t,e,o,n)}if(l=(o&t.childLanes)!==0,Rn||l){if(n=Vr,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ua(t,s),qs(n,t,s,-1))}return o1(),n=n0(Error(ce(421))),ip(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Z$.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Kn=io(s.nextSibling),Xn=e,Xt=!0,Fs=null,t!==null&&(hs[fs++]=Yi,hs[fs++]=Qi,hs[fs++]=Cl,Yi=t.id,Qi=t.overflow,Cl=e),e=t1(e,n.children),e.flags|=4096,e)}function $E(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Mw(t.return,e,r)}function s0(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function kA(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(pn(t,e,n.children,r),n=rr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$E(t,r,e);else if(t.tag===19)$E(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ft(rr,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&kg(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),s0(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&kg(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}s0(e,!0,r,null,a);break;case"together":s0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function da(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Tl|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,r=co(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=co(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function U$(t,e,r){switch(e.tag){case 3:EA(e),xu();break;case 5:eA(e);break;case 1:Ln(e.type)&&_g(e);break;case 4:G_(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Ft(Sg,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ft(rr,rr.current&1),e.flags|=128,null):r&e.child.childLanes?CA(t,e,r):(Ft(rr,rr.current&1),t=da(t,e,r),t!==null?t.sibling:null);Ft(rr,rr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return kA(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ft(rr,rr.current),n)break;return null;case 22:case 23:return e.lanes=0,NA(t,e,r)}return da(t,e,r)}var TA,Bw,IA,AA;TA=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bw=function(){};IA=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,ul(xi.current);var a=null;switch(r){case"input":s=dw(t,s),n=dw(t,n),a=[];break;case"select":s=sr({},s,{value:void 0}),n=sr({},n,{value:void 0}),a=[];break;case"textarea":s=mw(t,s),n=mw(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=wg)}gw(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Dh.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Dh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ht("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};AA=function(t,e,r,n){r!==n&&(e.flags|=4)};function Vd(t,e){if(!Xt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Xr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function z$(t,e,r){var n=e.pendingProps;switch($_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(e),null;case 1:return Ln(e.type)&&bg(),Xr(e),null;case 3:return n=e.stateNode,wu(),Yt(On),Yt(ln),Y_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(np(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fs!==null&&(Jw(Fs),Fs=null))),Bw(t,e),Xr(e),null;case 5:K_(e);var s=ul(Hh.current);if(r=e.type,t!==null&&e.stateNode!=null)IA(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ce(166));return Xr(e),null}if(t=ul(xi.current),np(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[li]=e,n[qh]=a,t=(e.mode&1)!==0,r){case"dialog":Ht("cancel",n),Ht("close",n);break;case"iframe":case"object":case"embed":Ht("load",n);break;case"video":case"audio":for(s=0;s<Xd.length;s++)Ht(Xd[s],n);break;case"source":Ht("error",n);break;case"img":case"image":case"link":Ht("error",n),Ht("load",n);break;case"details":Ht("toggle",n);break;case"input":YS(n,a),Ht("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ht("invalid",n);break;case"textarea":JS(n,a),Ht("invalid",n)}gw(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&rp(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&rp(n.textContent,l,t),s=["children",""+l]):Dh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ht("scroll",n)}switch(r){case"input":Km(n),QS(n,a,!0);break;case"textarea":Km(n),XS(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=wg)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iI(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[li]=e,t[qh]=n,TA(t,e,!1,!1),e.stateNode=t;e:{switch(o=vw(r,n),r){case"dialog":Ht("cancel",t),Ht("close",t),s=n;break;case"iframe":case"object":case"embed":Ht("load",t),s=n;break;case"video":case"audio":for(s=0;s<Xd.length;s++)Ht(Xd[s],t);s=n;break;case"source":Ht("error",t),s=n;break;case"img":case"image":case"link":Ht("error",t),Ht("load",t),s=n;break;case"details":Ht("toggle",t),s=n;break;case"input":YS(t,n),s=dw(t,n),Ht("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=sr({},n,{value:void 0}),Ht("invalid",t);break;case"textarea":JS(t,n),s=mw(t,n),Ht("invalid",t);break;default:s=n}gw(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?lI(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&aI(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Mh(t,c):typeof c=="number"&&Mh(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Dh.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ht("scroll",t):c!=null&&S_(t,a,c,o))}switch(r){case"input":Km(t),QS(t,n,!1);break;case"textarea":Km(t),XS(t);break;case"option":n.value!=null&&t.setAttribute("value",""+go(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Jc(t,!!n.multiple,a,!1):n.defaultValue!=null&&Jc(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=wg)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xr(e),null;case 6:if(t&&e.stateNode!=null)AA(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ce(166));if(r=ul(Hh.current),ul(xi.current),np(e)){if(n=e.stateNode,r=e.memoizedProps,n[li]=e,(a=n.nodeValue!==r)&&(t=Xn,t!==null))switch(t.tag){case 3:rp(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rp(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[li]=e,e.stateNode=n}return Xr(e),null;case 13:if(Yt(rr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xt&&Kn!==null&&e.mode&1&&!(e.flags&128))YI(),xu(),e.flags|=98560,a=!1;else if(a=np(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(ce(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ce(317));a[li]=e}else xu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xr(e),a=!1}else Fs!==null&&(Jw(Fs),Fs=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||rr.current&1?Tr===0&&(Tr=3):o1())),e.updateQueue!==null&&(e.flags|=4),Xr(e),null);case 4:return wu(),Bw(t,e),t===null&&zh(e.stateNode.containerInfo),Xr(e),null;case 10:return q_(e.type._context),Xr(e),null;case 17:return Ln(e.type)&&bg(),Xr(e),null;case 19:if(Yt(rr),a=e.memoizedState,a===null)return Xr(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Vd(a,!1);else{if(Tr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kg(t),o!==null){for(e.flags|=128,Vd(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ft(rr,rr.current&1|2),e.child}t=t.sibling}a.tail!==null&&mr()>_u&&(e.flags|=128,n=!0,Vd(a,!1),e.lanes=4194304)}else{if(!n)if(t=kg(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Vd(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Xt)return Xr(e),null}else 2*mr()-a.renderingStartTime>_u&&r!==1073741824&&(e.flags|=128,n=!0,Vd(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=mr(),e.sibling=null,r=rr.current,Ft(rr,n?r&1|2:r&1),e):(Xr(e),null);case 22:case 23:return a1(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Wn&1073741824&&(Xr(e),e.subtreeFlags&6&&(e.flags|=8192)):Xr(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function B$(t,e){switch($_(e),e.tag){case 1:return Ln(e.type)&&bg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wu(),Yt(On),Yt(ln),Y_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return K_(e),null;case 13:if(Yt(rr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));xu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Yt(rr),null;case 4:return wu(),null;case 10:return q_(e.type._context),null;case 22:case 23:return a1(),null;case 24:return null;default:return null}}var ap=!1,tn=!1,q$=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Hc(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){lr(t,e,n)}else r.current=null}function qw(t,e,r){try{r()}catch(n){lr(t,e,n)}}var UE=!1;function W$(t,e){if(Cw=vg,t=OI(),V_(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var g;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===r&&++u===s&&(l=o),m===a&&++d===n&&(c=o),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(kw={focusedElem:t,selectionRange:r},vg=!1,Ae=e;Ae!==null;)if(e=Ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ae=t;else for(;Ae!==null;){e=Ae;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,b=x.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:Ms(e.type,w),b);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(E){lr(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}return x=UE,UE=!1,x}function gh(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&qw(e,r,a)}s=s.next}while(s!==n)}}function Yv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Ww(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function PA(t){var e=t.alternate;e!==null&&(t.alternate=null,PA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[li],delete e[qh],delete e[Aw],delete e[C$],delete e[k$])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function RA(t){return t.tag===5||t.tag===3||t.tag===4}function zE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||RA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hw(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=wg));else if(n!==4&&(t=t.child,t!==null))for(Hw(t,e,r),t=t.sibling;t!==null;)Hw(t,e,r),t=t.sibling}function Gw(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Gw(t,e,r),t=t.sibling;t!==null;)Gw(t,e,r),t=t.sibling}var $r=null,Os=!1;function Aa(t,e,r){for(r=r.child;r!==null;)DA(t,e,r),r=r.sibling}function DA(t,e,r){if(vi&&typeof vi.onCommitFiberUnmount=="function")try{vi.onCommitFiberUnmount(Uv,r)}catch{}switch(r.tag){case 5:tn||Hc(r,e);case 6:var n=$r,s=Os;$r=null,Aa(t,e,r),$r=n,Os=s,$r!==null&&(Os?(t=$r,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):$r.removeChild(r.stateNode));break;case 18:$r!==null&&(Os?(t=$r,r=r.stateNode,t.nodeType===8?Jy(t.parentNode,r):t.nodeType===1&&Jy(t,r),Fh(t)):Jy($r,r.stateNode));break;case 4:n=$r,s=Os,$r=r.stateNode.containerInfo,Os=!0,Aa(t,e,r),$r=n,Os=s;break;case 0:case 11:case 14:case 15:if(!tn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&qw(r,e,o),s=s.next}while(s!==n)}Aa(t,e,r);break;case 1:if(!tn&&(Hc(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){lr(r,e,l)}Aa(t,e,r);break;case 21:Aa(t,e,r);break;case 22:r.mode&1?(tn=(n=tn)||r.memoizedState!==null,Aa(t,e,r),tn=n):Aa(t,e,r);break;default:Aa(t,e,r)}}function BE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new q$),e.forEach(function(n){var s=e8.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function As(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:$r=l.stateNode,Os=!1;break e;case 3:$r=l.stateNode.containerInfo,Os=!0;break e;case 4:$r=l.stateNode.containerInfo,Os=!0;break e}l=l.return}if($r===null)throw Error(ce(160));DA(a,o,s),$r=null,Os=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){lr(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MA(e,t),e=e.sibling}function MA(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(As(e,t),si(t),n&4){try{gh(3,t,t.return),Yv(3,t)}catch(w){lr(t,t.return,w)}try{gh(5,t,t.return)}catch(w){lr(t,t.return,w)}}break;case 1:As(e,t),si(t),n&512&&r!==null&&Hc(r,r.return);break;case 5:if(As(e,t),si(t),n&512&&r!==null&&Hc(r,r.return),t.flags&32){var s=t.stateNode;try{Mh(s,"")}catch(w){lr(t,t.return,w)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&nI(s,a),vw(l,o);var u=vw(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?lI(s,h):d==="dangerouslySetInnerHTML"?aI(s,h):d==="children"?Mh(s,h):S_(s,d,h,u)}switch(l){case"input":hw(s,a);break;case"textarea":sI(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Jc(s,!!a.multiple,g,!1):m!==!!a.multiple&&(a.defaultValue!=null?Jc(s,!!a.multiple,a.defaultValue,!0):Jc(s,!!a.multiple,a.multiple?[]:"",!1))}s[qh]=a}catch(w){lr(t,t.return,w)}}break;case 6:if(As(e,t),si(t),n&4){if(t.stateNode===null)throw Error(ce(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(w){lr(t,t.return,w)}}break;case 3:if(As(e,t),si(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Fh(e.containerInfo)}catch(w){lr(t,t.return,w)}break;case 4:As(e,t),si(t);break;case 13:As(e,t),si(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(s1=mr())),n&4&&BE(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(tn=(u=tn)||d,As(e,t),tn=u):As(e,t),si(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Ae=t,d=t.child;d!==null;){for(h=Ae=d;Ae!==null;){switch(m=Ae,g=m.child,m.tag){case 0:case 11:case 14:case 15:gh(4,m,m.return);break;case 1:Hc(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(w){lr(n,r,w)}}break;case 5:Hc(m,m.return);break;case 22:if(m.memoizedState!==null){WE(h);continue}}g!==null?(g.return=m,Ae=g):WE(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=oI("display",o))}catch(w){lr(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){lr(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:As(e,t),si(t),n&4&&BE(t);break;case 21:break;default:As(e,t),si(t)}}function si(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(RA(r)){var n=r;break e}r=r.return}throw Error(ce(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Mh(s,""),n.flags&=-33);var a=zE(t);Gw(t,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=zE(t);Hw(t,l,o);break;default:throw Error(ce(161))}}catch(c){lr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function H$(t,e,r){Ae=t,OA(t)}function OA(t,e,r){for(var n=(t.mode&1)!==0;Ae!==null;){var s=Ae,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ap;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||tn;l=ap;var u=tn;if(ap=o,(tn=c)&&!u)for(Ae=s;Ae!==null;)o=Ae,c=o.child,o.tag===22&&o.memoizedState!==null?HE(s):c!==null?(c.return=o,Ae=c):HE(s);for(;a!==null;)Ae=a,OA(a),a=a.sibling;Ae=s,ap=l,tn=u}qE(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Ae=a):qE(t)}}function qE(t){for(;Ae!==null;){var e=Ae;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tn||Yv(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!tn)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ms(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&kE(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}kE(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Fh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}tn||e.flags&512&&Ww(e)}catch(m){lr(e,e.return,m)}}if(e===t){Ae=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ae=r;break}Ae=e.return}}function WE(t){for(;Ae!==null;){var e=Ae;if(e===t){Ae=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ae=r;break}Ae=e.return}}function HE(t){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Yv(4,e)}catch(c){lr(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){lr(e,s,c)}}var a=e.return;try{Ww(e)}catch(c){lr(e,a,c)}break;case 5:var o=e.return;try{Ww(e)}catch(c){lr(e,o,c)}}}catch(c){lr(e,e.return,c)}if(e===t){Ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ae=l;break}Ae=e.return}}var G$=Math.ceil,Ag=ja.ReactCurrentDispatcher,r1=ja.ReactCurrentOwner,xs=ja.ReactCurrentBatchConfig,jt=0,Vr=null,wr=null,qr=0,Wn=0,Gc=Ro(0),Tr=0,Qh=null,Tl=0,Qv=0,n1=0,vh=null,Tn=null,s1=0,_u=1/0,qi=null,Pg=!1,Kw=null,oo=null,op=!1,Xa=null,Rg=0,xh=0,Yw=null,qp=-1,Wp=0;function yn(){return jt&6?mr():qp!==-1?qp:qp=mr()}function lo(t){return t.mode&1?jt&2&&qr!==0?qr&-qr:I$.transition!==null?(Wp===0&&(Wp=wI()),Wp):(t=At,t!==0||(t=window.event,t=t===void 0?16:CI(t.type)),t):1}function qs(t,e,r,n){if(50<xh)throw xh=0,Yw=null,Error(ce(185));Ff(t,r,n),(!(jt&2)||t!==Vr)&&(t===Vr&&(!(jt&2)&&(Qv|=r),Tr===4&&za(t,qr)),Vn(t,n),r===1&&jt===0&&!(e.mode&1)&&(_u=mr()+500,Hv&&Do()))}function Vn(t,e){var r=t.callbackNode;IF(t,e);var n=gg(t,t===Vr?qr:0);if(n===0)r!==null&&tE(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&tE(r),e===1)t.tag===0?T$(GE.bind(null,t)):HI(GE.bind(null,t)),S$(function(){!(jt&6)&&Do()}),r=null;else{switch(bI(n)){case 1:r=I_;break;case 4:r=xI;break;case 16:r=pg;break;case 536870912:r=yI;break;default:r=pg}r=qA(r,LA.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function LA(t,e){if(qp=-1,Wp=0,jt&6)throw Error(ce(327));var r=t.callbackNode;if(ru()&&t.callbackNode!==r)return null;var n=gg(t,t===Vr?qr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Dg(t,n);else{e=n;var s=jt;jt|=2;var a=FA();(Vr!==t||qr!==e)&&(qi=null,_u=mr()+500,pl(t,e));do try{Q$();break}catch(l){VA(t,l)}while(!0);B_(),Ag.current=a,jt=s,wr!==null?e=0:(Vr=null,qr=0,e=Tr)}if(e!==0){if(e===2&&(s=_w(t),s!==0&&(n=s,e=Qw(t,s))),e===1)throw r=Qh,pl(t,0),za(t,n),Vn(t,mr()),r;if(e===6)za(t,n);else{if(s=t.current.alternate,!(n&30)&&!K$(s)&&(e=Dg(t,n),e===2&&(a=_w(t),a!==0&&(n=a,e=Qw(t,a))),e===1))throw r=Qh,pl(t,0),za(t,n),Vn(t,mr()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ce(345));case 2:nl(t,Tn,qi);break;case 3:if(za(t,n),(n&130023424)===n&&(e=s1+500-mr(),10<e)){if(gg(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){yn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Iw(nl.bind(null,t,Tn,qi),e);break}nl(t,Tn,qi);break;case 4:if(za(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-Bs(n);a=1<<o,o=e[o],o>s&&(s=o),n&=~a}if(n=s,n=mr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*G$(n/1960))-n,10<n){t.timeoutHandle=Iw(nl.bind(null,t,Tn,qi),n);break}nl(t,Tn,qi);break;case 5:nl(t,Tn,qi);break;default:throw Error(ce(329))}}}return Vn(t,mr()),t.callbackNode===r?LA.bind(null,t):null}function Qw(t,e){var r=vh;return t.current.memoizedState.isDehydrated&&(pl(t,e).flags|=256),t=Dg(t,e),t!==2&&(e=Tn,Tn=r,e!==null&&Jw(e)),t}function Jw(t){Tn===null?Tn=t:Tn.push.apply(Tn,t)}function K$(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!Ks(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function za(t,e){for(e&=~n1,e&=~Qv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Bs(e),n=1<<r;t[r]=-1,e&=~n}}function GE(t){if(jt&6)throw Error(ce(327));ru();var e=gg(t,0);if(!(e&1))return Vn(t,mr()),null;var r=Dg(t,e);if(t.tag!==0&&r===2){var n=_w(t);n!==0&&(e=n,r=Qw(t,n))}if(r===1)throw r=Qh,pl(t,0),za(t,e),Vn(t,mr()),r;if(r===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,nl(t,Tn,qi),Vn(t,mr()),null}function i1(t,e){var r=jt;jt|=1;try{return t(e)}finally{jt=r,jt===0&&(_u=mr()+500,Hv&&Do())}}function Il(t){Xa!==null&&Xa.tag===0&&!(jt&6)&&ru();var e=jt;jt|=1;var r=xs.transition,n=At;try{if(xs.transition=null,At=1,t)return t()}finally{At=n,xs.transition=r,jt=e,!(jt&6)&&Do()}}function a1(){Wn=Gc.current,Yt(Gc)}function pl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,N$(r)),wr!==null)for(r=wr.return;r!==null;){var n=r;switch($_(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bg();break;case 3:wu(),Yt(On),Yt(ln),Y_();break;case 5:K_(n);break;case 4:wu();break;case 13:Yt(rr);break;case 19:Yt(rr);break;case 10:q_(n.type._context);break;case 22:case 23:a1()}r=r.return}if(Vr=t,wr=t=co(t.current,null),qr=Wn=e,Tr=0,Qh=null,n1=Qv=Tl=0,Tn=vh=null,cl!==null){for(e=0;e<cl.length;e++)if(r=cl[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}cl=null}return t}function VA(t,e){do{var r=wr;try{if(B_(),Up.current=Ig,Tg){for(var n=nr.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Tg=!1}if(kl=0,Lr=kr=nr=null,ph=!1,Gh=0,r1.current=null,r===null||r.return===null){Tr=1,Qh=e,wr=null;break}e:{var a=t,o=r.return,l=r,c=e;if(e=qr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=DE(o);if(g!==null){g.flags&=-257,ME(g,o,l,a,e),g.mode&1&&RE(a,u,e),e=g,c=u;var x=e.updateQueue;if(x===null){var w=new Set;w.add(c),e.updateQueue=w}else x.add(c);break e}else{if(!(e&1)){RE(a,u,e),o1();break e}c=Error(ce(426))}}else if(Xt&&l.mode&1){var b=DE(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ME(b,o,l,a,e),U_(bu(c,l));break e}}a=c=bu(c,l),Tr!==4&&(Tr=2),vh===null?vh=[a]:vh.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=bA(a,c,e);CE(a,y);break e;case 1:l=c;var v=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(oo===null||!oo.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var E=_A(a,l,e);CE(a,E);break e}}a=a.return}while(a!==null)}UA(r)}catch(C){e=C,wr===r&&r!==null&&(wr=r=r.return);continue}break}while(!0)}function FA(){var t=Ag.current;return Ag.current=Ig,t===null?Ig:t}function o1(){(Tr===0||Tr===3||Tr===2)&&(Tr=4),Vr===null||!(Tl&268435455)&&!(Qv&268435455)||za(Vr,qr)}function Dg(t,e){var r=jt;jt|=2;var n=FA();(Vr!==t||qr!==e)&&(qi=null,pl(t,e));do try{Y$();break}catch(s){VA(t,s)}while(!0);if(B_(),jt=r,Ag.current=n,wr!==null)throw Error(ce(261));return Vr=null,qr=0,Tr}function Y$(){for(;wr!==null;)$A(wr)}function Q$(){for(;wr!==null&&!bF();)$A(wr)}function $A(t){var e=BA(t.alternate,t,Wn);t.memoizedProps=t.pendingProps,e===null?UA(t):wr=e,r1.current=null}function UA(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=B$(r,e),r!==null){r.flags&=32767,wr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tr=6,wr=null;return}}else if(r=z$(r,e,Wn),r!==null){wr=r;return}if(e=e.sibling,e!==null){wr=e;return}wr=e=t}while(e!==null);Tr===0&&(Tr=5)}function nl(t,e,r){var n=At,s=xs.transition;try{xs.transition=null,At=1,J$(t,e,r,n)}finally{xs.transition=s,At=n}return null}function J$(t,e,r,n){do ru();while(Xa!==null);if(jt&6)throw Error(ce(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(AF(t,a),t===Vr&&(wr=Vr=null,qr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||op||(op=!0,qA(pg,function(){return ru(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=xs.transition,xs.transition=null;var o=At;At=1;var l=jt;jt|=4,r1.current=null,W$(t,r),MA(r,t),v$(kw),vg=!!Cw,kw=Cw=null,t.current=r,H$(r),_F(),jt=l,At=o,xs.transition=a}else t.current=r;if(op&&(op=!1,Xa=t,Rg=s),a=t.pendingLanes,a===0&&(oo=null),SF(r.stateNode),Vn(t,mr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Pg)throw Pg=!1,t=Kw,Kw=null,t;return Rg&1&&t.tag!==0&&ru(),a=t.pendingLanes,a&1?t===Yw?xh++:(xh=0,Yw=t):xh=0,Do(),null}function ru(){if(Xa!==null){var t=bI(Rg),e=xs.transition,r=At;try{if(xs.transition=null,At=16>t?16:t,Xa===null)var n=!1;else{if(t=Xa,Xa=null,Rg=0,jt&6)throw Error(ce(331));var s=jt;for(jt|=4,Ae=t.current;Ae!==null;){var a=Ae,o=a.child;if(Ae.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ae=u;Ae!==null;){var d=Ae;switch(d.tag){case 0:case 11:case 15:gh(8,d,a)}var h=d.child;if(h!==null)h.return=d,Ae=h;else for(;Ae!==null;){d=Ae;var m=d.sibling,g=d.return;if(PA(d),d===u){Ae=null;break}if(m!==null){m.return=g,Ae=m;break}Ae=g}}}var x=a.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}Ae=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ae=o;else e:for(;Ae!==null;){if(a=Ae,a.flags&2048)switch(a.tag){case 0:case 11:case 15:gh(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,Ae=y;break e}Ae=a.return}}var v=t.current;for(Ae=v;Ae!==null;){o=Ae;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ae=_;else e:for(o=v;Ae!==null;){if(l=Ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yv(9,l)}}catch(C){lr(l,l.return,C)}if(l===o){Ae=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,Ae=E;break e}Ae=l.return}}if(jt=s,Do(),vi&&typeof vi.onPostCommitFiberRoot=="function")try{vi.onPostCommitFiberRoot(Uv,t)}catch{}n=!0}return n}finally{At=r,xs.transition=e}}return!1}function KE(t,e,r){e=bu(r,e),e=bA(t,e,1),t=ao(t,e,1),e=yn(),t!==null&&(Ff(t,1,e),Vn(t,e))}function lr(t,e,r){if(t.tag===3)KE(t,t,r);else for(;e!==null;){if(e.tag===3){KE(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(oo===null||!oo.has(n))){t=bu(r,t),t=_A(e,t,1),e=ao(e,t,1),t=yn(),e!==null&&(Ff(e,1,t),Vn(e,t));break}}e=e.return}}function X$(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&r,Vr===t&&(qr&r)===r&&(Tr===4||Tr===3&&(qr&130023424)===qr&&500>mr()-s1?pl(t,0):n1|=r),Vn(t,e)}function zA(t,e){e===0&&(t.mode&1?(e=Jm,Jm<<=1,!(Jm&130023424)&&(Jm=4194304)):e=1);var r=yn();t=ua(t,e),t!==null&&(Ff(t,e,r),Vn(t,r))}function Z$(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),zA(t,r)}function e8(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ce(314))}n!==null&&n.delete(e),zA(t,r)}var BA;BA=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||On.current)Rn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Rn=!1,U$(t,e,r);Rn=!!(t.flags&131072)}else Rn=!1,Xt&&e.flags&1048576&&GI(e,Ng,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Bp(t,e),t=e.pendingProps;var s=vu(e,ln.current);tu(e,r),s=J_(null,e,n,t,s,r);var a=X_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ln(n)?(a=!0,_g(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,H_(e),s.updater=Kv,e.stateNode=s,s._reactInternals=e,Lw(e,n,t,r),e=$w(null,e,n,!0,a,r)):(e.tag=0,Xt&&a&&F_(e),pn(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Bp(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=r8(n),t=Ms(n,t),s){case 0:e=Fw(null,e,n,t,r);break e;case 1:e=VE(null,e,n,t,r);break e;case 11:e=OE(null,e,n,t,r);break e;case 14:e=LE(null,e,n,Ms(n.type,t),r);break e}throw Error(ce(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ms(n,s),Fw(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ms(n,s),VE(t,e,n,s,r);case 3:e:{if(EA(e),t===null)throw Error(ce(387));n=e.pendingProps,a=e.memoizedState,s=a.element,ZI(t,e),Cg(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=bu(Error(ce(423)),e),e=FE(t,e,n,r,s);break e}else if(n!==s){s=bu(Error(ce(424)),e),e=FE(t,e,n,r,s);break e}else for(Kn=io(e.stateNode.containerInfo.firstChild),Xn=e,Xt=!0,Fs=null,r=JI(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(xu(),n===s){e=da(t,e,r);break e}pn(t,e,n,r)}e=e.child}return e;case 5:return eA(e),t===null&&Dw(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Tw(n,s)?o=null:a!==null&&Tw(n,a)&&(e.flags|=32),SA(t,e),pn(t,e,o,r),e.child;case 6:return t===null&&Dw(e),null;case 13:return CA(t,e,r);case 4:return G_(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=yu(e,null,n,r):pn(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ms(n,s),OE(t,e,n,s,r);case 7:return pn(t,e,e.pendingProps,r),e.child;case 8:return pn(t,e,e.pendingProps.children,r),e.child;case 12:return pn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Ft(Sg,n._currentValue),n._currentValue=o,a!==null)if(Ks(a.value,o)){if(a.children===s.children&&!On.current){e=da(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=ta(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Mw(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ce(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Mw(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}pn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,tu(e,r),s=Ns(s),n=n(s),e.flags|=1,pn(t,e,n,r),e.child;case 14:return n=e.type,s=Ms(n,e.pendingProps),s=Ms(n.type,s),LE(t,e,n,s,r);case 15:return jA(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ms(n,s),Bp(t,e),e.tag=1,Ln(n)?(t=!0,_g(e)):t=!1,tu(e,r),wA(e,n,s),Lw(e,n,s,r),$w(null,e,n,!0,t,r);case 19:return kA(t,e,r);case 22:return NA(t,e,r)}throw Error(ce(156,e.tag))};function qA(t,e){return vI(t,e)}function t8(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(t,e,r,n){return new t8(t,e,r,n)}function l1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r8(t){if(typeof t=="function")return l1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===C_)return 11;if(t===k_)return 14}return 2}function co(t,e){var r=t.alternate;return r===null?(r=gs(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Hp(t,e,r,n,s,a){var o=2;if(n=t,typeof t=="function")l1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Lc:return gl(r.children,s,a,e);case E_:o=8,s|=8;break;case ow:return t=gs(12,r,e,s|2),t.elementType=ow,t.lanes=a,t;case lw:return t=gs(13,r,e,s),t.elementType=lw,t.lanes=a,t;case cw:return t=gs(19,r,e,s),t.elementType=cw,t.lanes=a,t;case eI:return Jv(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case XT:o=10;break e;case ZT:o=9;break e;case C_:o=11;break e;case k_:o=14;break e;case Va:o=16,n=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=gs(o,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function gl(t,e,r,n){return t=gs(7,t,n,e),t.lanes=r,t}function Jv(t,e,r,n){return t=gs(22,t,n,e),t.elementType=eI,t.lanes=r,t.stateNode={isHidden:!1},t}function i0(t,e,r){return t=gs(6,t,null,e),t.lanes=r,t}function a0(t,e,r){return e=gs(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function n8(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$y(0),this.expirationTimes=$y(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$y(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function c1(t,e,r,n,s,a,o,l,c){return t=new n8(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=gs(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},H_(a),t}function s8(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oc,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function WA(t){if(!t)return vo;t=t._reactInternals;e:{if(Jl(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var r=t.type;if(Ln(r))return WI(t,r,e)}return e}function HA(t,e,r,n,s,a,o,l,c){return t=c1(r,n,!0,t,s,a,o,l,c),t.context=WA(null),r=t.current,n=yn(),s=lo(r),a=ta(n,s),a.callback=e??null,ao(r,a,s),t.current.lanes=s,Ff(t,s,n),Vn(t,n),t}function Xv(t,e,r,n){var s=e.current,a=yn(),o=lo(s);return r=WA(r),e.context===null?e.context=r:e.pendingContext=r,e=ta(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ao(s,e,o),t!==null&&(qs(t,s,o,a),$p(t,s,o)),o}function Mg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function YE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function u1(t,e){YE(t,e),(t=t.alternate)&&YE(t,e)}function i8(){return null}var GA=typeof reportError=="function"?reportError:function(t){console.error(t)};function d1(t){this._internalRoot=t}Zv.prototype.render=d1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));Xv(t,e,null,null)};Zv.prototype.unmount=d1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Il(function(){Xv(null,t,null,null)}),e[ca]=null}};function Zv(t){this._internalRoot=t}Zv.prototype.unstable_scheduleHydration=function(t){if(t){var e=NI();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ua.length&&e!==0&&e<Ua[r].priority;r++);Ua.splice(r,0,t),r===0&&EI(t)}};function h1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ex(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function QE(){}function a8(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Mg(o);a.call(u)}}var o=HA(e,n,t,0,null,!1,!1,"",QE);return t._reactRootContainer=o,t[ca]=o.current,zh(t.nodeType===8?t.parentNode:t),Il(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Mg(c);l.call(u)}}var c=c1(t,0,!1,null,null,!1,!1,"",QE);return t._reactRootContainer=c,t[ca]=c.current,zh(t.nodeType===8?t.parentNode:t),Il(function(){Xv(e,c,r,n)}),c}function tx(t,e,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=Mg(o);l.call(c)}}Xv(e,o,t,s)}else o=a8(r,e,t,s,n);return Mg(o)}_I=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Jd(e.pendingLanes);r!==0&&(A_(e,r|1),Vn(e,mr()),!(jt&6)&&(_u=mr()+500,Do()))}break;case 13:Il(function(){var n=ua(t,1);if(n!==null){var s=yn();qs(n,t,1,s)}}),u1(t,1)}};P_=function(t){if(t.tag===13){var e=ua(t,134217728);if(e!==null){var r=yn();qs(e,t,134217728,r)}u1(t,134217728)}};jI=function(t){if(t.tag===13){var e=lo(t),r=ua(t,e);if(r!==null){var n=yn();qs(r,t,e,n)}u1(t,e)}};NI=function(){return At};SI=function(t,e){var r=At;try{return At=t,e()}finally{At=r}};yw=function(t,e,r){switch(e){case"input":if(hw(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Wv(n);if(!s)throw Error(ce(90));rI(n),hw(n,s)}}}break;case"textarea":sI(t,r);break;case"select":e=r.value,e!=null&&Jc(t,!!r.multiple,e,!1)}};dI=i1;hI=Il;var o8={usingClientEntryPoint:!1,Events:[Uf,Uc,Wv,cI,uI,i1]},Fd={findFiberByHostInstance:ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l8={bundleType:Fd.bundleType,version:Fd.version,rendererPackageName:Fd.rendererPackageName,rendererConfig:Fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pI(t),t===null?null:t.stateNode},findFiberByHostInstance:Fd.findFiberByHostInstance||i8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lp.isDisabled&&lp.supportsFiber)try{Uv=lp.inject(l8),vi=lp}catch{}}as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o8;as.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h1(e))throw Error(ce(200));return s8(t,e,null,r)};as.createRoot=function(t,e){if(!h1(t))throw Error(ce(299));var r=!1,n="",s=GA;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=c1(t,1,!1,null,null,r,!1,n,s),t[ca]=e.current,zh(t.nodeType===8?t.parentNode:t),new d1(e)};as.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=pI(e),t=t===null?null:t.stateNode,t};as.flushSync=function(t){return Il(t)};as.hydrate=function(t,e,r){if(!ex(e))throw Error(ce(200));return tx(null,t,e,!0,r)};as.hydrateRoot=function(t,e,r){if(!h1(t))throw Error(ce(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=GA;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=HA(e,null,t,1,r??null,s,!1,a,o),t[ca]=e.current,zh(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Zv(e)};as.render=function(t,e,r){if(!ex(e))throw Error(ce(200));return tx(null,t,e,!1,r)};as.unmountComponentAtNode=function(t){if(!ex(t))throw Error(ce(40));return t._reactRootContainer?(Il(function(){tx(null,null,t,!1,function(){t._reactRootContainer=null,t[ca]=null})}),!0):!1};as.unstable_batchedUpdates=i1;as.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ex(r))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return tx(t,e,r,!1,n)};as.version="18.3.1-next-f1338f8080-20240426";function KA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KA)}catch(t){console.error(t)}}KA(),KT.exports=as;var Qu=KT.exports;const c8=Fv(Qu);var YA,JE=Qu;YA=JE.createRoot,JE.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jh(){return Jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jh.apply(this,arguments)}var Za;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Za||(Za={}));const XE="popstate";function u8(t){t===void 0&&(t={});function e(s,a){let{pathname:o="/",search:l="",hash:c=""}=Xl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Xw("",{pathname:o,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof a=="string"?a:Og(a))}function n(s,a){f1(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return h8(e,r,n,t)}function vr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function f1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d8(){return Math.random().toString(36).substr(2,8)}function ZE(t,e){return{usr:t.state,key:t.key,idx:e}}function Xw(t,e,r,n){return r===void 0&&(r=null),Jh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xl(e):e,{state:r,key:e&&e.key||n||d8()})}function Og(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Xl(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function h8(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,l=Za.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Jh({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Za.Pop;let b=d(),y=b==null?null:b-u;u=b,c&&c({action:l,location:w.location,delta:y})}function m(b,y){l=Za.Push;let v=Xw(w.location,b,y);r&&r(v,b),u=d()+1;let _=ZE(v,u),E=w.createHref(v);try{o.pushState(_,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(E)}a&&c&&c({action:l,location:w.location,delta:1})}function g(b,y){l=Za.Replace;let v=Xw(w.location,b,y);r&&r(v,b),u=d();let _=ZE(v,u),E=w.createHref(v);o.replaceState(_,"",E),a&&c&&c({action:l,location:w.location,delta:0})}function x(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof b=="string"?b:Og(b);return v=v.replace(/ $/,"%20"),vr(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let w={get action(){return l},get location(){return t(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(XE,h),c=b,()=>{s.removeEventListener(XE,h),c=null}},createHref(b){return e(s,b)},createURL:x,encodeLocation(b){let y=x(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:g,go(b){return o.go(b)}};return w}var eC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(eC||(eC={}));function f8(t,e,r){return r===void 0&&(r="/"),m8(t,e,r,!1)}function m8(t,e,r,n){let s=typeof e=="string"?Xl(e):e,a=m1(s.pathname||"/",r);if(a==null)return null;let o=QA(t);p8(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=E8(a);l=N8(o[c],u,n)}return l}function QA(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(vr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=uo([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(vr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),QA(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:_8(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of JA(a.path))s(a,o,c)}),e}function JA(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=JA(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function p8(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:j8(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const g8=/^:[\w-]+$/,v8=3,x8=2,y8=1,w8=10,b8=-2,tC=t=>t==="*";function _8(t,e){let r=t.split("/"),n=r.length;return r.some(tC)&&(n+=b8),e&&(n+=x8),r.filter(s=>!tC(s)).reduce((s,a)=>s+(g8.test(a)?v8:a===""?y8:w8),n)}function j8(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function N8(t,e,r){let{routesMeta:n}=t,s={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=rC({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=rC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:uo([a,h.pathname]),pathnameBase:I8(uo([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=uo([a,h.pathnameBase]))}return o}function rC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=S8(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:m,isOptional:g}=d;if(m==="*"){let w=l[h]||"";o=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const x=l[h];return g&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function S8(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),f1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function E8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return f1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function m1(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function C8(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Xl(t):t;return{pathname:r?r.startsWith("/")?r:k8(r,e):e,search:A8(n),hash:P8(s)}}function k8(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function o0(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function T8(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function p1(t,e){let r=T8(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function g1(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Xl(t):(s=Jh({},t),vr(!s.pathname||!s.pathname.includes("?"),o0("?","pathname","search",s)),vr(!s.pathname||!s.pathname.includes("#"),o0("#","pathname","hash",s)),vr(!s.search||!s.search.includes("#"),o0("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=C8(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const uo=t=>t.join("/").replace(/\/\/+/g,"/"),I8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),A8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,P8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function R8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const XA=["post","put","patch","delete"];new Set(XA);const D8=["get",...XA];new Set(D8);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xh(){return Xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xh.apply(this,arguments)}const v1=p.createContext(null),M8=p.createContext(null),Mo=p.createContext(null),rx=p.createContext(null),Na=p.createContext({outlet:null,matches:[],isDataRoute:!1}),ZA=p.createContext(null);function O8(t,e){let{relative:r}=e===void 0?{}:e;Ju()||vr(!1);let{basename:n,navigator:s}=p.useContext(Mo),{hash:a,pathname:o,search:l}=tP(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:uo([n,o])),s.createHref({pathname:c,search:l,hash:a})}function Ju(){return p.useContext(rx)!=null}function Oo(){return Ju()||vr(!1),p.useContext(rx).location}function eP(t){p.useContext(Mo).static||p.useLayoutEffect(t)}function Dr(){let{isDataRoute:t}=p.useContext(Na);return t?Y8():L8()}function L8(){Ju()||vr(!1);let t=p.useContext(v1),{basename:e,future:r,navigator:n}=p.useContext(Mo),{matches:s}=p.useContext(Na),{pathname:a}=Oo(),o=JSON.stringify(p1(s,r.v7_relativeSplatPath)),l=p.useRef(!1);return eP(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=g1(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:uo([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,a,t])}function x1(){let{matches:t}=p.useContext(Na),e=t[t.length-1];return e?e.params:{}}function tP(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=p.useContext(Mo),{matches:s}=p.useContext(Na),{pathname:a}=Oo(),o=JSON.stringify(p1(s,n.v7_relativeSplatPath));return p.useMemo(()=>g1(t,JSON.parse(o),a,r==="path"),[t,o,a,r])}function V8(t,e){return F8(t,e)}function F8(t,e,r,n){Ju()||vr(!1);let{navigator:s}=p.useContext(Mo),{matches:a}=p.useContext(Na),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Oo(),d;if(e){var h;let b=typeof e=="string"?Xl(e):e;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||vr(!1),d=b}else d=u;let m=d.pathname||"/",g=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=f8(t,{pathname:g}),w=q8(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:uo([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:uo([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,r,n);return e&&w?p.createElement(rx.Provider,{value:{location:Xh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Za.Pop}},w):w}function $8(){let t=K8(),e=R8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),r?p.createElement("pre",{style:s},r):null,null)}const U8=p.createElement($8,null);class z8 extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?p.createElement(Na.Provider,{value:this.props.routeContext},p.createElement(ZA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function B8(t){let{routeContext:e,match:r,children:n}=t,s=p.useContext(v1);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Na.Provider,{value:e},n)}function q8(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||vr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:g}=r,x=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let g,x=!1,w=null,b=null;r&&(g=l&&h.route.id?l[h.route.id]:void 0,w=h.route.errorElement||U8,c&&(u<0&&m===0?(x=!0,b=null):u===m&&(x=!0,b=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,m+1)),v=()=>{let _;return g?_=w:x?_=b:h.route.Component?_=p.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,p.createElement(B8,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:_})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?p.createElement(z8,{location:r.location,revalidation:r.revalidation,component:w,error:g,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var rP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(rP||{}),Lg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Lg||{});function W8(t){let e=p.useContext(v1);return e||vr(!1),e}function H8(t){let e=p.useContext(M8);return e||vr(!1),e}function G8(t){let e=p.useContext(Na);return e||vr(!1),e}function nP(t){let e=G8(),r=e.matches[e.matches.length-1];return r.route.id||vr(!1),r.route.id}function K8(){var t;let e=p.useContext(ZA),r=H8(Lg.UseRouteError),n=nP(Lg.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Y8(){let{router:t}=W8(rP.UseNavigateStable),e=nP(Lg.UseNavigateStable),r=p.useRef(!1);return eP(()=>{r.current=!0}),p.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Xh({fromRouteId:e},a)))},[t,e])}function Q8(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function J8(t){let{to:e,replace:r,state:n,relative:s}=t;Ju()||vr(!1);let{future:a,static:o}=p.useContext(Mo),{matches:l}=p.useContext(Na),{pathname:c}=Oo(),u=Dr(),d=g1(e,p1(l,a.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function Gt(t){vr(!1)}function X8(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Za.Pop,navigator:a,static:o=!1,future:l}=t;Ju()&&vr(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:a,static:o,future:Xh({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=Xl(n));let{pathname:d="/",search:h="",hash:m="",state:g=null,key:x="default"}=n,w=p.useMemo(()=>{let b=m1(d,c);return b==null?null:{location:{pathname:b,search:h,hash:m,state:g,key:x},navigationType:s}},[c,d,h,m,g,x,s]);return w==null?null:p.createElement(Mo.Provider,{value:u},p.createElement(rx.Provider,{children:r,value:w}))}function Z8(t){let{children:e,location:r}=t;return V8(Zw(e),r)}new Promise(()=>{});function Zw(t,e){e===void 0&&(e=[]);let r=[];return p.Children.forEach(t,(n,s)=>{if(!p.isValidElement(n))return;let a=[...e,s];if(n.type===p.Fragment){r.push.apply(r,Zw(n.props.children,a));return}n.type!==Gt&&vr(!1),!n.props.index||!n.props.children||vr(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Zw(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eb(){return eb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eb.apply(this,arguments)}function eU(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function tU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rU(t,e){return t.button===0&&(!e||e==="_self")&&!tU(t)}function tb(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function nU(t,e){let r=tb(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(a=>{r.append(s,a)})}),r}const sU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],iU="6";try{window.__reactRouterVersion=iU}catch{}const aU="startTransition",nC=HT[aU];function oU(t){let{basename:e,children:r,future:n,window:s}=t,a=p.useRef();a.current==null&&(a.current=u8({window:s,v5Compat:!0}));let o=a.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=p.useCallback(h=>{u&&nC?nC(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>Q8(n),[n]),p.createElement(X8,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const lU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ye=p.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,m=eU(e,sU),{basename:g}=p.useContext(Mo),x,w=!1;if(typeof u=="string"&&cU.test(u)&&(x=u,lU))try{let _=new URL(window.location.href),E=u.startsWith("//")?new URL(_.protocol+u):new URL(u),C=m1(E.pathname,g);E.origin===_.origin&&C!=null?u=C+E.search+E.hash:w=!0}catch{}let b=O8(u,{relative:s}),y=uU(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function v(_){n&&n(_),_.defaultPrevented||y(_)}return p.createElement("a",eb({},m,{href:x||b,onClick:w||a?n:v,ref:r,target:c}))});var sC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sC||(sC={}));var iC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(iC||(iC={}));function uU(t,e){let{target:r,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=Dr(),u=Oo(),d=tP(t,{relative:o});return p.useCallback(h=>{if(rU(h,r)){h.preventDefault();let m=n!==void 0?n:Og(u)===Og(d);c(t,{replace:m,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,n,s,r,t,a,o,l])}function nx(t){let e=p.useRef(tb(t)),r=p.useRef(!1),n=Oo(),s=p.useMemo(()=>nU(n.search,r.current?null:e.current),[n.search]),a=Dr(),o=p.useCallback((l,c)=>{const u=tb(typeof l=="function"?l(s):l);r.current=!0,a("?"+u,c)},[a,s]);return[s,o]}var Vg=["light","dark"],y1="(prefers-color-scheme: dark)",dU=typeof window>"u",w1=p.createContext(void 0),hU={setTheme:t=>{},themes:[]},fU=()=>{var t;return(t=p.useContext(w1))!=null?t:hU},mU=t=>p.useContext(w1)?t.children:p.createElement(gU,{...t}),pU=["light","dark"],gU=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:s="theme",themes:a=pU,defaultTheme:o=r?"system":"light",attribute:l="data-theme",value:c,children:u,nonce:d})=>{let[h,m]=p.useState(()=>aC(s,o)),[g,x]=p.useState(()=>aC(s)),w=c?Object.values(c):a,b=p.useCallback(E=>{let C=E;if(!C)return;E==="system"&&r&&(C=oC());let D=c?c[C]:C,T=e?xU():null,k=document.documentElement;if(l==="class"?(k.classList.remove(...w),D&&k.classList.add(D)):D?k.setAttribute(l,D):k.removeAttribute(l),n){let R=Vg.includes(o)?o:null,S=Vg.includes(C)?C:R;k.style.colorScheme=S}T==null||T()},[]),y=p.useCallback(E=>{let C=typeof E=="function"?E(E):E;m(C);try{localStorage.setItem(s,C)}catch{}},[t]),v=p.useCallback(E=>{let C=oC(E);x(C),h==="system"&&r&&!t&&b("system")},[h,t]);p.useEffect(()=>{let E=window.matchMedia(y1);return E.addListener(v),v(E),()=>E.removeListener(v)},[v]),p.useEffect(()=>{let E=C=>{if(C.key!==s)return;let D=C.newValue||o;y(D)};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)},[y]),p.useEffect(()=>{b(t??h)},[t,h]);let _=p.useMemo(()=>({theme:h,setTheme:y,forcedTheme:t,resolvedTheme:h==="system"?g:h,themes:r?[...a,"system"]:a,systemTheme:r?g:void 0}),[h,y,t,g,r,a]);return p.createElement(w1.Provider,{value:_},p.createElement(vU,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:r,enableColorScheme:n,storageKey:s,themes:a,defaultTheme:o,attribute:l,value:c,children:u,attrs:w,nonce:d}),u)},vU=p.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=s?Vg.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,w=!1,b=!0)=>{let y=o?o[x]:x,v=w?x+"|| ''":`'${y}'`,_="";return s&&b&&!w&&Vg.includes(x)&&(_+=`d.style.colorScheme = '${x}';`),r==="class"?w||y?_+=`c.add(${v})`:_+="null":y&&(_+=`d[s](n,${v})`),_},g=t?`!function(){${d}${m(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${y1}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})}),aC=(t,e)=>{if(dU)return;let r;try{r=localStorage.getItem(t)||void 0}catch{}return r||e},xU=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},oC=t=>(t||(t=window.matchMedia(y1)),t.matches?"dark":"light");let yU={data:""},wU=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||yU,bU=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,_U=/\/\*[^]*?\*\/|  +/g,lC=/\n+/g,Ba=(t,e)=>{let r="",n="",s="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?r=a+" "+o+";":n+=a[1]=="f"?Ba(o,a):a+"{"+Ba(o,a[1]=="k"?"":e)+"}":typeof o=="object"?n+=Ba(o,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ba.p?Ba.p(a,o):a+":"+o+";")}return r+(e&&s?e+"{"+s+"}":s)+n},Vi={},sP=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+sP(t[r]);return e}return t},jU=(t,e,r,n,s)=>{let a=sP(t),o=Vi[a]||(Vi[a]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(a));if(!Vi[o]){let c=a!==t?t:(u=>{let d,h,m=[{}];for(;d=bU.exec(u.replace(_U,""));)d[4]?m.shift():d[3]?(h=d[3].replace(lC," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][d[1]]=d[2].replace(lC," ").trim();return m[0]})(t);Vi[o]=Ba(s?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&Vi.g?Vi.g:null;return r&&(Vi.g=Vi[o]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(Vi[o],e,n,l),o},NU=(t,e,r)=>t.reduce((n,s,a)=>{let o=e[a];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Ba(l,""):l===!1?"":l}return n+s+(o??"")},"");function sx(t){let e=this||{},r=t.call?t(e.p):t;return jU(r.unshift?r.raw?NU(r,[].slice.call(arguments,1),e.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(e.p):s),{}):r,wU(e.target),e.g,e.o,e.k)}let iP,rb,nb;sx.bind({g:1});let ha=sx.bind({k:1});function SU(t,e,r,n){Ba.p=e,iP=t,rb=r,nb=n}function Lo(t,e){let r=this||{};return function(){let n=arguments;function s(a,o){let l=Object.assign({},a),c=l.className||s.className;r.p=Object.assign({theme:rb&&rb()},l),r.o=/ *go\d+/.test(c),l.className=sx.apply(r,n)+(c?" "+c:"");let u=t;return t[0]&&(u=l.as||t,delete l.as),nb&&u[0]&&nb(l),iP(u,l)}return s}}var EU=t=>typeof t=="function",Fg=(t,e)=>EU(t)?t(e):t,CU=(()=>{let t=0;return()=>(++t).toString()})(),aP=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),kU=20,oP=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,kU)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:r}=e;return oP(t,{type:t.toasts.find(a=>a.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=e;return{...t,toasts:t.toasts.map(a=>a.id===n||n===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+s}))}}},Gp=[],dl={toasts:[],pausedAt:void 0},Zl=t=>{dl=oP(dl,t),Gp.forEach(e=>{e(dl)})},TU={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},IU=(t={})=>{let[e,r]=p.useState(dl),n=p.useRef(dl);p.useEffect(()=>(n.current!==dl&&r(dl),Gp.push(r),()=>{let a=Gp.indexOf(r);a>-1&&Gp.splice(a,1)}),[]);let s=e.toasts.map(a=>{var o,l,c;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||TU[a.type],style:{...t.style,...(c=t[a.type])==null?void 0:c.style,...a.style}}});return{...e,toasts:s}},AU=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||CU()}),Bf=t=>(e,r)=>{let n=AU(e,t,r);return Zl({type:2,toast:n}),n.id},pr=(t,e)=>Bf("blank")(t,e);pr.error=Bf("error");pr.success=Bf("success");pr.loading=Bf("loading");pr.custom=Bf("custom");pr.dismiss=t=>{Zl({type:3,toastId:t})};pr.remove=t=>Zl({type:4,toastId:t});pr.promise=(t,e,r)=>{let n=pr.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let a=e.success?Fg(e.success,s):void 0;return a?pr.success(a,{id:n,...r,...r==null?void 0:r.success}):pr.dismiss(n),s}).catch(s=>{let a=e.error?Fg(e.error,s):void 0;a?pr.error(a,{id:n,...r,...r==null?void 0:r.error}):pr.dismiss(n)}),t};var PU=(t,e)=>{Zl({type:1,toast:{id:t,height:e}})},RU=()=>{Zl({type:5,time:Date.now()})},yh=new Map,DU=1e3,MU=(t,e=DU)=>{if(yh.has(t))return;let r=setTimeout(()=>{yh.delete(t),Zl({type:4,toastId:t})},e);yh.set(t,r)},OU=t=>{let{toasts:e,pausedAt:r}=IU(t);p.useEffect(()=>{if(r)return;let a=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&pr.dismiss(l.id);return}return setTimeout(()=>pr.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,r]);let n=p.useCallback(()=>{r&&Zl({type:6,time:Date.now()})},[r]),s=p.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=e.filter(g=>(g.position||u)===(a.position||u)&&g.height),h=d.findIndex(g=>g.id===a.id),m=d.filter((g,x)=>x<h&&g.visible).length;return d.filter(g=>g.visible).slice(...l?[m+1]:[0,m]).reduce((g,x)=>g+(x.height||0)+c,0)},[e]);return p.useEffect(()=>{e.forEach(a=>{if(a.dismissed)MU(a.id,a.removeDelay);else{let o=yh.get(a.id);o&&(clearTimeout(o),yh.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:PU,startPause:RU,endPause:n,calculateOffset:s}}},LU=ha`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,VU=ha`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,FU=ha`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,$U=Lo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${LU} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${VU} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${FU} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,UU=ha`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,zU=Lo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${UU} 1s linear infinite;
`,BU=ha`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,qU=ha`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,WU=Lo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${BU} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${qU} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,HU=Lo("div")`
  position: absolute;
`,GU=Lo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,KU=ha`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,YU=Lo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${KU} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,QU=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?p.createElement(YU,null,e):e:r==="blank"?null:p.createElement(GU,null,p.createElement(zU,{...n}),r!=="loading"&&p.createElement(HU,null,r==="error"?p.createElement($U,{...n}):p.createElement(WU,{...n})))},JU=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,XU=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,ZU="0%{opacity:0;} 100%{opacity:1;}",e9="0%{opacity:1;} 100%{opacity:0;}",t9=Lo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,r9=Lo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,n9=(t,e)=>{let r=t.includes("top")?1:-1,[n,s]=aP()?[ZU,e9]:[JU(r),XU(r)];return{animation:e?`${ha(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ha(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},s9=p.memo(({toast:t,position:e,style:r,children:n})=>{let s=t.height?n9(t.position||e||"top-center",t.visible):{opacity:0},a=p.createElement(QU,{toast:t}),o=p.createElement(r9,{...t.ariaProps},Fg(t.message,t));return p.createElement(t9,{className:t.className,style:{...s,...r,...t.style}},typeof n=="function"?n({icon:a,message:o}):p.createElement(p.Fragment,null,a,o))});SU(p.createElement);var i9=({id:t,className:e,style:r,onHeightUpdate:n,children:s})=>{let a=p.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return p.createElement("div",{ref:a,className:e,style:r},s)},a9=(t,e)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:aP()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...n,...s}},o9=sx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,cp=16,l9=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:n,children:s,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:c}=OU(r);return p.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:cp,left:cp,right:cp,bottom:cp,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||e,h=c.calculateOffset(u,{reverseOrder:t,gutter:n,defaultPosition:e}),m=a9(d,h);return p.createElement(i9,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?o9:"",style:m},u.type==="custom"?Fg(u.message,u):s?s(u):p.createElement(s9,{toast:u,position:d}))}))},ne=pr,cC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},c9=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],o=t[r++],l=t[r++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},cP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=a>>2,h=(a&3)<<4|l>>4;let m=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),n.push(r[d],r[h],r[m],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):c9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const u=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||l==null||u==null||h==null)throw new u9;const m=a<<2|l>>4;if(n.push(m),u!==64){const g=l<<4&240|u>>2;if(n.push(g),h!==64){const x=u<<6&192|h;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d9=function(t){const e=lP(t);return cP.encodeByteArray(e,!0)},$g=function(t){return d9(t).replace(/\./g,"")},uP=function(t){try{return cP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9=()=>h9().__FIREBASE_DEFAULTS__,m9=()=>{if(typeof process>"u"||typeof cC>"u")return;const t=cC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},p9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uP(t[1]);return e&&JSON.parse(e)},ix=()=>{try{return f9()||m9()||p9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dP=t=>{var e,r;return(r=(e=ix())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},hP=t=>{const e=dP(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},fP=()=>{var t;return(t=ix())===null||t===void 0?void 0:t.config},mP=t=>{var e;return(e=ix())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g9=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[$g(JSON.stringify(r)),$g(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v9(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function x9(){var t;const e=(t=ix())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function w9(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b9(){const t=cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _9(){return!x9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vP(){try{return typeof indexedDB=="object"}catch{return!1}}function xP(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}function j9(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9="FirebaseError";class ks extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=N9,Object.setPrototypeOf(this,ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ec.prototype.create)}}class ec{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?S9(a,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ks(s,l,n)}}function S9(t,e){return t.replace(E9,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const E9=/\{\$([^}]+)}/g;function C9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const a=t[s],o=e[s];if(uC(a)&&uC(o)){if(!Zh(a,o))return!1}else if(a!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function uC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Zd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,a]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function eh(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function k9(t,e){const r=new T9(t,e);return r.subscribe.bind(r)}class T9{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");I9(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=l0),s.error===void 0&&(s.error=l0),s.complete===void 0&&(s.complete=l0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function I9(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function l0(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=1e3,P9=2,R9=4*60*60*1e3,D9=.5;function dC(t,e=A9,r=P9){const n=e*Math.pow(r,t),s=Math.round(D9*n*(Math.random()-.5)*2);return Math.min(R9,n+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t){return t&&t._delegate?t._delegate:t}class Es{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new g9;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(L9(e))try{this.getOrInitializeService({instanceIdentifier:sl})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=sl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sl){return this.instances.has(e)}getOptions(e=sl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&o.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:O9(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=sl){return this.component?this.component.multipleInstances?e:sl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function O9(t){return t===sl?void 0:t}function L9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new M9(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gt||(gt={}));const F9={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},$9=gt.INFO,U9={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},z9=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=U9[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ax{constructor(e){this.name=e,this._logLevel=$9,this._logHandler=z9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const B9=(t,e)=>e.some(r=>t instanceof r);let hC,fC;function q9(){return hC||(hC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W9(){return fC||(fC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yP=new WeakMap,sb=new WeakMap,wP=new WeakMap,c0=new WeakMap,b1=new WeakMap;function H9(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(ho(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&yP.set(r,t)}).catch(()=>{}),b1.set(e,t),e}function G9(t){if(sb.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});sb.set(t,e)}let ib={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return sb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wP.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ho(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K9(t){ib=t(ib)}function Y9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(u0(this),e,...r);return wP.set(n,e.sort?e.sort():[e]),ho(n)}:W9().includes(t)?function(...e){return t.apply(u0(this),e),ho(yP.get(this))}:function(...e){return ho(t.apply(u0(this),e))}}function Q9(t){return typeof t=="function"?Y9(t):(t instanceof IDBTransaction&&G9(t),B9(t,q9())?new Proxy(t,ib):t)}function ho(t){if(t instanceof IDBRequest)return H9(t);if(c0.has(t))return c0.get(t);const e=Q9(t);return e!==t&&(c0.set(t,e),b1.set(e,t)),e}const u0=t=>b1.get(t);function bP(t,e,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=ho(o);return n&&o.addEventListener("upgradeneeded",c=>{n(ho(o.result),c.oldVersion,c.newVersion,ho(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const J9=["get","getKey","getAll","getAllKeys","count"],X9=["put","add","delete","clear"],d0=new Map;function mC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(d0.get(e))return d0.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=X9.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||J9.includes(r)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),s&&c.done]))[0]};return d0.set(e,a),a}K9(t=>({...t,get:(e,r,n)=>mC(e,r)||t.get(e,r,n),has:(e,r)=>!!mC(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(ez(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function ez(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ab="@firebase/app",pC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new ax("@firebase/app"),tz="@firebase/app-compat",rz="@firebase/analytics-compat",nz="@firebase/analytics",sz="@firebase/app-check-compat",iz="@firebase/app-check",az="@firebase/auth",oz="@firebase/auth-compat",lz="@firebase/database",cz="@firebase/data-connect",uz="@firebase/database-compat",dz="@firebase/functions",hz="@firebase/functions-compat",fz="@firebase/installations",mz="@firebase/installations-compat",pz="@firebase/messaging",gz="@firebase/messaging-compat",vz="@firebase/performance",xz="@firebase/performance-compat",yz="@firebase/remote-config",wz="@firebase/remote-config-compat",bz="@firebase/storage",_z="@firebase/storage-compat",jz="@firebase/firestore",Nz="@firebase/vertexai-preview",Sz="@firebase/firestore-compat",Ez="firebase",Cz="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="[DEFAULT]",kz={[ab]:"fire-core",[tz]:"fire-core-compat",[nz]:"fire-analytics",[rz]:"fire-analytics-compat",[iz]:"fire-app-check",[sz]:"fire-app-check-compat",[az]:"fire-auth",[oz]:"fire-auth-compat",[lz]:"fire-rtdb",[cz]:"fire-data-connect",[uz]:"fire-rtdb-compat",[dz]:"fire-fn",[hz]:"fire-fn-compat",[fz]:"fire-iid",[mz]:"fire-iid-compat",[pz]:"fire-fcm",[gz]:"fire-fcm-compat",[vz]:"fire-perf",[xz]:"fire-perf-compat",[yz]:"fire-rc",[wz]:"fire-rc-compat",[bz]:"fire-gcs",[_z]:"fire-gcs-compat",[jz]:"fire-fst",[Sz]:"fire-fst-compat",[Nz]:"fire-vertex","fire-js":"fire-js",[Ez]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=new Map,Tz=new Map,lb=new Map;function gC(t,e){try{t.container.addComponent(e)}catch(r){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ys(t){const e=t.name;if(lb.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;lb.set(e,t);for(const r of Ug.values())gC(r,t);for(const r of Tz.values())gC(r,t);return!0}function Vo(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function vs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new ec("app","Firebase",Iz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=Cz;function _P(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:ob,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw fo.create("bad-app-name",{appName:String(s)});if(r||(r=fP()),!r)throw fo.create("no-options");const a=Ug.get(s);if(a){if(Zh(r,a.options)&&Zh(n,a.config))return a;throw fo.create("duplicate-app",{appName:s})}const o=new V9(s);for(const c of lb.values())o.addComponent(c);const l=new Az(r,n,o);return Ug.set(s,l),l}function ox(t=ob){const e=Ug.get(t);if(!e&&t===ob&&fP())return _P();if(!e)throw fo.create("no-app",{appName:t});return e}function Fn(t,e,r){var n;let s=(n=kz[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(l.join(" "));return}Ys(new Es(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz="firebase-heartbeat-database",Rz=1,ef="firebase-heartbeat-store";let h0=null;function jP(){return h0||(h0=bP(Pz,Rz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ef)}catch(r){console.warn(r)}}}}).catch(t=>{throw fo.create("idb-open",{originalErrorMessage:t.message})})),h0}async function Dz(t){try{const r=(await jP()).transaction(ef),n=await r.objectStore(ef).get(NP(t));return await r.done,n}catch(e){if(e instanceof ks)fa.warn(e.message);else{const r=fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fa.warn(r.message)}}}async function vC(t,e){try{const n=(await jP()).transaction(ef,"readwrite");await n.objectStore(ef).put(e,NP(t)),await n.done}catch(r){if(r instanceof ks)fa.warn(r.message);else{const n=fo.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});fa.warn(n.message)}}}function NP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=1024,Oz=30*24*60*60*1e3;class Lz{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Fz(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=xC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Oz}),this._storage.overwrite(this._heartbeatsCache))}catch(n){fa.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=xC(),{heartbeatsToSend:n,unsentEntries:s}=Vz(this._heartbeatsCache.heartbeats),a=$g(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return fa.warn(r),""}}}function xC(){return new Date().toISOString().substring(0,10)}function Vz(t,e=Mz){const r=[];let n=t.slice();for(const s of t){const a=r.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),yC(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),yC(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Fz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vP()?xP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Dz(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return vC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return vC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function yC(t){return $g(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(t){Ys(new Es("platform-logger",e=>new Z9(e),"PRIVATE")),Ys(new Es("heartbeat",e=>new Lz(e),"PRIVATE")),Fn(ab,pC,t),Fn(ab,pC,"esm2017"),Fn("fire-js","")}$z("");var ci=function(){return ci=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ci.apply(this,arguments)};function Wf(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Uz(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function SP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zz=SP,EP=new ec("auth","Firebase",SP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=new ax("@firebase/auth");function Bz(t,...e){zg.logLevel<=gt.WARN&&zg.warn(`Auth (${tc}): ${t}`,...e)}function Kp(t,...e){zg.logLevel<=gt.ERROR&&zg.error(`Auth (${tc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t,...e){throw j1(t,...e)}function yi(t,...e){return j1(t,...e)}function _1(t,e,r){const n=Object.assign(Object.assign({},zz()),{[e]:r});return new ec("auth","Firebase",n).create(e,{appName:t.name})}function Ws(t){return _1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qz(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Cs(t,"argument-error"),_1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function j1(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return EP.create(t,...e)}function Ue(t,e,...r){if(!t)throw j1(e,...r)}function Ji(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kp(e),new Error(e)}function ma(t,e){t||Ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Wz(){return wC()==="http:"||wC()==="https:"}function wC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wz()||gP()||"connection"in navigator)?navigator.onLine:!0}function Gz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,r){this.shortDelay=e,this.longDelay=r,ma(r>e,"Short delay should be less than long delay!"),this.isMobile=v9()||w9()}get(){return Hz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t,e){ma(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz=new Hf(3e4,6e4);function Sa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ri(t,e,r,n,s={}){return kP(t,s,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const l=qf(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},a);return y9()||(u.referrerPolicy="no-referrer"),CP.fetch()(TP(t,t.config.apiHost,r,l),u)})}async function kP(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},Kz),e);try{const s=new Jz(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw up(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw up(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw up(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw up(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw _1(t,d,u);Cs(t,d)}}catch(s){if(s instanceof ks)throw s;Cs(t,"network-request-failed",{message:String(s)})}}async function Gf(t,e,r,n,s={}){const a=await ri(t,e,r,n,s);return"mfaPendingCredential"in a&&Cs(t,"multi-factor-auth-required",{_serverResponse:a}),a}function TP(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?N1(t.config,s):`${t.config.apiScheme}://${s}`}function Qz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Jz{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(yi(this.auth,"network-request-failed")),Yz.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function up(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=yi(t,e,n);return s.customData._tokenResponse=r,s}function bC(t){return t!==void 0&&t.enterprise!==void 0}class Xz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return Qz(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Zz(t,e){return ri(t,"GET","/v2/recaptchaConfig",Sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e7(t,e){return ri(t,"POST","/v1/accounts:delete",e)}async function IP(t,e){return ri(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function t7(t,e=!1){const r=ft(t),n=await r.getIdToken(e),s=S1(n);Ue(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:n,authTime:wh(f0(s.auth_time)),issuedAtTime:wh(f0(s.iat)),expirationTime:wh(f0(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function f0(t){return Number(t)*1e3}function S1(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Kp("JWT malformed, contained fewer than 3 sections"),null;try{const s=uP(r);return s?JSON.parse(s):(Kp("Failed to decode base64 JWT payload"),null)}catch(s){return Kp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function _C(t){const e=S1(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ks&&r7(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function r7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=wh(this.lastLoginAt),this.creationTime=wh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bg(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Al(t,IP(r,{idToken:n}));Ue(s==null?void 0:s.users.length,r,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?AP(a.providerUserInfo):[],l=s7(t.providerData,o),c=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new ub(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function db(t){const e=ft(t);await Bg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function s7(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function AP(t){return t.map(e=>{var{providerId:r}=e,n=Wf(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i7(t,e){const r=await kP(t,{},async()=>{const n=qf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=TP(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",CP.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function a7(t,e){return ri(t,"POST","/v2/accounts:revokeToken",Sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_C(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const r=_C(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:a}=await i7(e,r);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:a}=r,o=new nu;return n&&(Ue(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(Ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(Ue(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nu,this.toJSON())}_performRefresh(){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xi{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,a=Wf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new n7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ub(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Al(this,this.stsTokenManager.getToken(this.auth,e));return Ue(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return t7(this,e)}reload(){return db(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Xi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Bg(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vs(this.auth.app))return Promise.reject(Ws(this.auth));const e=await this.getIdToken();return await Al(this,e7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,a,o,l,c,u,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,g=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,x=(o=r.photoURL)!==null&&o!==void 0?o:void 0,w=(l=r.tenantId)!==null&&l!==void 0?l:void 0,b=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,y=(u=r.createdAt)!==null&&u!==void 0?u:void 0,v=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:E,isAnonymous:C,providerData:D,stsTokenManager:T}=r;Ue(_&&T,e,"internal-error");const k=nu.fromJSON(this.name,T);Ue(typeof _=="string",e,"internal-error"),Pa(h,e.name),Pa(m,e.name),Ue(typeof E=="boolean",e,"internal-error"),Ue(typeof C=="boolean",e,"internal-error"),Pa(g,e.name),Pa(x,e.name),Pa(w,e.name),Pa(b,e.name),Pa(y,e.name),Pa(v,e.name);const R=new Xi({uid:_,auth:e,email:m,emailVerified:E,displayName:h,isAnonymous:C,photoURL:x,phoneNumber:g,tenantId:w,stsTokenManager:k,createdAt:y,lastLoginAt:v});return D&&Array.isArray(D)&&(R.providerData=D.map(S=>Object.assign({},S))),b&&(R._redirectEventId=b),R}static async _fromIdTokenResponse(e,r,n=!1){const s=new nu;s.updateFromServerResponse(r);const a=new Xi({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Bg(a),a}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Ue(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?AP(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new nu;l.updateFromIdToken(n);const c=new Xi({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ub(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new Map;function Zi(t){ma(t instanceof Function,"Expected a class definition");let e=jC.get(t);return e?(ma(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}PP.type="NONE";const NC=PP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t,e,r){return`firebase:${t}:${e}:${r}`}class su{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=Yp(this.userKey,s.apiKey,a),this.fullPersistenceKey=Yp("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new su(Zi(NC),e,n);const s=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||Zi(NC);const o=Yp(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){const h=Xi._fromJSON(e,d);u!==a&&(l=h),a=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new su(a,e,n):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new su(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VP(e))return"Blackberry";if(FP(e))return"Webos";if(DP(e))return"Safari";if((e.includes("chrome/")||MP(e))&&!e.includes("edge/"))return"Chrome";if(LP(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function RP(t=cn()){return/firefox\//i.test(t)}function DP(t=cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MP(t=cn()){return/crios\//i.test(t)}function OP(t=cn()){return/iemobile/i.test(t)}function LP(t=cn()){return/android/i.test(t)}function VP(t=cn()){return/blackberry/i.test(t)}function FP(t=cn()){return/webos/i.test(t)}function E1(t=cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function o7(t=cn()){var e;return E1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function l7(){return b9()&&document.documentMode===10}function $P(t=cn()){return E1(t)||LP(t)||FP(t)||VP(t)||/windows phone/i.test(t)||OP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t,e=[]){let r;switch(t){case"Browser":r=SC(cn());break;case"Worker":r=`${SC(cn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${tc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(t,e={}){return ri(t,"GET","/v2/passwordPolicy",Sa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=6;class h7{constructor(e){var r,n,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:d7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,a,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new EC(this),this.idTokenSubscription=new EC(this),this.beforeStateQueue=new c7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Zi(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await su.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await IP(this,{idToken:e}),n=await Xi._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(vs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Bg(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Gz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vs(this.app))return Promise.reject(Ws(this));const r=e?ft(e):null;return r&&Ue(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vs(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vs(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await u7(this),r=new h7(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ec("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await a7(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Zi(e)||this._popupRedirectResolver;Ue(r,this,"argument-error"),this.redirectPersistenceManager=await su.create(this,[Zi(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,s);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Bz(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ea(t){return ft(t)}class EC{constructor(e){this.auth=e,this.observer=null,this.addObserver=k9(r=>this.observer=r)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m7(t){lx=t}function zP(t){return lx.loadJS(t)}function p7(){return lx.recaptchaEnterpriseScript}function g7(){return lx.gapiScript}function v7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const x7="recaptcha-enterprise",y7="NO_RECAPTCHA";class w7{constructor(e){this.type=x7,this.auth=Ea(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{Zz(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Xz(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(a,o,l){const c=window.grecaptcha;bC(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(y7)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{n(this.auth).then(l=>{if(!r&&bC(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=p7();c.length!==0&&(c+=l),zP(c).then(()=>{s(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function CC(t,e,r,n=!1){const s=new w7(t);let a;try{a=await s.verify(r)}catch{a=await s.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function hb(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await CC(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await CC(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b7(t,e){const r=Vo(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(Zh(a,e??{}))return s;Cs(s,"already-initialized")}return r.initialize({options:e})}function _7(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Zi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function j7(t,e,r){const n=Ea(t);Ue(n._canInitEmulator,n,"emulator-config-failed"),Ue(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,a=BP(e),{host:o,port:l}=N7(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${a}//${o}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),S7()}function BP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function N7(t){const e=BP(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:kC(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:kC(o)}}}function kC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function S7(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ji("not implemented")}_getIdTokenResponse(e){return Ji("not implemented")}_linkToIdToken(e,r){return Ji("not implemented")}_getReauthenticationResolver(e){return Ji("not implemented")}}async function E7(t,e){return ri(t,"POST","/v1/accounts:update",e)}async function C7(t,e){return ri(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k7(t,e){return Gf(t,"POST","/v1/accounts:signInWithPassword",Sa(t,e))}async function T7(t,e){return ri(t,"POST","/v1/accounts:sendOobCode",Sa(t,e))}async function I7(t,e){return T7(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A7(t,e){return Gf(t,"POST","/v1/accounts:signInWithEmailLink",Sa(t,e))}async function P7(t,e){return Gf(t,"POST","/v1/accounts:signInWithEmailLink",Sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends C1{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new tf(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new tf(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hb(e,r,"signInWithPassword",k7);case"emailLink":return A7(e,{email:this._email,oobCode:this._password});default:Cs(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hb(e,n,"signUpPassword",C7);case"emailLink":return P7(e,{idToken:r,email:this._email,oobCode:this._password});default:Cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(t,e){return Gf(t,"POST","/v1/accounts:signInWithIdp",Sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7="http://localhost";class Pl extends C1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Pl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Cs("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,a=Wf(r,["providerId","signInMethod"]);if(!n||!s)return null;const o=new Pl(n,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return iu(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,iu(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,iu(e,r)}buildRequest(){const e={requestUri:R7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=qf(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function M7(t){const e=Zd(eh(t)).link,r=e?Zd(eh(e)).deep_link_id:null,n=Zd(eh(t)).deep_link_id;return(n?Zd(eh(n)).link:null)||n||r||e||t}class k1{constructor(e){var r,n,s,a,o,l;const c=Zd(eh(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,h=D7((s=c.mode)!==null&&s!==void 0?s:null);Ue(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=M7(e);try{return new k1(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.providerId=xo.PROVIDER_ID}static credential(e,r){return tf._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=k1.parseLink(r);return Ue(n,"argument-error"),tf._fromEmailAndCode(e,n.code,n.tenantId)}}xo.PROVIDER_ID="password";xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends T1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends Kf{constructor(){super("facebook.com")}static credential(e){return Pl._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qa.credentialFromTaggedObject(e)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qa.credential(e.oauthAccessToken)}catch{return null}}}qa.FACEBOOK_SIGN_IN_METHOD="facebook.com";qa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Kf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Pl._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Gi.credential(r,n)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends Kf{constructor(){super("github.com")}static credential(e){return Pl._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wa.credential(e.oauthAccessToken)}catch{return null}}}Wa.GITHUB_SIGN_IN_METHOD="github.com";Wa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends Kf{constructor(){super("twitter.com")}static credential(e,r){return Pl._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ha.credentialFromTaggedObject(e)}static credentialFromError(e){return Ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ha.credential(r,n)}catch{return null}}}Ha.TWITTER_SIGN_IN_METHOD="twitter.com";Ha.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O7(t,e){return Gf(t,"POST","/v1/accounts:signUp",Sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const a=await Xi._fromIdTokenResponse(e,n,s),o=TC(n);return new Rl({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=TC(n);return new Rl({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function TC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends ks{constructor(e,r,n,s){var a;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,qg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new qg(e,r,n,s)}}function qP(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?qg._fromErrorAndOperation(t,a,e,n):a})}async function L7(t,e,r=!1){const n=await Al(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Rl._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(t,e,r=!1){const{auth:n}=t;if(vs(n.app))return Promise.reject(Ws(n));const s="reauthenticate";try{const a=await Al(t,qP(n,s,e,t),r);Ue(a.idToken,n,"internal-error");const o=S1(a.idToken);Ue(o,n,"internal-error");const{sub:l}=o;return Ue(t.uid===l,n,"user-mismatch"),Rl._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Cs(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(t,e,r=!1){if(vs(t.app))return Promise.reject(Ws(t));const n="signIn",s=await qP(t,n,e),a=await Rl._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(a.user),a}async function V7(t,e){return HP(Ea(t),e)}async function IC(t,e){return WP(ft(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(t,e,r){var n;Ue(((n=r.url)===null||n===void 0?void 0:n.length)>0,t,"invalid-continue-uri"),Ue(typeof r.dynamicLinkDomain>"u"||r.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=r.url,e.dynamicLinkDomain=r.dynamicLinkDomain,e.canHandleCodeInApp=r.handleCodeInApp,r.iOS&&(Ue(r.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=r.iOS.bundleId),r.android&&(Ue(r.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=r.android.installApp,e.androidMinimumVersionCode=r.android.minimumVersion,e.androidPackageName=r.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(t){const e=Ea(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function KP(t,e,r){if(vs(t.app))return Promise.reject(Ws(t));const n=Ea(t),o=await hb(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",O7).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&GP(t),c}),l=await Rl._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function $7(t,e,r){return vs(t.app)?Promise.reject(Ws(t)):V7(ft(t),xo.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&GP(t),n})}async function AC(t,e){const r=ft(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&F7(r.auth,s,e);const{email:a}=await I7(r.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U7(t,e){return ri(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rf(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=ft(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await Al(n,U7(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function z7(t,e){const r=ft(t);return vs(r.auth.app)?Promise.reject(Ws(r.auth)):YP(r,e,null)}function B7(t,e){return YP(ft(t),null,e)}async function YP(t,e,r){const{auth:n}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),r&&(a.password=r);const o=await Al(t,E7(n,a));await t._updateTokensIfNecessary(o,!0)}function q7(t,e,r,n){return ft(t).onIdTokenChanged(e,r,n)}function W7(t,e,r){return ft(t).beforeAuthStateChanged(e,r)}function H7(t,e,r,n){return ft(t).onAuthStateChanged(e,r,n)}function G7(t){return ft(t).signOut()}async function K7(t){return ft(t).delete()}const Wg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Wg,"1"),this.storage.removeItem(Wg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=1e3,Q7=10;class JP extends QP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$P(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);l7()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Q7):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Y7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}JP.type="LOCAL";const J7=JP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP extends QP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}XP.type="SESSION";const ZP=XP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new cx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:a}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(o).map(async u=>u(r.origin,a)),c=await X7(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=I1("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(m.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(){return window}function eB(t){wi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function tB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nB(){return eR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="firebaseLocalStorageDb",sB=1,Hg="firebaseLocalStorage",rR="fbase_key";class Yf{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function ux(t,e){return t.transaction([Hg],e?"readwrite":"readonly").objectStore(Hg)}function iB(){const t=indexedDB.deleteDatabase(tR);return new Yf(t).toPromise()}function fb(){const t=indexedDB.open(tR,sB);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Hg,{keyPath:rR})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Hg)?e(n):(n.close(),await iB(),e(await fb()))})})}async function PC(t,e,r){const n=ux(t,!0).put({[rR]:e,value:r});return new Yf(n).toPromise()}async function aB(t,e){const r=ux(t,!1).get(e),n=await new Yf(r).toPromise();return n===void 0?null:n.value}function RC(t,e){const r=ux(t,!0).delete(e);return new Yf(r).toPromise()}const oB=800,lB=3;class nR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fb(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>lB)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cx._getInstance(nB()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await tB(),!this.activeServiceWorker)return;this.sender=new Z7(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fb();return await PC(e,Wg,"1"),await RC(e,Wg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>PC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>aB(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>RC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=ux(s,!1).getAll();return new Yf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nR.type="LOCAL";const cB=nR;new Hf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t,e){return e?Zi(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1 extends C1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return iu(e,this._buildIdpRequest())}_linkToIdToken(e,r){return iu(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return iu(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function uB(t){return HP(t.auth,new A1(t),t.bypassAuthState)}function dB(t){const{auth:e,user:r}=t;return Ue(r,e,"internal-error"),WP(r,new A1(t),t.bypassAuthState)}async function hB(t){const{auth:e,user:r}=t;return Ue(r,e,"internal-error"),L7(r,new A1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,r,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uB;case"linkViaPopup":case"linkViaRedirect":return hB;case"reauthViaPopup":case"reauthViaRedirect":return dB;default:Cs(this.auth,"internal-error")}}resolve(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB=new Hf(2e3,1e4);class Kc extends iR{constructor(e,r,n,s,a){super(e,r,s,a),this.provider=n,this.authWindow=null,this.pollId=null,Kc.currentPopupAction&&Kc.currentPopupAction.cancel(),Kc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){ma(this.filter.length===1,"Popup operations only handle one event");const e=I1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fB.get())};e()}}Kc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB="pendingRedirect",Qp=new Map;class pB extends iR{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Qp.get(this.auth._key());if(!e){try{const n=await gB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Qp.set(this.auth._key(),e)}return this.bypassAuthState||Qp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gB(t,e){const r=oR(e),n=aR(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}async function vB(t,e){return aR(t)._set(oR(e),"true")}function xB(t,e){Qp.set(t._key(),e)}function aR(t){return Zi(t._redirectPersistence)}function oR(t){return Yp(mB,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(t,e,r){return wB(t,e,r)}async function wB(t,e,r){if(vs(t.app))return Promise.reject(Ws(t));const n=Ea(t);qz(t,e,T1),await n._initializationPromise;const s=sR(n,r);return await vB(s,n),s._openRedirect(n,e,"signInViaRedirect")}async function bB(t,e){return await Ea(t)._initializationPromise,lR(t,e,!1)}async function lR(t,e,r=!1){if(vs(t.app))return Promise.reject(Ws(t));const n=Ea(t),s=sR(n,e),o=await new pB(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=10*60*1e3;class jB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NB(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!cR(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(yi(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_B&&this.cachedEventUids.clear(),this.cachedEventUids.has(DC(e))}saveEventToCache(e){this.cachedEventUids.add(DC(e)),this.lastProcessedEventTime=Date.now()}}function DC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(t,e={}){return ri(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CB=/^https?/;async function kB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SB(t);for(const r of e)try{if(TB(r))return}catch{}Cs(t,"unauthorized-domain")}function TB(t){const e=cb(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!CB.test(r))return!1;if(EB.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB=new Hf(3e4,6e4);function MC(){const t=wi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function AB(t){return new Promise((e,r)=>{var n,s,a;function o(){MC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MC(),r(yi(t,"network-request-failed"))},timeout:IB.get()})}if(!((s=(n=wi().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=wi().gapi)===null||a===void 0)&&a.load)o();else{const l=v7("iframefcb");return wi()[l]=()=>{gapi.load?o():r(yi(t,"network-request-failed"))},zP(`${g7()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw Jp=null,e})}let Jp=null;function PB(t){return Jp=Jp||AB(t),Jp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=new Hf(5e3,15e3),DB="__/auth/iframe",MB="emulator/auth/iframe",OB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VB(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?N1(e,MB):`https://${t.config.authDomain}/${DB}`,n={apiKey:e.apiKey,appName:t.name,v:tc},s=LB.get(t.config.apiHost);s&&(n.eid=s);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${qf(n).slice(1)}`}async function FB(t){const e=await PB(t),r=wi().gapi;return Ue(r,t,"internal-error"),e.open({where:document.body,url:VB(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OB,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const o=yi(t,"network-request-failed"),l=wi().setTimeout(()=>{a(o)},RB.get());function c(){wi().clearTimeout(l),s(n)}n.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UB=500,zB=600,BB="_blank",qB="http://localhost";class OC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WB(t,e,r,n=UB,s=zB){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},$B),{width:n.toString(),height:s.toString(),top:a,left:o}),u=cn().toLowerCase();r&&(l=MP(u)?BB:r),RP(u)&&(e=e||qB,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[g,x])=>`${m}${g}=${x},`,"");if(o7(u)&&l!=="_self")return HB(e||"",l),new OC(null);const h=window.open(e||"",l,d);Ue(h,t,"popup-blocked");try{h.focus()}catch{}return new OC(h)}function HB(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB="__/auth/handler",KB="emulator/auth/handler",YB=encodeURIComponent("fac");async function LC(t,e,r,n,s,a){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:tc,eventId:s};if(e instanceof T1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",C9(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Kf){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${YB}=${encodeURIComponent(c)}`:"";return`${QB(t)}?${qf(l).slice(1)}${u}`}function QB({config:t}){return t.emulator?N1(t,KB):`https://${t.authDomain}/${GB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="webStorageSupport";class JB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZP,this._completeRedirectFn=lR,this._overrideRedirectResult=xB}async _openPopup(e,r,n,s){var a;ma((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await LC(e,r,n,cb(),s);return WB(e,o,I1())}async _openRedirect(e,r,n,s){await this._originValidation(e);const a=await LC(e,r,n,cb(),s);return eB(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(ma(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await FB(e),n=new jB(e);return r.register("authEvent",s=>(Ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(m0,{type:m0},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[m0];o!==void 0&&r(!!o),Cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=kB(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return $P()||DP()||E1()}}const XB=JB;var VC="@firebase/auth",FC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tq(t){Ys(new Es("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Ue(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UP(t)},u=new f7(n,s,a,c);return _7(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ys(new Es("auth-internal",e=>{const r=Ea(e.getProvider("auth").getImmediate());return(n=>new ZB(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fn(VC,FC,eq(t)),Fn(VC,FC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq=5*60,nq=mP("authIdTokenMaxAge")||rq;let $C=null;const sq=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>nq)return;const s=r==null?void 0:r.token;$C!==s&&($C=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iq(t=ox()){const e=Vo(t,"auth");if(e.isInitialized())return e.getImmediate();const r=b7(t,{popupRedirectResolver:XB,persistence:[cB,J7,ZP]}),n=mP("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=sq(a.toString());W7(r,o,()=>o(r.currentUser)),q7(r,l=>o(l))}}const s=dP("auth");return s&&j7(r,`http://${s}`),r}function aq(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}m7({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const a=yi("internal-error");a.customData=s,r(a)},n.type="text/javascript",n.charset="UTF-8",aq().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tq("Browser");var oq="firebase",lq="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn(oq,lq,"app");var UC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vl,uR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,k){function R(){}R.prototype=k.prototype,T.D=k.prototype,T.prototype=new R,T.prototype.constructor=T,T.C=function(S,A,P){for(var N=Array(arguments.length-2),V=2;V<arguments.length;V++)N[V-2]=arguments[V];return k.prototype[A].apply(S,N)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,k,R){R||(R=0);var S=Array(16);if(typeof k=="string")for(var A=0;16>A;++A)S[A]=k.charCodeAt(R++)|k.charCodeAt(R++)<<8|k.charCodeAt(R++)<<16|k.charCodeAt(R++)<<24;else for(A=0;16>A;++A)S[A]=k[R++]|k[R++]<<8|k[R++]<<16|k[R++]<<24;k=T.g[0],R=T.g[1],A=T.g[2];var P=T.g[3],N=k+(P^R&(A^P))+S[0]+3614090360&4294967295;k=R+(N<<7&4294967295|N>>>25),N=P+(A^k&(R^A))+S[1]+3905402710&4294967295,P=k+(N<<12&4294967295|N>>>20),N=A+(R^P&(k^R))+S[2]+606105819&4294967295,A=P+(N<<17&4294967295|N>>>15),N=R+(k^A&(P^k))+S[3]+3250441966&4294967295,R=A+(N<<22&4294967295|N>>>10),N=k+(P^R&(A^P))+S[4]+4118548399&4294967295,k=R+(N<<7&4294967295|N>>>25),N=P+(A^k&(R^A))+S[5]+1200080426&4294967295,P=k+(N<<12&4294967295|N>>>20),N=A+(R^P&(k^R))+S[6]+2821735955&4294967295,A=P+(N<<17&4294967295|N>>>15),N=R+(k^A&(P^k))+S[7]+4249261313&4294967295,R=A+(N<<22&4294967295|N>>>10),N=k+(P^R&(A^P))+S[8]+1770035416&4294967295,k=R+(N<<7&4294967295|N>>>25),N=P+(A^k&(R^A))+S[9]+2336552879&4294967295,P=k+(N<<12&4294967295|N>>>20),N=A+(R^P&(k^R))+S[10]+4294925233&4294967295,A=P+(N<<17&4294967295|N>>>15),N=R+(k^A&(P^k))+S[11]+2304563134&4294967295,R=A+(N<<22&4294967295|N>>>10),N=k+(P^R&(A^P))+S[12]+1804603682&4294967295,k=R+(N<<7&4294967295|N>>>25),N=P+(A^k&(R^A))+S[13]+4254626195&4294967295,P=k+(N<<12&4294967295|N>>>20),N=A+(R^P&(k^R))+S[14]+2792965006&4294967295,A=P+(N<<17&4294967295|N>>>15),N=R+(k^A&(P^k))+S[15]+1236535329&4294967295,R=A+(N<<22&4294967295|N>>>10),N=k+(A^P&(R^A))+S[1]+4129170786&4294967295,k=R+(N<<5&4294967295|N>>>27),N=P+(R^A&(k^R))+S[6]+3225465664&4294967295,P=k+(N<<9&4294967295|N>>>23),N=A+(k^R&(P^k))+S[11]+643717713&4294967295,A=P+(N<<14&4294967295|N>>>18),N=R+(P^k&(A^P))+S[0]+3921069994&4294967295,R=A+(N<<20&4294967295|N>>>12),N=k+(A^P&(R^A))+S[5]+3593408605&4294967295,k=R+(N<<5&4294967295|N>>>27),N=P+(R^A&(k^R))+S[10]+38016083&4294967295,P=k+(N<<9&4294967295|N>>>23),N=A+(k^R&(P^k))+S[15]+3634488961&4294967295,A=P+(N<<14&4294967295|N>>>18),N=R+(P^k&(A^P))+S[4]+3889429448&4294967295,R=A+(N<<20&4294967295|N>>>12),N=k+(A^P&(R^A))+S[9]+568446438&4294967295,k=R+(N<<5&4294967295|N>>>27),N=P+(R^A&(k^R))+S[14]+3275163606&4294967295,P=k+(N<<9&4294967295|N>>>23),N=A+(k^R&(P^k))+S[3]+4107603335&4294967295,A=P+(N<<14&4294967295|N>>>18),N=R+(P^k&(A^P))+S[8]+1163531501&4294967295,R=A+(N<<20&4294967295|N>>>12),N=k+(A^P&(R^A))+S[13]+2850285829&4294967295,k=R+(N<<5&4294967295|N>>>27),N=P+(R^A&(k^R))+S[2]+4243563512&4294967295,P=k+(N<<9&4294967295|N>>>23),N=A+(k^R&(P^k))+S[7]+1735328473&4294967295,A=P+(N<<14&4294967295|N>>>18),N=R+(P^k&(A^P))+S[12]+2368359562&4294967295,R=A+(N<<20&4294967295|N>>>12),N=k+(R^A^P)+S[5]+4294588738&4294967295,k=R+(N<<4&4294967295|N>>>28),N=P+(k^R^A)+S[8]+2272392833&4294967295,P=k+(N<<11&4294967295|N>>>21),N=A+(P^k^R)+S[11]+1839030562&4294967295,A=P+(N<<16&4294967295|N>>>16),N=R+(A^P^k)+S[14]+4259657740&4294967295,R=A+(N<<23&4294967295|N>>>9),N=k+(R^A^P)+S[1]+2763975236&4294967295,k=R+(N<<4&4294967295|N>>>28),N=P+(k^R^A)+S[4]+1272893353&4294967295,P=k+(N<<11&4294967295|N>>>21),N=A+(P^k^R)+S[7]+4139469664&4294967295,A=P+(N<<16&4294967295|N>>>16),N=R+(A^P^k)+S[10]+3200236656&4294967295,R=A+(N<<23&4294967295|N>>>9),N=k+(R^A^P)+S[13]+681279174&4294967295,k=R+(N<<4&4294967295|N>>>28),N=P+(k^R^A)+S[0]+3936430074&4294967295,P=k+(N<<11&4294967295|N>>>21),N=A+(P^k^R)+S[3]+3572445317&4294967295,A=P+(N<<16&4294967295|N>>>16),N=R+(A^P^k)+S[6]+76029189&4294967295,R=A+(N<<23&4294967295|N>>>9),N=k+(R^A^P)+S[9]+3654602809&4294967295,k=R+(N<<4&4294967295|N>>>28),N=P+(k^R^A)+S[12]+3873151461&4294967295,P=k+(N<<11&4294967295|N>>>21),N=A+(P^k^R)+S[15]+530742520&4294967295,A=P+(N<<16&4294967295|N>>>16),N=R+(A^P^k)+S[2]+3299628645&4294967295,R=A+(N<<23&4294967295|N>>>9),N=k+(A^(R|~P))+S[0]+4096336452&4294967295,k=R+(N<<6&4294967295|N>>>26),N=P+(R^(k|~A))+S[7]+1126891415&4294967295,P=k+(N<<10&4294967295|N>>>22),N=A+(k^(P|~R))+S[14]+2878612391&4294967295,A=P+(N<<15&4294967295|N>>>17),N=R+(P^(A|~k))+S[5]+4237533241&4294967295,R=A+(N<<21&4294967295|N>>>11),N=k+(A^(R|~P))+S[12]+1700485571&4294967295,k=R+(N<<6&4294967295|N>>>26),N=P+(R^(k|~A))+S[3]+2399980690&4294967295,P=k+(N<<10&4294967295|N>>>22),N=A+(k^(P|~R))+S[10]+4293915773&4294967295,A=P+(N<<15&4294967295|N>>>17),N=R+(P^(A|~k))+S[1]+2240044497&4294967295,R=A+(N<<21&4294967295|N>>>11),N=k+(A^(R|~P))+S[8]+1873313359&4294967295,k=R+(N<<6&4294967295|N>>>26),N=P+(R^(k|~A))+S[15]+4264355552&4294967295,P=k+(N<<10&4294967295|N>>>22),N=A+(k^(P|~R))+S[6]+2734768916&4294967295,A=P+(N<<15&4294967295|N>>>17),N=R+(P^(A|~k))+S[13]+1309151649&4294967295,R=A+(N<<21&4294967295|N>>>11),N=k+(A^(R|~P))+S[4]+4149444226&4294967295,k=R+(N<<6&4294967295|N>>>26),N=P+(R^(k|~A))+S[11]+3174756917&4294967295,P=k+(N<<10&4294967295|N>>>22),N=A+(k^(P|~R))+S[2]+718787259&4294967295,A=P+(N<<15&4294967295|N>>>17),N=R+(P^(A|~k))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+k&4294967295,T.g[1]=T.g[1]+(A+(N<<21&4294967295|N>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+P&4294967295}n.prototype.u=function(T,k){k===void 0&&(k=T.length);for(var R=k-this.blockSize,S=this.B,A=this.h,P=0;P<k;){if(A==0)for(;P<=R;)s(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<k;)if(S[A++]=T.charCodeAt(P++),A==this.blockSize){s(this,S),A=0;break}}else for(;P<k;)if(S[A++]=T[P++],A==this.blockSize){s(this,S),A=0;break}}this.h=A,this.o+=k},n.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var k=1;k<T.length-8;++k)T[k]=0;var R=8*this.o;for(k=T.length-8;k<T.length;++k)T[k]=R&255,R/=256;for(this.u(T),T=Array(16),k=R=0;4>k;++k)for(var S=0;32>S;S+=8)T[R++]=this.g[k]>>>S&255;return T};function a(T,k){var R=l;return Object.prototype.hasOwnProperty.call(R,T)?R[T]:R[T]=k(T)}function o(T,k){this.h=k;for(var R=[],S=!0,A=T.length-1;0<=A;A--){var P=T[A]|0;S&&P==k||(R[A]=P,S=!1)}this.g=R}var l={};function c(T){return-128<=T&&128>T?a(T,function(k){return new o([k|0],0>k?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return b(u(-T));for(var k=[],R=1,S=0;T>=R;S++)k[S]=T/R|0,R*=4294967296;return new o(k,0)}function d(T,k){if(T.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(T.charAt(0)=="-")return b(d(T.substring(1),k));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(k,8)),S=h,A=0;A<T.length;A+=8){var P=Math.min(8,T.length-A),N=parseInt(T.substring(A,A+P),k);8>P?(P=u(Math.pow(k,P)),S=S.j(P).add(u(N))):(S=S.j(R),S=S.add(u(N)))}return S}var h=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-b(this).m();for(var T=0,k=1,R=0;R<this.g.length;R++){var S=this.i(R);T+=(0<=S?S:4294967296+S)*k,k*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(w(this))return"-"+b(this).toString(T);for(var k=u(Math.pow(T,6)),R=this,S="";;){var A=E(R,k).g;R=y(R,A.j(k));var P=((0<R.g.length?R.g[0]:R.h)>>>0).toString(T);if(R=A,x(R))return P+S;for(;6>P.length;)P="0"+P;S=P+S}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(var k=0;k<T.g.length;k++)if(T.g[k]!=0)return!1;return!0}function w(T){return T.h==-1}t.l=function(T){return T=y(this,T),w(T)?-1:x(T)?0:1};function b(T){for(var k=T.g.length,R=[],S=0;S<k;S++)R[S]=~T.g[S];return new o(R,~T.h).add(m)}t.abs=function(){return w(this)?b(this):this},t.add=function(T){for(var k=Math.max(this.g.length,T.g.length),R=[],S=0,A=0;A<=k;A++){var P=S+(this.i(A)&65535)+(T.i(A)&65535),N=(P>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);S=N>>>16,P&=65535,N&=65535,R[A]=N<<16|P}return new o(R,R[R.length-1]&-2147483648?-1:0)};function y(T,k){return T.add(b(k))}t.j=function(T){if(x(this)||x(T))return h;if(w(this))return w(T)?b(this).j(b(T)):b(b(this).j(T));if(w(T))return b(this.j(b(T)));if(0>this.l(g)&&0>T.l(g))return u(this.m()*T.m());for(var k=this.g.length+T.g.length,R=[],S=0;S<2*k;S++)R[S]=0;for(S=0;S<this.g.length;S++)for(var A=0;A<T.g.length;A++){var P=this.i(S)>>>16,N=this.i(S)&65535,V=T.i(A)>>>16,U=T.i(A)&65535;R[2*S+2*A]+=N*U,v(R,2*S+2*A),R[2*S+2*A+1]+=P*U,v(R,2*S+2*A+1),R[2*S+2*A+1]+=N*V,v(R,2*S+2*A+1),R[2*S+2*A+2]+=P*V,v(R,2*S+2*A+2)}for(S=0;S<k;S++)R[S]=R[2*S+1]<<16|R[2*S];for(S=k;S<2*k;S++)R[S]=0;return new o(R,0)};function v(T,k){for(;(T[k]&65535)!=T[k];)T[k+1]+=T[k]>>>16,T[k]&=65535,k++}function _(T,k){this.g=T,this.h=k}function E(T,k){if(x(k))throw Error("division by zero");if(x(T))return new _(h,h);if(w(T))return k=E(b(T),k),new _(b(k.g),b(k.h));if(w(k))return k=E(T,b(k)),new _(b(k.g),k.h);if(30<T.g.length){if(w(T)||w(k))throw Error("slowDivide_ only works with positive integers.");for(var R=m,S=k;0>=S.l(T);)R=C(R),S=C(S);var A=D(R,1),P=D(S,1);for(S=D(S,2),R=D(R,2);!x(S);){var N=P.add(S);0>=N.l(T)&&(A=A.add(R),P=N),S=D(S,1),R=D(R,1)}return k=y(T,A.j(k)),new _(A,k)}for(A=h;0<=T.l(k);){for(R=Math.max(1,Math.floor(T.m()/k.m())),S=Math.ceil(Math.log(R)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),P=u(R),N=P.j(k);w(N)||0<N.l(T);)R-=S,P=u(R),N=P.j(k);x(P)&&(P=m),A=A.add(P),T=y(T,N)}return new _(A,T)}t.A=function(T){return E(this,T).h},t.and=function(T){for(var k=Math.max(this.g.length,T.g.length),R=[],S=0;S<k;S++)R[S]=this.i(S)&T.i(S);return new o(R,this.h&T.h)},t.or=function(T){for(var k=Math.max(this.g.length,T.g.length),R=[],S=0;S<k;S++)R[S]=this.i(S)|T.i(S);return new o(R,this.h|T.h)},t.xor=function(T){for(var k=Math.max(this.g.length,T.g.length),R=[],S=0;S<k;S++)R[S]=this.i(S)^T.i(S);return new o(R,this.h^T.h)};function C(T){for(var k=T.g.length+1,R=[],S=0;S<k;S++)R[S]=T.i(S)<<1|T.i(S-1)>>>31;return new o(R,T.h)}function D(T,k){var R=k>>5;k%=32;for(var S=T.g.length-R,A=[],P=0;P<S;P++)A[P]=0<k?T.i(P+R)>>>k|T.i(P+R+1)<<32-k:T.i(P+R);return new o(A,T.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,uR=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,vl=o}).apply(typeof UC<"u"?UC:typeof self<"u"?self:typeof window<"u"?window:{});var dp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dR,th,hR,Xp,mb,fR,mR,pR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,j,I){return f==Array.prototype||f==Object.prototype||(f[j]=I.value),f};function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof dp=="object"&&dp];for(var j=0;j<f.length;++j){var I=f[j];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var n=r(this);function s(f,j){if(j)e:{var I=n;f=f.split(".");for(var M=0;M<f.length-1;M++){var G=f[M];if(!(G in I))break e;I=I[G]}f=f[f.length-1],M=I[f],j=j(M),j!=M&&j!=null&&e(I,f,{configurable:!0,writable:!0,value:j})}}function a(f,j){f instanceof String&&(f+="");var I=0,M=!1,G={next:function(){if(!M&&I<f.length){var ee=I++;return{value:j(ee,f[ee]),done:!1}}return M=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(f){return f||function(){return a(this,function(j,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(f){var j=typeof f;return j=j!="object"?j:f?Array.isArray(f)?"array":j:"null",j=="array"||j=="object"&&typeof f.length=="number"}function u(f){var j=typeof f;return j=="object"&&f!=null||j=="function"}function d(f,j,I){return f.call.apply(f.bind,arguments)}function h(f,j,I){if(!f)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,M),f.apply(j,G)}}return function(){return f.apply(j,arguments)}}function m(f,j,I){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(f,j){var I=Array.prototype.slice.call(arguments,1);return function(){var M=I.slice();return M.push.apply(M,arguments),f.apply(this,M)}}function x(f,j){function I(){}I.prototype=j.prototype,f.aa=j.prototype,f.prototype=new I,f.prototype.constructor=f,f.Qb=function(M,G,ee){for(var ge=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)ge[Dt-2]=arguments[Dt];return j.prototype[G].apply(M,ge)}}function w(f){const j=f.length;if(0<j){const I=Array(j);for(let M=0;M<j;M++)I[M]=f[M];return I}return[]}function b(f,j){for(let I=1;I<arguments.length;I++){const M=arguments[I];if(c(M)){const G=f.length||0,ee=M.length||0;f.length=G+ee;for(let ge=0;ge<ee;ge++)f[G+ge]=M[ge]}else f.push(M)}}class y{constructor(j,I){this.i=j,this.j=I,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function v(f){return/^[\s\xa0]*$/.test(f)}function _(){var f=l.navigator;return f&&(f=f.userAgent)?f:""}function E(f){return E[" "](f),f}E[" "]=function(){};var C=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function D(f,j,I){for(const M in f)j.call(I,f[M],M,f)}function T(f,j){for(const I in f)j.call(void 0,f[I],I,f)}function k(f){const j={};for(const I in f)j[I]=f[I];return j}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(f,j){let I,M;for(let G=1;G<arguments.length;G++){M=arguments[G];for(I in M)f[I]=M[I];for(let ee=0;ee<R.length;ee++)I=R[ee],Object.prototype.hasOwnProperty.call(M,I)&&(f[I]=M[I])}}function A(f){var j=1;f=f.split(":");const I=[];for(;0<j&&f.length;)I.push(f.shift()),j--;return f.length&&I.push(f.join(":")),I}function P(f){l.setTimeout(()=>{throw f},0)}function N(){var f=W;let j=null;return f.g&&(j=f.g,f.g=f.g.next,f.g||(f.h=null),j.next=null),j}class V{constructor(){this.h=this.g=null}add(j,I){const M=U.get();M.set(j,I),this.h?this.h.next=M:this.g=M,this.h=M}}var U=new y(()=>new H,f=>f.reset());class H{constructor(){this.next=this.g=this.h=null}set(j,I){this.h=j,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let F,L=!1,W=new V,z=()=>{const f=l.Promise.resolve(void 0);F=()=>{f.then(X)}};var X=()=>{for(var f;f=N();){try{f.h.call(f.g)}catch(I){P(I)}var j=U;j.j(f),100>j.h&&(j.h++,f.next=j.g,j.g=f)}L=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(f,j){this.type=f,this.g=this.target=j,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Ze=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var f=!1,j=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};l.addEventListener("test",I,j),l.removeEventListener("test",I,j)}catch{}return f}();function mt(f,j){if(Se.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var I=this.type=f.type,M=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=j,j=f.relatedTarget){if(C){e:{try{E(j.nodeName);var G=!0;break e}catch{}G=!1}G||(j=null)}}else I=="mouseover"?j=f.fromElement:I=="mouseout"&&(j=f.toElement);this.relatedTarget=j,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:st[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&mt.aa.h.call(this)}}x(mt,Se);var st={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function te(f,j,I,M,G){this.listener=f,this.proxy=null,this.src=j,this.type=I,this.capture=!!M,this.ha=G,this.key=++Xe,this.da=this.fa=!1}function me(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function K(f){this.src=f,this.g={},this.h=0}K.prototype.add=function(f,j,I,M,G){var ee=f.toString();f=this.g[ee],f||(f=this.g[ee]=[],this.h++);var ge=q(f,j,M,G);return-1<ge?(j=f[ge],I||(j.fa=!1)):(j=new te(j,this.src,ee,!!M,G),j.fa=I,f.push(j)),j};function le(f,j){var I=j.type;if(I in f.g){var M=f.g[I],G=Array.prototype.indexOf.call(M,j,void 0),ee;(ee=0<=G)&&Array.prototype.splice.call(M,G,1),ee&&(me(j),f.g[I].length==0&&(delete f.g[I],f.h--))}}function q(f,j,I,M){for(var G=0;G<f.length;++G){var ee=f[G];if(!ee.da&&ee.listener==j&&ee.capture==!!I&&ee.ha==M)return G}return-1}var Z="closure_lm_"+(1e6*Math.random()|0),fe={};function Ee(f,j,I,M,G){if(Array.isArray(j)){for(var ee=0;ee<j.length;ee++)Ee(f,j[ee],I,M,G);return null}return I=_t(I),f&&f[_e]?f.K(j,I,u(M)?!!M.capture:!!M,G):We(f,j,I,!1,M,G)}function We(f,j,I,M,G,ee){if(!j)throw Error("Invalid event type");var ge=u(G)?!!G.capture:!!G,Dt=he(f);if(Dt||(f[Z]=Dt=new K(f)),I=Dt.add(j,I,M,ge,ee),I.proxy)return I;if(M=O(),I.proxy=M,M.src=f,M.listener=I,f.addEventListener)Ze||(G=ge),G===void 0&&(G=!1),f.addEventListener(j.toString(),M,G);else if(f.attachEvent)f.attachEvent(je(j.toString()),M);else if(f.addListener&&f.removeListener)f.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return I}function O(){function f(I){return j.call(f.src,f.listener,I)}const j=xe;return f}function B(f,j,I,M,G){if(Array.isArray(j))for(var ee=0;ee<j.length;ee++)B(f,j[ee],I,M,G);else M=u(M)?!!M.capture:!!M,I=_t(I),f&&f[_e]?(f=f.i,j=String(j).toString(),j in f.g&&(ee=f.g[j],I=q(ee,I,M,G),-1<I&&(me(ee[I]),Array.prototype.splice.call(ee,I,1),ee.length==0&&(delete f.g[j],f.h--)))):f&&(f=he(f))&&(j=f.g[j.toString()],f=-1,j&&(f=q(j,I,M,G)),(I=-1<f?j[f]:null)&&Y(I))}function Y(f){if(typeof f!="number"&&f&&!f.da){var j=f.src;if(j&&j[_e])le(j.i,f);else{var I=f.type,M=f.proxy;j.removeEventListener?j.removeEventListener(I,M,f.capture):j.detachEvent?j.detachEvent(je(I),M):j.addListener&&j.removeListener&&j.removeListener(M),(I=he(j))?(le(I,f),I.h==0&&(I.src=null,j[Z]=null)):me(f)}}}function je(f){return f in fe?fe[f]:fe[f]="on"+f}function xe(f,j){if(f.da)f=!0;else{j=new mt(j,this);var I=f.listener,M=f.ha||f.src;f.fa&&Y(f),f=I.call(M,j)}return f}function he(f){return f=f[Z],f instanceof K?f:null}var Oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(f){return typeof f=="function"?f:(f[Oe]||(f[Oe]=function(j){return f.handleEvent(j)}),f[Oe])}function pt(){oe.call(this),this.i=new K(this),this.M=this,this.F=null}x(pt,oe),pt.prototype[_e]=!0,pt.prototype.removeEventListener=function(f,j,I,M){B(this,f,j,I,M)};function vt(f,j){var I,M=f.F;if(M)for(I=[];M;M=M.F)I.push(M);if(f=f.M,M=j.type||j,typeof j=="string")j=new Se(j,f);else if(j instanceof Se)j.target=j.target||f;else{var G=j;j=new Se(M,f),S(j,G)}if(G=!0,I)for(var ee=I.length-1;0<=ee;ee--){var ge=j.g=I[ee];G=cs(ge,M,!0,j)&&G}if(ge=j.g=f,G=cs(ge,M,!0,j)&&G,G=cs(ge,M,!1,j)&&G,I)for(ee=0;ee<I.length;ee++)ge=j.g=I[ee],G=cs(ge,M,!1,j)&&G}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var f=this.i,j;for(j in f.g){for(var I=f.g[j],M=0;M<I.length;M++)me(I[M]);delete f.g[j],f.h--}}this.F=null},pt.prototype.K=function(f,j,I,M){return this.i.add(String(f),j,!1,I,M)},pt.prototype.L=function(f,j,I,M){return this.i.add(String(f),j,!0,I,M)};function cs(f,j,I,M){if(j=f.i.g[String(j)],!j)return!0;j=j.concat();for(var G=!0,ee=0;ee<j.length;++ee){var ge=j[ee];if(ge&&!ge.da&&ge.capture==I){var Dt=ge.listener,Fr=ge.ha||ge.src;ge.fa&&le(f.i,ge),G=Dt.call(Fr,M)!==!1&&G}}return G&&!M.defaultPrevented}function Tm(f,j,I){if(typeof f=="function")I&&(f=m(f,I));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:l.setTimeout(f,j||0)}function hc(f){f.g=Tm(()=>{f.g=null,f.i&&(f.i=!1,hc(f))},f.l);const j=f.h;f.h=null,f.m.apply(null,j)}class xd extends oe{constructor(j,I){super(),this.m=j,this.l=I,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:hc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Go(f){oe.call(this),this.h=f,this.g={}}x(Go,oe);var yd=[];function Im(f){D(f.g,function(j,I){this.g.hasOwnProperty(I)&&Y(j)},f),f.g={}}Go.prototype.N=function(){Go.aa.N.call(this),Im(this)},Go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fc=l.JSON.stringify,dV=l.JSON.parse,hV=class{stringify(f){return l.JSON.stringify(f,void 0)}parse(f){return l.JSON.parse(f,void 0)}};function wy(){}wy.prototype.h=null;function XN(f){return f.h||(f.h=f.i())}function ZN(){}var wd={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function by(){Se.call(this,"d")}x(by,Se);function _y(){Se.call(this,"c")}x(_y,Se);var Ko={},eS=null;function Am(){return eS=eS||new pt}Ko.La="serverreachability";function tS(f){Se.call(this,Ko.La,f)}x(tS,Se);function bd(f){const j=Am();vt(j,new tS(j))}Ko.STAT_EVENT="statevent";function rS(f,j){Se.call(this,Ko.STAT_EVENT,f),this.stat=j}x(rS,Se);function dn(f){const j=Am();vt(j,new rS(j,f))}Ko.Ma="timingevent";function nS(f,j){Se.call(this,Ko.Ma,f),this.size=j}x(nS,Se);function _d(f,j){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){f()},j)}function jd(){this.g=!0}jd.prototype.xa=function(){this.g=!1};function fV(f,j,I,M,G,ee){f.info(function(){if(f.g)if(ee)for(var ge="",Dt=ee.split("&"),Fr=0;Fr<Dt.length;Fr++){var Nt=Dt[Fr].split("=");if(1<Nt.length){var Yr=Nt[0];Nt=Nt[1];var Qr=Yr.split("_");ge=2<=Qr.length&&Qr[1]=="type"?ge+(Yr+"="+Nt+"&"):ge+(Yr+"=redacted&")}}else ge=null;else ge=ee;return"XMLHTTP REQ ("+M+") [attempt "+G+"]: "+j+`
`+I+`
`+ge})}function mV(f,j,I,M,G,ee,ge){f.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+G+"]: "+j+`
`+I+`
`+ee+" "+ge})}function mc(f,j,I,M){f.info(function(){return"XMLHTTP TEXT ("+j+"): "+gV(f,I)+(M?" "+M:"")})}function pV(f,j){f.info(function(){return"TIMEOUT: "+j})}jd.prototype.info=function(){};function gV(f,j){if(!f.g)return j;if(!j)return null;try{var I=JSON.parse(j);if(I){for(f=0;f<I.length;f++)if(Array.isArray(I[f])){var M=I[f];if(!(2>M.length)){var G=M[1];if(Array.isArray(G)&&!(1>G.length)){var ee=G[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var ge=1;ge<G.length;ge++)G[ge]=""}}}}return fc(I)}catch{return j}}var Pm={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jy;function Rm(){}x(Rm,wy),Rm.prototype.g=function(){return new XMLHttpRequest},Rm.prototype.i=function(){return{}},jy=new Rm;function ka(f,j,I,M){this.j=f,this.i=j,this.l=I,this.R=M||1,this.U=new Go(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iS}function iS(){this.i=null,this.g="",this.h=!1}var aS={},Ny={};function Sy(f,j,I){f.L=1,f.v=Lm(Oi(j)),f.m=I,f.P=!0,oS(f,null)}function oS(f,j){f.F=Date.now(),Dm(f),f.A=Oi(f.v);var I=f.A,M=f.R;Array.isArray(M)||(M=[String(M)]),bS(I.i,"t",M),f.C=0,I=f.j.J,f.h=new iS,f.g=FS(f.j,I?j:null,!f.m),0<f.O&&(f.M=new xd(m(f.Y,f,f.g),f.O)),j=f.U,I=f.g,M=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(yd[0]=G.toString()),G=yd);for(var ee=0;ee<G.length;ee++){var ge=Ee(I,G[ee],M||j.handleEvent,!1,j.h||j);if(!ge)break;j.g[ge.key]=ge}j=f.H?k(f.H):{},f.m?(f.u||(f.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,j)):(f.u="GET",f.g.ea(f.A,f.u,null,j)),bd(),fV(f.i,f.u,f.A,f.l,f.R,f.m)}ka.prototype.ca=function(f){f=f.target;const j=this.M;j&&Li(f)==3?j.j():this.Y(f)},ka.prototype.Y=function(f){try{if(f==this.g)e:{const Qr=Li(this.g);var j=this.g.Ba();const vc=this.g.Z();if(!(3>Qr)&&(Qr!=3||this.g&&(this.h.h||this.g.oa()||kS(this.g)))){this.J||Qr!=4||j==7||(j==8||0>=vc?bd(3):bd(2)),Ey(this);var I=this.g.Z();this.X=I;t:if(lS(this)){var M=kS(this.g);f="";var G=M.length,ee=Li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yo(this),Nd(this);var ge="";break t}this.h.i=new l.TextDecoder}for(j=0;j<G;j++)this.h.h=!0,f+=this.h.i.decode(M[j],{stream:!(ee&&j==G-1)});M.length=0,this.h.g+=f,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=I==200,mV(this.i,this.u,this.A,this.l,this.R,Qr,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Dt,Fr=this.g;if((Dt=Fr.g?Fr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Dt)){var Nt=Dt;break t}}Nt=null}if(I=Nt)mc(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cy(this,I);else{this.o=!1,this.s=3,dn(12),Yo(this),Nd(this);break e}}if(this.P){I=!0;let Is;for(;!this.J&&this.C<ge.length;)if(Is=vV(this,ge),Is==Ny){Qr==4&&(this.s=4,dn(14),I=!1),mc(this.i,this.l,null,"[Incomplete Response]");break}else if(Is==aS){this.s=4,dn(15),mc(this.i,this.l,ge,"[Invalid Chunk]"),I=!1;break}else mc(this.i,this.l,Is,null),Cy(this,Is);if(lS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qr!=4||ge.length!=0||this.h.h||(this.s=1,dn(16),I=!1),this.o=this.o&&I,!I)mc(this.i,this.l,ge,"[Invalid Chunked Response]"),Yo(this),Nd(this);else if(0<ge.length&&!this.W){this.W=!0;var Yr=this.j;Yr.g==this&&Yr.ba&&!Yr.M&&(Yr.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),Ry(Yr),Yr.M=!0,dn(11))}}else mc(this.i,this.l,ge,null),Cy(this,ge);Qr==4&&Yo(this),this.o&&!this.J&&(Qr==4?MS(this.j,this):(this.o=!1,Dm(this)))}else DV(this.g),I==400&&0<ge.indexOf("Unknown SID")?(this.s=3,dn(12)):(this.s=0,dn(13)),Yo(this),Nd(this)}}}catch{}finally{}};function lS(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function vV(f,j){var I=f.C,M=j.indexOf(`
`,I);return M==-1?Ny:(I=Number(j.substring(I,M)),isNaN(I)?aS:(M+=1,M+I>j.length?Ny:(j=j.slice(M,M+I),f.C=M+I,j)))}ka.prototype.cancel=function(){this.J=!0,Yo(this)};function Dm(f){f.S=Date.now()+f.I,cS(f,f.I)}function cS(f,j){if(f.B!=null)throw Error("WatchDog timer not null");f.B=_d(m(f.ba,f),j)}function Ey(f){f.B&&(l.clearTimeout(f.B),f.B=null)}ka.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(pV(this.i,this.A),this.L!=2&&(bd(),dn(17)),Yo(this),this.s=2,Nd(this)):cS(this,this.S-f)};function Nd(f){f.j.G==0||f.J||MS(f.j,f)}function Yo(f){Ey(f);var j=f.M;j&&typeof j.ma=="function"&&j.ma(),f.M=null,Im(f.U),f.g&&(j=f.g,f.g=null,j.abort(),j.ma())}function Cy(f,j){try{var I=f.j;if(I.G!=0&&(I.g==f||ky(I.h,f))){if(!f.K&&ky(I.h,f)&&I.G==3){try{var M=I.Da.g.parse(j)}catch{M=null}if(Array.isArray(M)&&M.length==3){var G=M;if(G[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<f.F)Bm(I),Um(I);else break e;Py(I),dn(18)}}else I.za=G[1],0<I.za-I.T&&37500>G[2]&&I.F&&I.v==0&&!I.C&&(I.C=_d(m(I.Za,I),6e3));if(1>=hS(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Jo(I,11)}else if((f.K||I.g==f)&&Bm(I),!v(j))for(G=I.Da.g.parse(j),j=0;j<G.length;j++){let Nt=G[j];if(I.T=Nt[0],Nt=Nt[1],I.G==2)if(Nt[0]=="c"){I.K=Nt[1],I.ia=Nt[2];const Yr=Nt[3];Yr!=null&&(I.la=Yr,I.j.info("VER="+I.la));const Qr=Nt[4];Qr!=null&&(I.Aa=Qr,I.j.info("SVER="+I.Aa));const vc=Nt[5];vc!=null&&typeof vc=="number"&&0<vc&&(M=1.5*vc,I.L=M,I.j.info("backChannelRequestTimeoutMs_="+M)),M=I;const Is=f.g;if(Is){const Wm=Is.g?Is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wm){var ee=M.h;ee.g||Wm.indexOf("spdy")==-1&&Wm.indexOf("quic")==-1&&Wm.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Ty(ee,ee.h),ee.h=null))}if(M.D){const Dy=Is.g?Is.g.getResponseHeader("X-HTTP-Session-Id"):null;Dy&&(M.ya=Dy,qt(M.I,M.D,Dy))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-f.F,I.j.info("Handshake RTT: "+I.R+"ms")),M=I;var ge=f;if(M.qa=VS(M,M.J?M.ia:null,M.W),ge.K){fS(M.h,ge);var Dt=ge,Fr=M.L;Fr&&(Dt.I=Fr),Dt.B&&(Ey(Dt),Dm(Dt)),M.g=ge}else RS(M);0<I.i.length&&zm(I)}else Nt[0]!="stop"&&Nt[0]!="close"||Jo(I,7);else I.G==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?Jo(I,7):Ay(I):Nt[0]!="noop"&&I.l&&I.l.ta(Nt),I.v=0)}}bd(4)}catch{}}var xV=class{constructor(f,j){this.g=f,this.map=j}};function uS(f){this.l=f||10,l.PerformanceNavigationTiming?(f=l.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dS(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function hS(f){return f.h?1:f.g?f.g.size:0}function ky(f,j){return f.h?f.h==j:f.g?f.g.has(j):!1}function Ty(f,j){f.g?f.g.add(j):f.h=j}function fS(f,j){f.h&&f.h==j?f.h=null:f.g&&f.g.has(j)&&f.g.delete(j)}uS.prototype.cancel=function(){if(this.i=mS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function mS(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let j=f.i;for(const I of f.g.values())j=j.concat(I.D);return j}return w(f.i)}function yV(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var j=[],I=f.length,M=0;M<I;M++)j.push(f[M]);return j}j=[],I=0;for(M in f)j[I++]=f[M];return j}function wV(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var j=[];f=f.length;for(var I=0;I<f;I++)j.push(I);return j}j=[],I=0;for(const M in f)j[I++]=M;return j}}}function pS(f,j){if(f.forEach&&typeof f.forEach=="function")f.forEach(j,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,j,void 0);else for(var I=wV(f),M=yV(f),G=M.length,ee=0;ee<G;ee++)j.call(void 0,M[ee],I&&I[ee],f)}var gS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bV(f,j){if(f){f=f.split("&");for(var I=0;I<f.length;I++){var M=f[I].indexOf("="),G=null;if(0<=M){var ee=f[I].substring(0,M);G=f[I].substring(M+1)}else ee=f[I];j(ee,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Qo(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Qo){this.h=f.h,Mm(this,f.j),this.o=f.o,this.g=f.g,Om(this,f.s),this.l=f.l;var j=f.i,I=new Cd;I.i=j.i,j.g&&(I.g=new Map(j.g),I.h=j.h),vS(this,I),this.m=f.m}else f&&(j=String(f).match(gS))?(this.h=!1,Mm(this,j[1]||"",!0),this.o=Sd(j[2]||""),this.g=Sd(j[3]||"",!0),Om(this,j[4]),this.l=Sd(j[5]||"",!0),vS(this,j[6]||"",!0),this.m=Sd(j[7]||"")):(this.h=!1,this.i=new Cd(null,this.h))}Qo.prototype.toString=function(){var f=[],j=this.j;j&&f.push(Ed(j,xS,!0),":");var I=this.g;return(I||j=="file")&&(f.push("//"),(j=this.o)&&f.push(Ed(j,xS,!0),"@"),f.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&f.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&f.push("/"),f.push(Ed(I,I.charAt(0)=="/"?NV:jV,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",Ed(I,EV)),f.join("")};function Oi(f){return new Qo(f)}function Mm(f,j,I){f.j=I?Sd(j,!0):j,f.j&&(f.j=f.j.replace(/:$/,""))}function Om(f,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);f.s=j}else f.s=null}function vS(f,j,I){j instanceof Cd?(f.i=j,CV(f.i,f.h)):(I||(j=Ed(j,SV)),f.i=new Cd(j,f.h))}function qt(f,j,I){f.i.set(j,I)}function Lm(f){return qt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Sd(f,j){return f?j?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ed(f,j,I){return typeof f=="string"?(f=encodeURI(f).replace(j,_V),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function _V(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var xS=/[#\/\?@]/g,jV=/[#\?:]/g,NV=/[#\?]/g,SV=/[#\?@]/g,EV=/#/g;function Cd(f,j){this.h=this.g=null,this.i=f||null,this.j=!!j}function Ta(f){f.g||(f.g=new Map,f.h=0,f.i&&bV(f.i,function(j,I){f.add(decodeURIComponent(j.replace(/\+/g," ")),I)}))}t=Cd.prototype,t.add=function(f,j){Ta(this),this.i=null,f=pc(this,f);var I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(j),this.h+=1,this};function yS(f,j){Ta(f),j=pc(f,j),f.g.has(j)&&(f.i=null,f.h-=f.g.get(j).length,f.g.delete(j))}function wS(f,j){return Ta(f),j=pc(f,j),f.g.has(j)}t.forEach=function(f,j){Ta(this),this.g.forEach(function(I,M){I.forEach(function(G){f.call(j,G,M,this)},this)},this)},t.na=function(){Ta(this);const f=Array.from(this.g.values()),j=Array.from(this.g.keys()),I=[];for(let M=0;M<j.length;M++){const G=f[M];for(let ee=0;ee<G.length;ee++)I.push(j[M])}return I},t.V=function(f){Ta(this);let j=[];if(typeof f=="string")wS(this,f)&&(j=j.concat(this.g.get(pc(this,f))));else{f=Array.from(this.g.values());for(let I=0;I<f.length;I++)j=j.concat(f[I])}return j},t.set=function(f,j){return Ta(this),this.i=null,f=pc(this,f),wS(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[j]),this.h+=1,this},t.get=function(f,j){return f?(f=this.V(f),0<f.length?String(f[0]):j):j};function bS(f,j,I){yS(f,j),0<I.length&&(f.i=null,f.g.set(pc(f,j),w(I)),f.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],j=Array.from(this.g.keys());for(var I=0;I<j.length;I++){var M=j[I];const ee=encodeURIComponent(String(M)),ge=this.V(M);for(M=0;M<ge.length;M++){var G=ee;ge[M]!==""&&(G+="="+encodeURIComponent(String(ge[M]))),f.push(G)}}return this.i=f.join("&")};function pc(f,j){return j=String(j),f.j&&(j=j.toLowerCase()),j}function CV(f,j){j&&!f.j&&(Ta(f),f.i=null,f.g.forEach(function(I,M){var G=M.toLowerCase();M!=G&&(yS(this,M),bS(this,G,I))},f)),f.j=j}function kV(f,j){const I=new jd;if(l.Image){const M=new Image;M.onload=g(Ia,I,"TestLoadImage: loaded",!0,j,M),M.onerror=g(Ia,I,"TestLoadImage: error",!1,j,M),M.onabort=g(Ia,I,"TestLoadImage: abort",!1,j,M),M.ontimeout=g(Ia,I,"TestLoadImage: timeout",!1,j,M),l.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=f}else j(!1)}function TV(f,j){const I=new jd,M=new AbortController,G=setTimeout(()=>{M.abort(),Ia(I,"TestPingServer: timeout",!1,j)},1e4);fetch(f,{signal:M.signal}).then(ee=>{clearTimeout(G),ee.ok?Ia(I,"TestPingServer: ok",!0,j):Ia(I,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(G),Ia(I,"TestPingServer: error",!1,j)})}function Ia(f,j,I,M,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),M(I)}catch{}}function IV(){this.g=new hV}function AV(f,j,I){const M=I||"";try{pS(f,function(G,ee){let ge=G;u(G)&&(ge=fc(G)),j.push(M+ee+"="+encodeURIComponent(ge))})}catch(G){throw j.push(M+"type="+encodeURIComponent("_badmap")),G}}function Vm(f){this.l=f.Ub||null,this.j=f.eb||!1}x(Vm,wy),Vm.prototype.g=function(){return new Fm(this.l,this.j)},Vm.prototype.i=function(f){return function(){return f}}({});function Fm(f,j){pt.call(this),this.D=f,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Fm,pt),t=Fm.prototype,t.open=function(f,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=j,this.readyState=1,Td(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(j.body=f),(this.D||l).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kd(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Td(this)),this.g&&(this.readyState=3,Td(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_S(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function _S(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var j=f.value?f.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!f.done}))&&(this.response=this.responseText+=j)}f.done?kd(this):Td(this),this.readyState==3&&_S(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,kd(this))},t.Qa=function(f){this.g&&(this.response=f,kd(this))},t.ga=function(){this.g&&kd(this)};function kd(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Td(f)}t.setRequestHeader=function(f,j){this.u.append(f,j)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],j=this.h.entries();for(var I=j.next();!I.done;)I=I.value,f.push(I[0]+": "+I[1]),I=j.next();return f.join(`\r
`)};function Td(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Fm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function jS(f){let j="";return D(f,function(I,M){j+=M,j+=":",j+=I,j+=`\r
`}),j}function Iy(f,j,I){e:{for(M in I){var M=!1;break e}M=!0}M||(I=jS(I),typeof f=="string"?I!=null&&encodeURIComponent(String(I)):qt(f,j,I))}function ar(f){pt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ar,pt);var PV=/^https?$/i,RV=["POST","PUT"];t=ar.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,j,I,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);j=j?j.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jy.g(),this.v=this.o?XN(this.o):XN(jy),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(j,String(f),!0),this.B=!1}catch(ee){NS(this,ee);return}if(f=I||"",I=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var G in M)I.set(G,M[G]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const ee of M.keys())I.set(ee,M.get(ee));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(I.keys()).find(ee=>ee.toLowerCase()=="content-type"),G=l.FormData&&f instanceof l.FormData,!(0<=Array.prototype.indexOf.call(RV,j,void 0))||M||G||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,ge]of I)this.g.setRequestHeader(ee,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{CS(this),this.u=!0,this.g.send(f),this.u=!1}catch(ee){NS(this,ee)}};function NS(f,j){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=j,f.m=5,SS(f),$m(f)}function SS(f){f.A||(f.A=!0,vt(f,"complete"),vt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,vt(this,"complete"),vt(this,"abort"),$m(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$m(this,!0)),ar.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ES(this):this.bb())},t.bb=function(){ES(this)};function ES(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Li(f)!=4||f.Z()!=2)){if(f.u&&Li(f)==4)Tm(f.Ea,0,f);else if(vt(f,"readystatechange"),Li(f)==4){f.h=!1;try{const ge=f.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var I;if(!(I=j)){var M;if(M=ge===0){var G=String(f.D).match(gS)[1]||null;!G&&l.self&&l.self.location&&(G=l.self.location.protocol.slice(0,-1)),M=!PV.test(G?G.toLowerCase():"")}I=M}if(I)vt(f,"complete"),vt(f,"success");else{f.m=6;try{var ee=2<Li(f)?f.g.statusText:""}catch{ee=""}f.l=ee+" ["+f.Z()+"]",SS(f)}}finally{$m(f)}}}}function $m(f,j){if(f.g){CS(f);const I=f.g,M=f.v[0]?()=>{}:null;f.g=null,f.v=null,j||vt(f,"ready");try{I.onreadystatechange=M}catch{}}}function CS(f){f.I&&(l.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Li(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Li(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var j=this.g.responseText;return f&&j.indexOf(f)==0&&(j=j.substring(f.length)),dV(j)}};function kS(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function DV(f){const j={};f=(f.g&&2<=Li(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<f.length;M++){if(v(f[M]))continue;var I=A(f[M]);const G=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ee=j[G]||[];j[G]=ee,ee.push(I)}T(j,function(M){return M.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Id(f,j,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||j}function TS(f){this.Aa=0,this.i=[],this.j=new jd,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Id("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Id("baseRetryDelayMs",5e3,f),this.cb=Id("retryDelaySeedMs",1e4,f),this.Wa=Id("forwardChannelMaxRetries",2,f),this.wa=Id("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new uS(f&&f.concurrentRequestLimit),this.Da=new IV,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=TS.prototype,t.la=8,t.G=1,t.connect=function(f,j,I,M){dn(0),this.W=f,this.H=j||{},I&&M!==void 0&&(this.H.OSID=I,this.H.OAID=M),this.F=this.X,this.I=VS(this,null,this.W),zm(this)};function Ay(f){if(IS(f),f.G==3){var j=f.U++,I=Oi(f.I);if(qt(I,"SID",f.K),qt(I,"RID",j),qt(I,"TYPE","terminate"),Ad(f,I),j=new ka(f,f.j,j),j.L=2,j.v=Lm(Oi(I)),I=!1,l.navigator&&l.navigator.sendBeacon)try{I=l.navigator.sendBeacon(j.v.toString(),"")}catch{}!I&&l.Image&&(new Image().src=j.v,I=!0),I||(j.g=FS(j.j,null),j.g.ea(j.v)),j.F=Date.now(),Dm(j)}LS(f)}function Um(f){f.g&&(Ry(f),f.g.cancel(),f.g=null)}function IS(f){Um(f),f.u&&(l.clearTimeout(f.u),f.u=null),Bm(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&l.clearTimeout(f.s),f.s=null)}function zm(f){if(!dS(f.h)&&!f.s){f.s=!0;var j=f.Ga;F||z(),L||(F(),L=!0),W.add(j,f),f.B=0}}function MV(f,j){return hS(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=j.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=_d(m(f.Ga,f,j),OS(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new ka(this,this.j,f);let ee=this.o;if(this.S&&(ee?(ee=k(ee),S(ee,this.S)):ee=this.S),this.m!==null||this.O||(G.H=ee,ee=null),this.P)e:{for(var j=0,I=0;I<this.i.length;I++){t:{var M=this.i[I];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(j+=M,4096<j){j=I;break e}if(j===4096||I===this.i.length-1){j=I+1;break e}}j=1e3}else j=1e3;j=PS(this,G,j),I=Oi(this.I),qt(I,"RID",f),qt(I,"CVER",22),this.D&&qt(I,"X-HTTP-Session-Id",this.D),Ad(this,I),ee&&(this.O?j="headers="+encodeURIComponent(String(jS(ee)))+"&"+j:this.m&&Iy(I,this.m,ee)),Ty(this.h,G),this.Ua&&qt(I,"TYPE","init"),this.P?(qt(I,"$req",j),qt(I,"SID","null"),G.T=!0,Sy(G,I,null)):Sy(G,I,j),this.G=2}}else this.G==3&&(f?AS(this,f):this.i.length==0||dS(this.h)||AS(this))};function AS(f,j){var I;j?I=j.l:I=f.U++;const M=Oi(f.I);qt(M,"SID",f.K),qt(M,"RID",I),qt(M,"AID",f.T),Ad(f,M),f.m&&f.o&&Iy(M,f.m,f.o),I=new ka(f,f.j,I,f.B+1),f.m===null&&(I.H=f.o),j&&(f.i=j.D.concat(f.i)),j=PS(f,I,1e3),I.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ty(f.h,I),Sy(I,M,j)}function Ad(f,j){f.H&&D(f.H,function(I,M){qt(j,M,I)}),f.l&&pS({},function(I,M){qt(j,M,I)})}function PS(f,j,I){I=Math.min(f.i.length,I);var M=f.l?m(f.l.Na,f.l,f):null;e:{var G=f.i;let ee=-1;for(;;){const ge=["count="+I];ee==-1?0<I?(ee=G[0].g,ge.push("ofs="+ee)):ee=0:ge.push("ofs="+ee);let Dt=!0;for(let Fr=0;Fr<I;Fr++){let Nt=G[Fr].g;const Yr=G[Fr].map;if(Nt-=ee,0>Nt)ee=Math.max(0,G[Fr].g-100),Dt=!1;else try{AV(Yr,ge,"req"+Nt+"_")}catch{M&&M(Yr)}}if(Dt){M=ge.join("&");break e}}}return f=f.i.splice(0,I),j.D=f,M}function RS(f){if(!f.g&&!f.u){f.Y=1;var j=f.Fa;F||z(),L||(F(),L=!0),W.add(j,f),f.v=0}}function Py(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=_d(m(f.Fa,f),OS(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,DS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=_d(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dn(10),Um(this),DS(this))};function Ry(f){f.A!=null&&(l.clearTimeout(f.A),f.A=null)}function DS(f){f.g=new ka(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var j=Oi(f.qa);qt(j,"RID","rpc"),qt(j,"SID",f.K),qt(j,"AID",f.T),qt(j,"CI",f.F?"0":"1"),!f.F&&f.ja&&qt(j,"TO",f.ja),qt(j,"TYPE","xmlhttp"),Ad(f,j),f.m&&f.o&&Iy(j,f.m,f.o),f.L&&(f.g.I=f.L);var I=f.g;f=f.ia,I.L=1,I.v=Lm(Oi(j)),I.m=null,I.P=!0,oS(I,f)}t.Za=function(){this.C!=null&&(this.C=null,Um(this),Py(this),dn(19))};function Bm(f){f.C!=null&&(l.clearTimeout(f.C),f.C=null)}function MS(f,j){var I=null;if(f.g==j){Bm(f),Ry(f),f.g=null;var M=2}else if(ky(f.h,j))I=j.D,fS(f.h,j),M=1;else return;if(f.G!=0){if(j.o)if(M==1){I=j.m?j.m.length:0,j=Date.now()-j.F;var G=f.B;M=Am(),vt(M,new nS(M,I)),zm(f)}else RS(f);else if(G=j.s,G==3||G==0&&0<j.X||!(M==1&&MV(f,j)||M==2&&Py(f)))switch(I&&0<I.length&&(j=f.h,j.i=j.i.concat(I)),G){case 1:Jo(f,5);break;case 4:Jo(f,10);break;case 3:Jo(f,6);break;default:Jo(f,2)}}}function OS(f,j){let I=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(I*=2),I*j}function Jo(f,j){if(f.j.info("Error code "+j),j==2){var I=m(f.fb,f),M=f.Xa;const G=!M;M=new Qo(M||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Mm(M,"https"),Lm(M),G?kV(M.toString(),I):TV(M.toString(),I)}else dn(2);f.G=0,f.l&&f.l.sa(j),LS(f),IS(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function LS(f){if(f.G=0,f.ka=[],f.l){const j=mS(f.h);(j.length!=0||f.i.length!=0)&&(b(f.ka,j),b(f.ka,f.i),f.h.i.length=0,w(f.i),f.i.length=0),f.l.ra()}}function VS(f,j,I){var M=I instanceof Qo?Oi(I):new Qo(I);if(M.g!="")j&&(M.g=j+"."+M.g),Om(M,M.s);else{var G=l.location;M=G.protocol,j=j?j+"."+G.hostname:G.hostname,G=+G.port;var ee=new Qo(null);M&&Mm(ee,M),j&&(ee.g=j),G&&Om(ee,G),I&&(ee.l=I),M=ee}return I=f.D,j=f.ya,I&&j&&qt(M,I,j),qt(M,"VER",f.la),Ad(f,M),M}function FS(f,j,I){if(j&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=f.Ca&&!f.pa?new ar(new Vm({eb:I})):new ar(f.pa),j.Ha(f.J),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $S(){}t=$S.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qm(){}qm.prototype.g=function(f,j){return new Bn(f,j)};function Bn(f,j){pt.call(this),this.g=new TS(j),this.l=f,this.h=j&&j.messageUrlParams||null,f=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(f?f["X-WebChannel-Content-Type"]=j.messageContentType:f={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(f?f["X-WebChannel-Client-Profile"]=j.va:f={"X-WebChannel-Client-Profile":j.va}),this.g.S=f,(f=j&&j.Sb)&&!v(f)&&(this.g.m=f),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!v(j)&&(this.g.D=j,f=this.h,f!==null&&j in f&&(f=this.h,j in f&&delete f[j])),this.j=new gc(this)}x(Bn,pt),Bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){Ay(this.g)},Bn.prototype.o=function(f){var j=this.g;if(typeof f=="string"){var I={};I.__data__=f,f=I}else this.u&&(I={},I.__data__=fc(f),f=I);j.i.push(new xV(j.Ya++,f)),j.G==3&&zm(j)},Bn.prototype.N=function(){this.g.l=null,delete this.j,Ay(this.g),delete this.g,Bn.aa.N.call(this)};function US(f){by.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var j=f.__sm__;if(j){e:{for(const I in j){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,j=j!==null&&f in j?j[f]:void 0),this.data=j}else this.data=f}x(US,by);function zS(){_y.call(this),this.status=1}x(zS,_y);function gc(f){this.g=f}x(gc,$S),gc.prototype.ua=function(){vt(this.g,"a")},gc.prototype.ta=function(f){vt(this.g,new US(f))},gc.prototype.sa=function(f){vt(this.g,new zS)},gc.prototype.ra=function(){vt(this.g,"b")},qm.prototype.createWebChannel=qm.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,pR=function(){return new qm},mR=function(){return Am()},fR=Ko,mb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pm.NO_ERROR=0,Pm.TIMEOUT=8,Pm.HTTP_ERROR=6,Xp=Pm,sS.COMPLETE="complete",hR=sS,ZN.EventType=wd,wd.OPEN="a",wd.CLOSE="b",wd.ERROR="c",wd.MESSAGE="d",pt.prototype.listen=pt.prototype.K,th=ZN,ar.prototype.listenOnce=ar.prototype.L,ar.prototype.getLastError=ar.prototype.Ka,ar.prototype.getLastErrorCode=ar.prototype.Ba,ar.prototype.getStatus=ar.prototype.Z,ar.prototype.getResponseJson=ar.prototype.Oa,ar.prototype.getResponseText=ar.prototype.oa,ar.prototype.send=ar.prototype.ea,ar.prototype.setWithCredentials=ar.prototype.Ha,dR=ar}).apply(typeof dp<"u"?dp:typeof self<"u"?self:typeof window<"u"?window:{});const zC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new ax("@firebase/firestore");function $d(){return Dl.logLevel}function Me(t,...e){if(Dl.logLevel<=gt.DEBUG){const r=e.map(P1);Dl.debug(`Firestore (${Xu}): ${t}`,...r)}}function pa(t,...e){if(Dl.logLevel<=gt.ERROR){const r=e.map(P1);Dl.error(`Firestore (${Xu}): ${t}`,...r)}}function ju(t,...e){if(Dl.logLevel<=gt.WARN){const r=e.map(P1);Dl.warn(`Firestore (${Xu}): ${t}`,...r)}}function P1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t="Unexpected state"){const e=`FIRESTORE (${Xu}) INTERNAL ASSERTION FAILED: `+t;throw pa(e),new Error(e)}function Pt(t,e){t||He()}function Qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends ks{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(en.UNAUTHENTICATED))}shutdown(){}}class uq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class dq{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Pt(this.o===void 0);let n=this.i;const s=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let a=new ra;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ra,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ra)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Pt(typeof n.accessToken=="string"),new gR(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string"),new en(e)}}class hq{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=en.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fq{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new hq(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mq{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pq{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Pt(this.o===void 0);const n=a=>{a.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const s=a=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Pt(typeof r.token=="string"),this.R=r.token,new mq(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=gq(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<r&&(n+=e.charAt(s[a]%e.length))}return n}}function St(t,e){return t<e?-1:t>e?1:0}function Nu(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new be(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new be(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new be(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pr.fromMillis(Date.now())}static fromDate(e){return Pr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Pr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Pr(0,0))}static max(){return new Ye(new Pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,r,n){r===void 0?r=0:r>e.length&&He(),n===void 0?n=e.length-r:n>e.length-r&&He(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return nf.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof nf?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const a=e.get(s),o=r.get(s);if(a<o)return-1;if(a>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Lt extends nf{construct(e,r,n){return new Lt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new be(re.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Lt(r)}static emptyPath(){return new Lt([])}}const vq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zr extends nf{construct(e,r,n){return new zr(e,r,n)}static isValidIdentifier(e){return vq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zr(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const a=()=>{if(n.length===0)throw new be(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new be(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new be(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(n+=l,s++):(a(),s++)}if(a(),o)throw new be(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zr(r)}static emptyPath(){return new zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Lt.fromString(e))}static fromName(e){return new $e(Lt.fromString(e).popFirst(5))}static empty(){return new $e(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Lt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Lt(e.slice()))}}function xq(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ye.fromTimestamp(n===1e9?new Pr(r+1,0):new Pr(r,n));return new yo(s,$e.empty(),e)}function yq(t){return new yo(t.readTime,t.key,-1)}class yo{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new yo(Ye.min(),$e.empty(),-1)}static max(){return new yo(Ye.max(),$e.empty(),-1)}}function wq(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=$e.comparator(t.documentKey,e.documentKey),r!==0?r:St(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _q{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qf(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==bq)throw t;Me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&He(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ae((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ae?r:ae.resolve(r)}catch(r){return ae.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ae.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ae.reject(r)}static resolve(e){return new ae((r,n)=>{r(e)})}static reject(e){return new ae((r,n)=>{n(e)})}static waitFor(e){return new ae((r,n)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&r()},c=>n(c))}),o=!0,a===s&&r()})}static or(e){let r=ae.resolve(!1);for(const n of e)r=r.next(s=>s?ae.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,a)=>{n.push(r.call(this,s,a))}),this.waitFor(n)}static mapArray(e,r){return new ae((n,s)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===a&&n(o)},d=>s(d))}})}static doWhile(e,r){return new ae((n,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):n()};a()})}}function jq(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Jf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}R1.oe=-1;function dx(t){return t==null}function Gg(t){return t===0&&1/t==-1/0}function Nq(t){return typeof t=="number"&&Number.isInteger(t)&&!Gg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function rc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function xR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,r){this.comparator=e,this.root=r||Ur.EMPTY}insert(e,r){return new ir(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Ur.BLACK,null,null))}remove(e){return new ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ur.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hp(this.root,e,this.comparator,!1)}getReverseIterator(){return new hp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hp(this.root,e,this.comparator,!0)}}class hp{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ur{constructor(e,r,n,s,a){this.key=e,this.value=r,this.color=n??Ur.RED,this.left=s??Ur.EMPTY,this.right=a??Ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,a){return new Ur(e??this.key,r??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,n),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Ur.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw He();const e=this.left.check();if(e!==this.right.check())throw He();return e+(this.isRed()?0:1)}}Ur.EMPTY=null,Ur.RED=!0,Ur.BLACK=!1;Ur.EMPTY=new class{constructor(){this.size=0}get key(){throw He()}get value(){throw He()}get color(){throw He()}get left(){throw He()}get right(){throw He()}copy(e,r,n,s,a){return this}insert(e,r,n){return new Ur(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.comparator=e,this.data=new ir(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new qC(this.data.getIterator())}getIteratorFrom(e){return new qC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Wr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Wr(this.comparator);return r.data=e,r}}class qC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(zr.comparator)}static empty(){return new Yn([])}unionWith(e){let r=new Wr(zr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Yn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Nu(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new yR("Invalid base64 string: "+a):a}}(e);return new Gr(r)}static fromUint8Array(e){const r=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Gr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gr.EMPTY_BYTE_STRING=new Gr("");const Sq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wo(t){if(Pt(!!t),typeof t=="string"){let e=0;const r=Sq.exec(t);if(Pt(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:fr(t.seconds),nanos:fr(t.nanos)}}function fr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ml(t){return typeof t=="string"?Gr.fromBase64String(t):Gr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function D1(t){const e=t.mapValue.fields.__previous_value__;return hx(e)?D1(e):e}function sf(t){const e=wo(t.mapValue.fields.__local_write_time__.timestampValue);return new Pr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(e,r,n,s,a,o,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class af{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new af("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof af&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ol(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hx(t)?4:kq(t)?9007199254740991:Cq(t)?10:11:He()}function Ci(t,e){if(t===e)return!0;const r=Ol(t);if(r!==Ol(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sf(t).isEqual(sf(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=wo(s.timestampValue),l=wo(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Ml(s.bytesValue).isEqual(Ml(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return fr(s.geoPointValue.latitude)===fr(a.geoPointValue.latitude)&&fr(s.geoPointValue.longitude)===fr(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return fr(s.integerValue)===fr(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=fr(s.doubleValue),l=fr(a.doubleValue);return o===l?Gg(o)===Gg(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Nu(t.arrayValue.values||[],e.arrayValue.values||[],Ci);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(BC(o)!==BC(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Ci(o[c],l[c])))return!1;return!0}(t,e);default:return He()}}function of(t,e){return(t.values||[]).find(r=>Ci(r,e))!==void 0}function Su(t,e){if(t===e)return 0;const r=Ol(t),n=Ol(e);if(r!==n)return St(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return St(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=fr(a.integerValue||a.doubleValue),c=fr(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return WC(t.timestampValue,e.timestampValue);case 4:return WC(sf(t),sf(e));case 5:return St(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Ml(a),c=Ml(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=St(l[u],c[u]);if(d!==0)return d}return St(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=St(fr(a.latitude),fr(o.latitude));return l!==0?l:St(fr(a.longitude),fr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return HC(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,c,u,d;const h=a.fields||{},m=o.fields||{},g=(l=h.value)===null||l===void 0?void 0:l.arrayValue,x=(c=m.value)===null||c===void 0?void 0:c.arrayValue,w=St(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return w!==0?w:HC(g,x)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===fp.mapValue&&o===fp.mapValue)return 0;if(a===fp.mapValue)return 1;if(o===fp.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const m=St(c[h],d[h]);if(m!==0)return m;const g=Su(l[c[h]],u[d[h]]);if(g!==0)return g}return St(c.length,d.length)}(t.mapValue,e.mapValue);default:throw He()}}function WC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return St(t,e);const r=wo(t),n=wo(e),s=St(r.seconds,n.seconds);return s!==0?s:St(r.nanos,n.nanos)}function HC(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const a=Su(r[s],n[s]);if(a)return a}return St(r.length,n.length)}function Eu(t){return pb(t)}function pb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=wo(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Ml(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return $e.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const a of r.values||[])s?s=!1:n+=",",n+=pb(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const o of n)a?a=!1:s+=",",s+=`${o}:${pb(r.fields[o])}`;return s+"}"}(t.mapValue):He()}function Kg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gb(t){return!!t&&"integerValue"in t}function M1(t){return!!t&&"arrayValue"in t}function GC(t){return!!t&&"nullValue"in t}function KC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zp(t){return!!t&&"mapValue"in t}function Cq(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function bh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return rc(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=bh(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=bh(t.arrayValue.values[r]);return e}return Object.assign({},t)}function kq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Zp(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=bh(r)}setAll(e){let r=zr.emptyPath(),n={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,s),n={},s=[],r=l.popLast()}o?n[l.lastSegment()]=bh(o):s.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,s)}delete(e){const r=this.field(e.popLast());Zp(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ci(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Zp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){rc(r,(s,a)=>e[s]=a);for(const s of n)delete e[s]}clone(){return new An(bh(this.value))}}function wR(t){const e=[];return rc(t.fields,(r,n)=>{const s=new zr([r]);if(Zp(n)){const a=wR(n.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,r,n,s,a,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new rn(e,0,Ye.min(),Ye.min(),Ye.min(),An.empty(),0)}static newFoundDocument(e,r,n,s){return new rn(e,1,r,Ye.min(),n,s,0)}static newNoDocument(e,r){return new rn(e,2,r,Ye.min(),Ye.min(),An.empty(),0)}static newUnknownDocument(e,r){return new rn(e,3,r,Ye.min(),Ye.min(),An.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,r){this.position=e,this.inclusive=r}}function YC(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?n=$e.comparator($e.fromName(o.referenceValue),r.key):n=Su(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function QC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ci(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,r="asc"){this.field=e,this.dir=r}}function Tq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bR=class{};class br extends bR{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Aq(e,r,n):r==="array-contains"?new Dq(e,n):r==="in"?new Mq(e,n):r==="not-in"?new Oq(e,n):r==="array-contains-any"?new Lq(e,n):new br(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Pq(e,n):new Rq(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Su(r,this.value)):r!==null&&Ol(this.value)===Ol(r)&&this.matchesComparison(Su(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qs extends bR{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Qs(e,r)}matches(e){return _R(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _R(t){return t.op==="and"}function jR(t){return Iq(t)&&_R(t)}function Iq(t){for(const e of t.filters)if(e instanceof Qs)return!1;return!0}function vb(t){if(t instanceof br)return t.field.canonicalString()+t.op.toString()+Eu(t.value);if(jR(t))return t.filters.map(e=>vb(e)).join(",");{const e=t.filters.map(r=>vb(r)).join(",");return`${t.op}(${e})`}}function NR(t,e){return t instanceof br?function(n,s){return s instanceof br&&n.op===s.op&&n.field.isEqual(s.field)&&Ci(n.value,s.value)}(t,e):t instanceof Qs?function(n,s){return s instanceof Qs&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((a,o,l)=>a&&NR(o,s.filters[l]),!0):!1}(t,e):void He()}function SR(t){return t instanceof br?function(r){return`${r.field.canonicalString()} ${r.op} ${Eu(r.value)}`}(t):t instanceof Qs?function(r){return r.op.toString()+" {"+r.getFilters().map(SR).join(" ,")+"}"}(t):"Filter"}class Aq extends br{constructor(e,r,n){super(e,r,n),this.key=$e.fromName(n.referenceValue)}matches(e){const r=$e.comparator(e.key,this.key);return this.matchesComparison(r)}}class Pq extends br{constructor(e,r){super(e,"in",r),this.keys=ER("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Rq extends br{constructor(e,r){super(e,"not-in",r),this.keys=ER("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function ER(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>$e.fromName(n.referenceValue))}class Dq extends br{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return M1(r)&&of(r.arrayValue,this.value)}}class Mq extends br{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&of(this.value.arrayValue,r)}}class Oq extends br{constructor(e,r){super(e,"not-in",r)}matches(e){if(of(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!of(this.value.arrayValue,r)}}class Lq extends br{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!M1(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>of(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e,r=null,n=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function JC(t,e=null,r=[],n=[],s=null,a=null,o=null){return new Vq(t,e,r,n,s,a,o)}function O1(t){const e=Qe(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>vb(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),dx(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Eu(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Eu(n)).join(",")),e.ue=r}return e.ue}function L1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Tq(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!NR(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QC(t.startAt,e.startAt)&&QC(t.endAt,e.endAt)}function xb(t){return $e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,r=null,n=[],s=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Fq(t,e,r,n,s,a,o,l){return new nc(t,e,r,n,s,a,o,l)}function fx(t){return new nc(t)}function XC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function V1(t){return t.collectionGroup!==null}function au(t){const e=Qe(t);if(e.ce===null){e.ce=[];const r=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Wr(zr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.ce.push(new lf(a,n))}),r.has(zr.keyField().canonicalString())||e.ce.push(new lf(zr.keyField(),n))}return e.ce}function bi(t){const e=Qe(t);return e.le||(e.le=$q(e,au(t))),e.le}function $q(t,e){if(t.limitType==="F")return JC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new lf(s.field,a)});const r=t.endAt?new Cu(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Cu(t.startAt.position,t.startAt.inclusive):null;return JC(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function yb(t,e){const r=t.filters.concat([e]);return new nc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Yg(t,e,r){return new nc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function mx(t,e){return L1(bi(t),bi(e))&&t.limitType===e.limitType}function CR(t){return`${O1(bi(t))}|lt:${t.limitType}`}function Ac(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>SR(s)).join(", ")}]`),dx(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Eu(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Eu(s)).join(",")),`Target(${n})`}(bi(t))}; limitType=${t.limitType})`}function px(t,e){return e.isFoundDocument()&&function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):$e.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,s){for(const a of au(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,l,c){const u=YC(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,au(n),s)||n.endAt&&!function(o,l,c){const u=YC(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,au(n),s))}(t,e)}function Uq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kR(t){return(e,r)=>{let n=!1;for(const s of au(t)){const a=zq(s,e,r);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function zq(t,e,r){const n=t.field.isKeyField()?$e.comparator(e.key,r.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?Su(c,u):He()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return He()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){rc(this.inner,(r,n)=>{for(const[s,a]of n)e(s,a)})}isEmpty(){return xR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bq=new ir($e.comparator);function ga(){return Bq}const TR=new ir($e.comparator);function rh(...t){let e=TR;for(const r of t)e=e.insert(r.key,r);return e}function IR(t){let e=TR;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function hl(){return _h()}function AR(){return _h()}function _h(){return new Zu(t=>t.toString(),(t,e)=>t.isEqual(e))}const qq=new ir($e.comparator),Wq=new Wr($e.comparator);function ut(...t){let e=Wq;for(const r of t)e=e.add(r);return e}const Hq=new Wr(St);function Gq(){return Hq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gg(e)?"-0":e}}function PR(t){return{integerValue:""+t}}function RR(t,e){return Nq(e)?PR(e):F1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this._=void 0}}function Kq(t,e,r){return t instanceof cf?function(s,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&hx(a)&&(a=D1(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(r,e):t instanceof uf?MR(t,e):t instanceof df?OR(t,e):function(s,a){const o=DR(s,a),l=ZC(o)+ZC(s.Pe);return gb(o)&&gb(s.Pe)?PR(l):F1(s.serializer,l)}(t,e)}function Yq(t,e,r){return t instanceof uf?MR(t,e):t instanceof df?OR(t,e):r}function DR(t,e){return t instanceof hf?function(n){return gb(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class cf extends gx{}class uf extends gx{constructor(e){super(),this.elements=e}}function MR(t,e){const r=LR(e);for(const n of t.elements)r.some(s=>Ci(s,n))||r.push(n);return{arrayValue:{values:r}}}class df extends gx{constructor(e){super(),this.elements=e}}function OR(t,e){let r=LR(e);for(const n of t.elements)r=r.filter(s=>!Ci(s,n));return{arrayValue:{values:r}}}class hf extends gx{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function ZC(t){return fr(t.integerValue||t.doubleValue)}function LR(t){return M1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,r){this.field=e,this.transform=r}}function Qq(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof uf&&s instanceof uf||n instanceof df&&s instanceof df?Nu(n.elements,s.elements,Ci):n instanceof hf&&s instanceof hf?Ci(n.Pe,s.Pe):n instanceof cf&&s instanceof cf}(t.transform,e.transform)}class Jq{constructor(e,r){this.version=e,this.transformResults=r}}class wn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vx{}function FR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xx(t.key,wn.none()):new Xf(t.key,t.data,wn.none());{const r=t.data,n=An.empty();let s=new Wr(zr.comparator);for(let a of e.fields)if(!s.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),s=s.add(a)}return new Fo(t.key,n,new Yn(s.toArray()),wn.none())}}function Xq(t,e,r){t instanceof Xf?function(s,a,o){const l=s.value.clone(),c=tk(s.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Fo?function(s,a,o){if(!eg(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=tk(s.fieldTransforms,a,o.transformResults),c=a.data;c.setAll($R(s)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function jh(t,e,r,n){return t instanceof Xf?function(a,o,l,c){if(!eg(a.precondition,o))return l;const u=a.value.clone(),d=rk(a.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Fo?function(a,o,l,c){if(!eg(a.precondition,o))return l;const u=rk(a.fieldTransforms,c,o),d=o.data;return d.setAll($R(a)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(a,o,l){return eg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function Zq(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),a=DR(n.transform,s||null);a!=null&&(r===null&&(r=An.empty()),r.set(n.field,a))}return r||null}function ek(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Nu(n,s,(a,o)=>Qq(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xf extends vx{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fo extends vx{constructor(e,r,n,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $R(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function tk(t,e,r){const n=new Map;Pt(t.length===r.length);for(let s=0;s<r.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);n.set(a.field,Yq(o,l,r[s]))}return n}function rk(t,e,r){const n=new Map;for(const s of t){const a=s.transform,o=r.data.field(s.field);n.set(s.field,Kq(a,o,e))}return n}class xx extends vx{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eW extends vx{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Xq(a,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=jh(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=jh(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=AR();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(s.key)?null:l;const c=FR(o,l);c!==null&&n.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Ye.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ut())}isEqual(e){return this.batchId===e.batchId&&Nu(this.mutations,e.mutations,(r,n)=>ek(r,n))&&Nu(this.baseMutations,e.baseMutations,(r,n)=>ek(r,n))}}class $1{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Pt(e.mutations.length===n.length);let s=function(){return qq}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,n[o].version);return new $1(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rW=class{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr,xt;function sW(t){switch(t){default:return He();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function UR(t){if(t===void 0)return pa("GRPC error has no .code"),re.UNKNOWN;switch(t){case yr.OK:return re.OK;case yr.CANCELLED:return re.CANCELLED;case yr.UNKNOWN:return re.UNKNOWN;case yr.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case yr.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case yr.INTERNAL:return re.INTERNAL;case yr.UNAVAILABLE:return re.UNAVAILABLE;case yr.UNAUTHENTICATED:return re.UNAUTHENTICATED;case yr.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case yr.NOT_FOUND:return re.NOT_FOUND;case yr.ALREADY_EXISTS:return re.ALREADY_EXISTS;case yr.PERMISSION_DENIED:return re.PERMISSION_DENIED;case yr.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case yr.ABORTED:return re.ABORTED;case yr.OUT_OF_RANGE:return re.OUT_OF_RANGE;case yr.UNIMPLEMENTED:return re.UNIMPLEMENTED;case yr.DATA_LOSS:return re.DATA_LOSS;default:return He()}}(xt=yr||(yr={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW=new vl([4294967295,4294967295],0);function nk(t){const e=iW().encode(t),r=new uR;return r.update(e),new Uint8Array(r.digest())}function sk(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new vl([r,n],0),new vl([s,a],0)]}class U1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new nh(`Invalid padding: ${r}`);if(n<0)throw new nh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new nh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new nh(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=vl.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(vl.fromNumber(n)));return s.compare(aW)===1&&(s=new vl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=nk(e),[n,s]=sk(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,s,a);if(!this.de(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new U1(a,s,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const r=nk(e),[n,s]=sk(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,s,a);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class nh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,r,n,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Zf.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new yx(Ye.min(),s,new ir(St),ga(),ut())}}class Zf{constructor(e,r,n,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Zf(n,r,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class zR{constructor(e,r){this.targetId=e,this.me=r}}class BR{constructor(e,r,n=Gr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class ik{constructor(){this.fe=0,this.ge=ok(),this.pe=Gr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ut(),r=ut(),n=ut();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:He()}}),new Zf(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=ok()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oW{constructor(e){this.Le=e,this.Be=new Map,this.ke=ga(),this.qe=ak(),this.Qe=new ir(St)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:He()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const a=s.target;if(xb(a))if(n===0){const o=new $e(a.path);this.Ue(r,o,rn.newNoDocument(o,Ye.min()))}else Pt(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=r;let o,l;try{o=Ml(n).toUint8Array()}catch(c){if(c instanceof yR)return ju("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new U1(o,s,a)}catch(c){return ju(c instanceof nh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,a,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&xb(l.target)){const c=new $e(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,rn.newNoDocument(c,e))}a.be&&(r.set(o,a.ve()),a.Ce())}});let n=ut();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const s=new yx(e,r,this.Qe,this.ke,n);return this.ke=ga(),this.qe=ak(),this.Qe=new ir(St),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new ik,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Wr(St),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Me("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ik),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function ak(){return new ir($e.comparator)}function ok(){return new ir($e.comparator)}const lW={asc:"ASCENDING",desc:"DESCENDING"},cW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uW={and:"AND",or:"OR"};class dW{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function wb(t,e){return t.useProto3Json||dx(e)?e:{value:e}}function Qg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hW(t,e){return Qg(t,e.toTimestamp())}function _i(t){return Pt(!!t),Ye.fromTimestamp(function(r){const n=wo(r);return new Pr(n.seconds,n.nanos)}(t))}function z1(t,e){return bb(t,e).canonicalString()}function bb(t,e){const r=function(s){return new Lt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function WR(t){const e=Lt.fromString(t);return Pt(QR(e)),e}function _b(t,e){return z1(t.databaseId,e.path)}function p0(t,e){const r=WR(e);if(r.get(1)!==t.databaseId.projectId)throw new be(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new be(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new $e(GR(r))}function HR(t,e){return z1(t.databaseId,e)}function fW(t){const e=WR(t);return e.length===4?Lt.emptyPath():GR(e)}function jb(t){return new Lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GR(t){return Pt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lk(t,e,r){return{name:_b(t,e),fields:r.value.mapValue.fields}}function mW(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:He()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(Pt(d===void 0||typeof d=="string"),Gr.fromBase64String(d||"")):(Pt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Gr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?re.UNKNOWN:UR(u.code);return new be(d,u.message||"")}(o);r=new BR(n,s,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=p0(t,n.document.name),a=_i(n.document.updateTime),o=n.document.createTime?_i(n.document.createTime):Ye.min(),l=new An({mapValue:{fields:n.document.fields}}),c=rn.newFoundDocument(s,a,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new tg(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=p0(t,n.document),a=n.readTime?_i(n.readTime):Ye.min(),o=rn.newNoDocument(s,a),l=n.removedTargetIds||[];r=new tg([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=p0(t,n.document),a=n.removedTargetIds||[];r=new tg([],a,s,null)}else{if(!("filter"in e))return He();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,o=new nW(s,a),l=n.targetId;r=new zR(l,o)}}return r}function pW(t,e){let r;if(e instanceof Xf)r={update:lk(t,e.key,e.value)};else if(e instanceof xx)r={delete:_b(t,e.key)};else if(e instanceof Fo)r={update:lk(t,e.key,e.data),updateMask:NW(e.fieldMask)};else{if(!(e instanceof eW))return He();r={verify:_b(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const l=o.transform;if(l instanceof cf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof uf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof df)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof hf)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw He()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:hW(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:He()}(t,e.precondition)),r}function gW(t,e){return t&&t.length>0?(Pt(e!==void 0),t.map(r=>function(s,a){let o=s.updateTime?_i(s.updateTime):_i(a);return o.isEqual(Ye.min())&&(o=_i(a)),new Jq(o,s.transformResults||[])}(r,e))):[]}function vW(t,e){return{documents:[HR(t,e.path)]}}function xW(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=HR(t,s);const a=function(u){if(u.length!==0)return YR(Qs.create(u,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Pc(m.field),direction:bW(m.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=wb(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:s}}function yW(t){let e=fW(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Pt(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=function(h){const m=KR(h);return m instanceof Qs&&jR(m)?m.getFilters():[m]}(r.where));let o=[];r.orderBy&&(o=function(h){return h.map(m=>function(x){return new lf(Rc(x.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(h){let m;return m=typeof h=="object"?h.value:h,dx(m)?null:m}(r.limit));let c=null;r.startAt&&(c=function(h){const m=!!h.before,g=h.values||[];return new Cu(g,m)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const m=!h.before,g=h.values||[];return new Cu(g,m)}(r.endAt)),Fq(e,s,o,a,l,"F",c,u)}function wW(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function KR(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Rc(r.unaryFilter.field);return br.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Rc(r.unaryFilter.field);return br.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Rc(r.unaryFilter.field);return br.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Rc(r.unaryFilter.field);return br.create(o,"!=",{nullValue:"NULL_VALUE"});default:return He()}}(t):t.fieldFilter!==void 0?function(r){return br.create(Rc(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return He()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Qs.create(r.compositeFilter.filters.map(n=>KR(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return He()}}(r.compositeFilter.op))}(t):He()}function bW(t){return lW[t]}function _W(t){return cW[t]}function jW(t){return uW[t]}function Pc(t){return{fieldPath:t.canonicalString()}}function Rc(t){return zr.fromServerFormat(t.fieldPath)}function YR(t){return t instanceof br?function(r){if(r.op==="=="){if(KC(r.value))return{unaryFilter:{field:Pc(r.field),op:"IS_NAN"}};if(GC(r.value))return{unaryFilter:{field:Pc(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(KC(r.value))return{unaryFilter:{field:Pc(r.field),op:"IS_NOT_NAN"}};if(GC(r.value))return{unaryFilter:{field:Pc(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pc(r.field),op:_W(r.op),value:r.value}}}(t):t instanceof Qs?function(r){const n=r.getFilters().map(s=>YR(s));return n.length===1?n[0]:{compositeFilter:{op:jW(r.op),filters:n}}}(t):He()}function NW(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function QR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,r,n,s,a=Ye.min(),o=Ye.min(),l=Gr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new eo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(e){this.ct=e}}function EW(t){const e=yW({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(){this.un=new kW}addToCollectionParentIndex(e,r){return this.un.add(r),ae.resolve()}getCollectionParents(e,r){return ae.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return ae.resolve()}deleteFieldIndex(e,r){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,r){return ae.resolve()}getDocumentsMatchingTarget(e,r){return ae.resolve(null)}getIndexType(e,r){return ae.resolve(0)}getFieldIndexes(e,r){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,r){return ae.resolve(yo.min())}getMinOffsetFromCollectionGroup(e,r){return ae.resolve(yo.min())}updateCollectionGroup(e,r,n){return ae.resolve()}updateIndexEntries(e,r){return ae.resolve()}}class kW{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Wr(Lt.comparator),a=!s.has(n);return this.index[r]=s.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Wr(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ku(0)}static kn(){return new ku(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(){this.changes=new Zu(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ae.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&jh(n.mutation,s,Yn.empty(),Pr.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ut()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ut()){const s=hl();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(a=>{let o=rh();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=hl();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ut()))}populateOverlays(e,r,n){const s=[];return n.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,s){let a=ga();const o=_h(),l=function(){return _h()}();return r.forEach((c,u)=>{const d=n.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Fo)?a=a.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),jh(d.mutation,u,d.mutation.getFieldMask(),Pr.now())):o.set(u.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>{var h;return l.set(u,new IW(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),l))}recalculateAndSaveOverlays(e,r){const n=_h();let s=new ir((o,l)=>o-l),a=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Yn.empty();d=l.applyToLocalView(u,d),n.set(c,d);const h=(s.get(l.batchId)||ut()).add(c);s=s.insert(l.batchId,h)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=AR();d.forEach(m=>{if(!a.has(m)){const g=FR(r.get(m),n.get(m));g!==null&&h.set(m,g),a=a.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return ae.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return $e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):V1(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-a.size):ae.resolve(hl());let l=-1,c=a;return o.next(u=>ae.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),a.get(d)?ae.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,ut())).next(d=>({batchId:l,changes:IR(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new $e(r)).next(n=>{let s=rh();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const a=r.collectionGroup;let o=rh();return this.indexManager.getCollectionParents(e,a).next(l=>ae.forEach(l,c=>{const u=function(h,m){return new nc(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,n,s).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,s))).next(o=>{a.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,rn.newInvalidDocument(d)))});let l=rh();return o.forEach((c,u)=>{const d=a.get(c);d!==void 0&&jh(d.mutation,u,Yn.empty(),Pr.now()),px(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return ae.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:_i(s.createTime)}}(r)),ae.resolve()}getNamedQuery(e,r){return ae.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:EW(s.bundledQuery),readTime:_i(s.readTime)}}(r)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(){this.overlays=new ir($e.comparator),this.Ir=new Map}getOverlay(e,r){return ae.resolve(this.overlays.get(r))}getOverlays(e,r){const n=hl();return ae.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,a)=>{this.ht(e,r,a)}),ae.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(n)),ae.resolve()}getOverlaysForCollection(e,r,n){const s=hl(),a=r.length+1,o=new $e(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>n&&s.set(c.getKey(),c)}return ae.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let a=new ir((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=a.get(u.largestBatchId);d===null&&(d=hl(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=hl(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return ae.resolve(l)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new rW(r,n));let a=this.Ir.get(r);a===void 0&&(a=ut(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(){this.sessionToken=Gr.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.Tr=new Wr(Or.Er),this.dr=new Wr(Or.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Or(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Or(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new $e(new Lt([])),n=new Or(r,e),s=new Or(r,e+1),a=[];return this.dr.forEachInRange([n,s],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new $e(new Lt([])),n=new Or(r,e),s=new Or(r,e+1);let a=ut();return this.dr.forEachInRange([n,s],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new Or(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Or{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return $e.comparator(e.key,r.key)||St(e.wr,r.wr)}static Ar(e,r){return St(e.wr,r.wr)||$e.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Wr(Or.Er)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tW(a,r,n,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Or(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ae.resolve(o)}lookupMutationBatch(e,r){return ae.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),a=s<0?0:s;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Or(r,0),s=new Or(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,s],o=>{const l=this.Dr(o.wr);a.push(l)}),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Wr(St);return r.forEach(s=>{const a=new Or(s,0),o=new Or(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{n=n.add(l.wr)})}),ae.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let a=n;$e.isDocumentKey(a)||(a=a.child(""));const o=new Or(new $e(a),0);let l=new Wr(St);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.wr)),!0)},o),ae.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Pt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return ae.forEach(r.mutations,s=>{const a=new Or(s.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Or(r,0),s=this.br.firstAfterOrEqual(n);return ae.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e){this.Mr=e,this.docs=function(){return new ir($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),a=s?s.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ae.resolve(n?n.document.mutableCopy():rn.newInvalidDocument(r))}getEntries(e,r){let n=ga();return r.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():rn.newInvalidDocument(s))}),ae.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let a=ga();const o=r.path,l=new $e(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||wq(yq(d),n)<=0||(s.has(d.key)||px(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,r,n,s){He()}Or(e,r){return ae.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new LW(this)}getSize(e){return ae.resolve(this.size)}}class LW extends TW{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),ae.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(e){this.persistence=e,this.Nr=new Zu(r=>O1(r),L1),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new B1,this.targetCount=0,this.kr=ku.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),ae.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new ku(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,ae.resolve()}updateTargetData(e,r){return this.Kn(r),ae.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,r,n){let s=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ae.waitFor(a).next(()=>s)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return ae.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),ae.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),ae.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),ae.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return ae.resolve(n)}containsKey(e,r){return ae.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(e,r){this.qr={},this.overlays={},this.Qr=new R1(0),this.Kr=!1,this.Kr=!0,this.$r=new DW,this.referenceDelegate=e(this),this.Ur=new VW(this),this.indexManager=new CW,this.remoteDocumentCache=function(s){return new OW(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new SW(r),this.Gr=new PW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new RW,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new MW(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Me("MemoryPersistence","Starting transaction:",e);const s=new $W(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,r){return ae.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class $W extends _q{constructor(e){super(),this.currentSequenceNumber=e}}class q1{constructor(e){this.persistence=e,this.Jr=new B1,this.Yr=null}static Zr(e){return new q1(e)}get Xr(){if(this.Yr)return this.Yr;throw He()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),ae.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),ae.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),ae.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Xr,n=>{const s=$e.fromPath(n);return this.ei(e,s).next(a=>{a||r.removeEntry(s,Ye.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return ae.or([()=>ae.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=ut(),s=ut();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new W1(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _9()?8:jq(cn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const a={result:null};return this.Yi(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,r,s,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new UW;return this.Xi(e,r,o).next(l=>{if(a.result=l,this.zi)return this.es(e,r,o,l.size)})}).next(()=>a.result)}es(e,r,n,s){return n.documentReadCount<this.ji?($d()<=gt.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",Ac(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ae.resolve()):($d()<=gt.DEBUG&&Me("QueryEngine","Query:",Ac(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?($d()<=gt.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",Ac(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(r))):ae.resolve())}Yi(e,r){if(XC(r))return ae.resolve(null);let n=bi(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Yg(r,null,"F"),n=bi(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=ut(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,o,c.readTime)?this.Yi(e,Yg(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,s){return XC(r)||s.isEqual(Ye.min())?ae.resolve(null):this.Ji.getDocuments(e,n).next(a=>{const o=this.ts(r,a);return this.ns(r,o,n,s)?ae.resolve(null):($d()<=gt.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ac(r)),this.rs(e,o,r,xq(s,-1)).next(l=>l))})}ts(e,r){let n=new Wr(kR(e));return r.forEach((s,a)=>{px(e,a)&&(n=n.add(a))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,r,n){return $d()<=gt.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Ac(r)),this.Ji.getDocumentsMatchingQuery(e,r,yo.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new ir(St),this._s=new Zu(a=>O1(a),L1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AW(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function qW(t,e,r,n){return new BW(t,e,r,n)}async function JR(t,e){const r=Qe(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],l=[];let c=ut();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function WW(t,e){const r=Qe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,m=h.keys();let g=ae.resolve();return m.forEach(x=>{g=g.next(()=>d.getEntry(c,x)).next(w=>{const b=u.docVersions.get(x);Pt(b!==null),w.version.compareTo(b)<0&&(h.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),d.addEntry(w)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=ut();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function XR(t){const e=Qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function HW(t,e){const r=Qe(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const l=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;l.push(r.Ur.removeMatchingKeys(a,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(a,d.addedDocuments,h)));let g=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Gr.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),s=s.insert(h,g),function(w,b,y){return w.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,g,d)&&l.push(r.Ur.updateTargetData(a,g))});let c=ga(),u=ut();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(GW(a,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(Ye.min())){const d=r.Ur.getLastRemoteSnapshotVersion(a).next(h=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n));l.push(d)}return ae.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(r.os=s,a))}function GW(t,e,r){let n=ut(),s=ut();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=ga();return r.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Ye.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Me("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function KW(t,e){const r=Qe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function YW(t,e){const r=Qe(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(a=>a?(s=a,ae.resolve(s)):r.Ur.allocateTargetId(n).next(o=>(s=new eo(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Nb(t,e,r){const n=Qe(t),s=n.os.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Jf(o))throw o;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function ck(t,e,r){const n=Qe(t);let s=Ye.min(),a=ut();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=Qe(c),m=h._s.get(d);return m!==void 0?ae.resolve(h.os.get(m)):h.Ur.getTargetData(u,d)}(n,o,bi(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?s:Ye.min(),r?a:ut())).next(l=>(QW(n,Uq(e),l),{documents:l,Ts:a})))}function QW(t,e,r){let n=t.us.get(e)||Ye.min();r.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.us.set(e,n)}class uk{constructor(){this.activeTargetIds=Gq()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JW{constructor(){this.so=new uk,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new uk,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XW{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mp=null;function g0(){return mp===null?mp=function(){return 268435456+Math.round(2147483648*Math.random())}():mp++,"0x"+mp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="WebChannelConnection";class tH extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(r,n,s,a,o){const l=g0(),c=this.xo(r,n.toUriEncodedString());Me("RestConnection",`Sending RPC '${r}' ${l}:`,c,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,a,o),this.No(r,c,u,s).then(d=>(Me("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw ju("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",s),d})}Lo(r,n,s,a,o,l){return this.Mo(r,n,s,a,o)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xu}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,o)=>r[o]=a),s&&s.headers.forEach((a,o)=>r[o]=a)}xo(r,n){const s=ZW[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const a=g0();return new Promise((o,l)=>{const c=new dR;c.setWithCredentials(!0),c.listenOnce(hR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Xp.NO_ERROR:const d=c.getResponseJson();Me(Zr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case Xp.TIMEOUT:Me(Zr,`RPC '${e}' ${a} timed out`),l(new be(re.DEADLINE_EXCEEDED,"Request time out"));break;case Xp.HTTP_ERROR:const h=c.getStatus();if(Me(Zr,`RPC '${e}' ${a} failed with status:`,h,"response text:",c.getResponseText()),h>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(b){const y=b.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(y)>=0?y:re.UNKNOWN}(g.status);l(new be(x,g.message))}else l(new be(re.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new be(re.UNAVAILABLE,"Connection failed."));break;default:He()}}finally{Me(Zr,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(s);Me(Zr,`RPC '${e}' ${a} sending request:`,s),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const s=g0(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pR(),l=mR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=a.join("");Me(Zr,`Creating RPC '${e}' stream ${s}: ${d}`,c);const h=o.createWebChannel(d,c);let m=!1,g=!1;const x=new eH({Io:b=>{g?Me(Zr,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(m||(Me(Zr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),Me(Zr,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},To:()=>h.close()}),w=(b,y,v)=>{b.listen(y,_=>{try{v(_)}catch(E){setTimeout(()=>{throw E},0)}})};return w(h,th.EventType.OPEN,()=>{g||(Me(Zr,`RPC '${e}' stream ${s} transport opened.`),x.yo())}),w(h,th.EventType.CLOSE,()=>{g||(g=!0,Me(Zr,`RPC '${e}' stream ${s} transport closed`),x.So())}),w(h,th.EventType.ERROR,b=>{g||(g=!0,ju(Zr,`RPC '${e}' stream ${s} transport errored:`,b),x.So(new be(re.UNAVAILABLE,"The operation could not be completed")))}),w(h,th.EventType.MESSAGE,b=>{var y;if(!g){const v=b.data[0];Pt(!!v);const _=v,E=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(E){Me(Zr,`RPC '${e}' stream ${s} received error:`,E);const C=E.status;let D=function(R){const S=yr[R];if(S!==void 0)return UR(S)}(C),T=E.message;D===void 0&&(D=re.INTERNAL,T="Unknown error status: "+C+" with message "+E.message),g=!0,x.So(new be(D,T)),h.close()}else Me(Zr,`RPC '${e}' stream ${s} received:`,v),x.bo(v)}}),w(l,fR.STAT_EVENT,b=>{b.stat===mb.PROXY?Me(Zr,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===mb.NOPROXY&&Me(Zr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function v0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){return new dW(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,r,n=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&Me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,r,n,s,a,o,l,c){this.ui=e,this.Ho=n,this.Jo=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ZR(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===re.RESOURCE_EXHAUSTED?(pa(r.toString()),pa("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new be(re.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rH extends e4{constructor(e,r,n,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=a}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=mW(this.serializer,e),n=function(a){if(!("targetChange"in a))return Ye.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ye.min():o.readTime?_i(o.readTime):Ye.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=jb(this.serializer),r.addTarget=function(a,o){let l;const c=o.target;if(l=xb(c)?{documents:vW(a,c)}:{query:xW(a,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=qR(a,o.resumeToken);const u=wb(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ye.min())>0){l.readTime=Qg(a,o.snapshotVersion.toTimestamp());const u=wb(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=wW(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=jb(this.serializer),r.removeTarget=e,this.a_(r)}}class nH extends e4{constructor(e,r,n,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=gW(e.writeResults,e.commitTime),n=_i(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=jb(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>pW(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new be(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,bb(r,n),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(re.UNKNOWN,a.toString())})}Lo(e,r,n,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,bb(r,n),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(re.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class iH{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pa(r),this.D_=!1):Me("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e,r,n,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{n.enqueueAndForget(async()=>{sc(this)&&(Me("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Qe(c);u.L_.add(4),await em(u),u.q_.set("Unknown"),u.L_.delete(4),await bx(u)}(this))})}),this.q_=new iH(n,s)}}async function bx(t){if(sc(t))for(const e of t.B_)await e(!0)}async function em(t){for(const e of t.B_)await e(!1)}function t4(t,e){const r=Qe(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Y1(r)?K1(r):ed(r).r_()&&G1(r,e))}function H1(t,e){const r=Qe(t),n=ed(r);r.N_.delete(e),n.r_()&&r4(r,e),r.N_.size===0&&(n.r_()?n.o_():sc(r)&&r.q_.set("Unknown"))}function G1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ed(t).A_(e)}function r4(t,e){t.Q_.xe(e),ed(t).R_(e)}function K1(t){t.Q_=new oW({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ed(t).start(),t.q_.v_()}function Y1(t){return sc(t)&&!ed(t).n_()&&t.N_.size>0}function sc(t){return Qe(t).L_.size===0}function n4(t){t.Q_=void 0}async function oH(t){t.q_.set("Online")}async function lH(t){t.N_.forEach((e,r)=>{G1(t,e)})}async function cH(t,e){n4(t),Y1(t)?(t.q_.M_(e),K1(t)):t.q_.set("Unknown")}async function uH(t,e,r){if(t.q_.set("Online"),e instanceof BR&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(n){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Jg(t,n)}else if(e instanceof tg?t.Q_.Ke(e):e instanceof zR?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ye.min()))try{const n=await XR(t.localStore);r.compareTo(n)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.N_.get(u);d&&a.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=a.N_.get(c);if(!d)return;a.N_.set(c,d.withResumeToken(Gr.EMPTY_BYTE_STRING,d.snapshotVersion)),r4(a,c);const h=new eo(d.target,c,u,d.sequenceNumber);G1(a,h)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){Me("RemoteStore","Failed to raise snapshot:",n),await Jg(t,n)}}async function Jg(t,e,r){if(!Jf(e))throw e;t.L_.add(1),await em(t),t.q_.set("Offline"),r||(r=()=>XR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Me("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await bx(t)})}function s4(t,e){return e().catch(r=>Jg(t,r,e))}async function _x(t){const e=Qe(t),r=bo(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;dH(e);)try{const s=await KW(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,hH(e,s)}catch(s){await Jg(e,s)}i4(e)&&a4(e)}function dH(t){return sc(t)&&t.O_.length<10}function hH(t,e){t.O_.push(e);const r=bo(t);r.r_()&&r.V_&&r.m_(e.mutations)}function i4(t){return sc(t)&&!bo(t).n_()&&t.O_.length>0}function a4(t){bo(t).start()}async function fH(t){bo(t).p_()}async function mH(t){const e=bo(t);for(const r of t.O_)e.m_(r.mutations)}async function pH(t,e,r){const n=t.O_.shift(),s=$1.from(n,e,r);await s4(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await _x(t)}async function gH(t,e){e&&bo(t).V_&&await async function(n,s){if(function(o){return sW(o)&&o!==re.ABORTED}(s.code)){const a=n.O_.shift();bo(n).s_(),await s4(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await _x(n)}}(t,e),i4(t)&&a4(t)}async function hk(t,e){const r=Qe(t);r.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const n=sc(r);r.L_.add(3),await em(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await bx(r)}async function vH(t,e){const r=Qe(t);e?(r.L_.delete(2),await bx(r)):e||(r.L_.add(2),await em(r),r.q_.set("Unknown"))}function ed(t){return t.K_||(t.K_=function(r,n,s){const a=Qe(r);return a.w_(),new rH(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:oH.bind(null,t),Ro:lH.bind(null,t),mo:cH.bind(null,t),d_:uH.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Y1(t)?K1(t):t.q_.set("Unknown")):(await t.K_.stop(),n4(t))})),t.K_}function bo(t){return t.U_||(t.U_=function(r,n,s){const a=Qe(r);return a.w_(),new nH(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fH.bind(null,t),mo:gH.bind(null,t),f_:mH.bind(null,t),g_:pH.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await _x(t)):(await t.U_.stop(),t.O_.length>0&&(Me("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,r,n,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,a){const o=Date.now()+n,l=new Q1(e,r,o,s,a);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function J1(t,e){if(pa("AsyncQueue",`${e}: ${t}`),Jf(t))return new be(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e){this.comparator=e?(r,n)=>e(r,n)||$e.comparator(r.key,n.key):(r,n)=>$e.comparator(r.key,n.key),this.keyedMap=rh(),this.sortedSet=new ir(this.comparator)}static emptySet(e){return new ou(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ou)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new ou;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.W_=new ir($e.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):He():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Tu{constructor(e,r,n,s,a,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,s,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Tu(e,r,ou.emptySet(r),o,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class yH{constructor(){this.queries=mk(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Qe(r),a=s.queries;s.queries=mk(),a.forEach((o,l)=>{for(const c of l.j_)c.onError(n)})})(this,new be(re.ABORTED,"Firestore shutting down"))}}function mk(){return new Zu(t=>CR(t),mx)}async function X1(t,e){const r=Qe(t);let n=3;const s=e.query;let a=r.queries.get(s);a?!a.H_()&&e.J_()&&(n=2):(a=new xH,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(s,!0);break;case 1:a.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=J1(o,`Initialization of query '${Ac(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,a),a.j_.push(e),e.Z_(r.onlineState),a.z_&&e.X_(a.z_)&&ej(r)}async function Z1(t,e){const r=Qe(t),n=e.query;let s=3;const a=r.queries.get(n);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function wH(t,e){const r=Qe(t);let n=!1;for(const s of e){const a=s.query,o=r.queries.get(a);if(o){for(const l of o.j_)l.X_(s)&&(n=!0);o.z_=s}}n&&ej(r)}function bH(t,e,r){const n=Qe(t),s=n.queries.get(e);if(s)for(const a of s.j_)a.onError(r);n.queries.delete(e)}function ej(t){t.Y_.forEach(e=>{e.next()})}var Sb,pk;(pk=Sb||(Sb={})).ea="default",pk.Cache="cache";class tj{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Tu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Sb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.key=e}}class l4{constructor(e){this.key=e}}class _H{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ut(),this.mutatedKeys=ut(),this.Aa=kR(e),this.Ra=new ou(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new fk,s=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),g=px(this.query,h)?h:null,x=!!m&&this.mutatedKeys.has(m.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;m&&g?m.data.isEqual(g.data)?x!==w&&(n.track({type:3,doc:g}),b=!0):this.ga(m,g)||(n.track({type:2,doc:g}),b=!0,(c&&this.Aa(g,c)>0||u&&this.Aa(g,u)<0)&&(l=!0)):!m&&g?(n.track({type:0,doc:g}),b=!0):m&&!g&&(n.track({type:1,doc:m}),b=!0,(c||u)&&(l=!0)),b&&(g?(o=o.add(g),a=w?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{Ra:o,fa:n,ns:l,mutatedKeys:a}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(g,x){const w=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He()}};return w(g)-w(x)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),s=s!=null&&s;const l=r&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Tu(this.query,e.Ra,a,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fk,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ut(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new l4(n))}),this.da.forEach(n=>{e.has(n)||r.push(new o4(n))}),r}ba(e){this.Ta=e.Ts,this.da=ut();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Tu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class jH{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class NH{constructor(e){this.key=e,this.va=!1}}class SH{constructor(e,r,n,s,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Zu(l=>CR(l),mx),this.Ma=new Map,this.xa=new Set,this.Oa=new ir($e.comparator),this.Na=new Map,this.La=new B1,this.Ba={},this.ka=new Map,this.qa=ku.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function EH(t,e,r=!0){const n=m4(t);let s;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await c4(n,e,r,!0),s}async function CH(t,e){const r=m4(t);await c4(r,e,!0,!1)}async function c4(t,e,r,n){const s=await YW(t.localStore,bi(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return n&&(l=await kH(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&t4(t.remoteStore,s),l}async function kH(t,e,r,n,s){t.Ka=(h,m,g)=>async function(w,b,y,v){let _=b.view.ma(y);_.ns&&(_=await ck(w.localStore,b.query,!1).then(({documents:T})=>b.view.ma(T,_)));const E=v&&v.targetChanges.get(b.targetId),C=v&&v.targetMismatches.get(b.targetId)!=null,D=b.view.applyChanges(_,w.isPrimaryClient,E,C);return vk(w,b.targetId,D.wa),D.snapshot}(t,h,m,g);const a=await ck(t.localStore,e,!0),o=new _H(e,a.Ts),l=o.ma(a.documents),c=Zf.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);vk(t,r,u.wa);const d=new jH(e,r,o);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function TH(t,e,r){const n=Qe(t),s=n.Fa.get(e),a=n.Ma.get(s.targetId);if(a.length>1)return n.Ma.set(s.targetId,a.filter(o=>!mx(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Nb(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&H1(n.remoteStore,s.targetId),Eb(n,s.targetId)}).catch(Qf)):(Eb(n,s.targetId),await Nb(n.localStore,s.targetId,!0))}async function IH(t,e){const r=Qe(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),H1(r.remoteStore,n.targetId))}async function AH(t,e,r){const n=VH(t);try{const s=await function(o,l){const c=Qe(o),u=Pr.now(),d=l.reduce((g,x)=>g.add(x.key),ut());let h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=ga(),w=ut();return c.cs.getEntries(g,d).next(b=>{x=b,x.forEach((y,v)=>{v.isValidDocument()||(w=w.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,x)).next(b=>{h=b;const y=[];for(const v of l){const _=Zq(v,h.get(v.key).overlayedDocument);_!=null&&y.push(new Fo(v.key,_,wR(_.value.mapValue),wn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,y,l)}).next(b=>{m=b;const y=b.applyToLocalDocumentSet(h,w);return c.documentOverlayCache.saveOverlays(g,b.batchId,y)})}).then(()=>({batchId:m.batchId,changes:IR(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new ir(St)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(n,s.batchId,r),await tm(n,s.changes),await _x(n.remoteStore)}catch(s){const a=J1(s,"Failed to persist write");r.reject(a)}}async function u4(t,e){const r=Qe(t);try{const n=await HW(r.localStore,e);e.targetChanges.forEach((s,a)=>{const o=r.Na.get(a);o&&(Pt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Pt(o.va):s.removedDocuments.size>0&&(Pt(o.va),o.va=!1))}),await tm(r,n,e)}catch(n){await Qf(n)}}function gk(t,e,r){const n=Qe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Qe(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const m of h.j_)m.Z_(l)&&(u=!0)}),u&&ej(c)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function PH(t,e,r){const n=Qe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),a=s&&s.key;if(a){let o=new ir($e.comparator);o=o.insert(a,rn.newNoDocument(a,Ye.min()));const l=ut().add(a),c=new yx(Ye.min(),new Map,new ir(St),o,l);await u4(n,c),n.Oa=n.Oa.remove(a),n.Na.delete(e),rj(n)}else await Nb(n.localStore,e,!1).then(()=>Eb(n,e,r)).catch(Qf)}async function RH(t,e){const r=Qe(t),n=e.batch.batchId;try{const s=await WW(r.localStore,e);h4(r,n,null),d4(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await tm(r,s)}catch(s){await Qf(s)}}async function DH(t,e,r){const n=Qe(t);try{const s=await function(o,l){const c=Qe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(Pt(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);h4(n,e,r),d4(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await tm(n,s)}catch(s){await Qf(s)}}function d4(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function h4(t,e,r){const n=Qe(t);let s=n.Ba[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Eb(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||f4(t,n)})}function f4(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(H1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),rj(t))}function vk(t,e,r){for(const n of r)n instanceof o4?(t.La.addReference(n.key,e),MH(t,n)):n instanceof l4?(Me("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||f4(t,n.key)):He()}function MH(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Me("SyncEngine","New document in limbo: "+r),t.xa.add(n),rj(t))}function rj(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new $e(Lt.fromString(e)),n=t.qa.next();t.Na.set(n,new NH(r)),t.Oa=t.Oa.insert(r,n),t4(t.remoteStore,new eo(bi(fx(r.path)),n,"TargetPurposeLimboResolution",R1.oe))}}async function tm(t,e,r){const n=Qe(t),s=[],a=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{o.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const h=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=W1.Wi(c.targetId,u);a.push(h)}}))}),await Promise.all(o),n.Ca.d_(s),await async function(c,u){const d=Qe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ae.forEach(u,m=>ae.forEach(m.$i,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>ae.forEach(m.Ui,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!Jf(h))throw h;Me("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const g=d.os.get(m),x=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(x);d.os=d.os.insert(m,w)}}}(n.localStore,a))}async function OH(t,e){const r=Qe(t);if(!r.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const n=await JR(r.localStore,e);r.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(c=>{c.reject(new be(re.CANCELLED,o))})}),a.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await tm(r,n.hs)}}function LH(t,e){const r=Qe(t),n=r.Na.get(e);if(n&&n.va)return ut().add(n.key);{let s=ut();const a=r.Ma.get(e);if(!a)return s;for(const o of a){const l=r.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function m4(t){const e=Qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=u4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PH.bind(null,e),e.Ca.d_=wH.bind(null,e.eventManager),e.Ca.$a=bH.bind(null,e.eventManager),e}function VH(t){const e=Qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DH.bind(null,e),e}class Xg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wx(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return qW(this.persistence,new zW,e.initialUser,this.serializer)}Ga(e){return new FW(q1.Zr,this.serializer)}Wa(e){return new JW}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xg.provider={build:()=>new Xg};class Cb{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>gk(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=OH.bind(null,this.syncEngine),await vH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yH}()}createDatastore(e){const r=wx(e.databaseInfo.databaseId),n=function(a){return new tH(a)}(e.databaseInfo);return function(a,o,l,c){return new sH(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,a,o,l){return new aH(n,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>gk(this.syncEngine,r,0),function(){return dk.D()?new dk:new XW}())}createSyncEngine(e,r){return function(s,a,o,l,c,u,d){const h=new SH(s,a,o,l,c,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=Qe(s);Me("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await em(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Cb.provider={build:()=>new Cb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pa("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(e,r,n,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=en.UNAUTHENTICATED,this.clientId=vR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async o=>{Me("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(Me("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=J1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function x0(t,e){t.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await JR(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xk(t,e){t.asyncQueue.verifyOperationInProgress();const r=await $H(t);Me("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>hk(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>hk(e.remoteStore,s)),t._onlineComponents=e}async function $H(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Me("FirestoreClient","Using user provided OfflineComponentProvider");try{await x0(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;ju("Error using user provided cache. Falling back to memory cache: "+r),await x0(t,new Xg)}}else Me("FirestoreClient","Using default OfflineComponentProvider"),await x0(t,new Xg);return t._offlineComponents}async function p4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Me("FirestoreClient","Using user provided OnlineComponentProvider"),await xk(t,t._uninitializedComponentsProvider._online)):(Me("FirestoreClient","Using default OnlineComponentProvider"),await xk(t,new Cb))),t._onlineComponents}function UH(t){return p4(t).then(e=>e.syncEngine)}async function Zg(t){const e=await p4(t),r=e.eventManager;return r.onListen=EH.bind(null,e.syncEngine),r.onUnlisten=TH.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=CH.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=IH.bind(null,e.syncEngine),r}function zH(t,e,r={}){const n=new ra;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new nj({next:m=>{d.Za(),o.enqueueAndForget(()=>Z1(a,h));const g=m.docs.has(l);!g&&m.fromCache?u.reject(new be(re.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new be(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new tj(fx(l.path),d,{includeMetadataChanges:!0,_a:!0});return X1(a,h)}(await Zg(t),t.asyncQueue,e,r,n)),n.promise}function BH(t,e,r={}){const n=new ra;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new nj({next:m=>{d.Za(),o.enqueueAndForget(()=>Z1(a,h)),m.fromCache&&c.source==="server"?u.reject(new be(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new tj(l,d,{includeMetadataChanges:!0,_a:!0});return X1(a,h)}(await Zg(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t,e,r){if(!r)throw new be(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qH(t,e,r,n){if(e===!0&&n===!0)throw new be(re.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function wk(t){if(!$e.isDocumentKey(t))throw new be(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bk(t){if($e.isDocumentKey(t))throw new be(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":He()}function bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=jx(t);throw new be(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function WH(t,e){if(e<=0)throw new be(re.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new be(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new be(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g4((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nx{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _k({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _k(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new cq;switch(n.type){case"firstParty":return new fq(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new be(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=yk.get(r);n&&(Me("ComponentProvider","Removing Datastore"),yk.delete(r),n.terminate())}(this),Promise.resolve()}}function HH(t,e,r,n={}){var s;const a=(t=bn(t,Nx))._getSettings(),o=`${e}:${r}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&ju("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=en.MOCK_USER;else{l=pP(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new be(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new en(u)}t._authCredentials=new uq(new gR(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ri(this.firestore,e,this._query)}}class sn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class mo extends Ri{constructor(e,r,n){super(e,r,fx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new $e(e))}withConverter(e){return new mo(this.firestore,e,this._path)}}function bt(t,e,...r){if(t=ft(t),v4("collection","path",e),t instanceof Nx){const n=Lt.fromString(e,...r);return bk(n),new mo(t,null,n)}{if(!(t instanceof sn||t instanceof mo))throw new be(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Lt.fromString(e,...r));return bk(n),new mo(t.firestore,null,n)}}function Ke(t,e,...r){if(t=ft(t),arguments.length===1&&(e=vR.newId()),v4("doc","path",e),t instanceof Nx){const n=Lt.fromString(e,...r);return wk(n),new sn(t,null,new $e(n))}{if(!(t instanceof sn||t instanceof mo))throw new be(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Lt.fromString(e,...r));return wk(n),new sn(t.firestore,t instanceof mo?t.converter:null,new $e(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ZR(this,"async_queue_retry"),this.Vu=()=>{const n=v0();n&&Me("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=v0();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=v0();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new ra;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Jf(e))throw e;Me("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw pa("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=Q1.createAndSchedule(this,e,r,n,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&He()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function Nk(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class ki extends Nx{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new jk,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jk(e),this._firestoreClient=void 0,await e}}}function GH(t,e){const r=typeof t=="object"?t:ox(),n=typeof t=="string"?t:"(default)",s=Vo(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=hP("firestore");a&&HH(s,...a)}return s}function rm(t){if(t._terminated)throw new be(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||KH(t),t._firestoreClient}function KH(t){var e,r,n;const s=t._freezeSettings(),a=function(l,c,u,d){return new Eq(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,g4(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new FH(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Iu(Gr.fromBase64String(e))}catch(r){throw new be(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Iu(Gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new be(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new be(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new be(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH=/^__.*__$/;class QH{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,r,this.fieldTransforms):new Xf(e,this.data,r,this.fieldTransforms)}}class x4{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Fo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function y4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He()}}class aj{constructor(e,r,n,s,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new aj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ev(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(y4(this.Cu)&&YH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class JH{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||wx(e)}Qu(e,r,n,s=!1){return new aj({Cu:e,methodName:r,qu:n,path:zr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function td(t){const e=t._freezeSettings(),r=wx(t._databaseId);return new JH(t._databaseId,!!e.ignoreUndefinedProperties,r)}function oj(t,e,r,n,s,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,r,s);uj("Data must be an object, but it was:",o,n);const l=j4(n,o);let c,u;if(a.merge)c=new Yn(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const m=kb(e,h,r);if(!o.contains(m))throw new be(re.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);S4(d,m)||d.push(m)}c=new Yn(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new QH(new An(l),c,u)}class Sx extends sm{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sx}}class lj extends sm{_toFieldTransform(e){return new VR(e.path,new cf)}isEqual(e){return e instanceof lj}}class cj extends sm{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new hf(e.serializer,RR(e.serializer,this.$u));return new VR(e.path,r)}isEqual(e){return e instanceof cj&&this.$u===e.$u}}function w4(t,e,r,n){const s=t.Qu(1,e,r);uj("Data must be an object, but it was:",s,n);const a=[],o=An.empty();rc(n,(c,u)=>{const d=dj(e,c,r);u=ft(u);const h=s.Nu(d);if(u instanceof Sx)a.push(d);else{const m=im(u,h);m!=null&&(a.push(d),o.set(d,m))}});const l=new Yn(a);return new x4(o,l,s.fieldTransforms)}function b4(t,e,r,n,s,a){const o=t.Qu(1,e,r),l=[kb(e,n,r)],c=[s];if(a.length%2!=0)throw new be(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)l.push(kb(e,a[m])),c.push(a[m+1]);const u=[],d=An.empty();for(let m=l.length-1;m>=0;--m)if(!S4(u,l[m])){const g=l[m];let x=c[m];x=ft(x);const w=o.Nu(g);if(x instanceof Sx)u.push(g);else{const b=im(x,w);b!=null&&(u.push(g),d.set(g,b))}}const h=new Yn(u);return new x4(d,h,o.fieldTransforms)}function _4(t,e,r,n=!1){return im(r,t.Qu(n?4:3,e))}function im(t,e){if(N4(t=ft(t)))return uj("Unsupported field value:",e,t),j4(t,e);if(t instanceof sm)return function(n,s){if(!y4(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const a=[];let o=0;for(const l of n){let c=im(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,s){if((n=ft(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return RR(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Pr.fromDate(n);return{timestampValue:Qg(s.serializer,a)}}if(n instanceof Pr){const a=new Pr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Qg(s.serializer,a)}}if(n instanceof sj)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Iu)return{bytesValue:qR(s.serializer,n._byteString)};if(n instanceof sn){const a=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:z1(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof ij)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return F1(l.serializer,c)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${jx(n)}`)}(t,e)}function j4(t,e){const r={};return xR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rc(t,(n,s)=>{const a=im(s,e.Mu(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function N4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pr||t instanceof sj||t instanceof Iu||t instanceof sn||t instanceof sm||t instanceof ij)}function uj(t,e,r){if(!N4(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=jx(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function kb(t,e,r){if((e=ft(e))instanceof nm)return e._internalPath;if(typeof e=="string")return dj(t,e);throw ev("Field path arguments must be of type string or ",t,!1,void 0,r)}const XH=new RegExp("[~\\*/\\[\\]]");function dj(t,e,r){if(e.search(XH)>=0)throw ev(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new nm(...e.split("."))._internalPath}catch{throw ev(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function ev(t,e,r,n,s){const a=n&&!n.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${n}`),o&&(c+=` in document ${s}`),c+=")"),new be(re.INVALID_ARGUMENT,l+t+c)}function S4(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,r,n,s,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Ex("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class ZH extends hj{data(){return super.data()}}function Ex(t,e){return typeof e=="string"?dj(t,e):e instanceof nm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new be(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fj{}class Cx extends fj{}function Mt(t,e,...r){let n=[];e instanceof fj&&n.push(e),n=n.concat(r),function(a){const o=a.filter(c=>c instanceof mj).length,l=a.filter(c=>c instanceof kx).length;if(o>1||o>0&&l>0)throw new be(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class kx extends Cx{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new kx(e,r,n)}_apply(e){const r=this._parse(e);return C4(e._query,r),new Ri(e.firestore,e.converter,yb(e._query,r))}_parse(e){const r=td(e.firestore);return function(a,o,l,c,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new be(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Ek(h,d);const g=[];for(const x of h)g.push(Sk(c,a,x));m={arrayValue:{values:g}}}else m=Sk(c,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Ek(h,d),m=_4(l,o,h,d==="in"||d==="not-in");return br.create(u,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Vt(t,e,r){const n=e,s=Ex("where",t);return kx._create(s,n,r)}class mj extends fj{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new mj(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Qs.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const c of l)C4(o,c),o=yb(o,c)}(e._query,r),new Ri(e.firestore,e.converter,yb(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pj extends Cx{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new pj(e,r)}_apply(e){const r=function(s,a,o){if(s.startAt!==null)throw new be(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new be(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lf(a,o)}(e._query,this._field,this._direction);return new Ri(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new nc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function tv(t,e="asc"){const r=e,n=Ex("orderBy",t);return pj._create(n,r)}class gj extends Cx{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new gj(e,r,n)}_apply(e){return new Ri(e.firestore,e.converter,Yg(e._query,this._limit,this._limitType))}}function ys(t){return WH("limit",t),gj._create("limit",t,"F")}class vj extends Cx{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new vj(e,r,n)}_apply(e){const r=tG(e,this.type,this._docOrFields,this._inclusive);return new Ri(e.firestore,e.converter,function(s,a){return new nc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)}(e._query,r))}}function eG(...t){return vj._create("startAfter",t,!1)}function tG(t,e,r,n){if(r[0]=ft(r[0]),r[0]instanceof hj)return function(a,o,l,c,u){if(!c)throw new be(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const h of au(a))if(h.field.isKeyField())d.push(Kg(o,c.key));else{const m=c.data.field(h.field);if(hx(m))throw new be(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const g=h.field.canonicalString();throw new be(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(m)}return new Cu(d,u)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=td(t.firestore);return function(o,l,c,u,d,h){const m=o.explicitOrderBy;if(d.length>m.length)throw new be(re.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let x=0;x<d.length;x++){const w=d[x];if(m[x].field.isKeyField()){if(typeof w!="string")throw new be(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof w}`);if(!V1(o)&&w.indexOf("/")!==-1)throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${w}' contains a slash.`);const b=o.path.child(Lt.fromString(w));if(!$e.isDocumentKey(b))throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const y=new $e(b);g.push(Kg(l,y))}else{const b=_4(c,u,w);g.push(b)}}return new Cu(g,h)}(t._query,t.firestore._databaseId,s,e,r,n)}}function Sk(t,e,r){if(typeof(r=ft(r))=="string"){if(r==="")throw new be(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V1(e)&&r.indexOf("/")!==-1)throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Lt.fromString(r));if(!$e.isDocumentKey(n))throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Kg(t,new $e(n))}if(r instanceof sn)return Kg(t,r._key);throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jx(r)}.`)}function Ek(t,e){if(!Array.isArray(t)||t.length===0)throw new be(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function C4(t,e){const r=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new be(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class rG{convertValue(e,r="none"){switch(Ol(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ml(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw He()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return rc(e,(s,a)=>{n[s]=this.convertValue(a,r)}),n}convertVectorValue(e){var r,n,s;const a=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(o=>fr(o.doubleValue));return new ij(a)}convertGeoPoint(e){return new sj(fr(e.latitude),fr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=D1(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(sf(e));default:return null}}convertTimestamp(e){const r=wo(e);return new Pr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Lt.fromString(e);Pt(QR(n));const s=new af(n.get(1),n.get(3)),a=new $e(n.popFirst(5));return s.isEqual(r)||pa(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class k4 extends hj{constructor(e,r,n,s,a,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new rg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Ex("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class rg extends k4{data(e={}){return super.data(e)}}class T4{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new sh(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new rg(this._firestore,this._userDataWriter,n.key,n,new sh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new be(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new rg(s._firestore,s._userDataWriter,l.doc.key,l.doc,new sh(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new rg(s._firestore,s._userDataWriter,l.doc.key,l.doc,new sh(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:nG(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function nG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t){t=bn(t,sn);const e=bn(t.firestore,ki);return zH(rm(e),t._key).then(r=>I4(e,t,r))}class yj extends rG{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,r)}}function Kt(t){t=bn(t,Ri);const e=bn(t.firestore,ki),r=rm(e),n=new yj(e);return E4(t._query),BH(r,t._query).then(s=>new T4(e,n,t,s))}function xl(t,e,r){t=bn(t,sn);const n=bn(t.firestore,ki),s=xj(t.converter,e,r);return am(n,[oj(td(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,wn.none())])}function cr(t,e,r,...n){t=bn(t,sn);const s=bn(t.firestore,ki),a=td(s);let o;return o=typeof(e=ft(e))=="string"||e instanceof nm?b4(a,"updateDoc",t._key,e,r,n):w4(a,"updateDoc",t._key,e),am(s,[o.toMutation(t._key,wn.exists(!0))])}function Au(t){return am(bn(t.firestore,ki),[new xx(t._key,wn.none())])}function Ll(t,e){const r=bn(t.firestore,ki),n=Ke(t),s=xj(t.converter,e);return am(r,[oj(td(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,wn.exists(!1))]).then(()=>n)}function Ck(t,...e){var r,n,s;t=ft(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Nk(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Nk(e[o])){const h=e[o];e[o]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[o+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let c,u,d;if(t instanceof sn)u=bn(t.firestore,ki),d=fx(t._key.path),c={next:h=>{e[o]&&e[o](I4(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=bn(t,Ri);u=bn(h.firestore,ki),d=h._query;const m=new yj(u);c={next:g=>{e[o]&&e[o](new T4(u,m,h,g))},error:e[o+1],complete:e[o+2]},E4(t._query)}return function(m,g,x,w){const b=new nj(w),y=new tj(g,b,x);return m.asyncQueue.enqueueAndForget(async()=>X1(await Zg(m),y)),()=>{b.Za(),m.asyncQueue.enqueueAndForget(async()=>Z1(await Zg(m),y))}}(rm(u),d,l,c)}function am(t,e){return function(n,s){const a=new ra;return n.asyncQueue.enqueueAndForget(async()=>AH(await UH(n),s,a)),a.promise}(rm(t),e)}function I4(t,e,r){const n=r.docs.get(e._key),s=new yj(t);return new k4(t,s,e._key,n,new sh(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=td(e)}set(e,r,n){this._verifyNotCommitted();const s=y0(e,this._firestore),a=xj(s.converter,r,n),o=oj(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,n);return this._mutations.push(o.toMutation(s._key,wn.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const a=y0(e,this._firestore);let o;return o=typeof(r=ft(r))=="string"||r instanceof nm?b4(this._dataReader,"WriteBatch.update",a._key,r,n,s):w4(this._dataReader,"WriteBatch.update",a._key,r),this._mutations.push(o.toMutation(a._key,wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=y0(e,this._firestore);return this._mutations=this._mutations.concat(new xx(r._key,wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function y0(t,e){if((t=ft(t)).firestore!==e)throw new be(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function or(){return new lj("serverTimestamp")}function kk(t){return new cj("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){return rm(t=bn(t,ki)),new sG(t,e=>am(t,e))}(function(e,r=!0){(function(s){Xu=s})(tc),Ys(new Es("firestore",(n,{instanceIdentifier:s,options:a})=>{const o=n.getProvider("app").getImmediate(),l=new ki(new dq(n.getProvider("auth-internal")),new pq(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new be(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new af(u.options.projectId,d)}(o,s),o);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Fn(zC,"4.7.3",e),Fn(zC,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4="firebasestorage.googleapis.com",R4="storageBucket",iG=2*60*1e3,aG=10*60*1e3,oG=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xr=class D4 extends ks{constructor(e,r,n=0){super(w0(e),`Firebase Storage: ${r} (${w0(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,D4.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return w0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Qt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qt||(Qt={}));function w0(t){return"storage/"+t}function wj(){const t="An unknown error occurred, please check the error payload for server response.";return new xr(Qt.UNKNOWN,t)}function lG(t){return new xr(Qt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function cG(t){return new xr(Qt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uG(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xr(Qt.UNAUTHENTICATED,t)}function dG(){return new xr(Qt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function hG(t){return new xr(Qt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function M4(){return new xr(Qt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function O4(){return new xr(Qt.CANCELED,"User canceled the upload/download.")}function fG(t){return new xr(Qt.INVALID_URL,"Invalid URL '"+t+"'.")}function mG(t){return new xr(Qt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pG(){return new xr(Qt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+R4+"' property when initializing the app?")}function L4(){return new xr(Qt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gG(){return new xr(Qt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function vG(){return new xr(Qt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xG(t){return new xr(Qt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Tb(t){return new xr(Qt.INVALID_ARGUMENT,t)}function V4(){return new xr(Qt.APP_DELETED,"The Firebase app was deleted.")}function yG(t){return new xr(Qt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nh(t,e){return new xr(Qt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ud(t){throw new xr(Qt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Qn.makeFromUrl(e,r)}catch{return new Qn(e,"")}if(n.path==="")return n;throw mG(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function a(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${s}/o${m}`,"i"),x={bucket:1,path:3},w=r===P4?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",y=new RegExp(`^https?://${w}/${s}/${b}`,"i"),_=[{regex:l,indices:c,postModify:a},{regex:g,indices:x,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<_.length;E++){const C=_[E],D=C.regex.exec(e);if(D){const T=D[C.indices.bucket];let k=D[C.indices.path];k||(k=""),n=new Qn(T,k),C.postModify(n);break}}if(n==null)throw fG(e);return n}}class wG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bG(t,e,r){let n=1,s=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...b){u||(u=!0,e.apply(null,b))}function h(b){s=setTimeout(()=>{s=null,t(g,c())},b)}function m(){a&&clearTimeout(a)}function g(b,...y){if(u){m();return}if(b){m(),d.call(null,b,...y);return}if(c()||o){m(),d.call(null,b,...y);return}n<64&&(n*=2);let _;l===1?(l=2,_=0):_=(n+Math.random())*1e3,h(_)}let x=!1;function w(b){x||(x=!0,m(),!u&&(s!==null?(b||(l=2),clearTimeout(s),h(0)):b||(l=1)))}return h(0),a=setTimeout(()=>{o=!0,w(!0)},r),w}function _G(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jG(t){return t!==void 0}function NG(t){return typeof t=="function"}function SG(t){return typeof t=="object"&&!Array.isArray(t)}function Tx(t){return typeof t=="string"||t instanceof String}function Tk(t){return bj()&&t instanceof Blob}function bj(){return typeof Blob<"u"}function Ik(t,e,r,n){if(n<e)throw Tb(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw Tb(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function F4(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var yl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(yl||(yl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(e,r,n,s,a,o,l,c,u,d,h,m=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new pp(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===yl.NO_ERROR,c=a.getStatus();if(!l||$4(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===yl.ABORT;n(!1,new pp(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new pp(u,a))})},r=(n,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());jG(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=wj();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?V4():O4();o(c)}else{const c=M4();o(c)}};this.canceled_?r(!1,new pp(!1,null,!0)):this.backoffId_=bG(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_G(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pp{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function CG(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kG(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function TG(t,e){e&&(t["X-Firebase-GMPID"]=e)}function IG(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function AG(t,e,r,n,s,a,o=!0){const l=F4(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return TG(u,e),CG(u,r),kG(u,a),IG(u,n),new EG(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function RG(...t){const e=PG();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(bj())return new Blob(t);throw new xr(Qt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function DG(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MG(t){if(typeof atob>"u")throw xG("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class b0{constructor(e,r){this.data=e,this.contentType=r||null}}function OG(t,e){switch(t){case fi.RAW:return new b0(U4(e));case fi.BASE64:case fi.BASE64URL:return new b0(z4(t,e));case fi.DATA_URL:return new b0(VG(e),FG(e))}throw wj()}function U4(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,o=t.charCodeAt(++r);n=65536|(a&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function LG(t){let e;try{e=decodeURIComponent(t)}catch{throw Nh(fi.DATA_URL,"Malformed data URL.")}return U4(e)}function z4(t,e){switch(t){case fi.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw Nh(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case fi.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw Nh(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=MG(e)}catch(s){throw s.message.includes("polyfill")?s:Nh(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class B4{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Nh(fi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=$G(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function VG(t){const e=new B4(t);return e.base64?z4(fi.BASE64,e.rest):LG(e.rest)}function FG(t){return new B4(t).contentType}function $G(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,r){let n=0,s="";Tk(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(Tk(this.data_)){const n=this.data_,s=DG(n,e,r);return s===null?null:new Ki(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Ki(n,!0)}}static getBlob(...e){if(bj()){const r=e.map(n=>n instanceof Ki?n.data_:n);return new Ki(RG.apply(null,r))}else{const r=e.map(o=>Tx(o)?OG(fi.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const s=new Uint8Array(n);let a=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)s[a++]=o[l]}),new Ki(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(t){let e;try{e=JSON.parse(t)}catch{return null}return SG(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zG(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function W4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BG(t,e){return e}class hn{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||BG}}let gp=null;function qG(t){return!Tx(t)||t.length<2?t:W4(t)}function _j(){if(gp)return gp;const t=[];t.push(new hn("bucket")),t.push(new hn("generation")),t.push(new hn("metageneration")),t.push(new hn("name","fullPath",!0));function e(a,o){return qG(o)}const r=new hn("name");r.xform=e,t.push(r);function n(a,o){return o!==void 0?Number(o):o}const s=new hn("size");return s.xform=n,t.push(s),t.push(new hn("timeCreated")),t.push(new hn("updated")),t.push(new hn("md5Hash",null,!0)),t.push(new hn("cacheControl",null,!0)),t.push(new hn("contentDisposition",null,!0)),t.push(new hn("contentEncoding",null,!0)),t.push(new hn("contentLanguage",null,!0)),t.push(new hn("contentType",null,!0)),t.push(new hn("metadata","customMetadata",!0)),gp=t,gp}function WG(t,e){function r(){const n=t.bucket,s=t.fullPath,a=new Qn(n,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function HG(t,e,r){const n={};n.type="file";const s=r.length;for(let a=0;a<s;a++){const o=r[a];n[o.local]=o.xform(n,e[o.server])}return WG(n,t),n}function H4(t,e,r){const n=q4(e);return n===null?null:HG(t,n,r)}function GG(t,e,r,n){const s=q4(e);if(s===null||!Tx(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(u=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),g=rd(m,r,n),x=F4({alt:"media",token:u});return g+x})[0]}function G4(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const a=e[s];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class ic{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){if(!t)throw wj()}function jj(t,e){function r(n,s){const a=H4(t,s,e);return na(a!==null),a}return r}function KG(t,e){function r(n,s){const a=H4(t,s,e);return na(a!==null),GG(a,s,t.host,t._protocol)}return r}function om(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=dG():s=uG():r.getStatus()===402?s=cG(t.bucket):r.getStatus()===403?s=hG(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function Nj(t){const e=om(t);function r(n,s){let a=e(n,s);return n.getStatus()===404&&(a=lG(t.path)),a.serverResponse=s.serverResponse,a}return r}function YG(t,e,r){const n=e.fullServerUrl(),s=rd(n,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new ic(s,a,jj(t,r),o);return l.errorHandler=Nj(e),l}function QG(t,e,r){const n=e.fullServerUrl(),s=rd(n,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new ic(s,a,KG(t,r),o);return l.errorHandler=Nj(e),l}function JG(t,e){const r=e.fullServerUrl(),n=rd(r,t.host,t._protocol),s="DELETE",a=t.maxOperationRetryTime;function o(c,u){}const l=new ic(n,s,o,a);return l.successCodes=[200,204],l.errorHandler=Nj(e),l}function XG(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function K4(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=XG(null,e)),n}function Y4(t,e,r,n,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let E=0;E<2;E++)_=_+Math.random().toString().slice(2);return _}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=K4(e,n,s),d=G4(u,r),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",g=Ki.getBlob(h,n,m);if(g===null)throw L4();const x={name:u.fullPath},w=rd(a,t.host,t._protocol),b="POST",y=t.maxUploadRetryTime,v=new ic(w,b,jj(t,r),y);return v.urlParams=x,v.headers=o,v.body=g.uploadData(),v.errorHandler=om(e),v}class rv{constructor(e,r,n,s){this.current=e,this.total=r,this.finalized=!!n,this.metadata=s||null}}function Sj(t,e){let r=null;try{r=t.getResponseHeader("X-Goog-Upload-Status")}catch{na(!1)}return na(!!r&&(e||["active"]).indexOf(r)!==-1),r}function ZG(t,e,r,n,s){const a=e.bucketOnlyServerUrl(),o=K4(e,n,s),l={name:o.fullPath},c=rd(a,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=G4(o,r),m=t.maxUploadRetryTime;function g(w){Sj(w);let b;try{b=w.getResponseHeader("X-Goog-Upload-URL")}catch{na(!1)}return na(Tx(b)),b}const x=new ic(c,u,g,m);return x.urlParams=l,x.headers=d,x.body=h,x.errorHandler=om(e),x}function eK(t,e,r,n){const s={"X-Goog-Upload-Command":"query"};function a(u){const d=Sj(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{na(!1)}h||na(!1);const m=Number(h);return na(!isNaN(m)),new rv(m,n.size(),d==="final")}const o="POST",l=t.maxUploadRetryTime,c=new ic(r,o,a,l);return c.headers=s,c.errorHandler=om(e),c}const Ak=256*1024;function tK(t,e,r,n,s,a,o,l){const c=new rv(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw gG();const u=c.total-c.current;let d=u;s>0&&(d=Math.min(d,s));const h=c.current,m=h+d;let g="";d===0?g="finalize":u===d?g="upload, finalize":g="upload";const x={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${c.current}`},w=n.slice(h,m);if(w===null)throw L4();function b(E,C){const D=Sj(E,["active","final"]),T=c.current+d,k=n.size();let R;return D==="final"?R=jj(e,a)(E,C):R=null,new rv(T,k,D==="final",R)}const y="POST",v=e.maxUploadRetryTime,_=new ic(r,y,b,v);return _.headers=x,_.body=w.uploadData(),_.progressCallback=l||null,_.errorHandler=om(t),_}const kn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _0(t){switch(t){case"running":case"pausing":case"canceling":return kn.RUNNING;case"paused":return kn.PAUSED;case"success":return kn.SUCCESS;case"canceled":return kn.CANCELED;case"error":return kn.ERROR;default:return kn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(e,r,n){if(NG(e)||r!=null||n!=null)this.next=e,this.error=r??void 0,this.complete=n??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class nK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s){if(this.sent_)throw Ud("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ud("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ud("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ud("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ud("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class sK extends nK{initXhr(){this.xhr_.responseType="text"}}function Ga(){return new sK}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK{constructor(e,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=r,this._metadata=n,this._mappings=_j(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Qt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if($4(s.status,[]))if(a)s=M4();else{this.sleepTime=Math.max(this.sleepTime*2,oG),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Qt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,a)=>{this._resolve=s,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return r=>this._updateProgress(e+r)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":e(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,r)=>{const n=ZG(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(n,Ga,e,r);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((r,n)=>{const s=eK(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(s,Ga,r,n);this._request=a,a.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Ak*this._chunkMultiplier,r=new rv(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((s,a)=>{let o;try{o=tK(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,Ga,s,a,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Ak*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,r)=>{const n=YG(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(n,Ga,e,r);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,r)=>{const n=Y4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(n,Ga,e,r);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const r=this._transferred;this._transferred=e,this._transferred!==r&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=e,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=O4(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=_0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,r,n,s){const a=new rK(r||void 0,n||void 0,s||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,r){return this._promise.then(e,r)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const r=this._observers.indexOf(e);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(_0(this._state)){case kn.SUCCESS:yc(this._resolve.bind(null,this.snapshot))();break;case kn.CANCELED:case kn.ERROR:const r=this._reject;yc(r.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(_0(this._state)){case kn.RUNNING:case kn.PAUSED:e.next&&yc(e.next.bind(e,this.snapshot))();break;case kn.SUCCESS:e.complete&&yc(e.complete.bind(e))();break;case kn.CANCELED:case kn.ERROR:e.error&&yc(e.error.bind(e,this._error))();break;default:e.error&&yc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,r){this._service=e,r instanceof Qn?this._location=r:this._location=Qn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Vl(e,r)}get root(){const e=new Qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W4(this._location.path)}get storage(){return this._service}get parent(){const e=UG(this._location.path);if(e===null)return null;const r=new Qn(this._location.bucket,e);return new Vl(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw yG(e)}}function aK(t,e,r){t._throwIfRoot("uploadBytes");const n=Y4(t.storage,t._location,_j(),new Ki(e,!0),r);return t.storage.makeRequestWithTokens(n,Ga).then(s=>({metadata:s,ref:t}))}function oK(t,e,r){return t._throwIfRoot("uploadBytesResumable"),new iK(t,new Ki(e),r)}function lK(t){t._throwIfRoot("getDownloadURL");const e=QG(t.storage,t._location,_j());return t.storage.makeRequestWithTokens(e,Ga).then(r=>{if(r===null)throw vG();return r})}function cK(t){t._throwIfRoot("deleteObject");const e=JG(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Ga)}function uK(t,e){const r=zG(t._location.path,e),n=new Qn(t._location.bucket,r);return new Vl(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dK(t){return/^[A-Za-z]+:\/\//.test(t)}function hK(t,e){return new Vl(t,e)}function Q4(t,e){if(t instanceof Ej){const r=t;if(r._bucket==null)throw pG();const n=new Vl(r,r._bucket);return e!=null?Q4(n,e):n}else return e!==void 0?uK(t,e):t}function fK(t,e){if(e&&dK(e)){if(t instanceof Ej)return hK(t,e);throw Tb("To use ref(service, url), the first argument must be a Storage instance.")}else return Q4(t,e)}function Pk(t,e){const r=e==null?void 0:e[R4];return r==null?null:Qn.makeFromBucketSpec(r,t)}function mK(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:pP(s,t.app.options.projectId))}class Ej{constructor(e,r,n,s,a){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=P4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=iG,this._maxUploadRetryTime=aG,this._requests=new Set,s!=null?this._bucket=Qn.makeFromBucketSpec(s,this._host):this._bucket=Pk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qn.makeFromBucketSpec(this._url,e):this._bucket=Pk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ik("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ik("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vl(this,e)}_makeRequest(e,r,n,s,a=!0){if(this._deleted)return new wG(V4());{const o=AG(e,this._appId,n,s,r,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const Rk="@firebase/storage",Dk="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="storage";function X4(t,e,r){return t=ft(t),aK(t,e,r)}function Mk(t,e,r){return t=ft(t),oK(t,e,r)}function nv(t){return t=ft(t),lK(t)}function pK(t){return t=ft(t),cK(t)}function Sh(t,e){return t=ft(t),fK(t,e)}function gK(t=ox(),e){t=ft(t);const n=Vo(t,J4).getImmediate({identifier:e}),s=hP("storage");return s&&vK(n,...s),n}function vK(t,e,r,n={}){mK(t,e,r,n)}function xK(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ej(r,n,s,e,tc)}function yK(){Ys(new Es(J4,xK,"PUBLIC").setMultipleInstances(!0)),Fn(Rk,Dk,""),Fn(Rk,Dk,"esm2017")}yK();const Z4="@firebase/installations",Cj="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=1e4,tD=`w:${Cj}`,rD="FIS_v2",wK="https://firebaseinstallations.googleapis.com/v1",bK=60*60*1e3,_K="installations",jK="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Fl=new ec(_K,jK,NK);function nD(t){return t instanceof ks&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD({projectId:t}){return`${wK}/projects/${t}/installations`}function iD(t){return{token:t.token,requestStatus:2,expiresIn:EK(t.expiresIn),creationTime:Date.now()}}async function aD(t,e){const n=(await e.json()).error;return Fl.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function oD({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function SK(t,{refreshToken:e}){const r=oD(t);return r.append("Authorization",CK(e)),r}async function lD(t){const e=await t();return e.status>=500&&e.status<600?t():e}function EK(t){return Number(t.replace("s","000"))}function CK(t){return`${rD} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kK({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=sD(t),s=oD(t),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:r,authVersion:rD,appId:t.appId,sdkVersion:tD},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await lD(()=>fetch(n,l));if(c.ok){const u=await c.json();return{fid:u.fid||r,registrationStatus:2,refreshToken:u.refreshToken,authToken:iD(u.authToken)}}else throw await aD("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IK=/^[cdef][\w-]{21}$/,Ib="";function AK(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=PK(t);return IK.test(r)?r:Ib}catch{return Ib}}function PK(t){return TK(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=new Map;function dD(t,e){const r=Ix(t);hD(r,e),RK(r,e)}function hD(t,e){const r=uD.get(t);if(r)for(const n of r)n(e)}function RK(t,e){const r=DK();r&&r.postMessage({key:t,fid:e}),MK()}let fl=null;function DK(){return!fl&&"BroadcastChannel"in self&&(fl=new BroadcastChannel("[Firebase] FID Change"),fl.onmessage=t=>{hD(t.data.key,t.data.fid)}),fl}function MK(){uD.size===0&&fl&&(fl.close(),fl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OK="firebase-installations-database",LK=1,$l="firebase-installations-store";let j0=null;function kj(){return j0||(j0=bP(OK,LK,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($l)}}})),j0}async function sv(t,e){const r=Ix(t),s=(await kj()).transaction($l,"readwrite"),a=s.objectStore($l),o=await a.get(r);return await a.put(e,r),await s.done,(!o||o.fid!==e.fid)&&dD(t,e.fid),e}async function fD(t){const e=Ix(t),n=(await kj()).transaction($l,"readwrite");await n.objectStore($l).delete(e),await n.done}async function Ax(t,e){const r=Ix(t),s=(await kj()).transaction($l,"readwrite"),a=s.objectStore($l),o=await a.get(r),l=e(o);return l===void 0?await a.delete(r):await a.put(l,r),await s.done,l&&(!o||o.fid!==l.fid)&&dD(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(t){let e;const r=await Ax(t.appConfig,n=>{const s=VK(n),a=FK(t,s);return e=a.registrationPromise,a.installationEntry});return r.fid===Ib?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function VK(t){const e=t||{fid:AK(),registrationStatus:0};return mD(e)}function FK(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Fl.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=$K(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:UK(t)}:{installationEntry:e}}async function $K(t,e){try{const r=await kK(t,e);return sv(t.appConfig,r)}catch(r){throw nD(r)&&r.customData.serverCode===409?await fD(t.appConfig):await sv(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function UK(t){let e=await Ok(t.appConfig);for(;e.registrationStatus===1;)await cD(100),e=await Ok(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await Tj(t);return n||r}return e}function Ok(t){return Ax(t,e=>{if(!e)throw Fl.create("installation-not-found");return mD(e)})}function mD(t){return zK(t)?{fid:t.fid,registrationStatus:0}:t}function zK(t){return t.registrationStatus===1&&t.registrationTime+eD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BK({appConfig:t,heartbeatServiceProvider:e},r){const n=qK(t,r),s=SK(t,r),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:tD,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await lD(()=>fetch(n,l));if(c.ok){const u=await c.json();return iD(u)}else throw await aD("Generate Auth Token",c)}function qK(t,{fid:e}){return`${sD(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij(t,e=!1){let r;const n=await Ax(t.appConfig,a=>{if(!pD(a))throw Fl.create("not-registered");const o=a.authToken;if(!e&&GK(o))return a;if(o.requestStatus===1)return r=WK(t,e),a;{if(!navigator.onLine)throw Fl.create("app-offline");const l=YK(a);return r=HK(t,l),l}});return r?await r:n.authToken}async function WK(t,e){let r=await Lk(t.appConfig);for(;r.authToken.requestStatus===1;)await cD(100),r=await Lk(t.appConfig);const n=r.authToken;return n.requestStatus===0?Ij(t,e):n}function Lk(t){return Ax(t,e=>{if(!pD(e))throw Fl.create("not-registered");const r=e.authToken;return QK(r)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function HK(t,e){try{const r=await BK(t,e),n=Object.assign(Object.assign({},e),{authToken:r});return await sv(t.appConfig,n),r}catch(r){if(nD(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await fD(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await sv(t.appConfig,n)}throw r}}function pD(t){return t!==void 0&&t.registrationStatus===2}function GK(t){return t.requestStatus===2&&!KK(t)}function KK(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+bK}function YK(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function QK(t){return t.requestStatus===1&&t.requestTime+eD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JK(t){const e=t,{installationEntry:r,registrationPromise:n}=await Tj(e);return n?n.catch(console.error):Ij(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XK(t,e=!1){const r=t;return await ZK(r),(await Ij(r,e)).token}async function ZK(t){const{registrationPromise:e}=await Tj(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eY(t){if(!t||!t.options)throw N0("App Configuration");if(!t.name)throw N0("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw N0(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function N0(t){return Fl.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="installations",tY="installations-internal",rY=t=>{const e=t.getProvider("app").getImmediate(),r=eY(e),n=Vo(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},nY=t=>{const e=t.getProvider("app").getImmediate(),r=Vo(e,gD).getImmediate();return{getId:()=>JK(r),getToken:s=>XK(r,s)}};function sY(){Ys(new Es(gD,rY,"PUBLIC")),Ys(new Es(tY,nY,"PRIVATE"))}sY();Fn(Z4,Cj);Fn(Z4,Cj,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="analytics",iY="firebase_id",aY="origin",oY=60*1e3,lY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Aj="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=new ax("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cY={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},es=new ec("analytics","Analytics",cY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uY(t){if(!t.startsWith(Aj)){const e=es.create("invalid-gtag-resource",{gtagURL:t});return $n.warn(e.message),""}return t}function vD(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function dY(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function hY(t,e){const r=dY("firebase-js-sdk-policy",{createScriptURL:uY}),n=document.createElement("script"),s=`${Aj}?l=${t}&id=${e}`;n.src=r?r==null?void 0:r.createScriptURL(s):s,n.async=!0,document.head.appendChild(n)}function fY(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function mY(t,e,r,n,s,a){const o=n[s];try{if(o)await e[o];else{const c=(await vD(r)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(l){$n.error(l)}t("config",s,a)}async function pY(t,e,r,n,s){try{let a=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await vD(r);for(const c of o){const u=l.find(h=>h.measurementId===c),d=u&&e[u.appId];if(d)a.push(d);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",n,s||{})}catch(a){$n.error(a)}}function gY(t,e,r,n){async function s(a,...o){try{if(a==="event"){const[l,c]=o;await pY(t,e,r,l,c)}else if(a==="config"){const[l,c]=o;await mY(t,e,r,n,l,c)}else if(a==="consent"){const[l,c]=o;t("consent",l,c)}else if(a==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(a==="set"){const[l]=o;t("set",l)}else t(a,...o)}catch(l){$n.error(l)}}return s}function vY(t,e,r,n,s){let a=function(...o){window[n].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=gY(a,t,e,r),{gtagCore:a,wrappedGtag:window[s]}}function xY(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(Aj)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yY=30,wY=1e3;class bY{constructor(e={},r=wY){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const xD=new bY;function _Y(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function jY(t){var e;const{appId:r,apiKey:n}=t,s={method:"GET",headers:_Y(n)},a=lY.replace("{app-id}",r),o=await fetch(a,s);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw es.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function NY(t,e=xD,r){const{appId:n,apiKey:s,measurementId:a}=t.options;if(!n)throw es.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:n};throw es.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new CY;return setTimeout(async()=>{l.abort()},oY),yD({appId:n,apiKey:s,measurementId:a},o,l,e)}async function yD(t,{throttleEndTimeMillis:e,backoffCount:r},n,s=xD){var a;const{appId:o,measurementId:l}=t;try{await SY(n,e)}catch(c){if(l)return $n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await jY(t);return s.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!EY(u)){if(s.deleteThrottleMetadata(o),l)return $n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw c}const d=Number((a=u==null?void 0:u.customData)===null||a===void 0?void 0:a.httpStatus)===503?dC(r,s.intervalMillis,yY):dC(r,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:r+1};return s.setThrottleMetadata(o,h),$n.debug(`Calling attemptFetch again in ${d} millis`),yD(t,h,n,s)}}function SY(t,e){return new Promise((r,n)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(r,s);t.addEventListener(()=>{clearTimeout(a),n(es.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function EY(t){if(!(t instanceof ks)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class CY{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function kY(t,e,r,n,s){if(s&&s.global){t("event",r,n);return}else{const a=await e,o=Object.assign(Object.assign({},n),{send_to:a});t("event",r,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TY(){if(vP())try{await xP()}catch(t){return $n.warn(es.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return $n.warn(es.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function IY(t,e,r,n,s,a,o){var l;const c=NY(t);c.then(g=>{r[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&$n.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>$n.error(g)),e.push(c);const u=TY().then(g=>{if(g)return n.getId()}),[d,h]=await Promise.all([c,u]);xY(a)||hY(a,d.measurementId),s("js",new Date);const m=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return m[aY]="firebase",m.update=!0,h!=null&&(m[iY]=h),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AY{constructor(e){this.app=e}_delete(){return delete Eh[this.app.options.appId],Promise.resolve()}}let Eh={},Vk=[];const Fk={};let S0="dataLayer",PY="gtag",$k,wD,Uk=!1;function RY(){const t=[];if(gP()&&t.push("This is a browser extension environment."),j9()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,s)=>`(${s+1}) ${n}`).join(" "),r=es.create("invalid-analytics-context",{errorInfo:e});$n.warn(r.message)}}function DY(t,e,r){RY();const n=t.options.appId;if(!n)throw es.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)$n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw es.create("no-api-key");if(Eh[n]!=null)throw es.create("already-exists",{id:n});if(!Uk){fY(S0);const{wrappedGtag:a,gtagCore:o}=vY(Eh,Vk,Fk,S0,PY);wD=a,$k=o,Uk=!0}return Eh[n]=IY(t,Vk,Fk,e,$k,S0,r),new AY(t)}function MY(t=ox()){t=ft(t);const e=Vo(t,iv);return e.isInitialized()?e.getImmediate():OY(t)}function OY(t,e={}){const r=Vo(t,iv);if(r.isInitialized()){const s=r.getImmediate();if(Zh(e,r.getOptions()))return s;throw es.create("already-initialized")}return r.initialize({options:e})}function LY(t,e,r,n){t=ft(t),kY(wD,Eh[t.app.options.appId],e,r,n).catch(s=>$n.error(s))}const zk="@firebase/analytics",Bk="0.10.8";function VY(){Ys(new Es(iv,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return DY(n,s,r)},"PUBLIC")),Ys(new Es("analytics-internal",t,"PRIVATE")),Fn(zk,Bk),Fn(zk,Bk,"esm2017");function t(e){try{const r=e.getProvider(iv).getImmediate();return{logEvent:(n,s,a)=>LY(r,n,s,a)}}catch(r){throw es.create("interop-component-reg-failed",{reason:r})}}}VY();const FY={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},Px=_P(FY),ms=iq(Px),ve=GH(Px),Ch=gK(Px);MY(Px);const ii={USERS:"users",LISTINGS:"listings",REVIEWS:"reviews",FAVORITES:"favorites",CONVERSATIONS:"conversations",MESSAGES:"messages",REPORTS:"reports",CHAT_HISTORY:"chatHistory"},qk={actionCodeSettings:{url:`${window.location.origin}/StudyMarket/auth`,handleCodeInApp:!1}};ms.useDeviceLanguage();ms.settings.appVerificationDisabledForTesting=!1;class zd{static async createUser(e,r){const n=Ke(ve,ii.USERS,e),s={id:e,email:r.email,displayName:r.displayName||"Utilisateur",photoURL:r.photoURL||null,phone:null,isVerified:!1,verificationStatus:"pending",university:r.university||"Université non spécifiée",fieldOfStudy:r.fieldOfStudy||"Non spécifié",graduationYear:r.graduationYear||new Date().getFullYear()+2,campus:r.campus||"Campus principal",bio:null,location:"Paris, France",rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date};await xl(n,{...s,createdAt:or(),lastSeen:or()})}static async getUser(e){var r,n;try{const s=await Zn(Ke(ve,ii.USERS,e));if(!s.exists())return null;const a=s.data();return{...a,id:e,createdAt:((r=a.createdAt)==null?void 0:r.toDate())||new Date,lastSeen:((n=a.lastSeen)==null?void 0:n.toDate())||new Date}}catch(s){return console.error("Error getting user:",s),null}}static async updateUser(e,r){const n=Ke(ve,ii.USERS,e),s=Object.fromEntries(Object.entries(r).filter(([a,o])=>o!==void 0));await cr(n,{...s,updatedAt:or()})}static async updateUserStats(e,r){const n=Ke(ve,ii.USERS,e),s={};r.reviewCount!==void 0&&(s.reviewCount=r.reviewCount),r.averageRating!==void 0&&(s.rating=r.averageRating),r.transactionsCount!==void 0&&(s.transactionsCount=kk(r.transactionsCount)),r.co2Saved!==void 0&&(s.co2Saved=kk(r.co2Saved)),await cr(n,s)}static async deleteUser(e){const r=A4(ve);r.delete(Ke(ve,ii.USERS,e));const n=Mt(bt(ve,ii.LISTINGS),Vt("sellerId","==",e));(await Kt(n)).forEach(u=>{r.delete(u.ref)});const a=Mt(bt(ve,ii.FAVORITES),Vt("userId","==",e));(await Kt(a)).forEach(u=>{r.delete(u.ref)});const l=Mt(bt(ve,ii.REVIEWS),Vt("reviewerId","==",e));(await Kt(l)).forEach(u=>{r.delete(u.ref)}),await r.commit()}static async searchUsers(e,r=10){try{const n=bt(ve,ii.USERS),s=e(n,Vt("displayName",">=",e),Vt("displayName","<=",e+""),tv("displayName"),r(r));return(await Kt(s)).docs.map(o=>{var l,c;return{...o.data(),id:o.id,createdAt:((l=o.data().createdAt)==null?void 0:l.toDate())||new Date,lastSeen:((c=o.data().lastSeen)==null?void 0:c.toDate())||new Date}})}catch(n){return console.error("Error searching users:",n),[]}}static async getUsersByUniversity(e,r=20){try{const n=bt(ve,ii.USERS),s=Mt(n,Vt("university","==",e),tv("createdAt","desc"),r(r));return(await Kt(s)).docs.map(o=>{var l,c;return{...o.data(),id:o.id,createdAt:((l=o.data().createdAt)==null?void 0:l.toDate())||new Date,lastSeen:((c=o.data().lastSeen)==null?void 0:c.toDate())||new Date}})}catch(n){return console.error("Error getting users by university:",n),[]}}}const bD=p.createContext(void 0),Zt=()=>{const t=p.useContext(bD);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},$Y=({children:t})=>{const[e,r]=p.useState(null),[n,s]=p.useState(null),[a,o]=p.useState(!0),l=async(w,b)=>{try{await zd.getUser(w.uid)||await zd.createUser(w.uid,{email:w.email,displayName:w.displayName||"Utilisateur",photoURL:w.photoURL||void 0,university:b==null?void 0:b.university,fieldOfStudy:b==null?void 0:b.fieldOfStudy,graduationYear:b==null?void 0:b.graduationYear,campus:b==null?void 0:b.campus,...b});const v=await zd.getUser(w.uid);s(v)}catch(y){console.error("Error creating/updating user profile:",y),ne.error("Erreur lors de la création du profil")}},c=async()=>{if(e)try{const w=await zd.getUser(e.uid);s(w)}catch(w){console.error("Error refreshing user profile:",w)}},u=async(w,b)=>{try{await $7(ms,w,b),ne.success("Connexion réussie !")}catch(y){let v="Erreur de connexion";if(y instanceof Error){const _=y;switch(_.code){case"auth/user-not-found":v="Aucun compte trouvé avec cet email";break;case"auth/wrong-password":v="Mot de passe incorrect";break;case"auth/invalid-email":v="Format d'email invalide";break;case"auth/too-many-requests":v="Trop de tentatives. Réessayez plus tard";break;default:v=_.message}}throw ne.error(v),y}},d=async(w,b,y,v)=>{try{const{user:_}=await KP(ms,w,b);await rf(_,{displayName:y}),await l(_,v),ne.success("Compte créé avec succès !")}catch(_){let E="Erreur lors de la création du compte";if(_ instanceof Error){const C=_;switch(C.code){case"auth/email-already-in-use":E="Cet email est déjà utilisé";break;case"auth/weak-password":E="Le mot de passe est trop faible";break;case"auth/invalid-email":E="Format d'email invalide";break;default:E=C.message}}throw ne.error(E),_}},h=async()=>{try{const w=new Gi;w.setCustomParameters({prompt:"select_account"}),w.addScope("email"),w.addScope("profile"),await yB(ms,w)}catch(w){throw console.error("Google sign in error:",w),w instanceof Error&&ne.error("Erreur de connexion Google : "+w.message),w}},m=async()=>{try{await G7(ms),s(null),ne.success("Déconnexion réussie !")}catch(w){throw ne.error("Erreur lors de la déconnexion"),w}},g=async w=>{if(!(!e||!n))try{await zd.updateUser(e.uid,w),s({...n,...w}),ne.success("Profil mis à jour !")}catch(b){throw console.error("Error updating profile:",b),ne.error("Erreur lors de la mise à jour du profil"),b}};p.useEffect(()=>{const w=H7(ms,async y=>{r(y),y?await l(y):s(null),o(!1)});return(async()=>{try{const y=await bB(ms);y!=null&&y.user&&(await l(y.user),ne.success("Connexion Google réussie !"))}catch(y){if(console.error("Redirect result error:",y),y instanceof Error){const v=y;v.code!=="auth/null-user"&&ne.error("Erreur de connexion Google : "+v.message)}}})(),w},[]);const x={currentUser:e,userProfile:n,loading:a,signIn:u,signUp:d,signInWithGoogle:h,logout:m,updateUserProfile:g,refreshUserProfile:c};return i.jsx(bD.Provider,{value:x,children:!a&&t})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_D=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...zY,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:_D("lucide",s),...l},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(t,e)=>{const r=p.forwardRef(({className:n,...s},a)=>p.createElement(BY,{ref:a,iconNode:e,className:_D(`lucide-${UY(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=se("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=se("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=se("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=se("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=se("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=se("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=se("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=se("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=se("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=se("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KY=se("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=se("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=se("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=se("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=se("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=se("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=se("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=se("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=se("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JY=se("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=se("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=se("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=se("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=se("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=se("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=se("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eQ=se("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=se("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=se("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=se("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nQ=se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=se("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=se("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=se("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=se("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=se("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iQ=se("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=se("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=se("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=se("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=se("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=se("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=se("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=se("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=se("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=se("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=se("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=se("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=se("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=se("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=se("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=se("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=se("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=se("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=se("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=se("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=se("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=se("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=se("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=se("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=se("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=se("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=se("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=se("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=se("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=se("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function xQ(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Ox(...t){return e=>t.forEach(r=>xQ(r,e))}function Je(...t){return p.useCallback(Ox(...t),t)}var xa=p.forwardRef((t,e)=>{const{children:r,...n}=t,s=p.Children.toArray(r),a=s.find(wQ);if(a){const o=a.props.children,l=s.map(c=>c===a?p.Children.count(o)>1?p.Children.only(null):p.isValidElement(o)?o.props.children:null:c);return i.jsx(Rb,{...n,ref:e,children:p.isValidElement(o)?p.cloneElement(o,void 0,l):null})}return i.jsx(Rb,{...n,ref:e,children:r})});xa.displayName="Slot";var Rb=p.forwardRef((t,e)=>{const{children:r,...n}=t;if(p.isValidElement(r)){const s=_Q(r);return p.cloneElement(r,{...bQ(n,r.props),ref:e?Ox(e,s):s})}return p.Children.count(r)>1?p.Children.only(null):null});Rb.displayName="SlotClone";var yQ=({children:t})=>i.jsx(i.Fragment,{children:t});function wQ(t){return p.isValidElement(t)&&t.type===yQ}function bQ(t,e){const r={...e};for(const n in e){const s=t[n],a=e[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{a(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...t,...r}}function _Q(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function $D(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=$D(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function jQ(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=$D(t))&&(n&&(n+=" "),n+=e);return n}const Xk=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,Zk=jQ,Lx=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return Zk(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=a==null?void 0:a[u];if(d===null)return null;const m=Xk(d)||Xk(h);return s[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:m,...g}=d;return Object.entries(g).every(x=>{let[w,b]=x;return Array.isArray(b)?b.includes({...a,...l}[w]):{...a,...l}[w]===b})?[...u,h,m]:u},[]);return Zk(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};function UD(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=UD(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function NQ(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=UD(t))&&(n&&(n+=" "),n+=e);return n}const Mj="-",SQ=t=>{const e=CQ(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(Mj);return l[0]===""&&l.length!==1&&l.shift(),zD(l,e)||EQ(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},zD=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?zD(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(Mj);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},e2=/^\[(.+)\]$/,EQ=t=>{if(e2.test(t)){const e=e2.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},CQ=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return TQ(Object.entries(t.classGroups),r).forEach(([a,o])=>{Db(o,n,a,e)}),n},Db=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:t2(e,s);a.classGroupId=r;return}if(typeof s=="function"){if(kQ(s)){Db(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,o])=>{Db(o,t2(e,a),r,n)})})},t2=(t,e)=>{let r=t;return e.split(Mj).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},kQ=t=>t.isThemeGetter,TQ=(t,e)=>e?t.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[r,s]}):t,IQ=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(a,o)=>{r.set(a,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return s(a,o),o},set(a,o){r.has(a)?r.set(a,o):s(a,o)}}},BD="!",AQ=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],a=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let b=0;b<l.length;b++){let y=l[b];if(u===0){if(y===s&&(n||l.slice(b,b+a)===e)){c.push(l.slice(d,b)),d=b+a;continue}if(y==="/"){h=b;continue}}y==="["?u++:y==="]"&&u--}const m=c.length===0?l:l.substring(d),g=m.startsWith(BD),x=g?m.substring(1):m,w=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:w}};return r?l=>r({className:l,parseClassName:o}):o},PQ=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},RQ=t=>({cache:IQ(t.cacheSize),parseClassName:AQ(t),...SQ(t)}),DQ=/\s+/,MQ=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(DQ);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:g}=r(u);let x=!!g,w=n(x?m.substring(0,g):m);if(!w){if(!x){l=u+(l.length>0?" "+l:l);continue}if(w=n(m),!w){l=u+(l.length>0?" "+l:l);continue}x=!1}const b=PQ(d).join(":"),y=h?b+BD:b,v=y+w;if(a.includes(v))continue;a.push(v);const _=s(w,x);for(let E=0;E<_.length;++E){const C=_[E];a.push(y+C)}l=u+(l.length>0?" "+l:l)}return l};function OQ(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=qD(e))&&(n&&(n+=" "),n+=r);return n}const qD=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=qD(t[n]))&&(r&&(r+=" "),r+=e);return r};function LQ(t,...e){let r,n,s,a=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return r=RQ(u),n=r.cache.get,s=r.cache.set,a=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=MQ(c,r);return s(c,d),d}return function(){return a(OQ.apply(null,arguments))}}const Wt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},WD=/^\[(?:([a-z-]+):)?(.+)\]$/i,VQ=/^\d+\/\d+$/,FQ=new Set(["px","full","screen"]),$Q=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,UQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,BQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fi=t=>lu(t)||FQ.has(t)||VQ.test(t),Ra=t=>ad(t,"length",XQ),lu=t=>!!t&&!Number.isNaN(Number(t)),T0=t=>ad(t,"number",lu),Bd=t=>!!t&&Number.isInteger(Number(t)),WQ=t=>t.endsWith("%")&&lu(t.slice(0,-1)),rt=t=>WD.test(t),Da=t=>$Q.test(t),HQ=new Set(["length","size","percentage"]),GQ=t=>ad(t,HQ,HD),KQ=t=>ad(t,"position",HD),YQ=new Set(["image","url"]),QQ=t=>ad(t,YQ,eJ),JQ=t=>ad(t,"",ZQ),qd=()=>!0,ad=(t,e,r)=>{const n=WD.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},XQ=t=>UQ.test(t)&&!zQ.test(t),HD=()=>!1,ZQ=t=>BQ.test(t),eJ=t=>qQ.test(t),tJ=()=>{const t=Wt("colors"),e=Wt("spacing"),r=Wt("blur"),n=Wt("brightness"),s=Wt("borderColor"),a=Wt("borderRadius"),o=Wt("borderSpacing"),l=Wt("borderWidth"),c=Wt("contrast"),u=Wt("grayscale"),d=Wt("hueRotate"),h=Wt("invert"),m=Wt("gap"),g=Wt("gradientColorStops"),x=Wt("gradientColorStopPositions"),w=Wt("inset"),b=Wt("margin"),y=Wt("opacity"),v=Wt("padding"),_=Wt("saturate"),E=Wt("scale"),C=Wt("sepia"),D=Wt("skew"),T=Wt("space"),k=Wt("translate"),R=()=>["auto","contain","none"],S=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",rt,e],P=()=>[rt,e],N=()=>["",Fi,Ra],V=()=>["auto",lu,rt],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",rt],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[lu,rt];return{cacheSize:500,separator:":",theme:{colors:[qd],spacing:[Fi,Ra],blur:["none","",Da,rt],brightness:X(),borderColor:[t],borderRadius:["none","","full",Da,rt],borderSpacing:P(),borderWidth:N(),contrast:X(),grayscale:W(),hueRotate:X(),invert:W(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[WQ,Ra],inset:A(),margin:A(),opacity:X(),padding:P(),saturate:X(),scale:X(),sepia:W(),skew:X(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",rt]}],container:["container"],columns:[{columns:[Da]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),rt]}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bd,rt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",rt]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Bd,rt]}],"grid-cols":[{"grid-cols":[qd]}],"col-start-end":[{col:["auto",{span:["full",Bd,rt]},rt]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[qd]}],"row-start-end":[{row:["auto",{span:[Bd,rt]},rt]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",rt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",rt,e]}],"min-w":[{"min-w":[rt,e,"min","max","fit"]}],"max-w":[{"max-w":[rt,e,"none","full","min","max","fit","prose",{screen:[Da]},Da]}],h:[{h:[rt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[rt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[rt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[rt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Da,Ra]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",T0]}],"font-family":[{font:[qd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",rt]}],"line-clamp":[{"line-clamp":["none",lu,T0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Fi,rt]}],"list-image":[{"list-image":["none",rt]}],"list-style-type":[{list:["none","disc","decimal",rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Fi,Ra]}],"underline-offset":[{"underline-offset":["auto",Fi,rt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),KQ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",GQ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},QQ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:H()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[Fi,rt]}],"outline-w":[{outline:[Fi,Ra]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Fi,Ra]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Da,JQ]}],"shadow-color":[{shadow:[qd]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Da,rt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",rt]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",rt]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Bd,rt]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",rt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Fi,Ra,T0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},rJ=LQ(tJ);function Le(...t){return rJ(NQ(t))}const Mb=Lx("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-full px-3 text-xs",lg:"h-10 rounded-full px-8",icon:"h-9 w-9 rounded-full"}},defaultVariants:{variant:"default",size:"default"}}),$=p.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},a)=>{const o=n?xa:"button";return i.jsx(o,{className:Le(Mb({variant:e,size:r,className:t})),ref:a,...s})});$.displayName="Button";const we=p.forwardRef(({className:t,type:e,...r},n)=>i.jsx("input",{type:e,className:Le("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));we.displayName="Input";function pe(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function nJ(t,e){const r=p.createContext(e),n=a=>{const{children:o,...l}=a,c=p.useMemo(()=>l,Object.values(l));return i.jsx(r.Provider,{value:c,children:o})};n.displayName=t+"Provider";function s(a){const o=p.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[n,s]}function ls(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];const u=h=>{var y;const{scope:m,children:g,...x}=h,w=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,b=p.useMemo(()=>x,Object.values(x));return i.jsx(w.Provider,{value:b,children:g})};u.displayName=a+"Provider";function d(h,m){var w;const g=((w=m==null?void 0:m[t])==null?void 0:w[c])||l,x=p.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,sJ(s,...e)]}function sJ(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function _r(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function is({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,s]=iJ({defaultProp:e,onChange:r}),a=t!==void 0,o=a?t:n,l=_r(r),c=p.useCallback(u=>{if(a){const h=typeof u=="function"?u(t):u;h!==t&&l(h)}else s(u)},[a,t,s,l]);return[o,c]}function iJ({defaultProp:t,onChange:e}){const r=p.useState(t),[n]=r,s=p.useRef(n),a=_r(e);return p.useEffect(()=>{s.current!==n&&(a(n),s.current=n)},[n,s,a]),r}var aJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],De=aJ.reduce((t,e)=>{const r=p.forwardRef((n,s)=>{const{asChild:a,...o}=n,l=a?xa:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function GD(t,e){t&&Qu.flushSync(()=>t.dispatchEvent(e))}function oJ(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(h){const{scope:m,children:g,...x}=h,w=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>x,Object.values(x));return i.jsx(w.Provider,{value:b,children:g})}function d(h,m){const g=(m==null?void 0:m[t][c])||l,x=p.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,lJ(s,...e)]}function lJ(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function cm(t){const e=t+"CollectionProvider",[r,n]=oJ(e),[s,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:x,children:w}=g,b=Ce.useRef(null),y=Ce.useRef(new Map).current;return i.jsx(s,{scope:x,itemMap:y,collectionRef:b,children:w})};o.displayName=e;const l=t+"CollectionSlot",c=Ce.forwardRef((g,x)=>{const{scope:w,children:b}=g,y=a(l,w),v=Je(x,y.collectionRef);return i.jsx(xa,{ref:v,children:b})});c.displayName=l;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=Ce.forwardRef((g,x)=>{const{scope:w,children:b,...y}=g,v=Ce.useRef(null),_=Je(x,v),E=a(u,w);return Ce.useEffect(()=>(E.itemMap.set(v,{ref:v,...y}),()=>void E.itemMap.delete(v))),i.jsx(xa,{[d]:"",ref:_,children:b})});h.displayName=u;function m(g){const x=a(t+"CollectionConsumer",g);return Ce.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((E,C)=>y.indexOf(E.ref.current)-y.indexOf(C.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},m,n]}var cJ=p.createContext(void 0);function oc(t){const e=p.useContext(cJ);return t||e||"ltr"}function uJ(t,e=globalThis==null?void 0:globalThis.document){const r=_r(t);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var dJ="DismissableLayer",Ob="dismissableLayer.update",hJ="dismissableLayer.pointerDownOutside",fJ="dismissableLayer.focusOutside",r2,KD=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),um=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=p.useContext(KD),[d,h]=p.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),x=Je(e,T=>h(T)),w=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=w.indexOf(b),v=d?w.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,E=v>=y,C=gJ(T=>{const k=T.target,R=[...u.branches].some(S=>S.contains(k));!E||R||(s==null||s(T),o==null||o(T),T.defaultPrevented||l==null||l())},m),D=vJ(T=>{const k=T.target;[...u.branches].some(S=>S.contains(k))||(a==null||a(T),o==null||o(T),T.defaultPrevented||l==null||l())},m);return uJ(T=>{v===u.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(r2=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),n2(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=r2)}},[d,m,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),n2())},[d,u]),p.useEffect(()=>{const T=()=>g({});return document.addEventListener(Ob,T),()=>document.removeEventListener(Ob,T)},[]),i.jsx(De.div,{...c,ref:x,style:{pointerEvents:_?E?"auto":"none":void 0,...t.style},onFocusCapture:pe(t.onFocusCapture,D.onFocusCapture),onBlurCapture:pe(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:pe(t.onPointerDownCapture,C.onPointerDownCapture)})});um.displayName=dJ;var mJ="DismissableLayerBranch",pJ=p.forwardRef((t,e)=>{const r=p.useContext(KD),n=p.useRef(null),s=Je(e,n);return p.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),i.jsx(De.div,{...t,ref:s})});pJ.displayName=mJ;function gJ(t,e=globalThis==null?void 0:globalThis.document){const r=_r(t),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){YD(hJ,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function vJ(t,e=globalThis==null?void 0:globalThis.document){const r=_r(t),n=p.useRef(!1);return p.useEffect(()=>{const s=a=>{a.target&&!n.current&&YD(fJ,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function n2(){const t=new CustomEvent(Ob);document.dispatchEvent(t)}function YD(t,e,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?GD(s,a):s.dispatchEvent(a)}var I0=0;function Vx(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??s2()),document.body.insertAdjacentElement("beforeend",t[1]??s2()),I0++,()=>{I0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),I0--}},[])}function s2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var A0="focusScope.autoFocusOnMount",P0="focusScope.autoFocusOnUnmount",i2={bubbles:!1,cancelable:!0},xJ="FocusScope",dm=p.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,c]=p.useState(null),u=_r(s),d=_r(a),h=p.useRef(null),m=Je(e,w=>c(w)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let w=function(_){if(g.paused||!l)return;const E=_.target;l.contains(E)?h.current=E:Oa(h.current,{select:!0})},b=function(_){if(g.paused||!l)return;const E=_.relatedTarget;E!==null&&(l.contains(E)||Oa(h.current,{select:!0}))},y=function(_){if(document.activeElement===document.body)for(const C of _)C.removedNodes.length>0&&Oa(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",b);const v=new MutationObserver(y);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",b),v.disconnect()}}},[n,l,g.paused]),p.useEffect(()=>{if(l){o2.add(g);const w=document.activeElement;if(!l.contains(w)){const y=new CustomEvent(A0,i2);l.addEventListener(A0,u),l.dispatchEvent(y),y.defaultPrevented||(yJ(NJ(QD(l)),{select:!0}),document.activeElement===w&&Oa(l))}return()=>{l.removeEventListener(A0,u),setTimeout(()=>{const y=new CustomEvent(P0,i2);l.addEventListener(P0,d),l.dispatchEvent(y),y.defaultPrevented||Oa(w??document.body,{select:!0}),l.removeEventListener(P0,d),o2.remove(g)},0)}}},[l,u,d,g]);const x=p.useCallback(w=>{if(!r&&!n||g.paused)return;const b=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,y=document.activeElement;if(b&&y){const v=w.currentTarget,[_,E]=wJ(v);_&&E?!w.shiftKey&&y===E?(w.preventDefault(),r&&Oa(_,{select:!0})):w.shiftKey&&y===_&&(w.preventDefault(),r&&Oa(E,{select:!0})):y===v&&w.preventDefault()}},[r,n,g.paused]);return i.jsx(De.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});dm.displayName=xJ;function yJ(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Oa(n,{select:e}),document.activeElement!==r)return}function wJ(t){const e=QD(t),r=a2(e,t),n=a2(e.reverse(),t);return[r,n]}function QD(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function a2(t,e){for(const r of t)if(!bJ(r,{upTo:e}))return r}function bJ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function _J(t){return t instanceof HTMLInputElement&&"select"in t}function Oa(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&_J(t)&&e&&t.select()}}var o2=jJ();function jJ(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=l2(t,e),t.unshift(e)},remove(e){var r;t=l2(t,e),(r=t[0])==null||r.resume()}}}function l2(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function NJ(t){return t.filter(e=>e.tagName!=="A")}var Rr=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},SJ=HT.useId||(()=>{}),EJ=0;function ts(t){const[e,r]=p.useState(SJ());return Rr(()=>{r(n=>n??String(EJ++))},[t]),e?`radix-${e}`:""}const CJ=["top","right","bottom","left"],No=Math.min,Gn=Math.max,ov=Math.round,vp=Math.floor,So=t=>({x:t,y:t}),kJ={left:"right",right:"left",bottom:"top",top:"bottom"},TJ={start:"end",end:"start"};function Lb(t,e,r){return Gn(t,No(e,r))}function ya(t,e){return typeof t=="function"?t(e):t}function wa(t){return t.split("-")[0]}function od(t){return t.split("-")[1]}function Oj(t){return t==="x"?"y":"x"}function Lj(t){return t==="y"?"height":"width"}function Eo(t){return["top","bottom"].includes(wa(t))?"y":"x"}function Vj(t){return Oj(Eo(t))}function IJ(t,e,r){r===void 0&&(r=!1);const n=od(t),s=Vj(t),a=Lj(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=lv(o)),[o,lv(o)]}function AJ(t){const e=lv(t);return[Vb(t),e,Vb(e)]}function Vb(t){return t.replace(/start|end/g,e=>TJ[e])}function PJ(t,e,r){const n=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?s:n:e?n:s;case"left":case"right":return e?a:o;default:return[]}}function RJ(t,e,r,n){const s=od(t);let a=PJ(wa(t),r==="start",n);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(Vb)))),a}function lv(t){return t.replace(/left|right|bottom|top/g,e=>kJ[e])}function DJ(t){return{top:0,right:0,bottom:0,left:0,...t}}function JD(t){return typeof t!="number"?DJ(t):{top:t,right:t,bottom:t,left:t}}function cv(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function c2(t,e,r){let{reference:n,floating:s}=t;const a=Eo(e),o=Vj(e),l=Lj(o),c=wa(e),u=a==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let g;switch(c){case"top":g={x:d,y:n.y-s.height};break;case"bottom":g={x:d,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:h};break;case"left":g={x:n.x-s.width,y:h};break;default:g={x:n.x,y:n.y}}switch(od(e)){case"start":g[o]-=m*(r&&u?-1:1);break;case"end":g[o]+=m*(r&&u?-1:1);break}return g}const MJ=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=c2(u,n,c),m=n,g={},x=0;for(let w=0;w<l.length;w++){const{name:b,fn:y}=l[w],{x:v,y:_,data:E,reset:C}=await y({x:d,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});d=v??d,h=_??h,g={...g,[b]:{...g[b],...E}},C&&x<=50&&(x++,typeof C=="object"&&(C.placement&&(m=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):C.rects),{x:d,y:h}=c2(u,m,c)),w=-1)}return{x:d,y:h,placement:m,strategy:s,middlewareData:g}};async function gf(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=ya(e,t),x=JD(g),b=l[m?h==="floating"?"reference":"floating":h],y=cv(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(b)))==null||r?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),E=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},C=cv(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:_,strategy:c}):v);return{top:(y.top-C.top+x.top)/E.y,bottom:(C.bottom-y.bottom+x.bottom)/E.y,left:(y.left-C.left+x.left)/E.x,right:(C.right-y.right+x.right)/E.x}}const OJ=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=ya(t,e)||{};if(u==null)return{};const h=JD(d),m={x:r,y:n},g=Vj(s),x=Lj(g),w=await o.getDimensions(u),b=g==="y",y=b?"top":"left",v=b?"bottom":"right",_=b?"clientHeight":"clientWidth",E=a.reference[x]+a.reference[g]-m[g]-a.floating[x],C=m[g]-a.reference[g],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=D?D[_]:0;(!T||!await(o.isElement==null?void 0:o.isElement(D)))&&(T=l.floating[_]||a.floating[x]);const k=E/2-C/2,R=T/2-w[x]/2-1,S=No(h[y],R),A=No(h[v],R),P=S,N=T-w[x]-A,V=T/2-w[x]/2+k,U=Lb(P,V,N),H=!c.arrow&&od(s)!=null&&V!==U&&a.reference[x]/2-(V<P?S:A)-w[x]/2<0,F=H?V<P?V-P:V-N:0;return{[g]:m[g]+F,data:{[g]:U,centerOffset:V-U-F,...H&&{alignmentOffset:F}},reset:H}}}),LJ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:w=!0,...b}=ya(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const y=wa(s),v=Eo(l),_=wa(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=m||(_||!w?[lv(l)]:AJ(l)),D=x!=="none";!m&&D&&C.push(...RJ(l,w,x,E));const T=[l,...C],k=await gf(e,b),R=[];let S=((n=a.flip)==null?void 0:n.overflows)||[];if(d&&R.push(k[y]),h){const V=IJ(s,o,E);R.push(k[V[0]],k[V[1]])}if(S=[...S,{placement:s,overflows:R}],!R.every(V=>V<=0)){var A,P;const V=(((A=a.flip)==null?void 0:A.index)||0)+1,U=T[V];if(U)return{data:{index:V,overflows:S},reset:{placement:U}};let H=(P=S.filter(F=>F.overflows[0]<=0).sort((F,L)=>F.overflows[1]-L.overflows[1])[0])==null?void 0:P.placement;if(!H)switch(g){case"bestFit":{var N;const F=(N=S.filter(L=>{if(D){const W=Eo(L.placement);return W===v||W==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(W=>W>0).reduce((W,z)=>W+z,0)]).sort((L,W)=>L[1]-W[1])[0])==null?void 0:N[0];F&&(H=F);break}case"initialPlacement":H=l;break}if(s!==H)return{reset:{placement:H}}}return{}}}};function u2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function d2(t){return CJ.some(e=>t[e]>=0)}const VJ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=ya(t,e);switch(n){case"referenceHidden":{const a=await gf(e,{...s,elementContext:"reference"}),o=u2(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:d2(o)}}}case"escaped":{const a=await gf(e,{...s,altBoundary:!0}),o=u2(a,r.floating);return{data:{escapedOffsets:o,escaped:d2(o)}}}default:return{}}}}};async function FJ(t,e){const{placement:r,platform:n,elements:s}=t,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=wa(r),l=od(r),c=Eo(r)==="y",u=["left","top"].includes(o)?-1:1,d=a&&c?-1:1,h=ya(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x=="number"&&(g=l==="end"?x*-1:x),c?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const $J=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:a,placement:o,middlewareData:l}=e,c=await FJ(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},UJ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:y,y:v}=b;return{x:y,y:v}}},...c}=ya(t,e),u={x:r,y:n},d=await gf(e,c),h=Eo(wa(s)),m=Oj(h);let g=u[m],x=u[h];if(a){const b=m==="y"?"top":"left",y=m==="y"?"bottom":"right",v=g+d[b],_=g-d[y];g=Lb(v,g,_)}if(o){const b=h==="y"?"top":"left",y=h==="y"?"bottom":"right",v=x+d[b],_=x-d[y];x=Lb(v,x,_)}const w=l.fn({...e,[m]:g,[h]:x});return{...w,data:{x:w.x-r,y:w.y-n,enabled:{[m]:a,[h]:o}}}}}},zJ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ya(t,e),d={x:r,y:n},h=Eo(s),m=Oj(h);let g=d[m],x=d[h];const w=ya(l,e),b=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const _=m==="y"?"height":"width",E=a.reference[m]-a.floating[_]+b.mainAxis,C=a.reference[m]+a.reference[_]-b.mainAxis;g<E?g=E:g>C&&(g=C)}if(u){var y,v;const _=m==="y"?"width":"height",E=["top","left"].includes(wa(s)),C=a.reference[h]-a.floating[_]+(E&&((y=o.offset)==null?void 0:y[h])||0)+(E?0:b.crossAxis),D=a.reference[h]+a.reference[_]+(E?0:((v=o.offset)==null?void 0:v[h])||0)-(E?b.crossAxis:0);x<C?x=C:x>D&&(x=D)}return{[m]:g,[h]:x}}}},BJ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=ya(t,e),d=await gf(e,u),h=wa(s),m=od(s),g=Eo(s)==="y",{width:x,height:w}=a.floating;let b,y;h==="top"||h==="bottom"?(b=h,y=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=h,b=m==="end"?"top":"bottom");const v=w-d.top-d.bottom,_=x-d.left-d.right,E=No(w-d[b],v),C=No(x-d[y],_),D=!e.middlewareData.shift;let T=E,k=C;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(k=_),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(T=v),D&&!m){const S=Gn(d.left,0),A=Gn(d.right,0),P=Gn(d.top,0),N=Gn(d.bottom,0);g?k=x-2*(S!==0||A!==0?S+A:Gn(d.left,d.right)):T=w-2*(P!==0||N!==0?P+N:Gn(d.top,d.bottom))}await c({...e,availableWidth:k,availableHeight:T});const R=await o.getDimensions(l.floating);return x!==R.width||w!==R.height?{reset:{rects:!0}}:{}}}};function Fx(){return typeof window<"u"}function ld(t){return XD(t)?(t.nodeName||"").toLowerCase():"#document"}function rs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Di(t){var e;return(e=(XD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function XD(t){return Fx()?t instanceof Node||t instanceof rs(t).Node:!1}function Js(t){return Fx()?t instanceof Element||t instanceof rs(t).Element:!1}function Ti(t){return Fx()?t instanceof HTMLElement||t instanceof rs(t).HTMLElement:!1}function h2(t){return!Fx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof rs(t).ShadowRoot}function hm(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=Xs(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function qJ(t){return["table","td","th"].includes(ld(t))}function $x(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Fj(t){const e=$j(),r=Js(t)?Xs(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function WJ(t){let e=Co(t);for(;Ti(e)&&!Mu(e);){if(Fj(e))return e;if($x(e))return null;e=Co(e)}return null}function $j(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Mu(t){return["html","body","#document"].includes(ld(t))}function Xs(t){return rs(t).getComputedStyle(t)}function Ux(t){return Js(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Co(t){if(ld(t)==="html")return t;const e=t.assignedSlot||t.parentNode||h2(t)&&t.host||Di(t);return h2(e)?e.host:e}function ZD(t){const e=Co(t);return Mu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ti(e)&&hm(e)?e:ZD(e)}function vf(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=ZD(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),o=rs(s);if(a){const l=Fb(o);return e.concat(o,o.visualViewport||[],hm(s)?s:[],l&&r?vf(l):[])}return e.concat(s,vf(s,[],r))}function Fb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function eM(t){const e=Xs(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Ti(t),a=s?t.offsetWidth:r,o=s?t.offsetHeight:n,l=ov(r)!==a||ov(n)!==o;return l&&(r=a,n=o),{width:r,height:n,$:l}}function Uj(t){return Js(t)?t:t.contextElement}function cu(t){const e=Uj(t);if(!Ti(e))return So(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:a}=eM(e);let o=(a?ov(r.width):r.width)/n,l=(a?ov(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const HJ=So(0);function tM(t){const e=rs(t);return!$j()||!e.visualViewport?HJ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function GJ(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==rs(t)?!1:e}function ql(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),a=Uj(t);let o=So(1);e&&(n?Js(n)&&(o=cu(n)):o=cu(t));const l=GJ(a,r,n)?tM(a):So(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(a){const m=rs(a),g=n&&Js(n)?rs(n):n;let x=m,w=Fb(x);for(;w&&n&&g!==x;){const b=cu(w),y=w.getBoundingClientRect(),v=Xs(w),_=y.left+(w.clientLeft+parseFloat(v.paddingLeft))*b.x,E=y.top+(w.clientTop+parseFloat(v.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,h*=b.y,c+=_,u+=E,x=rs(w),w=Fb(x)}}return cv({width:d,height:h,x:c,y:u})}function KJ(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const a=s==="fixed",o=Di(n),l=e?$x(e.floating):!1;if(n===o||l&&a)return r;let c={scrollLeft:0,scrollTop:0},u=So(1);const d=So(0),h=Ti(n);if((h||!h&&!a)&&((ld(n)!=="body"||hm(o))&&(c=Ux(n)),Ti(n))){const m=ql(n);u=cu(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x,y:r.y*u.y-c.scrollTop*u.y+d.y}}function YJ(t){return Array.from(t.getClientRects())}function $b(t,e){const r=Ux(t).scrollLeft;return e?e.left+r:ql(Di(t)).left+r}function QJ(t){const e=Di(t),r=Ux(t),n=t.ownerDocument.body,s=Gn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=Gn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+$b(t);const l=-r.scrollTop;return Xs(n).direction==="rtl"&&(o+=Gn(e.clientWidth,n.clientWidth)-s),{width:s,height:a,x:o,y:l}}function JJ(t,e){const r=rs(t),n=Di(t),s=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=$j();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}function XJ(t,e){const r=ql(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,a=Ti(t)?cu(t):So(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,u=n*a.y;return{width:o,height:l,x:c,y:u}}function f2(t,e,r){let n;if(e==="viewport")n=JJ(t,r);else if(e==="document")n=QJ(Di(t));else if(Js(e))n=XJ(e,r);else{const s=tM(t);n={...e,x:e.x-s.x,y:e.y-s.y}}return cv(n)}function rM(t,e){const r=Co(t);return r===e||!Js(r)||Mu(r)?!1:Xs(r).position==="fixed"||rM(r,e)}function ZJ(t,e){const r=e.get(t);if(r)return r;let n=vf(t,[],!1).filter(l=>Js(l)&&ld(l)!=="body"),s=null;const a=Xs(t).position==="fixed";let o=a?Co(t):t;for(;Js(o)&&!Mu(o);){const l=Xs(o),c=Fj(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||hm(o)&&!c&&rM(t,o))?n=n.filter(d=>d!==o):s=l,o=Co(o)}return e.set(t,n),n}function eX(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const o=[...r==="clippingAncestors"?$x(e)?[]:ZJ(e,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const h=f2(e,d,s);return u.top=Gn(h.top,u.top),u.right=No(h.right,u.right),u.bottom=No(h.bottom,u.bottom),u.left=Gn(h.left,u.left),u},f2(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function tX(t){const{width:e,height:r}=eM(t);return{width:e,height:r}}function rX(t,e,r){const n=Ti(e),s=Di(e),a=r==="fixed",o=ql(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=So(0);if(n||!n&&!a)if((ld(e)!=="body"||hm(s))&&(l=Ux(e)),n){const g=ql(e,!0,a,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&(c.x=$b(s));let u=0,d=0;if(s&&!n&&!a){const g=s.getBoundingClientRect();d=g.top+l.scrollTop,u=g.left+l.scrollLeft-$b(s,g)}const h=o.left+l.scrollLeft-c.x-u,m=o.top+l.scrollTop-c.y-d;return{x:h,y:m,width:o.width,height:o.height}}function R0(t){return Xs(t).position==="static"}function m2(t,e){if(!Ti(t)||Xs(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Di(t)===r&&(r=r.ownerDocument.body),r}function nM(t,e){const r=rs(t);if($x(t))return r;if(!Ti(t)){let s=Co(t);for(;s&&!Mu(s);){if(Js(s)&&!R0(s))return s;s=Co(s)}return r}let n=m2(t,e);for(;n&&qJ(n)&&R0(n);)n=m2(n,e);return n&&Mu(n)&&R0(n)&&!Fj(n)?r:n||WJ(t)||r}const nX=async function(t){const e=this.getOffsetParent||nM,r=this.getDimensions,n=await r(t.floating);return{reference:rX(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function sX(t){return Xs(t).direction==="rtl"}const iX={convertOffsetParentRelativeRectToViewportRelativeRect:KJ,getDocumentElement:Di,getClippingRect:eX,getOffsetParent:nM,getElementRects:nX,getClientRects:YJ,getDimensions:tX,getScale:cu,isElement:Js,isRTL:sX};function aX(t,e){let r=null,n;const s=Di(t);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const{left:u,top:d,width:h,height:m}=t.getBoundingClientRect();if(l||e(),!h||!m)return;const g=vp(d),x=vp(s.clientWidth-(u+h)),w=vp(s.clientHeight-(d+m)),b=vp(u),v={rootMargin:-g+"px "+-x+"px "+-w+"px "+-b+"px",threshold:Gn(0,No(1,c))||1};let _=!0;function E(C){const D=C[0].intersectionRatio;if(D!==c){if(!_)return o();D?o(!1,D):n=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{r=new IntersectionObserver(E,{...v,root:s.ownerDocument})}catch{r=new IntersectionObserver(E,v)}r.observe(t)}return o(!0),a}function oX(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Uj(t),d=s||a?[...u?vf(u):[],...vf(e)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),a&&y.addEventListener("resize",r)});const h=u&&l?aX(u,r):null;let m=-1,g=null;o&&(g=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=g)==null||_.observe(e)})),r()}),u&&!c&&g.observe(u),g.observe(e));let x,w=c?ql(t):null;c&&b();function b(){const y=ql(t);w&&(y.x!==w.x||y.y!==w.y||y.width!==w.width||y.height!==w.height)&&r(),w=y,x=requestAnimationFrame(b)}return r(),()=>{var y;d.forEach(v=>{s&&v.removeEventListener("scroll",r),a&&v.removeEventListener("resize",r)}),h==null||h(),(y=g)==null||y.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const lX=$J,cX=UJ,uX=LJ,dX=BJ,hX=VJ,p2=OJ,fX=zJ,mX=(t,e,r)=>{const n=new Map,s={platform:iX,...r},a={...s.platform,_c:n};return MJ(t,e,{...s,platform:a})};var ng=typeof document<"u"?p.useLayoutEffect:p.useEffect;function uv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!uv(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&t.$$typeof)&&!uv(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function sM(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function g2(t,e){const r=sM(t);return Math.round(e*r)/r}function D0(t){const e=p.useRef(t);return ng(()=>{e.current=t}),e}function pX(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=p.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=p.useState(n);uv(m,n)||g(n);const[x,w]=p.useState(null),[b,y]=p.useState(null),v=p.useCallback(L=>{L!==D.current&&(D.current=L,w(L))},[]),_=p.useCallback(L=>{L!==T.current&&(T.current=L,y(L))},[]),E=a||x,C=o||b,D=p.useRef(null),T=p.useRef(null),k=p.useRef(d),R=c!=null,S=D0(c),A=D0(s),P=D0(u),N=p.useCallback(()=>{if(!D.current||!T.current)return;const L={placement:e,strategy:r,middleware:m};A.current&&(L.platform=A.current),mX(D.current,T.current,L).then(W=>{const z={...W,isPositioned:P.current!==!1};V.current&&!uv(k.current,z)&&(k.current=z,Qu.flushSync(()=>{h(z)}))})},[m,e,r,A,P]);ng(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,h(L=>({...L,isPositioned:!1})))},[u]);const V=p.useRef(!1);ng(()=>(V.current=!0,()=>{V.current=!1}),[]),ng(()=>{if(E&&(D.current=E),C&&(T.current=C),E&&C){if(S.current)return S.current(E,C,N);N()}},[E,C,N,S,R]);const U=p.useMemo(()=>({reference:D,floating:T,setReference:v,setFloating:_}),[v,_]),H=p.useMemo(()=>({reference:E,floating:C}),[E,C]),F=p.useMemo(()=>{const L={position:r,left:0,top:0};if(!H.floating)return L;const W=g2(H.floating,d.x),z=g2(H.floating,d.y);return l?{...L,transform:"translate("+W+"px, "+z+"px)",...sM(H.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:W,top:z}},[r,l,H.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:N,refs:U,elements:H,floatingStyles:F}),[d,N,U,H,F])}const gX=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?p2({element:n.current,padding:s}).fn(r):{}:n?p2({element:n,padding:s}).fn(r):{}}}},vX=(t,e)=>({...lX(t),options:[t,e]}),xX=(t,e)=>({...cX(t),options:[t,e]}),yX=(t,e)=>({...fX(t),options:[t,e]}),wX=(t,e)=>({...uX(t),options:[t,e]}),bX=(t,e)=>({...dX(t),options:[t,e]}),_X=(t,e)=>({...hX(t),options:[t,e]}),jX=(t,e)=>({...gX(t),options:[t,e]});var NX="Arrow",iM=p.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...a}=t;return i.jsx(De.svg,{...a,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});iM.displayName=NX;var SX=iM;function EX(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(h){const{scope:m,children:g,...x}=h,w=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>x,Object.values(x));return i.jsx(w.Provider,{value:b,children:g})}function d(h,m){const g=(m==null?void 0:m[t][c])||l,x=p.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,CX(s,...e)]}function CX(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function zx(t){const[e,r]=p.useState(void 0);return Rr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var zj="Popper",[aM,cd]=EX(zj),[kX,oM]=aM(zj),lM=t=>{const{__scopePopper:e,children:r}=t,[n,s]=p.useState(null);return i.jsx(kX,{scope:e,anchor:n,onAnchorChange:s,children:r})};lM.displayName=zj;var cM="PopperAnchor",uM=p.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,a=oM(cM,r),o=p.useRef(null),l=Je(e,o);return p.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:i.jsx(De.div,{...s,ref:l})});uM.displayName=cM;var Bj="PopperContent",[TX,IX]=aM(Bj),dM=p.forwardRef((t,e)=>{var _e,Xe,te,me,K,le;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:x,...w}=t,b=oM(Bj,r),[y,v]=p.useState(null),_=Je(e,q=>v(q)),[E,C]=p.useState(null),D=zx(E),T=(D==null?void 0:D.width)??0,k=(D==null?void 0:D.height)??0,R=n+(a!=="center"?"-"+a:""),S=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},A=Array.isArray(u)?u:[u],P=A.length>0,N={padding:S,boundary:A.filter(PX),altBoundary:P},{refs:V,floatingStyles:U,placement:H,isPositioned:F,middlewareData:L}=pX({strategy:"fixed",placement:R,whileElementsMounted:(...q)=>oX(...q,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[vX({mainAxis:s+k,alignmentAxis:o}),c&&xX({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?yX():void 0,...N}),c&&wX({...N}),bX({...N,apply:({elements:q,rects:Z,availableWidth:fe,availableHeight:Ee})=>{const{width:We,height:O}=Z.reference,B=q.floating.style;B.setProperty("--radix-popper-available-width",`${fe}px`),B.setProperty("--radix-popper-available-height",`${Ee}px`),B.setProperty("--radix-popper-anchor-width",`${We}px`),B.setProperty("--radix-popper-anchor-height",`${O}px`)}}),E&&jX({element:E,padding:l}),RX({arrowWidth:T,arrowHeight:k}),m&&_X({strategy:"referenceHidden",...N})]}),[W,z]=mM(H),X=_r(x);Rr(()=>{F&&(X==null||X())},[F,X]);const oe=(_e=L.arrow)==null?void 0:_e.x,Se=(Xe=L.arrow)==null?void 0:Xe.y,Ze=((te=L.arrow)==null?void 0:te.centerOffset)!==0,[mt,st]=p.useState();return Rr(()=>{y&&st(window.getComputedStyle(y).zIndex)},[y]),i.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:F?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:mt,"--radix-popper-transform-origin":[(me=L.transformOrigin)==null?void 0:me.x,(K=L.transformOrigin)==null?void 0:K.y].join(" "),...((le=L.hide)==null?void 0:le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(TX,{scope:r,placedSide:W,onArrowChange:C,arrowX:oe,arrowY:Se,shouldHideArrow:Ze,children:i.jsx(De.div,{"data-side":W,"data-align":z,...w,ref:_,style:{...w.style,animation:F?void 0:"none"}})})})});dM.displayName=Bj;var hM="PopperArrow",AX={top:"bottom",right:"left",bottom:"top",left:"right"},fM=p.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,a=IX(hM,n),o=AX[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(SX,{...s,ref:r,style:{...s.style,display:"block"}})})});fM.displayName=hM;function PX(t){return t!==null}var RX=t=>({name:"transformOrigin",options:t,fn(e){var b,y,v;const{placement:r,rects:n,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=mM(r),h={start:"0%",center:"50%",end:"100%"}[d],m=(((y=s.arrow)==null?void 0:y.x)??0)+l/2,g=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let x="",w="";return u==="bottom"?(x=o?h:`${m}px`,w=`${-c}px`):u==="top"?(x=o?h:`${m}px`,w=`${n.floating.height+c}px`):u==="right"?(x=`${-c}px`,w=o?h:`${g}px`):u==="left"&&(x=`${n.floating.width+c}px`,w=o?h:`${g}px`),{data:{x,y:w}}}});function mM(t){const[e,r="center"]=t.split("-");return[e,r]}var qj=lM,Bx=uM,Wj=dM,Hj=fM,DX="Portal",fm=p.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,a]=p.useState(!1);Rr(()=>a(!0),[]);const o=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?c8.createPortal(i.jsx(De.div,{...n,ref:e}),o):null});fm.displayName=DX;function MX(t,e){return p.useReducer((r,n)=>e[r][n]??r,t)}var Kr=t=>{const{present:e,children:r}=t,n=OX(e),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),a=Je(n.ref,LX(s));return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:a}):null};Kr.displayName="Presence";function OX(t){const[e,r]=p.useState(),n=p.useRef({}),s=p.useRef(t),a=p.useRef("none"),o=t?"mounted":"unmounted",[l,c]=MX(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=xp(n.current);a.current=l==="mounted"?u:"none"},[l]),Rr(()=>{const u=n.current,d=s.current;if(d!==t){const m=a.current,g=xp(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Rr(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=g=>{const w=xp(n.current).includes(g.animationName);if(g.target===e&&w&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=g=>{g.target===e&&(a.current=xp(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function xp(t){return(t==null?void 0:t.animationName)||"none"}function LX(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function VX(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(h){const{scope:m,children:g,...x}=h,w=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>x,Object.values(x));return i.jsx(w.Provider,{value:b,children:g})}function d(h,m){const g=(m==null?void 0:m[t][c])||l,x=p.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,FX(s,...e)]}function FX(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var M0="rovingFocusGroup.onEntryFocus",$X={bubbles:!1,cancelable:!0},qx="RovingFocusGroup",[Ub,pM,UX]=cm(qx),[zX,Wx]=VX(qx,[UX]),[BX,qX]=zX(qx),gM=p.forwardRef((t,e)=>i.jsx(Ub.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(Ub.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(WX,{...t,ref:e})})}));gM.displayName=qx;var WX=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,m=p.useRef(null),g=Je(e,m),x=oc(a),[w=null,b]=is({prop:o,defaultProp:l,onChange:c}),[y,v]=p.useState(!1),_=_r(u),E=pM(r),C=p.useRef(!1),[D,T]=p.useState(0);return p.useEffect(()=>{const k=m.current;if(k)return k.addEventListener(M0,_),()=>k.removeEventListener(M0,_)},[_]),i.jsx(BX,{scope:r,orientation:n,dir:x,loop:s,currentTabStopId:w,onItemFocus:p.useCallback(k=>b(k),[b]),onItemShiftTab:p.useCallback(()=>v(!0),[]),onFocusableItemAdd:p.useCallback(()=>T(k=>k+1),[]),onFocusableItemRemove:p.useCallback(()=>T(k=>k-1),[]),children:i.jsx(De.div,{tabIndex:y||D===0?-1:0,"data-orientation":n,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:pe(t.onMouseDown,()=>{C.current=!0}),onFocus:pe(t.onFocus,k=>{const R=!C.current;if(k.target===k.currentTarget&&R&&!y){const S=new CustomEvent(M0,$X);if(k.currentTarget.dispatchEvent(S),!S.defaultPrevented){const A=E().filter(H=>H.focusable),P=A.find(H=>H.active),N=A.find(H=>H.id===w),U=[P,N,...A].filter(Boolean).map(H=>H.ref.current);yM(U,d)}}C.current=!1}),onBlur:pe(t.onBlur,()=>v(!1))})})}),vM="RovingFocusGroupItem",xM=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:a,...o}=t,l=ts(),c=a||l,u=qX(vM,r),d=u.currentTabStopId===c,h=pM(r),{onFocusableItemAdd:m,onFocusableItemRemove:g}=u;return p.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),i.jsx(Ub.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:i.jsx(De.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:pe(t.onMouseDown,x=>{n?u.onItemFocus(c):x.preventDefault()}),onFocus:pe(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:pe(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const w=KX(x,u.orientation,u.dir);if(w!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let y=h().filter(v=>v.focusable).map(v=>v.ref.current);if(w==="last")y.reverse();else if(w==="prev"||w==="next"){w==="prev"&&y.reverse();const v=y.indexOf(x.currentTarget);y=u.loop?YX(y,v+1):y.slice(v+1)}setTimeout(()=>yM(y))}})})})});xM.displayName=vM;var HX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function GX(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function KX(t,e,r){const n=GX(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return HX[n]}function yM(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function YX(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var wM=gM,bM=xM,QX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},wc=new WeakMap,yp=new WeakMap,wp={},O0=0,_M=function(t){return t&&(t.host||_M(t.parentNode))},JX=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=_M(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},XX=function(t,e,r,n){var s=JX(e,Array.isArray(t)?t:[t]);wp[r]||(wp[r]=new WeakMap);var a=wp[r],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var g=m.getAttribute(n),x=g!==null&&g!=="false",w=(wc.get(m)||0)+1,b=(a.get(m)||0)+1;wc.set(m,w),a.set(m,b),o.push(m),w===1&&x&&yp.set(m,!0),b===1&&m.setAttribute(r,"true"),x||m.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",m,y)}})};return d(e),l.clear(),O0++,function(){o.forEach(function(h){var m=wc.get(h)-1,g=a.get(h)-1;wc.set(h,m),a.set(h,g),m||(yp.has(h)||h.removeAttribute(n),yp.delete(h)),g||h.removeAttribute(r)}),O0--,O0||(wc=new WeakMap,wc=new WeakMap,yp=new WeakMap,wp={})}},Hx=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=QX(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),XX(n,s,r,"aria-hidden")):function(){return null}},sg="right-scroll-bar-position",ig="width-before-scroll-bar",ZX="with-scroll-bars-hidden",eZ="--removed-body-scroll-bar-size";function L0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function tZ(t,e){var r=p.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var rZ=typeof window<"u"?p.useLayoutEffect:p.useEffect,v2=new WeakMap;function nZ(t,e){var r=tZ(null,function(n){return t.forEach(function(s){return L0(s,n)})});return rZ(function(){var n=v2.get(r);if(n){var s=new Set(n),a=new Set(t),o=r.current;s.forEach(function(l){a.has(l)||L0(l,null)}),a.forEach(function(l){s.has(l)||L0(l,o)})}v2.set(r,t)},[t]),r}function sZ(t){return t}function iZ(t,e){e===void 0&&(e=sZ);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(a){var o=e(a,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return s}function aZ(t){t===void 0&&(t={});var e=iZ(null);return e.options=ci({async:!0,ssr:!1},t),e}var jM=function(t){var e=t.sideCar,r=Wf(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,ci({},r))};jM.isSideCarExport=!0;function oZ(t,e){return t.useMedium(e),jM}var NM=aZ(),V0=function(){},Gx=p.forwardRef(function(t,e){var r=p.useRef(null),n=p.useState({onScrollCapture:V0,onWheelCapture:V0,onTouchMoveCapture:V0}),s=n[0],a=n[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,g=t.noIsolation,x=t.inert,w=t.allowPinchZoom,b=t.as,y=b===void 0?"div":b,v=t.gapMode,_=Wf(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=m,C=nZ([r,e]),D=ci(ci({},_),s);return p.createElement(p.Fragment,null,d&&p.createElement(E,{sideCar:NM,removeScrollBar:u,shards:h,noIsolation:g,inert:x,setCallbacks:a,allowPinchZoom:!!w,lockRef:r,gapMode:v}),o?p.cloneElement(p.Children.only(l),ci(ci({},D),{ref:C})):p.createElement(y,ci({},D,{className:c,ref:C}),l))});Gx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gx.classNames={fullWidth:ig,zeroRight:sg};var lZ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cZ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=lZ();return e&&t.setAttribute("nonce",e),t}function uZ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function dZ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var hZ=function(){var t=0,e=null;return{add:function(r){t==0&&(e=cZ())&&(uZ(e,r),dZ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},fZ=function(){var t=hZ();return function(e,r){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},SM=function(){var t=fZ(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},mZ={left:0,top:0,right:0,gap:0},F0=function(t){return parseInt(t||"",10)||0},pZ=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[F0(r),F0(n),F0(s)]},gZ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return mZ;var e=pZ(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},vZ=SM(),uu="data-scroll-locked",xZ=function(t,e,r,n){var s=t.left,a=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(ZX,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(uu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sg,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ig,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(sg," .").concat(sg,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ig," .").concat(ig,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(uu,`] {
    `).concat(eZ,": ").concat(l,`px;
  }
`)},x2=function(){var t=parseInt(document.body.getAttribute(uu)||"0",10);return isFinite(t)?t:0},yZ=function(){p.useEffect(function(){return document.body.setAttribute(uu,(x2()+1).toString()),function(){var t=x2()-1;t<=0?document.body.removeAttribute(uu):document.body.setAttribute(uu,t.toString())}},[])},wZ=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;yZ();var a=p.useMemo(function(){return gZ(s)},[s]);return p.createElement(vZ,{styles:xZ(a,!e,s,r?"":"!important")})},zb=!1;if(typeof window<"u")try{var bp=Object.defineProperty({},"passive",{get:function(){return zb=!0,!0}});window.addEventListener("test",bp,bp),window.removeEventListener("test",bp,bp)}catch{zb=!1}var bc=zb?{passive:!1}:!1,bZ=function(t){return t.tagName==="TEXTAREA"},EM=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!bZ(t)&&r[e]==="visible")},_Z=function(t){return EM(t,"overflowY")},jZ=function(t){return EM(t,"overflowX")},y2=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=CM(t,n);if(s){var a=kM(t,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},NZ=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},SZ=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},CM=function(t,e){return t==="v"?_Z(e):jZ(e)},kM=function(t,e){return t==="v"?NZ(e):SZ(e)},EZ=function(t,e){return t==="h"&&e==="rtl"?-1:1},CZ=function(t,e,r,n,s){var a=EZ(t,window.getComputedStyle(e).direction),o=a*n,l=r.target,c=e.contains(l),u=!1,d=o>0,h=0,m=0;do{var g=kM(t,l),x=g[0],w=g[1],b=g[2],y=w-b-a*x;(x||y)&&CM(t,l)&&(h+=y,m+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},_p=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},w2=function(t){return[t.deltaX,t.deltaY]},b2=function(t){return t&&"current"in t?t.current:t},kZ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},TZ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},IZ=0,_c=[];function AZ(t){var e=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(IZ++)[0],a=p.useState(SM)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var w=Uz([t.lockRef.current],(t.shards||[]).map(b2),!0).filter(Boolean);return w.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(w,b){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var y=_p(w),v=r.current,_="deltaX"in w?w.deltaX:v[0]-y[0],E="deltaY"in w?w.deltaY:v[1]-y[1],C,D=w.target,T=Math.abs(_)>Math.abs(E)?"h":"v";if("touches"in w&&T==="h"&&D.type==="range")return!1;var k=y2(T,D);if(!k)return!0;if(k?C=T:(C=T==="v"?"h":"v",k=y2(T,D)),!k)return!1;if(!n.current&&"changedTouches"in w&&(_||E)&&(n.current=C),!C)return!0;var R=n.current||C;return CZ(R,b,w,R==="h"?_:E,!0)},[]),c=p.useCallback(function(w){var b=w;if(!(!_c.length||_c[_c.length-1]!==a)){var y="deltaY"in b?w2(b):_p(b),v=e.current.filter(function(C){return C.name===b.type&&(C.target===b.target||b.target===C.shadowParent)&&kZ(C.delta,y)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var _=(o.current.shards||[]).map(b2).filter(Boolean).filter(function(C){return C.contains(b.target)}),E=_.length>0?l(b,_[0]):!o.current.noIsolation;E&&b.cancelable&&b.preventDefault()}}},[]),u=p.useCallback(function(w,b,y,v){var _={name:w,delta:b,target:y,should:v,shadowParent:PZ(y)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(E){return E!==_})},1)},[]),d=p.useCallback(function(w){r.current=_p(w),n.current=void 0},[]),h=p.useCallback(function(w){u(w.type,w2(w),w.target,l(w,t.lockRef.current))},[]),m=p.useCallback(function(w){u(w.type,_p(w),w.target,l(w,t.lockRef.current))},[]);p.useEffect(function(){return _c.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,bc),document.addEventListener("touchmove",c,bc),document.addEventListener("touchstart",d,bc),function(){_c=_c.filter(function(w){return w!==a}),document.removeEventListener("wheel",c,bc),document.removeEventListener("touchmove",c,bc),document.removeEventListener("touchstart",d,bc)}},[]);var g=t.removeScrollBar,x=t.inert;return p.createElement(p.Fragment,null,x?p.createElement(a,{styles:TZ(s)}):null,g?p.createElement(wZ,{gapMode:t.gapMode}):null)}function PZ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const RZ=oZ(NM,AZ);var mm=p.forwardRef(function(t,e){return p.createElement(Gx,ci({},t,{ref:e,sideCar:RZ}))});mm.classNames=Gx.classNames;var Bb=["Enter"," "],DZ=["ArrowDown","PageUp","Home"],TM=["ArrowUp","PageDown","End"],MZ=[...DZ,...TM],OZ={ltr:[...Bb,"ArrowRight"],rtl:[...Bb,"ArrowLeft"]},LZ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pm="Menu",[xf,VZ,FZ]=cm(pm),[lc,IM]=ls(pm,[FZ,cd,Wx]),Kx=cd(),AM=Wx(),[$Z,cc]=lc(pm),[UZ,gm]=lc(pm),PM=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:a,modal:o=!0}=t,l=Kx(e),[c,u]=p.useState(null),d=p.useRef(!1),h=_r(a),m=oc(s);return p.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),i.jsx(qj,{...l,children:i.jsx($Z,{scope:e,open:r,onOpenChange:h,content:c,onContentChange:u,children:i.jsx(UZ,{scope:e,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:o,children:n})})})};PM.displayName=pm;var zZ="MenuAnchor",Gj=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Kx(r);return i.jsx(Bx,{...s,...n,ref:e})});Gj.displayName=zZ;var Kj="MenuPortal",[BZ,RM]=lc(Kj,{forceMount:void 0}),DM=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,a=cc(Kj,e);return i.jsx(BZ,{scope:e,forceMount:r,children:i.jsx(Kr,{present:r||a.open,children:i.jsx(fm,{asChild:!0,container:s,children:n})})})};DM.displayName=Kj;var bs="MenuContent",[qZ,Yj]=lc(bs),MM=p.forwardRef((t,e)=>{const r=RM(bs,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,a=cc(bs,t.__scopeMenu),o=gm(bs,t.__scopeMenu);return i.jsx(xf.Provider,{scope:t.__scopeMenu,children:i.jsx(Kr,{present:n||a.open,children:i.jsx(xf.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx(WZ,{...s,ref:e}):i.jsx(HZ,{...s,ref:e})})})})}),WZ=p.forwardRef((t,e)=>{const r=cc(bs,t.__scopeMenu),n=p.useRef(null),s=Je(e,n);return p.useEffect(()=>{const a=n.current;if(a)return Hx(a)},[]),i.jsx(Qj,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:pe(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),HZ=p.forwardRef((t,e)=>{const r=cc(bs,t.__scopeMenu);return i.jsx(Qj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Qj=p.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:x,...w}=t,b=cc(bs,r),y=gm(bs,r),v=Kx(r),_=AM(r),E=VZ(r),[C,D]=p.useState(null),T=p.useRef(null),k=Je(e,T,b.onContentChange),R=p.useRef(0),S=p.useRef(""),A=p.useRef(0),P=p.useRef(null),N=p.useRef("right"),V=p.useRef(0),U=x?mm:p.Fragment,H=x?{as:xa,allowPinchZoom:!0}:void 0,F=W=>{var _e,Xe;const z=S.current+W,X=E().filter(te=>!te.disabled),oe=document.activeElement,Se=(_e=X.find(te=>te.ref.current===oe))==null?void 0:_e.textValue,Ze=X.map(te=>te.textValue),mt=see(Ze,z,Se),st=(Xe=X.find(te=>te.textValue===mt))==null?void 0:Xe.ref.current;(function te(me){S.current=me,window.clearTimeout(R.current),me!==""&&(R.current=window.setTimeout(()=>te(""),1e3))})(z),st&&setTimeout(()=>st.focus())};p.useEffect(()=>()=>window.clearTimeout(R.current),[]),Vx();const L=p.useCallback(W=>{var X,oe;return N.current===((X=P.current)==null?void 0:X.side)&&aee(W,(oe=P.current)==null?void 0:oe.area)},[]);return i.jsx(qZ,{scope:r,searchRef:S,onItemEnter:p.useCallback(W=>{L(W)&&W.preventDefault()},[L]),onItemLeave:p.useCallback(W=>{var z;L(W)||((z=T.current)==null||z.focus(),D(null))},[L]),onTriggerLeave:p.useCallback(W=>{L(W)&&W.preventDefault()},[L]),pointerGraceTimerRef:A,onPointerGraceIntentChange:p.useCallback(W=>{P.current=W},[]),children:i.jsx(U,{...H,children:i.jsx(dm,{asChild:!0,trapped:s,onMountAutoFocus:pe(a,W=>{var z;W.preventDefault(),(z=T.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(um,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:i.jsx(wM,{asChild:!0,..._,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:C,onCurrentTabStopIdChange:D,onEntryFocus:pe(c,W=>{y.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Wj,{role:"menu","aria-orientation":"vertical","data-state":JM(b.open),"data-radix-menu-content":"",dir:y.dir,...v,...w,ref:k,style:{outline:"none",...w.style},onKeyDown:pe(w.onKeyDown,W=>{const X=W.target.closest("[data-radix-menu-content]")===W.currentTarget,oe=W.ctrlKey||W.altKey||W.metaKey,Se=W.key.length===1;X&&(W.key==="Tab"&&W.preventDefault(),!oe&&Se&&F(W.key));const Ze=T.current;if(W.target!==Ze||!MZ.includes(W.key))return;W.preventDefault();const st=E().filter(_e=>!_e.disabled).map(_e=>_e.ref.current);TM.includes(W.key)&&st.reverse(),ree(st)}),onBlur:pe(t.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(R.current),S.current="")}),onPointerMove:pe(t.onPointerMove,yf(W=>{const z=W.target,X=V.current!==W.clientX;if(W.currentTarget.contains(z)&&X){const oe=W.clientX>V.current?"right":"left";N.current=oe,V.current=W.clientX}}))})})})})})})});MM.displayName=bs;var GZ="MenuGroup",Jj=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return i.jsx(De.div,{role:"group",...n,ref:e})});Jj.displayName=GZ;var KZ="MenuLabel",OM=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return i.jsx(De.div,{...n,ref:e})});OM.displayName=KZ;var dv="MenuItem",_2="menu.itemSelect",Yx=p.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,a=p.useRef(null),o=gm(dv,t.__scopeMenu),l=Yj(dv,t.__scopeMenu),c=Je(e,a),u=p.useRef(!1),d=()=>{const h=a.current;if(!r&&h){const m=new CustomEvent(_2,{bubbles:!0,cancelable:!0});h.addEventListener(_2,g=>n==null?void 0:n(g),{once:!0}),GD(h,m),m.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(LM,{...s,ref:c,disabled:r,onClick:pe(t.onClick,d),onPointerDown:h=>{var m;(m=t.onPointerDown)==null||m.call(t,h),u.current=!0},onPointerUp:pe(t.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:pe(t.onKeyDown,h=>{const m=l.searchRef.current!=="";r||m&&h.key===" "||Bb.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Yx.displayName=dv;var LM=p.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...a}=t,o=Yj(dv,r),l=AM(r),c=p.useRef(null),u=Je(e,c),[d,h]=p.useState(!1),[m,g]=p.useState("");return p.useEffect(()=>{const x=c.current;x&&g((x.textContent??"").trim())},[a.children]),i.jsx(xf.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:i.jsx(bM,{asChild:!0,...l,focusable:!n,children:i.jsx(De.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:u,onPointerMove:pe(t.onPointerMove,yf(x=>{n?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:pe(t.onPointerLeave,yf(x=>o.onItemLeave(x))),onFocus:pe(t.onFocus,()=>h(!0)),onBlur:pe(t.onBlur,()=>h(!1))})})})}),YZ="MenuCheckboxItem",VM=p.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return i.jsx(BM,{scope:t.__scopeMenu,checked:r,children:i.jsx(Yx,{role:"menuitemcheckbox","aria-checked":hv(r)?"mixed":r,...s,ref:e,"data-state":Zj(r),onSelect:pe(s.onSelect,()=>n==null?void 0:n(hv(r)?!0:!r),{checkForDefaultPrevented:!1})})})});VM.displayName=YZ;var FM="MenuRadioGroup",[QZ,JZ]=lc(FM,{value:void 0,onValueChange:()=>{}}),$M=p.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,a=_r(n);return i.jsx(QZ,{scope:t.__scopeMenu,value:r,onValueChange:a,children:i.jsx(Jj,{...s,ref:e})})});$M.displayName=FM;var UM="MenuRadioItem",zM=p.forwardRef((t,e)=>{const{value:r,...n}=t,s=JZ(UM,t.__scopeMenu),a=r===s.value;return i.jsx(BM,{scope:t.__scopeMenu,checked:a,children:i.jsx(Yx,{role:"menuitemradio","aria-checked":a,...n,ref:e,"data-state":Zj(a),onSelect:pe(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});zM.displayName=UM;var Xj="MenuItemIndicator",[BM,XZ]=lc(Xj,{checked:!1}),qM=p.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,a=XZ(Xj,r);return i.jsx(Kr,{present:n||hv(a.checked)||a.checked===!0,children:i.jsx(De.span,{...s,ref:e,"data-state":Zj(a.checked)})})});qM.displayName=Xj;var ZZ="MenuSeparator",WM=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return i.jsx(De.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});WM.displayName=ZZ;var eee="MenuArrow",HM=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Kx(r);return i.jsx(Hj,{...s,...n,ref:e})});HM.displayName=eee;var tee="MenuSub",[Kfe,GM]=lc(tee),ih="MenuSubTrigger",KM=p.forwardRef((t,e)=>{const r=cc(ih,t.__scopeMenu),n=gm(ih,t.__scopeMenu),s=GM(ih,t.__scopeMenu),a=Yj(ih,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),i.jsx(Gj,{asChild:!0,...u,children:i.jsx(LM,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":JM(r.open),...t,ref:Ox(e,s.onTriggerChange),onClick:h=>{var m;(m=t.onClick)==null||m.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:pe(t.onPointerMove,yf(h=>{a.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:pe(t.onPointerLeave,yf(h=>{var g,x;d();const m=(g=r.content)==null?void 0:g.getBoundingClientRect();if(m){const w=(x=r.content)==null?void 0:x.dataset.side,b=w==="right",y=b?-5:5,v=m[b?"left":"right"],_=m[b?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x:v,y:m.top},{x:_,y:m.top},{x:_,y:m.bottom},{x:v,y:m.bottom}],side:w}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:pe(t.onKeyDown,h=>{var g;const m=a.searchRef.current!=="";t.disabled||m&&h.key===" "||OZ[n.dir].includes(h.key)&&(r.onOpenChange(!0),(g=r.content)==null||g.focus(),h.preventDefault())})})})});KM.displayName=ih;var YM="MenuSubContent",QM=p.forwardRef((t,e)=>{const r=RM(bs,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,a=cc(bs,t.__scopeMenu),o=gm(bs,t.__scopeMenu),l=GM(YM,t.__scopeMenu),c=p.useRef(null),u=Je(e,c);return i.jsx(xf.Provider,{scope:t.__scopeMenu,children:i.jsx(Kr,{present:n||a.open,children:i.jsx(xf.Slot,{scope:t.__scopeMenu,children:i.jsx(Qj,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:pe(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:pe(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:pe(t.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),m=LZ[o.dir].includes(d.key);h&&m&&(a.onOpenChange(!1),(g=l.trigger)==null||g.focus(),d.preventDefault())})})})})})});QM.displayName=YM;function JM(t){return t?"open":"closed"}function hv(t){return t==="indeterminate"}function Zj(t){return hv(t)?"indeterminate":t?"checked":"unchecked"}function ree(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function nee(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function see(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=nee(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function iee(t,e){const{x:r,y:n}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a].x,c=e[a].y,u=e[o].x,d=e[o].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function aee(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return iee(r,e)}function yf(t){return e=>e.pointerType==="mouse"?t(e):void 0}var oee=PM,lee=Gj,cee=DM,uee=MM,dee=Jj,hee=OM,fee=Yx,mee=VM,pee=$M,gee=zM,vee=qM,xee=WM,yee=HM,wee=KM,bee=QM,eN="DropdownMenu",[_ee,Yfe]=ls(eN,[IM]),Sn=IM(),[jee,XM]=_ee(eN),ZM=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=Sn(e),u=p.useRef(null),[d=!1,h]=is({prop:s,defaultProp:a,onChange:o});return i.jsx(jee,{scope:e,triggerId:ts(),triggerRef:u,contentId:ts(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),modal:l,children:i.jsx(oee,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};ZM.displayName=eN;var eO="DropdownMenuTrigger",tO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,a=XM(eO,r),o=Sn(r);return i.jsx(lee,{asChild:!0,...o,children:i.jsx(De.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Ox(e,a.triggerRef),onPointerDown:pe(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:pe(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});tO.displayName=eO;var Nee="DropdownMenuPortal",rO=t=>{const{__scopeDropdownMenu:e,...r}=t,n=Sn(e);return i.jsx(cee,{...n,...r})};rO.displayName=Nee;var nO="DropdownMenuContent",sO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=XM(nO,r),a=Sn(r),o=p.useRef(!1);return i.jsx(uee,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...n,ref:e,onCloseAutoFocus:pe(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:pe(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sO.displayName=nO;var See="DropdownMenuGroup",Eee=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Sn(r);return i.jsx(dee,{...s,...n,ref:e})});Eee.displayName=See;var Cee="DropdownMenuLabel",iO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Sn(r);return i.jsx(hee,{...s,...n,ref:e})});iO.displayName=Cee;var kee="DropdownMenuItem",aO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Sn(r);return i.jsx(fee,{...s,...n,ref:e})});aO.displayName=kee;var Tee="DropdownMenuCheckboxItem",oO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Sn(r);return i.jsx(mee,{...s,...n,ref:e})});oO.displayName=Tee;var Iee="DropdownMenuRadioGroup",Aee=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Sn(r);return i.jsx(pee,{...s,...n,ref:e})});Aee.displayName=Iee;var Pee="DropdownMenuRadioItem",lO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Sn(r);return i.jsx(gee,{...s,...n,ref:e})});lO.displayName=Pee;var Ree="DropdownMenuItemIndicator",cO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Sn(r);return i.jsx(vee,{...s,...n,ref:e})});cO.displayName=Ree;var Dee="DropdownMenuSeparator",uO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Sn(r);return i.jsx(xee,{...s,...n,ref:e})});uO.displayName=Dee;var Mee="DropdownMenuArrow",Oee=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Sn(r);return i.jsx(yee,{...s,...n,ref:e})});Oee.displayName=Mee;var Lee="DropdownMenuSubTrigger",dO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Sn(r);return i.jsx(wee,{...s,...n,ref:e})});dO.displayName=Lee;var Vee="DropdownMenuSubContent",hO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Sn(r);return i.jsx(bee,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hO.displayName=Vee;var Fee=ZM,$ee=tO,Uee=rO,fO=sO,mO=iO,pO=aO,gO=oO,vO=lO,xO=cO,yO=uO,wO=dO,bO=hO;function $o(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}var zee=["color"],Bee=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=$o(t,zee);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),p.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),qee=["color"],tN=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=$o(t,qee);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),p.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Wee=["color"],_O=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=$o(t,Wee);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),p.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Hee=["color"],Gee=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=$o(t,Hee);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),p.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Kee=["color"],jO=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=$o(t,Kee);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),p.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Yee=["color"],Qee=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=$o(t,Yee);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),p.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Jee=["color"],Xee=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=$o(t,Jee);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),p.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Zee=["color"],ete=p.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=$o(t,Zee);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),p.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:n}))});const qb=Fee,Wb=$ee,tte=p.forwardRef(({className:t,inset:e,children:r,...n},s)=>i.jsxs(wO,{ref:s,className:Le("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...n,children:[r,i.jsx(jO,{className:"ml-auto h-4 w-4"})]}));tte.displayName=wO.displayName;const rte=p.forwardRef(({className:t,...e},r)=>i.jsx(bO,{ref:r,className:Le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));rte.displayName=bO.displayName;const fv=p.forwardRef(({className:t,sideOffset:e=4,...r},n)=>i.jsx(Uee,{children:i.jsx(fO,{ref:n,sideOffset:e,className:Le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));fv.displayName=fO.displayName;const Ct=p.forwardRef(({className:t,inset:e,...r},n)=>i.jsx(pO,{ref:n,className:Le("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));Ct.displayName=pO.displayName;const nte=p.forwardRef(({className:t,children:e,checked:r,...n},s)=>i.jsxs(gO,{ref:s,className:Le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(xO,{children:i.jsx(tN,{className:"h-4 w-4"})})}),e]}));nte.displayName=gO.displayName;const ste=p.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(vO,{ref:n,className:Le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(xO,{children:i.jsx(ete,{className:"h-4 w-4 fill-current"})})}),e]}));ste.displayName=vO.displayName;const ite=p.forwardRef(({className:t,inset:e,...r},n)=>i.jsx(mO,{ref:n,className:Le("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));ite.displayName=mO.displayName;const ds=p.forwardRef(({className:t,...e},r)=>i.jsx(yO,{ref:r,className:Le("-mx-1 my-1 h-px bg-muted",t),...e}));ds.displayName=yO.displayName;var rN="Avatar",[ate,Qfe]=ls(rN),[ote,NO]=ate(rN),SO=p.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[s,a]=p.useState("idle");return i.jsx(ote,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(De.span,{...n,ref:e})})});SO.displayName=rN;var EO="AvatarImage",CO=p.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...a}=t,o=NO(EO,r),l=lte(n,a.referrerPolicy),c=_r(u=>{s(u),o.onImageLoadingStatusChange(u)});return Rr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(De.img,{...a,ref:e,src:n}):null});CO.displayName=EO;var kO="AvatarFallback",TO=p.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...s}=t,a=NO(kO,r),[o,l]=p.useState(n===void 0);return p.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(De.span,{...s,ref:e}):null});TO.displayName=kO;function lte(t,e){const[r,n]=p.useState("idle");return Rr(()=>{if(!t){n("error");return}let s=!0;const a=new window.Image,o=l=>()=>{s&&n(l)};return n("loading"),a.onload=o("loaded"),a.onerror=o("error"),a.src=t,e&&(a.referrerPolicy=e),()=>{s=!1}},[t,e]),r}var IO=SO,AO=CO,PO=TO;const Jn=p.forwardRef(({className:t,...e},r)=>i.jsx(IO,{ref:r,className:Le("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Jn.displayName=IO.displayName;const ba=p.forwardRef(({className:t,...e},r)=>i.jsx(AO,{ref:r,className:Le("aspect-square h-full w-full",t),...e}));ba.displayName=AO.displayName;const Pn=p.forwardRef(({className:t,...e},r)=>i.jsx(PO,{ref:r,className:Le("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Pn.displayName=PO.displayName;const cte=Lx("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ie({className:t,variant:e,...r}){return i.jsx("div",{className:Le(cte({variant:e}),t),...r})}const ute={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ALGOLIA_APP_ID:"Q3E5Y56YF4",VITE_ALGOLIA_SEARCH_KEY:"ff26b6f0fa03bc6384566ea42dfe0ab4",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",VITE_SUPABASE_URL:"https://kbbhglxrcywpcktkamhl.supabase.co"},j2=t=>{let e;const r=new Set,n=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const g=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(x=>x(e,g))}},s=()=>e,c={setState:n,getState:s,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(ute?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=e=t(n,s,c);return c},dte=t=>t?j2(t):j2;var RO={exports:{}},DO={},MO={exports:{}},OO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ou=p;function hte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fte=typeof Object.is=="function"?Object.is:hte,mte=Ou.useState,pte=Ou.useEffect,gte=Ou.useLayoutEffect,vte=Ou.useDebugValue;function xte(t,e){var r=e(),n=mte({inst:{value:r,getSnapshot:e}}),s=n[0].inst,a=n[1];return gte(function(){s.value=r,s.getSnapshot=e,$0(s)&&a({inst:s})},[t,r,e]),pte(function(){return $0(s)&&a({inst:s}),t(function(){$0(s)&&a({inst:s})})},[t]),vte(r),r}function $0(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!fte(t,r)}catch{return!0}}function yte(t,e){return e()}var wte=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yte:xte;OO.useSyncExternalStore=Ou.useSyncExternalStore!==void 0?Ou.useSyncExternalStore:wte;MO.exports=OO;var bte=MO.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qx=p,_te=bte;function jte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nte=typeof Object.is=="function"?Object.is:jte,Ste=_te.useSyncExternalStore,Ete=Qx.useRef,Cte=Qx.useEffect,kte=Qx.useMemo,Tte=Qx.useDebugValue;DO.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var a=Ete(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=kte(function(){function c(g){if(!u){if(u=!0,d=g,g=n(g),s!==void 0&&o.hasValue){var x=o.value;if(s(x,g))return h=x}return h=g}if(x=h,Nte(d,g))return x;var w=n(g);return s!==void 0&&s(x,w)?(d=g,x):(d=g,h=w)}var u=!1,d,h,m=r===void 0?null:r;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,r,n,s]);var l=Ste(t,a[0],a[1]);return Cte(function(){o.hasValue=!0,o.value=l},[l]),Tte(l),l};RO.exports=DO;var Ite=RO.exports;const Ate=Fv(Ite),LO={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ALGOLIA_APP_ID:"Q3E5Y56YF4",VITE_ALGOLIA_SEARCH_KEY:"ff26b6f0fa03bc6384566ea42dfe0ab4",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",VITE_SUPABASE_URL:"https://kbbhglxrcywpcktkamhl.supabase.co"},{useDebugValue:Pte}=Ce,{useSyncExternalStoreWithSelector:Rte}=Ate;let N2=!1;const Dte=t=>t;function Mte(t,e=Dte,r){(LO?"production":void 0)!=="production"&&r&&!N2&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),N2=!0);const n=Rte(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return Pte(n),n}const S2=t=>{(LO?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?dte(t):t,r=(n,s)=>Mte(e,n,s);return Object.assign(r,e),r},ud=t=>t?S2(t):S2,Zo=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Ote=(t,e,r)=>{const n=[t,e].sort();return`${n[0]}_${n[1]}_${r}`},Lte=async(t,e,r,n,s,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const l=`${window.location.origin}/messages?conversation=${o}`,c=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:r,senderUniversity:n,listingTitle:s,messagePreview:a,conversationUrl:l})});c.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await c.text())}catch(l){console.error("Error sending email notification:",l)}},Jx=ud((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:r=>{t({loading:!0});const{unsubscribeConversations:n}=e();n&&n();try{const s=Mt(bt(ve,"conversations"),Vt("participants","array-contains",r)),a=Ck(s,o=>{const l=[];o.docs.forEach(c=>{const u=c.data();u.deletedFor&&u.deletedFor.includes(r)||u.blockedBy&&u.blockedBy.includes(r)||l.push({id:c.id,participants:u.participants||[],listingId:u.listingId||"",listingTitle:u.listingTitle||"",listingImage:u.listingImage,listingPrice:u.listingPrice||0,participantDetails:u.participantDetails||{},lastMessage:u.lastMessage?{...u.lastMessage,sentAt:Zo(u.lastMessage.sentAt)}:void 0,unreadCount:u.unreadCount||{},blockedBy:u.blockedBy||[],deletedFor:u.deletedFor||[],status:u.status||"active",createdAt:Zo(u.createdAt),updatedAt:Zo(u.updatedAt)})}),l.sort((c,u)=>u.updatedAt.getTime()-c.updatedAt.getTime()),t({conversations:l,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),ne.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(s){console.error("Error setting up conversations listener:",s),t({loading:!1})}},fetchMessages:r=>{const{unsubscribeMessages:n}=e();n&&n();try{const s=Mt(bt(ve,"conversations",r,"messages")),a=Ck(s,o=>{const l=o.docs.map(c=>{const u=c.data();return{id:c.id,conversationId:r,senderId:u.senderId,senderName:u.senderName,senderAvatar:u.senderAvatar,text:u.text,type:u.type||"text",attachments:u.attachments||[],seen:u.seen||!1,sentAt:Zo(u.sentAt)}});l.sort((c,u)=>c.sentAt.getTime()-u.sentAt.getTime()),t({messages:l,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),ne.error("Erreur lors du chargement des messages")})}catch(s){console.error("Error setting up messages listener:",s)}},sendMessage:async(r,n,s,a,o)=>{try{console.log("Sending message:",{conversationId:r,text:n,senderId:s,senderName:a});const l=e().currentConversation;if(!l){console.error("No current conversation");return}if(l.blockedBy&&l.blockedBy.includes(s)){ne.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const c={conversationId:r,senderId:s,senderName:a,senderAvatar:o||null,text:n,type:"text",seen:!1,sentAt:or()};console.log("Adding message to Firestore:",c);const u=await Ll(bt(ve,"conversations",r,"messages"),c);console.log("Message added with ID:",u.id);const d=l.participants.filter(m=>m!==s),h={};d.forEach(m=>{h[`unreadCount.${m}`]=(l.unreadCount[m]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:n,sentAt:or(),senderId:s,senderName:a},updatedAt:or(),...h}),await cr(Ke(ve,"conversations",r),{lastMessage:{text:n,sentAt:or(),senderId:s,senderName:a},updatedAt:or(),...h}),d.forEach(async m=>{const g=l.participantDetails[m];if(g&&g.email){const x=l.participantDetails[s];await Lte(g.email,g.name,a,(x==null?void 0:x.university)||"Université non spécifiée",l.listingTitle,n,r)}}),console.log("Message sent successfully")}catch(l){console.error("Error sending message:",l),ne.error("Erreur lors de l'envoi du message")}},createConversation:async(r,n,s,a,o,l,c,u,d)=>{try{console.log("Creating conversation:",{listingId:r,buyerId:o,sellerId:l});const h=Ote(o,l,r);console.log("Generated conversation ID:",h);const m=await Zn(Ke(ve,"conversations",h));if(m.exists()){console.log("Conversation already exists, sending message");const w=m.data(),b={id:h,participants:w.participants||[],listingId:w.listingId||"",listingTitle:w.listingTitle||"",listingImage:w.listingImage,listingPrice:w.listingPrice||0,participantDetails:w.participantDetails||{},lastMessage:w.lastMessage?{...w.lastMessage,sentAt:Zo(w.lastMessage.sentAt)}:void 0,unreadCount:w.unreadCount||{},blockedBy:w.blockedBy||[],deletedFor:w.deletedFor||[],status:w.status||"active",createdAt:Zo(w.createdAt),updatedAt:Zo(w.updatedAt)};return t({currentConversation:b}),await e().sendMessage(h,d,o,c.displayName,c.photoURL),h}console.log("Creating new conversation");const g={participants:[o,l],listingId:r,listingTitle:n,listingImage:a||null,listingPrice:s,participantDetails:{[o]:{name:c.displayName,avatar:c.photoURL||null,university:c.university,verified:c.isVerified||!1,email:c.email||null},[l]:{name:u.sellerName,avatar:u.sellerAvatar||null,university:u.sellerUniversity,verified:u.sellerVerified||!1,email:u.email||null}},unreadCount:{[o]:0,[l]:1},status:"active",createdAt:or(),updatedAt:or()};console.log("Setting conversation document:",g),await xl(Ke(ve,"conversations",h),g);const x={id:h,participants:[o,l],listingId:r,listingTitle:n,listingImage:a||void 0,listingPrice:s,participantDetails:g.participantDetails,unreadCount:g.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:x}),console.log("Sending initial message"),await e().sendMessage(h,d,o,c.displayName,c.photoURL),h}catch(h){throw console.error("Error creating conversation:",h),ne.error("Erreur lors de la création de la conversation"),h}},markMessagesAsSeen:async(r,n)=>{try{const s=Ke(ve,"conversations",r);await cr(s,{[`unreadCount.${n}`]:0})}catch(s){console.error("Error marking messages as seen:",s)}},setCurrentConversation:r=>{t({currentConversation:r})},blockUser:async(r,n)=>{try{const s=Ke(ve,"conversations",r),a=await Zn(s);if(a.exists()){const l=a.data().blockedBy||[];l.includes(n)||(await cr(s,{blockedBy:[...l,n],status:"blocked",updatedAt:or()}),ne.success("Utilisateur bloqué"))}}catch(s){console.error("Error blocking user:",s),ne.error("Erreur lors du blocage")}},reportUser:async(r,n,s,a,o)=>{try{const l={reporterId:n,reportedUserId:s,conversationId:r,reason:a,description:o,status:"pending",createdAt:or()};await Ll(bt(ve,"reports"),l),ne.success("Signalement envoyé")}catch(l){console.error("Error reporting user:",l),ne.error("Erreur lors du signalement")}},deleteConversation:async(r,n)=>{try{const s=Ke(ve,"conversations",r),a=await Zn(s);if(a.exists()){const o=a.data(),l=o.deletedFor||[];if(!l.includes(n)){const c=[...l,n];c.length===o.participants.length?await Au(s):await cr(s,{deletedFor:c,updatedAt:or()}),ne.success("Conversation supprimée")}}}catch(s){console.error("Error deleting conversation:",s),ne.error("Erreur lors de la suppression")}},findConversationByListing:(r,n)=>{const{conversations:s}=e();return s.find(a=>a.listingId===r&&a.participants.includes(n))||null},cleanup:()=>{const{unsubscribeConversations:r,unsubscribeMessages:n}=e();r&&r(),n&&n(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),Vte={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ALGOLIA_APP_ID:"Q3E5Y56YF4",VITE_ALGOLIA_SEARCH_KEY:"ff26b6f0fa03bc6384566ea42dfe0ab4",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",VITE_SUPABASE_URL:"https://kbbhglxrcywpcktkamhl.supabase.co"};function Fte(t,e){let r;try{r=t()}catch{return}return{getItem:s=>{var a;const o=c=>c===null?null:JSON.parse(c,void 0),l=(a=r.getItem(s))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,a)=>r.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>r.removeItem(s)}}const wf=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return wf(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return wf(n)(r)}}}},$te=(t,e)=>(r,n,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,y)=>({...y,...b}),...e},o=!1;const l=new Set,c=new Set;let u;try{u=a.getStorage()}catch{}if(!u)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...b)},n,s);const d=wf(a.serialize),h=()=>{const b=a.partialize({...n()});let y;const v=d({state:b,version:a.version}).then(_=>u.setItem(a.name,_)).catch(_=>{y=_});if(y)throw y;return v},m=s.setState;s.setState=(b,y)=>{m(b,y),h()};const g=t((...b)=>{r(...b),h()},n,s);let x;const w=()=>{var b;if(!u)return;o=!1,l.forEach(v=>v(n()));const y=((b=a.onRehydrateStorage)==null?void 0:b.call(a,n()))||void 0;return wf(u.getItem.bind(u))(a.name).then(v=>{if(v)return a.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==a.version){if(a.migrate)return a.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var _;return x=a.merge(v,(_=n())!=null?_:g),r(x,!0),h()}).then(()=>{y==null||y(x,void 0),o=!0,c.forEach(v=>v(x))}).catch(v=>{y==null||y(void 0,v)})};return s.persist={setOptions:b=>{a={...a,...b},b.getStorage&&(u=b.getStorage())},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>w(),hasHydrated:()=>o,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},w(),x||g},Ute=(t,e)=>(r,n,s)=>{let a={storage:Fte(()=>localStorage),partialize:w=>w,version:0,merge:(w,b)=>({...b,...w}),...e},o=!1;const l=new Set,c=new Set;let u=a.storage;if(!u)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...w)},n,s);const d=()=>{const w=a.partialize({...n()});return u.setItem(a.name,{state:w,version:a.version})},h=s.setState;s.setState=(w,b)=>{h(w,b),d()};const m=t((...w)=>{r(...w),d()},n,s);s.getInitialState=()=>m;let g;const x=()=>{var w,b;if(!u)return;o=!1,l.forEach(v=>{var _;return v((_=n())!=null?_:m)});const y=((b=a.onRehydrateStorage)==null?void 0:b.call(a,(w=n())!=null?w:m))||void 0;return wf(u.getItem.bind(u))(a.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==a.version){if(a.migrate)return[!0,a.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var _;const[E,C]=v;if(g=a.merge(C,(_=n())!=null?_:m),r(g,!0),E)return d()}).then(()=>{y==null||y(g,void 0),g=n(),o=!0,c.forEach(v=>v(g))}).catch(v=>{y==null||y(void 0,v)})};return s.persist={setOptions:w=>{a={...a,...w},w.storage&&(u=w.storage)},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},a.skipHydration||x(),g||m},zte=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Vte?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),$te(t,e)):Ute(t,e),Bte=zte,dd=ud()(Bte((t,e)=>({cart:[],cartTotal:0,addToCart:r=>{const{cart:n}=e(),s=n.find(a=>a.id===r.id);t(s?{cart:n.map(a=>a.id===r.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+r.price}:{cart:[...n,{...r,quantity:1}],cartTotal:e().cartTotal+r.price}),ne.success("Article ajouté au panier")},removeFromCart:r=>{const{cart:n}=e(),s=n.find(a=>a.id===r);s&&t({cart:n.filter(a=>a.id!==r),cartTotal:e().cartTotal-s.price*s.quantity})},updateQuantity:(r,n)=>{const{cart:s}=e(),a=s.find(o=>o.id===r);if(a){const o=n-a.quantity;t({cart:s.map(l=>l.id===r?{...l,quantity:n}:l),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((r,n)=>r+n.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})})),qte=()=>{var w,b;const{currentUser:t,userProfile:e,logout:r}=Zt(),{conversations:n,fetchConversations:s}=Jx(),{getCartItemCount:a}=dd(),{theme:o,setTheme:l}=fU(),c=Dr(),[u,d]=p.useState(""),h=Ce.useMemo(()=>!t||!n.length?0:n.reduce((y,v)=>{const _=v.unreadCount[t.uid]||0;return y+_},0),[n,t]);p.useEffect(()=>{t&&s(t.uid)},[t,s]);const m=y=>{y.preventDefault(),u.trim()&&c(`/listings?q=${encodeURIComponent(u.trim())}`)},g=async()=>{try{await r(),c("/")}catch(y){console.error("Logout error:",y)}},x=a();return i.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border w-full overflow-x-hidden",children:i.jsx("div",{className:"w-full max-w-full mx-auto px-3 sm:px-4 lg:px-6 overflow-hidden",children:i.jsxs("div",{className:"flex h-14 sm:h-16 items-center justify-between gap-2 sm:gap-4 min-w-0",children:[i.jsxs(ye,{to:"/",className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:i.jsx(ji,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),i.jsxs("div",{className:"hidden sm:block",children:[i.jsx("span",{className:"font-bold text-lg sm:text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),i.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),i.jsx("form",{onSubmit:m,className:"flex-1 max-w-sm sm:max-w-md lg:max-w-lg mx-2 sm:mx-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(Ir,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(we,{type:"text",placeholder:"Rechercher...",value:u,onChange:y=>d(y.target.value),className:"pl-8 sm:pl-10 pr-3 h-9 sm:h-10 text-sm w-full"})]})}),i.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[i.jsxs("div",{onClick:()=>l(o==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors p-2","aria-label":"Changer le thème",children:[i.jsx(Jk,{className:"h-4 w-4 sm:h-5 sm:w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),i.jsx(Kk,{className:"absolute top-2 left-2 h-4 w-4 sm:h-5 sm:w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?i.jsxs(i.Fragment,{children:[i.jsx($,{asChild:!0,className:"hidden md:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 h-8 sm:h-9 text-xs sm:text-sm",children:i.jsxs(ye,{to:"/create",children:[i.jsx(bl,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden lg:inline",children:"Publier"})]})}),i.jsxs("div",{className:"relative hidden sm:block",children:[i.jsx($,{variant:"ghost",size:"icon",asChild:!0,className:"h-8 w-8 sm:h-9 sm:w-9",children:i.jsx(ye,{to:"/cart",children:i.jsx(jo,{className:"w-4 h-4"})})}),x>0&&i.jsx(Ie,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 rounded-full border-2 border-background",children:x>99?"99+":x})]}),i.jsx($,{variant:"ghost",size:"icon",asChild:!0,className:"hidden sm:flex h-8 w-8 sm:h-9 sm:w-9",children:i.jsx(ye,{to:"/saved-searches",children:i.jsx(Ls,{className:"w-4 h-4"})})}),i.jsxs("div",{className:"relative hidden sm:block",children:[i.jsx($,{variant:"ghost",size:"icon",asChild:!0,className:"h-8 w-8 sm:h-9 sm:w-9",children:i.jsx(ye,{to:"/messages",children:i.jsx(zt,{className:"w-4 h-4"})})}),h>0&&i.jsx(Ie,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 rounded-full border-2 border-background",children:h>99?"99+":h})]}),i.jsxs(qb,{children:[i.jsx(Wb,{asChild:!0,children:i.jsxs($,{variant:"ghost",className:"relative h-8 w-8 sm:h-9 sm:w-9 rounded-full p-0",children:[i.jsxs(Jn,{className:"h-7 w-7 sm:h-8 sm:w-8",children:[i.jsx(ba,{src:e==null?void 0:e.photoURL}),i.jsx(Pn,{className:"text-xs sm:text-sm",children:((b=(w=e==null?void 0:e.displayName)==null?void 0:w[0])==null?void 0:b.toUpperCase())||"U"})]}),(e==null?void 0:e.isVerified)&&i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx(Et,{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 text-white"})})]})}),i.jsxs(fv,{className:"w-64",align:"end",children:[i.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:i.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"font-medium",children:e==null?void 0:e.displayName}),(e==null?void 0:e.isVerified)&&i.jsxs(Ie,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:[i.jsx(Et,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),i.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:e==null?void 0:e.university}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(Hs,{className:"w-3 h-3 text-green-600"}),i.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO₂ économisés"]})]})]})}),i.jsx(ds,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/profile",className:"cursor-pointer",children:[i.jsx(on,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/settings",className:"cursor-pointer",children:[i.jsx(Dx,{className:"w-4 h-4 mr-2"}),"Paramètres"]})}),i.jsx(ds,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/orders",className:"cursor-pointer",children:[i.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/payments",className:"cursor-pointer",children:[i.jsx(lm,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),i.jsx(ds,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/favorites",className:"cursor-pointer",children:[i.jsx(xn,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/saved-searches",className:"cursor-pointer",children:[i.jsx(Pj,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardées"]})}),i.jsx(ds,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/messages",className:"cursor-pointer relative",children:[i.jsx(zt,{className:"w-4 h-4 mr-2"}),"Messages",h>0&&i.jsx(Ie,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:h>99?"99+":h})]})}),i.jsx(ds,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/impact",className:"cursor-pointer",children:[i.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Mon impact écologique"]})}),i.jsx(ds,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/help",className:"cursor-pointer",children:[i.jsx(dr,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/safety",className:"cursor-pointer",children:[i.jsx(Et,{className:"w-4 h-4 mr-2"}),"Conseils de sécurité"]})}),i.jsx(ds,{}),i.jsxs(Ct,{onClick:g,className:"cursor-pointer text-destructive",children:[i.jsx(oQ,{className:"w-4 h-4 mr-2"}),"Se déconnecter"]})]})]}),i.jsx($,{size:"icon",asChild:!0,className:"md:hidden bg-gradient-to-r from-primary to-secondary h-8 w-8",children:i.jsx(ye,{to:"/create",children:i.jsx(bl,{className:"w-4 h-4"})})})]}):i.jsxs(i.Fragment,{children:[i.jsx($,{variant:"ghost",asChild:!0,className:"hidden sm:flex h-8 sm:h-9 text-xs sm:text-sm",children:i.jsx(ye,{to:"/auth?mode=signin",children:"Se connecter"})}),i.jsx($,{asChild:!0,className:"sm:hidden bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 h-8 text-xs px-3",children:i.jsx(ye,{to:"/auth?mode=signin",children:"Connexion"})}),i.jsx($,{asChild:!0,className:"hidden sm:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 h-8 sm:h-9 text-xs sm:text-sm px-2 sm:px-4",children:i.jsx(ye,{to:"/auth?mode=signup",children:"Rejoindre"})})]}),i.jsxs(qb,{children:[i.jsx(Wb,{asChild:!0,className:"sm:hidden",children:i.jsx($,{className:"p-2 text-foreground hover:text-primary transition-colors sm:hidden","aria-label":"Menu mobile",children:i.jsx(lQ,{className:"w-4 h-4"})})}),i.jsxs(fv,{className:"w-56",align:"end",children:[i.jsxs(Ct,{onClick:()=>l(o==="dark"?"light":"dark"),className:"cursor-pointer",children:[i.jsxs("div",{className:"relative mr-2",children:[i.jsx(Jk,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),i.jsx(Kk,{className:"absolute top-0 left-0 h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),"Changer le thème"]}),i.jsx(ds,{}),i.jsx(Ct,{asChild:!0,children:i.jsx(ye,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),i.jsx(Ct,{asChild:!0,children:i.jsx(ye,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre étudiants"})}),i.jsx(Ct,{asChild:!0,children:i.jsx(ye,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & Échanges"})}),i.jsx(Ct,{asChild:!0,children:i.jsx(ye,{to:"/listings?category=services",className:"cursor-pointer",children:"Services étudiants"})}),i.jsx(Ct,{asChild:!0,children:i.jsx(ye,{to:"/housing",className:"cursor-pointer",children:"Logement & Colocation"})}),i.jsx(Ct,{asChild:!0,children:i.jsx(ye,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&i.jsxs(i.Fragment,{children:[i.jsx(ds,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/create",className:"cursor-pointer",children:[i.jsx(bl,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/cart",className:"cursor-pointer relative",children:[i.jsx(jo,{className:"w-4 h-4 mr-2"}),"Panier",x>0&&i.jsx(Ie,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:x>99?"99+":x})]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/messages",className:"cursor-pointer relative",children:[i.jsx(zt,{className:"w-4 h-4 mr-2"}),"Messages",h>0&&i.jsx(Ie,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:h>99?"99+":h})]})}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/favorites",className:"cursor-pointer",children:[i.jsx(xn,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})})]}),!t&&i.jsxs(i.Fragment,{children:[i.jsx(ds,{}),i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:"/auth?mode=signin",className:"cursor-pointer",children:[i.jsx(on,{className:"w-4 h-4 mr-2"}),"Se connecter"]})})]})]})]})]})]})})})};function Wte({icon:t,size:e=100,gradientId:r}){return i.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:r,x1:"0",y1:"0",x2:"1",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#2ECC71"}),i.jsx("stop",{offset:"100%",stopColor:"#4A90E2"})]})}),i.jsx(t,{width:e,height:e,fill:`url(#${r})`})]})}const Hte=()=>i.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto w-full overflow-x-hidden",children:i.jsxs("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-8 sm:py-12 max-w-full overflow-hidden",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8",children:[i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Wte,{icon:ji,gradientId:"gradient-footer",size:28}),i.jsxs("div",{children:[i.jsx("span",{className:"font-bold text-lg sm:text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),i.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),i.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:"La première plateforme d'échange entre étudiants vérifiés. Achetez, vendez, donnez et échangez en toute sécurité au sein de votre communauté universitaire."}),i.jsxs("div",{className:"flex space-x-3 sm:space-x-4",children:[i.jsx("a",{href:"https://facebook.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors p-2 -m-2",children:i.jsx(tQ,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),i.jsx("a",{href:"https://twitter.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors p-2 -m-2",children:i.jsx(gQ,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),i.jsx("a",{href:"https://instagram.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors p-2 -m-2",children:i.jsx(iQ,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Navigation"}),i.jsxs("ul",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm",children:[i.jsx("li",{children:i.jsx(ye,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Toutes les annonces"})}),i.jsx("li",{children:i.jsx(ye,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Dons entre étudiants"})}),i.jsx("li",{children:i.jsx(ye,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Troc & Échanges"})}),i.jsx("li",{children:i.jsx(ye,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Publier une annonce"})}),i.jsx("li",{children:i.jsx(ye,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Comment ça marche"})})]})]}),i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Catégories populaires"}),i.jsxs("ul",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm",children:[i.jsx("li",{children:i.jsx(ye,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Livres & Cours"})}),i.jsx("li",{children:i.jsx(ye,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Électronique"})}),i.jsx("li",{children:i.jsx(ye,{to:"/housing",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Logement & Colocation"})}),i.jsx("li",{children:i.jsx(ye,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Services étudiants"})}),i.jsx("li",{children:i.jsx(ye,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors block py-1",children:"Jobs & Stages"})})]})]}),i.jsxs("div",{className:"space-y-3 sm:space-y-4 text-center",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Sécurité & Confiance"}),i.jsxs("div",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[i.jsx(Et,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 flex-shrink-0"}),i.jsx("span",{children:"Étudiants 100% vérifiés"})]}),i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[i.jsx(Hs,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 flex-shrink-0"}),i.jsx("span",{children:"Impact écologique mesuré"})]}),i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[i.jsx(an,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),i.jsx("span",{className:"break-all",children:"support@studymarket.fr"})]})]}),i.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[i.jsx(ye,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Conseils de sécurité"}),i.jsx(ye,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Processus de vérification"}),i.jsx(ye,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Règles de la communauté"}),i.jsx(ye,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-xs sm:text-sm py-1",children:"Centre d'aide"})]})]})]}),i.jsx("div",{className:"border-t border-border mt-6 sm:mt-8 pt-6 sm:pt-8",children:i.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:justify-between sm:items-center",children:[i.jsxs("div",{className:"text-center sm:text-left",children:[i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground leading-relaxed",children:"© 2024 StudyMarket. Tous droits réservés."}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Plateforme dédiée aux étudiants vérifiés."})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-row gap-3 sm:gap-6 justify-center sm:justify-end",children:[i.jsx(ye,{to:"/terms",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1",children:"Conditions d'utilisation"}),i.jsx(ye,{to:"/privacy",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1",children:"Politique de confidentialité"}),i.jsx(ye,{to:"/cookies",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1",children:"Cookies"}),i.jsxs("a",{href:"mailto:support@studymarket.fr",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary transition-colors text-center sm:text-left py-1 flex items-center justify-center sm:justify-start gap-1",children:[i.jsx(Dn,{className:"w-3 h-3"}),"Contact"]})]})]})})]})}),Q=p.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Le("rounded-xl border bg-card text-card-foreground shadow",t),...e}));Q.displayName="Card";const Pe=p.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Le("flex flex-col space-y-1.5 p-6",t),...e}));Pe.displayName="CardHeader";const Re=p.forwardRef(({className:t,...e},r)=>i.jsx("h3",{ref:r,className:Le("font-semibold leading-none tracking-tight",t),...e}));Re.displayName="CardTitle";const lt=p.forwardRef(({className:t,...e},r)=>i.jsx("p",{ref:r,className:Le("text-sm text-muted-foreground",t),...e}));lt.displayName="CardDescription";const J=p.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Le("p-6 pt-0",t),...e}));J.displayName="CardContent";const VO=p.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Le("flex items-center p-6 pt-0",t),...e}));VO.displayName="CardFooter";const mv=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(mv).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(r=>{const n=mv(t[r]);n!==void 0&&(e[r]=n)}),e}return t},E2=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},U0=t=>{var r,n,s,a,o,l;const e=t.data();return{id:t.id,...e,createdAt:E2(e.createdAt),updatedAt:E2(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((r=e.location)==null?void 0:r.city)||"Paris",state:((n=e.location)==null?void 0:n.state)||"Île-de-France",country:((s=e.location)==null?void 0:s.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((l=e.location)==null?void 0:l.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Université non spécifiée",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},vm=ud((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(r={},n=!1)=>{const{listings:s,lastDoc:a}=e();if(!(!n&&!a)){t({loading:!0});try{let o=Mt(bt(ve,"listings"),tv("createdAt","desc"),ys(20));!n&&a&&(o=Mt(o,eG(a)));const l=await Kt(o);let c=l.docs.map(U0);if(r.category&&r.category!=="all"&&(c=c.filter(d=>d.category===r.category)),r.minPrice!==void 0&&(c=c.filter(d=>d.price>=r.minPrice)),r.maxPrice!==void 0&&(c=c.filter(d=>d.price<=r.maxPrice)),r.query){const d=r.query.toLowerCase();c=c.filter(h=>{var m;return h.title.toLowerCase().includes(d)||h.description.toLowerCase().includes(d)||((m=h.tags)==null?void 0:m.some(g=>g.toLowerCase().includes(d)))})}if(r.condition&&r.condition.length>0&&(c=c.filter(d=>r.condition.includes(d.condition))),r.sortBy)switch(r.sortBy){case"price-asc":c.sort((d,h)=>d.price-h.price);break;case"price-desc":c.sort((d,h)=>h.price-d.price);break;case"date":default:c.sort((d,h)=>new Date(h.createdAt).getTime()-new Date(d.createdAt).getTime());break}const u=l.docs[l.docs.length-1];t({listings:n?c:[...s,...c],lastDoc:u,hasMore:l.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),ne.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log("🔍 Fetching featured listings...");const r=Mt(bt(ve,"listings"),tv("createdAt","desc"),ys(6)),n=await Kt(r);console.log(`📊 Found ${n.docs.length} documents`);const s=n.docs.map((a,o)=>{try{console.log(`🔄 Processing document ${o+1}:`,a.id);const l=U0(a);return console.log(`✅ Successfully converted listing: ${l.title}`),l}catch(l){return console.error(`❌ Error converting document ${a.id}:`,l),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas être affichée pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"Île-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Université non spécifiée",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(`🎉 Successfully processed ${s.length} featured listings`),t({featuredListings:s})}catch(r){console.error("❌ Error fetching featured listings:",r),t({featuredListings:[]})}},fetchListingById:async r=>{t({loading:!0});try{const n=Ke(ve,"listings",r),s=await Zn(n);if(s.exists()){const a=U0(s);await cr(n,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),ne.error("Annonce introuvable")}catch(n){console.error("Error fetching listing:",n),ne.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async r=>{var n,s,a,o,l,c;try{const u=mv({...r,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((n=r.location)==null?void 0:n.city)||"Paris",state:((s=r.location)==null?void 0:s.state)||"Île-de-France",country:((a=r.location)==null?void 0:a.country)||"France",campus:((o=r.location)==null?void 0:o.campus)||null,university:((l=r.location)==null?void 0:l.university)||null,coordinates:((c=r.location)==null?void 0:c.coordinates)||null},currency:r.currency||"EUR",images:r.images||[],tags:r.tags||[],condition:r.condition||"good",transactionType:r.transactionType||"sale"});console.log("Creating listing with data:",u);const d=await Ll(bt(ve,"listings"),u);return ne.success("Annonce créée avec succès !"),d.id}catch(u){throw console.error("Error creating listing:",u),ne.error("Erreur lors de la création de l'annonce"),u}},updateListing:async(r,n)=>{try{const s=Ke(ve,"listings",r),a=mv({...n,updatedAt:new Date});await cr(s,a);const{listings:o,currentListing:l}=e(),c=o.map(u=>u.id===r?{...u,...n}:u);t({listings:c,currentListing:(l==null?void 0:l.id)===r?{...l,...n}:l}),ne.success("Annonce mise à jour !")}catch(s){throw console.error("Error updating listing:",s),ne.error("Erreur lors de la mise à jour"),s}},deleteListing:async r=>{try{await Au(Ke(ve,"listings",r));const{listings:n}=e(),s=n.filter(a=>a.id!==r);t({listings:s}),ne.success("Annonce supprimée !")}catch(n){throw console.error("Error deleting listing:",n),ne.error("Erreur lors de la suppression"),n}},searchListings:async r=>{await e().fetchListings(r,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),C2=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},FO=ud((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async r=>{if(r){t({loading:!0});try{const n=Mt(bt(ve,"favorites"),Vt("userId","==",r),ys(100)),s=await Kt(n),a=[],o=new Set;s.forEach(l=>{const c=l.data(),u={id:l.id,...c,createdAt:C2(c.createdAt),updatedAt:C2(c.updatedAt)};a.push(u),o.add(u.listingId)}),a.sort((l,c)=>c.createdAt.getTime()-l.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(n){console.error("Erreur lors du chargement des favoris:",n),ne.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(r,n)=>{var s;if(!(!r||!n))try{if(e().userFavoriteIds.has(n.id)){ne.info("Déjà dans vos favoris");return}const a={userId:r,listingId:n.id,listingTitle:n.title,listingPrice:n.price,listingImage:((s=n.images)==null?void 0:s[0])||null,listingCategory:n.category,listingTransactionType:n.transactionType,sellerName:n.sellerName,sellerUniversity:n.sellerUniversity,notes:"",tags:n.tags||[],createdAt:or(),updatedAt:or()},l={id:(await Ll(bt(ve,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:c,userFavoriteIds:u}=e(),d=new Set(u);d.add(n.id),t({favorites:[l,...c],userFavoriteIds:d});try{await cr(Ke(ve,"listings",n.id),{likes:(n.likes||0)+1})}catch(h){console.error("Erreur lors de la mise à jour du compteur de likes:",h)}ne.success("Ajouté aux favoris ❤️")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),ne.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(r,n)=>{if(!(!r||!n))try{const s=Mt(bt(ve,"favorites"),Vt("userId","==",r),Vt("listingId","==",n)),a=await Kt(s);if(a.empty){ne.info("Pas dans vos favoris");return}const o=a.docs[0];await Au(Ke(ve,"favorites",o.id));const{favorites:l,userFavoriteIds:c}=e(),u=new Set(c);u.delete(n),t({favorites:l.filter(d=>d.listingId!==n),userFavoriteIds:u});try{const d=Ke(ve,"listings",n),h=await Kt(Mt(bt(ve,"listings"),Vt("__name__","==",n)));if(!h.empty){const m=h.docs[0].data().likes||0;await cr(d,{likes:Math.max(0,m-1)})}}catch(d){console.error("Erreur lors de la mise à jour du compteur de likes:",d)}ne.success("Retiré des favoris")}catch(s){console.error("Erreur lors de la suppression des favoris:",s),ne.error("Erreur lors de la suppression des favoris")}},isFavorite:r=>e().userFavoriteIds.has(r),toggleFavorite:async(r,n)=>{const{isFavorite:s,addToFavorites:a,removeFromFavorites:o}=e();s(n.id)?await o(r,n.id):await a(r,n)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),$O=({listing:t,size:e="default",showText:r=!0,className:n=""})=>{const{currentUser:s}=Zt(),{isFavorite:a,toggleFavorite:o}=FO(),l=Dr(),c=a(t.id),u=h=>{if(h.preventDefault(),h.stopPropagation(),!s){ne.error("Connectez-vous pour ajouter aux favoris"),l("/auth");return}o(s.uid,t)},d=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return i.jsx($,{variant:"ghost",size:"icon",onClick:u,className:`${d()} ${c?"text-red-500 hover:text-red-600":"text-foreground hover:text-red-500"} ${n}`,"aria-label":c?"Retirer des favoris":"Ajouter aux favoris",children:i.jsx(xn,{className:`w-4 h-4 ${c?"fill-current":""}`})})},Gte={borderRadius:"50%",aspectRatio:"1/1",minHeight:0,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e5e7eb",backgroundColor:"white",cursor:"pointer",transition:"all 0.2s",padding:0,overflow:"hidden",flexShrink:0},UO=({listing:t,size:e="default",showText:r=!0,className:n=""})=>{const s=async l=>{l.preventDefault(),l.stopPropagation();const c={title:t.title,text:`Découvrez cette annonce sur StudyMarket: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(c):(await navigator.clipboard.writeText(window.location.href),ne.success("Lien copié dans le presse-papiers"))}catch(u){console.error("Error sharing:",u)}},a=()=>{switch(e){case"sm":return{width:"32px",height:"32px"};case"lg":return{width:"40px",height:"40px"};default:return{width:"36px",height:"36px"}}},o=()=>{switch(e){case"sm":return 14;case"lg":return 20;default:return 16}};return i.jsx("button",{onClick:s,className:`hover:bg-gray-100 ${n}`,style:{...Gte,...a()},"aria-label":"Partager",type:"button",children:i.jsx(Rj,{size:o(),strokeWidth:2})})};function Ge(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function zn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function gn(t,e){const r=Ge(t);return isNaN(e)?zn(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Zs(t,e){const r=Ge(t);if(isNaN(e))return zn(t,NaN);if(!e)return r;const n=r.getDate(),s=zn(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const a=s.getDate();return n>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const nN=6048e5,Kte=864e5,jp=43200,k2=1440;let Yte={};function hd(){return Yte}function Ii(t,e){var l,c,u,d;const r=hd(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ge(t),a=s.getDay(),o=(a<n?7:0)+a-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Wl(t){return Ii(t,{weekStartsOn:1})}function zO(t){const e=Ge(t),r=e.getFullYear(),n=zn(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Wl(n),a=zn(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Wl(a);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Lu(t){const e=Ge(t);return e.setHours(0,0,0,0),e}function Vu(t){const e=Ge(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function pi(t,e){const r=Lu(t),n=Lu(e),s=+r-Vu(r),a=+n-Vu(n);return Math.round((s-a)/Kte)}function Qte(t){const e=zO(t),r=zn(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Wl(r)}function Hb(t,e){const r=e*7;return gn(t,r)}function Jte(t,e){return Zs(t,e*12)}function Xte(t){let e;return t.forEach(function(r){const n=Ge(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function Zte(t){let e;return t.forEach(r=>{const n=Ge(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function ag(t,e){const r=Ge(t),n=Ge(e),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function ere(t){return zn(t,Date.now())}function Mn(t,e){const r=Lu(t),n=Lu(e);return+r==+n}function sN(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function tre(t){if(!sN(t)&&typeof t!="number")return!1;const e=Ge(t);return!isNaN(Number(e))}function Fu(t,e){const r=Ge(t),n=Ge(e),s=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return s*12+a}function rre(t,e,r){const n=Ii(t,r),s=Ii(e,r),a=+n-Vu(n),o=+s-Vu(s);return Math.round((a-o)/nN)}function nre(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function sre(t,e){return+Ge(t)-+Ge(e)}function ire(t){const e=Ge(t);return e.setHours(23,59,59,999),e}function Xx(t){const e=Ge(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function are(t){const e=Ge(t);return+ire(e)==+Xx(e)}function ore(t,e){const r=Ge(t),n=Ge(e),s=ag(r,n),a=Math.abs(Fu(r,n));let o;if(a<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*a);let l=ag(r,n)===-s;are(Ge(t))&&a===1&&ag(t,n)===1&&(l=!1),o=s*(a-Number(l))}return o===0?0:o}function lre(t,e,r){const n=sre(t,e)/1e3;return nre(r==null?void 0:r.roundingMethod)(n)}function Un(t){const e=Ge(t);return e.setDate(1),e.setHours(0,0,0,0),e}function BO(t){const e=Ge(t),r=zn(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function iN(t,e){var l,c,u,d;const r=hd(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ge(t),a=s.getDay(),o=(a<n?-7:0)+6-(a-n);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function qO(t){return iN(t,{weekStartsOn:1})}const cre={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ure=(t,e,r)=>{let n;const s=cre[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function du(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const dre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},fre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mre={date:du({formats:dre,defaultWidth:"full"}),time:du({formats:hre,defaultWidth:"full"}),dateTime:du({formats:fre,defaultWidth:"full"})},pre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gre=(t,e,r,n)=>pre[t];function di(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const vre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},xre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_re={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},jre=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Nre={ordinalNumber:jre,era:di({values:vre,defaultWidth:"wide"}),quarter:di({values:xre,defaultWidth:"wide",argumentCallback:t=>t-1}),month:di({values:yre,defaultWidth:"wide"}),day:di({values:wre,defaultWidth:"wide"}),dayPeriod:di({values:bre,defaultWidth:"wide",formattingValues:_re,defaultFormattingWidth:"wide"})};function hi(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Ere(l,h=>h.test(o)):Sre(l,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function Sre(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Ere(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function WO(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const Cre=/^(\d+)(th|st|nd|rd)?/i,kre=/\d+/i,Tre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ire={any:[/^b/i,/^(a|c)/i]},Are={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Pre={any:[/1/i,/2/i,/3/i,/4/i]},Rre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Dre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ore={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Lre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Vre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Fre={ordinalNumber:WO({matchPattern:Cre,parsePattern:kre,valueCallback:t=>parseInt(t,10)}),era:hi({matchPatterns:Tre,defaultMatchWidth:"wide",parsePatterns:Ire,defaultParseWidth:"any"}),quarter:hi({matchPatterns:Are,defaultMatchWidth:"wide",parsePatterns:Pre,defaultParseWidth:"any",valueCallback:t=>t+1}),month:hi({matchPatterns:Rre,defaultMatchWidth:"wide",parsePatterns:Dre,defaultParseWidth:"any"}),day:hi({matchPatterns:Mre,defaultMatchWidth:"wide",parsePatterns:Ore,defaultParseWidth:"any"}),dayPeriod:hi({matchPatterns:Lre,defaultMatchWidth:"any",parsePatterns:Vre,defaultParseWidth:"any"})},aN={code:"en-US",formatDistance:ure,formatLong:mre,formatRelative:gre,localize:Nre,match:Fre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $re(t){const e=Ge(t);return pi(e,BO(e))+1}function HO(t){const e=Ge(t),r=+Wl(e)-+Qte(e);return Math.round(r/nN)+1}function GO(t,e){var d,h,m,g;const r=Ge(t),n=r.getFullYear(),s=hd(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=zn(t,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const l=Ii(o,e),c=zn(t,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const u=Ii(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Ure(t,e){var l,c,u,d;const r=hd(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=GO(t,e),a=zn(t,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),Ii(a,e)}function KO(t,e){const r=Ge(t),n=+Ii(r,e)-+Ure(r,e);return Math.round(n/nN)+1}function It(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Ma={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return It(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):It(r+1,2)},d(t,e){return It(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return It(t.getHours()%12||12,e.length)},H(t,e){return It(t.getHours(),e.length)},m(t,e){return It(t.getMinutes(),e.length)},s(t,e){return It(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return It(s,e.length)}},jc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},T2={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Ma.y(t,e)},Y:function(t,e,r,n){const s=GO(t,n),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return It(o,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):It(a,e.length)},R:function(t,e){const r=zO(t);return It(r,e.length)},u:function(t,e){const r=t.getFullYear();return It(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return It(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return It(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Ma.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return It(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=KO(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):It(s,e.length)},I:function(t,e,r){const n=HO(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):It(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Ma.d(t,e)},D:function(t,e,r){const n=$re(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):It(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return It(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return It(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return It(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=jc.noon:n===0?s=jc.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=jc.evening:n>=12?s=jc.afternoon:n>=4?s=jc.morning:s=jc.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ma.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Ma.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):It(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):It(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ma.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Ma.s(t,e)},S:function(t,e){return Ma.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return A2(n);case"XXXX":case"XX":return il(n);case"XXXXX":case"XXX":default:return il(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return A2(n);case"xxxx":case"xx":return il(n);case"xxxxx":case"xxx":default:return il(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+I2(n,":");case"OOOO":default:return"GMT"+il(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+I2(n,":");case"zzzz":default:return"GMT"+il(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return It(n,e.length)},T:function(t,e,r){const n=t.getTime();return It(n,e.length)}};function I2(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+e+It(a,2)}function A2(t,e){return t%60===0?(t>0?"-":"+")+It(Math.abs(t)/60,2):il(t,e)}function il(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=It(Math.trunc(n/60),2),a=It(n%60,2);return r+s+e+a}const P2=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},YO=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},zre=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return P2(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",P2(n,e)).replace("{{time}}",YO(s,e))},Bre={p:YO,P:zre},qre=/^D+$/,Wre=/^Y+$/,Hre=["D","DD","YY","YYYY"];function Gre(t){return qre.test(t)}function Kre(t){return Wre.test(t)}function Yre(t,e,r){const n=Qre(t,e,r);if(console.warn(n),Hre.includes(t))throw new RangeError(n)}function Qre(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Jre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zre=/^'([^]*?)'?$/,ene=/''/g,tne=/[a-zA-Z]/;function Ar(t,e,r){var d,h,m,g,x,w,b,y;const n=hd(),s=(r==null?void 0:r.locale)??n.locale??aN,a=(r==null?void 0:r.firstWeekContainsDate)??((h=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((w=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??n.weekStartsOn??((y=(b=n.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,l=Ge(t);if(!tre(l))throw new RangeError("Invalid time value");let c=e.match(Xre).map(v=>{const _=v[0];if(_==="p"||_==="P"){const E=Bre[_];return E(v,s.formatLong)}return v}).join("").match(Jre).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const _=v[0];if(_==="'")return{isToken:!1,value:rne(v)};if(T2[_])return{isToken:!0,value:v};if(_.match(tne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(v=>{if(!v.isToken)return v.value;const _=v.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Kre(_)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Gre(_))&&Yre(_,e,String(t));const E=T2[_[0]];return E(l,_,s.localize,u)}).join("")}function rne(t){const e=t.match(Zre);return e?e[1].replace(ene,"'"):t}function nne(t,e,r){const n=hd(),s=(r==null?void 0:r.locale)??n.locale??aN,a=2520,o=ag(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,u;o>0?(c=Ge(e),u=Ge(t)):(c=Ge(t),u=Ge(e));const d=lre(u,c),h=(Vu(u)-Vu(c))/1e3,m=Math.round((d-h)/60);let g;if(m<2)return r!=null&&r.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",0,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):m===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",m,l);if(m<45)return s.formatDistance("xMinutes",m,l);if(m<90)return s.formatDistance("aboutXHours",1,l);if(m<k2){const x=Math.round(m/60);return s.formatDistance("aboutXHours",x,l)}else{if(m<a)return s.formatDistance("xDays",1,l);if(m<jp){const x=Math.round(m/k2);return s.formatDistance("xDays",x,l)}else if(m<jp*2)return g=Math.round(m/jp),s.formatDistance("aboutXMonths",g,l)}if(g=ore(u,c),g<12){const x=Math.round(m/jp);return s.formatDistance("xMonths",x,l)}else{const x=g%12,w=Math.trunc(g/12);return x<3?s.formatDistance("aboutXYears",w,l):x<9?s.formatDistance("overXYears",w,l):s.formatDistance("almostXYears",w+1,l)}}function fd(t,e){return nne(t,ere(t),e)}function sne(t){const e=Ge(t),r=e.getFullYear(),n=e.getMonth(),s=zn(t,0);return s.setFullYear(r,n+1,0),s.setHours(0,0,0,0),s.getDate()}function ine(t){return Math.trunc(+Ge(t)/1e3)}function ane(t){const e=Ge(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function one(t,e){return rre(ane(t),Un(t),e)+1}function Gb(t,e){const r=Ge(t),n=Ge(e);return r.getTime()>n.getTime()}function QO(t,e){const r=Ge(t),n=Ge(e);return+r<+n}function oN(t,e){const r=Ge(t),n=Ge(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function lne(t,e){const r=Ge(t),n=Ge(e);return r.getFullYear()===n.getFullYear()}function z0(t,e){return gn(t,-e)}function B0(t,e){const r=Ge(t),n=r.getFullYear(),s=r.getDate(),a=zn(t,0);a.setFullYear(n,e,15),a.setHours(0,0,0,0);const o=sne(a);return r.setMonth(e,Math.min(s,o)),r}function R2(t,e){const r=Ge(t);return isNaN(+r)?zn(t,NaN):(r.setFullYear(e),r)}const cne={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},une=(t,e,r)=>{let n;const s=cne[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+n:"il y a "+n:n},dne={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},hne={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},fne={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mne={date:du({formats:dne,defaultWidth:"full"}),time:du({formats:hne,defaultWidth:"full"}),dateTime:du({formats:fne,defaultWidth:"full"})},pne={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},gne=(t,e,r,n)=>pne[t],vne={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},xne={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},yne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},wne={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},bne={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},_ne=(t,e)=>{const r=Number(t),n=e==null?void 0:e.unit;if(r===0)return"0";const s=["year","week","hour","minute","second"];let a;return r===1?a=n&&s.includes(n)?"ère":"er":a="ème",r+a},jne=["MMM","MMMM"],Nne={preprocessor:(t,e)=>t.getDate()===1||!e.some(n=>n.isToken&&jne.includes(n.value))?e:e.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:_ne,era:di({values:vne,defaultWidth:"wide"}),quarter:di({values:xne,defaultWidth:"wide",argumentCallback:t=>t-1}),month:di({values:yne,defaultWidth:"wide"}),day:di({values:wne,defaultWidth:"wide"}),dayPeriod:di({values:bne,defaultWidth:"wide"})},Sne=/^(\d+)(ième|ère|ème|er|e)?/i,Ene=/\d+/i,Cne={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},kne={any:[/^av/i,/^ap/i]},Tne={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},Ine={any:[/1/i,/2/i,/3/i,/4/i]},Ane={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},Pne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Rne={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},Dne={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Mne={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},One={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},Lne={ordinalNumber:WO({matchPattern:Sne,parsePattern:Ene,valueCallback:t=>parseInt(t)}),era:hi({matchPatterns:Cne,defaultMatchWidth:"wide",parsePatterns:kne,defaultParseWidth:"any"}),quarter:hi({matchPatterns:Tne,defaultMatchWidth:"wide",parsePatterns:Ine,defaultParseWidth:"any",valueCallback:t=>t+1}),month:hi({matchPatterns:Ane,defaultMatchWidth:"wide",parsePatterns:Pne,defaultParseWidth:"any"}),day:hi({matchPatterns:Rne,defaultMatchWidth:"wide",parsePatterns:Dne,defaultParseWidth:"any"}),dayPeriod:hi({matchPatterns:Mne,defaultMatchWidth:"any",parsePatterns:One,defaultParseWidth:"any"})},nn={code:"fr",formatDistance:une,formatLong:mne,formatRelative:gne,localize:Nne,match:Lne,options:{weekStartsOn:1,firstWeekContainsDate:4}},bf=({listing:t})=>{var h,m,g,x,w,b;const e=(y,v)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const _=v||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:_}).format(y)}catch{return`${y} €`}},r=y=>{switch(y){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-blue-100 text-blue-700 border-blue-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},n=y=>{switch(y){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return y}},s=()=>{switch(t.transactionType){case"donation":return i.jsx(Du,{className:"w-3 h-3"});case"exchange":return i.jsx(va,{className:"w-3 h-3"});default:return null}},a=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},o=y=>{try{let v;if(!y)return"Date inconnue";if(y instanceof Date)v=y;else if(typeof y=="string"||typeof y=="number")v=new Date(y);else if(y&&typeof y.toDate=="function")v=y.toDate();else if(y&&typeof y=="object"&&y.seconds)v=new Date(y.seconds*1e3);else return"Date inconnue";return isNaN(v.getTime())?"Date inconnue":fd(v,{addSuffix:!0,locale:nn})}catch(v){return console.warn("Error formatting date:",v),"Date inconnue"}},l=t.price||0,c=t.currency||"EUR",u=t.condition||"good",d=t.transactionType||"sale";return i.jsxs(Q,{className:"group relative bg-card rounded-xl border border-border hover:border-accent/30 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[i.jsx(ye,{to:`/listing/${t.id}`,className:"block",children:i.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100 dark:bg-gray-800",children:[i.jsx("img",{src:((h=t.images)==null?void 0:h[0])||"/placeholder.jpg",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),i.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[i.jsx($O,{listing:t,size:"sm",className:"bg-background/80 dark:bg-gray-900/60 backdrop-blur-sm hover:bg-background shadow-sm border-0 rounded-full p-2"}),i.jsx(UO,{listing:t,size:"sm",className:"bg-background/80 dark:bg-gray-900/60 backdrop-blur-sm hover:bg-background shadow-sm border-0 rounded-full p-2"})]}),d!=="sale"&&i.jsxs(Ie,{className:`absolute top-3 left-3 ${a()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[s(),i.jsx("span",{className:"ml-1.5 text-sm",children:d==="donation"?"Don":"Troc"})]}),d==="sale"&&i.jsx(Ie,{className:`absolute top-3 left-3 ${r(u)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:n(u)}),t.environmentalImpact&&i.jsxs(Ie,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[i.jsx(Hs,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO₂"]}),t.images&&t.images.length>1&&i.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),i.jsxs(J,{className:"p-6 space-y-4",children:[i.jsxs(ye,{to:`/listing/${t.id}`,className:"block",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:`text-2xl font-bold ${d==="donation"?"text-green-600":d==="exchange"?"text-purple-600":"text-foreground"}`,children:e(l,c)}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground bg-muted px-2.5 py-1 rounded-full",children:[i.jsx(Ru,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"font-medium",children:t.views||0})]})]}),i.jsx("h3",{className:"text-lg font-semibold text-foreground line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),d==="exchange"&&t.exchangeFor&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground bg-purple-50/80 dark:bg-purple-500/10 px-3 py-2 rounded-lg mb-4",children:[i.jsx(va,{className:"w-4 h-4 text-purple-500"}),i.jsxs("span",{children:[i.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-4",children:[i.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[i.jsx(Br,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),i.jsx("span",{className:"truncate",children:((m=t.location)==null?void 0:m.campus)||((g=t.location)!=null&&g.city&&((x=t.location)!=null&&x.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spécifiée")})]}),i.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[i.jsx(ur,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{className:"whitespace-nowrap",children:o(t.createdAt)})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsxs(Jn,{className:"w-9 h-9 border-2 border-border",children:[i.jsx(ba,{src:t.sellerAvatar}),i.jsx(Pn,{className:"text-sm bg-muted text-muted-foreground font-medium",children:((b=(w=t.sellerName)==null?void 0:w[0])==null?void 0:b.toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"text-sm font-medium text-foreground truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&i.jsx(Et,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),i.jsx("span",{className:"text-xs text-muted-foreground truncate block text-left",children:t.sellerUniversity||"Université non spécifiée"})]})]}),t.aiPriceEstimate&&d==="sale"&&i.jsx(Ie,{className:"bg-green-50 dark:bg-emerald-900/20 text-green-700 dark:text-emerald-300 border-green-200 dark:border-emerald-800 hover:bg-green-100 dark:hover:bg-emerald-900/30 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste ✓"})]})]})]})};var JO={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},D2=Ce.createContext&&Ce.createContext(JO),Vne=["attr","size","title"];function Fne(t,e){if(t==null)return{};var r=$ne(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $ne(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function pv(){return pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pv.apply(this,arguments)}function M2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function gv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M2(Object(r),!0).forEach(function(n){Une(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Une(t,e,r){return e=zne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zne(t){var e=Bne(t,"string");return typeof e=="symbol"?e:e+""}function Bne(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XO(t){return t&&t.map((e,r)=>Ce.createElement(e.tag,gv({key:r},e.attr),XO(e.child)))}function Uo(t){return e=>Ce.createElement(qne,pv({attr:gv({},t.attr)},e),XO(t.child))}function qne(t){var e=r=>{var{attr:n,size:s,title:a}=t,o=Fne(t,Vne),l=s||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),Ce.createElement("svg",pv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:gv(gv({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&Ce.createElement("title",null,a),t.children)};return D2!==void 0?Ce.createElement(D2.Consumer,null,r=>e(r)):e(JO)}function Wne(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function Hne(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function Gne(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function Kne(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function Yne(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function Qne(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function Jne(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function Xne(t){return Uo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const Zne=()=>{const[t,e]=p.useState(""),r=Dr(),n=s=>{s.preventDefault(),t.trim()&&r(`/listings?search=${encodeURIComponent(t.trim())}`)};return i.jsx("form",{onSubmit:n,className:"w-full max-w-2xl mx-auto",children:i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(Ir,{className:"absolute left-3 text-muted-foreground w-4 h-4"}),i.jsx(we,{type:"text",placeholder:"Rechercher des annonces, services, logements...",value:t,onChange:s=>e(s.target.value),className:"pl-10 pr-24 h-12 text-base"}),i.jsx($,{type:"submit",className:"absolute right-1 h-10 px-4 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:"Rechercher"})]})})},ese={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/troc.svg"},tse=({className:t})=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:t}),rse=({className:t})=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Give Up",className:t}),nse=({className:t})=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Exchange",className:t}),sse=[{id:"electronics",name:"Électronique",icon:Kne,color:"text-blue-600",description:"Ordinateurs, téléphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:Hne,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:Wne,color:"text-blue-600",description:"Meubles, déco, électroménager"},{id:"housing",name:"Logement",icon:Gne,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:Yne,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:Qne,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:Xne,color:"text-green-600",description:"Donnez ce dont vous n'avez plus besoin"},{id:"exchange",name:"Échanges",icon:Jne,color:"text-purple-600",description:"Échangez vos objets contre d'autres"}],ise=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",link:"/create",icon:tse,color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",link:"/create?type=donation",icon:rse,color:"border-2 border-green-500 text-green-50"},{title:"Échanger facilement",description:"Trouvez des échanges équitables",link:"/create?type=exchange",icon:nse,color:"border-2 border-green-500 text-green-50"}],ase=[{title:"Vérification étudiante",description:"Tous nos utilisateurs sont vérifiés avec leur carte étudiante pour garantir une communauté sûre et authentique.",icon:Et},{title:"Impact écologique",description:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental en temps réel.",icon:Hs},{title:"Communauté locale",description:"Connectez-vous avec des étudiants de votre région pour des échanges rapides et des rencontres enrichissantes.",icon:ji},{title:"Sécurité garantie",description:"Système de notation et de modération pour assurer des transactions sûres et transparentes.",icon:ND}],ose=()=>{const{featuredListings:t,fetchFeaturedListings:e}=vm();return p.useEffect(()=>{e()},[e]),i.jsx("div",{className:"w-full min-h-screen bg-gray-50 dark:bg-gray-950 overflow-x-hidden",children:i.jsxs("div",{className:"w-full max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 py-3 sm:py-4 overflow-hidden",children:[i.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 rounded-lg sm:rounded-xl overflow-hidden mb-8",children:i.jsx("div",{className:"w-full py-6 sm:py-8 lg:py-12 px-3 sm:px-6 lg:px-8 overflow-hidden",children:i.jsxs("div",{className:"w-full max-w-4xl mx-auto text-center overflow-hidden",children:[i.jsx("div",{className:"flex items-center justify-center mb-3 sm:mb-4 lg:mb-6",children:i.jsxs(Ie,{className:"bg-green-100 text-green-800 border-green-200 px-2 sm:px-3 lg:px-4 py-1 sm:py-1.5 lg:py-2 text-xs sm:text-sm",children:[i.jsx(Et,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Communauté 100% étudiants vérifiés"}),i.jsx("span",{className:"sm:hidden",children:"Étudiants vérifiés"})]})}),i.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold mb-3 sm:mb-4 lg:mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent px-2",children:"La marketplace des étudiants"}),i.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-muted-foreground mb-4 sm:mb-6 lg:mb-8 max-w-2xl mx-auto px-2",children:"Achetez, vendez, donnez et échangez entre étudiants certifiés de votre région. Sécurisé, écologique et pensé pour la vie étudiante."}),i.jsx("div",{className:"mb-4 sm:mb-6 lg:mb-8 px-2 sm:px-4",children:i.jsx(Zne,{})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 sm:mb-8",children:ise.map((r,n)=>i.jsx(ye,{to:r.link,className:"group",children:i.jsx(Q,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:i.jsxs(J,{className:"p-3 sm:p-4 text-center",children:[i.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 ${r.color} rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-3 group-hover:scale-110 transition-transform`,children:i.jsx(r.icon,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),i.jsx("h3",{className:"font-semibold mb-1 text-sm sm:text-base",children:r.title}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:r.description})]})})},n))}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center px-2",children:[i.jsx($,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary w-full sm:w-auto text-sm sm:text-base",children:i.jsxs(ye,{to:"/listings",children:["Parcourir les annonces",i.jsx(Ul,{className:"w-4 h-4 ml-2"})]})}),i.jsx($,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto text-sm sm:text-base",children:i.jsx(ye,{to:"/auth?mode=signup",children:"Rejoindre la communauté"})})]})]})})}),i.jsx("section",{className:"py-8 sm:py-10 lg:py-16 px-2 sm:px-4",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center mb-2 sm:mb-3 lg:mb-4",children:"Catégories étudiantes"}),i.jsx("p",{className:"text-center text-muted-foreground mb-6 sm:mb-8 lg:mb-12 max-w-2xl mx-auto text-xs sm:text-sm lg:text-base px-2",children:"Des catégories pensées spécifiquement pour la vie étudiante, avec des filtres adaptés à vos besoins"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:sse.map(r=>{let n;return r.id==="jobs"?n="/jobs":r.id==="housing"?n="/housing":n=`/listings?category=${r.id}`,i.jsx(ye,{to:n,className:"group",children:i.jsx(Q,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:i.jsxs(J,{className:"p-3 sm:p-4 text-center",children:[i.jsx("img",{src:ese[r.id],alt:r.name,className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 mx-auto mb-2 sm:mb-3"}),i.jsx("h3",{className:"font-semibold text-xs sm:text-sm lg:text-base mb-1",children:r.name}),i.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:r.description})]})})},r.id)})})]})}),t.length>0&&i.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-muted/30",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto mb-6",children:[i.jsx("div",{className:"text-center sm:text-left",children:i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-1 sm:mb-2",children:"Annonces récentes"})}),i.jsx($,{variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:i.jsxs(ye,{to:"/listings",children:["Voir tout",i.jsx(Ul,{className:"w-4 h-4 ml-2"})]})})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:t.slice(0,6).map(r=>i.jsx(bf,{listing:r},r.id))})]})}),i.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center mb-3 sm:mb-4",children:"Pourquoi StudyMarket ?"}),i.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-12 max-w-2xl mx-auto text-sm sm:text-base px-2",children:"Une plateforme pensée par et pour les étudiants, avec des fonctionnalités uniques pour votre sécurité et votre tranquillité d'esprit"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:ase.map((r,n)=>i.jsx(Q,{className:"border-0 shadow-none",children:i.jsx(J,{className:"p-4 sm:p-6",children:i.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4",children:[i.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(r.icon,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-primary"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-semibold mb-1 sm:mb-2",children:r.title}),i.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-muted-foreground",children:r.description})]})]})})},n))})]})}),i.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 rounded-lg sm:rounded-xl",children:i.jsx("div",{className:"container mx-auto text-center",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsx(Hs,{className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 text-green-600 mx-auto mb-4 sm:mb-6"}),i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-3 sm:mb-4",children:"Votre impact écologique compte"}),i.jsx("p",{className:"text-sm sm:text-base lg:text-xl text-muted-foreground mb-6 sm:mb-8 px-2",children:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental et découvrez combien de CO₂ vous économisez grâce à vos échanges étudiants."}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"2.5T"}),i.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"CO₂ économisé par la communauté"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"15K"}),i.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Objets donnés cette année"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"8K"}),i.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Étudiants engagés"})]})]}),i.jsx($,{size:"lg",variant:"outline",asChild:!0,className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white w-full sm:w-auto justify-center",children:i.jsx(ye,{to:"/impact",className:"cursor-pointer",children:"Découvrir mon impact"})})]})})}),i.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-gradient-to-r from-primary to-secondary rounded-lg sm:rounded-xl",children:i.jsxs("div",{className:"container mx-auto text-center",children:[i.jsx(ji,{className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 text-white mx-auto mb-4 sm:mb-6"}),i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-3 sm:mb-4",children:"Rejoignez la communauté étudiante"}),i.jsx("p",{className:"text-sm sm:text-base lg:text-xl text-white/90 mb-6 sm:mb-8 max-w-2xl mx-auto px-2",children:"Plus de 10 000 étudiants font déjà confiance à StudyMarket pour leurs achats, ventes et échanges. Rejoignez une communauté sûre, vérifiée et solidaire."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[i.jsx($,{size:"lg",variant:"secondary",asChild:!0,className:"w-full sm:w-auto",children:i.jsxs(ye,{to:"/auth?mode=signup",children:[i.jsx(Et,{className:"w-4 h-4 mr-2"}),"Inscription vérifiée"]})}),i.jsx($,{size:"lg",variant:"outline",className:"border-white text-white bg-transparent hover:bg-white hover:text-primary w-full sm:w-auto",asChild:!0,children:i.jsx(ye,{to:"/listings",children:"Commencer à explorer"})})]})]})})]})})};function _f(t,[e,r]){return Math.min(r,Math.max(e,t))}function Zx(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var lse="VisuallyHidden",ZO=p.forwardRef((t,e)=>i.jsx(De.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));ZO.displayName=lse;var cse=[" ","Enter","ArrowUp","ArrowDown"],use=[" ","Enter"],xm="Select",[ey,ty,dse]=cm(xm),[md,Jfe]=ls(xm,[dse,cd]),ry=cd(),[hse,zo]=md(xm),[fse,mse]=md(xm),e3=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:g,form:x}=t,w=ry(e),[b,y]=p.useState(null),[v,_]=p.useState(null),[E,C]=p.useState(!1),D=oc(u),[T=!1,k]=is({prop:n,defaultProp:s,onChange:a}),[R,S]=is({prop:o,defaultProp:l,onChange:c}),A=p.useRef(null),P=b?x||!!b.closest("form"):!0,[N,V]=p.useState(new Set),U=Array.from(N).map(H=>H.props.value).join(";");return i.jsx(qj,{...w,children:i.jsxs(hse,{required:g,scope:e,trigger:b,onTriggerChange:y,valueNode:v,onValueNodeChange:_,valueNodeHasChildren:E,onValueNodeHasChildrenChange:C,contentId:ts(),value:R,onValueChange:S,open:T,onOpenChange:k,dir:D,triggerPointerDownPosRef:A,disabled:m,children:[i.jsx(ey.Provider,{scope:e,children:i.jsx(fse,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(H=>{V(F=>new Set(F).add(H))},[]),onNativeOptionRemove:p.useCallback(H=>{V(F=>{const L=new Set(F);return L.delete(H),L})},[]),children:r})}),P?i.jsxs(S3,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:R,onChange:H=>S(H.target.value),disabled:m,form:x,children:[R===void 0?i.jsx("option",{value:""}):null,Array.from(N)]},U):null]})})};e3.displayName=xm;var t3="SelectTrigger",r3=p.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,a=ry(r),o=zo(t3,r),l=o.disabled||n,c=Je(e,o.onTriggerChange),u=ty(r),d=p.useRef("touch"),[h,m,g]=E3(w=>{const b=u().filter(_=>!_.disabled),y=b.find(_=>_.value===o.value),v=C3(b,w,y);v!==void 0&&o.onValueChange(v.value)}),x=w=>{l||(o.onOpenChange(!0),g()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return i.jsx(Bx,{asChild:!0,...a,children:i.jsx(De.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":N3(o.value)?"":void 0,...s,ref:c,onClick:pe(s.onClick,w=>{w.currentTarget.focus(),d.current!=="mouse"&&x(w)}),onPointerDown:pe(s.onPointerDown,w=>{d.current=w.pointerType;const b=w.target;b.hasPointerCapture(w.pointerId)&&b.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(x(w),w.preventDefault())}),onKeyDown:pe(s.onKeyDown,w=>{const b=h.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&m(w.key),!(b&&w.key===" ")&&cse.includes(w.key)&&(x(),w.preventDefault())})})})});r3.displayName=t3;var n3="SelectValue",s3=p.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:a,placeholder:o="",...l}=t,c=zo(n3,r),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=Je(e,c.onValueNodeChange);return Rr(()=>{u(d)},[u,d]),i.jsx(De.span,{...l,ref:h,style:{pointerEvents:"none"},children:N3(c.value)?i.jsx(i.Fragment,{children:o}):a})});s3.displayName=n3;var pse="SelectIcon",i3=p.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return i.jsx(De.span,{"aria-hidden":!0,...s,ref:e,children:n||"▼"})});i3.displayName=pse;var gse="SelectPortal",a3=t=>i.jsx(fm,{asChild:!0,...t});a3.displayName=gse;var Hl="SelectContent",o3=p.forwardRef((t,e)=>{const r=zo(Hl,t.__scopeSelect),[n,s]=p.useState();if(Rr(()=>{s(new DocumentFragment)},[]),!r.open){const a=n;return a?Qu.createPortal(i.jsx(l3,{scope:t.__scopeSelect,children:i.jsx(ey.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(c3,{...t,ref:e})});o3.displayName=Hl;var Ds=10,[l3,Bo]=md(Hl),vse="SelectContentImpl",c3=p.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:w,avoidCollisions:b,...y}=t,v=zo(Hl,r),[_,E]=p.useState(null),[C,D]=p.useState(null),T=Je(e,_e=>E(_e)),[k,R]=p.useState(null),[S,A]=p.useState(null),P=ty(r),[N,V]=p.useState(!1),U=p.useRef(!1);p.useEffect(()=>{if(_)return Hx(_)},[_]),Vx();const H=p.useCallback(_e=>{const[Xe,...te]=P().map(le=>le.ref.current),[me]=te.slice(-1),K=document.activeElement;for(const le of _e)if(le===K||(le==null||le.scrollIntoView({block:"nearest"}),le===Xe&&C&&(C.scrollTop=0),le===me&&C&&(C.scrollTop=C.scrollHeight),le==null||le.focus(),document.activeElement!==K))return},[P,C]),F=p.useCallback(()=>H([k,_]),[H,k,_]);p.useEffect(()=>{N&&F()},[N,F]);const{onOpenChange:L,triggerPointerDownPosRef:W}=v;p.useEffect(()=>{if(_){let _e={x:0,y:0};const Xe=me=>{var K,le;_e={x:Math.abs(Math.round(me.pageX)-(((K=W.current)==null?void 0:K.x)??0)),y:Math.abs(Math.round(me.pageY)-(((le=W.current)==null?void 0:le.y)??0))}},te=me=>{_e.x<=10&&_e.y<=10?me.preventDefault():_.contains(me.target)||L(!1),document.removeEventListener("pointermove",Xe),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",Xe),document.addEventListener("pointerup",te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Xe),document.removeEventListener("pointerup",te,{capture:!0})}}},[_,L,W]),p.useEffect(()=>{const _e=()=>L(!1);return window.addEventListener("blur",_e),window.addEventListener("resize",_e),()=>{window.removeEventListener("blur",_e),window.removeEventListener("resize",_e)}},[L]);const[z,X]=E3(_e=>{const Xe=P().filter(K=>!K.disabled),te=Xe.find(K=>K.ref.current===document.activeElement),me=C3(Xe,_e,te);me&&setTimeout(()=>me.ref.current.focus())}),oe=p.useCallback((_e,Xe,te)=>{const me=!U.current&&!te;(v.value!==void 0&&v.value===Xe||me)&&(R(_e),me&&(U.current=!0))},[v.value]),Se=p.useCallback(()=>_==null?void 0:_.focus(),[_]),Ze=p.useCallback((_e,Xe,te)=>{const me=!U.current&&!te;(v.value!==void 0&&v.value===Xe||me)&&A(_e)},[v.value]),mt=n==="popper"?Kb:u3,st=mt===Kb?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:w,avoidCollisions:b}:{};return i.jsx(l3,{scope:r,content:_,viewport:C,onViewportChange:D,itemRefCallback:oe,selectedItem:k,onItemLeave:Se,itemTextRefCallback:Ze,focusSelectedItem:F,selectedItemText:S,position:n,isPositioned:N,searchRef:z,children:i.jsx(mm,{as:xa,allowPinchZoom:!0,children:i.jsx(dm,{asChild:!0,trapped:v.open,onMountAutoFocus:_e=>{_e.preventDefault()},onUnmountAutoFocus:pe(s,_e=>{var Xe;(Xe=v.trigger)==null||Xe.focus({preventScroll:!0}),_e.preventDefault()}),children:i.jsx(um,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:_e=>_e.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:i.jsx(mt,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:_e=>_e.preventDefault(),...y,...st,onPlaced:()=>V(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:pe(y.onKeyDown,_e=>{const Xe=_e.ctrlKey||_e.altKey||_e.metaKey;if(_e.key==="Tab"&&_e.preventDefault(),!Xe&&_e.key.length===1&&X(_e.key),["ArrowUp","ArrowDown","Home","End"].includes(_e.key)){let me=P().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(_e.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(_e.key)){const K=_e.target,le=me.indexOf(K);me=me.slice(le+1)}setTimeout(()=>H(me)),_e.preventDefault()}})})})})})})});c3.displayName=vse;var xse="SelectItemAlignedPosition",u3=p.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,a=zo(Hl,r),o=Bo(Hl,r),[l,c]=p.useState(null),[u,d]=p.useState(null),h=Je(e,T=>d(T)),m=ty(r),g=p.useRef(!1),x=p.useRef(!0),{viewport:w,selectedItem:b,selectedItemText:y,focusSelectedItem:v}=o,_=p.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&w&&b&&y){const T=a.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),R=a.valueNode.getBoundingClientRect(),S=y.getBoundingClientRect();if(a.dir!=="rtl"){const K=S.left-k.left,le=R.left-K,q=T.left-le,Z=T.width+q,fe=Math.max(Z,k.width),Ee=window.innerWidth-Ds,We=_f(le,[Ds,Math.max(Ds,Ee-fe)]);l.style.minWidth=Z+"px",l.style.left=We+"px"}else{const K=k.right-S.right,le=window.innerWidth-R.right-K,q=window.innerWidth-T.right-le,Z=T.width+q,fe=Math.max(Z,k.width),Ee=window.innerWidth-Ds,We=_f(le,[Ds,Math.max(Ds,Ee-fe)]);l.style.minWidth=Z+"px",l.style.right=We+"px"}const A=m(),P=window.innerHeight-Ds*2,N=w.scrollHeight,V=window.getComputedStyle(u),U=parseInt(V.borderTopWidth,10),H=parseInt(V.paddingTop,10),F=parseInt(V.borderBottomWidth,10),L=parseInt(V.paddingBottom,10),W=U+H+N+L+F,z=Math.min(b.offsetHeight*5,W),X=window.getComputedStyle(w),oe=parseInt(X.paddingTop,10),Se=parseInt(X.paddingBottom,10),Ze=T.top+T.height/2-Ds,mt=P-Ze,st=b.offsetHeight/2,_e=b.offsetTop+st,Xe=U+H+_e,te=W-Xe;if(Xe<=Ze){const K=A.length>0&&b===A[A.length-1].ref.current;l.style.bottom="0px";const le=u.clientHeight-w.offsetTop-w.offsetHeight,q=Math.max(mt,st+(K?Se:0)+le+F),Z=Xe+q;l.style.height=Z+"px"}else{const K=A.length>0&&b===A[0].ref.current;l.style.top="0px";const q=Math.max(Ze,U+w.offsetTop+(K?oe:0)+st)+te;l.style.height=q+"px",w.scrollTop=Xe-Ze+w.offsetTop}l.style.margin=`${Ds}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=P+"px",n==null||n(),requestAnimationFrame(()=>g.current=!0)}},[m,a.trigger,a.valueNode,l,u,w,b,y,a.dir,n]);Rr(()=>_(),[_]);const[E,C]=p.useState();Rr(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const D=p.useCallback(T=>{T&&x.current===!0&&(_(),v==null||v(),x.current=!1)},[_,v]);return i.jsx(wse,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:D,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:i.jsx(De.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});u3.displayName=xse;var yse="SelectPopperPosition",Kb=p.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Ds,...a}=t,o=ry(r);return i.jsx(Wj,{...o,...a,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Kb.displayName=yse;var[wse,lN]=md(Hl,{}),Yb="SelectViewport",d3=p.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,a=Bo(Yb,r),o=lN(Yb,r),l=Je(e,a.onViewportChange),c=p.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),i.jsx(ey.Slot,{scope:r,children:i.jsx(De.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:pe(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(c.current-d.scrollTop);if(g>0){const x=window.innerHeight-Ds*2,w=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),y=Math.max(w,b);if(y<x){const v=y+g,_=Math.min(x,v),E=v-_;h.style.height=_+"px",h.style.bottom==="0px"&&(d.scrollTop=E>0?E:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});d3.displayName=Yb;var h3="SelectGroup",[bse,_se]=md(h3),jse=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=ts();return i.jsx(bse,{scope:r,id:s,children:i.jsx(De.div,{role:"group","aria-labelledby":s,...n,ref:e})})});jse.displayName=h3;var f3="SelectLabel",m3=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=_se(f3,r);return i.jsx(De.div,{id:s.id,...n,ref:e})});m3.displayName=f3;var vv="SelectItem",[Nse,p3]=md(vv),g3=p.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:a,...o}=t,l=zo(vv,r),c=Bo(vv,r),u=l.value===n,[d,h]=p.useState(a??""),[m,g]=p.useState(!1),x=Je(e,v=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,v,n,s)}),w=ts(),b=p.useRef("touch"),y=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Nse,{scope:r,value:n,disabled:s,textId:w,isSelected:u,onItemTextChange:p.useCallback(v=>{h(_=>_||((v==null?void 0:v.textContent)??"").trim())},[]),children:i.jsx(ey.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:i.jsx(De.div,{role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:x,onFocus:pe(o.onFocus,()=>g(!0)),onBlur:pe(o.onBlur,()=>g(!1)),onClick:pe(o.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:pe(o.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:pe(o.onPointerDown,v=>{b.current=v.pointerType}),onPointerMove:pe(o.onPointerMove,v=>{var _;b.current=v.pointerType,s?(_=c.onItemLeave)==null||_.call(c):b.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(o.onPointerLeave,v=>{var _;v.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:pe(o.onKeyDown,v=>{var E;((E=c.searchRef)==null?void 0:E.current)!==""&&v.key===" "||(use.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});g3.displayName=vv;var ah="SelectItemText",v3=p.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...a}=t,o=zo(ah,r),l=Bo(ah,r),c=p3(ah,r),u=mse(ah,r),[d,h]=p.useState(null),m=Je(e,y=>h(y),c.onItemTextChange,y=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,y,c.value,c.disabled)}),g=d==null?void 0:d.textContent,x=p.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:w,onNativeOptionRemove:b}=u;return Rr(()=>(w(x),()=>b(x)),[w,b,x]),i.jsxs(i.Fragment,{children:[i.jsx(De.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Qu.createPortal(a.children,o.valueNode):null]})});v3.displayName=ah;var x3="SelectItemIndicator",y3=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return p3(x3,r).isSelected?i.jsx(De.span,{"aria-hidden":!0,...n,ref:e}):null});y3.displayName=x3;var Qb="SelectScrollUpButton",w3=p.forwardRef((t,e)=>{const r=Bo(Qb,t.__scopeSelect),n=lN(Qb,t.__scopeSelect),[s,a]=p.useState(!1),o=Je(e,n.onScrollButtonChange);return Rr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(_3,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});w3.displayName=Qb;var Jb="SelectScrollDownButton",b3=p.forwardRef((t,e)=>{const r=Bo(Jb,t.__scopeSelect),n=lN(Jb,t.__scopeSelect),[s,a]=p.useState(!1),o=Je(e,n.onScrollButtonChange);return Rr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(_3,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});b3.displayName=Jb;var _3=p.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,a=Bo("SelectScrollButton",r),o=p.useRef(null),l=ty(r),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Rr(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(De.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:pe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:pe(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:pe(s.onPointerLeave,()=>{c()})})}),Sse="SelectSeparator",j3=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return i.jsx(De.div,{"aria-hidden":!0,...n,ref:e})});j3.displayName=Sse;var Xb="SelectArrow",Ese=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=ry(r),a=zo(Xb,r),o=Bo(Xb,r);return a.open&&o.position==="popper"?i.jsx(Hj,{...s,...n,ref:e}):null});Ese.displayName=Xb;function N3(t){return t===""||t===void 0}var S3=p.forwardRef((t,e)=>{const{value:r,...n}=t,s=p.useRef(null),a=Je(e,s),o=Zx(r);return p.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&d){const h=new Event("change",{bubbles:!0});d.call(l,r),l.dispatchEvent(h)}},[o,r]),i.jsx(ZO,{asChild:!0,children:i.jsx("select",{...n,ref:a,defaultValue:r})})});S3.displayName="BubbleSelect";function E3(t){const e=_r(t),r=p.useRef(""),n=p.useRef(0),s=p.useCallback(o=>{const l=r.current+o;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function C3(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=Cse(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function Cse(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var kse=e3,k3=r3,Tse=s3,Ise=i3,Ase=a3,T3=o3,Pse=d3,I3=m3,A3=g3,Rse=v3,Dse=y3,P3=w3,R3=b3,D3=j3;const dt=kse,ht=Tse,at=p.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(k3,{ref:n,className:Le("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,i.jsx(Ise,{asChild:!0,children:i.jsx(Bee,{className:"h-4 w-4 opacity-50"})})]}));at.displayName=k3.displayName;const M3=p.forwardRef(({className:t,...e},r)=>i.jsx(P3,{ref:r,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Qee,{})}));M3.displayName=P3.displayName;const O3=p.forwardRef(({className:t,...e},r)=>i.jsx(R3,{ref:r,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(_O,{})}));O3.displayName=R3.displayName;const ot=p.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>i.jsx(Ase,{children:i.jsxs(T3,{ref:s,className:Le("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[i.jsx(M3,{}),i.jsx(Pse,{className:Le("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(O3,{})]})}));ot.displayName=T3.displayName;const Mse=p.forwardRef(({className:t,...e},r)=>i.jsx(I3,{ref:r,className:Le("px-2 py-1.5 text-sm font-semibold",t),...e}));Mse.displayName=I3.displayName;const ie=p.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(A3,{ref:n,className:Le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[i.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Dse,{children:i.jsx(tN,{className:"h-4 w-4"})})}),i.jsx(Rse,{children:e})]}));ie.displayName=A3.displayName;const Ose=p.forwardRef(({className:t,...e},r)=>i.jsx(D3,{ref:r,className:Le("-mx-1 my-1 h-px bg-muted",t),...e}));Ose.displayName=D3.displayName;var Lse="Separator",O2="horizontal",Vse=["horizontal","vertical"],L3=p.forwardRef((t,e)=>{const{decorative:r,orientation:n=O2,...s}=t,a=Fse(n)?n:O2,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(De.div,{"data-orientation":a,...l,...s,ref:e})});L3.displayName=Lse;function Fse(t){return Vse.includes(t)}var V3=L3;const ps=p.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},s)=>i.jsx(V3,{ref:s,decorative:r,orientation:e,className:Le("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));ps.displayName=V3.displayName;const q0=[{value:"all",label:"Toutes catégories",icon:null},{value:"electronics",label:"Électronique",icon:ac},{value:"vehicles",label:"Véhicules",icon:kD},{value:"real-estate",label:"Immobilier",icon:ui},{value:"fashion",label:"Mode",icon:Dj},{value:"gaming",label:"Jeux & Jouets",icon:sQ},{value:"baby",label:"Bébé & Enfant",icon:HY},{value:"business",label:"Équipement Pro",icon:kh}],$se=[{value:"new",label:"Neuf"},{value:"like-new",label:"Comme neuf"},{value:"good",label:"Bon état"},{value:"fair",label:"État correct"},{value:"poor",label:"Mauvais état"}],Use=[{value:"relevance",label:"Pertinence"},{value:"date",label:"Plus récent"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix décroissant"}],zse=()=>{var y;const[t,e]=nx(),{listings:r,loading:n,hasMore:s,fetchListings:a,searchListings:o}=vm(),[l,c]=p.useState({query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"}),[u,d]=p.useState("grid"),[h,m]=p.useState(!1);p.useEffect(()=>{const v={query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"};c(v),o(v)},[t,o]);const g=()=>{const v={...l};o(v);const _=new URLSearchParams;v.query&&_.set("q",v.query),v.category&&_.set("category",v.category),e(_)},x=(v,_)=>{const E={...l,[v]:_};c(E)},w=()=>{a(l,!1)},b=()=>{const v={query:"",sortBy:"date"};c(v),o(v),e({})};return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Toutes les annonces"}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Ir,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(we,{type:"text",placeholder:"Rechercher des articles...",value:l.query||"",onChange:v=>x("query",v.target.value),onKeyPress:v=>v.key==="Enter"&&g(),className:"pl-10"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs($,{onClick:g,className:"whitespace-nowrap",children:[i.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Rechercher"]}),i.jsxs($,{variant:"outline",onClick:()=>m(!h),className:"lg:hidden",children:[i.jsx(Rx,{className:"w-4 h-4 mr-2"}),"Filtres"]})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:q0.slice(1,6).map(v=>{const _=v.icon;return i.jsxs($,{variant:l.category===v.value?"default":"outline",size:"sm",onClick:()=>x("category",l.category===v.value?"":v.value),className:"flex items-center gap-2",children:[_&&i.jsx(_,{className:"w-4 h-4"}),v.label]},v.value)})})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[i.jsx("aside",{className:`lg:w-80 space-y-6 ${h?"block":"hidden lg:block"}`,children:i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Filtres"}),i.jsx($,{variant:"ghost",size:"sm",onClick:b,children:"Effacer"})]})}),i.jsxs(J,{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Catégorie"}),i.jsxs(dt,{value:l.category||"all",onValueChange:v=>x("category",v==="all"?"":v),children:[i.jsx(at,{children:i.jsx(ht,{})}),i.jsx(ot,{children:q0.map(v=>{const _=v.icon;return i.jsx(ie,{value:v.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[_&&i.jsx(_,{className:"w-4 h-4"}),v.label]})},v.value)})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Prix"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(we,{type:"number",placeholder:"Min",value:l.minPrice||"",onChange:v=>x("minPrice",v.target.value?parseInt(v.target.value):void 0)}),i.jsx(we,{type:"number",placeholder:"Max",value:l.maxPrice||"",onChange:v=>x("maxPrice",v.target.value?parseInt(v.target.value):void 0)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"État"}),i.jsx("div",{className:"space-y-2",children:$se.map(v=>{var _;return i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:((_=l.condition)==null?void 0:_.includes(v.value))||!1,onChange:E=>{const C=l.condition||[],D=E.target.checked?[...C,v.value]:C.filter(T=>T!==v.value);x("condition",D.length>0?D:void 0)},className:"rounded border-border"}),i.jsx("span",{className:"text-sm",children:v.label})]},v.value)})})]}),i.jsx($,{onClick:g,className:"w-full",children:"Appliquer les filtres"})]})]})}),i.jsxs("main",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("span",{className:"text-muted-foreground",children:[r.length," résultat(s)"]}),(l.query||l.category||l.minPrice||l.maxPrice)&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtres actifs:"}),l.query&&i.jsxs(Ie,{variant:"secondary",children:['"',l.query,'"']}),l.category&&i.jsx(Ie,{variant:"secondary",children:(y=q0.find(v=>v.value===l.category))==null?void 0:y.label})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(dt,{value:l.sortBy||"date",onValueChange:v=>x("sortBy",v),children:[i.jsx(at,{className:"w-40",children:i.jsx(ht,{})}),i.jsx(ot,{children:Use.map(v=>i.jsx(ie,{value:v.value,children:v.label},v.value))})]}),i.jsx(ps,{orientation:"vertical",className:"h-6"}),i.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[i.jsx($,{variant:u==="grid"?"default":"ghost",size:"icon",onClick:()=>d("grid"),className:"rounded-none w-15 h-15",title:"Vue en grille",children:i.jsx(RD,{className:"w-4 h-4"})}),i.jsx($,{variant:u==="list"?"default":"ghost",size:"icon",onClick:()=>d("list"),className:"rounded-none w-15 h-15",title:"Vue en liste",children:i.jsx(OD,{className:"w-4 h-4"})})]})]})]}),n&&r.length===0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((v,_)=>i.jsxs(Q,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(J,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},_))}):r.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`grid gap-8 justify-items-center ${u==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:r.map(v=>i.jsx(bf,{listing:v},v.id))}),s&&i.jsx("div",{className:"text-center mt-8",children:i.jsx($,{onClick:w,disabled:n,variant:"outline",size:"lg",children:n?"Chargement...":"Charger plus"})})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun résultat trouvé"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos critères de recherche"}),i.jsx($,{onClick:b,variant:"outline",children:"Effacer les filtres"})]})]})]})]})};var cN="Dialog",[F3,Xfe]=ls(cN),[Bse,ni]=F3(cN),$3=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=p.useRef(null),c=p.useRef(null),[u=!1,d]=is({prop:n,defaultProp:s,onChange:a});return i.jsx(Bse,{scope:e,triggerRef:l,contentRef:c,contentId:ts(),titleId:ts(),descriptionId:ts(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:o,children:r})};$3.displayName=cN;var U3="DialogTrigger",z3=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=ni(U3,r),a=Je(e,s.triggerRef);return i.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":hN(s.open),...n,ref:a,onClick:pe(t.onClick,s.onOpenToggle)})});z3.displayName=U3;var uN="DialogPortal",[qse,B3]=F3(uN,{forceMount:void 0}),q3=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,a=ni(uN,e);return i.jsx(qse,{scope:e,forceMount:r,children:p.Children.map(n,o=>i.jsx(Kr,{present:r||a.open,children:i.jsx(fm,{asChild:!0,container:s,children:o})}))})};q3.displayName=uN;var xv="DialogOverlay",W3=p.forwardRef((t,e)=>{const r=B3(xv,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,a=ni(xv,t.__scopeDialog);return a.modal?i.jsx(Kr,{present:n||a.open,children:i.jsx(Wse,{...s,ref:e})}):null});W3.displayName=xv;var Wse=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=ni(xv,r);return i.jsx(mm,{as:xa,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(De.div,{"data-state":hN(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Gl="DialogContent",H3=p.forwardRef((t,e)=>{const r=B3(Gl,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,a=ni(Gl,t.__scopeDialog);return i.jsx(Kr,{present:n||a.open,children:a.modal?i.jsx(Hse,{...s,ref:e}):i.jsx(Gse,{...s,ref:e})})});H3.displayName=Gl;var Hse=p.forwardRef((t,e)=>{const r=ni(Gl,t.__scopeDialog),n=p.useRef(null),s=Je(e,r.contentRef,n);return p.useEffect(()=>{const a=n.current;if(a)return Hx(a)},[]),i.jsx(G3,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pe(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:pe(t.onFocusOutside,a=>a.preventDefault())})}),Gse=p.forwardRef((t,e)=>{const r=ni(Gl,t.__scopeDialog),n=p.useRef(!1),s=p.useRef(!1);return i.jsx(G3,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),G3=p.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=ni(Gl,r),c=p.useRef(null),u=Je(e,c);return Vx(),i.jsxs(i.Fragment,{children:[i.jsx(dm,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(um,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":hN(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Kse,{titleId:l.titleId}),i.jsx(Qse,{contentRef:c,descriptionId:l.descriptionId})]})]})}),dN="DialogTitle",K3=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=ni(dN,r);return i.jsx(De.h2,{id:s.titleId,...n,ref:e})});K3.displayName=dN;var Y3="DialogDescription",Q3=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=ni(Y3,r);return i.jsx(De.p,{id:s.descriptionId,...n,ref:e})});Q3.displayName=Y3;var J3="DialogClose",X3=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=ni(J3,r);return i.jsx(De.button,{type:"button",...n,ref:e,onClick:pe(t.onClick,()=>s.onOpenChange(!1))})});X3.displayName=J3;function hN(t){return t?"open":"closed"}var Z3="DialogTitleWarning",[Zfe,eL]=nJ(Z3,{contentName:Gl,titleName:dN,docsSlug:"dialog"}),Kse=({titleId:t})=>{const e=eL(Z3),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},Yse="DialogDescriptionWarning",Qse=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${eL(Yse).contentName}}.`;return p.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},Jse=$3,Xse=z3,Zse=q3,tL=W3,rL=H3,nL=K3,sL=Q3,eie=X3;const aa=Jse,hu=Xse,tie=Zse,iL=p.forwardRef(({className:t,...e},r)=>i.jsx(tL,{ref:r,className:Le("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));iL.displayName=tL.displayName;const Ni=p.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(tie,{children:[i.jsx(iL,{}),i.jsxs(rL,{ref:n,className:Le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,i.jsxs(eie,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Xee,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ni.displayName=rL.displayName;const oa=({className:t,...e})=>i.jsx("div",{className:Le("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});oa.displayName="DialogHeader";const og=({className:t,...e})=>i.jsx("div",{className:Le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});og.displayName="DialogFooter";const Si=p.forwardRef(({className:t,...e},r)=>i.jsx(nL,{ref:r,className:Le("text-lg font-semibold leading-none tracking-tight",t),...e}));Si.displayName=nL.displayName;const fu=p.forwardRef(({className:t,...e},r)=>i.jsx(sL,{ref:r,className:Le("text-sm text-muted-foreground",t),...e}));fu.displayName=sL.displayName;const _s=p.forwardRef(({className:t,...e},r)=>i.jsx("textarea",{className:Le("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));_s.displayName="Textarea";var rie="Label",aL=p.forwardRef((t,e)=>i.jsx(De.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));aL.displayName=rie;var oL=aL;const nie=Lx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),de=p.forwardRef(({className:t,...e},r)=>i.jsx(oL,{ref:r,className:Le(nie(),t),...e}));de.displayName=oL.displayName;const sie=Lx("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),kt=p.forwardRef(({className:t,variant:e,...r},n)=>i.jsx("div",{ref:n,role:"alert",className:Le(sie({variant:e}),t),...r}));kt.displayName="Alert";const iie=p.forwardRef(({className:t,...e},r)=>i.jsx("h5",{ref:r,className:Le("mb-1 font-medium leading-none tracking-tight",t),...e}));iie.displayName="AlertTitle";const Tt=p.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Le("text-sm [&_p]:leading-relaxed",t),...e}));Tt.displayName="AlertDescription";var Be=function(){return Be=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Be.apply(this,arguments)};function aie(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function lL(t,e,r){for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function ym(t){return t.mode==="multiple"}function wm(t){return t.mode==="range"}function ny(t){return t.mode==="single"}var oie={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function lie(t,e){return Ar(t,"LLLL y",e)}function cie(t,e){return Ar(t,"d",e)}function uie(t,e){return Ar(t,"LLLL",e)}function die(t){return"".concat(t)}function hie(t,e){return Ar(t,"cccccc",e)}function fie(t,e){return Ar(t,"yyyy",e)}var mie=Object.freeze({__proto__:null,formatCaption:lie,formatDay:cie,formatMonthCaption:uie,formatWeekNumber:die,formatWeekdayName:hie,formatYearCaption:fie}),pie=function(t,e,r){return Ar(t,"do MMMM (EEEE)",r)},gie=function(){return"Month: "},vie=function(){return"Go to next month"},xie=function(){return"Go to previous month"},yie=function(t,e){return Ar(t,"cccc",e)},wie=function(t){return"Week n. ".concat(t)},bie=function(){return"Year: "},_ie=Object.freeze({__proto__:null,labelDay:pie,labelMonthDropdown:gie,labelNext:vie,labelPrevious:xie,labelWeekNumber:wie,labelWeekday:yie,labelYearDropdown:bie});function jie(){var t="buttons",e=oie,r=aN,n={},s={},a=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:mie,labels:_ie,locale:r,modifiersClassNames:n,modifiers:s,numberOfMonths:a,styles:o,today:l,mode:"default"}}function Nie(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,s=t.toMonth,a=t.fromDate,o=t.toDate;return n?a=Un(n):e&&(a=new Date(e,0,1)),s?o=Xx(s):r&&(o=new Date(r,11,31)),{fromDate:a?Lu(a):void 0,toDate:o?Lu(o):void 0}}var cL=p.createContext(void 0);function Sie(t){var e,r=t.initialProps,n=jie(),s=Nie(r),a=s.fromDate,o=s.toDate,l=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var c;(ny(r)||ym(r)||wm(r))&&(c=r.onSelect);var u=Be(Be(Be({},n),r),{captionLayout:l,classNames:Be(Be({},n.classNames),r.classNames),components:Be({},r.components),formatters:Be(Be({},n.formatters),r.formatters),fromDate:a,labels:Be(Be({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Be(Be({},n.modifiers),r.modifiers),modifiersClassNames:Be(Be({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Be(Be({},n.styles),r.styles),toDate:o});return i.jsx(cL.Provider,{value:u,children:t.children})}function Bt(){var t=p.useContext(cL);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function uL(t){var e=Bt(),r=e.locale,n=e.classNames,s=e.styles,a=e.formatters.formatCaption;return i.jsx("div",{className:n.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:r})})}function Eie(t){return i.jsx("svg",Be({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function dL(t){var e,r,n=t.onChange,s=t.value,a=t.children,o=t.caption,l=t.className,c=t.style,u=Bt(),d=(r=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:Eie;return i.jsxs("div",{className:l,style:c,children:[i.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),i.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:n,children:a}),i.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Cie(t){var e,r=Bt(),n=r.fromDate,s=r.toDate,a=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});var h=[];if(lne(n,s))for(var m=Un(n),g=n.getMonth();g<=s.getMonth();g++)h.push(B0(m,g));else for(var m=Un(new Date),g=0;g<=11;g++)h.push(B0(m,g));var x=function(b){var y=Number(b.target.value),v=B0(Un(t.displayMonth),y);t.onChange(v)},w=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:dL;return i.jsx(w,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:x,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:h.map(function(b){return i.jsx("option",{value:b.getMonth(),children:l(b,{locale:o})},b.getMonth())})})}function kie(t){var e,r=t.displayMonth,n=Bt(),s=n.fromDate,a=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,h=n.labels.labelYearDropdown,m=[];if(!s)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});for(var g=s.getFullYear(),x=a.getFullYear(),w=g;w<=x;w++)m.push(R2(BO(new Date),w));var b=function(v){var _=R2(Un(r),Number(v.target.value));t.onChange(_)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:dL;return i.jsx(y,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:r.getFullYear(),caption:d(r,{locale:o}),children:m.map(function(v){return i.jsx("option",{value:v.getFullYear(),children:d(v,{locale:o})},v.getFullYear())})})}function Tie(t,e){var r=p.useState(t),n=r[0],s=r[1],a=e===void 0?n:e;return[a,s]}function Iie(t){var e=t.month,r=t.defaultMonth,n=t.today,s=e||r||n||new Date,a=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(a&&Fu(a,s)<0){var u=-1*(c-1);s=Zs(a,u)}return o&&Fu(s,o)<0&&(s=o),Un(s)}function Aie(){var t=Bt(),e=Iie(t),r=Tie(e,t.month),n=r[0],s=r[1],a=function(o){var l;if(!t.disableNavigation){var c=Un(o);s(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[n,a]}function Pie(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,s=Un(t),a=Un(Zs(s,n)),o=Fu(a,s),l=[],c=0;c<o;c++){var u=Zs(s,c);l.push(u)}return r&&(l=l.reverse()),l}function Rie(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,o=n?a:1,l=Un(t);if(!r)return Zs(l,o);var c=Fu(r,t);if(!(c<a))return Zs(l,o)}}function Die(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,o=n?a:1,l=Un(t);if(!r)return Zs(l,-o);var c=Fu(l,r);if(!(c<=0))return Zs(l,-o)}}var hL=p.createContext(void 0);function Mie(t){var e=Bt(),r=Aie(),n=r[0],s=r[1],a=Pie(n,e),o=Rie(n,e),l=Die(n,e),c=function(h){return a.some(function(m){return oN(h,m)})},u=function(h,m){c(h)||(m&&QO(h,m)?s(Zs(h,1+e.numberOfMonths*-1)):s(h))},d={currentMonth:n,displayMonths:a,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return i.jsx(hL.Provider,{value:d,children:t.children})}function bm(){var t=p.useContext(hL);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function L2(t){var e,r=Bt(),n=r.classNames,s=r.styles,a=r.components,o=bm().goToMonth,l=function(d){o(Zs(d,t.displayIndex?-t.displayIndex:0))},c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:uL,u=i.jsx(c,{id:t.id,displayMonth:t.displayMonth});return i.jsxs("div",{className:n.caption_dropdowns,style:s.caption_dropdowns,children:[i.jsx("div",{className:n.vhidden,children:u}),i.jsx(Cie,{onChange:l,displayMonth:t.displayMonth}),i.jsx(kie,{onChange:l,displayMonth:t.displayMonth})]})}function Oie(t){return i.jsx("svg",Be({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Lie(t){return i.jsx("svg",Be({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var yv=p.forwardRef(function(t,e){var r=Bt(),n=r.classNames,s=r.styles,a=[n.button_reset,n.button];t.className&&a.push(t.className);var o=a.join(" "),l=Be(Be({},s.button_reset),s.button);return t.style&&Object.assign(l,t.style),i.jsx("button",Be({},t,{ref:e,type:"button",className:o,style:l}))});function Vie(t){var e,r,n=Bt(),s=n.dir,a=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,h=n.components;if(!t.nextMonth&&!t.previousMonth)return i.jsx(i.Fragment,{});var m=u(t.previousMonth,{locale:a}),g=[o.nav_button,o.nav_button_previous].join(" "),x=d(t.nextMonth,{locale:a}),w=[o.nav_button,o.nav_button_next].join(" "),b=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:Lie,y=(r=h==null?void 0:h.IconLeft)!==null&&r!==void 0?r:Oie;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&i.jsx(yv,{name:"previous-month","aria-label":m,className:g,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?i.jsx(b,{className:o.nav_icon,style:l.nav_icon}):i.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&i.jsx(yv,{name:"next-month","aria-label":x,className:w,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?i.jsx(y,{className:o.nav_icon,style:l.nav_icon}):i.jsx(b,{className:o.nav_icon,style:l.nav_icon})})]})}function V2(t){var e=Bt().numberOfMonths,r=bm(),n=r.previousMonth,s=r.nextMonth,a=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(x){return oN(t.displayMonth,x)}),c=l===0,u=l===o.length-1,d=e>1&&(c||!u),h=e>1&&(u||!c),m=function(){n&&a(n)},g=function(){s&&a(s)};return i.jsx(Vie,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:h,nextMonth:s,previousMonth:n,onPreviousClick:m,onNextClick:g})}function Fie(t){var e,r=Bt(),n=r.classNames,s=r.disableNavigation,a=r.styles,o=r.captionLayout,l=r.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:uL,u;return s?u=i.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=i.jsx(L2,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=i.jsxs(i.Fragment,{children:[i.jsx(L2,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),i.jsx(V2,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=i.jsxs(i.Fragment,{children:[i.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),i.jsx(V2,{displayMonth:t.displayMonth,id:t.id})]}),i.jsx("div",{className:n.caption,style:a.caption,children:u})}function $ie(t){var e=Bt(),r=e.footer,n=e.styles,s=e.classNames.tfoot;return r?i.jsx("tfoot",{className:s,style:n.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:r})})}):i.jsx(i.Fragment,{})}function Uie(t,e,r){for(var n=r?Wl(new Date):Ii(new Date,{locale:t,weekStartsOn:e}),s=[],a=0;a<7;a++){var o=gn(n,a);s.push(o)}return s}function zie(){var t=Bt(),e=t.classNames,r=t.styles,n=t.showWeekNumber,s=t.locale,a=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=Uie(s,a,o);return i.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&i.jsx("td",{style:r.head_cell,className:e.head_cell}),u.map(function(d,h){return i.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":c(d,{locale:s}),children:l(d,{locale:s})},h)})]})}function Bie(){var t,e=Bt(),r=e.classNames,n=e.styles,s=e.components,a=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:zie;return i.jsx("thead",{style:n.head,className:r.head,children:i.jsx(a,{})})}function qie(t){var e=Bt(),r=e.locale,n=e.formatters.formatDay;return i.jsx(i.Fragment,{children:n(t.date,{locale:r})})}var fN=p.createContext(void 0);function Wie(t){if(!ym(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return i.jsx(fN.Provider,{value:e,children:t.children})}return i.jsx(Hie,{initialProps:t.initialProps,children:t.children})}function Hie(t){var e=t.initialProps,r=t.children,n=e.selected,s=e.min,a=e.max,o=function(u,d,h){var m,g;(m=e.onDayClick)===null||m===void 0||m.call(e,u,d,h);var x=!!(d.selected&&s&&(n==null?void 0:n.length)===s);if(!x){var w=!!(!d.selected&&a&&(n==null?void 0:n.length)===a);if(!w){var b=n?lL([],n):[];if(d.selected){var y=b.findIndex(function(v){return Mn(u,v)});b.splice(y,1)}else b.push(u);(g=e.onSelect)===null||g===void 0||g.call(e,b,u,d,h)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=a&&n.length>a-1,h=n.some(function(m){return Mn(m,u)});return!!(d&&!h)});var c={selected:n,onDayClick:o,modifiers:l};return i.jsx(fN.Provider,{value:c,children:r})}function mN(){var t=p.useContext(fN);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Gie(t,e){var r=e||{},n=r.from,s=r.to;return n&&s?Mn(s,t)&&Mn(n,t)?void 0:Mn(s,t)?{from:s,to:void 0}:Mn(n,t)?void 0:Gb(n,t)?{from:t,to:s}:{from:n,to:t}:s?Gb(t,s)?{from:s,to:t}:{from:t,to:s}:n?QO(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var pN=p.createContext(void 0);function Kie(t){if(!wm(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(pN.Provider,{value:e,children:t.children})}return i.jsx(Yie,{initialProps:t.initialProps,children:t.children})}function Yie(t){var e=t.initialProps,r=t.children,n=e.selected,s=n||{},a=s.from,o=s.to,l=e.min,c=e.max,u=function(g,x,w){var b,y;(b=e.onDayClick)===null||b===void 0||b.call(e,g,x,w);var v=Gie(g,n);(y=e.onSelect)===null||y===void 0||y.call(e,v,g,x,w)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],o?(d.range_end=[o],Mn(a,o)||(d.range_middle=[{after:a,before:o}])):d.range_end=[a]):o&&(d.range_start=[o],d.range_end=[o]),l&&(a&&!o&&d.disabled.push({after:z0(a,l-1),before:gn(a,l-1)}),a&&o&&d.disabled.push({after:a,before:gn(a,l-1)}),!a&&o&&d.disabled.push({after:z0(o,l-1),before:gn(o,l-1)})),c){if(a&&!o&&(d.disabled.push({before:gn(a,-c+1)}),d.disabled.push({after:gn(a,c-1)})),a&&o){var h=pi(o,a)+1,m=c-h;d.disabled.push({before:z0(a,m)}),d.disabled.push({after:gn(o,m)})}!a&&o&&(d.disabled.push({before:gn(o,-c+1)}),d.disabled.push({after:gn(o,c-1)}))}return i.jsx(pN.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function gN(){var t=p.useContext(pN);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function lg(t){return Array.isArray(t)?lL([],t):t!==void 0?[t]:[]}function Qie(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],s=r[1];e[n]=lg(s)}),e}var ei;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ei||(ei={}));var Jie=ei.Selected,$i=ei.Disabled,Xie=ei.Hidden,Zie=ei.Today,W0=ei.RangeEnd,H0=ei.RangeMiddle,G0=ei.RangeStart,eae=ei.Outside;function tae(t,e,r){var n,s=(n={},n[Jie]=lg(t.selected),n[$i]=lg(t.disabled),n[Xie]=lg(t.hidden),n[Zie]=[t.today],n[W0]=[],n[H0]=[],n[G0]=[],n[eae]=[],n);return t.fromDate&&s[$i].push({before:t.fromDate}),t.toDate&&s[$i].push({after:t.toDate}),ym(t)?s[$i]=s[$i].concat(e.modifiers[$i]):wm(t)&&(s[$i]=s[$i].concat(r.modifiers[$i]),s[G0]=r.modifiers[G0],s[H0]=r.modifiers[H0],s[W0]=r.modifiers[W0]),s}var fL=p.createContext(void 0);function rae(t){var e=Bt(),r=mN(),n=gN(),s=tae(e,r,n),a=Qie(e.modifiers),o=Be(Be({},s),a);return i.jsx(fL.Provider,{value:o,children:t.children})}function mL(){var t=p.useContext(fL);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function nae(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function sae(t){return!!(t&&typeof t=="object"&&"from"in t)}function iae(t){return!!(t&&typeof t=="object"&&"after"in t)}function aae(t){return!!(t&&typeof t=="object"&&"before"in t)}function oae(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function lae(t,e){var r,n=e.from,s=e.to;if(n&&s){var a=pi(s,n)<0;a&&(r=[s,n],n=r[0],s=r[1]);var o=pi(t,n)>=0&&pi(s,t)>=0;return o}return s?Mn(s,t):n?Mn(n,t):!1}function cae(t){return sN(t)}function uae(t){return Array.isArray(t)&&t.every(sN)}function dae(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(cae(r))return Mn(t,r);if(uae(r))return r.includes(t);if(sae(r))return lae(t,r);if(oae(r))return r.dayOfWeek.includes(t.getDay());if(nae(r)){var n=pi(r.before,t),s=pi(r.after,t),a=n>0,o=s<0,l=Gb(r.before,r.after);return l?o&&a:a||o}return iae(r)?pi(t,r.after)>0:aae(r)?pi(r.before,t)>0:typeof r=="function"?r(t):!1})}function vN(t,e,r){var n=Object.keys(e).reduce(function(a,o){var l=e[o];return dae(t,l)&&a.push(o),a},[]),s={};return n.forEach(function(a){return s[a]=!0}),r&&!oN(t,r)&&(s.outside=!0),s}function hae(t,e){for(var r=Un(t[0]),n=Xx(t[t.length-1]),s,a,o=r;o<=n;){var l=vN(o,e),c=!l.disabled&&!l.hidden;if(!c){o=gn(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),s||(s=o),o=gn(o,1)}return a||s}var fae=365;function pL(t,e){var r=e.moveBy,n=e.direction,s=e.context,a=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,h=s.locale,m={day:gn,week:Hb,month:Zs,year:Jte,startOfWeek:function(b){return s.ISOWeek?Wl(b):Ii(b,{locale:h,weekStartsOn:c})},endOfWeek:function(b){return s.ISOWeek?qO(b):iN(b,{locale:h,weekStartsOn:c})}},g=m[r](t,n==="after"?1:-1);n==="before"&&u?g=Xte([u,g]):n==="after"&&d&&(g=Zte([d,g]));var x=!0;if(a){var w=vN(g,a);x=!w.disabled&&!w.hidden}return x?g:l.count>fae?l.lastFocused:pL(g,{moveBy:r,direction:n,context:s,modifiers:a,retry:Be(Be({},l),{count:l.count+1})})}var gL=p.createContext(void 0);function mae(t){var e=bm(),r=mL(),n=p.useState(),s=n[0],a=n[1],o=p.useState(),l=o[0],c=o[1],u=hae(e.displayMonths,r),d=s??(l&&e.isDateDisplayed(l))?l:u,h=function(){c(s),a(void 0)},m=function(b){a(b)},g=Bt(),x=function(b,y){if(s){var v=pL(s,{moveBy:b,direction:y,context:g,modifiers:r});Mn(s,v)||(e.goToDate(v,s),m(v))}},w={focusedDay:s,focusTarget:d,blur:h,focus:m,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return i.jsx(gL.Provider,{value:w,children:t.children})}function xN(){var t=p.useContext(gL);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function pae(t,e){var r=mL(),n=vN(t,r,e);return n}var yN=p.createContext(void 0);function gae(t){if(!ny(t.initialProps)){var e={selected:void 0};return i.jsx(yN.Provider,{value:e,children:t.children})}return i.jsx(vae,{initialProps:t.initialProps,children:t.children})}function vae(t){var e=t.initialProps,r=t.children,n=function(a,o,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,a,o,l),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,o,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,o,l)},s={selected:e.selected,onDayClick:n};return i.jsx(yN.Provider,{value:s,children:r})}function vL(){var t=p.useContext(yN);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function xae(t,e){var r=Bt(),n=vL(),s=mN(),a=gN(),o=xN(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,h=o.blur,m=o.focus,g=o.focusMonthBefore,x=o.focusMonthAfter,w=o.focusYearBefore,b=o.focusYearAfter,y=o.focusStartOfWeek,v=o.focusEndOfWeek,_=function(F){var L,W,z,X;ny(r)?(L=n.onDayClick)===null||L===void 0||L.call(n,t,e,F):ym(r)?(W=s.onDayClick)===null||W===void 0||W.call(s,t,e,F):wm(r)?(z=a.onDayClick)===null||z===void 0||z.call(a,t,e,F):(X=r.onDayClick)===null||X===void 0||X.call(r,t,e,F)},E=function(F){var L;m(t),(L=r.onDayFocus)===null||L===void 0||L.call(r,t,e,F)},C=function(F){var L;h(),(L=r.onDayBlur)===null||L===void 0||L.call(r,t,e,F)},D=function(F){var L;(L=r.onDayMouseEnter)===null||L===void 0||L.call(r,t,e,F)},T=function(F){var L;(L=r.onDayMouseLeave)===null||L===void 0||L.call(r,t,e,F)},k=function(F){var L;(L=r.onDayPointerEnter)===null||L===void 0||L.call(r,t,e,F)},R=function(F){var L;(L=r.onDayPointerLeave)===null||L===void 0||L.call(r,t,e,F)},S=function(F){var L;(L=r.onDayTouchCancel)===null||L===void 0||L.call(r,t,e,F)},A=function(F){var L;(L=r.onDayTouchEnd)===null||L===void 0||L.call(r,t,e,F)},P=function(F){var L;(L=r.onDayTouchMove)===null||L===void 0||L.call(r,t,e,F)},N=function(F){var L;(L=r.onDayTouchStart)===null||L===void 0||L.call(r,t,e,F)},V=function(F){var L;(L=r.onDayKeyUp)===null||L===void 0||L.call(r,t,e,F)},U=function(F){var L;switch(F.key){case"ArrowLeft":F.preventDefault(),F.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":F.preventDefault(),F.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":F.preventDefault(),F.stopPropagation(),u();break;case"ArrowUp":F.preventDefault(),F.stopPropagation(),d();break;case"PageUp":F.preventDefault(),F.stopPropagation(),F.shiftKey?w():g();break;case"PageDown":F.preventDefault(),F.stopPropagation(),F.shiftKey?b():x();break;case"Home":F.preventDefault(),F.stopPropagation(),y();break;case"End":F.preventDefault(),F.stopPropagation(),v();break}(L=r.onDayKeyDown)===null||L===void 0||L.call(r,t,e,F)},H={onClick:_,onFocus:E,onBlur:C,onKeyDown:U,onKeyUp:V,onMouseEnter:D,onMouseLeave:T,onPointerEnter:k,onPointerLeave:R,onTouchCancel:S,onTouchEnd:A,onTouchMove:P,onTouchStart:N};return H}function yae(){var t=Bt(),e=vL(),r=mN(),n=gN(),s=ny(t)?e.selected:ym(t)?r.selected:wm(t)?n.selected:void 0;return s}function wae(t){return Object.values(ei).includes(t)}function bae(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var s=t.modifiersClassNames[n];if(s)r.push(s);else if(wae(n)){var a=t.classNames["day_".concat(n)];a&&r.push(a)}}),r}function _ae(t,e){var r=Be({},t.styles.day);return Object.keys(e).forEach(function(n){var s;r=Be(Be({},r),(s=t.modifiersStyles)===null||s===void 0?void 0:s[n])}),r}function jae(t,e,r){var n,s,a,o=Bt(),l=xN(),c=pae(t,e),u=xae(t,c),d=yae(),h=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var D;c.outside||l.focusedDay&&h&&Mn(l.focusedDay,t)&&((D=r.current)===null||D===void 0||D.focus())},[l.focusedDay,t,r,h,c.outside]);var m=bae(o,c).join(" "),g=_ae(o,c),x=!!(c.outside&&!o.showOutsideDays||c.hidden),w=(a=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:qie,b=i.jsx(w,{date:t,displayMonth:e,activeModifiers:c}),y={style:g,className:m,children:b,role:"gridcell"},v=l.focusTarget&&Mn(l.focusTarget,t)&&!c.outside,_=l.focusedDay&&Mn(l.focusedDay,t),E=Be(Be(Be({},y),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=_||v?0:-1,n)),u),C={isButton:h,isHidden:x,activeModifiers:c,selectedDays:d,buttonProps:E,divProps:y};return C}function Nae(t){var e=p.useRef(null),r=jae(t.date,t.displayMonth,e);return r.isHidden?i.jsx("div",{role:"gridcell"}):r.isButton?i.jsx(yv,Be({name:"day",ref:e},r.buttonProps)):i.jsx("div",Be({},r.divProps))}function Sae(t){var e=t.number,r=t.dates,n=Bt(),s=n.onWeekNumberClick,a=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!s)return i.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:d});var h=c(Number(e),{locale:l}),m=function(g){s(e,r,g)};return i.jsx(yv,{name:"week-number","aria-label":h,className:o.weeknumber,style:a.weeknumber,onClick:m,children:d})}function Eae(t){var e,r,n=Bt(),s=n.styles,a=n.classNames,o=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:Nae,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:Sae,d;return o&&(d=i.jsx("td",{className:a.cell,style:s.cell,children:i.jsx(u,{number:t.weekNumber,dates:t.dates})})),i.jsxs("tr",{className:a.row,style:s.row,children:[d,t.dates.map(function(h){return i.jsx("td",{className:a.cell,style:s.cell,role:"presentation",children:i.jsx(c,{displayMonth:t.displayMonth,date:h})},ine(h))})]})}function F2(t,e,r){for(var n=r!=null&&r.ISOWeek?qO(e):iN(e,r),s=r!=null&&r.ISOWeek?Wl(t):Ii(t,r),a=pi(n,s),o=[],l=0;l<=a;l++)o.push(gn(s,l));var c=o.reduce(function(u,d){var h=r!=null&&r.ISOWeek?HO(d):KO(d,r),m=u.find(function(g){return g.weekNumber===h});return m?(m.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function Cae(t,e){var r=F2(Un(t),Xx(t),e);if(e!=null&&e.useFixedWeeks){var n=one(t,e);if(n<6){var s=r[r.length-1],a=s.dates[s.dates.length-1],o=Hb(a,6-n),l=F2(Hb(a,1),o,e);r.push.apply(r,l)}}return r}function kae(t){var e,r,n,s=Bt(),a=s.locale,o=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,h=s.weekStartsOn,m=s.firstWeekContainsDate,g=s.ISOWeek,x=Cae(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:g,locale:a,weekStartsOn:h,firstWeekContainsDate:m}),w=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:Bie,b=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:Eae,y=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:$ie;return i.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&i.jsx(w,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:x.map(function(v){return i.jsx(b,{displayMonth:t.displayMonth,dates:v.dates,weekNumber:v.weekNumber},v.weekNumber)})}),i.jsx(y,{displayMonth:t.displayMonth})]})}function Tae(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Iae=Tae()?p.useLayoutEffect:p.useEffect,K0=!1,Aae=0;function $2(){return"react-day-picker-".concat(++Aae)}function Pae(t){var e,r=t??(K0?$2():null),n=p.useState(r),s=n[0],a=n[1];return Iae(function(){s===null&&a($2())},[]),p.useEffect(function(){K0===!1&&(K0=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function Rae(t){var e,r,n=Bt(),s=n.dir,a=n.classNames,o=n.styles,l=n.components,c=bm().displayMonths,u=Pae(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,h=[a.month],m=o.month,g=t.displayIndex===0,x=t.displayIndex===c.length-1,w=!g&&!x;s==="rtl"&&(e=[g,x],x=e[0],g=e[1]),g&&(h.push(a.caption_start),m=Be(Be({},m),o.caption_start)),x&&(h.push(a.caption_end),m=Be(Be({},m),o.caption_end)),w&&(h.push(a.caption_between),m=Be(Be({},m),o.caption_between));var b=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:Fie;return i.jsxs("div",{className:h.join(" "),style:m,children:[i.jsx(b,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),i.jsx(kae,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function Dae(t){var e=Bt(),r=e.classNames,n=e.styles;return i.jsx("div",{className:r.months,style:n.months,children:t.children})}function Mae(t){var e,r,n=t.initialProps,s=Bt(),a=xN(),o=bm(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){s.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),u(!0)))},[s.initialFocus,c,a.focus,a.focusTarget,a]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var h=Be(Be({},s.styles.root),s.style),m=Object.keys(n).filter(function(x){return x.startsWith("data-")}).reduce(function(x,w){var b;return Be(Be({},x),(b={},b[w]=n[w],b))},{}),g=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:Dae;return i.jsx("div",Be({className:d.join(" "),style:h,dir:s.dir,id:s.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:i.jsx(g,{children:o.displayMonths.map(function(x,w){return i.jsx(Rae,{displayIndex:w,displayMonth:x},w)})})}))}function Oae(t){var e=t.children,r=aie(t,["children"]);return i.jsx(Sie,{initialProps:r,children:i.jsx(Mie,{children:i.jsx(gae,{initialProps:r,children:i.jsx(Wie,{initialProps:r,children:i.jsx(Kie,{initialProps:r,children:i.jsx(rae,{children:i.jsx(mae,{children:e})})})})})})})}function Lae(t){return i.jsx(Oae,Be({},t,{children:i.jsx(Mae,{initialProps:t})}))}function xL({className:t,classNames:e,showOutsideDays:r=!0,...n}){return i.jsx(Lae,{showOutsideDays:r,className:Le("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Le(Mb({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Le("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",n.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Le(Mb({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>i.jsx(Gee,{className:"h-4 w-4"}),IconRight:({...s})=>i.jsx(jO,{className:"h-4 w-4"})},...n})}xL.displayName="Calendar";var wN="Popover",[yL,eme]=ls(wN,[cd]),_m=cd(),[Vae,qo]=yL(wN),wL=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!1}=t,l=_m(e),c=p.useRef(null),[u,d]=p.useState(!1),[h=!1,m]=is({prop:n,defaultProp:s,onChange:a});return i.jsx(qj,{...l,children:i.jsx(Vae,{scope:e,contentId:ts(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:o,children:r})})};wL.displayName=wN;var bL="PopoverAnchor",Fae=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=qo(bL,r),a=_m(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return p.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(Bx,{...a,...n,ref:e})});Fae.displayName=bL;var _L="PopoverTrigger",jL=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=qo(_L,r),a=_m(r),o=Je(e,s.triggerRef),l=i.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":kL(s.open),...n,ref:o,onClick:pe(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(Bx,{asChild:!0,...a,children:l})});jL.displayName=_L;var bN="PopoverPortal",[$ae,Uae]=yL(bN,{forceMount:void 0}),NL=t=>{const{__scopePopover:e,forceMount:r,children:n,container:s}=t,a=qo(bN,e);return i.jsx($ae,{scope:e,forceMount:r,children:i.jsx(Kr,{present:r||a.open,children:i.jsx(fm,{asChild:!0,container:s,children:n})})})};NL.displayName=bN;var $u="PopoverContent",SL=p.forwardRef((t,e)=>{const r=Uae($u,t.__scopePopover),{forceMount:n=r.forceMount,...s}=t,a=qo($u,t.__scopePopover);return i.jsx(Kr,{present:n||a.open,children:a.modal?i.jsx(zae,{...s,ref:e}):i.jsx(Bae,{...s,ref:e})})});SL.displayName=$u;var zae=p.forwardRef((t,e)=>{const r=qo($u,t.__scopePopover),n=p.useRef(null),s=Je(e,n),a=p.useRef(!1);return p.useEffect(()=>{const o=n.current;if(o)return Hx(o)},[]),i.jsx(mm,{as:xa,allowPinchZoom:!0,children:i.jsx(EL,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:pe(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:pe(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Bae=p.forwardRef((t,e)=>{const r=qo($u,t.__scopePopover),n=p.useRef(!1),s=p.useRef(!1);return i.jsx(EL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),EL=p.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,m=qo($u,r),g=_m(r);return Vx(),i.jsx(dm,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(um,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:i.jsx(Wj,{"data-state":kL(m.open),role:"dialog",id:m.contentId,...g,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),CL="PopoverClose",qae=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=qo(CL,r);return i.jsx(De.button,{type:"button",...n,ref:e,onClick:pe(t.onClick,()=>s.onOpenChange(!1))})});qae.displayName=CL;var Wae="PopoverArrow",Hae=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=_m(r);return i.jsx(Hj,{...s,...n,ref:e})});Hae.displayName=Wae;function kL(t){return t?"open":"closed"}var Gae=wL,Kae=jL,Yae=NL,TL=SL;const Qae=Gae,Jae=Kae,IL=p.forwardRef(({className:t,align:e="center",sideOffset:r=4,...n},s)=>i.jsx(Yae,{children:i.jsx(TL,{ref:s,align:e,sideOffset:r,className:Le("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));IL.displayName=TL.displayName;const Nc=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},sy=ud((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espèces",icon:"💵",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"🏦",description:"Virement SEPA sécurisé",fees:0,processingTime:"1-2 jours ouvrés",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"💳",description:"Paiement sécurisé via PayPal",fees:2.9,processingTime:"Immédiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"📱",description:"Paiement mobile instantané",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async r=>{try{t({loading:!0});const n=e().generateSecurityCode(),s={...r,securityCode:n,status:"pending",createdAt:or(),updatedAt:or()},a=await Ll(bt(ve,"paymentRequests"),s),o={id:a.id,...r,securityCode:n,status:"pending",createdAt:new Date,updatedAt:new Date};return t(l=>({paymentRequests:[o,...l.paymentRequests],loading:!1})),ne.success("Demande de paiement créée avec succès"),a.id}catch(n){throw console.error("Erreur lors de la création de la demande de paiement:",n),ne.error("Erreur lors de la création de la demande de paiement"),t({loading:!1}),n}},updatePaymentStatus:async(r,n,s)=>{try{const a={status:n,updatedAt:or()};s&&(a.notes=s),await cr(Ke(ve,"paymentRequests",r),a),t(l=>({paymentRequests:l.paymentRequests.map(c=>c.id===r?{...c,status:n,notes:s||c.notes,updatedAt:new Date}:c)}));const o={confirmed:"Paiement confirmé",completed:"Paiement terminé",cancelled:"Paiement annulé",disputed:"Litige signalé"};ne.success(o[n]||"Statut mis à jour")}catch(a){console.error("Erreur lors de la mise à jour du statut:",a),ne.error("Erreur lors de la mise à jour du statut")}},fetchUserPaymentRequests:async r=>{if(r)try{t({loading:!0});const n=Mt(bt(ve,"paymentRequests"),Vt("buyerId","==",r),ys(50)),s=Mt(bt(ve,"paymentRequests"),Vt("sellerId","==",r),ys(50)),[a,o]=await Promise.all([Kt(n),Kt(s)]),l=[];a.forEach(c=>{const u=c.data();l.push({id:c.id,...u,createdAt:Nc(u.createdAt),updatedAt:Nc(u.updatedAt),meetingDateTime:u.meetingDateTime?Nc(u.meetingDateTime):void 0})}),o.forEach(c=>{const u=c.data();l.find(d=>d.id===c.id)||l.push({id:c.id,...u,createdAt:Nc(u.createdAt),updatedAt:Nc(u.updatedAt),meetingDateTime:u.meetingDateTime?Nc(u.meetingDateTime):void 0})}),l.sort((c,u)=>u.createdAt.getTime()-c.createdAt.getTime()),t({paymentRequests:l,loading:!1})}catch(n){console.error("Erreur lors du chargement des demandes de paiement:",n),ne.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(r,n)=>{switch(r){case"cash":return!0;case"transfer":return n.bankDetails&&n.bankDetails.iban&&n.bankDetails.accountName;case"paypal":return n.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.paypalEmail);case"lydia":return n.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(n.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(r,n)=>{const{paymentMethods:s}=e(),a=s.find(o=>o.type===n);return a?r*a.fees/100:0},getPaymentInstructions:(r,n)=>{var a,o,l;const s=[];switch(r){case"cash":s.push("💵 Paiement en espèces","📍 Rencontrez-vous au lieu convenu","🔍 Vérifiez l'objet avant de payer","🧾 Demandez un reçu si nécessaire",`🔐 Code de sécurité : ${n.securityCode}`);break;case"transfer":s.push("🏦 Virement bancaire SEPA","📋 Utilisez les coordonnées bancaires fournies","💬 Indiquez la référence de transaction","⏱️ Délai : 1-2 jours ouvrés",`🔐 Code de sécurité : ${n.securityCode}`),(a=n.paymentDetails)!=null&&a.bankDetails&&s.push(`📊 IBAN : ${n.paymentDetails.bankDetails.iban}`,`🏛️ Titulaire : ${n.paymentDetails.bankDetails.accountName}`);break;case"paypal":s.push("💳 Paiement PayPal","📧 Envoyez le paiement à l'adresse email fournie",'🛡️ Utilisez "Biens et services" pour la protection',"⚡ Paiement instantané",`🔐 Code de sécurité : ${n.securityCode}`),(o=n.paymentDetails)!=null&&o.paypalEmail&&s.push(`📧 Email PayPal : ${n.paymentDetails.paypalEmail}`);break;case"lydia":s.push("📱 Paiement Lydia","📞 Envoyez le paiement au numéro fourni","💬 Indiquez la référence de transaction","⚡ Paiement instantané",`🔐 Code de sécurité : ${n.securityCode}`),(l=n.paymentDetails)!=null&&l.lydiaPhone&&s.push(`📞 Numéro Lydia : ${n.paymentDetails.lydiaPhone}`);break}return s}}));var AL="https://js.stripe.com/v3",Xae=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,U2="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Zae=function(){for(var e=document.querySelectorAll('script[src^="'.concat(AL,'"]')),r=0;r<e.length;r++){var n=e[r];if(Xae.test(n.src))return n}return null},z2=function(e){var r="",n=document.createElement("script");n.src="".concat(AL).concat(r);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(n),n},eoe=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:r})},Wd=null,Np=null,Sp=null,toe=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},roe=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},noe=function(e){return Wd!==null?Wd:(Wd=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&e&&console.warn(U2),window.Stripe){r(window.Stripe);return}try{var s=Zae();if(s&&e)console.warn(U2);else if(!s)s=z2(e);else if(s&&Sp!==null&&Np!==null){var a;s.removeEventListener("load",Sp),s.removeEventListener("error",Np),(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=z2(e)}Sp=roe(r,n),Np=toe(n),s.addEventListener("load",Sp),s.addEventListener("error",Np)}catch(o){n(o);return}}),Wd.catch(function(r){return Wd=null,Promise.reject(r)}))},soe=function(e,r,n){if(e===null)return null;var s=e.apply(void 0,r);return eoe(s,n),s},Hd,PL=!1,RL=function(){return Hd||(Hd=noe(null).catch(function(e){return Hd=null,Promise.reject(e)}),Hd)};Promise.resolve().then(function(){return RL()}).catch(function(t){PL||console.warn(t)});var DL=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];PL=!0;var s=Date.now();return RL().then(function(a){return soe(a,r,s)})},ML={exports:{}},ioe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",aoe=ioe,ooe=aoe;function OL(){}function LL(){}LL.resetWarningCache=OL;var loe=function(){function t(n,s,a,o,l,c){if(c!==ooe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:LL,resetWarningCache:OL};return r.PropTypes=r,r};ML.exports=loe();var coe=ML.exports;const er=Fv(coe);function B2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function q2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B2(Object(r),!0).forEach(function(n){VL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cg(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cg=function(e){return typeof e}:cg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}function VL(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FL(t,e){return uoe(t)||doe(t,e)||hoe(t,e)||foe()}function uoe(t){if(Array.isArray(t))return t}function doe(t,e){var r=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(r!=null){var n=[],s=!0,a=!1,o,l;try{for(r=r.call(t);!(s=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(c){a=!0,l=c}finally{try{!s&&r.return!=null&&r.return()}finally{if(a)throw l}}return n}}function hoe(t,e){if(t){if(typeof t=="string")return W2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W2(t,e)}}function W2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function foe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qn=function(e,r,n){var s=!!n,a=Ce.useRef(n);Ce.useEffect(function(){a.current=n},[n]),Ce.useEffect(function(){if(!s||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(r,o),function(){e.off(r,o)}},[s,r,e,a])},Zb=function(e){var r=Ce.useRef(e);return Ce.useEffect(function(){r.current=e},[e]),r.current},Uu=function(e){return e!==null&&cg(e)==="object"},moe=function(e){return Uu(e)&&typeof e.then=="function"},poe=function(e){return Uu(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},H2="[object Object]",goe=function t(e,r){if(!Uu(e)||!Uu(r))return e===r;var n=Array.isArray(e),s=Array.isArray(r);if(n!==s)return!1;var a=Object.prototype.toString.call(e)===H2,o=Object.prototype.toString.call(r)===H2;if(a!==o)return!1;if(!a&&!n)return e===r;var l=Object.keys(e),c=Object.keys(r);if(l.length!==c.length)return!1;for(var u={},d=0;d<l.length;d+=1)u[l[d]]=!0;for(var h=0;h<c.length;h+=1)u[c[h]]=!0;var m=Object.keys(u);if(m.length!==l.length)return!1;var g=e,x=r,w=function(y){return t(g[y],x[y])};return m.every(w)},$L=function(e,r,n){return Uu(e)?Object.keys(e).reduce(function(s,a){var o=!Uu(r)||!goe(e[a],r[a]);return n.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):o?q2(q2({},s||{}),{},VL({},a,e[a])):s},null):null},UL="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",G2=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:UL;if(e===null||poe(e))return e;throw new Error(r)},voe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:UL;if(moe(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(s){return G2(s,r)})};var n=G2(e,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},xoe=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},iy=Ce.createContext(null);iy.displayName="ElementsContext";var zL=function(e,r){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return e},BL=function(e){var r=e.stripe,n=e.options,s=e.children,a=Ce.useMemo(function(){return voe(r)},[r]),o=Ce.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(n):null}}),l=FL(o,2),c=l[0],u=l[1];Ce.useEffect(function(){var m=!0,g=function(w){u(function(b){return b.stripe?b:{stripe:w,elements:w.elements(n)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(x){x&&m&&g(x)}):a.tag==="sync"&&!c.stripe&&g(a.stripe),function(){m=!1}},[a,c,n]);var d=Zb(r);Ce.useEffect(function(){d!==null&&d!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,r]);var h=Zb(n);return Ce.useEffect(function(){if(c.elements){var m=$L(n,h,["clientSecret","fonts"]);m&&c.elements.update(m)}},[n,h,c.elements]),Ce.useEffect(function(){xoe(c.stripe)},[c.stripe]),Ce.createElement(iy.Provider,{value:c},s)};BL.propTypes={stripe:er.any,options:er.object};var yoe=function(e){var r=Ce.useContext(iy);return zL(r,e)},woe=function(){var e=yoe("calls useElements()"),r=e.elements;return r};er.func.isRequired;var qL=Ce.createContext(null);qL.displayName="CustomCheckoutSdkContext";var boe=function(e,r){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(r," in an <CustomCheckoutProvider> provider."));return e},_oe=Ce.createContext(null);_oe.displayName="CustomCheckoutContext";er.any,er.shape({clientSecret:er.string.isRequired,elementsOptions:er.object}).isRequired;var e_=function(e){var r=Ce.useContext(qL),n=Ce.useContext(iy);if(r&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return r?boe(r,e):zL(n,e)},joe=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Nr=function(e,r){var n="".concat(joe(e),"Element"),s=function(c){var u=c.id,d=c.className,h=c.options,m=h===void 0?{}:h,g=c.onBlur,x=c.onFocus,w=c.onReady,b=c.onChange,y=c.onEscape,v=c.onClick,_=c.onLoadError,E=c.onLoaderStart,C=c.onNetworksChange,D=c.onConfirm,T=c.onCancel,k=c.onShippingAddressChange,R=c.onShippingRateChange,S=e_("mounts <".concat(n,">")),A="elements"in S?S.elements:null,P="customCheckoutSdk"in S?S.customCheckoutSdk:null,N=Ce.useState(null),V=FL(N,2),U=V[0],H=V[1],F=Ce.useRef(null),L=Ce.useRef(null);qn(U,"blur",g),qn(U,"focus",x),qn(U,"escape",y),qn(U,"click",v),qn(U,"loaderror",_),qn(U,"loaderstart",E),qn(U,"networkschange",C),qn(U,"confirm",D),qn(U,"cancel",T),qn(U,"shippingaddresschange",k),qn(U,"shippingratechange",R),qn(U,"change",b);var W;w&&(e==="expressCheckout"?W=w:W=function(){w(U)}),qn(U,"ready",W),Ce.useLayoutEffect(function(){if(F.current===null&&L.current!==null&&(A||P)){var X=null;P?X=P.createElement(e,m):A&&(X=A.create(e,m)),F.current=X,H(X),X&&X.mount(L.current)}},[A,P,m]);var z=Zb(m);return Ce.useEffect(function(){if(F.current){var X=$L(m,z,["paymentRequest"]);X&&"update"in F.current&&F.current.update(X)}},[m,z]),Ce.useLayoutEffect(function(){return function(){if(F.current&&typeof F.current.destroy=="function")try{F.current.destroy(),F.current=null}catch{}}},[]),Ce.createElement("div",{id:u,className:d,ref:L})},a=function(c){e_("mounts <".concat(n,">"));var u=c.id,d=c.className;return Ce.createElement("div",{id:u,className:d})},o=r?a:s;return o.propTypes={id:er.string,className:er.string,onChange:er.func,onBlur:er.func,onFocus:er.func,onReady:er.func,onEscape:er.func,onClick:er.func,onLoadError:er.func,onLoaderStart:er.func,onNetworksChange:er.func,onConfirm:er.func,onCancel:er.func,onShippingAddressChange:er.func,onShippingRateChange:er.func,options:er.object},o.displayName=n,o.__elementType=e,o},Sr=typeof window>"u",Noe=Ce.createContext(null);Noe.displayName="EmbeddedCheckoutProviderContext";var Soe=function(){var e=e_("calls useStripe()"),r=e.stripe;return r};Nr("auBankAccount",Sr);Nr("card",Sr);Nr("cardNumber",Sr);Nr("cardExpiry",Sr);Nr("cardCvc",Sr);Nr("fpxBank",Sr);Nr("iban",Sr);Nr("idealBank",Sr);Nr("p24Bank",Sr);Nr("epsBank",Sr);Nr("payment",Sr);Nr("expressCheckout",Sr);Nr("currencySelector",Sr);Nr("paymentRequestButton",Sr);Nr("linkAuthentication",Sr);Nr("address",Sr);Nr("shippingAddress",Sr);Nr("paymentMethodMessaging",Sr);Nr("affirmMessage",Sr);Nr("afterpayClearpayMessage",Sr);const Eoe=({amount:t,currency:e,onPaymentSuccess:r,onPaymentError:n})=>{Soe(),woe();const[s,a]=p.useState(!1),[o,l]=p.useState(null),c=async u=>{u.preventDefault(),a(!0),l(null);try{await new Promise(h=>setTimeout(h,2e3));const d="pi_"+Math.random().toString(36).substring(2,15);ne.success("Paiement réussi !"),r(d)}catch(d){console.error("Payment error:",d),l(d.message||"Une erreur est survenue lors du paiement"),n(d.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(gr,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),i.jsx(lt,{children:"Paiement sécurisé via Stripe"})]}),i.jsx(J,{children:i.jsxs("form",{onSubmit:c,className:"space-y-4",children:[i.jsx("div",{className:"p-4 border rounded-md",children:i.jsx("div",{className:"h-10 flex items-center",children:i.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&i.jsxs(kt,{className:"border-red-200 bg-red-50",children:[i.jsx(dr,{className:"h-4 w-4 text-red-600"}),i.jsx(Tt,{className:"text-red-800",children:o})]}),i.jsxs(kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(zl,{className:"h-4 w-4 text-blue-600"}),i.jsx(Tt,{className:"text-blue-800",children:"Vos informations de paiement sont sécurisées et cryptées par Stripe."})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),i.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[i.jsx("li",{children:"Succès : 4242 4242 4242 4242"}),i.jsx("li",{children:"Échec : 4000 0000 0000 0002"}),i.jsx("li",{children:"Date : n'importe quelle date future"}),i.jsx("li",{children:"CVC : n'importe quel nombre à 3 chiffres"})]})]}),i.jsx($,{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-primary to-secondary",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):i.jsxs(i.Fragment,{children:[i.jsx(zl,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},K2=DL("pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p"),Coe=({amount:t,currency:e,onPaymentSuccess:r,onPaymentError:n})=>{const s={appearance:{theme:"stripe"},locale:"fr"};return K2?i.jsx(BL,{stripe:K2,options:s,children:i.jsx(Eoe,{amount:t,currency:e,onPaymentSuccess:r,onPaymentError:n})}):i.jsxs(kt,{className:"border-yellow-200 bg-yellow-50",children:[i.jsx(dr,{className:"h-4 w-4 text-yellow-600"}),i.jsxs(Tt,{className:"text-yellow-800",children:[i.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre clé publique Stripe dans le fichier .env"]})]})},WL=({amount:t,currency:e,onMethodSelect:r,selectedMethod:n})=>{const{paymentMethods:s,calculateFees:a}=sy(),[o,l]=p.useState({}),[c,u]=p.useState({}),[d,h]=p.useState(null),m=[{id:"card",type:"card",name:"Carte bancaire",icon:gr,description:"Paiement sécurisé par carte",fees:1.5,processingTime:"Immédiat",securityLevel:"high",available:!0},...s],g=C=>{switch(C){case"card":return gr;case"cash":return SD;case"transfer":return QY;case"paypal":return gr;case"lydia":return ac;default:return gr}},x=C=>{switch(C){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},w=(C,D)=>{var k,R;const T={};switch(C){case"card":return!0;case"transfer":(k=D.bankDetails)!=null&&k.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(D.bankDetails.iban.replace(/\s/g,""))||(T.iban="Format IBAN invalide"):T.iban="IBAN requis",(R=D.bankDetails)!=null&&R.accountName||(T.accountName="Nom du titulaire requis");break;case"paypal":D.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D.paypalEmail)||(T.paypalEmail="Format email invalide"):T.paypalEmail="Email PayPal requis";break;case"lydia":D.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(D.lydiaPhone.replace(/\s/g,""))||(T.lydiaPhone="Format de téléphone invalide"):T.lydiaPhone="Numéro de téléphone requis";break}return u(T),Object.keys(T).length===0},b=C=>{if(C==="card"){r(C,{});return}const D=o[C]||{};(C==="cash"||w(C,D))&&r(C,D)},y=(C,D,T)=>{l(k=>({...k,[C]:{...k[C],[D]:T}}))},v=(C,D)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:D||"EUR"}).format(C),_=C=>{h(C),r("card",{stripePaymentId:C})},E=C=>{console.error("Stripe payment error:",C)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),i.jsxs("p",{className:"text-muted-foreground",children:["Montant à payer : ",i.jsx("span",{className:"font-semibold text-primary",children:v(t,e)})]})]}),n==="card"?i.jsx(Coe,{amount:t,currency:e,onPaymentSuccess:_,onPaymentError:E}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(C=>{var S,A,P,N,V,U,H,F;const D=g(C.type),T=C.type==="card"?t*C.fees/100:a(t,C.type),k=t+T,R=n===C.type;return i.jsxs(Q,{className:`cursor-pointer transition-all hover:shadow-md ${R?"ring-2 ring-primary bg-primary/5":""} ${C.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>C.available&&b(C.type),children:[i.jsx(Pe,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(D,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{children:[i.jsx(Re,{className:"text-lg",children:C.name}),i.jsx(lt,{className:"text-sm",children:C.description})]})]}),R&&i.jsx(yt,{className:"w-6 h-6 text-green-600"})]})}),i.jsxs(J,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:C.processingTime})]}),i.jsxs(Ie,{className:x(C.securityLevel),children:[i.jsx(Et,{className:"w-3 h-3 mr-1"}),C.securityLevel==="high"?"Très sécurisé":C.securityLevel==="medium"?"Sécurisé":"Basique"]})]}),T>0&&i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Montant :"}),i.jsx("span",{children:v(t,e)})]}),i.jsxs("div",{className:"flex justify-between text-blue-600",children:[i.jsxs("span",{children:["Frais (",C.fees,"%) :"]}),i.jsx("span",{children:v(T,e)})]}),i.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[i.jsx("span",{children:"Total :"}),i.jsx("span",{children:v(k,e)})]})]}),R&&C.type!=="cash"&&C.type!=="card"&&i.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[C.type==="transfer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:`iban-${C.id}`,children:"IBAN *"}),i.jsx(we,{id:`iban-${C.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((A=(S=o[C.type])==null?void 0:S.bankDetails)==null?void 0:A.iban)||"",onChange:L=>{var W;return y(C.type,"bankDetails",{...(W=o[C.type])==null?void 0:W.bankDetails,iban:L.target.value})},className:c.iban?"border-red-500":""}),c.iban&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.iban})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:`account-name-${C.id}`,children:"Nom du titulaire *"}),i.jsx(we,{id:`account-name-${C.id}`,placeholder:"Jean Dupont",value:((N=(P=o[C.type])==null?void 0:P.bankDetails)==null?void 0:N.accountName)||"",onChange:L=>{var W;return y(C.type,"bankDetails",{...(W=o[C.type])==null?void 0:W.bankDetails,accountName:L.target.value})},className:c.accountName?"border-red-500":""}),c.accountName&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.accountName})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:`bic-${C.id}`,children:"BIC (optionnel)"}),i.jsx(we,{id:`bic-${C.id}`,placeholder:"BNPAFRPP",value:((U=(V=o[C.type])==null?void 0:V.bankDetails)==null?void 0:U.bic)||"",onChange:L=>{var W;return y(C.type,"bankDetails",{...(W=o[C.type])==null?void 0:W.bankDetails,bic:L.target.value})}})]})]}),C.type==="paypal"&&i.jsxs("div",{children:[i.jsx(de,{htmlFor:`paypal-email-${C.id}`,children:"Email PayPal *"}),i.jsx(we,{id:`paypal-email-${C.id}`,type:"email",placeholder:"votre.email@example.com",value:((H=o[C.type])==null?void 0:H.paypalEmail)||"",onChange:L=>y(C.type,"paypalEmail",L.target.value),className:c.paypalEmail?"border-red-500":""}),c.paypalEmail&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.paypalEmail})]}),C.type==="lydia"&&i.jsxs("div",{children:[i.jsx(de,{htmlFor:`lydia-phone-${C.id}`,children:"Numéro de téléphone *"}),i.jsx(we,{id:`lydia-phone-${C.id}`,type:"tel",placeholder:"06 12 34 56 78",value:((F=o[C.type])==null?void 0:F.lydiaPhone)||"",onChange:L=>y(C.type,"lydiaPhone",L.target.value),className:c.lydiaPhone?"border-red-500":""}),c.lydiaPhone&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.lydiaPhone})]})]}),R&&C.type!=="card"&&i.jsxs(kt,{className:"mt-3",children:[i.jsx(_o,{className:"h-4 w-4"}),i.jsxs(Tt,{children:[C.type==="cash"&&"Rencontrez-vous dans un lieu public et vérifiez l'objet avant de payer.",C.type==="transfer"&&"Le virement sera effectué après confirmation de la transaction. Délai : 1-2 jours ouvrés.",C.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bénéficier de la protection PayPal.",C.type==="lydia"&&"Le paiement Lydia est instantané. Vérifiez le numéro avant d'envoyer."]})]})]})]},C.id)})}),i.jsxs(kt,{className:"border-yellow-200 bg-yellow-50",children:[i.jsx(dr,{className:"h-4 w-4 text-yellow-600"}),i.jsxs(Tt,{className:"text-yellow-800",children:[i.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux sécurisés de StudyMarket pour les transactions."]})]})]})},koe=({open:t,onOpenChange:e,listing:r})=>{var E;const{currentUser:n,userProfile:s}=Zt(),{createPaymentRequest:a,loading:o}=sy(),[l,c]=p.useState("method"),[u,d]=p.useState(null),[h,m]=p.useState({}),[g,x]=p.useState({location:"",date:void 0,time:"",notes:""}),w=(C,D)=>{d(C),m(D),c("details")},b=async()=>{if(!(!n||!u))try{const C=g.date&&g.time?new Date(`${Ar(g.date,"yyyy-MM-dd")} ${g.time}`):void 0;await a({listingId:r.id,buyerId:n.uid,sellerId:r.sellerId,amount:r.price,currency:r.currency||"EUR",paymentMethod:u,meetingLocation:g.location,meetingDateTime:C,paymentDetails:h,notes:g.notes}),e(!1),y()}catch(C){console.error("Erreur lors de la création de la demande:",C)}},y=()=>{c("method"),d(null),m({}),x({location:"",date:void 0,time:"",notes:""})},v=(C,D)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:D||"EUR"}).format(C),_=C=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[C]||C;return i.jsx(aa,{open:t,onOpenChange:e,children:i.jsxs(Ni,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(oa,{children:[i.jsxs(Si,{className:"flex items-center gap-2",children:[i.jsx(gr,{className:"w-5 h-5"}),"Demande de paiement"]}),i.jsxs(fu,{children:['Créez une demande de paiement sécurisée pour "',r.title,'"']})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[i.jsxs("div",{className:`flex items-center ${l==="method"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),i.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${l==="details"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Détails"})]}),i.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${l==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),i.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-4",children:[((E=r.images)==null?void 0:E[0])&&i.jsx("img",{src:r.images[0],alt:r.title,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:r.title}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",r.sellerName," • ",r.sellerUniversity]}),i.jsx("p",{className:"text-lg font-bold text-primary",children:v(r.price,r.currency||"EUR")})]})]})}),l==="method"&&i.jsx(WL,{amount:r.price,currency:r.currency||"EUR",onMethodSelect:w,selectedMethod:u}),l==="details"&&u&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(yt,{className:"w-5 h-5 text-green-600"}),i.jsxs("span",{className:"font-medium",children:["Mode de paiement sélectionné : ",_(u)]})]}),u==="cash"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[i.jsx(Br,{className:"w-5 h-5"}),"Détails de la rencontre"]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),i.jsx(we,{id:"meeting-location",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",value:g.location,onChange:C=>x(D=>({...D,location:C.target.value})),className:"mt-1"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(de,{children:"Date de rencontre"}),i.jsxs(Qae,{children:[i.jsx(Jae,{asChild:!0,children:i.jsxs($,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[i.jsx(Us,{className:"mr-2 h-4 w-4"}),g.date?Ar(g.date,"PPP",{locale:nn}):i.jsx("span",{children:"Choisir une date"})]})}),i.jsx(IL,{className:"w-auto p-0",children:i.jsx(xL,{mode:"single",selected:g.date,onSelect:C=>x(D=>({...D,date:C})),disabled:C=>C<new Date,initialFocus:!0})})]})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"meeting-time",children:"Heure de rencontre"}),i.jsx(we,{id:"meeting-time",type:"time",value:g.time,onChange:C=>x(D=>({...D,time:C.target.value})),className:"mt-1"})]})]})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),i.jsx(_s,{id:"payment-notes",placeholder:"Informations complémentaires pour le vendeur...",value:g.notes,onChange:C=>x(D=>({...D,notes:C.target.value})),rows:3,className:"mt-1"})]}),i.jsxs(kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(Et,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Tt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Sécurité :"})," Un code de sécurité unique sera généré pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx($,{variant:"outline",onClick:()=>c("method"),className:"flex-1",children:"Retour"}),i.jsx($,{onClick:()=>c("confirmation"),className:"flex-1",disabled:u==="cash"&&!g.location,children:"Continuer"})]})]}),l==="confirmation"&&u&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Récapitulatif de la demande"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),i.jsx("p",{className:"font-medium",children:_(u)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),i.jsx("p",{className:"font-medium",children:v(r.price,r.currency||"EUR")})]}),u==="cash"&&g.location&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),i.jsx("p",{className:"font-medium",children:g.location})]}),g.date&&g.time&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),i.jsxs("p",{className:"font-medium",children:[Ar(g.date,"PPP",{locale:nn})," à ",g.time]})]})]})]}),g.notes&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),i.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:g.notes})]})]}),i.jsxs(kt,{children:[i.jsx(_o,{className:"h-4 w-4"}),i.jsx(Tt,{children:"En créant cette demande, vous vous engagez à effectuer le paiement selon les modalités convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx($,{variant:"outline",onClick:()=>c("details"),className:"flex-1",children:"Retour"}),i.jsx($,{onClick:b,className:"flex-1",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):i.jsxs(i.Fragment,{children:[i.jsx(yt,{className:"w-4 h-4 mr-2"}),"Créer la demande"]})})]})]})]})]})})},Toe=({listing:t,className:e})=>{const{currentUser:r,userProfile:n}=Zt(),{createConversation:s,setCurrentConversation:a,conversations:o}=Jx(),l=Dr(),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[m,g]=p.useState(""),[x,w]=p.useState(""),[b,y]=p.useState(!1);if((r==null?void 0:r.uid)===t.sellerId)return null;const v=o.find(T=>T.listingId===t.id&&T.participants.includes((r==null?void 0:r.uid)||"")&&T.participants.includes(t.sellerId)),_=()=>{if(!r){l("/auth?mode=signin");return}if(v){a(v),l("/messages");return}const T=`Bonjour ${t.sellerName},

Je suis intéressé(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si nécessaire.

Cordialement,
${(n==null?void 0:n.displayName)||"Un étudiant intéressé"}`;g(T),w((n==null?void 0:n.email)||""),u(!0)},E=()=>{if(!r){l("/auth?mode=signin");return}h(!0)},C=async()=>{var T;if(!m.trim()||!x.trim()||!r||!n){ne.error("Veuillez remplir tous les champs");return}y(!0);try{const k=await s(t.id,t.title,t.price,(T=t.images)==null?void 0:T[0],r.uid,t.sellerId,{displayName:n.displayName,photoURL:n.photoURL,university:n.university,isVerified:n.isVerified,email:n.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},m.trim());u(!1),ne.success(i.jsxs("div",{className:"flex items-center justify-between w-full",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Message envoyé !"}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["📧 ",t.sellerName," recevra une notification email"]})]}),i.jsxs($,{size:"sm",variant:"ghost",onClick:()=>{ne.dismiss(),l("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",i.jsx(Ul,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{l("/messages")},2e3)}catch(k){console.error("Erreur lors de l'envoi du message:",k),ne.error("Erreur lors de l'envoi du message")}finally{y(!1)}},D=(T,k)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const R=k||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:R}).format(T)}catch{return`${T} €`}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs($,{onClick:_,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[i.jsx(zt,{className:"w-4 h-4 mr-2"}),v?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&i.jsxs($,{onClick:E,variant:"outline",className:"flex items-center gap-2",children:[i.jsx(gr,{className:"w-4 h-4"}),"Payer"]})]}),i.jsx(aa,{open:c,onOpenChange:u,children:i.jsxs(Ni,{className:"max-w-md",children:[i.jsx(oa,{children:i.jsxs(Si,{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs(Jn,{className:"w-8 h-8",children:[i.jsx(ba,{src:t.sellerAvatar||void 0}),i.jsx(Pn,{children:t.sellerName[0]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),i.jsx("p",{className:"text-sm font-medium",children:t.title}),i.jsx("p",{className:"text-sm text-primary font-semibold",children:D(t.price,t.currency)})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"contact-email",children:"Votre email"}),i.jsx(we,{id:"contact-email",type:"email",value:x,onChange:T=>w(T.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"contact-message",children:"Votre message"}),i.jsx(_s,{id:"contact-message",value:m,onChange:T=>g(T.target.value),placeholder:"Décrivez votre intérêt pour cette annonce...",rows:6,className:"mt-1"})]}),i.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(_o,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"📧 Notification automatique"}),i.jsxs("p",{children:["Votre message sera envoyé via la messagerie StudyMarket ET ",t.sellerName," recevra une notification email pour répondre rapidement."]})]})]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx($,{variant:"outline",onClick:()=>u(!1),className:"flex-1",children:"Annuler"}),i.jsx($,{onClick:C,disabled:b||!m.trim()||!x.trim(),className:"flex-1",children:b?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Bl,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),i.jsx(koe,{open:d,onOpenChange:h,listing:t})]})},Ioe=()=>{var v;const{id:t}=x1(),e=Dr(),{currentUser:r}=Zt(),{currentListing:n,loading:s,fetchListingById:a}=vm(),{fetchUserFavorites:o}=FO(),[l,c]=p.useState(0);if(p.useEffect(()=>{t&&a(t)},[t,a]),p.useEffect(()=>{r&&o(r.uid)},[r,o]),s)return i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"animate-pulse space-y-6",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!n)return i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsx(dr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a été supprimée."}),i.jsx($,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const u=n,d=(r==null?void 0:r.uid)===u.sellerId,h=(_,E)=>{if(u.transactionType==="donation")return"Gratuit";if(u.transactionType==="exchange")return"Échange";const C=E||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:C}).format(_)}catch{return`${_} €`}},m=_=>{switch(_){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return _}},g=_=>{switch(_){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-blue-100 text-blue-800 border-blue-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},x=()=>{switch(u.transactionType){case"donation":return i.jsx(Du,{className:"w-4 h-4"});case"exchange":return i.jsx(va,{className:"w-4 h-4"});case"service":return i.jsx(id,{className:"w-4 h-4"});default:return i.jsx(ff,{className:"w-4 h-4"})}},w=()=>{switch(u.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},b=()=>{u.images&&u.images.length>1&&c(_=>_===u.images.length-1?0:_+1)},y=()=>{u.images&&u.images.length>1&&c(_=>_===0?u.images.length-1:_-1)};return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx("div",{className:"border-b border-border bg-muted/30",children:i.jsx("div",{className:"container mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(ye,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),i.jsx("span",{children:"/"}),i.jsx(ye,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),i.jsx("span",{children:"/"}),i.jsx("span",{className:"text-foreground",children:u.title})]})})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs($,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[i.jsx(sa,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:u.images&&u.images.length>0?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:u.images[l],alt:u.title,className:"w-full h-full object-cover"}),u.images.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:y,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image précédente",children:i.jsx(XY,{className:"w-6 h-6"})}),i.jsx("div",{onClick:b,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:i.jsx(mi,{className:"w-6 h-6"})}),i.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[l+1," / ",u.images.length]})]}),i.jsxs(aa,{children:[i.jsx(hu,{asChild:!0,children:i.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:i.jsx(wl,{className:"w-5 h-5"})})}),i.jsxs(Ni,{className:"max-w-4xl",children:[i.jsx(Si,{children:"Image en plein écran de l'annonce"}),i.jsx("img",{src:u.images[l],alt:u.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(wl,{className:"w-16 h-16 mx-auto mb-4"}),i.jsx("p",{children:"Aucune image disponible"})]})})}),u.images&&u.images.length>1&&i.jsx("div",{className:"grid grid-cols-6 gap-2",children:u.images.map((_,E)=>i.jsx("button",{onClick:()=>c(E),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${E===l?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:i.jsx("img",{src:_,alt:`${u.title} ${E+1}`,className:"w-full h-full object-cover"})},E))})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(Q,{children:i.jsx(J,{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Ie,{className:"bg-primary/10 text-primary border-primary/20",children:[x(),i.jsx("span",{className:"ml-1",children:w()})]}),u.sellerVerified&&i.jsxs(Ie,{className:"bg-green-100 text-green-800 border-green-200",children:[i.jsx(Et,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),i.jsxs("div",{className:"text-3xl font-bold text-primary",children:[h(u.price,u.currency),u.transactionType==="service"&&i.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),u.transactionType==="exchange"&&u.exchangeFor&&i.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[i.jsx(va,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:"Recherche en échange :"})]}),i.jsx("p",{className:"text-purple-700 mt-1",children:u.exchangeFor})]}),u.aiPriceEstimate&&u.transactionType==="sale"&&i.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[i.jsx(lm,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:"Prix estimé par IA :"})]}),i.jsxs("p",{className:"text-green-700 text-sm",children:[u.aiPriceEstimate.min,"€ - ",u.aiPriceEstimate.max,"€",i.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(u.aiPriceEstimate.confidence*100),"%)"]})]})]}),i.jsx("div",{className:"space-y-3",children:d?i.jsxs("div",{className:"space-y-2",children:[i.jsx(ye,{to:`/edit-listing/${u.id}`,children:i.jsxs($,{variant:"outline",className:"w-full",children:[i.jsx(on,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),i.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Toe,{listing:u,className:"w-full"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($O,{listing:u,size:"lg",showText:!1}),i.jsx(UO,{listing:u,size:"lg",showText:!1})]}),i.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:i.jsx(ml,{className:"w-5 h-5"})})]})]})})]})})}),i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsx(Re,{className:"text-lg",children:"Vendeur"})}),i.jsx(J,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Jn,{className:"w-12 h-12",children:[i.jsx(ba,{src:u.sellerAvatar||void 0}),i.jsx(Pn,{children:(v=u.sellerName[0])==null?void 0:v.toUpperCase()})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-semibold",children:u.sellerName}),u.sellerVerified&&i.jsx(Et,{className:"w-4 h-4 text-green-600"})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:u.sellerUniversity})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"23"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"98%"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),u.environmentalImpact&&i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"text-lg flex items-center gap-2",children:[i.jsx(Hs,{className:"w-5 h-5 text-green-600"}),"Impact écologique"]})}),i.jsx(J,{children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",u.environmentalImpact.co2Saved," kg CO₂"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"économisés en achetant d'occasion"})]})})]})]})]}),i.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:u.title}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ru,{className:"w-4 h-4"}),i.jsxs("span",{children:[u.views," vues"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ur,{className:"w-4 h-4"}),i.jsx("span",{children:fd(u.createdAt,{addSuffix:!0,locale:nn})})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Br,{className:"w-4 h-4"}),i.jsx("span",{children:u.location.city})]})]})]}),i.jsx(Ie,{className:g(u.condition),children:m(u.condition)})]})}),i.jsx(J,{children:i.jsx("div",{className:"prose prose-sm max-w-none",children:i.jsx("p",{className:"whitespace-pre-wrap",children:u.description})})})]}),u.tags&&u.tags.length>0&&i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsx(Re,{className:"text-lg",children:"Tags"})}),i.jsx(J,{children:i.jsx("div",{className:"flex flex-wrap gap-2",children:u.tags.map((_,E)=>i.jsx(Ie,{variant:"secondary",children:_},E))})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"text-lg flex items-center gap-2",children:[i.jsx(Br,{className:"w-5 h-5"}),"Localisation"]})}),i.jsxs(J,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:u.location.city}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.location.state,", ",u.location.country]})]}),u.location.campus&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Campus"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:u.location.campus})]}),u.location.university&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Université"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:u.location.university})]})]})]}),i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"text-lg flex items-center gap-2",children:[i.jsx(Et,{className:"w-5 h-5"}),"Conseils de sécurité"]})}),i.jsx(J,{children:i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(yt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(yt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Vérifiez l'identité de l'autre personne"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(yt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Testez l'objet avant la transaction"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(_o,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]})]})};var jm=t=>t.type==="checkbox",Yc=t=>t instanceof Date,vn=t=>t==null;const HL=t=>typeof t=="object";var jr=t=>!vn(t)&&!Array.isArray(t)&&HL(t)&&!Yc(t),Aoe=t=>jr(t)&&t.target?jm(t.target)?t.target.checked:t.target.value:t,Poe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Roe=(t,e)=>t.has(Poe(e)),Doe=t=>{const e=t.constructor&&t.constructor.prototype;return jr(e)&&e.hasOwnProperty("isPrototypeOf")},_N=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function us(t){let e;const r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(_N&&(t instanceof Blob||t instanceof FileList))&&(r||jr(t)))if(e=r?[]:{},!r&&!Doe(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=us(t[n]));else return t;return e}var ay=t=>Array.isArray(t)?t.filter(Boolean):[],hr=t=>t===void 0,Te=(t,e,r)=>{if(!e||!jr(t))return r;const n=ay(e.split(/[,[\].]+?/)).reduce((s,a)=>vn(s)?s:s[a],t);return hr(n)||n===t?hr(t[e])?r:t[e]:n},oi=t=>typeof t=="boolean",jN=t=>/^\w*$/.test(t),GL=t=>ay(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Rt=(t,e,r)=>{let n=-1;const s=jN(e)?[e]:GL(e),a=s.length,o=a-1;for(;++n<a;){const l=s[n];let c=r;if(n!==o){const u=t[l];c=jr(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(l==="__proto__")return;t[l]=c,t=t[l]}return t};const Y2={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},$s={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ui={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Ce.createContext(null);var Moe=(t,e,r,n=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const o=a;return e._proxyFormState[o]!==$s.all&&(e._proxyFormState[o]=!n||$s.all),t[o]}});return s},Cn=t=>jr(t)&&!Object.keys(t).length,Ooe=(t,e,r,n)=>{r(t);const{name:s,...a}=t;return Cn(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===$s.all)},ug=t=>Array.isArray(t)?t:[t];function Loe(t){const e=Ce.useRef(t);e.current=t,Ce.useEffect(()=>{const r=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{r&&r.unsubscribe()}},[t.disabled])}var gi=t=>typeof t=="string",Voe=(t,e,r,n,s)=>gi(t)?(n&&e.watch.add(t),Te(r,t,s)):Array.isArray(t)?t.map(a=>(n&&e.watch.add(a),Te(r,a))):(n&&(e.watchAll=!0),r),KL=(t,e,r,n,s)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:s||!0}}:{},Q2=t=>({isOnSubmit:!t||t===$s.onSubmit,isOnBlur:t===$s.onBlur,isOnChange:t===$s.onChange,isOnAll:t===$s.all,isOnTouch:t===$s.onTouched}),J2=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Ih=(t,e,r,n)=>{for(const s of r||Object.keys(t)){const a=Te(t,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(Ih(l,e))break}else if(jr(l)&&Ih(l,e))break}}};var Foe=(t,e,r)=>{const n=ug(Te(t,r));return Rt(n,"root",e[r]),Rt(t,r,n),t},NN=t=>t.type==="file",ea=t=>typeof t=="function",wv=t=>{if(!_N)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},dg=t=>gi(t),SN=t=>t.type==="radio",bv=t=>t instanceof RegExp;const X2={value:!1,isValid:!1},Z2={value:!0,isValid:!0};var YL=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!hr(t[0].attributes.value)?hr(t[0].value)||t[0].value===""?Z2:{value:t[0].value,isValid:!0}:Z2:X2}return X2};const eT={isValid:!1,value:null};var QL=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,eT):eT;function tT(t,e,r="validate"){if(dg(t)||Array.isArray(t)&&t.every(dg)||oi(t)&&!t)return{type:r,message:dg(t)?t:"",ref:e}}var Sc=t=>jr(t)&&!bv(t)?t:{value:t,message:""},rT=async(t,e,r,n,s)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:m,validate:g,name:x,valueAsNumber:w,mount:b,disabled:y}=t._f,v=Te(e,x);if(!b||y)return{};const _=o?o[0]:a,E=P=>{n&&_.reportValidity&&(_.setCustomValidity(oi(P)?"":P||""),_.reportValidity())},C={},D=SN(a),T=jm(a),k=D||T,R=(w||NN(a))&&hr(a.value)&&hr(v)||wv(a)&&a.value===""||v===""||Array.isArray(v)&&!v.length,S=KL.bind(null,x,r,C),A=(P,N,V,U=Ui.maxLength,H=Ui.minLength)=>{const F=P?N:V;C[x]={type:P?U:H,message:F,ref:a,...S(P?U:H,F)}};if(s?!Array.isArray(v)||!v.length:l&&(!k&&(R||vn(v))||oi(v)&&!v||T&&!YL(o).isValid||D&&!QL(o).isValid)){const{value:P,message:N}=dg(l)?{value:!!l,message:l}:Sc(l);if(P&&(C[x]={type:Ui.required,message:N,ref:_,...S(Ui.required,N)},!r))return E(N),C}if(!R&&(!vn(d)||!vn(h))){let P,N;const V=Sc(h),U=Sc(d);if(!vn(v)&&!isNaN(v)){const H=a.valueAsNumber||v&&+v;vn(V.value)||(P=H>V.value),vn(U.value)||(N=H<U.value)}else{const H=a.valueAsDate||new Date(v),F=z=>new Date(new Date().toDateString()+" "+z),L=a.type=="time",W=a.type=="week";gi(V.value)&&v&&(P=L?F(v)>F(V.value):W?v>V.value:H>new Date(V.value)),gi(U.value)&&v&&(N=L?F(v)<F(U.value):W?v<U.value:H<new Date(U.value))}if((P||N)&&(A(!!P,V.message,U.message,Ui.max,Ui.min),!r))return E(C[x].message),C}if((c||u)&&!R&&(gi(v)||s&&Array.isArray(v))){const P=Sc(c),N=Sc(u),V=!vn(P.value)&&v.length>+P.value,U=!vn(N.value)&&v.length<+N.value;if((V||U)&&(A(V,P.message,N.message),!r))return E(C[x].message),C}if(m&&!R&&gi(v)){const{value:P,message:N}=Sc(m);if(bv(P)&&!v.match(P)&&(C[x]={type:Ui.pattern,message:N,ref:a,...S(Ui.pattern,N)},!r))return E(N),C}if(g){if(ea(g)){const P=await g(v,e),N=tT(P,_);if(N&&(C[x]={...N,...S(Ui.validate,N.message)},!r))return E(N.message),C}else if(jr(g)){let P={};for(const N in g){if(!Cn(P)&&!r)break;const V=tT(await g[N](v,e),_,N);V&&(P={...V,...S(N,V.message)},E(V.message),r&&(C[x]=P))}if(!Cn(P)&&(C[x]={ref:_,...P},!r))return C}}return E(!0),C};function $oe(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=hr(t)?n++:t[e[n++]];return t}function Uoe(t){for(const e in t)if(t.hasOwnProperty(e)&&!hr(t[e]))return!1;return!0}function Er(t,e){const r=Array.isArray(e)?e:jN(e)?[e]:GL(e),n=r.length===1?t:$oe(t,r),s=r.length-1,a=r[s];return n&&delete n[a],s!==0&&(jr(n)&&Cn(n)||Array.isArray(n)&&Uoe(n))&&Er(t,r.slice(0,-1)),t}var Y0=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},_v=t=>vn(t)||!HL(t);function Ka(t,e){if(_v(t)||_v(e))return t===e;if(Yc(t)&&Yc(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r){const a=t[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=e[s];if(Yc(a)&&Yc(o)||jr(a)&&jr(o)||Array.isArray(a)&&Array.isArray(o)?!Ka(a,o):a!==o)return!1}}return!0}var JL=t=>t.type==="select-multiple",zoe=t=>SN(t)||jm(t),Q0=t=>wv(t)&&t.isConnected,XL=t=>{for(const e in t)if(ea(t[e]))return!0;return!1};function jv(t,e={}){const r=Array.isArray(t);if(jr(t)||r)for(const n in t)Array.isArray(t[n])||jr(t[n])&&!XL(t[n])?(e[n]=Array.isArray(t[n])?[]:{},jv(t[n],e[n])):vn(t[n])||(e[n]=!0);return e}function ZL(t,e,r){const n=Array.isArray(t);if(jr(t)||n)for(const s in t)Array.isArray(t[s])||jr(t[s])&&!XL(t[s])?hr(e)||_v(r[s])?r[s]=Array.isArray(t[s])?jv(t[s],[]):{...jv(t[s])}:ZL(t[s],vn(e)?{}:e[s],r[s]):r[s]=!Ka(t[s],e[s]);return r}var Ep=(t,e)=>ZL(t,e,jv(e)),e5=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>hr(t)?t:e?t===""?NaN:t&&+t:r&&gi(t)?new Date(t):n?n(t):t;function J0(t){const e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return NN(e)?e.files:SN(e)?QL(t.refs).value:JL(e)?[...e.selectedOptions].map(({value:r})=>r):jm(e)?YL(t.refs).value:e5(hr(e.value)?t.ref.value:e.value,t)}var Boe=(t,e,r,n)=>{const s={};for(const a of t){const o=Te(e,a);o&&Rt(s,a,o._f)}return{criteriaMode:r,names:[...t],fields:s,shouldUseNativeValidation:n}},Gd=t=>hr(t)?t:bv(t)?t.source:jr(t)?bv(t.value)?t.value.source:t.value:t;const nT="AsyncFunction";var qoe=t=>(!t||!t.validate)&&!!(ea(t.validate)&&t.validate.constructor.name===nT||jr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===nT)),Woe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function sT(t,e,r){const n=Te(t,r);if(n||jN(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const a=s.join("."),o=Te(e,a),l=Te(t,a);if(o&&!Array.isArray(o)&&r!==a)return{name:r};if(l&&l.type)return{name:a,error:l};s.pop()}return{name:r}}var Hoe=(t,e,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(e||t):(r?n.isOnBlur:s.isOnBlur)?!t:(r?n.isOnChange:s.isOnChange)?t:!0,Goe=(t,e)=>!ay(Te(t,e)).length&&Er(t,e);const Koe={mode:$s.onSubmit,reValidateMode:$s.onChange,shouldFocusError:!0};function Yoe(t={}){let e={...Koe,...t},r={submitCount:0,isDirty:!1,isLoading:ea(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},s=jr(e.defaultValues)||jr(e.values)?us(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:us(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:Y0(),array:Y0(),state:Y0()},m=Q2(e.mode),g=Q2(e.reValidateMode),x=e.criteriaMode===$s.all,w=O=>B=>{clearTimeout(u),u=setTimeout(O,B)},b=async O=>{if(d.isValid||O){const B=e.resolver?Cn((await k()).errors):await S(n,!0);B!==r.isValid&&h.state.next({isValid:B})}},y=(O,B)=>{(d.isValidating||d.validatingFields)&&((O||Array.from(l.mount)).forEach(Y=>{Y&&(B?Rt(r.validatingFields,Y,B):Er(r.validatingFields,Y))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Cn(r.validatingFields)}))},v=(O,B=[],Y,je,xe=!0,he=!0)=>{if(je&&Y){if(o.action=!0,he&&Array.isArray(Te(n,O))){const Oe=Y(Te(n,O),je.argA,je.argB);xe&&Rt(n,O,Oe)}if(he&&Array.isArray(Te(r.errors,O))){const Oe=Y(Te(r.errors,O),je.argA,je.argB);xe&&Rt(r.errors,O,Oe),Goe(r.errors,O)}if(d.touchedFields&&he&&Array.isArray(Te(r.touchedFields,O))){const Oe=Y(Te(r.touchedFields,O),je.argA,je.argB);xe&&Rt(r.touchedFields,O,Oe)}d.dirtyFields&&(r.dirtyFields=Ep(s,a)),h.state.next({name:O,isDirty:P(O,B),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Rt(a,O,B)},_=(O,B)=>{Rt(r.errors,O,B),h.state.next({errors:r.errors})},E=O=>{r.errors=O,h.state.next({errors:r.errors,isValid:!1})},C=(O,B,Y,je)=>{const xe=Te(n,O);if(xe){const he=Te(a,O,hr(Y)?Te(s,O):Y);hr(he)||je&&je.defaultChecked||B?Rt(a,O,B?he:J0(xe._f)):U(O,he),o.mount&&b()}},D=(O,B,Y,je,xe)=>{let he=!1,Oe=!1;const _t={name:O},pt=!!(Te(n,O)&&Te(n,O)._f&&Te(n,O)._f.disabled);if(!Y||je){d.isDirty&&(Oe=r.isDirty,r.isDirty=_t.isDirty=P(),he=Oe!==_t.isDirty);const vt=pt||Ka(Te(s,O),B);Oe=!!(!pt&&Te(r.dirtyFields,O)),vt||pt?Er(r.dirtyFields,O):Rt(r.dirtyFields,O,!0),_t.dirtyFields=r.dirtyFields,he=he||d.dirtyFields&&Oe!==!vt}if(Y){const vt=Te(r.touchedFields,O);vt||(Rt(r.touchedFields,O,Y),_t.touchedFields=r.touchedFields,he=he||d.touchedFields&&vt!==Y)}return he&&xe&&h.state.next(_t),he?_t:{}},T=(O,B,Y,je)=>{const xe=Te(r.errors,O),he=d.isValid&&oi(B)&&r.isValid!==B;if(t.delayError&&Y?(c=w(()=>_(O,Y)),c(t.delayError)):(clearTimeout(u),c=null,Y?Rt(r.errors,O,Y):Er(r.errors,O)),(Y?!Ka(xe,Y):xe)||!Cn(je)||he){const Oe={...je,...he&&oi(B)?{isValid:B}:{},errors:r.errors,name:O};r={...r,...Oe},h.state.next(Oe)}},k=async O=>{y(O,!0);const B=await e.resolver(a,e.context,Boe(O||l.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return y(O),B},R=async O=>{const{errors:B}=await k(O);if(O)for(const Y of O){const je=Te(B,Y);je?Rt(r.errors,Y,je):Er(r.errors,Y)}else r.errors=B;return B},S=async(O,B,Y={valid:!0})=>{for(const je in O){const xe=O[je];if(xe){const{_f:he,...Oe}=xe;if(he){const _t=l.array.has(he.name),pt=xe._f&&qoe(xe._f);pt&&d.validatingFields&&y([je],!0);const vt=await rT(xe,a,x,e.shouldUseNativeValidation&&!B,_t);if(pt&&d.validatingFields&&y([je]),vt[he.name]&&(Y.valid=!1,B))break;!B&&(Te(vt,he.name)?_t?Foe(r.errors,vt,he.name):Rt(r.errors,he.name,vt[he.name]):Er(r.errors,he.name))}!Cn(Oe)&&await S(Oe,B,Y)}}return Y.valid},A=()=>{for(const O of l.unMount){const B=Te(n,O);B&&(B._f.refs?B._f.refs.every(Y=>!Q0(Y)):!Q0(B._f.ref))&&st(O)}l.unMount=new Set},P=(O,B)=>(O&&B&&Rt(a,O,B),!Ka(X(),s)),N=(O,B,Y)=>Voe(O,l,{...o.mount?a:hr(B)?s:gi(O)?{[O]:B}:B},Y,B),V=O=>ay(Te(o.mount?a:s,O,t.shouldUnregister?Te(s,O,[]):[])),U=(O,B,Y={})=>{const je=Te(n,O);let xe=B;if(je){const he=je._f;he&&(!he.disabled&&Rt(a,O,e5(B,he)),xe=wv(he.ref)&&vn(B)?"":B,JL(he.ref)?[...he.ref.options].forEach(Oe=>Oe.selected=xe.includes(Oe.value)):he.refs?jm(he.ref)?he.refs.length>1?he.refs.forEach(Oe=>(!Oe.defaultChecked||!Oe.disabled)&&(Oe.checked=Array.isArray(xe)?!!xe.find(_t=>_t===Oe.value):xe===Oe.value)):he.refs[0]&&(he.refs[0].checked=!!xe):he.refs.forEach(Oe=>Oe.checked=Oe.value===xe):NN(he.ref)?he.ref.value="":(he.ref.value=xe,he.ref.type||h.values.next({name:O,values:{...a}})))}(Y.shouldDirty||Y.shouldTouch)&&D(O,xe,Y.shouldTouch,Y.shouldDirty,!0),Y.shouldValidate&&z(O)},H=(O,B,Y)=>{for(const je in B){const xe=B[je],he=`${O}.${je}`,Oe=Te(n,he);(l.array.has(O)||!_v(xe)||Oe&&!Oe._f)&&!Yc(xe)?H(he,xe,Y):U(he,xe,Y)}},F=(O,B,Y={})=>{const je=Te(n,O),xe=l.array.has(O),he=us(B);Rt(a,O,he),xe?(h.array.next({name:O,values:{...a}}),(d.isDirty||d.dirtyFields)&&Y.shouldDirty&&h.state.next({name:O,dirtyFields:Ep(s,a),isDirty:P(O,he)})):je&&!je._f&&!vn(he)?H(O,he,Y):U(O,he,Y),J2(O,l)&&h.state.next({...r}),h.values.next({name:o.mount?O:void 0,values:{...a}})},L=async O=>{o.mount=!0;const B=O.target;let Y=B.name,je=!0;const xe=Te(n,Y),he=()=>B.type?J0(xe._f):Aoe(O),Oe=_t=>{je=Number.isNaN(_t)||Ka(_t,Te(a,Y,_t))};if(xe){let _t,pt;const vt=he(),cs=O.type===Y2.BLUR||O.type===Y2.FOCUS_OUT,Tm=!Woe(xe._f)&&!e.resolver&&!Te(r.errors,Y)&&!xe._f.deps||Hoe(cs,Te(r.touchedFields,Y),r.isSubmitted,g,m),hc=J2(Y,l,cs);Rt(a,Y,vt),cs?(xe._f.onBlur&&xe._f.onBlur(O),c&&c(0)):xe._f.onChange&&xe._f.onChange(O);const xd=D(Y,vt,cs,!1),Go=!Cn(xd)||hc;if(!cs&&h.values.next({name:Y,type:O.type,values:{...a}}),Tm)return d.isValid&&(t.mode==="onBlur"?cs&&b():b()),Go&&h.state.next({name:Y,...hc?{}:xd});if(!cs&&hc&&h.state.next({...r}),e.resolver){const{errors:yd}=await k([Y]);if(Oe(vt),je){const Im=sT(r.errors,n,Y),fc=sT(yd,n,Im.name||Y);_t=fc.error,Y=fc.name,pt=Cn(yd)}}else y([Y],!0),_t=(await rT(xe,a,x,e.shouldUseNativeValidation))[Y],y([Y]),Oe(vt),je&&(_t?pt=!1:d.isValid&&(pt=await S(n,!0)));je&&(xe._f.deps&&z(xe._f.deps),T(Y,pt,_t,xd))}},W=(O,B)=>{if(Te(r.errors,B)&&O.focus)return O.focus(),1},z=async(O,B={})=>{let Y,je;const xe=ug(O);if(e.resolver){const he=await R(hr(O)?O:xe);Y=Cn(he),je=O?!xe.some(Oe=>Te(he,Oe)):Y}else O?(je=(await Promise.all(xe.map(async he=>{const Oe=Te(n,he);return await S(Oe&&Oe._f?{[he]:Oe}:Oe)}))).every(Boolean),!(!je&&!r.isValid)&&b()):je=Y=await S(n);return h.state.next({...!gi(O)||d.isValid&&Y!==r.isValid?{}:{name:O},...e.resolver||!O?{isValid:Y}:{},errors:r.errors}),B.shouldFocus&&!je&&Ih(n,W,O?xe:l.mount),je},X=O=>{const B={...o.mount?a:s};return hr(O)?B:gi(O)?Te(B,O):O.map(Y=>Te(B,Y))},oe=(O,B)=>({invalid:!!Te((B||r).errors,O),isDirty:!!Te((B||r).dirtyFields,O),error:Te((B||r).errors,O),isValidating:!!Te(r.validatingFields,O),isTouched:!!Te((B||r).touchedFields,O)}),Se=O=>{O&&ug(O).forEach(B=>Er(r.errors,B)),h.state.next({errors:O?r.errors:{}})},Ze=(O,B,Y)=>{const je=(Te(n,O,{_f:{}})._f||{}).ref,xe=Te(r.errors,O)||{},{ref:he,message:Oe,type:_t,...pt}=xe;Rt(r.errors,O,{...pt,...B,ref:je}),h.state.next({name:O,errors:r.errors,isValid:!1}),Y&&Y.shouldFocus&&je&&je.focus&&je.focus()},mt=(O,B)=>ea(O)?h.values.subscribe({next:Y=>O(N(void 0,B),Y)}):N(O,B,!0),st=(O,B={})=>{for(const Y of O?ug(O):l.mount)l.mount.delete(Y),l.array.delete(Y),B.keepValue||(Er(n,Y),Er(a,Y)),!B.keepError&&Er(r.errors,Y),!B.keepDirty&&Er(r.dirtyFields,Y),!B.keepTouched&&Er(r.touchedFields,Y),!B.keepIsValidating&&Er(r.validatingFields,Y),!e.shouldUnregister&&!B.keepDefaultValue&&Er(s,Y);h.values.next({values:{...a}}),h.state.next({...r,...B.keepDirty?{isDirty:P()}:{}}),!B.keepIsValid&&b()},_e=({disabled:O,name:B,field:Y,fields:je,value:xe})=>{if(oi(O)&&o.mount||O){const he=O?void 0:hr(xe)?J0(Y?Y._f:Te(je,B)._f):xe;Rt(a,B,he),D(B,he,!1,!1,!0)}},Xe=(O,B={})=>{let Y=Te(n,O);const je=oi(B.disabled)||oi(t.disabled);return Rt(n,O,{...Y||{},_f:{...Y&&Y._f?Y._f:{ref:{name:O}},name:O,mount:!0,...B}}),l.mount.add(O),Y?_e({field:Y,disabled:oi(B.disabled)?B.disabled:t.disabled,name:O,value:B.value}):C(O,!0,B.value),{...je?{disabled:B.disabled||t.disabled}:{},...e.progressive?{required:!!B.required,min:Gd(B.min),max:Gd(B.max),minLength:Gd(B.minLength),maxLength:Gd(B.maxLength),pattern:Gd(B.pattern)}:{},name:O,onChange:L,onBlur:L,ref:xe=>{if(xe){Xe(O,B),Y=Te(n,O);const he=hr(xe.value)&&xe.querySelectorAll&&xe.querySelectorAll("input,select,textarea")[0]||xe,Oe=zoe(he),_t=Y._f.refs||[];if(Oe?_t.find(pt=>pt===he):he===Y._f.ref)return;Rt(n,O,{_f:{...Y._f,...Oe?{refs:[..._t.filter(Q0),he,...Array.isArray(Te(s,O))?[{}]:[]],ref:{type:he.type,name:O}}:{ref:he}}}),C(O,!1,void 0,he)}else Y=Te(n,O,{}),Y._f&&(Y._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(Roe(l.array,O)&&o.action)&&l.unMount.add(O)}}},te=()=>e.shouldFocusError&&Ih(n,W,l.mount),me=O=>{oi(O)&&(h.state.next({disabled:O}),Ih(n,(B,Y)=>{const je=Te(n,Y);je&&(B.disabled=je._f.disabled||O,Array.isArray(je._f.refs)&&je._f.refs.forEach(xe=>{xe.disabled=je._f.disabled||O}))},0,!1))},K=(O,B)=>async Y=>{let je;Y&&(Y.preventDefault&&Y.preventDefault(),Y.persist&&Y.persist());let xe=us(a);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:he,values:Oe}=await k();r.errors=he,xe=Oe}else await S(n);if(Er(r.errors,"root"),Cn(r.errors)){h.state.next({errors:{}});try{await O(xe,Y)}catch(he){je=he}}else B&&await B({...r.errors},Y),te(),setTimeout(te);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Cn(r.errors)&&!je,submitCount:r.submitCount+1,errors:r.errors}),je)throw je},le=(O,B={})=>{Te(n,O)&&(hr(B.defaultValue)?F(O,us(Te(s,O))):(F(O,B.defaultValue),Rt(s,O,us(B.defaultValue))),B.keepTouched||Er(r.touchedFields,O),B.keepDirty||(Er(r.dirtyFields,O),r.isDirty=B.defaultValue?P(O,us(Te(s,O))):P()),B.keepError||(Er(r.errors,O),d.isValid&&b()),h.state.next({...r}))},q=(O,B={})=>{const Y=O?us(O):s,je=us(Y),xe=Cn(O),he=xe?s:je;if(B.keepDefaultValues||(s=Y),!B.keepValues){if(B.keepDirtyValues)for(const Oe of l.mount)Te(r.dirtyFields,Oe)?Rt(he,Oe,Te(a,Oe)):F(Oe,Te(he,Oe));else{if(_N&&hr(O))for(const Oe of l.mount){const _t=Te(n,Oe);if(_t&&_t._f){const pt=Array.isArray(_t._f.refs)?_t._f.refs[0]:_t._f.ref;if(wv(pt)){const vt=pt.closest("form");if(vt){vt.reset();break}}}}n={}}a=t.shouldUnregister?B.keepDefaultValues?us(s):{}:us(he),h.array.next({values:{...he}}),h.values.next({values:{...he}})}l={mount:B.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:B.keepSubmitCount?r.submitCount:0,isDirty:xe?!1:B.keepDirty?r.isDirty:!!(B.keepDefaultValues&&!Ka(O,s)),isSubmitted:B.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:xe?{}:B.keepDirtyValues?B.keepDefaultValues&&a?Ep(s,a):r.dirtyFields:B.keepDefaultValues&&O?Ep(s,O):B.keepDirty?r.dirtyFields:{},touchedFields:B.keepTouched?r.touchedFields:{},errors:B.keepErrors?r.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Z=(O,B)=>q(ea(O)?O(a):O,B);return{control:{register:Xe,unregister:st,getFieldState:oe,handleSubmit:K,setError:Ze,_executeSchema:k,_getWatch:N,_getDirty:P,_updateValid:b,_removeUnmounted:A,_updateFieldArray:v,_updateDisabledField:_e,_getFieldArray:V,_reset:q,_resetDefaultValues:()=>ea(e.defaultValues)&&e.defaultValues().then(O=>{Z(O,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:O=>{r={...r,...O}},_disableForm:me,_subjects:h,_proxyFormState:d,_setErrors:E,get _fields(){return n},get _formValues(){return a},get _state(){return o},set _state(O){o=O},get _defaultValues(){return s},get _names(){return l},set _names(O){l=O},get _formState(){return r},set _formState(O){r=O},get _options(){return e},set _options(O){e={...e,...O}}},trigger:z,register:Xe,handleSubmit:K,watch:mt,setValue:F,getValues:X,reset:Z,resetField:le,clearErrors:Se,unregister:st,setError:Ze,setFocus:(O,B={})=>{const Y=Te(n,O),je=Y&&Y._f;if(je){const xe=je.refs?je.refs[0]:je.ref;xe.focus&&(xe.focus(),B.shouldSelect&&xe.select())}},getFieldState:oe}}function jl(t={}){const e=Ce.useRef(),r=Ce.useRef(),[n,s]=Ce.useState({isDirty:!1,isValidating:!1,isLoading:ea(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:ea(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Yoe(t),formState:n});const a=e.current.control;return a._options=t,Loe({subject:a._subjects.state,next:o=>{Ooe(o,a._proxyFormState,a._updateFormState)&&s({...a._formState})}}),Ce.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Ce.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==n.isDirty&&a._subjects.state.next({isDirty:o})}},[a,n.isDirty]),Ce.useEffect(()=>{t.values&&!Ka(t.values,r.current)?(a._reset(t.values,a._options.resetOptions),r.current=t.values,s(o=>({...o}))):a._resetDefaultValues()},[t.values,a]),Ce.useEffect(()=>{t.errors&&a._setErrors(t.errors)},[t.errors,a]),Ce.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),Ce.useEffect(()=>{t.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[t.shouldUnregister,a]),e.current.formState=Moe(n,a),e.current}const iT=(t,e,r)=>{if(t&&"reportValidity"in t){const n=Te(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},t5=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?iT(n.ref,r,t):n.refs&&n.refs.forEach(s=>iT(s,r,t))}},Qoe=(t,e)=>{e.shouldUseNativeValidation&&t5(t,e);const r={};for(const n in t){const s=Te(e.fields,n),a=Object.assign(t[n]||{},{ref:s&&s.ref});if(Joe(e.names||Object.keys(t),n)){const o=Object.assign({},Te(r,n));Rt(o,"root",a),Rt(r,n,o)}else Rt(r,n,a)}return r},Joe=(t,e)=>t.some(r=>r.startsWith(e+"."));var Xoe=function(t,e){for(var r={};t.length;){var n=t[0],s=n.code,a=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:a,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var c=r[o].types,u=c&&c[n.code];r[o]=KL(o,e,r,s,u?[].concat(u,n.message):n.message)}t.shift()}return r},Nl=function(t,e,r){return r===void 0&&(r={}),function(n,s,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(u){return a.shouldUseNativeValidation&&t5({},a),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Qoe(Xoe(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},wt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const a={};for(const o of s)a[o]=o;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of a)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(const o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(wt||(wt={}));var t_;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(t_||(t_={}));const ke=wt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ya=t=>{switch(typeof t){case"undefined":return ke.undefined;case"string":return ke.string;case"number":return isNaN(t)?ke.nan:ke.number;case"boolean":return ke.boolean;case"function":return ke.function;case"bigint":return ke.bigint;case"symbol":return ke.symbol;case"object":return Array.isArray(t)?ke.array:t===null?ke.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ke.promise:typeof Map<"u"&&t instanceof Map?ke.map:typeof Set<"u"&&t instanceof Set?ke.set:typeof Date<"u"&&t instanceof Date?ke.date:ke.object;default:return ke.unknown}},ue=wt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Zoe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ns extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(a){return a.message},n={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),n}static assert(e){if(!(e instanceof ns))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,wt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ns.create=t=>new ns(t);const zu=(t,e)=>{let r;switch(t.code){case ue.invalid_type:t.received===ke.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ue.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,wt.jsonStringifyReplacer)}`;break;case ue.unrecognized_keys:r=`Unrecognized key(s) in object: ${wt.joinValues(t.keys,", ")}`;break;case ue.invalid_union:r="Invalid input";break;case ue.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${wt.joinValues(t.options)}`;break;case ue.invalid_enum_value:r=`Invalid enum value. Expected ${wt.joinValues(t.options)}, received '${t.received}'`;break;case ue.invalid_arguments:r="Invalid function arguments";break;case ue.invalid_return_type:r="Invalid function return type";break;case ue.invalid_date:r="Invalid date";break;case ue.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:wt.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ue.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ue.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ue.custom:r="Invalid input";break;case ue.invalid_intersection_types:r="Intersection results could not be merged";break;case ue.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ue.not_finite:r="Number must be finite";break;default:r=e.defaultError,wt.assertNever(t)}return{message:r}};let r5=zu;function ele(t){r5=t}function Nv(){return r5}const Sv=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,a=[...r,...s.path||[]],o={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...s,path:a,message:l}},tle=[];function Ne(t,e){const r=Nv(),n=Sv({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===zu?void 0:zu].filter(s=>!!s)});t.common.issues.push(n)}class un{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return qe;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r){const a=await s.key,o=await s.value;n.push({key:a,value:o})}return un.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return qe;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[a.value]=o.value)}return{status:e.value,value:n}}}const qe=Object.freeze({status:"aborted"}),Qc=t=>({status:"dirty",value:t}),_n=t=>({status:"valid",value:t}),r_=t=>t.status==="aborted",n_=t=>t.status==="dirty",jf=t=>t.status==="valid",Nf=t=>typeof Promise<"u"&&t instanceof Promise;function Ev(t,e,r,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function n5(t,e,r,n,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}var Ve;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ve||(Ve={}));var oh,lh;class Ai{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const aT=(t,e)=>{if(jf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ns(t.common.issues);return this._error=r,this._error}}};function tt(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{var c,u;const{message:d}=t;return o.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??n)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},description:s}}class nt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ya(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Ya(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new un,ctx:{common:e.parent.common,data:e.data,parsedType:Ya(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Nf(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ya(e)},a=this._parseSync({data:e,path:s.path,parent:s});return aT(s,a)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ya(e)},s=this._parse({data:e,path:n.path,parent:n}),a=await(Nf(s)?s:Promise.resolve(s));return aT(n,a)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,a)=>{const o=e(s),l=()=>a.addIssue({code:ue.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new ti({schema:this,typeName:ze.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ei.create(this,this._def)}nullable(){return Ao.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Gs.create(this,this._def)}promise(){return qu.create(this,this._def)}or(e){return kf.create([this,e],this._def)}and(e){return Tf.create(this,e,this._def)}transform(e){return new ti({...tt(this._def),schema:this,typeName:ze.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Df({...tt(this._def),innerType:this,defaultValue:r,typeName:ze.ZodDefault})}brand(){return new EN({typeName:ze.ZodBranded,type:this,...tt(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Mf({...tt(this._def),innerType:this,catchValue:r,typeName:ze.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Nm.create(this,e)}readonly(){return Of.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const rle=/^c[^\s-]{8,}$/i,nle=/^[0-9a-z]+$/,sle=/^[0-9A-HJKMNP-TV-Z]{26}$/,ile=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ale=/^[a-z0-9_-]{21}$/i,ole=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,lle=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,cle="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let X0;const ule=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,dle=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,hle=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,s5="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fle=new RegExp(`^${s5}$`);function i5(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function mle(t){return new RegExp(`^${i5(t)}$`)}function a5(t){let e=`${s5}T${i5(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function ple(t,e){return!!((e==="v4"||!e)&&ule.test(t)||(e==="v6"||!e)&&dle.test(t))}class zs extends nt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ke.string){const a=this._getOrReturnCtx(e);return Ne(a,{code:ue.invalid_type,expected:ke.string,received:a.parsedType}),qe}const n=new un;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?Ne(s,{code:ue.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ne(s,{code:ue.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")lle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"email",code:ue.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")X0||(X0=new RegExp(cle,"u")),X0.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"emoji",code:ue.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")ile.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"uuid",code:ue.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")ale.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"nanoid",code:ue.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")rle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"cuid",code:ue.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")nle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"cuid2",code:ue.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")sle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"ulid",code:ue.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ne(s,{validation:"url",code:ue.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"regex",code:ue.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?a5(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?fle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?mle(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?ole.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"duration",code:ue.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?ple(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"ip",code:ue.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?hle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"base64",code:ue.invalid_string,message:a.message}),n.dirty()):wt.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:ue.invalid_string,...Ve.errToObj(n)})}_addCheck(e){return new zs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ve.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ve.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ve.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ve.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ve.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ve.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ve.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ve.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ve.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ve.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...Ve.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ve.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ve.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ve.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...Ve.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ve.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ve.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ve.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ve.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ve.errToObj(r)})}nonempty(e){return this.min(1,Ve.errToObj(e))}trim(){return new zs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new zs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new zs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}zs.create=t=>{var e;return new zs({checks:[],typeName:ze.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...tt(t)})};function gle(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,a=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return a%o/Math.pow(10,s)}class ko extends nt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ke.number){const a=this._getOrReturnCtx(e);return Ne(a,{code:ue.invalid_type,expected:ke.number,received:a.parsedType}),qe}let n;const s=new un;for(const a of this._def.checks)a.kind==="int"?wt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Ne(n,{code:ue.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:ue.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:ue.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?gle(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:ue.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Ne(n,{code:ue.not_finite,message:a.message}),s.dirty()):wt.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ve.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ve.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ve.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ve.toString(r))}setLimit(e,r,n,s){return new ko({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ve.toString(s)}]})}_addCheck(e){return new ko({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ve.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ve.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ve.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ve.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ve.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ve.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&wt.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}ko.create=t=>new ko({checks:[],typeName:ze.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...tt(t)});class To extends nt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ke.bigint){const a=this._getOrReturnCtx(e);return Ne(a,{code:ue.invalid_type,expected:ke.bigint,received:a.parsedType}),qe}let n;const s=new un;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:ue.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:ue.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:ue.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):wt.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ve.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ve.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ve.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ve.toString(r))}setLimit(e,r,n,s){return new To({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ve.toString(s)}]})}_addCheck(e){return new To({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ve.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ve.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}To.create=t=>{var e;return new To({checks:[],typeName:ze.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...tt(t)})};class Sf extends nt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ke.boolean){const n=this._getOrReturnCtx(e);return Ne(n,{code:ue.invalid_type,expected:ke.boolean,received:n.parsedType}),qe}return _n(e.data)}}Sf.create=t=>new Sf({typeName:ze.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...tt(t)});class Kl extends nt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ke.date){const a=this._getOrReturnCtx(e);return Ne(a,{code:ue.invalid_type,expected:ke.date,received:a.parsedType}),qe}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Ne(a,{code:ue.invalid_date}),qe}const n=new un;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),Ne(s,{code:ue.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):wt.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Kl({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ve.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ve.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Kl.create=t=>new Kl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ze.ZodDate,...tt(t)});class Cv extends nt{_parse(e){if(this._getType(e)!==ke.symbol){const n=this._getOrReturnCtx(e);return Ne(n,{code:ue.invalid_type,expected:ke.symbol,received:n.parsedType}),qe}return _n(e.data)}}Cv.create=t=>new Cv({typeName:ze.ZodSymbol,...tt(t)});class Ef extends nt{_parse(e){if(this._getType(e)!==ke.undefined){const n=this._getOrReturnCtx(e);return Ne(n,{code:ue.invalid_type,expected:ke.undefined,received:n.parsedType}),qe}return _n(e.data)}}Ef.create=t=>new Ef({typeName:ze.ZodUndefined,...tt(t)});class Cf extends nt{_parse(e){if(this._getType(e)!==ke.null){const n=this._getOrReturnCtx(e);return Ne(n,{code:ue.invalid_type,expected:ke.null,received:n.parsedType}),qe}return _n(e.data)}}Cf.create=t=>new Cf({typeName:ze.ZodNull,...tt(t)});class Bu extends nt{constructor(){super(...arguments),this._any=!0}_parse(e){return _n(e.data)}}Bu.create=t=>new Bu({typeName:ze.ZodAny,...tt(t)});class Sl extends nt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _n(e.data)}}Sl.create=t=>new Sl({typeName:ze.ZodUnknown,...tt(t)});class _a extends nt{_parse(e){const r=this._getOrReturnCtx(e);return Ne(r,{code:ue.invalid_type,expected:ke.never,received:r.parsedType}),qe}}_a.create=t=>new _a({typeName:ze.ZodNever,...tt(t)});class kv extends nt{_parse(e){if(this._getType(e)!==ke.undefined){const n=this._getOrReturnCtx(e);return Ne(n,{code:ue.invalid_type,expected:ke.void,received:n.parsedType}),qe}return _n(e.data)}}kv.create=t=>new kv({typeName:ze.ZodVoid,...tt(t)});class Gs extends nt{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==ke.array)return Ne(r,{code:ue.invalid_type,expected:ke.array,received:r.parsedType}),qe;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,l=r.data.length<s.exactLength.value;(o||l)&&(Ne(r,{code:o?ue.too_big:ue.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(Ne(r,{code:ue.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(Ne(r,{code:ue.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>s.type._parseAsync(new Ai(r,o,r.path,l)))).then(o=>un.mergeArray(n,o));const a=[...r.data].map((o,l)=>s.type._parseSync(new Ai(r,o,r.path,l)));return un.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new Gs({...this._def,minLength:{value:e,message:Ve.toString(r)}})}max(e,r){return new Gs({...this._def,maxLength:{value:e,message:Ve.toString(r)}})}length(e,r){return new Gs({...this._def,exactLength:{value:e,message:Ve.toString(r)}})}nonempty(e){return this.min(1,e)}}Gs.create=(t,e)=>new Gs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ze.ZodArray,...tt(e)});function Dc(t){if(t instanceof tr){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Ei.create(Dc(n))}return new tr({...t._def,shape:()=>e})}else return t instanceof Gs?new Gs({...t._def,type:Dc(t.element)}):t instanceof Ei?Ei.create(Dc(t.unwrap())):t instanceof Ao?Ao.create(Dc(t.unwrap())):t instanceof Pi?Pi.create(t.items.map(e=>Dc(e))):t}class tr extends nt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=wt.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==ke.object){const u=this._getOrReturnCtx(e);return Ne(u,{code:ue.invalid_type,expected:ke.object,received:u.parsedType}),qe}const{status:n,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof _a&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=a[u],h=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Ai(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof _a){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")l.length>0&&(Ne(s,{code:ue.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Ai(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>un.mergeObjectSync(n,u)):un.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Ve.errToObj,new tr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,a,o,l;const c=(o=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=Ve.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new tr({...this._def,unknownKeys:"strip"})}passthrough(){return new tr({...this._def,unknownKeys:"passthrough"})}extend(e){return new tr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new tr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ze.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new tr({...this._def,catchall:e})}pick(e){const r={};return wt.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new tr({...this._def,shape:()=>r})}omit(e){const r={};return wt.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new tr({...this._def,shape:()=>r})}deepPartial(){return Dc(this)}partial(e){const r={};return wt.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new tr({...this._def,shape:()=>r})}required(e){const r={};return wt.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Ei;)a=a._def.innerType;r[n]=a}}),new tr({...this._def,shape:()=>r})}keyof(){return o5(wt.objectKeys(this.shape))}}tr.create=(t,e)=>new tr({shape:()=>t,unknownKeys:"strip",catchall:_a.create(),typeName:ze.ZodObject,...tt(e)});tr.strictCreate=(t,e)=>new tr({shape:()=>t,unknownKeys:"strict",catchall:_a.create(),typeName:ze.ZodObject,...tt(e)});tr.lazycreate=(t,e)=>new tr({shape:t,unknownKeys:"strip",catchall:_a.create(),typeName:ze.ZodObject,...tt(e)});class kf extends nt{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new ns(l.ctx.common.issues));return Ne(r,{code:ue.invalid_union,unionErrors:o}),qe}if(r.common.async)return Promise.all(n.map(async a=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let a;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new ns(c));return Ne(r,{code:ue.invalid_union,unionErrors:l}),qe}}get options(){return this._def.options}}kf.create=(t,e)=>new kf({options:t,typeName:ze.ZodUnion,...tt(e)});const zi=t=>t instanceof Af?zi(t.schema):t instanceof ti?zi(t.innerType()):t instanceof Pf?[t.value]:t instanceof Io?t.options:t instanceof Rf?wt.objectValues(t.enum):t instanceof Df?zi(t._def.innerType):t instanceof Ef?[void 0]:t instanceof Cf?[null]:t instanceof Ei?[void 0,...zi(t.unwrap())]:t instanceof Ao?[null,...zi(t.unwrap())]:t instanceof EN||t instanceof Of?zi(t.unwrap()):t instanceof Mf?zi(t._def.innerType):[];class oy extends nt{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.object)return Ne(r,{code:ue.invalid_type,expected:ke.object,received:r.parsedType}),qe;const n=this.discriminator,s=r.data[n],a=this.optionsMap.get(s);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(Ne(r,{code:ue.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),qe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const a of r){const o=zi(a.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,a)}}return new oy({typeName:ze.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...tt(n)})}}function s_(t,e){const r=Ya(t),n=Ya(e);if(t===e)return{valid:!0,data:t};if(r===ke.object&&n===ke.object){const s=wt.objectKeys(e),a=wt.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=s_(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===ke.array&&n===ke.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=s_(o,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===ke.date&&n===ke.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Tf extends nt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(a,o)=>{if(r_(a)||r_(o))return qe;const l=s_(a.value,o.value);return l.valid?((n_(a)||n_(o))&&r.dirty(),{status:r.value,value:l.data}):(Ne(n,{code:ue.invalid_intersection_types}),qe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Tf.create=(t,e,r)=>new Tf({left:t,right:e,typeName:ze.ZodIntersection,...tt(r)});class Pi extends nt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.array)return Ne(n,{code:ue.invalid_type,expected:ke.array,received:n.parsedType}),qe;if(n.data.length<this._def.items.length)return Ne(n,{code:ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),qe;!this._def.rest&&n.data.length>this._def.items.length&&(Ne(n,{code:ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ai(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>un.mergeArray(r,o)):un.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new Pi({...this._def,rest:e})}}Pi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Pi({items:t,typeName:ze.ZodTuple,rest:null,...tt(e)})};class If extends nt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.object)return Ne(n,{code:ue.invalid_type,expected:ke.object,received:n.parsedType}),qe;const s=[],a=this._def.keyType,o=this._def.valueType;for(const l in n.data)s.push({key:a._parse(new Ai(n,l,n.path,l)),value:o._parse(new Ai(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?un.mergeObjectAsync(r,s):un.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof nt?new If({keyType:e,valueType:r,typeName:ze.ZodRecord,...tt(n)}):new If({keyType:zs.create(),valueType:e,typeName:ze.ZodRecord,...tt(r)})}}class Tv extends nt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.map)return Ne(n,{code:ue.invalid_type,expected:ke.map,received:n.parsedType}),qe;const s=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:s._parse(new Ai(n,l,n.path,[u,"key"])),value:a._parse(new Ai(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return qe;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return qe;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}Tv.create=(t,e,r)=>new Tv({valueType:e,keyType:t,typeName:ze.ZodMap,...tt(r)});class Yl extends nt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.set)return Ne(n,{code:ue.invalid_type,expected:ke.set,received:n.parsedType}),qe;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(Ne(n,{code:ue.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(Ne(n,{code:ue.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return qe;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>a._parse(new Ai(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,r){return new Yl({...this._def,minSize:{value:e,message:Ve.toString(r)}})}max(e,r){return new Yl({...this._def,maxSize:{value:e,message:Ve.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Yl.create=(t,e)=>new Yl({valueType:t,minSize:null,maxSize:null,typeName:ze.ZodSet,...tt(e)});class mu extends nt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.function)return Ne(r,{code:ue.invalid_type,expected:ke.function,received:r.parsedType}),qe;function n(l,c){return Sv({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Nv(),zu].filter(u=>!!u),issueData:{code:ue.invalid_arguments,argumentsError:c}})}function s(l,c){return Sv({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Nv(),zu].filter(u=>!!u),issueData:{code:ue.invalid_return_type,returnTypeError:c}})}const a={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof qu){const l=this;return _n(async function(...c){const u=new ns([]),d=await l._def.args.parseAsync(c,a).catch(g=>{throw u.addIssue(n(c,g)),u}),h=await Reflect.apply(o,this,d);return await l._def.returns._def.type.parseAsync(h,a).catch(g=>{throw u.addIssue(s(h,g)),u})})}else{const l=this;return _n(function(...c){const u=l._def.args.safeParse(c,a);if(!u.success)throw new ns([n(c,u.error)]);const d=Reflect.apply(o,this,u.data),h=l._def.returns.safeParse(d,a);if(!h.success)throw new ns([s(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new mu({...this._def,args:Pi.create(e).rest(Sl.create())})}returns(e){return new mu({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new mu({args:e||Pi.create([]).rest(Sl.create()),returns:r||Sl.create(),typeName:ze.ZodFunction,...tt(n)})}}class Af extends nt{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Af.create=(t,e)=>new Af({getter:t,typeName:ze.ZodLazy,...tt(e)});class Pf extends nt{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Ne(r,{received:r.data,code:ue.invalid_literal,expected:this._def.value}),qe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Pf.create=(t,e)=>new Pf({value:t,typeName:ze.ZodLiteral,...tt(e)});function o5(t,e){return new Io({values:t,typeName:ze.ZodEnum,...tt(e)})}class Io extends nt{constructor(){super(...arguments),oh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Ne(r,{expected:wt.joinValues(n),received:r.parsedType,code:ue.invalid_type}),qe}if(Ev(this,oh)||n5(this,oh,new Set(this._def.values)),!Ev(this,oh).has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return Ne(r,{received:r.data,code:ue.invalid_enum_value,options:n}),qe}return _n(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Io.create(e,{...this._def,...r})}exclude(e,r=this._def){return Io.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}oh=new WeakMap;Io.create=o5;class Rf extends nt{constructor(){super(...arguments),lh.set(this,void 0)}_parse(e){const r=wt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ke.string&&n.parsedType!==ke.number){const s=wt.objectValues(r);return Ne(n,{expected:wt.joinValues(s),received:n.parsedType,code:ue.invalid_type}),qe}if(Ev(this,lh)||n5(this,lh,new Set(wt.getValidEnumValues(this._def.values))),!Ev(this,lh).has(e.data)){const s=wt.objectValues(r);return Ne(n,{received:n.data,code:ue.invalid_enum_value,options:s}),qe}return _n(e.data)}get enum(){return this._def.values}}lh=new WeakMap;Rf.create=(t,e)=>new Rf({values:t,typeName:ze.ZodNativeEnum,...tt(e)});class qu extends nt{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.promise&&r.common.async===!1)return Ne(r,{code:ue.invalid_type,expected:ke.promise,received:r.parsedType}),qe;const n=r.parsedType===ke.promise?r.data:Promise.resolve(r.data);return _n(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}qu.create=(t,e)=>new qu({type:t,typeName:ze.ZodPromise,...tt(e)});class ti extends nt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{Ne(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const o=s.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return qe;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?qe:c.status==="dirty"||r.value==="dirty"?Qc(c.value):c});{if(r.value==="aborted")return qe;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?qe:l.status==="dirty"||r.value==="dirty"?Qc(l.value):l}}if(s.type==="refinement"){const o=l=>{const c=s.refinement(l,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?qe:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?qe:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!jf(o))return o;const l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>jf(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:r.value,value:l})):o);wt.assertNever(s)}}ti.create=(t,e,r)=>new ti({schema:t,typeName:ze.ZodEffects,effect:e,...tt(r)});ti.createWithPreprocess=(t,e,r)=>new ti({schema:e,effect:{type:"preprocess",transform:t},typeName:ze.ZodEffects,...tt(r)});class Ei extends nt{_parse(e){return this._getType(e)===ke.undefined?_n(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ei.create=(t,e)=>new Ei({innerType:t,typeName:ze.ZodOptional,...tt(e)});class Ao extends nt{_parse(e){return this._getType(e)===ke.null?_n(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ao.create=(t,e)=>new Ao({innerType:t,typeName:ze.ZodNullable,...tt(e)});class Df extends nt{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===ke.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Df.create=(t,e)=>new Df({innerType:t,typeName:ze.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...tt(e)});class Mf extends nt{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Nf(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ns(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ns(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Mf.create=(t,e)=>new Mf({innerType:t,typeName:ze.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...tt(e)});class Iv extends nt{_parse(e){if(this._getType(e)!==ke.nan){const n=this._getOrReturnCtx(e);return Ne(n,{code:ue.invalid_type,expected:ke.nan,received:n.parsedType}),qe}return{status:"valid",value:e.data}}}Iv.create=t=>new Iv({typeName:ze.ZodNaN,...tt(t)});const vle=Symbol("zod_brand");class EN extends nt{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Nm extends nt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?qe:a.status==="dirty"?(r.dirty(),Qc(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?qe:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new Nm({in:e,out:r,typeName:ze.ZodPipeline})}}class Of extends nt{_parse(e){const r=this._def.innerType._parse(e),n=s=>(jf(s)&&(s.value=Object.freeze(s.value)),s);return Nf(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}Of.create=(t,e)=>new Of({innerType:t,typeName:ze.ZodReadonly,...tt(e)});function l5(t,e={},r){return t?Bu.create().superRefine((n,s)=>{var a,o;if(!t(n)){const l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(a=l.fatal)!==null&&a!==void 0?a:r)!==null&&o!==void 0?o:!0,u=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...u,fatal:c})}}):Bu.create()}const xle={object:tr.lazycreate};var ze;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ze||(ze={}));const yle=(t,e={message:`Input not instance of ${t.name}`})=>l5(r=>r instanceof t,e),c5=zs.create,u5=ko.create,wle=Iv.create,ble=To.create,d5=Sf.create,_le=Kl.create,jle=Cv.create,Nle=Ef.create,Sle=Cf.create,Ele=Bu.create,Cle=Sl.create,kle=_a.create,Tle=kv.create,Ile=Gs.create,Ale=tr.create,Ple=tr.strictCreate,Rle=kf.create,Dle=oy.create,Mle=Tf.create,Ole=Pi.create,Lle=If.create,Vle=Tv.create,Fle=Yl.create,$le=mu.create,Ule=Af.create,zle=Pf.create,Ble=Io.create,qle=Rf.create,Wle=qu.create,oT=ti.create,Hle=Ei.create,Gle=Ao.create,Kle=ti.createWithPreprocess,Yle=Nm.create,Qle=()=>c5().optional(),Jle=()=>u5().optional(),Xle=()=>d5().optional(),Zle={string:t=>zs.create({...t,coerce:!0}),number:t=>ko.create({...t,coerce:!0}),boolean:t=>Sf.create({...t,coerce:!0}),bigint:t=>To.create({...t,coerce:!0}),date:t=>Kl.create({...t,coerce:!0})},ece=qe;var Fe=Object.freeze({__proto__:null,defaultErrorMap:zu,setErrorMap:ele,getErrorMap:Nv,makeIssue:Sv,EMPTY_PATH:tle,addIssueToContext:Ne,ParseStatus:un,INVALID:qe,DIRTY:Qc,OK:_n,isAborted:r_,isDirty:n_,isValid:jf,isAsync:Nf,get util(){return wt},get objectUtil(){return t_},ZodParsedType:ke,getParsedType:Ya,ZodType:nt,datetimeRegex:a5,ZodString:zs,ZodNumber:ko,ZodBigInt:To,ZodBoolean:Sf,ZodDate:Kl,ZodSymbol:Cv,ZodUndefined:Ef,ZodNull:Cf,ZodAny:Bu,ZodUnknown:Sl,ZodNever:_a,ZodVoid:kv,ZodArray:Gs,ZodObject:tr,ZodUnion:kf,ZodDiscriminatedUnion:oy,ZodIntersection:Tf,ZodTuple:Pi,ZodRecord:If,ZodMap:Tv,ZodSet:Yl,ZodFunction:mu,ZodLazy:Af,ZodLiteral:Pf,ZodEnum:Io,ZodNativeEnum:Rf,ZodPromise:qu,ZodEffects:ti,ZodTransformer:ti,ZodOptional:Ei,ZodNullable:Ao,ZodDefault:Df,ZodCatch:Mf,ZodNaN:Iv,BRAND:vle,ZodBranded:EN,ZodPipeline:Nm,ZodReadonly:Of,custom:l5,Schema:nt,ZodSchema:nt,late:xle,get ZodFirstPartyTypeKind(){return ze},coerce:Zle,any:Ele,array:Ile,bigint:ble,boolean:d5,date:_le,discriminatedUnion:Dle,effect:oT,enum:Ble,function:$le,instanceof:yle,intersection:Mle,lazy:Ule,literal:zle,map:Vle,nan:wle,nativeEnum:qle,never:kle,null:Sle,nullable:Gle,number:u5,object:Ale,oboolean:Xle,onumber:Jle,optional:Hle,ostring:Qle,pipeline:Yle,preprocess:Kle,promise:Wle,record:Lle,set:Fle,strictObject:Ple,string:c5,symbol:jle,transformer:oT,tuple:Ole,undefined:Nle,union:Rle,unknown:Cle,void:Tle,NEVER:ece,ZodIssueCode:ue,quotelessJson:Zoe,ZodError:ns}),CN="Checkbox",[tce,tme]=ls(CN),[rce,nce]=tce(CN),h5=p.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,g]=p.useState(null),x=Je(e,E=>g(E)),w=p.useRef(!1),b=m?d||!!m.closest("form"):!0,[y=!1,v]=is({prop:s,defaultProp:a,onChange:u}),_=p.useRef(y);return p.useEffect(()=>{const E=m==null?void 0:m.form;if(E){const C=()=>v(_.current);return E.addEventListener("reset",C),()=>E.removeEventListener("reset",C)}},[m,v]),i.jsxs(rce,{scope:r,state:y,disabled:l,children:[i.jsx(De.button,{type:"button",role:"checkbox","aria-checked":po(y)?"mixed":y,"aria-required":o,"data-state":p5(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onKeyDown:pe(t.onKeyDown,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:pe(t.onClick,E=>{v(C=>po(C)?!0:!C),b&&(w.current=E.isPropagationStopped(),w.current||E.stopPropagation())})}),b&&i.jsx(sce,{control:m,bubbles:!w.current,name:n,value:c,checked:y,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"},defaultChecked:po(a)?!1:a})]})});h5.displayName=CN;var f5="CheckboxIndicator",m5=p.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...s}=t,a=nce(f5,r);return i.jsx(Kr,{present:n||po(a.state)||a.state===!0,children:i.jsx(De.span,{"data-state":p5(a.state),"data-disabled":a.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});m5.displayName=f5;var sce=t=>{const{control:e,checked:r,bubbles:n=!0,defaultChecked:s,...a}=t,o=p.useRef(null),l=Zx(r),c=zx(e);p.useEffect(()=>{const d=o.current,h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==r&&g){const x=new Event("click",{bubbles:n});d.indeterminate=po(r),g.call(d,po(r)?!1:r),d.dispatchEvent(x)}},[l,r,n]);const u=p.useRef(po(r)?!1:r);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??u.current,...a,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function po(t){return t==="indeterminate"}function p5(t){return po(t)?"indeterminate":t?"checked":"unchecked"}var g5=h5,ice=m5;const Av=p.forwardRef(({className:t,...e},r)=>i.jsx(g5,{ref:r,className:Le("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:i.jsx(ice,{className:Le("flex items-center justify-center text-current"),children:i.jsx(tN,{className:"h-4 w-4"})})}));Av.displayName=g5.displayName;var v5=["PageUp","PageDown"],x5=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],y5={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},pd="Slider",[i_,ace,oce]=cm(pd),[w5,rme]=ls(pd,[oce]),[lce,ly]=w5(pd),b5=p.forwardRef((t,e)=>{const{name:r,min:n=0,max:s=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:x,...w}=t,b=p.useRef(new Set),y=p.useRef(0),_=o==="horizontal"?cce:uce,[E=[],C]=is({prop:d,defaultProp:u,onChange:A=>{var N;(N=[...b.current][y.current])==null||N.focus(),h(A)}}),D=p.useRef(E);function T(A){const P=pce(E,A);S(A,P)}function k(A){S(A,y.current)}function R(){const A=D.current[y.current];E[y.current]!==A&&m(E)}function S(A,P,{commit:N}={commit:!1}){const V=yce(a),U=wce(Math.round((A-n)/a)*a+n,V),H=_f(U,[n,s]);C((F=[])=>{const L=fce(F,H,P);if(xce(L,c*a)){y.current=L.indexOf(H);const W=String(L)!==String(F);return W&&N&&m(L),W?L:F}else return F})}return i.jsx(lce,{scope:t.__scopeSlider,name:r,disabled:l,min:n,max:s,valueIndexToChangeRef:y,thumbs:b.current,values:E,orientation:o,form:x,children:i.jsx(i_.Provider,{scope:t.__scopeSlider,children:i.jsx(i_.Slot,{scope:t.__scopeSlider,children:i.jsx(_,{"aria-disabled":l,"data-disabled":l?"":void 0,...w,ref:e,onPointerDown:pe(w.onPointerDown,()=>{l||(D.current=E)}),min:n,max:s,inverted:g,onSlideStart:l?void 0:T,onSlideMove:l?void 0:k,onSlideEnd:l?void 0:R,onHomeKeyDown:()=>!l&&S(n,0,{commit:!0}),onEndKeyDown:()=>!l&&S(s,E.length-1,{commit:!0}),onStepKeyDown:({event:A,direction:P})=>{if(!l){const U=v5.includes(A.key)||A.shiftKey&&x5.includes(A.key)?10:1,H=y.current,F=E[H],L=a*U*P;S(F+L,H,{commit:!0})}}})})})})});b5.displayName=pd;var[_5,j5]=w5(pd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),cce=p.forwardRef((t,e)=>{const{min:r,max:n,dir:s,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,[h,m]=p.useState(null),g=Je(e,_=>m(_)),x=p.useRef(),w=oc(s),b=w==="ltr",y=b&&!a||!b&&a;function v(_){const E=x.current||h.getBoundingClientRect(),C=[0,E.width],T=kN(C,y?[r,n]:[n,r]);return x.current=E,T(_-E.left)}return i.jsx(_5,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:i.jsx(N5,{dir:w,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const E=v(_.clientX);o==null||o(E)},onSlideMove:_=>{const E=v(_.clientX);l==null||l(E)},onSlideEnd:()=>{x.current=void 0,c==null||c()},onStepKeyDown:_=>{const C=y5[y?"from-left":"from-right"].includes(_.key);u==null||u({event:_,direction:C?-1:1})}})})}),uce=p.forwardRef((t,e)=>{const{min:r,max:n,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,d=p.useRef(null),h=Je(e,d),m=p.useRef(),g=!s;function x(w){const b=m.current||d.current.getBoundingClientRect(),y=[0,b.height],_=kN(y,g?[n,r]:[r,n]);return m.current=b,_(w-b.top)}return i.jsx(_5,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:i.jsx(N5,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const b=x(w.clientY);a==null||a(b)},onSlideMove:w=>{const b=x(w.clientY);o==null||o(b)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:w=>{const y=y5[g?"from-bottom":"from-top"].includes(w.key);c==null||c({event:w,direction:y?-1:1})}})})}),N5=p.forwardRef((t,e)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=t,d=ly(pd,r);return i.jsx(De.span,{...u,ref:e,onKeyDown:pe(t.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):v5.concat(x5).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:pe(t.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():n(h)}),onPointerMove:pe(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:pe(t.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),a(h))})})}),S5="SliderTrack",E5=p.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,s=ly(S5,r);return i.jsx(De.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...n,ref:e})});E5.displayName=S5;var a_="SliderRange",C5=p.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,s=ly(a_,r),a=j5(a_,r),o=p.useRef(null),l=Je(e,o),c=s.values.length,u=s.values.map(m=>T5(m,s.min,s.max)),d=c>1?Math.min(...u):0,h=100-Math.max(...u);return i.jsx(De.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...n,ref:l,style:{...t.style,[a.startEdge]:d+"%",[a.endEdge]:h+"%"}})});C5.displayName=a_;var o_="SliderThumb",k5=p.forwardRef((t,e)=>{const r=ace(t.__scopeSlider),[n,s]=p.useState(null),a=Je(e,l=>s(l)),o=p.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return i.jsx(dce,{...t,ref:a,index:o})}),dce=p.forwardRef((t,e)=>{const{__scopeSlider:r,index:n,name:s,...a}=t,o=ly(o_,r),l=j5(o_,r),[c,u]=p.useState(null),d=Je(e,v=>u(v)),h=c?o.form||!!c.closest("form"):!0,m=zx(c),g=o.values[n],x=g===void 0?0:T5(g,o.min,o.max),w=mce(n,o.values.length),b=m==null?void 0:m[l.size],y=b?gce(b,x,l.direction):0;return p.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${x}% + ${y}px)`},children:[i.jsx(i_.ItemSlot,{scope:t.__scopeSlider,children:i.jsx(De.span,{role:"slider","aria-label":t["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:d,style:g===void 0?{display:"none"}:t.style,onFocus:pe(t.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),h&&i.jsx(hce,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},n)]})});k5.displayName=o_;var hce=t=>{const{value:e,...r}=t,n=p.useRef(null),s=Zx(e);return p.useEffect(()=>{const a=n.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(s!==e&&c){const u=new Event("input",{bubbles:!0});c.call(a,e),a.dispatchEvent(u)}},[s,e]),i.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:e})};function fce(t=[],e,r){const n=[...t];return n[r]=e,n.sort((s,a)=>s-a)}function T5(t,e,r){const a=100/(r-e)*(t-e);return _f(a,[0,100])}function mce(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function pce(t,e){if(t.length===1)return 0;const r=t.map(s=>Math.abs(s-e)),n=Math.min(...r);return r.indexOf(n)}function gce(t,e,r){const n=t/2,a=kN([0,50],[0,n]);return(n-a(e)*r)*r}function vce(t){return t.slice(0,-1).map((e,r)=>t[r+1]-e)}function xce(t,e){if(e>0){const r=vce(t);return Math.min(...r)>=e}return!0}function kN(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function yce(t){return(String(t).split(".")[1]||"").length}function wce(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}var I5=b5,bce=E5,_ce=C5,jce=k5;const A5=p.forwardRef(({className:t,...e},r)=>i.jsxs(I5,{ref:r,className:Le("relative flex w-full touch-none select-none items-center",t),...e,children:[i.jsx(bce,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:i.jsx(_ce,{className:"absolute h-full bg-primary"})}),i.jsx(jce,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));A5.displayName=I5.displayName;const Sm=Fe.object({title:Fe.string().min(5,"Le titre doit contenir au moins 5 caractères").max(80,"Le titre ne peut pas dépasser 80 caractères"),description:Fe.string().min(20,"La description doit contenir au moins 20 caractères").max(1e3,"La description ne peut pas dépasser 1000 caractères"),tags:Fe.array(Fe.string()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:Fe.string().min(1,"Veuillez spécifier un lieu de rencontre")}),Nce=Sm.extend({price:Fe.string().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit être d'au moins 1€");if(e>1e4)throw new Error("Le prix ne peut pas dépasser 10 000€");return e}),condition:Fe.enum(["new","like-new","good","fair"]),paymentMethods:Fe.array(Fe.string()).min(1,"Sélectionnez au moins un mode de paiement")}),Sce=Sm.extend({donationReason:Fe.string().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractères")}),Ece=Sm.extend({desiredItems:Fe.array(Fe.string()).min(1,"Ajoutez au moins un objet recherché"),estimatedValue:Fe.string().min(1,"La valeur estimée est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estimée doit être d'au moins 1€");return e})}),Cce=Sm.extend({hourlyRate:Fe.string().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit être d'au moins 5€/h");if(e>200)throw new Error("Le tarif ne peut pas dépasser 200€/h");return e}),duration:Fe.number().min(1,"La durée doit être d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:Fe.string().min(20,"Décrivez vos compétences en détail").max(500,"Maximum 500 caractères"),availability:Fe.string().optional()}),kce=[{value:"new",label:"Neuf",description:"Jamais utilisé, dans son emballage"},{value:"like-new",label:"Très bon",description:"Utilisé très peu, aucun défaut visible"},{value:"good",label:"Bon",description:"Utilisé mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],lT=[{value:"cash",label:"Espèces",icon:SD},{value:"transfer",label:"Virement bancaire",icon:gr},{value:"lydia",label:"Lydia",icon:ac},{value:"paypal",label:"PayPal",icon:gr}],Tce=()=>{var X,oe,Se,Ze,mt,st,_e,Xe;const{currentUser:t,userProfile:e}=Zt(),{createListing:r}=vm(),n=Dr(),[s]=nx(),[a,o]=p.useState(()=>s.get("type")||"sell"),[l,c]=p.useState([]),[u,d]=p.useState(!1),[h,m]=p.useState(""),[g,x]=p.useState([]),[w,b]=p.useState(!1),[y,v]=p.useState([""]),[_,E]=p.useState(""),[C,D]=p.useState([]),[T,k]=p.useState([1]),S=jl({resolver:Nl((()=>{switch(a){case"sell":return Nce;case"gift":return Sce;case"swap":return Ece;case"service":return Cce;default:return Sm}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});p.useEffect(()=>{S.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),x([]),v([""]),D([]),k([1]),c([])},[a,S]);const A=async te=>{if(!t)throw new Error("User not authenticated");const me=Date.now(),K=`listings/${t.uid}/${me}_${te.name}`,le=Sh(Ch,K),q=await X4(le,te);return await nv(q.ref)},P=async te=>{const me=te.target.files;if(!(!me||me.length===0)){d(!0);try{const le=Array.from(me).slice(0,10-l.length).filter(Z=>Z.size<=15728640).map(Z=>A(Z)),q=await Promise.all(le);c(Z=>[...Z,...q])}catch(K){console.error("Error uploading images:",K)}finally{d(!1)}}},N=te=>{c(me=>me.filter((K,le)=>le!==te))},V=()=>{if(h.trim()&&!g.includes(h.trim())&&g.length<5){const te=[...g,h.trim()];x(te),S.setValue("tags",te),m("")}},U=te=>{const me=g.filter(K=>K!==te);x(me),S.setValue("tags",me)},H=()=>{if(_.trim()){const te=[...y.filter(me=>me.trim()),_.trim()];v(te),S.setValue("desiredItems",te),E("")}},F=te=>{const me=y.filter((K,le)=>le!==te);v(me),S.setValue("desiredItems",me)},L=(te,me)=>{const K=me?[...C,te]:C.filter(le=>le!==te);D(K),S.setValue("paymentMethods",K)},W=async te=>{if(!(!t||!e)){b(!0);try{const me={title:te.title,description:te.description,currency:"EUR",category:"electronics",images:l,tags:te.tags,location:{city:"Paris",state:"Île-de-France",country:"France",campus:e.campus||null,university:e.university||null,coordinates:null},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let K;switch(a){case"sell":K={...me,price:te.price,condition:te.condition,transactionType:"sale",description:`${te.description}

Modes de paiement acceptés: ${C.map(q=>{var Z;return(Z=lT.find(fe=>fe.value===q))==null?void 0:Z.label}).join(", ")}`};break;case"gift":K={...me,price:0,condition:"good",transactionType:"donation",description:`${te.description}

Raison du don: ${te.donationReason}`};break;case"swap":K={...me,price:te.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:y.filter(q=>q.trim()).join(", "),description:`${te.description}

Recherche en échange: ${y.filter(q=>q.trim()).join(", ")}
Valeur estimée: ${te.estimatedValue}€`};break;case"service":K={...me,price:te.hourlyRate,condition:"new",transactionType:"service",description:`${te.description}

Compétences: ${te.skills}
Tarif: ${te.hourlyRate}€/h
Durée prévue: ${T[0]}h${te.availability?`
Disponibilités: ${te.availability}`:""}`};break;default:throw new Error("Type de transaction non supporté")}console.log("Submitting listing data:",K);const le=await r(K);n(`/listing/${le}`)}catch(me){console.error("Error creating listing:",me)}finally{b(!1)}}},z=()=>{const te=S.formState.errors,me=S.watch("title")&&S.watch("description")&&S.watch("meetingLocation")&&g.length>0;switch(a){case"sell":return me&&S.watch("price")&&C.length>0&&!te.title&&!te.description&&!te.price;case"gift":return me&&S.watch("donationReason")&&!te.title&&!te.description&&!te.donationReason;case"swap":return me&&y.some(K=>K.trim())&&S.watch("estimatedValue")&&!te.title&&!te.description&&!te.estimatedValue;case"service":return me&&S.watch("hourlyRate")&&S.watch("skills")&&!te.title&&!te.description&&!te.hourlyRate&&!te.skills;default:return!1}};return i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2 text-foreground",children:"Créer une annonce"}),i.jsx("p",{className:"text-muted-foreground",children:"Partagez vos objets, services ou recherches avec la communauté étudiante vérifiée"})]}),i.jsxs("form",{onSubmit:S.handleSubmit(W),className:"space-y-8",children:[i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Ab,{className:"w-5 h-5"}),"Type d'annonce"]}),i.jsx(lt,{children:"Le formulaire s'adapte automatiquement selon votre choix"})]}),i.jsx(J,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Q,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:i.jsxs(J,{className:"p-4 text-center",children:[i.jsx(ff,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Vendre"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendre un objet"})]})}),i.jsx(Q,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:i.jsxs(J,{className:"p-4 text-center",children:[i.jsx(Du,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Donner"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),i.jsx(Q,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:i.jsxs(J,{className:"p-4 text-center",children:[i.jsx(va,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Troc"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Échanger des objets"})]})}),i.jsx(Q,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:i.jsxs(J,{className:"p-4 text-center",children:[i.jsx(ur,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-foreground",children:"Service"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsx(Re,{className:"text-foreground",children:"Informations principales"})}),i.jsxs(J,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"title",className:"text-foreground",children:"Titre * (max 80 caractères)"}),i.jsx(we,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait état":a==="gift"?"Ex: Vélo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathématiques",...S.register("title"),className:"mt-1",maxLength:80}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(X=S.formState.errors.title)==null?void 0:X.message}),i.jsxs("span",{children:[((oe=S.watch("title"))==null?void 0:oe.length)||0,"/80"]})]})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"description",className:"text-foreground",children:"Description détaillée * (max 1000 caractères)"}),i.jsx(_s,{id:"description",placeholder:a==="sell"?"Décrivez l'état, l'utilisation, la raison de la vente...":a==="gift"?"Décrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Décrivez ce que vous proposez et ce que vous recherchez...":"Décrivez vos compétences, votre expérience, votre méthode...",rows:6,...S.register("description"),className:"mt-1",maxLength:1e3}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(Se=S.formState.errors.description)==null?void 0:Se.message}),i.jsxs("span",{children:[((Ze=S.watch("description"))==null?void 0:Ze.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(ff,{className:"w-5 h-5 text-blue-600"}),"Informations de vente"]})}),i.jsxs(J,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"price",className:"text-foreground",children:"Prix (€) *"}),i.jsx(we,{id:"price",type:"text",placeholder:"0,00",...S.register("price"),className:"mt-1"}),S.formState.errors.price&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.price.message})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"condition",className:"text-foreground",children:"État du produit *"}),i.jsxs(dt,{onValueChange:te=>S.setValue("condition",te),children:[i.jsx(at,{className:"mt-1",children:i.jsx(ht,{placeholder:"Sélectionnez un état"})}),i.jsx(ot,{children:kce.map(te=>i.jsx(ie,{value:te.value,children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-foreground",children:te.label}),i.jsx("div",{className:"text-xs text-muted-foreground",children:te.description})]})},te.value))})]}),S.formState.errors.condition&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.condition.message})]})]}),i.jsxs("div",{children:[i.jsx(de,{className:"text-foreground",children:"Modes de paiement acceptés *"}),i.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:lT.map(te=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Av,{id:te.value,checked:C.includes(te.value),onCheckedChange:me=>L(te.value,me)}),i.jsxs(de,{htmlFor:te.value,className:"flex items-center gap-2 cursor-pointer text-foreground",children:[i.jsx(te.icon,{className:"w-4 h-4"}),te.label]})]},te.value))}),C.length===0&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:"Sélectionnez au moins un mode de paiement"})]})]})]}),a==="gift"&&i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Du,{className:"w-5 h-5 text-green-600"}),"Informations du don"]})}),i.jsx(J,{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(de,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractères)"}),i.jsx(_s,{id:"donationReason",placeholder:"Ex: Je déménage, plus besoin, fin d'études...",rows:3,...S.register("donationReason"),className:"mt-1",maxLength:140}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(mt=S.formState.errors.donationReason)==null?void 0:mt.message}),i.jsxs("span",{children:[((st=S.watch("donationReason"))==null?void 0:st.length)||0,"/140"]})]})]})})]}),a==="swap"&&i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(va,{className:"w-5 h-5 text-purple-600"}),"Informations d'échange"]})}),i.jsxs(J,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(de,{className:"text-foreground",children:"Objets recherchés * (minimum 1)"}),i.jsxs("div",{className:"space-y-2 mt-2",children:[y.filter(te=>te.trim()).map((te,me)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(we,{value:te,readOnly:!0,className:"flex-1"}),i.jsx($,{type:"button",variant:"outline",size:"icon",onClick:()=>F(me),children:i.jsx(LD,{className:"w-4 h-4"})})]},me)),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(we,{placeholder:"Ex: Livre de physique L2",value:_,onChange:te=>E(te.target.value),onKeyPress:te=>te.key==="Enter"&&(te.preventDefault(),H()),className:"flex-1"}),i.jsx($,{type:"button",onClick:H,disabled:!_.trim(),children:i.jsx(bl,{className:"w-4 h-4"})})]})]})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estimée (€) *"}),i.jsx(we,{id:"estimatedValue",type:"text",placeholder:"0,00",...S.register("estimatedValue"),className:"mt-1"}),S.formState.errors.estimatedValue&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(ur,{className:"w-5 h-5 text-blue-600"}),"Informations du service"]})}),i.jsxs(J,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"skills",className:"text-foreground",children:"Description des compétences *"}),i.jsx(_s,{id:"skills",placeholder:"Décrivez vos compétences, votre expérience, votre méthode d'enseignement...",rows:4,...S.register("skills"),className:"mt-1",maxLength:500}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(_e=S.formState.errors.skills)==null?void 0:_e.message}),i.jsxs("span",{children:[((Xe=S.watch("skills"))==null?void 0:Xe.length)||0,"/500"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (€/h) *"}),i.jsx(we,{id:"hourlyRate",type:"text",placeholder:"15,00",...S.register("hourlyRate"),className:"mt-1"}),S.formState.errors.hourlyRate&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.hourlyRate.message})]}),i.jsxs("div",{children:[i.jsxs(de,{className:"text-foreground",children:["Durée prévue: ",T[0],"h"]}),i.jsx(A5,{value:T,onValueChange:te=>{k(te),S.setValue("duration",te[0])},max:720,min:1,step:1,className:"mt-2"}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{children:"1h"}),i.jsx("span",{children:"720h"})]})]})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"availability",className:"text-foreground",children:"Disponibilités (optionnel)"}),i.jsx(we,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...S.register("availability"),className:"mt-1"})]})]})]}),i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(wl,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),i.jsx(lt,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Première photo = photo principale. Max 15MB par image."})]}),i.jsx(J,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[l.map((te,me)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:te,alt:`Photo ${me+1}`,className:"w-full h-20 object-cover rounded-lg"}),i.jsx($,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>N(me),children:i.jsx(pf,{className:"w-3 h-3"})}),me===0&&i.jsx(Ie,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},me)),l.length<10&&i.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[i.jsxs("div",{className:"text-center",children:[u?i.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):i.jsx(Pb,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:u?"Upload...":"Ajouter"})]}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:P,className:"hidden",disabled:u})]})]})})]}),i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(mf,{className:"w-5 h-5"}),"Tags et localisation"]})}),i.jsxs(J,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(de,{className:"text-foreground",children:"Tags * (max 5)"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:g.map(te=>i.jsxs(Ie,{variant:"secondary",className:"flex items-center gap-1",children:[te,i.jsx($,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>U(te),children:i.jsx(pf,{className:"w-3 h-3"})})]},te))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(we,{placeholder:"Ajouter un tag...",value:h,onChange:te=>m(te.target.value),onKeyPress:te=>te.key==="Enter"&&(te.preventDefault(),V()),className:"flex-1"}),i.jsx($,{type:"button",onClick:V,disabled:!h.trim()||g.length>=5,children:"Ajouter"})]}),g.length===0&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),i.jsx(we,{id:"meetingLocation",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",...S.register("meetingLocation"),className:"mt-1"}),S.formState.errors.meetingLocation&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.meetingLocation.message}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilégiez les lieux publics et fréquentés"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-sm text-foreground",children:[i.jsx(Th,{className:"w-4 h-4"}),"Validation"]})}),i.jsx(J,{children:i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:`flex items-center gap-2 ${S.watch("title")&&S.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${S.watch("title")&&S.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Titre (5-80 caractères)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${S.watch("description")&&S.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${S.watch("description")&&S.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Description (20-1000 caractères)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${g.length>0?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${g.length>0?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Tags (1-5)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${S.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${S.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Point de rencontre"})]}),a==="sell"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-2 ${S.watch("price")?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${S.watch("price")?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Prix (≥ 1€)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${C.length>0?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${C.length>0?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Modes de paiement"})]})]}),a==="gift"&&i.jsxs("div",{className:`flex items-center gap-2 ${S.watch("donationReason")&&S.watch("donationReason").length>=10?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${S.watch("donationReason")&&S.watch("donationReason").length>=10?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Motif du don"})]}),a==="swap"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-2 ${y.some(te=>te.trim())?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${y.some(te=>te.trim())?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Objets recherchés"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${S.watch("estimatedValue")?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${S.watch("estimatedValue")?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Valeur estimée"})]})]}),a==="service"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-2 ${S.watch("hourlyRate")?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${S.watch("hourlyRate")?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Tarif (≥ 5€/h)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${S.watch("skills")&&S.watch("skills").length>=20?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${S.watch("skills")&&S.watch("skills").length>=20?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Compétences"})]})]})]})})]}),i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-sm text-foreground",children:[i.jsx(Et,{className:"w-4 h-4"}),"Conseils de sécurité"]})}),i.jsx(J,{children:i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Vérifiez l'identité de l'autre personne"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Privilégiez les paiements sécurisés"})]})]})})]}),i.jsx(Q,{children:i.jsxs(J,{className:"pt-6",children:[i.jsx($,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:w||!z()||u,children:w?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):u?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ab,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:z()?"Votre annonce sera visible immédiatement":"Complétez tous les champs obligatoires"})]})})]})]})]})]})};var TN="Tabs",[Ice,nme]=ls(TN,[Wx]),P5=Wx(),[Ace,IN]=Ice(TN),R5=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=oc(l),[h,m]=is({prop:n,onChange:s,defaultProp:a});return i.jsx(Ace,{scope:r,baseId:ts(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:c,children:i.jsx(De.div,{dir:d,"data-orientation":o,...u,ref:e})})});R5.displayName=TN;var D5="TabsList",M5=p.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,a=IN(D5,r),o=P5(r);return i.jsx(wM,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:i.jsx(De.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});M5.displayName=D5;var O5="TabsTrigger",L5=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...a}=t,o=IN(O5,r),l=P5(r),c=$5(o.baseId,n),u=U5(o.baseId,n),d=n===o.value;return i.jsx(bM,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(De.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:e,onMouseDown:pe(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:pe(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:pe(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(n)})})})});L5.displayName=O5;var V5="TabsContent",F5=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:a,...o}=t,l=IN(V5,r),c=$5(l.baseId,n),u=U5(l.baseId,n),d=n===l.value,h=p.useRef(d);return p.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(Kr,{present:s||d,children:({present:m})=>i.jsx(De.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&a})})});F5.displayName=V5;function $5(t,e){return`${t}-trigger-${e}`}function U5(t,e){return`${t}-content-${e}`}var Pce=R5,z5=M5,B5=L5,q5=F5;const uc=Pce,Wo=p.forwardRef(({className:t,...e},r)=>i.jsx(z5,{ref:r,className:Le("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Wo.displayName=z5.displayName;const $t=p.forwardRef(({className:t,...e},r)=>i.jsx(B5,{ref:r,className:Le("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));$t.displayName=B5.displayName;const Ut=p.forwardRef(({className:t,...e},r)=>i.jsx(q5,{ref:r,className:Le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ut.displayName=q5.displayName;class Rce{static async uploadProfilePhoto(e,r,n){if(!r.type.startsWith("image/"))throw new Error("Le fichier doit être une image");if(r.size>5*1024*1024)throw new Error("L'image ne peut pas dépasser 5MB");const a=`profile_${Date.now()}.${r.name.split(".").pop()}`,o=Sh(Ch,`users/${e}/${a}`);return new Promise((l,c)=>{const u=Mk(o,r,{contentType:r.type,cacheControl:"public,max-age=3600",customMetadata:{uploadedAt:new Date().toISOString(),userId:e}});u.on("state_changed",d=>{const h=d.bytesTransferred/d.totalBytes*100;n==null||n({progress:h,isComplete:!1})},d=>{console.error("Upload error:",d);let h="Erreur lors de l'upload";switch(d.code){case"storage/unauthorized":h="Vous n'êtes pas autorisé à upload ce fichier";break;case"storage/canceled":h="Upload annulé";break;case"storage/quota-exceeded":h="Quota de stockage dépassé";break;case"storage/invalid-format":h="Format de fichier invalide";break}n==null||n({progress:0,isComplete:!1,error:h}),c(new Error(h))},async()=>{try{const d=await nv(u.snapshot.ref);n==null||n({progress:100,isComplete:!0,downloadURL:d}),l(d)}catch(d){c(d)}})})}static async deleteFile(e){try{const r=Sh(Ch,e);await pK(r)}catch(r){console.error("Error deleting file:",r)}}static async uploadListingImages(e,r,n){const s=r.map(async(a,o)=>{const l=Date.now(),c=`image_${o}_${l}.${a.name.split(".").pop()}`,u=Sh(Ch,`listings/${e}/${c}`);return new Promise((d,h)=>{const m=Mk(u,a,{contentType:a.type,cacheControl:"public,max-age=3600"});m.on("state_changed",g=>{const x=g.bytesTransferred/g.totalBytes*100;n==null||n(o,{progress:x,isComplete:!1})},g=>{n==null||n(o,{progress:0,isComplete:!1,error:g.message}),h(g)},async()=>{const g=await nv(m.snapshot.ref);n==null||n(o,{progress:100,isComplete:!0,downloadURL:g}),d(g)})})});return Promise.all(s)}static async uploadCompressedImage(e,r=1200,n=1200,s=.8){return new Promise(a=>{const o=document.createElement("canvas"),l=o.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:d}=c;u>d?u>r&&(d=d*r/u,u=r):d>n&&(u=u*n/d,d=n),o.width=u,o.height=d,l.drawImage(c,0,0,u,d),o.toBlob(h=>{if(h){const m=new File([h],e.name,{type:e.type,lastModified:Date.now()});a(m)}else a(e)},e.type,s)},c.src=URL.createObjectURL(e)})}}const W5=({currentPhotoURL:t,displayName:e,onPhotoUpdate:r})=>{var v,_;const{currentUser:n,updateUserProfile:s}=Zt(),[a,o]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState(null),[h,m]=p.useState(null),g=p.useRef(null),x=E=>{var T;const C=(T=E.target.files)==null?void 0:T[0];if(!C)return;if(!C.type.startsWith("image/")){ne.error("Veuillez sélectionner une image");return}if(C.size>5*1024*1024){ne.error("L'image ne doit pas dépasser 5MB");return}m(C);const D=new FileReader;D.onload=k=>{var R;d((R=k.target)==null?void 0:R.result)},D.readAsDataURL(C)},w=async()=>{if(!(!h||!n)){c(!0);try{const E=await Rce.uploadProfilePhoto(n.uid,h,C=>{C.error&&ne.error(C.error)});await rf(n,{photoURL:E}),await s({photoURL:E}),r&&r(E),ne.success("Photo de profil mise à jour avec succès !"),o(!1),d(null),m(null)}catch(E){console.error("Erreur lors de l'upload:",E);let C="Erreur lors de la mise à jour de la photo";E&&typeof E=="object"&&"message"in E&&typeof E.message=="string"&&(E.message.includes("duplicate")?C="Une photo avec ce nom existe déjà, réessayez":E.message.includes("size")?C="Fichier trop volumineux":E.message.includes("type")&&(C="Type de fichier non supporté")),ne.error(C)}finally{c(!1)}}},b=async()=>{if(n){c(!0);try{await rf(n,{photoURL:void 0}),await s({photoURL:void 0}),r&&r(void 0),ne.success("Photo de profil supprimée"),o(!1)}catch(E){console.error("Erreur lors de la suppression:",E),ne.error("Erreur lors de la suppression de la photo")}finally{c(!1)}}},y=()=>{m(null),d(null),g.current&&(g.current.value="")};return i.jsxs(aa,{open:a,onOpenChange:o,children:[i.jsx(hu,{asChild:!0,children:i.jsxs("div",{className:"relative group cursor-pointer",children:[i.jsxs(Jn,{className:"h-20 w-20",children:[i.jsx(ba,{src:t||""}),i.jsx(Pn,{className:"bg-gradient-to-br from-primary to-secondary text-white text-xl font-semibold",children:((v=e[0])==null?void 0:v.toUpperCase())||"U"})]}),i.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(wl,{className:"w-6 h-6 text-white"})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:i.jsx(wl,{className:"w-3 h-3 text-white"})})]})}),i.jsxs(Ni,{className:"max-w-md",children:[i.jsx(oa,{children:i.jsxs(Si,{className:"flex items-center gap-2",children:[i.jsx(wl,{className:"w-5 h-5"}),"Photo de profil"]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center",children:i.jsxs(Jn,{className:"h-32 w-32",children:[i.jsx(ba,{src:u||t||""}),i.jsx(Pn,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((_=e[0])==null?void 0:_.toUpperCase())||"U"})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:x,className:"hidden"}),h?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[i.jsx("p",{className:"font-medium",children:h.name}),i.jsxs("p",{children:[(h.size/1024/1024).toFixed(2)," MB"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs($,{onClick:w,disabled:l,className:"flex-1",children:[l?i.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(Pb,{className:"w-4 h-4 mr-2"}),l?"Upload en cours...":"Uploader"]}),i.jsx($,{onClick:y,variant:"outline",disabled:l,children:i.jsx(pf,{className:"w-4 h-4"})})]})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs($,{onClick:()=>{var E;return(E=g.current)==null?void 0:E.click()},variant:"outline",className:"w-full",children:[i.jsx(Pb,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&i.jsxs($,{onClick:b,variant:"outline",disabled:l,className:"w-full text-destructive hover:text-destructive",children:[l?i.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(pf,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]})]})]})]})},fn=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return typeof t=="object"&&t!==null&&"seconds"in t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):new Date},Dce=()=>{const{currentUser:t,userProfile:e}=Zt(),[r,n]=p.useState([]),[s,a]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(null),[d,h]=p.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[m,g]=p.useState({profile:!0,listings:!0,reviews:!0,favorites:!0}),[x,w]=p.useState({}),[b,y]=p.useState(null),[v,_]=p.useState(""),[E,C]=p.useState((c==null?void 0:c.firstName)||""),[D,T]=p.useState((c==null?void 0:c.lastName)||""),k=async()=>{if(t)try{g(le=>({...le,profile:!0}));const K=await Zn(Ke(ve,"users",t.uid));if(K.exists()){const le=K.data();u({...le,createdAt:fn(le.createdAt),updatedAt:fn(le.updatedAt)})}else console.log("Aucun document utilisateur trouvé dans Firestore"),u(null)}catch(K){console.error("Erreur lors du chargement du profil:",K),u(null)}finally{g(K=>({...K,profile:!1}))}};p.useEffect(()=>{t&&(k(),R(),S(),A())},[t]);const R=async()=>{if(t)try{g(fe=>({...fe,listings:!0}));const K=Mt(bt(ve,"listings"),Vt("sellerId","==",t.uid),ys(20)),le=await Kt(K),q=[];le.forEach(fe=>{const Ee=fe.data();q.push({id:fe.id,...Ee,createdAt:fn(Ee.createdAt),updatedAt:fn(Ee.updatedAt)})}),q.sort((fe,Ee)=>fn(Ee.createdAt).getTime()-fn(fe.createdAt).getTime()),n(q);const Z=q.filter(fe=>fe.status==="active");h(fe=>({...fe,totalListings:q.length,activeListings:Z.length}))}catch(K){console.error("Erreur lors du chargement des annonces:",K)}finally{g(K=>({...K,listings:!1}))}},S=async()=>{if(t)try{g(O=>({...O,reviews:!0}));const K=Mt(bt(ve,"reviews"),Vt("revieweeId","==",t.uid),ys(10)),le=await Kt(K),q=[];le.forEach(O=>{const B=O.data();q.push({id:O.id,...B,replies:Array.isArray(B.replies)?B.replies.map(Y=>({...Y,createdAt:Y.createdAt instanceof Date?Y.createdAt:Y.createdAt&&typeof Y.createdAt.toDate=="function"?Y.createdAt.toDate():new Date})):[],likes:Array.isArray(B.likes)?B.likes:[],dislikes:Array.isArray(B.dislikes)?B.dislikes:[],createdAt:fn(B.createdAt)})}),q.sort((O,B)=>fn(B.createdAt).getTime()-fn(O.createdAt).getTime()),a(q);const Z=Array.from(new Set(q.map(O=>O.reviewerId))),fe={...x};await Promise.all(Z.map(async O=>{if(!fe[O]){const B=await Zn(Ke(ve,"users",O));if(B.exists()){const Y=B.data();fe[O]={displayName:Y.displayName||"Utilisateur",photoURL:Y.photoURL||void 0}}else fe[O]={displayName:""}}})),w(fe);const Ee=q.reduce((O,B)=>O+B.rating,0),We=q.length>0?Ee/q.length:0;h(O=>({...O,totalReviews:q.length,averageRating:Math.round(We*10)/10}))}catch(K){console.error("Erreur lors du chargement des avis:",K)}finally{g(K=>({...K,reviews:!1}))}},A=async()=>{if(t)try{g(Z=>({...Z,favorites:!0}));const K=Mt(bt(ve,"favorites"),Vt("userId","==",t.uid),ys(20)),le=await Kt(K),q=[];if(le.forEach(Z=>{const fe=Z.data();q.push({id:Z.id,...fe,createdAt:fn(fe.createdAt)})}),q.sort((Z,fe)=>fn(fe.createdAt).getTime()-fn(Z.createdAt).getTime()),h(Z=>({...Z,totalFavorites:q.length})),q.length>0){const Z=q.slice(0,6).map(async Ee=>{try{const We=await Zn(Ke(ve,"listings",Ee.listingId));if(We.exists()){const O=We.data();return{id:We.id,...O,createdAt:fn(O.createdAt),updatedAt:fn(O.updatedAt)}}return null}catch(We){return console.error("Erreur lors du chargement d'une annonce favorite:",We),null}}),fe=await Promise.all(Z);l(fe.filter(Ee=>Ee!==null))}}catch(K){console.error("Erreur lors du chargement des favoris:",K)}finally{g(K=>({...K,favorites:!1}))}},P=K=>{if(!K)return"Date inconnue";try{const le=fn(K);return isNaN(le.getTime())?"Date invalide":fd(le,{addSuffix:!0,locale:nn})}catch{return"Date invalide"}},N=K=>Array.from({length:5},(le,q)=>i.jsx(to,{className:`h-4 w-4 ${q<K?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},q)),V=localStorage.getItem("pendingUserData"),U=V?JSON.parse(V):{};let H=(c==null?void 0:c.displayName)||(e==null?void 0:e.displayName)||U.displayName||"";!H&&(t!=null&&t.displayName)&&(H=t.displayName),!H&&(t!=null&&t.email)&&(H=t.email.split("@")[0]),H||(H="Utilisateur");let F=(c==null?void 0:c.university)||(e==null?void 0:e.university)||U.university||"";if((c==null?void 0:c.university)==="Autre université"&&c.otherUniversity||(e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||U.university==="Autre université"&&U.otherUniversity){const K=c==null?void 0:c.otherUniversity,le=e==null?void 0:e.otherUniversity,q=U.otherUniversity;F=K||le||q||"Université personnalisée"}F||(F="Université spécifiée lors de l'inscription");let L=(c==null?void 0:c.fieldOfStudy)||(e==null?void 0:e.fieldOfStudy)||U.fieldOfStudy||"";if((c==null?void 0:c.fieldOfStudy)==="Autre"&&c.otherFieldOfStudy||(e==null?void 0:e.fieldOfStudy)==="Autre"&&e.otherFieldOfStudy||U.fieldOfStudy==="Autre"&&U.otherFieldOfStudy){const K=c==null?void 0:c.otherFieldOfStudy,le=e==null?void 0:e.otherFieldOfStudy,q=U.otherFieldOfStudy;L=K||le||q||"Filière personnalisée"}L||(L="Filière non spécifiée");const W=(c==null?void 0:c.graduationYear)||(e==null?void 0:e.graduationYear)||U.graduationYear||"",z=(c==null?void 0:c.email)||(e==null?void 0:e.email)||U.email||(t==null?void 0:t.email)||"",X=(c==null?void 0:c.photoURL)||(e==null?void 0:e.photoURL)||"",oe=(c==null?void 0:c.createdAt)||(e==null?void 0:e.createdAt),Se=(c==null?void 0:c.isVerified)||(e==null?void 0:e.isVerified),Ze=(c==null?void 0:c.location)||(e==null?void 0:e.location)||"",mt=(c==null?void 0:c.co2Saved)||(e==null?void 0:e.co2Saved)||0,st=t&&e&&t.uid===e.id,_e=async K=>{if(t)try{const le=Ke(ve,"reviews",K),q=s.find(Ee=>Ee.id===K);if(!q)return;const Z=q.likes||[],fe=q.dislikes||[];Z.includes(t.uid)?await cr(le,{likes:Z.filter(Ee=>Ee!==t.uid)}):await cr(le,{likes:[...Z,t.uid],dislikes:fe.filter(Ee=>Ee!==t.uid)}),a(Ee=>Ee.map(We=>{if(We.id===K){const O=We.likes||[],B=We.dislikes||[];return O.includes(t.uid)?{...We,likes:O.filter(Y=>Y!==t.uid)}:{...We,likes:[...O,t.uid],dislikes:B.filter(Y=>Y!==t.uid)}}return We}))}catch(le){console.error("Error liking review:",le),pr.error("Erreur lors du like")}},Xe=async K=>{if(t)try{const le=Ke(ve,"reviews",K),q=s.find(Ee=>Ee.id===K);if(!q)return;const Z=q.likes||[],fe=q.dislikes||[];fe.includes(t.uid)?await cr(le,{dislikes:fe.filter(Ee=>Ee!==t.uid)}):await cr(le,{dislikes:[...fe,t.uid],likes:Z.filter(Ee=>Ee!==t.uid)}),a(Ee=>Ee.map(We=>{if(We.id===K){const O=We.likes||[],B=We.dislikes||[];return B.includes(t.uid)?{...We,dislikes:B.filter(Y=>Y!==t.uid)}:{...We,dislikes:[...B,t.uid],likes:O.filter(Y=>Y!==t.uid)}}return We}))}catch(le){console.error("Error disliking review:",le),pr.error("Erreur lors du dislike")}},te=async K=>{if(!(!t||!v.trim()))try{const le=Ke(ve,"reviews",K),q=s.find(fe=>fe.id===K);if(!q)return;const Z={userId:t.uid,comment:v.trim(),createdAt:new Date};await cr(le,{replies:[...q.replies||[],Z]}),a(fe=>fe.map(Ee=>Ee.id===K?{...Ee,replies:[...Ee.replies||[],Z]}:Ee)),_(""),y(null),pr.success("Réponse envoyée")}catch(le){console.error("Error replying to review:",le),pr.error("Erreur lors de l'envoi de la réponse")}},me=async()=>{if(t)try{const K=`${E} ${D}`.trim();await cr(Ke(ve,"users",t.uid),{firstName:E,lastName:D,displayName:K,updatedAt:new Date}),await t.reload(),pr.success("Nom mis à jour !")}catch{pr.error("Erreur lors de la mise à jour du nom")}};return t?i.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8 space-y-4 sm:space-y-6",children:[i.jsx(Q,{children:i.jsx(Pe,{className:"text-left",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:space-x-4 text-center sm:text-left",children:[i.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0",children:[i.jsx(W5,{currentPhotoURL:X,displayName:H}),Se&&i.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 sm:w-6 sm:h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:i.jsx(Et,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 text-white"})})]}),i.jsxs("div",{className:"flex-1 w-full",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-2 mb-1",children:[i.jsx(Re,{className:"text-xl sm:text-2xl lg:text-3xl text-center sm:text-left w-full sm:w-auto",children:H}),Se&&i.jsxs(Ie,{className:"bg-green-100 text-green-800 border-green-200 mt-2 sm:mt-0 text-xs sm:text-sm",children:[i.jsx(Et,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),i.jsx(lt,{className:"text-sm sm:text-base text-center sm:text-left break-all",children:z}),i.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-muted-foreground text-center sm:text-left text-xs sm:text-sm",children:[i.jsxs("div",{children:[i.jsx(on,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 inline"})," Université : ",i.jsx("span",{className:"text-xs sm:text-sm",children:F})]}),i.jsxs("div",{children:[i.jsx(ji,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 inline"})," Filière : ",i.jsx("span",{className:"text-xs sm:text-sm",children:L})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-bold",children:"Année de diplôme :"})," ",i.jsx("span",{className:"text-xs sm:text-sm",children:W})]})]}),Ze&&i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[i.jsx(Br,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),i.jsx("span",{className:"text-xs sm:text-sm",children:Ze})]}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[i.jsx(Us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),i.jsxs("span",{className:"text-xs sm:text-sm",children:["Membre depuis ",P(oe)]})]}),mt&&mt>0&&i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-green-600 text-center sm:text-left",children:[i.jsx(Hs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),i.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[mt," kg CO₂ économisés"]})]})]})]})})}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[i.jsx(Q,{children:i.jsx(J,{className:"pt-4 sm:pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Jt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.listings?i.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.totalListings}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),i.jsx(Q,{children:i.jsx(J,{className:"pt-4 sm:pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(lm,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.listings?i.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.activeListings}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),i.jsx(Q,{children:i.jsx(J,{className:"pt-4 sm:pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(to,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.reviews?i.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.averageRating||"—"}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),i.jsx(Q,{children:i.jsx(J,{className:"pt-4 sm:pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(xn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-red-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:m.favorites?i.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):d.totalFavorites}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),i.jsxs(uc,{defaultValue:"listings",className:"space-y-4",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-4 sm:grid-cols-4",children:[i.jsxs($t,{value:"listings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(Jt,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"}),i.jsx("span",{className:"sm:hidden",children:"Annonces"}),!m.listings&&d.totalListings>0&&i.jsx(Ie,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:d.totalListings})]}),i.jsxs($t,{value:"reviews",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(to,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Avis Reçus"}),i.jsx("span",{className:"sm:hidden",children:"Avis"}),!m.reviews&&d.totalReviews>0&&i.jsx(Ie,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:d.totalReviews})]}),i.jsxs($t,{value:"favorites",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(xn,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Favoris"}),i.jsx("span",{className:"sm:hidden",children:"Favoris"}),!m.favorites&&d.totalFavorites>0&&i.jsx(Ie,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:d.totalFavorites})]}),i.jsxs($t,{value:"settings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(on,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Paramètres"}),i.jsx("span",{className:"sm:hidden",children:"Paramètres"})]})]}),i.jsx(Ut,{value:"listings",className:"space-y-4",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Jt,{className:"w-5 h-5"}),"Mes Annonces"]}),i.jsx(lt,{children:"Gérez vos annonces publiées sur StudyMarket"})]}),i.jsx(J,{children:m.listings?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((K,le)=>i.jsxs(Q,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(J,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},le))}):r.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Jt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publié d'annonces."}),i.jsx($,{asChild:!0,children:i.jsx(ye,{to:"/create",children:"Publier ma première annonce"})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(K=>i.jsx(bf,{listing:K},K.id))})})]})}),i.jsx(Ut,{value:"reviews",className:"space-y-4",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(to,{className:"w-5 h-5"}),"Avis Reçus"]}),i.jsx(lt,{children:"Les avis laissés par d'autres étudiants"})]}),i.jsx(J,{children:m.reviews?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((K,le)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((q,Z)=>i.jsx("div",{className:"w-4 h-4 bg-muted rounded"},Z))}),i.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},le))}):s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(zt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),i.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reçu pour le moment. Les avis apparaîtront après vos premières transactions."})]}):i.jsx("div",{className:"space-y-4",children:s.map(K=>{var le,q,Z,fe,Ee,We;return i.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"flex",children:N(K.rating)}),i.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[K.rating,"/5"]})]}),i.jsx("span",{className:"text-sm text-muted-foreground",children:P(K.createdAt)})]}),i.jsx("p",{className:"text-foreground mb-3 leading-relaxed text-left",children:K.comment}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[((le=x[K.reviewerId])==null?void 0:le.photoURL)&&i.jsx("img",{src:x[K.reviewerId].photoURL,alt:"avatar",className:"w-7 h-7 rounded-full object-cover"}),K.reviewerId===t.uid?(e==null?void 0:e.displayName)||"Vous":(q=x[K.reviewerId])!=null&&q.displayName?x[K.reviewerId].displayName:i.jsx("span",{className:"inline-block bg-gray-200 text-gray-600 px-2 py-0.5 rounded text-xs",children:"Profil supprimé"})]}),i.jsx(Ie,{variant:"outline",className:"text-xs",children:K.reviewType==="buyer"?"Acheteur":"Vendeur"})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[i.jsxs($,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(Z=K.likes)!=null&&Z.includes((t==null?void 0:t.uid)||"")?"text-primary":""}`,onClick:()=>_e(K.id),children:[i.jsx(mQ,{className:"w-4 h-4"}),i.jsx("span",{children:((fe=K.likes)==null?void 0:fe.length)||0})]}),i.jsxs($,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(Ee=K.dislikes)!=null&&Ee.includes((t==null?void 0:t.uid)||"")?"text-destructive":""}`,onClick:()=>Xe(K.id),children:[i.jsx(fQ,{className:"w-4 h-4"}),i.jsx("span",{children:((We=K.dislikes)==null?void 0:We.length)||0})]}),i.jsxs($,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>y(b===K.id?null:K.id),children:[i.jsx(zt,{className:"w-4 h-4"}),i.jsx("span",{children:"Répondre"})]})]}),b===K.id&&i.jsxs("div",{className:"mt-3 space-y-2",children:[i.jsx(_s,{placeholder:"Votre réponse...",value:v,onChange:O=>_(O.target.value),className:"min-h-[80px]"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx($,{variant:"outline",size:"sm",onClick:()=>{y(null),_("")},children:"Annuler"}),i.jsx($,{size:"sm",onClick:()=>te(K.id),disabled:!v.trim(),children:"Envoyer"})]})]}),K.replies&&K.replies.length>0&&i.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-muted",children:K.replies.map((O,B)=>{var Y;return i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"font-medium",children:st&&O.userId===(t==null?void 0:t.uid)?"Vous":((Y=x[O.userId])==null?void 0:Y.displayName)||"Utilisateur"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:P(O.createdAt)})]}),i.jsx("p",{className:"text-muted-foreground text-left",children:O.comment})]},B)})})]},K.id)})})})]})}),i.jsx(Ut,{value:"favorites",className:"space-y-4",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(xn,{className:"w-5 h-5"}),"Mes Favoris"]}),i.jsx(lt,{children:"Les annonces que vous avez ajoutées à vos favoris"})]}),i.jsx(J,{children:m.favorites?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((K,le)=>i.jsxs(Q,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(J,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},le))}):o.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(xn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les à vos favoris !"}),i.jsx($,{asChild:!0,children:i.jsx(ye,{to:"/create",children:"Publier ma première annonce"})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(K=>i.jsx(bf,{listing:K},K.id))})})]})}),i.jsx(Ut,{value:"settings",className:"space-y-4",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsx(Re,{children:"Paramètres du profil"}),i.jsx(lt,{children:"Modifie tes informations principales."})]}),i.jsxs(J,{children:[i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(de,{htmlFor:"firstName",children:"Prénom"}),i.jsx(we,{id:"firstName",value:E,onChange:K=>C(K.target.value),autoComplete:"given-name"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx(de,{htmlFor:"lastName",children:"Nom"}),i.jsx(we,{id:"lastName",value:D,onChange:K=>T(K.target.value),autoComplete:"family-name"})]})]}),i.jsx($,{onClick:me,disabled:!E||!D,children:"Enregistrer"})]})]})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour voir votre profil."})})})})};var AN="Switch",[Mce,sme]=ls(AN),[Oce,Lce]=Mce(AN),H5=p.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,g]=p.useState(null),x=Je(e,_=>g(_)),w=p.useRef(!1),b=m?d||!!m.closest("form"):!0,[y=!1,v]=is({prop:s,defaultProp:a,onChange:u});return i.jsxs(Oce,{scope:r,checked:y,disabled:l,children:[i.jsx(De.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":Y5(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onClick:pe(t.onClick,_=>{v(E=>!E),b&&(w.current=_.isPropagationStopped(),w.current||_.stopPropagation())})}),b&&i.jsx(Vce,{control:m,bubbles:!w.current,name:n,value:c,checked:y,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});H5.displayName=AN;var G5="SwitchThumb",K5=p.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=Lce(G5,r);return i.jsx(De.span,{"data-state":Y5(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});K5.displayName=G5;var Vce=t=>{const{control:e,checked:r,bubbles:n=!0,...s}=t,a=p.useRef(null),o=Zx(r),l=zx(e);return p.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==r&&h){const m=new Event("click",{bubbles:n});h.call(c,r),c.dispatchEvent(m)}},[o,r,n]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:a,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Y5(t){return t?"checked":"unchecked"}var Q5=H5,Fce=K5;const Cr=p.forwardRef(({className:t,...e},r)=>i.jsx(Q5,{className:Le("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:r,children:i.jsx(Fce,{className:Le("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Cr.displayName=Q5.displayName;const $ce=Fe.object({displayName:Fe.string().min(2,"Le nom doit contenir au moins 2 caractères"),bio:Fe.string().max(500,"La bio ne peut pas dépasser 500 caractères").optional(),phone:Fe.string().optional(),university:Fe.string().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:Fe.string().min(1,"Veuillez indiquer votre filière"),graduationYear:Fe.number().min(2020).max(2035),campus:Fe.string().optional(),location:Fe.string().optional()}),Uce=Fe.object({currentPassword:Fe.string().min(6,"Le mot de passe actuel est requis"),newPassword:Fe.string().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractères"),confirmPassword:Fe.string()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),zce=Fe.object({newEmail:Fe.string().email("Email invalide"),password:Fe.string().min(6,"Mot de passe requis pour changer l'email")}),Bce=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris Cité","Sciences Po Paris","Université de Lyon","Université de Marseille","Université de Toulouse","Université de Bordeaux","Université de Lille","Université de Strasbourg","Université de Nantes","Université de Montpellier","Autre université"],qce=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Économie","Psychologie","Communication","Design","Autre"],Wce=()=>{var V,U,H,F,L,W;const{currentUser:t,userProfile:e,updateUserProfile:r,logout:n}=Zt(),s=Dr(),[a,o]=p.useState("profile"),[l,c]=p.useState(!1),[u,d]=p.useState(!1),[h,m]=p.useState(!1),[g,x]=p.useState(!1),[w,b]=p.useState(""),[y,v]=p.useState({email:((V=e==null?void 0:e.notificationPreferences)==null?void 0:V.email)??!0,push:((U=e==null?void 0:e.notificationPreferences)==null?void 0:U.push)??!0,sms:((H=e==null?void 0:e.notificationPreferences)==null?void 0:H.sms)??!1,alerts:((F=e==null?void 0:e.notificationPreferences)==null?void 0:F.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[_,E]=p.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),C=jl({resolver:Nl($ce),defaultValues:{displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),D=jl({resolver:Nl(Uce)}),T=jl({resolver:Nl(zce)});p.useEffect(()=>{var z,X,oe,Se;e&&(C.reset({displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),v({email:((z=e.notificationPreferences)==null?void 0:z.email)??!0,push:((X=e.notificationPreferences)==null?void 0:X.push)??!0,sms:((oe=e.notificationPreferences)==null?void 0:oe.sms)??!1,alerts:((Se=e.notificationPreferences)==null?void 0:Se.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,C]);const k=async z=>{c(!0);try{await r({displayName:z.displayName,bio:z.bio||void 0,phone:z.phone||void 0,university:z.university,fieldOfStudy:z.fieldOfStudy,graduationYear:z.graduationYear,campus:z.campus||void 0,location:z.location||void 0}),ne.success("Profil mis à jour avec succès !")}catch(X){console.error("Erreur lors de la mise à jour du profil:",X),ne.error("Erreur lors de la mise à jour du profil")}finally{c(!1)}},R=async()=>{c(!0);try{await r({notificationPreferences:{email:y.email,push:y.push,sms:y.sms,alerts:y.alerts}}),ne.success("Préférences de notification mises à jour !")}catch(z){console.error("Erreur lors de la mise à jour des notifications:",z),ne.error("Erreur lors de la mise à jour des notifications")}finally{c(!1)}},S=async z=>{if(t){c(!0);try{const X=xo.credential(t.email,z.currentPassword);await IC(t,X),await B7(t,z.newPassword),ne.success("Mot de passe mis à jour avec succès !"),m(!1),D.reset()}catch(X){console.error("Erreur lors du changement de mot de passe:",X),X.code==="auth/wrong-password"?ne.error("Mot de passe actuel incorrect"):ne.error("Erreur lors du changement de mot de passe")}finally{c(!1)}}},A=async z=>{if(t){c(!0);try{const X=xo.credential(t.email,z.password);await IC(t,X),await z7(t,z.newEmail),await r({email:z.newEmail}),ne.success("Email mis à jour avec succès !"),x(!1),T.reset()}catch(X){console.error("Erreur lors du changement d'email:",X),X.code==="auth/wrong-password"?ne.error("Mot de passe incorrect"):X.code==="auth/email-already-in-use"?ne.error("Cet email est déjà utilisé"):ne.error("Erreur lors du changement d'email")}finally{c(!1)}}},P=async()=>{if(!(!t||w!=="SUPPRIMER")){c(!0);try{const z=A4(ve),X=["listings","conversations","reviews","favorites","reports"];for(const oe of X){const Se=Mt(bt(ve,oe),Vt("userId","==",t.uid));(await Kt(Se)).forEach(mt=>{z.delete(mt.ref)})}z.delete(Ke(ve,"users",t.uid)),await z.commit(),await K7(t),ne.success("Compte supprimé avec succès"),s("/")}catch(z){console.error("Erreur lors de la suppression du compte:",z),ne.error("Erreur lors de la suppression du compte")}finally{c(!1)}}},N=async()=>{if(t){c(!0);try{const z={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},X=Mt(bt(ve,"listings"),Vt("sellerId","==",t.uid)),oe=await Kt(X);z.listings=oe.docs.map(q=>({id:q.id,...q.data()}));const Se=Mt(bt(ve,"conversations"),Vt("participants","array-contains",t.uid)),Ze=await Kt(Se);z.conversations=Ze.docs.map(q=>({id:q.id,...q.data()}));const mt=Mt(bt(ve,"reviews"),Vt("revieweeId","==",t.uid)),st=await Kt(mt);z.reviews=st.docs.map(q=>({id:q.id,...q.data()}));const _e=Mt(bt(ve,"favorites"),Vt("userId","==",t.uid)),Xe=await Kt(_e);z.favorites=Xe.docs.map(q=>({id:q.id,...q.data()}));const te=JSON.stringify(z,null,2),me=new Blob([te],{type:"application/json"}),K=URL.createObjectURL(me),le=document.createElement("a");le.href=K,le.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,le.click(),URL.revokeObjectURL(K),ne.success("Données exportées avec succès !")}catch(z){console.error("Erreur lors de l'export des données:",z),ne.error("Erreur lors de l'export des données")}finally{c(!1)}}};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[i.jsx(Dx,{className:"w-8 h-8"}),"Paramètres"]}),i.jsx("p",{className:"text-muted-foreground",children:"Gérez votre profil, vos préférences et votre sécurité"})]}),i.jsxs(uc,{value:a,onValueChange:o,className:"space-y-6",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-5",children:[i.jsxs($t,{value:"profile",className:"flex items-center gap-2",children:[i.jsx(on,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),i.jsxs($t,{value:"notifications",className:"flex items-center gap-2",children:[i.jsx(Ls,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),i.jsxs($t,{value:"privacy",className:"flex items-center gap-2",children:[i.jsx(Ru,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Confidentialité"})]}),i.jsxs($t,{value:"security",className:"flex items-center gap-2",children:[i.jsx(Et,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Sécurité"})]}),i.jsxs($t,{value:"data",className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Données"})]})]}),i.jsx(Ut,{value:"profile",className:"space-y-6",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(on,{className:"w-5 h-5"}),"Informations personnelles"]}),i.jsx(lt,{children:"Mettez à jour vos informations de profil et vos préférences"})]}),i.jsxs(J,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(W5,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Photo de profil"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),i.jsx(ps,{}),i.jsxs("form",{onSubmit:C.handleSubmit(k),className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"displayName",children:"Nom complet *"}),i.jsx(we,{id:"displayName",...C.register("displayName"),placeholder:"Votre nom complet"}),C.formState.errors.displayName&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:C.formState.errors.displayName.message})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"phone",children:"Téléphone"}),i.jsx(we,{id:"phone",type:"tel",...C.register("phone"),placeholder:"+33 6 12 34 56 78"})]})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"bio",children:"Biographie"}),i.jsx(_s,{id:"bio",...C.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((L=C.watch("bio"))==null?void 0:L.length)||0,"/500 caractères"]})]}),i.jsx(ps,{}),i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(ji,{className:"w-4 h-4"}),"Informations académiques"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"university",children:"Université *"}),i.jsxs(dt,{value:C.watch("university"),onValueChange:z=>C.setValue("university",z),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Sélectionnez votre université"})}),i.jsx(ot,{children:Bce.map(z=>i.jsx(ie,{value:z,children:z},z))})]}),C.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:C.formState.errors.university.message})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"fieldOfStudy",children:"Filière d'études *"}),i.jsxs(dt,{value:C.watch("fieldOfStudy"),onValueChange:z=>C.setValue("fieldOfStudy",z),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Sélectionnez votre filière"})}),i.jsx(ot,{children:qce.map(z=>i.jsx(ie,{value:z,children:z},z))})]}),C.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:C.formState.errors.fieldOfStudy.message})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"graduationYear",children:"Année de diplôme *"}),i.jsxs(dt,{value:(W=C.watch("graduationYear"))==null?void 0:W.toString(),onValueChange:z=>C.setValue("graduationYear",parseInt(z)),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Année de diplôme"})}),i.jsx(ot,{children:Array.from({length:16},(z,X)=>2020+X).map(z=>i.jsx(ie,{value:z.toString(),children:z},z))})]}),C.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:C.formState.errors.graduationYear.message})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"campus",children:"Campus"}),i.jsx(we,{id:"campus",...C.register("campus"),placeholder:"Campus principal"})]})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"location",children:"Localisation"}),i.jsx(we,{id:"location",...C.register("location"),placeholder:"Paris, France"})]}),i.jsx($,{type:"submit",disabled:l,className:"w-full",children:l?i.jsxs(i.Fragment,{children:[i.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):i.jsxs(i.Fragment,{children:[i.jsx(k0,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),i.jsx(Ut,{value:"notifications",className:"space-y-6",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Ls,{className:"w-5 h-5"}),"Préférences de notification"]}),i.jsx(lt,{children:"Choisissez comment vous souhaitez être notifié"})]}),i.jsxs(J,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(an,{className:"w-4 h-4 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),i.jsx(Cr,{checked:y.email,onCheckedChange:z=>v(X=>({...X,email:z}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ac,{className:"w-4 h-4 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Notifications push"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),i.jsx(Cr,{checked:y.push,onCheckedChange:z=>v(X=>({...X,push:z}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(nd,{className:"w-4 h-4 text-purple-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"SMS"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientôt disponible)"})]})]}),i.jsx(Cr,{checked:y.sms,onCheckedChange:z=>v(X=>({...X,sms:z})),disabled:!0})]})]})]}),i.jsx(ps,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Types de notifications"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zt,{className:"w-4 h-4 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Messages"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),i.jsx(Cr,{checked:y.messages,onCheckedChange:z=>v(X=>({...X,messages:z}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Jt,{className:"w-4 h-4 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Annonces"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant à vos recherches"})]})]}),i.jsx(Cr,{checked:y.listings,onCheckedChange:z=>v(X=>({...X,listings:z}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(to,{className:"w-4 h-4 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Avis et évaluations"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),i.jsx(Cr,{checked:y.reviews,onCheckedChange:z=>v(X=>({...X,reviews:z}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ls,{className:"w-4 h-4 text-red-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Alertes de sécurité"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises à jour de sécurité"})]})]}),i.jsx(Cr,{checked:y.alerts,onCheckedChange:z=>v(X=>({...X,alerts:z}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(cQ,{className:"w-4 h-4 text-pink-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Marketing"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalités et promotions"})]})]}),i.jsx(Cr,{checked:y.marketing,onCheckedChange:z=>v(X=>({...X,marketing:z}))})]})]})]}),i.jsx($,{onClick:R,disabled:l,className:"w-full",children:l?i.jsxs(i.Fragment,{children:[i.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):i.jsxs(i.Fragment,{children:[i.jsx(k0,{className:"w-4 h-4 mr-2"}),"Sauvegarder les préférences"]})})]})]})}),i.jsx(Ut,{value:"privacy",className:"space-y-6",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Ru,{className:"w-5 h-5"}),"Confidentialité et visibilité"]}),i.jsx(lt,{children:"Contrôlez qui peut voir vos informations"})]}),i.jsxs(J,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Visibilité du profil"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Profil public"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les étudiants vérifiés"})]}),i.jsx(Cr,{checked:_.profileVisibility==="public",onCheckedChange:z=>E(X=>({...X,profileVisibility:z?"public":"private"}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher l'email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),i.jsx(Cr,{checked:_.showEmail,onCheckedChange:z=>E(X=>({...X,showEmail:z}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher le téléphone"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numéro de téléphone est visible sur votre profil"})]}),i.jsx(Cr,{checked:_.showPhone,onCheckedChange:z=>E(X=>({...X,showPhone:z}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher l'université"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre université est visible sur votre profil"})]}),i.jsx(Cr,{checked:_.showUniversity,onCheckedChange:z=>E(X=>({...X,showUniversity:z}))})]})]})]}),i.jsx(ps,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Interactions"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres étudiants peuvent vous envoyer des messages"})]}),i.jsx(Cr,{checked:_.allowMessages,onCheckedChange:z=>E(X=>({...X,allowMessages:z}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Statut en ligne"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous êtes en ligne"})]}),i.jsx(Cr,{checked:_.showOnlineStatus,onCheckedChange:z=>E(X=>({...X,showOnlineStatus:z}))})]})]})]}),i.jsxs(kt,{children:[i.jsx(Et,{className:"h-4 w-4"}),i.jsx(Tt,{children:"Vos informations personnelles sont toujours protégées et ne sont jamais partagées avec des tiers sans votre consentement."})]})]})]})}),i.jsx(Ut,{value:"security",className:"space-y-6",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Et,{className:"w-5 h-5"}),"Sécurité du compte"]}),i.jsx(lt,{children:"Gérez la sécurité de votre compte StudyMarket"})]}),i.jsxs(J,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Informations du compte"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(an,{className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"font-medium",children:"Email"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),i.jsxs(aa,{open:g,onOpenChange:x,children:[i.jsx(hu,{asChild:!0,children:i.jsx($,{variant:"outline",size:"sm",children:"Changer l'email"})}),i.jsxs(Ni,{children:[i.jsxs(oa,{children:[i.jsx(Si,{children:"Changer l'adresse email"}),i.jsx(fu,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),i.jsxs("form",{onSubmit:T.handleSubmit(A),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"newEmail",children:"Nouvel email"}),i.jsx(we,{id:"newEmail",type:"email",...T.register("newEmail"),placeholder:"nouveau@email.com"}),T.formState.errors.newEmail&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:T.formState.errors.newEmail.message})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),i.jsx(we,{id:"emailPassword",type:"password",...T.register("password"),placeholder:"••••••••"}),T.formState.errors.password&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:T.formState.errors.password.message})]}),i.jsxs(og,{children:[i.jsx($,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Annuler"}),i.jsxs($,{type:"submit",disabled:l,children:[l?i.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(k0,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(zl,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernière modification : il y a 30 jours"}),i.jsxs(aa,{open:h,onOpenChange:m,children:[i.jsx(hu,{asChild:!0,children:i.jsx($,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),i.jsxs(Ni,{children:[i.jsxs(oa,{children:[i.jsx(Si,{children:"Changer le mot de passe"}),i.jsx(fu,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),i.jsxs("form",{onSubmit:D.handleSubmit(S),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),i.jsx(we,{id:"currentPassword",type:"password",...D.register("currentPassword"),placeholder:"••••••••"}),D.formState.errors.currentPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:D.formState.errors.currentPassword.message})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),i.jsx(we,{id:"newPassword",type:"password",...D.register("newPassword"),placeholder:"••••••••"}),D.formState.errors.newPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:D.formState.errors.newPassword.message})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),i.jsx(we,{id:"confirmPassword",type:"password",...D.register("confirmPassword"),placeholder:"••••••••"}),D.formState.errors.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:D.formState.errors.confirmPassword.message})]}),i.jsxs(og,{children:[i.jsx($,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Annuler"}),i.jsxs($,{type:"submit",disabled:l,children:[l?i.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(aQ,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),i.jsx(ps,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Vérification du compte"}),i.jsx("div",{className:"p-4 border rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vérifié":"Vérification en attente"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut étudiant a été vérifié":"Votre statut étudiant est en cours de vérification"})]})]}),e!=null&&e.isVerified?i.jsxs(Ie,{className:"bg-green-100 text-green-800",children:[i.jsx(yt,{className:"w-3 h-3 mr-1"}),"Vérifié"]}):i.jsx(Ie,{variant:"outline",children:"En attente"})]})})]}),i.jsxs(kt,{children:[i.jsx(Et,{className:"h-4 w-4"}),i.jsx(Tt,{children:"Pour votre sécurité, nous vous recommandons d'utiliser un mot de passe fort et de le changer régulièrement."})]})]})]})}),i.jsxs(Ut,{value:"data",className:"space-y-6",children:[i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-5 h-5"}),"Gestion des données"]}),i.jsx(lt,{children:"Exportez ou supprimez vos données personnelles"})]}),i.jsxs(J,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Exporter mes données"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Téléchargez une copie de toutes vos données StudyMarket au format JSON."}),i.jsxs($,{onClick:N,disabled:l,variant:"outline",children:[l?i.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(ws,{className:"w-4 h-4 mr-2"}),"Exporter mes données"]})]}),i.jsx(ps,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),i.jsxs(kt,{className:"border-destructive",children:[i.jsx(dr,{className:"h-4 w-4"}),i.jsx(Tt,{children:"La suppression de votre compte est irréversible. Toutes vos données seront définitivement supprimées."})]}),i.jsxs(aa,{open:u,onOpenChange:d,children:[i.jsx(hu,{asChild:!0,children:i.jsxs($,{variant:"destructive",children:[i.jsx(ia,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),i.jsxs(Ni,{children:[i.jsxs(oa,{children:[i.jsx(Si,{className:"text-destructive",children:"Supprimer définitivement le compte"}),i.jsxs(fu,{children:["Cette action est irréversible. Toutes vos données seront supprimées :",i.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[i.jsx("li",{children:"Profil utilisateur"}),i.jsx("li",{children:"Toutes vos annonces"}),i.jsx("li",{children:"Conversations et messages"}),i.jsx("li",{children:"Avis et évaluations"}),i.jsx("li",{children:"Favoris et recherches sauvegardées"})]})]})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(de,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),i.jsx(we,{id:"deleteConfirm",value:w,onChange:z=>b(z.target.value),placeholder:"SUPPRIMER"})]})}),i.jsxs(og,{children:[i.jsx($,{variant:"outline",onClick:()=>d(!1),children:"Annuler"}),i.jsxs($,{variant:"destructive",onClick:P,disabled:w!=="SUPPRIMER"||l,children:[l?i.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(ia,{className:"w-4 h-4 mr-2"}),"Supprimer définitivement"]})]})]})]})]})]})]}),i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(av,{className:"w-5 h-5"}),"Informations légales"]})}),i.jsx(J,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx($,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Dn,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),i.jsx($,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Dn,{className:"w-4 h-4"}),"Politique de confidentialité"]})}),i.jsx($,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Dn,{className:"w-4 h-4"}),"Politique des cookies"]})}),i.jsx($,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Dn,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour accéder aux paramètres."})})})})};function Hce(t,e=[]){let r=[];function n(a,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(h){const{scope:m,children:g,...x}=h,w=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>x,Object.values(x));return i.jsx(w.Provider,{value:b,children:g})}function d(h,m){const g=(m==null?void 0:m[t][c])||l,x=p.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,Gce(s,...e)]}function Gce(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var PN="Progress",RN=100,[Kce,ime]=Hce(PN),[Yce,Qce]=Kce(PN),J5=p.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:a=Jce,...o}=t;(s||s===0)&&!cT(s)&&console.error(Xce(`${s}`,"Progress"));const l=cT(s)?s:RN;n!==null&&!uT(n,l)&&console.error(Zce(`${n}`,"Progress"));const c=uT(n,l)?n:null,u=Pv(c)?a(c,l):void 0;return i.jsx(Yce,{scope:r,value:c,max:l,children:i.jsx(De.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Pv(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":e6(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});J5.displayName=PN;var X5="ProgressIndicator",Z5=p.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,s=Qce(X5,r);return i.jsx(De.div,{"data-state":e6(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:e})});Z5.displayName=X5;function Jce(t,e){return`${Math.round(t/e*100)}%`}function e6(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Pv(t){return typeof t=="number"}function cT(t){return Pv(t)&&!isNaN(t)&&t>0}function uT(t,e){return Pv(t)&&!isNaN(t)&&t<=e&&t>=0}function Xce(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${RN}\`.`}function Zce(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${RN} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var t6=J5,eue=Z5;const r6=p.forwardRef(({className:t,value:e,...r},n)=>i.jsx(t6,{ref:n,className:Le("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...r,children:i.jsx(eue,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));r6.displayName=t6.displayName;const el={electronics:{category:"Électronique",icon:ac,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:ED,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:ui,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, déco, électroménager"},clothing:{category:"Vêtements",icon:Dj,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vêtements, chaussures, accessoires"}},tue=[{id:"first_transaction",name:"Premier Pas",icon:"🌱",threshold:1,description:"Première transaction écologique"},{id:"co2_saver_10",name:"Éco-Warrior",icon:"🌍",threshold:10,description:"10 kg CO₂ économisés"},{id:"co2_saver_50",name:"Planète Protecteur",icon:"🛡️",threshold:50,description:"50 kg CO₂ économisés"},{id:"co2_saver_100",name:"Héros Climatique",icon:"🦸",threshold:100,description:"100 kg CO₂ économisés"},{id:"water_saver",name:"Gardien de l'Eau",icon:"💧",threshold:1e3,description:"1000L d'eau économisés"},{id:"recycling_master",name:"Maître du Recyclage",icon:"♻️",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"😇",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"🏆",threshold:10,description:"10 transactions en un mois"}],Ec=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},rue=()=>{const{currentUser:t,userProfile:e}=Zt(),[r,n]=p.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Débutant",percentile:0}),[s,a]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState("all");p.useEffect(()=>{t&&d()},[t,c]);const d=async()=>{if(t){l(!0);try{const v=Mt(bt(ve,"listings"),Vt("sellerId","==",t.uid)),_=await Kt(v),E=[];_.forEach(D=>{const T=D.data();E.push({id:D.id,...T,createdAt:Ec(T.createdAt),updatedAt:Ec(T.updatedAt)})}),a(E);const C=h(E,c);n(C),await w(C)}catch(v){console.error("Erreur lors du chargement des données environnementales:",v)}finally{l(!1)}}},h=(v,_)=>{const E=new Date;let C=v;if(_==="month"){const U=new Date(E.getFullYear(),E.getMonth()-1,E.getDate());C=v.filter(H=>Ec(H.createdAt)>=U)}else if(_==="year"){const U=new Date(E.getFullYear()-1,E.getMonth(),E.getDate());C=v.filter(H=>Ec(H.createdAt)>=U)}let D=0,T=0,k=0,R=0;const S={};C.forEach(U=>{const H=el[U.category]||el.electronics,F=1;let L=1;U.transactionType==="donation"?L=1.2:U.transactionType==="exchange"&&(L=.8),D+=H.co2PerItem*F*L,T+=H.waterPerItem*F*L,k+=H.energyPerItem*F*L,R+=H.wastePerItem*F*L,S[U.category]=(S[U.category]||0)+1});const A=m(v),P=g(v,D,T),{rank:N,percentile:V}=x(D,v.length);return{totalCo2Saved:Math.round(D*10)/10,totalWaterSaved:Math.round(T),totalEnergySaved:Math.round(k*10)/10,totalWasteAvoided:Math.round(R*10)/10,transactionsByCategory:S,monthlyImpact:A,badges:P,rank:N,percentile:V}},m=v=>{const _={};for(let E=11;E>=0;E--){const C=new Date;C.setMonth(C.getMonth()-E);const D=C.toISOString().slice(0,7);_[D]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return v.forEach(E=>{const D=Ec(E.createdAt).toISOString().slice(0,7);if(_[D]){const T=el[E.category]||el.electronics;let k=1;E.transactionType==="donation"?k=1.2:E.transactionType==="exchange"&&(k=.8),_[D].co2Saved+=T.co2PerItem*k,_[D].waterSaved+=T.waterPerItem*k,_[D].energySaved+=T.energyPerItem*k,_[D].transactions+=1}}),Object.entries(_).map(([E,C])=>({month:E,co2Saved:Math.round(C.co2Saved*10)/10,transactions:C.transactions,waterSaved:Math.round(C.waterSaved),energySaved:Math.round(C.energySaved*10)/10}))},g=(v,_,E)=>{const C=[];v.length>=1&&C.push("first_transaction"),_>=10&&C.push("co2_saver_10"),_>=50&&C.push("co2_saver_50"),_>=100&&C.push("co2_saver_100"),E>=1e3&&C.push("water_saver"),v.length>=20&&C.push("recycling_master"),v.filter(R=>R.transactionType==="donation").length>=5&&C.push("donation_hero");const T=new Date().toISOString().slice(0,7);return v.filter(R=>Ec(R.createdAt).toISOString().slice(0,7)===T).length>=10&&C.push("monthly_champion"),C},x=(v,_)=>{let E="Débutant",C=0;return v>=200?(E="Légende Écologique",C=95):v>=100?(E="Maître Environnemental",C=85):v>=50?(E="Expert Vert",C=70):v>=25?(E="Éco-Warrior",C=50):v>=10?(E="Protecteur",C=30):v>=5&&(E="Apprenti Vert",C=15),{rank:E,percentile:C}},w=async v=>{if(t)try{const _=Ke(ve,"users",t.uid);await cr(_,{co2Saved:v.totalCo2Saved,environmentalRank:v.rank,environmentalBadges:v.badges,lastEnvironmentalUpdate:new Date})}catch(_){console.error("Erreur lors de la mise à jour des données environnementales:",_)}},b=async()=>{const v=`🌍 Mon impact écologique sur StudyMarket :

🌱 ${r.totalCo2Saved} kg CO₂ économisés
💧 ${r.totalWaterSaved} L d'eau préservés
⚡ ${r.totalEnergySaved} kWh d'énergie économisés
🏆 Rang : ${r.rank}

Rejoignez la communauté étudiante éco-responsable ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mon Impact Écologique - StudyMarket",text:v,url:window.location.origin})}catch{navigator.clipboard.writeText(v)}else navigator.clipboard.writeText(v)},y=()=>{const v={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:r,transactions:s.length,period:c},_=new Blob([JSON.stringify(v,null,2)],{type:"application/json"}),E=URL.createObjectURL(_),C=document.createElement("a");C.href=E,C.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,C.click(),URL.revokeObjectURL(E)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Hs,{className:"w-8 h-8 text-green-600"}),"Mon Impact Écologique"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez votre contribution à la protection de l'environnement"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs($,{variant:"outline",onClick:b,className:"flex items-center gap-2",children:[i.jsx(Rj,{className:"w-4 h-4"}),"Partager"]}),i.jsxs($,{variant:"outline",onClick:y,className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4"}),"Exporter"]})]})]}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Us,{className:"w-5 h-5 text-muted-foreground"}),i.jsx("span",{className:"font-medium",children:"Période d'analyse :"})]}),i.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette année"},{key:"all",label:"Tout"}].map(v=>i.jsx($,{variant:c===v.key?"default":"outline",size:"sm",onClick:()=>u(v.key),children:v.label},v.key))})]})})}),o?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((v,_)=>i.jsx(Q,{className:"animate-pulse",children:i.jsx(J,{className:"pt-6",children:i.jsx("div",{className:"h-16 bg-muted rounded"})})},_))}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Q,{className:"border-green-200 bg-green-50/50",children:i.jsxs(J,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-green-700",children:r.totalCo2Saved}),i.jsx("p",{className:"text-sm text-green-600",children:"kg CO₂ économisés"})]}),i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(Hs,{className:"w-6 h-6 text-green-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-green-600",children:["≈ ",Math.round(r.totalCo2Saved/2.3)," km en voiture évités"]})]})}),i.jsx(Q,{className:"border-blue-200 bg-blue-50/50",children:i.jsxs(J,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-blue-700",children:r.totalWaterSaved.toLocaleString()}),i.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau préservés"})]}),i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx(Hk,{className:"w-6 h-6 text-blue-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["≈ ",Math.round(r.totalWaterSaved/150)," douches économisées"]})]})}),i.jsx(Q,{className:"border-yellow-200 bg-yellow-50/50",children:i.jsxs(J,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:r.totalEnergySaved}),i.jsx("p",{className:"text-sm text-yellow-600",children:"kWh économisés"})]}),i.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:i.jsx(id,{className:"w-6 h-6 text-yellow-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:["≈ ",Math.round(r.totalEnergySaved/3.5)," jours d'électricité"]})]})}),i.jsx(Q,{className:"border-purple-200 bg-purple-50/50",children:i.jsxs(J,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-purple-700",children:r.totalWasteAvoided}),i.jsx("p",{className:"text-sm text-purple-600",children:"kg déchets évités"})]}),i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:i.jsx(dQ,{className:"w-6 h-6 text-purple-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["≈ ",Math.round(r.totalWasteAvoided/.5)," sacs poubelle évités"]})]})})]}),i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(ND,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang Écologique"]})}),i.jsxs(J,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-primary",children:r.rank}),i.jsxs("p",{className:"text-muted-foreground",children:["Vous êtes dans le top ",100-r.percentile,"% des utilisateurs"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl",children:"🏆"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),i.jsx(r6,{value:r.percentile,className:"h-3"}),i.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[i.jsx("span",{children:"Débutant"}),i.jsx("span",{children:"Légende Écologique"})]})]})]}),i.jsxs(uc,{defaultValue:"overview",className:"space-y-4",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-4",children:[i.jsx($t,{value:"overview",children:"Vue d'ensemble"}),i.jsx($t,{value:"categories",children:"Par catégorie"}),i.jsx($t,{value:"badges",children:"Badges"}),i.jsx($t,{value:"methodology",children:"Méthodologie"})]}),i.jsxs(Ut,{value:"overview",className:"space-y-6",children:[i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(TD,{className:"w-5 h-5"}),"Évolution Mensuelle"]}),i.jsx(lt,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),i.jsx(J,{children:i.jsx("div",{className:"space-y-4",children:r.monthlyImpact.slice(-6).map((v,_)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),i.jsx("span",{className:"font-medium",children:new Date(v.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),i.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-green-600",children:[v.co2Saved," kg"]}),i.jsx("div",{className:"text-muted-foreground",children:"CO₂"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-blue-600",children:[v.waterSaved," L"]}),i.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold text-primary",children:v.transactions}),i.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},v.month))})})]}),i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(PD,{className:"w-5 h-5"}),"Équivalences Concrètes"]}),i.jsx(lt,{children:"Votre impact traduit en équivalences du quotidien"})]}),i.jsx(J,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[i.jsx(kD,{className:"w-8 h-8 text-green-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(r.totalCo2Saved/2.3)," km"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture évités"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[i.jsx(pQ,{className:"w-8 h-8 text-blue-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(r.totalCo2Saved/22)," arbres"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"plantés (équivalent CO₂)"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[i.jsx(rQ,{className:"w-8 h-8 text-yellow-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(r.totalEnergySaved/24)," jours"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation électrique"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[i.jsx(Hk,{className:"w-8 h-8 text-purple-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(r.totalWaterSaved/150)," douches"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes économisées"})]})]})]})})]})]}),i.jsx(Ut,{value:"categories",className:"space-y-6",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Jt,{className:"w-5 h-5"}),"Impact par Catégorie"]}),i.jsx(lt,{children:"Détail de votre impact selon les types d'objets échangés"})]}),i.jsx(J,{children:i.jsx("div",{className:"space-y-4",children:Object.entries(r.transactionsByCategory).map(([v,_])=>{const E=el[v]||el.electronics,C=E.icon,D=_*E.co2PerItem;return i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:i.jsx(C,{className:`w-5 h-5 ${E.color}`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:E.category}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[_," transaction",_>1?"s":""]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(D*10)/10," kg CO₂"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(_*E.waterPerItem)," L eau"]})]})]},v)})})})]})}),i.jsx(Ut,{value:"badges",className:"space-y-6",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Ab,{className:"w-5 h-5"}),"Badges Écologiques"]}),i.jsx(lt,{children:"Vos récompenses pour votre engagement environnemental"})]}),i.jsx(J,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:tue.map(v=>{const _=r.badges.includes(v.id);return i.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${_?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl mb-2",children:v.icon}),i.jsx("h3",{className:`font-semibold ${_?"text-green-800":"text-gray-600"}`,children:v.name}),i.jsx("p",{className:`text-sm ${_?"text-green-600":"text-gray-500"}`,children:v.description}),_&&i.jsx(Ie,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},v.id)})})})]})}),i.jsx(Ut,{value:"methodology",className:"space-y-6",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(_o,{className:"w-5 h-5"}),"Méthodologie de Calcul"]}),i.jsx(lt,{children:"Comment nous calculons votre impact environnemental"})]}),i.jsxs(J,{className:"space-y-6",children:[i.jsxs(kt,{children:[i.jsx(_o,{className:"h-4 w-4"}),i.jsx(Tt,{children:"Nos calculs sont basés sur des études scientifiques et des données de l'ADEME (Agence de l'Environnement et de la Maîtrise de l'Énergie)."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),i.jsx("p",{className:"text-muted-foreground",children:"Chaque objet acheté d'occasion évite la production d'un objet neuf. Nous calculons l'impact environnemental évité en nous basant sur l'empreinte carbone, hydrique et énergétique de la production de chaque catégorie d'objets."}),i.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catégorie"}),i.jsx("div",{className:"space-y-3",children:Object.entries(el).map(([v,_])=>{const E=_.icon;return i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(E,{className:`w-4 h-4 ${_.color}`}),i.jsx("span",{className:"font-medium",children:_.category})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"CO₂:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[_.co2PerItem," kg"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[_.waterPerItem," L"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Énergie:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[_.energyPerItem," kWh"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Déchets:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[_.wastePerItem," kg"]})]})]})]},v)})}),i.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondération"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Du,{className:"w-4 h-4 text-green-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(va,{className:"w-4 h-4 text-purple-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Échanges/Troc :"})," -20% d'impact (pas de transaction monétaire)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Jt,{className:"w-4 h-4 text-blue-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),i.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Références"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• ADEME - Base Carbone® pour les facteurs d'émission"}),i.jsx("li",{children:"• Water Footprint Network pour l'empreinte hydrique"}),i.jsx("li",{children:"• IEA (International Energy Agency) pour l'énergie"}),i.jsx("li",{children:"• Ellen MacArthur Foundation pour l'économie circulaire"})]})]})]})]})})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx(Hs,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),i.jsx("p",{className:"text-muted-foreground",children:"Découvrez combien vous contribuez à la protection de l'environnement"})]})})})},Cp=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Rv=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(Rv).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(r=>{const n=Rv(t[r]);n!==void 0&&(e[r]=n)}),e}return t},dT=[{value:"all",label:"Toutes catégories"},{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],hT=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"Échange"},{value:"service",label:"Service"}],nue=[{value:"all",label:"Toutes universités"},{value:"sorbonne",label:"Sorbonne Université"},{value:"dauphine",label:"Université Paris-Dauphine"},{value:"polytechnique",label:"École Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSupélec"}],sue=()=>{const{currentUser:t,userProfile:e}=Zt(),[r,n]=p.useState([]),[s,a]=p.useState([]),[o,l]=p.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[c,u]=p.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[d,h]=p.useState(!1),[m,g]=p.useState(null),[x,w]=p.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});p.useEffect(()=>{t&&(b(),y())},[t]);const b=async()=>{if(t)try{u(V=>({...V,searches:!0}));const S=Mt(bt(ve,"savedSearches"),Vt("userId","==",t.uid),ys(50)),A=await Kt(S),P=[];A.forEach(V=>{const U=V.data();P.push({id:V.id,...U,createdAt:Cp(U.createdAt),updatedAt:Cp(U.updatedAt),lastNotified:U.lastNotified?Cp(U.lastNotified):void 0})}),P.sort((V,U)=>U.createdAt.getTime()-V.createdAt.getTime()),n(P);const N=P.filter(V=>V.alertsEnabled).length;l(V=>({...V,totalSearches:P.length,activeAlerts:N}))}catch(S){console.error("Erreur lors du chargement des recherches sauvegardées:",S),ne.error("Erreur lors du chargement des recherches sauvegardées")}finally{u(S=>({...S,searches:!1}))}},y=async()=>{if(t)try{u(V=>({...V,matches:!0}));const S=Mt(bt(ve,"alertMatches"),Vt("userId","==",t.uid),ys(100)),A=await Kt(S),P=[];A.forEach(V=>{const U=V.data();P.push({id:V.id,...U,matchedAt:Cp(U.matchedAt)})}),P.sort((V,U)=>U.matchedAt.getTime()-V.matchedAt.getTime()),a(P);const N=P.filter(V=>!V.seen).length;l(V=>({...V,totalMatches:P.length,newMatches:N}))}catch(S){console.error("Erreur lors du chargement des correspondances:",S),ne.error("Erreur lors du chargement des correspondances")}finally{u(S=>({...S,matches:!1}))}},v=async()=>{if(!t||!x.name.trim()){ne.error("Veuillez remplir le nom de la recherche");return}u(S=>({...S,creating:!0}));try{const S={};if(x.query&&x.query.trim()&&(S.query=x.query.trim()),x.category&&x.category!=="all"&&(S.category=x.category),x.transactionType&&x.transactionType!=="all"&&(S.transactionType=x.transactionType),x.university&&x.university!=="all"&&(S.university=x.university),x.minPrice&&x.minPrice.trim()){const N=parseFloat(x.minPrice);!isNaN(N)&&N>=0&&(S.minPrice=N)}if(x.maxPrice&&x.maxPrice.trim()){const N=parseFloat(x.maxPrice);!isNaN(N)&&N>=0&&(S.maxPrice=N)}const A={userId:t.uid,name:x.name.trim(),filters:S,alertsEnabled:x.alertsEnabled,notificationFrequency:x.notificationFrequency,notificationMethods:{email:x.notificationMethods.email,push:x.notificationMethods.push,sms:x.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},P=Rv(A);await Ll(bt(ve,"savedSearches"),P),ne.success("Alerte créée avec succès !"),h(!1),T(),b()}catch(S){console.error("Erreur lors de la création de l'alerte:",S),ne.error("Erreur lors de la création de l'alerte")}finally{u(S=>({...S,creating:!1}))}},_=async(S,A)=>{try{u(N=>({...N,updating:!0}));const P=Rv({...A,updatedAt:new Date});await cr(Ke(ve,"savedSearches",S),P),ne.success("Recherche mise à jour !"),b()}catch(P){console.error("Erreur lors de la mise à jour:",P),ne.error("Erreur lors de la mise à jour")}finally{u(P=>({...P,updating:!1}))}},E=async S=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette recherche sauvegardée ?"))try{await Au(Ke(ve,"savedSearches",S)),ne.success("Recherche supprimée !"),b()}catch(A){console.error("Erreur lors de la suppression:",A),ne.error("Erreur lors de la suppression")}},C=async(S,A)=>{await _(S,{alertsEnabled:A})},D=async S=>{try{await cr(Ke(ve,"alertMatches",S),{seen:!0,seenAt:new Date}),y()}catch(A){console.error("Erreur lors du marquage comme vu:",A)}},T=()=>{w({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),g(null)},k=S=>{try{return fd(S,{addSuffix:!0,locale:nn})}catch{return"Date inconnue"}},R=S=>{const A=[];if(S.query&&A.push(`"${S.query}"`),S.category&&S.category!=="all"){const P=dT.find(N=>N.value===S.category);P&&A.push(P.label)}if(S.transactionType&&S.transactionType!=="all"){const P=hT.find(N=>N.value===S.transactionType);P&&A.push(P.label)}return S.minPrice!==void 0&&A.push(`≥ ${S.minPrice}€`),S.maxPrice!==void 0&&A.push(`≤ ${S.maxPrice}€`),A.length>0?A.join(" • "):"Tous les critères"};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Ls,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos recherches sauvegardées et recevez des notifications"})]}),i.jsxs(aa,{open:d,onOpenChange:h,children:[i.jsx(hu,{asChild:!0,children:i.jsxs($,{className:"bg-gradient-to-r from-primary to-secondary",children:[i.jsx(bl,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),i.jsxs(Ni,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(oa,{children:[i.jsxs(Si,{className:"flex items-center gap-2",children:[i.jsx(Xo,{className:"w-5 h-5"}),"Créer une Alerte Personnalisée"]}),i.jsx(fu,{children:"Définissez vos critères de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),i.jsx(we,{id:"alert-name",value:x.name,onChange:S=>w(A=>({...A,name:S.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(Rx,{className:"w-4 h-4"}),"Critères de Recherche"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"search-query",children:"Mots-clés"}),i.jsx(we,{id:"search-query",value:x.query,onChange:S=>w(A=>({...A,query:S.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"search-category",children:"Catégorie"}),i.jsxs(dt,{value:x.category,onValueChange:S=>w(A=>({...A,category:S})),children:[i.jsx(at,{className:"mt-1",children:i.jsx(ht,{})}),i.jsx(ot,{children:dT.map(S=>i.jsx(ie,{value:S.value,children:S.label},S.value))})]})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"transaction-type",children:"Type de transaction"}),i.jsxs(dt,{value:x.transactionType,onValueChange:S=>w(A=>({...A,transactionType:S})),children:[i.jsx(at,{className:"mt-1",children:i.jsx(ht,{})}),i.jsx(ot,{children:hT.map(S=>i.jsx(ie,{value:S.value,children:S.label},S.value))})]})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"search-university",children:"Université"}),i.jsxs(dt,{value:x.university,onValueChange:S=>w(A=>({...A,university:S})),children:[i.jsx(at,{className:"mt-1",children:i.jsx(ht,{})}),i.jsx(ot,{children:nue.map(S=>i.jsx(ie,{value:S.value,children:S.label},S.value))})]})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"min-price",children:"Prix minimum (€)"}),i.jsx(we,{id:"min-price",type:"number",value:x.minPrice,onChange:S=>w(A=>({...A,minPrice:S.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"max-price",children:"Prix maximum (€)"}),i.jsx(we,{id:"max-price",type:"number",value:x.maxPrice,onChange:S=>w(A=>({...A,maxPrice:S.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(Ls,{className:"w-4 h-4"}),"Notifications"]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),i.jsx(Cr,{id:"alerts-enabled",checked:x.alertsEnabled,onCheckedChange:S=>w(A=>({...A,alertsEnabled:S}))})]}),x.alertsEnabled&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(de,{children:"Fréquence des notifications"}),i.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantané",description:"Dès qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un résumé par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un résumé par semaine"}].map(S=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:S.value,name:"frequency",value:S.value,checked:x.notificationFrequency===S.value,onChange:A=>w(P=>({...P,notificationFrequency:A.target.value})),className:"rounded border-border"}),i.jsx(de,{htmlFor:S.value,className:"cursor-pointer",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:S.label}),i.jsx("div",{className:"text-sm text-muted-foreground",children:S.description})]})})]},S.value))})]}),i.jsxs("div",{children:[i.jsx(de,{children:"Méthodes de notification"}),i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(an,{className:"w-4 h-4 text-blue-600"}),i.jsx(de,{htmlFor:"email-notifications",children:"Email"})]}),i.jsx(Cr,{id:"email-notifications",checked:x.notificationMethods.email,onCheckedChange:S=>w(A=>({...A,notificationMethods:{...A.notificationMethods,email:S}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ls,{className:"w-4 h-4 text-green-600"}),i.jsx(de,{htmlFor:"push-notifications",children:"Notifications push"})]}),i.jsx(Cr,{id:"push-notifications",checked:x.notificationMethods.push,onCheckedChange:S=>w(A=>({...A,notificationMethods:{...A.notificationMethods,push:S}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gk,{className:"w-4 h-4 text-purple-600"}),i.jsx(de,{htmlFor:"sms-notifications",children:"SMS"}),i.jsx(Ie,{variant:"outline",className:"text-xs",children:"Bientôt"})]}),i.jsx(Cr,{id:"sms-notifications",checked:x.notificationMethods.sms,onCheckedChange:S=>w(A=>({...A,notificationMethods:{...A.notificationMethods,sms:S}})),disabled:!0})]})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[i.jsx($,{variant:"outline",onClick:()=>h(!1),children:"Annuler"}),i.jsx($,{onClick:v,disabled:c.creating||!x.name.trim(),children:c.creating?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Xo,{className:"w-4 h-4 mr-2"}),"Créer l'alerte"]})})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauvées"})]}),i.jsx(Ir,{className:"w-8 h-8 text-blue-600"})]})})}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),i.jsx(Ls,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),i.jsx(Xo,{className:"w-8 h-8 text-purple-600"})]})})}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.newMatches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),i.jsx(id,{className:"w-8 h-8 text-blue-600"})]})})})]}),i.jsxs(uc,{defaultValue:"searches",className:"space-y-4",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-2",children:[i.jsxs($t,{value:"searches",className:"flex items-center gap-2",children:[i.jsx(Ir,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),i.jsxs($t,{value:"matches",className:"flex items-center gap-2",children:[i.jsx(Xo,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&i.jsx(Ie,{className:"ml-1 bg-blue-500",children:o.newMatches})]})]}),i.jsx(Ut,{value:"searches",className:"space-y-4",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Pj,{className:"w-5 h-5"}),"Recherches Sauvegardées"]}),i.jsx(lt,{children:"Gérez vos alertes et critères de recherche personnalisés"})]}),i.jsx(J,{children:c.searches?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((S,A)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),i.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},A))}):r.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ir,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegardée"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Créez votre première alerte pour être notifié des nouvelles annonces"}),i.jsxs($,{onClick:()=>h(!0),children:[i.jsx(bl,{className:"w-4 h-4 mr-2"}),"Créer ma première alerte"]})]}):i.jsx("div",{className:"space-y-4",children:r.map(S=>i.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h3",{className:"font-semibold",children:S.name}),S.alertsEnabled?i.jsxs(Ie,{className:"bg-green-100 text-green-800",children:[i.jsx(Ls,{className:"w-3 h-3 mr-1"}),"Actif"]}):i.jsxs(Ie,{variant:"secondary",children:[i.jsx(Yk,{className:"w-3 h-3 mr-1"}),"Pausé"]})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:R(S.filters)}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Us,{className:"w-3 h-3"}),"Créé ",k(S.createdAt)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Xo,{className:"w-3 h-3"}),S.matchCount," correspondance",S.matchCount!==1?"s":""]}),S.lastNotified&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ls,{className:"w-3 h-3"}),"Dernière alerte ",k(S.lastNotified)]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($,{variant:"ghost",size:"icon",onClick:()=>C(S.id,!S.alertsEnabled),title:S.alertsEnabled?"Désactiver les alertes":"Activer les alertes",children:S.alertsEnabled?i.jsx(Yk,{className:"w-4 h-4"}):i.jsx(uQ,{className:"w-4 h-4"})}),i.jsx($,{variant:"ghost",size:"icon",onClick:()=>{var A,P;g(S),w({name:S.name,query:S.filters.query||"",category:S.filters.category||"all",transactionType:S.filters.transactionType||"all",university:S.filters.university||"all",minPrice:((A=S.filters.minPrice)==null?void 0:A.toString())||"",maxPrice:((P=S.filters.maxPrice)==null?void 0:P.toString())||"",alertsEnabled:S.alertsEnabled,notificationFrequency:S.notificationFrequency,notificationMethods:S.notificationMethods}),h(!0)},title:"Modifier",children:i.jsx(hQ,{className:"w-4 h-4"})}),i.jsx($,{variant:"ghost",size:"icon",onClick:()=>E(S.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:i.jsx(ia,{className:"w-4 h-4"})})]})]}),S.alertsEnabled&&i.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ur,{className:"w-3 h-3"}),i.jsxs("span",{children:["Fréquence: ",S.notificationFrequency==="instant"?"Instantané":S.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[S.notificationMethods.email&&i.jsx(an,{className:"w-3 h-3 text-blue-600\\",title:"Email activé"}),S.notificationMethods.push&&i.jsx(Ls,{className:"w-3 h-3 text-green-600\\",title:"Push activé"}),S.notificationMethods.sms&&i.jsx(Gk,{className:"w-3 h-3 text-purple-600\\",title:"SMS activé"})]})]})]},S.id))})})]})}),i.jsx(Ut,{value:"matches",className:"space-y-4",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Xo,{className:"w-5 h-5"}),"Correspondances Trouvées"]}),i.jsx(lt,{children:"Les annonces qui correspondent à vos critères de recherche"})]}),i.jsx(J,{children:c.matches?i.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((S,A)=>i.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},A))}):s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Xo,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),i.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore à vos critères. Les nouvelles correspondances apparaîtront ici."})]}):i.jsx("div",{className:"space-y-4",children:s.map(S=>i.jsx("div",{className:`border rounded-lg p-4 transition-colors ${S.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[S.listingImage?i.jsx("img",{src:S.listingImage,alt:S.listingTitle,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:S.listingTitle}),i.jsxs("div",{className:"flex items-center gap-2",children:[!S.seen&&i.jsx(Ie,{className:"bg-blue-500",children:"Nouveau"}),i.jsx("span",{className:"font-semibold text-primary",children:S.listingPrice===0?"Gratuit":`${S.listingPrice}€`})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ur,{className:"w-3 h-3"}),"Trouvé ",k(S.matchedAt)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($,{variant:"outline",size:"sm",onClick:()=>D(S.id),disabled:S.seen,children:S.seen?i.jsxs(i.Fragment,{children:[i.jsx(yt,{className:"w-3 h-3 mr-1"}),"Vu"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ru,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),i.jsxs($,{size:"sm",onClick:()=>window.open(`/listing/${S.listingId}`,"_blank"),children:[i.jsx(Dn,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},S.id))})})]})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx(Ir,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour gérer vos alertes"}),i.jsx("p",{className:"text-muted-foreground",children:"Créez des alertes personnalisées pour être notifié des nouvelles annonces"})]})})})},kp=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},fT=[{value:"all",label:"Toutes catégories",icon:Jt},{value:"electronics",label:"Électronique",icon:ac},{value:"books",label:"Livres & Cours",icon:ED},{value:"furniture",label:"Mobilier",icon:ui},{value:"clothing",label:"Vêtements",icon:Dj},{value:"services",label:"Services",icon:sd},{value:"housing",label:"Logement",icon:ui},{value:"jobs",label:"Jobs & Stages",icon:kh}],iue=[{value:"all",label:"Tous types",icon:Jt},{value:"sale",label:"Vente",icon:ff},{value:"donation",label:"Don",icon:Du},{value:"exchange",label:"Échange",icon:va},{value:"service",label:"Service",icon:sd}],aue=[{value:"recent",label:"Plus récents",icon:ur},{value:"oldest",label:"Plus anciens",icon:Us},{value:"price-asc",label:"Prix croissant",icon:Wk},{value:"price-desc",label:"Prix décroissant",icon:jD},{value:"title",label:"Titre A-Z",icon:Wk},{value:"category",label:"Par catégorie",icon:mf}],oue=()=>{const{currentUser:t,userProfile:e}=Zt(),[r,n]=p.useState([]),[s,a]=p.useState([]),[o,l]=p.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[c,u]=p.useState({favorites:!0,listings:!0,removing:!1}),[d,h]=p.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[m,g]=p.useState("recent"),[x,w]=p.useState("grid"),[b,y]=p.useState([]);p.useEffect(()=>{t&&v()},[t]),p.useEffect(()=>{r.length>0&&_()},[r]);const v=async()=>{if(t)try{u(H=>({...H,favorites:!0}));const N=Mt(bt(ve,"favorites"),Vt("userId","==",t.uid),ys(100)),V=await Kt(N),U=[];V.forEach(H=>{const F=H.data();U.push({id:H.id,...F,createdAt:kp(F.createdAt),updatedAt:kp(F.updatedAt)})}),U.sort((H,F)=>F.createdAt.getTime()-H.createdAt.getTime()),n(U),E(U)}catch(N){console.error("Erreur lors du chargement des favoris:",N),ne.error("Erreur lors du chargement des favoris")}finally{u(N=>({...N,favorites:!1}))}},_=async()=>{try{u(H=>({...H,listings:!0}));const N=r.map(async H=>{try{const F=await Zn(Ke(ve,"listings",H.listingId));if(F.exists()){const L=F.data();return{id:F.id,...L,createdAt:kp(L.createdAt),updatedAt:kp(L.updatedAt)}}return null}catch(F){return console.error(`Erreur lors du chargement de l'annonce ${H.listingId}:`,F),null}}),U=(await Promise.all(N)).filter(H=>H!==null);a(U)}catch(N){console.error("Erreur lors du chargement des annonces favorites:",N)}finally{u(N=>({...N,listings:!1}))}},E=N=>{const V={},U={};let H=0,F=0;const L=new Date;L.setDate(L.getDate()-7);let W=0;N.forEach(z=>{V[z.listingCategory]=(V[z.listingCategory]||0)+1,U[z.listingTransactionType]=(U[z.listingTransactionType]||0)+1,z.listingPrice>0&&(H+=z.listingPrice,F++),z.createdAt>=L&&W++}),l({totalFavorites:N.length,byCategory:V,byTransactionType:U,averagePrice:F>0?Math.round(H/F):0,recentlyAdded:W,availableCount:N.length,soldCount:0})},C=async N=>{try{await Au(Ke(ve,"favorites",N)),ne.success("Favori supprimé"),v()}catch(V){console.error("Erreur lors de la suppression:",V),ne.error("Erreur lors de la suppression")}},D=async()=>{if(b.length!==0&&window.confirm(`Supprimer ${b.length} favori(s) sélectionné(s) ?`)){u(N=>({...N,removing:!0}));try{const N=b.map(V=>Au(Ke(ve,"favorites",V)));await Promise.all(N),ne.success(`${b.length} favori(s) supprimé(s)`),y([]),v()}catch(N){console.error("Erreur lors de la suppression multiple:",N),ne.error("Erreur lors de la suppression")}finally{u(N=>({...N,removing:!1}))}}},T=()=>{const N={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:r.length,favorites:r.map(F=>({title:F.listingTitle,price:F.listingPrice,category:F.listingCategory,transactionType:F.listingTransactionType,seller:F.sellerName,university:F.sellerUniversity,addedDate:F.createdAt.toISOString(),notes:F.notes||"",tags:F.tags}))},V=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),U=URL.createObjectURL(V),H=document.createElement("a");H.href=U,H.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,H.click(),URL.revokeObjectURL(U)},k=async()=>{const N=`🌟 Mes favoris StudyMarket :

📚 ${o.totalFavorites} annonces sauvegardées
💰 Prix moyen : ${o.averagePrice}€
🆕 ${o.recentlyAdded} ajoutées cette semaine

Découvrez la marketplace étudiante ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:N,url:window.location.origin})}catch{navigator.clipboard.writeText(N),ne.success("Lien copié dans le presse-papiers")}else navigator.clipboard.writeText(N),ne.success("Lien copié dans le presse-papiers")},R=()=>{let N=r;if(d.search){const V=d.search.toLowerCase();N=N.filter(U=>U.listingTitle.toLowerCase().includes(V)||U.sellerName.toLowerCase().includes(V)||U.tags.some(H=>H.toLowerCase().includes(V)))}if(d.category!=="all"&&(N=N.filter(V=>V.listingCategory===d.category)),d.transactionType!=="all"&&(N=N.filter(V=>V.listingTransactionType===d.transactionType)),d.priceRange!=="all")switch(d.priceRange){case"free":N=N.filter(V=>V.listingPrice===0);break;case"under-50":N=N.filter(V=>V.listingPrice>0&&V.listingPrice<50);break;case"50-200":N=N.filter(V=>V.listingPrice>=50&&V.listingPrice<=200);break;case"over-200":N=N.filter(V=>V.listingPrice>200);break}switch(m){case"recent":N.sort((V,U)=>U.createdAt.getTime()-V.createdAt.getTime());break;case"oldest":N.sort((V,U)=>V.createdAt.getTime()-U.createdAt.getTime());break;case"price-asc":N.sort((V,U)=>V.listingPrice-U.listingPrice);break;case"price-desc":N.sort((V,U)=>U.listingPrice-V.listingPrice);break;case"title":N.sort((V,U)=>V.listingTitle.localeCompare(U.listingTitle));break;case"category":N.sort((V,U)=>V.listingCategory.localeCompare(U.listingCategory));break}return N},S=N=>{try{return fd(N,{addSuffix:!0,locale:nn})}catch{return"Date inconnue"}},A=(N,V)=>V==="donation"?"Gratuit":V==="exchange"?"Échange":N===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(N),P=R();return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(xn,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardées"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs($,{variant:"outline",onClick:k,className:"flex items-center gap-2",children:[i.jsx(Rj,{className:"w-4 h-4"}),"Partager"]}),i.jsxs($,{variant:"outline",onClick:T,className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4"}),"Exporter"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),i.jsx(xn,{className:"w-8 h-8 text-red-500"})]})})}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,"€"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),i.jsx(lm,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),i.jsx(id,{className:"w-8 h-8 text-blue-600"})]})})}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Catégories"})]}),i.jsx(mf,{className:"w-8 h-8 text-purple-600"})]})})})]}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Ir,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(we,{placeholder:"Rechercher dans vos favoris...",value:d.search,onChange:N=>h(V=>({...V,search:N.target.value})),className:"pl-10"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(dt,{value:m,onValueChange:g,children:[i.jsx(at,{className:"w-40",children:i.jsx(ht,{})}),i.jsx(ot,{children:aue.map(N=>i.jsx(ie,{value:N.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(N.icon,{className:"w-4 h-4"}),N.label]})},N.value))})]}),i.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[i.jsx($,{variant:x==="grid"?"default":"ghost",size:"icon",onClick:()=>w("grid"),className:"rounded-none",children:i.jsx(RD,{className:"w-4 h-4"})}),i.jsx($,{variant:x==="list"?"default":"ghost",size:"icon",onClick:()=>w("list"),className:"rounded-none",children:i.jsx(OD,{className:"w-4 h-4"})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(dt,{value:d.category,onValueChange:N=>h(V=>({...V,category:N})),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Catégorie"})}),i.jsx(ot,{children:fT.map(N=>i.jsx(ie,{value:N.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(N.icon,{className:"w-4 h-4"}),N.label]})},N.value))})]}),i.jsxs(dt,{value:d.transactionType,onValueChange:N=>h(V=>({...V,transactionType:N})),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Type"})}),i.jsx(ot,{children:iue.map(N=>i.jsx(ie,{value:N.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(N.icon,{className:"w-4 h-4"}),N.label]})},N.value))})]}),i.jsxs(dt,{value:d.priceRange,onValueChange:N=>h(V=>({...V,priceRange:N})),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Prix"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"all",children:"Tous les prix"}),i.jsx(ie,{value:"free",children:"Gratuit"}),i.jsx(ie,{value:"under-50",children:"Moins de 50€"}),i.jsx(ie,{value:"50-200",children:"50€ - 200€"}),i.jsx(ie,{value:"over-200",children:"Plus de 200€"})]})]}),i.jsxs(dt,{value:d.availability,onValueChange:N=>h(V=>({...V,availability:N})),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Disponibilité"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"all",children:"Toutes"}),i.jsx(ie,{value:"available",children:"Disponibles"}),i.jsx(ie,{value:"sold",children:"Vendues"}),i.jsx(ie,{value:"reserved",children:"Réservées"})]})]})]}),b.length>0&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[b.length," favori(s) sélectionné(s)"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx($,{variant:"outline",size:"sm",onClick:()=>y([]),children:"Désélectionner"}),i.jsx($,{variant:"destructive",size:"sm",onClick:D,disabled:c.removing,children:c.removing?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ia,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),i.jsx("div",{className:"space-y-4",children:c.favorites?i.jsx("div",{className:`grid gap-6 ${x==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((N,V)=>i.jsxs(Q,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(J,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},V))}):P.length===0?i.jsx(Q,{children:i.jsx(J,{className:"pt-12 pb-12 text-center",children:r.length===0?i.jsxs(i.Fragment,{children:[i.jsx(xn,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'annonces à vos favoris. Explorez les annonces et cliquez sur ❤️ pour les sauvegarder !"}),i.jsx($,{asChild:!0,children:i.jsxs("a",{href:"/listings",children:[i.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):i.jsxs(i.Fragment,{children:[i.jsx(Rx,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond à vos critères de recherche. Essayez de modifier vos filtres."}),i.jsx($,{variant:"outline",onClick:()=>h({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Réinitialiser les filtres"})]})})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("p",{className:"text-muted-foreground",children:[P.length," favori(s) trouvé(s)",P.length!==r.length&&` sur ${r.length}`]}),i.jsx($,{variant:"outline",size:"sm",onClick:()=>{b.length===P.length?y([]):y(P.map(N=>N.id))},children:b.length===P.length?"Désélectionner tout":"Sélectionner tout"})]}),x==="grid"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(N=>{const V=s.find(U=>U.id===N.listingId);return i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute top-2 left-2 z-10",children:i.jsx("input",{type:"checkbox",checked:b.includes(N.id),onChange:U=>{U.target.checked?y(H=>[...H,N.id]):y(H=>H.filter(F=>F!==N.id))},className:"w-4 h-4 rounded border-border bg-background"})}),i.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx($,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>C(N.id),children:i.jsx(ia,{className:"w-4 h-4"})})}),V?i.jsx(bf,{listing:V}):i.jsxs(Q,{children:[i.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Th,{className:"w-8 h-8 mx-auto mb-2"}),i.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),i.jsxs(J,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold mb-2",children:N.listingTitle}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:A(N.listingPrice,N.listingTransactionType)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajouté ",S(N.createdAt)]})]})]})]},N.id)})}):i.jsx("div",{className:"space-y-4",children:P.map(N=>{var U;const V=s.find(H=>H.id===N.listingId);return i.jsx(Q,{className:"hover:shadow-md transition-shadow",children:i.jsx(J,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("input",{type:"checkbox",checked:b.includes(N.id),onChange:H=>{H.target.checked?y(F=>[...F,N.id]):y(F=>F.filter(L=>L!==N.id))},className:"w-4 h-4 rounded border-border"}),i.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:N.listingImage?i.jsx("img",{src:N.listingImage,alt:N.listingTitle,className:"w-full h-full object-cover rounded-lg"}):i.jsx(Jt,{className:"w-8 h-8 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold truncate",children:N.listingTitle}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("span",{className:"font-semibold text-primary",children:A(N.listingPrice,N.listingTransactionType)}),(V==null?void 0:V.status)&&i.jsx(Ie,{variant:V.status==="active"?"default":"secondary",children:V.status==="active"?"Disponible":V.status==="sold"?"Vendu":"Réservé"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(on,{className:"w-3 h-3"}),N.sellerName]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Br,{className:"w-3 h-3"}),N.sellerUniversity]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(mf,{className:"w-3 h-3"}),(U=fT.find(H=>H.value===N.listingCategory))==null?void 0:U.label]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajouté ",S(N.createdAt)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs($,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${N.listingId}`,"_blank"),children:[i.jsx(Dn,{className:"w-3 h-3 mr-1"}),"Voir"]}),i.jsx($,{variant:"ghost",size:"sm",onClick:()=>C(N.id),className:"text-destructive hover:text-destructive",children:i.jsx(ia,{className:"w-3 h-3"})})]})]})]})]})})},N.id)})})]})})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx(xn,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),i.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces préférées et retrouvez-les facilement"})]})})})},Z0=({request:t,userRole:e,onStatusUpdate:r})=>{const{updatePaymentStatus:n,getPaymentInstructions:s}=sy(),a=x=>{switch(x){case"pending":return ur;case"confirmed":return yt;case"completed":return yt;case"cancelled":return Pu;case"disputed":return dr;default:return ur}},o=x=>{switch(x){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},l=x=>{switch(x){case"pending":return"En attente";case"confirmed":return"Confirmé";case"completed":return"Terminé";case"cancelled":return"Annulé";case"disputed":return"Litige";default:return x}},c=x=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[x]||x,u=(x,w)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:w||"EUR"}).format(x),d=(x,w)=>{navigator.clipboard.writeText(x),ne.success(`${w} copié dans le presse-papiers`)},h=async x=>{try{await n(t.id,x),r==null||r(x)}catch(w){console.error("Erreur lors de la mise à jour du statut:",w)}},m=a(t.status),g=s(t.paymentMethod,t);return i.jsxs(Q,{className:"w-full",children:[i.jsx(Pe,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(gr,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{children:[i.jsxs(Re,{className:"text-lg",children:["Paiement ",c(t.paymentMethod)]}),i.jsxs(lt,{children:[u(t.amount,t.currency)," • ",e==="buyer"?"Achat":"Vente"]})]})]}),i.jsxs(Ie,{className:o(t.status),children:[i.jsx(m,{className:"w-3 h-3 mr-1"}),l(t.status)]})]})}),i.jsxs(J,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Créé le :"}),i.jsx("p",{className:"font-medium",children:Ar(t.createdAt,"PPP à HH:mm",{locale:nn})})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Dernière mise à jour :"}),i.jsx("p",{className:"font-medium",children:Ar(t.updatedAt,"PPP à HH:mm",{locale:nn})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[i.jsx(Br,{className:"w-4 h-4"}),"Détails de la rencontre"]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),i.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),i.jsx("p",{className:"font-medium",children:Ar(t.meetingDateTime,"PPP à HH:mm",{locale:nn})})]})]})]}),t.securityCode&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[i.jsx(Et,{className:"w-4 h-4"}),"Code de sécurité"]}),i.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[i.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),i.jsx($,{variant:"ghost",size:"icon",onClick:()=>d(t.securityCode,"Code de sécurité"),children:i.jsx(AD,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&g.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:i.jsx("ul",{className:"space-y-1 text-sm",children:g.map((x,w)=>i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-blue-600 mt-0.5",children:"•"}),i.jsx("span",{children:x})]},w))})})]}),t.notes&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Notes"}),i.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),i.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsxs($,{onClick:()=>h("confirmed"),className:"flex-1",children:[i.jsx(yt,{className:"w-4 h-4 mr-2"}),"Accepter"]}),i.jsxs($,{variant:"outline",onClick:()=>h("cancelled"),className:"flex-1",children:[i.jsx(Pu,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&i.jsxs($,{onClick:()=>h("completed"),className:"flex-1",children:[i.jsx(yt,{className:"w-4 h-4 mr-2"}),"Marquer comme payé"]}),e==="seller"&&t.status==="confirmed"&&i.jsxs($,{onClick:()=>h("completed"),className:"flex-1",children:[i.jsx(yt,{className:"w-4 h-4 mr-2"}),"Confirmer la réception"]}),(t.status==="pending"||t.status==="confirmed")&&i.jsxs($,{variant:"outline",onClick:()=>h("disputed"),className:"text-blue-600 hover:text-blue-700",children:[i.jsx(dr,{className:"w-4 h-4 mr-2"}),"Signaler un problème"]})]}),t.status==="pending"&&e==="buyer"&&i.jsxs(kt,{children:[i.jsx(ur,{className:"h-4 w-4"}),i.jsx(Tt,{children:"Votre demande de paiement a été envoyée au vendeur. Vous recevrez une notification dès qu'il l'aura acceptée."})]}),t.status==="confirmed"&&e==="buyer"&&i.jsxs(kt,{className:"border-green-200 bg-green-50",children:[i.jsx(yt,{className:"h-4 w-4 text-green-600"}),i.jsx(Tt,{className:"text-green-800",children:"Le vendeur a accepté votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&i.jsxs(kt,{className:"border-green-200 bg-green-50",children:[i.jsx(yt,{className:"h-4 w-4 text-green-600"}),i.jsx(Tt,{className:"text-green-800",children:"Transaction terminée avec succès ! Merci d'avoir utilisé StudyMarket."})]}),t.status==="disputed"&&i.jsxs(kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(dr,{className:"h-4 w-4 text-blue-600"}),i.jsx(Tt,{className:"text-blue-800",children:"Un litige a été signalé. Notre équipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},lue=()=>{const{currentUser:t,userProfile:e}=Zt(),{paymentRequests:r,loading:n,fetchUserPaymentRequests:s,initializePaymentMethods:a}=sy(),[o,l]=p.useState(""),[c,u]=p.useState("all"),[d,h]=p.useState("all"),[m,g]=p.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});p.useEffect(()=>{a()},[a]),p.useEffect(()=>{t&&s(t.uid)},[t,s]),p.useEffect(()=>{x()},[r]);const x=()=>{const E={},C={};let D=0;r.forEach(T=>{E[T.paymentMethod]=(E[T.paymentMethod]||0)+1,C[T.status]=(C[T.status]||0)+1,D+=T.amount}),g({totalRequests:r.length,pendingRequests:C.pending||0,completedRequests:C.completed||0,totalAmount:D,averageAmount:r.length>0?D/r.length:0,byMethod:E,byStatus:C})},w=()=>r.filter(E=>{const C=!o||E.listingId.toLowerCase().includes(o.toLowerCase())||E.id.toLowerCase().includes(o.toLowerCase()),D=c==="all"||E.status===c,T=d==="all"||E.paymentMethod===d;return C&&D&&T}),b=()=>w().filter(E=>E.buyerId===(t==null?void 0:t.uid)),y=()=>w().filter(E=>E.sellerId===(t==null?void 0:t.uid)),v=E=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(E),_=()=>{const E={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:m,payments:r.map(k=>({id:k.id,amount:k.amount,currency:k.currency,method:k.paymentMethod,status:k.status,role:k.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:k.createdAt.toISOString(),updatedAt:k.updatedAt.toISOString()}))},C=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),D=URL.createObjectURL(C),T=document.createElement("a");T.href=D,T.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,T.click(),URL.revokeObjectURL(D)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(vQ,{className:"w-8 h-8 text-primary"}),"Mes Paiements",m.totalRequests>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:m.totalRequests})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos demandes de paiement et suivez vos transactions"})]}),i.jsxs($,{variant:"outline",onClick:_,className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4"}),"Exporter"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:m.totalRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),i.jsx(gr,{className:"w-8 h-8 text-blue-600"})]})})}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:m.pendingRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),i.jsx(ur,{className:"w-8 h-8 text-blue-600"})]})})}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:m.completedRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Terminées"})]}),i.jsx(yt,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:v(m.totalAmount)}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),i.jsx(lm,{className:"w-8 h-8 text-purple-600"})]})})})]}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Ir,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(we,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:E=>l(E.target.value),className:"pl-10"})]}),i.jsxs(dt,{value:c,onValueChange:u,children:[i.jsx(at,{className:"w-40",children:i.jsx(ht,{placeholder:"Statut"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"all",children:"Tous les statuts"}),i.jsx(ie,{value:"pending",children:"En attente"}),i.jsx(ie,{value:"confirmed",children:"Confirmé"}),i.jsx(ie,{value:"completed",children:"Terminé"}),i.jsx(ie,{value:"cancelled",children:"Annulé"}),i.jsx(ie,{value:"disputed",children:"Litige"})]})]}),i.jsxs(dt,{value:d,onValueChange:h,children:[i.jsx(at,{className:"w-40",children:i.jsx(ht,{placeholder:"Méthode"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"all",children:"Toutes les méthodes"}),i.jsx(ie,{value:"cash",children:"Espèces"}),i.jsx(ie,{value:"transfer",children:"Virement"}),i.jsx(ie,{value:"paypal",children:"PayPal"}),i.jsx(ie,{value:"lydia",children:"Lydia"})]})]})]})})}),i.jsxs(uc,{defaultValue:"all",className:"space-y-4",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-3",children:[i.jsxs($t,{value:"all",className:"flex items-center gap-2",children:[i.jsx(gr,{className:"w-4 h-4"}),"Toutes",m.totalRequests>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:m.totalRequests})]}),i.jsxs($t,{value:"purchases",className:"flex items-center gap-2",children:[i.jsx(C0,{className:"w-4 h-4"}),"Mes achats",b().length>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:b().length})]}),i.jsxs($t,{value:"sales",className:"flex items-center gap-2",children:[i.jsx(E0,{className:"w-4 h-4"}),"Mes ventes",y().length>0&&i.jsx(Ie,{variant:"secondary\\",className:"ml-1",children:y().length})]})]}),i.jsx(Ut,{value:"all",className:"space-y-4",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(TD,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),i.jsx(lt,{children:"Historique complet de vos transactions"})]}),i.jsx(J,{children:n?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((E,C)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),i.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},C))}):w().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(gr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),i.jsx("p",{className:"text-muted-foreground",children:r.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond à vos critères de recherche."})]}):i.jsx("div",{className:"space-y-4",children:w().map(E=>i.jsx(Z0,{request:E,userRole:E.buyerId===t.uid?"buyer":"seller"},E.id))})})]})}),i.jsx(Ut,{value:"purchases",className:"space-y-4",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(C0,{className:"w-5 h-5"}),"Mes Achats"]}),i.jsx(lt,{children:"Demandes de paiement que vous avez initiées"})]}),i.jsx(J,{children:b().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(C0,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),i.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initié de demandes de paiement pour vos achats."})]}):i.jsx("div",{className:"space-y-4",children:b().map(E=>i.jsx(Z0,{request:E,userRole:"buyer"},E.id))})})]})}),i.jsx(Ut,{value:"sales",className:"space-y-4",children:i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(E0,{className:"w-5 h-5"}),"Mes Ventes"]}),i.jsx(lt,{children:"Demandes de paiement reçues pour vos annonces"})]}),i.jsx(J,{children:y().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(E0,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),i.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reçu de demandes de paiement pour vos annonces."})]}):i.jsx("div",{className:"space-y-4",children:y().map(E=>i.jsx(Z0,{request:E,userRole:"seller"},E.id))})})]})})]}),i.jsxs(kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(Et,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Tt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message privé. Utilisez uniquement les canaux sécurisés de StudyMarket pour vos transactions."]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx(gr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),i.jsx("p",{className:"text-muted-foreground",children:"Gérez vos demandes de paiement et suivez vos transactions"})]})})})};var DN="Collapsible",[cue,n6]=ls(DN),[uue,MN]=cue(DN),s6=p.forwardRef((t,e)=>{const{__scopeCollapsible:r,open:n,defaultOpen:s,disabled:a,onOpenChange:o,...l}=t,[c=!1,u]=is({prop:n,defaultProp:s,onChange:o});return i.jsx(uue,{scope:r,disabled:a,contentId:ts(),open:c,onOpenToggle:p.useCallback(()=>u(d=>!d),[u]),children:i.jsx(De.div,{"data-state":LN(c),"data-disabled":a?"":void 0,...l,ref:e})})});s6.displayName=DN;var i6="CollapsibleTrigger",a6=p.forwardRef((t,e)=>{const{__scopeCollapsible:r,...n}=t,s=MN(i6,r);return i.jsx(De.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":LN(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:e,onClick:pe(t.onClick,s.onOpenToggle)})});a6.displayName=i6;var ON="CollapsibleContent",o6=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=MN(ON,t.__scopeCollapsible);return i.jsx(Kr,{present:r||s.open,children:({present:a})=>i.jsx(due,{...n,ref:e,present:a})})});o6.displayName=ON;var due=p.forwardRef((t,e)=>{const{__scopeCollapsible:r,present:n,children:s,...a}=t,o=MN(ON,r),[l,c]=p.useState(n),u=p.useRef(null),d=Je(e,u),h=p.useRef(0),m=h.current,g=p.useRef(0),x=g.current,w=o.open||l,b=p.useRef(w),y=p.useRef();return p.useEffect(()=>{const v=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(v)},[]),Rr(()=>{const v=u.current;if(v){y.current=y.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const _=v.getBoundingClientRect();h.current=_.height,g.current=_.width,b.current||(v.style.transitionDuration=y.current.transitionDuration,v.style.animationName=y.current.animationName),c(n)}},[o.open,n]),i.jsx(De.div,{"data-state":LN(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!w,...a,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...t.style},children:w&&s})});function LN(t){return t?"open":"closed"}var hue=s6,fue=a6,mue=o6,Ca="Accordion",pue=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[VN,gue,vue]=cm(Ca),[cy,ame]=ls(Ca,[vue,n6]),FN=n6(),l6=Ce.forwardRef((t,e)=>{const{type:r,...n}=t,s=n,a=n;return i.jsx(VN.Provider,{scope:t.__scopeAccordion,children:r==="multiple"?i.jsx(bue,{...a,ref:e}):i.jsx(wue,{...s,ref:e})})});l6.displayName=Ca;var[c6,xue]=cy(Ca),[u6,yue]=cy(Ca,{collapsible:!1}),wue=Ce.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},collapsible:a=!1,...o}=t,[l,c]=is({prop:r,defaultProp:n,onChange:s});return i.jsx(c6,{scope:t.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:Ce.useCallback(()=>a&&c(""),[a,c]),children:i.jsx(u6,{scope:t.__scopeAccordion,collapsible:a,children:i.jsx(d6,{...o,ref:e})})})}),bue=Ce.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},...a}=t,[o=[],l]=is({prop:r,defaultProp:n,onChange:s}),c=Ce.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=Ce.useCallback(d=>l((h=[])=>h.filter(m=>m!==d)),[l]);return i.jsx(c6,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:i.jsx(u6,{scope:t.__scopeAccordion,collapsible:!0,children:i.jsx(d6,{...a,ref:e})})})}),[_ue,uy]=cy(Ca),d6=Ce.forwardRef((t,e)=>{const{__scopeAccordion:r,disabled:n,dir:s,orientation:a="vertical",...o}=t,l=Ce.useRef(null),c=Je(l,e),u=gue(r),h=oc(s)==="ltr",m=pe(t.onKeyDown,g=>{var k;if(!pue.includes(g.key))return;const x=g.target,w=u().filter(R=>{var S;return!((S=R.ref.current)!=null&&S.disabled)}),b=w.findIndex(R=>R.ref.current===x),y=w.length;if(b===-1)return;g.preventDefault();let v=b;const _=0,E=y-1,C=()=>{v=b+1,v>E&&(v=_)},D=()=>{v=b-1,v<_&&(v=E)};switch(g.key){case"Home":v=_;break;case"End":v=E;break;case"ArrowRight":a==="horizontal"&&(h?C():D());break;case"ArrowDown":a==="vertical"&&C();break;case"ArrowLeft":a==="horizontal"&&(h?D():C());break;case"ArrowUp":a==="vertical"&&D();break}const T=v%y;(k=w[T].ref.current)==null||k.focus()});return i.jsx(_ue,{scope:r,disabled:n,direction:s,orientation:a,children:i.jsx(VN.Slot,{scope:r,children:i.jsx(De.div,{...o,"data-orientation":a,ref:c,onKeyDown:n?void 0:m})})})}),Dv="AccordionItem",[jue,$N]=cy(Dv),h6=Ce.forwardRef((t,e)=>{const{__scopeAccordion:r,value:n,...s}=t,a=uy(Dv,r),o=xue(Dv,r),l=FN(r),c=ts(),u=n&&o.value.includes(n)||!1,d=a.disabled||t.disabled;return i.jsx(jue,{scope:r,open:u,disabled:d,triggerId:c,children:i.jsx(hue,{"data-orientation":a.orientation,"data-state":x6(u),...l,...s,ref:e,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(n):o.onItemClose(n)}})})});h6.displayName=Dv;var f6="AccordionHeader",m6=Ce.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,s=uy(Ca,r),a=$N(f6,r);return i.jsx(De.h3,{"data-orientation":s.orientation,"data-state":x6(a.open),"data-disabled":a.disabled?"":void 0,...n,ref:e})});m6.displayName=f6;var l_="AccordionTrigger",p6=Ce.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,s=uy(Ca,r),a=$N(l_,r),o=yue(l_,r),l=FN(r);return i.jsx(VN.ItemSlot,{scope:r,children:i.jsx(fue,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:a.triggerId,...l,...n,ref:e})})});p6.displayName=l_;var g6="AccordionContent",v6=Ce.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,s=uy(Ca,r),a=$N(g6,r),o=FN(r);return i.jsx(mue,{role:"region","aria-labelledby":a.triggerId,"data-orientation":s.orientation,...o,...n,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});v6.displayName=g6;function x6(t){return t?"open":"closed"}var Nue=l6,Sue=h6,Eue=m6,y6=p6,w6=v6;const Cue=Nue,b6=p.forwardRef(({className:t,...e},r)=>i.jsx(Sue,{ref:r,className:Le("border-b",t),...e}));b6.displayName="AccordionItem";const _6=p.forwardRef(({className:t,children:e,...r},n)=>i.jsx(Eue,{className:"flex",children:i.jsxs(y6,{ref:n,className:Le("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...r,children:[e,i.jsx(_O,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));_6.displayName=y6.displayName;const j6=p.forwardRef(({className:t,children:e,...r},n)=>i.jsx(w6,{ref:n,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:i.jsx("div",{className:Le("pb-4 pt-0",t),children:e})}));j6.displayName=w6.displayName;const mT=[{category:"Compte et Inscription",icon:sd,questions:[{question:"Comment créer un compte étudiant vérifié ?",answer:'Pour créer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre système vérifie automatiquement votre statut étudiant. Vous recevrez un badge "Étudiant certifié" une fois la vérification terminée.'},{question:"Pourquoi mon université n'est pas reconnue ?",answer:"Nous ajoutons régulièrement de nouvelles universités. Si la vôtre n'apparaît pas, contactez-nous avec votre carte étudiante et nous l'ajouterons rapidement à notre base de données."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, université, et préférences de notification. Certaines informations nécessitent une re-vérification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autorisé. Cela garantit la confiance et la sécurité de notre communauté étudiante."}]},{category:"Achats et Ventes",icon:gr,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description détaillée, prix et lieu de rencontre. Votre annonce sera visible immédiatement après publication.'},{question:"Quels modes de paiement sont acceptés ?",answer:"Nous recommandons les paiements sécurisés : espèces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. Évitez les paiements à distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggère une fourchette de prix basée sur l'état et la catégorie. Consultez les annonces similaires et considérez l'état réel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se présente pas ?",answer:"Contactez-le via notre messagerie. Si pas de réponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au sérieux."}]},{category:"Sécurité et Confiance",icon:Et,questions:[{question:"Comment éviter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothèque). Vérifiez l'identité avec la carte étudiante. Ne payez jamais à l'avance sans avoir vu l'objet. Utilisez notre système de signalement en cas de doute."},{question:"Où se rencontrer en sécurité ?",answer:`Privilégiez les lieux publics de votre campus : bibliothèques, halls d'entrée, cafétérias. Évitez les parkings isolés ou les domiciles privés. Certaines universités ont des "zones d'échange sécurisées".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Décrivez précisément le problème. Notre équipe examine tous les signalements sous 24h et prend les mesures appropriées.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de résolution, utilisez notre service de médiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:zt,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rédigez un message poli et précis. Le vendeur recevra une notification email et pourra vous répondre via notre messagerie sécurisée.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reçoivent des notifications email mais peuvent avoir des délais de réponse. Soyez patient (24-48h). Si pas de réponse, l'annonce est peut-être déjà vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnées ?",answer:"Oui, mais seulement après les premiers échanges via notre messagerie. Cela nous permet de garder une trace en cas de problème et de vous protéger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez débloquer depuis vos paramètres si nécessaire.`}]},{category:"Impact Écologique",icon:xn,questions:[{question:"Comment est calculé mon impact CO₂ ?",answer:"Chaque objet acheté d'occasion évite la production d'un neuf. Nous calculons le CO₂ économisé selon des données ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges écologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1ère transaction), "Éco-Warrior" (10kg CO₂), "Héros Climatique" (100kg CO₂). Ils apparaissent sur votre profil et motivent la communauté.'},{question:"Comment améliorer mon rang écologique ?",answer:"Multipliez les transactions d'occasion, privilégiez les dons (bonus +20%), participez aux échanges. Plus vous économisez de CO₂, plus votre rang augmente : Débutant → Éco-Warrior → Maître Environnemental → Légende Écologique."}]},{category:"Technique et Bugs",icon:Dx,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vérifiez votre connexion internet. Si le problème persiste, contactez-nous avec votre navigateur et système d'exploitation."},{question:"Je ne reçois pas les notifications email",answer:'Vérifiez vos spams/courriers indésirables. Ajoutez notifications@studymarket.fr à vos contacts. Vérifiez vos préférences de notification dans "Paramètres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vérifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous êtes sur mobile, autorisez l'accès à la galerie dans les paramètres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramètres" > "Compte" > "Supprimer mon compte". Cette action est irréversible et supprime toutes vos données. Vos annonces actives seront automatiquement retirées.'}]}],kue=[{title:"Chat en direct",description:"Réponse immédiate pendant les heures ouvrables",icon:zt,action:"Démarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Réponse sous 24h maximum",icon:an,action:"support@studymarket.fr",available:!0,hours:"24h/7j"},{title:"Téléphone",description:"Pour les urgences uniquement",icon:nd,action:"01 23 45 67 89",available:!1,hours:"Bientôt disponible"},{title:"Centre de ressources",description:"Guides détaillés et tutoriels",icon:CD,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],Tue=[{title:"Guide du vendeur débutant",description:"Tout savoir pour vendre efficacement",icon:to,duration:"5 min",type:"Article"},{title:"Sécurité : éviter les arnaques",description:"Reconnaître et éviter les situations dangereuses",icon:Et,duration:"3 min",type:"Vidéo"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:id,duration:"7 min",type:"Article"},{title:"Impact écologique expliqué",description:"Comment nous calculons votre empreinte carbone",icon:xn,duration:"4 min",type:"Infographie"}],Iue=()=>{const{currentUser:t,userProfile:e}=Zt(),[r,n]=p.useState(""),[s,a]=p.useState("all"),[o,l]=p.useState({subject:"",category:"",message:"",priority:"normal"}),[c,u]=p.useState(!1),d=mT.filter(m=>{if(s!=="all"&&m.category!==s)return!1;if(r){const g=r.toLowerCase();return m.questions.some(x=>x.question.toLowerCase().includes(g)||x.answer.toLowerCase().includes(g))}return!0}),h=async m=>{if(m.preventDefault(),!o.subject||!o.message){ne.error("Veuillez remplir tous les champs obligatoires");return}u(!0);try{await new Promise(g=>setTimeout(g,1e3)),ne.success("Votre message a été envoyé ! Nous vous répondrons sous 24h."),l({subject:"",category:"",message:"",priority:"normal"})}catch{ne.error("Erreur lors de l'envoi. Veuillez réessayer.")}finally{u(!1)}};return i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:i.jsx(av,{className:"w-6 h-6 text-white"})})}),i.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide StudyMarket"}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les réponses à vos questions ou contactez notre équipe support"})]}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[i.jsx(Ir,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),i.jsx(we,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, sécurité, notifications)",value:r,onChange:m=>n(m.target.value),className:"pl-12 h-14 text-lg"})]})})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:kue.map((m,g)=>i.jsx(Q,{className:`transition-all hover:shadow-lg ${m.available?"hover:-translate-y-1":"opacity-60"}`,children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${m.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:i.jsx(m.icon,{className:"w-6 h-6"})}),i.jsx("h3",{className:"font-semibold mb-2",children:m.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),i.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:m.hours}),i.jsx($,{variant:m.available?"default":"secondary",size:"sm",disabled:!m.available,className:"w-full",children:m.action})]})},g))}),i.jsxs(uc,{defaultValue:"faq",className:"space-y-6",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-3",children:[i.jsxs($t,{value:"faq",className:"flex items-center gap-2",children:[i.jsx(av,{className:"w-4 h-4"}),"FAQ"]}),i.jsxs($t,{value:"guides",className:"flex items-center gap-2",children:[i.jsx(CD,{className:"w-4 h-4"}),"Guides"]}),i.jsxs($t,{value:"contact",className:"flex items-center gap-2",children:[i.jsx(zt,{className:"w-4 h-4"}),"Contact"]})]}),i.jsxs(Ut,{value:"faq",className:"space-y-6",children:[i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx($,{variant:s==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catégories"}),mT.map(m=>i.jsxs($,{variant:s===m.category?"default":"outline",size:"sm",onClick:()=>a(m.category),className:"flex items-center gap-2",children:[i.jsx(m.icon,{className:"w-4 h-4"}),m.category]},m.category))]})})}),d.length===0?i.jsx(Q,{children:i.jsxs(J,{className:"pt-12 pb-12 text-center",children:[i.jsx(Ir,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat trouvé"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-clés ou contactez notre support"}),i.jsx($,{variant:"outline",onClick:()=>n(""),children:"Effacer la recherche"})]})}):i.jsx("div",{className:"space-y-6",children:d.map((m,g)=>i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(m.icon,{className:"w-5 h-5"}),m.category]})}),i.jsx(J,{children:i.jsx(Cue,{type:"single",collapsible:!0,className:"w-full",children:m.questions.map((x,w)=>i.jsxs(b6,{value:`${g}-${w}`,children:[i.jsx(_6,{className:"text-left",children:x.question}),i.jsx(j6,{className:"text-muted-foreground leading-relaxed",children:x.answer})]},w))})})]},g))})]}),i.jsxs(Ut,{value:"guides",className:"space-y-6",children:[i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(MD,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),i.jsx(lt,{children:"Apprenez à utiliser StudyMarket comme un pro avec nos guides détaillés"})]}),i.jsx(J,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Tue.map((m,g)=>i.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:i.jsx(m.icon,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h3",{className:"font-semibold",children:m.title}),i.jsx(Ie,{variant:"outline",className:"text-xs",children:m.type})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(ur,{className:"w-3 h-3"}),m.duration]}),i.jsxs($,{size:"sm",variant:"outline",children:[i.jsx(Dn,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},g))})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx(FD,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vidéo"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidéos courtes"}),i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(Dn,{className:"w-3 h-3 mr-1"}),"Voir les vidéos"]})]})}),i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx(ws,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez nos guides au format PDF"}),i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(ws,{className:"w-3 h-3 mr-1"}),"Télécharger"]})]})}),i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx(sd,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Communauté"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Échangez avec d'autres étudiants"}),i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(Dn,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),i.jsx(Ut,{value:"contact",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Bl,{className:"w-5 h-5"}),"Contactez notre équipe"]}),i.jsx(lt,{children:"Décrivez votre problème en détail pour une réponse rapide et précise"})]}),i.jsx(J,{children:i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(de,{htmlFor:"subject",children:"Sujet *"}),i.jsx(we,{id:"subject",value:o.subject,onChange:m=>l(g=>({...g,subject:m.target.value})),placeholder:"Résumez votre problème en quelques mots",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"category",children:"Catégorie"}),i.jsxs(dt,{value:o.category,onValueChange:m=>l(g=>({...g,category:m})),children:[i.jsx(at,{className:"mt-1",children:i.jsx(ht,{placeholder:"Sélectionnez une catégorie"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"account",children:"Compte et profil"}),i.jsx(ie,{value:"listing",children:"Annonces"}),i.jsx(ie,{value:"payment",children:"Paiements"}),i.jsx(ie,{value:"security",children:"Sécurité"}),i.jsx(ie,{value:"technical",children:"Problème technique"}),i.jsx(ie,{value:"other",children:"Autre"})]})]})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"priority",children:"Priorité"}),i.jsxs(dt,{value:o.priority,onValueChange:m=>l(g=>({...g,priority:m})),children:[i.jsx(at,{className:"mt-1",children:i.jsx(ht,{})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"low",children:"Basse - Question générale"}),i.jsx(ie,{value:"normal",children:"Normale - Besoin d'aide"}),i.jsx(ie,{value:"high",children:"Haute - Problème bloquant"}),i.jsx(ie,{value:"urgent",children:"Urgente - Sécurité/Arnaque"})]})]})]}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"message",children:"Message *"}),i.jsx(_s,{id:"message",value:o.message,onChange:m=>l(g=>({...g,message:m.target.value})),placeholder:"Décrivez votre problème en détail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&i.jsxs(kt,{children:[i.jsx(yt,{className:"h-4 w-4"}),i.jsxs(Tt,{children:["Nous vous répondrons à l'adresse ",i.jsx("strong",{children:t.email})]})]}),i.jsx($,{type:"submit",className:"w-full",disabled:c||!o.subject||!o.message,children:c?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Bl,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"w-5 h-5"}),"Temps de réponse"]})}),i.jsxs(J,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Questions générales"}),i.jsx(Ie,{variant:"secondary",children:"24h"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Problèmes techniques"}),i.jsx(Ie,{variant:"secondary",children:"12h"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Urgences sécurité"}),i.jsx(Ie,{className:"bg-red-500",children:"2h"})]})]})]}),i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(PD,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),i.jsxs(J,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(an,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Email direct"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"support@studymarket.fr"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zt,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Chat en direct"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ac,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Application mobile"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientôt disponible"})]})]})]})]}),i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(id,{className:"w-5 h-5"}),"État du système"]})}),i.jsxs(J,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Plateforme web"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Messagerie"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Notifications email"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),i.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),i.jsxs($,{variant:"outline",size:"sm",className:"w-full mt-3",children:[i.jsx(Dn,{className:"w-3 h-3 mr-1"}),"Page de statut complète"]})]})]})]})]})})]})]})},Aue=[{category:"Rencontres et Échanges",icon:Br,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits fréquentés : bibliothèques universitaires, halls d'entrée, cafétérias du campus.",type:"do",icon:yt},{title:"Évitez les lieux isolés",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privés ou endroits déserts.",type:"dont",icon:Pu},{title:"Prévenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontrée.",type:"do",icon:yt},{title:"Rencontrez en journée",description:"Privilégiez les rendez-vous en journée, évitez les rencontres tardives ou nocturnes.",type:"do",icon:yt}]},{category:"Vérification d'Identité",icon:VD,color:"text-green-600",tips:[{title:"Demandez la carte étudiante",description:"Vérifiez toujours l'identité avec la carte étudiante. C'est votre garantie de sécurité.",type:"do",icon:yt},{title:"Vérifiez le profil StudyMarket",description:"Consultez le profil : badge vérifié, avis, nombre de transactions, ancienneté du compte.",type:"do",icon:yt},{title:"Méfiez-vous des profils récents",description:"Soyez prudent avec les comptes créés récemment sans historique de transactions.",type:"dont",icon:dr},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos échanges via notre messagerie sécurisée.",type:"do",icon:yt}]},{category:"Paiements Sécurisés",icon:gr,color:"text-purple-600",tips:[{title:"Payez à la remise",description:"Ne payez qu'après avoir inspecté l'objet et lors de la remise en main propre.",type:"do",icon:yt},{title:"Évitez les paiements à l'avance",description:"Ne versez jamais d'acompte ou de paiement intégral avant d'avoir vu l'objet.",type:"dont",icon:Pu},{title:"Utilisez des moyens traçables",description:"Privilégiez Lydia, PayPal, virements ou espèces. Évitez les cryptomonnaies.",type:"do",icon:yt},{title:"Méfiez-vous des prix trop bas",description:"Un iPhone à 50€ ou un MacBook à 200€ sont probablement des arnaques.",type:"dont",icon:dr}]},{category:"Communication",icon:zt,color:"text-blue-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos échanges, même en cas de désaccord.",type:"do",icon:yt},{title:"Posez des questions précises",description:"Demandez des détails sur l'état, l'âge, la raison de la vente, les défauts éventuels.",type:"do",icon:yt},{title:"Méfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernière chance") sont suspects.',type:"dont",icon:dr},{title:"Gardez les preuves",description:"Conservez les captures d'écran des conversations en cas de litige.",type:"do",icon:yt}]}],Pue=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:dr},{title:"Paiement demandé à l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:gr},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:Br},{title:"Photos de mauvaise qualité",description:"Images floues, prises sur internet ou très peu nombreuses",severity:"medium",icon:wl},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte récent",severity:"medium",icon:sd},{title:"Communication étrange",description:"Français approximatif, réponses évasives, pression temporelle",severity:"medium",icon:zt},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:ur},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres données sensibles",severity:"high",icon:zl}],Rue=[{title:"Urgence immédiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:nd,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des règles",contact:`Bouton "Signaler" dans l'app`,icon:ml,color:"text-blue-600"},{title:"Support StudyMarket",description:"Questions, aide, médiation de conflit",contact:"support@studymarket.fr",icon:zt,color:"text-blue-600"},{title:"Sécurité Campus",description:"Incidents sur le campus universitaire",contact:"Service sécurité de votre université",icon:Et,color:"text-green-600"}],Due=()=>i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:i.jsx(Et,{className:"w-6 h-6 text-white"})})}),i.jsx("h1",{className:"text-4xl font-bold",children:"Sécurité & Conseils"}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre sécurité est notre priorité. Suivez ces conseils pour des échanges sereins et sécurisés entre étudiants."})]}),i.jsxs(kt,{className:"border-green-200 bg-green-50",children:[i.jsx(Et,{className:"h-4 w-4 text-green-600"}),i.jsx(Tt,{className:"text-green-800",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vérifiez l'identité avec la carte étudiante."]}),i.jsxs($,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[i.jsx(ws,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Et,{className:"w-6 h-6 text-green-600"})}),i.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions sécurisées"})]})}),i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(VD,{className:"w-6 h-6 text-blue-600"})}),i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants vérifiés"})]})}),i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(ur,{className:"w-6 h-6 text-purple-600"})}),i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Réponse aux signalements"})]})}),i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(to,{className:"w-6 h-6 text-blue-600"})}),i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"4.9/5"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction sécurité"})]})})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Sécurité Complet"}),i.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des échanges en toute sécurité"})]}),Aue.map((t,e)=>i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),i.jsx(J,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((r,n)=>i.jsx("div",{className:`p-4 rounded-lg border-2 ${r.type==="do"?"border-green-200 bg-green-50":r.type==="dont"?"border-red-200 bg-red-50":"border-blue-200 bg-blue-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(r.icon,{className:`w-5 h-5 mt-0.5 ${r.type==="do"?"text-green-600":r.type==="dont"?"text-red-600":"text-blue-600"}`}),i.jsxs("div",{children:[i.jsx("h4",{className:`font-semibold mb-2 ${r.type==="do"?"text-green-800":r.type==="dont"?"text-red-800":"text-blue-800"}`,children:r.title}),i.jsx("p",{className:`text-sm ${r.type==="do"?"text-green-700":r.type==="dont"?"text-red-700":"text-blue-700"}`,children:r.description})]})]})},n))})})]},e))]}),i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(dr,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme à Reconnaître"]}),i.jsx(lt,{children:"Ces comportements doivent vous alerter et vous inciter à la prudence"})]}),i.jsx(J,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Pue.map((t,e)=>i.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-blue-200 bg-blue-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-blue-600"}`}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-blue-800"}`,children:t.title}),i.jsx(Ie,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),i.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-blue-700"}`,children:t.description})]})]})},e))})})]}),i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(nd,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),i.jsx(lt,{children:"En cas de problème, voici qui contacter selon la situation"})]}),i.jsx(J,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Rue.map((t,e)=>i.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-blue-600"||t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:i.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold mb-1",children:t.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),i.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx(nQ,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez notre guide de sécurité complet"}),i.jsxs($,{variant:"outline",className:"w-full",children:[i.jsx(ws,{className:"w-4 h-4 mr-2"}),"Télécharger"]})]})}),i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx(av,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions fréquentes sur la sécurité"}),i.jsx($,{variant:"outline",className:"w-full",asChild:!0,children:i.jsxs(ye,{to:"/help",children:[i.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),i.jsx(Q,{children:i.jsxs(J,{className:"pt-6 text-center",children:[i.jsx(zt,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problème"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre équipe de sécurité"}),i.jsxs($,{variant:"outline",className:"w-full",children:[i.jsx(ml,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),i.jsxs(kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(MD,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Tt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hésitez pas à annuler la transaction. Votre sécurité vaut plus que n'importe quel objet. L'équipe StudyMarket est là pour vous aider 24h/7j."]})]})]});function Mue(t,e){return p.useReducer((r,n)=>e[r][n]??r,t)}var UN="ScrollArea",[N6,ome]=ls(UN),[Oue,Ts]=N6(UN),S6=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:a=600,...o}=t,[l,c]=p.useState(null),[u,d]=p.useState(null),[h,m]=p.useState(null),[g,x]=p.useState(null),[w,b]=p.useState(null),[y,v]=p.useState(0),[_,E]=p.useState(0),[C,D]=p.useState(!1),[T,k]=p.useState(!1),R=Je(e,A=>c(A)),S=oc(s);return i.jsx(Oue,{scope:r,type:n,dir:S,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:x,scrollbarXEnabled:C,onScrollbarXEnabledChange:D,scrollbarY:w,onScrollbarYChange:b,scrollbarYEnabled:T,onScrollbarYEnabledChange:k,onCornerWidthChange:v,onCornerHeightChange:E,children:i.jsx(De.div,{dir:S,...o,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});S6.displayName=UN;var E6="ScrollAreaViewport",C6=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,asChild:s,nonce:a,...o}=t,l=Ts(E6,r),c=p.useRef(null),u=Je(e,c,l.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),i.jsx(De.div,{"data-radix-scroll-area-viewport":"",...o,asChild:s,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:Hue({asChild:s,children:n},d=>i.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:d}))})]})});C6.displayName=E6;var Mi="ScrollAreaScrollbar",zN=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Ts(Mi,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(Lue,{...n,ref:e,forceMount:r}):s.type==="scroll"?i.jsx(Vue,{...n,ref:e,forceMount:r}):s.type==="auto"?i.jsx(k6,{...n,ref:e,forceMount:r}):s.type==="always"?i.jsx(BN,{...n,ref:e}):null});zN.displayName=Mi;var Lue=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Ts(Mi,t.__scopeScrollArea),[a,o]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Kr,{present:r||a,children:i.jsx(k6,{"data-state":a?"visible":"hidden",...n,ref:e})})}),Vue=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Ts(Mi,t.__scopeScrollArea),a=t.orientation==="horizontal",o=hy(()=>c("SCROLL_END"),100),[l,c]=Mue("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),p.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const g=u[d];h!==g&&(c("SCROLL"),o()),h=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,a,c,o]),i.jsx(Kr,{present:r||l!=="hidden",children:i.jsx(BN,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:pe(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:pe(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),k6=p.forwardRef((t,e)=>{const r=Ts(Mi,t.__scopeScrollArea),{forceMount:n,...s}=t,[a,o]=p.useState(!1),l=t.orientation==="horizontal",c=hy(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Wu(r.viewport,c),Wu(r.content,c),i.jsx(Kr,{present:n||a,children:i.jsx(BN,{"data-state":a?"visible":"hidden",...s,ref:e})})}),BN=p.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,s=Ts(Mi,t.__scopeScrollArea),a=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=R6(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,g){return que(m,o.current,l,g)}return r==="horizontal"?i.jsx(Fue,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,g=pT(m,l,s.dir);a.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):r==="vertical"?i.jsx($ue,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,g=pT(m,l);a.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),Fue=p.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,a=Ts(Mi,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Je(e,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(I6,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":dy(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const m=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),M6(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ov(o.paddingLeft),paddingEnd:Ov(o.paddingRight)}})}})}),$ue=p.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,a=Ts(Mi,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Je(e,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(I6,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":dy(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const m=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),M6(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ov(o.paddingTop),paddingEnd:Ov(o.paddingBottom)}})}})}),[Uue,T6]=N6(Mi),I6=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=t,g=Ts(Mi,r),[x,w]=p.useState(null),b=Je(e,R=>w(R)),y=p.useRef(null),v=p.useRef(""),_=g.viewport,E=n.content-n.viewport,C=_r(d),D=_r(c),T=hy(h,10);function k(R){if(y.current){const S=R.clientX-y.current.left,A=R.clientY-y.current.top;u({x:S,y:A})}}return p.useEffect(()=>{const R=S=>{const A=S.target;(x==null?void 0:x.contains(A))&&C(S,E)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[_,x,E,C]),p.useEffect(D,[n,D]),Wu(x,T),Wu(g.content,T),i.jsx(Uue,{scope:r,scrollbar:x,hasThumb:s,onThumbChange:_r(a),onThumbPointerUp:_r(o),onThumbPositionChange:D,onThumbPointerDown:_r(l),children:i.jsx(De.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:pe(t.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),y.current=x.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),k(R))}),onPointerMove:pe(t.onPointerMove,k),onPointerUp:pe(t.onPointerUp,R=>{const S=R.target;S.hasPointerCapture(R.pointerId)&&S.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=v.current,g.viewport&&(g.viewport.style.scrollBehavior=""),y.current=null})})})}),Mv="ScrollAreaThumb",A6=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=T6(Mv,t.__scopeScrollArea);return i.jsx(Kr,{present:r||s.hasThumb,children:i.jsx(zue,{ref:e,...n})})}),zue=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...s}=t,a=Ts(Mv,r),o=T6(Mv,r),{onThumbPositionChange:l}=o,c=Je(e,h=>o.onThumbChange(h)),u=p.useRef(),d=hy(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const h=a.viewport;if(h){const m=()=>{if(d(),!u.current){const g=Wue(h,l);u.current=g,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[a.viewport,d,l]),i.jsx(De.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:pe(t.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),x=h.clientX-g.left,w=h.clientY-g.top;o.onThumbPointerDown({x,y:w})}),onPointerUp:pe(t.onPointerUp,o.onThumbPointerUp)})});A6.displayName=Mv;var qN="ScrollAreaCorner",P6=p.forwardRef((t,e)=>{const r=Ts(qN,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?i.jsx(Bue,{...t,ref:e}):null});P6.displayName=qN;var Bue=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,s=Ts(qN,r),[a,o]=p.useState(0),[l,c]=p.useState(0),u=!!(a&&l);return Wu(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Wu(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?i.jsx(De.div,{...n,ref:e,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Ov(t){return t?parseInt(t,10):0}function R6(t,e){const r=t/e;return isNaN(r)?0:r}function dy(t){const e=R6(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function que(t,e,r,n="ltr"){const s=dy(r),a=s/2,o=e||a,l=s-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return D6([c,u],h)(t)}function pT(t,e,r="ltr"){const n=dy(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,o=e.content-e.viewport,l=a-n,c=r==="ltr"?[0,o]:[o*-1,0],u=_f(t,c);return D6([0,o],[0,l])(u)}function D6(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function M6(t,e){return t>0&&t<e}var Wue=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const a={left:t.scrollLeft,top:t.scrollTop},o=r.left!==a.left,l=r.top!==a.top;(o||l)&&e(),r=a,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function hy(t,e){const r=_r(t),n=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),p.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Wu(t,e){const r=_r(e);Rr(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}function Hue(t,e){const{asChild:r,children:n}=t;if(!r)return typeof e=="function"?e(n):e;const s=p.Children.only(n);return p.cloneElement(s,{children:typeof e=="function"?e(s.props.children):e})}var O6=S6,Gue=C6,Kue=P6;const WN=p.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(O6,{ref:n,className:Le("relative overflow-hidden",t),...r,children:[i.jsx(Gue,{className:"h-full w-full rounded-[inherit]",children:e}),i.jsx(L6,{}),i.jsx(Kue,{})]}));WN.displayName=O6.displayName;const L6=p.forwardRef(({className:t,orientation:e="vertical",...r},n)=>i.jsx(zN,{ref:n,orientation:e,className:Le("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:i.jsx(A6,{className:"relative flex-1 rounded-full bg-border"})}));L6.displayName=zN.displayName;const gT=({conversations:t,loading:e,searchQuery:r,setSearchQuery:n,currentConversation:s,currentUser:a,onSelectConversation:o})=>{const l=t.filter(d=>{const h=d.participants.find(g=>g!==(a==null?void 0:a.uid)),m=h?d.participantDetails[h]:null;return(m==null?void 0:m.name.toLowerCase().includes(r.toLowerCase()))||d.listingTitle.toLowerCase().includes(r.toLowerCase())}),c=d=>d===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d),u=d=>{const h=d.participants.find(m=>m!==(a==null?void 0:a.uid));return h?d.participantDetails[h]:null};return i.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[i.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"w-5 h-5 text-primary"}),i.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:i.jsx(Rx,{className:"w-4 h-4"})}),i.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:i.jsx(jD,{className:"w-4 h-4"})}),i.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramètres",children:i.jsx(Dx,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Ir,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(we,{placeholder:"Rechercher conversations...",value:r,onChange:d=>n(d.target.value),className:"pl-9 h-9 text-sm"})]})]}),i.jsx(WN,{className:"flex-1",children:e?i.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((d,h)=>i.jsx("div",{className:"animate-pulse",children:i.jsxs("div",{className:"flex items-center gap-2 p-2",children:[i.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:i.jsx(on,{className:"w-5 h-5 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 space-y-1",children:[i.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},h))}):l.length===0?i.jsxs("div",{className:"p-6 text-center",children:[i.jsx(zt,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),i.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:r?i.jsxs(i.Fragment,{children:[i.jsx(Ir,{className:"w-3 h-3 inline mr-1"}),'Aucun résultat pour "',r,'"']}):i.jsxs(i.Fragment,{children:[i.jsx(an,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparaîtront ici"]})})]}):i.jsx("div",{className:"p-1",children:l.map(d=>{var x,w;const h=u(d),m=d.unreadCount[a==null?void 0:a.uid]||0,g=(s==null?void 0:s.id)===d.id;return i.jsx("div",{onClick:()=>o(d),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${g?"bg-accent":""}`,children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsxs(Jn,{className:"w-10 h-10",children:[i.jsx(ba,{src:h==null?void 0:h.avatar}),i.jsx(Pn,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((w=(x=h==null?void 0:h.name)==null?void 0:x[0])==null?void 0:w.toUpperCase())||i.jsx(on,{className:"w-4 h-4"})})]}),(h==null?void 0:h.verified)&&i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx(Et,{className:"w-1.5 h-1.5 text-white"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[i.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[i.jsx(on,{className:"w-3 h-3 text-muted-foreground"}),(h==null?void 0:h.name)||"Utilisateur"]}),i.jsxs("div",{className:"flex items-center gap-1",children:[d.lastMessage&&i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(ur,{className:"w-3 h-3"}),fd(d.lastMessage.sentAt,{addSuffix:!0,locale:nn})]}),m>0&&i.jsx(Ie,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})]}),i.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[d.listingImage?i.jsx("img",{src:d.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):i.jsx(DD,{className:"w-3 h-3 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:d.listingTitle}),i.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[d.listingPrice===0?i.jsx(xn,{className:"w-3 h-3 text-green-600"}):i.jsx("span",{children:"€"}),c(d.listingPrice)]})]}),d.lastMessage&&i.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[d.lastMessage.senderId===(a==null?void 0:a.uid)?i.jsx(Bl,{className:"w-3 h-3"}):i.jsx(zt,{className:"w-3 h-3"}),d.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",d.lastMessage.text]})]})]})},d.id)})})})]})},vT=({conversation:t,messages:e,loading:r,currentUser:n,onBack:s})=>{var z,X;const{sendMessage:a,markMessagesAsSeen:o,blockUser:l,reportUser:c,deleteConversation:u}=Jx(),[d,h]=p.useState(""),[m,g]=p.useState(40),[x,w]=p.useState(!1),[b,y]=p.useState(!1),[v,_]=p.useState(""),[E,C]=p.useState(""),D=p.useRef(null),T=p.useRef(null),k=()=>{var oe;(oe=T.current)==null||oe.scrollIntoView({behavior:"smooth"})},R=p.useCallback(()=>{const oe=D.current;if(!oe)return;oe.style.height="auto";const Se=Math.max(40,Math.min(oe.scrollHeight,120));g(Se)},[]),S=p.useCallback(oe=>{const Se=oe.target.value;h(Se),w(!!Se.trim()),setTimeout(R,0)},[R]),A=async()=>{if(!d.trim()||!t||!n)return;const oe=d.trim();h(""),w(!1),g(40),await a(t.id,oe,n.uid,n.displayName||"Utilisateur",n.photoURL)},P=oe=>{oe.key==="Enter"&&!oe.shiftKey&&(oe.preventDefault(),A())},N=async()=>{!t||!n||await l(t.id,n.uid)},V=async()=>{if(!t||!n||!v.trim())return;const oe=t.participants.find(Se=>Se!==n.uid);oe&&(await c(t.id,n.uid,oe,v,E),y(!1),_(""),C(""))},U=async()=>{!t||!n||(await u(t.id,n.uid),s())};if(p.useEffect(()=>{t&&n&&o(t.id,n.uid)},[t,n,o]),p.useEffect(k,[e]),!t)return i.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zt,{className:"w-8 h-8 text-white"})}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sélectionnez une conversation"}),i.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[i.jsx(Ir,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer à discuter"]})]})});const H=t.participants.find(oe=>oe!==(n==null?void 0:n.uid)),F=H?t.participantDetails[H]:null,L=oe=>{const Se=new Date,Ze=new Date(oe);return Ze.toDateString()===Se.toDateString()?Ze.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((Se.getTime()-Ze.getTime())/(1e3*60*60*24))<7?Ze.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):Ze.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},W=oe=>oe.senderId!==(n==null?void 0:n.uid)?null:oe.seen?i.jsx(JY,{className:"w-3 h-3 text-blue-500"}):i.jsx(ID,{className:"w-3 h-3 text-muted-foreground"});return i.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[i.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx($,{variant:"ghost",size:"icon",onClick:s,className:"lg:hidden h-8 w-8",children:i.jsx(sa,{className:"w-4 h-4"})}),i.jsxs(Jn,{className:"w-8 h-8",children:[i.jsx(ba,{src:F==null?void 0:F.avatar}),i.jsx(Pn,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((X=(z=F==null?void 0:F.name)==null?void 0:z[0])==null?void 0:X.toUpperCase())||i.jsx(on,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[i.jsx(on,{className:"w-3 h-3 text-muted-foreground"}),(F==null?void 0:F.name)||"Utilisateur"]}),(F==null?void 0:F.verified)&&i.jsx(Et,{className:"w-3 h-3 text-green-600"})]}),i.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[i.jsx(Br,{className:"w-3 h-3"}),F==null?void 0:F.university]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:i.jsx(nd,{className:"w-4 h-4"})}),i.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vidéo",children:i.jsx(FD,{className:"w-4 h-4"})}),i.jsxs(qb,{children:[i.jsx(Wb,{asChild:!0,children:i.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",children:i.jsx(ZY,{className:"w-4 h-4"})})}),i.jsxs(fv,{align:"end",children:[i.jsx(Ct,{asChild:!0,children:i.jsxs(ye,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[i.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),i.jsxs(Ct,{children:[i.jsx(to,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),i.jsxs(Ct,{children:[i.jsx(qY,{className:"w-4 h-4 mr-2"}),"Archiver"]}),i.jsx(ds,{}),i.jsxs(Ct,{onClick:()=>y(!0),children:[i.jsx(ml,{className:"w-4 h-4 mr-2"}),"Signaler"]}),i.jsxs(Ct,{onClick:N,children:[i.jsx(KY,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),i.jsxs(Ct,{onClick:U,className:"text-destructive",children:[i.jsx(ia,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),i.jsx(Q,{className:"mt-2",children:i.jsx(J,{className:"p-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?i.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):i.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:i.jsx(DD,{className:"w-4 h-4 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[i.jsx(Pj,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),i.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?i.jsxs(i.Fragment,{children:[i.jsx(xn,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-xs",children:"€"}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),i.jsx($,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:i.jsxs(ye,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[i.jsx(Dn,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[i.jsx(WN,{className:"flex-1 p-3",children:i.jsxs("div",{className:"space-y-3",children:[r?i.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((oe,Se)=>i.jsx("div",{className:"animate-pulse",children:i.jsx("div",{className:`flex ${Se%2===0?"justify-start":"justify-end"}`,children:i.jsxs("div",{className:"max-w-xs",children:[i.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),i.jsx("div",{className:"h-8 bg-muted rounded"})]})})},Se))}):e.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zt,{className:"w-6 h-6 text-white"})}),i.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[i.jsx(Bl,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(oe=>{const Se=oe.senderId===(n==null?void 0:n.uid);return i.jsx("div",{className:`flex ${Se?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${Se?"order-2":"order-1"}`,children:[i.jsx("div",{className:`rounded-2xl px-4 py-2 ${Se?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:i.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:oe.text})}),i.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${Se?"justify-end":"justify-start"}`,children:[i.jsx(ur,{className:"w-3 h-3"}),i.jsx("span",{children:L(oe.sentAt)}),W(oe)]})]})},oe.id)}),i.jsx("div",{ref:T})]})}),i.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[i.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[i.jsx(_s,{ref:D,value:d,placeholder:"Tapez votre message...",onChange:S,onKeyDown:P,rows:1,style:{height:m,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),i.jsx($,{onClick:A,disabled:!d.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:i.jsx(Bl,{className:"h-3.5 w-3.5"})})]}),x&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[i.jsx(zt,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),i.jsx(aa,{open:b,onOpenChange:y,children:i.jsxs(Ni,{children:[i.jsx(oa,{children:i.jsxs(Si,{className:"flex items-center gap-2",children:[i.jsx(ml,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs(de,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[i.jsx(dr,{className:"w-4 h-4"}),"Motif du signalement"]}),i.jsxs(dt,{value:v,onValueChange:_,children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Sélectionnez un motif"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"spam",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(an,{className:"w-4 h-4"}),"Spam"]})}),i.jsx(ie,{value:"harassment",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(dr,{className:"w-4 h-4"}),"Harcèlement"]})}),i.jsx(ie,{value:"inappropriate",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ml,{className:"w-4 h-4"}),"Contenu inapproprié"]})}),i.jsx(ie,{value:"scam",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(dr,{className:"w-4 h-4"}),"Arnaque"]})}),i.jsx(ie,{value:"other",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_o,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),i.jsxs("div",{children:[i.jsxs(de,{htmlFor:"report-description",className:"flex items-center gap-2",children:[i.jsx(zt,{className:"w-4 h-4"}),"Description (optionnel)"]}),i.jsx(_s,{id:"report-description",value:E,onChange:oe=>C(oe.target.value),placeholder:"Décrivez le problème...",rows:3})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx($,{variant:"outline",onClick:()=>y(!1),children:"Annuler"}),i.jsxs($,{onClick:V,disabled:!v,className:"bg-red-500 hover:bg-red-600",children:[i.jsx(ml,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},Yue=()=>{const{currentUser:t,userProfile:e}=Zt(),{conversations:r,currentConversation:n,messages:s,loading:a,fetchConversations:o,fetchMessages:l,setCurrentConversation:c,cleanup:u}=Jx(),[d,h]=p.useState(""),[m,g]=p.useState(!1);p.useEffect(()=>(t&&o(t.uid),()=>{u()}),[t,o,u]),p.useEffect(()=>{n&&l(n.id)},[n,l]);const x=b=>{c(b),g(!0)},w=()=>{g(!1),c(null)};return t?i.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[i.jsx("div",{className:"lg:hidden w-full h-full",children:m?i.jsx(vT,{conversation:n,messages:s,loading:a,currentUser:t,onBack:w}):i.jsx(gT,{conversations:r,loading:a,searchQuery:d,setSearchQuery:h,currentConversation:n,setCurrentConversation:c,currentUser:t,onSelectConversation:x})}),i.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[i.jsx(gT,{conversations:r,loading:a,searchQuery:d,setSearchQuery:h,currentConversation:n,setCurrentConversation:c,currentUser:t,onSelectConversation:x}),i.jsx(vT,{conversation:n,messages:s,loading:a,currentUser:t,onBack:w})]})]}):i.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zt,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accéder à vos messages"}),i.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[i.jsx(on,{className:"w-4 h-4"}),"Vous devez être connecté pour voir et envoyer des messages."]}),i.jsx($,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:i.jsxs(ye,{to:"/auth?mode=signin",className:"flex items-center gap-2",children:[i.jsx(on,{className:"w-4 h-4"}),"Se connecter"]})})]})},Que=Fe.object({email:Fe.string().email("Email invalide"),password:Fe.string().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),Jue=Fe.object({firstName:Fe.string().min(2,"Le prénom doit contenir au moins 2 caractères"),lastName:Fe.string().min(2,"Le nom doit contenir au moins 2 caractères"),displayName:Fe.string().optional(),email:Fe.string().email("Email invalide").refine(t=>["univ-","edu","gmail.com","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(r=>t.includes(r)),"Vous devez utiliser une adresse email universitaire"),university:Fe.string().min(1,"Veuillez sélectionner votre université"),otherUniversity:Fe.string().optional(),fieldOfStudy:Fe.string().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:Fe.string().optional(),graduationYear:Fe.string().min(1,"Veuillez indiquer votre année de diplôme"),password:Fe.string().min(6,"Le mot de passe doit contenir au moins 6 caractères"),confirmPassword:Fe.string()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),Xue=Fe.object({university:Fe.string().min(1,"Veuillez sélectionner votre université"),otherUniversity:Fe.string().optional(),fieldOfStudy:Fe.string().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:Fe.string().optional(),graduationYear:Fe.string().min(1,"Veuillez indiquer votre année de diplôme"),displayName:Fe.string().min(2,"Le nom doit contenir au moins 2 caractères")}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),xT=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris 3 Sorbonne","Université Paris Cité","Sciences Po Paris","Autre université"],yT=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],Zue=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(r=>t.includes(r)),ede=()=>{var A,P;const{currentUser:t,signIn:e,signInWithGoogle:r}=Zt(),[n]=nx(),[s,a]=p.useState(()=>n.get("mode")==="signup"),[o,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[m,g]=p.useState(""),[x,w]=p.useState(""),[b,y]=p.useState(!1),[v,_]=p.useState(null),E=Dr(),C=jl({resolver:Nl(Que),defaultValues:{email:"",password:""}}),D=jl({resolver:Nl(Jue),defaultValues:{firstName:"",lastName:"",displayName:"",email:"",university:"",otherUniversity:"",fieldOfStudy:"",otherFieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),T=jl({resolver:Nl(Xue),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}});if(p.useEffect(()=>{const N=n.get("mode");a(N==="signup")},[n]),p.useEffect(()=>{(async()=>{if(!t){y(!1),_(null);return}try{const V=await Zn(Ke(ve,"users",t.uid));if(V.exists()){const U=V.data();try{const F=localStorage.getItem("pendingUserData"),L=localStorage.getItem("pendingUserEmail");if(F&&L===t.email&&t.emailVerified){const W=JSON.parse(F),z=Object.fromEntries(Object.entries(W).filter(([,X])=>X!==void 0));await xl(Ke(ve,"users",t.uid),{...z,emailVerified:!0,profileCompleted:!0},{merge:!0}),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload();return}}catch(F){console.error("Error merging pending data into existing profile:",F)}!(t.emailVerified||t.providerData.some(F=>F.providerId==="google.com"))&&!U.emailVerified&&(w(t.email||""),h(!0)),y(!1)}else{if(t.providerData.some(F=>F.providerId==="google.com")){if(!Zue(t.email||"")){g("Vous devez utiliser une adresse email universitaire"),ms.signOut();return}_({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),y(!0);return}const U=localStorage.getItem("pendingUserData"),H=localStorage.getItem("pendingUserEmail");if(U&&H===t.email&&t.emailVerified)try{const F=JSON.parse(U),L=Object.fromEntries(Object.entries(F).filter(([,W])=>W!==void 0));await xl(Ke(ve,"users",t.uid),{...L,emailVerified:!0,profileCompleted:!0}),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}catch(F){console.error("Error saving pending user data:",F),g("Erreur lors de la sauvegarde du profil")}else U&&H===t.email&&!t.emailVerified&&(w(t.email||""),h(!0),y(!1))}}catch(V){console.error("Error checking user profile:",V),y(!1)}})()},[t]),p.useEffect(()=>{let N=null;return d&&t&&!t.emailVerified&&(N=setInterval(async()=>{try{await db(t),t.emailVerified&&(h(!1),w(""),g(""),window.location.reload())}catch(V){console.error("Error checking email verification:",V)}},5e3)),()=>{N&&clearInterval(N)}},[d,t]),b&&v)return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:i.jsxs(Q,{className:"w-full max-w-md",children:[i.jsxs(Pe,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:i.jsx(Qk,{className:"w-6 h-6 text-green-600"})})}),i.jsx(Re,{className:"text-2xl text-green-600",children:"Complétez votre profil étudiant"}),i.jsx(lt,{children:"Dernière étape pour accéder à StudyMarket"})]}),i.jsxs(J,{className:"space-y-4",children:[i.jsxs(kt,{children:[i.jsx(Qk,{className:"h-4 w-4"}),i.jsxs(Tt,{children:["Connecté avec ",i.jsx("strong",{children:v.email})]})]}),m&&i.jsxs(kt,{variant:"destructive",children:[i.jsx(Th,{className:"h-4 w-4"}),i.jsx(Tt,{children:m})]}),i.jsxs("form",{onSubmit:T.handleSubmit(async N=>{u(!0),g("");try{const V=N.university==="Autre université"?N.otherUniversity:N.university,U=N.fieldOfStudy==="Autre"?N.otherFieldOfStudy:N.fieldOfStudy,H=Object.fromEntries(Object.entries(N).filter(([,F])=>F!==void 0));if(await xl(Ke(ve,"users",v.uid),{email:v.email,displayName:H.displayName,photoURL:v.photoURL,university:V,otherUniversity:N.university==="Autre université"?N.otherUniversity:null,fieldOfStudy:U,otherFieldOfStudy:N.fieldOfStudy==="Autre"?N.otherFieldOfStudy:null,graduationYear:parseInt(N.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),t&&v.displayName)try{await rf(t,{displayName:H.displayName})}catch(F){console.error("Error updating profile:",F)}window.location.reload()}catch(V){console.error("Error completing profile:",V),g("Erreur lors de la sauvegarde du profil")}finally{u(!1)}}),className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(de,{htmlFor:"university",children:"Université"}),i.jsxs(dt,{onValueChange:N=>T.setValue("university",N),value:T.watch("university"),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Sélectionnez votre université"})}),i.jsx(ot,{children:xT.map(N=>i.jsx(ie,{value:N,children:N},N))})]}),T.watch("university")==="Autre université"&&i.jsx(we,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...T.register("otherUniversity"),className:"mt-2"}),T.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.university.message}),T.watch("university")==="Autre université"&&T.formState.errors.otherUniversity&&i.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.otherUniversity.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(de,{htmlFor:"fieldOfStudy",children:"Filière"}),i.jsxs(dt,{onValueChange:N=>T.setValue("fieldOfStudy",N),value:T.watch("fieldOfStudy"),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Filière"})}),i.jsx(ot,{children:yT.map(N=>i.jsx(ie,{value:N,children:N},N))})]}),T.watch("fieldOfStudy")==="Autre"&&i.jsx(we,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...T.register("otherFieldOfStudy"),className:"mt-2"}),T.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.fieldOfStudy.message}),T.watch("fieldOfStudy")==="Autre"&&T.formState.errors.otherFieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.otherFieldOfStudy.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(de,{htmlFor:"graduationYear",children:"Année de diplôme"}),i.jsxs(dt,{onValueChange:N=>T.setValue("graduationYear",N),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Année"})}),i.jsx(ot,{children:Array.from({length:8},(N,V)=>2024+V).map(N=>i.jsx(ie,{value:N.toString(),children:N},N))})]}),T.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive",children:T.formState.errors.graduationYear.message})]})]}),i.jsxs($,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:c,children:[c?i.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),i.jsx($,{variant:"outline",onClick:()=>{ms.signOut(),y(!1),_(null)},className:"w-full",children:"Se déconnecter et recommencer"})]})]})});if(d)return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:i.jsxs(Q,{className:"w-full max-w-md",children:[i.jsxs(Pe,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(an,{className:"w-6 h-6 text-blue-600"})})}),i.jsx(Re,{className:"text-2xl text-blue-600",children:"Vérifiez votre email"}),i.jsxs(lt,{children:["Un lien d'activation a été envoyé à ",i.jsx("strong",{children:x}),".",i.jsx("br",{}),"Cliquez sur le lien pour activer votre compte.",i.jsx("br",{}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"(Vous pouvez fermer cette page et revenir après avoir validé l'email)"})]})]}),i.jsxs(J,{className:"space-y-4",children:[i.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[i.jsx("p",{children:i.jsx("strong",{children:"Important :"})}),i.jsx("p",{children:"• Cliquez sur le lien dans l'email pour activer votre compte"}),i.jsx("p",{children:"• Vérifiez votre boîte de réception et vos spams"}),i.jsx("p",{children:"• Le lien expire dans 24h"})]}),i.jsxs($,{onClick:async()=>{if(t){u(!0);try{await AC(t,qk.actionCodeSettings),g(""),alert("Email d'activation renvoyé !")}catch(N){g("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",N)}u(!1)}},variant:"outline",className:"w-full",disabled:c||!t,children:[c?i.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(an,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),i.jsx($,{onClick:async()=>{if(t){u(!0);try{await db(t),t.emailVerified?(h(!1),w(""),g(""),window.location.reload()):g("L'email n'est pas encore validé. Pensez à vérifier vos spams.")}catch{g("Erreur lors de la vérification de l'état de l'email")}u(!1)}},variant:"secondary",className:"w-full",disabled:c||!t,children:"J'ai déjà validé mon email"}),m&&i.jsxs(kt,{variant:"destructive",children:[i.jsx(Th,{className:"h-4 w-4"}),i.jsx(Tt,{children:m})]}),i.jsx($,{variant:"link",onClick:()=>{h(!1),w(""),g(""),t&&ms.signOut()},className:"w-full",children:"Retour à l'inscription"})]})]})});const k=async N=>{u(!0),g("");try{await e(N.email,N.password),E("/")}catch(V){const U=V instanceof Error?V.message:"Erreur inconnue",H=V==null?void 0:V.code;g(H==="auth/invalid-credential"?"Email ou mot de passe incorrect":H==="auth/user-not-found"?"Aucun compte trouvé avec cet email":H==="auth/user-disabled"?"Ce compte a été désactivé":H==="auth/too-many-requests"?"Trop de tentatives. Réessayez plus tard.":"Erreur de connexion: "+U),console.error("Sign in error:",V)}finally{u(!1)}},R=async N=>{u(!0),g("");try{const{firstName:V,lastName:U}=N,H=`${V} ${U}`,L=(await KP(ms,N.email,N.password)).user;await AC(L,qk.actionCodeSettings);const W=N.university==="Autre université"?N.otherUniversity:N.university,z=N.fieldOfStudy==="Autre"?N.otherFieldOfStudy:N.fieldOfStudy,X={firstName:V,lastName:U,displayName:H,university:W,otherUniversity:N.university==="Autre université"?N.otherUniversity:null,fieldOfStudy:z,otherFieldOfStudy:N.fieldOfStudy==="Autre"?N.otherFieldOfStudy:null,graduationYear:parseInt(N.graduationYear),email:N.email,createdAt:new Date().toISOString(),emailVerified:!1,isStudent:!0,provider:"email"};localStorage.setItem("pendingUserData",JSON.stringify(X)),localStorage.setItem("pendingUserEmail",N.email),L&&await rf(L,{displayName:H}),w(N.email),h(!0)}catch(V){const U=V==null?void 0:V.code;g(U==="auth/email-already-in-use"?"Cette adresse email est déjà utilisée":U==="auth/weak-password"?"Le mot de passe est trop faible":U==="auth/invalid-email"?"Adresse email invalide":"Erreur lors de la création du compte"),console.error("Sign up error:",V)}finally{u(!1)}},S=async()=>{u(!0),g("");try{await r()}catch(N){const V=N instanceof Error?N.message:"Erreur inconnue",U=N==null?void 0:N.code;g(U==="auth/popup-closed-by-user"?"Connexion annulée":U==="auth/popup-blocked"?"Popup bloquée par le navigateur":U==="auth/account-exists-with-different-credential"?"Un compte existe déjà avec cet email":"Erreur de connexion avec Google: "+V),console.error("Google sign in error:",N)}finally{u(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-2 sm:px-4 py-4 sm:py-8 bg-gradient-to-br from-primary/5 via-background to-secondary/5",children:i.jsxs(Q,{className:"w-full max-w-md sm:max-w-lg lg:max-w-xl mx-auto",children:[i.jsxs(Pe,{className:"text-center space-y-2 sm:space-y-4",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:i.jsx(ji,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),i.jsx(Re,{className:"text-xl sm:text-2xl lg:text-3xl",children:s?"Rejoindre StudyMarket":"Connectez-vous à votre compte étudiant"}),i.jsx(lt,{className:"text-sm sm:text-base",children:s?"Créez votre compte étudiant vérifié et rejoignez la communauté":"Connectez-vous à votre compte étudiant"}),s&&i.jsx("div",{className:"flex items-center justify-center gap-2 mt-2 sm:mt-4",children:i.jsxs(Ie,{className:"bg-blue-100 text-blue-800 border-blue-200 text-xs sm:text-sm",children:[i.jsx(Et,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),i.jsxs(J,{className:"space-y-4 sm:space-y-6",children:[m&&i.jsxs(kt,{variant:"destructive",children:[i.jsx(Th,{className:"h-4 w-4"}),i.jsx(Tt,{children:m})]}),i.jsxs($,{variant:"outline",className:"w-full",onClick:S,disabled:c,children:[c?i.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),i.jsx("span",{className:"hidden sm:inline",children:"Continuer avec Google Éducation"}),i.jsx("span",{className:"sm:hidden",children:"Google Éducation"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx(ps,{className:"w-full"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),i.jsxs("form",{onSubmit:s?D.handleSubmit(R):C.handleSubmit(k),className:"space-y-4",children:[s&&i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(de,{htmlFor:"firstName",className:"text-sm",children:"Prénom"}),i.jsx(we,{id:"firstName",...D.register("firstName"),autoComplete:"given-name",className:"text-sm"}),D.formState.errors.firstName&&i.jsx("span",{className:"text-red-500 text-xs",children:D.formState.errors.firstName.message})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx(de,{htmlFor:"lastName",className:"text-sm",children:"Nom"}),i.jsx(we,{id:"lastName",...D.register("lastName"),autoComplete:"family-name",className:"text-sm"}),D.formState.errors.lastName&&i.jsx("span",{className:"text-red-500 text-xs",children:D.formState.errors.lastName.message})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(de,{htmlFor:"email",className:"text-sm",children:"Email universitaire"}),i.jsxs("div",{className:"relative",children:[i.jsx(an,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(we,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10 text-sm",...s?D.register("email"):C.register("email")})]}),(s?D.formState.errors.email:C.formState.errors.email)&&i.jsx("p",{className:"text-sm text-destructive",children:(A=s?D.formState.errors.email:C.formState.errors.email)==null?void 0:A.message}),s&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoyé à cette adresse"})]}),s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(de,{htmlFor:"university",className:"text-sm",children:"Université"}),i.jsxs(dt,{onValueChange:N=>D.setValue("university",N),value:D.watch("university"),children:[i.jsx(at,{className:"text-sm",children:i.jsx(ht,{placeholder:"Sélectionnez votre université"})}),i.jsx(ot,{children:xT.map(N=>i.jsx(ie,{value:N,children:N},N))})]}),D.watch("university")==="Autre université"&&i.jsx(we,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...D.register("otherUniversity"),className:"mt-2 text-sm"}),D.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.university.message}),D.watch("university")==="Autre université"&&D.formState.errors.otherUniversity&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.otherUniversity.message})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(de,{htmlFor:"fieldOfStudy",className:"text-sm",children:"Filière"}),i.jsxs(dt,{onValueChange:N=>D.setValue("fieldOfStudy",N),value:D.watch("fieldOfStudy"),children:[i.jsx(at,{className:"text-sm",children:i.jsx(ht,{placeholder:"Sélectionnez votre filière"})}),i.jsx(ot,{children:yT.map(N=>i.jsx(ie,{value:N,children:N},N))})]}),D.watch("fieldOfStudy")==="Autre"&&i.jsx(we,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...D.register("otherFieldOfStudy"),className:"mt-2 text-sm"}),D.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.fieldOfStudy.message}),D.watch("fieldOfStudy")==="Autre"&&D.formState.errors.otherFieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.otherFieldOfStudy.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(de,{htmlFor:"graduationYear",className:"text-sm",children:"Année de diplôme"}),i.jsxs(dt,{onValueChange:N=>D.setValue("graduationYear",N),value:D.watch("graduationYear"),children:[i.jsx(at,{className:"text-sm",children:i.jsx(ht,{placeholder:"Sélectionnez votre année"})}),i.jsx(ot,{children:Array.from({length:8},(N,V)=>2024+V).map(N=>i.jsx(ie,{value:N.toString(),children:N},N))})]}),D.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.graduationYear.message})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(de,{htmlFor:"password",className:"text-sm",children:"Mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(we,{id:"password",type:o?"text":"password",placeholder:"••••••••",className:"pl-10 text-sm",...s?D.register("password"):C.register("password")}),i.jsx($,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?i.jsx(eQ,{className:"w-4 h-4"}):i.jsx(Ru,{className:"w-4 h-4"})})]}),(s?D.formState.errors.password:C.formState.errors.password)&&i.jsx("p",{className:"text-sm text-destructive",children:(P=s?D.formState.errors.password:C.formState.errors.password)==null?void 0:P.message})]}),s&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(de,{htmlFor:"confirmPassword",className:"text-sm",children:"Confirmer le mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(we,{id:"confirmPassword",type:o?"text":"password",placeholder:"••••••••",className:"pl-10 text-sm",...D.register("confirmPassword")})]}),D.formState.errors.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.confirmPassword.message})]}),i.jsxs($,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-sm sm:text-base",disabled:c,children:[c?i.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}):null,s?"Créer le compte et envoyer l'email":"Se connecter"]})]}),i.jsx("div",{className:"w-full",children:i.jsx($,{variant:"link",onClick:()=>a(!s),disabled:c,className:"w-full flex justify-center items-center text-center break-words px-1 text-sm sm:text-base",children:s?"Déjà un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})}),s&&i.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En créant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptées."})]})]})})},Ps=({children:t})=>{const{currentUser:e}=Zt(),r=Oo();return e?i.jsx(i.Fragment,{children:t}):i.jsx(J8,{to:"/auth\\",state:{from:r},replace:!0})},V6=({cart:t,total:e,showCheckoutButton:r=!0})=>{const n=Dr(),s=e,a=0,o=0,l=s+a-o,c=u=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(u);return i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(jo,{className:"w-5 h-5"}),"Récapitulatif de commande"]})}),i.jsx(J,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["Articles (",t.reduce((u,d)=>u+d.quantity,0),")"]}),i.jsx("span",{children:c(s)})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx(Mx,{className:"w-4 h-4"}),"Livraison"]}),i.jsx("span",{className:"text-green-600 font-medium",children:"Gratuite"})]}),o>0,i.jsx(ps,{}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Total"}),i.jsx("span",{className:"font-bold text-lg",children:c(l)})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"* TVA incluse"}),r&&i.jsxs($,{onClick:()=>n("/checkout"),className:"w-full mt-4 bg-gradient-to-r from-primary to-secondary",disabled:t.length===0,children:[i.jsx(gr,{className:"mr-2 h-4 w-4"}),"Procéder au paiement",i.jsx(mi,{className:"ml-2 h-4 w-4"})]})]})})]})},tde=()=>{const{currentUser:t}=Zt(),{cart:e,updateQuantity:r,removeFromCart:n,clearCart:s,cartTotal:a}=dd(),o=Dr(),[l,c]=p.useState(""),[u,d]=p.useState(!1),h=(x,w)=>{if(!(w<1)){if(w>10){ne.error("Maximum 10 articles par produit");return}r(x,w)}},m=x=>{n(x),ne.success("Article retiré du panier")},g=()=>{l.trim()&&(d(!0),setTimeout(()=>{l.toLowerCase()==="etudiant10"?ne.success("Code promo appliqué : 10% de réduction"):ne.error("Code promo invalide ou expiré"),d(!1)},1e3))};return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs($,{variant:"ghost",onClick:()=>o(-1),className:"-ml-4",children:[i.jsx(sa,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(jo,{className:"w-8 h-8"}),"Mon Panier"]}),e.length>0&&i.jsxs($,{variant:"outline",onClick:s,className:"text-destructive hover:text-destructive",children:[i.jsx(ia,{className:"w-4 h-4 mr-2"}),"Vider le panier"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(jo,{className:"w-8 h-8 text-muted-foreground"})}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre panier est vide"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'articles à votre panier."}),i.jsx($,{asChild:!0,children:i.jsxs(ye,{to:"/products",children:[i.jsx(_l,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center justify-between",children:[i.jsxs("span",{children:["Articles (",e.reduce((x,w)=>x+w.quantity,0),")"]}),i.jsxs($,{variant:"ghost",size:"sm",onClick:()=>o("/products"),children:[i.jsx(_l,{className:"w-4 h-4 mr-2"}),"Continuer mes achats"]})]})}),i.jsx(J,{children:i.jsx("div",{className:"space-y-4",children:e.map(x=>i.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-20 h-20 object-cover rounded"}):i.jsx("div",{className:"w-20 h-20 bg-muted rounded flex items-center justify-center",children:i.jsx(_l,{className:"w-8 h-8 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:x.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:x.seller}),i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx($,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-r-none",onClick:()=>h(x.id,x.quantity-1),disabled:x.quantity<=1,children:i.jsx(LD,{className:"h-3 w-3"})}),i.jsx(we,{type:"number",value:x.quantity,onChange:w=>{const b=parseInt(w.target.value);isNaN(b)||h(x.id,b)},className:"h-8 w-12 rounded-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),i.jsx($,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-l-none",onClick:()=>h(x.id,x.quantity+1),disabled:x.quantity>=10,children:i.jsx(bl,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(x.price*x.quantity)}),i.jsxs($,{variant:"ghost",size:"sm",onClick:()=>m(x.id),className:"text-destructive hover:text-destructive mt-2",children:[i.jsx(ia,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})]},x.id))})})]}),i.jsx(Q,{className:"mt-6",children:i.jsxs(J,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(mf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(we,{placeholder:"Code promo",value:l,onChange:x=>c(x.target.value),className:"pl-10"})]}),i.jsx($,{onClick:g,disabled:!l.trim()||u,children:u?i.jsxs(i.Fragment,{children:[i.jsx(va,{className:"w-4 h-4 mr-2 animate-spin"}),"Application..."]}):"Appliquer"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Essayez le code "ETUDIANT10" pour 10% de réduction'})]})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(V6,{cart:e,total:a,showCheckoutButton:!0}),!t&&i.jsxs(kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(dr,{className:"h-4 w-4 text-blue-600"}),i.jsx(Tt,{className:"text-blue-800",children:"Vous devez être connecté pour finaliser votre commande."})]})]})]})]})},Tp=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},HN=ud((t,e)=>({orders:[],loading:!1,fetchUserOrders:async r=>{if(r)try{t({loading:!0});const n=Mt(bt(ve,"orders"),Vt("userId","==",r),ys(100)),s=await Kt(n),a=[];s.forEach(o=>{const l=o.data();a.push({id:o.id,...l,createdAt:Tp(l.createdAt),updatedAt:Tp(l.updatedAt)})}),a.sort((o,l)=>l.createdAt.getTime()-o.createdAt.getTime()),t({orders:a,loading:!1})}catch(n){console.error("Error fetching orders:",n),ne.error("Erreur lors du chargement des commandes"),t({loading:!1})}},getOrderById:async r=>{try{const n=await Zn(Ke(ve,"orders",r));if(n.exists()){const s=n.data();return{id:n.id,...s,createdAt:Tp(s.createdAt),updatedAt:Tp(s.updatedAt)}}return null}catch(n){return console.error("Error getting order:",n),ne.error("Erreur lors du chargement de la commande"),null}},createOrder:async r=>{try{const n=Math.random().toString(36).substring(2,8).toUpperCase(),s={...r,securityCode:n,createdAt:or(),updatedAt:or()},a=await Ll(bt(ve,"orders"),s),o={id:a.id,...r,createdAt:new Date,updatedAt:new Date};return t(l=>({orders:[o,...l.orders]})),ne.success("Commande créée avec succès !"),a.id}catch(n){throw console.error("Error creating order:",n),ne.error("Erreur lors de la création de la commande"),n}},updateOrderStatus:async(r,n,s)=>{try{const a={status:n,updatedAt:or()};s&&(a.notes=s),await cr(Ke(ve,"orders",r),a),t(o=>({orders:o.orders.map(l=>l.id===r?{...l,status:n,notes:s||l.notes,updatedAt:new Date}:l)})),ne.success(`Statut de la commande mis à jour : ${n}`)}catch(a){console.error("Error updating order status:",a),ne.error("Erreur lors de la mise à jour du statut")}},cancelOrder:async(r,n)=>{try{await cr(Ke(ve,"orders",r),{status:"cancelled",notes:n,updatedAt:or()}),t(s=>({orders:s.orders.map(a=>a.id===r?{...a,status:"cancelled",notes:n,updatedAt:new Date}:a)})),ne.success("Commande annulée")}catch(s){console.error("Error cancelling order:",s),ne.error("Erreur lors de l'annulation de la commande")}}})),rde=()=>{const{currentUser:t,userProfile:e}=Zt(),r=Dr(),n=Oo(),{cart:s,cartTotal:a,clearCart:o}=dd(),{createOrder:l}=HN(),[c,u]=p.useState("shipping"),[d,h]=p.useState(!1),[m,g]=p.useState(null),[x,w]=p.useState({}),[b,y]=p.useState({fullName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:"",city:"",postalCode:"",country:"France",university:(e==null?void 0:e.university)||"",saveInfo:!0}),[v,_]=p.useState({}),[E,C]=p.useState(!1);p.useEffect(()=>{var A;s.length===0&&!((A=n.state)!=null&&A.directCheckout)&&(r("/cart"),ne.error("Votre panier est vide"))},[s,r,n]);const D=()=>{const A={};return b.fullName||(A.fullName="Nom complet requis"),b.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.email)||(A.email="Format d'email invalide"):A.email="Email requis",b.phone||(A.phone="Téléphone requis"),b.address||(A.address="Adresse requise"),b.city||(A.city="Ville requise"),b.postalCode||(A.postalCode="Code postal requis"),_(A),Object.keys(A).length===0},T=A=>{A.preventDefault(),D()&&(u("payment"),window.scrollTo(0,0))},k=(A,P)=>{g(A),w(P),A==="card"&&P.stripePaymentId&&(u("review"),window.scrollTo(0,0))},R=()=>{if(!m){ne.error("Veuillez sélectionner un mode de paiement");return}u("review"),window.scrollTo(0,0)},S=async()=>{if(!t){r("/auth");return}if(!E){ne.error("Veuillez accepter les conditions générales");return}h(!0);try{const A={userId:t.uid,items:s,total:a,shipping:b,payment:{method:m,details:x,transactionId:x.stripePaymentId},status:m==="card"?"processing":"pending"},P=await l(A);o(),r(`/order-confirmation/${P}`)}catch(A){console.error("Error placing order:",A),ne.error("Erreur lors de la création de la commande")}finally{h(!1)}};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs($,{variant:"ghost",onClick:()=>r(-1),className:"-ml-4",children:[i.jsx(sa,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Finaliser votre commande"}),i.jsxs("div",{className:"flex items-center mt-6",children:[i.jsxs("div",{className:`flex items-center ${c==="shipping"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="shipping"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),i.jsx("span",{className:"ml-2 font-medium",children:"Livraison"})]}),i.jsx(mi,{className:"mx-2 text-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${c==="payment"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="payment"||c==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),i.jsx("span",{className:"ml-2 font-medium",children:"Paiement"})]}),i.jsx(mi,{className:"mx-2 text-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${c==="review"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),i.jsx("span",{className:"ml-2 font-medium",children:"Vérification"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c==="shipping"&&i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(Mx,{className:"w-5 h-5"}),"Informations de livraison"]}),i.jsx(lt,{children:"Entrez vos coordonnées pour la livraison"})]}),i.jsx(J,{children:i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs(de,{htmlFor:"fullName",className:"flex items-center gap-1",children:[i.jsx(on,{className:"w-4 h-4"}),"Nom complet *"]}),i.jsx(we,{id:"fullName",value:b.fullName,onChange:A=>y({...b,fullName:A.target.value}),className:v.fullName?"border-red-500":""}),v.fullName&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.fullName})]}),i.jsxs("div",{children:[i.jsxs(de,{htmlFor:"email",className:"flex items-center gap-1",children:[i.jsx(an,{className:"w-4 h-4"}),"Email *"]}),i.jsx(we,{id:"email",type:"email",value:b.email,onChange:A=>y({...b,email:A.target.value}),className:v.email?"border-red-500":""}),v.email&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.email})]}),i.jsxs("div",{children:[i.jsxs(de,{htmlFor:"phone",className:"flex items-center gap-1",children:[i.jsx(nd,{className:"w-4 h-4"}),"Téléphone *"]}),i.jsx(we,{id:"phone",value:b.phone,onChange:A=>y({...b,phone:A.target.value}),className:v.phone?"border-red-500":""}),v.phone&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.phone})]}),i.jsxs("div",{children:[i.jsxs(de,{htmlFor:"university",className:"flex items-center gap-1",children:[i.jsx(Br,{className:"w-4 h-4"}),"Université"]}),i.jsx(we,{id:"university",value:b.university,onChange:A=>y({...b,university:A.target.value})})]})]}),i.jsxs("div",{children:[i.jsxs(de,{htmlFor:"address",className:"flex items-center gap-1",children:[i.jsx(Br,{className:"w-4 h-4"}),"Adresse *"]}),i.jsx(we,{id:"address",value:b.address,onChange:A=>y({...b,address:A.target.value}),className:v.address?"border-red-500":""}),v.address&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.address})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsxs(de,{htmlFor:"city",className:"flex items-center gap-1",children:[i.jsx(Br,{className:"w-4 h-4"}),"Ville *"]}),i.jsx(we,{id:"city",value:b.city,onChange:A=>y({...b,city:A.target.value}),className:v.city?"border-red-500":""}),v.city&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.city})]}),i.jsxs("div",{children:[i.jsxs(de,{htmlFor:"postalCode",className:"flex items-center gap-1",children:[i.jsx(Br,{className:"w-4 h-4"}),"Code postal *"]}),i.jsx(we,{id:"postalCode",value:b.postalCode,onChange:A=>y({...b,postalCode:A.target.value}),className:v.postalCode?"border-red-500":""}),v.postalCode&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.postalCode})]}),i.jsxs("div",{children:[i.jsxs(de,{htmlFor:"country",className:"flex items-center gap-1",children:[i.jsx(Br,{className:"w-4 h-4"}),"Pays *"]}),i.jsx(we,{id:"country",value:b.country,onChange:A=>y({...b,country:A.target.value}),disabled:!0})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[i.jsx(Av,{id:"saveInfo",checked:b.saveInfo,onCheckedChange:A=>y({...b,saveInfo:A})}),i.jsx(de,{htmlFor:"saveInfo",children:"Sauvegarder ces informations pour mes prochaines commandes"})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsxs($,{type:"submit",className:"w-full md:w-auto",children:["Continuer vers le paiement",i.jsx(mi,{className:"ml-2 h-4 w-4"})]})})]})})]}),c==="payment"&&i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(gr,{className:"w-5 h-5"}),"Méthode de paiement"]}),i.jsx(lt,{children:"Choisissez votre mode de paiement préféré"})]}),i.jsx(J,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsx(WL,{amount:a,currency:"EUR",onMethodSelect:k,selectedMethod:m}),i.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[i.jsxs($,{variant:"outline",onClick:()=>u("shipping"),children:[i.jsx(sa,{className:"mr-2 h-4 w-4"}),"Retour"]}),i.jsxs($,{onClick:R,disabled:!m||m==="card"&&!x.stripePaymentId,children:["Vérifier la commande",i.jsx(mi,{className:"ml-2 h-4 w-4"})]})]})]})})]}),c==="review"&&i.jsxs(Q,{children:[i.jsxs(Pe,{children:[i.jsxs(Re,{className:"flex items-center gap-2",children:[i.jsx(yt,{className:"w-5 h-5"}),"Vérification de la commande"]}),i.jsx(lt,{children:"Vérifiez les détails de votre commande avant de confirmer"})]}),i.jsx(J,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:"Informations de livraison"}),i.jsx($,{variant:"ghost",size:"sm",onClick:()=>u("shipping"),children:"Modifier"})]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[i.jsx("p",{className:"font-medium",children:b.fullName}),i.jsx("p",{children:b.address}),i.jsxs("p",{children:[b.postalCode," ",b.city,", ",b.country]}),i.jsx("p",{children:b.email}),i.jsx("p",{children:b.phone})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:"Méthode de paiement"}),i.jsx($,{variant:"ghost",size:"sm",onClick:()=>u("payment"),children:"Modifier"})]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[i.jsxs("p",{className:"font-medium",children:[m==="card"&&"Carte bancaire",m==="paypal"&&"PayPal",m==="transfer"&&"Virement bancaire",m==="cash"&&"Paiement à la livraison",m==="lydia"&&"Lydia"]}),m==="card"&&x.stripePaymentId&&i.jsxs("p",{className:"text-green-600 text-sm",children:[i.jsx(yt,{className:"w-3 h-3 inline mr-1"}),"Paiement autorisé"]}),m==="paypal"&&x.paypalEmail&&i.jsx("p",{children:x.paypalEmail}),m==="lydia"&&x.lydiaPhone&&i.jsx("p",{children:x.lydiaPhone})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",s.length,")"]}),i.jsx("div",{className:"space-y-3",children:s.map(A=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[A.image&&i.jsx("img",{src:A.image,alt:A.name,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:A.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",A.quantity]})]}),i.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(A.price*A.quantity)})]},A.id))})]}),i.jsx("div",{className:"pt-4 border-t",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(Av,{id:"terms",checked:E,onCheckedChange:A=>C(A)}),i.jsxs("div",{children:[i.jsx(de,{htmlFor:"terms",className:"font-medium",children:"J'accepte les conditions générales de vente"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"En passant commande, vous acceptez nos conditions générales de vente et notre politique de confidentialité."})]})]})}),i.jsxs("div",{className:"flex justify-between pt-4",children:[i.jsxs($,{variant:"outline",onClick:()=>u("payment"),children:[i.jsx(sa,{className:"mr-2 h-4 w-4"}),"Retour"]}),i.jsx($,{onClick:S,disabled:d||!E,className:"bg-gradient-to-r from-primary to-secondary",children:d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):i.jsxs(i.Fragment,{children:[i.jsx(zl,{className:"mr-2 h-4 w-4"}),"Confirmer la commande"]})})]})]})})]})]}),i.jsxs("div",{children:[i.jsx(V6,{cart:s,total:a,showCheckoutButton:!1}),i.jsxs(kt,{className:"mt-4 border-blue-200 bg-blue-50",children:[i.jsx(Et,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Tt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Paiement sécurisé :"})," Toutes vos informations sont cryptées et sécurisées."]})]}),i.jsx(Q,{className:"mt-4",children:i.jsx(J,{className:"pt-6",children:i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(_o,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Besoin d'aide ?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre équipe est disponible 7j/7 pour vous aider avec votre commande."}),i.jsx($,{variant:"link",className:"p-0 h-auto text-sm",children:"Contacter le support"})]})]})})})})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(Q,{children:i.jsxs(J,{className:"pt-6",children:[i.jsx(jo,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour finaliser votre achat"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder au processus de paiement"}),i.jsx($,{onClick:()=>r("/auth"),children:"Se connecter"})]})})})},nde=()=>{const{currentUser:t}=Zt(),{orders:e,fetchUserOrders:r,loading:n}=HN(),s=Dr(),[a,o]=p.useState(""),[l,c]=p.useState("all"),[u,d]=p.useState("date-desc"),[h,m]=p.useState("all");p.useEffect(()=>{t&&r(t.uid)},[t,r]);const g=()=>e.filter(y=>{const v=!a||y.id.toLowerCase().includes(a.toLowerCase()),_=l==="all"||y.status===l;let E=!0;if(h!=="all"){const C=new Date(y.createdAt),D=new Date;if(h==="last-30-days"){const T=new Date;T.setDate(D.getDate()-30),E=C>=T}else if(h==="last-6-months"){const T=new Date;T.setMonth(D.getMonth()-6),E=C>=T}}return v&&_&&E}).sort((y,v)=>u==="date-desc"?new Date(v.createdAt).getTime()-new Date(y.createdAt).getTime():u==="date-asc"?new Date(y.createdAt).getTime()-new Date(v.createdAt).getTime():u==="total-desc"?v.total-y.total:u==="total-asc"?y.total-v.total:0),x=y=>{switch(y){case"pending":return i.jsxs(Ie,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[i.jsx(ur,{className:"w-3 h-3 mr-1"}),"En attente"]});case"processing":return i.jsxs(Ie,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[i.jsx(Jt,{className:"w-3 h-3 mr-1"}),"En traitement"]});case"shipped":return i.jsxs(Ie,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[i.jsx(Mx,{className:"w-3 h-3 mr-1"}),"Expédiée"]});case"delivered":return i.jsxs(Ie,{className:"bg-green-100 text-green-800 border-green-200",children:[i.jsx(yt,{className:"w-3 h-3 mr-1"}),"Livrée"]});case"cancelled":return i.jsxs(Ie,{className:"bg-red-100 text-red-800 border-red-200",children:[i.jsx(Pu,{className:"w-3 h-3 mr-1"}),"Annulée"]});default:return i.jsx(Ie,{children:y})}},w=y=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(y),b=()=>{const y={user:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),date:new Date().toISOString(),orders:e.map(C=>({id:C.id,date:C.createdAt,status:C.status,total:C.total,items:C.items.length}))},v=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),_=URL.createObjectURL(v),E=document.createElement("a");E.href=_,E.download=`commandes-${new Date().toISOString().slice(0,10)}.json`,E.click(),URL.revokeObjectURL(_)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Jt,{className:"w-8 h-8"}),"Mes Commandes"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Suivez et gérez toutes vos commandes"})]}),i.jsxs($,{variant:"outline",onClick:b,className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4"}),"Exporter"]})]}),i.jsx(Q,{children:i.jsx(J,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Ir,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(we,{placeholder:"Rechercher par numéro de commande...",value:a,onChange:y=>o(y.target.value),className:"pl-10"})]}),i.jsxs(dt,{value:l,onValueChange:c,children:[i.jsx(at,{className:"w-40",children:i.jsx(ht,{placeholder:"Statut"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"all",children:"Tous les statuts"}),i.jsx(ie,{value:"pending",children:"En attente"}),i.jsx(ie,{value:"processing",children:"En traitement"}),i.jsx(ie,{value:"shipped",children:"Expédiée"}),i.jsx(ie,{value:"delivered",children:"Livrée"}),i.jsx(ie,{value:"cancelled",children:"Annulée"})]})]}),i.jsxs(dt,{value:h,onValueChange:m,children:[i.jsx(at,{className:"w-40",children:i.jsx(ht,{placeholder:"Période"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"all",children:"Toutes les périodes"}),i.jsx(ie,{value:"last-30-days",children:"30 derniers jours"}),i.jsx(ie,{value:"last-6-months",children:"6 derniers mois"})]})]}),i.jsxs(dt,{value:u,onValueChange:d,children:[i.jsx(at,{className:"w-40",children:i.jsx(ht,{placeholder:"Trier par"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"date-desc",children:"Date (récent → ancien)"}),i.jsx(ie,{value:"date-asc",children:"Date (ancien → récent)"}),i.jsx(ie,{value:"total-desc",children:"Prix (élevé → bas)"}),i.jsx(ie,{value:"total-asc",children:"Prix (bas → élevé)"})]})]})]})})}),i.jsxs(uc,{defaultValue:"all",className:"space-y-4",children:[i.jsxs(Wo,{className:"grid w-full grid-cols-4",children:[i.jsx($t,{value:"all",children:"Toutes"}),i.jsx($t,{value:"active",children:"En cours"}),i.jsx($t,{value:"completed",children:"Terminées"}),i.jsx($t,{value:"cancelled",children:"Annulées"})]}),i.jsx(Ut,{value:"all",className:"space-y-4",children:n?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((y,v)=>i.jsx(Q,{className:"animate-pulse",children:i.jsxs(J,{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),i.jsx("div",{className:"h-6 bg-muted rounded w-1/6"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},v))}):g().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Jt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande trouvée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:e.length===0?"Vous n'avez pas encore passé de commande.":"Aucune commande ne correspond à vos critères de recherche."}),i.jsx($,{asChild:!0,children:i.jsxs(ye,{to:"/listings",children:[i.jsx(_l,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):i.jsx("div",{className:"space-y-4",children:g().map(y=>i.jsx(Q,{className:"hover:shadow-md transition-shadow",children:i.jsxs(J,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",y.id.slice(0,8)]}),x(y.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(Us,{className:"w-3 h-3"}),Ar(new Date(y.createdAt),"dd MMMM yyyy",{locale:nn})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:w(y.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.items.length," article",y.items.length>1?"s":""]})]}),i.jsx($,{asChild:!0,children:i.jsxs(ye,{to:`/order/${y.id}`,children:["Détails",i.jsx(mi,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[y.items.slice(0,4).map((v,_)=>i.jsx("div",{className:"flex-shrink-0",children:v.image?i.jsx("img",{src:v.image,alt:v.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Jt,{className:"w-6 h-6 text-muted-foreground"})})},_)),y.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",y.items.length-4]})})]})]})},y.id))})}),i.jsx(Ut,{value:"active",className:"space-y-4",children:g().filter(y=>["pending","processing","shipped"].includes(y.status)).length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ur,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande en cours"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes en cours de traitement."})]}):i.jsx("div",{className:"space-y-4",children:g().filter(y=>["pending","processing","shipped"].includes(y.status)).map(y=>i.jsx(Q,{className:"hover:shadow-md transition-shadow",children:i.jsxs(J,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",y.id.slice(0,8)]}),x(y.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(Us,{className:"w-3 h-3"}),Ar(new Date(y.createdAt),"dd MMMM yyyy",{locale:nn})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:w(y.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.items.length," article",y.items.length>1?"s":""]})]}),i.jsx($,{asChild:!0,children:i.jsxs(ye,{to:`/order/${y.id}`,children:["Détails",i.jsx(mi,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[y.items.slice(0,4).map((v,_)=>i.jsx("div",{className:"flex-shrink-0",children:v.image?i.jsx("img",{src:v.image,alt:v.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Jt,{className:"w-6 h-6 text-muted-foreground"})})},_)),y.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",y.items.length-4]})})]})]})},y.id))})}),i.jsx(Ut,{value:"completed",className:"space-y-4",children:g().filter(y=>y.status==="delivered").length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(yt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande terminée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore de commandes livrées."})]}):i.jsx("div",{className:"space-y-4",children:g().filter(y=>y.status==="delivered").map(y=>i.jsx(Q,{className:"hover:shadow-md transition-shadow",children:i.jsxs(J,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",y.id.slice(0,8)]}),x(y.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(Us,{className:"w-3 h-3"}),Ar(new Date(y.createdAt),"dd MMMM yyyy",{locale:nn})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:w(y.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.items.length," article",y.items.length>1?"s":""]})]}),i.jsx($,{asChild:!0,children:i.jsxs(ye,{to:`/order/${y.id}`,children:["Détails",i.jsx(mi,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[y.items.slice(0,4).map((v,_)=>i.jsx("div",{className:"flex-shrink-0",children:v.image?i.jsx("img",{src:v.image,alt:v.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Jt,{className:"w-6 h-6 text-muted-foreground"})})},_)),y.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",y.items.length-4]})})]})]})},y.id))})}),i.jsx(Ut,{value:"cancelled",className:"space-y-4",children:g().filter(y=>y.status==="cancelled").length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Pu,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande annulée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes annulées."})]}):i.jsx("div",{className:"space-y-4",children:g().filter(y=>y.status==="cancelled").map(y=>i.jsx(Q,{className:"hover:shadow-md transition-shadow",children:i.jsxs(J,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",y.id.slice(0,8)]}),x(y.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(Us,{className:"w-3 h-3"}),Ar(new Date(y.createdAt),"dd MMMM yyyy",{locale:nn})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:w(y.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.items.length," article",y.items.length>1?"s":""]})]}),i.jsx($,{asChild:!0,children:i.jsxs(ye,{to:`/order/${y.id}`,children:["Détails",i.jsx(mi,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[y.items.slice(0,4).map((v,_)=>i.jsx("div",{className:"flex-shrink-0",children:v.image?i.jsx("img",{src:v.image,alt:v.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Jt,{className:"w-6 h-6 text-muted-foreground"})})},_)),y.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",y.items.length-4]})})]})]})},y.id))})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(Q,{children:i.jsxs(J,{className:"pt-6",children:[i.jsx(Jt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos commandes"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder à l'historique de vos commandes"}),i.jsx($,{onClick:()=>s("/auth"),children:"Se connecter"})]})})})},sde=()=>{var d,h;const{orderId:t}=x1(),{getOrderById:e}=HN(),[r,n]=p.useState(null),[s,a]=p.useState(!0);p.useEffect(()=>{(async()=>{if(t)try{a(!0);const g=await e(t);n(g)}catch(g){console.error("Error loading order:",g)}finally{a(!1)}})()},[t,e]);const o=m=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(m),l=m=>({card:"Carte bancaire",paypal:"PayPal",transfer:"Virement bancaire",cash:"Paiement à la livraison"})[m]||m,c=()=>{const m=new Date,g=new Date(m);return g.setDate(m.getDate()+3),Ar(g,"EEEE d MMMM",{locale:nn})},u=()=>{navigator.clipboard.writeText(t||""),ne.success("Numéro de commande copié !")};return s?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx("div",{className:"max-w-3xl mx-auto",children:i.jsxs("div",{className:"animate-pulse space-y-4",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mx-auto"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),i.jsx("div",{className:"h-32 bg-muted rounded"}),i.jsx("div",{className:"h-64 bg-muted rounded"})]})})}):r?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(yt,{className:"w-8 h-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Commande confirmée !"}),i.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre commande. Vous recevrez un email de confirmation à ",r.shipping.email,"."]})]}),i.jsxs(Q,{className:"mb-6",children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Jt,{className:"w-5 h-5"}),"Détails de la commande"]}),i.jsx(Ie,{className:"bg-green-100 text-green-800 border-green-200",children:r.status==="pending"?"En attente":r.status==="processing"?"En traitement":r.status==="shipped"?"Expédiée":r.status==="delivered"?"Livrée":"Confirmée"})]})}),i.jsx(J,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Numéro de commande"}),i.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t,i.jsx($,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:u,children:i.jsx(AD,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),i.jsx("p",{className:"font-medium",children:Ar(new Date(r.createdAt),"dd/MM/yyyy")})]})]}),i.jsx(ps,{}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Articles"}),i.jsx("div",{className:"space-y-3",children:r.items.map((m,g)=>i.jsxs("div",{className:"flex items-center gap-3",children:[m.image&&i.jsx("img",{src:m.image,alt:m.name,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:m.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",m.quantity]})]}),i.jsx("p",{className:"font-semibold",children:o(m.price*m.quantity)})]},g))})]}),i.jsx(ps,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),i.jsx("span",{children:o(r.total)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Livraison"}),i.jsx("span",{className:"text-green-600",children:"Gratuite"})]}),i.jsxs("div",{className:"flex justify-between font-bold",children:[i.jsx("span",{children:"Total"}),i.jsx("span",{children:o(r.total)})]})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-base",children:[i.jsx(Mx,{className:"w-4 h-4"}),"Livraison"]})}),i.jsx(J,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:r.shipping.fullName}),i.jsx("p",{children:r.shipping.address}),i.jsxs("p",{children:[r.shipping.postalCode," ",r.shipping.city,", ",r.shipping.country]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:r.shipping.phone}),i.jsx("div",{className:"pt-2 mt-2 border-t",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Us,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{children:["Livraison estimée: ",c()]})]})})]})})]}),i.jsxs(Q,{children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2 text-base",children:[i.jsx(gr,{className:"w-4 h-4"}),"Paiement"]})}),i.jsx(J,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:l(r.payment.method)}),r.payment.method==="card"&&((d=r.payment.details)==null?void 0:d.cardNumber)&&i.jsxs("p",{children:["Carte se terminant par ",r.payment.details.cardNumber.slice(-4)]}),r.payment.method==="paypal"&&((h=r.payment.details)==null?void 0:h.paypalEmail)&&i.jsx("p",{children:r.payment.details.paypalEmail}),r.payment.method==="transfer"&&i.jsxs(kt,{className:"mt-2",children:[i.jsx(dr,{className:"h-4 w-4"}),i.jsx(Tt,{children:"Veuillez effectuer le virement dans les 48h pour valider votre commande."})]}),i.jsx("div",{className:"pt-2 mt-2 border-t",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(ur,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{children:["Statut: ",r.status==="pending"?"En attente":"Confirmé"]})]})})]})})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx($,{variant:"outline",className:"flex-1",asChild:!0,children:i.jsxs(ye,{to:"/orders",children:[i.jsx(Jt,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),i.jsxs($,{variant:"outline",className:"flex-1",children:[i.jsx(ws,{className:"mr-2 h-4 w-4"}),"Télécharger la facture"]}),i.jsx($,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:i.jsxs(ye,{to:"/listings",children:[i.jsx(_l,{className:"mr-2 h-4 w-4"}),"Continuer mes achats"]})})]}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("p",{className:"text-muted-foreground mb-2",children:"Besoin d'aide avec votre commande ?"}),i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsxs($,{variant:"link",className:"text-primary",children:[i.jsx(an,{className:"mr-2 h-4 w-4"}),"Contacter le support"]}),i.jsxs($,{variant:"link",className:"text-primary",children:[i.jsx(Ul,{className:"mr-2 h-4 w-4"}),"FAQ"]})]})]})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(Q,{children:i.jsxs(J,{className:"pt-6",children:[i.jsx(dr,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Commande introuvable"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Nous n'avons pas pu trouver les détails de cette commande."}),i.jsx($,{asChild:!0,children:i.jsx(ye,{to:"/orders",children:"Voir mes commandes"})})]})})})},ide=({id:t,name:e,description:r,price:n,currency:s,image:a,mode:o})=>{const{currentUser:l}=Zt(),{addToCart:c}=dd(),u=Dr(),d=(g,x)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:x}).format(g),h=()=>{if(!l){ne.error("Veuillez vous connecter pour ajouter au panier"),u("/auth");return}c({id:t,name:e,price:n,image:a,seller:"StudyMarket",sellerId:"system",listingId:t})},m=()=>{if(!l){ne.error("Veuillez vous connecter pour acheter"),u("/auth");return}c({id:t,name:e,price:n,image:a,seller:"StudyMarket",sellerId:"system",listingId:t}),u("/checkout")};return i.jsxs(Q,{className:"overflow-hidden transition-all hover:shadow-lg",children:[i.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a?i.jsx("img",{src:a,alt:e,className:"w-full h-full object-cover transition-transform hover:scale-105"}):i.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:i.jsx(GY,{className:"w-12 h-12 text-muted-foreground"})}),i.jsx(Ie,{className:"absolute top-2 right-2 bg-primary",children:o==="subscription"?"Abonnement":"Achat unique"})]}),i.jsxs(Pe,{children:[i.jsx(Re,{children:e}),i.jsx(lt,{children:r})]}),i.jsx(J,{children:i.jsxs("div",{className:"text-2xl font-bold text-primary",children:[d(n,s),o==="subscription"&&i.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/mois"})]})}),i.jsxs(VO,{className:"flex gap-2",children:[i.jsxs($,{variant:"outline",className:"flex-1",onClick:h,children:[i.jsx(jo,{className:"w-4 h-4 mr-2"}),"Ajouter"]}),i.jsx($,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",onClick:m,children:"Acheter"})]})]})},c_=[{id:"prod_ST3q24zsLbS28p",name:"Bicyclette",description:"Vélo",priceId:"price_1RY7iN2XLhzYQhT9ErigqaGg",price:10,currency:"EUR",mode:"payment",image:"https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"}],ade=t=>c_.find(e=>e.priceId===t),F6="pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p";DL(F6);const ode={isConfigured:!0,key:`${F6.substring(0,8)}...`};async function lde(){return{customer_id:"cus_mock123",subscription_id:"sub_mock123",subscription_status:"active",price_id:"price_1RY7iN2XLhzYQhT9ErigqaGg",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"}}async function cde(){return[{order_id:"ord_mock123",checkout_session_id:"cs_mock123",payment_intent_id:"pi_mock123",amount_subtotal:1e3,amount_total:1e3,currency:"eur",payment_status:"paid",order_status:"completed",order_date:new Date().toISOString()}]}const ude=()=>{const{getCartItemCount:t}=dd(),e=Dr(),r=t();return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs($,{variant:"ghost",onClick:()=>e(-1),className:"-ml-4",children:[i.jsx(sa,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(_l,{className:"w-8 h-8"}),"Boutique"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez nos produits et services"})]}),r>0&&i.jsxs($,{onClick:()=>e("/cart"),className:"flex items-center gap-2",children:[i.jsx(jo,{className:"w-4 h-4"}),"Panier (",r,")"]})]})]}),!ode.isConfigured,i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c_.map(n=>i.jsx(ide,{id:n.id,name:n.name,description:n.description,price:n.price,currency:n.currency,image:n.image,mode:n.mode},n.id))}),c_.length===0&&i.jsx(Q,{className:"text-center py-12",children:i.jsxs(J,{className:"pt-6",children:[i.jsx(Jt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit disponible"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Revenez bientôt pour découvrir nos nouveaux produits."})]})})]})},dde=()=>{const[t]=nx(),e=Dr(),{currentUser:r}=Zt(),{clearCart:n}=dd(),[s,a]=p.useState(!0),[o,l]=p.useState(null),[c,u]=p.useState(null),[d,h]=p.useState(null),m=t.get("session_id"),g=t.get("type")==="subscription";p.useEffect(()=>{n();async function w(){if(r)try{if(a(!0),g){const y=await lde();l(y)}else{const v=(await cde())[0];u(v)}}catch(y){console.error("Error fetching checkout result:",y),h("Impossible de charger les détails de votre achat")}finally{a(!1)}}const b=setTimeout(()=>{w()},2e3);return()=>clearTimeout(b)},[r,g,m,n]);const x=()=>{if(g&&(o!=null&&o.price_id)){const w=ade(o.price_id);return w?w.name:"Abonnement"}else if(c)return"Commande";return"Achat"};return r?s?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto text-center",children:[i.jsx(Hn,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement de votre paiement..."}),i.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous confirmons votre transaction."})]})}):d?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs(kt,{className:"border-red-200 bg-red-50",children:[i.jsx(dr,{className:"h-4 w-4 text-red-600"}),i.jsx(Tt,{className:"text-red-800",children:d})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx($,{asChild:!0,children:i.jsx(ye,{to:"/",children:"Retour à l'accueil"})})})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(yt,{className:"w-8 h-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Merci pour votre achat !"}),i.jsxs("p",{className:"text-muted-foreground",children:["Votre ",g?"abonnement":"commande"," a été confirmé",g?"":"e","."]})]}),i.jsxs(Q,{className:"mb-6",children:[i.jsx(Pe,{children:i.jsxs(Re,{className:"flex items-center gap-2",children:[g?i.jsx(gr,{className:"w-5 h-5"}):i.jsx(Jt,{className:"w-5 h-5"}),x()]})}),i.jsx(J,{children:i.jsx("div",{className:"space-y-4",children:g&&o?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),i.jsx("span",{className:"font-medium",children:o.subscription_status==="active"?"Actif":o.subscription_status==="trialing"?"Période d'essai":o.subscription_status})]}),o.current_period_end&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Prochain renouvellement:"}),i.jsx("span",{className:"font-medium",children:new Date(o.current_period_end*1e3).toLocaleDateString("fr-FR")})]}),o.payment_method_brand&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Méthode de paiement:"}),i.jsxs("span",{className:"font-medium",children:[o.payment_method_brand.toUpperCase()," •••• ",o.payment_method_last4]})]})]}):c?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Numéro de commande:"}),i.jsx("span",{className:"font-medium",children:c.order_id})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Date:"}),i.jsx("span",{className:"font-medium",children:new Date(c.order_date).toLocaleDateString("fr-FR")})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Montant:"}),i.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:c.currency}).format(c.amount_total/100)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),i.jsx("span",{className:"font-medium",children:c.order_status==="completed"?"Complété":c.order_status==="pending"?"En attente":c.order_status})]})]}):i.jsx("p",{children:"Merci pour votre achat. Vous recevrez un email de confirmation."})})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(kt,{className:"bg-blue-50 border-blue-200",children:[i.jsx(Us,{className:"h-4 w-4 text-blue-600"}),i.jsx(Tt,{className:"text-blue-800",children:g?"Vous pouvez gérer votre abonnement à tout moment depuis votre compte.":"Vous recevrez un email de confirmation avec les détails de votre commande."})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx($,{variant:"outline",className:"flex-1",asChild:!0,children:i.jsxs(ye,{to:"/orders",children:[i.jsx(Jt,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),i.jsx($,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:i.jsxs(ye,{to:"/products",children:[i.jsx(_l,{className:"mr-2 h-4 w-4"}),"Continuer mes achats",i.jsx(Ul,{className:"ml-2 h-4 w-4"})]})})]})]})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs(kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(dr,{className:"h-4 w-4 text-blue-600"}),i.jsx(Tt,{className:"text-blue-800",children:"Vous devez être connecté pour voir les détails de votre achat."})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx($,{onClick:()=>e("/auth"),children:"Se connecter"})})]})})},hde=[{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"},{value:"donations",label:"Dons"},{value:"exchange",label:"Troc"}],fde=()=>{const{id:t}=x1(),e=Dr(),{currentUser:r}=Zt(),{fetchListingById:n,updateListing:s,currentListing:a,loading:o}=vm(),[l,c]=p.useState({title:"",description:"",price:"",images:[]}),[u,d]=p.useState([]),[h,m]=p.useState(!1),[g,x]=p.useState(null),[w,b]=p.useState(""),[y,v]=p.useState([]),[_,E]=p.useState("");p.useEffect(()=>{t&&n(t)},[t,n]),p.useEffect(()=>{var P;a&&(c({title:a.title||"",description:a.description||"",price:((P=a.price)==null?void 0:P.toString())||"",images:a.images||[]}),b(a.category||""),v(a.tags||[]))},[a]);const C=P=>{c({...l,[P.target.name]:P.target.value})},D=P=>{if(!P.target.files)return;const N=Array.from(P.target.files);d(V=>[...V,...N])},T=P=>{c({...l,images:l.images.filter((N,V)=>V!==P)})},k=P=>{d(u.filter((N,V)=>V!==P))},R=()=>{_.trim()&&!y.includes(_.trim())&&y.length<5&&(v([...y,_.trim()]),E(""))},S=P=>{v(y.filter(N=>N!==P))},A=async P=>{if(P.preventDefault(),!(!t||!r)){m(!0);try{let N=[];u.length>0&&(N=await Promise.all(u.map(U=>mde(U,r.uid))));const V=[...l.images,...N];await s(t,{...l,price:parseFloat(l.price),images:V,category:w,tags:y}),e(`/listing/${t}`)}catch{x("Erreur lors de la mise à jour de l'annonce")}finally{m(!1)}}};return o?i.jsx("div",{children:"Chargement..."}):a?g?i.jsx("div",{className:"text-red-500",children:g}):i.jsx("form",{onSubmit:A,className:"max-w-lg mx-auto mt-10",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[i.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Modifier mon annonce"}),i.jsxs("div",{className:"mb-5",children:[i.jsx(de,{htmlFor:"title",className:"block mb-1 text-gray-700",children:"Titre"}),i.jsx(we,{id:"title",name:"title",value:l.title,onChange:C,placeholder:"Titre",className:"w-full"})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(de,{htmlFor:"description",className:"block mb-1 text-gray-700",children:"Description"}),i.jsx(_s,{id:"description",name:"description",value:l.description,onChange:C,placeholder:"Description",className:"w-full",rows:4})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(de,{htmlFor:"price",className:"block mb-1 text-gray-700",children:"Prix (€)"}),i.jsx(we,{id:"price",name:"price",value:l.price,onChange:C,placeholder:"Prix",type:"number",min:0,className:"w-full"})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(de,{htmlFor:"category",className:"block mb-1 text-gray-700",children:"Catégorie"}),i.jsxs("select",{id:"category",name:"category",value:w,onChange:P=>b(P.target.value),className:"w-full border rounded px-3 py-2 bg-gray-50",required:!0,children:[i.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),hde.map(P=>i.jsx("option",{value:P.value,children:P.label},P.value))]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(de,{className:"block mb-1 text-gray-700",children:"Tags (max 5)"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:y.map(P=>i.jsxs("span",{className:"bg-gray-100 rounded px-2 py-1 flex items-center gap-1 text-sm",children:[P,i.jsx($,{type:"button",size:"icon",variant:"ghost",className:"w-4 h-4 p-0",onClick:()=>S(P),children:"×"})]},P))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(we,{placeholder:"Ajouter un tag...",value:_,onChange:P=>E(P.target.value),onKeyDown:P=>P.key==="Enter"&&(P.preventDefault(),R()),className:"flex-1"}),i.jsx($,{type:"button",onClick:R,disabled:!_.trim()||y.length>=5,children:"Ajouter"})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx(de,{className:"block mb-1 text-gray-700",children:"Photos"}),i.jsxs("div",{className:"flex flex-wrap gap-4 mt-2",children:[l.images.map((P,N)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:P,alt:`photo-${N}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),i.jsx($,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>T(N),children:"×"})]},N)),u.map((P,N)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:URL.createObjectURL(P),alt:`new-photo-${N}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),i.jsx($,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>k(N),children:"×"})]},N)),i.jsxs("label",{className:"w-20 h-20 flex items-center justify-center border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition",children:[i.jsx("span",{className:"text-2xl text-gray-400",children:"+"}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:D,disabled:h})]})]})]}),i.jsx($,{type:"submit",className:"w-full",disabled:h,children:h?"Enregistrement...":"Enregistrer les modifications"}),g&&i.jsx("div",{className:"text-red-500 text-center mt-2",children:g})]})}):i.jsx("div",{className:"text-red-500",children:"Annonce introuvable"})};async function mde(t,e){const r=Date.now(),n=`listings/${e}/${r}_${t.name}`,s=Sh(Ch,n),a=await X4(s,t);return await nv(a.ref)}const pde=()=>{const[t,e]=p.useState([]),[r,n]=p.useState(!0),[s,a]=p.useState(""),[o,l]=p.useState({type:"",contract:"",level:"",city:"",remote:""}),c=[{id:"1",title:"Développeur Frontend React - Stage",company:"TechStart Paris",description:"Rejoins notre équipe pour développer des interfaces modernes avec React et TypeScript. Formation et mentoring assurés.",type:"stage",contract:"stage",salary:{min:600,max:800,period:"month"},location:{city:"Paris",remote:!0,university:"Sorbonne Université"},requirements:{level:"master",experience:"Débutant accepté",skills:["React","TypeScript","CSS"]},schedule:{hours:"35h/semaine",flexible:!0},contact:{email:"stage@techstart.fr",website:"techstart.fr"},postedAt:new Date,deadline:new Date("2025-02-28")},{id:"2",title:"Cours particuliers Mathématiques",company:"Particulier",description:"Recherche étudiant en Master Maths pour donner des cours à domicile niveau lycée.",type:"cours-particuliers",contract:"freelance",salary:{min:20,max:25,period:"hour"},location:{city:"Paris 16e",remote:!1},requirements:{level:"master",experience:"Première expérience souhaitée",skills:["Mathématiques","Pédagogie"]},schedule:{hours:"2h/semaine",flexible:!0},contact:{email:"marie.martin@example.com",phone:"06.12.34.56.78"},postedAt:new Date,deadline:new Date("2025-01-30")},{id:"3",title:"Assistant Marketing Digital",company:"Agence Digital Plus",description:"Job étudiant flexible. Gestion réseaux sociaux et création de contenu pour nos clients.",type:"job-etudiant",contract:"cdd",salary:{min:12,max:15,period:"hour"},location:{city:"Lyon",remote:!0},requirements:{level:"licence",experience:"Débutant accepté",skills:["Réseaux sociaux","Canva","Communication"]},schedule:{hours:"15h/semaine",flexible:!0},contact:{email:"recrutement@digitalplus.fr"},postedAt:new Date}];p.useEffect(()=>{(async()=>{n(!0);try{s||Object.keys(o).length>0,setTimeout(()=>{e(c),n(!1)},1e3)}catch(w){console.error("Erreur recherche emplois:",w),n(!1)}})()},[s,o]);const u=x=>{a(x)},d=(x,w)=>{l(b=>({...b,[x]:w}))},h=x=>{switch(x){case"stage":return i.jsx(ji,{className:"w-4 h-4"});case"job-etudiant":return i.jsx(kh,{className:"w-4 h-4"});case"cours-particuliers":return i.jsx(ji,{className:"w-4 h-4"});case"babysitting":return i.jsx(kh,{className:"w-4 h-4"});default:return i.jsx(kh,{className:"w-4 h-4"})}},m=x=>{switch(x){case"stage":return"bg-blue-100 text-blue-800";case"job-etudiant":return"bg-green-100 text-green-800";case"cours-particuliers":return"bg-purple-100 text-purple-800";case"babysitting":return"bg-pink-100 text-pink-800";case"freelance":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},g=x=>{const{min:w,max:b,period:y}=x,v=y==="hour"?"/h":y==="month"?"/mois":"/an";return w===b?`${w}€${v}`:`${w}-${b}€${v}`};return i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Jobs & Stages étudiants"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Trouvez l'opportunité parfaite compatible avec vos études"})]}),i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(Ir,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx(we,{type:"text",placeholder:"Rechercher par poste, entreprise, compétences...",value:s,onChange:x=>u(x.target.value),className:"pl-10 py-3 text-lg"})]})}),i.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-5 gap-4",children:[i.jsxs(dt,{onValueChange:x=>d("type",x),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Type d'emploi"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"stage",children:"Stages"}),i.jsx(ie,{value:"job-etudiant",children:"Jobs étudiants"}),i.jsx(ie,{value:"cours-particuliers",children:"Cours particuliers"}),i.jsx(ie,{value:"babysitting",children:"Baby-sitting"}),i.jsx(ie,{value:"freelance",children:"Freelance"})]})]}),i.jsxs(dt,{onValueChange:x=>d("level",x),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Niveau d'études"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"tous-niveaux",children:"Tous niveaux"}),i.jsx(ie,{value:"licence",children:"Licence"}),i.jsx(ie,{value:"master",children:"Master"}),i.jsx(ie,{value:"doctorat",children:"Doctorat"})]})]}),i.jsx(we,{type:"text",placeholder:"Ville",value:o.city,onChange:x=>d("city",x.target.value)}),i.jsxs(dt,{onValueChange:x=>d("remote",x),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Modalité"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"true",children:"Télétravail"}),i.jsx(ie,{value:"false",children:"Présentiel"})]})]}),i.jsxs(dt,{onValueChange:x=>d("contract",x),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Contrat"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"stage",children:"Stage"}),i.jsx(ie,{value:"cdd",children:"CDD"}),i.jsx(ie,{value:"freelance",children:"Freelance"}),i.jsx(ie,{value:"interim",children:"Intérim"})]})]})]}),r?i.jsx("div",{className:"space-y-4",children:[...Array(5)].map((x,w)=>i.jsx(Q,{className:"animate-pulse",children:i.jsxs(J,{className:"p-6",children:[i.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})},w))}):i.jsx("div",{className:"space-y-4",children:t.map(x=>i.jsx(Q,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:i.jsxs(J,{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"text-xl font-semibold",children:x.title}),i.jsxs(Ie,{className:m(x.type),children:[h(x.type),i.jsx("span",{className:"ml-1 capitalize",children:x.type.replace("-"," ")})]})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium mb-2",children:x.company}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 line-clamp-2",children:x.description})]}),i.jsxs("div",{className:"text-right ml-4",children:[i.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:g(x.salary)}),i.jsx("div",{className:"text-sm text-gray-500",children:x.schedule.hours})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 text-sm text-gray-600 dark:text-gray-400",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Br,{className:"w-4 h-4 mr-1"}),x.location.city,x.location.remote&&i.jsx(Ie,{variant:"secondary",className:"ml-2 text-xs",children:"Télétravail possible"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(ji,{className:"w-4 h-4 mr-1"}),x.requirements.level]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(ur,{className:"w-4 h-4 mr-1"}),"Publié il y a ",Math.floor((Date.now()-x.postedAt.getTime())/(1e3*60*60*24))," jours"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[x.requirements.skills.slice(0,4).map((w,b)=>i.jsx(Ie,{variant:"outline",className:"text-xs",children:w},b)),x.requirements.skills.length>4&&i.jsxs(Ie,{variant:"outline",className:"text-xs",children:["+",x.requirements.skills.length-4," autres"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-sm text-gray-500",children:x.deadline&&i.jsxs("span",{children:["Candidature avant le ",x.deadline.toLocaleDateString("fr-FR")]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx($,{variant:"outline",size:"sm",children:"Sauvegarder"}),i.jsx($,{size:"sm",children:"Postuler"})]})]})]})},x.id))})]})})},gde=[{objectID:"1",title:"Studio moderne près de la Sorbonne",description:"Meublé, chez un propriétaire, dans une maison",price:850,type:"studio",city:"Paris 5ème",address:"RUE DES CAROLUS75005 Paris",surface:25,imageUrl:"https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=400&h=300&fit=crop",detailUrl:"/logement/1",isAvailable:!0,availabilityText:"Disponible du 01/09/2025 au 18/07/2027",rating:4.5,source:"StudyMarket"}],vde=t=>!t.title||!t.objectID?null:{objectID:String(t.objectID),source:String(t.sourceNormalized??t.source??t.platform??"unknown"),title:String(t.title),description:String(t.description??""),price:typeof t.price=="number"&&t.price>0?t.price:0,priceTotal:typeof t.priceTotal=="number"?t.priceTotal:0,type:String(t.type??t.category??""),city:String(t.city??""),address:String(t.address??t.quartier??""),surface:typeof t.surface=="number"&&t.surface>0?t.surface:null,imageUrl:String(t.imageUrl??(Array.isArray(t.images)?t.images[0]:"")??""),detailUrl:String(t.detailUrl??t.url??""),isAvailable:t.hasAvailability!==!1,availabilityText:Array.isArray(t.availabilityMonths)?`Disponible: ${t.availabilityMonths.join(", ")}`:String(t.availabilityMonths??""),rating:typeof t.rating=="number"&&t.rating>0?t.rating:null,_geoloc:t._geoloc},xde=()=>{const[t,e]=p.useState([]),[r,n]=p.useState(!0),[s,a]=p.useState(""),[o,l]=p.useState(0),[c,u]=p.useState(0),[d,h]=p.useState(0),[m,g]=p.useState({type:"",minPrice:"",maxPrice:"",source:"",city:"",university:"",furnished:""}),[x,w]=p.useState(""),b="Q3E5Y56YF4",y="ff26b6f0fa03bc6384566ea42dfe0ab4",v="student-housing";p.useEffect(()=>{(async()=>{n(!0),w("");try{const R=`https://${b}-dsn.algolia.net/1/indexes/${v}/query`;console.log("🔗 URL Algolia:",R),console.log("📋 Filtres appliqués:",{searchQuery:s,type:m.type,source:m.source,city:m.city,prix:`${m.minPrice||0} - ${m.maxPrice||"∞"}`});const S=[],A=[];if(m.type&&S.push([`type:${m.type}`,`logementTypes:${m.type}`,`category:${m.type}`]),m.source&&S.push([`sourceNormalized:${m.source}`,`source:${m.source}`,`platform:${m.source}`]),m.city&&S.push([`city:${m.city}`]),m.university&&S.push([`university:${m.university}`]),m.furnished){const U=m.furnished==="true";S.push([`_tags:${U?"meuble":"non-meuble"}`,`guarantees:${U?"meuble":"non-meuble"}`])}if(m.minPrice||m.maxPrice){const U=m.minPrice?Number(m.minPrice):0,H=m.maxPrice?Number(m.maxPrice):999999;U>0&&A.push(`price>=${U}`),H<999999&&A.push(`price<=${H}`)}console.log("🔍 Filtres construits:",{facetFilters:S,numericFilters:A});const P=await fetch(R,{method:"POST",headers:{"Content-Type":"application/json","X-Algolia-Application-Id":b,"X-Algolia-API-Key":y},body:JSON.stringify({query:s,hitsPerPage:48,page:o,attributesToRetrieve:["*"],attributesToHighlight:[],attributesToSnippet:[],facetFilters:S.length?S:void 0,numericFilters:A.length?A:void 0,getRankingInfo:!0})});if(!P.ok){const U=await P.text();throw console.error("❌ Erreur Algolia:",P.status,U),new Error(`Algolia HTTP ${P.status}: ${U}`)}const N=await P.json();console.log("✅ Réponse Algolia réussie!",{nbHits:N.nbHits,nbPages:N.nbPages,resultats:N.hits.length,page:o+1,total:`${N.nbHits} logements`}),N.hits.length>0&&(console.log("📊 Premier résultat brut:",N.hits[0]),console.log("🏗️ Structure des champs disponibles:",Object.keys(N.hits[0])));const V=N.hits.map(U=>vde(U)).filter(U=>U!==null);console.log("🔄 Données normalisées:",V.length,"logements valides sur",N.hits.length,"résultats bruts"),e(V),u(N.nbPages||0),h(N.nbHits||0)}catch(R){console.error("❌ Erreur lors de la recherche:",R),console.log("🔄 Fallback vers les données de démonstration");const S=[...gde].map(A=>({objectID:A.objectID,source:A.source,title:A.title,description:A.description,price:A.price,priceTotal:0,type:A.type,city:A.city,address:A.address,surface:A.surface,imageUrl:A.imageUrl,detailUrl:A.detailUrl,isAvailable:A.isAvailable,availabilityText:A.availabilityText,rating:A.rating,_geoloc:void 0}));e(S),w("⚠️ Problème de connexion Algolia. Données de démonstration affichées.")}finally{n(!1)}})()},[s,m,o]);const _=k=>{a(k),l(0)},E=(k,R)=>{g(S=>({...S,[k]:R})),l(0)},C=k=>{k>=0&&k<c&&(l(k),window.scrollTo({top:0,behavior:"smooth"}))},D=k=>{switch(k){case"studio":return i.jsx(ui,{className:"w-4 h-4"});case"appartement":return i.jsx(ui,{className:"w-4 h-4"});case"chambre":return i.jsx(ui,{className:"w-4 h-4"});case"colocation":return i.jsx(sd,{className:"w-4 h-4"});default:return i.jsx(ui,{className:"w-4 h-4"})}},T=k=>{switch(k){case"studio":return"bg-blue-100 text-blue-800";case"appartement":return"bg-green-100 text-green-800";case"chambre":return"bg-purple-100 text-purple-800";case"colocation":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Logements étudiants"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Trouvez le logement parfait près de votre campus"})]}),i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(Ir,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx(we,{type:"text",placeholder:"Rechercher par ville, université, quartier...",value:s,onChange:k=>_(k.target.value),className:"pl-10 py-3 text-lg"})]})}),i.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(dt,{value:m.type,onValueChange:k=>E("type",k==="all"?"":k),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Type de logement"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"all",children:"Tous les types"}),i.jsx(ie,{value:"Résidence étudiante",children:"Résidence étudiante"}),i.jsx(ie,{value:"Chambre",children:"Chambre"}),i.jsx(ie,{value:"Studio",children:"Studio"}),i.jsx(ie,{value:"Appartement",children:"Appartement"}),i.jsx(ie,{value:"Colocation",children:"Colocation"})]})]}),i.jsx(we,{type:"number",placeholder:"Prix min (€)",value:m.minPrice,onChange:k=>E("minPrice",k.target.value)}),i.jsx(we,{type:"number",placeholder:"Prix max (€)",value:m.maxPrice,onChange:k=>E("maxPrice",k.target.value)}),i.jsxs(dt,{value:m.source,onValueChange:k=>E("source",k==="all"?"":k),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Source"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"all",children:"Toutes les sources"}),i.jsx(ie,{value:"adele",children:"Adele"}),i.jsx(ie,{value:"lokaviz",children:"Lokaviz"}),i.jsx(ie,{value:"studymarket",children:"StudyMarket"})]})]})]}),i.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(we,{type:"text",placeholder:"Ville (ex: Paris, Poitiers)",value:m.city,onChange:k=>E("city",k.target.value)}),i.jsxs(dt,{value:m.university,onValueChange:k=>E("university",k==="all"?"":k),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Université"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"all",children:"Toutes les universités"}),i.jsx(ie,{value:"sorbonne",children:"Sorbonne"}),i.jsx(ie,{value:"dauphine",children:"Dauphine"}),i.jsx(ie,{value:"assas",children:"Panthéon-Assas"}),i.jsx(ie,{value:"sciences-po",children:"Sciences Po"}),i.jsx(ie,{value:"poitiers",children:"Université de Poitiers"})]})]}),i.jsxs(dt,{value:m.furnished,onValueChange:k=>E("furnished",k==="any"?"":k),children:[i.jsx(at,{children:i.jsx(ht,{placeholder:"Meublé"})}),i.jsxs(ot,{children:[i.jsx(ie,{value:"any",children:"Indifférent"}),i.jsx(ie,{value:"true",children:"Meublé"}),i.jsx(ie,{value:"false",children:"Non meublé"})]})]})]}),i.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"outline",onClick:()=>{g({type:"",minPrice:"",maxPrice:"",source:"",city:"",university:"",furnished:""}),a(""),l(0)},children:"Réinitialiser les filtres"}),!r&&i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.jsx("span",{className:"font-semibold",children:d.toLocaleString()})," logements trouvés",c>1&&i.jsxs("span",{className:"ml-2",children:["• Page ",o+1," sur ",c]})]})]}),c>1&&!r&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Navigation rapide:"}),i.jsx("div",{className:"flex gap-1",children:[0,Math.floor(c/4),Math.floor(c/2),Math.floor(3*c/4),c-1].filter((k,R,S)=>S.indexOf(k)===R&&k>=0).map(k=>i.jsx($,{variant:o===k?"default":"outline",size:"sm",onClick:()=>C(k),className:"px-2 py-1 text-xs",children:k+1},k))})]})]}),x&&i.jsx("div",{className:"mb-6 p-4 bg-red-100 text-red-700 rounded-lg",children:x}),r?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((k,R)=>i.jsxs(Q,{className:"animate-pulse",children:[i.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg"}),i.jsxs(J,{className:"p-4",children:[i.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},R))}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(k=>{var oe;const R=k.objectID,S=k.imageUrl||"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400&h=300&fit=crop",A=k.title,P=k.description,N=k.price||k.priceTotal||0,V=k.city,U=((oe=k.type)==null?void 0:oe.toLowerCase())||"logement",H=k.surface,F=k.detailUrl||`/logement/${R}`,L=k.isAvailable,W=k.availabilityText,z=k.rating,X=k.source;return i.jsxs(Q,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:S,alt:A,className:"w-full h-48 object-cover rounded-t-lg",onError:Se=>{Se.target.src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400&h=300&fit=crop"}}),i.jsxs(Ie,{className:`absolute top-3 left-3 ${T(U)}`,children:[D(U),i.jsx("span",{className:"ml-1 capitalize",children:U})]}),X&&i.jsx(Ie,{className:"absolute top-3 right-3 bg-gray-800 text-white text-xs",children:X})]}),i.jsxs(J,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2",children:A}),P&&i.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:P}),i.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400 mb-2",children:[i.jsx(Br,{className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"text-sm",children:V})]}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[N>0?i.jsxs("div",{className:"flex items-center text-blue-600 font-bold text-xl",children:[i.jsx(ff,{className:"w-5 h-5 mr-1"}),N,i.jsx("span",{className:"text-sm font-normal text-gray-500 ml-1",children:"/mois"})]}):i.jsx("span",{className:"text-gray-500 text-sm",children:"Prix à négocier"}),H&&i.jsxs("span",{className:"text-sm text-gray-500",children:[H,"m²"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[L!==!1&&i.jsx(Ie,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:"Disponible"}),z&&i.jsxs(Ie,{variant:"secondary",className:"text-xs",children:["⭐ ",z]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[W&&i.jsx("span",{className:"text-sm text-gray-500 flex-1 mr-2",children:W}),i.jsx($,{size:"sm",onClick:()=>window.open(F,"_blank"),disabled:!F,children:"Voir l'annonce"})]})]})]},R)})}),!r&&t.length===0&&!x&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ui,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Aucun logement trouvé"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Essayez de modifier vos critères de recherche"})]}),!r&&c>1&&i.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($,{variant:"outline",size:"sm",onClick:()=>C(0),disabled:o===0,children:"⏮️ Début"}),i.jsx($,{variant:"outline",size:"sm",onClick:()=>C(o-1),disabled:o===0,children:"← Précédent"}),i.jsx("div",{className:"hidden sm:flex items-center gap-1",children:Array.from({length:Math.min(5,c)},(k,R)=>{const A=Math.max(0,Math.min(o-2,c-5))+R;return i.jsx($,{variant:o===A?"default":"outline",size:"sm",onClick:()=>C(A),className:"px-3 py-1",children:A+1},A)})}),i.jsx($,{variant:"outline",size:"sm",onClick:()=>C(o+1),disabled:o>=c-1,children:"Suivant →"}),i.jsx($,{variant:"outline",size:"sm",onClick:()=>C(c-1),disabled:o>=c-1,children:"⏭️ Fin"})]}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Affichage de ",o*48+1," à ",Math.min((o+1)*48,d)," sur ",d.toLocaleString()," logements"]})]}),!r&&c>10&&i.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Aller à la page:"}),i.jsx(we,{type:"number",min:"1",max:c,placeholder:"Page",className:"w-20 text-center",onKeyPress:k=>{if(k.key==="Enter"){const R=parseInt(k.target.value)-1;R>=0&&R<c&&C(R)}}}),i.jsxs("span",{className:"text-sm text-gray-600",children:["/ ",c]})]}),i.jsx("div",{className:"mt-12 text-center",children:i.jsx(Q,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:i.jsxs(J,{className:"p-6",children:[i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Vous proposez un logement ?"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Publiez votre annonce gratuitement et touchez des milliers d'étudiants"}),i.jsx($,{size:"lg",children:"Publier une annonce logement"})]})})})]})})},yde="modulepreload",wde=function(t){return"/StudyMarket/"+t},wT={},Em=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=wde(c),c in wT)return;wT[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":yde,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},bde=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Em(async()=>{const{default:n}=await Promise.resolve().then(()=>gd);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class GN extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class _de extends GN{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class jde extends GN{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Nde extends GN{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var u_;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(u_||(u_={}));var Sde=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class Ede{constructor(e,{headers:r={},customFetch:n,region:s=u_.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=bde(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return Sde(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(x=>{throw new _de(x)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new jde(d);if(!d.ok)throw new Nde(d);let m=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield d.json():m==="application/octet-stream"?g=yield d.blob():m==="text/event-stream"?g=d:m==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null}}catch(s){return{data:null,error:s}}})}}var In={},KN={},fy={},Cm={},my={},py={},Cde=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hu=Cde();const kde=Hu.fetch,$6=Hu.fetch.bind(Hu),U6=Hu.Headers,Tde=Hu.Request,Ide=Hu.Response,gd=Object.freeze(Object.defineProperty({__proto__:null,Headers:U6,Request:Tde,Response:Ide,default:$6,fetch:kde},Symbol.toStringTag,{value:"Module"})),Ade=LV(gd);var gy={};Object.defineProperty(gy,"__esModule",{value:!0});let Pde=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};gy.default=Pde;var z6=js&&js.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(py,"__esModule",{value:!0});const Rde=z6(Ade),Dde=z6(gy);let Mde=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Rde.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let u=null,d=null,h=null,m=a.status,g=a.statusText;if(a.ok){if(this.method!=="HEAD"){const y=await a.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=y:d=JSON.parse(y))}const w=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const w=await a.text();try{u=JSON.parse(w),Array.isArray(u)&&a.status===404&&(d=[],u=null,m=200,g="OK")}catch{a.status===404&&w===""?(m=204,g="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,g="OK"),u&&this.shouldThrowOnError)throw new Dde.default(u)}return{error:u,data:d,count:h,status:m,statusText:g}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};py.default=Mde;var Ode=js&&js.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(my,"__esModule",{value:!0});const Lde=Ode(py);let Vde=class extends Lde.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};my.default=Vde;var Fde=js&&js.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cm,"__esModule",{value:!0});const $de=Fde(my);let Ude=class extends $de.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Cm.default=Ude;var zde=js&&js.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fy,"__esModule",{value:!0});const Kd=zde(Cm);let Bde=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=r,this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Kd.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Kd.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Kd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Kd.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Kd.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};fy.default=Bde;var vy={},xy={};Object.defineProperty(xy,"__esModule",{value:!0});xy.version=void 0;xy.version="0.0.0-automated";Object.defineProperty(vy,"__esModule",{value:!0});vy.DEFAULT_HEADERS=void 0;const qde=xy;vy.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${qde.version}`};var B6=js&&js.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(KN,"__esModule",{value:!0});const Wde=B6(fy),Hde=B6(Cm),Gde=vy;let Kde=class q6{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Gde.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new Wde.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new q6(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new Hde.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};KN.default=Kde;var vd=js&&js.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(In,"__esModule",{value:!0});In.PostgrestError=In.PostgrestBuilder=In.PostgrestTransformBuilder=In.PostgrestFilterBuilder=In.PostgrestQueryBuilder=In.PostgrestClient=void 0;const W6=vd(KN);In.PostgrestClient=W6.default;const H6=vd(fy);In.PostgrestQueryBuilder=H6.default;const G6=vd(Cm);In.PostgrestFilterBuilder=G6.default;const K6=vd(my);In.PostgrestTransformBuilder=K6.default;const Y6=vd(py);In.PostgrestBuilder=Y6.default;const Q6=vd(gy);In.PostgrestError=Q6.default;var Yde=In.default={PostgrestClient:W6.default,PostgrestQueryBuilder:H6.default,PostgrestFilterBuilder:G6.default,PostgrestTransformBuilder:K6.default,PostgrestBuilder:Y6.default,PostgrestError:Q6.default};const{PostgrestClient:Qde,PostgrestQueryBuilder:fme,PostgrestFilterBuilder:mme,PostgrestTransformBuilder:pme,PostgrestBuilder:gme,PostgrestError:vme}=Yde;let d_;typeof window>"u"?d_=require("ws"):d_=window.WebSocket;const Jde=d_,Xde="2.11.10",Zde={"X-Client-Info":`realtime-js/${Xde}`},ehe="1.0.0",J6=1e4,the=1e3;var pu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(pu||(pu={}));var mn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(mn||(mn={}));var Vs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vs||(Vs={}));var h_;(function(t){t.websocket="websocket"})(h_||(h_={}));var ol;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ol||(ol={}));class rhe{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+s));o=o+s;const c=n.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class X6{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ot||(Ot={}));const bT=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=nhe(o,t,e,s),a),{})},nhe=(t,e,r,n)=>{const s=e.find(l=>l.name===t),a=s==null?void 0:s.type,o=r[t];return a&&!n.includes(a)?Z6(a,o):f_(o)},Z6=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return ohe(e,r)}switch(t){case Ot.bool:return she(e);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return ihe(e);case Ot.json:case Ot.jsonb:return ahe(e);case Ot.timestamp:return lhe(e);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:return f_(e);default:return f_(e)}},f_=t=>t,she=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ihe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ahe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ohe=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>Z6(e,l))}return t},lhe=t=>typeof t=="string"?t.replace(" ","T"):t,eV=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ew{constructor(e,r,n={},s=J6){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _T;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(_T||(_T={}));class Ah{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ah.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=Ah.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ah.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const a=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const m=d.map(b=>b.presence_ref),g=h.map(b=>b.presence_ref),x=d.filter(b=>g.indexOf(b.presence_ref)<0),w=h.filter(b=>m.indexOf(b.presence_ref)<0);x.length>0&&(l[u]=x),w.length>0&&(c[u]=w)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(g=>g.presence_ref),m=d.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jT;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(jT||(jT={}));var NT;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(NT||(NT={}));var Wi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Wi||(Wi={}));class YN{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=mn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ew(this,Vs.join,this.params,this.timeout),this.rejoinTimer=new X6(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vs.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Ah(this),this.broadcastEndpointURL=eV(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(d=>e==null?void 0:e(Wi.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Wi.CLOSED));const c={},u={broadcast:a,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(Wi.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,x=[];for(let w=0;w<g;w++){const b=m[w],{filter:{event:y,schema:v,table:_,filter:E}}=b,C=d&&d[w];if(C&&C.event===y&&C.schema===v&&C.table===_&&C.filter===E)x.push(Object.assign(Object.assign({},b),{id:C.id}));else{this.unsubscribe(),this.state=mn.errored,e==null||e(Wi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Wi.SUBSCRIBED);return}}).receive("error",d=>{this.state=mn.errored,e==null||e(Wi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Wi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=mn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vs.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const s=new ew(this,Vs.leave,{},e);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ew(this,e,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Vs;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var x,w,b;return((x=g.filter)===null||x===void 0?void 0:x.event)==="*"||((b=(w=g.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(g=>g.callback(m,n)):(a=this.bindings[o])===null||a===void 0||a.filter(g=>{var x,w,b,y,v,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const E=g.id,C=(x=g.filter)===null||x===void 0?void 0:x.event;return E&&((w=r.ids)===null||w===void 0?void 0:w.includes(E))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const E=(v=(y=g==null?void 0:g.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return E==="*"||E===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:w,table:b,commit_timestamp:y,type:v,errors:_}=x;m=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:y,eventType:v,new:{},old:{},errors:_}),this._getPayloadRecords(x))}g.callback(m,n)})}_isClosed(){return this.state===mn.closed}_isJoined(){return this.state===mn.joined}_isJoining(){return this.state===mn.joining}_isLeaving(){return this.state===mn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&YN.isEqual(s.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vs.close,{},e)}_onError(e){this._on(Vs.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=bT(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=bT(e.columns,e.old_record)),r}}const ST=()=>{},che=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uhe{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Zde,this.params={},this.timeout=J6,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ST,this.ref=0,this.logger=ST,this.conn=null,this.sendBuffer=[],this.serializer=new rhe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>Em(async()=>{const{default:c}=await Promise.resolve().then(()=>gd);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${h_.websocket}`,this.httpEndpoint=eV(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,o)=>o(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new X6(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Jde),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new dhe(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ehe}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case pu.connecting:return ol.Connecting;case pu.open:return ol.Open;case pu.closing:return ol.Closing;default:return ol.Closed}}isConnected(){return this.connectionState()===ol.Open}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new YN(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:s,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(Vs.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(the,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:s,payload:a,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vs.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([che],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class dhe{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=pu.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class QN extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Mr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class hhe extends QN{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class m_ extends QN{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var fhe=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const tV=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Em(async()=>{const{default:n}=await Promise.resolve().then(()=>gd);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},mhe=()=>fhe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Em(()=>Promise.resolve().then(()=>gd),void 0)).Response:Response}),p_=t=>{if(Array.isArray(t))return t.map(r=>p_(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=p_(n)}),e};var dc=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const tw=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),phe=(t,e,r)=>dc(void 0,void 0,void 0,function*(){const n=yield mhe();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{e(new hhe(tw(s),t.status||500))}).catch(s=>{e(new m_(tw(s),s))}):e(new m_(tw(t),t))}),ghe=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function km(t,e,r,n,s,a){return dc(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,ghe(e,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>phe(c,l,n))})})}function Lv(t,e,r,n){return dc(this,void 0,void 0,function*(){return km(t,"GET",e,r,n)})}function $a(t,e,r,n,s){return dc(this,void 0,void 0,function*(){return km(t,"POST",e,n,s,r)})}function vhe(t,e,r,n,s){return dc(this,void 0,void 0,function*(){return km(t,"PUT",e,n,s,r)})}function xhe(t,e,r,n){return dc(this,void 0,void 0,function*(){return km(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function rV(t,e,r,n,s){return dc(this,void 0,void 0,function*(){return km(t,"DELETE",e,n,s,r)})}var En=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const yhe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ET={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class whe{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=tV(s)}uploadOrUpdate(e,r,n,s){return En(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},ET),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(Mr(a))return{data:null,error:a};throw a}})}upload(e,r,n){return En(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return En(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:ET.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),m=yield h.json();return h.ok?{data:{path:a,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(Mr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return En(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield $a(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new QN("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(Mr(n))return{data:null,error:n};throw n}})}update(e,r,n){return En(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return En(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Mr(s))return{data:null,error:s};throw s}})}copy(e,r,n){return En(this,void 0,void 0,function*(){try{return{data:{path:(yield $a(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Mr(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return En(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield $a(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(Mr(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return En(this,void 0,void 0,function*(){try{const s=yield $a(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(Mr(s))return{data:null,error:s};throw s}})}download(e,r){return En(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Lv(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Mr(l))return{data:null,error:l};throw l}})}info(e){return En(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Lv(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:p_(n),error:null}}catch(n){if(Mr(n))return{data:null,error:n};throw n}})}exists(e){return En(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield xhe(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Mr(n)&&n instanceof m_){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return En(this,void 0,void 0,function*(){try{return{data:yield rV(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Mr(r))return{data:null,error:r};throw r}})}list(e,r,n){return En(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},yhe),r),{prefix:e||""});return{data:yield $a(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Mr(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const bhe="2.7.1",_he={"X-Client-Info":`storage-js/${bhe}`};var Cc=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class jhe{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},_he),r),this.fetch=tV(n)}listBuckets(){return Cc(this,void 0,void 0,function*(){try{return{data:yield Lv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Mr(e))return{data:null,error:e};throw e}})}getBucket(e){return Cc(this,void 0,void 0,function*(){try{return{data:yield Lv(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Mr(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Cc(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Mr(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Cc(this,void 0,void 0,function*(){try{return{data:yield vhe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Mr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Cc(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Mr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Cc(this,void 0,void 0,function*(){try{return{data:yield rV(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Mr(r))return{data:null,error:r};throw r}})}}class Nhe extends jhe{constructor(e,r={},n){super(e,r,n)}from(e){return new whe(this.url,this.headers,e,this.fetch)}}const She="2.50.0";let ch="";typeof Deno<"u"?ch="deno":typeof document<"u"?ch="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ch="react-native":ch="node";const Ehe={"X-Client-Info":`supabase-js-${ch}/${She}`},Che={headers:Ehe},khe={schema:"public"},The={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ihe={};var Ahe=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Phe=t=>{let e;return t?e=t:typeof fetch>"u"?e=$6:e=fetch,(...r)=>e(...r)},Rhe=()=>typeof Headers>"u"?U6:Headers,Dhe=(t,e,r)=>{const n=Phe(r),s=Rhe();return(a,o)=>Ahe(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var Mhe=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function Ohe(t){return t.endsWith("/")?t:t+"/"}function Lhe(t,e){var r,n;const{db:s,auth:a,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Mhe(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const nV="2.70.0",Mc=30*1e3,g_=3,rw=g_*Mc,Vhe="http://localhost:9999",Fhe="supabase.auth.token",$he={"X-Client-Info":`gotrue-js/${nV}`},v_="X-Supabase-Api-Version",sV={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Uhe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zhe=6e5;class JN extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function et(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Bhe extends JN{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function qhe(t){return et(t)&&t.name==="AuthApiError"}class iV extends JN{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Ho extends JN{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class La extends Ho{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Whe(t){return et(t)&&t.name==="AuthSessionMissingError"}class Ip extends Ho{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ap extends Ho{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Pp extends Ho{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Hhe(t){return et(t)&&t.name==="AuthImplicitGrantRedirectError"}class CT extends Ho{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class x_ extends Ho{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function nw(t){return et(t)&&t.name==="AuthRetryableFetchError"}class kT extends Ho{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Ph extends Ho{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),TT=` 	
\r=`.split(""),Ghe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<TT.length;e+=1)t[TT[e].charCodeAt(0)]=-2;for(let e=0;e<Vv.length;e+=1)t[Vv[e].charCodeAt(0)]=e;return t})();function IT(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Vv[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Vv[n]),e.queuedBits-=6}}function aV(t,e,r){const n=Ghe[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function AT(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{Qhe(o,n,r)};for(let o=0;o<t.length;o+=1)aV(t.charCodeAt(o),s,a);return e.join("")}function Khe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Yhe(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Khe(n,e)}}function Qhe(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Jhe(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)aV(t.charCodeAt(s),r,n);return new Uint8Array(e)}function Xhe(t){const e=[];return Yhe(t,r=>e.push(r)),new Uint8Array(e)}function Zhe(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>IT(s,r,n)),IT(null,r,n),e.join("")}function efe(t){return Math.round(Date.now()/1e3)+t}function tfe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Rs=()=>typeof window<"u"&&typeof document<"u",tl={tested:!1,writable:!1},Rh=()=>{if(!Rs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tl.tested)return tl.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),tl.tested=!0,tl.writable=!0}catch{tl.tested=!0,tl.writable=!1}return tl.writable};function rfe(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const oV=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Em(async()=>{const{default:n}=await Promise.resolve().then(()=>gd);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},nfe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",lV=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Rp=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Dp=async(t,e)=>{await t.removeItem(e)};class yy{constructor(){this.promise=new yy.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}yy.promiseConstructor=Promise;function sw(t){const e=t.split(".");if(e.length!==3)throw new Ph("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Uhe.test(e[n]))throw new Ph("JWT not in base64url format");return{header:JSON.parse(AT(e[0])),payload:JSON.parse(AT(e[1])),signature:Jhe(e[2]),raw:{header:e[0],payload:e[1]}}}async function sfe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ife(t,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function afe(t){return("0"+t.toString(16)).substr(-2)}function ofe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,afe).join("")}async function lfe(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function cfe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await lfe(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kc(t,e,r=!1){const n=ofe();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await lV(t,`${e}-code-verifier`,s);const a=await cfe(n);return[a,n===a?"plain":"s256"]}const ufe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function dfe(t){const e=t.headers.get(v_);if(!e||!e.match(ufe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function hfe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ffe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mfe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Tc(t){if(!mfe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var pfe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const al=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gfe=[502,503,504];async function PT(t){var e;if(!nfe(t))throw new x_(al(t),0);if(gfe.includes(t.status))throw new x_(al(t),t.status);let r;try{r=await t.json()}catch(a){throw new iV(al(a),a)}let n;const s=dfe(t);if(s&&s.getTime()>=sV["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new kT(al(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new La}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new kT(al(r),t.status,r.weak_password.reasons);throw new Bhe(al(r),t.status||500,n)}const vfe=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function it(t,e,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[v_]||(a[v_]=sV["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await xfe(t,e,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function xfe(t,e,r,n,s,a){const o=vfe(e,n,s,a);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new x_(al(c),0)}if(l.ok||await PT(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await PT(c)}}function Bi(t){var e;let r=null;_fe(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=efe(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function RT(t){const e=Bi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qa(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function yfe(t){return{data:t,error:null}}function wfe(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=t,o=pfe(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function bfe(t){return t}function _fe(t){return t.access_token&&t.refresh_token&&t.expires_in}const iw=["global","local","others"];var jfe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class Nfe{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=oV(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=iw[0]){if(iw.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${iw.join(", ")}`);try{return await it(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await it(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Qa})}catch(n){if(et(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=jfe(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await it(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:wfe,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(et(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await it(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qa})}catch(r){if(et(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await it(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:bfe});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);u[`${b}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(et(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Tc(e);try{return await it(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qa})}catch(r){if(et(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Tc(e);try{return await it(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Qa})}catch(n){if(et(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Tc(e);try{return await it(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Qa})}catch(n){if(et(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Tc(e.userId);try{const{data:r,error:n}=await it(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(et(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Tc(e.userId),Tc(e.id);try{return{data:await it(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(et(r))return{data:null,error:r};throw r}}}const Sfe={getItem:t=>Rh()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Rh()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Rh()&&globalThis.localStorage.removeItem(t)}};function DT(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Efe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ic={debug:!!(globalThis&&Rh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cV extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Cfe extends cV{}async function kfe(t,e,r){Ic.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ic.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Ic.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Ic.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ic.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Cfe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ic.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Efe();const Tfe={url:Vhe,storageKey:Fhe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$he,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function MT(t,e,r){return await r()}class Lf{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Lf.nextInstanceID,Lf.nextInstanceID+=1,this.instanceID>0&&Rs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Tfe),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Nfe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=oV(s.fetch),this.lock=s.lock||MT,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Rs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=kfe:this.lock=MT,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Rh()?this.storage=Sfe:(this.memoryStorage={},this.storage=DT(this.memoryStorage)):(this.memoryStorage={},this.storage=DT(this.memoryStorage)),Rs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${nV}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=rfe(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Rs()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Hhe(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return et(r)?{error:r}:{error:new iV("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const a=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Bi}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(et(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,s;try{let a;if("email"in e){const{email:d,password:h,options:m}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await kc(this.storage,this.storageKey)),a=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:x},xform:Bi})}else if("phone"in e){const{phone:d,password:h,options:m}=e;a=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Bi})}else throw new Ap("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(et(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:l}=e;r=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:RT})}else if("phone"in e){const{phone:a,password:o,options:l}=e;r=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:RT})}else throw new Ap("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ip}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(et(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,a,o,l,c,u,d,h,m,g;let x,w;if("message"in e)x=e.message,w=e.signature;else{const{chain:b,wallet:y,statement:v,options:_}=e;let E;if(Rs())if(typeof y=="object")E=y;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))E=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=y}const C=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in E&&E.signIn){const D=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),v?{statement:v}:null));let T;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")T=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)T=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)x=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),w=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${C.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(d=_==null?void 0:_.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const D=await E.signMessage(new TextEncoder().encode(x),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=D}}try{const{data:b,error:y}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Zhe(w)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Bi});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ip}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(et(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const r=await Rp(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:o}=await it(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Bi});if(await Dp(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Ip}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(et(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=e,l=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Bi}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ip}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(et(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,a,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await kc(this.storage,this.storageKey));const{error:h}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ap("You must provide either an email or phone number.")}catch(l){if(et(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,a;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await it(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Bi});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(et(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await kc(this.storage,this.storageKey)),await it(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:yfe})}catch(a){if(et(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new La;const{error:s}=await it(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(et(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:o}=await it(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:o,error:l}=await it(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ap("You must provide either an email or phone number and a type")}catch(r){if(et(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Rp(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<rw:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qa}):await this._useSession(async r=>{var n,s,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new La}:await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Qa})})}catch(r){if(et(r))return Whe(r)&&(await this._removeSession(),await Dp(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new La;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await kc(this.storage,this.storageKey));const{data:u,error:d}=await it(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Qa});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(et(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new La;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=sw(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(et(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new La;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(et(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Rs())throw new Pp("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Pp(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new CT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pp("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new CT("No code detected.");const{data:v,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!o||!u)throw new Pp("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const g=m-d;g*1e3<=Mc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const x=m-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,d);const{data:w,error:b}=await this._getUser(a);if(b)throw b;const y={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(n){if(et(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Rp(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(qhe(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Dp(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=tfe(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await kc(this.storage,this.storageKey,!0));try{return await it(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(et(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(et(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:m}=a;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await it(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Rs()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(et(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await it(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(et(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await ife(async s=>(s>0&&await sfe(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await it(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Bi})),(s,a)=>{const o=200*Math.pow(2,s);return a&&nw(a)&&Date.now()+o-n<Mc})}catch(n){if(this._debug(r,"error",n),et(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Rs()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Rp(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<rw;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${rw}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),nw(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new La;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new yy;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new La;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),et(a)){const o={session:null,error:a};return nw(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await lV(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Dp(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Mc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Mc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mc}ms, refresh threshold is ${g_} ticks`),s<=g_&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof cV)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await kc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await it(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(et(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await it(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(et(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await it(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(et(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await it(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(et(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=sw(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+zhe>Date.now()))return n;const{data:s,error:a}=await it(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!s.keys||s.keys.length===0)throw new Ph("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===e),!n)throw new Ph("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:g,error:x}=await this.getSession();if(x||!g.session)return{data:null,error:x};n=g.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=sw(n);if(hfe(a.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:a,header:s,signature:o},error:null}}const u=ffe(s.alg),d=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Xhe(`${l}.${c}`)))throw new Ph("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}}}Lf.nextInstanceID=0;const Ife=Lf;class Afe extends Ife{constructor(e){super(e)}}var Pfe=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class Rfe{constructor(e,r,n){var s,a,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Ohe(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:khe,realtime:Ihe,auth:Object.assign(Object.assign({},The),{storageKey:u}),global:Che},h=Lhe(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Dhe(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Qde(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Ede(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Nhe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Pfe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:a,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Afe({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new uhe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Dfe=(t,e,r)=>new Rfe(t,e,r),uV="https://kbbhglxrcywpcktkamhl.supabase.co",Mfe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A";Dfe(uV,Mfe,{auth:{persistSession:!0}});const Ofe={isConfigured:!0,url:uV},Lfe=[{value:"support",label:"🛠️ Support Technique"},{value:"annonce",label:"📊 Problème avec une annonce"},{value:"compte",label:"👤 Compte et Authentification"},{value:"autre",label:"❓ Autre"}],Vfe=()=>{const{currentUser:t,userProfile:e}=Zt(),[r,n]=p.useState(!1),[s,a]=p.useState(!1),[o,l]=p.useState("menu"),[c,u]=p.useState([]),[d,h]=p.useState(""),[m,g]=p.useState(!1),[x,w]=p.useState({name:"",email:"",subject:"",message:"",category:"support"}),[b,y]=p.useState(!1),[v,_]=p.useState(!1),E=p.useRef(null),C=p.useRef(null),[D,T]=p.useState(()=>{try{const q=localStorage.getItem("chatbot_memory");return q?JSON.parse(q):{}}catch(q){return console.warn("Erreur chargement mémoire cache (init):",q),{}}}),k=()=>{var q;(q=E.current)==null||q.scrollIntoView({behavior:"smooth"})};p.useEffect(()=>{k()},[c]),p.useEffect(()=>{r&&o==="chat"&&C.current&&C.current.focus()},[r,o]),p.useEffect(()=>{(async()=>{const Z=await Xe();u(Z)})()},[t]),p.useEffect(()=>{t&&e&&w(q=>({...q,name:q.name||D.name||e.displayName||t.displayName||"",email:q.email||D.email||e.email||t.email||""}))},[t,e,D.name,D.email]);const R=q=>{const Z=q.toLowerCase();if(Z.includes("bonjour")||Z.includes("salut")||Z.includes("hello")){const fe=(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||"étudiant";return t?`Salut ${fe} ! 😊 Comment ça va ? Je peux t'aider avec tes annonces ou répondre à tes questions sur StudyMarket.`:"Salut ! 😊 Bienvenue sur StudyMarket ! Je peux t'aider à naviguer sur la plateforme. Que cherches-tu ?"}return Z.includes("annonce")||Z.includes("publier")||Z.includes("vendre")?`Pour publier une annonce, va sur "Créer une annonce" ! 📝 Tu peux vendre des livres, de l'électronique, proposer des services ou même faire du troc. Besoin d'aide pour une catégorie spécifique ?`:Z.includes("acheter")||Z.includes("trouver")||Z.includes("rechercher")?"Pour trouver des articles, utilise la barre de recherche ou parcours les catégories ! 🔍 Tu peux filtrer par prix et université. Que cherches-tu exactement ?":Z.includes("sécurité")||Z.includes("sûr")||Z.includes("confiance")?"StudyMarket est sécurisé ! 🛡️ Tous les étudiants sont vérifiés avec leur email universitaire. Utilise notre chat intégré et rencontrez-vous dans des lieux publics du campus.":Z.includes("prix")||Z.includes("coût")||Z.includes("gratuit")?"StudyMarket est 100% gratuit pour les étudiants ! 🎓 Pas de frais cachés pour publier ou contacter des vendeurs. On veut juste faciliter les échanges !":Z.includes("logement")||Z.includes("chambre")||Z.includes("colocation")?"🏠 Section Logement ! Tu peux chercher des colocations, studios ou chambres près de ton campus. Utilise les filtres par prix et distance. Visite toujours avant de t'engager !":Z.includes("job")||Z.includes("stage")||Z.includes("travail")?"💼 Jobs & Stages ! Parfait pour ton budget étudiant. Tu trouveras des petits boulots, cours particuliers, stages... Postule directement via la plateforme !":Z.includes("problème")||Z.includes("bug")||Z.includes("erreur")?"Oh non ! 😅 Peux-tu me dire quel problème ? Essaie de rafraîchir la page. Si ça persiste, contacte notre support !":Z.includes("merci")||Z.includes("thanks")?"De rien ! 😊 C'est un plaisir d'aider la communauté étudiante. N'hésite pas si tu as d'autres questions !":`Hmm, je ne suis pas sûr de comprendre ! 🤔 Je peux t'aider avec :

• Créer/gérer des annonces
• Questions de sécurité
• Navigation sur le site
• Infos sur les catégories

Pose-moi une question plus spécifique ! 😊`},S=async()=>{if(!d.trim())return;const q={id:Date.now().toString(),text:d,sender:"user",timestamp:new Date},Z=[...c,q];u(Z),h(""),g(!0),z(Z),t&&_e(Z),mt(q.text),setTimeout(()=>{const fe={id:(Date.now()+1).toString(),text:R(d),sender:"bot",timestamp:new Date},Ee=[...Z,fe];u(Ee),g(!1),z(Ee),t&&_e(Ee)},1e3+Math.random()*1e3)},A=q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),S())},P=()=>{const q=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return x.name.trim()?x.email.trim()?q.test(x.email)?x.subject.trim()?x.message.trim()?!0:(ne.error("Veuillez écrire votre message"),!1):(ne.error("Veuillez préciser le sujet"),!1):(ne.error("Format d'email invalide"),!1):(ne.error("Veuillez entrer votre email"),!1):(ne.error("Veuillez entrer votre nom complet"),!1)},N=async q=>{if(q.preventDefault(),!!P()){y(!0);try{console.log("Envoi du message via Supabase Functions...",{name:x.name,email:x.email,subject:x.subject,message:x.message.substring(0,50)+"...",category:x.category,user_id:t==null?void 0:t.uid});const Z="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",fe=`${Ofe.url}/functions/v1/envoi_email`,Ee=await fetch(fe,{method:"POST",headers:{"Content-Type":"application/json",...Z?{Authorization:`Bearer ${Z}`,apikey:Z}:{}},body:JSON.stringify({name:x.name.trim(),email:x.email.trim(),subject:x.subject.trim(),message:x.message.trim(),category:x.category,user_id:(t==null?void 0:t.uid)||null})});if(!Ee.ok){const O=await Ee.text();throw console.error("Erreur HTTP:",Ee.status,O),new Error(`Erreur HTTP ${Ee.status}: ${O}`)}const We=await Ee.json();if(We.success)_(!0),ne.success("Message envoyé avec succès ! Nous vous répondrons rapidement."),setTimeout(()=>{_(!1),w({name:"",email:"",subject:"",message:"",category:"support"}),l("menu")},3e3);else throw new Error(We.error||"Échec de l'envoi côté serveur")}catch(Z){console.error("Erreur complète:",Z);let fe="Erreur lors de l'envoi du message";const Ee=Z instanceof Error?Z.message:String(Z);Ee.includes("401")?fe="Problème d'autorisation. Configuration Supabase à vérifier.":Ee.includes("network")||Ee.includes("fetch")?fe="Problème de connexion. Vérifiez votre internet.":Ee.includes("timeout")?fe="Délai d'attente dépassé. Réessayez plus tard.":Ee&&(fe=Ee),ne.error(fe)}finally{y(!1)}}},V=(q,Z)=>{if(w(fe=>({...fe,[q]:Z})),q==="name"||q==="email"){const fe={...D,[q]:Z};T(fe),X(fe),t&&Se(fe)}},U=()=>{n(!0),a(!1),l(D.lastViewMode||"menu")},H=()=>{n(!1),a(!1),l("menu")},F=()=>{a(!s)},L=q=>{l(q);const Z={...D,lastViewMode:q};T(Z),X(Z),t&&Se(Z)},W=()=>{L("menu")},z=q=>{try{localStorage.setItem("chatbot_messages",JSON.stringify(q))}catch(Z){console.warn("Erreur sauvegarde cache:",Z)}},X=q=>{try{localStorage.setItem("chatbot_memory",JSON.stringify(q))}catch(Z){console.warn("Erreur sauvegarde mémoire cache:",Z)}},oe=()=>{try{const q=localStorage.getItem("chatbot_memory");return q?JSON.parse(q):{}}catch(q){return console.warn("Erreur chargement mémoire cache:",q),{}}},Se=async q=>{if(t)try{const Z=Ke(ve,"chatMemory",t.uid);await xl(Z,{...q,lastUpdated:new Date().toISOString()},{merge:!0})}catch(Z){console.warn("Erreur sauvegarde mémoire Firestore:",Z)}},Ze=async()=>{if(!t)return oe();try{const q=Ke(ve,"chatMemory",t.uid),Z=await Zn(q);if(Z.exists()){const fe=Z.data();return X(fe),fe}}catch(q){console.warn("Erreur chargement mémoire Firestore:",q)}return oe()};p.useEffect(()=>{(async()=>{const q=await Ze();T(Z=>({...q,...Z}))})()},[t==null?void 0:t.uid]);const mt=q=>{const Z=q.trim(),fe=Z.match(/je m'appelle\s+([A-Za-zÀ-ÖØ-öø-ÿ\s'-]{2,})/i),Ee=Z.match(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i),We=Z.match(/(électronique|livres?|mobilier|logement|services?|jobs?|dons?|échanges?)/i),O={};if(fe&&(O.name=fe[1].trim()),Ee&&(O.email=Ee[0]),We&&(O.preferredCategory=We[1].toLowerCase()),Object.keys(O).length){const B={...D,...O};T(B),X(B),t&&Se(B)}},st=()=>{try{const q=localStorage.getItem("chatbot_messages");if(q)return JSON.parse(q).map(fe=>({id:fe.id,text:fe.text,sender:fe.sender,timestamp:new Date(fe.timestamp)}))}catch(q){console.warn("Erreur chargement cache:",q)}return[{id:"1",text:"Salut ! 👋 Je suis l'assistant StudyMarket. Comment puis-je t'aider aujourd'hui ?",sender:"bot",timestamp:new Date}]},_e=async q=>{if(t)try{const Z=Ke(ve,"chatHistory",t.uid);await xl(Z,{messages:q.map(fe=>({...fe,timestamp:fe.timestamp.toISOString()})),lastUpdated:new Date().toISOString()},{merge:!0})}catch(Z){console.warn("Erreur sauvegarde Firestore:",Z)}},Xe=async()=>{if(!t)return st();try{const q=Ke(ve,"chatHistory",t.uid),Z=await Zn(q);if(Z.exists()){const Ee=Z.data().messages.map(We=>({id:We.id,text:We.text,sender:We.sender,timestamp:new Date(We.timestamp)}));return z(Ee),Ee}}catch(q){console.warn("Erreur chargement Firestore:",q)}return st()},te=()=>i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-2xl font-bold text-white",children:"T"})}),i.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:["Salut ",D.name||(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||"Étudiant"," ! 👋"]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Comment peut-on t'aider ?"})]}),i.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors rounded-lg",onClick:()=>L("chat"),children:[i.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Message récent"}),c.length>0&&c.some(q=>q.sender==="user")?i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(Jn,{className:"w-8 h-8",children:i.jsx(Pn,{className:"bg-gradient-to-br from-primary to-secondary text-white text-xs",children:c[c.length-1].sender==="bot"?"T":"U"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:c[c.length-1].text.length>50?`${c[c.length-1].text.substring(0,50)}...`:c[c.length-1].text}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[c[c.length-1].sender==="bot"?"Assistant":"Vous"," • ",new Date(c[c.length-1].timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),i.jsx(Ul,{className:"w-4 h-4 text-gray-400"})]}):i.jsxs("div",{className:"flex items-center justify-between py-4",children:[i.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun message récent"}),i.jsx(Ul,{className:"w-4 h-4 text-gray-400"})]})]})]}),me=()=>i.jsxs("div",{className:"flex items-center justify-around p-4 bg-white dark:bg-gray-900",children:[i.jsx($,{variant:"ghost",size:"sm",onClick:W,className:`p-2 focus:outline-none focus-visible:outline-none ${o==="home"?"text-primary":"text-gray-500"}`,children:i.jsx(ui,{className:"w-5 h-5"})}),i.jsx($,{variant:"ghost",size:"sm",onClick:()=>L("chat"),className:`p-2 focus:outline-none focus-visible:outline-none ${o==="chat"?"text-primary":"text-gray-500"}`,children:i.jsx(YY,{className:"w-5 h-5"})}),i.jsx($,{variant:"ghost",size:"sm",onClick:()=>L("contact"),className:`p-2 focus:outline-none focus-visible:outline-none ${o==="contact"?"text-primary":"text-gray-500"}`,children:i.jsx(an,{className:"w-5 h-5"})})]}),K=()=>i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary/5 to-secondary/5",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx($,{variant:"ghost",size:"sm",onClick:()=>L("menu"),className:"p-2",children:i.jsx(sa,{className:"w-4 h-4"})}),i.jsx(Jn,{className:"w-8 h-8",children:i.jsx(Pn,{className:"bg-gradient-to-br from-primary to-secondary text-white text-xs",children:"SM"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm",children:"Assistant StudyMarket"}),i.jsx("p",{className:"text-xs text-green-600",children:"En ligne"})]})]}),i.jsx(Ie,{className:"bg-green-100 text-green-800 text-xs",children:"Actif"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[c.map((q,Z)=>{var We,O;const fe=q.sender==="user",Ee=Z===0||c[Z-1].sender!==q.sender;return i.jsxs("div",{className:`flex items-end space-x-2 ${fe?"flex-row-reverse space-x-reverse":""}`,children:[i.jsx("div",{className:"flex-shrink-0",children:Ee?i.jsx(Jn,{className:"w-8 h-8",children:fe?e!=null&&e.photoURL?i.jsx("img",{src:e.photoURL,alt:"User Avatar",className:"w-full h-full object-cover rounded-full"}):i.jsx(Pn,{className:"bg-gradient-to-br from-blue-500 to-purple-500 text-white text-sm font-semibold",children:((We=e==null?void 0:e.displayName)==null?void 0:We.charAt(0))||((O=t==null?void 0:t.displayName)==null?void 0:O.charAt(0))||"U"}):i.jsx(Pn,{className:"bg-gradient-to-br from-primary to-secondary text-white text-sm font-semibold",children:"T"})}):i.jsx("div",{className:"w-8 h-8"})}),i.jsxs("div",{className:"flex flex-col max-w-[75%]",children:[i.jsx("div",{className:`px-4 py-2 ${fe?"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl rounded-br-md":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-2xl rounded-bl-md"}`,children:i.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed text-left",children:q.text})}),i.jsx("p",{className:`text-xs text-gray-500 mt-1 px-1 ${fe?"text-right":"text-left"}`,children:q.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},q.id)}),m&&i.jsxs("div",{className:"flex items-end space-x-2",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Jn,{className:"w-8 h-8",children:i.jsx(Pn,{className:"bg-gradient-to-br from-primary to-secondary text-white text-sm font-semibold",children:"T"})})}),i.jsx("div",{className:"max-w-[75%]",children:i.jsx("div",{className:"px-4 py-3 bg-gray-100 dark:bg-gray-700 rounded-2xl rounded-bl-md",children:i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),i.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),i.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),i.jsx("div",{ref:E})]}),i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(we,{ref:C,value:d,onChange:q=>h(q.target.value),onKeyPress:A,placeholder:"Tape ton message...",className:"flex-1 border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700",disabled:m}),i.jsx($,{onClick:S,disabled:!d.trim()||m,size:"icon",className:"w-12 h-12 rounded-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:i.jsx(Bl,{className:"w-6 h-6 text-white"})})]})})]}),le=()=>i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gradient-to-r from-primary/5 to-secondary/5",children:[i.jsx($,{variant:"ghost",size:"sm",onClick:()=>L("menu"),className:"p-2",children:i.jsx(sa,{className:"w-4 h-4"})}),i.jsx(an,{className:"w-6 h-6 text-primary"}),i.jsx("h3",{className:"font-semibold",children:"Nous contacter"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:v?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 flex items-center justify-center mx-auto mb-4",children:i.jsx(ID,{className:"w-8 h-8 text-green-600"})}),i.jsx("h4",{className:"text-lg font-semibold text-green-600 mb-2",children:"Message envoyé !"}),i.jsx("p",{className:"text-gray-600",children:"Nous te répondrons rapidement."})]}):i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nom complet *"}),i.jsx(we,{type:"text",value:x.name,onChange:q=>V("name",q.target.value),required:!0,placeholder:"Ton nom complet",className:"w-full border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email *"}),i.jsx(we,{type:"email",value:x.email,onChange:q=>V("email",q.target.value),required:!0,placeholder:"ton.email@univ.fr",className:"w-full border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Catégorie du message *"}),i.jsx("select",{value:x.category,onChange:q=>V("category",q.target.value),required:!0,className:"w-full px-3 py-2 border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-md",children:Lfe.map(q=>i.jsx("option",{value:q.value,children:q.label},q.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sujet *"}),i.jsx(we,{type:"text",value:x.subject,onChange:q=>V("subject",q.target.value),required:!0,placeholder:"Sujet de ton message",className:"w-full border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message *"}),i.jsx("textarea",{value:x.message,onChange:q=>{const Z=q.target.value;Z.length<=1e3&&V("message",Z)},maxLength:1e3,required:!0,rows:4,placeholder:"Décris ta demande... (max 1000 caractères)",className:"w-full px-3 py-2 border-none focus:ring-0 focus:ring-offset-0 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 resize-none"}),i.jsxs("div",{className:"text-right text-xs text-gray-500 mt-1",children:[x.message.length,"/1000"]})]}),i.jsx($,{type:"submit",disabled:b,className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",children:b?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):"Envoyer le message"})]})})]});return i.jsxs(i.Fragment,{children:[i.jsx($,{onClick:r?H:U,className:"fixed bottom-4 right-4 md:bottom-6 md:right-6 z-50 w-12 h-12 md:w-14 md:h-14 rounded-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",children:r?i.jsx("img",{src:"/StudyMarket/assets/arrow.svg",alt:"Arrow",className:"w-5 h-5 md:w-6 md:h-6"}):i.jsx(zt,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),r&&i.jsx(Q,{className:`fixed z-40 shadow-2xl border-0 bg-white dark:bg-gray-900 overflow-hidden transition-all duration-300 ease-in-out
            ${s?"bottom-24 right-4 w-80 max-w-[calc(100vw-2rem)] h-10":"bottom-24 right-4 w-80 max-w-[calc(100vw-2rem)] h-[500px] max-h-[calc(100vh-8rem)]"}
            md:${s?"bottom-20 md:right-6 md:w-80":"bottom-20 md:right-6 md:w-96 md:h-[550px] md:max-h-[calc(100vh-8rem)]"}
            md:max-w-none
          `,children:i.jsxs(J,{className:"p-0 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary to-secondary text-white cursor-pointer",onClick:F,children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:s?i.jsx(WY,{className:"w-4 h-4 text-white transform rotate-180"}):i.jsx(zt,{className:"w-4 h-4 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-semibold text-sm",children:"StudyMarket"}),!s&&i.jsx("p",{className:"text-xs text-white/80",children:"Assistant en ligne"})]})]}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx($,{onClick:q=>{q.stopPropagation(),H()},variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 p-1",children:i.jsx(pf,{className:"w-4 h-4"})})})]}),!s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex-1 overflow-hidden",children:[o==="menu"&&te(),o==="chat"&&K(),o==="contact"&&le()]}),me()]})]})})]})};function Ffe({children:t}){const[e,r]=Ce.useState(null);return Ce.useEffect(()=>{const n=s=>{r(s.error||new Error(s.message))};return window.addEventListener("error",n),()=>window.removeEventListener("error",n)},[]),e?i.jsxs("div",{style:{color:"red",padding:"2rem",textAlign:"center"},children:["Une erreur est survenue : ",e.message]}):i.jsx(i.Fragment,{children:t})}function $fe(){return i.jsx(mU,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:i.jsx($Y,{children:i.jsx(oU,{children:i.jsxs("div",{className:"min-h-screen w-full overflow-x-hidden bg-background flex flex-col",children:[i.jsxs("div",{className:"max-w-[100vw] overflow-x-hidden",children:[i.jsx(qte,{}),i.jsx("main",{className:"flex-1 pt-16",children:i.jsx(Ffe,{children:i.jsxs(Z8,{children:[i.jsx(Gt,{path:"/",element:i.jsx(ose,{})}),i.jsx(Gt,{path:"/listings",element:i.jsx(zse,{})}),i.jsx(Gt,{path:"/listing/:id",element:i.jsx(Ioe,{})}),i.jsx(Gt,{path:"/auth",element:i.jsx(ede,{})}),i.jsx(Gt,{path:"/help",element:i.jsx(Iue,{})}),i.jsx(Gt,{path:"/safety",element:i.jsx(Due,{})}),i.jsx(Gt,{path:"/cart",element:i.jsx(tde,{})}),i.jsx(Gt,{path:"/products",element:i.jsx(ude,{})}),i.jsx(Gt,{path:"/checkout/success",element:i.jsx(dde,{})}),i.jsx(Gt,{path:"/checkout",element:i.jsx(Ps,{children:i.jsx(rde,{})})}),i.jsx(Gt,{path:"/orders",element:i.jsx(Ps,{children:i.jsx(nde,{})})}),i.jsx(Gt,{path:"/order-confirmation/:orderId",element:i.jsx(Ps,{children:i.jsx(sde,{})})}),i.jsx(Gt,{path:"/create",element:i.jsx(Ps,{children:i.jsx(Tce,{})})}),i.jsx(Gt,{path:"/profile",element:i.jsx(Ps,{children:i.jsx(Dce,{})})}),i.jsx(Gt,{path:"/settings",element:i.jsx(Ps,{children:i.jsx(Wce,{})})}),i.jsx(Gt,{path:"/impact",element:i.jsx(Ps,{children:i.jsx(rue,{})})}),i.jsx(Gt,{path:"/saved-searches",element:i.jsx(Ps,{children:i.jsx(sue,{})})}),i.jsx(Gt,{path:"/favorites",element:i.jsx(Ps,{children:i.jsx(oue,{})})}),i.jsx(Gt,{path:"/payments",element:i.jsx(Ps,{children:i.jsx(lue,{})})}),i.jsx(Gt,{path:"/messages",element:i.jsx(Ps,{children:i.jsx(Yue,{})})}),i.jsx(Gt,{path:"/edit-listing/:id",element:i.jsx(fde,{})}),i.jsx(Gt,{path:"/jobs",element:i.jsx(pde,{})}),i.jsx(Gt,{path:"/housing",element:i.jsx(xde,{})}),i.jsx(Gt,{path:"*",element:i.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Page non trouvée (404)"})})]})})}),i.jsx(Hte,{}),i.jsx(Vfe,{})]}),i.jsx(l9,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"1px solid hsl(var(--border))"}}})]})})})})}YA(document.getElementById("root")).render(i.jsx(p.StrictMode,{children:i.jsx($fe,{})}));
