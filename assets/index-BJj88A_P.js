function $6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function El(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kT={exports:{}},Ix={},TT={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im=Symbol.for("react.element"),B6=Symbol.for("react.portal"),q6=Symbol.for("react.fragment"),W6=Symbol.for("react.strict_mode"),H6=Symbol.for("react.profiler"),G6=Symbol.for("react.provider"),K6=Symbol.for("react.context"),Z6=Symbol.for("react.forward_ref"),Y6=Symbol.for("react.suspense"),Q6=Symbol.for("react.memo"),X6=Symbol.for("react.lazy"),zS=Symbol.iterator;function J6(t){return t===null||typeof t!="object"?null:(t=zS&&t[zS]||t["@@iterator"],typeof t=="function"?t:null)}var PT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IT=Object.assign,AT={};function Kd(t,e,n){this.props=t,this.context=e,this.refs=AT,this.updater=n||PT}Kd.prototype.isReactComponent={};Kd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Kd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RT(){}RT.prototype=Kd.prototype;function Vb(t,e,n){this.props=t,this.context=e,this.refs=AT,this.updater=n||PT}var zb=Vb.prototype=new RT;zb.constructor=Vb;IT(zb,Kd.prototype);zb.isPureReactComponent=!0;var US=Array.isArray,MT=Object.prototype.hasOwnProperty,Ub={current:null},OT={key:!0,ref:!0,__self:!0,__source:!0};function DT(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)MT.call(e,r)&&!OT.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Im,type:t,key:a,ref:o,props:i,_owner:Ub.current}}function eF(t,e){return{$$typeof:Im,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $b(t){return typeof t=="object"&&t!==null&&t.$$typeof===Im}function tF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $S=/\/+/g;function f0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tF(""+t.key):e.toString(36)}function Ig(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Im:case B6:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+f0(o,0):r,US(i)?(n="",t!=null&&(n=t.replace($S,"$&/")+"/"),Ig(i,e,n,"",function(d){return d})):i!=null&&($b(i)&&(i=eF(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace($S,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",US(t))for(var c=0;c<t.length;c++){a=t[c];var u=r+f0(a,c);o+=Ig(a,e,n,u,i)}else if(u=J6(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=r+f0(a,c++),o+=Ig(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Kp(t,e,n){if(t==null)return t;var r=[],i=0;return Ig(t,r,"","",function(a){return e.call(n,a,i++)}),r}function nF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var es={current:null},Ag={transition:null},rF={ReactCurrentDispatcher:es,ReactCurrentBatchConfig:Ag,ReactCurrentOwner:Ub};function LT(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:Kp,forEach:function(t,e,n){Kp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kp(t,function(){e++}),e},toArray:function(t){return Kp(t,function(e){return e})||[]},only:function(t){if(!$b(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};kt.Component=Kd;kt.Fragment=q6;kt.Profiler=H6;kt.PureComponent=Vb;kt.StrictMode=W6;kt.Suspense=Y6;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rF;kt.act=LT;kt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=IT({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Ub.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)MT.call(e,u)&&!OT.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Im,type:t.type,key:i,ref:a,props:r,_owner:o}};kt.createContext=function(t){return t={$$typeof:K6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G6,_context:t},t.Consumer=t};kt.createElement=DT;kt.createFactory=function(t){var e=DT.bind(null,t);return e.type=t,e};kt.createRef=function(){return{current:null}};kt.forwardRef=function(t){return{$$typeof:Z6,render:t}};kt.isValidElement=$b;kt.lazy=function(t){return{$$typeof:X6,_payload:{_status:-1,_result:t},_init:nF}};kt.memo=function(t,e){return{$$typeof:Q6,type:t,compare:e===void 0?null:e}};kt.startTransition=function(t){var e=Ag.transition;Ag.transition={};try{t()}finally{Ag.transition=e}};kt.unstable_act=LT;kt.useCallback=function(t,e){return es.current.useCallback(t,e)};kt.useContext=function(t){return es.current.useContext(t)};kt.useDebugValue=function(){};kt.useDeferredValue=function(t){return es.current.useDeferredValue(t)};kt.useEffect=function(t,e){return es.current.useEffect(t,e)};kt.useId=function(){return es.current.useId()};kt.useImperativeHandle=function(t,e,n){return es.current.useImperativeHandle(t,e,n)};kt.useInsertionEffect=function(t,e){return es.current.useInsertionEffect(t,e)};kt.useLayoutEffect=function(t,e){return es.current.useLayoutEffect(t,e)};kt.useMemo=function(t,e){return es.current.useMemo(t,e)};kt.useReducer=function(t,e,n){return es.current.useReducer(t,e,n)};kt.useRef=function(t){return es.current.useRef(t)};kt.useState=function(t){return es.current.useState(t)};kt.useSyncExternalStore=function(t,e,n){return es.current.useSyncExternalStore(t,e,n)};kt.useTransition=function(){return es.current.useTransition()};kt.version="18.3.1";TT.exports=kt;var x=TT.exports;const Le=El(x),Bb=$6({__proto__:null,default:Le},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sF=x,iF=Symbol.for("react.element"),aF=Symbol.for("react.fragment"),oF=Object.prototype.hasOwnProperty,lF=sF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cF={key:!0,ref:!0,__self:!0,__source:!0};function FT(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)oF.call(e,r)&&!cF.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:iF,type:t,key:a,ref:o,props:i,_owner:lF.current}}Ix.Fragment=aF;Ix.jsx=FT;Ix.jsxs=FT;kT.exports=Ix;var s=kT.exports,VT={exports:{}},Ls={},zT={exports:{}},UT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,z){var B=I.length;I.push(z);e:for(;0<B;){var X=B-1>>>1,ue=I[X];if(0<i(ue,z))I[X]=z,I[B]=ue,B=X;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var z=I[0],B=I.pop();if(B!==z){I[0]=B;e:for(var X=0,ue=I.length,ge=ue>>>1;X<ge;){var Ee=2*(X+1)-1,De=I[Ee],$e=Ee+1,Ae=I[$e];if(0>i(De,B))$e<ue&&0>i(Ae,De)?(I[X]=Ae,I[$e]=B,X=$e):(I[X]=De,I[Ee]=B,X=Ee);else if($e<ue&&0>i(Ae,B))I[X]=Ae,I[$e]=B,X=$e;else break e}}return z}function i(I,z){var B=I.sortIndex-z.sortIndex;return B!==0?B:I.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,p=null,g=3,_=!1,N=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(I){for(var z=n(d);z!==null;){if(z.callback===null)r(d);else if(z.startTime<=I)r(d),z.sortIndex=z.expirationTime,e(u,z);else break;z=n(d)}}function A(I){if(b=!1,E(I),!N)if(n(u)!==null)N=!0,Z(O);else{var z=n(d);z!==null&&K(A,z.startTime-I)}}function O(I,z){N=!1,b&&(b=!1,w(V),V=-1),_=!0;var B=g;try{for(E(z),p=n(u);p!==null&&(!(p.expirationTime>z)||I&&!F());){var X=p.callback;if(typeof X=="function"){p.callback=null,g=p.priorityLevel;var ue=X(p.expirationTime<=z);z=t.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(u)&&r(u),E(z)}else r(u);p=n(u)}if(p!==null)var ge=!0;else{var Ee=n(d);Ee!==null&&K(A,Ee.startTime-z),ge=!1}return ge}finally{p=null,g=B,_=!1}}var q=!1,R=null,V=-1,U=5,k=-1;function F(){return!(t.unstable_now()-k<U)}function D(){if(R!==null){var I=t.unstable_now();k=I;var z=!0;try{z=R(!0,I)}finally{z?P():(q=!1,R=null)}}else q=!1}var P;if(typeof y=="function")P=function(){y(D)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ee=H.port2;H.port1.onmessage=D,P=function(){ee.postMessage(null)}}else P=function(){S(D,0)};function Z(I){R=I,q||(q=!0,P())}function K(I,z){V=S(function(){I(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){N||_||(N=!0,Z(O))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(I){switch(g){case 1:case 2:case 3:var z=3;break;default:z=g}var B=g;g=z;try{return I()}finally{g=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var B=g;g=I;try{return z()}finally{g=B}},t.unstable_scheduleCallback=function(I,z,B){var X=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?X+B:X):B=X,I){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=B+ue,I={id:f++,callback:z,priorityLevel:I,startTime:B,expirationTime:ue,sortIndex:-1},B>X?(I.sortIndex=B,e(d,I),n(u)===null&&I===n(d)&&(b?(w(V),V=-1):b=!0,K(A,B-X))):(I.sortIndex=ue,e(u,I),N||_||(N=!0,Z(O))),I},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(I){var z=g;return function(){var B=g;g=z;try{return I.apply(this,arguments)}finally{g=B}}}})(UT);zT.exports=UT;var uF=zT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dF=x,Ms=uF;function Te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $T=new Set,qf={};function Uc(t,e){md(t,e),md(t+"Capture",e)}function md(t,e){for(qf[t]=e,t=0;t<e.length;t++)$T.add(e[t])}var Za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),I_=Object.prototype.hasOwnProperty,hF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,BS={},qS={};function fF(t){return I_.call(qS,t)?!0:I_.call(BS,t)?!1:hF.test(t)?qS[t]=!0:(BS[t]=!0,!1)}function mF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pF(t,e,n,r){if(e===null||typeof e>"u"||mF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ts(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jr[t]=new ts(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jr[e]=new ts(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jr[t]=new ts(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jr[t]=new ts(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jr[t]=new ts(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jr[t]=new ts(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jr[t]=new ts(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jr[t]=new ts(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jr[t]=new ts(t,5,!1,t.toLowerCase(),null,!1,!1)});var qb=/[\-:]([a-z])/g;function Wb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qb,Wb);jr[e]=new ts(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qb,Wb);jr[e]=new ts(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qb,Wb);jr[e]=new ts(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jr[t]=new ts(t,1,!1,t.toLowerCase(),null,!1,!1)});jr.xlinkHref=new ts("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jr[t]=new ts(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hb(t,e,n,r){var i=jr.hasOwnProperty(e)?jr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pF(e,n,i,r)&&(n=null),r||i===null?fF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ho=dF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zp=Symbol.for("react.element"),Vu=Symbol.for("react.portal"),zu=Symbol.for("react.fragment"),Gb=Symbol.for("react.strict_mode"),A_=Symbol.for("react.profiler"),BT=Symbol.for("react.provider"),qT=Symbol.for("react.context"),Kb=Symbol.for("react.forward_ref"),R_=Symbol.for("react.suspense"),M_=Symbol.for("react.suspense_list"),Zb=Symbol.for("react.memo"),Ro=Symbol.for("react.lazy"),WT=Symbol.for("react.offscreen"),WS=Symbol.iterator;function Hh(t){return t===null||typeof t!="object"?null:(t=WS&&t[WS]||t["@@iterator"],typeof t=="function"?t:null)}var Cn=Object.assign,m0;function df(t){if(m0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);m0=e&&e[1]||""}return`
`+m0+t}var p0=!1;function g0(t,e){if(!t||p0)return"";p0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,c=a.length-1;1<=o&&0<=c&&i[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==a[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{p0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?df(t):""}function gF(t){switch(t.tag){case 5:return df(t.type);case 16:return df("Lazy");case 13:return df("Suspense");case 19:return df("SuspenseList");case 0:case 2:case 15:return t=g0(t.type,!1),t;case 11:return t=g0(t.type.render,!1),t;case 1:return t=g0(t.type,!0),t;default:return""}}function O_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zu:return"Fragment";case Vu:return"Portal";case A_:return"Profiler";case Gb:return"StrictMode";case R_:return"Suspense";case M_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qT:return(t.displayName||"Context")+".Consumer";case BT:return(t._context.displayName||"Context")+".Provider";case Kb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zb:return e=t.displayName||null,e!==null?e:O_(t.type)||"Memo";case Ro:e=t._payload,t=t._init;try{return O_(t(e))}catch{}}return null}function vF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O_(e);case 8:return e===Gb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function HT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xF(t){var e=HT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yp(t){t._valueTracker||(t._valueTracker=xF(t))}function GT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=HT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function cv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function D_(t,e){var n=e.checked;return Cn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function HS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=dl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function KT(t,e){e=e.checked,e!=null&&Hb(t,"checked",e,!1)}function L_(t,e){KT(t,e);var n=dl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?F_(t,e.type,n):e.hasOwnProperty("defaultValue")&&F_(t,e.type,dl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function GS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function F_(t,e,n){(e!=="number"||cv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var hf=Array.isArray;function Xu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+dl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function V_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Te(91));return Cn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function KS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Te(92));if(hf(n)){if(1<n.length)throw Error(Te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:dl(n)}}function ZT(t,e){var n=dl(e.value),r=dl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ZS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function z_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qp,QT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qp=Qp||document.createElement("div"),Qp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yF=["Webkit","ms","Moz","O"];Object.keys(Sf).forEach(function(t){yF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sf[e]=Sf[t]})});function XT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sf.hasOwnProperty(t)&&Sf[t]?(""+e).trim():e+"px"}function JT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=XT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var _F=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function U_(t,e){if(e){if(_F[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Te(62))}}function $_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B_=null;function Yb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var q_=null,Ju=null,ed=null;function YS(t){if(t=Mm(t)){if(typeof q_!="function")throw Error(Te(280));var e=t.stateNode;e&&(e=Dx(e),q_(t.stateNode,t.type,e))}}function eP(t){Ju?ed?ed.push(t):ed=[t]:Ju=t}function tP(){if(Ju){var t=Ju,e=ed;if(ed=Ju=null,YS(t),e)for(t=0;t<e.length;t++)YS(e[t])}}function nP(t,e){return t(e)}function rP(){}var v0=!1;function sP(t,e,n){if(v0)return t(e,n);v0=!0;try{return nP(t,e,n)}finally{v0=!1,(Ju!==null||ed!==null)&&(rP(),tP())}}function Hf(t,e){var n=t.stateNode;if(n===null)return null;var r=Dx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Te(231,e,typeof n));return n}var W_=!1;if(Za)try{var Gh={};Object.defineProperty(Gh,"passive",{get:function(){W_=!0}}),window.addEventListener("test",Gh,Gh),window.removeEventListener("test",Gh,Gh)}catch{W_=!1}function wF(t,e,n,r,i,a,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ef=!1,uv=null,dv=!1,H_=null,bF={onError:function(t){Ef=!0,uv=t}};function jF(t,e,n,r,i,a,o,c,u){Ef=!1,uv=null,wF.apply(bF,arguments)}function NF(t,e,n,r,i,a,o,c,u){if(jF.apply(this,arguments),Ef){if(Ef){var d=uv;Ef=!1,uv=null}else throw Error(Te(198));dv||(dv=!0,H_=d)}}function $c(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function QS(t){if($c(t)!==t)throw Error(Te(188))}function SF(t){var e=t.alternate;if(!e){if(e=$c(t),e===null)throw Error(Te(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return QS(i),t;if(a===r)return QS(i),e;a=a.sibling}throw Error(Te(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(Te(189))}}if(n.alternate!==r)throw Error(Te(190))}if(n.tag!==3)throw Error(Te(188));return n.stateNode.current===n?t:e}function aP(t){return t=SF(t),t!==null?oP(t):null}function oP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=oP(t);if(e!==null)return e;t=t.sibling}return null}var lP=Ms.unstable_scheduleCallback,XS=Ms.unstable_cancelCallback,EF=Ms.unstable_shouldYield,CF=Ms.unstable_requestPaint,Dn=Ms.unstable_now,kF=Ms.unstable_getCurrentPriorityLevel,Qb=Ms.unstable_ImmediatePriority,cP=Ms.unstable_UserBlockingPriority,hv=Ms.unstable_NormalPriority,TF=Ms.unstable_LowPriority,uP=Ms.unstable_IdlePriority,Ax=null,ra=null;function PF(t){if(ra&&typeof ra.onCommitFiberRoot=="function")try{ra.onCommitFiberRoot(Ax,t,void 0,(t.current.flags&128)===128)}catch{}}var ji=Math.clz32?Math.clz32:RF,IF=Math.log,AF=Math.LN2;function RF(t){return t>>>=0,t===0?32:31-(IF(t)/AF|0)|0}var Xp=64,Jp=4194304;function ff(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fv(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=ff(c):(a&=o,a!==0&&(r=ff(a)))}else o=n&~i,o!==0?r=ff(o):a!==0&&(r=ff(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ji(e),i=1<<n,r|=t[n],e&=~i;return r}function MF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-ji(a),c=1<<o,u=i[o];u===-1?(!(c&n)||c&r)&&(i[o]=MF(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}}function G_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dP(){var t=Xp;return Xp<<=1,!(Xp&4194240)&&(Xp=64),t}function x0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Am(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ji(e),t[e]=n}function DF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ji(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function Xb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ji(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Kt=0;function hP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fP,Jb,mP,pP,gP,K_=!1,eg=[],Qo=null,Xo=null,Jo=null,Gf=new Map,Kf=new Map,Lo=[],LF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JS(t,e){switch(t){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":Gf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kf.delete(e.pointerId)}}function Kh(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Mm(e),e!==null&&Jb(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function FF(t,e,n,r,i){switch(e){case"focusin":return Qo=Kh(Qo,t,e,n,r,i),!0;case"dragenter":return Xo=Kh(Xo,t,e,n,r,i),!0;case"mouseover":return Jo=Kh(Jo,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Gf.set(a,Kh(Gf.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Kf.set(a,Kh(Kf.get(a)||null,t,e,n,r,i)),!0}return!1}function vP(t){var e=nc(t.target);if(e!==null){var n=$c(e);if(n!==null){if(e=n.tag,e===13){if(e=iP(n),e!==null){t.blockedOn=e,gP(t.priority,function(){mP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Z_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);B_=r,n.target.dispatchEvent(r),B_=null}else return e=Mm(n),e!==null&&Jb(e),t.blockedOn=n,!1;e.shift()}return!0}function e2(t,e,n){Rg(t)&&n.delete(e)}function VF(){K_=!1,Qo!==null&&Rg(Qo)&&(Qo=null),Xo!==null&&Rg(Xo)&&(Xo=null),Jo!==null&&Rg(Jo)&&(Jo=null),Gf.forEach(e2),Kf.forEach(e2)}function Zh(t,e){t.blockedOn===e&&(t.blockedOn=null,K_||(K_=!0,Ms.unstable_scheduleCallback(Ms.unstable_NormalPriority,VF)))}function Zf(t){function e(i){return Zh(i,t)}if(0<eg.length){Zh(eg[0],t);for(var n=1;n<eg.length;n++){var r=eg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qo!==null&&Zh(Qo,t),Xo!==null&&Zh(Xo,t),Jo!==null&&Zh(Jo,t),Gf.forEach(e),Kf.forEach(e),n=0;n<Lo.length;n++)r=Lo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Lo.length&&(n=Lo[0],n.blockedOn===null);)vP(n),n.blockedOn===null&&Lo.shift()}var td=ho.ReactCurrentBatchConfig,mv=!0;function zF(t,e,n,r){var i=Kt,a=td.transition;td.transition=null;try{Kt=1,e1(t,e,n,r)}finally{Kt=i,td.transition=a}}function UF(t,e,n,r){var i=Kt,a=td.transition;td.transition=null;try{Kt=4,e1(t,e,n,r)}finally{Kt=i,td.transition=a}}function e1(t,e,n,r){if(mv){var i=Z_(t,e,n,r);if(i===null)k0(t,e,r,pv,n),JS(t,r);else if(FF(i,t,e,n,r))r.stopPropagation();else if(JS(t,r),e&4&&-1<LF.indexOf(t)){for(;i!==null;){var a=Mm(i);if(a!==null&&fP(a),a=Z_(t,e,n,r),a===null&&k0(t,e,r,pv,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else k0(t,e,r,null,n)}}var pv=null;function Z_(t,e,n,r){if(pv=null,t=Yb(r),t=nc(t),t!==null)if(e=$c(t),e===null)t=null;else if(n=e.tag,n===13){if(t=iP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pv=t,null}function xP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kF()){case Qb:return 1;case cP:return 4;case hv:case TF:return 16;case uP:return 536870912;default:return 16}default:return 16}}var Wo=null,t1=null,Mg=null;function yP(){if(Mg)return Mg;var t,e=t1,n=e.length,r,i="value"in Wo?Wo.value:Wo.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return Mg=i.slice(t,1<r?1-r:void 0)}function Og(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tg(){return!0}function t2(){return!1}function Fs(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?tg:t2,this.isPropagationStopped=t2,this}return Cn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tg)},persist:function(){},isPersistent:tg}),e}var Zd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},n1=Fs(Zd),Rm=Cn({},Zd,{view:0,detail:0}),$F=Fs(Rm),y0,_0,Yh,Rx=Cn({},Rm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:r1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yh&&(Yh&&t.type==="mousemove"?(y0=t.screenX-Yh.screenX,_0=t.screenY-Yh.screenY):_0=y0=0,Yh=t),y0)},movementY:function(t){return"movementY"in t?t.movementY:_0}}),n2=Fs(Rx),BF=Cn({},Rx,{dataTransfer:0}),qF=Fs(BF),WF=Cn({},Rm,{relatedTarget:0}),w0=Fs(WF),HF=Cn({},Zd,{animationName:0,elapsedTime:0,pseudoElement:0}),GF=Fs(HF),KF=Cn({},Zd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZF=Fs(KF),YF=Cn({},Zd,{data:0}),r2=Fs(YF),QF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JF[t])?!!e[t]:!1}function r1(){return eV}var tV=Cn({},Rm,{key:function(t){if(t.key){var e=QF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Og(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:r1,charCode:function(t){return t.type==="keypress"?Og(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Og(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nV=Fs(tV),rV=Cn({},Rx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s2=Fs(rV),sV=Cn({},Rm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:r1}),iV=Fs(sV),aV=Cn({},Zd,{propertyName:0,elapsedTime:0,pseudoElement:0}),oV=Fs(aV),lV=Cn({},Rx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cV=Fs(lV),uV=[9,13,27,32],s1=Za&&"CompositionEvent"in window,Cf=null;Za&&"documentMode"in document&&(Cf=document.documentMode);var dV=Za&&"TextEvent"in window&&!Cf,_P=Za&&(!s1||Cf&&8<Cf&&11>=Cf),i2=" ",a2=!1;function wP(t,e){switch(t){case"keyup":return uV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uu=!1;function hV(t,e){switch(t){case"compositionend":return bP(e);case"keypress":return e.which!==32?null:(a2=!0,i2);case"textInput":return t=e.data,t===i2&&a2?null:t;default:return null}}function fV(t,e){if(Uu)return t==="compositionend"||!s1&&wP(t,e)?(t=yP(),Mg=t1=Wo=null,Uu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _P&&e.locale!=="ko"?null:e.data;default:return null}}var mV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mV[t.type]:e==="textarea"}function jP(t,e,n,r){eP(r),e=gv(e,"onChange"),0<e.length&&(n=new n1("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var kf=null,Yf=null;function pV(t){MP(t,0)}function Mx(t){var e=qu(t);if(GT(e))return t}function gV(t,e){if(t==="change")return e}var NP=!1;if(Za){var b0;if(Za){var j0="oninput"in document;if(!j0){var l2=document.createElement("div");l2.setAttribute("oninput","return;"),j0=typeof l2.oninput=="function"}b0=j0}else b0=!1;NP=b0&&(!document.documentMode||9<document.documentMode)}function c2(){kf&&(kf.detachEvent("onpropertychange",SP),Yf=kf=null)}function SP(t){if(t.propertyName==="value"&&Mx(Yf)){var e=[];jP(e,Yf,t,Yb(t)),sP(pV,e)}}function vV(t,e,n){t==="focusin"?(c2(),kf=e,Yf=n,kf.attachEvent("onpropertychange",SP)):t==="focusout"&&c2()}function xV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mx(Yf)}function yV(t,e){if(t==="click")return Mx(e)}function _V(t,e){if(t==="input"||t==="change")return Mx(e)}function wV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ti=typeof Object.is=="function"?Object.is:wV;function Qf(t,e){if(Ti(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!I_.call(e,i)||!Ti(t[i],e[i]))return!1}return!0}function u2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d2(t,e){var n=u2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=u2(n)}}function EP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?EP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function CP(){for(var t=window,e=cv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=cv(t.document)}return e}function i1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bV(t){var e=CP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&EP(n.ownerDocument.documentElement,n)){if(r!==null&&i1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=d2(n,a);var o=d2(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jV=Za&&"documentMode"in document&&11>=document.documentMode,$u=null,Y_=null,Tf=null,Q_=!1;function h2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Q_||$u==null||$u!==cv(r)||(r=$u,"selectionStart"in r&&i1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Tf&&Qf(Tf,r)||(Tf=r,r=gv(Y_,"onSelect"),0<r.length&&(e=new n1("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$u)))}function ng(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bu={animationend:ng("Animation","AnimationEnd"),animationiteration:ng("Animation","AnimationIteration"),animationstart:ng("Animation","AnimationStart"),transitionend:ng("Transition","TransitionEnd")},N0={},kP={};Za&&(kP=document.createElement("div").style,"AnimationEvent"in window||(delete Bu.animationend.animation,delete Bu.animationiteration.animation,delete Bu.animationstart.animation),"TransitionEvent"in window||delete Bu.transitionend.transition);function Ox(t){if(N0[t])return N0[t];if(!Bu[t])return t;var e=Bu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kP)return N0[t]=e[n];return t}var TP=Ox("animationend"),PP=Ox("animationiteration"),IP=Ox("animationstart"),AP=Ox("transitionend"),RP=new Map,f2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cl(t,e){RP.set(t,e),Uc(e,[t])}for(var S0=0;S0<f2.length;S0++){var E0=f2[S0],NV=E0.toLowerCase(),SV=E0[0].toUpperCase()+E0.slice(1);Cl(NV,"on"+SV)}Cl(TP,"onAnimationEnd");Cl(PP,"onAnimationIteration");Cl(IP,"onAnimationStart");Cl("dblclick","onDoubleClick");Cl("focusin","onFocus");Cl("focusout","onBlur");Cl(AP,"onTransitionEnd");md("onMouseEnter",["mouseout","mouseover"]);md("onMouseLeave",["mouseout","mouseover"]);md("onPointerEnter",["pointerout","pointerover"]);md("onPointerLeave",["pointerout","pointerover"]);Uc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EV=new Set("cancel close invalid load scroll toggle".split(" ").concat(mf));function m2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,NF(r,e,void 0,t),t.currentTarget=null}function MP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==a&&i.isPropagationStopped())break e;m2(i,c,d),a=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==a&&i.isPropagationStopped())break e;m2(i,c,d),a=u}}}if(dv)throw t=H_,dv=!1,H_=null,t}function dn(t,e){var n=e[nw];n===void 0&&(n=e[nw]=new Set);var r=t+"__bubble";n.has(r)||(OP(e,t,2,!1),n.add(r))}function C0(t,e,n){var r=0;e&&(r|=4),OP(n,t,r,e)}var rg="_reactListening"+Math.random().toString(36).slice(2);function Xf(t){if(!t[rg]){t[rg]=!0,$T.forEach(function(n){n!=="selectionchange"&&(EV.has(n)||C0(n,!1,t),C0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rg]||(e[rg]=!0,C0("selectionchange",!1,e))}}function OP(t,e,n,r){switch(xP(e)){case 1:var i=zF;break;case 4:i=UF;break;default:i=e1}n=i.bind(null,e,n,t),i=void 0,!W_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function k0(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=nc(c),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}c=c.parentNode}}r=r.return}sP(function(){var d=a,f=Yb(n),p=[];e:{var g=RP.get(t);if(g!==void 0){var _=n1,N=t;switch(t){case"keypress":if(Og(n)===0)break e;case"keydown":case"keyup":_=nV;break;case"focusin":N="focus",_=w0;break;case"focusout":N="blur",_=w0;break;case"beforeblur":case"afterblur":_=w0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=n2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=qF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=iV;break;case TP:case PP:case IP:_=GF;break;case AP:_=oV;break;case"scroll":_=$F;break;case"wheel":_=cV;break;case"copy":case"cut":case"paste":_=ZF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=s2}var b=(e&4)!==0,S=!b&&t==="scroll",w=b?g!==null?g+"Capture":null:g;b=[];for(var y=d,E;y!==null;){E=y;var A=E.stateNode;if(E.tag===5&&A!==null&&(E=A,w!==null&&(A=Hf(y,w),A!=null&&b.push(Jf(y,A,E)))),S)break;y=y.return}0<b.length&&(g=new _(g,N,null,n,f),p.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==B_&&(N=n.relatedTarget||n.fromElement)&&(nc(N)||N[Ya]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(N=n.relatedTarget||n.toElement,_=d,N=N?nc(N):null,N!==null&&(S=$c(N),N!==S||N.tag!==5&&N.tag!==6)&&(N=null)):(_=null,N=d),_!==N)){if(b=n2,A="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(b=s2,A="onPointerLeave",w="onPointerEnter",y="pointer"),S=_==null?g:qu(_),E=N==null?g:qu(N),g=new b(A,y+"leave",_,n,f),g.target=S,g.relatedTarget=E,A=null,nc(f)===d&&(b=new b(w,y+"enter",N,n,f),b.target=E,b.relatedTarget=S,A=b),S=A,_&&N)t:{for(b=_,w=N,y=0,E=b;E;E=Eu(E))y++;for(E=0,A=w;A;A=Eu(A))E++;for(;0<y-E;)b=Eu(b),y--;for(;0<E-y;)w=Eu(w),E--;for(;y--;){if(b===w||w!==null&&b===w.alternate)break t;b=Eu(b),w=Eu(w)}b=null}else b=null;_!==null&&p2(p,g,_,b,!1),N!==null&&S!==null&&p2(p,S,N,b,!0)}}e:{if(g=d?qu(d):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var O=gV;else if(o2(g))if(NP)O=_V;else{O=xV;var q=vV}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=yV);if(O&&(O=O(t,d))){jP(p,O,n,f);break e}q&&q(t,g,d),t==="focusout"&&(q=g._wrapperState)&&q.controlled&&g.type==="number"&&F_(g,"number",g.value)}switch(q=d?qu(d):window,t){case"focusin":(o2(q)||q.contentEditable==="true")&&($u=q,Y_=d,Tf=null);break;case"focusout":Tf=Y_=$u=null;break;case"mousedown":Q_=!0;break;case"contextmenu":case"mouseup":case"dragend":Q_=!1,h2(p,n,f);break;case"selectionchange":if(jV)break;case"keydown":case"keyup":h2(p,n,f)}var R;if(s1)e:{switch(t){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else Uu?wP(t,n)&&(V="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(_P&&n.locale!=="ko"&&(Uu||V!=="onCompositionStart"?V==="onCompositionEnd"&&Uu&&(R=yP()):(Wo=f,t1="value"in Wo?Wo.value:Wo.textContent,Uu=!0)),q=gv(d,V),0<q.length&&(V=new r2(V,t,null,n,f),p.push({event:V,listeners:q}),R?V.data=R:(R=bP(n),R!==null&&(V.data=R)))),(R=dV?hV(t,n):fV(t,n))&&(d=gv(d,"onBeforeInput"),0<d.length&&(f=new r2("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=R))}MP(p,e)})}function Jf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gv(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Hf(t,n),a!=null&&r.unshift(Jf(t,a,i)),a=Hf(t,e),a!=null&&r.push(Jf(t,a,i))),t=t.return}return r}function Eu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function p2(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,i?(u=Hf(n,a),u!=null&&o.unshift(Jf(n,u,c))):i||(u=Hf(n,a),u!=null&&o.push(Jf(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var CV=/\r\n?/g,kV=/\u0000|\uFFFD/g;function g2(t){return(typeof t=="string"?t:""+t).replace(CV,`
`).replace(kV,"")}function sg(t,e,n){if(e=g2(e),g2(t)!==e&&n)throw Error(Te(425))}function vv(){}var X_=null,J_=null;function ew(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tw=typeof setTimeout=="function"?setTimeout:void 0,TV=typeof clearTimeout=="function"?clearTimeout:void 0,v2=typeof Promise=="function"?Promise:void 0,PV=typeof queueMicrotask=="function"?queueMicrotask:typeof v2<"u"?function(t){return v2.resolve(null).then(t).catch(IV)}:tw;function IV(t){setTimeout(function(){throw t})}function T0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Zf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Zf(e)}function el(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yd=Math.random().toString(36).slice(2),Ki="__reactFiber$"+Yd,em="__reactProps$"+Yd,Ya="__reactContainer$"+Yd,nw="__reactEvents$"+Yd,AV="__reactListeners$"+Yd,RV="__reactHandles$"+Yd;function nc(t){var e=t[Ki];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ya]||n[Ki]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x2(t);t!==null;){if(n=t[Ki])return n;t=x2(t)}return e}t=n,n=t.parentNode}return null}function Mm(t){return t=t[Ki]||t[Ya],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Te(33))}function Dx(t){return t[em]||null}var rw=[],Wu=-1;function kl(t){return{current:t}}function fn(t){0>Wu||(t.current=rw[Wu],rw[Wu]=null,Wu--)}function an(t,e){Wu++,rw[Wu]=t.current,t.current=e}var hl={},Fr=kl(hl),ms=kl(!1),wc=hl;function pd(t,e){var n=t.type.contextTypes;if(!n)return hl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ps(t){return t=t.childContextTypes,t!=null}function xv(){fn(ms),fn(Fr)}function y2(t,e,n){if(Fr.current!==hl)throw Error(Te(168));an(Fr,e),an(ms,n)}function DP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Te(108,vF(t)||"Unknown",i));return Cn({},n,r)}function yv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hl,wc=Fr.current,an(Fr,t),an(ms,ms.current),!0}function _2(t,e,n){var r=t.stateNode;if(!r)throw Error(Te(169));n?(t=DP(t,e,wc),r.__reactInternalMemoizedMergedChildContext=t,fn(ms),fn(Fr),an(Fr,t)):fn(ms),an(ms,n)}var Va=null,Lx=!1,P0=!1;function LP(t){Va===null?Va=[t]:Va.push(t)}function MV(t){Lx=!0,LP(t)}function Tl(){if(!P0&&Va!==null){P0=!0;var t=0,e=Kt;try{var n=Va;for(Kt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Va=null,Lx=!1}catch(i){throw Va!==null&&(Va=Va.slice(t+1)),lP(Qb,Tl),i}finally{Kt=e,P0=!1}}return null}var Hu=[],Gu=0,_v=null,wv=0,Gs=[],Ks=0,bc=null,Ua=1,$a="";function Xl(t,e){Hu[Gu++]=wv,Hu[Gu++]=_v,_v=t,wv=e}function FP(t,e,n){Gs[Ks++]=Ua,Gs[Ks++]=$a,Gs[Ks++]=bc,bc=t;var r=Ua;t=$a;var i=32-ji(r)-1;r&=~(1<<i),n+=1;var a=32-ji(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ua=1<<32-ji(e)+i|n<<i|r,$a=a+t}else Ua=1<<a|n<<i|r,$a=t}function a1(t){t.return!==null&&(Xl(t,1),FP(t,1,0))}function o1(t){for(;t===_v;)_v=Hu[--Gu],Hu[Gu]=null,wv=Hu[--Gu],Hu[Gu]=null;for(;t===bc;)bc=Gs[--Ks],Gs[Ks]=null,$a=Gs[--Ks],Gs[Ks]=null,Ua=Gs[--Ks],Gs[Ks]=null}var Ps=null,Cs=null,xn=!1,_i=null;function VP(t,e){var n=Ys(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function w2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ps=t,Cs=el(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ps=t,Cs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bc!==null?{id:Ua,overflow:$a}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ys(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ps=t,Cs=null,!0):!1;default:return!1}}function sw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function iw(t){if(xn){var e=Cs;if(e){var n=e;if(!w2(t,e)){if(sw(t))throw Error(Te(418));e=el(n.nextSibling);var r=Ps;e&&w2(t,e)?VP(r,n):(t.flags=t.flags&-4097|2,xn=!1,Ps=t)}}else{if(sw(t))throw Error(Te(418));t.flags=t.flags&-4097|2,xn=!1,Ps=t}}}function b2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ps=t}function ig(t){if(t!==Ps)return!1;if(!xn)return b2(t),xn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ew(t.type,t.memoizedProps)),e&&(e=Cs)){if(sw(t))throw zP(),Error(Te(418));for(;e;)VP(t,e),e=el(e.nextSibling)}if(b2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cs=el(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cs=null}}else Cs=Ps?el(t.stateNode.nextSibling):null;return!0}function zP(){for(var t=Cs;t;)t=el(t.nextSibling)}function gd(){Cs=Ps=null,xn=!1}function l1(t){_i===null?_i=[t]:_i.push(t)}var OV=ho.ReactCurrentBatchConfig;function Qh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Te(309));var r=n.stateNode}if(!r)throw Error(Te(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=i.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Te(284));if(!n._owner)throw Error(Te(290,t))}return t}function ag(t,e){throw t=Object.prototype.toString.call(e),Error(Te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function j2(t){var e=t._init;return e(t._payload)}function UP(t){function e(w,y){if(t){var E=w.deletions;E===null?(w.deletions=[y],w.flags|=16):E.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function i(w,y){return w=sl(w,y),w.index=0,w.sibling=null,w}function a(w,y,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<y?(w.flags|=2,y):E):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function c(w,y,E,A){return y===null||y.tag!==6?(y=L0(E,w.mode,A),y.return=w,y):(y=i(y,E),y.return=w,y)}function u(w,y,E,A){var O=E.type;return O===zu?f(w,y,E.props.children,A,E.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ro&&j2(O)===y.type)?(A=i(y,E.props),A.ref=Qh(w,y,E),A.return=w,A):(A=$g(E.type,E.key,E.props,null,w.mode,A),A.ref=Qh(w,y,E),A.return=w,A)}function d(w,y,E,A){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=F0(E,w.mode,A),y.return=w,y):(y=i(y,E.children||[]),y.return=w,y)}function f(w,y,E,A,O){return y===null||y.tag!==7?(y=dc(E,w.mode,A,O),y.return=w,y):(y=i(y,E),y.return=w,y)}function p(w,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=L0(""+y,w.mode,E),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zp:return E=$g(y.type,y.key,y.props,null,w.mode,E),E.ref=Qh(w,null,y),E.return=w,E;case Vu:return y=F0(y,w.mode,E),y.return=w,y;case Ro:var A=y._init;return p(w,A(y._payload),E)}if(hf(y)||Hh(y))return y=dc(y,w.mode,E,null),y.return=w,y;ag(w,y)}return null}function g(w,y,E,A){var O=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:c(w,y,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Zp:return E.key===O?u(w,y,E,A):null;case Vu:return E.key===O?d(w,y,E,A):null;case Ro:return O=E._init,g(w,y,O(E._payload),A)}if(hf(E)||Hh(E))return O!==null?null:f(w,y,E,A,null);ag(w,E)}return null}function _(w,y,E,A,O){if(typeof A=="string"&&A!==""||typeof A=="number")return w=w.get(E)||null,c(y,w,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Zp:return w=w.get(A.key===null?E:A.key)||null,u(y,w,A,O);case Vu:return w=w.get(A.key===null?E:A.key)||null,d(y,w,A,O);case Ro:var q=A._init;return _(w,y,E,q(A._payload),O)}if(hf(A)||Hh(A))return w=w.get(E)||null,f(y,w,A,O,null);ag(y,A)}return null}function N(w,y,E,A){for(var O=null,q=null,R=y,V=y=0,U=null;R!==null&&V<E.length;V++){R.index>V?(U=R,R=null):U=R.sibling;var k=g(w,R,E[V],A);if(k===null){R===null&&(R=U);break}t&&R&&k.alternate===null&&e(w,R),y=a(k,y,V),q===null?O=k:q.sibling=k,q=k,R=U}if(V===E.length)return n(w,R),xn&&Xl(w,V),O;if(R===null){for(;V<E.length;V++)R=p(w,E[V],A),R!==null&&(y=a(R,y,V),q===null?O=R:q.sibling=R,q=R);return xn&&Xl(w,V),O}for(R=r(w,R);V<E.length;V++)U=_(R,w,V,E[V],A),U!==null&&(t&&U.alternate!==null&&R.delete(U.key===null?V:U.key),y=a(U,y,V),q===null?O=U:q.sibling=U,q=U);return t&&R.forEach(function(F){return e(w,F)}),xn&&Xl(w,V),O}function b(w,y,E,A){var O=Hh(E);if(typeof O!="function")throw Error(Te(150));if(E=O.call(E),E==null)throw Error(Te(151));for(var q=O=null,R=y,V=y=0,U=null,k=E.next();R!==null&&!k.done;V++,k=E.next()){R.index>V?(U=R,R=null):U=R.sibling;var F=g(w,R,k.value,A);if(F===null){R===null&&(R=U);break}t&&R&&F.alternate===null&&e(w,R),y=a(F,y,V),q===null?O=F:q.sibling=F,q=F,R=U}if(k.done)return n(w,R),xn&&Xl(w,V),O;if(R===null){for(;!k.done;V++,k=E.next())k=p(w,k.value,A),k!==null&&(y=a(k,y,V),q===null?O=k:q.sibling=k,q=k);return xn&&Xl(w,V),O}for(R=r(w,R);!k.done;V++,k=E.next())k=_(R,w,V,k.value,A),k!==null&&(t&&k.alternate!==null&&R.delete(k.key===null?V:k.key),y=a(k,y,V),q===null?O=k:q.sibling=k,q=k);return t&&R.forEach(function(D){return e(w,D)}),xn&&Xl(w,V),O}function S(w,y,E,A){if(typeof E=="object"&&E!==null&&E.type===zu&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Zp:e:{for(var O=E.key,q=y;q!==null;){if(q.key===O){if(O=E.type,O===zu){if(q.tag===7){n(w,q.sibling),y=i(q,E.props.children),y.return=w,w=y;break e}}else if(q.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ro&&j2(O)===q.type){n(w,q.sibling),y=i(q,E.props),y.ref=Qh(w,q,E),y.return=w,w=y;break e}n(w,q);break}else e(w,q);q=q.sibling}E.type===zu?(y=dc(E.props.children,w.mode,A,E.key),y.return=w,w=y):(A=$g(E.type,E.key,E.props,null,w.mode,A),A.ref=Qh(w,y,E),A.return=w,w=A)}return o(w);case Vu:e:{for(q=E.key;y!==null;){if(y.key===q)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(w,y.sibling),y=i(y,E.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=F0(E,w.mode,A),y.return=w,w=y}return o(w);case Ro:return q=E._init,S(w,y,q(E._payload),A)}if(hf(E))return N(w,y,E,A);if(Hh(E))return b(w,y,E,A);ag(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(w,y.sibling),y=i(y,E),y.return=w,w=y):(n(w,y),y=L0(E,w.mode,A),y.return=w,w=y),o(w)):n(w,y)}return S}var vd=UP(!0),$P=UP(!1),bv=kl(null),jv=null,Ku=null,c1=null;function u1(){c1=Ku=jv=null}function d1(t){var e=bv.current;fn(bv),t._currentValue=e}function aw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function nd(t,e){jv=t,c1=Ku=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ds=!0),t.firstContext=null)}function si(t){var e=t._currentValue;if(c1!==t)if(t={context:t,memoizedValue:e,next:null},Ku===null){if(jv===null)throw Error(Te(308));Ku=t,jv.dependencies={lanes:0,firstContext:t}}else Ku=Ku.next=t;return e}var rc=null;function h1(t){rc===null?rc=[t]:rc.push(t)}function BP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,h1(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qa(t,r)}function Qa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mo=!1;function f1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ha(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ot&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qa(t,n)}return i=r.interleaved,i===null?(e.next=e,h1(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qa(t,n)}function Dg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xb(t,n)}}function N2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nv(t,e,n,r){var i=t.updateQueue;Mo=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(a!==null){var p=i.baseState;o=0,f=d=u=null,c=a;do{var g=c.lane,_=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:_,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=t,b=c;switch(g=e,_=n,b.tag){case 1:if(N=b.payload,typeof N=="function"){p=N.call(_,p,g);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=b.payload,g=typeof N=="function"?N.call(_,p,g):N,g==null)break e;p=Cn({},p,g);break e;case 2:Mo=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[c]:g.push(c))}else _={eventTime:_,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=_,u=p):f=f.next=_,o|=g;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;g=c,c=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Nc|=o,t.lanes=o,t.memoizedState=p}}function S2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Te(191,i));i.call(r)}}}var Om={},sa=kl(Om),tm=kl(Om),nm=kl(Om);function sc(t){if(t===Om)throw Error(Te(174));return t}function m1(t,e){switch(an(nm,e),an(tm,t),an(sa,Om),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:z_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=z_(e,t)}fn(sa),an(sa,e)}function xd(){fn(sa),fn(tm),fn(nm)}function WP(t){sc(nm.current);var e=sc(sa.current),n=z_(e,t.type);e!==n&&(an(tm,t),an(sa,n))}function p1(t){tm.current===t&&(fn(sa),fn(tm))}var Sn=kl(0);function Sv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var I0=[];function g1(){for(var t=0;t<I0.length;t++)I0[t]._workInProgressVersionPrimary=null;I0.length=0}var Lg=ho.ReactCurrentDispatcher,A0=ho.ReactCurrentBatchConfig,jc=0,En=null,ir=null,fr=null,Ev=!1,Pf=!1,rm=0,DV=0;function Cr(){throw Error(Te(321))}function v1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ti(t[n],e[n]))return!1;return!0}function x1(t,e,n,r,i,a){if(jc=a,En=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lg.current=t===null||t.memoizedState===null?zV:UV,t=n(r,i),Pf){a=0;do{if(Pf=!1,rm=0,25<=a)throw Error(Te(301));a+=1,fr=ir=null,e.updateQueue=null,Lg.current=$V,t=n(r,i)}while(Pf)}if(Lg.current=Cv,e=ir!==null&&ir.next!==null,jc=0,fr=ir=En=null,Ev=!1,e)throw Error(Te(300));return t}function y1(){var t=rm!==0;return rm=0,t}function qi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?En.memoizedState=fr=t:fr=fr.next=t,fr}function ii(){if(ir===null){var t=En.alternate;t=t!==null?t.memoizedState:null}else t=ir.next;var e=fr===null?En.memoizedState:fr.next;if(e!==null)fr=e,ir=t;else{if(t===null)throw Error(Te(310));ir=t,t={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},fr===null?En.memoizedState=fr=t:fr=fr.next=t}return fr}function sm(t,e){return typeof e=="function"?e(t):e}function R0(t){var e=ii(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=ir,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var c=o=null,u=null,d=a;do{var f=d.lane;if((jc&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,En.lanes|=f,Nc|=f}d=d.next}while(d!==null&&d!==a);u===null?o=r:u.next=c,Ti(r,e.memoizedState)||(ds=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,En.lanes|=a,Nc|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function M0(t){var e=ii(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Ti(a,e.memoizedState)||(ds=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function HP(){}function GP(t,e){var n=En,r=ii(),i=e(),a=!Ti(r.memoizedState,i);if(a&&(r.memoizedState=i,ds=!0),r=r.queue,_1(YP.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||fr!==null&&fr.memoizedState.tag&1){if(n.flags|=2048,im(9,ZP.bind(null,n,r,i,e),void 0,null),pr===null)throw Error(Te(349));jc&30||KP(n,e,i)}return i}function KP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ZP(t,e,n,r){e.value=n,e.getSnapshot=r,QP(e)&&XP(t)}function YP(t,e,n){return n(function(){QP(e)&&XP(t)})}function QP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ti(t,n)}catch{return!0}}function XP(t){var e=Qa(t,1);e!==null&&Ni(e,t,1,-1)}function E2(t){var e=qi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sm,lastRenderedState:t},e.queue=t,t=t.dispatch=VV.bind(null,En,t),[e.memoizedState,t]}function im(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function JP(){return ii().memoizedState}function Fg(t,e,n,r){var i=qi();En.flags|=t,i.memoizedState=im(1|e,n,void 0,r===void 0?null:r)}function Fx(t,e,n,r){var i=ii();r=r===void 0?null:r;var a=void 0;if(ir!==null){var o=ir.memoizedState;if(a=o.destroy,r!==null&&v1(r,o.deps)){i.memoizedState=im(e,n,a,r);return}}En.flags|=t,i.memoizedState=im(1|e,n,a,r)}function C2(t,e){return Fg(8390656,8,t,e)}function _1(t,e){return Fx(2048,8,t,e)}function eI(t,e){return Fx(4,2,t,e)}function tI(t,e){return Fx(4,4,t,e)}function nI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rI(t,e,n){return n=n!=null?n.concat([t]):null,Fx(4,4,nI.bind(null,e,t),n)}function w1(){}function sI(t,e){var n=ii();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&v1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function iI(t,e){var n=ii();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&v1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aI(t,e,n){return jc&21?(Ti(n,e)||(n=dP(),En.lanes|=n,Nc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ds=!0),t.memoizedState=n)}function LV(t,e){var n=Kt;Kt=n!==0&&4>n?n:4,t(!0);var r=A0.transition;A0.transition={};try{t(!1),e()}finally{Kt=n,A0.transition=r}}function oI(){return ii().memoizedState}function FV(t,e,n){var r=rl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lI(t))cI(e,n);else if(n=BP(t,e,n,r),n!==null){var i=Yr();Ni(n,t,r,i),uI(n,e,r)}}function VV(t,e,n){var r=rl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lI(t))cI(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,n);if(i.hasEagerState=!0,i.eagerState=c,Ti(c,o)){var u=e.interleaved;u===null?(i.next=i,h1(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=BP(t,e,i,r),n!==null&&(i=Yr(),Ni(n,t,r,i),uI(n,e,r))}}function lI(t){var e=t.alternate;return t===En||e!==null&&e===En}function cI(t,e){Pf=Ev=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xb(t,n)}}var Cv={readContext:si,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},zV={readContext:si,useCallback:function(t,e){return qi().memoizedState=[t,e===void 0?null:e],t},useContext:si,useEffect:C2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fg(4194308,4,nI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fg(4,2,t,e)},useMemo:function(t,e){var n=qi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FV.bind(null,En,t),[r.memoizedState,t]},useRef:function(t){var e=qi();return t={current:t},e.memoizedState=t},useState:E2,useDebugValue:w1,useDeferredValue:function(t){return qi().memoizedState=t},useTransition:function(){var t=E2(!1),e=t[0];return t=LV.bind(null,t[1]),qi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=En,i=qi();if(xn){if(n===void 0)throw Error(Te(407));n=n()}else{if(n=e(),pr===null)throw Error(Te(349));jc&30||KP(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,C2(YP.bind(null,r,a,t),[t]),r.flags|=2048,im(9,ZP.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=qi(),e=pr.identifierPrefix;if(xn){var n=$a,r=Ua;n=(r&~(1<<32-ji(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=rm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UV={readContext:si,useCallback:sI,useContext:si,useEffect:_1,useImperativeHandle:rI,useInsertionEffect:eI,useLayoutEffect:tI,useMemo:iI,useReducer:R0,useRef:JP,useState:function(){return R0(sm)},useDebugValue:w1,useDeferredValue:function(t){var e=ii();return aI(e,ir.memoizedState,t)},useTransition:function(){var t=R0(sm)[0],e=ii().memoizedState;return[t,e]},useMutableSource:HP,useSyncExternalStore:GP,useId:oI,unstable_isNewReconciler:!1},$V={readContext:si,useCallback:sI,useContext:si,useEffect:_1,useImperativeHandle:rI,useInsertionEffect:eI,useLayoutEffect:tI,useMemo:iI,useReducer:M0,useRef:JP,useState:function(){return M0(sm)},useDebugValue:w1,useDeferredValue:function(t){var e=ii();return ir===null?e.memoizedState=t:aI(e,ir.memoizedState,t)},useTransition:function(){var t=M0(sm)[0],e=ii().memoizedState;return[t,e]},useMutableSource:HP,useSyncExternalStore:GP,useId:oI,unstable_isNewReconciler:!1};function vi(t,e){if(t&&t.defaultProps){e=Cn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ow(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Cn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vx={isMounted:function(t){return(t=t._reactInternals)?$c(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yr(),i=rl(t),a=Ha(r,i);a.payload=e,n!=null&&(a.callback=n),e=tl(t,a,i),e!==null&&(Ni(e,t,i,r),Dg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yr(),i=rl(t),a=Ha(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=tl(t,a,i),e!==null&&(Ni(e,t,i,r),Dg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yr(),r=rl(t),i=Ha(n,r);i.tag=2,e!=null&&(i.callback=e),e=tl(t,i,r),e!==null&&(Ni(e,t,r,n),Dg(e,t,r))}};function k2(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Qf(n,r)||!Qf(i,a):!0}function dI(t,e,n){var r=!1,i=hl,a=e.contextType;return typeof a=="object"&&a!==null?a=si(a):(i=ps(e)?wc:Fr.current,r=e.contextTypes,a=(r=r!=null)?pd(t,i):hl),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function T2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vx.enqueueReplaceState(e,e.state,null)}function lw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},f1(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=si(a):(a=ps(e)?wc:Fr.current,i.context=pd(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(ow(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vx.enqueueReplaceState(i,i.state,null),Nv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function yd(t,e){try{var n="",r=e;do n+=gF(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function O0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BV=typeof WeakMap=="function"?WeakMap:Map;function hI(t,e,n){n=Ha(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Tv||(Tv=!0,yw=r),cw(t,e)},n}function fI(t,e,n){n=Ha(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){cw(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){cw(t,e),typeof r!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function P2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BV;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=r9.bind(null,t,e,n),e.then(t,t))}function I2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function A2(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ha(-1,1),e.tag=2,tl(n,e,1))),n.lanes|=1),t)}var qV=ho.ReactCurrentOwner,ds=!1;function Hr(t,e,n,r){e.child=t===null?$P(e,null,n,r):vd(e,t.child,n,r)}function R2(t,e,n,r,i){n=n.render;var a=e.ref;return nd(e,i),r=x1(t,e,n,r,a,i),n=y1(),t!==null&&!ds?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xa(t,e,i)):(xn&&n&&a1(e),e.flags|=1,Hr(t,e,r,i),e.child)}function M2(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!T1(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,mI(t,e,a,r,i)):(t=$g(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Qf,n(o,r)&&t.ref===e.ref)return Xa(t,e,i)}return e.flags|=1,t=sl(a,r),t.ref=e.ref,t.return=e,e.child=t}function mI(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Qf(a,r)&&t.ref===e.ref)if(ds=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(ds=!0);else return e.lanes=t.lanes,Xa(t,e,i)}return uw(t,e,n,r,i)}function pI(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(Yu,Ss),Ss|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,an(Yu,Ss),Ss|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,an(Yu,Ss),Ss|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,an(Yu,Ss),Ss|=r;return Hr(t,e,i,n),e.child}function gI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uw(t,e,n,r,i){var a=ps(n)?wc:Fr.current;return a=pd(e,a),nd(e,i),n=x1(t,e,n,r,a,i),r=y1(),t!==null&&!ds?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xa(t,e,i)):(xn&&r&&a1(e),e.flags|=1,Hr(t,e,n,i),e.child)}function O2(t,e,n,r,i){if(ps(n)){var a=!0;yv(e)}else a=!1;if(nd(e,i),e.stateNode===null)Vg(t,e),dI(e,n,r),lw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=si(d):(d=ps(n)?wc:Fr.current,d=pd(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&T2(e,o,r,d),Mo=!1;var g=e.memoizedState;o.state=g,Nv(e,r,o,i),u=e.memoizedState,c!==r||g!==u||ms.current||Mo?(typeof f=="function"&&(ow(e,n,f,r),u=e.memoizedState),(c=Mo||k2(e,n,c,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,qP(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:vi(e.type,c),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=si(u):(u=ps(n)?wc:Fr.current,u=pd(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||g!==u)&&T2(e,o,r,u),Mo=!1,g=e.memoizedState,o.state=g,Nv(e,r,o,i);var N=e.memoizedState;c!==p||g!==N||ms.current||Mo?(typeof _=="function"&&(ow(e,n,_,r),N=e.memoizedState),(d=Mo||k2(e,n,d,r,g,N,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return dw(t,e,n,r,a,i)}function dw(t,e,n,r,i,a){gI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&_2(e,n,!1),Xa(t,e,a);r=e.stateNode,qV.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=vd(e,t.child,null,a),e.child=vd(e,null,c,a)):Hr(t,e,c,a),e.memoizedState=r.state,i&&_2(e,n,!0),e.child}function vI(t){var e=t.stateNode;e.pendingContext?y2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&y2(t,e.context,!1),m1(t,e.containerInfo)}function D2(t,e,n,r,i){return gd(),l1(i),e.flags|=256,Hr(t,e,n,r),e.child}var hw={dehydrated:null,treeContext:null,retryLane:0};function fw(t){return{baseLanes:t,cachePool:null,transitions:null}}function xI(t,e,n){var r=e.pendingProps,i=Sn.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),an(Sn,i&1),t===null)return iw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=$x(o,r,0,null),t=dc(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=fw(n),e.memoizedState=hw,t):b1(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return WV(t,e,o,r,c,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=sl(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=sl(c,a):(a=dc(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?fw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=hw,r}return a=t.child,t=a.sibling,r=sl(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function b1(t,e){return e=$x({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function og(t,e,n,r){return r!==null&&l1(r),vd(e,t.child,null,n),t=b1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function WV(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=O0(Error(Te(422))),og(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=$x({mode:"visible",children:r.children},i,0,null),a=dc(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&vd(e,t.child,null,o),e.child.memoizedState=fw(o),e.memoizedState=hw,a);if(!(e.mode&1))return og(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(Te(419)),r=O0(a,r,void 0),og(t,e,o,r)}if(c=(o&t.childLanes)!==0,ds||c){if(r=pr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Qa(t,i),Ni(r,t,i,-1))}return k1(),r=O0(Error(Te(421))),og(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=s9.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Cs=el(i.nextSibling),Ps=e,xn=!0,_i=null,t!==null&&(Gs[Ks++]=Ua,Gs[Ks++]=$a,Gs[Ks++]=bc,Ua=t.id,$a=t.overflow,bc=e),e=b1(e,r.children),e.flags|=4096,e)}function L2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),aw(t.return,e,n)}function D0(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function yI(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Hr(t,e,r.children,n),r=Sn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L2(t,n,e);else if(t.tag===19)L2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(an(Sn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Sv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),D0(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Sv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}D0(e,!0,n,null,a);break;case"together":D0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Te(153));if(e.child!==null){for(t=e.child,n=sl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HV(t,e,n){switch(e.tag){case 3:vI(e),gd();break;case 5:WP(e);break;case 1:ps(e.type)&&yv(e);break;case 4:m1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;an(bv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(an(Sn,Sn.current&1),e.flags|=128,null):n&e.child.childLanes?xI(t,e,n):(an(Sn,Sn.current&1),t=Xa(t,e,n),t!==null?t.sibling:null);an(Sn,Sn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return yI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),an(Sn,Sn.current),r)break;return null;case 22:case 23:return e.lanes=0,pI(t,e,n)}return Xa(t,e,n)}var _I,mw,wI,bI;_I=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mw=function(){};wI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,sc(sa.current);var a=null;switch(n){case"input":i=D_(t,i),r=D_(t,r),a=[];break;case"select":i=Cn({},i,{value:void 0}),r=Cn({},r,{value:void 0}),a=[];break;case"textarea":i=V_(t,i),r=V_(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=vv)}U_(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(qf.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(qf.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&dn("scroll",t),a||c===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};bI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xh(t,e){if(!xn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GV(t,e,n){var r=e.pendingProps;switch(o1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(e),null;case 1:return ps(e.type)&&xv(),kr(e),null;case 3:return r=e.stateNode,xd(),fn(ms),fn(Fr),g1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ig(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_i!==null&&(bw(_i),_i=null))),mw(t,e),kr(e),null;case 5:p1(e);var i=sc(nm.current);if(n=e.type,t!==null&&e.stateNode!=null)wI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Te(166));return kr(e),null}if(t=sc(sa.current),ig(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Ki]=e,r[em]=a,t=(e.mode&1)!==0,n){case"dialog":dn("cancel",r),dn("close",r);break;case"iframe":case"object":case"embed":dn("load",r);break;case"video":case"audio":for(i=0;i<mf.length;i++)dn(mf[i],r);break;case"source":dn("error",r);break;case"img":case"image":case"link":dn("error",r),dn("load",r);break;case"details":dn("toggle",r);break;case"input":HS(r,a),dn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},dn("invalid",r);break;case"textarea":KS(r,a),dn("invalid",r)}U_(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&sg(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&sg(r.textContent,c,t),i=["children",""+c]):qf.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&dn("scroll",r)}switch(n){case"input":Yp(r),GS(r,a,!0);break;case"textarea":Yp(r),ZS(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=vv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ki]=e,t[em]=r,_I(t,e,!1,!1),e.stateNode=t;e:{switch(o=$_(n,r),n){case"dialog":dn("cancel",t),dn("close",t),i=r;break;case"iframe":case"object":case"embed":dn("load",t),i=r;break;case"video":case"audio":for(i=0;i<mf.length;i++)dn(mf[i],t);i=r;break;case"source":dn("error",t),i=r;break;case"img":case"image":case"link":dn("error",t),dn("load",t),i=r;break;case"details":dn("toggle",t),i=r;break;case"input":HS(t,r),i=D_(t,r),dn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Cn({},r,{value:void 0}),dn("invalid",t);break;case"textarea":KS(t,r),i=V_(t,r),dn("invalid",t);break;default:i=r}U_(n,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?JT(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&QT(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Wf(t,u):typeof u=="number"&&Wf(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(qf.hasOwnProperty(a)?u!=null&&a==="onScroll"&&dn("scroll",t):u!=null&&Hb(t,a,u,o))}switch(n){case"input":Yp(t),GS(t,r,!1);break;case"textarea":Yp(t),ZS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+dl(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Xu(t,!!r.multiple,a,!1):r.defaultValue!=null&&Xu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=vv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kr(e),null;case 6:if(t&&e.stateNode!=null)bI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Te(166));if(n=sc(nm.current),sc(sa.current),ig(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ki]=e,(a=r.nodeValue!==n)&&(t=Ps,t!==null))switch(t.tag){case 3:sg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sg(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ki]=e,e.stateNode=r}return kr(e),null;case 13:if(fn(Sn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xn&&Cs!==null&&e.mode&1&&!(e.flags&128))zP(),gd(),e.flags|=98560,a=!1;else if(a=ig(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Te(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Te(317));a[Ki]=e}else gd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kr(e),a=!1}else _i!==null&&(bw(_i),_i=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Sn.current&1?ar===0&&(ar=3):k1())),e.updateQueue!==null&&(e.flags|=4),kr(e),null);case 4:return xd(),mw(t,e),t===null&&Xf(e.stateNode.containerInfo),kr(e),null;case 10:return d1(e.type._context),kr(e),null;case 17:return ps(e.type)&&xv(),kr(e),null;case 19:if(fn(Sn),a=e.memoizedState,a===null)return kr(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Xh(a,!1);else{if(ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Sv(t),o!==null){for(e.flags|=128,Xh(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return an(Sn,Sn.current&1|2),e.child}t=t.sibling}a.tail!==null&&Dn()>_d&&(e.flags|=128,r=!0,Xh(a,!1),e.lanes=4194304)}else{if(!r)if(t=Sv(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xh(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!xn)return kr(e),null}else 2*Dn()-a.renderingStartTime>_d&&n!==1073741824&&(e.flags|=128,r=!0,Xh(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Dn(),e.sibling=null,n=Sn.current,an(Sn,r?n&1|2:n&1),e):(kr(e),null);case 22:case 23:return C1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ss&1073741824&&(kr(e),e.subtreeFlags&6&&(e.flags|=8192)):kr(e),null;case 24:return null;case 25:return null}throw Error(Te(156,e.tag))}function KV(t,e){switch(o1(e),e.tag){case 1:return ps(e.type)&&xv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xd(),fn(ms),fn(Fr),g1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return p1(e),null;case 13:if(fn(Sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Te(340));gd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fn(Sn),null;case 4:return xd(),null;case 10:return d1(e.type._context),null;case 22:case 23:return C1(),null;case 24:return null;default:return null}}var lg=!1,Ar=!1,ZV=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Zu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pn(t,e,r)}else n.current=null}function pw(t,e,n){try{n()}catch(r){Pn(t,e,r)}}var F2=!1;function YV(t,e){if(X_=mv,t=CP(),i1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(c=o+i),p!==a||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)g=p,p=_;for(;;){if(p===t)break t;if(g===n&&++d===i&&(c=o),g===a&&++f===r&&(u=o),(_=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=_}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(J_={focusedElem:t,selectionRange:n},mv=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var b=N.memoizedProps,S=N.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:vi(e.type,b),S);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(A){Pn(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return N=F2,F2=!1,N}function If(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&pw(e,n,a)}i=i.next}while(i!==r)}}function zx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jI(t){var e=t.alternate;e!==null&&(t.alternate=null,jI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ki],delete e[em],delete e[nw],delete e[AV],delete e[RV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NI(t){return t.tag===5||t.tag===3||t.tag===4}function V2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vv));else if(r!==4&&(t=t.child,t!==null))for(vw(t,e,n),t=t.sibling;t!==null;)vw(t,e,n),t=t.sibling}function xw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xw(t,e,n),t=t.sibling;t!==null;)xw(t,e,n),t=t.sibling}var vr=null,xi=!1;function Co(t,e,n){for(n=n.child;n!==null;)SI(t,e,n),n=n.sibling}function SI(t,e,n){if(ra&&typeof ra.onCommitFiberUnmount=="function")try{ra.onCommitFiberUnmount(Ax,n)}catch{}switch(n.tag){case 5:Ar||Zu(n,e);case 6:var r=vr,i=xi;vr=null,Co(t,e,n),vr=r,xi=i,vr!==null&&(xi?(t=vr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vr.removeChild(n.stateNode));break;case 18:vr!==null&&(xi?(t=vr,n=n.stateNode,t.nodeType===8?T0(t.parentNode,n):t.nodeType===1&&T0(t,n),Zf(t)):T0(vr,n.stateNode));break;case 4:r=vr,i=xi,vr=n.stateNode.containerInfo,xi=!0,Co(t,e,n),vr=r,xi=i;break;case 0:case 11:case 14:case 15:if(!Ar&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&pw(n,e,o),i=i.next}while(i!==r)}Co(t,e,n);break;case 1:if(!Ar&&(Zu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Pn(n,e,c)}Co(t,e,n);break;case 21:Co(t,e,n);break;case 22:n.mode&1?(Ar=(r=Ar)||n.memoizedState!==null,Co(t,e,n),Ar=r):Co(t,e,n);break;default:Co(t,e,n)}}function z2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZV),e.forEach(function(r){var i=i9.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:vr=c.stateNode,xi=!1;break e;case 3:vr=c.stateNode.containerInfo,xi=!0;break e;case 4:vr=c.stateNode.containerInfo,xi=!0;break e}c=c.return}if(vr===null)throw Error(Te(160));SI(a,o,i),vr=null,xi=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Pn(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EI(e,t),e=e.sibling}function EI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mi(e,t),Bi(t),r&4){try{If(3,t,t.return),zx(3,t)}catch(b){Pn(t,t.return,b)}try{If(5,t,t.return)}catch(b){Pn(t,t.return,b)}}break;case 1:mi(e,t),Bi(t),r&512&&n!==null&&Zu(n,n.return);break;case 5:if(mi(e,t),Bi(t),r&512&&n!==null&&Zu(n,n.return),t.flags&32){var i=t.stateNode;try{Wf(i,"")}catch(b){Pn(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&KT(i,a),$_(c,o);var d=$_(c,a);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?JT(i,p):f==="dangerouslySetInnerHTML"?QT(i,p):f==="children"?Wf(i,p):Hb(i,f,p,d)}switch(c){case"input":L_(i,a);break;case"textarea":ZT(i,a);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var _=a.value;_!=null?Xu(i,!!a.multiple,_,!1):g!==!!a.multiple&&(a.defaultValue!=null?Xu(i,!!a.multiple,a.defaultValue,!0):Xu(i,!!a.multiple,a.multiple?[]:"",!1))}i[em]=a}catch(b){Pn(t,t.return,b)}}break;case 6:if(mi(e,t),Bi(t),r&4){if(t.stateNode===null)throw Error(Te(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(b){Pn(t,t.return,b)}}break;case 3:if(mi(e,t),Bi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zf(e.containerInfo)}catch(b){Pn(t,t.return,b)}break;case 4:mi(e,t),Bi(t);break;case 13:mi(e,t),Bi(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(S1=Dn())),r&4&&z2(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ar=(d=Ar)||f,mi(e,t),Ar=d):mi(e,t),Bi(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Ye=t,f=t.child;f!==null;){for(p=Ye=f;Ye!==null;){switch(g=Ye,_=g.child,g.tag){case 0:case 11:case 14:case 15:If(4,g,g.return);break;case 1:Zu(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(b){Pn(r,n,b)}}break;case 5:Zu(g,g.return);break;case 22:if(g.memoizedState!==null){$2(p);continue}}_!==null?(_.return=g,Ye=_):$2(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=XT("display",o))}catch(b){Pn(t,t.return,b)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(b){Pn(t,t.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mi(e,t),Bi(t),r&4&&z2(t);break;case 21:break;default:mi(e,t),Bi(t)}}function Bi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NI(n)){var r=n;break e}n=n.return}throw Error(Te(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wf(i,""),r.flags&=-33);var a=V2(t);xw(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=V2(t);vw(t,c,o);break;default:throw Error(Te(161))}}catch(u){Pn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QV(t,e,n){Ye=t,CI(t)}function CI(t,e,n){for(var r=(t.mode&1)!==0;Ye!==null;){var i=Ye,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||lg;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||Ar;c=lg;var d=Ar;if(lg=o,(Ar=u)&&!d)for(Ye=i;Ye!==null;)o=Ye,u=o.child,o.tag===22&&o.memoizedState!==null?B2(i):u!==null?(u.return=o,Ye=u):B2(i);for(;a!==null;)Ye=a,CI(a),a=a.sibling;Ye=i,lg=c,Ar=d}U2(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ye=a):U2(t)}}function U2(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ar||zx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ar)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&S2(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}S2(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Zf(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}Ar||e.flags&512&&gw(e)}catch(g){Pn(e,e.return,g)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function $2(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function B2(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zx(4,e)}catch(u){Pn(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Pn(e,i,u)}}var a=e.return;try{gw(e)}catch(u){Pn(e,a,u)}break;case 5:var o=e.return;try{gw(e)}catch(u){Pn(e,o,u)}}}catch(u){Pn(e,e.return,u)}if(e===t){Ye=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Ye=c;break}Ye=e.return}}var XV=Math.ceil,kv=ho.ReactCurrentDispatcher,j1=ho.ReactCurrentOwner,Js=ho.ReactCurrentBatchConfig,Ot=0,pr=null,Yn=null,wr=0,Ss=0,Yu=kl(0),ar=0,am=null,Nc=0,Ux=0,N1=0,Af=null,cs=null,S1=0,_d=1/0,Fa=null,Tv=!1,yw=null,nl=null,cg=!1,Ho=null,Pv=0,Rf=0,_w=null,zg=-1,Ug=0;function Yr(){return Ot&6?Dn():zg!==-1?zg:zg=Dn()}function rl(t){return t.mode&1?Ot&2&&wr!==0?wr&-wr:OV.transition!==null?(Ug===0&&(Ug=dP()),Ug):(t=Kt,t!==0||(t=window.event,t=t===void 0?16:xP(t.type)),t):1}function Ni(t,e,n,r){if(50<Rf)throw Rf=0,_w=null,Error(Te(185));Am(t,n,r),(!(Ot&2)||t!==pr)&&(t===pr&&(!(Ot&2)&&(Ux|=n),ar===4&&Fo(t,wr)),gs(t,r),n===1&&Ot===0&&!(e.mode&1)&&(_d=Dn()+500,Lx&&Tl()))}function gs(t,e){var n=t.callbackNode;OF(t,e);var r=fv(t,t===pr?wr:0);if(r===0)n!==null&&XS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&XS(n),e===1)t.tag===0?MV(q2.bind(null,t)):LP(q2.bind(null,t)),PV(function(){!(Ot&6)&&Tl()}),n=null;else{switch(hP(r)){case 1:n=Qb;break;case 4:n=cP;break;case 16:n=hv;break;case 536870912:n=uP;break;default:n=hv}n=OI(n,kI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kI(t,e){if(zg=-1,Ug=0,Ot&6)throw Error(Te(327));var n=t.callbackNode;if(rd()&&t.callbackNode!==n)return null;var r=fv(t,t===pr?wr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Iv(t,r);else{e=r;var i=Ot;Ot|=2;var a=PI();(pr!==t||wr!==e)&&(Fa=null,_d=Dn()+500,uc(t,e));do try{t9();break}catch(c){TI(t,c)}while(!0);u1(),kv.current=a,Ot=i,Yn!==null?e=0:(pr=null,wr=0,e=ar)}if(e!==0){if(e===2&&(i=G_(t),i!==0&&(r=i,e=ww(t,i))),e===1)throw n=am,uc(t,0),Fo(t,r),gs(t,Dn()),n;if(e===6)Fo(t,r);else{if(i=t.current.alternate,!(r&30)&&!JV(i)&&(e=Iv(t,r),e===2&&(a=G_(t),a!==0&&(r=a,e=ww(t,a))),e===1))throw n=am,uc(t,0),Fo(t,r),gs(t,Dn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Te(345));case 2:Jl(t,cs,Fa);break;case 3:if(Fo(t,r),(r&130023424)===r&&(e=S1+500-Dn(),10<e)){if(fv(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tw(Jl.bind(null,t,cs,Fa),e);break}Jl(t,cs,Fa);break;case 4:if(Fo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ji(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=Dn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XV(r/1960))-r,10<r){t.timeoutHandle=tw(Jl.bind(null,t,cs,Fa),r);break}Jl(t,cs,Fa);break;case 5:Jl(t,cs,Fa);break;default:throw Error(Te(329))}}}return gs(t,Dn()),t.callbackNode===n?kI.bind(null,t):null}function ww(t,e){var n=Af;return t.current.memoizedState.isDehydrated&&(uc(t,e).flags|=256),t=Iv(t,e),t!==2&&(e=cs,cs=n,e!==null&&bw(e)),t}function bw(t){cs===null?cs=t:cs.push.apply(cs,t)}function JV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Ti(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fo(t,e){for(e&=~N1,e&=~Ux,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ji(e),r=1<<n;t[n]=-1,e&=~r}}function q2(t){if(Ot&6)throw Error(Te(327));rd();var e=fv(t,0);if(!(e&1))return gs(t,Dn()),null;var n=Iv(t,e);if(t.tag!==0&&n===2){var r=G_(t);r!==0&&(e=r,n=ww(t,r))}if(n===1)throw n=am,uc(t,0),Fo(t,e),gs(t,Dn()),n;if(n===6)throw Error(Te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jl(t,cs,Fa),gs(t,Dn()),null}function E1(t,e){var n=Ot;Ot|=1;try{return t(e)}finally{Ot=n,Ot===0&&(_d=Dn()+500,Lx&&Tl())}}function Sc(t){Ho!==null&&Ho.tag===0&&!(Ot&6)&&rd();var e=Ot;Ot|=1;var n=Js.transition,r=Kt;try{if(Js.transition=null,Kt=1,t)return t()}finally{Kt=r,Js.transition=n,Ot=e,!(Ot&6)&&Tl()}}function C1(){Ss=Yu.current,fn(Yu)}function uc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,TV(n)),Yn!==null)for(n=Yn.return;n!==null;){var r=n;switch(o1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xv();break;case 3:xd(),fn(ms),fn(Fr),g1();break;case 5:p1(r);break;case 4:xd();break;case 13:fn(Sn);break;case 19:fn(Sn);break;case 10:d1(r.type._context);break;case 22:case 23:C1()}n=n.return}if(pr=t,Yn=t=sl(t.current,null),wr=Ss=e,ar=0,am=null,N1=Ux=Nc=0,cs=Af=null,rc!==null){for(e=0;e<rc.length;e++)if(n=rc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}rc=null}return t}function TI(t,e){do{var n=Yn;try{if(u1(),Lg.current=Cv,Ev){for(var r=En.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ev=!1}if(jc=0,fr=ir=En=null,Pf=!1,rm=0,j1.current=null,n===null||n.return===null){ar=1,am=e,Yn=null;break}e:{var a=t,o=n.return,c=n,u=e;if(e=wr,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=I2(o);if(_!==null){_.flags&=-257,A2(_,o,c,a,e),_.mode&1&&P2(a,d,e),e=_,u=d;var N=e.updateQueue;if(N===null){var b=new Set;b.add(u),e.updateQueue=b}else N.add(u);break e}else{if(!(e&1)){P2(a,d,e),k1();break e}u=Error(Te(426))}}else if(xn&&c.mode&1){var S=I2(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),A2(S,o,c,a,e),l1(yd(u,c));break e}}a=u=yd(u,c),ar!==4&&(ar=2),Af===null?Af=[a]:Af.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var w=hI(a,u,e);N2(a,w);break e;case 1:c=u;var y=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(nl===null||!nl.has(E)))){a.flags|=65536,e&=-e,a.lanes|=e;var A=fI(a,c,e);N2(a,A);break e}}a=a.return}while(a!==null)}AI(n)}catch(O){e=O,Yn===n&&n!==null&&(Yn=n=n.return);continue}break}while(!0)}function PI(){var t=kv.current;return kv.current=Cv,t===null?Cv:t}function k1(){(ar===0||ar===3||ar===2)&&(ar=4),pr===null||!(Nc&268435455)&&!(Ux&268435455)||Fo(pr,wr)}function Iv(t,e){var n=Ot;Ot|=2;var r=PI();(pr!==t||wr!==e)&&(Fa=null,uc(t,e));do try{e9();break}catch(i){TI(t,i)}while(!0);if(u1(),Ot=n,kv.current=r,Yn!==null)throw Error(Te(261));return pr=null,wr=0,ar}function e9(){for(;Yn!==null;)II(Yn)}function t9(){for(;Yn!==null&&!EF();)II(Yn)}function II(t){var e=MI(t.alternate,t,Ss);t.memoizedProps=t.pendingProps,e===null?AI(t):Yn=e,j1.current=null}function AI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=KV(n,e),n!==null){n.flags&=32767,Yn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ar=6,Yn=null;return}}else if(n=GV(n,e,Ss),n!==null){Yn=n;return}if(e=e.sibling,e!==null){Yn=e;return}Yn=e=t}while(e!==null);ar===0&&(ar=5)}function Jl(t,e,n){var r=Kt,i=Js.transition;try{Js.transition=null,Kt=1,n9(t,e,n,r)}finally{Js.transition=i,Kt=r}return null}function n9(t,e,n,r){do rd();while(Ho!==null);if(Ot&6)throw Error(Te(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Te(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(DF(t,a),t===pr&&(Yn=pr=null,wr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cg||(cg=!0,OI(hv,function(){return rd(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Js.transition,Js.transition=null;var o=Kt;Kt=1;var c=Ot;Ot|=4,j1.current=null,YV(t,n),EI(n,t),bV(J_),mv=!!X_,J_=X_=null,t.current=n,QV(n),CF(),Ot=c,Kt=o,Js.transition=a}else t.current=n;if(cg&&(cg=!1,Ho=t,Pv=i),a=t.pendingLanes,a===0&&(nl=null),PF(n.stateNode),gs(t,Dn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Tv)throw Tv=!1,t=yw,yw=null,t;return Pv&1&&t.tag!==0&&rd(),a=t.pendingLanes,a&1?t===_w?Rf++:(Rf=0,_w=t):Rf=0,Tl(),null}function rd(){if(Ho!==null){var t=hP(Pv),e=Js.transition,n=Kt;try{if(Js.transition=null,Kt=16>t?16:t,Ho===null)var r=!1;else{if(t=Ho,Ho=null,Pv=0,Ot&6)throw Error(Te(331));var i=Ot;for(Ot|=4,Ye=t.current;Ye!==null;){var a=Ye,o=a.child;if(Ye.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Ye=d;Ye!==null;){var f=Ye;switch(f.tag){case 0:case 11:case 15:If(8,f,a)}var p=f.child;if(p!==null)p.return=f,Ye=p;else for(;Ye!==null;){f=Ye;var g=f.sibling,_=f.return;if(jI(f),f===d){Ye=null;break}if(g!==null){g.return=_,Ye=g;break}Ye=_}}}var N=a.alternate;if(N!==null){var b=N.child;if(b!==null){N.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}Ye=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ye=o;else e:for(;Ye!==null;){if(a=Ye,a.flags&2048)switch(a.tag){case 0:case 11:case 15:If(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,Ye=w;break e}Ye=a.return}}var y=t.current;for(Ye=y;Ye!==null;){o=Ye;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Ye=E;else e:for(o=y;Ye!==null;){if(c=Ye,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:zx(9,c)}}catch(O){Pn(c,c.return,O)}if(c===o){Ye=null;break e}var A=c.sibling;if(A!==null){A.return=c.return,Ye=A;break e}Ye=c.return}}if(Ot=i,Tl(),ra&&typeof ra.onPostCommitFiberRoot=="function")try{ra.onPostCommitFiberRoot(Ax,t)}catch{}r=!0}return r}finally{Kt=n,Js.transition=e}}return!1}function W2(t,e,n){e=yd(n,e),e=hI(t,e,1),t=tl(t,e,1),e=Yr(),t!==null&&(Am(t,1,e),gs(t,e))}function Pn(t,e,n){if(t.tag===3)W2(t,t,n);else for(;e!==null;){if(e.tag===3){W2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nl===null||!nl.has(r))){t=yd(n,t),t=fI(e,t,1),e=tl(e,t,1),t=Yr(),e!==null&&(Am(e,1,t),gs(e,t));break}}e=e.return}}function r9(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yr(),t.pingedLanes|=t.suspendedLanes&n,pr===t&&(wr&n)===n&&(ar===4||ar===3&&(wr&130023424)===wr&&500>Dn()-S1?uc(t,0):N1|=n),gs(t,e)}function RI(t,e){e===0&&(t.mode&1?(e=Jp,Jp<<=1,!(Jp&130023424)&&(Jp=4194304)):e=1);var n=Yr();t=Qa(t,e),t!==null&&(Am(t,e,n),gs(t,n))}function s9(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),RI(t,n)}function i9(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Te(314))}r!==null&&r.delete(e),RI(t,n)}var MI;MI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ms.current)ds=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ds=!1,HV(t,e,n);ds=!!(t.flags&131072)}else ds=!1,xn&&e.flags&1048576&&FP(e,wv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vg(t,e),t=e.pendingProps;var i=pd(e,Fr.current);nd(e,n),i=x1(null,e,r,t,i,n);var a=y1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ps(r)?(a=!0,yv(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,f1(e),i.updater=Vx,e.stateNode=i,i._reactInternals=e,lw(e,r,t,n),e=dw(null,e,r,!0,a,n)):(e.tag=0,xn&&a&&a1(e),Hr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=o9(r),t=vi(r,t),i){case 0:e=uw(null,e,r,t,n);break e;case 1:e=O2(null,e,r,t,n);break e;case 11:e=R2(null,e,r,t,n);break e;case 14:e=M2(null,e,r,vi(r.type,t),n);break e}throw Error(Te(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),uw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),O2(t,e,r,i,n);case 3:e:{if(vI(e),t===null)throw Error(Te(387));r=e.pendingProps,a=e.memoizedState,i=a.element,qP(t,e),Nv(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=yd(Error(Te(423)),e),e=D2(t,e,r,n,i);break e}else if(r!==i){i=yd(Error(Te(424)),e),e=D2(t,e,r,n,i);break e}else for(Cs=el(e.stateNode.containerInfo.firstChild),Ps=e,xn=!0,_i=null,n=$P(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gd(),r===i){e=Xa(t,e,n);break e}Hr(t,e,r,n)}e=e.child}return e;case 5:return WP(e),t===null&&iw(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,ew(r,i)?o=null:a!==null&&ew(r,a)&&(e.flags|=32),gI(t,e),Hr(t,e,o,n),e.child;case 6:return t===null&&iw(e),null;case 13:return xI(t,e,n);case 4:return m1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vd(e,null,r,n):Hr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),R2(t,e,r,i,n);case 7:return Hr(t,e,e.pendingProps,n),e.child;case 8:return Hr(t,e,e.pendingProps.children,n),e.child;case 12:return Hr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,an(bv,r._currentValue),r._currentValue=o,a!==null)if(Ti(a.value,o)){if(a.children===i.children&&!ms.current){e=Xa(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Ha(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),aw(a.return,n,e),c.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Te(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),aw(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Hr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,nd(e,n),i=si(i),r=r(i),e.flags|=1,Hr(t,e,r,n),e.child;case 14:return r=e.type,i=vi(r,e.pendingProps),i=vi(r.type,i),M2(t,e,r,i,n);case 15:return mI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),Vg(t,e),e.tag=1,ps(r)?(t=!0,yv(e)):t=!1,nd(e,n),dI(e,r,i),lw(e,r,i,n),dw(null,e,r,!0,t,n);case 19:return yI(t,e,n);case 22:return pI(t,e,n)}throw Error(Te(156,e.tag))};function OI(t,e){return lP(t,e)}function a9(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(t,e,n,r){return new a9(t,e,n,r)}function T1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function o9(t){if(typeof t=="function")return T1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kb)return 11;if(t===Zb)return 14}return 2}function sl(t,e){var n=t.alternate;return n===null?(n=Ys(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $g(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")T1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zu:return dc(n.children,i,a,e);case Gb:o=8,i|=8;break;case A_:return t=Ys(12,n,e,i|2),t.elementType=A_,t.lanes=a,t;case R_:return t=Ys(13,n,e,i),t.elementType=R_,t.lanes=a,t;case M_:return t=Ys(19,n,e,i),t.elementType=M_,t.lanes=a,t;case WT:return $x(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case BT:o=10;break e;case qT:o=9;break e;case Kb:o=11;break e;case Zb:o=14;break e;case Ro:o=16,r=null;break e}throw Error(Te(130,t==null?t:typeof t,""))}return e=Ys(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function dc(t,e,n,r){return t=Ys(7,t,r,e),t.lanes=n,t}function $x(t,e,n,r){return t=Ys(22,t,r,e),t.elementType=WT,t.lanes=n,t.stateNode={isHidden:!1},t}function L0(t,e,n){return t=Ys(6,t,null,e),t.lanes=n,t}function F0(t,e,n){return e=Ys(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function l9(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=x0(0),this.expirationTimes=x0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=x0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function P1(t,e,n,r,i,a,o,c,u){return t=new l9(t,e,n,c,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ys(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},f1(a),t}function c9(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function DI(t){if(!t)return hl;t=t._reactInternals;e:{if($c(t)!==t||t.tag!==1)throw Error(Te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ps(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Te(171))}if(t.tag===1){var n=t.type;if(ps(n))return DP(t,n,e)}return e}function LI(t,e,n,r,i,a,o,c,u){return t=P1(n,r,!0,t,i,a,o,c,u),t.context=DI(null),n=t.current,r=Yr(),i=rl(n),a=Ha(r,i),a.callback=e??null,tl(n,a,i),t.current.lanes=i,Am(t,i,r),gs(t,r),t}function Bx(t,e,n,r){var i=e.current,a=Yr(),o=rl(i);return n=DI(n),e.context===null?e.context=n:e.pendingContext=n,e=Ha(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=tl(i,e,o),t!==null&&(Ni(t,i,o,a),Dg(t,i,o)),o}function Av(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function H2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function I1(t,e){H2(t,e),(t=t.alternate)&&H2(t,e)}function u9(){return null}var FI=typeof reportError=="function"?reportError:function(t){console.error(t)};function A1(t){this._internalRoot=t}qx.prototype.render=A1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Te(409));Bx(t,e,null,null)};qx.prototype.unmount=A1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sc(function(){Bx(null,t,null,null)}),e[Ya]=null}};function qx(t){this._internalRoot=t}qx.prototype.unstable_scheduleHydration=function(t){if(t){var e=pP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lo.length&&e!==0&&e<Lo[n].priority;n++);Lo.splice(n,0,t),n===0&&vP(t)}};function R1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function G2(){}function d9(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var d=Av(o);a.call(d)}}var o=LI(e,r,t,0,null,!1,!1,"",G2);return t._reactRootContainer=o,t[Ya]=o.current,Xf(t.nodeType===8?t.parentNode:t),Sc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=Av(u);c.call(d)}}var u=P1(t,0,!1,null,null,!1,!1,"",G2);return t._reactRootContainer=u,t[Ya]=u.current,Xf(t.nodeType===8?t.parentNode:t),Sc(function(){Bx(e,u,n,r)}),u}function Hx(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var c=i;i=function(){var u=Av(o);c.call(u)}}Bx(e,o,t,i)}else o=d9(n,e,t,i,r);return Av(o)}fP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ff(e.pendingLanes);n!==0&&(Xb(e,n|1),gs(e,Dn()),!(Ot&6)&&(_d=Dn()+500,Tl()))}break;case 13:Sc(function(){var r=Qa(t,1);if(r!==null){var i=Yr();Ni(r,t,1,i)}}),I1(t,1)}};Jb=function(t){if(t.tag===13){var e=Qa(t,134217728);if(e!==null){var n=Yr();Ni(e,t,134217728,n)}I1(t,134217728)}};mP=function(t){if(t.tag===13){var e=rl(t),n=Qa(t,e);if(n!==null){var r=Yr();Ni(n,t,e,r)}I1(t,e)}};pP=function(){return Kt};gP=function(t,e){var n=Kt;try{return Kt=t,e()}finally{Kt=n}};q_=function(t,e,n){switch(e){case"input":if(L_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Dx(r);if(!i)throw Error(Te(90));GT(r),L_(r,i)}}}break;case"textarea":ZT(t,n);break;case"select":e=n.value,e!=null&&Xu(t,!!n.multiple,e,!1)}};nP=E1;rP=Sc;var h9={usingClientEntryPoint:!1,Events:[Mm,qu,Dx,eP,tP,E1]},Jh={findFiberByHostInstance:nc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f9={bundleType:Jh.bundleType,version:Jh.version,rendererPackageName:Jh.rendererPackageName,rendererConfig:Jh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ho.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aP(t),t===null?null:t.stateNode},findFiberByHostInstance:Jh.findFiberByHostInstance||u9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ug=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ug.isDisabled&&ug.supportsFiber)try{Ax=ug.inject(f9),ra=ug}catch{}}Ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h9;Ls.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R1(e))throw Error(Te(200));return c9(t,e,null,n)};Ls.createRoot=function(t,e){if(!R1(t))throw Error(Te(299));var n=!1,r="",i=FI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=P1(t,1,!1,null,null,n,!1,r,i),t[Ya]=e.current,Xf(t.nodeType===8?t.parentNode:t),new A1(e)};Ls.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Te(188)):(t=Object.keys(t).join(","),Error(Te(268,t)));return t=aP(e),t=t===null?null:t.stateNode,t};Ls.flushSync=function(t){return Sc(t)};Ls.hydrate=function(t,e,n){if(!Wx(e))throw Error(Te(200));return Hx(null,t,e,!0,n)};Ls.hydrateRoot=function(t,e,n){if(!R1(t))throw Error(Te(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=FI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=LI(e,null,t,1,n??null,i,!1,a,o),t[Ya]=e.current,Xf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new qx(e)};Ls.render=function(t,e,n){if(!Wx(e))throw Error(Te(200));return Hx(null,t,e,!1,n)};Ls.unmountComponentAtNode=function(t){if(!Wx(t))throw Error(Te(40));return t._reactRootContainer?(Sc(function(){Hx(null,null,t,!1,function(){t._reactRootContainer=null,t[Ya]=null})}),!0):!1};Ls.unstable_batchedUpdates=E1;Ls.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wx(n))throw Error(Te(200));if(t==null||t._reactInternals===void 0)throw Error(Te(38));return Hx(t,e,n,!1,r)};Ls.version="18.3.1-next-f1338f8080-20240426";function VI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VI)}catch(t){console.error(t)}}VI(),VT.exports=Ls;var Qd=VT.exports;const m9=El(Qd);var zI,K2=Qd;zI=K2.createRoot,K2.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function om(){return om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},om.apply(this,arguments)}var Go;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Go||(Go={}));const Z2="popstate";function p9(t){t===void 0&&(t={});function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=Bc(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),jw("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:Rv(a))}function r(i,a){M1(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return v9(e,n,r,t)}function zn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function M1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function g9(){return Math.random().toString(36).substr(2,8)}function Y2(t,e){return{usr:t.state,key:t.key,idx:e}}function jw(t,e,n,r){return n===void 0&&(n=null),om({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bc(e):e,{state:n,key:e&&e.key||r||g9()})}function Rv(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function v9(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c=Go.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(om({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){c=Go.Pop;let S=f(),w=S==null?null:S-d;d=S,u&&u({action:c,location:b.location,delta:w})}function g(S,w){c=Go.Push;let y=jw(b.location,S,w);n&&n(y,S),d=f()+1;let E=Y2(y,d),A=b.createHref(y);try{o.pushState(E,"",A)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(A)}a&&u&&u({action:c,location:b.location,delta:1})}function _(S,w){c=Go.Replace;let y=jw(b.location,S,w);n&&n(y,S),d=f();let E=Y2(y,d),A=b.createHref(y);o.replaceState(E,"",A),a&&u&&u({action:c,location:b.location,delta:0})}function N(S){let w=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof S=="string"?S:Rv(S);return y=y.replace(/ $/,"%20"),zn(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let b={get action(){return c},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Z2,p),u=S,()=>{i.removeEventListener(Z2,p),u=null}},createHref(S){return e(i,S)},createURL:N,encodeLocation(S){let w=N(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:_,go(S){return o.go(S)}};return b}var Q2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Q2||(Q2={}));function x9(t,e,n){return n===void 0&&(n="/"),y9(t,e,n)}function y9(t,e,n,r){let i=typeof e=="string"?Bc(e):e,a=O1(i.pathname||"/",n);if(a==null)return null;let o=UI(t);_9(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=A9(a);c=T9(o[u],d)}return c}function UI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(zn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=il([r,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(zn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),UI(a.children,e,f,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:C9(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let u of $I(a.path))i(a,o,u)}),e}function $I(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=$I(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function _9(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:k9(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const w9=/^:[\w-]+$/,b9=3,j9=2,N9=1,S9=10,E9=-2,X2=t=>t==="*";function C9(t,e){let n=t.split("/"),r=n.length;return n.some(X2)&&(r+=E9),e&&(r+=j9),n.filter(i=>!X2(i)).reduce((i,a)=>i+(w9.test(a)?b9:a===""?N9:S9),r)}function k9(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function T9(t,e,n){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",p=P9({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:il([a,p.pathname]),pathnameBase:D9(il([a,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(a=il([a,p.pathnameBase]))}return o}function P9(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=I9(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:_}=f;if(g==="*"){let b=c[p]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const N=c[p];return _&&!N?d[g]=void 0:d[g]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function I9(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),M1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function A9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return M1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function O1(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function R9(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Bc(t):t;return{pathname:n?n.startsWith("/")?n:M9(n,e):e,search:L9(r),hash:F9(i)}}function M9(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function V0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function O9(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function D1(t,e){let n=O9(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function L1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Bc(t):(i=om({},t),zn(!i.pathname||!i.pathname.includes("?"),V0("?","pathname","search",i)),zn(!i.pathname||!i.pathname.includes("#"),V0("#","pathname","hash",i)),zn(!i.search||!i.search.includes("#"),V0("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=R9(i,c),d=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const il=t=>t.join("/").replace(/\/\/+/g,"/"),D9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),L9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,F9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function V9(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const BI=["post","put","patch","delete"];new Set(BI);const z9=["get",...BI];new Set(z9);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lm(){return lm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lm.apply(this,arguments)}const F1=x.createContext(null),U9=x.createContext(null),Pl=x.createContext(null),Gx=x.createContext(null),fo=x.createContext({outlet:null,matches:[],isDataRoute:!1}),qI=x.createContext(null);function $9(t,e){let{relative:n}=e===void 0?{}:e;Xd()||zn(!1);let{basename:r,navigator:i}=x.useContext(Pl),{hash:a,pathname:o,search:c}=HI(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:il([r,o])),i.createHref({pathname:u,search:c,hash:a})}function Xd(){return x.useContext(Gx)!=null}function mo(){return Xd()||zn(!1),x.useContext(Gx).location}function WI(t){x.useContext(Pl).static||x.useLayoutEffect(t)}function cr(){let{isDataRoute:t}=x.useContext(fo);return t?t8():B9()}function B9(){Xd()||zn(!1);let t=x.useContext(F1),{basename:e,future:n,navigator:r}=x.useContext(Pl),{matches:i}=x.useContext(fo),{pathname:a}=mo(),o=JSON.stringify(D1(i,n.v7_relativeSplatPath)),c=x.useRef(!1);return WI(()=>{c.current=!0}),x.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let p=L1(d,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:il([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,a,t])}function V1(){let{matches:t}=x.useContext(fo),e=t[t.length-1];return e?e.params:{}}function HI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=x.useContext(Pl),{matches:i}=x.useContext(fo),{pathname:a}=mo(),o=JSON.stringify(D1(i,r.v7_relativeSplatPath));return x.useMemo(()=>L1(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function q9(t,e){return W9(t,e)}function W9(t,e,n,r){Xd()||zn(!1);let{navigator:i}=x.useContext(Pl),{matches:a}=x.useContext(fo),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=mo(),f;if(e){var p;let S=typeof e=="string"?Bc(e):e;u==="/"||(p=S.pathname)!=null&&p.startsWith(u)||zn(!1),f=S}else f=d;let g=f.pathname||"/",_=g;if(u!=="/"){let S=u.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let N=x9(t,{pathname:_}),b=Y9(N&&N.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:il([u,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:il([u,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,n,r);return e&&b?x.createElement(Gx.Provider,{value:{location:lm({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Go.Pop}},b):b}function H9(){let t=e8(),e=V9(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,null)}const G9=x.createElement(H9,null);class K9 extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(fo.Provider,{value:this.props.routeContext},x.createElement(qI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Z9(t){let{routeContext:e,match:n,children:r}=t,i=x.useContext(F1);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(fo.Provider,{value:e},r)}function Y9(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let f=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);f>=0||zn(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:_}=n,N=p.route.loader&&g[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||N){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let _,N=!1,b=null,S=null;n&&(_=c&&p.route.id?c[p.route.id]:void 0,b=p.route.errorElement||G9,u&&(d<0&&g===0?(n8("route-fallback"),N=!0,S=null):d===g&&(N=!0,S=p.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,g+1)),y=()=>{let E;return _?E=b:N?E=S:p.route.Component?E=x.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,x.createElement(Z9,{match:p,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?x.createElement(K9,{location:n.location,revalidation:n.revalidation,component:b,error:_,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var GI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(GI||{}),KI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(KI||{});function Q9(t){let e=x.useContext(F1);return e||zn(!1),e}function X9(t){let e=x.useContext(U9);return e||zn(!1),e}function J9(t){let e=x.useContext(fo);return e||zn(!1),e}function ZI(t){let e=J9(),n=e.matches[e.matches.length-1];return n.route.id||zn(!1),n.route.id}function e8(){var t;let e=x.useContext(qI),n=X9(),r=ZI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function t8(){let{router:t}=Q9(GI.UseNavigateStable),e=ZI(KI.UseNavigateStable),n=x.useRef(!1);return WI(()=>{n.current=!0}),x.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,lm({fromRouteId:e},a)))},[t,e])}const J2={};function n8(t,e,n){J2[t]||(J2[t]=!0)}function r8(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function s8(t){let{to:e,replace:n,state:r,relative:i}=t;Xd()||zn(!1);let{future:a,static:o}=x.useContext(Pl),{matches:c}=x.useContext(fo),{pathname:u}=mo(),d=cr(),f=L1(e,D1(c,a.v7_relativeSplatPath),u,i==="path"),p=JSON.stringify(f);return x.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:i}),[d,p,i,n,r]),null}function hn(t){zn(!1)}function i8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Go.Pop,navigator:a,static:o=!1,future:c}=t;Xd()&&zn(!1);let u=e.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:u,navigator:a,static:o,future:lm({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof r=="string"&&(r=Bc(r));let{pathname:f="/",search:p="",hash:g="",state:_=null,key:N="default"}=r,b=x.useMemo(()=>{let S=O1(f,u);return S==null?null:{location:{pathname:S,search:p,hash:g,state:_,key:N},navigationType:i}},[u,f,p,g,_,N,i]);return b==null?null:x.createElement(Pl.Provider,{value:d},x.createElement(Gx.Provider,{children:n,value:b}))}function a8(t){let{children:e,location:n}=t;return q9(Nw(e),n)}new Promise(()=>{});function Nw(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,i)=>{if(!x.isValidElement(r))return;let a=[...e,i];if(r.type===x.Fragment){n.push.apply(n,Nw(r.props.children,a));return}r.type!==hn&&zn(!1),!r.props.index||!r.props.children||zn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Nw(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sw(){return Sw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sw.apply(this,arguments)}function o8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function l8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function c8(t,e){return t.button===0&&(!e||e==="_self")&&!l8(t)}function Ew(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function u8(t,e){let n=Ew(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const d8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],h8="6";try{window.__reactRouterVersion=h8}catch{}const f8="startTransition",eE=Bb[f8];function m8(t){let{basename:e,children:n,future:r,window:i}=t,a=x.useRef();a.current==null&&(a.current=p9({window:i,v5Compat:!0}));let o=a.current,[c,u]=x.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=x.useCallback(p=>{d&&eE?eE(()=>u(p)):u(p)},[u,d]);return x.useLayoutEffect(()=>o.listen(f),[o,f]),x.useEffect(()=>r8(r),[r]),x.createElement(i8,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const p8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",g8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ze=x.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=o8(e,d8),{basename:_}=x.useContext(Pl),N,b=!1;if(typeof d=="string"&&g8.test(d)&&(N=d,p8))try{let E=new URL(window.location.href),A=d.startsWith("//")?new URL(E.protocol+d):new URL(d),O=O1(A.pathname,_);A.origin===E.origin&&O!=null?d=O+A.search+A.hash:b=!0}catch{}let S=$9(d,{relative:i}),w=v8(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:p});function y(E){r&&r(E),E.defaultPrevented||w(E)}return x.createElement("a",Sw({},g,{href:N||S,onClick:b||a?r:y,ref:n,target:u}))});var tE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tE||(tE={}));var nE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(nE||(nE={}));function v8(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=cr(),d=mo(),f=HI(t,{relative:o});return x.useCallback(p=>{if(c8(p,n)){p.preventDefault();let g=r!==void 0?r:Rv(d)===Rv(f);u(t,{replace:g,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[d,u,f,r,i,n,t,a,o,c])}function z1(t){let e=x.useRef(Ew(t)),n=x.useRef(!1),r=mo(),i=x.useMemo(()=>u8(r.search,n.current?null:e.current),[r.search]),a=cr(),o=x.useCallback((c,u)=>{const d=Ew(typeof c=="function"?c(i):c);n.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var Mv=["light","dark"],U1="(prefers-color-scheme: dark)",x8=typeof window>"u",$1=x.createContext(void 0),y8={setTheme:t=>{},themes:[]},_8=()=>{var t;return(t=x.useContext($1))!=null?t:y8},w8=t=>x.useContext($1)?t.children:x.createElement(j8,{...t}),b8=["light","dark"],j8=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:a=b8,defaultTheme:o=n?"system":"light",attribute:c="data-theme",value:u,children:d,nonce:f})=>{let[p,g]=x.useState(()=>rE(i,o)),[_,N]=x.useState(()=>rE(i)),b=u?Object.values(u):a,S=x.useCallback(A=>{let O=A;if(!O)return;A==="system"&&n&&(O=sE());let q=u?u[O]:O,R=e?S8():null,V=document.documentElement;if(c==="class"?(V.classList.remove(...b),q&&V.classList.add(q)):q?V.setAttribute(c,q):V.removeAttribute(c),r){let U=Mv.includes(o)?o:null,k=Mv.includes(O)?O:U;V.style.colorScheme=k}R==null||R()},[]),w=x.useCallback(A=>{let O=typeof A=="function"?A(A):A;g(O);try{localStorage.setItem(i,O)}catch{}},[t]),y=x.useCallback(A=>{let O=sE(A);N(O),p==="system"&&n&&!t&&S("system")},[p,t]);x.useEffect(()=>{let A=window.matchMedia(U1);return A.addListener(y),y(A),()=>A.removeListener(y)},[y]),x.useEffect(()=>{let A=O=>{if(O.key!==i)return;let q=O.newValue||o;w(q)};return window.addEventListener("storage",A),()=>window.removeEventListener("storage",A)},[w]),x.useEffect(()=>{S(t??p)},[t,p]);let E=x.useMemo(()=>({theme:p,setTheme:w,forcedTheme:t,resolvedTheme:p==="system"?_:p,themes:n?[...a,"system"]:a,systemTheme:n?_:void 0}),[p,w,t,_,n,a]);return x.createElement($1.Provider,{value:E},x.createElement(N8,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:i,themes:a,defaultTheme:o,attribute:c,value:u,children:d,attrs:b,nonce:f}),d)},N8=x.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:o,attrs:c,nonce:u})=>{let d=a==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,p=i?Mv.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",g=(N,b=!1,S=!0)=>{let w=o?o[N]:N,y=b?N+"|| ''":`'${w}'`,E="";return i&&S&&!b&&Mv.includes(N)&&(E+=`d.style.colorScheme = '${N}';`),n==="class"?b||w?E+=`c.add(${y})`:E+="null":w&&(E+=`d[s](n,${y})`),E},_=t?`!function(){${f}${g(t)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${U1}',m=window.matchMedia(t);if(m.media!==t||m.matches){${g("dark")}}else{${g("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${g(o?"x[e]":"e",!0)}}${d?"":"else{"+g(a,!1,!1)+"}"}${p}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${g(o?"x[e]":"e",!0)}}else{${g(a,!1,!1)};}${p}}catch(t){}}();`;return x.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:_}})}),rE=(t,e)=>{if(x8)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},S8=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},sE=t=>(t||(t=window.matchMedia(U1)),t.matches?"dark":"light");let E8={data:""},C8=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||E8,k8=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,T8=/\/\*[^]*?\*\/|  +/g,iE=/\n+/g,Vo=(t,e)=>{let n="",r="",i="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?Vo(o,a):a+"{"+Vo(o,a[1]=="k"?"":e)+"}":typeof o=="object"?r+=Vo(o,e?e.replace(/([^,])+/g,c=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Vo.p?Vo.p(a,o):a+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Ma={},YI=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+YI(t[n]);return e}return t},P8=(t,e,n,r,i)=>{let a=YI(t),o=Ma[a]||(Ma[a]=(u=>{let d=0,f=11;for(;d<u.length;)f=101*f+u.charCodeAt(d++)>>>0;return"go"+f})(a));if(!Ma[o]){let u=a!==t?t:(d=>{let f,p,g=[{}];for(;f=k8.exec(d.replace(T8,""));)f[4]?g.shift():f[3]?(p=f[3].replace(iE," ").trim(),g.unshift(g[0][p]=g[0][p]||{})):g[0][f[1]]=f[2].replace(iE," ").trim();return g[0]})(t);Ma[o]=Vo(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let c=n&&Ma.g?Ma.g:null;return n&&(Ma.g=Ma[o]),((u,d,f,p)=>{p?d.data=d.data.replace(p,u):d.data.indexOf(u)===-1&&(d.data=f?u+d.data:d.data+u)})(Ma[o],e,r,c),o},I8=(t,e,n)=>t.reduce((r,i,a)=>{let o=e[a];if(o&&o.call){let c=o(n),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=u?"."+u:c&&typeof c=="object"?c.props?"":Vo(c,""):c===!1?"":c}return r+i+(o??"")},"");function Kx(t){let e=this||{},n=t.call?t(e.p):t;return P8(n.unshift?n.raw?I8(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,C8(e.target),e.g,e.o,e.k)}let QI,Cw,kw;Kx.bind({g:1});let Ja=Kx.bind({k:1});function A8(t,e,n,r){Vo.p=e,QI=t,Cw=n,kw=r}function Il(t,e){let n=this||{};return function(){let r=arguments;function i(a,o){let c=Object.assign({},a),u=c.className||i.className;n.p=Object.assign({theme:Cw&&Cw()},c),n.o=/ *go\d+/.test(u),c.className=Kx.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=c.as||t,delete c.as),kw&&d[0]&&kw(c),QI(d,c)}return i}}var R8=t=>typeof t=="function",Ov=(t,e)=>R8(t)?t(e):t,M8=(()=>{let t=0;return()=>(++t).toString()})(),XI=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),O8=20,JI=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,O8)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return JI(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},Bg=[],ic={toasts:[],pausedAt:void 0},qc=t=>{ic=JI(ic,t),Bg.forEach(e=>{e(ic)})},D8={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},L8=(t={})=>{let[e,n]=x.useState(ic),r=x.useRef(ic);x.useEffect(()=>(r.current!==ic&&n(ic),Bg.push(n),()=>{let a=Bg.indexOf(n);a>-1&&Bg.splice(a,1)}),[]);let i=e.toasts.map(a=>{var o,c,u;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((c=t[a.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||D8[a.type],style:{...t.style,...(u=t[a.type])==null?void 0:u.style,...a.style}}});return{...e,toasts:i}},F8=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||M8()}),Dm=t=>(e,n)=>{let r=F8(e,t,n);return qc({type:2,toast:r}),r.id},Ln=(t,e)=>Dm("blank")(t,e);Ln.error=Dm("error");Ln.success=Dm("success");Ln.loading=Dm("loading");Ln.custom=Dm("custom");Ln.dismiss=t=>{qc({type:3,toastId:t})};Ln.remove=t=>qc({type:4,toastId:t});Ln.promise=(t,e,n)=>{let r=Ln.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?Ov(e.success,i):void 0;return a?Ln.success(a,{id:r,...n,...n==null?void 0:n.success}):Ln.dismiss(r),i}).catch(i=>{let a=e.error?Ov(e.error,i):void 0;a?Ln.error(a,{id:r,...n,...n==null?void 0:n.error}):Ln.dismiss(r)}),t};var V8=(t,e)=>{qc({type:1,toast:{id:t,height:e}})},z8=()=>{qc({type:5,time:Date.now()})},Mf=new Map,U8=1e3,$8=(t,e=U8)=>{if(Mf.has(t))return;let n=setTimeout(()=>{Mf.delete(t),qc({type:4,toastId:t})},e);Mf.set(t,n)},B8=t=>{let{toasts:e,pausedAt:n}=L8(t);x.useEffect(()=>{if(n)return;let a=Date.now(),o=e.map(c=>{if(c.duration===1/0)return;let u=(c.duration||0)+c.pauseDuration-(a-c.createdAt);if(u<0){c.visible&&Ln.dismiss(c.id);return}return setTimeout(()=>Ln.dismiss(c.id),u)});return()=>{o.forEach(c=>c&&clearTimeout(c))}},[e,n]);let r=x.useCallback(()=>{n&&qc({type:6,time:Date.now()})},[n]),i=x.useCallback((a,o)=>{let{reverseOrder:c=!1,gutter:u=8,defaultPosition:d}=o||{},f=e.filter(_=>(_.position||d)===(a.position||d)&&_.height),p=f.findIndex(_=>_.id===a.id),g=f.filter((_,N)=>N<p&&_.visible).length;return f.filter(_=>_.visible).slice(...c?[g+1]:[0,g]).reduce((_,N)=>_+(N.height||0)+u,0)},[e]);return x.useEffect(()=>{e.forEach(a=>{if(a.dismissed)$8(a.id,a.removeDelay);else{let o=Mf.get(a.id);o&&(clearTimeout(o),Mf.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:V8,startPause:z8,endPause:r,calculateOffset:i}}},q8=Ja`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,W8=Ja`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,H8=Ja`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,G8=Il("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${q8} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${W8} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${H8} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,K8=Ja`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Z8=Il("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${K8} 1s linear infinite;
`,Y8=Ja`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Q8=Ja`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,X8=Il("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Y8} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Q8} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,J8=Il("div")`
  position: absolute;
`,ez=Il("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,tz=Ja`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,nz=Il("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${tz} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,rz=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?x.createElement(nz,null,e):e:n==="blank"?null:x.createElement(ez,null,x.createElement(Z8,{...r}),n!=="loading"&&x.createElement(J8,null,n==="error"?x.createElement(G8,{...r}):x.createElement(X8,{...r})))},sz=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,iz=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,az="0%{opacity:0;} 100%{opacity:1;}",oz="0%{opacity:1;} 100%{opacity:0;}",lz=Il("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,cz=Il("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,uz=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=XI()?[az,oz]:[sz(n),iz(n)];return{animation:e?`${Ja(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ja(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},dz=x.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?uz(t.position||e||"top-center",t.visible):{opacity:0},a=x.createElement(rz,{toast:t}),o=x.createElement(cz,{...t.ariaProps},Ov(t.message,t));return x.createElement(lz,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:a,message:o}):x.createElement(x.Fragment,null,a,o))});A8(x.createElement);var hz=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let a=x.useCallback(o=>{if(o){let c=()=>{let u=o.getBoundingClientRect().height;r(t,u)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return x.createElement("div",{ref:a,className:e,style:n},i)},fz=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:XI()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},mz=Kx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,dg=16,pz=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:a,containerClassName:o})=>{let{toasts:c,handlers:u}=B8(n);return x.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:dg,left:dg,right:dg,bottom:dg,pointerEvents:"none",...a},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let f=d.position||e,p=u.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),g=fz(f,p);return x.createElement(hz,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?mz:"",style:g},d.type==="custom"?Ov(d.message,d):i?i(d):x.createElement(dz,{toast:d,position:f}))}))},xe=Ln,aE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},gz=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},tA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=a>>2,p=(a&3)<<4|c>>4;let g=(c&15)<<2|d>>6,_=d&63;u||(_=64,o||(g=64)),r.push(n[f],n[p],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||d==null||p==null)throw new vz;const g=a<<2|c>>4;if(r.push(g),d!==64){const _=c<<4&240|d>>2;if(r.push(_),p!==64){const N=d<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xz=function(t){const e=eA(t);return tA.encodeByteArray(e,!0)},Dv=function(t){return xz(t).replace(/\./g,"")},nA=function(t){try{return tA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z=()=>yz().__FIREBASE_DEFAULTS__,wz=()=>{if(typeof process>"u"||typeof aE>"u")return;const t=aE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nA(t[1]);return e&&JSON.parse(e)},Zx=()=>{try{return _z()||wz()||bz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rA=t=>{var e,n;return(n=(e=Zx())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},sA=t=>{const e=rA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},iA=()=>{var t;return(t=Zx())===null||t===void 0?void 0:t.config},aA=t=>{var e;return(e=Zx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dv(JSON.stringify(n)),Dv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vr())}function Sz(){var t;const e=(t=Zx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ez(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Cz(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tz(){const t=Vr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Pz(){return!Sz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Iz(){try{return typeof indexedDB=="object"}catch{return!1}}function Az(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz="FirebaseError";class xa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Rz,Object.setPrototypeOf(this,xa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lm.prototype.create)}}class Lm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?Mz(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new xa(i,c,r)}}function Mz(t,e){return t.replace(Oz,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Oz=/\{\$([^}]+)}/g;function Dz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lv(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(oE(a)&&oE(o)){if(!Lv(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function oE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function gf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Lz(t,e){const n=new Fz(t,e);return n.subscribe.bind(n)}class Fz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Vz(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=z0),i.error===void 0&&(i.error=z0),i.complete===void 0&&(i.complete=z0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function z0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(t){return t&&t._delegate?t._delegate:t}class fl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jz;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($z(e))try{this.getOrInitializeService({instanceIdentifier:ec})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=ec){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ec){return this.instances.has(e)}getOptions(e=ec){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ec){return this.component?this.component.multipleInstances?e:ec:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Uz(t){return t===ec?void 0:t}function $z(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(At||(At={}));const qz={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},Wz=At.INFO,Hz={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},Gz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Hz[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class B1{constructor(e){this.name=e,this._logLevel=Wz,this._logHandler=Gz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in At))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...e),this._logHandler(this,At.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...e),this._logHandler(this,At.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,At.INFO,...e),this._logHandler(this,At.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,At.WARN,...e),this._logHandler(this,At.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...e),this._logHandler(this,At.ERROR,...e)}}const Kz=(t,e)=>e.some(n=>t instanceof n);let lE,cE;function Zz(){return lE||(lE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Yz(){return cE||(cE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lA=new WeakMap,Tw=new WeakMap,cA=new WeakMap,U0=new WeakMap,q1=new WeakMap;function Qz(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(al(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lA.set(n,t)}).catch(()=>{}),q1.set(e,t),e}function Xz(t){if(Tw.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Tw.set(t,e)}let Pw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return al(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Jz(t){Pw=t(Pw)}function eU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($0(this),e,...n);return cA.set(r,e.sort?e.sort():[e]),al(r)}:Yz().includes(t)?function(...e){return t.apply($0(this),e),al(lA.get(this))}:function(...e){return al(t.apply($0(this),e))}}function tU(t){return typeof t=="function"?eU(t):(t instanceof IDBTransaction&&Xz(t),Kz(t,Zz())?new Proxy(t,Pw):t)}function al(t){if(t instanceof IDBRequest)return Qz(t);if(U0.has(t))return U0.get(t);const e=tU(t);return e!==t&&(U0.set(t,e),q1.set(e,t)),e}const $0=t=>q1.get(t);function nU(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=al(o);return r&&o.addEventListener("upgradeneeded",u=>{r(al(o.result),u.oldVersion,u.newVersion,al(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const rU=["get","getKey","getAll","getAllKeys","count"],sU=["put","add","delete","clear"],B0=new Map;function uE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(B0.get(e))return B0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=sU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rU.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return B0.set(e,a),a}Jz(t=>({...t,get:(e,n,r)=>uE(e,n)||t.get(e,n,r),has:(e,n)=>!!uE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function aU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Iw="@firebase/app",dE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new B1("@firebase/app"),oU="@firebase/app-compat",lU="@firebase/analytics-compat",cU="@firebase/analytics",uU="@firebase/app-check-compat",dU="@firebase/app-check",hU="@firebase/auth",fU="@firebase/auth-compat",mU="@firebase/database",pU="@firebase/data-connect",gU="@firebase/database-compat",vU="@firebase/functions",xU="@firebase/functions-compat",yU="@firebase/installations",_U="@firebase/installations-compat",wU="@firebase/messaging",bU="@firebase/messaging-compat",jU="@firebase/performance",NU="@firebase/performance-compat",SU="@firebase/remote-config",EU="@firebase/remote-config-compat",CU="@firebase/storage",kU="@firebase/storage-compat",TU="@firebase/firestore",PU="@firebase/vertexai-preview",IU="@firebase/firestore-compat",AU="firebase",RU="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="[DEFAULT]",MU={[Iw]:"fire-core",[oU]:"fire-core-compat",[cU]:"fire-analytics",[lU]:"fire-analytics-compat",[dU]:"fire-app-check",[uU]:"fire-app-check-compat",[hU]:"fire-auth",[fU]:"fire-auth-compat",[mU]:"fire-rtdb",[pU]:"fire-data-connect",[gU]:"fire-rtdb-compat",[vU]:"fire-fn",[xU]:"fire-fn-compat",[yU]:"fire-iid",[_U]:"fire-iid-compat",[wU]:"fire-fcm",[bU]:"fire-fcm-compat",[jU]:"fire-perf",[NU]:"fire-perf-compat",[SU]:"fire-rc",[EU]:"fire-rc-compat",[CU]:"fire-gcs",[kU]:"fire-gcs-compat",[TU]:"fire-fst",[IU]:"fire-fst-compat",[PU]:"fire-vertex","fire-js":"fire-js",[AU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new Map,OU=new Map,Rw=new Map;function hE(t,e){try{t.container.addComponent(e)}catch(n){eo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ec(t){const e=t.name;if(Rw.has(e))return eo.debug(`There were multiple attempts to register component ${e}.`),!1;Rw.set(e,t);for(const n of Fv.values())hE(n,t);for(const n of OU.values())hE(n,t);return!0}function Yx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ol=new Lm("app","Firebase",DU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ol.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=RU;function uA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Aw,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ol.create("bad-app-name",{appName:String(i)});if(n||(n=iA()),!n)throw ol.create("no-options");const a=Fv.get(i);if(a){if(Lv(n,a.options)&&Lv(r,a.config))return a;throw ol.create("duplicate-app",{appName:i})}const o=new Bz(i);for(const u of Rw.values())o.addComponent(u);const c=new LU(n,r,o);return Fv.set(i,c),c}function W1(t=Aw){const e=Fv.get(t);if(!e&&t===Aw&&iA())return uA();if(!e)throw ol.create("no-app",{appName:t});return e}function ia(t,e,n){var r;let i=(r=MU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),eo.warn(c.join(" "));return}Ec(new fl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU="firebase-heartbeat-database",VU=1,cm="firebase-heartbeat-store";let q0=null;function dA(){return q0||(q0=nU(FU,VU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cm)}catch(n){console.warn(n)}}}}).catch(t=>{throw ol.create("idb-open",{originalErrorMessage:t.message})})),q0}async function zU(t){try{const n=(await dA()).transaction(cm),r=await n.objectStore(cm).get(hA(t));return await n.done,r}catch(e){if(e instanceof xa)eo.warn(e.message);else{const n=ol.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});eo.warn(n.message)}}}async function fE(t,e){try{const r=(await dA()).transaction(cm,"readwrite");await r.objectStore(cm).put(e,hA(t)),await r.done}catch(n){if(n instanceof xa)eo.warn(n.message);else{const r=ol.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});eo.warn(r.message)}}}function hA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=1024,$U=30*24*60*60*1e3;class BU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=mE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=$U}),this._storage.overwrite(this._heartbeatsCache))}catch(r){eo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mE(),{heartbeatsToSend:r,unsentEntries:i}=qU(this._heartbeatsCache.heartbeats),a=Dv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return eo.warn(n),""}}}function mE(){return new Date().toISOString().substring(0,10)}function qU(t,e=UU){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),pE(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Iz()?Az().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return fE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return fE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function pE(t){return Dv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(t){Ec(new fl("platform-logger",e=>new iU(e),"PRIVATE")),Ec(new fl("heartbeat",e=>new BU(e),"PRIVATE")),ia(Iw,dE,t),ia(Iw,dE,"esm2017"),ia("fire-js","")}HU("");var Zi=function(){return Zi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zi.apply(this,arguments)};function Vm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function GU(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function fA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KU=fA,mA=new Lm("auth","Firebase",fA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=new B1("@firebase/auth");function ZU(t,...e){Vv.logLevel<=At.WARN&&Vv.warn(`Auth (${Wc}): ${t}`,...e)}function qg(t,...e){Vv.logLevel<=At.ERROR&&Vv.error(`Auth (${Wc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,...e){throw G1(t,...e)}function aa(t,...e){return G1(t,...e)}function H1(t,e,n){const r=Object.assign(Object.assign({},KU()),{[e]:n});return new Lm("auth","Firebase",r).create(e,{appName:t.name})}function Si(t){return H1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YU(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ai(t,"argument-error"),H1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function G1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mA.create(t,...e)}function lt(t,e,...n){if(!t)throw G1(e,...n)}function Ba(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qg(e),new Error(e)}function to(t,e){t||Ba(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function QU(){return gE()==="http:"||gE()==="https:"}function gE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QU()||Cz()||"connection"in navigator)?navigator.onLine:!0}function JU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n){this.shortDelay=e,this.longDelay=n,to(n>e,"Short delay should be less than long delay!"),this.isMobile=Nz()||kz()}get(){return XU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(t,e){to(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$=new zm(3e4,6e4);function po(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Oi(t,e,n,r,i={}){return gA(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Fm(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return Ez()||(d.referrerPolicy="no-referrer"),pA.fetch()(vA(t,t.config.apiHost,n,c),d)})}async function gA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},e$),e);try{const i=new r$(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw hg(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw hg(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw hg(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw hg(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw H1(t,f,d);ai(t,f)}}catch(i){if(i instanceof xa)throw i;ai(t,"network-request-failed",{message:String(i)})}}async function Um(t,e,n,r,i={}){const a=await Oi(t,e,n,r,i);return"mfaPendingCredential"in a&&ai(t,"multi-factor-auth-required",{_serverResponse:a}),a}function vA(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?K1(t.config,i):`${t.config.apiScheme}://${i}`}function n$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class r${constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(aa(this.auth,"network-request-failed")),t$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=aa(t,e,r);return i.customData._tokenResponse=n,i}function vE(t){return t!==void 0&&t.enterprise!==void 0}class s${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return n$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function i$(t,e){return Oi(t,"GET","/v2/recaptchaConfig",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a$(t,e){return Oi(t,"POST","/v1/accounts:delete",e)}async function xA(t,e){return Oi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function o$(t,e=!1){const n=Ut(t),r=await n.getIdToken(e),i=Z1(r);lt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Of(W0(i.auth_time)),issuedAtTime:Of(W0(i.iat)),expirationTime:Of(W0(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function W0(t){return Number(t)*1e3}function Z1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return qg("JWT malformed, contained fewer than 3 sections"),null;try{const i=nA(n);return i?JSON.parse(i):(qg("Failed to decode base64 JWT payload"),null)}catch(i){return qg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function xE(t){const e=Z1(t);return lt(e,"internal-error"),lt(typeof e.exp<"u","internal-error"),lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof xa&&l$(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function l$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Of(this.lastLoginAt),this.creationTime=Of(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zv(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Cc(t,xA(n,{idToken:r}));lt(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?yA(a.providerUserInfo):[],c=u$(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Ow(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function vf(t){const e=Ut(t);await zv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function u$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yA(t){return t.map(e=>{var{providerId:n}=e,r=Vm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d$(t,e){const n=await gA(t,{},async()=>{const r=Fm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=vA(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",pA.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function h$(t,e){return Oi(t,"POST","/v2/accounts:revokeToken",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lt(e.idToken,"internal-error"),lt(typeof e.idToken<"u","internal-error"),lt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){lt(e.length!==0,"internal-error");const n=xE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await d$(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new sd;return r&&(lt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(lt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(lt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sd,this.toJSON())}_performRefresh(){return Ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t,e){lt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=Vm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new c$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ow(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Cc(this,this.stsTokenManager.getToken(this.auth,e));return lt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return o$(this,e)}reload(){return vf(this)}_assign(e){this!==e&&(lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qs(this.auth.app))return Promise.reject(Si(this.auth));const e=await this.getIdToken();return await Cc(this,a$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,o,c,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(c=n.tenantId)!==null&&c!==void 0?c:void 0,S=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(d=n.createdAt)!==null&&d!==void 0?d:void 0,y=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:E,emailVerified:A,isAnonymous:O,providerData:q,stsTokenManager:R}=n;lt(E&&R,e,"internal-error");const V=sd.fromJSON(this.name,R);lt(typeof E=="string",e,"internal-error"),ko(p,e.name),ko(g,e.name),lt(typeof A=="boolean",e,"internal-error"),lt(typeof O=="boolean",e,"internal-error"),ko(_,e.name),ko(N,e.name),ko(b,e.name),ko(S,e.name),ko(w,e.name),ko(y,e.name);const U=new qa({uid:E,auth:e,email:g,emailVerified:A,displayName:p,isAnonymous:O,photoURL:N,phoneNumber:_,tenantId:b,stsTokenManager:V,createdAt:w,lastLoginAt:y});return q&&Array.isArray(q)&&(U.providerData=q.map(k=>Object.assign({},k))),S&&(U._redirectEventId=S),U}static async _fromIdTokenResponse(e,n,r=!1){const i=new sd;i.updateFromServerResponse(n);const a=new qa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zv(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];lt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?yA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new sd;c.updateFromIdToken(r);const u=new qa({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ow(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new Map;function Wa(t){to(t instanceof Function,"Expected a class definition");let e=yE.get(t);return e?(to(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_A.type="NONE";const _E=_A;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t,e,n){return`firebase:${t}:${e}:${n}`}class id{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Wg(this.userKey,i.apiKey,a),this.fullPersistenceKey=Wg("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new id(Wa(_E),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Wa(_E);const o=Wg(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){const p=qa._fromJSON(e,f);d!==a&&(c=p),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new id(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new id(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EA(e))return"Blackberry";if(CA(e))return"Webos";if(bA(e))return"Safari";if((e.includes("chrome/")||jA(e))&&!e.includes("edge/"))return"Chrome";if(SA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wA(t=Vr()){return/firefox\//i.test(t)}function bA(t=Vr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jA(t=Vr()){return/crios\//i.test(t)}function NA(t=Vr()){return/iemobile/i.test(t)}function SA(t=Vr()){return/android/i.test(t)}function EA(t=Vr()){return/blackberry/i.test(t)}function CA(t=Vr()){return/webos/i.test(t)}function Y1(t=Vr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function f$(t=Vr()){var e;return Y1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function m$(){return Tz()&&document.documentMode===10}function kA(t=Vr()){return Y1(t)||SA(t)||CA(t)||EA(t)||/windows phone/i.test(t)||NA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t,e=[]){let n;switch(t){case"Browser":n=wE(Vr());break;case"Worker":n=`${wE(Vr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g$(t,e={}){return Oi(t,"GET","/v2/passwordPolicy",po(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$=6;class x${constructor(e){var n,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:v$,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bE(this),this.idTokenSubscription=new bE(this),this.beforeStateQueue=new p$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wa(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await id.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xA(this,{idToken:e}),r=await qa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zv(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qs(this.app))return Promise.reject(Si(this));const n=e?Ut(e):null;return n&&lt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qs(this.app)?Promise.reject(Si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qs(this.app)?Promise.reject(Si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await g$(this),n=new x$(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Lm("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await h$(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wa(e)||this._popupRedirectResolver;lt(n,this,"argument-error"),this.redirectPersistenceManager=await id.create(this,[Wa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(lt(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ZU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function go(t){return Ut(t)}class bE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lz(n=>this.observer=n)}get next(){return lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _$(t){Qx=t}function PA(t){return Qx.loadJS(t)}function w$(){return Qx.recaptchaEnterpriseScript}function b$(){return Qx.gapiScript}function j$(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const N$="recaptcha-enterprise",S$="NO_RECAPTCHA";class E${constructor(e){this.type=N$,this.auth=go(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{i$(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new s$(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;vE(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(S$)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&vE(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=w$();u.length!==0&&(u+=c),PA(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function jE(t,e,n,r=!1){const i=new E$(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Dw(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await jE(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await jE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(t,e){const n=Yx(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Lv(a,e??{}))return i;ai(i,"already-initialized")}return n.initialize({options:e})}function k$(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function T$(t,e,n){const r=go(t);lt(r._canInitEmulator,r,"emulator-config-failed"),lt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=IA(e),{host:o,port:c}=P$(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),I$()}function IA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P$(t){const e=IA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:NE(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:NE(o)}}}function NE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function I$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ba("not implemented")}_getIdTokenResponse(e){return Ba("not implemented")}_linkToIdToken(e,n){return Ba("not implemented")}_getReauthenticationResolver(e){return Ba("not implemented")}}async function A$(t,e){return Oi(t,"POST","/v1/accounts:update",e)}async function R$(t,e){return Oi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M$(t,e){return Um(t,"POST","/v1/accounts:signInWithPassword",po(t,e))}async function O$(t,e){return Oi(t,"POST","/v1/accounts:sendOobCode",po(t,e))}async function D$(t,e){return O$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L$(t,e){return Um(t,"POST","/v1/accounts:signInWithEmailLink",po(t,e))}async function F$(t,e){return Um(t,"POST","/v1/accounts:signInWithEmailLink",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um extends Q1{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new um(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new um(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dw(e,n,"signInWithPassword",M$);case"emailLink":return L$(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dw(e,r,"signUpPassword",R$);case"emailLink":return F$(e,{idToken:n,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(t,e){return Um(t,"POST","/v1/accounts:signInWithIdp",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$="http://localhost";class kc extends Q1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new kc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ai("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=Vm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new kc(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ad(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ad(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ad(e,n)}buildRequest(){const e={requestUri:V$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fm(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function U$(t){const e=pf(gf(t)).link,n=e?pf(gf(e)).deep_link_id:null,r=pf(gf(t)).deep_link_id;return(r?pf(gf(r)).link:null)||r||n||e||t}class X1{constructor(e){var n,r,i,a,o,c;const u=pf(gf(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=z$((i=u.mode)!==null&&i!==void 0?i:null);lt(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=U$(e);try{return new X1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(e,n){return um._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=X1.parseLink(n);return lt(r,"argument-error"),um._fromEmailAndCode(e,r.code,r.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends J1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends $m{constructor(){super("facebook.com")}static credential(e){return kc._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zo.credential(e.oauthAccessToken)}catch{return null}}}zo.FACEBOOK_SIGN_IN_METHOD="facebook.com";zo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends $m{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return kc._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return za.credentialFromTaggedObject(e)}static credentialFromError(e){return za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return za.credential(n,r)}catch{return null}}}za.GOOGLE_SIGN_IN_METHOD="google.com";za.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends $m{constructor(){super("github.com")}static credential(e){return kc._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uo.credential(e.oauthAccessToken)}catch{return null}}}Uo.GITHUB_SIGN_IN_METHOD="github.com";Uo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends $m{constructor(){super("twitter.com")}static credential(e,n){return kc._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $o.credential(n,r)}catch{return null}}}$o.TWITTER_SIGN_IN_METHOD="twitter.com";$o.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $$(t,e){return Um(t,"POST","/v1/accounts:signUp",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await qa._fromIdTokenResponse(e,r,i),o=SE(r);return new Tc({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=SE(r);return new Tc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function SE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv extends xa{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Uv.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Uv(e,n,r,i)}}function AA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Uv._fromErrorAndOperation(t,a,e,r):a})}async function B$(t,e,n=!1){const r=await Cc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Tc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(t,e,n=!1){const{auth:r}=t;if(Qs(r.app))return Promise.reject(Si(r));const i="reauthenticate";try{const a=await Cc(t,AA(r,i,e,t),n);lt(a.idToken,r,"internal-error");const o=Z1(a.idToken);lt(o,r,"internal-error");const{sub:c}=o;return lt(t.uid===c,r,"user-mismatch"),Tc._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ai(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(t,e,n=!1){if(Qs(t.app))return Promise.reject(Si(t));const r="signIn",i=await AA(t,r,e),a=await Tc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function q$(t,e){return MA(go(t),e)}async function EE(t,e){return RA(Ut(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(t,e,n){var r;lt(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),lt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(lt(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(lt(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(t){const e=go(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DA(t,e,n){if(Qs(t.app))return Promise.reject(Si(t));const r=go(t),o=await Dw(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$$).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&OA(t),u}),c=await Tc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function H$(t,e,n){return Qs(t.app)?Promise.reject(Si(t)):q$(Ut(t),ml.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&OA(t),r})}async function H0(t,e){const n=Ut(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&W$(n.auth,i,e);const{email:a}=await D$(n.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G$(t,e){return Oi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dm(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ut(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Cc(r,G$(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function K$(t,e){const n=Ut(t);return Qs(n.auth.app)?Promise.reject(Si(n.auth)):LA(n,e,null)}function Z$(t,e){return LA(Ut(t),null,e)}async function LA(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const o=await Cc(t,A$(r,a));await t._updateTokensIfNecessary(o,!0)}function Y$(t,e,n,r){return Ut(t).onIdTokenChanged(e,n,r)}function Q$(t,e,n){return Ut(t).beforeAuthStateChanged(e,n)}function X$(t,e,n,r){return Ut(t).onAuthStateChanged(e,n,r)}function J$(t){return Ut(t).signOut()}async function e7(t){return Ut(t).delete()}const $v="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($v,"1"),this.storage.removeItem($v),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7=1e3,n7=10;class VA extends FA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);m$()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,n7):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},t7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VA.type="LOCAL";const r7=VA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA extends FA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zA.type="SESSION";const UA=zA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Xx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await s7(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=ej("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(g.data.response);break;default:clearTimeout(f),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(){return window}function a7(t){oa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(){return typeof oa().WorkerGlobalScope<"u"&&typeof oa().importScripts=="function"}async function o7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function l7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function c7(){return $A()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="firebaseLocalStorageDb",u7=1,Bv="firebaseLocalStorage",qA="fbase_key";class Bm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jx(t,e){return t.transaction([Bv],e?"readwrite":"readonly").objectStore(Bv)}function d7(){const t=indexedDB.deleteDatabase(BA);return new Bm(t).toPromise()}function Lw(){const t=indexedDB.open(BA,u7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Bv,{keyPath:qA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Bv)?e(r):(r.close(),await d7(),e(await Lw()))})})}async function CE(t,e,n){const r=Jx(t,!0).put({[qA]:e,value:n});return new Bm(r).toPromise()}async function h7(t,e){const n=Jx(t,!1).get(e),r=await new Bm(n).toPromise();return r===void 0?null:r.value}function kE(t,e){const n=Jx(t,!0).delete(e);return new Bm(n).toPromise()}const f7=800,m7=3;class WA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>m7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $A()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xx._getInstance(c7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await o7(),!this.activeServiceWorker)return;this.sender=new i7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||l7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lw();return await CE(e,$v,"1"),await kE(e,$v),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>CE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>h7(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Jx(i,!1).getAll();return new Bm(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),f7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WA.type="LOCAL";const p7=WA;new zm(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t,e){return e?Wa(e):(lt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj extends Q1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ad(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ad(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ad(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function g7(t){return MA(t.auth,new tj(t),t.bypassAuthState)}function v7(t){const{auth:e,user:n}=t;return lt(n,e,"internal-error"),RA(n,new tj(t),t.bypassAuthState)}async function x7(t){const{auth:e,user:n}=t;return lt(n,e,"internal-error"),B$(n,new tj(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g7;case"linkViaPopup":case"linkViaRedirect":return x7;case"reauthViaPopup":case"reauthViaRedirect":return v7;default:ai(this.auth,"internal-error")}}resolve(e){to(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){to(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7=new zm(2e3,1e4);class Qu extends GA{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Qu.currentPopupAction&&Qu.currentPopupAction.cancel(),Qu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return lt(e,this.auth,"internal-error"),e}async onExecution(){to(this.filter.length===1,"Popup operations only handle one event");const e=ej();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(aa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(aa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(aa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y7.get())};e()}}Qu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7="pendingRedirect",Hg=new Map;class w7 extends GA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hg.get(this.auth._key());if(!e){try{const r=await b7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hg.set(this.auth._key(),e)}return this.bypassAuthState||Hg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function b7(t,e){const n=ZA(e),r=KA(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function j7(t,e){return KA(t)._set(ZA(e),"true")}function N7(t,e){Hg.set(t._key(),e)}function KA(t){return Wa(t._redirectPersistence)}function ZA(t){return Wg(_7,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t,e,n){return E7(t,e,n)}async function E7(t,e,n){if(Qs(t.app))return Promise.reject(Si(t));const r=go(t);YU(t,e,J1),await r._initializationPromise;const i=HA(r,n);return await j7(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function C7(t,e){return await go(t)._initializationPromise,YA(t,e,!1)}async function YA(t,e,n=!1){if(Qs(t.app))return Promise.reject(Si(t));const r=go(t),i=HA(r,e),o=await new w7(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7=10*60*1e3;class T7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!P7(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(aa(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=k7&&this.cachedEventUids.clear(),this.cachedEventUids.has(TE(e))}saveEventToCache(e){this.cachedEventUids.add(TE(e)),this.lastProcessedEventTime=Date.now()}}function TE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function P7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I7(t,e={}){return Oi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R7=/^https?/;async function M7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await I7(t);for(const n of e)try{if(O7(n))return}catch{}ai(t,"unauthorized-domain")}function O7(t){const e=Mw(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!R7.test(n))return!1;if(A7.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=new zm(3e4,6e4);function PE(){const t=oa().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function L7(t){return new Promise((e,n)=>{var r,i,a;function o(){PE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PE(),n(aa(t,"network-request-failed"))},timeout:D7.get()})}if(!((i=(r=oa().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=oa().gapi)===null||a===void 0)&&a.load)o();else{const c=j$("iframefcb");return oa()[c]=()=>{gapi.load?o():n(aa(t,"network-request-failed"))},PA(`${b$()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Gg=null,e})}let Gg=null;function F7(t){return Gg=Gg||L7(t),Gg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7=new zm(5e3,15e3),z7="__/auth/iframe",U7="emulator/auth/iframe",$7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q7(t){const e=t.config;lt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?K1(e,U7):`https://${t.config.authDomain}/${z7}`,r={apiKey:e.apiKey,appName:t.name,v:Wc},i=B7.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Fm(r).slice(1)}`}async function W7(t){const e=await F7(t),n=oa().gapi;return lt(n,t,"internal-error"),e.open({where:document.body,url:q7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$7,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=aa(t,"network-request-failed"),c=oa().setTimeout(()=>{a(o)},V7.get());function u(){oa().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G7=500,K7=600,Z7="_blank",Y7="http://localhost";class IE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Q7(t,e,n,r=G7,i=K7){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},H7),{width:r.toString(),height:i.toString(),top:a,left:o}),d=Vr().toLowerCase();n&&(c=jA(d)?Z7:n),wA(d)&&(e=e||Y7,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[_,N])=>`${g}${_}=${N},`,"");if(f$(d)&&c!=="_self")return X7(e||"",c),new IE(null);const p=window.open(e||"",c,f);lt(p,t,"popup-blocked");try{p.focus()}catch{}return new IE(p)}function X7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7="__/auth/handler",eB="emulator/auth/handler",tB=encodeURIComponent("fac");async function AE(t,e,n,r,i,a){lt(t.config.authDomain,t,"auth-domain-config-required"),lt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Wc,eventId:i};if(e instanceof J1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Dz(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof $m){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${tB}=${encodeURIComponent(u)}`:"";return`${nB(t)}?${Fm(c).slice(1)}${d}`}function nB({config:t}){return t.emulator?K1(t,eB):`https://${t.authDomain}/${J7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="webStorageSupport";class rB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UA,this._completeRedirectFn=YA,this._overrideRedirectResult=N7}async _openPopup(e,n,r,i){var a;to((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await AE(e,n,r,Mw(),i);return Q7(e,o,ej())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await AE(e,n,r,Mw(),i);return a7(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(to(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await W7(e),r=new T7(e);return n.register("authEvent",i=>(lt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(G0,{type:G0},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[G0];o!==void 0&&n(!!o),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kA()||bA()||Y1()}}const sB=rB;var RE="@firebase/auth",ME="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oB(t){Ec(new fl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;lt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TA(t)},d=new y$(r,i,a,u);return k$(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ec(new fl("auth-internal",e=>{const n=go(e.getProvider("auth").getImmediate());return(r=>new iB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ia(RE,ME,aB(t)),ia(RE,ME,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB=5*60,cB=aA("authIdTokenMaxAge")||lB;let OE=null;const uB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cB)return;const i=n==null?void 0:n.token;OE!==i&&(OE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function dB(t=W1()){const e=Yx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=C$(t,{popupRedirectResolver:sB,persistence:[p7,r7,UA]}),r=aA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=uB(a.toString());Q$(n,o,()=>o(n.currentUser)),Y$(n,c=>o(c))}}const i=rA("auth");return i&&T$(n,`http://${i}`),n}function hB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_$({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=aa("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",hB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oB("Browser");var DE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hc,XA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,V){function U(){}U.prototype=V.prototype,R.D=V.prototype,R.prototype=new U,R.prototype.constructor=R,R.C=function(k,F,D){for(var P=Array(arguments.length-2),H=2;H<arguments.length;H++)P[H-2]=arguments[H];return V.prototype[F].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,V,U){U||(U=0);var k=Array(16);if(typeof V=="string")for(var F=0;16>F;++F)k[F]=V.charCodeAt(U++)|V.charCodeAt(U++)<<8|V.charCodeAt(U++)<<16|V.charCodeAt(U++)<<24;else for(F=0;16>F;++F)k[F]=V[U++]|V[U++]<<8|V[U++]<<16|V[U++]<<24;V=R.g[0],U=R.g[1],F=R.g[2];var D=R.g[3],P=V+(D^U&(F^D))+k[0]+3614090360&4294967295;V=U+(P<<7&4294967295|P>>>25),P=D+(F^V&(U^F))+k[1]+3905402710&4294967295,D=V+(P<<12&4294967295|P>>>20),P=F+(U^D&(V^U))+k[2]+606105819&4294967295,F=D+(P<<17&4294967295|P>>>15),P=U+(V^F&(D^V))+k[3]+3250441966&4294967295,U=F+(P<<22&4294967295|P>>>10),P=V+(D^U&(F^D))+k[4]+4118548399&4294967295,V=U+(P<<7&4294967295|P>>>25),P=D+(F^V&(U^F))+k[5]+1200080426&4294967295,D=V+(P<<12&4294967295|P>>>20),P=F+(U^D&(V^U))+k[6]+2821735955&4294967295,F=D+(P<<17&4294967295|P>>>15),P=U+(V^F&(D^V))+k[7]+4249261313&4294967295,U=F+(P<<22&4294967295|P>>>10),P=V+(D^U&(F^D))+k[8]+1770035416&4294967295,V=U+(P<<7&4294967295|P>>>25),P=D+(F^V&(U^F))+k[9]+2336552879&4294967295,D=V+(P<<12&4294967295|P>>>20),P=F+(U^D&(V^U))+k[10]+4294925233&4294967295,F=D+(P<<17&4294967295|P>>>15),P=U+(V^F&(D^V))+k[11]+2304563134&4294967295,U=F+(P<<22&4294967295|P>>>10),P=V+(D^U&(F^D))+k[12]+1804603682&4294967295,V=U+(P<<7&4294967295|P>>>25),P=D+(F^V&(U^F))+k[13]+4254626195&4294967295,D=V+(P<<12&4294967295|P>>>20),P=F+(U^D&(V^U))+k[14]+2792965006&4294967295,F=D+(P<<17&4294967295|P>>>15),P=U+(V^F&(D^V))+k[15]+1236535329&4294967295,U=F+(P<<22&4294967295|P>>>10),P=V+(F^D&(U^F))+k[1]+4129170786&4294967295,V=U+(P<<5&4294967295|P>>>27),P=D+(U^F&(V^U))+k[6]+3225465664&4294967295,D=V+(P<<9&4294967295|P>>>23),P=F+(V^U&(D^V))+k[11]+643717713&4294967295,F=D+(P<<14&4294967295|P>>>18),P=U+(D^V&(F^D))+k[0]+3921069994&4294967295,U=F+(P<<20&4294967295|P>>>12),P=V+(F^D&(U^F))+k[5]+3593408605&4294967295,V=U+(P<<5&4294967295|P>>>27),P=D+(U^F&(V^U))+k[10]+38016083&4294967295,D=V+(P<<9&4294967295|P>>>23),P=F+(V^U&(D^V))+k[15]+3634488961&4294967295,F=D+(P<<14&4294967295|P>>>18),P=U+(D^V&(F^D))+k[4]+3889429448&4294967295,U=F+(P<<20&4294967295|P>>>12),P=V+(F^D&(U^F))+k[9]+568446438&4294967295,V=U+(P<<5&4294967295|P>>>27),P=D+(U^F&(V^U))+k[14]+3275163606&4294967295,D=V+(P<<9&4294967295|P>>>23),P=F+(V^U&(D^V))+k[3]+4107603335&4294967295,F=D+(P<<14&4294967295|P>>>18),P=U+(D^V&(F^D))+k[8]+1163531501&4294967295,U=F+(P<<20&4294967295|P>>>12),P=V+(F^D&(U^F))+k[13]+2850285829&4294967295,V=U+(P<<5&4294967295|P>>>27),P=D+(U^F&(V^U))+k[2]+4243563512&4294967295,D=V+(P<<9&4294967295|P>>>23),P=F+(V^U&(D^V))+k[7]+1735328473&4294967295,F=D+(P<<14&4294967295|P>>>18),P=U+(D^V&(F^D))+k[12]+2368359562&4294967295,U=F+(P<<20&4294967295|P>>>12),P=V+(U^F^D)+k[5]+4294588738&4294967295,V=U+(P<<4&4294967295|P>>>28),P=D+(V^U^F)+k[8]+2272392833&4294967295,D=V+(P<<11&4294967295|P>>>21),P=F+(D^V^U)+k[11]+1839030562&4294967295,F=D+(P<<16&4294967295|P>>>16),P=U+(F^D^V)+k[14]+4259657740&4294967295,U=F+(P<<23&4294967295|P>>>9),P=V+(U^F^D)+k[1]+2763975236&4294967295,V=U+(P<<4&4294967295|P>>>28),P=D+(V^U^F)+k[4]+1272893353&4294967295,D=V+(P<<11&4294967295|P>>>21),P=F+(D^V^U)+k[7]+4139469664&4294967295,F=D+(P<<16&4294967295|P>>>16),P=U+(F^D^V)+k[10]+3200236656&4294967295,U=F+(P<<23&4294967295|P>>>9),P=V+(U^F^D)+k[13]+681279174&4294967295,V=U+(P<<4&4294967295|P>>>28),P=D+(V^U^F)+k[0]+3936430074&4294967295,D=V+(P<<11&4294967295|P>>>21),P=F+(D^V^U)+k[3]+3572445317&4294967295,F=D+(P<<16&4294967295|P>>>16),P=U+(F^D^V)+k[6]+76029189&4294967295,U=F+(P<<23&4294967295|P>>>9),P=V+(U^F^D)+k[9]+3654602809&4294967295,V=U+(P<<4&4294967295|P>>>28),P=D+(V^U^F)+k[12]+3873151461&4294967295,D=V+(P<<11&4294967295|P>>>21),P=F+(D^V^U)+k[15]+530742520&4294967295,F=D+(P<<16&4294967295|P>>>16),P=U+(F^D^V)+k[2]+3299628645&4294967295,U=F+(P<<23&4294967295|P>>>9),P=V+(F^(U|~D))+k[0]+4096336452&4294967295,V=U+(P<<6&4294967295|P>>>26),P=D+(U^(V|~F))+k[7]+1126891415&4294967295,D=V+(P<<10&4294967295|P>>>22),P=F+(V^(D|~U))+k[14]+2878612391&4294967295,F=D+(P<<15&4294967295|P>>>17),P=U+(D^(F|~V))+k[5]+4237533241&4294967295,U=F+(P<<21&4294967295|P>>>11),P=V+(F^(U|~D))+k[12]+1700485571&4294967295,V=U+(P<<6&4294967295|P>>>26),P=D+(U^(V|~F))+k[3]+2399980690&4294967295,D=V+(P<<10&4294967295|P>>>22),P=F+(V^(D|~U))+k[10]+4293915773&4294967295,F=D+(P<<15&4294967295|P>>>17),P=U+(D^(F|~V))+k[1]+2240044497&4294967295,U=F+(P<<21&4294967295|P>>>11),P=V+(F^(U|~D))+k[8]+1873313359&4294967295,V=U+(P<<6&4294967295|P>>>26),P=D+(U^(V|~F))+k[15]+4264355552&4294967295,D=V+(P<<10&4294967295|P>>>22),P=F+(V^(D|~U))+k[6]+2734768916&4294967295,F=D+(P<<15&4294967295|P>>>17),P=U+(D^(F|~V))+k[13]+1309151649&4294967295,U=F+(P<<21&4294967295|P>>>11),P=V+(F^(U|~D))+k[4]+4149444226&4294967295,V=U+(P<<6&4294967295|P>>>26),P=D+(U^(V|~F))+k[11]+3174756917&4294967295,D=V+(P<<10&4294967295|P>>>22),P=F+(V^(D|~U))+k[2]+718787259&4294967295,F=D+(P<<15&4294967295|P>>>17),P=U+(D^(F|~V))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+V&4294967295,R.g[1]=R.g[1]+(F+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+F&4294967295,R.g[3]=R.g[3]+D&4294967295}r.prototype.u=function(R,V){V===void 0&&(V=R.length);for(var U=V-this.blockSize,k=this.B,F=this.h,D=0;D<V;){if(F==0)for(;D<=U;)i(this,R,D),D+=this.blockSize;if(typeof R=="string"){for(;D<V;)if(k[F++]=R.charCodeAt(D++),F==this.blockSize){i(this,k),F=0;break}}else for(;D<V;)if(k[F++]=R[D++],F==this.blockSize){i(this,k),F=0;break}}this.h=F,this.o+=V},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var V=1;V<R.length-8;++V)R[V]=0;var U=8*this.o;for(V=R.length-8;V<R.length;++V)R[V]=U&255,U/=256;for(this.u(R),R=Array(16),V=U=0;4>V;++V)for(var k=0;32>k;k+=8)R[U++]=this.g[V]>>>k&255;return R};function a(R,V){var U=c;return Object.prototype.hasOwnProperty.call(U,R)?U[R]:U[R]=V(R)}function o(R,V){this.h=V;for(var U=[],k=!0,F=R.length-1;0<=F;F--){var D=R[F]|0;k&&D==V||(U[F]=D,k=!1)}this.g=U}var c={};function u(R){return-128<=R&&128>R?a(R,function(V){return new o([V|0],0>V?-1:0)}):new o([R|0],0>R?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return p;if(0>R)return S(d(-R));for(var V=[],U=1,k=0;R>=U;k++)V[k]=R/U|0,U*=4294967296;return new o(V,0)}function f(R,V){if(R.length==0)throw Error("number format error: empty string");if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(R.charAt(0)=="-")return S(f(R.substring(1),V));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var U=d(Math.pow(V,8)),k=p,F=0;F<R.length;F+=8){var D=Math.min(8,R.length-F),P=parseInt(R.substring(F,F+D),V);8>D?(D=d(Math.pow(V,D)),k=k.j(D).add(d(P))):(k=k.j(U),k=k.add(d(P)))}return k}var p=u(0),g=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-S(this).m();for(var R=0,V=1,U=0;U<this.g.length;U++){var k=this.i(U);R+=(0<=k?k:4294967296+k)*V,V*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(b(this))return"-"+S(this).toString(R);for(var V=d(Math.pow(R,6)),U=this,k="";;){var F=A(U,V).g;U=w(U,F.j(V));var D=((0<U.g.length?U.g[0]:U.h)>>>0).toString(R);if(U=F,N(U))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(var V=0;V<R.g.length;V++)if(R.g[V]!=0)return!1;return!0}function b(R){return R.h==-1}t.l=function(R){return R=w(this,R),b(R)?-1:N(R)?0:1};function S(R){for(var V=R.g.length,U=[],k=0;k<V;k++)U[k]=~R.g[k];return new o(U,~R.h).add(g)}t.abs=function(){return b(this)?S(this):this},t.add=function(R){for(var V=Math.max(this.g.length,R.g.length),U=[],k=0,F=0;F<=V;F++){var D=k+(this.i(F)&65535)+(R.i(F)&65535),P=(D>>>16)+(this.i(F)>>>16)+(R.i(F)>>>16);k=P>>>16,D&=65535,P&=65535,U[F]=P<<16|D}return new o(U,U[U.length-1]&-2147483648?-1:0)};function w(R,V){return R.add(S(V))}t.j=function(R){if(N(this)||N(R))return p;if(b(this))return b(R)?S(this).j(S(R)):S(S(this).j(R));if(b(R))return S(this.j(S(R)));if(0>this.l(_)&&0>R.l(_))return d(this.m()*R.m());for(var V=this.g.length+R.g.length,U=[],k=0;k<2*V;k++)U[k]=0;for(k=0;k<this.g.length;k++)for(var F=0;F<R.g.length;F++){var D=this.i(k)>>>16,P=this.i(k)&65535,H=R.i(F)>>>16,ee=R.i(F)&65535;U[2*k+2*F]+=P*ee,y(U,2*k+2*F),U[2*k+2*F+1]+=D*ee,y(U,2*k+2*F+1),U[2*k+2*F+1]+=P*H,y(U,2*k+2*F+1),U[2*k+2*F+2]+=D*H,y(U,2*k+2*F+2)}for(k=0;k<V;k++)U[k]=U[2*k+1]<<16|U[2*k];for(k=V;k<2*V;k++)U[k]=0;return new o(U,0)};function y(R,V){for(;(R[V]&65535)!=R[V];)R[V+1]+=R[V]>>>16,R[V]&=65535,V++}function E(R,V){this.g=R,this.h=V}function A(R,V){if(N(V))throw Error("division by zero");if(N(R))return new E(p,p);if(b(R))return V=A(S(R),V),new E(S(V.g),S(V.h));if(b(V))return V=A(R,S(V)),new E(S(V.g),V.h);if(30<R.g.length){if(b(R)||b(V))throw Error("slowDivide_ only works with positive integers.");for(var U=g,k=V;0>=k.l(R);)U=O(U),k=O(k);var F=q(U,1),D=q(k,1);for(k=q(k,2),U=q(U,2);!N(k);){var P=D.add(k);0>=P.l(R)&&(F=F.add(U),D=P),k=q(k,1),U=q(U,1)}return V=w(R,F.j(V)),new E(F,V)}for(F=p;0<=R.l(V);){for(U=Math.max(1,Math.floor(R.m()/V.m())),k=Math.ceil(Math.log(U)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=d(U),P=D.j(V);b(P)||0<P.l(R);)U-=k,D=d(U),P=D.j(V);N(D)&&(D=g),F=F.add(D),R=w(R,P)}return new E(F,R)}t.A=function(R){return A(this,R).h},t.and=function(R){for(var V=Math.max(this.g.length,R.g.length),U=[],k=0;k<V;k++)U[k]=this.i(k)&R.i(k);return new o(U,this.h&R.h)},t.or=function(R){for(var V=Math.max(this.g.length,R.g.length),U=[],k=0;k<V;k++)U[k]=this.i(k)|R.i(k);return new o(U,this.h|R.h)},t.xor=function(R){for(var V=Math.max(this.g.length,R.g.length),U=[],k=0;k<V;k++)U[k]=this.i(k)^R.i(k);return new o(U,this.h^R.h)};function O(R){for(var V=R.g.length+1,U=[],k=0;k<V;k++)U[k]=R.i(k)<<1|R.i(k-1)>>>31;return new o(U,R.h)}function q(R,V){var U=V>>5;V%=32;for(var k=R.g.length-U,F=[],D=0;D<k;D++)F[D]=0<V?R.i(D+U)>>>V|R.i(D+U+1)<<32-V:R.i(D+U);return new o(F,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,XA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,hc=o}).apply(typeof DE<"u"?DE:typeof self<"u"?self:typeof window<"u"?window:{});var fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JA,xf,eR,Kg,Fw,tR,nR,rR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,C,M){return m==Array.prototype||m==Object.prototype||(m[C]=M.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof fg=="object"&&fg];for(var C=0;C<m.length;++C){var M=m[C];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var r=n(this);function i(m,C){if(C)e:{var M=r;m=m.split(".");for(var W=0;W<m.length-1;W++){var ae=m[W];if(!(ae in M))break e;M=M[ae]}m=m[m.length-1],W=M[m],C=C(W),C!=W&&C!=null&&e(M,m,{configurable:!0,writable:!0,value:C})}}function a(m,C){m instanceof String&&(m+="");var M=0,W=!1,ae={next:function(){if(!W&&M<m.length){var he=M++;return{value:C(he,m[he]),done:!1}}return W=!0,{done:!0,value:void 0}}};return ae[Symbol.iterator]=function(){return ae},ae}i("Array.prototype.values",function(m){return m||function(){return a(this,function(C,M){return M})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(m){var C=typeof m;return C=C!="object"?C:m?Array.isArray(m)?"array":C:"null",C=="array"||C=="object"&&typeof m.length=="number"}function d(m){var C=typeof m;return C=="object"&&m!=null||C=="function"}function f(m,C,M){return m.call.apply(m.bind,arguments)}function p(m,C,M){if(!m)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var ae=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ae,W),m.apply(C,ae)}}return function(){return m.apply(C,arguments)}}function g(m,C,M){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function _(m,C){var M=Array.prototype.slice.call(arguments,1);return function(){var W=M.slice();return W.push.apply(W,arguments),m.apply(this,W)}}function N(m,C){function M(){}M.prototype=C.prototype,m.aa=C.prototype,m.prototype=new M,m.prototype.constructor=m,m.Qb=function(W,ae,he){for(var Me=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)Me[qt-2]=arguments[qt];return C.prototype[ae].apply(W,Me)}}function b(m){const C=m.length;if(0<C){const M=Array(C);for(let W=0;W<C;W++)M[W]=m[W];return M}return[]}function S(m,C){for(let M=1;M<arguments.length;M++){const W=arguments[M];if(u(W)){const ae=m.length||0,he=W.length||0;m.length=ae+he;for(let Me=0;Me<he;Me++)m[ae+Me]=W[Me]}else m.push(W)}}class w{constructor(C,M){this.i=C,this.j=M,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function y(m){return/^[\s\xa0]*$/.test(m)}function E(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function A(m){return A[" "](m),m}A[" "]=function(){};var O=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function q(m,C,M){for(const W in m)C.call(M,m[W],W,m)}function R(m,C){for(const M in m)C.call(void 0,m[M],M,m)}function V(m){const C={};for(const M in m)C[M]=m[M];return C}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(m,C){let M,W;for(let ae=1;ae<arguments.length;ae++){W=arguments[ae];for(M in W)m[M]=W[M];for(let he=0;he<U.length;he++)M=U[he],Object.prototype.hasOwnProperty.call(W,M)&&(m[M]=W[M])}}function F(m){var C=1;m=m.split(":");const M=[];for(;0<C&&m.length;)M.push(m.shift()),C--;return m.length&&M.push(m.join(":")),M}function D(m){c.setTimeout(()=>{throw m},0)}function P(){var m=z;let C=null;return m.g&&(C=m.g,m.g=m.g.next,m.g||(m.h=null),C.next=null),C}class H{constructor(){this.h=this.g=null}add(C,M){const W=ee.get();W.set(C,M),this.h?this.h.next=W:this.g=W,this.h=W}}var ee=new w(()=>new Z,m=>m.reset());class Z{constructor(){this.next=this.g=this.h=null}set(C,M){this.h=C,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let K,I=!1,z=new H,B=()=>{const m=c.Promise.resolve(void 0);K=()=>{m.then(X)}};var X=()=>{for(var m;m=P();){try{m.h.call(m.g)}catch(M){D(M)}var C=ee;C.j(m),100>C.h&&(C.h++,m.next=C.g,C.g=m)}I=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(m,C){this.type=m,this.g=this.target=C,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,C=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const M=()=>{};c.addEventListener("test",M,C),c.removeEventListener("test",M,C)}catch{}return m}();function De(m,C){if(ge.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var M=this.type=m.type,W=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=C,C=m.relatedTarget){if(O){e:{try{A(C.nodeName);var ae=!0;break e}catch{}ae=!1}ae||(C=null)}}else M=="mouseover"?C=m.fromElement:M=="mouseout"&&(C=m.toElement);this.relatedTarget=C,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:$e[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&De.aa.h.call(this)}}N(De,ge);var $e={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),se=0;function te(m,C,M,W,ae){this.listener=m,this.proxy=null,this.src=C,this.type=M,this.capture=!!W,this.ha=ae,this.key=++se,this.da=this.fa=!1}function ie(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Y(m){this.src=m,this.g={},this.h=0}Y.prototype.add=function(m,C,M,W,ae){var he=m.toString();m=this.g[he],m||(m=this.g[he]=[],this.h++);var Me=pe(m,C,W,ae);return-1<Me?(C=m[Me],M||(C.fa=!1)):(C=new te(C,this.src,he,!!W,ae),C.fa=M,m.push(C)),C};function oe(m,C){var M=C.type;if(M in m.g){var W=m.g[M],ae=Array.prototype.indexOf.call(W,C,void 0),he;(he=0<=ae)&&Array.prototype.splice.call(W,ae,1),he&&(ie(C),m.g[M].length==0&&(delete m.g[M],m.h--))}}function pe(m,C,M,W){for(var ae=0;ae<m.length;++ae){var he=m[ae];if(!he.da&&he.listener==C&&he.capture==!!M&&he.ha==W)return ae}return-1}var Ce="closure_lm_"+(1e6*Math.random()|0),we={};function ne(m,C,M,W,ae){if(Array.isArray(C)){for(var he=0;he<C.length;he++)ne(m,C[he],M,W,ae);return null}return M=Ne(M),m&&m[Ae]?m.K(C,M,d(W)?!!W.capture:!1,ae):_e(m,C,M,!1,W,ae)}function _e(m,C,M,W,ae,he){if(!C)throw Error("Invalid event type");var Me=d(ae)?!!ae.capture:!!ae,qt=ke(m);if(qt||(m[Ce]=qt=new Y(m)),M=qt.add(C,M,W,Me,he),M.proxy)return M;if(W=be(),M.proxy=W,W.src=m,W.listener=M,m.addEventListener)Ee||(ae=Me),ae===void 0&&(ae=!1),m.addEventListener(C.toString(),W,ae);else if(m.attachEvent)m.attachEvent(re(C.toString()),W);else if(m.addListener&&m.removeListener)m.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return M}function be(){function m(M){return C.call(m.src,m.listener,M)}const C=ce;return m}function We(m,C,M,W,ae){if(Array.isArray(C))for(var he=0;he<C.length;he++)We(m,C[he],M,W,ae);else W=d(W)?!!W.capture:!!W,M=Ne(M),m&&m[Ae]?(m=m.i,C=String(C).toString(),C in m.g&&(he=m.g[C],M=pe(he,M,W,ae),-1<M&&(ie(he[M]),Array.prototype.splice.call(he,M,1),he.length==0&&(delete m.g[C],m.h--)))):m&&(m=ke(m))&&(C=m.g[C.toString()],m=-1,C&&(m=pe(C,M,W,ae)),(M=-1<m?C[m]:null)&&G(M))}function G(m){if(typeof m!="number"&&m&&!m.da){var C=m.src;if(C&&C[Ae])oe(C.i,m);else{var M=m.type,W=m.proxy;C.removeEventListener?C.removeEventListener(M,W,m.capture):C.detachEvent?C.detachEvent(re(M),W):C.addListener&&C.removeListener&&C.removeListener(W),(M=ke(C))?(oe(M,m),M.h==0&&(M.src=null,C[Ce]=null)):ie(m)}}}function re(m){return m in we?we[m]:we[m]="on"+m}function ce(m,C){if(m.da)m=!0;else{C=new De(C,this);var M=m.listener,W=m.ha||m.src;m.fa&&G(m),m=M.call(W,C)}return m}function ke(m){return m=m[Ce],m instanceof Y?m:null}var Pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ne(m){return typeof m=="function"?m:(m[Pe]||(m[Pe]=function(C){return m.handleEvent(C)}),m[Pe])}function Fe(){ue.call(this),this.i=new Y(this),this.M=this,this.F=null}N(Fe,ue),Fe.prototype[Ae]=!0,Fe.prototype.removeEventListener=function(m,C,M,W){We(this,m,C,M,W)};function He(m,C){var M,W=m.F;if(W)for(M=[];W;W=W.F)M.push(W);if(m=m.M,W=C.type||C,typeof C=="string")C=new ge(C,m);else if(C instanceof ge)C.target=C.target||m;else{var ae=C;C=new ge(W,m),k(C,ae)}if(ae=!0,M)for(var he=M.length-1;0<=he;he--){var Me=C.g=M[he];ae=nt(Me,W,!0,C)&&ae}if(Me=C.g=m,ae=nt(Me,W,!0,C)&&ae,ae=nt(Me,W,!1,C)&&ae,M)for(he=0;he<M.length;he++)Me=C.g=M[he],ae=nt(Me,W,!1,C)&&ae}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var m=this.i,C;for(C in m.g){for(var M=m.g[C],W=0;W<M.length;W++)ie(M[W]);delete m.g[C],m.h--}}this.F=null},Fe.prototype.K=function(m,C,M,W){return this.i.add(String(m),C,!1,M,W)},Fe.prototype.L=function(m,C,M,W){return this.i.add(String(m),C,!0,M,W)};function nt(m,C,M,W){if(C=m.i.g[String(C)],!C)return!0;C=C.concat();for(var ae=!0,he=0;he<C.length;++he){var Me=C[he];if(Me&&!Me.da&&Me.capture==M){var qt=Me.listener,Wn=Me.ha||Me.src;Me.fa&&oe(m.i,Me),ae=qt.call(Wn,W)!==!1&&ae}}return ae&&!W.defaultPrevented}function Yt(m,C,M){if(typeof m=="function")M&&(m=g(m,M));else if(m&&typeof m.handleEvent=="function")m=g(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:c.setTimeout(m,C||0)}function tr(m){m.g=Yt(()=>{m.g=null,m.i&&(m.i=!1,tr(m))},m.l);const C=m.h;m.h=null,m.m.apply(null,C)}class qn extends ue{constructor(C,M){super(),this.m=C,this.l=M,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:tr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zr(m){ue.call(this),this.h=m,this.g={}}N(zr,ue);var rs=[];function ss(m){q(m.g,function(C,M){this.g.hasOwnProperty(M)&&G(C)},m),m.g={}}zr.prototype.N=function(){zr.aa.N.call(this),ss(this)},zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fi=c.JSON.stringify,tu=c.JSON.parse,ba=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function vo(){}vo.prototype.h=null;function xp(m){return m.h||(m.h=m.i())}function vh(){}var xo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nu(){ge.call(this,"d")}N(nu,ge);function xh(){ge.call(this,"c")}N(xh,ge);var ja={},yp=null;function ru(){return yp=yp||new Fe}ja.La="serverreachability";function _p(m){ge.call(this,ja.La,m)}N(_p,ge);function Vl(m){const C=ru();He(C,new _p(C))}ja.STAT_EVENT="statevent";function su(m,C){ge.call(this,ja.STAT_EVENT,m),this.stat=C}N(su,ge);function gr(m){const C=ru();He(C,new su(C,m))}ja.Ma="timingevent";function wp(m,C){ge.call(this,ja.Ma,m),this.size=C}N(wp,ge);function zl(m,C){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},C)}function Ul(){this.g=!0}Ul.prototype.xa=function(){this.g=!1};function Vs(m,C,M,W,ae,he){m.info(function(){if(m.g)if(he)for(var Me="",qt=he.split("&"),Wn=0;Wn<qt.length;Wn++){var Rt=qt[Wn].split("=");if(1<Rt.length){var Xt=Rt[0];Rt=Rt[1];var jn=Xt.split("_");Me=2<=jn.length&&jn[1]=="type"?Me+(Xt+"="+Rt+"&"):Me+(Xt+"=redacted&")}}else Me=null;else Me=he;return"XMLHTTP REQ ("+W+") [attempt "+ae+"]: "+C+`
`+M+`
`+Me})}function it(m,C,M,W,ae,he,Me){m.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ae+"]: "+C+`
`+M+`
`+he+" "+Me})}function Na(m,C,M,W){m.info(function(){return"XMLHTTP TEXT ("+C+"): "+jp(m,M)+(W?" "+W:"")})}function bp(m,C){m.info(function(){return"TIMEOUT: "+C})}Ul.prototype.info=function(){};function jp(m,C){if(!m.g)return C;if(!C)return null;try{var M=JSON.parse(C);if(M){for(m=0;m<M.length;m++)if(Array.isArray(M[m])){var W=M[m];if(!(2>W.length)){var ae=W[1];if(Array.isArray(ae)&&!(1>ae.length)){var he=ae[0];if(he!="noop"&&he!="stop"&&he!="close")for(var Me=1;Me<ae.length;Me++)ae[Me]=""}}}}return Fi(M)}catch{return C}}var $l={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},iu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},au;function ci(){}N(ci,vo),ci.prototype.g=function(){return new XMLHttpRequest},ci.prototype.i=function(){return{}},au=new ci;function ui(m,C,M,W){this.j=m,this.i=C,this.l=M,this.R=W||1,this.U=new zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Np}function Np(){this.i=null,this.g="",this.h=!1}var Sp={},yh={};function _h(m,C,M){m.L=1,m.v=Us(Tn(C)),m.m=M,m.P=!0,wh(m,null)}function wh(m,C){m.F=Date.now(),lu(m),m.A=Tn(m.v);var M=m.A,W=m.R;Array.isArray(W)||(W=[String(W)]),kp(M.i,"t",W),m.C=0,M=m.j.J,m.h=new Np,m.g=Op(m.j,M?C:null,!m.m),0<m.O&&(m.M=new qn(g(m.Y,m,m.g),m.O)),C=m.U,M=m.g,W=m.ca;var ae="readystatechange";Array.isArray(ae)||(ae&&(rs[0]=ae.toString()),ae=rs);for(var he=0;he<ae.length;he++){var Me=ne(M,ae[he],W||C.handleEvent,!1,C.h||C);if(!Me)break;C.g[Me.key]=Me}C=m.H?V(m.H):{},m.m?(m.u||(m.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,C)):(m.u="GET",m.g.ea(m.A,m.u,null,C)),Vl(),Vs(m.i,m.u,m.A,m.l,m.R,m.m)}ui.prototype.ca=function(m){m=m.target;const C=this.M;C&&Ur(m)==3?C.j():this.Y(m)},ui.prototype.Y=function(m){try{if(m==this.g)e:{const jn=Ur(this.g);var C=this.g.Ba();const So=this.g.Z();if(!(3>jn)&&(jn!=3||this.g&&(this.h.h||this.g.oa()||Lh(this.g)))){this.J||jn!=4||C==7||(C==8||0>=So?Vl(3):Vl(2)),bh(this);var M=this.g.Z();this.X=M;t:if(Ep(this)){var W=Lh(this.g);m="";var ae=W.length,he=Ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sa(this),Bl(this);var Me="";break t}this.h.i=new c.TextDecoder}for(C=0;C<ae;C++)this.h.h=!0,m+=this.h.i.decode(W[C],{stream:!(he&&C==ae-1)});W.length=0,this.h.g+=m,this.C=0,Me=this.h.g}else Me=this.g.oa();if(this.o=M==200,it(this.i,this.u,this.A,this.l,this.R,jn,M),this.o){if(this.T&&!this.K){t:{if(this.g){var qt,Wn=this.g;if((qt=Wn.g?Wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(qt)){var Rt=qt;break t}}Rt=null}if(M=Rt)Na(this.i,this.l,M,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ql(this,M);else{this.o=!1,this.s=3,gr(12),Sa(this),Bl(this);break e}}if(this.P){M=!0;let Mn;for(;!this.J&&this.C<Me.length;)if(Mn=ou(this,Me),Mn==yh){jn==4&&(this.s=4,gr(14),M=!1),Na(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==Sp){this.s=4,gr(15),Na(this.i,this.l,Me,"[Invalid Chunk]"),M=!1;break}else Na(this.i,this.l,Mn,null),ql(this,Mn);if(Ep(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jn!=4||Me.length!=0||this.h.h||(this.s=1,gr(16),M=!1),this.o=this.o&&M,!M)Na(this.i,this.l,Me,"[Invalid Chunked Response]"),Sa(this),Bl(this);else if(0<Me.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+Me.length),vu(Xt),Xt.M=!0,gr(11))}}else Na(this.i,this.l,Me,null),ql(this,Me);jn==4&&Sa(this),this.o&&!this.J&&(jn==4?Vh(this.j,this):(this.o=!1,lu(this)))}else a0(this.g),M==400&&0<Me.indexOf("Unknown SID")?(this.s=3,gr(12)):(this.s=0,gr(13)),Sa(this),Bl(this)}}}catch{}finally{}};function Ep(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function ou(m,C){var M=m.C,W=C.indexOf(`
`,M);return W==-1?yh:(M=Number(C.substring(M,W)),isNaN(M)?Sp:(W+=1,W+M>C.length?yh:(C=C.slice(W,W+M),m.C=W+M,C)))}ui.prototype.cancel=function(){this.J=!0,Sa(this)};function lu(m){m.S=Date.now()+m.I,Cp(m,m.I)}function Cp(m,C){if(m.B!=null)throw Error("WatchDog timer not null");m.B=zl(g(m.ba,m),C)}function bh(m){m.B&&(c.clearTimeout(m.B),m.B=null)}ui.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(bp(this.i,this.A),this.L!=2&&(Vl(),gr(17)),Sa(this),this.s=2,Bl(this)):Cp(this,this.S-m)};function Bl(m){m.j.G==0||m.J||Vh(m.j,m)}function Sa(m){bh(m);var C=m.M;C&&typeof C.ma=="function"&&C.ma(),m.M=null,ss(m.U),m.g&&(C=m.g,m.g=null,C.abort(),C.ma())}function ql(m,C){try{var M=m.j;if(M.G!=0&&(M.g==m||Tt(M.h,m))){if(!m.K&&Tt(M.h,m)&&M.G==3){try{var W=M.Da.g.parse(C)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ae=W;if(ae[0]==0){e:if(!M.u){if(M.g)if(M.g.F+3e3<m.F)yu(M),pu(M);else break e;gu(M),gr(18)}}else M.za=ae[1],0<M.za-M.T&&37500>ae[2]&&M.F&&M.v==0&&!M.C&&(M.C=zl(g(M.Za,M),6e3));if(1>=yo(M.h)&&M.ca){try{M.ca()}catch{}M.ca=void 0}}else Pa(M,11)}else if((m.K||M.g==m)&&yu(M),!y(C))for(ae=M.Da.g.parse(C),C=0;C<ae.length;C++){let Rt=ae[C];if(M.T=Rt[0],Rt=Rt[1],M.G==2)if(Rt[0]=="c"){M.K=Rt[1],M.ia=Rt[2];const Xt=Rt[3];Xt!=null&&(M.la=Xt,M.j.info("VER="+M.la));const jn=Rt[4];jn!=null&&(M.Aa=jn,M.j.info("SVER="+M.Aa));const So=Rt[5];So!=null&&typeof So=="number"&&0<So&&(W=1.5*So,M.L=W,M.j.info("backChannelRequestTimeoutMs_="+W)),W=M;const Mn=m.g;if(Mn){const wu=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wu){var he=W.h;he.g||wu.indexOf("spdy")==-1&&wu.indexOf("quic")==-1&&wu.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(rn(he,he.h),he.h=null))}if(W.D){const Ui=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ui&&(W.ya=Ui,ft(W.I,W.D,Ui))}}M.G=3,M.l&&M.l.ua(),M.ba&&(M.R=Date.now()-m.F,M.j.info("Handshake RTT: "+M.R+"ms")),W=M;var Me=m;if(W.qa=_u(W,W.J?W.ia:null,W.W),Me.K){Hl(W.h,Me);var qt=Me,Wn=W.L;Wn&&(qt.I=Wn),qt.B&&(bh(qt),lu(qt)),W.g=Me}else fi(W);0<M.i.length&&No(M)}else Rt[0]!="stop"&&Rt[0]!="close"||Pa(M,7);else M.G==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Pa(M,7):mu(M):Rt[0]!="noop"&&M.l&&M.l.ta(Rt),M.v=0)}}Vl(4)}catch{}}var Wl=class{constructor(m,C){this.g=m,this.map=C}};function jh(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nh(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function yo(m){return m.h?1:m.g?m.g.size:0}function Tt(m,C){return m.h?m.h==C:m.g?m.g.has(C):!1}function rn(m,C){m.g?m.g.add(C):m.h=C}function Hl(m,C){m.h&&m.h==C?m.h=null:m.g&&m.g.has(C)&&m.g.delete(C)}jh.prototype.cancel=function(){if(this.i=Ea(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ea(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let C=m.i;for(const M of m.g.values())C=C.concat(M.D);return C}return b(m.i)}function _o(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(u(m)){for(var C=[],M=m.length,W=0;W<M;W++)C.push(m[W]);return C}C=[],M=0;for(W in m)C[M++]=m[W];return C}function Sh(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(u(m)||typeof m=="string"){var C=[];m=m.length;for(var M=0;M<m;M++)C.push(M);return C}C=[],M=0;for(const W in m)C[M++]=W;return C}}}function bt(m,C){if(m.forEach&&typeof m.forEach=="function")m.forEach(C,void 0);else if(u(m)||typeof m=="string")Array.prototype.forEach.call(m,C,void 0);else for(var M=Sh(m),W=_o(m),ae=W.length,he=0;he<ae;he++)C.call(void 0,W[he],M&&M[he],m)}var pn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eh(m,C){if(m){m=m.split("&");for(var M=0;M<m.length;M++){var W=m[M].indexOf("="),ae=null;if(0<=W){var he=m[M].substring(0,W);ae=m[M].substring(W+1)}else he=m[M];C(he,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function zs(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof zs){this.h=m.h,cu(this,m.j),this.o=m.o,this.g=m.g,Ca(this,m.s),this.l=m.l;var C=m.i,M=new ka;M.i=C.i,C.g&&(M.g=new Map(C.g),M.h=C.h),Vi(this,M),this.m=m.m}else m&&(C=String(m).match(pn))?(this.h=!1,cu(this,C[1]||"",!0),this.o=di(C[2]||""),this.g=di(C[3]||"",!0),Ca(this,C[4]),this.l=di(C[5]||"",!0),Vi(this,C[6]||"",!0),this.m=di(C[7]||"")):(this.h=!1,this.i=new ka(null,this.h))}zs.prototype.toString=function(){var m=[],C=this.j;C&&m.push(hi(C,wo,!0),":");var M=this.g;return(M||C=="file")&&(m.push("//"),(C=this.o)&&m.push(hi(C,wo,!0),"@"),m.push(encodeURIComponent(String(M)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.s,M!=null&&m.push(":",String(M))),(M=this.l)&&(this.g&&M.charAt(0)!="/"&&m.push("/"),m.push(hi(M,M.charAt(0)=="/"?Th:kh,!0))),(M=this.i.toString())&&m.push("?",M),(M=this.m)&&m.push("#",hi(M,Ph)),m.join("")};function Tn(m){return new zs(m)}function cu(m,C,M){m.j=M?di(C,!0):C,m.j&&(m.j=m.j.replace(/:$/,""))}function Ca(m,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);m.s=C}else m.s=null}function Vi(m,C,M){C instanceof ka?(m.i=C,$s(m.i,m.h)):(M||(C=hi(C,uu)),m.i=new ka(C,m.h))}function ft(m,C,M){m.i.set(C,M)}function Us(m){return ft(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function di(m,C){return m?C?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function hi(m,C,M){return typeof m=="string"?(m=encodeURI(m).replace(C,Ch),M&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Ch(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var wo=/[#\/\?@]/g,kh=/[#\?:]/g,Th=/[#\?]/g,uu=/[#\?@]/g,Ph=/#/g;function ka(m,C){this.h=this.g=null,this.i=m||null,this.j=!!C}function _s(m){m.g||(m.g=new Map,m.h=0,m.i&&Eh(m.i,function(C,M){m.add(decodeURIComponent(C.replace(/\+/g," ")),M)}))}t=ka.prototype,t.add=function(m,C){_s(this),this.i=null,m=ct(this,m);var M=this.g.get(m);return M||this.g.set(m,M=[]),M.push(C),this.h+=1,this};function Ih(m,C){_s(m),C=ct(m,C),m.g.has(C)&&(m.i=null,m.h-=m.g.get(C).length,m.g.delete(C))}function du(m,C){return _s(m),C=ct(m,C),m.g.has(C)}t.forEach=function(m,C){_s(this),this.g.forEach(function(M,W){M.forEach(function(ae){m.call(C,ae,W,this)},this)},this)},t.na=function(){_s(this);const m=Array.from(this.g.values()),C=Array.from(this.g.keys()),M=[];for(let W=0;W<C.length;W++){const ae=m[W];for(let he=0;he<ae.length;he++)M.push(C[W])}return M},t.V=function(m){_s(this);let C=[];if(typeof m=="string")du(this,m)&&(C=C.concat(this.g.get(ct(this,m))));else{m=Array.from(this.g.values());for(let M=0;M<m.length;M++)C=C.concat(m[M])}return C},t.set=function(m,C){return _s(this),this.i=null,m=ct(this,m),du(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[C]),this.h+=1,this},t.get=function(m,C){return m?(m=this.V(m),0<m.length?String(m[0]):C):C};function kp(m,C,M){Ih(m,C),0<M.length&&(m.i=null,m.g.set(ct(m,C),b(M)),m.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],C=Array.from(this.g.keys());for(var M=0;M<C.length;M++){var W=C[M];const he=encodeURIComponent(String(W)),Me=this.V(W);for(W=0;W<Me.length;W++){var ae=he;Me[W]!==""&&(ae+="="+encodeURIComponent(String(Me[W]))),m.push(ae)}}return this.i=m.join("&")};function ct(m,C){return C=String(C),m.j&&(C=C.toLowerCase()),C}function $s(m,C){C&&!m.j&&(_s(m),m.i=null,m.g.forEach(function(M,W){var ae=W.toLowerCase();W!=ae&&(Ih(this,W),kp(this,ae,M))},m)),m.j=C}function Qt(m,C){const M=new Ul;if(c.Image){const W=new Image;W.onload=_(Bs,M,"TestLoadImage: loaded",!0,C,W),W.onerror=_(Bs,M,"TestLoadImage: error",!1,C,W),W.onabort=_(Bs,M,"TestLoadImage: abort",!1,C,W),W.ontimeout=_(Bs,M,"TestLoadImage: timeout",!1,C,W),c.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=m}else C(!1)}function Tp(m,C){const M=new Ul,W=new AbortController,ae=setTimeout(()=>{W.abort(),Bs(M,"TestPingServer: timeout",!1,C)},1e4);fetch(m,{signal:W.signal}).then(he=>{clearTimeout(ae),he.ok?Bs(M,"TestPingServer: ok",!0,C):Bs(M,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(ae),Bs(M,"TestPingServer: error",!1,C)})}function Bs(m,C,M,W,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),W(M)}catch{}}function Ah(){this.g=new ba}function Rh(m,C,M){const W=M||"";try{bt(m,function(ae,he){let Me=ae;d(ae)&&(Me=Fi(ae)),C.push(W+he+"="+encodeURIComponent(Me))})}catch(ae){throw C.push(W+"type="+encodeURIComponent("_badmap")),ae}}function qs(m){this.l=m.Ub||null,this.j=m.eb||!1}N(qs,vo),qs.prototype.g=function(){return new bo(this.l,this.j)},qs.prototype.i=function(m){return function(){return m}}({});function bo(m,C){Fe.call(this),this.D=m,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(bo,Fe),t=bo.prototype,t.open=function(m,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=C,this.readyState=1,ws(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(C.body=m),(this.D||c).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bn(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ws(this)),this.g&&(this.readyState=3,ws(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jo(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function jo(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var C=m.value?m.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!m.done}))&&(this.response=this.responseText+=C)}m.done?bn(this):ws(this),this.readyState==3&&jo(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,bn(this))},t.Qa=function(m){this.g&&(this.response=m,bn(this))},t.ga=function(){this.g&&bn(this)};function bn(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ws(m)}t.setRequestHeader=function(m,C){this.u.append(m,C)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],C=this.h.entries();for(var M=C.next();!M.done;)M=M.value,m.push(M[0]+": "+M[1]),M=C.next();return m.join(`\r
`)};function ws(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Mh(m){let C="";return q(m,function(M,W){C+=W,C+=":",C+=M,C+=`\r
`}),C}function hu(m,C,M){e:{for(W in M){var W=!1;break e}W=!0}W||(M=Mh(M),typeof m=="string"?M!=null&&encodeURIComponent(String(M)):ft(m,C,M))}function gn(m){Fe.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(gn,Fe);var Pp=/^https?$/i,Oh=["POST","PUT"];t=gn.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,C,M,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);C=C?C.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():au.g(),this.v=this.o?xp(this.o):xp(au),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(C,String(m),!0),this.B=!1}catch(he){Ip(this,he);return}if(m=M||"",M=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ae in W)M.set(ae,W[ae]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const he of W.keys())M.set(he,W.get(he));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(M.keys()).find(he=>he.toLowerCase()=="content-type"),ae=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Oh,C,void 0))||W||ae||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Me]of M)this.g.setRequestHeader(he,Me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{is(this),this.u=!0,this.g.send(m),this.u=!1}catch(he){Ip(this,he)}};function Ip(m,C){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=C,m.m=5,Dh(m),fu(m)}function Dh(m){m.A||(m.A=!0,He(m,"complete"),He(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,He(this,"complete"),He(this,"abort"),fu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fu(this,!0)),gn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Et(this):this.bb())},t.bb=function(){Et(this)};function Et(m){if(m.h&&typeof o<"u"&&(!m.v[1]||Ur(m)!=4||m.Z()!=2)){if(m.u&&Ur(m)==4)Yt(m.Ea,0,m);else if(He(m,"readystatechange"),Ur(m)==4){m.h=!1;try{const Me=m.Z();e:switch(Me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var M;if(!(M=C)){var W;if(W=Me===0){var ae=String(m.D).match(pn)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),W=!Pp.test(ae?ae.toLowerCase():"")}M=W}if(M)He(m,"complete"),He(m,"success");else{m.m=6;try{var he=2<Ur(m)?m.g.statusText:""}catch{he=""}m.l=he+" ["+m.Z()+"]",Dh(m)}}finally{fu(m)}}}}function fu(m,C){if(m.g){is(m);const M=m.g,W=m.v[0]?()=>{}:null;m.g=null,m.v=null,C||He(m,"ready");try{M.onreadystatechange=W}catch{}}}function is(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Ur(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Ur(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var C=this.g.responseText;return m&&C.indexOf(m)==0&&(C=C.substring(m.length)),tu(C)}};function Lh(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function a0(m){const C={};m=(m.g&&2<=Ur(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<m.length;W++){if(y(m[W]))continue;var M=F(m[W]);const ae=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const he=C[ae]||[];C[ae]=he,he.push(M)}R(C,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ta(m,C,M){return M&&M.internalChannelParams&&M.internalChannelParams[m]||C}function Ap(m){this.Aa=0,this.i=[],this.j=new Ul,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ta("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ta("baseRetryDelayMs",5e3,m),this.cb=Ta("retryDelaySeedMs",1e4,m),this.Wa=Ta("forwardChannelMaxRetries",2,m),this.wa=Ta("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new jh(m&&m.concurrentRequestLimit),this.Da=new Ah,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ap.prototype,t.la=8,t.G=1,t.connect=function(m,C,M,W){gr(0),this.W=m,this.H=C||{},M&&W!==void 0&&(this.H.OSID=M,this.H.OAID=W),this.F=this.X,this.I=_u(this,null,this.W),No(this)};function mu(m){if(Rp(m),m.G==3){var C=m.U++,M=Tn(m.I);if(ft(M,"SID",m.K),ft(M,"RID",C),ft(M,"TYPE","terminate"),Gl(m,M),C=new ui(m,m.j,C),C.L=2,C.v=Us(Tn(M)),M=!1,c.navigator&&c.navigator.sendBeacon)try{M=c.navigator.sendBeacon(C.v.toString(),"")}catch{}!M&&c.Image&&(new Image().src=C.v,M=!0),M||(C.g=Op(C.j,null),C.g.ea(C.v)),C.F=Date.now(),lu(C)}Mp(m)}function pu(m){m.g&&(vu(m),m.g.cancel(),m.g=null)}function Rp(m){pu(m),m.u&&(c.clearTimeout(m.u),m.u=null),yu(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function No(m){if(!Nh(m.h)&&!m.s){m.s=!0;var C=m.Ga;K||B(),I||(K(),I=!0),z.add(C,m),m.B=0}}function o0(m,C){return yo(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=C.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=zl(g(m.Ga,m,C),zh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ae=new ui(this,this.j,m);let he=this.o;if(this.S&&(he?(he=V(he),k(he,this.S)):he=this.S),this.m!==null||this.O||(ae.H=he,he=null),this.P)e:{for(var C=0,M=0;M<this.i.length;M++){t:{var W=this.i[M];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(C+=W,4096<C){C=M;break e}if(C===4096||M===this.i.length-1){C=M+1;break e}}C=1e3}else C=1e3;C=Fh(this,ae,C),M=Tn(this.I),ft(M,"RID",m),ft(M,"CVER",22),this.D&&ft(M,"X-HTTP-Session-Id",this.D),Gl(this,M),he&&(this.O?C="headers="+encodeURIComponent(String(Mh(he)))+"&"+C:this.m&&hu(M,this.m,he)),rn(this.h,ae),this.Ua&&ft(M,"TYPE","init"),this.P?(ft(M,"$req",C),ft(M,"SID","null"),ae.T=!0,_h(ae,M,null)):_h(ae,M,C),this.G=2}}else this.G==3&&(m?bs(this,m):this.i.length==0||Nh(this.h)||bs(this))};function bs(m,C){var M;C?M=C.l:M=m.U++;const W=Tn(m.I);ft(W,"SID",m.K),ft(W,"RID",M),ft(W,"AID",m.T),Gl(m,W),m.m&&m.o&&hu(W,m.m,m.o),M=new ui(m,m.j,M,m.B+1),m.m===null&&(M.H=m.o),C&&(m.i=C.D.concat(m.i)),C=Fh(m,M,1e3),M.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),rn(m.h,M),_h(M,W,C)}function Gl(m,C){m.H&&q(m.H,function(M,W){ft(C,W,M)}),m.l&&bt({},function(M,W){ft(C,W,M)})}function Fh(m,C,M){M=Math.min(m.i.length,M);var W=m.l?g(m.l.Na,m.l,m):null;e:{var ae=m.i;let he=-1;for(;;){const Me=["count="+M];he==-1?0<M?(he=ae[0].g,Me.push("ofs="+he)):he=0:Me.push("ofs="+he);let qt=!0;for(let Wn=0;Wn<M;Wn++){let Rt=ae[Wn].g;const Xt=ae[Wn].map;if(Rt-=he,0>Rt)he=Math.max(0,ae[Wn].g-100),qt=!1;else try{Rh(Xt,Me,"req"+Rt+"_")}catch{W&&W(Xt)}}if(qt){W=Me.join("&");break e}}}return m=m.i.splice(0,M),C.D=m,W}function fi(m){if(!m.g&&!m.u){m.Y=1;var C=m.Fa;K||B(),I||(K(),I=!0),z.add(C,m),m.v=0}}function gu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=zl(g(m.Fa,m),zh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=zl(g(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gr(10),pu(this),xu(this))};function vu(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function xu(m){m.g=new ui(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var C=Tn(m.qa);ft(C,"RID","rpc"),ft(C,"SID",m.K),ft(C,"AID",m.T),ft(C,"CI",m.F?"0":"1"),!m.F&&m.ja&&ft(C,"TO",m.ja),ft(C,"TYPE","xmlhttp"),Gl(m,C),m.m&&m.o&&hu(C,m.m,m.o),m.L&&(m.g.I=m.L);var M=m.g;m=m.ia,M.L=1,M.v=Us(Tn(C)),M.m=null,M.P=!0,wh(M,m)}t.Za=function(){this.C!=null&&(this.C=null,pu(this),gu(this),gr(19))};function yu(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Vh(m,C){var M=null;if(m.g==C){yu(m),vu(m),m.g=null;var W=2}else if(Tt(m.h,C))M=C.D,Hl(m.h,C),W=1;else return;if(m.G!=0){if(C.o)if(W==1){M=C.m?C.m.length:0,C=Date.now()-C.F;var ae=m.B;W=ru(),He(W,new wp(W,M)),No(m)}else fi(m);else if(ae=C.s,ae==3||ae==0&&0<C.X||!(W==1&&o0(m,C)||W==2&&gu(m)))switch(M&&0<M.length&&(C=m.h,C.i=C.i.concat(M)),ae){case 1:Pa(m,5);break;case 4:Pa(m,10);break;case 3:Pa(m,6);break;default:Pa(m,2)}}}function zh(m,C){let M=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(M*=2),M*C}function Pa(m,C){if(m.j.info("Error code "+C),C==2){var M=g(m.fb,m),W=m.Xa;const ae=!W;W=new zs(W||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||cu(W,"https"),Us(W),ae?Qt(W.toString(),M):Tp(W.toString(),M)}else gr(2);m.G=0,m.l&&m.l.sa(C),Mp(m),Rp(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),gr(2)):(this.j.info("Failed to ping google.com"),gr(1))};function Mp(m){if(m.G=0,m.ka=[],m.l){const C=Ea(m.h);(C.length!=0||m.i.length!=0)&&(S(m.ka,C),S(m.ka,m.i),m.h.i.length=0,b(m.i),m.i.length=0),m.l.ra()}}function _u(m,C,M){var W=M instanceof zs?Tn(M):new zs(M);if(W.g!="")C&&(W.g=C+"."+W.g),Ca(W,W.s);else{var ae=c.location;W=ae.protocol,C=C?C+"."+ae.hostname:ae.hostname,ae=+ae.port;var he=new zs(null);W&&cu(he,W),C&&(he.g=C),ae&&Ca(he,ae),M&&(he.l=M),W=he}return M=m.D,C=m.ya,M&&C&&ft(W,M,C),ft(W,"VER",m.la),Gl(m,W),W}function Op(m,C,M){if(C&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=m.Ca&&!m.pa?new gn(new qs({eb:M})):new gn(m.pa),C.Ha(m.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uh(){}t=Uh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kl(){}Kl.prototype.g=function(m,C){return new ur(m,C)};function ur(m,C){Fe.call(this),this.g=new Ap(C),this.l=m,this.h=C&&C.messageUrlParams||null,m=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(m?m["X-WebChannel-Content-Type"]=C.messageContentType:m={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(m?m["X-WebChannel-Client-Profile"]=C.va:m={"X-WebChannel-Client-Profile":C.va}),this.g.S=m,(m=C&&C.Sb)&&!y(m)&&(this.g.m=m),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!y(C)&&(this.g.D=C,m=this.h,m!==null&&C in m&&(m=this.h,C in m&&delete m[C])),this.j=new Ws(this)}N(ur,Fe),ur.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ur.prototype.close=function(){mu(this.g)},ur.prototype.o=function(m){var C=this.g;if(typeof m=="string"){var M={};M.__data__=m,m=M}else this.u&&(M={},M.__data__=Fi(m),m=M);C.i.push(new Wl(C.Ya++,m)),C.G==3&&No(C)},ur.prototype.N=function(){this.g.l=null,delete this.j,mu(this.g),delete this.g,ur.aa.N.call(this)};function zi(m){nu.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var C=m.__sm__;if(C){e:{for(const M in C){m=M;break e}m=void 0}(this.i=m)&&(m=this.i,C=C!==null&&m in C?C[m]:void 0),this.data=C}else this.data=m}N(zi,nu);function Dp(){xh.call(this),this.status=1}N(Dp,xh);function Ws(m){this.g=m}N(Ws,Uh),Ws.prototype.ua=function(){He(this.g,"a")},Ws.prototype.ta=function(m){He(this.g,new zi(m))},Ws.prototype.sa=function(m){He(this.g,new Dp)},Ws.prototype.ra=function(){He(this.g,"b")},Kl.prototype.createWebChannel=Kl.prototype.g,ur.prototype.send=ur.prototype.o,ur.prototype.open=ur.prototype.m,ur.prototype.close=ur.prototype.close,rR=function(){return new Kl},nR=function(){return ru()},tR=ja,Fw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$l.NO_ERROR=0,$l.TIMEOUT=8,$l.HTTP_ERROR=6,Kg=$l,iu.COMPLETE="complete",eR=iu,vh.EventType=xo,xo.OPEN="a",xo.CLOSE="b",xo.ERROR="c",xo.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,xf=vh,gn.prototype.listenOnce=gn.prototype.L,gn.prototype.getLastError=gn.prototype.Ka,gn.prototype.getLastErrorCode=gn.prototype.Ba,gn.prototype.getStatus=gn.prototype.Z,gn.prototype.getResponseJson=gn.prototype.Oa,gn.prototype.getResponseText=gn.prototype.oa,gn.prototype.send=gn.prototype.ea,gn.prototype.setWithCredentials=gn.prototype.Ha,JA=gn}).apply(typeof fg<"u"?fg:typeof self<"u"?self:typeof window<"u"?window:{});const LE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ir=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new B1("@firebase/firestore");function ef(){return Pc.logLevel}function et(t,...e){if(Pc.logLevel<=At.DEBUG){const n=e.map(nj);Pc.debug(`Firestore (${Jd}): ${t}`,...n)}}function no(t,...e){if(Pc.logLevel<=At.ERROR){const n=e.map(nj);Pc.error(`Firestore (${Jd}): ${t}`,...n)}}function wd(t,...e){if(Pc.logLevel<=At.WARN){const n=e.map(nj);Pc.warn(`Firestore (${Jd}): ${t}`,...n)}}function nj(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t="Unexpected state"){const e=`FIRESTORE (${Jd}) INTERNAL ASSERTION FAILED: `+t;throw no(e),new Error(e)}function Zt(t,e){t||mt()}function wt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends xa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ir.UNAUTHENTICATED))}shutdown(){}}class mB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pB{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Zt(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Ga;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ga,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ga)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zt(typeof r.accessToken=="string"),new sR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(e===null||typeof e=="string"),new Ir(e)}}class gB{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vB{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new gB(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yB{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Zt(this.o===void 0);const r=a=>{a.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,et("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Zt(typeof n.token=="string"),this.R=n.token,new xB(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _B(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_B(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function Lt(t,e){return t<e?-1:t>e?1:0}function bd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lr.fromMillis(Date.now())}static fromDate(e){return lr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new lr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new lr(0,0))}static max(){return new vt(new lr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,r){n===void 0?n=0:n>e.length&&mt(),r===void 0?r=e.length-n:r>e.length-n&&mt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hm.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hm?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class sn extends hm{construct(e,n,r){return new sn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ve(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new sn(n)}static emptyPath(){return new sn([])}}const wB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends hm{construct(e,n,r){return new yr(e,n,r)}static isValidIdentifier(e){return wB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ve(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ve(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ve(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Ve(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(n)}static emptyPath(){return new yr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.path=e}static fromPath(e){return new ot(sn.fromString(e))}static fromName(e){return new ot(sn.fromString(e).popFirst(5))}static empty(){return new ot(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return sn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new sn(e.slice()))}}function bB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(r===1e9?new lr(n+1,0):new lr(n,r));return new pl(i,ot.empty(),e)}function jB(t){return new pl(t.readTime,t.key,-1)}class pl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pl(vt.min(),ot.empty(),-1)}static max(){return new pl(vt.max(),ot.empty(),-1)}}function NB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ot.comparator(t.documentKey,e.documentKey),n!==0?n:Lt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qm(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==SB)throw t;et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Se((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Se?n:Se.resolve(n)}catch(n){return Se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Se.reject(n)}static resolve(e){return new Se((n,r)=>{n(e)})}static reject(e){return new Se((n,r)=>{r(e)})}static waitFor(e){return new Se((n,r)=>{let i=0,a=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++a,o&&a===i&&n()},u=>r(u))}),o=!0,a===i&&n()})}static or(e){let n=Se.resolve(!1);for(const r of e)n=n.next(i=>i?Se.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new Se((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===a&&r(o)},f=>i(f))}})}static doWhile(e,n){return new Se((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function CB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}rj.oe=-1;function ey(t){return t==null}function qv(t){return t===0&&1/t==-1/0}function kB(t){return typeof t=="number"&&Number.isInteger(t)&&!qv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){this.comparator=e,this.root=n||xr.EMPTY}insert(e,n){return new kn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xr.BLACK,null,null))}remove(e){return new kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mg(this.root,e,this.comparator,!1)}getReverseIterator(){return new mg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mg(this.root,e,this.comparator,!0)}}class mg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??xr.RED,this.left=i??xr.EMPTY,this.right=a??xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new xr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const e=this.left.check();if(e!==this.right.check())throw mt();return e+(this.isRed()?0:1)}}xr.EMPTY=null,xr.RED=!0,xr.BLACK=!1;xr.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(e,n,r,i,a){return this}insert(e,n,r){return new xr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.comparator=e,this.data=new kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new VE(this.data.getIterator())}getIteratorFrom(e){return new VE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof br)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new br(this.comparator);return n.data=e,n}}class VE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new ks([])}unionWith(e){let n=new br(yr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ks(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new oR("Invalid base64 string: "+a):a}}(e);return new Nr(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Nr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nr.EMPTY_BYTE_STRING=new Nr("");const TB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gl(t){if(Zt(!!t),typeof t=="string"){let e=0;const n=TB.exec(t);if(Zt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:On(t.seconds),nanos:On(t.nanos)}}function On(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ic(t){return typeof t=="string"?Nr.fromBase64String(t):Nr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sj(t){const e=t.mapValue.fields.__previous_value__;return ty(e)?sj(e):e}function fm(t){const e=gl(t.mapValue.fields.__local_write_time__.timestampValue);return new lr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e,n,r,i,a,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class mm{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new mm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof mm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg={mapValue:{}};function Ac(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ty(t)?4:AB(t)?9007199254740991:IB(t)?10:11:mt()}function ma(t,e){if(t===e)return!0;const n=Ac(t);if(n!==Ac(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fm(t).isEqual(fm(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=gl(i.timestampValue),c=gl(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Ic(i.bytesValue).isEqual(Ic(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return On(i.geoPointValue.latitude)===On(a.geoPointValue.latitude)&&On(i.geoPointValue.longitude)===On(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return On(i.integerValue)===On(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=On(i.doubleValue),c=On(a.doubleValue);return o===c?qv(o)===qv(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return bd(t.arrayValue.values||[],e.arrayValue.values||[],ma);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(FE(o)!==FE(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!ma(o[u],c[u])))return!1;return!0}(t,e);default:return mt()}}function pm(t,e){return(t.values||[]).find(n=>ma(n,e))!==void 0}function jd(t,e){if(t===e)return 0;const n=Ac(t),r=Ac(e);if(n!==r)return Lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=On(a.integerValue||a.doubleValue),u=On(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return zE(t.timestampValue,e.timestampValue);case 4:return zE(fm(t),fm(e));case 5:return Lt(t.stringValue,e.stringValue);case 6:return function(a,o){const c=Ic(a),u=Ic(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=Lt(c[d],u[d]);if(f!==0)return f}return Lt(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=Lt(On(a.latitude),On(o.latitude));return c!==0?c:Lt(On(a.longitude),On(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return UE(t.arrayValue,e.arrayValue);case 10:return function(a,o){var c,u,d,f;const p=a.fields||{},g=o.fields||{},_=(c=p.value)===null||c===void 0?void 0:c.arrayValue,N=(u=g.value)===null||u===void 0?void 0:u.arrayValue,b=Lt(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((f=N==null?void 0:N.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:UE(_,N)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===pg.mapValue&&o===pg.mapValue)return 0;if(a===pg.mapValue)return 1;if(o===pg.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=Lt(u[p],f[p]);if(g!==0)return g;const _=jd(c[u[p]],d[f[p]]);if(_!==0)return _}return Lt(u.length,f.length)}(t.mapValue,e.mapValue);default:throw mt()}}function zE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Lt(t,e);const n=gl(t),r=gl(e),i=Lt(n.seconds,r.seconds);return i!==0?i:Lt(n.nanos,r.nanos)}function UE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=jd(n[i],r[i]);if(a)return a}return Lt(n.length,r.length)}function Nd(t){return Vw(t)}function Vw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ic(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ot.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Vw(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Vw(n.fields[o])}`;return i+"}"}(t.mapValue):mt()}function Wv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zw(t){return!!t&&"integerValue"in t}function ij(t){return!!t&&"arrayValue"in t}function $E(t){return!!t&&"nullValue"in t}function BE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zg(t){return!!t&&"mapValue"in t}function IB(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Df(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Df(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Df(t.arrayValue.values[n]);return e}return Object.assign({},t)}function AB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.value=e}static empty(){return new us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Df(n)}setAll(e){let n=yr.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Df(o):i.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Zg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ma(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Zg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Hc(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new us(Df(this.value))}}function lR(t){const e=[];return Hc(t.fields,(n,r)=>{const i=new yr([n]);if(Zg(r)){const a=lR(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new ks(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Rr(e,0,vt.min(),vt.min(),vt.min(),us.empty(),0)}static newFoundDocument(e,n,r,i){return new Rr(e,1,n,vt.min(),r,i,0)}static newNoDocument(e,n){return new Rr(e,2,n,vt.min(),vt.min(),us.empty(),0)}static newUnknownDocument(e,n){return new Rr(e,3,n,vt.min(),vt.min(),us.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n){this.position=e,this.inclusive=n}}function qE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=ot.comparator(ot.fromName(o.referenceValue),n.key):r=jd(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function WE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ma(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n="asc"){this.field=e,this.dir=n}}function RB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cR=class{};class Qn extends cR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new OB(e,n,r):n==="array-contains"?new FB(e,r):n==="in"?new VB(e,r):n==="not-in"?new zB(e,r):n==="array-contains-any"?new UB(e,r):new Qn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DB(e,r):new LB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(jd(n,this.value)):n!==null&&Ac(this.value)===Ac(n)&&this.matchesComparison(jd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pi extends cR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Pi(e,n)}matches(e){return uR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function uR(t){return t.op==="and"}function dR(t){return MB(t)&&uR(t)}function MB(t){for(const e of t.filters)if(e instanceof Pi)return!1;return!0}function Uw(t){if(t instanceof Qn)return t.field.canonicalString()+t.op.toString()+Nd(t.value);if(dR(t))return t.filters.map(e=>Uw(e)).join(",");{const e=t.filters.map(n=>Uw(n)).join(",");return`${t.op}(${e})`}}function hR(t,e){return t instanceof Qn?function(r,i){return i instanceof Qn&&r.op===i.op&&r.field.isEqual(i.field)&&ma(r.value,i.value)}(t,e):t instanceof Pi?function(r,i){return i instanceof Pi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,c)=>a&&hR(o,i.filters[c]),!0):!1}(t,e):void mt()}function fR(t){return t instanceof Qn?function(n){return`${n.field.canonicalString()} ${n.op} ${Nd(n.value)}`}(t):t instanceof Pi?function(n){return n.op.toString()+" {"+n.getFilters().map(fR).join(" ,")+"}"}(t):"Filter"}class OB extends Qn{constructor(e,n,r){super(e,n,r),this.key=ot.fromName(r.referenceValue)}matches(e){const n=ot.comparator(e.key,this.key);return this.matchesComparison(n)}}class DB extends Qn{constructor(e,n){super(e,"in",n),this.keys=mR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class LB extends Qn{constructor(e,n){super(e,"not-in",n),this.keys=mR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ot.fromName(r.referenceValue))}class FB extends Qn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ij(n)&&pm(n.arrayValue,this.value)}}class VB extends Qn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pm(this.value.arrayValue,n)}}class zB extends Qn{constructor(e,n){super(e,"not-in",n)}matches(e){if(pm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!pm(this.value.arrayValue,n)}}class UB extends Qn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ij(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>pm(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.ue=null}}function HE(t,e=null,n=[],r=[],i=null,a=null,o=null){return new $B(t,e,n,r,i,a,o)}function aj(t){const e=wt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Uw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),ey(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Nd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Nd(r)).join(",")),e.ue=n}return e.ue}function oj(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!WE(t.startAt,e.startAt)&&WE(t.endAt,e.endAt)}function $w(t){return ot.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function BB(t,e,n,r,i,a,o,c){return new Gc(t,e,n,r,i,a,o,c)}function ny(t){return new Gc(t)}function GE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lj(t){return t.collectionGroup!==null}function od(t){const e=wt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new br(yr.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new gm(a,r))}),n.has(yr.keyField().canonicalString())||e.ce.push(new gm(yr.keyField(),r))}return e.ce}function la(t){const e=wt(t);return e.le||(e.le=qB(e,od(t))),e.le}function qB(t,e){if(t.limitType==="F")return HE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new gm(i.field,a)});const n=t.endAt?new Sd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sd(t.startAt.position,t.startAt.inclusive):null;return HE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bw(t,e){const n=t.filters.concat([e]);return new Gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Hv(t,e,n){return new Gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ry(t,e){return oj(la(t),la(e))&&t.limitType===e.limitType}function pR(t){return`${aj(la(t))}|lt:${t.limitType}`}function Mu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>fR(i)).join(", ")}]`),ey(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Nd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Nd(i)).join(",")),`Target(${r})`}(la(t))}; limitType=${t.limitType})`}function sy(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ot.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of od(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const d=qE(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,od(r),i)||r.endAt&&!function(o,c,u){const d=qE(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,od(r),i))}(t,e)}function WB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gR(t){return(e,n)=>{let r=!1;for(const i of od(t)){const a=HB(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function HB(t,e,n){const r=t.field.isKeyField()?ot.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?jd(u,d):mt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return mt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hc(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return aR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB=new kn(ot.comparator);function ro(){return GB}const vR=new kn(ot.comparator);function yf(...t){let e=vR;for(const n of t)e=e.insert(n.key,n);return e}function xR(t){let e=vR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ac(){return Lf()}function yR(){return Lf()}function Lf(){return new eh(t=>t.toString(),(t,e)=>t.isEqual(e))}const KB=new kn(ot.comparator),ZB=new br(ot.comparator);function It(...t){let e=ZB;for(const n of t)e=e.add(n);return e}const YB=new br(Lt);function QB(){return YB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qv(e)?"-0":e}}function _R(t){return{integerValue:""+t}}function XB(t,e){return kB(e)?_R(e):cj(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this._=void 0}}function JB(t,e,n){return t instanceof vm?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&ty(a)&&(a=sj(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof xm?bR(t,e):t instanceof ym?jR(t,e):function(i,a){const o=wR(i,a),c=KE(o)+KE(i.Pe);return zw(o)&&zw(i.Pe)?_R(c):cj(i.serializer,c)}(t,e)}function eq(t,e,n){return t instanceof xm?bR(t,e):t instanceof ym?jR(t,e):n}function wR(t,e){return t instanceof Gv?function(r){return zw(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class vm extends iy{}class xm extends iy{constructor(e){super(),this.elements=e}}function bR(t,e){const n=NR(e);for(const r of t.elements)n.some(i=>ma(i,r))||n.push(r);return{arrayValue:{values:n}}}class ym extends iy{constructor(e){super(),this.elements=e}}function jR(t,e){let n=NR(e);for(const r of t.elements)n=n.filter(i=>!ma(i,r));return{arrayValue:{values:n}}}class Gv extends iy{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function KE(t){return On(t.integerValue||t.doubleValue)}function NR(t){return ij(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{constructor(e,n){this.field=e,this.transform=n}}function nq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof xm&&i instanceof xm||r instanceof ym&&i instanceof ym?bd(r.elements,i.elements,ma):r instanceof Gv&&i instanceof Gv?ma(r.Pe,i.Pe):r instanceof vm&&i instanceof vm}(t.transform,e.transform)}class rq{constructor(e,n){this.version=e,this.transformResults=n}}class Qr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qr}static exists(e){return new Qr(void 0,e)}static updateTime(e){return new Qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ay{}function SR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new oy(t.key,Qr.none()):new Hm(t.key,t.data,Qr.none());{const n=t.data,r=us.empty();let i=new br(yr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Al(t.key,r,new ks(i.toArray()),Qr.none())}}function sq(t,e,n){t instanceof Hm?function(i,a,o){const c=i.value.clone(),u=YE(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Al?function(i,a,o){if(!Yg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=YE(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(ER(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ff(t,e,n,r){return t instanceof Hm?function(a,o,c,u){if(!Yg(a.precondition,o))return c;const d=a.value.clone(),f=QE(a.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Al?function(a,o,c,u){if(!Yg(a.precondition,o))return c;const d=QE(a.fieldTransforms,u,o),f=o.data;return f.setAll(ER(a)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(a,o,c){return Yg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function iq(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=wR(r.transform,i||null);a!=null&&(n===null&&(n=us.empty()),n.set(r.field,a))}return n||null}function ZE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bd(r,i,(a,o)=>nq(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hm extends ay{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Al extends ay{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ER(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function YE(t,e,n){const r=new Map;Zt(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,eq(o,c,n[i]))}return r}function QE(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,JB(a,o,e))}return r}class oy extends ay{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aq extends ay{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&sq(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ff(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ff(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yR();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=SR(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),It())}isEqual(e){return this.batchId===e.batchId&&bd(this.mutations,e.mutations,(n,r)=>ZE(n,r))&&bd(this.baseMutations,e.baseMutations,(n,r)=>ZE(n,r))}}class uj{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Zt(e.mutations.length===r.length);let i=function(){return KB}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new uj(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lq=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn,Mt;function uq(t){switch(t){default:return mt();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function CR(t){if(t===void 0)return no("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Gn.OK:return ve.OK;case Gn.CANCELLED:return ve.CANCELLED;case Gn.UNKNOWN:return ve.UNKNOWN;case Gn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Gn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Gn.INTERNAL:return ve.INTERNAL;case Gn.UNAVAILABLE:return ve.UNAVAILABLE;case Gn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Gn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Gn.NOT_FOUND:return ve.NOT_FOUND;case Gn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Gn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Gn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Gn.ABORTED:return ve.ABORTED;case Gn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Gn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Gn.DATA_LOSS:return ve.DATA_LOSS;default:return mt()}}(Mt=Gn||(Gn={}))[Mt.OK=0]="OK",Mt[Mt.CANCELLED=1]="CANCELLED",Mt[Mt.UNKNOWN=2]="UNKNOWN",Mt[Mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mt[Mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mt[Mt.NOT_FOUND=5]="NOT_FOUND",Mt[Mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mt[Mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mt[Mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mt[Mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mt[Mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mt[Mt.ABORTED=10]="ABORTED",Mt[Mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mt[Mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mt[Mt.INTERNAL=13]="INTERNAL",Mt[Mt.UNAVAILABLE=14]="UNAVAILABLE",Mt[Mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=new hc([4294967295,4294967295],0);function XE(t){const e=dq().encode(t),n=new XA;return n.update(e),new Uint8Array(n.digest())}function JE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new hc([n,r],0),new hc([i,a],0)]}class dj{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _f(`Invalid padding: ${n}`);if(r<0)throw new _f(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _f(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _f(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hc.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(hc.fromNumber(r)));return i.compare(hq)===1&&(i=new hc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=XE(e),[r,i]=JE(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new dj(a,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=XE(e),[r,i]=JE(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _f extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Gm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ly(vt.min(),i,new kn(Lt),ro(),It())}}class Gm{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Gm(r,n,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class kR{constructor(e,n){this.targetId=e,this.me=n}}class TR{constructor(e,n,r=Nr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class eC{constructor(){this.fe=0,this.ge=nC(),this.pe=Nr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=It(),n=It(),r=It();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:mt()}}),new Gm(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=nC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Zt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class fq{constructor(e){this.Le=e,this.Be=new Map,this.ke=ro(),this.qe=tC(),this.Qe=new kn(Lt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:mt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if($w(a))if(r===0){const o=new ot(a.path);this.Ue(n,o,Rr.newNoDocument(o,vt.min()))}else Zt(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=Ic(r).toUint8Array()}catch(u){if(u instanceof oR)return wd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new dj(o,i,a)}catch(u){return wd(u instanceof _f?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,a,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const c=this.Je(o);if(c){if(a.current&&$w(c.target)){const u=new ot(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Rr.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=It();this.qe.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new ly(e,n,this.Qe,this.ke,r);return this.ke=ro(),this.qe=tC(),this.Qe=new kn(Lt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new eC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new br(Lt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||et("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new eC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function tC(){return new kn(ot.comparator)}function nC(){return new kn(ot.comparator)}const mq={asc:"ASCENDING",desc:"DESCENDING"},pq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gq={and:"AND",or:"OR"};class vq{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qw(t,e){return t.useProto3Json||ey(e)?e:{value:e}}function Kv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xq(t,e){return Kv(t,e.toTimestamp())}function ca(t){return Zt(!!t),vt.fromTimestamp(function(n){const r=gl(n);return new lr(r.seconds,r.nanos)}(t))}function hj(t,e){return Ww(t,e).canonicalString()}function Ww(t,e){const n=function(i){return new sn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function IR(t){const e=sn.fromString(t);return Zt(DR(e)),e}function Hw(t,e){return hj(t.databaseId,e.path)}function K0(t,e){const n=IR(e);if(n.get(1)!==t.databaseId.projectId)throw new Ve(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ve(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ot(RR(n))}function AR(t,e){return hj(t.databaseId,e)}function yq(t){const e=IR(t);return e.length===4?sn.emptyPath():RR(e)}function Gw(t){return new sn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RR(t){return Zt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function rC(t,e,n){return{name:Hw(t,e),fields:n.value.mapValue.fields}}function _q(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:mt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(Zt(f===void 0||typeof f=="string"),Nr.fromBase64String(f||"")):(Zt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Nr.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?ve.UNKNOWN:CR(d.code);return new Ve(f,d.message||"")}(o);n=new TR(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=K0(t,r.document.name),a=ca(r.document.updateTime),o=r.document.createTime?ca(r.document.createTime):vt.min(),c=new us({mapValue:{fields:r.document.fields}}),u=Rr.newFoundDocument(i,a,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Qg(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=K0(t,r.document),a=r.readTime?ca(r.readTime):vt.min(),o=Rr.newNoDocument(i,a),c=r.removedTargetIds||[];n=new Qg([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=K0(t,r.document),a=r.removedTargetIds||[];n=new Qg([],a,i,null)}else{if(!("filter"in e))return mt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new cq(i,a),c=r.targetId;n=new kR(c,o)}}return n}function wq(t,e){let n;if(e instanceof Hm)n={update:rC(t,e.key,e.value)};else if(e instanceof oy)n={delete:Hw(t,e.key)};else if(e instanceof Al)n={update:rC(t,e.key,e.data),updateMask:Pq(e.fieldMask)};else{if(!(e instanceof aq))return mt();n={verify:Hw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const c=o.transform;if(c instanceof vm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof xm)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ym)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Gv)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw mt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:xq(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:mt()}(t,e.precondition)),n}function bq(t,e){return t&&t.length>0?(Zt(e!==void 0),t.map(n=>function(i,a){let o=i.updateTime?ca(i.updateTime):ca(a);return o.isEqual(vt.min())&&(o=ca(a)),new rq(o,i.transformResults||[])}(n,e))):[]}function jq(t,e){return{documents:[AR(t,e.path)]}}function Nq(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AR(t,i);const a=function(d){if(d.length!==0)return OR(Pi.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Ou(g.field),direction:Cq(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=qw(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function Sq(t){let e=yq(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Zt(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(p){const g=MR(p);return g instanceof Pi&&dR(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(N){return new gm(Du(N.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,ey(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,_=p.values||[];return new Sd(_,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,_=p.values||[];return new Sd(_,g)}(n.endAt)),BB(e,i,o,a,c,"F",u,d)}function Eq(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Du(n.unaryFilter.field);return Qn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Du(n.unaryFilter.field);return Qn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Du(n.unaryFilter.field);return Qn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Du(n.unaryFilter.field);return Qn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(t):t.fieldFilter!==void 0?function(n){return Qn.create(Du(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pi.create(n.compositeFilter.filters.map(r=>MR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return mt()}}(n.compositeFilter.op))}(t):mt()}function Cq(t){return mq[t]}function kq(t){return pq[t]}function Tq(t){return gq[t]}function Ou(t){return{fieldPath:t.canonicalString()}}function Du(t){return yr.fromServerFormat(t.fieldPath)}function OR(t){return t instanceof Qn?function(n){if(n.op==="=="){if(BE(n.value))return{unaryFilter:{field:Ou(n.field),op:"IS_NAN"}};if($E(n.value))return{unaryFilter:{field:Ou(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BE(n.value))return{unaryFilter:{field:Ou(n.field),op:"IS_NOT_NAN"}};if($E(n.value))return{unaryFilter:{field:Ou(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ou(n.field),op:kq(n.op),value:n.value}}}(t):t instanceof Pi?function(n){const r=n.getFilters().map(i=>OR(i));return r.length===1?r[0]:{compositeFilter:{op:Tq(n.op),filters:r}}}(t):mt()}function Pq(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function DR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n,r,i,a=vt.min(),o=vt.min(),c=Nr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(e){this.ct=e}}function Aq(t){const e=Sq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(){this.un=new Mq}addToCollectionParentIndex(e,n){return this.un.add(n),Se.resolve()}getCollectionParents(e,n){return Se.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Se.resolve()}deleteFieldIndex(e,n){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,n){return Se.resolve()}getDocumentsMatchingTarget(e,n){return Se.resolve(null)}getIndexType(e,n){return Se.resolve(0)}getFieldIndexes(e,n){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,n){return Se.resolve(pl.min())}getMinOffsetFromCollectionGroup(e,n){return Se.resolve(pl.min())}updateCollectionGroup(e,n,r){return Se.resolve()}updateIndexEntries(e,n){return Se.resolve()}}class Mq{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new br(sn.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new br(sn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ed(0)}static kn(){return new Ed(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(){this.changes=new eh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ff(r.mutation,i,ks.empty(),lr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,It()).next(()=>r))}getLocalViewOfDocuments(e,n,r=It()){const i=ac();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let o=yf();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ac();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,It()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let a=ro();const o=Lf(),c=function(){return Lf()}();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Al)?a=a.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Ff(f.mutation,d,f.mutation.getFieldMask(),lr.now())):o.set(d.key,ks.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return c.set(d,new Dq(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Lf();let i=new kn((o,c)=>o-c),a=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||ks.empty();f=c.applyToLocalView(d,f),r.set(u,f);const p=(i.get(c.batchId)||It()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,p=yR();f.forEach(g=>{if(!a.has(g)){const _=SR(n.get(g),r.get(g));_!==null&&p.set(g,_),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return Se.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ot.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Se.resolve(ac());let c=-1,u=a;return o.next(d=>Se.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(f)?Se.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,It())).next(f=>({batchId:c,changes:xR(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ot(n)).next(r=>{let i=yf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=yf();return this.indexManager.getCollectionParents(e,a).next(c=>Se.forEach(c,u=>{const d=function(p,g){return new Gc(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(o=>{a.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Rr.newInvalidDocument(f)))});let c=yf();return o.forEach((u,d)=>{const f=a.get(u);f!==void 0&&Ff(f.mutation,d,ks.empty(),lr.now()),sy(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fq{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Se.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ca(i.createTime)}}(n)),Se.resolve()}getNamedQuery(e,n){return Se.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Aq(i.bundledQuery),readTime:ca(i.readTime)}}(n)),Se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(){this.overlays=new kn(ot.comparator),this.Ir=new Map}getOverlay(e,n){return Se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ac();return Se.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.ht(e,n,a)}),Se.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),Se.resolve()}getOverlaysForCollection(e,n,r){const i=ac(),a=n.length+1,o=new ot(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Se.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new kn((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=ac(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=ac(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return Se.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lq(n,r));let a=this.Ir.get(n);a===void 0&&(a=It(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(){this.sessionToken=Nr.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.Tr=new br(hr.Er),this.dr=new br(hr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new hr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new hr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ot(new sn([])),r=new hr(n,e),i=new hr(n,e+1),a=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ot(new sn([])),r=new hr(n,e),i=new hr(n,e+1);let a=It();return this.dr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new hr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class hr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ot.comparator(e.key,n.key)||Lt(e.wr,n.wr)}static Ar(e,n){return Lt(e.wr,n.wr)||ot.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uq{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new br(hr.Er)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oq(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new hr(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Se.resolve(o)}lookupMutationBatch(e,n){return Se.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return Se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new hr(n,0),i=new hr(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],o=>{const c=this.Dr(o.wr);a.push(c)}),Se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new br(Lt);return n.forEach(i=>{const a=new hr(i,0),o=new hr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],c=>{r=r.add(c.wr)})}),Se.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;ot.isDocumentKey(a)||(a=a.child(""));const o=new hr(new ot(a),0);let c=new br(Lt);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),Se.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Zt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Se.forEach(n.mutations,i=>{const a=new hr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new hr(n,0),i=this.br.firstAfterOrEqual(r);return Se.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $q{constructor(e){this.Mr=e,this.docs=function(){return new kn(ot.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Se.resolve(r?r.document.mutableCopy():Rr.newInvalidDocument(n))}getEntries(e,n){let r=ro();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Rr.newInvalidDocument(i))}),Se.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ro();const o=n.path,c=new ot(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||NB(jB(f),r)<=0||(i.has(f.key)||sy(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return Se.resolve(a)}getAllFromCollectionGroup(e,n,r,i){mt()}Or(e,n){return Se.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Bq(this)}getSize(e){return Se.resolve(this.size)}}class Bq extends Oq{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Se.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e){this.persistence=e,this.Nr=new eh(n=>aj(n),oj),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fj,this.targetCount=0,this.kr=Ed.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Se.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ed(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Se.resolve()}updateTargetData(e,n){return this.Kn(n),Se.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),Se.waitFor(a).next(()=>i)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Se.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Se.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),Se.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Se.resolve(r)}containsKey(e,n){return Se.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{constructor(e,n){this.qr={},this.overlays={},this.Qr=new rj(0),this.Kr=!1,this.Kr=!0,this.$r=new zq,this.referenceDelegate=e(this),this.Ur=new qq(this),this.indexManager=new Rq,this.remoteDocumentCache=function(i){return new $q(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Iq(n),this.Gr=new Fq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Vq,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Uq(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){et("MemoryPersistence","Starting transaction:",e);const i=new Hq(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,n){return Se.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Hq extends EB{constructor(e){super(),this.currentSequenceNumber=e}}class mj{constructor(e){this.persistence=e,this.Jr=new fj,this.Yr=null}static Zr(e){return new mj(e)}get Xr(){if(this.Yr)return this.Yr;throw mt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Se.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Se.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.Xr,r=>{const i=ot.fromPath(r);return this.ei(e,i).next(a=>{a||n.removeEntry(i,vt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Se.or([()=>Se.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=It(),i=It();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new pj(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Pz()?8:CB(Vr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new Gq;return this.Xi(e,n,o).next(c=>{if(a.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>a.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ef()<=At.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",Mu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Se.resolve()):(ef()<=At.DEBUG&&et("QueryEngine","Query:",Mu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ef()<=At.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",Mu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,la(n))):Se.resolve())}Yi(e,n){if(GE(n))return Se.resolve(null);let r=la(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Hv(n,null,"F"),r=la(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=It(...a);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,Hv(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return GE(n)||i.isEqual(vt.min())?Se.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,i)?Se.resolve(null):(ef()<=At.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mu(n)),this.rs(e,o,n,bB(i,-1)).next(c=>c))})}ts(e,n){let r=new br(gR(e));return n.forEach((i,a)=>{sy(e,a)&&(r=r.add(a))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return ef()<=At.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",Mu(n)),this.Ji.getDocumentsMatchingQuery(e,n,pl.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new kn(Lt),this._s=new eh(a=>aj(a),oj),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lq(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Yq(t,e,n,r){return new Zq(t,e,n,r)}async function LR(t,e){const n=wt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],c=[];let u=It();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of a){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function Qq(t,e){const n=wt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const p=d.batch,g=p.keys();let _=Se.resolve();return g.forEach(N=>{_=_.next(()=>f.getEntry(u,N)).next(b=>{const S=d.docVersions.get(N);Zt(S!==null),b.version.compareTo(S)<0&&(p.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=It();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function FR(t){const e=wt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Xq(t,e){const n=wt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;c.push(n.Ur.removeMatchingKeys(a,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(a,f.addedDocuments,p)));let _=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Nr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(p,_),function(b,S,w){return b.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,_,f)&&c.push(n.Ur.updateTargetData(a,_))});let u=ro(),d=It();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),c.push(Jq(a,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(vt.min())){const f=n.Ur.getLastRemoteSnapshotVersion(a).next(p=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(f)}return Se.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.os=i,a))}function Jq(t,e,n){let r=It(),i=It();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=ro();return n.forEach((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(vt.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):et("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function eW(t,e){const n=wt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tW(t,e){const n=wt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(a=>a?(i=a,Se.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ko(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Kw(t,e,n){const r=wt(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Wm(o))throw o;et("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function sC(t,e,n){const r=wt(t);let i=vt.min(),a=It();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=wt(u),g=p._s.get(f);return g!==void 0?Se.resolve(p.os.get(g)):p.Ur.getTargetData(d,f)}(r,o,la(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:vt.min(),n?a:It())).next(c=>(nW(r,WB(e),c),{documents:c,Ts:a})))}function nW(t,e,n){let r=t.us.get(e)||vt.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class iC{constructor(){this.activeTargetIds=QB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rW{constructor(){this.so=new iC,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new iC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gg=null;function Z0(){return gg===null?gg=function(){return 268435456+Math.round(2147483648*Math.random())}():gg++,"0x"+gg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="WebChannelConnection";class oW extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,o){const c=Z0(),u=this.xo(n,r.toUriEncodedString());et("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(n,u,d,i).then(f=>(et("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw wd("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,a,o,c){return this.Mo(n,r,i,a,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jd}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),i&&i.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const i=iW[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=Z0();return new Promise((o,c)=>{const u=new JA;u.setWithCredentials(!0),u.listenOnce(eR.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Kg.NO_ERROR:const f=u.getResponseJson();et(Tr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case Kg.TIMEOUT:et(Tr,`RPC '${e}' ${a} timed out`),c(new Ve(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Kg.HTTP_ERROR:const p=u.getStatus();if(et(Tr,`RPC '${e}' ${a} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const N=function(S){const w=S.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(w)>=0?w:ve.UNKNOWN}(_.status);c(new Ve(N,_.message))}else c(new Ve(ve.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Ve(ve.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{et(Tr,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);et(Tr,`RPC '${e}' ${a} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=Z0(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rR(),c=nR(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=a.join("");et(Tr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,_=!1;const N=new aW({Io:S=>{_?et(Tr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||(et(Tr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),et(Tr,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},To:()=>p.close()}),b=(S,w,y)=>{S.listen(w,E=>{try{y(E)}catch(A){setTimeout(()=>{throw A},0)}})};return b(p,xf.EventType.OPEN,()=>{_||(et(Tr,`RPC '${e}' stream ${i} transport opened.`),N.yo())}),b(p,xf.EventType.CLOSE,()=>{_||(_=!0,et(Tr,`RPC '${e}' stream ${i} transport closed`),N.So())}),b(p,xf.EventType.ERROR,S=>{_||(_=!0,wd(Tr,`RPC '${e}' stream ${i} transport errored:`,S),N.So(new Ve(ve.UNAVAILABLE,"The operation could not be completed")))}),b(p,xf.EventType.MESSAGE,S=>{var w;if(!_){const y=S.data[0];Zt(!!y);const E=y,A=E.error||((w=E[0])===null||w===void 0?void 0:w.error);if(A){et(Tr,`RPC '${e}' stream ${i} received error:`,A);const O=A.status;let q=function(U){const k=Gn[U];if(k!==void 0)return CR(k)}(O),R=A.message;q===void 0&&(q=ve.INTERNAL,R="Unknown error status: "+O+" with message "+A.message),_=!0,N.So(new Ve(q,R)),p.close()}else et(Tr,`RPC '${e}' stream ${i} received:`,y),N.bo(y)}}),b(c,tR.STAT_EVENT,S=>{S.stat===Fw.PROXY?et(Tr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Fw.NOPROXY&&et(Tr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function Y0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t){return new vq(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,r,i,a,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new VR(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(no(n.toString()),no("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Ve(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lW extends zR{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=_q(this.serializer,e),r=function(a){if(!("targetChange"in a))return vt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?vt.min():o.readTime?ca(o.readTime):vt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Gw(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=$w(u)?{documents:jq(a,u)}:{query:Nq(a,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=PR(a,o.resumeToken);const d=qw(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(vt.min())>0){c.readTime=Kv(a,o.snapshotVersion.toTimestamp());const d=qw(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=Eq(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Gw(this.serializer),n.removeTarget=e,this.a_(n)}}class cW extends zR{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Zt(!!e.streamToken),this.lastStreamToken=e.streamToken,Zt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=bq(e.writeResults,e.commitTime),r=ca(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Gw(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>wq(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uW extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ve(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,Ww(n,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ve(ve.UNKNOWN,a.toString())})}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Ww(n,r),i,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(ve.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class dW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(no(n),this.D_=!1):et("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{Kc(this)&&(et("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=wt(u);d.L_.add(4),await Km(d),d.q_.set("Unknown"),d.L_.delete(4),await uy(d)}(this))})}),this.q_=new dW(r,i)}}async function uy(t){if(Kc(t))for(const e of t.B_)await e(!0)}async function Km(t){for(const e of t.B_)await e(!1)}function UR(t,e){const n=wt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),yj(n)?xj(n):th(n).r_()&&vj(n,e))}function gj(t,e){const n=wt(t),r=th(n);n.N_.delete(e),r.r_()&&$R(n,e),n.N_.size===0&&(r.r_()?r.o_():Kc(n)&&n.q_.set("Unknown"))}function vj(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}th(t).A_(e)}function $R(t,e){t.Q_.xe(e),th(t).R_(e)}function xj(t){t.Q_=new fq({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),th(t).start(),t.q_.v_()}function yj(t){return Kc(t)&&!th(t).n_()&&t.N_.size>0}function Kc(t){return wt(t).L_.size===0}function BR(t){t.Q_=void 0}async function fW(t){t.q_.set("Online")}async function mW(t){t.N_.forEach((e,n)=>{vj(t,e)})}async function pW(t,e){BR(t),yj(t)?(t.q_.M_(e),xj(t)):t.q_.set("Unknown")}async function gW(t,e,n){if(t.q_.set("Online"),e instanceof TR&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zv(t,r)}else if(e instanceof Qg?t.Q_.Ke(e):e instanceof kR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(vt.min()))try{const r=await FR(t.localStore);n.compareTo(r)>=0&&await function(a,o){const c=a.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=a.N_.get(d);f&&a.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=a.N_.get(u);if(!f)return;a.N_.set(u,f.withResumeToken(Nr.EMPTY_BYTE_STRING,f.snapshotVersion)),$R(a,u);const p=new Ko(f.target,u,d,f.sequenceNumber);vj(a,p)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){et("RemoteStore","Failed to raise snapshot:",r),await Zv(t,r)}}async function Zv(t,e,n){if(!Wm(e))throw e;t.L_.add(1),await Km(t),t.q_.set("Offline"),n||(n=()=>FR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{et("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await uy(t)})}function qR(t,e){return e().catch(n=>Zv(t,n,e))}async function dy(t){const e=wt(t),n=vl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;vW(e);)try{const i=await eW(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,xW(e,i)}catch(i){await Zv(e,i)}WR(e)&&HR(e)}function vW(t){return Kc(t)&&t.O_.length<10}function xW(t,e){t.O_.push(e);const n=vl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function WR(t){return Kc(t)&&!vl(t).n_()&&t.O_.length>0}function HR(t){vl(t).start()}async function yW(t){vl(t).p_()}async function _W(t){const e=vl(t);for(const n of t.O_)e.m_(n.mutations)}async function wW(t,e,n){const r=t.O_.shift(),i=uj.from(r,e,n);await qR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await dy(t)}async function bW(t,e){e&&vl(t).V_&&await async function(r,i){if(function(o){return uq(o)&&o!==ve.ABORTED}(i.code)){const a=r.O_.shift();vl(r).s_(),await qR(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await dy(r)}}(t,e),WR(t)&&HR(t)}async function oC(t,e){const n=wt(t);n.asyncQueue.verifyOperationInProgress(),et("RemoteStore","RemoteStore received new credentials");const r=Kc(n);n.L_.add(3),await Km(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await uy(n)}async function jW(t,e){const n=wt(t);e?(n.L_.delete(2),await uy(n)):e||(n.L_.add(2),await Km(n),n.q_.set("Unknown"))}function th(t){return t.K_||(t.K_=function(n,r,i){const a=wt(n);return a.w_(),new lW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:fW.bind(null,t),Ro:mW.bind(null,t),mo:pW.bind(null,t),d_:gW.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),yj(t)?xj(t):t.q_.set("Unknown")):(await t.K_.stop(),BR(t))})),t.K_}function vl(t){return t.U_||(t.U_=function(n,r,i){const a=wt(n);return a.w_(),new cW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:yW.bind(null,t),mo:bW.bind(null,t),f_:_W.bind(null,t),g_:wW.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await dy(t)):(await t.U_.stop(),t.O_.length>0&&(et("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new _j(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wj(t,e){if(no("AsyncQueue",`${e}: ${t}`),Wm(t))return new Ve(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ot.comparator(n.key,r.key):(n,r)=>ot.comparator(n.key,r.key),this.keyedMap=yf(),this.sortedSet=new kn(this.comparator)}static emptySet(e){return new ld(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ld)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ld;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.W_=new kn(ot.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):mt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Cd{constructor(e,n,r,i,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Cd(e,n,ld.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ry(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class SW{constructor(){this.queries=cC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=wt(n),a=i.queries;i.queries=cC(),a.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new Ve(ve.ABORTED,"Firestore shutting down"))}}function cC(){return new eh(t=>pR(t),ry)}async function bj(t,e){const n=wt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new NW,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=wj(o,`Initialization of query '${Mu(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Nj(n)}async function jj(t,e){const n=wt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function EW(t,e){const n=wt(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&Nj(n)}function CW(t,e,n){const r=wt(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function Nj(t){t.Y_.forEach(e=>{e.next()})}var Zw,uC;(uC=Zw||(Zw={})).ea="default",uC.Cache="cache";class Sj{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Cd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.key=e}}class KR{constructor(e){this.key=e}}class kW{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=It(),this.mutatedKeys=It(),this.Aa=gR(e),this.Ra=new ld(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new lC,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),_=sy(this.query,p)?p:null,N=!!g&&this.mutatedKeys.has(g.key),b=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;g&&_?g.data.isEqual(_.data)?N!==b&&(r.track({type:3,doc:_}),S=!0):this.ga(g,_)||(r.track({type:2,doc:_}),S=!0,(u&&this.Aa(_,u)>0||d&&this.Aa(_,d)<0)&&(c=!0)):!g&&_?(r.track({type:0,doc:_}),S=!0):g&&!_&&(r.track({type:1,doc:g}),S=!0,(u||d)&&(c=!0)),S&&(_?(o=o.add(_),a=b?a.add(f):a.delete(f)):(o=o.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(_,N){const b=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return b(_)-b(N)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Cd(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new lC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=It(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new KR(r))}),this.da.forEach(r=>{e.has(r)||n.push(new GR(r))}),n}ba(e){this.Ta=e.Ts,this.da=It();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Cd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class TW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PW{constructor(e){this.key=e,this.va=!1}}class IW{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new eh(c=>pR(c),ry),this.Ma=new Map,this.xa=new Set,this.Oa=new kn(ot.comparator),this.Na=new Map,this.La=new fj,this.Ba={},this.ka=new Map,this.qa=Ed.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function AW(t,e,n=!0){const r=e4(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await ZR(r,e,n,!0),i}async function RW(t,e){const n=e4(t);await ZR(n,e,!0,!1)}async function ZR(t,e,n,r){const i=await tW(t.localStore,la(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await MW(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&UR(t.remoteStore,i),c}async function MW(t,e,n,r,i){t.Ka=(p,g,_)=>async function(b,S,w,y){let E=S.view.ma(w);E.ns&&(E=await sC(b.localStore,S.query,!1).then(({documents:R})=>S.view.ma(R,E)));const A=y&&y.targetChanges.get(S.targetId),O=y&&y.targetMismatches.get(S.targetId)!=null,q=S.view.applyChanges(E,b.isPrimaryClient,A,O);return hC(b,S.targetId,q.wa),q.snapshot}(t,p,g,_);const a=await sC(t.localStore,e,!0),o=new kW(e,a.Ts),c=o.ma(a.documents),u=Gm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);hC(t,n,d.wa);const f=new TW(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function OW(t,e,n){const r=wt(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(o=>!ry(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Kw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gj(r.remoteStore,i.targetId),Yw(r,i.targetId)}).catch(qm)):(Yw(r,i.targetId),await Kw(r.localStore,i.targetId,!0))}async function DW(t,e){const n=wt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gj(n.remoteStore,r.targetId))}async function LW(t,e,n){const r=qW(t);try{const i=await function(o,c){const u=wt(o),d=lr.now(),f=c.reduce((_,N)=>_.add(N.key),It());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let N=ro(),b=It();return u.cs.getEntries(_,f).next(S=>{N=S,N.forEach((w,y)=>{y.isValidDocument()||(b=b.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,N)).next(S=>{p=S;const w=[];for(const y of c){const E=iq(y,p.get(y.key).overlayedDocument);E!=null&&w.push(new Al(y.key,E,lR(E.value.mapValue),Qr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,w,c)}).next(S=>{g=S;const w=S.applyToLocalDocumentSet(p,b);return u.documentOverlayCache.saveOverlays(_,S.batchId,w)})}).then(()=>({batchId:g.batchId,changes:xR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new kn(Lt)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,n),await Zm(r,i.changes),await dy(r.remoteStore)}catch(i){const a=wj(i,"Failed to persist write");n.reject(a)}}async function YR(t,e){const n=wt(t);try{const r=await Xq(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Na.get(a);o&&(Zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Zt(o.va):i.removedDocuments.size>0&&(Zt(o.va),o.va=!1))}),await Zm(n,r,e)}catch(r){await qm(r)}}function dC(t,e,n){const r=wt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((a,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=wt(o);u.onlineState=c;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(c)&&(d=!0)}),d&&Nj(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FW(t,e,n){const r=wt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new kn(ot.comparator);o=o.insert(a,Rr.newNoDocument(a,vt.min()));const c=It().add(a),u=new ly(vt.min(),new Map,new kn(Lt),o,c);await YR(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),Ej(r)}else await Kw(r.localStore,e,!1).then(()=>Yw(r,e,n)).catch(qm)}async function VW(t,e){const n=wt(t),r=e.batch.batchId;try{const i=await Qq(n.localStore,e);XR(n,r,null),QR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zm(n,i)}catch(i){await qm(i)}}async function zW(t,e,n){const r=wt(t);try{const i=await function(o,c){const u=wt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(Zt(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);XR(r,e,n),QR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Zm(r,i)}catch(i){await qm(i)}}function QR(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function XR(t,e,n){const r=wt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Yw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||JR(t,r)})}function JR(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gj(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ej(t))}function hC(t,e,n){for(const r of n)r instanceof GR?(t.La.addReference(r.key,e),UW(t,r)):r instanceof KR?(et("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||JR(t,r.key)):mt()}function UW(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(et("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ej(t))}function Ej(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ot(sn.fromString(e)),r=t.qa.next();t.Na.set(r,new PW(n)),t.Oa=t.Oa.insert(n,r),UR(t.remoteStore,new Ko(la(ny(n.path)),r,"TargetPurposeLimboResolution",rj.oe))}}async function Zm(t,e,n){const r=wt(t),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){i.push(d);const p=pj.Wi(u.targetId,d);a.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,d){const f=wt(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Se.forEach(d,g=>Se.forEach(g.$i,_=>f.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>Se.forEach(g.Ui,_=>f.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!Wm(p))throw p;et("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const _=f.os.get(g),N=_.snapshotVersion,b=_.withLastLimboFreeSnapshotVersion(N);f.os=f.os.insert(g,b)}}}(r.localStore,a))}async function $W(t,e){const n=wt(t);if(!n.currentUser.isEqual(e)){et("SyncEngine","User change. New user:",e.toKey());const r=await LR(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(c=>{c.forEach(u=>{u.reject(new Ve(ve.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zm(n,r.hs)}}function BW(t,e){const n=wt(t),r=n.Na.get(e);if(r&&r.va)return It().add(r.key);{let i=It();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function e4(t){const e=wt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FW.bind(null,e),e.Ca.d_=EW.bind(null,e.eventManager),e.Ca.$a=CW.bind(null,e.eventManager),e}function qW(t){const e=wt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zW.bind(null,e),e}class Yv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cy(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Yq(this.persistence,new Kq,e.initialUser,this.serializer)}Ga(e){return new Wq(mj.Zr,this.serializer)}Wa(e){return new rW}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yv.provider={build:()=>new Yv};class Qw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$W.bind(null,this.syncEngine),await jW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new SW}()}createDatastore(e){const n=cy(e.databaseInfo.databaseId),r=function(a){return new oW(a)}(e.databaseInfo);return function(a,o,c,u){return new uW(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,o,c){return new hW(r,i,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>dC(this.syncEngine,n,0),function(){return aC.D()?new aC:new sW}())}createSyncEngine(e,n){return function(i,a,o,c,u,d,f){const p=new IW(i,a,o,c,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=wt(i);et("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Km(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Qw.provider={build:()=>new Qw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):no("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ir.UNAUTHENTICATED,this.clientId=iR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{et("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(et("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wj(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Q0(t,e){t.asyncQueue.verifyOperationInProgress(),et("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await LR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await HW(t);et("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>oC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>oC(e.remoteStore,i)),t._onlineComponents=e}async function HW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){et("FirestoreClient","Using user provided OfflineComponentProvider");try{await Q0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;wd("Error using user provided cache. Falling back to memory cache: "+n),await Q0(t,new Yv)}}else et("FirestoreClient","Using default OfflineComponentProvider"),await Q0(t,new Yv);return t._offlineComponents}async function t4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(et("FirestoreClient","Using user provided OnlineComponentProvider"),await fC(t,t._uninitializedComponentsProvider._online)):(et("FirestoreClient","Using default OnlineComponentProvider"),await fC(t,new Qw))),t._onlineComponents}function GW(t){return t4(t).then(e=>e.syncEngine)}async function Qv(t){const e=await t4(t),n=e.eventManager;return n.onListen=AW.bind(null,e.syncEngine),n.onUnlisten=OW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DW.bind(null,e.syncEngine),n}function KW(t,e,n={}){const r=new Ga;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const f=new Cj({next:g=>{f.Za(),o.enqueueAndForget(()=>jj(a,p));const _=g.docs.has(c);!_&&g.fromCache?d.reject(new Ve(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?d.reject(new Ve(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Sj(ny(c.path),f,{includeMetadataChanges:!0,_a:!0});return bj(a,p)}(await Qv(t),t.asyncQueue,e,n,r)),r.promise}function ZW(t,e,n={}){const r=new Ga;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const f=new Cj({next:g=>{f.Za(),o.enqueueAndForget(()=>jj(a,p)),g.fromCache&&u.source==="server"?d.reject(new Ve(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Sj(c,f,{includeMetadataChanges:!0,_a:!0});return bj(a,p)}(await Qv(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(t,e,n){if(!n)throw new Ve(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YW(t,e,n,r){if(e===!0&&r===!0)throw new Ve(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pC(t){if(!ot.isDocumentKey(t))throw new Ve(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gC(t){if(ot.isDocumentKey(t))throw new Ve(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":mt()}function Xr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ve(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hy(t);throw new Ve(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function QW(t,e){if(e<=0)throw new Ve(ve.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ve(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ve(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ve(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ve(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fy{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fB;switch(r.type){case"firstParty":return new vB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ve(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mC.get(n);r&&(et("ComponentProvider","Removing Datastore"),mC.delete(n),r.terminate())}(this),Promise.resolve()}}function XW(t,e,n,r={}){var i;const a=(t=Xr(t,fy))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&wd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Ir.MOCK_USER;else{c=oA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Ve(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ir(d)}t._authCredentials=new mB(new sR(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ya(this.firestore,e,this._query)}}class Lr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lr(this.firestore,e,this._key)}}class ll extends ya{constructor(e,n,r){super(e,n,ny(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lr(this.firestore,null,new ot(e))}withConverter(e){return new ll(this.firestore,e,this._path)}}function Vt(t,e,...n){if(t=Ut(t),r4("collection","path",e),t instanceof fy){const r=sn.fromString(e,...n);return gC(r),new ll(t,null,r)}{if(!(t instanceof Lr||t instanceof ll))throw new Ve(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(sn.fromString(e,...n));return gC(r),new ll(t.firestore,null,r)}}function yt(t,e,...n){if(t=Ut(t),arguments.length===1&&(e=iR.newId()),r4("doc","path",e),t instanceof fy){const r=sn.fromString(e,...n);return pC(r),new Lr(t,null,new ot(r))}{if(!(t instanceof Lr||t instanceof ll))throw new Ve(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(sn.fromString(e,...n));return pC(r),new Lr(t.firestore,t instanceof ll?t.converter:null,new ot(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new VR(this,"async_queue_retry"),this.Vu=()=>{const r=Y0();r&&et("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Y0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Y0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ga;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wm(e))throw e;et("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw no("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=_j.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&mt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function yC(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class pa extends fy{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new xC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xC(e),this._firestoreClient=void 0,await e}}}function s4(t,e){const n=typeof t=="object"?t:W1(),r=typeof t=="string"?t:"(default)",i=Yx(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=sA("firestore");a&&XW(i,...a)}return i}function Ym(t){if(t._terminated)throw new Ve(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JW(t),t._firestoreClient}function JW(t){var e,n,r;const i=t._freezeSettings(),a=function(c,u,d,f){return new PB(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,n4(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new WW(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kd(Nr.fromBase64String(e))}catch(n){throw new Ve(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kd(Nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ve(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ve(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ve(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH=/^__.*__$/;class tH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Al(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hm(e,this.data,n,this.fieldTransforms)}}class i4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Al(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function a4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class Pj{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Pj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(a4(this.Cu)&&eH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class nH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cy(e)}Qu(e,n,r,i=!1){return new Pj({Cu:e,methodName:n,qu:r,path:yr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nh(t){const e=t._freezeSettings(),n=cy(t._databaseId);return new nH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ij(t,e,n,r,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);Rj("Data must be an object, but it was:",o,r);const c=u4(r,o);let u,d;if(a.merge)u=new ks(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const f=[];for(const p of a.mergeFields){const g=Xw(e,p,n);if(!o.contains(g))throw new Ve(ve.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);h4(f,g)||f.push(g)}u=new ks(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new tH(new us(c),u,d)}class py extends my{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof py}}class Aj extends my{_toFieldTransform(e){return new tq(e.path,new vm)}isEqual(e){return e instanceof Aj}}function o4(t,e,n,r){const i=t.Qu(1,e,n);Rj("Data must be an object, but it was:",i,r);const a=[],o=us.empty();Hc(r,(u,d)=>{const f=Mj(e,u,n);d=Ut(d);const p=i.Nu(f);if(d instanceof py)a.push(f);else{const g=Xm(d,p);g!=null&&(a.push(f),o.set(f,g))}});const c=new ks(a);return new i4(o,c,i.fieldTransforms)}function l4(t,e,n,r,i,a){const o=t.Qu(1,e,n),c=[Xw(e,r,n)],u=[i];if(a.length%2!=0)throw new Ve(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)c.push(Xw(e,a[g])),u.push(a[g+1]);const d=[],f=us.empty();for(let g=c.length-1;g>=0;--g)if(!h4(d,c[g])){const _=c[g];let N=u[g];N=Ut(N);const b=o.Nu(_);if(N instanceof py)d.push(_);else{const S=Xm(N,b);S!=null&&(d.push(_),f.set(_,S))}}const p=new ks(d);return new i4(f,p,o.fieldTransforms)}function c4(t,e,n,r=!1){return Xm(n,t.Qu(r?4:3,e))}function Xm(t,e){if(d4(t=Ut(t)))return Rj("Unsupported field value:",e,t),u4(t,e);if(t instanceof my)return function(r,i){if(!a4(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const c of r){let u=Xm(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=Ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=lr.fromDate(r);return{timestampValue:Kv(i.serializer,a)}}if(r instanceof lr){const a=new lr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kv(i.serializer,a)}}if(r instanceof kj)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kd)return{bytesValue:PR(i.serializer,r._byteString)};if(r instanceof Lr){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:hj(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Tj)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return cj(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${hy(r)}`)}(t,e)}function u4(t,e){const n={};return aR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hc(t,(r,i)=>{const a=Xm(i,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function d4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lr||t instanceof kj||t instanceof kd||t instanceof Lr||t instanceof my||t instanceof Tj)}function Rj(t,e,n){if(!d4(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=hy(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Xw(t,e,n){if((e=Ut(e))instanceof Qm)return e._internalPath;if(typeof e=="string")return Mj(t,e);throw Xv("Field path arguments must be of type string or ",t,!1,void 0,n)}const rH=new RegExp("[~\\*/\\[\\]]");function Mj(t,e,n){if(e.search(rH)>=0)throw Xv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qm(...e.split("."))._internalPath}catch{throw Xv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xv(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ve(ve.INVALID_ARGUMENT,c+t+u)}function h4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Lr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sH extends Oj{data(){return super.data()}}function gy(t,e){return typeof e=="string"?Mj(t,e):e instanceof Qm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ve(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dj{}class vy extends Dj{}function _n(t,e,...n){let r=[];e instanceof Dj&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof Lj).length,c=a.filter(u=>u instanceof xy).length;if(o>1||o>0&&c>0)throw new Ve(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class xy extends vy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new xy(e,n,r)}_apply(e){const n=this._parse(e);return m4(e._query,n),new ya(e.firestore,e.converter,Bw(e._query,n))}_parse(e){const n=nh(e.firestore);return function(a,o,c,u,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ve(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){bC(p,f);const _=[];for(const N of p)_.push(wC(u,a,N));g={arrayValue:{values:_}}}else g=wC(u,a,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||bC(p,f),g=c4(c,o,p,f==="in"||f==="not-in");return Qn.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xn(t,e,n){const r=e,i=gy("where",t);return xy._create(i,r,n)}class Lj extends Dj{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lj(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)m4(o,u),o=Bw(o,u)}(e._query,n),new ya(e.firestore,e.converter,Bw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fj extends vy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fj(e,n)}_apply(e){const n=function(i,a,o){if(i.startAt!==null)throw new Ve(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ve(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gm(a,o)}(e._query,this._field,this._direction);return new ya(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new Gc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function _C(t,e="asc"){const n=e,r=gy("orderBy",t);return Fj._create(r,n)}class Vj extends vy{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Vj(e,n,r)}_apply(e){return new ya(e.firestore,e.converter,Hv(e._query,this._limit,this._limitType))}}function ei(t){return QW("limit",t),Vj._create("limit",t,"F")}class zj extends vy{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new zj(e,n,r)}_apply(e){const n=aH(e,this.type,this._docOrFields,this._inclusive);return new ya(e.firestore,e.converter,function(i,a){return new Gc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)}(e._query,n))}}function iH(...t){return zj._create("startAfter",t,!1)}function aH(t,e,n,r){if(n[0]=Ut(n[0]),n[0]instanceof Oj)return function(a,o,c,u,d){if(!u)throw new Ve(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const f=[];for(const p of od(a))if(p.field.isKeyField())f.push(Wv(o,u.key));else{const g=u.data.field(p.field);if(ty(g))throw new Ve(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const _=p.field.canonicalString();throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}f.push(g)}return new Sd(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=nh(t.firestore);return function(o,c,u,d,f,p){const g=o.explicitOrderBy;if(f.length>g.length)throw new Ve(ve.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let N=0;N<f.length;N++){const b=f[N];if(g[N].field.isKeyField()){if(typeof b!="string")throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof b}`);if(!lj(o)&&b.indexOf("/")!==-1)throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${b}' contains a slash.`);const S=o.path.child(sn.fromString(b));if(!ot.isDocumentKey(S))throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const w=new ot(S);_.push(Wv(c,w))}else{const S=c4(u,d,b);_.push(S)}}return new Sd(_,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function wC(t,e,n){if(typeof(n=Ut(n))=="string"){if(n==="")throw new Ve(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lj(e)&&n.indexOf("/")!==-1)throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(sn.fromString(n));if(!ot.isDocumentKey(r))throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wv(t,new ot(r))}if(n instanceof Lr)return Wv(t,n._key);throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hy(n)}.`)}function bC(t,e){if(!Array.isArray(t)||t.length===0)throw new Ve(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function m4(t,e){const n=function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ve(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class oH{convertValue(e,n="none"){switch(Ac(e)){case 0:return null;case 1:return e.booleanValue;case 2:return On(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw mt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hc(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>On(o.doubleValue));return new Tj(a)}convertGeoPoint(e){return new kj(On(e.latitude),On(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sj(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fm(e));default:return null}}convertTimestamp(e){const n=gl(e);return new lr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=sn.fromString(e);Zt(DR(r));const i=new mm(r.get(1),r.get(3)),a=new ot(r.popFirst(5));return i.isEqual(n)||no(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class p4 extends Oj{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Xg extends p4{data(e={}){return super.data(e)}}class g4{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new wf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xg(this._firestore,this._userDataWriter,r.key,r,new wf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ve(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new Xg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new wf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new Xg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new wf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:lH(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function lH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t){t=Xr(t,Lr);const e=Xr(t.firestore,pa);return KW(Ym(e),t._key).then(n=>v4(e,t,n))}class $j extends oH{constructor(e){super(),this.firestore=e}convertBytes(e){return new kd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lr(this.firestore,null,n)}}function Fn(t){t=Xr(t,ya);const e=Xr(t.firestore,pa),n=Ym(e),r=new $j(e);return f4(t._query),ZW(n,t._query).then(i=>new g4(e,r,t,i))}function oc(t,e,n){t=Xr(t,Lr);const r=Xr(t.firestore,pa),i=Uj(t.converter,e,n);return Jm(r,[Ij(nh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Qr.none())])}function yn(t,e,n,...r){t=Xr(t,Lr);const i=Xr(t.firestore,pa),a=nh(i);let o;return o=typeof(e=Ut(e))=="string"||e instanceof Qm?l4(a,"updateDoc",t._key,e,n,r):o4(a,"updateDoc",t._key,e),Jm(i,[o.toMutation(t._key,Qr.exists(!0))])}function Td(t){return Jm(Xr(t.firestore,pa),[new oy(t._key,Qr.none())])}function xl(t,e){const n=Xr(t.firestore,pa),r=yt(t),i=Uj(t.converter,e);return Jm(n,[Ij(nh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Qr.exists(!1))]).then(()=>r)}function jC(t,...e){var n,r,i;t=Ut(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||yC(e[o])||(a=e[o],o++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(yC(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,d,f;if(t instanceof Lr)d=Xr(t.firestore,pa),f=ny(t._key.path),u={next:p=>{e[o]&&e[o](v4(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Xr(t,ya);d=Xr(p.firestore,pa),f=p._query;const g=new $j(d);u={next:_=>{e[o]&&e[o](new g4(d,g,p,_))},error:e[o+1],complete:e[o+2]},f4(t._query)}return function(g,_,N,b){const S=new Cj(b),w=new Sj(_,S,N);return g.asyncQueue.enqueueAndForget(async()=>bj(await Qv(g),w)),()=>{S.Za(),g.asyncQueue.enqueueAndForget(async()=>jj(await Qv(g),w))}}(Ym(d),f,c,u)}function Jm(t,e){return function(r,i){const a=new Ga;return r.asyncQueue.enqueueAndForget(async()=>LW(await GW(r),i,a)),a.promise}(Ym(t),e)}function v4(t,e,n){const r=n.docs.get(e._key),i=new $j(t);return new p4(t,i,e._key,r,new wf(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=nh(e)}set(e,n,r){this._verifyNotCommitted();const i=X0(e,this._firestore),a=Uj(i.converter,n,r),o=Ij(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Qr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=X0(e,this._firestore);let o;return o=typeof(n=Ut(n))=="string"||n instanceof Qm?l4(this._dataReader,"WriteBatch.update",a._key,n,r,i):o4(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Qr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=X0(e,this._firestore);return this._mutations=this._mutations.concat(new oy(n._key,Qr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function X0(t,e){if((t=Ut(t)).firestore!==e)throw new Ve(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function sr(){return new Aj("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t){return Ym(t=Xr(t,pa)),new cH(t,e=>Jm(t,e))}(function(e,n=!0){(function(i){Jd=i})(Wc),Ec(new fl("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new pa(new pB(r.getProvider("auth-internal")),new yB(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ve(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mm(d.options.projectId,f)}(o,i),o);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),ia(LE,"4.7.3",e),ia(LE,"4.7.3","esm2017")})();var uH="firebase",dH="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ia(uH,dH,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="firebasestorage.googleapis.com",_4="storageBucket",hH=2*60*1e3,fH=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends xa{constructor(e,n,r=0){super(J0(e),`Firebase Storage: ${n} (${J0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return J0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var An;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(An||(An={}));function J0(t){return"storage/"+t}function Bj(){const t="An unknown error occurred, please check the error payload for server response.";return new Rn(An.UNKNOWN,t)}function mH(t){return new Rn(An.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function pH(t){return new Rn(An.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function gH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rn(An.UNAUTHENTICATED,t)}function vH(){return new Rn(An.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function xH(t){return new Rn(An.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function yH(){return new Rn(An.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _H(){return new Rn(An.CANCELED,"User canceled the upload/download.")}function wH(t){return new Rn(An.INVALID_URL,"Invalid URL '"+t+"'.")}function bH(t){return new Rn(An.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function jH(){return new Rn(An.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_4+"' property when initializing the app?")}function NH(){return new Rn(An.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function SH(){return new Rn(An.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function EH(t){return new Rn(An.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Jw(t){return new Rn(An.INVALID_ARGUMENT,t)}function w4(){return new Rn(An.APP_DELETED,"The Firebase app was deleted.")}function CH(t){return new Rn(An.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vf(t,e){return new Rn(An.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function tf(t){throw new Rn(An.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ts.makeFromUrl(e,n)}catch{return new Ts(e,"")}if(r.path==="")return r;throw bH(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(A){A.path_=decodeURIComponent(A.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${f}/b/${i}/o${g}`,"i"),N={bucket:1,path:3},b=n===y4?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",w=new RegExp(`^https?://${b}/${i}/${S}`,"i"),E=[{regex:c,indices:u,postModify:a},{regex:_,indices:N,postModify:d},{regex:w,indices:{bucket:1,path:2},postModify:d}];for(let A=0;A<E.length;A++){const O=E[A],q=O.regex.exec(e);if(q){const R=q[O.indices.bucket];let V=q[O.indices.path];V||(V=""),r=new Ts(R,V),O.postModify(r);break}}if(r==null)throw wH(e);return r}}class kH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(t,e,n){let r=1,i=null,a=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...S){d||(d=!0,e.apply(null,S))}function p(S){i=setTimeout(()=>{i=null,t(_,u())},S)}function g(){a&&clearTimeout(a)}function _(S,...w){if(d){g();return}if(S){g(),f.call(null,S,...w);return}if(u()||o){g(),f.call(null,S,...w);return}r<64&&(r*=2);let E;c===1?(c=2,E=0):E=(r+Math.random())*1e3,p(E)}let N=!1;function b(S){N||(N=!0,g(),!d&&(i!==null?(S||(c=2),clearTimeout(i),p(0)):S||(c=1)))}return p(0),a=setTimeout(()=>{o=!0,b(!0)},n),b}function PH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH(t){return t!==void 0}function AH(t){return typeof t=="object"&&!Array.isArray(t)}function qj(t){return typeof t=="string"||t instanceof String}function NC(t){return Wj()&&t instanceof Blob}function Wj(){return typeof Blob<"u"}function SC(t,e,n,r){if(r<e)throw Jw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Jw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function b4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var fc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fc||(fc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RH(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(e,n,r,i,a,o,c,u,d,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,N)=>{this.resolve_=_,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new vg(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const c=a.getErrorCode()===fc.NO_ERROR,u=a.getStatus();if(!c||RH(u,this.additionalRetryCodes_)&&this.retry){const f=a.getErrorCode()===fc.ABORT;r(!1,new vg(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new vg(d,a))})},n=(r,i)=>{const a=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());IH(u)?a(u):a()}catch(u){o(u)}else if(c!==null){const u=Bj();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?w4():_H();o(u)}else{const u=yH();o(u)}};this.canceled_?n(!1,new vg(!1,null,!0)):this.backoffId_=TH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&PH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vg{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function OH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function DH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function LH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function FH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function VH(t,e,n,r,i,a,o=!0){const c=b4(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return LH(d,e),OH(d,n),DH(d,a),FH(d,r),new MH(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function UH(...t){const e=zH();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Wj())return new Blob(t);throw new Rn(An.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $H(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BH(t){if(typeof atob>"u")throw EH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class e_{constructor(e,n){this.data=e,this.contentType=n||null}}function qH(t,e){switch(t){case Xi.RAW:return new e_(j4(e));case Xi.BASE64:case Xi.BASE64URL:return new e_(N4(t,e));case Xi.DATA_URL:return new e_(HH(e),GH(e))}throw Bj()}function j4(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function WH(t){let e;try{e=decodeURIComponent(t)}catch{throw Vf(Xi.DATA_URL,"Malformed data URL.")}return j4(e)}function N4(t,e){switch(t){case Xi.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Vf(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Xi.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Vf(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=BH(e)}catch(i){throw i.message.includes("polyfill")?i:Vf(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class S4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Vf(Xi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=KH(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function HH(t){const e=new S4(t);return e.base64?N4(Xi.BASE64,e.rest):WH(e.rest)}function GH(t){return new S4(t).contentType}function KH(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n){let r=0,i="";NC(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(NC(this.data_)){const r=this.data_,i=$H(r,e,n);return i===null?null:new Bo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Bo(r,!0)}}static getBlob(...e){if(Wj()){const n=e.map(r=>r instanceof Bo?r.data_:r);return new Bo(UH.apply(null,n))}else{const n=e.map(o=>qj(o)?qH(Xi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)i[a++]=o[c]}),new Bo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t){let e;try{e=JSON.parse(t)}catch{return null}return AH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZH(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function YH(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function C4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(t,e){return e}class Br{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||QH}}let xg=null;function XH(t){return!qj(t)||t.length<2?t:C4(t)}function k4(){if(xg)return xg;const t=[];t.push(new Br("bucket")),t.push(new Br("generation")),t.push(new Br("metageneration")),t.push(new Br("name","fullPath",!0));function e(a,o){return XH(o)}const n=new Br("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const i=new Br("size");return i.xform=r,t.push(i),t.push(new Br("timeCreated")),t.push(new Br("updated")),t.push(new Br("md5Hash",null,!0)),t.push(new Br("cacheControl",null,!0)),t.push(new Br("contentDisposition",null,!0)),t.push(new Br("contentEncoding",null,!0)),t.push(new Br("contentLanguage",null,!0)),t.push(new Br("contentType",null,!0)),t.push(new Br("metadata","customMetadata",!0)),xg=t,xg}function JH(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new Ts(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function eG(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return JH(r,t),r}function T4(t,e,n){const r=E4(e);return r===null?null:eG(t,r,n)}function tG(t,e,n,r){const i=E4(e);if(i===null||!qj(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const f=t.bucket,p=t.fullPath,g="/b/"+o(f)+"/o/"+o(p),_=Hj(g,n,r),N=b4({alt:"media",token:d});return _+N})[0]}function nG(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class P4{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t){if(!t)throw Bj()}function rG(t,e){function n(r,i){const a=T4(t,i,e);return I4(a!==null),a}return n}function sG(t,e){function n(r,i){const a=T4(t,i,e);return I4(a!==null),tG(a,i,t.host,t._protocol)}return n}function A4(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=vH():i=gH():n.getStatus()===402?i=pH(t.bucket):n.getStatus()===403?i=xH(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function iG(t){const e=A4(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=mH(t.path)),a.serverResponse=i.serverResponse,a}return n}function aG(t,e,n){const r=e.fullServerUrl(),i=Hj(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new P4(i,a,sG(t,n),o);return c.errorHandler=iG(e),c}function oG(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function lG(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=oG(null,e)),r}function cG(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let E="";for(let A=0;A<2;A++)E=E+Math.random().toString().slice(2);return E}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=lG(e,r,i),f=nG(d,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",_=Bo.getBlob(p,r,g);if(_===null)throw NH();const N={name:d.fullPath},b=Hj(a,t.host,t._protocol),S="POST",w=t.maxUploadRetryTime,y=new P4(b,S,rG(t,n),w);return y.urlParams=N,y.headers=o,y.body=_.uploadData(),y.errorHandler=A4(e),y}class uG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw tf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dG extends uG{initXhr(){this.xhr_.responseType="text"}}function R4(){return new dG}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this._service=e,n instanceof Ts?this._location=n:this._location=Ts.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Rc(e,n)}get root(){const e=new Ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return C4(this._location.path)}get storage(){return this._service}get parent(){const e=ZH(this._location.path);if(e===null)return null;const n=new Ts(this._location.bucket,e);return new Rc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw CH(e)}}function hG(t,e,n){t._throwIfRoot("uploadBytes");const r=cG(t.storage,t._location,k4(),new Bo(e,!0),n);return t.storage.makeRequestWithTokens(r,R4).then(i=>({metadata:i,ref:t}))}function fG(t){t._throwIfRoot("getDownloadURL");const e=aG(t.storage,t._location,k4());return t.storage.makeRequestWithTokens(e,R4).then(n=>{if(n===null)throw SH();return n})}function mG(t,e){const n=YH(t._location.path,e),r=new Ts(t._location.bucket,n);return new Rc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pG(t){return/^[A-Za-z]+:\/\//.test(t)}function gG(t,e){return new Rc(t,e)}function M4(t,e){if(t instanceof Gj){const n=t;if(n._bucket==null)throw jH();const r=new Rc(n,n._bucket);return e!=null?M4(r,e):r}else return e!==void 0?mG(t,e):t}function vG(t,e){if(e&&pG(e)){if(t instanceof Gj)return gG(t,e);throw Jw("To use ref(service, url), the first argument must be a Storage instance.")}else return M4(t,e)}function EC(t,e){const n=e==null?void 0:e[_4];return n==null?null:Ts.makeFromBucketSpec(n,t)}function xG(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:oA(i,t.app.options.projectId))}class Gj{constructor(e,n,r,i,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=y4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hH,this._maxUploadRetryTime=fH,this._requests=new Set,i!=null?this._bucket=Ts.makeFromBucketSpec(i,this._host):this._bucket=EC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ts.makeFromBucketSpec(this._url,e):this._bucket=EC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){SC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){SC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rc(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new kH(w4());{const o=VH(e,this._appId,r,i,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const CC="@firebase/storage",kC="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="storage";function Kj(t,e,n){return t=Ut(t),hG(t,e,n)}function Zj(t){return t=Ut(t),fG(t)}function Yj(t,e){return t=Ut(t),vG(t,e)}function yG(t=W1(),e){t=Ut(t);const r=Yx(t,O4).getImmediate({identifier:e}),i=sA("storage");return i&&_G(r,...i),r}function _G(t,e,n,r={}){xG(t,e,n,r)}function wG(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Gj(n,r,i,e,Wc)}function bG(){Ec(new fl(O4,wG,"PUBLIC").setMultipleInstances(!0)),ia(CC,kC,""),ia(CC,kC,"esm2017")}bG();const jG={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},Qj=uA(jG),Gi=dB(Qj),Ue=s4(Qj),Xj=yG(Qj),D4=x.createContext(null),t_=t=>{const e={};return Object.keys(t).forEach(n=>{t[n]!==void 0&&(e[n]=t[n])}),e},mn=()=>{const t=x.useContext(D4);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},NG=({children:t})=>{const[e,n]=x.useState(null),[r,i]=x.useState(null),[a,o]=x.useState(!0),c=async b=>{try{const S=localStorage.getItem("pendingUserData");if(S){const w=JSON.parse(S);console.log(" Donnes rcupres depuis localStorage:",w);const y=yt(Ue,"users",b.uid),E=await Is(y);if(E.exists()){const A=E.data();console.log(" Donnes actuelles dans Firestore:",A);const O={...A,...w,id:b.uid,email:b.email,createdAt:A.createdAt||new Date,lastSeen:new Date},q=t_(O);return await yn(y,q),console.log(" Donnes rcupres et mises  jour !"),i(O),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),xe.success("Donnes de profil rcupres !"),!0}}return!1}catch(S){return console.error(" Erreur rcupration:",S),!1}},u=async(b,S)=>{const w=yt(Ue,"users",b.uid),y=await Is(w);if(y.exists()){const E=y.data();if(console.log(" Donnes existantes trouves:",E),!await c(b)){const O={id:b.uid,email:b.email,lastSeen:new Date};E.displayName||(O.displayName=b.displayName||"Utilisateur"),E.university||(O.university="Universit non spcifie"),E.fieldOfStudy||(O.fieldOfStudy="Non spcifi");const q=t_(O);await yn(w,q);const R={...E,...q};i(R),console.log(" Profil mis  jour sans craser les donnes existantes")}}else{const E={id:b.uid,email:b.email,displayName:b.displayName||(S==null?void 0:S.displayName)||"Utilisateur",photoURL:b.photoURL||(S==null?void 0:S.photoURL)||void 0,phone:(S==null?void 0:S.phone)||void 0,isVerified:!1,verificationStatus:"pending",university:(S==null?void 0:S.university)||"Universit non spcifie",otherUniversity:(S==null?void 0:S.otherUniversity)||void 0,studentId:(S==null?void 0:S.studentId)||void 0,graduationYear:(S==null?void 0:S.graduationYear)||new Date().getFullYear()+2,fieldOfStudy:(S==null?void 0:S.fieldOfStudy)||"Non spcifi",otherFieldOfStudy:(S==null?void 0:S.otherFieldOfStudy)||void 0,campus:(S==null?void 0:S.campus)||"Campus principal",bio:(S==null?void 0:S.bio)||void 0,rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date},A=t_(E);await oc(w,A),i(E)}},d=async(b,S)=>{try{await H$(Gi,b,S),xe.success("Connexion russie !")}catch(w){const y=w instanceof Error?w.message:"Erreur inconnue";throw xe.error("Erreur de connexion : "+y),w}},f=async(b,S,w,y)=>{try{const{user:E}=await DA(Gi,b,S);await dm(E,{displayName:w}),await u(E,y),xe.success("Compte cr avec succs !")}catch(E){const A=E instanceof Error?E.message:"Erreur inconnue";throw xe.error("Erreur lors de la cration du compte : "+A),E}},p=async()=>{try{const b=new za;b.setCustomParameters({prompt:"select_account"}),b.addScope("email"),b.addScope("profile"),await S7(Gi,b)}catch(b){console.error("Google sign in error:",b);const S=b instanceof Error?b.message:"Erreur inconnue";throw xe.error("Erreur de connexion Google : "+S),b}},g=async()=>{try{await J$(Gi),i(null),xe.success("Dconnexion russie !")}catch(b){throw xe.error("Erreur lors de la dconnexion"),b}},_=async b=>{if(!(!e||!r))try{const S=yt(Ue,"users",e.uid),w=Object.fromEntries(Object.entries(b).filter(([,y])=>y!==void 0));if(w.updatedAt=new Date,Object.keys(w).length===0){console.warn("Aucune donne valide  mettre  jour");return}await yn(S,w),i({...r,...w}),console.log("Profil mis  jour avec:",w),xe.success("Profil mis  jour !")}catch(S){throw console.error("Erreur mise  jour profil:",S),xe.error("Erreur lors de la mise  jour du profil"),S}};x.useEffect(()=>{const b=X$(Gi,async w=>{n(w),w?await u(w):i(null),o(!1)});return(async()=>{try{const w=await C7(Gi);w!=null&&w.user&&(await u(w.user),xe.success("Connexion Google russie !"))}catch(w){if(console.error("Redirect result error:",w),w&&typeof w=="object"&&"code"in w&&w.code!=="auth/null-user"){const y=w instanceof Error?w.message:"Erreur inconnue";xe.error("Erreur de connexion Google : "+y)}}})(),b},[]);const N={currentUser:e,userProfile:r,loading:a,signIn:d,signUp:f,signInWithGoogle:p,logout:g,updateUserProfile:_};return s.jsx(D4.Provider,{value:N,children:!a&&t})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SG=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L4=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>x.createElement("svg",{ref:u,...EG,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:L4("lucide",i),...c},[...o.map(([d,f])=>x.createElement(d,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(t,e)=>{const n=x.forwardRef(({className:r,...i},a)=>x.createElement(CG,{ref:a,iconNode:e,className:L4(`lucide-${SG(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kG=ye("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=ye("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=ye("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=ye("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=ye("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=ye("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TG=ye("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=ye("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PG=ye("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IG=ye("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=ye("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=ye("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=ye("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=ye("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=ye("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=ye("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=ye("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AG=ye("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RG=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MG=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=ye("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=ye("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=ye("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=ye("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OG=ye("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=ye("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ye("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DG=ye("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=ye("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LG=ye("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FG=ye("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VG=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=ye("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zG=ye("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=ye("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=ye("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=ye("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=ye("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ye("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=ye("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=ye("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UG=ye("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $G=ye("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=ye("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=ye("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=ye("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BG=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qG=ye("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ye("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WG=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ye("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=ye("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HG=ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=ye("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GG=ye("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KG=ye("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=ye("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZG=ye("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YG=ye("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=ye("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QG=ye("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=ye("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=ye("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=ye("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=ye("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=ye("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=ye("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=ye("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XG=ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=ye("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JG=ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=ye("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=ye("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=ye("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=ye("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=ye("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=ye("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=ye("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=ye("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=ye("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=ye("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=ye("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function RC(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function jy(...t){return e=>{let n=!1;const r=t.map(i=>{const a=RC(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():RC(t[i],null)}}}}function ht(...t){return x.useCallback(jy(...t),t)}function wl(t){const e=aK(t),n=x.forwardRef((r,i)=>{const{children:a,...o}=r,c=x.Children.toArray(a),u=c.find(lK);if(u){const d=u.props.children,f=c.map(p=>p===u?x.Children.count(d)>1?x.Children.only(null):x.isValidElement(d)?d.props.children:null:p);return s.jsx(e,{...o,ref:i,children:x.isValidElement(d)?x.cloneElement(d,void 0,f):null})}return s.jsx(e,{...o,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}var iK=wl("Slot");function aK(t){const e=x.forwardRef((n,r)=>{const{children:i,...a}=n;if(x.isValidElement(i)){const o=uK(i),c=cK(a,i.props);return i.type!==x.Fragment&&(c.ref=r?jy(r,o):o),x.cloneElement(i,c)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var oK=Symbol("radix.slottable");function lK(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===oK}function cK(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...c)=>{const u=a(...c);return i(...c),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function uK(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function nM(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=nM(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function rM(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=nM(t))&&(r&&(r+=" "),r+=e);return r}const MC=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,OC=rM,Ny=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return OC(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(d=>{const f=n==null?void 0:n[d],p=a==null?void 0:a[d];if(f===null)return null;const g=MC(f)||MC(p);return i[d][g]}),c=n&&Object.entries(n).reduce((d,f)=>{let[p,g]=f;return g===void 0||(d[p]=g),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,f)=>{let{class:p,className:g,..._}=f;return Object.entries(_).every(N=>{let[b,S]=N;return Array.isArray(S)?S.includes({...a,...c}[b]):{...a,...c}[b]===S})?[...d,p,g]:d},[]);return OC(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},tN="-",dK=t=>{const e=fK(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const c=o.split(tN);return c[0]===""&&c.length!==1&&c.shift(),sM(c,e)||hK(o)},getConflictingClassGroupIds:(o,c)=>{const u=n[o]||[];return c&&r[o]?[...u,...r[o]]:u}}},sM=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?sM(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(tN);return(o=e.validators.find(({validator:c})=>c(a)))==null?void 0:o.classGroupId},DC=/^\[(.+)\]$/,hK=t=>{if(DC.test(t)){const e=DC.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},fK=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return pK(Object.entries(t.classGroups),n).forEach(([a,o])=>{rb(o,r,a,e)}),r},rb=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:LC(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(mK(i)){rb(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{rb(o,LC(e,a),n,r)})})},LC=(t,e)=>{let n=t;return e.split(tN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},mK=t=>t.isThemeGetter,pK=(t,e)=>e?t.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,c])=>[e+o,c])):a);return[n,i]}):t,gK=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},iM="!",vK=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],a=e.length,o=c=>{const u=[];let d=0,f=0,p;for(let S=0;S<c.length;S++){let w=c[S];if(d===0){if(w===i&&(r||c.slice(S,S+a)===e)){u.push(c.slice(f,S)),f=S+a;continue}if(w==="/"){p=S;continue}}w==="["?d++:w==="]"&&d--}const g=u.length===0?c:c.substring(f),_=g.startsWith(iM),N=_?g.substring(1):g,b=p&&p>f?p-f:void 0;return{modifiers:u,hasImportantModifier:_,baseClassName:N,maybePostfixModifierPosition:b}};return n?c=>n({className:c,parseClassName:o}):o},xK=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},yK=t=>({cache:gK(t.cacheSize),parseClassName:vK(t),...dK(t)}),_K=/\s+/,wK=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(_K);let c="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:f,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:_}=n(d);let N=!!_,b=r(N?g.substring(0,_):g);if(!b){if(!N){c=d+(c.length>0?" "+c:c);continue}if(b=r(g),!b){c=d+(c.length>0?" "+c:c);continue}N=!1}const S=xK(f).join(":"),w=p?S+iM:S,y=w+b;if(a.includes(y))continue;a.push(y);const E=i(b,N);for(let A=0;A<E.length;++A){const O=E[A];a.push(w+O)}c=d+(c.length>0?" "+c:c)}return c};function bK(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=aM(e))&&(r&&(r+=" "),r+=n);return r}const aM=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=aM(t[r]))&&(n&&(n+=" "),n+=e);return n};function jK(t,...e){let n,r,i,a=o;function o(u){const d=e.reduce((f,p)=>p(f),t());return n=yK(d),r=n.cache.get,i=n.cache.set,a=c,c(u)}function c(u){const d=r(u);if(d)return d;const f=wK(u,n);return i(u,f),f}return function(){return a(bK.apply(null,arguments))}}const un=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},oM=/^\[(?:([a-z-]+):)?(.+)\]$/i,NK=/^\d+\/\d+$/,SK=new Set(["px","full","screen"]),EK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,TK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,PK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Oa=t=>cd(t)||SK.has(t)||NK.test(t),To=t=>ah(t,"length",FK),cd=t=>!!t&&!Number.isNaN(Number(t)),i_=t=>ah(t,"number",cd),nf=t=>!!t&&Number.isInteger(Number(t)),IK=t=>t.endsWith("%")&&cd(t.slice(0,-1)),jt=t=>oM.test(t),Po=t=>EK.test(t),AK=new Set(["length","size","percentage"]),RK=t=>ah(t,AK,lM),MK=t=>ah(t,"position",lM),OK=new Set(["image","url"]),DK=t=>ah(t,OK,zK),LK=t=>ah(t,"",VK),rf=()=>!0,ah=(t,e,n)=>{const r=oM.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},FK=t=>CK.test(t)&&!kK.test(t),lM=()=>!1,VK=t=>TK.test(t),zK=t=>PK.test(t),UK=()=>{const t=un("colors"),e=un("spacing"),n=un("blur"),r=un("brightness"),i=un("borderColor"),a=un("borderRadius"),o=un("borderSpacing"),c=un("borderWidth"),u=un("contrast"),d=un("grayscale"),f=un("hueRotate"),p=un("invert"),g=un("gap"),_=un("gradientColorStops"),N=un("gradientColorStopPositions"),b=un("inset"),S=un("margin"),w=un("opacity"),y=un("padding"),E=un("saturate"),A=un("scale"),O=un("sepia"),q=un("skew"),R=un("space"),V=un("translate"),U=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",jt,e],D=()=>[jt,e],P=()=>["",Oa,To],H=()=>["auto",cd,jt],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",jt],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[cd,jt];return{cacheSize:500,separator:":",theme:{colors:[rf],spacing:[Oa,To],blur:["none","",Po,jt],brightness:X(),borderColor:[t],borderRadius:["none","","full",Po,jt],borderSpacing:D(),borderWidth:P(),contrast:X(),grayscale:z(),hueRotate:X(),invert:z(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[IK,To],inset:F(),margin:F(),opacity:X(),padding:D(),saturate:X(),scale:X(),sepia:z(),skew:X(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",jt]}],container:["container"],columns:[{columns:[Po]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),jt]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nf,jt]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",jt]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",nf,jt]}],"grid-cols":[{"grid-cols":[rf]}],"col-start-end":[{col:["auto",{span:["full",nf,jt]},jt]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[rf]}],"row-start-end":[{row:["auto",{span:[nf,jt]},jt]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",jt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",jt]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",jt,e]}],"min-w":[{"min-w":[jt,e,"min","max","fit"]}],"max-w":[{"max-w":[jt,e,"none","full","min","max","fit","prose",{screen:[Po]},Po]}],h:[{h:[jt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[jt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[jt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[jt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Po,To]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",i_]}],"font-family":[{font:[rf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",jt]}],"line-clamp":[{"line-clamp":["none",cd,i_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Oa,jt]}],"list-image":[{"list-image":["none",jt]}],"list-style-type":[{list:["none","disc","decimal",jt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Oa,To]}],"underline-offset":[{"underline-offset":["auto",Oa,jt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",jt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",jt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),MK]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",RK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},DK]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:Z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[Oa,jt]}],"outline-w":[{outline:[Oa,To]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Oa,To]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Po,LK]}],"shadow-color":[{shadow:[rf]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Po,jt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[E]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",jt]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",jt]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",jt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[nf,jt]}],"translate-x":[{"translate-x":[V]}],"translate-y":[{"translate-y":[V]}],"skew-x":[{"skew-x":[q]}],"skew-y":[{"skew-y":[q]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",jt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",jt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",jt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Oa,To,i_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},$K=jK(UK);function st(...t){return $K(rM(t))}const sb=Ny("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),J=x.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const o=r?iK:"button";return s.jsx(o,{className:st(sb({variant:e,size:n,className:t})),ref:a,...i})});J.displayName="Button";const Ge=x.forwardRef(({className:t,type:e,...n},r)=>s.jsx("input",{type:e,className:st("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Ge.displayName="Input";function Oe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function BK(t,e){const n=x.createContext(e),r=a=>{const{children:o,...c}=a,u=x.useMemo(()=>c,Object.values(c));return s.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function i(a){const o=x.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,i]}function Sr(t,e=[]){let n=[];function r(a,o){const c=x.createContext(o),u=n.length;n=[...n,o];const d=p=>{var w;const{scope:g,children:_,...N}=p,b=((w=g==null?void 0:g[t])==null?void 0:w[u])||c,S=x.useMemo(()=>N,Object.values(N));return s.jsx(b.Provider,{value:S,children:_})};d.displayName=a+"Provider";function f(p,g){var b;const _=((b=g==null?void 0:g[t])==null?void 0:b[u])||c,N=x.useContext(_);if(N)return N;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[d,f]}const i=()=>{const a=n.map(o=>x.createContext(o));return function(c){const u=(c==null?void 0:c[t])||a;return x.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,qK(i,...e)]}function qK(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:u,scopeName:d})=>{const p=u(a)[`__scope${d}`];return{...c,...p}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Bn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},WK=Bb[" useInsertionEffect ".trim().toString()]||Bn;function Os({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,a,o]=HK({defaultProp:e,onChange:n}),c=t!==void 0,u=c?t:i;{const f=x.useRef(t!==void 0);x.useEffect(()=>{const p=f.current;p!==c&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,r])}const d=x.useCallback(f=>{var p;if(c){const g=GK(f)?f(t):f;g!==t&&((p=o.current)==null||p.call(o,g))}else a(f)},[c,t,a,o]);return[u,d]}function HK({defaultProp:t,onChange:e}){const[n,r]=x.useState(t),i=x.useRef(n),a=x.useRef(e);return WK(()=>{a.current=e},[e]),x.useEffect(()=>{var o;i.current!==n&&((o=a.current)==null||o.call(a,n),i.current=n)},[n,i]),[n,r,a]}function GK(t){return typeof t=="function"}var KK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ze=KK.reduce((t,e)=>{const n=wl(`Primitive.${e}`),r=x.forwardRef((i,a)=>{const{asChild:o,...c}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(u,{...c,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function cM(t,e){t&&Qd.flushSync(()=>t.dispatchEvent(e))}function np(t){const e=t+"CollectionProvider",[n,r]=Sr(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:S,children:w}=b,y=Le.useRef(null),E=Le.useRef(new Map).current;return s.jsx(i,{scope:S,itemMap:E,collectionRef:y,children:w})};o.displayName=e;const c=t+"CollectionSlot",u=wl(c),d=Le.forwardRef((b,S)=>{const{scope:w,children:y}=b,E=a(c,w),A=ht(S,E.collectionRef);return s.jsx(u,{ref:A,children:y})});d.displayName=c;const f=t+"CollectionItemSlot",p="data-radix-collection-item",g=wl(f),_=Le.forwardRef((b,S)=>{const{scope:w,children:y,...E}=b,A=Le.useRef(null),O=ht(S,A),q=a(f,w);return Le.useEffect(()=>(q.itemMap.set(A,{ref:A,...E}),()=>void q.itemMap.delete(A))),s.jsx(g,{[p]:"",ref:O,children:y})});_.displayName=f;function N(b){const S=a(t+"CollectionConsumer",b);return Le.useCallback(()=>{const y=S.collectionRef.current;if(!y)return[];const E=Array.from(y.querySelectorAll(`[${p}]`));return Array.from(S.itemMap.values()).sort((q,R)=>E.indexOf(q.ref.current)-E.indexOf(R.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:d,ItemSlot:_},N,r]}var ZK=x.createContext(void 0);function Yc(t){const e=x.useContext(ZK);return t||e||"ltr"}function mr(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function YK(t,e=globalThis==null?void 0:globalThis.document){const n=mr(t);x.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var QK="DismissableLayer",ib="dismissableLayer.update",XK="dismissableLayer.pointerDownOutside",JK="dismissableLayer.focusOutside",FC,uM=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rp=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:c,...u}=t,d=x.useContext(uM),[f,p]=x.useState(null),g=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,_]=x.useState({}),N=ht(e,R=>p(R)),b=Array.from(d.layers),[S]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=b.indexOf(S),y=f?b.indexOf(f):-1,E=d.layersWithOutsidePointerEventsDisabled.size>0,A=y>=w,O=nZ(R=>{const V=R.target,U=[...d.branches].some(k=>k.contains(V));!A||U||(i==null||i(R),o==null||o(R),R.defaultPrevented||c==null||c())},g),q=rZ(R=>{const V=R.target;[...d.branches].some(k=>k.contains(V))||(a==null||a(R),o==null||o(R),R.defaultPrevented||c==null||c())},g);return YK(R=>{y===d.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&c&&(R.preventDefault(),c()))},g),x.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(FC=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),VC(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=FC)}},[f,g,n,d]),x.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),VC())},[f,d]),x.useEffect(()=>{const R=()=>_({});return document.addEventListener(ib,R),()=>document.removeEventListener(ib,R)},[]),s.jsx(Ze.div,{...u,ref:N,style:{pointerEvents:E?A?"auto":"none":void 0,...t.style},onFocusCapture:Oe(t.onFocusCapture,q.onFocusCapture),onBlurCapture:Oe(t.onBlurCapture,q.onBlurCapture),onPointerDownCapture:Oe(t.onPointerDownCapture,O.onPointerDownCapture)})});rp.displayName=QK;var eZ="DismissableLayerBranch",tZ=x.forwardRef((t,e)=>{const n=x.useContext(uM),r=x.useRef(null),i=ht(e,r);return x.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(Ze.div,{...t,ref:i})});tZ.displayName=eZ;function nZ(t,e=globalThis==null?void 0:globalThis.document){const n=mr(t),r=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let u=function(){dM(XK,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function rZ(t,e=globalThis==null?void 0:globalThis.document){const n=mr(t),r=x.useRef(!1);return x.useEffect(()=>{const i=a=>{a.target&&!r.current&&dM(JK,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function VC(){const t=new CustomEvent(ib);document.dispatchEvent(t)}function dM(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?cM(i,a):i.dispatchEvent(a)}var a_=0;function Sy(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??zC()),document.body.insertAdjacentElement("beforeend",t[1]??zC()),a_++,()=>{a_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),a_--}},[])}function zC(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var o_="focusScope.autoFocusOnMount",l_="focusScope.autoFocusOnUnmount",UC={bubbles:!1,cancelable:!0},sZ="FocusScope",sp=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[c,u]=x.useState(null),d=mr(i),f=mr(a),p=x.useRef(null),g=ht(e,b=>u(b)),_=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let b=function(E){if(_.paused||!c)return;const A=E.target;c.contains(A)?p.current=A:Ao(p.current,{select:!0})},S=function(E){if(_.paused||!c)return;const A=E.relatedTarget;A!==null&&(c.contains(A)||Ao(p.current,{select:!0}))},w=function(E){if(document.activeElement===document.body)for(const O of E)O.removedNodes.length>0&&Ao(c)};document.addEventListener("focusin",b),document.addEventListener("focusout",S);const y=new MutationObserver(w);return c&&y.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",S),y.disconnect()}}},[r,c,_.paused]),x.useEffect(()=>{if(c){BC.add(_);const b=document.activeElement;if(!c.contains(b)){const w=new CustomEvent(o_,UC);c.addEventListener(o_,d),c.dispatchEvent(w),w.defaultPrevented||(iZ(uZ(hM(c)),{select:!0}),document.activeElement===b&&Ao(c))}return()=>{c.removeEventListener(o_,d),setTimeout(()=>{const w=new CustomEvent(l_,UC);c.addEventListener(l_,f),c.dispatchEvent(w),w.defaultPrevented||Ao(b??document.body,{select:!0}),c.removeEventListener(l_,f),BC.remove(_)},0)}}},[c,d,f,_]);const N=x.useCallback(b=>{if(!n&&!r||_.paused)return;const S=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,w=document.activeElement;if(S&&w){const y=b.currentTarget,[E,A]=aZ(y);E&&A?!b.shiftKey&&w===A?(b.preventDefault(),n&&Ao(E,{select:!0})):b.shiftKey&&w===E&&(b.preventDefault(),n&&Ao(A,{select:!0})):w===y&&b.preventDefault()}},[n,r,_.paused]);return s.jsx(Ze.div,{tabIndex:-1,...o,ref:g,onKeyDown:N})});sp.displayName=sZ;function iZ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ao(r,{select:e}),document.activeElement!==n)return}function aZ(t){const e=hM(t),n=$C(e,t),r=$C(e.reverse(),t);return[n,r]}function hM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function $C(t,e){for(const n of t)if(!oZ(n,{upTo:e}))return n}function oZ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function lZ(t){return t instanceof HTMLInputElement&&"select"in t}function Ao(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&lZ(t)&&e&&t.select()}}var BC=cZ();function cZ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=qC(t,e),t.unshift(e)},remove(e){var n;t=qC(t,e),(n=t[0])==null||n.resume()}}}function qC(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function uZ(t){return t.filter(e=>e.tagName!=="A")}var dZ=Bb[" useId ".trim().toString()]||(()=>{}),hZ=0;function As(t){const[e,n]=x.useState(dZ());return Bn(()=>{n(r=>r??String(hZ++))},[t]),e?`radix-${e}`:""}const fZ=["top","right","bottom","left"],bl=Math.min,Es=Math.max,nx=Math.round,yg=Math.floor,ua=t=>({x:t,y:t}),mZ={left:"right",right:"left",bottom:"top",top:"bottom"},pZ={start:"end",end:"start"};function ab(t,e,n){return Es(t,bl(e,n))}function io(t,e){return typeof t=="function"?t(e):t}function ao(t){return t.split("-")[0]}function oh(t){return t.split("-")[1]}function nN(t){return t==="x"?"y":"x"}function rN(t){return t==="y"?"height":"width"}function ea(t){return["top","bottom"].includes(ao(t))?"y":"x"}function sN(t){return nN(ea(t))}function gZ(t,e,n){n===void 0&&(n=!1);const r=oh(t),i=sN(t),a=rN(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=rx(o)),[o,rx(o)]}function vZ(t){const e=rx(t);return[ob(t),e,ob(e)]}function ob(t){return t.replace(/start|end/g,e=>pZ[e])}function xZ(t,e,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?a:o;default:return[]}}function yZ(t,e,n,r){const i=oh(t);let a=xZ(ao(t),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(ob)))),a}function rx(t){return t.replace(/left|right|bottom|top/g,e=>mZ[e])}function _Z(t){return{top:0,right:0,bottom:0,left:0,...t}}function fM(t){return typeof t!="number"?_Z(t):{top:t,right:t,bottom:t,left:t}}function sx(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function WC(t,e,n){let{reference:r,floating:i}=t;const a=ea(e),o=sN(e),c=rN(o),u=ao(e),d=a==="y",f=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,g=r[c]/2-i[c]/2;let _;switch(u){case"top":_={x:f,y:r.y-i.height};break;case"bottom":_={x:f,y:r.y+r.height};break;case"right":_={x:r.x+r.width,y:p};break;case"left":_={x:r.x-i.width,y:p};break;default:_={x:r.x,y:r.y}}switch(oh(e)){case"start":_[o]-=g*(n&&d?-1:1);break;case"end":_[o]+=g*(n&&d?-1:1);break}return _}const wZ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,c=a.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:p}=WC(d,r,u),g=r,_={},N=0;for(let b=0;b<c.length;b++){const{name:S,fn:w}=c[b],{x:y,y:E,data:A,reset:O}=await w({x:f,y:p,initialPlacement:r,placement:g,strategy:i,middlewareData:_,rects:d,platform:o,elements:{reference:t,floating:e}});f=y??f,p=E??p,_={..._,[S]:{..._[S],...A}},O&&N<=50&&(N++,typeof O=="object"&&(O.placement&&(g=O.placement),O.rects&&(d=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):O.rects),{x:f,y:p}=WC(d,g,u)),b=-1)}return{x:f,y:p,placement:g,strategy:i,middlewareData:_}};async function bm(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:o,elements:c,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:g=!1,padding:_=0}=io(e,t),N=fM(_),S=c[g?p==="floating"?"reference":"floating":p],w=sx(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(S)))==null||n?S:S.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:d,rootBoundary:f,strategy:u})),y=p==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),A=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},O=sx(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:E,strategy:u}):y);return{top:(w.top-O.top+N.top)/A.y,bottom:(O.bottom-w.bottom+N.bottom)/A.y,left:(w.left-O.left+N.left)/A.x,right:(O.right-w.right+N.right)/A.x}}const bZ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:o,elements:c,middlewareData:u}=e,{element:d,padding:f=0}=io(t,e)||{};if(d==null)return{};const p=fM(f),g={x:n,y:r},_=sN(i),N=rN(_),b=await o.getDimensions(d),S=_==="y",w=S?"top":"left",y=S?"bottom":"right",E=S?"clientHeight":"clientWidth",A=a.reference[N]+a.reference[_]-g[_]-a.floating[N],O=g[_]-a.reference[_],q=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let R=q?q[E]:0;(!R||!await(o.isElement==null?void 0:o.isElement(q)))&&(R=c.floating[E]||a.floating[N]);const V=A/2-O/2,U=R/2-b[N]/2-1,k=bl(p[w],U),F=bl(p[y],U),D=k,P=R-b[N]-F,H=R/2-b[N]/2+V,ee=ab(D,H,P),Z=!u.arrow&&oh(i)!=null&&H!==ee&&a.reference[N]/2-(H<D?k:F)-b[N]/2<0,K=Z?H<D?H-D:H-P:0;return{[_]:g[_]+K,data:{[_]:ee,centerOffset:H-ee-K,...Z&&{alignmentOffset:K}},reset:Z}}}),jZ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:c,platform:u,elements:d}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:b=!0,...S}=io(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const w=ao(i),y=ea(c),E=ao(c)===c,A=await(u.isRTL==null?void 0:u.isRTL(d.floating)),O=g||(E||!b?[rx(c)]:vZ(c)),q=N!=="none";!g&&q&&O.push(...yZ(c,b,N,A));const R=[c,...O],V=await bm(e,S),U=[];let k=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&U.push(V[w]),p){const H=gZ(i,o,A);U.push(V[H[0]],V[H[1]])}if(k=[...k,{placement:i,overflows:U}],!U.every(H=>H<=0)){var F,D;const H=(((F=a.flip)==null?void 0:F.index)||0)+1,ee=R[H];if(ee&&(!(p==="alignment"?y!==ea(ee):!1)||k.every(I=>I.overflows[0]>0&&ea(I.placement)===y)))return{data:{index:H,overflows:k},reset:{placement:ee}};let Z=(D=k.filter(K=>K.overflows[0]<=0).sort((K,I)=>K.overflows[1]-I.overflows[1])[0])==null?void 0:D.placement;if(!Z)switch(_){case"bestFit":{var P;const K=(P=k.filter(I=>{if(q){const z=ea(I.placement);return z===y||z==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(z=>z>0).reduce((z,B)=>z+B,0)]).sort((I,z)=>I[1]-z[1])[0])==null?void 0:P[0];K&&(Z=K);break}case"initialPlacement":Z=c;break}if(i!==Z)return{reset:{placement:Z}}}return{}}}};function HC(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function GC(t){return fZ.some(e=>t[e]>=0)}const NZ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=io(t,e);switch(r){case"referenceHidden":{const a=await bm(e,{...i,elementContext:"reference"}),o=HC(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:GC(o)}}}case"escaped":{const a=await bm(e,{...i,altBoundary:!0}),o=HC(a,n.floating);return{data:{escapedOffsets:o,escaped:GC(o)}}}default:return{}}}}};async function SZ(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ao(n),c=oh(n),u=ea(n)==="y",d=["left","top"].includes(o)?-1:1,f=a&&u?-1:1,p=io(e,t);let{mainAxis:g,crossAxis:_,alignmentAxis:N}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return c&&typeof N=="number"&&(_=c==="end"?N*-1:N),u?{x:_*f,y:g*d}:{x:g*d,y:_*f}}const EZ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:o,middlewareData:c}=e,u=await SZ(e,t);return o===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:a+u.y,data:{...u,placement:o}}}}},CZ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:c={fn:S=>{let{x:w,y}=S;return{x:w,y}}},...u}=io(t,e),d={x:n,y:r},f=await bm(e,u),p=ea(ao(i)),g=nN(p);let _=d[g],N=d[p];if(a){const S=g==="y"?"top":"left",w=g==="y"?"bottom":"right",y=_+f[S],E=_-f[w];_=ab(y,_,E)}if(o){const S=p==="y"?"top":"left",w=p==="y"?"bottom":"right",y=N+f[S],E=N-f[w];N=ab(y,N,E)}const b=c.fn({...e,[g]:_,[p]:N});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[g]:a,[p]:o}}}}}},kZ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=e,{offset:c=0,mainAxis:u=!0,crossAxis:d=!0}=io(t,e),f={x:n,y:r},p=ea(i),g=nN(p);let _=f[g],N=f[p];const b=io(c,e),S=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){const E=g==="y"?"height":"width",A=a.reference[g]-a.floating[E]+S.mainAxis,O=a.reference[g]+a.reference[E]-S.mainAxis;_<A?_=A:_>O&&(_=O)}if(d){var w,y;const E=g==="y"?"width":"height",A=["top","left"].includes(ao(i)),O=a.reference[p]-a.floating[E]+(A&&((w=o.offset)==null?void 0:w[p])||0)+(A?0:S.crossAxis),q=a.reference[p]+a.reference[E]+(A?0:((y=o.offset)==null?void 0:y[p])||0)-(A?S.crossAxis:0);N<O?N=O:N>q&&(N=q)}return{[g]:_,[p]:N}}}},TZ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:a,platform:o,elements:c}=e,{apply:u=()=>{},...d}=io(t,e),f=await bm(e,d),p=ao(i),g=oh(i),_=ea(i)==="y",{width:N,height:b}=a.floating;let S,w;p==="top"||p==="bottom"?(S=p,w=g===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(w=p,S=g==="end"?"top":"bottom");const y=b-f.top-f.bottom,E=N-f.left-f.right,A=bl(b-f[S],y),O=bl(N-f[w],E),q=!e.middlewareData.shift;let R=A,V=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(V=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=y),q&&!g){const k=Es(f.left,0),F=Es(f.right,0),D=Es(f.top,0),P=Es(f.bottom,0);_?V=N-2*(k!==0||F!==0?k+F:Es(f.left,f.right)):R=b-2*(D!==0||P!==0?D+P:Es(f.top,f.bottom))}await u({...e,availableWidth:V,availableHeight:R});const U=await o.getDimensions(c.floating);return N!==U.width||b!==U.height?{reset:{rects:!0}}:{}}}};function Ey(){return typeof window<"u"}function lh(t){return mM(t)?(t.nodeName||"").toLowerCase():"#document"}function Rs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _a(t){var e;return(e=(mM(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function mM(t){return Ey()?t instanceof Node||t instanceof Rs(t).Node:!1}function Ii(t){return Ey()?t instanceof Element||t instanceof Rs(t).Element:!1}function ga(t){return Ey()?t instanceof HTMLElement||t instanceof Rs(t).HTMLElement:!1}function KC(t){return!Ey()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Rs(t).ShadowRoot}function ip(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ai(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function PZ(t){return["table","td","th"].includes(lh(t))}function Cy(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function iN(t){const e=aN(),n=Ii(t)?Ai(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function IZ(t){let e=jl(t);for(;ga(e)&&!Md(e);){if(iN(e))return e;if(Cy(e))return null;e=jl(e)}return null}function aN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Md(t){return["html","body","#document"].includes(lh(t))}function Ai(t){return Rs(t).getComputedStyle(t)}function ky(t){return Ii(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function jl(t){if(lh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||KC(t)&&t.host||_a(t);return KC(e)?e.host:e}function pM(t){const e=jl(t);return Md(e)?t.ownerDocument?t.ownerDocument.body:t.body:ga(e)&&ip(e)?e:pM(e)}function jm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=pM(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),o=Rs(i);if(a){const c=lb(o);return e.concat(o,o.visualViewport||[],ip(i)?i:[],c&&n?jm(c):[])}return e.concat(i,jm(i,[],n))}function lb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function gM(t){const e=Ai(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ga(t),a=i?t.offsetWidth:n,o=i?t.offsetHeight:r,c=nx(n)!==a||nx(r)!==o;return c&&(n=a,r=o),{width:n,height:r,$:c}}function oN(t){return Ii(t)?t:t.contextElement}function ud(t){const e=oN(t);if(!ga(e))return ua(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=gM(e);let o=(a?nx(n.width):n.width)/r,c=(a?nx(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const AZ=ua(0);function vM(t){const e=Rs(t);return!aN()||!e.visualViewport?AZ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function RZ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Rs(t)?!1:e}function Oc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=oN(t);let o=ua(1);e&&(r?Ii(r)&&(o=ud(r)):o=ud(t));const c=RZ(a,n,r)?vM(a):ua(0);let u=(i.left+c.x)/o.x,d=(i.top+c.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(a){const g=Rs(a),_=r&&Ii(r)?Rs(r):r;let N=g,b=lb(N);for(;b&&r&&_!==N;){const S=ud(b),w=b.getBoundingClientRect(),y=Ai(b),E=w.left+(b.clientLeft+parseFloat(y.paddingLeft))*S.x,A=w.top+(b.clientTop+parseFloat(y.paddingTop))*S.y;u*=S.x,d*=S.y,f*=S.x,p*=S.y,u+=E,d+=A,N=Rs(b),b=lb(N)}}return sx({width:f,height:p,x:u,y:d})}function lN(t,e){const n=ky(t).scrollLeft;return e?e.left+n:Oc(_a(t)).left+n}function xM(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:lN(t,r)),a=r.top+e.scrollTop;return{x:i,y:a}}function MZ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",o=_a(r),c=e?Cy(e.floating):!1;if(r===o||c&&a)return n;let u={scrollLeft:0,scrollTop:0},d=ua(1);const f=ua(0),p=ga(r);if((p||!p&&!a)&&((lh(r)!=="body"||ip(o))&&(u=ky(r)),ga(r))){const _=Oc(r);d=ud(r),f.x=_.x+r.clientLeft,f.y=_.y+r.clientTop}const g=o&&!p&&!a?xM(o,u,!0):ua(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+f.x+g.x,y:n.y*d.y-u.scrollTop*d.y+f.y+g.y}}function OZ(t){return Array.from(t.getClientRects())}function DZ(t){const e=_a(t),n=ky(t),r=t.ownerDocument.body,i=Es(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Es(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+lN(t);const c=-n.scrollTop;return Ai(r).direction==="rtl"&&(o+=Es(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:c}}function LZ(t,e){const n=Rs(t),r=_a(t),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,c=0,u=0;if(i){a=i.width,o=i.height;const d=aN();(!d||d&&e==="fixed")&&(c=i.offsetLeft,u=i.offsetTop)}return{width:a,height:o,x:c,y:u}}function FZ(t,e){const n=Oc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=ga(t)?ud(t):ua(1),o=t.clientWidth*a.x,c=t.clientHeight*a.y,u=i*a.x,d=r*a.y;return{width:o,height:c,x:u,y:d}}function ZC(t,e,n){let r;if(e==="viewport")r=LZ(t,n);else if(e==="document")r=DZ(_a(t));else if(Ii(e))r=FZ(e,n);else{const i=vM(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return sx(r)}function yM(t,e){const n=jl(t);return n===e||!Ii(n)||Md(n)?!1:Ai(n).position==="fixed"||yM(n,e)}function VZ(t,e){const n=e.get(t);if(n)return n;let r=jm(t,[],!1).filter(c=>Ii(c)&&lh(c)!=="body"),i=null;const a=Ai(t).position==="fixed";let o=a?jl(t):t;for(;Ii(o)&&!Md(o);){const c=Ai(o),u=iN(o);!u&&c.position==="fixed"&&(i=null),(a?!u&&!i:!u&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ip(o)&&!u&&yM(t,o))?r=r.filter(f=>f!==o):i=c,o=jl(o)}return e.set(t,r),r}function zZ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Cy(e)?[]:VZ(e,this._c):[].concat(n),r],c=o[0],u=o.reduce((d,f)=>{const p=ZC(e,f,i);return d.top=Es(p.top,d.top),d.right=bl(p.right,d.right),d.bottom=bl(p.bottom,d.bottom),d.left=Es(p.left,d.left),d},ZC(e,c,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function UZ(t){const{width:e,height:n}=gM(t);return{width:e,height:n}}function $Z(t,e,n){const r=ga(e),i=_a(e),a=n==="fixed",o=Oc(t,!0,a,e);let c={scrollLeft:0,scrollTop:0};const u=ua(0);function d(){u.x=lN(i)}if(r||!r&&!a)if((lh(e)!=="body"||ip(i))&&(c=ky(e)),r){const _=Oc(e,!0,a,e);u.x=_.x+e.clientLeft,u.y=_.y+e.clientTop}else i&&d();a&&!r&&i&&d();const f=i&&!r&&!a?xM(i,c):ua(0),p=o.left+c.scrollLeft-u.x-f.x,g=o.top+c.scrollTop-u.y-f.y;return{x:p,y:g,width:o.width,height:o.height}}function c_(t){return Ai(t).position==="static"}function YC(t,e){if(!ga(t)||Ai(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return _a(t)===n&&(n=n.ownerDocument.body),n}function _M(t,e){const n=Rs(t);if(Cy(t))return n;if(!ga(t)){let i=jl(t);for(;i&&!Md(i);){if(Ii(i)&&!c_(i))return i;i=jl(i)}return n}let r=YC(t,e);for(;r&&PZ(r)&&c_(r);)r=YC(r,e);return r&&Md(r)&&c_(r)&&!iN(r)?n:r||IZ(t)||n}const BZ=async function(t){const e=this.getOffsetParent||_M,n=this.getDimensions,r=await n(t.floating);return{reference:$Z(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function qZ(t){return Ai(t).direction==="rtl"}const WZ={convertOffsetParentRelativeRectToViewportRelativeRect:MZ,getDocumentElement:_a,getClippingRect:zZ,getOffsetParent:_M,getElementRects:BZ,getClientRects:OZ,getDimensions:UZ,getScale:ud,isElement:Ii,isRTL:qZ};function wM(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function HZ(t,e){let n=null,r;const i=_a(t);function a(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function o(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),a();const d=t.getBoundingClientRect(),{left:f,top:p,width:g,height:_}=d;if(c||e(),!g||!_)return;const N=yg(p),b=yg(i.clientWidth-(f+g)),S=yg(i.clientHeight-(p+_)),w=yg(f),E={rootMargin:-N+"px "+-b+"px "+-S+"px "+-w+"px",threshold:Es(0,bl(1,u))||1};let A=!0;function O(q){const R=q[0].intersectionRatio;if(R!==u){if(!A)return o();R?o(!1,R):r=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!wM(d,t.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(O,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(O,E)}n.observe(t)}return o(!0),a}function GZ(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=oN(t),f=i||a?[...d?jm(d):[],...jm(e)]:[];f.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),a&&w.addEventListener("resize",n)});const p=d&&c?HZ(d,n):null;let g=-1,_=null;o&&(_=new ResizeObserver(w=>{let[y]=w;y&&y.target===d&&_&&(_.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var E;(E=_)==null||E.observe(e)})),n()}),d&&!u&&_.observe(d),_.observe(e));let N,b=u?Oc(t):null;u&&S();function S(){const w=Oc(t);b&&!wM(b,w)&&n(),b=w,N=requestAnimationFrame(S)}return n(),()=>{var w;f.forEach(y=>{i&&y.removeEventListener("scroll",n),a&&y.removeEventListener("resize",n)}),p==null||p(),(w=_)==null||w.disconnect(),_=null,u&&cancelAnimationFrame(N)}}const KZ=EZ,ZZ=CZ,YZ=jZ,QZ=TZ,XZ=NZ,QC=bZ,JZ=kZ,eY=(t,e,n)=>{const r=new Map,i={platform:WZ,...n},a={...i.platform,_c:r};return wZ(t,e,{...i,platform:a})};var tY=typeof document<"u",nY=function(){},Jg=tY?x.useLayoutEffect:nY;function ix(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!ix(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!ix(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function bM(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function XC(t,e){const n=bM(t);return Math.round(e*n)/n}function u_(t){const e=x.useRef(t);return Jg(()=>{e.current=t}),e}function rY(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:c=!0,whileElementsMounted:u,open:d}=t,[f,p]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,_]=x.useState(r);ix(g,r)||_(r);const[N,b]=x.useState(null),[S,w]=x.useState(null),y=x.useCallback(I=>{I!==q.current&&(q.current=I,b(I))},[]),E=x.useCallback(I=>{I!==R.current&&(R.current=I,w(I))},[]),A=a||N,O=o||S,q=x.useRef(null),R=x.useRef(null),V=x.useRef(f),U=u!=null,k=u_(u),F=u_(i),D=u_(d),P=x.useCallback(()=>{if(!q.current||!R.current)return;const I={placement:e,strategy:n,middleware:g};F.current&&(I.platform=F.current),eY(q.current,R.current,I).then(z=>{const B={...z,isPositioned:D.current!==!1};H.current&&!ix(V.current,B)&&(V.current=B,Qd.flushSync(()=>{p(B)}))})},[g,e,n,F,D]);Jg(()=>{d===!1&&V.current.isPositioned&&(V.current.isPositioned=!1,p(I=>({...I,isPositioned:!1})))},[d]);const H=x.useRef(!1);Jg(()=>(H.current=!0,()=>{H.current=!1}),[]),Jg(()=>{if(A&&(q.current=A),O&&(R.current=O),A&&O){if(k.current)return k.current(A,O,P);P()}},[A,O,P,k,U]);const ee=x.useMemo(()=>({reference:q,floating:R,setReference:y,setFloating:E}),[y,E]),Z=x.useMemo(()=>({reference:A,floating:O}),[A,O]),K=x.useMemo(()=>{const I={position:n,left:0,top:0};if(!Z.floating)return I;const z=XC(Z.floating,f.x),B=XC(Z.floating,f.y);return c?{...I,transform:"translate("+z+"px, "+B+"px)",...bM(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:B}},[n,c,Z.floating,f.x,f.y]);return x.useMemo(()=>({...f,update:P,refs:ee,elements:Z,floatingStyles:K}),[f,P,ee,Z,K])}const sY=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?QC({element:r.current,padding:i}).fn(n):{}:r?QC({element:r,padding:i}).fn(n):{}}}},iY=(t,e)=>({...KZ(t),options:[t,e]}),aY=(t,e)=>({...ZZ(t),options:[t,e]}),oY=(t,e)=>({...JZ(t),options:[t,e]}),lY=(t,e)=>({...YZ(t),options:[t,e]}),cY=(t,e)=>({...QZ(t),options:[t,e]}),uY=(t,e)=>({...XZ(t),options:[t,e]}),dY=(t,e)=>({...sY(t),options:[t,e]});var hY="Arrow",jM=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...a}=t;return s.jsx(Ze.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});jM.displayName=hY;var fY=jM;function Ty(t){const[e,n]=x.useState(void 0);return Bn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,c;if("borderBoxSize"in a){const u=a.borderBoxSize,d=Array.isArray(u)?u[0]:u;o=d.inlineSize,c=d.blockSize}else o=t.offsetWidth,c=t.offsetHeight;n({width:o,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var cN="Popper",[NM,ch]=Sr(cN),[mY,SM]=NM(cN),EM=t=>{const{__scopePopper:e,children:n}=t,[r,i]=x.useState(null);return s.jsx(mY,{scope:e,anchor:r,onAnchorChange:i,children:n})};EM.displayName=cN;var CM="PopperAnchor",kM=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,a=SM(CM,n),o=x.useRef(null),c=ht(e,o);return x.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(Ze.div,{...i,ref:c})});kM.displayName=CM;var uN="PopperContent",[pY,gY]=NM(uN),TM=x.forwardRef((t,e)=>{var Ae,se,te,ie,Y,oe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:g=!1,updatePositionStrategy:_="optimized",onPlaced:N,...b}=t,S=SM(uN,n),[w,y]=x.useState(null),E=ht(e,pe=>y(pe)),[A,O]=x.useState(null),q=Ty(A),R=(q==null?void 0:q.width)??0,V=(q==null?void 0:q.height)??0,U=r+(a!=="center"?"-"+a:""),k=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},F=Array.isArray(d)?d:[d],D=F.length>0,P={padding:k,boundary:F.filter(xY),altBoundary:D},{refs:H,floatingStyles:ee,placement:Z,isPositioned:K,middlewareData:I}=rY({strategy:"fixed",placement:U,whileElementsMounted:(...pe)=>GZ(...pe,{animationFrame:_==="always"}),elements:{reference:S.anchor},middleware:[iY({mainAxis:i+V,alignmentAxis:o}),u&&aY({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?oY():void 0,...P}),u&&lY({...P}),cY({...P,apply:({elements:pe,rects:Ce,availableWidth:we,availableHeight:ne})=>{const{width:_e,height:be}=Ce.reference,We=pe.floating.style;We.setProperty("--radix-popper-available-width",`${we}px`),We.setProperty("--radix-popper-available-height",`${ne}px`),We.setProperty("--radix-popper-anchor-width",`${_e}px`),We.setProperty("--radix-popper-anchor-height",`${be}px`)}}),A&&dY({element:A,padding:c}),yY({arrowWidth:R,arrowHeight:V}),g&&uY({strategy:"referenceHidden",...P})]}),[z,B]=AM(Z),X=mr(N);Bn(()=>{K&&(X==null||X())},[K,X]);const ue=(Ae=I.arrow)==null?void 0:Ae.x,ge=(se=I.arrow)==null?void 0:se.y,Ee=((te=I.arrow)==null?void 0:te.centerOffset)!==0,[De,$e]=x.useState();return Bn(()=>{w&&$e(window.getComputedStyle(w).zIndex)},[w]),s.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:K?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:De,"--radix-popper-transform-origin":[(ie=I.transformOrigin)==null?void 0:ie.x,(Y=I.transformOrigin)==null?void 0:Y.y].join(" "),...((oe=I.hide)==null?void 0:oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx(pY,{scope:n,placedSide:z,onArrowChange:O,arrowX:ue,arrowY:ge,shouldHideArrow:Ee,children:s.jsx(Ze.div,{"data-side":z,"data-align":B,...b,ref:E,style:{...b.style,animation:K?void 0:"none"}})})})});TM.displayName=uN;var PM="PopperArrow",vY={top:"bottom",right:"left",bottom:"top",left:"right"},IM=x.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,a=gY(PM,r),o=vY[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(fY,{...i,ref:n,style:{...i.style,display:"block"}})})});IM.displayName=PM;function xY(t){return t!==null}var yY=t=>({name:"transformOrigin",options:t,fn(e){var S,w,y;const{placement:n,rects:r,middlewareData:i}=e,o=((S=i.arrow)==null?void 0:S.centerOffset)!==0,c=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[d,f]=AM(n),p={start:"0%",center:"50%",end:"100%"}[f],g=(((w=i.arrow)==null?void 0:w.x)??0)+c/2,_=(((y=i.arrow)==null?void 0:y.y)??0)+u/2;let N="",b="";return d==="bottom"?(N=o?p:`${g}px`,b=`${-u}px`):d==="top"?(N=o?p:`${g}px`,b=`${r.floating.height+u}px`):d==="right"?(N=`${-u}px`,b=o?p:`${_}px`):d==="left"&&(N=`${r.floating.width+u}px`,b=o?p:`${_}px`),{data:{x:N,y:b}}}});function AM(t){const[e,n="center"]=t.split("-");return[e,n]}var dN=EM,Py=kM,hN=TM,fN=IM,_Y="Portal",ap=x.forwardRef((t,e)=>{var c;const{container:n,...r}=t,[i,a]=x.useState(!1);Bn(()=>a(!0),[]);const o=n||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?m9.createPortal(s.jsx(Ze.div,{...r,ref:e}),o):null});ap.displayName=_Y;function wY(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var Er=t=>{const{present:e,children:n}=t,r=bY(e),i=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),a=ht(r.ref,jY(i));return typeof n=="function"||r.isPresent?x.cloneElement(i,{ref:a}):null};Er.displayName="Presence";function bY(t){const[e,n]=x.useState(),r=x.useRef(null),i=x.useRef(t),a=x.useRef("none"),o=t?"mounted":"unmounted",[c,u]=wY(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const d=_g(r.current);a.current=c==="mounted"?d:"none"},[c]),Bn(()=>{const d=r.current,f=i.current;if(f!==t){const g=a.current,_=_g(d);t?u("MOUNT"):_==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(f&&g!==_?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),Bn(()=>{if(e){let d;const f=e.ownerDocument.defaultView??window,p=_=>{const b=_g(r.current).includes(_.animationName);if(_.target===e&&b&&(u("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",d=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},g=_=>{_.target===e&&(a.current=_g(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{f.clearTimeout(d),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:x.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function _g(t){return(t==null?void 0:t.animationName)||"none"}function jY(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var d_="rovingFocusGroup.onEntryFocus",NY={bubbles:!1,cancelable:!0},op="RovingFocusGroup",[cb,RM,SY]=np(op),[EY,Iy]=Sr(op,[SY]),[CY,kY]=EY(op),MM=x.forwardRef((t,e)=>s.jsx(cb.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(cb.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(TY,{...t,ref:e})})}));MM.displayName=op;var TY=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...p}=t,g=x.useRef(null),_=ht(e,g),N=Yc(a),[b,S]=Os({prop:o,defaultProp:c??null,onChange:u,caller:op}),[w,y]=x.useState(!1),E=mr(d),A=RM(n),O=x.useRef(!1),[q,R]=x.useState(0);return x.useEffect(()=>{const V=g.current;if(V)return V.addEventListener(d_,E),()=>V.removeEventListener(d_,E)},[E]),s.jsx(CY,{scope:n,orientation:r,dir:N,loop:i,currentTabStopId:b,onItemFocus:x.useCallback(V=>S(V),[S]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>R(V=>V+1),[]),onFocusableItemRemove:x.useCallback(()=>R(V=>V-1),[]),children:s.jsx(Ze.div,{tabIndex:w||q===0?-1:0,"data-orientation":r,...p,ref:_,style:{outline:"none",...t.style},onMouseDown:Oe(t.onMouseDown,()=>{O.current=!0}),onFocus:Oe(t.onFocus,V=>{const U=!O.current;if(V.target===V.currentTarget&&U&&!w){const k=new CustomEvent(d_,NY);if(V.currentTarget.dispatchEvent(k),!k.defaultPrevented){const F=A().filter(Z=>Z.focusable),D=F.find(Z=>Z.active),P=F.find(Z=>Z.id===b),ee=[D,P,...F].filter(Boolean).map(Z=>Z.ref.current);LM(ee,f)}}O.current=!1}),onBlur:Oe(t.onBlur,()=>y(!1))})})}),OM="RovingFocusGroupItem",DM=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...c}=t,u=As(),d=a||u,f=kY(OM,n),p=f.currentTabStopId===d,g=RM(n),{onFocusableItemAdd:_,onFocusableItemRemove:N,currentTabStopId:b}=f;return x.useEffect(()=>{if(r)return _(),()=>N()},[r,_,N]),s.jsx(cb.ItemSlot,{scope:n,id:d,focusable:r,active:i,children:s.jsx(Ze.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...c,ref:e,onMouseDown:Oe(t.onMouseDown,S=>{r?f.onItemFocus(d):S.preventDefault()}),onFocus:Oe(t.onFocus,()=>f.onItemFocus(d)),onKeyDown:Oe(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){f.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const w=AY(S,f.orientation,f.dir);if(w!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let E=g().filter(A=>A.focusable).map(A=>A.ref.current);if(w==="last")E.reverse();else if(w==="prev"||w==="next"){w==="prev"&&E.reverse();const A=E.indexOf(S.currentTarget);E=f.loop?RY(E,A+1):E.slice(A+1)}setTimeout(()=>LM(E))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:b!=null}):o})})});DM.displayName=OM;var PY={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function IY(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function AY(t,e,n){const r=IY(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return PY[r]}function LM(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function RY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var FM=MM,VM=DM,MY=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Cu=new WeakMap,wg=new WeakMap,bg={},h_=0,zM=function(t){return t&&(t.host||zM(t.parentNode))},OY=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=zM(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},DY=function(t,e,n,r){var i=OY(e,Array.isArray(t)?t:[t]);bg[n]||(bg[n]=new WeakMap);var a=bg[n],o=[],c=new Set,u=new Set(i),d=function(p){!p||c.has(p)||(c.add(p),d(p.parentNode))};i.forEach(d);var f=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(g){if(c.has(g))f(g);else try{var _=g.getAttribute(r),N=_!==null&&_!=="false",b=(Cu.get(g)||0)+1,S=(a.get(g)||0)+1;Cu.set(g,b),a.set(g,S),o.push(g),b===1&&N&&wg.set(g,!0),S===1&&g.setAttribute(n,"true"),N||g.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",g,w)}})};return f(e),c.clear(),h_++,function(){o.forEach(function(p){var g=Cu.get(p)-1,_=a.get(p)-1;Cu.set(p,g),a.set(p,_),g||(wg.has(p)||p.removeAttribute(r),wg.delete(p)),_||p.removeAttribute(n)}),h_--,h_||(Cu=new WeakMap,Cu=new WeakMap,wg=new WeakMap,bg={})}},Ay=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=MY(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),DY(r,i,n,"aria-hidden")):function(){return null}},ev="right-scroll-bar-position",tv="width-before-scroll-bar",LY="with-scroll-bars-hidden",FY="--removed-body-scroll-bar-size";function f_(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function VY(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var zY=typeof window<"u"?x.useLayoutEffect:x.useEffect,JC=new WeakMap;function UY(t,e){var n=VY(null,function(r){return t.forEach(function(i){return f_(i,r)})});return zY(function(){var r=JC.get(n);if(r){var i=new Set(r),a=new Set(t),o=n.current;i.forEach(function(c){a.has(c)||f_(c,null)}),a.forEach(function(c){i.has(c)||f_(c,o)})}JC.set(n,t)},[t]),n}function $Y(t){return t}function BY(t,e){e===void 0&&(e=$Y);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(c){return c!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(c){return a(c)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var c=n;n=[],c.forEach(a),o=n}var u=function(){var f=o;o=[],f.forEach(a)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(f){o.push(f),d()},filter:function(f){return o=o.filter(f),n}}}};return i}function qY(t){t===void 0&&(t={});var e=BY(null);return e.options=Zi({async:!0,ssr:!1},t),e}var UM=function(t){var e=t.sideCar,n=Vm(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,Zi({},n))};UM.isSideCarExport=!0;function WY(t,e){return t.useMedium(e),UM}var $M=qY(),m_=function(){},Ry=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:m_,onWheelCapture:m_,onTouchMoveCapture:m_}),i=r[0],a=r[1],o=t.forwardProps,c=t.children,u=t.className,d=t.removeScrollBar,f=t.enabled,p=t.shards,g=t.sideCar,_=t.noRelative,N=t.noIsolation,b=t.inert,S=t.allowPinchZoom,w=t.as,y=w===void 0?"div":w,E=t.gapMode,A=Vm(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=g,q=UY([n,e]),R=Zi(Zi({},A),i);return x.createElement(x.Fragment,null,f&&x.createElement(O,{sideCar:$M,removeScrollBar:d,shards:p,noRelative:_,noIsolation:N,inert:b,setCallbacks:a,allowPinchZoom:!!S,lockRef:n,gapMode:E}),o?x.cloneElement(x.Children.only(c),Zi(Zi({},R),{ref:q})):x.createElement(y,Zi({},R,{className:u,ref:q}),c))});Ry.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ry.classNames={fullWidth:tv,zeroRight:ev};var HY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function GY(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=HY();return e&&t.setAttribute("nonce",e),t}function KY(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function ZY(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var YY=function(){var t=0,e=null;return{add:function(n){t==0&&(e=GY())&&(KY(e,n),ZY(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},QY=function(){var t=YY();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},BM=function(){var t=QY(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},XY={left:0,top:0,right:0,gap:0},p_=function(t){return parseInt(t||"",10)||0},JY=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[p_(n),p_(r),p_(i)]},eQ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return XY;var e=JY(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},tQ=BM(),dd="data-scroll-locked",nQ=function(t,e,n,r){var i=t.left,a=t.top,o=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(LY,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(dd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ev,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(tv,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(ev," .").concat(ev,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(tv," .").concat(tv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(dd,`] {
    `).concat(FY,": ").concat(c,`px;
  }
`)},ek=function(){var t=parseInt(document.body.getAttribute(dd)||"0",10);return isFinite(t)?t:0},rQ=function(){x.useEffect(function(){return document.body.setAttribute(dd,(ek()+1).toString()),function(){var t=ek()-1;t<=0?document.body.removeAttribute(dd):document.body.setAttribute(dd,t.toString())}},[])},sQ=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;rQ();var a=x.useMemo(function(){return eQ(i)},[i]);return x.createElement(tQ,{styles:nQ(a,!e,i,n?"":"!important")})},ub=!1;if(typeof window<"u")try{var jg=Object.defineProperty({},"passive",{get:function(){return ub=!0,!0}});window.addEventListener("test",jg,jg),window.removeEventListener("test",jg,jg)}catch{ub=!1}var ku=ub?{passive:!1}:!1,iQ=function(t){return t.tagName==="TEXTAREA"},qM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!iQ(t)&&n[e]==="visible")},aQ=function(t){return qM(t,"overflowY")},oQ=function(t){return qM(t,"overflowX")},tk=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=WM(t,r);if(i){var a=HM(t,r),o=a[1],c=a[2];if(o>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},lQ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},cQ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},WM=function(t,e){return t==="v"?aQ(e):oQ(e)},HM=function(t,e){return t==="v"?lQ(e):cQ(e)},uQ=function(t,e){return t==="h"&&e==="rtl"?-1:1},dQ=function(t,e,n,r,i){var a=uQ(t,window.getComputedStyle(e).direction),o=a*r,c=n.target,u=e.contains(c),d=!1,f=o>0,p=0,g=0;do{if(!c)break;var _=HM(t,c),N=_[0],b=_[1],S=_[2],w=b-S-a*N;(N||w)&&WM(t,c)&&(p+=w,g+=N);var y=c.parentNode;c=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(f&&Math.abs(p)<1||!f&&Math.abs(g)<1)&&(d=!0),d},Ng=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},nk=function(t){return[t.deltaX,t.deltaY]},rk=function(t){return t&&"current"in t?t.current:t},hQ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},fQ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},mQ=0,Tu=[];function pQ(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(mQ++)[0],a=x.useState(BM)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var b=GU([t.lockRef.current],(t.shards||[]).map(rk),!0).filter(Boolean);return b.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),b.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var c=x.useCallback(function(b,S){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var w=Ng(b),y=n.current,E="deltaX"in b?b.deltaX:y[0]-w[0],A="deltaY"in b?b.deltaY:y[1]-w[1],O,q=b.target,R=Math.abs(E)>Math.abs(A)?"h":"v";if("touches"in b&&R==="h"&&q.type==="range")return!1;var V=tk(R,q);if(!V)return!0;if(V?O=R:(O=R==="v"?"h":"v",V=tk(R,q)),!V)return!1;if(!r.current&&"changedTouches"in b&&(E||A)&&(r.current=O),!O)return!0;var U=r.current||O;return dQ(U,S,b,U==="h"?E:A)},[]),u=x.useCallback(function(b){var S=b;if(!(!Tu.length||Tu[Tu.length-1]!==a)){var w="deltaY"in S?nk(S):Ng(S),y=e.current.filter(function(O){return O.name===S.type&&(O.target===S.target||S.target===O.shadowParent)&&hQ(O.delta,w)})[0];if(y&&y.should){S.cancelable&&S.preventDefault();return}if(!y){var E=(o.current.shards||[]).map(rk).filter(Boolean).filter(function(O){return O.contains(S.target)}),A=E.length>0?c(S,E[0]):!o.current.noIsolation;A&&S.cancelable&&S.preventDefault()}}},[]),d=x.useCallback(function(b,S,w,y){var E={name:b,delta:S,target:w,should:y,shadowParent:gQ(w)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(A){return A!==E})},1)},[]),f=x.useCallback(function(b){n.current=Ng(b),r.current=void 0},[]),p=x.useCallback(function(b){d(b.type,nk(b),b.target,c(b,t.lockRef.current))},[]),g=x.useCallback(function(b){d(b.type,Ng(b),b.target,c(b,t.lockRef.current))},[]);x.useEffect(function(){return Tu.push(a),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:g}),document.addEventListener("wheel",u,ku),document.addEventListener("touchmove",u,ku),document.addEventListener("touchstart",f,ku),function(){Tu=Tu.filter(function(b){return b!==a}),document.removeEventListener("wheel",u,ku),document.removeEventListener("touchmove",u,ku),document.removeEventListener("touchstart",f,ku)}},[]);var _=t.removeScrollBar,N=t.inert;return x.createElement(x.Fragment,null,N?x.createElement(a,{styles:fQ(i)}):null,_?x.createElement(sQ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function gQ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const vQ=WY($M,pQ);var lp=x.forwardRef(function(t,e){return x.createElement(Ry,Zi({},t,{ref:e,sideCar:vQ}))});lp.classNames=Ry.classNames;var db=["Enter"," "],xQ=["ArrowDown","PageUp","Home"],GM=["ArrowUp","PageDown","End"],yQ=[...xQ,...GM],_Q={ltr:[...db,"ArrowRight"],rtl:[...db,"ArrowLeft"]},wQ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},cp="Menu",[Nm,bQ,jQ]=np(cp),[Qc,KM]=Sr(cp,[jQ,ch,Iy]),My=ch(),ZM=Iy(),[NQ,Xc]=Qc(cp),[SQ,up]=Qc(cp),YM=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=t,c=My(e),[u,d]=x.useState(null),f=x.useRef(!1),p=mr(a),g=Yc(i);return x.useEffect(()=>{const _=()=>{f.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>f.current=!1;return document.addEventListener("keydown",_,{capture:!0}),()=>{document.removeEventListener("keydown",_,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),s.jsx(dN,{...c,children:s.jsx(NQ,{scope:e,open:n,onOpenChange:p,content:u,onContentChange:d,children:s.jsx(SQ,{scope:e,onClose:x.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:f,dir:g,modal:o,children:r})})})};YM.displayName=cp;var EQ="MenuAnchor",mN=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=My(n);return s.jsx(Py,{...i,...r,ref:e})});mN.displayName=EQ;var pN="MenuPortal",[CQ,QM]=Qc(pN,{forceMount:void 0}),XM=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,a=Xc(pN,e);return s.jsx(CQ,{scope:e,forceMount:n,children:s.jsx(Er,{present:n||a.open,children:s.jsx(ap,{asChild:!0,container:i,children:r})})})};XM.displayName=pN;var ni="MenuContent",[kQ,gN]=Qc(ni),JM=x.forwardRef((t,e)=>{const n=QM(ni,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=Xc(ni,t.__scopeMenu),o=up(ni,t.__scopeMenu);return s.jsx(Nm.Provider,{scope:t.__scopeMenu,children:s.jsx(Er,{present:r||a.open,children:s.jsx(Nm.Slot,{scope:t.__scopeMenu,children:o.modal?s.jsx(TQ,{...i,ref:e}):s.jsx(PQ,{...i,ref:e})})})})}),TQ=x.forwardRef((t,e)=>{const n=Xc(ni,t.__scopeMenu),r=x.useRef(null),i=ht(e,r);return x.useEffect(()=>{const a=r.current;if(a)return Ay(a)},[]),s.jsx(vN,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Oe(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),PQ=x.forwardRef((t,e)=>{const n=Xc(ni,t.__scopeMenu);return s.jsx(vN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),IQ=wl("MenuContent.ScrollLock"),vN=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:g,onDismiss:_,disableOutsideScroll:N,...b}=t,S=Xc(ni,n),w=up(ni,n),y=My(n),E=ZM(n),A=bQ(n),[O,q]=x.useState(null),R=x.useRef(null),V=ht(e,R,S.onContentChange),U=x.useRef(0),k=x.useRef(""),F=x.useRef(0),D=x.useRef(null),P=x.useRef("right"),H=x.useRef(0),ee=N?lp:x.Fragment,Z=N?{as:IQ,allowPinchZoom:!0}:void 0,K=z=>{var Ae,se;const B=k.current+z,X=A().filter(te=>!te.disabled),ue=document.activeElement,ge=(Ae=X.find(te=>te.ref.current===ue))==null?void 0:Ae.textValue,Ee=X.map(te=>te.textValue),De=BQ(Ee,B,ge),$e=(se=X.find(te=>te.textValue===De))==null?void 0:se.ref.current;(function te(ie){k.current=ie,window.clearTimeout(U.current),ie!==""&&(U.current=window.setTimeout(()=>te(""),1e3))})(B),$e&&setTimeout(()=>$e.focus())};x.useEffect(()=>()=>window.clearTimeout(U.current),[]),Sy();const I=x.useCallback(z=>{var X,ue;return P.current===((X=D.current)==null?void 0:X.side)&&WQ(z,(ue=D.current)==null?void 0:ue.area)},[]);return s.jsx(kQ,{scope:n,searchRef:k,onItemEnter:x.useCallback(z=>{I(z)&&z.preventDefault()},[I]),onItemLeave:x.useCallback(z=>{var B;I(z)||((B=R.current)==null||B.focus(),q(null))},[I]),onTriggerLeave:x.useCallback(z=>{I(z)&&z.preventDefault()},[I]),pointerGraceTimerRef:F,onPointerGraceIntentChange:x.useCallback(z=>{D.current=z},[]),children:s.jsx(ee,{...Z,children:s.jsx(sp,{asChild:!0,trapped:i,onMountAutoFocus:Oe(a,z=>{var B;z.preventDefault(),(B=R.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(rp,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:g,onDismiss:_,children:s.jsx(FM,{asChild:!0,...E,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:q,onEntryFocus:Oe(u,z=>{w.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(hN,{role:"menu","aria-orientation":"vertical","data-state":pO(S.open),"data-radix-menu-content":"",dir:w.dir,...y,...b,ref:V,style:{outline:"none",...b.style},onKeyDown:Oe(b.onKeyDown,z=>{const X=z.target.closest("[data-radix-menu-content]")===z.currentTarget,ue=z.ctrlKey||z.altKey||z.metaKey,ge=z.key.length===1;X&&(z.key==="Tab"&&z.preventDefault(),!ue&&ge&&K(z.key));const Ee=R.current;if(z.target!==Ee||!yQ.includes(z.key))return;z.preventDefault();const $e=A().filter(Ae=>!Ae.disabled).map(Ae=>Ae.ref.current);GM.includes(z.key)&&$e.reverse(),UQ($e)}),onBlur:Oe(t.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(U.current),k.current="")}),onPointerMove:Oe(t.onPointerMove,Sm(z=>{const B=z.target,X=H.current!==z.clientX;if(z.currentTarget.contains(B)&&X){const ue=z.clientX>H.current?"right":"left";P.current=ue,H.current=z.clientX}}))})})})})})})});JM.displayName=ni;var AQ="MenuGroup",xN=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Ze.div,{role:"group",...r,ref:e})});xN.displayName=AQ;var RQ="MenuLabel",eO=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Ze.div,{...r,ref:e})});eO.displayName=RQ;var ax="MenuItem",sk="menu.itemSelect",Oy=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,a=x.useRef(null),o=up(ax,t.__scopeMenu),c=gN(ax,t.__scopeMenu),u=ht(e,a),d=x.useRef(!1),f=()=>{const p=a.current;if(!n&&p){const g=new CustomEvent(sk,{bubbles:!0,cancelable:!0});p.addEventListener(sk,_=>r==null?void 0:r(_),{once:!0}),cM(p,g),g.defaultPrevented?d.current=!1:o.onClose()}};return s.jsx(tO,{...i,ref:u,disabled:n,onClick:Oe(t.onClick,f),onPointerDown:p=>{var g;(g=t.onPointerDown)==null||g.call(t,p),d.current=!0},onPointerUp:Oe(t.onPointerUp,p=>{var g;d.current||(g=p.currentTarget)==null||g.click()}),onKeyDown:Oe(t.onKeyDown,p=>{const g=c.searchRef.current!=="";n||g&&p.key===" "||db.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Oy.displayName=ax;var tO=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=t,o=gN(ax,n),c=ZM(n),u=x.useRef(null),d=ht(e,u),[f,p]=x.useState(!1),[g,_]=x.useState("");return x.useEffect(()=>{const N=u.current;N&&_((N.textContent??"").trim())},[a.children]),s.jsx(Nm.ItemSlot,{scope:n,disabled:r,textValue:i??g,children:s.jsx(VM,{asChild:!0,...c,focusable:!r,children:s.jsx(Ze.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:Oe(t.onPointerMove,Sm(N=>{r?o.onItemLeave(N):(o.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Oe(t.onPointerLeave,Sm(N=>o.onItemLeave(N))),onFocus:Oe(t.onFocus,()=>p(!0)),onBlur:Oe(t.onBlur,()=>p(!1))})})})}),MQ="MenuCheckboxItem",nO=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return s.jsx(oO,{scope:t.__scopeMenu,checked:n,children:s.jsx(Oy,{role:"menuitemcheckbox","aria-checked":ox(n)?"mixed":n,...i,ref:e,"data-state":_N(n),onSelect:Oe(i.onSelect,()=>r==null?void 0:r(ox(n)?!0:!n),{checkForDefaultPrevented:!1})})})});nO.displayName=MQ;var rO="MenuRadioGroup",[OQ,DQ]=Qc(rO,{value:void 0,onValueChange:()=>{}}),sO=x.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,a=mr(r);return s.jsx(OQ,{scope:t.__scopeMenu,value:n,onValueChange:a,children:s.jsx(xN,{...i,ref:e})})});sO.displayName=rO;var iO="MenuRadioItem",aO=x.forwardRef((t,e)=>{const{value:n,...r}=t,i=DQ(iO,t.__scopeMenu),a=n===i.value;return s.jsx(oO,{scope:t.__scopeMenu,checked:a,children:s.jsx(Oy,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":_N(a),onSelect:Oe(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});aO.displayName=iO;var yN="MenuItemIndicator",[oO,LQ]=Qc(yN,{checked:!1}),lO=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,a=LQ(yN,n);return s.jsx(Er,{present:r||ox(a.checked)||a.checked===!0,children:s.jsx(Ze.span,{...i,ref:e,"data-state":_N(a.checked)})})});lO.displayName=yN;var FQ="MenuSeparator",cO=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Ze.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});cO.displayName=FQ;var VQ="MenuArrow",uO=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=My(n);return s.jsx(fN,{...i,...r,ref:e})});uO.displayName=VQ;var zQ="MenuSub",[Uue,dO]=Qc(zQ),bf="MenuSubTrigger",hO=x.forwardRef((t,e)=>{const n=Xc(bf,t.__scopeMenu),r=up(bf,t.__scopeMenu),i=dO(bf,t.__scopeMenu),a=gN(bf,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=a,d={__scopeMenu:t.__scopeMenu},f=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>f,[f]),x.useEffect(()=>{const p=c.current;return()=>{window.clearTimeout(p),u(null)}},[c,u]),s.jsx(mN,{asChild:!0,...d,children:s.jsx(tO,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":pO(n.open),...t,ref:jy(e,i.onTriggerChange),onClick:p=>{var g;(g=t.onClick)==null||g.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Oe(t.onPointerMove,Sm(p=>{a.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Oe(t.onPointerLeave,Sm(p=>{var _,N;f();const g=(_=n.content)==null?void 0:_.getBoundingClientRect();if(g){const b=(N=n.content)==null?void 0:N.dataset.side,S=b==="right",w=S?-5:5,y=g[S?"left":"right"],E=g[S?"right":"left"];a.onPointerGraceIntentChange({area:[{x:p.clientX+w,y:p.clientY},{x:y,y:g.top},{x:E,y:g.top},{x:E,y:g.bottom},{x:y,y:g.bottom}],side:b}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(p),p.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Oe(t.onKeyDown,p=>{var _;const g=a.searchRef.current!=="";t.disabled||g&&p.key===" "||_Q[r.dir].includes(p.key)&&(n.onOpenChange(!0),(_=n.content)==null||_.focus(),p.preventDefault())})})})});hO.displayName=bf;var fO="MenuSubContent",mO=x.forwardRef((t,e)=>{const n=QM(ni,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=Xc(ni,t.__scopeMenu),o=up(ni,t.__scopeMenu),c=dO(fO,t.__scopeMenu),u=x.useRef(null),d=ht(e,u);return s.jsx(Nm.Provider,{scope:t.__scopeMenu,children:s.jsx(Er,{present:r||a.open,children:s.jsx(Nm.Slot,{scope:t.__scopeMenu,children:s.jsx(vN,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var p;o.isUsingKeyboardRef.current&&((p=u.current)==null||p.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Oe(t.onFocusOutside,f=>{f.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Oe(t.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Oe(t.onKeyDown,f=>{var _;const p=f.currentTarget.contains(f.target),g=wQ[o.dir].includes(f.key);p&&g&&(a.onOpenChange(!1),(_=c.trigger)==null||_.focus(),f.preventDefault())})})})})})});mO.displayName=fO;function pO(t){return t?"open":"closed"}function ox(t){return t==="indeterminate"}function _N(t){return ox(t)?"indeterminate":t?"checked":"unchecked"}function UQ(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function $Q(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function BQ(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=$Q(t,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function qQ(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const c=e[a],u=e[o],d=c.x,f=c.y,p=u.x,g=u.y;f>r!=g>r&&n<(p-d)*(r-f)/(g-f)+d&&(i=!i)}return i}function WQ(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return qQ(n,e)}function Sm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var HQ=YM,GQ=mN,KQ=XM,ZQ=JM,YQ=xN,QQ=eO,XQ=Oy,JQ=nO,eX=sO,tX=aO,nX=lO,rX=cO,sX=uO,iX=hO,aX=mO,Dy="DropdownMenu",[oX,$ue]=Sr(Dy,[KM]),ns=KM(),[lX,gO]=oX(Dy),vO=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:c=!0}=t,u=ns(e),d=x.useRef(null),[f,p]=Os({prop:i,defaultProp:a??!1,onChange:o,caller:Dy});return s.jsx(lX,{scope:e,triggerId:As(),triggerRef:d,contentId:As(),open:f,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(g=>!g),[p]),modal:c,children:s.jsx(HQ,{...u,open:f,onOpenChange:p,dir:r,modal:c,children:n})})};vO.displayName=Dy;var xO="DropdownMenuTrigger",yO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,a=gO(xO,n),o=ns(n);return s.jsx(GQ,{asChild:!0,...o,children:s.jsx(Ze.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:jy(e,a.triggerRef),onPointerDown:Oe(t.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:Oe(t.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});yO.displayName=xO;var cX="DropdownMenuPortal",_O=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ns(e);return s.jsx(KQ,{...r,...n})};_O.displayName=cX;var wO="DropdownMenuContent",bO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=gO(wO,n),a=ns(n),o=x.useRef(!1);return s.jsx(ZQ,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:Oe(t.onCloseAutoFocus,c=>{var u;o.current||(u=i.triggerRef.current)==null||u.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:Oe(t.onInteractOutside,c=>{const u=c.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,f=u.button===2||d;(!i.modal||f)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bO.displayName=wO;var uX="DropdownMenuGroup",dX=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(YQ,{...i,...r,ref:e})});dX.displayName=uX;var hX="DropdownMenuLabel",jO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(QQ,{...i,...r,ref:e})});jO.displayName=hX;var fX="DropdownMenuItem",NO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(XQ,{...i,...r,ref:e})});NO.displayName=fX;var mX="DropdownMenuCheckboxItem",SO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(JQ,{...i,...r,ref:e})});SO.displayName=mX;var pX="DropdownMenuRadioGroup",gX=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(eX,{...i,...r,ref:e})});gX.displayName=pX;var vX="DropdownMenuRadioItem",EO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(tX,{...i,...r,ref:e})});EO.displayName=vX;var xX="DropdownMenuItemIndicator",CO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(nX,{...i,...r,ref:e})});CO.displayName=xX;var yX="DropdownMenuSeparator",kO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(rX,{...i,...r,ref:e})});kO.displayName=yX;var _X="DropdownMenuArrow",wX=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(sX,{...i,...r,ref:e})});wX.displayName=_X;var bX="DropdownMenuSubTrigger",TO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(iX,{...i,...r,ref:e})});TO.displayName=bX;var jX="DropdownMenuSubContent",PO=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ns(n);return s.jsx(aX,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});PO.displayName=jX;var NX=vO,SX=yO,EX=_O,IO=bO,AO=jO,RO=NO,MO=SO,OO=EO,DO=CO,LO=kO,FO=TO,VO=PO;function Rl(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var CX=["color"],kX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,CX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),TX=["color"],wN=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,TX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),PX=["color"],zO=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,PX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),IX=["color"],AX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,IX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),RX=["color"],UO=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,RX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),MX=["color"],OX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,MX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),DX=["color"],LX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,DX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),FX=["color"],VX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Rl(t,FX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});const hb=NX,fb=SX,zX=x.forwardRef(({className:t,inset:e,children:n,...r},i)=>s.jsxs(FO,{ref:i,className:st("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,s.jsx(UO,{className:"ml-auto h-4 w-4"})]}));zX.displayName=FO.displayName;const UX=x.forwardRef(({className:t,...e},n)=>s.jsx(VO,{ref:n,className:st("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));UX.displayName=VO.displayName;const lx=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>s.jsx(EX,{children:s.jsx(IO,{ref:r,sideOffset:e,className:st("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));lx.displayName=IO.displayName;const en=x.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(RO,{ref:r,className:st("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));en.displayName=RO.displayName;const $X=x.forwardRef(({className:t,children:e,checked:n,...r},i)=>s.jsxs(MO,{ref:i,className:st("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(DO,{children:s.jsx(wN,{className:"h-4 w-4"})})}),e]}));$X.displayName=MO.displayName;const BX=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(OO,{ref:r,className:st("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(DO,{children:s.jsx(VX,{className:"h-4 w-4 fill-current"})})}),e]}));BX.displayName=OO.displayName;const qX=x.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(AO,{ref:r,className:st("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));qX.displayName=AO.displayName;const Wi=x.forwardRef(({className:t,...e},n)=>s.jsx(LO,{ref:n,className:st("-mx-1 my-1 h-px bg-muted",t),...e}));Wi.displayName=LO.displayName;var $O={exports:{}},BO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Od=x;function WX(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var HX=typeof Object.is=="function"?Object.is:WX,GX=Od.useState,KX=Od.useEffect,ZX=Od.useLayoutEffect,YX=Od.useDebugValue;function QX(t,e){var n=e(),r=GX({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return ZX(function(){i.value=n,i.getSnapshot=e,g_(i)&&a({inst:i})},[t,n,e]),KX(function(){return g_(i)&&a({inst:i}),t(function(){g_(i)&&a({inst:i})})},[t]),YX(n),n}function g_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!HX(t,n)}catch{return!0}}function XX(t,e){return e()}var JX=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?XX:QX;BO.useSyncExternalStore=Od.useSyncExternalStore!==void 0?Od.useSyncExternalStore:JX;$O.exports=BO;var qO=$O.exports;function eJ(){return qO.useSyncExternalStore(tJ,()=>!0,()=>!1)}function tJ(){return()=>{}}var bN="Avatar",[nJ,Bue]=Sr(bN),[rJ,WO]=nJ(bN),HO=x.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,a]=x.useState("idle");return s.jsx(rJ,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(Ze.span,{...r,ref:e})})});HO.displayName=bN;var GO="AvatarImage",KO=x.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=t,o=WO(GO,n),c=sJ(r,a),u=mr(d=>{i(d),o.onImageLoadingStatusChange(d)});return Bn(()=>{c!=="idle"&&u(c)},[c,u]),c==="loaded"?s.jsx(Ze.img,{...a,ref:e,src:r}):null});KO.displayName=GO;var ZO="AvatarFallback",YO=x.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,a=WO(ZO,n),[o,c]=x.useState(r===void 0);return x.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(u)}},[r]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(Ze.span,{...i,ref:e}):null});YO.displayName=ZO;function ik(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function sJ(t,{referrerPolicy:e,crossOrigin:n}){const r=eJ(),i=x.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[o,c]=x.useState(()=>ik(a,t));return Bn(()=>{c(ik(a,t))},[a,t]),Bn(()=>{const u=p=>()=>{c(p)};if(!a)return;const d=u("loaded"),f=u("error");return a.addEventListener("load",d),a.addEventListener("error",f),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",d),a.removeEventListener("error",f)}},[a,n,e]),o}var QO=HO,XO=KO,JO=YO;const oo=x.forwardRef(({className:t,...e},n)=>s.jsx(QO,{ref:n,className:st("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));oo.displayName=QO.displayName;const lo=x.forwardRef(({className:t,...e},n)=>s.jsx(XO,{ref:n,className:st("aspect-square h-full w-full",t),...e}));lo.displayName=XO.displayName;const co=x.forwardRef(({className:t,...e},n)=>s.jsx(JO,{ref:n,className:st("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));co.displayName=JO.displayName;const iJ=Ny("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function at({className:t,variant:e,...n}){return s.jsx("div",{className:st(iJ({variant:e}),t),...n})}const aJ={},ak=t=>{let e;const n=new Set,r=(f,p)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const _=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(N=>N(e,_))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(aJ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,i,u);return u},oJ=t=>t?ak(t):ak;var eD={exports:{}},tD={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly=x,lJ=qO;function cJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uJ=typeof Object.is=="function"?Object.is:cJ,dJ=lJ.useSyncExternalStore,hJ=Ly.useRef,fJ=Ly.useEffect,mJ=Ly.useMemo,pJ=Ly.useDebugValue;tD.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var a=hJ(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=mJ(function(){function u(_){if(!d){if(d=!0,f=_,_=r(_),i!==void 0&&o.hasValue){var N=o.value;if(i(N,_))return p=N}return p=_}if(N=p,uJ(f,_))return N;var b=r(_);return i!==void 0&&i(N,b)?(f=_,N):(f=_,p=b)}var d=!1,f,p,g=n===void 0?null:n;return[function(){return u(e())},g===null?void 0:function(){return u(g())}]},[e,n,r,i]);var c=dJ(t,a[0],a[1]);return fJ(function(){o.hasValue=!0,o.value=c},[c]),pJ(c),c};eD.exports=tD;var gJ=eD.exports;const vJ=El(gJ),nD={},{useDebugValue:xJ}=Le,{useSyncExternalStoreWithSelector:yJ}=vJ;let ok=!1;const _J=t=>t;function wJ(t,e=_J,n){(nD?"production":void 0)!=="production"&&n&&!ok&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ok=!0);const r=yJ(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return xJ(r),r}const lk=t=>{(nD?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?oJ(t):t,n=(r,i)=>wJ(e,r,i);return Object.assign(n,e),n},uh=t=>t?lk(t):lk,Yl=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},bJ=(t,e,n)=>{const r=[t,e].sort();return`${r[0]}_${r[1]}_${n}`},jJ=async(t,e,n,r,i,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const c=`${window.location.origin}/messages?conversation=${o}`,u=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:n,senderUniversity:r,listingTitle:i,messagePreview:a,conversationUrl:c})});u.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await u.text())}catch(c){console.error("Error sending email notification:",c)}},Fy=uh((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:n=>{t({loading:!0});const{unsubscribeConversations:r}=e();r&&r();try{const i=_n(Vt(Ue,"conversations"),Xn("participants","array-contains",n)),a=jC(i,o=>{const c=[];o.docs.forEach(u=>{const d=u.data();d.deletedFor&&d.deletedFor.includes(n)||d.blockedBy&&d.blockedBy.includes(n)||c.push({id:u.id,participants:d.participants||[],listingId:d.listingId||"",listingTitle:d.listingTitle||"",listingImage:d.listingImage,listingPrice:d.listingPrice||0,participantDetails:d.participantDetails||{},lastMessage:d.lastMessage?{...d.lastMessage,sentAt:Yl(d.lastMessage.sentAt)}:void 0,unreadCount:d.unreadCount||{},blockedBy:d.blockedBy||[],deletedFor:d.deletedFor||[],status:d.status||"active",createdAt:Yl(d.createdAt),updatedAt:Yl(d.updatedAt)})}),c.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()),t({conversations:c,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),xe.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(i){console.error("Error setting up conversations listener:",i),t({loading:!1})}},fetchMessages:n=>{const{unsubscribeMessages:r}=e();r&&r();try{const i=_n(Vt(Ue,"conversations",n,"messages")),a=jC(i,o=>{const c=o.docs.map(u=>{const d=u.data();return{id:u.id,conversationId:n,senderId:d.senderId,senderName:d.senderName,senderAvatar:d.senderAvatar,text:d.text,type:d.type||"text",attachments:d.attachments||[],seen:d.seen||!1,sentAt:Yl(d.sentAt)}});c.sort((u,d)=>u.sentAt.getTime()-d.sentAt.getTime()),t({messages:c,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),xe.error("Erreur lors du chargement des messages")})}catch(i){console.error("Error setting up messages listener:",i)}},sendMessage:async(n,r,i,a,o)=>{try{console.log("Sending message:",{conversationId:n,text:r,senderId:i,senderName:a});const c=e().currentConversation;if(!c){console.error("No current conversation");return}if(c.blockedBy&&c.blockedBy.includes(i)){xe.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const u={conversationId:n,senderId:i,senderName:a,senderAvatar:o||null,text:r,type:"text",seen:!1,sentAt:sr()};console.log("Adding message to Firestore:",u);const d=await xl(Vt(Ue,"conversations",n,"messages"),u);console.log("Message added with ID:",d.id);const f=c.participants.filter(_=>_!==i),p={};f.forEach(_=>{p[`unreadCount.${_}`]=(c.unreadCount[_]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:r,sentAt:sr(),senderId:i,senderName:a},updatedAt:sr(),...p});const g=Object.fromEntries(Object.entries(p).filter(([,_])=>_!==void 0));await yn(yt(Ue,"conversations",n),{lastMessage:{text:r,sentAt:sr(),senderId:i,senderName:a},updatedAt:sr(),...g}),f.forEach(async _=>{const N=c.participantDetails[_];if(N&&N.email){const b=c.participantDetails[i];await jJ(N.email,N.name,a,(b==null?void 0:b.university)||"Universit non spcifie",c.listingTitle,r,n)}}),console.log("Message sent successfully")}catch(c){console.error("Error sending message:",c),xe.error("Erreur lors de l'envoi du message")}},createConversation:async(n,r,i,a,o,c,u,d,f)=>{try{console.log("Creating conversation:",{listingId:n,buyerId:o,sellerId:c});const p=bJ(o,c,n);console.log("Generated conversation ID:",p);const g=await Is(yt(Ue,"conversations",p));if(g.exists()){console.log("Conversation already exists, sending message");const S=g.data(),w={id:p,participants:S.participants||[],listingId:S.listingId||"",listingTitle:S.listingTitle||"",listingImage:S.listingImage,listingPrice:S.listingPrice||0,participantDetails:S.participantDetails||{},lastMessage:S.lastMessage?{...S.lastMessage,sentAt:Yl(S.lastMessage.sentAt)}:void 0,unreadCount:S.unreadCount||{},blockedBy:S.blockedBy||[],deletedFor:S.deletedFor||[],status:S.status||"active",createdAt:Yl(S.createdAt),updatedAt:Yl(S.updatedAt)};return t({currentConversation:w}),await e().sendMessage(p,f,o,u.displayName,u.photoURL),p}console.log("Creating new conversation");const _={participants:[o,c],listingId:n,listingTitle:r,listingImage:a||null,listingPrice:i,participantDetails:{[o]:{name:u.displayName,avatar:u.photoURL||null,university:u.university,verified:u.isVerified||!1,email:u.email||null},[c]:{name:d.sellerName,avatar:d.sellerAvatar||null,university:d.sellerUniversity,verified:d.sellerVerified||!1,email:d.email||null}},unreadCount:{[o]:0,[c]:1},status:"active",createdAt:sr(),updatedAt:sr()};console.log("Setting conversation document:",_);const N=Object.fromEntries(Object.entries(_).filter(([,S])=>S!==void 0));await oc(yt(Ue,"conversations",p),N);const b={id:p,participants:[o,c],listingId:n,listingTitle:r,listingImage:a||void 0,listingPrice:i,participantDetails:_.participantDetails,unreadCount:_.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:b}),console.log("Sending initial message"),await e().sendMessage(p,f,o,u.displayName,u.photoURL),p}catch(p){throw console.error("Error creating conversation:",p),xe.error("Erreur lors de la cration de la conversation"),p}},markMessagesAsSeen:async(n,r)=>{try{const i=yt(Ue,"conversations",n),a=Object.fromEntries(Object.entries({[`unreadCount.${r}`]:0}).filter(([,o])=>o!==void 0));await yn(i,a)}catch(i){console.error("Error marking messages as seen:",i)}},setCurrentConversation:n=>{t({currentConversation:n})},blockUser:async(n,r)=>{try{const i=yt(Ue,"conversations",n),a=await Is(i);if(a.exists()){const c=a.data().blockedBy||[];if(!c.includes(r)){const u=Object.fromEntries(Object.entries({blockedBy:[...c,r],status:"blocked",updatedAt:sr()}).filter(([,d])=>d!==void 0));await yn(i,u),xe.success("Utilisateur bloqu")}}}catch(i){console.error("Error blocking user:",i),xe.error("Erreur lors du blocage")}},reportUser:async(n,r,i,a,o)=>{try{const c={reporterId:r,reportedUserId:i,conversationId:n,reason:a,description:o,status:"pending",createdAt:sr()},u=Object.fromEntries(Object.entries(c).filter(([,d])=>d!==void 0));await xl(Vt(Ue,"reports"),u),xe.success("Signalement envoy")}catch(c){console.error("Error reporting user:",c),xe.error("Erreur lors du signalement")}},deleteConversation:async(n,r)=>{try{const i=yt(Ue,"conversations",n),a=await Is(i);if(a.exists()){const o=a.data(),c=o.deletedFor||[];if(!c.includes(r)){const u=[...c,r];if(u.length===o.participants.length)await Td(i);else{const d=Object.fromEntries(Object.entries({deletedFor:u,updatedAt:sr()}).filter(([,f])=>f!==void 0));await yn(i,d)}xe.success("Conversation supprime")}}}catch(i){console.error("Error deleting conversation:",i),xe.error("Erreur lors de la suppression")}},findConversationByListing:(n,r)=>{const{conversations:i}=e();return i.find(a=>a.listingId===n&&a.participants.includes(r))||null},cleanup:()=>{const{unsubscribeConversations:n,unsubscribeMessages:r}=e();n&&n(),r&&r(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),NJ={};function SJ(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const Em=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Em(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Em(r)(n)}}}},EJ=(t,e)=>(n,r,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,w)=>({...w,...S}),...e},o=!1;const c=new Set,u=new Set;let d;try{d=a.getStorage()}catch{}if(!d)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...S)},r,i);const f=Em(a.serialize),p=()=>{const S=a.partialize({...r()});let w;const y=f({state:S,version:a.version}).then(E=>d.setItem(a.name,E)).catch(E=>{w=E});if(w)throw w;return y},g=i.setState;i.setState=(S,w)=>{g(S,w),p()};const _=t((...S)=>{n(...S),p()},r,i);let N;const b=()=>{var S;if(!d)return;o=!1,c.forEach(y=>y(r()));const w=((S=a.onRehydrateStorage)==null?void 0:S.call(a,r()))||void 0;return Em(d.getItem.bind(d))(a.name).then(y=>{if(y)return a.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==a.version){if(a.migrate)return a.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var E;return N=a.merge(y,(E=r())!=null?E:_),n(N,!0),p()}).then(()=>{w==null||w(N,void 0),o=!0,u.forEach(y=>y(N))}).catch(y=>{w==null||w(void 0,y)})};return i.persist={setOptions:S=>{a={...a,...S},S.getStorage&&(d=S.getStorage())},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:S=>(c.add(S),()=>{c.delete(S)}),onFinishHydration:S=>(u.add(S),()=>{u.delete(S)})},b(),N||_},CJ=(t,e)=>(n,r,i)=>{let a={storage:SJ(()=>localStorage),partialize:b=>b,version:0,merge:(b,S)=>({...S,...b}),...e},o=!1;const c=new Set,u=new Set;let d=a.storage;if(!d)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...b)},r,i);const f=()=>{const b=a.partialize({...r()});return d.setItem(a.name,{state:b,version:a.version})},p=i.setState;i.setState=(b,S)=>{p(b,S),f()};const g=t((...b)=>{n(...b),f()},r,i);i.getInitialState=()=>g;let _;const N=()=>{var b,S;if(!d)return;o=!1,c.forEach(y=>{var E;return y((E=r())!=null?E:g)});const w=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(b=r())!=null?b:g))||void 0;return Em(d.getItem.bind(d))(a.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==a.version){if(a.migrate)return[!0,a.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var E;const[A,O]=y;if(_=a.merge(O,(E=r())!=null?E:g),n(_,!0),A)return f()}).then(()=>{w==null||w(_,void 0),_=r(),o=!0,u.forEach(y=>y(_))}).catch(y=>{w==null||w(void 0,y)})};return i.persist={setOptions:b=>{a={...a,...b},b.storage&&(d=b.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>N(),hasHydrated:()=>o,onHydrate:b=>(c.add(b),()=>{c.delete(b)}),onFinishHydration:b=>(u.add(b),()=>{u.delete(b)})},a.skipHydration||N(),_||g},kJ=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((NJ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),EJ(t,e)):CJ(t,e),TJ=kJ,dh=uh()(TJ((t,e)=>({cart:[],cartTotal:0,addToCart:n=>{const{cart:r}=e(),i=r.find(a=>a.id===n.id);t(i?{cart:r.map(a=>a.id===n.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+n.price}:{cart:[...r,{...n,quantity:1}],cartTotal:e().cartTotal+n.price}),xe.success("Article ajout au panier")},removeFromCart:n=>{const{cart:r}=e(),i=r.find(a=>a.id===n);i&&t({cart:r.filter(a=>a.id!==n),cartTotal:e().cartTotal-i.price*i.quantity})},updateQuantity:(n,r)=>{const{cart:i}=e(),a=i.find(o=>o.id===n);if(a){const o=r-a.quantity;t({cart:i.map(c=>c.id===n?{...c,quantity:r}:c),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((n,r)=>n+r.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})})),PJ=()=>{var y,E;const{currentUser:t,userProfile:e,logout:n}=mn(),{conversations:r,fetchConversations:i}=Fy(),{getCartItemCount:a}=dh(),{theme:o,setTheme:c}=_8(),u=cr(),[d,f]=x.useState(""),p=Le.useMemo(()=>!t||!r.length?0:r.reduce((A,O)=>{const q=O.unreadCount[t.uid]||0;return A+q},0),[r,t]);x.useEffect(()=>{t&&i(t.uid)},[t,i]);const g=A=>{A.preventDefault(),d.trim()&&u(`/listings?q=${encodeURIComponent(d.trim())}`)},_=async()=>{try{await n(),u("/")}catch(A){console.error("Logout error:",A)}},N=a(),b=localStorage.getItem("pendingUserData"),S=b?JSON.parse(b):{};let w="";return e!=null&&e.firstName&&(e!=null&&e.lastName)?w=`${e.firstName} ${e.lastName}`:e!=null&&e.displayName?w=e.displayName:t!=null&&t.displayName?w=t.displayName:t!=null&&t.email?w=t.email.split("@")[0]:w="Utilisateur",e!=null&&e.university||S.university,((e==null?void 0:e.university)==="Autre universit"&&e.otherUniversity||S.university==="Autre universit"&&S.otherUniversity)&&(e&&e.otherUniversity||S.otherUniversity),x.useEffect(()=>{b&&(t!=null&&t.emailVerified)},[t,b]),s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[s.jsxs(ze,{to:"/",className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:s.jsx(rh,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),s.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"tudiants certifis"})]})]}),s.jsx("form",{onSubmit:g,className:"flex-1 max-w-lg mx-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{type:"text",placeholder:"Rechercher entre tudiants...",value:d,onChange:A=>f(A.target.value),className:"pl-10 w-full"})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{onClick:()=>c(o==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors","aria-label":"Changer le thme",children:[s.jsx(JG,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(HG,{className:"absolute top-0 left-0 h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?s.jsxs(s.Fragment,{children:[s.jsx(J,{asChild:!0,className:"hidden sm:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsxs(ze,{to:"/create",children:[s.jsx(gc,{className:"w-4 h-4 mr-2"}),"Publier"]})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(J,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(ze,{to:"/cart",children:s.jsx(_l,{className:"w-4 h-4"})})}),N>0&&s.jsx(at,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:N>99?"99+":N})]}),s.jsx(J,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(ze,{to:"/saved-searches",children:s.jsx(yi,{className:"w-4 h-4"})})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(J,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(ze,{to:"/messages",children:s.jsx(wn,{className:"w-4 h-4"})})}),p>0&&s.jsx(at,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:p>99?"99+":p})]}),s.jsxs(hb,{children:[s.jsx(fb,{asChild:!0,children:s.jsxs(J,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:[s.jsxs(oo,{className:"h-8 w-8",children:[s.jsx(lo,{src:e==null?void 0:e.photoURL}),s.jsx(co,{children:((E=(y=e==null?void 0:e.displayName)==null?void 0:y[0])==null?void 0:E.toUpperCase())||"U"})]}),(e==null?void 0:e.isVerified)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(zt,{className:"w-2 h-2 text-white"})})]})}),s.jsxs(lx,{className:"w-64",align:"end",children:[s.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:s.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium",children:w}),(e==null?void 0:e.isVerified)&&s.jsxs(at,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:[s.jsx(zt,{className:"w-3 h-3 mr-1"}),"Vrifi"]})]}),e&&s.jsx("div",{children:s.jsx("div",{className:"text-xs text-muted-foreground",children:e.university==="Autre universit"?e.otherUniversity:e.university})}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(Ei,{className:"w-3 h-3 text-green-600"}),s.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO conomiss"]})]})]})}),s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/profile",className:"cursor-pointer",children:[s.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/settings",className:"cursor-pointer",children:[s.jsx(_y,{className:"w-4 h-4 mr-2"}),"Paramtres"]})}),s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/orders",className:"cursor-pointer",children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/payments",className:"cursor-pointer",children:[s.jsx(ep,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(Or,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/saved-searches",className:"cursor-pointer",children:[s.jsx(Jj,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardes"]})}),s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(wn,{className:"w-4 h-4 mr-2"}),"Messages",p>0&&s.jsx(at,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:p>99?"99+":p})]})}),s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/impact",className:"cursor-pointer",children:[s.jsx(Ei,{className:"w-4 h-4 mr-2"}),"Mon impact cologique"]})}),s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/help",className:"cursor-pointer",children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/safety",className:"cursor-pointer",children:[s.jsx(zt,{className:"w-4 h-4 mr-2"}),"Conseils de scurit"]})}),s.jsx(Wi,{}),s.jsxs(en,{onClick:_,className:"cursor-pointer text-destructive",children:[s.jsx(BG,{className:"w-4 h-4 mr-2"}),"Se dconnecter"]})]})]}),s.jsx(J,{size:"icon",asChild:!0,className:"sm:hidden bg-gradient-to-r from-primary to-secondary",children:s.jsx(ze,{to:"/create",children:s.jsx(gc,{className:"w-4 h-4"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx(J,{variant:"ghost",asChild:!0,children:s.jsx(ze,{to:"/auth",children:"Se connecter"})}),s.jsx(J,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsx(ze,{to:"/auth",children:"Rejoindre"})})]}),s.jsxs(hb,{children:[s.jsx(fb,{asChild:!0,className:"sm:hidden",children:s.jsx(J,{className:"p-2 text-foreground hover:text-primary transition-colors","aria-label":"Menu",children:s.jsx(WG,{className:"w-5 h-5"})})}),s.jsxs(lx,{className:"w-56",align:"end",children:[s.jsx(en,{asChild:!0,children:s.jsx(ze,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),s.jsx(en,{asChild:!0,children:s.jsx(ze,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre tudiants"})}),s.jsx(en,{asChild:!0,children:s.jsx(ze,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & changes"})}),s.jsx(en,{asChild:!0,children:s.jsx(ze,{to:"/listings?category=services",className:"cursor-pointer",children:"Services tudiants"})}),s.jsx(en,{asChild:!0,children:s.jsx(ze,{to:"/listings?category=housing",className:"cursor-pointer",children:"Logement & Colocation"})}),s.jsx(en,{asChild:!0,children:s.jsx(ze,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&s.jsxs(s.Fragment,{children:[s.jsx(Wi,{}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/create",className:"cursor-pointer",children:[s.jsx(gc,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/cart",className:"cursor-pointer relative",children:[s.jsx(_l,{className:"w-4 h-4 mr-2 "}),"Panier",N>0&&s.jsx(at,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 ",children:N})]})}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(wn,{className:"w-4 h-4 mr-2"}),"Messages",p>0&&s.jsx(at,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:p>99?"99+":p})]})}),s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(Or,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})})]})]})]})]})]})})};function IJ({icon:t,size:e=32,gradientId:n}){return s.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:n,x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#2ECC71"}),s.jsx("stop",{offset:"100%",stopColor:"#4A90E2"})]})}),s.jsx(t,{width:e,height:e,fill:`url(#${n})`})]})}const AJ=()=>s.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto",children:s.jsxs("div",{className:"container mx-auto px-4 py-12",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(IJ,{icon:rh,gradientId:"gradient-footer",size:32}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),s.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"tudiants certifis"})]})]}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"La premire plateforme d'change entre tudiants vrifis. Achetez, vendez, donnez et changez en toute scurit au sein de votre communaut universitaire."}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"https://facebook.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(LG,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://twitter.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(rK,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://instagram.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(UG,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Navigation"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(ze,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors",children:"Toutes les annonces"})}),s.jsx("li",{children:s.jsx(ze,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors",children:"Dons entre tudiants"})}),s.jsx("li",{children:s.jsx(ze,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors",children:"Troc & changes"})}),s.jsx("li",{children:s.jsx(ze,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors",children:"Publier une annonce"})}),s.jsx("li",{children:s.jsx(ze,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors",children:"Comment a marche"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Catgories populaires"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(ze,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors",children:"Livres & Cours"})}),s.jsx("li",{children:s.jsx(ze,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors",children:"lectronique"})}),s.jsx("li",{children:s.jsx(ze,{to:"/listings?category=housing",className:"text-muted-foreground hover:text-primary transition-colors",children:"Logement & Colocation"})}),s.jsx("li",{children:s.jsx(ze,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors",children:"Services tudiants"})}),s.jsx("li",{children:s.jsx(ze,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors",children:"Jobs & Stages"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Scurit & Confiance"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(zt,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"tudiants 100% vrifis"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(Ei,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Impact cologique mesur"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(vs,{className:"w-4 h-4"}),s.jsx("span",{children:"support@studymarket.fr"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ze,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conseils de scurit"}),s.jsx(ze,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Processus de vrification"}),s.jsx(ze,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Rgles de la communaut"}),s.jsx(ze,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Centre d'aide"})]})]})]}),s.jsxs("div",{className:"border-t border-border mt-8 pt-8 flex flex-col sm:flex-row justify-between items-center",children:[s.jsx("p",{className:"text-muted-foreground text-sm",children:" 2024 StudyMarket. Tous droits rservs. Plateforme ddie aux tudiants vrifis."}),s.jsxs("div",{className:"flex space-x-6 mt-4 sm:mt-0",children:[s.jsx(ze,{to:"/terms",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conditions d'utilisation"}),s.jsx(ze,{to:"/privacy",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Politique de confidentialit"}),s.jsx(ze,{to:"/cookies",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Cookies"}),s.jsxs("a",{href:"mailto:support@studymarket.fr",className:"text-muted-foreground hover:text-primary transition-colors text-sm flex items-center gap-1",children:[s.jsx(hs,{className:"w-3 h-3"}),"Contact"]})]})]})]})}),fe=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("rounded-xl border bg-card text-card-foreground shadow",t),...e}));fe.displayName="Card";const Qe=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("flex flex-col space-y-1.5 p-6",t),...e}));Qe.displayName="CardHeader";const Je=x.forwardRef(({className:t,...e},n)=>s.jsx("h3",{ref:n,className:st("font-semibold leading-none tracking-tight",t),...e}));Je.displayName="CardTitle";const Ct=x.forwardRef(({className:t,...e},n)=>s.jsx("p",{ref:n,className:st("text-sm text-muted-foreground",t),...e}));Ct.displayName="CardDescription";const me=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("p-6 pt-0",t),...e}));me.displayName="CardContent";const rD=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("flex items-center p-6 pt-0",t),...e}));rD.displayName="CardFooter";const cx=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(cx).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=cx(t[n]);r!==void 0&&(e[n]=r)}),e}return t},ck=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},v_=t=>{var n,r,i,a,o,c;const e=t.data();return{id:t.id,...e,createdAt:ck(e.createdAt),updatedAt:ck(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((n=e.location)==null?void 0:n.city)||"Paris",state:((r=e.location)==null?void 0:r.state)||"le-de-France",country:((i=e.location)==null?void 0:i.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((c=e.location)==null?void 0:c.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Universit non spcifie",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},dp=uh((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(n={},r=!1)=>{const{listings:i,lastDoc:a}=e();if(!(!r&&!a)){t({loading:!0});try{let o=_n(Vt(Ue,"listings"),_C("createdAt","desc"),ei(20));!r&&a&&(o=_n(o,iH(a)));const c=await Fn(o);let u=c.docs.map(v_);if(n.category&&n.category!=="all"&&(u=u.filter(f=>f.category===n.category)),n.minPrice!==void 0&&(u=u.filter(f=>f.price>=n.minPrice)),n.maxPrice!==void 0&&(u=u.filter(f=>f.price<=n.maxPrice)),n.query){const f=n.query.toLowerCase();u=u.filter(p=>{var g;return p.title.toLowerCase().includes(f)||p.description.toLowerCase().includes(f)||((g=p.tags)==null?void 0:g.some(_=>_.toLowerCase().includes(f)))})}if(n.condition&&n.condition.length>0&&(u=u.filter(f=>n.condition.includes(f.condition))),n.sortBy)switch(n.sortBy){case"price-asc":u.sort((f,p)=>f.price-p.price);break;case"price-desc":u.sort((f,p)=>p.price-f.price);break;case"date":default:u.sort((f,p)=>new Date(p.createdAt).getTime()-new Date(f.createdAt).getTime());break}const d=c.docs[c.docs.length-1];t({listings:r?u:[...i,...u],lastDoc:d,hasMore:c.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),xe.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log(" Fetching featured listings...");const n=_n(Vt(Ue,"listings"),_C("createdAt","desc"),ei(6)),r=await Fn(n);console.log(` Found ${r.docs.length} documents`);const i=r.docs.map((a,o)=>{try{console.log(` Processing document ${o+1}:`,a.id);const c=v_(a);return console.log(` Successfully converted listing: ${c.title}`),c}catch(c){return console.error(` Error converting document ${a.id}:`,c),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas tre affiche pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"le-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Universit non spcifie",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(` Successfully processed ${i.length} featured listings`),t({featuredListings:i})}catch(n){console.error(" Error fetching featured listings:",n),t({featuredListings:[]})}},fetchListingById:async n=>{t({loading:!0});try{const r=yt(Ue,"listings",n),i=await Is(r);if(i.exists()){const a=v_(i);await yn(r,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),xe.error("Annonce introuvable")}catch(r){console.error("Error fetching listing:",r),xe.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async n=>{var r,i,a,o,c,u;try{const d=cx({...n,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((r=n.location)==null?void 0:r.city)||"Paris",state:((i=n.location)==null?void 0:i.state)||"le-de-France",country:((a=n.location)==null?void 0:a.country)||"France",campus:((o=n.location)==null?void 0:o.campus)||null,university:((c=n.location)==null?void 0:c.university)||null,coordinates:((u=n.location)==null?void 0:u.coordinates)||null},currency:n.currency||"EUR",images:n.images||[],tags:n.tags||[],condition:n.condition||"good",transactionType:n.transactionType||"sale"});console.log("Creating listing with data:",d);const f=await xl(Vt(Ue,"listings"),d);return xe.success("Annonce cre avec succs !"),f.id}catch(d){throw console.error("Error creating listing:",d),xe.error("Erreur lors de la cration de l'annonce"),d}},updateListing:async(n,r)=>{try{const i=yt(Ue,"listings",n),a=cx({...r,updatedAt:new Date});await yn(i,a);const{listings:o,currentListing:c}=e(),u=o.map(d=>d.id===n?{...d,...r}:d);t({listings:u,currentListing:(c==null?void 0:c.id)===n?{...c,...r}:c}),xe.success("Annonce mise  jour !")}catch(i){throw console.error("Error updating listing:",i),xe.error("Erreur lors de la mise  jour"),i}},deleteListing:async n=>{try{await Td(yt(Ue,"listings",n));const{listings:r}=e(),i=r.filter(a=>a.id!==n);t({listings:i}),xe.success("Annonce supprime !")}catch(r){throw console.error("Error deleting listing:",r),xe.error("Erreur lors de la suppression"),r}},searchListings:async n=>{await e().fetchListings(n,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),uk=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},sD=uh((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async n=>{if(n){t({loading:!0});try{const r=_n(Vt(Ue,"favorites"),Xn("userId","==",n),ei(100)),i=await Fn(r),a=[],o=new Set;i.forEach(c=>{const u=c.data(),d={id:c.id,...u,createdAt:uk(u.createdAt),updatedAt:uk(u.updatedAt)};a.push(d),o.add(d.listingId)}),a.sort((c,u)=>u.createdAt.getTime()-c.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(r){console.error("Erreur lors du chargement des favoris:",r),xe.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(n,r)=>{var i;if(!(!n||!r))try{if(e().userFavoriteIds.has(r.id)){xe.info("Dj dans vos favoris");return}const a={userId:n,listingId:r.id,listingTitle:r.title,listingPrice:r.price,listingImage:((i=r.images)==null?void 0:i[0])||null,listingCategory:r.category,listingTransactionType:r.transactionType,sellerName:r.sellerName,sellerUniversity:r.sellerUniversity,notes:"",tags:r.tags||[],createdAt:sr(),updatedAt:sr()},c={id:(await xl(Vt(Ue,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:u,userFavoriteIds:d}=e(),f=new Set(d);f.add(r.id),t({favorites:[c,...u],userFavoriteIds:f});try{await yn(yt(Ue,"listings",r.id),{likes:(r.likes||0)+1})}catch(p){console.error("Erreur lors de la mise  jour du compteur de likes:",p)}xe.success("Ajout aux favoris ")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),xe.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(n,r)=>{if(!(!n||!r))try{const i=_n(Vt(Ue,"favorites"),Xn("userId","==",n),Xn("listingId","==",r)),a=await Fn(i);if(a.empty){xe.info("Pas dans vos favoris");return}const o=a.docs[0];await Td(yt(Ue,"favorites",o.id));const{favorites:c,userFavoriteIds:u}=e(),d=new Set(u);d.delete(r),t({favorites:c.filter(f=>f.listingId!==r),userFavoriteIds:d});try{const f=yt(Ue,"listings",r),p=await Fn(_n(Vt(Ue,"listings"),Xn("__name__","==",r)));if(!p.empty){const g=p.docs[0].data().likes||0;await yn(f,{likes:Math.max(0,g-1)})}}catch(f){console.error("Erreur lors de la mise  jour du compteur de likes:",f)}xe.success("Retir des favoris")}catch(i){console.error("Erreur lors de la suppression des favoris:",i),xe.error("Erreur lors de la suppression des favoris")}},isFavorite:n=>e().userFavoriteIds.has(n),toggleFavorite:async(n,r)=>{const{isFavorite:i,addToFavorites:a,removeFromFavorites:o}=e();i(r.id)?await o(n,r.id):await a(n,r)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),iD=({listing:t,size:e="default",className:n=""})=>{const{currentUser:r}=mn(),{isFavorite:i,toggleFavorite:a}=sD(),o=cr(),c=i(t.id),u=f=>{if(f.preventDefault(),f.stopPropagation(),!r){xe.error("Connectez-vous pour ajouter aux favoris"),o("/auth");return}a(r.uid,t)},d=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx(J,{variant:"ghost",size:"icon",onClick:u,className:`${d()} ${c?"text-red-500 hover:text-red-600":"text-blue-500 hover:text-red-500"} ${n}`,"aria-label":c?"Retirer des favoris":"Ajouter aux favoris",children:s.jsx(Or,{className:`w-4 h-4 ${c?"fill-current text-red-500":"stroke-current text-blue-500"}`,strokeWidth:2,fill:c?"currentColor":"none"})})},aD=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const i=async o=>{o.preventDefault(),o.stopPropagation();const c={title:t.title,text:`Dcouvrez cette annonce sur StudyMarket: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(c):(await navigator.clipboard.writeText(window.location.href),xe.success("Lien copi dans le presse-papiers"))}catch(u){console.error("Error sharing:",u)}},a=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx(J,{variant:"ghost",size:"icon",onClick:i,className:`${a()} ${r}`,"aria-label":"Partager",children:s.jsx(wy,{className:"w-4 h-4"})})};function pt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ys(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Gr(t,e){const n=pt(t);return isNaN(e)?ys(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Ri(t,e){const n=pt(t);if(isNaN(e))return ys(t,NaN);if(!e)return n;const r=n.getDate(),i=ys(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return r>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const jN=6048e5,RJ=864e5,Sg=43200,dk=1440;let MJ={};function hh(){return MJ}function va(t,e){var c,u,d,f;const n=hh(),r=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=pt(t),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Dc(t){return va(t,{weekStartsOn:1})}function oD(t){const e=pt(t),n=e.getFullYear(),r=ys(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Dc(r),a=ys(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Dc(a);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Dd(t){const e=pt(t);return e.setHours(0,0,0,0),e}function Ld(t){const e=pt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ta(t,e){const n=Dd(t),r=Dd(e),i=+n-Ld(n),a=+r-Ld(r);return Math.round((i-a)/RJ)}function OJ(t){const e=oD(t),n=ys(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Dc(n)}function mb(t,e){const n=e*7;return Gr(t,n)}function DJ(t,e){return Ri(t,e*12)}function LJ(t){let e;return t.forEach(function(n){const r=pt(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function FJ(t){let e;return t.forEach(n=>{const r=pt(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function nv(t,e){const n=pt(t),r=pt(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function VJ(t){return ys(t,Date.now())}function fs(t,e){const n=Dd(t),r=Dd(e);return+n==+r}function NN(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function zJ(t){if(!NN(t)&&typeof t!="number")return!1;const e=pt(t);return!isNaN(Number(e))}function Fd(t,e){const n=pt(t),r=pt(e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function UJ(t,e,n){const r=va(t,n),i=va(e,n),a=+r-Ld(r),o=+i-Ld(i);return Math.round((a-o)/jN)}function $J(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function BJ(t,e){return+pt(t)-+pt(e)}function qJ(t){const e=pt(t);return e.setHours(23,59,59,999),e}function Vy(t){const e=pt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function WJ(t){const e=pt(t);return+qJ(e)==+Vy(e)}function HJ(t,e){const n=pt(t),r=pt(e),i=nv(n,r),a=Math.abs(Fd(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let c=nv(n,r)===-i;WJ(pt(t))&&a===1&&nv(t,r)===1&&(c=!1),o=i*(a-Number(c))}return o===0?0:o}function GJ(t,e,n){const r=BJ(t,e)/1e3;return $J(n==null?void 0:n.roundingMethod)(r)}function xs(t){const e=pt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function lD(t){const e=pt(t),n=ys(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function SN(t,e){var c,u,d,f;const n=hh(),r=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=pt(t),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function cD(t){return SN(t,{weekStartsOn:1})}const KJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ZJ=(t,e,n)=>{let r;const i=KJ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function hd(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const YJ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},QJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},XJ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},JJ={date:hd({formats:YJ,defaultWidth:"full"}),time:hd({formats:QJ,defaultWidth:"full"}),dateTime:hd({formats:XJ,defaultWidth:"full"})},eee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tee=(t,e,n,r)=>eee[t];function Yi(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):o;i=t.formattingValues[c]||t.formattingValues[o]}else{const o=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[c]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const nee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ree={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},see={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},iee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},aee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},oee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},lee=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},cee={ordinalNumber:lee,era:Yi({values:nee,defaultWidth:"wide"}),quarter:Yi({values:ree,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Yi({values:see,defaultWidth:"wide"}),day:Yi({values:iee,defaultWidth:"wide"}),dayPeriod:Yi({values:aee,defaultWidth:"wide",formattingValues:oee,defaultFormattingWidth:"wide"})};function Qi(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?dee(c,p=>p.test(o)):uee(c,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function uee(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function dee(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function uD(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const c=e.slice(i.length);return{value:o,rest:c}}}const hee=/^(\d+)(th|st|nd|rd)?/i,fee=/\d+/i,mee={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pee={any:[/^b/i,/^(a|c)/i]},gee={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vee={any:[/1/i,/2/i,/3/i,/4/i]},xee={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yee={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_ee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wee={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bee={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jee={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nee={ordinalNumber:uD({matchPattern:hee,parsePattern:fee,valueCallback:t=>parseInt(t,10)}),era:Qi({matchPatterns:mee,defaultMatchWidth:"wide",parsePatterns:pee,defaultParseWidth:"any"}),quarter:Qi({matchPatterns:gee,defaultMatchWidth:"wide",parsePatterns:vee,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qi({matchPatterns:xee,defaultMatchWidth:"wide",parsePatterns:yee,defaultParseWidth:"any"}),day:Qi({matchPatterns:_ee,defaultMatchWidth:"wide",parsePatterns:wee,defaultParseWidth:"any"}),dayPeriod:Qi({matchPatterns:bee,defaultMatchWidth:"any",parsePatterns:jee,defaultParseWidth:"any"})},EN={code:"en-US",formatDistance:ZJ,formatLong:JJ,formatRelative:tee,localize:cee,match:Nee,options:{weekStartsOn:0,firstWeekContainsDate:1}};function See(t){const e=pt(t);return ta(e,lD(e))+1}function dD(t){const e=pt(t),n=+Dc(e)-+OJ(e);return Math.round(n/jN)+1}function hD(t,e){var f,p,g,_;const n=pt(t),r=n.getFullYear(),i=hh(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((_=(g=i.locale)==null?void 0:g.options)==null?void 0:_.firstWeekContainsDate)??1,o=ys(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const c=va(o,e),u=ys(t,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const d=va(u,e);return n.getTime()>=c.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function Eee(t,e){var c,u,d,f;const n=hh(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=hD(t,e),a=ys(t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),va(a,e)}function fD(t,e){const n=pt(t),r=+va(n,e)-+Eee(n,e);return Math.round(r/jN)+1}function Wt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Io={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Wt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Wt(n+1,2)},d(t,e){return Wt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Wt(t.getHours()%12||12,e.length)},H(t,e){return Wt(t.getHours(),e.length)},m(t,e){return Wt(t.getMinutes(),e.length)},s(t,e){return Wt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Wt(i,e.length)}},Pu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},hk={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Io.y(t,e)},Y:function(t,e,n,r){const i=hD(t,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return Wt(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Wt(a,e.length)},R:function(t,e){const n=oD(t);return Wt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Wt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Wt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Wt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Io.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Wt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=fD(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Wt(i,e.length)},I:function(t,e,n){const r=dD(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Wt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Io.d(t,e)},D:function(t,e,n){const r=See(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Wt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Wt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Wt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Wt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Pu.noon:r===0?i=Pu.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Pu.evening:r>=12?i=Pu.afternoon:r>=4?i=Pu.morning:i=Pu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Io.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Io.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Wt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Wt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Io.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Io.s(t,e)},S:function(t,e){return Io.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return mk(r);case"XXXX":case"XX":return tc(r);case"XXXXX":case"XXX":default:return tc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return mk(r);case"xxxx":case"xx":return tc(r);case"xxxxx":case"xxx":default:return tc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+fk(r,":");case"OOOO":default:return"GMT"+tc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+fk(r,":");case"zzzz":default:return"GMT"+tc(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Wt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Wt(r,e.length)}};function fk(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+Wt(a,2)}function mk(t,e){return t%60===0?(t>0?"-":"+")+Wt(Math.abs(t)/60,2):tc(t,e)}function tc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Wt(Math.trunc(r/60),2),a=Wt(r%60,2);return n+i+e+a}const pk=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},mD=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Cee=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return pk(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",pk(r,e)).replace("{{time}}",mD(i,e))},kee={p:mD,P:Cee},Tee=/^D+$/,Pee=/^Y+$/,Iee=["D","DD","YY","YYYY"];function Aee(t){return Tee.test(t)}function Ree(t){return Pee.test(t)}function Mee(t,e,n){const r=Oee(t,e,n);if(console.warn(r),Iee.includes(t))throw new RangeError(r)}function Oee(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Dee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Lee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fee=/^'([^]*?)'?$/,Vee=/''/g,zee=/[a-zA-Z]/;function or(t,e,n){var f,p,g,_,N,b,S,w;const r=hh(),i=(n==null?void 0:n.locale)??r.locale??EN,a=(n==null?void 0:n.firstWeekContainsDate)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((_=(g=r.locale)==null?void 0:g.options)==null?void 0:_.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((b=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((w=(S=r.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??0,c=pt(t);if(!zJ(c))throw new RangeError("Invalid time value");let u=e.match(Lee).map(y=>{const E=y[0];if(E==="p"||E==="P"){const A=kee[E];return A(y,i.formatLong)}return y}).join("").match(Dee).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const E=y[0];if(E==="'")return{isToken:!1,value:Uee(y)};if(hk[E])return{isToken:!0,value:y};if(E.match(zee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(u=i.localize.preprocessor(c,u));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return u.map(y=>{if(!y.isToken)return y.value;const E=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Ree(E)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Aee(E))&&Mee(E,e,String(t));const A=hk[E[0]];return A(c,E,i.localize,d)}).join("")}function Uee(t){const e=t.match(Fee);return e?e[1].replace(Vee,"'"):t}function $ee(t,e,n){const r=hh(),i=(n==null?void 0:n.locale)??r.locale??EN,a=2520,o=nv(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let u,d;o>0?(u=pt(e),d=pt(t)):(u=pt(t),d=pt(e));const f=GJ(d,u),p=(Ld(d)-Ld(u))/1e3,g=Math.round((f-p)/60);let _;if(g<2)return n!=null&&n.includeSeconds?f<5?i.formatDistance("lessThanXSeconds",5,c):f<10?i.formatDistance("lessThanXSeconds",10,c):f<20?i.formatDistance("lessThanXSeconds",20,c):f<40?i.formatDistance("halfAMinute",0,c):f<60?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",1,c):g===0?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",g,c);if(g<45)return i.formatDistance("xMinutes",g,c);if(g<90)return i.formatDistance("aboutXHours",1,c);if(g<dk){const N=Math.round(g/60);return i.formatDistance("aboutXHours",N,c)}else{if(g<a)return i.formatDistance("xDays",1,c);if(g<Sg){const N=Math.round(g/dk);return i.formatDistance("xDays",N,c)}else if(g<Sg*2)return _=Math.round(g/Sg),i.formatDistance("aboutXMonths",_,c)}if(_=HJ(d,u),_<12){const N=Math.round(g/Sg);return i.formatDistance("xMonths",N,c)}else{const N=_%12,b=Math.trunc(_/12);return N<3?i.formatDistance("aboutXYears",b,c):N<9?i.formatDistance("overXYears",b,c):i.formatDistance("almostXYears",b+1,c)}}function fh(t,e){return $ee(t,VJ(t),e)}function Bee(t){const e=pt(t),n=e.getFullYear(),r=e.getMonth(),i=ys(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function qee(t){return Math.trunc(+pt(t)/1e3)}function Wee(t){const e=pt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function Hee(t,e){return UJ(Wee(t),xs(t),e)+1}function pb(t,e){const n=pt(t),r=pt(e);return n.getTime()>r.getTime()}function pD(t,e){const n=pt(t),r=pt(e);return+n<+r}function CN(t,e){const n=pt(t),r=pt(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Gee(t,e){const n=pt(t),r=pt(e);return n.getFullYear()===r.getFullYear()}function x_(t,e){return Gr(t,-e)}function y_(t,e){const n=pt(t),r=n.getFullYear(),i=n.getDate(),a=ys(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const o=Bee(a);return n.setMonth(e,Math.min(i,o)),n}function gk(t,e){const n=pt(t);return isNaN(+n)?ys(t,NaN):(n.setFullYear(e),n)}const Kee={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},Zee=(t,e,n)=>{let r;const i=Kee[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},Yee={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Qee={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Xee={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Jee={date:hd({formats:Yee,defaultWidth:"full"}),time:hd({formats:Qee,defaultWidth:"full"}),dateTime:hd({formats:Xee,defaultWidth:"full"})},ete={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},tte=(t,e,n,r)=>ete[t],nte={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},rte={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},ste={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},ite={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},ate={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},ote=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const i=["year","week","hour","minute","second"];let a;return n===1?a=r&&i.includes(r)?"re":"er":a="me",n+a},lte=["MMM","MMMM"],cte={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&lte.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:ote,era:Yi({values:nte,defaultWidth:"wide"}),quarter:Yi({values:rte,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Yi({values:ste,defaultWidth:"wide"}),day:Yi({values:ite,defaultWidth:"wide"}),dayPeriod:Yi({values:ate,defaultWidth:"wide"})},ute=/^(\d+)(ime|re|me|er|e)?/i,dte=/\d+/i,hte={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},fte={any:[/^av/i,/^ap/i]},mte={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},pte={any:[/1/i,/2/i,/3/i,/4/i]},gte={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},vte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},xte={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},yte={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},_te={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},wte={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},bte={ordinalNumber:uD({matchPattern:ute,parsePattern:dte,valueCallback:t=>parseInt(t)}),era:Qi({matchPatterns:hte,defaultMatchWidth:"wide",parsePatterns:fte,defaultParseWidth:"any"}),quarter:Qi({matchPatterns:mte,defaultMatchWidth:"wide",parsePatterns:pte,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qi({matchPatterns:gte,defaultMatchWidth:"wide",parsePatterns:vte,defaultParseWidth:"any"}),day:Qi({matchPatterns:xte,defaultMatchWidth:"wide",parsePatterns:yte,defaultParseWidth:"any"}),dayPeriod:Qi({matchPatterns:_te,defaultMatchWidth:"any",parsePatterns:wte,defaultParseWidth:"any"})},Dr={code:"fr",formatDistance:Zee,formatLong:Jee,formatRelative:tte,localize:cte,match:bte,options:{weekStartsOn:1,firstWeekContainsDate:4}},Cm=({listing:t})=>{var p,g,_,N,b,S;const e=(w,y)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"change";const E=y;try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:E}).format(w)}catch{return`${w} `}},n=w=>{switch(w){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-orange-100 text-orange-700 border-orange-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},r=w=>{switch(w){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon tat";case"fair":return"tat correct";case"poor":return"Mauvais tat";default:return w}},i=()=>{switch(t.transactionType){case"donation":return s.jsx(Ad,{className:"w-3 h-3"});case"exchange":return s.jsx(so,{className:"w-3 h-3"});default:return null}},a=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},o=w=>{try{let y;if(!w)return"Date inconnue";if(w instanceof Date)y=w;else if(typeof w=="string"||typeof w=="number")y=new Date(w);else if(w&&typeof w.toDate=="function")y=w.toDate();else if(w&&typeof w=="object"&&"seconds"in w)y=new Date(w.seconds*1e3);else return"Date inconnue";return isNaN(y.getTime())?"Date inconnue":fh(y,{addSuffix:!0,locale:Dr})}catch{return"Date inconnue"}},c=t.price||0,u=t.currency||"EUR",d=t.condition||"good",f=t.transactionType||"sale";return s.jsxs(fe,{className:"group relative bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 shadow-sm dark:shadow-lg hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[s.jsx(ze,{to:`/listing/${t.id}`,className:"block",children:s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100",children:[s.jsx("img",{src:((p=t.images)==null?void 0:p[0])||"/assets/image.png",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[s.jsx(iD,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"}),s.jsx(aD,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"})]}),f!=="sale"&&s.jsxs(at,{className:`absolute top-3 left-3 ${a()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[i(),s.jsx("span",{className:"ml-1.5 text-sm",children:f==="donation"?"Don":"Troc"})]}),f==="sale"&&s.jsx(at,{className:`absolute top-3 left-3 ${n(d)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:r(d)}),t.environmentalImpact&&s.jsxs(at,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[s.jsx(Ei,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO"]}),t.images&&t.images.length>1&&s.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),s.jsxs(me,{className:"p-6 space-y-4",children:[s.jsxs(ze,{to:`/listing/${t.id}`,className:"block",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:`text-2xl font-bold ${f==="donation"?"text-green-600":f==="exchange"?"text-purple-600":"text-slate-900 dark:text-white"}`,children:e(c,u)}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 bg-gray-50 px-2.5 py-1 rounded-full",children:[s.jsx(Id,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"font-medium",children:t.views||0})]})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),f==="exchange"&&t.exchangeFor&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-purple-50 px-3 py-2 rounded-lg mb-4",children:[s.jsx(so,{className:"w-4 h-4 text-purple-500"}),s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[s.jsx(Mr,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-semibold truncate",children:((g=t.location)==null?void 0:g.campus)||((_=t.location)!=null&&_.city&&((N=t.location)!=null&&N.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spcifie")})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[s.jsx(Un,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-300 whitespace-nowrap",children:o(t.createdAt)})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsxs(oo,{className:"w-9 h-9 border-2 border-gray-100",children:[s.jsx(lo,{src:t.sellerAvatar}),s.jsx(co,{className:"text-sm bg-gray-100 text-gray-600 font-medium",children:((S=(b=t.sellerName)==null?void 0:b[0])==null?void 0:S.toUpperCase())||"U"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&s.jsx(zt,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),s.jsx("span",{className:"text-xs text-gray-500 truncate block text-left",children:s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:t.sellerUniversity||"Universit non spcifie"})})]})]}),t.aiPriceEstimate&&f==="sale"&&s.jsx(at,{className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste "})]})]})]})};var gD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vk=Le.createContext&&Le.createContext(gD),jte=["attr","size","title"];function Nte(t,e){if(t==null)return{};var n=Ste(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ste(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ux(){return ux=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ux.apply(this,arguments)}function xk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(n),!0).forEach(function(r){Ete(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ete(t,e,n){return e=Cte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cte(t){var e=kte(t,"string");return typeof e=="symbol"?e:e+""}function kte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vD(t){return t&&t.map((e,n)=>Le.createElement(e.tag,dx({key:n},e.attr),vD(e.child)))}function Ml(t){return e=>Le.createElement(Tte,ux({attr:dx({},t.attr)},e),vD(t.child))}function Tte(t){var e=n=>{var{attr:r,size:i,title:a}=t,o=Nte(t,jte),c=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Le.createElement("svg",ux({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:dx(dx({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),a&&Le.createElement("title",null,a),t.children)};return vk!==void 0?Le.createElement(vk.Consumer,null,n=>e(n)):e(gD)}function Pte(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function Ite(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function Ate(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function Rte(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function Mte(t){return Ml({attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function Ote(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function Dte(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function Lte(t){return Ml({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const Fte=()=>{const[t,e]=x.useState(""),n=cr(),r=i=>{i.preventDefault(),t.trim()&&n(`/listings?q=${encodeURIComponent(t.trim())}`)};return s.jsxs("form",{onSubmit:r,className:"flex items-center w-full max-w-2xl mx-auto rounded-full border-2 border-primary/40 bg-white shadow-sm focus-within:ring-2 focus-within:ring-primary/30 transition px-1 sm:px-1",role:"search","aria-label":"Recherche",children:[s.jsx("span",{className:"pl-0 sm:pl-4 text-gray-400",children:s.jsx(_r,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",className:"flex-1 bg-transparent outline-none border-0 px-2 sm:px-4 py-2 sm:py-3 text-base rounded-l-full min-w-0",placeholder:"Rechercher parmi les tudiants de votre rgion...",value:t,onChange:i=>e(i.target.value),"aria-label":"Rechercher"}),s.jsx("button",{type:"submit",className:"rounded-full bg-gradient-to-r from-primary to-secondary text-white font-semibold px-3 sm:px-6 py-2 m-1 transition hover:from-primary/90 hover:to-secondary/90 focus:outline-none whitespace-nowrap text-sm sm:text-base",children:"Rechercher"})]})},Vte={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/troc.svg"},zte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:"w-50 h-50"}),Ute=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Trending Up",className:"w-50 h-50"}),$te=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Trending Up",className:"w-50 h-50"}),Bte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Bleu/chat.svg",alt:"Trending Up",className:"w-50 h-50"}),qte=[{id:"electronics",name:"lectronique",icon:Rte,color:"text-blue-600",description:"Ordinateurs, tlphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:Ite,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:Pte,color:"text-blue-600",description:"Meubles, dco, lectromnager"},{id:"housing",name:"Logement",icon:Ate,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:Mte,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:Ote,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:Lte,color:"text-blue-600",description:"Objets gratuits, entraide"},{id:"exchange",name:"Troc",icon:Dte,color:"text-blue-600",description:"changes de services et objets"}],Wte=[{icon:zt,title:"tudiants vrifis uniquement",description:'Chaque membre est vrifi avec son adresse universitaire. Badge "tudiant certifi" sur tous les profils.'},{icon:Bte,title:"Chat scuris intgr",description:"Messagerie avec proposition de rendez-vous, points de rencontre campus et protection des donnes."},{icon:Ei,title:"Impact cologique mesur",description:"Suivez votre impact environnemental : CO conomis, ressources prserves grce  vos achats d'occasion."},{icon:V4,title:"Avis publics et rputation",description:"Systme de notation transparent. Consultez les avis avant chaque transaction pour changer en confiance."}],Hte=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",icon:zte,link:"/create",color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",icon:Ute,link:"/create?type=donation",color:"border-2 border-green-500 text-green-500"},{title:"Proposer un troc",description:"changez services et objets sans argent",icon:$te,link:"/create?type=exchange",color:"border-2 border-green-500 text-green-500"}],Gte=()=>{const{featuredListings:t,fetchFeaturedListings:e}=dp();return x.useEffect(()=>{e()},[e]),s.jsxs("div",{className:"max-w-7xl mx-auto px-1 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-8",children:"Bienvenue sur StudyMarket"}),s.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 py-8 sm:py-16 px-4",children:s.jsxs("div",{className:"container mx-auto text-center max-w-4xl",children:[s.jsx("div",{className:"flex items-center justify-center mb-4 sm:mb-6",children:s.jsxs(at,{className:"bg-green-100 text-green-800 border-green-200 px-3 py-1.5 sm:px-4 sm:py-2",children:[s.jsx(zt,{className:"w-4 h-4 mr-2"}),"Communaut 100% tudiants vrifis"]})}),s.jsx("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-bold mb-4 sm:mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"La marketplace des tudiants"}),s.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-6 sm:mb-8 max-w-2xl mx-auto",children:"Achetez, vendez, donnez et changez entre tudiants certifis de votre rgion. Scuris, cologique et pens pour la vie tudiante."}),s.jsx("div",{className:"mb-6 sm:mb-8 px-4",children:s.jsx(Fte,{})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 sm:mb-8",children:Hte.map((n,r)=>s.jsx(ze,{to:n.link,className:"group",children:s.jsx(fe,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:s.jsxs(me,{className:"p-4 text-center",children:[s.jsx("div",{className:`w-12 h-12 ${n.color} rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform`,children:s.jsx(n.icon,{})}),s.jsx("h3",{className:"font-semibold mb-1",children:n.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]})})},r))}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s.jsx(J,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary w-full sm:w-auto",children:s.jsxs(ze,{to:"/listings",children:["Parcourir les annonces",s.jsx(_m,{className:"w-4 h-4 ml-2"})]})}),s.jsx(J,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:s.jsx(ze,{to:"/auth",children:"Rejoindre la communaut"})})]})]})}),s.jsx("section",{className:"py-10 sm:py-16 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-3 sm:mb-4",children:"Catgories tudiantes"}),s.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-12 max-w-2xl mx-auto text-sm sm:text-base",children:"Des catgories penses spcifiquement pour la vie tudiante, avec des filtres adapts  vos besoins"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:qte.map(n=>{let r;return n.id==="jobs"?r="/jobs":n.id==="housing"?r="/housing":r=`/listings?category=${n.id}`,s.jsx(ze,{to:r,className:"group",children:s.jsx(fe,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:s.jsxs(me,{className:"p-4 text-center",children:[s.jsx("img",{src:Vte[n.id],alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold text-sm mb-1",children:n.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})},n.id)})})]})}),t.length>0&&s.jsx("section",{className:"py-16 px-4 bg-muted/30",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 sm:mb-12 gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Annonces rcentes"}),s.jsx("p",{className:"text-muted-foreground",children:"Les dernires offres de la communaut tudiante"})]}),s.jsx(J,{variant:"outline",asChild:!0,children:s.jsxs(ze,{to:"/listings",children:["Voir tout",s.jsx(_m,{className:"w-4 h-4 ml-2"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.slice(0,6).map(n=>s.jsx(Cm,{listing:n},n.id))})]})}),s.jsx("section",{className:"py-16 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-4",children:"Pourquoi StudyMarket ?"}),s.jsx("p",{className:"text-center text-muted-foreground mb-12 max-w-2xl mx-auto",children:"Une plateforme pense par et pour les tudiants, avec des fonctionnalits uniques pour votre scurit et votre tranquillit d'esprit"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Wte.map((n,r)=>s.jsx(fe,{className:"border-0 shadow-none",children:s.jsx(me,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(n.icon,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:n.title}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:n.description})]})]})})},r))})]})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20",children:s.jsx("div",{className:"container mx-auto text-center",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx(Ei,{className:"w-12 h-12 sm:w-16 sm:h-16 text-green-600 mx-auto mb-6"}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"Votre impact cologique compte"}),s.jsx("p",{className:"text-base sm:text-xl text-muted-foreground mb-8",children:"Chaque achat d'occasion vite la production d'un objet neuf. Suivez votre impact environnemental et dcouvrez combien de CO vous conomisez grce  vos changes tudiants."}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"2.5T"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"CO conomis par la communaut"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"15K"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Objets donns cette anne"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"8K"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"tudiants engags"})]})]}),s.jsx(J,{size:"lg",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:s.jsx(ze,{to:"/impact",className:"cursor-pointer",children:"Dcouvrir mon impact"})})]})})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-primary to-secondary",children:s.jsxs("div",{className:"container mx-auto text-center",children:[s.jsx(rh,{className:"w-12 h-12 sm:w-16 sm:h-16 text-white mx-auto mb-6"}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Rejoignez la communaut tudiante"}),s.jsx("p",{className:"text-base sm:text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Plus de 10 000 tudiants font dj confiance  StudyMarket pour leurs achats, ventes et changes. Rejoignez une communaut sre, vrifie et solidaire."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(J,{size:"lg",variant:"secondary",asChild:!0,children:s.jsxs(ze,{to:"/auth",children:[s.jsx(zt,{className:"w-4 h-4 mr-2"}),"Inscription vrifie"]})}),s.jsx(J,{size:"lg",variant:"outline",className:"border-white text-white bg-transparent hover:bg-white hover:text-primary",asChild:!0,children:s.jsx(ze,{to:"/listings",children:"Commencer  explorer"})})]})]})})]})};function km(t,[e,n]){return Math.min(n,Math.max(e,t))}function zy(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var xD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Kte="VisuallyHidden",Zte=x.forwardRef((t,e)=>s.jsx(Ze.span,{...t,ref:e,style:{...xD,...t.style}}));Zte.displayName=Kte;var Yte=[" ","Enter","ArrowUp","ArrowDown"],Qte=[" ","Enter"],Lc="Select",[Uy,$y,Xte]=np(Lc),[mh,que]=Sr(Lc,[Xte,ch]),By=ch(),[Jte,Ol]=mh(Lc),[ene,tne]=mh(Lc),yD=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:c,onValueChange:u,dir:d,name:f,autoComplete:p,disabled:g,required:_,form:N}=t,b=By(e),[S,w]=x.useState(null),[y,E]=x.useState(null),[A,O]=x.useState(!1),q=Yc(d),[R,V]=Os({prop:r,defaultProp:i??!1,onChange:a,caller:Lc}),[U,k]=Os({prop:o,defaultProp:c,onChange:u,caller:Lc}),F=x.useRef(null),D=S?N||!!S.closest("form"):!0,[P,H]=x.useState(new Set),ee=Array.from(P).map(Z=>Z.props.value).join(";");return s.jsx(dN,{...b,children:s.jsxs(Jte,{required:_,scope:e,trigger:S,onTriggerChange:w,valueNode:y,onValueNodeChange:E,valueNodeHasChildren:A,onValueNodeHasChildrenChange:O,contentId:As(),value:U,onValueChange:k,open:R,onOpenChange:V,dir:q,triggerPointerDownPosRef:F,disabled:g,children:[s.jsx(Uy.Provider,{scope:e,children:s.jsx(ene,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(Z=>{H(K=>new Set(K).add(Z))},[]),onNativeOptionRemove:x.useCallback(Z=>{H(K=>{const I=new Set(K);return I.delete(Z),I})},[]),children:n})}),D?s.jsxs(BD,{"aria-hidden":!0,required:_,tabIndex:-1,name:f,autoComplete:p,value:U,onChange:Z=>k(Z.target.value),disabled:g,form:N,children:[U===void 0?s.jsx("option",{value:""}):null,Array.from(P)]},ee):null]})})};yD.displayName=Lc;var _D="SelectTrigger",wD=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,a=By(n),o=Ol(_D,n),c=o.disabled||r,u=ht(e,o.onTriggerChange),d=$y(n),f=x.useRef("touch"),[p,g,_]=WD(b=>{const S=d().filter(E=>!E.disabled),w=S.find(E=>E.value===o.value),y=HD(S,b,w);y!==void 0&&o.onValueChange(y.value)}),N=b=>{c||(o.onOpenChange(!0),_()),b&&(o.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return s.jsx(Py,{asChild:!0,...a,children:s.jsx(Ze.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":qD(o.value)?"":void 0,...i,ref:u,onClick:Oe(i.onClick,b=>{b.currentTarget.focus(),f.current!=="mouse"&&N(b)}),onPointerDown:Oe(i.onPointerDown,b=>{f.current=b.pointerType;const S=b.target;S.hasPointerCapture(b.pointerId)&&S.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(N(b),b.preventDefault())}),onKeyDown:Oe(i.onKeyDown,b=>{const S=p.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&g(b.key),!(S&&b.key===" ")&&Yte.includes(b.key)&&(N(),b.preventDefault())})})})});wD.displayName=_D;var bD="SelectValue",jD=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...c}=t,u=Ol(bD,n),{onValueNodeHasChildrenChange:d}=u,f=a!==void 0,p=ht(e,u.onValueNodeChange);return Bn(()=>{d(f)},[d,f]),s.jsx(Ze.span,{...c,ref:p,style:{pointerEvents:"none"},children:qD(u.value)?s.jsx(s.Fragment,{children:o}):a})});jD.displayName=bD;var nne="SelectIcon",ND=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return s.jsx(Ze.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});ND.displayName=nne;var rne="SelectPortal",SD=t=>s.jsx(ap,{asChild:!0,...t});SD.displayName=rne;var Fc="SelectContent",ED=x.forwardRef((t,e)=>{const n=Ol(Fc,t.__scopeSelect),[r,i]=x.useState();if(Bn(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?Qd.createPortal(s.jsx(CD,{scope:t.__scopeSelect,children:s.jsx(Uy.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),a):null}return s.jsx(kD,{...t,ref:e})});ED.displayName=Fc;var gi=10,[CD,Dl]=mh(Fc),sne="SelectContentImpl",ine=wl("SelectContent.RemoveScroll"),kD=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:c,sideOffset:u,align:d,alignOffset:f,arrowPadding:p,collisionBoundary:g,collisionPadding:_,sticky:N,hideWhenDetached:b,avoidCollisions:S,...w}=t,y=Ol(Fc,n),[E,A]=x.useState(null),[O,q]=x.useState(null),R=ht(e,Ae=>A(Ae)),[V,U]=x.useState(null),[k,F]=x.useState(null),D=$y(n),[P,H]=x.useState(!1),ee=x.useRef(!1);x.useEffect(()=>{if(E)return Ay(E)},[E]),Sy();const Z=x.useCallback(Ae=>{const[se,...te]=D().map(oe=>oe.ref.current),[ie]=te.slice(-1),Y=document.activeElement;for(const oe of Ae)if(oe===Y||(oe==null||oe.scrollIntoView({block:"nearest"}),oe===se&&O&&(O.scrollTop=0),oe===ie&&O&&(O.scrollTop=O.scrollHeight),oe==null||oe.focus(),document.activeElement!==Y))return},[D,O]),K=x.useCallback(()=>Z([V,E]),[Z,V,E]);x.useEffect(()=>{P&&K()},[P,K]);const{onOpenChange:I,triggerPointerDownPosRef:z}=y;x.useEffect(()=>{if(E){let Ae={x:0,y:0};const se=ie=>{var Y,oe;Ae={x:Math.abs(Math.round(ie.pageX)-(((Y=z.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(ie.pageY)-(((oe=z.current)==null?void 0:oe.y)??0))}},te=ie=>{Ae.x<=10&&Ae.y<=10?ie.preventDefault():E.contains(ie.target)||I(!1),document.removeEventListener("pointermove",se),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",se),document.addEventListener("pointerup",te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",se),document.removeEventListener("pointerup",te,{capture:!0})}}},[E,I,z]),x.useEffect(()=>{const Ae=()=>I(!1);return window.addEventListener("blur",Ae),window.addEventListener("resize",Ae),()=>{window.removeEventListener("blur",Ae),window.removeEventListener("resize",Ae)}},[I]);const[B,X]=WD(Ae=>{const se=D().filter(Y=>!Y.disabled),te=se.find(Y=>Y.ref.current===document.activeElement),ie=HD(se,Ae,te);ie&&setTimeout(()=>ie.ref.current.focus())}),ue=x.useCallback((Ae,se,te)=>{const ie=!ee.current&&!te;(y.value!==void 0&&y.value===se||ie)&&(U(Ae),ie&&(ee.current=!0))},[y.value]),ge=x.useCallback(()=>E==null?void 0:E.focus(),[E]),Ee=x.useCallback((Ae,se,te)=>{const ie=!ee.current&&!te;(y.value!==void 0&&y.value===se||ie)&&F(Ae)},[y.value]),De=r==="popper"?gb:TD,$e=De===gb?{side:c,sideOffset:u,align:d,alignOffset:f,arrowPadding:p,collisionBoundary:g,collisionPadding:_,sticky:N,hideWhenDetached:b,avoidCollisions:S}:{};return s.jsx(CD,{scope:n,content:E,viewport:O,onViewportChange:q,itemRefCallback:ue,selectedItem:V,onItemLeave:ge,itemTextRefCallback:Ee,focusSelectedItem:K,selectedItemText:k,position:r,isPositioned:P,searchRef:B,children:s.jsx(lp,{as:ine,allowPinchZoom:!0,children:s.jsx(sp,{asChild:!0,trapped:y.open,onMountAutoFocus:Ae=>{Ae.preventDefault()},onUnmountAutoFocus:Oe(i,Ae=>{var se;(se=y.trigger)==null||se.focus({preventScroll:!0}),Ae.preventDefault()}),children:s.jsx(rp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Ae=>Ae.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(De,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Ae=>Ae.preventDefault(),...w,...$e,onPlaced:()=>H(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Oe(w.onKeyDown,Ae=>{const se=Ae.ctrlKey||Ae.altKey||Ae.metaKey;if(Ae.key==="Tab"&&Ae.preventDefault(),!se&&Ae.key.length===1&&X(Ae.key),["ArrowUp","ArrowDown","Home","End"].includes(Ae.key)){let ie=D().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(Ae.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ae.key)){const Y=Ae.target,oe=ie.indexOf(Y);ie=ie.slice(oe+1)}setTimeout(()=>Z(ie)),Ae.preventDefault()}})})})})})})});kD.displayName=sne;var ane="SelectItemAlignedPosition",TD=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,a=Ol(Fc,n),o=Dl(Fc,n),[c,u]=x.useState(null),[d,f]=x.useState(null),p=ht(e,R=>f(R)),g=$y(n),_=x.useRef(!1),N=x.useRef(!0),{viewport:b,selectedItem:S,selectedItemText:w,focusSelectedItem:y}=o,E=x.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&d&&b&&S&&w){const R=a.trigger.getBoundingClientRect(),V=d.getBoundingClientRect(),U=a.valueNode.getBoundingClientRect(),k=w.getBoundingClientRect();if(a.dir!=="rtl"){const Y=k.left-V.left,oe=U.left-Y,pe=R.left-oe,Ce=R.width+pe,we=Math.max(Ce,V.width),ne=window.innerWidth-gi,_e=km(oe,[gi,Math.max(gi,ne-we)]);c.style.minWidth=Ce+"px",c.style.left=_e+"px"}else{const Y=V.right-k.right,oe=window.innerWidth-U.right-Y,pe=window.innerWidth-R.right-oe,Ce=R.width+pe,we=Math.max(Ce,V.width),ne=window.innerWidth-gi,_e=km(oe,[gi,Math.max(gi,ne-we)]);c.style.minWidth=Ce+"px",c.style.right=_e+"px"}const F=g(),D=window.innerHeight-gi*2,P=b.scrollHeight,H=window.getComputedStyle(d),ee=parseInt(H.borderTopWidth,10),Z=parseInt(H.paddingTop,10),K=parseInt(H.borderBottomWidth,10),I=parseInt(H.paddingBottom,10),z=ee+Z+P+I+K,B=Math.min(S.offsetHeight*5,z),X=window.getComputedStyle(b),ue=parseInt(X.paddingTop,10),ge=parseInt(X.paddingBottom,10),Ee=R.top+R.height/2-gi,De=D-Ee,$e=S.offsetHeight/2,Ae=S.offsetTop+$e,se=ee+Z+Ae,te=z-se;if(se<=Ee){const Y=F.length>0&&S===F[F.length-1].ref.current;c.style.bottom="0px";const oe=d.clientHeight-b.offsetTop-b.offsetHeight,pe=Math.max(De,$e+(Y?ge:0)+oe+K),Ce=se+pe;c.style.height=Ce+"px"}else{const Y=F.length>0&&S===F[0].ref.current;c.style.top="0px";const pe=Math.max(Ee,ee+b.offsetTop+(Y?ue:0)+$e)+te;c.style.height=pe+"px",b.scrollTop=se-Ee+b.offsetTop}c.style.margin=`${gi}px 0`,c.style.minHeight=B+"px",c.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>_.current=!0)}},[g,a.trigger,a.valueNode,c,d,b,S,w,a.dir,r]);Bn(()=>E(),[E]);const[A,O]=x.useState();Bn(()=>{d&&O(window.getComputedStyle(d).zIndex)},[d]);const q=x.useCallback(R=>{R&&N.current===!0&&(E(),y==null||y(),N.current=!1)},[E,y]);return s.jsx(lne,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:_,onScrollButtonChange:q,children:s.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:s.jsx(Ze.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});TD.displayName=ane;var one="SelectPopperPosition",gb=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=gi,...a}=t,o=By(n);return s.jsx(hN,{...o,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});gb.displayName=one;var[lne,kN]=mh(Fc,{}),vb="SelectViewport",PD=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,a=Dl(vb,n),o=kN(vb,n),c=ht(e,a.onViewportChange),u=x.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Uy.Slot,{scope:n,children:s.jsx(Ze.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Oe(i.onScroll,d=>{const f=d.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:g}=o;if(g!=null&&g.current&&p){const _=Math.abs(u.current-f.scrollTop);if(_>0){const N=window.innerHeight-gi*2,b=parseFloat(p.style.minHeight),S=parseFloat(p.style.height),w=Math.max(b,S);if(w<N){const y=w+_,E=Math.min(N,y),A=y-E;p.style.height=E+"px",p.style.bottom==="0px"&&(f.scrollTop=A>0?A:0,p.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});PD.displayName=vb;var ID="SelectGroup",[cne,une]=mh(ID),dne=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=As();return s.jsx(cne,{scope:n,id:i,children:s.jsx(Ze.div,{role:"group","aria-labelledby":i,...r,ref:e})})});dne.displayName=ID;var AD="SelectLabel",RD=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=une(AD,n);return s.jsx(Ze.div,{id:i.id,...r,ref:e})});RD.displayName=AD;var hx="SelectItem",[hne,MD]=mh(hx),OD=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=t,c=Ol(hx,n),u=Dl(hx,n),d=c.value===r,[f,p]=x.useState(a??""),[g,_]=x.useState(!1),N=ht(e,y=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,y,r,i)}),b=As(),S=x.useRef("touch"),w=()=>{i||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(hne,{scope:n,value:r,disabled:i,textId:b,isSelected:d,onItemTextChange:x.useCallback(y=>{p(E=>E||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(Uy.ItemSlot,{scope:n,value:r,disabled:i,textValue:f,children:s.jsx(Ze.div,{role:"option","aria-labelledby":b,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:N,onFocus:Oe(o.onFocus,()=>_(!0)),onBlur:Oe(o.onBlur,()=>_(!1)),onClick:Oe(o.onClick,()=>{S.current!=="mouse"&&w()}),onPointerUp:Oe(o.onPointerUp,()=>{S.current==="mouse"&&w()}),onPointerDown:Oe(o.onPointerDown,y=>{S.current=y.pointerType}),onPointerMove:Oe(o.onPointerMove,y=>{var E;S.current=y.pointerType,i?(E=u.onItemLeave)==null||E.call(u):S.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Oe(o.onPointerLeave,y=>{var E;y.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:Oe(o.onKeyDown,y=>{var A;((A=u.searchRef)==null?void 0:A.current)!==""&&y.key===" "||(Qte.includes(y.key)&&w(),y.key===" "&&y.preventDefault())})})})})});OD.displayName=hx;var jf="SelectItemText",DD=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...a}=t,o=Ol(jf,n),c=Dl(jf,n),u=MD(jf,n),d=tne(jf,n),[f,p]=x.useState(null),g=ht(e,w=>p(w),u.onItemTextChange,w=>{var y;return(y=c.itemTextRefCallback)==null?void 0:y.call(c,w,u.value,u.disabled)}),_=f==null?void 0:f.textContent,N=x.useMemo(()=>s.jsx("option",{value:u.value,disabled:u.disabled,children:_},u.value),[u.disabled,u.value,_]),{onNativeOptionAdd:b,onNativeOptionRemove:S}=d;return Bn(()=>(b(N),()=>S(N)),[b,S,N]),s.jsxs(s.Fragment,{children:[s.jsx(Ze.span,{id:u.textId,...a,ref:g}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Qd.createPortal(a.children,o.valueNode):null]})});DD.displayName=jf;var LD="SelectItemIndicator",FD=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return MD(LD,n).isSelected?s.jsx(Ze.span,{"aria-hidden":!0,...r,ref:e}):null});FD.displayName=LD;var xb="SelectScrollUpButton",VD=x.forwardRef((t,e)=>{const n=Dl(xb,t.__scopeSelect),r=kN(xb,t.__scopeSelect),[i,a]=x.useState(!1),o=ht(e,r.onScrollButtonChange);return Bn(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=u.scrollTop>0;a(d)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?s.jsx(UD,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});VD.displayName=xb;var yb="SelectScrollDownButton",zD=x.forwardRef((t,e)=>{const n=Dl(yb,t.__scopeSelect),r=kN(yb,t.__scopeSelect),[i,a]=x.useState(!1),o=ht(e,r.onScrollButtonChange);return Bn(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<d;a(f)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?s.jsx(UD,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});zD.displayName=yb;var UD=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,a=Dl("SelectScrollButton",n),o=x.useRef(null),c=$y(n),u=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>u(),[u]),Bn(()=>{var f;const d=c().find(p=>p.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[c]),s.jsx(Ze.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Oe(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Oe(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Oe(i.onPointerLeave,()=>{u()})})}),fne="SelectSeparator",$D=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return s.jsx(Ze.div,{"aria-hidden":!0,...r,ref:e})});$D.displayName=fne;var _b="SelectArrow",mne=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=By(n),a=Ol(_b,n),o=Dl(_b,n);return a.open&&o.position==="popper"?s.jsx(fN,{...i,...r,ref:e}):null});mne.displayName=_b;var pne="SelectBubbleInput",BD=x.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=x.useRef(null),a=ht(r,i),o=zy(e);return x.useEffect(()=>{const c=i.current;if(!c)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&f){const p=new Event("change",{bubbles:!0});f.call(c,e),c.dispatchEvent(p)}},[o,e]),s.jsx(Ze.select,{...n,style:{...xD,...n.style},ref:a,defaultValue:e})});BD.displayName=pne;function qD(t){return t===""||t===void 0}function WD(t){const e=mr(t),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(o=>{const c=n.current+o;e(c),function u(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(c)},[e]),a=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function HD(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=gne(t,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function gne(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var vne=yD,GD=wD,xne=jD,yne=ND,_ne=SD,KD=ED,wne=PD,ZD=RD,YD=OD,bne=DD,jne=FD,QD=VD,XD=zD,JD=$D;const tn=vne,nn=xne,Ht=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(GD,{ref:r,className:st("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,s.jsx(yne,{asChild:!0,children:s.jsx(kX,{className:"h-4 w-4 opacity-50"})})]}));Ht.displayName=GD.displayName;const eL=x.forwardRef(({className:t,...e},n)=>s.jsx(QD,{ref:n,className:st("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(OX,{})}));eL.displayName=QD.displayName;const tL=x.forwardRef(({className:t,...e},n)=>s.jsx(XD,{ref:n,className:st("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(zO,{})}));tL.displayName=XD.displayName;const Gt=x.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>s.jsx(_ne,{children:s.jsxs(KD,{ref:i,className:st("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[s.jsx(eL,{}),s.jsx(wne,{className:st("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(tL,{})]})}));Gt.displayName=KD.displayName;const Nne=x.forwardRef(({className:t,...e},n)=>s.jsx(ZD,{ref:n,className:st("px-2 py-1.5 text-sm font-semibold",t),...e}));Nne.displayName=ZD.displayName;const Ke=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(YD,{ref:r,className:st("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(jne,{children:s.jsx(wN,{className:"h-4 w-4"})})}),s.jsx(bne,{children:e})]}));Ke.displayName=YD.displayName;const Sne=x.forwardRef(({className:t,...e},n)=>s.jsx(JD,{ref:n,className:st("-mx-1 my-1 h-px bg-muted",t),...e}));Sne.displayName=JD.displayName;var Ene="Separator",yk="horizontal",Cne=["horizontal","vertical"],nL=x.forwardRef((t,e)=>{const{decorative:n,orientation:r=yk,...i}=t,a=kne(r)?r:yk,c=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(Ze.div,{"data-orientation":a,...c,...i,ref:e})});nL.displayName=Ene;function kne(t){return Cne.includes(t)}var rL=nL;const Zs=x.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>s.jsx(rL,{ref:i,decorative:n,orientation:e,className:st("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Zs.displayName=rL.displayName;const __=[{value:"all",label:"Toutes catgories",icon:null},{value:"electronics",label:"lectronique",icon:Zc},{value:"vehicles",label:"Vhicules",icon:W4},{value:"real-estate",label:"Immobilier",icon:tx},{value:"fashion",label:"Mode",icon:eN},{value:"gaming",label:"Jeux & Jouets",icon:zG},{value:"baby",label:"Bb & Enfant",icon:TG},{value:"business",label:"quipement Pro",icon:B4}],Tne=[{value:"new",label:"Neuf"},{value:"like-new",label:"Comme neuf"},{value:"good",label:"Bon tat"},{value:"fair",label:"tat correct"},{value:"poor",label:"Mauvais tat"}],Pne=[{value:"relevance",label:"Pertinence"},{value:"date",label:"Plus rcent"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix dcroissant"}],Ine=()=>{var w;const[t,e]=z1(),{listings:n,loading:r,hasMore:i,fetchListings:a,searchListings:o}=dp(),[c,u]=x.useState({query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"}),[d,f]=x.useState("grid"),[p,g]=x.useState(!1);x.useEffect(()=>{const y={query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"};u(y),o(y)},[t,o]);const _=()=>{const y={...c};o(y);const E=new URLSearchParams;y.query&&E.set("q",y.query),y.category&&E.set("category",y.category),e(E)},N=(y,E)=>{const A={...c,[y]:E};u(A)},b=()=>{a(c,!1)},S=()=>{const y={query:"",sortBy:"date"};u(y),o(y),e({})};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Toutes les annonces"}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{type:"text",placeholder:"Rechercher des articles...",value:c.query||"",onChange:y=>N("query",y.target.value),onKeyPress:y=>y.key==="Enter"&&_(),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{onClick:_,className:"whitespace-nowrap",children:[s.jsx(_r,{className:"w-4 h-4 mr-2"}),"Rechercher"]}),s.jsxs(J,{variant:"outline",onClick:()=>g(!p),className:"lg:hidden",children:[s.jsx(yy,{className:"w-4 h-4 mr-2"}),"Filtres"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:__.slice(1,6).map(y=>{const E=y.icon;return s.jsxs(J,{variant:c.category===y.value?"default":"outline",size:"sm",onClick:()=>N("category",c.category===y.value?"":y.value),className:"flex items-center gap-2",children:[E&&s.jsx(E,{className:"w-4 h-4"}),y.label]},y.value)})})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsx("aside",{className:`lg:w-80 space-y-6 ${p?"block":"hidden lg:block"}`,children:s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Filtres"}),s.jsx(J,{variant:"ghost",size:"sm",onClick:S,children:"Effacer"})]})}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Catgorie"}),s.jsxs(tn,{value:c.category||"all",onValueChange:y=>N("category",y==="all"?"":y),children:[s.jsx(Ht,{children:s.jsx(nn,{})}),s.jsx(Gt,{children:__.map(y=>{const E=y.icon;return s.jsx(Ke,{value:y.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[E&&s.jsx(E,{className:"w-4 h-4"}),y.label]})},y.value)})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Prix"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ge,{type:"number",placeholder:"Min",value:c.minPrice||"",onChange:y=>N("minPrice",y.target.value?parseInt(y.target.value):void 0)}),s.jsx(Ge,{type:"number",placeholder:"Max",value:c.maxPrice||"",onChange:y=>N("maxPrice",y.target.value?parseInt(y.target.value):void 0)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"tat"}),s.jsx("div",{className:"space-y-2",children:Tne.map(y=>{var E;return s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:((E=c.condition)==null?void 0:E.includes(y.value))||!1,onChange:A=>{const O=c.condition||[],q=A.target.checked?[...O,y.value]:O.filter(R=>R!==y.value);N("condition",q.length>0?q:void 0)},className:"rounded border-border"}),s.jsx("span",{className:"text-sm",children:y.label})]},y.value)})})]}),s.jsx(J,{onClick:_,className:"w-full",children:"Appliquer les filtres"})]})]})}),s.jsxs("main",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-muted-foreground",children:[n.length," rsultat(s)"]}),(c.query||c.category||c.minPrice||c.maxPrice)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtres actifs:"}),c.query&&s.jsxs(at,{variant:"secondary",children:['"',c.query,'"']}),c.category&&s.jsx(at,{variant:"secondary",children:(w=__.find(y=>y.value===c.category))==null?void 0:w.label})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(tn,{value:c.sortBy||"date",onValueChange:y=>N("sortBy",y),children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{})}),s.jsx(Gt,{children:Pne.map(y=>s.jsx(Ke,{value:y.value,children:y.label},y.value))})]}),s.jsx(Zs,{orientation:"vertical",className:"h-6"}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx(J,{variant:d==="grid"?"default":"ghost",size:"icon",onClick:()=>f("grid"),className:"rounded-none w-15 h-15",title:"Vue en grille",children:s.jsx(Z4,{className:"w-4 h-4"})}),s.jsx(J,{variant:d==="list"?"default":"ghost",size:"icon",onClick:()=>f("list"),className:"rounded-none w-15 h-15",title:"Vue en liste",children:s.jsx(X4,{className:"w-4 h-4"})})]})]})]}),r&&n.length===0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((y,E)=>s.jsxs(fe,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(me,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},E))}):n.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`grid gap-6 ${d==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:n.map(y=>s.jsx(Cm,{listing:y},y.id))}),i&&s.jsx("div",{className:"text-center mt-8",children:s.jsx(J,{onClick:b,disabled:r,variant:"outline",size:"lg",children:r?"Chargement...":"Charger plus"})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun rsultat trouv"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos critres de recherche"}),s.jsx(J,{onClick:S,variant:"outline",children:"Effacer les filtres"})]})]})]})]})};var qy="Dialog",[sL,Wue]=Sr(qy),[Ane,Di]=sL(qy),iL=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,c=x.useRef(null),u=x.useRef(null),[d,f]=Os({prop:r,defaultProp:i??!1,onChange:a,caller:qy});return s.jsx(Ane,{scope:e,triggerRef:c,contentRef:u,contentId:As(),titleId:As(),descriptionId:As(),open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(p=>!p),[f]),modal:o,children:n})};iL.displayName=qy;var aL="DialogTrigger",oL=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(aL,n),a=ht(e,i.triggerRef);return s.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":IN(i.open),...r,ref:a,onClick:Oe(t.onClick,i.onOpenToggle)})});oL.displayName=aL;var TN="DialogPortal",[Rne,lL]=sL(TN,{forceMount:void 0}),cL=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,a=Di(TN,e);return s.jsx(Rne,{scope:e,forceMount:n,children:x.Children.map(r,o=>s.jsx(Er,{present:n||a.open,children:s.jsx(ap,{asChild:!0,container:i,children:o})}))})};cL.displayName=TN;var fx="DialogOverlay",uL=x.forwardRef((t,e)=>{const n=lL(fx,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=Di(fx,t.__scopeDialog);return a.modal?s.jsx(Er,{present:r||a.open,children:s.jsx(One,{...i,ref:e})}):null});uL.displayName=fx;var Mne=wl("DialogOverlay.RemoveScroll"),One=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(fx,n);return s.jsx(lp,{as:Mne,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(Ze.div,{"data-state":IN(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Vc="DialogContent",dL=x.forwardRef((t,e)=>{const n=lL(Vc,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=Di(Vc,t.__scopeDialog);return s.jsx(Er,{present:r||a.open,children:a.modal?s.jsx(Dne,{...i,ref:e}):s.jsx(Lne,{...i,ref:e})})});dL.displayName=Vc;var Dne=x.forwardRef((t,e)=>{const n=Di(Vc,t.__scopeDialog),r=x.useRef(null),i=ht(e,n.contentRef,r);return x.useEffect(()=>{const a=r.current;if(a)return Ay(a)},[]),s.jsx(hL,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oe(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Oe(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&a.preventDefault()}),onFocusOutside:Oe(t.onFocusOutside,a=>a.preventDefault())})}),Lne=x.forwardRef((t,e)=>{const n=Di(Vc,t.__scopeDialog),r=x.useRef(!1),i=x.useRef(!1);return s.jsx(hL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,c;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),hL=x.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,c=Di(Vc,n),u=x.useRef(null),d=ht(e,u);return Sy(),s.jsxs(s.Fragment,{children:[s.jsx(sp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(rp,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":IN(c.open),...o,ref:d,onDismiss:()=>c.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Fne,{titleId:c.titleId}),s.jsx(zne,{contentRef:u,descriptionId:c.descriptionId})]})]})}),PN="DialogTitle",fL=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(PN,n);return s.jsx(Ze.h2,{id:i.titleId,...r,ref:e})});fL.displayName=PN;var mL="DialogDescription",pL=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(mL,n);return s.jsx(Ze.p,{id:i.descriptionId,...r,ref:e})});pL.displayName=mL;var gL="DialogClose",vL=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(gL,n);return s.jsx(Ze.button,{type:"button",...r,ref:e,onClick:Oe(t.onClick,()=>i.onOpenChange(!1))})});vL.displayName=gL;function IN(t){return t?"open":"closed"}var xL="DialogTitleWarning",[Hue,yL]=BK(xL,{contentName:Vc,titleName:PN,docsSlug:"dialog"}),Fne=({titleId:t})=>{const e=yL(xL),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Vne="DialogDescriptionWarning",zne=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yL(Vne).contentName}}.`;return x.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Une=iL,$ne=oL,Bne=cL,_L=uL,wL=dL,bL=fL,jL=pL,qne=vL;const da=Une,fd=$ne,Wne=Bne,NL=x.forwardRef(({className:t,...e},n)=>s.jsx(_L,{ref:n,className:st("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));NL.displayName=_L.displayName;const Ci=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(Wne,{children:[s.jsx(NL,{}),s.jsxs(wL,{ref:r,className:st("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,s.jsxs(qne,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(LX,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ci.displayName=wL.displayName;const ha=({className:t,...e})=>s.jsx("div",{className:st("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ha.displayName="DialogHeader";const rv=({className:t,...e})=>s.jsx("div",{className:st("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});rv.displayName="DialogFooter";const ki=x.forwardRef(({className:t,...e},n)=>s.jsx(bL,{ref:n,className:st("text-lg font-semibold leading-none tracking-tight",t),...e}));ki.displayName=bL.displayName;const xc=x.forwardRef(({className:t,...e},n)=>s.jsx(jL,{ref:n,className:st("text-sm text-muted-foreground",t),...e}));xc.displayName=jL.displayName;const ri=x.forwardRef(({className:t,...e},n)=>s.jsx("textarea",{className:st("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));ri.displayName="Textarea";var Hne="Label",SL=x.forwardRef((t,e)=>s.jsx(Ze.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));SL.displayName=Hne;var EL=SL;const Gne=Ny("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ie=x.forwardRef(({className:t,...e},n)=>s.jsx(EL,{ref:n,className:st(Gne(),t),...e}));Ie.displayName=EL.displayName;const Kne=Ny("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$t=x.forwardRef(({className:t,variant:e,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:st(Kne({variant:e}),t),...n}));$t.displayName="Alert";const Zne=x.forwardRef(({className:t,...e},n)=>s.jsx("h5",{ref:n,className:st("mb-1 font-medium leading-none tracking-tight",t),...e}));Zne.displayName="AlertTitle";const Bt=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("text-sm [&_p]:leading-relaxed",t),...e}));Bt.displayName="AlertDescription";var dt=function(){return dt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dt.apply(this,arguments)};function Yne(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function CL(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function hp(t){return t.mode==="multiple"}function fp(t){return t.mode==="range"}function Wy(t){return t.mode==="single"}var Qne={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Xne(t,e){return or(t,"LLLL y",e)}function Jne(t,e){return or(t,"d",e)}function ere(t,e){return or(t,"LLLL",e)}function tre(t){return"".concat(t)}function nre(t,e){return or(t,"cccccc",e)}function rre(t,e){return or(t,"yyyy",e)}var sre=Object.freeze({__proto__:null,formatCaption:Xne,formatDay:Jne,formatMonthCaption:ere,formatWeekNumber:tre,formatWeekdayName:nre,formatYearCaption:rre}),ire=function(t,e,n){return or(t,"do MMMM (EEEE)",n)},are=function(){return"Month: "},ore=function(){return"Go to next month"},lre=function(){return"Go to previous month"},cre=function(t,e){return or(t,"cccc",e)},ure=function(t){return"Week n. ".concat(t)},dre=function(){return"Year: "},hre=Object.freeze({__proto__:null,labelDay:ire,labelMonthDropdown:are,labelNext:ore,labelPrevious:lre,labelWeekNumber:ure,labelWeekday:cre,labelYearDropdown:dre});function fre(){var t="buttons",e=Qne,n=EN,r={},i={},a=1,o={},c=new Date;return{captionLayout:t,classNames:e,formatters:sre,labels:hre,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:a,styles:o,today:c,mode:"default"}}function mre(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,a=t.fromDate,o=t.toDate;return r?a=xs(r):e&&(a=new Date(e,0,1)),i?o=Vy(i):n&&(o=new Date(n,11,31)),{fromDate:a?Dd(a):void 0,toDate:o?Dd(o):void 0}}var kL=x.createContext(void 0);function pre(t){var e,n=t.initialProps,r=fre(),i=mre(n),a=i.fromDate,o=i.toDate,c=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;c!=="buttons"&&(!a||!o)&&(c="buttons");var u;(Wy(n)||hp(n)||fp(n))&&(u=n.onSelect);var d=dt(dt(dt({},r),n),{captionLayout:c,classNames:dt(dt({},r.classNames),n.classNames),components:dt({},n.components),formatters:dt(dt({},r.formatters),n.formatters),fromDate:a,labels:dt(dt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:dt(dt({},r.modifiers),n.modifiers),modifiersClassNames:dt(dt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:u,styles:dt(dt({},r.styles),n.styles),toDate:o});return s.jsx(kL.Provider,{value:d,children:t.children})}function cn(){var t=x.useContext(kL);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function TL(t){var e=cn(),n=e.locale,r=e.classNames,i=e.styles,a=e.formatters.formatCaption;return s.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function gre(t){return s.jsx("svg",dt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function PL(t){var e,n,r=t.onChange,i=t.value,a=t.children,o=t.caption,c=t.className,u=t.style,d=cn(),f=(n=(e=d.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:gre;return s.jsxs("div",{className:c,style:u,children:[s.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),s.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:i,onChange:r,children:a}),s.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(f,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function vre(t){var e,n=cn(),r=n.fromDate,i=n.toDate,a=n.styles,o=n.locale,c=n.formatters.formatMonthCaption,u=n.classNames,d=n.components,f=n.labels.labelMonthDropdown;if(!r)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});var p=[];if(Gee(r,i))for(var g=xs(r),_=r.getMonth();_<=i.getMonth();_++)p.push(y_(g,_));else for(var g=xs(new Date),_=0;_<=11;_++)p.push(y_(g,_));var N=function(S){var w=Number(S.target.value),y=y_(xs(t.displayMonth),w);t.onChange(y)},b=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:PL;return s.jsx(b,{name:"months","aria-label":f(),className:u.dropdown_month,style:a.dropdown_month,onChange:N,value:t.displayMonth.getMonth(),caption:c(t.displayMonth,{locale:o}),children:p.map(function(S){return s.jsx("option",{value:S.getMonth(),children:c(S,{locale:o})},S.getMonth())})})}function xre(t){var e,n=t.displayMonth,r=cn(),i=r.fromDate,a=r.toDate,o=r.locale,c=r.styles,u=r.classNames,d=r.components,f=r.formatters.formatYearCaption,p=r.labels.labelYearDropdown,g=[];if(!i)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});for(var _=i.getFullYear(),N=a.getFullYear(),b=_;b<=N;b++)g.push(gk(lD(new Date),b));var S=function(y){var E=gk(xs(n),Number(y.target.value));t.onChange(E)},w=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:PL;return s.jsx(w,{name:"years","aria-label":p(),className:u.dropdown_year,style:c.dropdown_year,onChange:S,value:n.getFullYear(),caption:f(n,{locale:o}),children:g.map(function(y){return s.jsx("option",{value:y.getFullYear(),children:f(y,{locale:o})},y.getFullYear())})})}function yre(t,e){var n=x.useState(t),r=n[0],i=n[1],a=e===void 0?r:e;return[a,i]}function _re(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,a=t.toDate,o=t.fromDate,c=t.numberOfMonths,u=c===void 0?1:c;if(a&&Fd(a,i)<0){var d=-1*(u-1);i=Ri(a,d)}return o&&Fd(i,o)<0&&(i=o),xs(i)}function wre(){var t=cn(),e=_re(t),n=yre(e,t.month),r=n[0],i=n[1],a=function(o){var c;if(!t.disableNavigation){var u=xs(o);i(u),(c=t.onMonthChange)===null||c===void 0||c.call(t,u)}};return[r,a]}function bre(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=xs(t),a=xs(Ri(i,r)),o=Fd(a,i),c=[],u=0;u<o;u++){var d=Ri(i,u);c.push(d)}return n&&(c=c.reverse()),c}function jre(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,c=xs(t);if(!n)return Ri(c,o);var u=Fd(n,t);if(!(u<a))return Ri(c,o)}}function Nre(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,c=xs(t);if(!n)return Ri(c,-o);var u=Fd(c,n);if(!(u<=0))return Ri(c,-o)}}var IL=x.createContext(void 0);function Sre(t){var e=cn(),n=wre(),r=n[0],i=n[1],a=bre(r,e),o=jre(r,e),c=Nre(r,e),u=function(p){return a.some(function(g){return CN(p,g)})},d=function(p,g){u(p)||(g&&pD(p,g)?i(Ri(p,1+e.numberOfMonths*-1)):i(p))},f={currentMonth:r,displayMonths:a,goToMonth:i,goToDate:d,previousMonth:c,nextMonth:o,isDateDisplayed:u};return s.jsx(IL.Provider,{value:f,children:t.children})}function mp(){var t=x.useContext(IL);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function _k(t){var e,n=cn(),r=n.classNames,i=n.styles,a=n.components,o=mp().goToMonth,c=function(f){o(Ri(f,t.displayIndex?-t.displayIndex:0))},u=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:TL,d=s.jsx(u,{id:t.id,displayMonth:t.displayMonth});return s.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[s.jsx("div",{className:r.vhidden,children:d}),s.jsx(vre,{onChange:c,displayMonth:t.displayMonth}),s.jsx(xre,{onChange:c,displayMonth:t.displayMonth})]})}function Ere(t){return s.jsx("svg",dt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Cre(t){return s.jsx("svg",dt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var mx=x.forwardRef(function(t,e){var n=cn(),r=n.classNames,i=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var o=a.join(" "),c=dt(dt({},i.button_reset),i.button);return t.style&&Object.assign(c,t.style),s.jsx("button",dt({},t,{ref:e,type:"button",className:o,style:c}))});function kre(t){var e,n,r=cn(),i=r.dir,a=r.locale,o=r.classNames,c=r.styles,u=r.labels,d=u.labelPrevious,f=u.labelNext,p=r.components;if(!t.nextMonth&&!t.previousMonth)return s.jsx(s.Fragment,{});var g=d(t.previousMonth,{locale:a}),_=[o.nav_button,o.nav_button_previous].join(" "),N=f(t.nextMonth,{locale:a}),b=[o.nav_button,o.nav_button_next].join(" "),S=(e=p==null?void 0:p.IconRight)!==null&&e!==void 0?e:Cre,w=(n=p==null?void 0:p.IconLeft)!==null&&n!==void 0?n:Ere;return s.jsxs("div",{className:o.nav,style:c.nav,children:[!t.hidePrevious&&s.jsx(mx,{name:"previous-month","aria-label":g,className:_,style:c.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?s.jsx(S,{className:o.nav_icon,style:c.nav_icon}):s.jsx(w,{className:o.nav_icon,style:c.nav_icon})}),!t.hideNext&&s.jsx(mx,{name:"next-month","aria-label":N,className:b,style:c.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?s.jsx(w,{className:o.nav_icon,style:c.nav_icon}):s.jsx(S,{className:o.nav_icon,style:c.nav_icon})})]})}function wk(t){var e=cn().numberOfMonths,n=mp(),r=n.previousMonth,i=n.nextMonth,a=n.goToMonth,o=n.displayMonths,c=o.findIndex(function(N){return CN(t.displayMonth,N)}),u=c===0,d=c===o.length-1,f=e>1&&(u||!d),p=e>1&&(d||!u),g=function(){r&&a(r)},_=function(){i&&a(i)};return s.jsx(kre,{displayMonth:t.displayMonth,hideNext:f,hidePrevious:p,nextMonth:i,previousMonth:r,onPreviousClick:g,onNextClick:_})}function Tre(t){var e,n=cn(),r=n.classNames,i=n.disableNavigation,a=n.styles,o=n.captionLayout,c=n.components,u=(e=c==null?void 0:c.CaptionLabel)!==null&&e!==void 0?e:TL,d;return i?d=s.jsx(u,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?d=s.jsx(_k,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?d=s.jsxs(s.Fragment,{children:[s.jsx(_k,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),s.jsx(wk,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=s.jsxs(s.Fragment,{children:[s.jsx(u,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(wk,{displayMonth:t.displayMonth,id:t.id})]}),s.jsx("div",{className:r.caption,style:a.caption,children:d})}function Pre(t){var e=cn(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?s.jsx("tfoot",{className:i,style:r.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:n})})}):s.jsx(s.Fragment,{})}function Ire(t,e,n){for(var r=n?Dc(new Date):va(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var o=Gr(r,a);i.push(o)}return i}function Are(){var t=cn(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,o=t.ISOWeek,c=t.formatters.formatWeekdayName,u=t.labels.labelWeekday,d=Ire(i,a,o);return s.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&s.jsx("td",{style:n.head_cell,className:e.head_cell}),d.map(function(f,p){return s.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":u(f,{locale:i}),children:c(f,{locale:i})},p)})]})}function Rre(){var t,e=cn(),n=e.classNames,r=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:Are;return s.jsx("thead",{style:r.head,className:n.head,children:s.jsx(a,{})})}function Mre(t){var e=cn(),n=e.locale,r=e.formatters.formatDay;return s.jsx(s.Fragment,{children:r(t.date,{locale:n})})}var AN=x.createContext(void 0);function Ore(t){if(!hp(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return s.jsx(AN.Provider,{value:e,children:t.children})}return s.jsx(Dre,{initialProps:t.initialProps,children:t.children})}function Dre(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,a=e.max,o=function(d,f,p){var g,_;(g=e.onDayClick)===null||g===void 0||g.call(e,d,f,p);var N=!!(f.selected&&i&&(r==null?void 0:r.length)===i);if(!N){var b=!!(!f.selected&&a&&(r==null?void 0:r.length)===a);if(!b){var S=r?CL([],r):[];if(f.selected){var w=S.findIndex(function(y){return fs(d,y)});S.splice(w,1)}else S.push(d);(_=e.onSelect)===null||_===void 0||_.call(e,S,d,f,p)}}},c={disabled:[]};r&&c.disabled.push(function(d){var f=a&&r.length>a-1,p=r.some(function(g){return fs(g,d)});return!!(f&&!p)});var u={selected:r,onDayClick:o,modifiers:c};return s.jsx(AN.Provider,{value:u,children:n})}function RN(){var t=x.useContext(AN);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Lre(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?fs(i,t)&&fs(r,t)?void 0:fs(i,t)?{from:i,to:void 0}:fs(r,t)?void 0:pb(r,t)?{from:t,to:i}:{from:r,to:t}:i?pb(t,i)?{from:i,to:t}:{from:t,to:i}:r?pD(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var MN=x.createContext(void 0);function Fre(t){if(!fp(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(MN.Provider,{value:e,children:t.children})}return s.jsx(Vre,{initialProps:t.initialProps,children:t.children})}function Vre(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},a=i.from,o=i.to,c=e.min,u=e.max,d=function(_,N,b){var S,w;(S=e.onDayClick)===null||S===void 0||S.call(e,_,N,b);var y=Lre(_,r);(w=e.onSelect)===null||w===void 0||w.call(e,y,_,N,b)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(f.range_start=[a],o?(f.range_end=[o],fs(a,o)||(f.range_middle=[{after:a,before:o}])):f.range_end=[a]):o&&(f.range_start=[o],f.range_end=[o]),c&&(a&&!o&&f.disabled.push({after:x_(a,c-1),before:Gr(a,c-1)}),a&&o&&f.disabled.push({after:a,before:Gr(a,c-1)}),!a&&o&&f.disabled.push({after:x_(o,c-1),before:Gr(o,c-1)})),u){if(a&&!o&&(f.disabled.push({before:Gr(a,-u+1)}),f.disabled.push({after:Gr(a,u-1)})),a&&o){var p=ta(o,a)+1,g=u-p;f.disabled.push({before:x_(a,g)}),f.disabled.push({after:Gr(o,g)})}!a&&o&&(f.disabled.push({before:Gr(o,-u+1)}),f.disabled.push({after:Gr(o,u-1)}))}return s.jsx(MN.Provider,{value:{selected:r,onDayClick:d,modifiers:f},children:n})}function ON(){var t=x.useContext(MN);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function sv(t){return Array.isArray(t)?CL([],t):t!==void 0?[t]:[]}function zre(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=sv(i)}),e}var Mi;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Mi||(Mi={}));var Ure=Mi.Selected,Da=Mi.Disabled,$re=Mi.Hidden,Bre=Mi.Today,w_=Mi.RangeEnd,b_=Mi.RangeMiddle,j_=Mi.RangeStart,qre=Mi.Outside;function Wre(t,e,n){var r,i=(r={},r[Ure]=sv(t.selected),r[Da]=sv(t.disabled),r[$re]=sv(t.hidden),r[Bre]=[t.today],r[w_]=[],r[b_]=[],r[j_]=[],r[qre]=[],r);return t.fromDate&&i[Da].push({before:t.fromDate}),t.toDate&&i[Da].push({after:t.toDate}),hp(t)?i[Da]=i[Da].concat(e.modifiers[Da]):fp(t)&&(i[Da]=i[Da].concat(n.modifiers[Da]),i[j_]=n.modifiers[j_],i[b_]=n.modifiers[b_],i[w_]=n.modifiers[w_]),i}var AL=x.createContext(void 0);function Hre(t){var e=cn(),n=RN(),r=ON(),i=Wre(e,n,r),a=zre(e.modifiers),o=dt(dt({},i),a);return s.jsx(AL.Provider,{value:o,children:t.children})}function RL(){var t=x.useContext(AL);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Gre(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Kre(t){return!!(t&&typeof t=="object"&&"from"in t)}function Zre(t){return!!(t&&typeof t=="object"&&"after"in t)}function Yre(t){return!!(t&&typeof t=="object"&&"before"in t)}function Qre(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Xre(t,e){var n,r=e.from,i=e.to;if(r&&i){var a=ta(i,r)<0;a&&(n=[i,r],r=n[0],i=n[1]);var o=ta(t,r)>=0&&ta(i,t)>=0;return o}return i?fs(i,t):r?fs(r,t):!1}function Jre(t){return NN(t)}function ese(t){return Array.isArray(t)&&t.every(NN)}function tse(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(Jre(n))return fs(t,n);if(ese(n))return n.includes(t);if(Kre(n))return Xre(t,n);if(Qre(n))return n.dayOfWeek.includes(t.getDay());if(Gre(n)){var r=ta(n.before,t),i=ta(n.after,t),a=r>0,o=i<0,c=pb(n.before,n.after);return c?o&&a:a||o}return Zre(n)?ta(t,n.after)>0:Yre(n)?ta(n.before,t)>0:typeof n=="function"?n(t):!1})}function DN(t,e,n){var r=Object.keys(e).reduce(function(a,o){var c=e[o];return tse(t,c)&&a.push(o),a},[]),i={};return r.forEach(function(a){return i[a]=!0}),n&&!CN(t,n)&&(i.outside=!0),i}function nse(t,e){for(var n=xs(t[0]),r=Vy(t[t.length-1]),i,a,o=n;o<=r;){var c=DN(o,e),u=!c.disabled&&!c.hidden;if(!u){o=Gr(o,1);continue}if(c.selected)return o;c.today&&!a&&(a=o),i||(i=o),o=Gr(o,1)}return a||i}var rse=365;function ML(t,e){var n=e.moveBy,r=e.direction,i=e.context,a=e.modifiers,o=e.retry,c=o===void 0?{count:0,lastFocused:t}:o,u=i.weekStartsOn,d=i.fromDate,f=i.toDate,p=i.locale,g={day:Gr,week:mb,month:Ri,year:DJ,startOfWeek:function(S){return i.ISOWeek?Dc(S):va(S,{locale:p,weekStartsOn:u})},endOfWeek:function(S){return i.ISOWeek?cD(S):SN(S,{locale:p,weekStartsOn:u})}},_=g[n](t,r==="after"?1:-1);r==="before"&&d?_=LJ([d,_]):r==="after"&&f&&(_=FJ([f,_]));var N=!0;if(a){var b=DN(_,a);N=!b.disabled&&!b.hidden}return N?_:c.count>rse?c.lastFocused:ML(_,{moveBy:n,direction:r,context:i,modifiers:a,retry:dt(dt({},c),{count:c.count+1})})}var OL=x.createContext(void 0);function sse(t){var e=mp(),n=RL(),r=x.useState(),i=r[0],a=r[1],o=x.useState(),c=o[0],u=o[1],d=nse(e.displayMonths,n),f=i??(c&&e.isDateDisplayed(c))?c:d,p=function(){u(i),a(void 0)},g=function(S){a(S)},_=cn(),N=function(S,w){if(i){var y=ML(i,{moveBy:S,direction:w,context:_,modifiers:n});fs(i,y)||(e.goToDate(y,i),g(y))}},b={focusedDay:i,focusTarget:f,blur:p,focus:g,focusDayAfter:function(){return N("day","after")},focusDayBefore:function(){return N("day","before")},focusWeekAfter:function(){return N("week","after")},focusWeekBefore:function(){return N("week","before")},focusMonthBefore:function(){return N("month","before")},focusMonthAfter:function(){return N("month","after")},focusYearBefore:function(){return N("year","before")},focusYearAfter:function(){return N("year","after")},focusStartOfWeek:function(){return N("startOfWeek","before")},focusEndOfWeek:function(){return N("endOfWeek","after")}};return s.jsx(OL.Provider,{value:b,children:t.children})}function LN(){var t=x.useContext(OL);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function ise(t,e){var n=RL(),r=DN(t,n,e);return r}var FN=x.createContext(void 0);function ase(t){if(!Wy(t.initialProps)){var e={selected:void 0};return s.jsx(FN.Provider,{value:e,children:t.children})}return s.jsx(ose,{initialProps:t.initialProps,children:t.children})}function ose(t){var e=t.initialProps,n=t.children,r=function(a,o,c){var u,d,f;if((u=e.onDayClick)===null||u===void 0||u.call(e,a,o,c),o.selected&&!e.required){(d=e.onSelect)===null||d===void 0||d.call(e,void 0,a,o,c);return}(f=e.onSelect)===null||f===void 0||f.call(e,a,a,o,c)},i={selected:e.selected,onDayClick:r};return s.jsx(FN.Provider,{value:i,children:n})}function DL(){var t=x.useContext(FN);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function lse(t,e){var n=cn(),r=DL(),i=RN(),a=ON(),o=LN(),c=o.focusDayAfter,u=o.focusDayBefore,d=o.focusWeekAfter,f=o.focusWeekBefore,p=o.blur,g=o.focus,_=o.focusMonthBefore,N=o.focusMonthAfter,b=o.focusYearBefore,S=o.focusYearAfter,w=o.focusStartOfWeek,y=o.focusEndOfWeek,E=function(K){var I,z,B,X;Wy(n)?(I=r.onDayClick)===null||I===void 0||I.call(r,t,e,K):hp(n)?(z=i.onDayClick)===null||z===void 0||z.call(i,t,e,K):fp(n)?(B=a.onDayClick)===null||B===void 0||B.call(a,t,e,K):(X=n.onDayClick)===null||X===void 0||X.call(n,t,e,K)},A=function(K){var I;g(t),(I=n.onDayFocus)===null||I===void 0||I.call(n,t,e,K)},O=function(K){var I;p(),(I=n.onDayBlur)===null||I===void 0||I.call(n,t,e,K)},q=function(K){var I;(I=n.onDayMouseEnter)===null||I===void 0||I.call(n,t,e,K)},R=function(K){var I;(I=n.onDayMouseLeave)===null||I===void 0||I.call(n,t,e,K)},V=function(K){var I;(I=n.onDayPointerEnter)===null||I===void 0||I.call(n,t,e,K)},U=function(K){var I;(I=n.onDayPointerLeave)===null||I===void 0||I.call(n,t,e,K)},k=function(K){var I;(I=n.onDayTouchCancel)===null||I===void 0||I.call(n,t,e,K)},F=function(K){var I;(I=n.onDayTouchEnd)===null||I===void 0||I.call(n,t,e,K)},D=function(K){var I;(I=n.onDayTouchMove)===null||I===void 0||I.call(n,t,e,K)},P=function(K){var I;(I=n.onDayTouchStart)===null||I===void 0||I.call(n,t,e,K)},H=function(K){var I;(I=n.onDayKeyUp)===null||I===void 0||I.call(n,t,e,K)},ee=function(K){var I;switch(K.key){case"ArrowLeft":K.preventDefault(),K.stopPropagation(),n.dir==="rtl"?c():u();break;case"ArrowRight":K.preventDefault(),K.stopPropagation(),n.dir==="rtl"?u():c();break;case"ArrowDown":K.preventDefault(),K.stopPropagation(),d();break;case"ArrowUp":K.preventDefault(),K.stopPropagation(),f();break;case"PageUp":K.preventDefault(),K.stopPropagation(),K.shiftKey?b():_();break;case"PageDown":K.preventDefault(),K.stopPropagation(),K.shiftKey?S():N();break;case"Home":K.preventDefault(),K.stopPropagation(),w();break;case"End":K.preventDefault(),K.stopPropagation(),y();break}(I=n.onDayKeyDown)===null||I===void 0||I.call(n,t,e,K)},Z={onClick:E,onFocus:A,onBlur:O,onKeyDown:ee,onKeyUp:H,onMouseEnter:q,onMouseLeave:R,onPointerEnter:V,onPointerLeave:U,onTouchCancel:k,onTouchEnd:F,onTouchMove:D,onTouchStart:P};return Z}function cse(){var t=cn(),e=DL(),n=RN(),r=ON(),i=Wy(t)?e.selected:hp(t)?n.selected:fp(t)?r.selected:void 0;return i}function use(t){return Object.values(Mi).includes(t)}function dse(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(use(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function hse(t,e){var n=dt({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=dt(dt({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function fse(t,e,n){var r,i,a,o=cn(),c=LN(),u=ise(t,e),d=lse(t,u),f=cse(),p=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var q;u.outside||c.focusedDay&&p&&fs(c.focusedDay,t)&&((q=n.current)===null||q===void 0||q.focus())},[c.focusedDay,t,n,p,u.outside]);var g=dse(o,u).join(" "),_=hse(o,u),N=!!(u.outside&&!o.showOutsideDays||u.hidden),b=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:Mre,S=s.jsx(b,{date:t,displayMonth:e,activeModifiers:u}),w={style:_,className:g,children:S,role:"gridcell"},y=c.focusTarget&&fs(c.focusTarget,t)&&!u.outside,E=c.focusedDay&&fs(c.focusedDay,t),A=dt(dt(dt({},w),(r={disabled:u.disabled,role:"gridcell"},r["aria-selected"]=u.selected,r.tabIndex=E||y?0:-1,r)),d),O={isButton:p,isHidden:N,activeModifiers:u,selectedDays:f,buttonProps:A,divProps:w};return O}function mse(t){var e=x.useRef(null),n=fse(t.date,t.displayMonth,e);return n.isHidden?s.jsx("div",{role:"gridcell"}):n.isButton?s.jsx(mx,dt({name:"day",ref:e},n.buttonProps)):s.jsx("div",dt({},n.divProps))}function pse(t){var e=t.number,n=t.dates,r=cn(),i=r.onWeekNumberClick,a=r.styles,o=r.classNames,c=r.locale,u=r.labels.labelWeekNumber,d=r.formatters.formatWeekNumber,f=d(Number(e),{locale:c});if(!i)return s.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:f});var p=u(Number(e),{locale:c}),g=function(_){i(e,n,_)};return s.jsx(mx,{name:"week-number","aria-label":p,className:o.weeknumber,style:a.weeknumber,onClick:g,children:f})}function gse(t){var e,n,r=cn(),i=r.styles,a=r.classNames,o=r.showWeekNumber,c=r.components,u=(e=c==null?void 0:c.Day)!==null&&e!==void 0?e:mse,d=(n=c==null?void 0:c.WeekNumber)!==null&&n!==void 0?n:pse,f;return o&&(f=s.jsx("td",{className:a.cell,style:i.cell,children:s.jsx(d,{number:t.weekNumber,dates:t.dates})})),s.jsxs("tr",{className:a.row,style:i.row,children:[f,t.dates.map(function(p){return s.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:s.jsx(u,{displayMonth:t.displayMonth,date:p})},qee(p))})]})}function bk(t,e,n){for(var r=n!=null&&n.ISOWeek?cD(e):SN(e,n),i=n!=null&&n.ISOWeek?Dc(t):va(t,n),a=ta(r,i),o=[],c=0;c<=a;c++)o.push(Gr(i,c));var u=o.reduce(function(d,f){var p=n!=null&&n.ISOWeek?dD(f):fD(f,n),g=d.find(function(_){return _.weekNumber===p});return g?(g.dates.push(f),d):(d.push({weekNumber:p,dates:[f]}),d)},[]);return u}function vse(t,e){var n=bk(xs(t),Vy(t),e);if(e!=null&&e.useFixedWeeks){var r=Hee(t,e);if(r<6){var i=n[n.length-1],a=i.dates[i.dates.length-1],o=mb(a,6-r),c=bk(mb(a,1),o,e);n.push.apply(n,c)}}return n}function xse(t){var e,n,r,i=cn(),a=i.locale,o=i.classNames,c=i.styles,u=i.hideHead,d=i.fixedWeeks,f=i.components,p=i.weekStartsOn,g=i.firstWeekContainsDate,_=i.ISOWeek,N=vse(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:_,locale:a,weekStartsOn:p,firstWeekContainsDate:g}),b=(e=f==null?void 0:f.Head)!==null&&e!==void 0?e:Rre,S=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:gse,w=(r=f==null?void 0:f.Footer)!==null&&r!==void 0?r:Pre;return s.jsxs("table",{id:t.id,className:o.table,style:c.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!u&&s.jsx(b,{}),s.jsx("tbody",{className:o.tbody,style:c.tbody,children:N.map(function(y){return s.jsx(S,{displayMonth:t.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),s.jsx(w,{displayMonth:t.displayMonth})]})}function yse(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var _se=yse()?x.useLayoutEffect:x.useEffect,N_=!1,wse=0;function jk(){return"react-day-picker-".concat(++wse)}function bse(t){var e,n=t??(N_?jk():null),r=x.useState(n),i=r[0],a=r[1];return _se(function(){i===null&&a(jk())},[]),x.useEffect(function(){N_===!1&&(N_=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function jse(t){var e,n,r=cn(),i=r.dir,a=r.classNames,o=r.styles,c=r.components,u=mp().displayMonths,d=bse(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,p=[a.month],g=o.month,_=t.displayIndex===0,N=t.displayIndex===u.length-1,b=!_&&!N;i==="rtl"&&(e=[_,N],N=e[0],_=e[1]),_&&(p.push(a.caption_start),g=dt(dt({},g),o.caption_start)),N&&(p.push(a.caption_end),g=dt(dt({},g),o.caption_end)),b&&(p.push(a.caption_between),g=dt(dt({},g),o.caption_between));var S=(n=c==null?void 0:c.Caption)!==null&&n!==void 0?n:Tre;return s.jsxs("div",{className:p.join(" "),style:g,children:[s.jsx(S,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(xse,{id:f,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function Nse(t){var e=cn(),n=e.classNames,r=e.styles;return s.jsx("div",{className:n.months,style:r.months,children:t.children})}function Sse(t){var e,n,r=t.initialProps,i=cn(),a=LN(),o=mp(),c=x.useState(!1),u=c[0],d=c[1];x.useEffect(function(){i.initialFocus&&a.focusTarget&&(u||(a.focus(a.focusTarget),d(!0)))},[i.initialFocus,u,a.focus,a.focusTarget,a]);var f=[i.classNames.root,i.className];i.numberOfMonths>1&&f.push(i.classNames.multiple_months),i.showWeekNumber&&f.push(i.classNames.with_weeknumber);var p=dt(dt({},i.styles.root),i.style),g=Object.keys(r).filter(function(N){return N.startsWith("data-")}).reduce(function(N,b){var S;return dt(dt({},N),(S={},S[b]=r[b],S))},{}),_=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:Nse;return s.jsx("div",dt({className:f.join(" "),style:p,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},g,{children:s.jsx(_,{children:o.displayMonths.map(function(N,b){return s.jsx(jse,{displayIndex:b,displayMonth:N},b)})})}))}function Ese(t){var e=t.children,n=Yne(t,["children"]);return s.jsx(pre,{initialProps:n,children:s.jsx(Sre,{children:s.jsx(ase,{initialProps:n,children:s.jsx(Ore,{initialProps:n,children:s.jsx(Fre,{initialProps:n,children:s.jsx(Hre,{children:s.jsx(sse,{children:e})})})})})})})}function Cse(t){return s.jsx(Ese,dt({},t,{children:s.jsx(Sse,{initialProps:t})}))}function LL({className:t,classNames:e,showOutsideDays:n=!0,...r}){return s.jsx(Cse,{showOutsideDays:n,className:st("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:st(sb({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:st("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:st(sb({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...i})=>s.jsx(AX,{className:"h-4 w-4"}),IconRight:({...i})=>s.jsx(UO,{className:"h-4 w-4"})},...r})}LL.displayName="Calendar";var Hy="Popover",[FL,Gue]=Sr(Hy,[ch]),pp=ch(),[kse,Ll]=FL(Hy),VL=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=t,c=pp(e),u=x.useRef(null),[d,f]=x.useState(!1),[p,g]=Os({prop:r,defaultProp:i??!1,onChange:a,caller:Hy});return s.jsx(dN,{...c,children:s.jsx(kse,{scope:e,contentId:As(),triggerRef:u,open:p,onOpenChange:g,onOpenToggle:x.useCallback(()=>g(_=>!_),[g]),hasCustomAnchor:d,onCustomAnchorAdd:x.useCallback(()=>f(!0),[]),onCustomAnchorRemove:x.useCallback(()=>f(!1),[]),modal:o,children:n})})};VL.displayName=Hy;var zL="PopoverAnchor",Tse=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Ll(zL,n),a=pp(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=i;return x.useEffect(()=>(o(),()=>c()),[o,c]),s.jsx(Py,{...a,...r,ref:e})});Tse.displayName=zL;var UL="PopoverTrigger",$L=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Ll(UL,n),a=pp(n),o=ht(e,i.triggerRef),c=s.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":GL(i.open),...r,ref:o,onClick:Oe(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?c:s.jsx(Py,{asChild:!0,...a,children:c})});$L.displayName=UL;var VN="PopoverPortal",[Pse,Ise]=FL(VN,{forceMount:void 0}),BL=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,a=Ll(VN,e);return s.jsx(Pse,{scope:e,forceMount:n,children:s.jsx(Er,{present:n||a.open,children:s.jsx(ap,{asChild:!0,container:i,children:r})})})};BL.displayName=VN;var Vd="PopoverContent",qL=x.forwardRef((t,e)=>{const n=Ise(Vd,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,a=Ll(Vd,t.__scopePopover);return s.jsx(Er,{present:r||a.open,children:a.modal?s.jsx(Rse,{...i,ref:e}):s.jsx(Mse,{...i,ref:e})})});qL.displayName=Vd;var Ase=wl("PopoverContent.RemoveScroll"),Rse=x.forwardRef((t,e)=>{const n=Ll(Vd,t.__scopePopover),r=x.useRef(null),i=ht(e,r),a=x.useRef(!1);return x.useEffect(()=>{const o=r.current;if(o)return Ay(o)},[]),s.jsx(lp,{as:Ase,allowPinchZoom:!0,children:s.jsx(WL,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oe(t.onCloseAutoFocus,o=>{var c;o.preventDefault(),a.current||(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Oe(t.onPointerDownOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Oe(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Mse=x.forwardRef((t,e)=>{const n=Ll(Vd,t.__scopePopover),r=x.useRef(!1),i=x.useRef(!1);return s.jsx(WL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,c;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),WL=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,...p}=t,g=Ll(Vd,n),_=pp(n);return Sy(),s.jsx(sp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(rp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>g.onOpenChange(!1),children:s.jsx(hN,{"data-state":GL(g.open),role:"dialog",id:g.contentId,..._,...p,ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),HL="PopoverClose",Ose=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Ll(HL,n);return s.jsx(Ze.button,{type:"button",...r,ref:e,onClick:Oe(t.onClick,()=>i.onOpenChange(!1))})});Ose.displayName=HL;var Dse="PopoverArrow",Lse=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=pp(n);return s.jsx(fN,{...i,...r,ref:e})});Lse.displayName=Dse;function GL(t){return t?"open":"closed"}var Fse=VL,Vse=$L,zse=BL,KL=qL;const Use=Fse,$se=Vse,ZL=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>s.jsx(zse,{children:s.jsx(KL,{ref:i,align:e,sideOffset:n,className:st("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));ZL.displayName=KL.displayName;const Iu=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Gy=uh((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espces",icon:"",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immdiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"",description:"Virement SEPA scuris",fees:0,processingTime:"1-2 jours ouvrs",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"",description:"Paiement scuris via PayPal",fees:2.9,processingTime:"Immdiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"",description:"Paiement mobile instantan",fees:0,processingTime:"Immdiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async n=>{try{t({loading:!0});const r=e().generateSecurityCode(),i={...n,securityCode:r,status:"pending",createdAt:sr(),updatedAt:sr()},a=await xl(Vt(Ue,"paymentRequests"),i),o={id:a.id,...n,securityCode:r,status:"pending",createdAt:new Date,updatedAt:new Date};return t(c=>({paymentRequests:[o,...c.paymentRequests],loading:!1})),xe.success("Demande de paiement cre avec succs"),a.id}catch(r){throw console.error("Erreur lors de la cration de la demande de paiement:",r),xe.error("Erreur lors de la cration de la demande de paiement"),t({loading:!1}),r}},updatePaymentStatus:async(n,r,i)=>{try{const a={status:r,updatedAt:sr()};i&&(a.notes=i),await yn(yt(Ue,"paymentRequests",n),a),t(c=>({paymentRequests:c.paymentRequests.map(u=>u.id===n?{...u,status:r,notes:i||u.notes,updatedAt:new Date}:u)}));const o={confirmed:"Paiement confirm",completed:"Paiement termin",cancelled:"Paiement annul",disputed:"Litige signal"};xe.success(o[r]||"Statut mis  jour")}catch(a){console.error("Erreur lors de la mise  jour du statut:",a),xe.error("Erreur lors de la mise  jour du statut")}},fetchUserPaymentRequests:async n=>{if(n)try{t({loading:!0});const r=_n(Vt(Ue,"paymentRequests"),Xn("buyerId","==",n),ei(50)),i=_n(Vt(Ue,"paymentRequests"),Xn("sellerId","==",n),ei(50)),[a,o]=await Promise.all([Fn(r),Fn(i)]),c=[];a.forEach(u=>{const d=u.data();c.push({id:u.id,...d,createdAt:Iu(d.createdAt),updatedAt:Iu(d.updatedAt),meetingDateTime:d.meetingDateTime?Iu(d.meetingDateTime):void 0})}),o.forEach(u=>{const d=u.data();c.find(f=>f.id===u.id)||c.push({id:u.id,...d,createdAt:Iu(d.createdAt),updatedAt:Iu(d.updatedAt),meetingDateTime:d.meetingDateTime?Iu(d.meetingDateTime):void 0})}),c.sort((u,d)=>d.createdAt.getTime()-u.createdAt.getTime()),t({paymentRequests:c,loading:!1})}catch(r){console.error("Erreur lors du chargement des demandes de paiement:",r),xe.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(n,r)=>{switch(n){case"cash":return!0;case"transfer":return r.bankDetails&&r.bankDetails.iban&&r.bankDetails.accountName;case"paypal":return r.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.paypalEmail);case"lydia":return r.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(r.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(n,r)=>{const{paymentMethods:i}=e(),a=i.find(o=>o.type===r);return a?n*a.fees/100:0},getPaymentInstructions:(n,r)=>{var a,o,c;const i=[];switch(n){case"cash":i.push(" Paiement en espces"," Rencontrez-vous au lieu convenu"," Vrifiez l'objet avant de payer"," Demandez un reu si ncessaire",` Code de scurit : ${r.securityCode}`);break;case"transfer":i.push(" Virement bancaire SEPA"," Utilisez les coordonnes bancaires fournies"," Indiquez la rfrence de transaction"," Dlai : 1-2 jours ouvrs",` Code de scurit : ${r.securityCode}`),(a=r.paymentDetails)!=null&&a.bankDetails&&i.push(` IBAN : ${r.paymentDetails.bankDetails.iban}`,` Titulaire : ${r.paymentDetails.bankDetails.accountName}`);break;case"paypal":i.push(" Paiement PayPal"," Envoyez le paiement  l'adresse email fournie",' Utilisez "Biens et services" pour la protection'," Paiement instantan",` Code de scurit : ${r.securityCode}`),(o=r.paymentDetails)!=null&&o.paypalEmail&&i.push(` Email PayPal : ${r.paymentDetails.paypalEmail}`);break;case"lydia":i.push(" Paiement Lydia"," Envoyez le paiement au numro fourni"," Indiquez la rfrence de transaction"," Paiement instantan",` Code de scurit : ${r.securityCode}`),(c=r.paymentDetails)!=null&&c.lydiaPhone&&i.push(` Numro Lydia : ${r.paymentDetails.lydiaPhone}`);break}return i}}));var YL="https://js.stripe.com/v3",Bse=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var qse=function(){for(var e=document.querySelectorAll('script[src^="'.concat(YL,'"]')),n=0;n<e.length;n++){var r=e[n];if(Bse.test(r.src))return r}return null},Nk=function(e){var n="",r=document.createElement("script");r.src="".concat(YL).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},Wse=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:n})},sf=null,Eg=null,Cg=null,Hse=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},Gse=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},Kse=function(e){return sf!==null?sf:(sf=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var i=qse();if(!(i&&e)){if(!i)i=Nk(e);else if(i&&Cg!==null&&Eg!==null){var a;i.removeEventListener("load",Cg),i.removeEventListener("error",Eg),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=Nk(e)}}Cg=Gse(n,r),Eg=Hse(r),i.addEventListener("load",Cg),i.addEventListener("error",Eg)}catch(o){r(o);return}}),sf.catch(function(n){return sf=null,Promise.reject(n)}))},Zse=function(e,n,r){if(e===null)return null;var i=e.apply(void 0,n);return Wse(i,r),i},af,QL=!1,XL=function(){return af||(af=Kse(null).catch(function(e){return af=null,Promise.reject(e)}),af)};Promise.resolve().then(function(){return XL()}).catch(function(t){QL||console.warn(t)});var JL=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];QL=!0;var i=Date.now();return XL().then(function(a){return Zse(a,n,i)})},e3={exports:{}},Yse="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Qse=Yse,Xse=Qse;function t3(){}function n3(){}n3.resetWarningCache=t3;var Jse=function(){function t(r,i,a,o,c,u){if(u!==Xse){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:n3,resetWarningCache:t3};return n.PropTypes=n,n};e3.exports=Jse();var eie=e3.exports;const Nn=El(eie);function Sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ek(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sk(Object(n),!0).forEach(function(r){r3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?iv=function(e){return typeof e}:iv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iv(t)}function r3(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s3(t,e){return tie(t)||nie(t,e)||rie(t,e)||sie()}function tie(t){if(Array.isArray(t))return t}function nie(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],i=!0,a=!1,o,c;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){a=!0,c=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw c}}return r}}function rie(t,e){if(t){if(typeof t=="string")return Ck(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ck(t,e)}}function Ck(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var js=function(e,n,r){var i=!!r,a=Le.useRef(r);Le.useEffect(function(){a.current=r},[r]),Le.useEffect(function(){if(!i||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,o),function(){e.off(n,o)}},[i,n,e,a])},wb=function(e){var n=Le.useRef(e);return Le.useEffect(function(){n.current=e},[e]),n.current},zd=function(e){return e!==null&&iv(e)==="object"},iie=function(e){return zd(e)&&typeof e.then=="function"},aie=function(e){return zd(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},kk="[object Object]",oie=function t(e,n){if(!zd(e)||!zd(n))return e===n;var r=Array.isArray(e),i=Array.isArray(n);if(r!==i)return!1;var a=Object.prototype.toString.call(e)===kk,o=Object.prototype.toString.call(n)===kk;if(a!==o)return!1;if(!a&&!r)return e===n;var c=Object.keys(e),u=Object.keys(n);if(c.length!==u.length)return!1;for(var d={},f=0;f<c.length;f+=1)d[c[f]]=!0;for(var p=0;p<u.length;p+=1)d[u[p]]=!0;var g=Object.keys(d);if(g.length!==c.length)return!1;var _=e,N=n,b=function(w){return t(_[w],N[w])};return g.every(b)},i3=function(e,n,r){return zd(e)?Object.keys(e).reduce(function(i,a){var o=!zd(n)||!oie(e[a],n[a]);return r.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):o?Ek(Ek({},i||{}),{},r3({},a,e[a])):i},null):null},a3="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Tk=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a3;if(e===null||aie(e))return e;throw new Error(n)},lie=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a3;if(iie(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return Tk(i,n)})};var r=Tk(e,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},cie=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},Ky=Le.createContext(null);Ky.displayName="ElementsContext";var o3=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},l3=function(e){var n=e.stripe,r=e.options,i=e.children,a=Le.useMemo(function(){return lie(n)},[n]),o=Le.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),c=s3(o,2),u=c[0],d=c[1];Le.useEffect(function(){var g=!0,_=function(b){d(function(S){return S.stripe?S:{stripe:b,elements:b.elements(r)}})};return a.tag==="async"&&!u.stripe?a.stripePromise.then(function(N){N&&g&&_(N)}):a.tag==="sync"&&!u.stripe&&_(a.stripe),function(){g=!1}},[a,u,r]);var f=wb(n);Le.useEffect(function(){f!==null&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[f,n]);var p=wb(r);return Le.useEffect(function(){if(u.elements){var g=i3(r,p,["clientSecret","fonts"]);g&&u.elements.update(g)}},[r,p,u.elements]),Le.useEffect(function(){cie(u.stripe)},[u.stripe]),Le.createElement(Ky.Provider,{value:u},i)};l3.propTypes={stripe:Nn.any,options:Nn.object};var uie=function(e){var n=Le.useContext(Ky);return o3(n,e)},die=function(){var e=uie("calls useElements()"),n=e.elements;return n};Nn.func.isRequired;var c3=Le.createContext(null);c3.displayName="CustomCheckoutSdkContext";var hie=function(e,n){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return e},fie=Le.createContext(null);fie.displayName="CustomCheckoutContext";Nn.any,Nn.shape({clientSecret:Nn.string.isRequired,elementsOptions:Nn.object}).isRequired;var bb=function(e){var n=Le.useContext(c3),r=Le.useContext(Ky);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?hie(n,e):o3(r,e)},mie=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Jn=function(e,n){var r="".concat(mie(e),"Element"),i=function(u){var d=u.id,f=u.className,p=u.options,g=p===void 0?{}:p,_=u.onBlur,N=u.onFocus,b=u.onReady,S=u.onChange,w=u.onEscape,y=u.onClick,E=u.onLoadError,A=u.onLoaderStart,O=u.onNetworksChange,q=u.onConfirm,R=u.onCancel,V=u.onShippingAddressChange,U=u.onShippingRateChange,k=bb("mounts <".concat(r,">")),F="elements"in k?k.elements:null,D="customCheckoutSdk"in k?k.customCheckoutSdk:null,P=Le.useState(null),H=s3(P,2),ee=H[0],Z=H[1],K=Le.useRef(null),I=Le.useRef(null);js(ee,"blur",_),js(ee,"focus",N),js(ee,"escape",w),js(ee,"click",y),js(ee,"loaderror",E),js(ee,"loaderstart",A),js(ee,"networkschange",O),js(ee,"confirm",q),js(ee,"cancel",R),js(ee,"shippingaddresschange",V),js(ee,"shippingratechange",U),js(ee,"change",S);var z;b&&(e==="expressCheckout"?z=b:z=function(){b(ee)}),js(ee,"ready",z),Le.useLayoutEffect(function(){if(K.current===null&&I.current!==null&&(F||D)){var X=null;D?X=D.createElement(e,g):F&&(X=F.create(e,g)),K.current=X,Z(X),X&&X.mount(I.current)}},[F,D,g]);var B=wb(g);return Le.useEffect(function(){if(K.current){var X=i3(g,B,["paymentRequest"]);X&&"update"in K.current&&K.current.update(X)}},[g,B]),Le.useLayoutEffect(function(){return function(){if(K.current&&typeof K.current.destroy=="function")try{K.current.destroy(),K.current=null}catch{}}},[]),Le.createElement("div",{id:d,className:f,ref:I})},a=function(u){bb("mounts <".concat(r,">"));var d=u.id,f=u.className;return Le.createElement("div",{id:d,className:f})},o=n?a:i;return o.propTypes={id:Nn.string,className:Nn.string,onChange:Nn.func,onBlur:Nn.func,onFocus:Nn.func,onReady:Nn.func,onEscape:Nn.func,onClick:Nn.func,onLoadError:Nn.func,onLoaderStart:Nn.func,onNetworksChange:Nn.func,onConfirm:Nn.func,onCancel:Nn.func,onShippingAddressChange:Nn.func,onShippingRateChange:Nn.func,options:Nn.object},o.displayName=r,o.__elementType=e,o},er=typeof window>"u",pie=Le.createContext(null);pie.displayName="EmbeddedCheckoutProviderContext";var gie=function(){var e=bb("calls useStripe()"),n=e.stripe;return n};Jn("auBankAccount",er);Jn("card",er);Jn("cardNumber",er);Jn("cardExpiry",er);Jn("cardCvc",er);Jn("fpxBank",er);Jn("iban",er);Jn("idealBank",er);Jn("p24Bank",er);Jn("epsBank",er);Jn("payment",er);Jn("expressCheckout",er);Jn("currencySelector",er);Jn("paymentRequestButton",er);Jn("linkAuthentication",er);Jn("address",er);Jn("shippingAddress",er);Jn("paymentMethodMessaging",er);Jn("affirmMessage",er);Jn("afterpayClearpayMessage",er);const vie=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{gie(),die();const[i,a]=x.useState(!1),[o,c]=x.useState(null),u=async d=>{d.preventDefault(),a(!0),c(null);try{await new Promise(p=>setTimeout(p,2e3));const f="pi_"+Math.random().toString(36).substring(2,15);xe.success("Paiement russi !"),n(f)}catch(f){console.error("Payment error:",f),c(f.message||"Une erreur est survenue lors du paiement"),r(f.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),s.jsx(Ct,{children:"Paiement scuris via Stripe"})]}),s.jsx(me,{children:s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsx("div",{className:"p-4 border rounded-md",children:s.jsx("div",{className:"h-10 flex items-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&s.jsxs($t,{className:"border-red-200 bg-red-50",children:[s.jsx(In,{className:"h-4 w-4 text-red-600"}),s.jsx(Bt,{className:"text-red-800",children:o})]}),s.jsxs($t,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Mc,{className:"h-4 w-4 text-blue-600"}),s.jsx(Bt,{className:"text-blue-800",children:"Vos informations de paiement sont scurises et cryptes par Stripe."})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),s.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[s.jsx("li",{children:"Succs : 4242 4242 4242 4242"}),s.jsx("li",{children:"chec : 4000 0000 0000 0002"}),s.jsx("li",{children:"Date : n'importe quelle date future"}),s.jsx("li",{children:"CVC : n'importe quel nombre  3 chiffres"})]})]}),s.jsx(J,{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-primary to-secondary",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},Pk=JL("pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p"),xie=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{const i={appearance:{theme:"stripe"},locale:"fr"};return Pk?s.jsx(l3,{stripe:Pk,options:i,children:s.jsx(vie,{amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})}):s.jsxs($t,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(In,{className:"h-4 w-4 text-yellow-600"}),s.jsxs(Bt,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre cl publique Stripe dans le fichier .env"]})]})},u3=({amount:t,currency:e,onMethodSelect:n,selectedMethod:r})=>{const{paymentMethods:i,calculateFees:a}=Gy(),[o,c]=x.useState({}),[u,d]=x.useState({}),[f,p]=x.useState(null),g=[{id:"card",type:"card",name:"Carte bancaire",icon:Vn,description:"Paiement scuris par carte",fees:1.5,processingTime:"Immdiat",securityLevel:"high",available:!0},...i],_=O=>{switch(O){case"card":return Vn;case"cash":return z4;case"transfer":return q4;case"paypal":return Vn;case"lydia":return Zc;default:return Vn}},N=O=>{switch(O){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},b=(O,q)=>{var V,U;const R={};switch(O){case"card":return!0;case"transfer":(V=q.bankDetails)!=null&&V.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(q.bankDetails.iban.replace(/\s/g,""))||(R.iban="Format IBAN invalide"):R.iban="IBAN requis",(U=q.bankDetails)!=null&&U.accountName||(R.accountName="Nom du titulaire requis");break;case"paypal":q.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(q.paypalEmail)||(R.paypalEmail="Format email invalide"):R.paypalEmail="Email PayPal requis";break;case"lydia":q.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(q.lydiaPhone.replace(/\s/g,""))||(R.lydiaPhone="Format de tlphone invalide"):R.lydiaPhone="Numro de tlphone requis";break}return d(R),Object.keys(R).length===0},S=O=>{if(O==="card"){n(O,{});return}const q=o[O]||{};(O==="cash"||b(O,q))&&n(O,q)},w=(O,q,R)=>{c(V=>({...V,[O]:{...V[O],[q]:R}}))},y=(O,q)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:q||"EUR"}).format(O),E=O=>{p(O),n("card",{stripePaymentId:O})},A=O=>{console.error("Stripe payment error:",O)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),s.jsxs("p",{className:"text-muted-foreground",children:["Montant  payer : ",s.jsx("span",{className:"font-semibold text-primary",children:y(t,e)})]})]}),r==="card"?s.jsx(xie,{amount:t,currency:e,onPaymentSuccess:E,onPaymentError:A}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(O=>{var k,F,D,P,H,ee,Z,K;const q=_(O.type),R=O.type==="card"?t*O.fees/100:a(t,O.type),V=t+R,U=r===O.type;return s.jsxs(fe,{className:`cursor-pointer transition-all hover:shadow-md ${U?"ring-2 ring-primary bg-primary/5":""} ${O.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>O.available&&S(O.type),children:[s.jsx(Qe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(q,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx(Je,{className:"text-lg",children:O.name}),s.jsx(Ct,{className:"text-sm",children:O.description})]})]}),U&&s.jsx(Pt,{className:"w-6 h-6 text-green-600"})]})}),s.jsxs(me,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Un,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{children:O.processingTime})]}),s.jsxs(at,{className:N(O.securityLevel),children:[s.jsx(zt,{className:"w-3 h-3 mr-1"}),O.securityLevel==="high"?"Trs scuris":O.securityLevel==="medium"?"Scuris":"Basique"]})]}),R>0&&s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Montant :"}),s.jsx("span",{children:y(t,e)})]}),s.jsxs("div",{className:"flex justify-between text-orange-600",children:[s.jsxs("span",{children:["Frais (",O.fees,"%) :"]}),s.jsx("span",{children:y(R,e)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[s.jsx("span",{children:"Total :"}),s.jsx("span",{children:y(V,e)})]})]}),U&&O.type!=="cash"&&O.type!=="card"&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[O.type==="transfer"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:`iban-${O.id}`,children:"IBAN *"}),s.jsx(Ge,{id:`iban-${O.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((F=(k=o[O.type])==null?void 0:k.bankDetails)==null?void 0:F.iban)||"",onChange:I=>{var z;return w(O.type,"bankDetails",{...(z=o[O.type])==null?void 0:z.bankDetails,iban:I.target.value})},className:u.iban?"border-red-500":""}),u.iban&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.iban})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:`account-name-${O.id}`,children:"Nom du titulaire *"}),s.jsx(Ge,{id:`account-name-${O.id}`,placeholder:"Jean Dupont",value:((P=(D=o[O.type])==null?void 0:D.bankDetails)==null?void 0:P.accountName)||"",onChange:I=>{var z;return w(O.type,"bankDetails",{...(z=o[O.type])==null?void 0:z.bankDetails,accountName:I.target.value})},className:u.accountName?"border-red-500":""}),u.accountName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.accountName})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:`bic-${O.id}`,children:"BIC (optionnel)"}),s.jsx(Ge,{id:`bic-${O.id}`,placeholder:"BNPAFRPP",value:((ee=(H=o[O.type])==null?void 0:H.bankDetails)==null?void 0:ee.bic)||"",onChange:I=>{var z;return w(O.type,"bankDetails",{...(z=o[O.type])==null?void 0:z.bankDetails,bic:I.target.value})}})]})]}),O.type==="paypal"&&s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:`paypal-email-${O.id}`,children:"Email PayPal *"}),s.jsx(Ge,{id:`paypal-email-${O.id}`,type:"email",placeholder:"votre.email@example.com",value:((Z=o[O.type])==null?void 0:Z.paypalEmail)||"",onChange:I=>w(O.type,"paypalEmail",I.target.value),className:u.paypalEmail?"border-red-500":""}),u.paypalEmail&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.paypalEmail})]}),O.type==="lydia"&&s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:`lydia-phone-${O.id}`,children:"Numro de tlphone *"}),s.jsx(Ge,{id:`lydia-phone-${O.id}`,type:"tel",placeholder:"06 12 34 56 78",value:((K=o[O.type])==null?void 0:K.lydiaPhone)||"",onChange:I=>w(O.type,"lydiaPhone",I.target.value),className:u.lydiaPhone?"border-red-500":""}),u.lydiaPhone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.lydiaPhone})]})]}),U&&O.type!=="card"&&s.jsxs($t,{className:"mt-3",children:[s.jsx(yl,{className:"h-4 w-4"}),s.jsxs(Bt,{children:[O.type==="cash"&&"Rencontrez-vous dans un lieu public et vrifiez l'objet avant de payer.",O.type==="transfer"&&"Le virement sera effectu aprs confirmation de la transaction. Dlai : 1-2 jours ouvrs.",O.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bnficier de la protection PayPal.",O.type==="lydia"&&"Le paiement Lydia est instantan. Vrifiez le numro avant d'envoyer."]})]})]})]},O.id)})}),s.jsxs($t,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(In,{className:"h-4 w-4 text-yellow-600"}),s.jsxs(Bt,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Conseils de scurit :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux scuriss de StudyMarket pour les transactions."]})]})]})};function yie(t,e){const n=x.useRef(e);x.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const _ie=1;function wie(t){return Object.freeze({__version:_ie,map:t})}function bie(t,e){return Object.freeze({...t,...e})}const d3=x.createContext(null),h3=d3.Provider;function f3(){const t=x.useContext(d3);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function jie(t){function e(n,r){const{instance:i,context:a}=t(n).current;return x.useImperativeHandle(r,()=>i),n.children==null?null:Le.createElement(h3,{value:a},n.children)}return x.forwardRef(e)}function Nie(t){function e(n,r){const{instance:i}=t(n).current;return x.useImperativeHandle(r,()=>i),null}return x.forwardRef(e)}function Sie(t,e){const n=x.useRef();x.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function m3(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var jb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Fu,function(n){var r="1.9.4";function i(l){var h,v,j,T;for(v=1,j=arguments.length;v<j;v++){T=arguments[v];for(h in T)l[h]=T[h]}return l}var a=Object.create||function(){function l(){}return function(h){return l.prototype=h,new l}}();function o(l,h){var v=Array.prototype.slice;if(l.bind)return l.bind.apply(l,v.call(arguments,1));var j=v.call(arguments,2);return function(){return l.apply(h,j.length?j.concat(v.call(arguments)):arguments)}}var c=0;function u(l){return"_leaflet_id"in l||(l._leaflet_id=++c),l._leaflet_id}function d(l,h,v){var j,T,$,Q;return Q=function(){j=!1,T&&($.apply(v,T),T=!1)},$=function(){j?T=arguments:(l.apply(v,arguments),setTimeout(Q,h),j=!0)},$}function f(l,h,v){var j=h[1],T=h[0],$=j-T;return l===j&&v?l:((l-T)%$+$)%$+T}function p(){return!1}function g(l,h){if(h===!1)return l;var v=Math.pow(10,h===void 0?6:h);return Math.round(l*v)/v}function _(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function N(l){return _(l).split(/\s+/)}function b(l,h){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?a(l.options):{});for(var v in h)l.options[v]=h[v];return l.options}function S(l,h,v){var j=[];for(var T in l)j.push(encodeURIComponent(v?T.toUpperCase():T)+"="+encodeURIComponent(l[T]));return(!h||h.indexOf("?")===-1?"?":"&")+j.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function y(l,h){return l.replace(w,function(v,j){var T=h[j];if(T===void 0)throw new Error("No value provided for variable "+v);return typeof T=="function"&&(T=T(h)),T})}var E=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function A(l,h){for(var v=0;v<l.length;v++)if(l[v]===h)return v;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function q(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var R=0;function V(l){var h=+new Date,v=Math.max(0,16-(h-R));return R=h+v,window.setTimeout(l,v)}var U=window.requestAnimationFrame||q("RequestAnimationFrame")||V,k=window.cancelAnimationFrame||q("CancelAnimationFrame")||q("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function F(l,h,v){if(v&&U===V)l.call(h);else return U.call(window,o(l,h))}function D(l){l&&k.call(window,l)}var P={__proto__:null,extend:i,create:a,bind:o,get lastId(){return c},stamp:u,throttle:d,wrapNum:f,falseFn:p,formatNum:g,trim:_,splitWords:N,setOptions:b,getParamString:S,template:y,isArray:E,indexOf:A,emptyImageUrl:O,requestFn:U,cancelFn:k,requestAnimFrame:F,cancelAnimFrame:D};function H(){}H.extend=function(l){var h=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=h.__super__=this.prototype,j=a(v);j.constructor=h,h.prototype=j;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(h[T]=this[T]);return l.statics&&i(h,l.statics),l.includes&&(ee(l.includes),i.apply(null,[j].concat(l.includes))),i(j,l),delete j.statics,delete j.includes,j.options&&(j.options=v.options?a(v.options):{},i(j.options,l.options)),j._initHooks=[],j.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var $=0,Q=j._initHooks.length;$<Q;$++)j._initHooks[$].call(this)}},h},H.include=function(l){var h=this.prototype.options;return i(this.prototype,l),l.options&&(this.prototype.options=h,this.mergeOptions(l.options)),this},H.mergeOptions=function(l){return i(this.prototype.options,l),this},H.addInitHook=function(l){var h=Array.prototype.slice.call(arguments,1),v=typeof l=="function"?l:function(){this[l].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function ee(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=E(l)?l:[l];for(var h=0;h<l.length;h++)l[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(l,h,v){if(typeof l=="object")for(var j in l)this._on(j,l[j],h);else{l=N(l);for(var T=0,$=l.length;T<$;T++)this._on(l[T],h,v)}return this},off:function(l,h,v){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var j in l)this._off(j,l[j],h);else{l=N(l);for(var T=arguments.length===1,$=0,Q=l.length;$<Q;$++)T?this._off(l[$]):this._off(l[$],h,v)}return this},_on:function(l,h,v,j){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(l,h,v)===!1){v===this&&(v=void 0);var T={fn:h,ctx:v};j&&(T.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(T)}},_off:function(l,h,v){var j,T,$;if(this._events&&(j=this._events[l],!!j)){if(arguments.length===1){if(this._firingCount)for(T=0,$=j.length;T<$;T++)j[T].fn=p;delete this._events[l];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var Q=this._listens(l,h,v);if(Q!==!1){var le=j[Q];this._firingCount&&(le.fn=p,this._events[l]=j=j.slice()),j.splice(Q,1)}}},fire:function(l,h,v){if(!this.listens(l,v))return this;var j=i({},h,{type:l,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var T=this._events[l];if(T){this._firingCount=this._firingCount+1||1;for(var $=0,Q=T.length;$<Q;$++){var le=T[$],de=le.fn;le.once&&this.off(l,de,le.ctx),de.call(le.ctx||this,j)}this._firingCount--}}return v&&this._propagateEvent(j),this},listens:function(l,h,v,j){typeof l!="string"&&console.warn('"string" type argument expected');var T=h;typeof h!="function"&&(j=!!h,T=void 0,v=void 0);var $=this._events&&this._events[l];if($&&$.length&&this._listens(l,T,v)!==!1)return!0;if(j){for(var Q in this._eventParents)if(this._eventParents[Q].listens(l,h,v,j))return!0}return!1},_listens:function(l,h,v){if(!this._events)return!1;var j=this._events[l]||[];if(!h)return!!j.length;v===this&&(v=void 0);for(var T=0,$=j.length;T<$;T++)if(j[T].fn===h&&j[T].ctx===v)return T;return!1},once:function(l,h,v){if(typeof l=="object")for(var j in l)this._on(j,l[j],h,!0);else{l=N(l);for(var T=0,$=l.length;T<$;T++)this._on(l[T],h,v,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[u(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[u(l)],this},_propagateEvent:function(l){for(var h in this._eventParents)this._eventParents[h].fire(l.type,i({layer:l.target,propagatedFrom:l.target},l),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var K=H.extend(Z);function I(l,h,v){this.x=v?Math.round(l):l,this.y=v?Math.round(h):h}var z=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};I.prototype={clone:function(){return new I(this.x,this.y)},add:function(l){return this.clone()._add(B(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(B(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new I(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new I(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=z(this.x),this.y=z(this.y),this},distanceTo:function(l){l=B(l);var h=l.x-this.x,v=l.y-this.y;return Math.sqrt(h*h+v*v)},equals:function(l){return l=B(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=B(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function B(l,h,v){return l instanceof I?l:E(l)?new I(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new I(l.x,l.y):new I(l,h,v)}function X(l,h){if(l)for(var v=h?[l,h]:l,j=0,T=v.length;j<T;j++)this.extend(v[j])}X.prototype={extend:function(l){var h,v;if(!l)return this;if(l instanceof I||typeof l[0]=="number"||"x"in l)h=v=B(l);else if(l=ue(l),h=l.min,v=l.max,!h||!v)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=v.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(l){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var h,v;return typeof l[0]=="number"||l instanceof I?l=B(l):l=ue(l),l instanceof X?(h=l.min,v=l.max):h=v=l,h.x>=this.min.x&&v.x<=this.max.x&&h.y>=this.min.y&&v.y<=this.max.y},intersects:function(l){l=ue(l);var h=this.min,v=this.max,j=l.min,T=l.max,$=T.x>=h.x&&j.x<=v.x,Q=T.y>=h.y&&j.y<=v.y;return $&&Q},overlaps:function(l){l=ue(l);var h=this.min,v=this.max,j=l.min,T=l.max,$=T.x>h.x&&j.x<v.x,Q=T.y>h.y&&j.y<v.y;return $&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var h=this.min,v=this.max,j=Math.abs(h.x-v.x)*l,T=Math.abs(h.y-v.y)*l;return ue(B(h.x-j,h.y-T),B(v.x+j,v.y+T))},equals:function(l){return l?(l=ue(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function ue(l,h){return!l||l instanceof X?l:new X(l,h)}function ge(l,h){if(l)for(var v=h?[l,h]:l,j=0,T=v.length;j<T;j++)this.extend(v[j])}ge.prototype={extend:function(l){var h=this._southWest,v=this._northEast,j,T;if(l instanceof De)j=l,T=l;else if(l instanceof ge){if(j=l._southWest,T=l._northEast,!j||!T)return this}else return l?this.extend($e(l)||Ee(l)):this;return!h&&!v?(this._southWest=new De(j.lat,j.lng),this._northEast=new De(T.lat,T.lng)):(h.lat=Math.min(j.lat,h.lat),h.lng=Math.min(j.lng,h.lng),v.lat=Math.max(T.lat,v.lat),v.lng=Math.max(T.lng,v.lng)),this},pad:function(l){var h=this._southWest,v=this._northEast,j=Math.abs(h.lat-v.lat)*l,T=Math.abs(h.lng-v.lng)*l;return new ge(new De(h.lat-j,h.lng-T),new De(v.lat+j,v.lng+T))},getCenter:function(){return new De((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new De(this.getNorth(),this.getWest())},getSouthEast:function(){return new De(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof De||"lat"in l?l=$e(l):l=Ee(l);var h=this._southWest,v=this._northEast,j,T;return l instanceof ge?(j=l.getSouthWest(),T=l.getNorthEast()):j=T=l,j.lat>=h.lat&&T.lat<=v.lat&&j.lng>=h.lng&&T.lng<=v.lng},intersects:function(l){l=Ee(l);var h=this._southWest,v=this._northEast,j=l.getSouthWest(),T=l.getNorthEast(),$=T.lat>=h.lat&&j.lat<=v.lat,Q=T.lng>=h.lng&&j.lng<=v.lng;return $&&Q},overlaps:function(l){l=Ee(l);var h=this._southWest,v=this._northEast,j=l.getSouthWest(),T=l.getNorthEast(),$=T.lat>h.lat&&j.lat<v.lat,Q=T.lng>h.lng&&j.lng<v.lng;return $&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,h){return l?(l=Ee(l),this._southWest.equals(l.getSouthWest(),h)&&this._northEast.equals(l.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ee(l,h){return l instanceof ge?l:new ge(l,h)}function De(l,h,v){if(isNaN(l)||isNaN(h))throw new Error("Invalid LatLng object: ("+l+", "+h+")");this.lat=+l,this.lng=+h,v!==void 0&&(this.alt=+v)}De.prototype={equals:function(l,h){if(!l)return!1;l=$e(l);var v=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return v<=(h===void 0?1e-9:h)},toString:function(l){return"LatLng("+g(this.lat,l)+", "+g(this.lng,l)+")"},distanceTo:function(l){return se.distance(this,$e(l))},wrap:function(){return se.wrapLatLng(this)},toBounds:function(l){var h=180*l/40075017,v=h/Math.cos(Math.PI/180*this.lat);return Ee([this.lat-h,this.lng-v],[this.lat+h,this.lng+v])},clone:function(){return new De(this.lat,this.lng,this.alt)}};function $e(l,h,v){return l instanceof De?l:E(l)&&typeof l[0]!="object"?l.length===3?new De(l[0],l[1],l[2]):l.length===2?new De(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new De(l.lat,"lng"in l?l.lng:l.lon,l.alt):h===void 0?null:new De(l,h,v)}var Ae={latLngToPoint:function(l,h){var v=this.projection.project(l),j=this.scale(h);return this.transformation._transform(v,j)},pointToLatLng:function(l,h){var v=this.scale(h),j=this.transformation.untransform(l,v);return this.projection.unproject(j)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var h=this.projection.bounds,v=this.scale(l),j=this.transformation.transform(h.min,v),T=this.transformation.transform(h.max,v);return new X(j,T)},infinite:!1,wrapLatLng:function(l){var h=this.wrapLng?f(l.lng,this.wrapLng,!0):l.lng,v=this.wrapLat?f(l.lat,this.wrapLat,!0):l.lat,j=l.alt;return new De(v,h,j)},wrapLatLngBounds:function(l){var h=l.getCenter(),v=this.wrapLatLng(h),j=h.lat-v.lat,T=h.lng-v.lng;if(j===0&&T===0)return l;var $=l.getSouthWest(),Q=l.getNorthEast(),le=new De($.lat-j,$.lng-T),de=new De(Q.lat-j,Q.lng-T);return new ge(le,de)}},se=i({},Ae,{wrapLng:[-180,180],R:6371e3,distance:function(l,h){var v=Math.PI/180,j=l.lat*v,T=h.lat*v,$=Math.sin((h.lat-l.lat)*v/2),Q=Math.sin((h.lng-l.lng)*v/2),le=$*$+Math.cos(j)*Math.cos(T)*Q*Q,de=2*Math.atan2(Math.sqrt(le),Math.sqrt(1-le));return this.R*de}}),te=6378137,ie={R:te,MAX_LATITUDE:85.0511287798,project:function(l){var h=Math.PI/180,v=this.MAX_LATITUDE,j=Math.max(Math.min(v,l.lat),-v),T=Math.sin(j*h);return new I(this.R*l.lng*h,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(l){var h=180/Math.PI;return new De((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*h,l.x*h/this.R)},bounds:function(){var l=te*Math.PI;return new X([-l,-l],[l,l])}()};function Y(l,h,v,j){if(E(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=h,this._c=v,this._d=j}Y.prototype={transform:function(l,h){return this._transform(l.clone(),h)},_transform:function(l,h){return h=h||1,l.x=h*(this._a*l.x+this._b),l.y=h*(this._c*l.y+this._d),l},untransform:function(l,h){return h=h||1,new I((l.x/h-this._b)/this._a,(l.y/h-this._d)/this._c)}};function oe(l,h,v,j){return new Y(l,h,v,j)}var pe=i({},se,{code:"EPSG:3857",projection:ie,transformation:function(){var l=.5/(Math.PI*ie.R);return oe(l,.5,-l,.5)}()}),Ce=i({},pe,{code:"EPSG:900913"});function we(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function ne(l,h){var v="",j,T,$,Q,le,de;for(j=0,$=l.length;j<$;j++){for(le=l[j],T=0,Q=le.length;T<Q;T++)de=le[T],v+=(T?"L":"M")+de.x+" "+de.y;v+=h?it.svg?"z":"x":""}return v||"M0 0"}var _e=document.documentElement.style,be="ActiveXObject"in window,We=be&&!document.addEventListener,G="msLaunchUri"in navigator&&!("documentMode"in document),re=Vs("webkit"),ce=Vs("android"),ke=Vs("android 2")||Vs("android 3"),Pe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ne=ce&&Vs("Google")&&Pe<537&&!("AudioNode"in window),Fe=!!window.opera,He=!G&&Vs("chrome"),nt=Vs("gecko")&&!re&&!Fe&&!be,Yt=!He&&Vs("safari"),tr=Vs("phantom"),qn="OTransition"in _e,zr=navigator.platform.indexOf("Win")===0,rs=be&&"transition"in _e,ss="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ke,Fi="MozPerspective"in _e,tu=!window.L_DISABLE_3D&&(rs||ss||Fi)&&!qn&&!tr,ba=typeof orientation<"u"||Vs("mobile"),vo=ba&&re,xp=ba&&ss,vh=!window.PointerEvent&&window.MSPointerEvent,xo=!!(window.PointerEvent||vh),nu="ontouchstart"in window||!!window.TouchEvent,xh=!window.L_NO_TOUCH&&(nu||xo),ja=ba&&Fe,yp=ba&&nt,ru=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,_p=function(){var l=!1;try{var h=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",p,h),window.removeEventListener("testPassiveEventSupport",p,h)}catch{}return l}(),Vl=function(){return!!document.createElement("canvas").getContext}(),su=!!(document.createElementNS&&we("svg").createSVGRect),gr=!!su&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),wp=!su&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var h=l.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),zl=navigator.platform.indexOf("Mac")===0,Ul=navigator.platform.indexOf("Linux")===0;function Vs(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var it={ie:be,ielt9:We,edge:G,webkit:re,android:ce,android23:ke,androidStock:Ne,opera:Fe,chrome:He,gecko:nt,safari:Yt,phantom:tr,opera12:qn,win:zr,ie3d:rs,webkit3d:ss,gecko3d:Fi,any3d:tu,mobile:ba,mobileWebkit:vo,mobileWebkit3d:xp,msPointer:vh,pointer:xo,touch:xh,touchNative:nu,mobileOpera:ja,mobileGecko:yp,retina:ru,passiveEvents:_p,canvas:Vl,svg:su,vml:wp,inlineSvg:gr,mac:zl,linux:Ul},Na=it.msPointer?"MSPointerDown":"pointerdown",bp=it.msPointer?"MSPointerMove":"pointermove",jp=it.msPointer?"MSPointerUp":"pointerup",$l=it.msPointer?"MSPointerCancel":"pointercancel",iu={touchstart:Na,touchmove:bp,touchend:jp,touchcancel:$l},au={touchstart:lu,touchmove:ou,touchend:ou,touchcancel:ou},ci={},ui=!1;function Np(l,h,v){return h==="touchstart"&&Ep(),au[h]?(v=au[h].bind(this,v),l.addEventListener(iu[h],v,!1),v):(console.warn("wrong event specified:",h),p)}function Sp(l,h,v){if(!iu[h]){console.warn("wrong event specified:",h);return}l.removeEventListener(iu[h],v,!1)}function yh(l){ci[l.pointerId]=l}function _h(l){ci[l.pointerId]&&(ci[l.pointerId]=l)}function wh(l){delete ci[l.pointerId]}function Ep(){ui||(document.addEventListener(Na,yh,!0),document.addEventListener(bp,_h,!0),document.addEventListener(jp,wh,!0),document.addEventListener($l,wh,!0),ui=!0)}function ou(l,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var v in ci)h.touches.push(ci[v]);h.changedTouches=[h],l(h)}}function lu(l,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&bn(h),ou(l,h)}function Cp(l){var h={},v,j;for(j in l)v=l[j],h[j]=v&&v.bind?v.bind(l):v;return l=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var bh=200;function Bl(l,h){l.addEventListener("dblclick",h);var v=0,j;function T($){if($.detail!==1){j=$.detail;return}if(!($.pointerType==="mouse"||$.sourceCapabilities&&!$.sourceCapabilities.firesTouchEvents)){var Q=Mh($);if(!(Q.some(function(de){return de instanceof HTMLLabelElement&&de.attributes.for})&&!Q.some(function(de){return de instanceof HTMLInputElement||de instanceof HTMLSelectElement}))){var le=Date.now();le-v<=bh?(j++,j===2&&h(Cp($))):j=1,v=le}}}return l.addEventListener("click",T),{dblclick:h,simDblclick:T}}function Sa(l,h){l.removeEventListener("dblclick",h.dblclick),l.removeEventListener("click",h.simDblclick)}var ql=Ca(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Wl=Ca(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),jh=Wl==="webkitTransition"||Wl==="OTransition"?Wl+"End":"transitionend";function Nh(l){return typeof l=="string"?document.getElementById(l):l}function yo(l,h){var v=l.style[h]||l.currentStyle&&l.currentStyle[h];if((!v||v==="auto")&&document.defaultView){var j=document.defaultView.getComputedStyle(l,null);v=j?j[h]:null}return v==="auto"?null:v}function Tt(l,h,v){var j=document.createElement(l);return j.className=h||"",v&&v.appendChild(j),j}function rn(l){var h=l.parentNode;h&&h.removeChild(l)}function Hl(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function Ea(l){var h=l.parentNode;h&&h.lastChild!==l&&h.appendChild(l)}function _o(l){var h=l.parentNode;h&&h.firstChild!==l&&h.insertBefore(l,h.firstChild)}function Sh(l,h){if(l.classList!==void 0)return l.classList.contains(h);var v=zs(l);return v.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(v)}function bt(l,h){if(l.classList!==void 0)for(var v=N(h),j=0,T=v.length;j<T;j++)l.classList.add(v[j]);else if(!Sh(l,h)){var $=zs(l);Eh(l,($?$+" ":"")+h)}}function pn(l,h){l.classList!==void 0?l.classList.remove(h):Eh(l,_((" "+zs(l)+" ").replace(" "+h+" "," ")))}function Eh(l,h){l.className.baseVal===void 0?l.className=h:l.className.baseVal=h}function zs(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function Tn(l,h){"opacity"in l.style?l.style.opacity=h:"filter"in l.style&&cu(l,h)}function cu(l,h){var v=!1,j="DXImageTransform.Microsoft.Alpha";try{v=l.filters.item(j)}catch{if(h===1)return}h=Math.round(h*100),v?(v.Enabled=h!==100,v.Opacity=h):l.style.filter+=" progid:"+j+"(opacity="+h+")"}function Ca(l){for(var h=document.documentElement.style,v=0;v<l.length;v++)if(l[v]in h)return l[v];return!1}function Vi(l,h,v){var j=h||new I(0,0);l.style[ql]=(it.ie3d?"translate("+j.x+"px,"+j.y+"px)":"translate3d("+j.x+"px,"+j.y+"px,0)")+(v?" scale("+v+")":"")}function ft(l,h){l._leaflet_pos=h,it.any3d?Vi(l,h):(l.style.left=h.x+"px",l.style.top=h.y+"px")}function Us(l){return l._leaflet_pos||new I(0,0)}var di,hi,Ch;if("onselectstart"in document)di=function(){ct(window,"selectstart",bn)},hi=function(){Qt(window,"selectstart",bn)};else{var wo=Ca(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);di=function(){if(wo){var l=document.documentElement.style;Ch=l[wo],l[wo]="none"}},hi=function(){wo&&(document.documentElement.style[wo]=Ch,Ch=void 0)}}function kh(){ct(window,"dragstart",bn)}function Th(){Qt(window,"dragstart",bn)}var uu,Ph;function ka(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(_s(),uu=l,Ph=l.style.outlineStyle,l.style.outlineStyle="none",ct(window,"keydown",_s))}function _s(){uu&&(uu.style.outlineStyle=Ph,uu=void 0,Ph=void 0,Qt(window,"keydown",_s))}function Ih(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function du(l){var h=l.getBoundingClientRect();return{x:h.width/l.offsetWidth||1,y:h.height/l.offsetHeight||1,boundingClientRect:h}}var kp={__proto__:null,TRANSFORM:ql,TRANSITION:Wl,TRANSITION_END:jh,get:Nh,getStyle:yo,create:Tt,remove:rn,empty:Hl,toFront:Ea,toBack:_o,hasClass:Sh,addClass:bt,removeClass:pn,setClass:Eh,getClass:zs,setOpacity:Tn,testProp:Ca,setTransform:Vi,setPosition:ft,getPosition:Us,get disableTextSelection(){return di},get enableTextSelection(){return hi},disableImageDrag:kh,enableImageDrag:Th,preventOutline:ka,restoreOutline:_s,getSizedParentNode:Ih,getScale:du};function ct(l,h,v,j){if(h&&typeof h=="object")for(var T in h)Ah(l,T,h[T],v);else{h=N(h);for(var $=0,Q=h.length;$<Q;$++)Ah(l,h[$],v,j)}return this}var $s="_leaflet_events";function Qt(l,h,v,j){if(arguments.length===1)Tp(l),delete l[$s];else if(h&&typeof h=="object")for(var T in h)Rh(l,T,h[T],v);else if(h=N(h),arguments.length===2)Tp(l,function(le){return A(h,le)!==-1});else for(var $=0,Q=h.length;$<Q;$++)Rh(l,h[$],v,j);return this}function Tp(l,h){for(var v in l[$s]){var j=v.split(/\d/)[0];(!h||h(j))&&Rh(l,j,null,null,v)}}var Bs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ah(l,h,v,j){var T=h+u(v)+(j?"_"+u(j):"");if(l[$s]&&l[$s][T])return this;var $=function(le){return v.call(j||l,le||window.event)},Q=$;!it.touchNative&&it.pointer&&h.indexOf("touch")===0?$=Np(l,h,$):it.touch&&h==="dblclick"?$=Bl(l,$):"addEventListener"in l?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?l.addEventListener(Bs[h]||h,$,it.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?($=function(le){le=le||window.event,Oh(l,le)&&Q(le)},l.addEventListener(Bs[h],$,!1)):l.addEventListener(h,Q,!1):l.attachEvent("on"+h,$),l[$s]=l[$s]||{},l[$s][T]=$}function Rh(l,h,v,j,T){T=T||h+u(v)+(j?"_"+u(j):"");var $=l[$s]&&l[$s][T];if(!$)return this;!it.touchNative&&it.pointer&&h.indexOf("touch")===0?Sp(l,h,$):it.touch&&h==="dblclick"?Sa(l,$):"removeEventListener"in l?l.removeEventListener(Bs[h]||h,$,!1):l.detachEvent("on"+h,$),l[$s][T]=null}function qs(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function bo(l){return Ah(l,"wheel",qs),this}function jo(l){return ct(l,"mousedown touchstart dblclick contextmenu",qs),l._leaflet_disable_click=!0,this}function bn(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function ws(l){return bn(l),qs(l),this}function Mh(l){if(l.composedPath)return l.composedPath();for(var h=[],v=l.target;v;)h.push(v),v=v.parentNode;return h}function hu(l,h){if(!h)return new I(l.clientX,l.clientY);var v=du(h),j=v.boundingClientRect;return new I((l.clientX-j.left)/v.x-h.clientLeft,(l.clientY-j.top)/v.y-h.clientTop)}var gn=it.linux&&it.chrome?window.devicePixelRatio:it.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Pp(l){return it.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/gn:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Oh(l,h){var v=h.relatedTarget;if(!v)return!0;try{for(;v&&v!==l;)v=v.parentNode}catch{return!1}return v!==l}var Ip={__proto__:null,on:ct,off:Qt,stopPropagation:qs,disableScrollPropagation:bo,disableClickPropagation:jo,preventDefault:bn,stop:ws,getPropagationPath:Mh,getMousePosition:hu,getWheelDelta:Pp,isExternalTarget:Oh,addListener:ct,removeListener:Qt},Dh=K.extend({run:function(l,h,v,j){this.stop(),this._el=l,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(j||.5,.2),this._startPos=Us(l),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(l){var h=+new Date-this._startTime,v=this._duration*1e3;h<v?this._runFrame(this._easeOut(h/v),l):(this._runFrame(1),this._complete())},_runFrame:function(l,h){var v=this._startPos.add(this._offset.multiplyBy(l));h&&v._round(),ft(this._el,v),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),Et=K.extend({options:{crs:pe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,h){h=b(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView($e(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Wl&&it.any3d&&!it.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ct(this._proxy,jh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,h,v){if(h=h===void 0?this._zoom:this._limitZoom(h),l=this._limitCenter($e(l),h,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=i({animate:v.animate},v.zoom),v.pan=i({animate:v.animate,duration:v.duration},v.pan));var j=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,h,v.zoom):this._tryAnimatedPan(l,v.pan);if(j)return clearTimeout(this._sizeTimer),this}return this._resetView(l,h,v.pan&&v.pan.noMoveStart),this},setZoom:function(l,h){return this._loaded?this.setView(this.getCenter(),l,{zoom:h}):(this._zoom=l,this)},zoomIn:function(l,h){return l=l||(it.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,h)},zoomOut:function(l,h){return l=l||(it.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,h)},setZoomAround:function(l,h,v){var j=this.getZoomScale(h),T=this.getSize().divideBy(2),$=l instanceof I?l:this.latLngToContainerPoint(l),Q=$.subtract(T).multiplyBy(1-1/j),le=this.containerPointToLatLng(T.add(Q));return this.setView(le,h,{zoom:v})},_getBoundsCenterZoom:function(l,h){h=h||{},l=l.getBounds?l.getBounds():Ee(l);var v=B(h.paddingTopLeft||h.padding||[0,0]),j=B(h.paddingBottomRight||h.padding||[0,0]),T=this.getBoundsZoom(l,!1,v.add(j));if(T=typeof h.maxZoom=="number"?Math.min(h.maxZoom,T):T,T===1/0)return{center:l.getCenter(),zoom:T};var $=j.subtract(v).divideBy(2),Q=this.project(l.getSouthWest(),T),le=this.project(l.getNorthEast(),T),de=this.unproject(Q.add(le).divideBy(2).add($),T);return{center:de,zoom:T}},fitBounds:function(l,h){if(l=Ee(l),!l.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(l,h);return this.setView(v.center,v.zoom,h)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,h){return this.setView(l,this._zoom,{pan:h})},panBy:function(l,h){if(l=B(l).round(),h=h||{},!l.x&&!l.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Dh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){bt(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,v,h.duration||.25,h.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,h,v){if(v=v||{},v.animate===!1||!it.any3d)return this.setView(l,h,v);this._stop();var j=this.project(this.getCenter()),T=this.project(l),$=this.getSize(),Q=this._zoom;l=$e(l),h=h===void 0?Q:h;var le=Math.max($.x,$.y),de=le*this.getZoomScale(Q,h),je=T.distanceTo(j)||1,Be=1.42,ut=Be*Be;function Nt(Hn){var Gp=Hn?-1:1,F6=Hn?de:le,V6=de*de-le*le+Gp*ut*ut*je*je,z6=2*F6*ut*je,h0=V6/z6,VS=Math.sqrt(h0*h0+1)-h0,U6=VS<1e-9?-18:Math.log(VS);return U6}function $r(Hn){return(Math.exp(Hn)-Math.exp(-Hn))/2}function dr(Hn){return(Math.exp(Hn)+Math.exp(-Hn))/2}function Hs(Hn){return $r(Hn)/dr(Hn)}var as=Nt(0);function Su(Hn){return le*(dr(as)/dr(as+Be*Hn))}function M6(Hn){return le*(dr(as)*Hs(as+Be*Hn)-$r(as))/ut}function O6(Hn){return 1-Math.pow(1-Hn,1.5)}var D6=Date.now(),LS=(Nt(1)-as)/Be,L6=v.duration?1e3*v.duration:1e3*LS*.8;function FS(){var Hn=(Date.now()-D6)/L6,Gp=O6(Hn)*LS;Hn<=1?(this._flyToFrame=F(FS,this),this._move(this.unproject(j.add(T.subtract(j).multiplyBy(M6(Gp)/je)),Q),this.getScaleZoom(le/Su(Gp),Q),{flyTo:!0})):this._move(l,h)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),FS.call(this),this},flyToBounds:function(l,h){var v=this._getBoundsCenterZoom(l,h);return this.flyTo(v.center,v.zoom,h)},setMaxBounds:function(l){return l=Ee(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var h=this.options.minZoom;return this.options.minZoom=l,this._loaded&&h!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var h=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&h!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,h){this._enforcingBounds=!0;var v=this.getCenter(),j=this._limitCenter(v,this._zoom,Ee(l));return v.equals(j)||this.panTo(j,h),this._enforcingBounds=!1,this},panInside:function(l,h){h=h||{};var v=B(h.paddingTopLeft||h.padding||[0,0]),j=B(h.paddingBottomRight||h.padding||[0,0]),T=this.project(this.getCenter()),$=this.project(l),Q=this.getPixelBounds(),le=ue([Q.min.add(v),Q.max.subtract(j)]),de=le.getSize();if(!le.contains($)){this._enforcingBounds=!0;var je=$.subtract(le.getCenter()),Be=le.extend($).getSize().subtract(de);T.x+=je.x<0?-Be.x:Be.x,T.y+=je.y<0?-Be.y:Be.y,this.panTo(this.unproject(T),h),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=i({animate:!1,pan:!0},l===!0?{animate:!0}:l);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),j=h.divideBy(2).round(),T=v.divideBy(2).round(),$=j.subtract(T);return!$.x&&!$.y?this:(l.animate&&l.pan?this.panBy($):(l.pan&&this._rawPanBy($),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=i({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=o(this._handleGeolocationResponse,this),v=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,v,l):navigator.geolocation.getCurrentPosition(h,v,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var h=l.code,v=l.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var h=l.coords.latitude,v=l.coords.longitude,j=new De(h,v),T=j.toBounds(l.coords.accuracy*2),$=this._locateOptions;if($.setView){var Q=this.getBoundsZoom(T);this.setView(j,$.maxZoom?Math.min(Q,$.maxZoom):Q)}var le={latlng:j,bounds:T,timestamp:l.timestamp};for(var de in l.coords)typeof l.coords[de]=="number"&&(le[de]=l.coords[de]);this.fire("locationfound",le)}},addHandler:function(l,h){if(!h)return this;var v=this[l]=new h(this);return this._handlers.push(v),this.options[l]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),rn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)rn(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,h){var v="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),j=Tt("div",v,h||this._mapPane);return l&&(this._panes[l]=j),j},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),h=this.unproject(l.getBottomLeft()),v=this.unproject(l.getTopRight());return new ge(h,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,h,v){l=Ee(l),v=B(v||[0,0]);var j=this.getZoom()||0,T=this.getMinZoom(),$=this.getMaxZoom(),Q=l.getNorthWest(),le=l.getSouthEast(),de=this.getSize().subtract(v),je=ue(this.project(le,j),this.project(Q,j)).getSize(),Be=it.any3d?this.options.zoomSnap:1,ut=de.x/je.x,Nt=de.y/je.y,$r=h?Math.max(ut,Nt):Math.min(ut,Nt);return j=this.getScaleZoom($r,j),Be&&(j=Math.round(j/(Be/100))*(Be/100),j=h?Math.ceil(j/Be)*Be:Math.floor(j/Be)*Be),Math.max(T,Math.min($,j))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,h){var v=this._getTopLeftPoint(l,h);return new X(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,h){var v=this.options.crs;return h=h===void 0?this._zoom:h,v.scale(l)/v.scale(h)},getScaleZoom:function(l,h){var v=this.options.crs;h=h===void 0?this._zoom:h;var j=v.zoom(l*v.scale(h));return isNaN(j)?1/0:j},project:function(l,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint($e(l),h)},unproject:function(l,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(B(l),h)},layerPointToLatLng:function(l){var h=B(l).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(l){var h=this.project($e(l))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng($e(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(Ee(l))},distance:function(l,h){return this.options.crs.distance($e(l),$e(h))},containerPointToLayerPoint:function(l){return B(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return B(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var h=this.containerPointToLayerPoint(B(l));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint($e(l)))},mouseEventToContainerPoint:function(l){return hu(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var h=this._container=Nh(l);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ct(h,"scroll",this._onScroll,this),this._containerId=u(h)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&it.any3d,bt(l,"leaflet-container"+(it.touch?" leaflet-touch":"")+(it.retina?" leaflet-retina":"")+(it.ielt9?" leaflet-oldie":"")+(it.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=yo(l,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ft(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(bt(l.markerPane,"leaflet-zoom-hide"),bt(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,h,v){ft(this._mapPane,new I(0,0));var j=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var T=this._zoom!==h;this._moveStart(T,v)._move(l,h)._moveEnd(T),this.fire("viewreset"),j&&this.fire("load")},_moveStart:function(l,h){return l&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(l,h,v,j){h===void 0&&(h=this._zoom);var T=this._zoom!==h;return this._zoom=h,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),j?v&&v.pinch&&this.fire("zoom",v):((T||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){ft(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[u(this._container)]=this;var h=l?Qt:ct;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),it.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,h){for(var v=[],j,T=h==="mouseout"||h==="mouseover",$=l.target||l.srcElement,Q=!1;$;){if(j=this._targets[u($)],j&&(h==="click"||h==="preclick")&&this._draggableMoved(j)){Q=!0;break}if(j&&j.listens(h,!0)&&(T&&!Oh($,l)||(v.push(j),T))||$===this._container)break;$=$.parentNode}return!v.length&&!Q&&!T&&this.listens(h,!0)&&(v=[this]),v},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var h=l.target||l.srcElement;if(!(!this._loaded||h._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(h))){var v=l.type;v==="mousedown"&&ka(h),this._fireDOMEvent(l,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,h,v){if(l.type==="click"){var j=i({},l);j.type="preclick",this._fireDOMEvent(j,j.type,v)}var T=this._findEventTargets(l,h);if(v){for(var $=[],Q=0;Q<v.length;Q++)v[Q].listens(h,!0)&&$.push(v[Q]);T=$.concat(T)}if(T.length){h==="contextmenu"&&bn(l);var le=T[0],de={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var je=le.getLatLng&&(!le._radius||le._radius<=10);de.containerPoint=je?this.latLngToContainerPoint(le.getLatLng()):this.mouseEventToContainerPoint(l),de.layerPoint=this.containerPointToLayerPoint(de.containerPoint),de.latlng=je?le.getLatLng():this.layerPointToLatLng(de.layerPoint)}for(Q=0;Q<T.length;Q++)if(T[Q].fire(h,de,!0),de.originalEvent._stopped||T[Q].options.bubblingMouseEvents===!1&&A(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,h=this._handlers.length;l<h;l++)this._handlers[l].disable()},whenReady:function(l,h){return this._loaded?l.call(h||this,{target:this}):this.on("load",l,h),this},_getMapPanePos:function(){return Us(this._mapPane)||new I(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,h){var v=l&&h!==void 0?this._getNewPixelOrigin(l,h):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,h){var v=this.getSize()._divideBy(2);return this.project(l,h)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,h,v){var j=this._getNewPixelOrigin(v,h);return this.project(l,h)._subtract(j)},_latLngBoundsToNewLayerBounds:function(l,h,v){var j=this._getNewPixelOrigin(v,h);return ue([this.project(l.getSouthWest(),h)._subtract(j),this.project(l.getNorthWest(),h)._subtract(j),this.project(l.getSouthEast(),h)._subtract(j),this.project(l.getNorthEast(),h)._subtract(j)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,h,v){if(!v)return l;var j=this.project(l,h),T=this.getSize().divideBy(2),$=new X(j.subtract(T),j.add(T)),Q=this._getBoundsOffset($,v,h);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?l:this.unproject(j.add(Q),h)},_limitOffset:function(l,h){if(!h)return l;var v=this.getPixelBounds(),j=new X(v.min.add(l),v.max.add(l));return l.add(this._getBoundsOffset(j,h))},_getBoundsOffset:function(l,h,v){var j=ue(this.project(h.getNorthEast(),v),this.project(h.getSouthWest(),v)),T=j.min.subtract(l.min),$=j.max.subtract(l.max),Q=this._rebound(T.x,-$.x),le=this._rebound(T.y,-$.y);return new I(Q,le)},_rebound:function(l,h){return l+h>0?Math.round(l-h)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(h))},_limitZoom:function(l){var h=this.getMinZoom(),v=this.getMaxZoom(),j=it.any3d?this.options.zoomSnap:1;return j&&(l=Math.round(l/j)*j),Math.max(h,Math.min(v,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,h){var v=this._getCenterOffset(l)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,h),!0)},_createAnimProxy:function(){var l=this._proxy=Tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(h){var v=ql,j=this._proxy.style[v];Vi(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),j===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){rn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),h=this.getZoom();Vi(this._proxy,this.project(l,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,h,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var j=this.getZoomScale(h),T=this._getCenterOffset(l)._divideBy(1-1/j);return v.animate!==!0&&!this.getSize().contains(T)?!1:(F(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(l,h,!0)},this),!0)},_animateZoom:function(l,h,v,j){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=h,bt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:h,noUpdate:j}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fu(l,h){return new Et(l,h)}var is=H.extend({options:{position:"topright"},initialize:function(l){b(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var h=this._map;return h&&h.removeControl(this),this.options.position=l,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var h=this._container=this.onAdd(l),v=this.getPosition(),j=l._controlCorners[v];return bt(h,"leaflet-control"),v.indexOf("bottom")!==-1?j.insertBefore(h,j.firstChild):j.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(rn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Ur=function(l){return new is(l)};Et.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},h="leaflet-",v=this._controlContainer=Tt("div",h+"control-container",this._container);function j(T,$){var Q=h+T+" "+h+$;l[T+$]=Tt("div",Q,v)}j("top","left"),j("top","right"),j("bottom","left"),j("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)rn(this._controlCorners[l]);rn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Lh=is.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,h,v,j){return v<j?-1:j<v?1:0}},initialize:function(l,h,v){b(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var j in l)this._addLayer(l[j],j);for(j in h)this._addLayer(h[j],j,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return is.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,h){return this._addLayer(l,h),this._map?this._update():this},addOverlay:function(l,h){return this._addLayer(l,h,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var h=this._getLayer(u(l));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){bt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(bt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):pn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",h=this._container=Tt("div",l),v=this.options.collapsed;h.setAttribute("aria-haspopup",!0),jo(h),bo(h);var j=this._section=Tt("section",l+"-list");v&&(this._map.on("click",this.collapse,this),ct(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=Tt("a",l+"-toggle",h);T.href="#",T.title="Layers",T.setAttribute("role","button"),ct(T,{keydown:function($){$.keyCode===13&&this._expandSafely()},click:function($){bn($),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=Tt("div",l+"-base",j),this._separator=Tt("div",l+"-separator",j),this._overlaysList=Tt("div",l+"-overlays",j),h.appendChild(j)},_getLayer:function(l){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&u(this._layers[h].layer)===l)return this._layers[h]},_addLayer:function(l,h,v){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:h,overlay:v}),this.options.sortLayers&&this._layers.sort(o(function(j,T){return this.options.sortFunction(j.layer,T.layer,j.name,T.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Hl(this._baseLayersList),Hl(this._overlaysList),this._layerControlInputs=[];var l,h,v,j,T=0;for(v=0;v<this._layers.length;v++)j=this._layers[v],this._addItem(j),h=h||j.overlay,l=l||!j.overlay,T+=j.overlay?0:1;return this.options.hideSingleBase&&(l=l&&T>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=h&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var h=this._getLayer(u(l.target)),v=h.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;v&&this._map.fire(v,h)},_createRadioElement:function(l,h){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(h?' checked="checked"':"")+"/>",j=document.createElement("div");return j.innerHTML=v,j.firstChild},_addItem:function(l){var h=document.createElement("label"),v=this._map.hasLayer(l.layer),j;l.overlay?(j=document.createElement("input"),j.type="checkbox",j.className="leaflet-control-layers-selector",j.defaultChecked=v):j=this._createRadioElement("leaflet-base-layers_"+u(this),v),this._layerControlInputs.push(j),j.layerId=u(l.layer),ct(j,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+l.name;var $=document.createElement("span");h.appendChild($),$.appendChild(j),$.appendChild(T);var Q=l.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,h,v,j=[],T=[];this._handlingClick=!0;for(var $=l.length-1;$>=0;$--)h=l[$],v=this._getLayer(h.layerId).layer,h.checked?j.push(v):h.checked||T.push(v);for($=0;$<T.length;$++)this._map.hasLayer(T[$])&&this._map.removeLayer(T[$]);for($=0;$<j.length;$++)this._map.hasLayer(j[$])||this._map.addLayer(j[$]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,h,v,j=this._map.getZoom(),T=l.length-1;T>=0;T--)h=l[T],v=this._getLayer(h.layerId).layer,h.disabled=v.options.minZoom!==void 0&&j<v.options.minZoom||v.options.maxZoom!==void 0&&j>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,ct(l,"click",bn),this.expand();var h=this;setTimeout(function(){Qt(l,"click",bn),h._preventClick=!1})}}),a0=function(l,h,v){return new Lh(l,h,v)},Ta=is.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var h="leaflet-control-zoom",v=Tt("div",h+" leaflet-bar"),j=this.options;return this._zoomInButton=this._createButton(j.zoomInText,j.zoomInTitle,h+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(j.zoomOutText,j.zoomOutTitle,h+"-out",v,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,h,v,j,T){var $=Tt("a",v,j);return $.innerHTML=l,$.href="#",$.title=h,$.setAttribute("role","button"),$.setAttribute("aria-label",h),jo($),ct($,"click",ws),ct($,"click",T,this),ct($,"click",this._refocusOnMap,this),$},_updateDisabled:function(){var l=this._map,h="leaflet-disabled";pn(this._zoomInButton,h),pn(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(bt(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(bt(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});Et.mergeOptions({zoomControl:!0}),Et.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ta,this.addControl(this.zoomControl))});var Ap=function(l){return new Ta(l)},mu=is.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var h="leaflet-control-scale",v=Tt("div",h),j=this.options;return this._addScales(j,h+"-line",v),l.on(j.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),v},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,h,v){l.metric&&(this._mScale=Tt("div",h,v)),l.imperial&&(this._iScale=Tt("div",h,v))},_update:function(){var l=this._map,h=l.getSize().y/2,v=l.distance(l.containerPointToLatLng([0,h]),l.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(v)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var h=this._getRoundNum(l),v=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,v,h/l)},_updateImperial:function(l){var h=l*3.2808399,v,j,T;h>5280?(v=h/5280,j=this._getRoundNum(v),this._updateScale(this._iScale,j+" mi",j/v)):(T=this._getRoundNum(h),this._updateScale(this._iScale,T+" ft",T/h))},_updateScale:function(l,h,v){l.style.width=Math.round(this.options.maxWidth*v)+"px",l.innerHTML=h},_getRoundNum:function(l){var h=Math.pow(10,(Math.floor(l)+"").length-1),v=l/h;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,h*v}}),pu=function(l){return new mu(l)},Rp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',No=is.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(it.inlineSvg?Rp+" ":"")+"Leaflet</a>"},initialize:function(l){b(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Tt("div","leaflet-control-attribution"),jo(this._container);for(var h in l._layers)l._layers[h].getAttribution&&this.addAttribution(l._layers[h].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var h in this._attributions)this._attributions[h]&&l.push(h);var v=[];this.options.prefix&&v.push(this.options.prefix),l.length&&v.push(l.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});Et.mergeOptions({attributionControl:!0}),Et.addInitHook(function(){this.options.attributionControl&&new No().addTo(this)});var o0=function(l){return new No(l)};is.Layers=Lh,is.Zoom=Ta,is.Scale=mu,is.Attribution=No,Ur.layers=a0,Ur.zoom=Ap,Ur.scale=pu,Ur.attribution=o0;var bs=H.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bs.addTo=function(l,h){return l.addHandler(h,this),this};var Gl={Events:Z},Fh=it.touch?"touchstart mousedown":"mousedown",fi=K.extend({options:{clickTolerance:3},initialize:function(l,h,v,j){b(this,j),this._element=l,this._dragStartTarget=h||l,this._preventOutline=v},enable:function(){this._enabled||(ct(this._dragStartTarget,Fh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fi._dragging===this&&this.finishDrag(!0),Qt(this._dragStartTarget,Fh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!Sh(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){fi._dragging===this&&this.finishDrag();return}if(!(fi._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(fi._dragging=this,this._preventOutline&&ka(this._element),kh(),di(),!this._moving)){this.fire("down");var h=l.touches?l.touches[0]:l,v=Ih(this._element);this._startPoint=new I(h.clientX,h.clientY),this._startPos=Us(this._element),this._parentScale=du(v);var j=l.type==="mousedown";ct(document,j?"mousemove":"touchmove",this._onMove,this),ct(document,j?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var h=l.touches&&l.touches.length===1?l.touches[0]:l,v=new I(h.clientX,h.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,bn(l),this._moved||(this.fire("dragstart"),this._moved=!0,bt(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),bt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),ft(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){pn(document.body,"leaflet-dragging"),this._lastTarget&&(pn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qt(document,"mousemove touchmove",this._onMove,this),Qt(document,"mouseup touchend touchcancel",this._onUp,this),Th(),hi();var h=this._moved&&this._moving;this._moving=!1,fi._dragging=!1,h&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function gu(l,h,v){var j,T=[1,4,2,8],$,Q,le,de,je,Be,ut,Nt;for($=0,Be=l.length;$<Be;$++)l[$]._code=zi(l[$],h);for(le=0;le<4;le++){for(ut=T[le],j=[],$=0,Be=l.length,Q=Be-1;$<Be;Q=$++)de=l[$],je=l[Q],de._code&ut?je._code&ut||(Nt=ur(je,de,ut,h,v),Nt._code=zi(Nt,h),j.push(Nt)):(je._code&ut&&(Nt=ur(je,de,ut,h,v),Nt._code=zi(Nt,h),j.push(Nt)),j.push(de));l=j}return l}function vu(l,h){var v,j,T,$,Q,le,de,je,Be;if(!l||l.length===0)throw new Error("latlngs not passed");m(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var ut=$e([0,0]),Nt=Ee(l),$r=Nt.getNorthWest().distanceTo(Nt.getSouthWest())*Nt.getNorthEast().distanceTo(Nt.getNorthWest());$r<1700&&(ut=xu(l));var dr=l.length,Hs=[];for(v=0;v<dr;v++){var as=$e(l[v]);Hs.push(h.project($e([as.lat-ut.lat,as.lng-ut.lng])))}for(le=de=je=0,v=0,j=dr-1;v<dr;j=v++)T=Hs[v],$=Hs[j],Q=T.y*$.x-$.y*T.x,de+=(T.x+$.x)*Q,je+=(T.y+$.y)*Q,le+=Q*3;le===0?Be=Hs[0]:Be=[de/le,je/le];var Su=h.unproject(B(Be));return $e([Su.lat+ut.lat,Su.lng+ut.lng])}function xu(l){for(var h=0,v=0,j=0,T=0;T<l.length;T++){var $=$e(l[T]);h+=$.lat,v+=$.lng,j++}return $e([h/j,v/j])}var yu={__proto__:null,clipPolygon:gu,polygonCenter:vu,centroid:xu};function Vh(l,h){if(!h||!l.length)return l.slice();var v=h*h;return l=Op(l,v),l=Mp(l,v),l}function zh(l,h,v){return Math.sqrt(Ws(l,h,v,!0))}function Pa(l,h,v){return Ws(l,h,v)}function Mp(l,h){var v=l.length,j=typeof Uint8Array<"u"?Uint8Array:Array,T=new j(v);T[0]=T[v-1]=1,_u(l,T,h,0,v-1);var $,Q=[];for($=0;$<v;$++)T[$]&&Q.push(l[$]);return Q}function _u(l,h,v,j,T){var $=0,Q,le,de;for(le=j+1;le<=T-1;le++)de=Ws(l[le],l[j],l[T],!0),de>$&&(Q=le,$=de);$>v&&(h[Q]=1,_u(l,h,v,j,Q),_u(l,h,v,Q,T))}function Op(l,h){for(var v=[l[0]],j=1,T=0,$=l.length;j<$;j++)Dp(l[j],l[T])>h&&(v.push(l[j]),T=j);return T<$-1&&v.push(l[$-1]),v}var Uh;function Kl(l,h,v,j,T){var $=j?Uh:zi(l,v),Q=zi(h,v),le,de,je;for(Uh=Q;;){if(!($|Q))return[l,h];if($&Q)return!1;le=$||Q,de=ur(l,h,le,v,T),je=zi(de,v),le===$?(l=de,$=je):(h=de,Q=je)}}function ur(l,h,v,j,T){var $=h.x-l.x,Q=h.y-l.y,le=j.min,de=j.max,je,Be;return v&8?(je=l.x+$*(de.y-l.y)/Q,Be=de.y):v&4?(je=l.x+$*(le.y-l.y)/Q,Be=le.y):v&2?(je=de.x,Be=l.y+Q*(de.x-l.x)/$):v&1&&(je=le.x,Be=l.y+Q*(le.x-l.x)/$),new I(je,Be,T)}function zi(l,h){var v=0;return l.x<h.min.x?v|=1:l.x>h.max.x&&(v|=2),l.y<h.min.y?v|=4:l.y>h.max.y&&(v|=8),v}function Dp(l,h){var v=h.x-l.x,j=h.y-l.y;return v*v+j*j}function Ws(l,h,v,j){var T=h.x,$=h.y,Q=v.x-T,le=v.y-$,de=Q*Q+le*le,je;return de>0&&(je=((l.x-T)*Q+(l.y-$)*le)/de,je>1?(T=v.x,$=v.y):je>0&&(T+=Q*je,$+=le*je)),Q=l.x-T,le=l.y-$,j?Q*Q+le*le:new I(T,$)}function m(l){return!E(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function C(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),m(l)}function M(l,h){var v,j,T,$,Q,le,de,je;if(!l||l.length===0)throw new Error("latlngs not passed");m(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Be=$e([0,0]),ut=Ee(l),Nt=ut.getNorthWest().distanceTo(ut.getSouthWest())*ut.getNorthEast().distanceTo(ut.getNorthWest());Nt<1700&&(Be=xu(l));var $r=l.length,dr=[];for(v=0;v<$r;v++){var Hs=$e(l[v]);dr.push(h.project($e([Hs.lat-Be.lat,Hs.lng-Be.lng])))}for(v=0,j=0;v<$r-1;v++)j+=dr[v].distanceTo(dr[v+1])/2;if(j===0)je=dr[0];else for(v=0,$=0;v<$r-1;v++)if(Q=dr[v],le=dr[v+1],T=Q.distanceTo(le),$+=T,$>j){de=($-j)/T,je=[le.x-de*(le.x-Q.x),le.y-de*(le.y-Q.y)];break}var as=h.unproject(B(je));return $e([as.lat+Be.lat,as.lng+Be.lng])}var W={__proto__:null,simplify:Vh,pointToSegmentDistance:zh,closestPointOnSegment:Pa,clipSegment:Kl,_getEdgeIntersection:ur,_getBitCode:zi,_sqClosestPointOnSegment:Ws,isFlat:m,_flat:C,polylineCenter:M},ae={project:function(l){return new I(l.lng,l.lat)},unproject:function(l){return new De(l.y,l.x)},bounds:new X([-180,-90],[180,90])},he={R:6378137,R_MINOR:6356752314245179e-9,bounds:new X([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var h=Math.PI/180,v=this.R,j=l.lat*h,T=this.R_MINOR/v,$=Math.sqrt(1-T*T),Q=$*Math.sin(j),le=Math.tan(Math.PI/4-j/2)/Math.pow((1-Q)/(1+Q),$/2);return j=-v*Math.log(Math.max(le,1e-10)),new I(l.lng*h*v,j)},unproject:function(l){for(var h=180/Math.PI,v=this.R,j=this.R_MINOR/v,T=Math.sqrt(1-j*j),$=Math.exp(-l.y/v),Q=Math.PI/2-2*Math.atan($),le=0,de=.1,je;le<15&&Math.abs(de)>1e-7;le++)je=T*Math.sin(Q),je=Math.pow((1-je)/(1+je),T/2),de=Math.PI/2-2*Math.atan($*je)-Q,Q+=de;return new De(Q*h,l.x*h/v)}},Me={__proto__:null,LonLat:ae,Mercator:he,SphericalMercator:ie},qt=i({},se,{code:"EPSG:3395",projection:he,transformation:function(){var l=.5/(Math.PI*he.R);return oe(l,.5,-l,.5)}()}),Wn=i({},se,{code:"EPSG:4326",projection:ae,transformation:oe(1/180,1,-1/180,.5)}),Rt=i({},Ae,{projection:ae,transformation:oe(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,h){var v=h.lng-l.lng,j=h.lat-l.lat;return Math.sqrt(v*v+j*j)},infinite:!0});Ae.Earth=se,Ae.EPSG3395=qt,Ae.EPSG3857=pe,Ae.EPSG900913=Ce,Ae.EPSG4326=Wn,Ae.Simple=Rt;var Xt=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[u(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[u(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var h=l.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var v=this.getEvents();h.on(v,this),this.once("remove",function(){h.off(v,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});Et.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var h=u(l);return this._layers[h]?this:(this._layers[h]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var h=u(l);return this._layers[h]?(this._loaded&&l.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return u(l)in this._layers},eachLayer:function(l,h){for(var v in this._layers)l.call(h,this._layers[v]);return this},_addLayers:function(l){l=l?E(l)?l:[l]:[];for(var h=0,v=l.length;h<v;h++)this.addLayer(l[h])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[u(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var h=u(l);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,h=-1/0,v=this._getZoomSpan();for(var j in this._zoomBoundLayers){var T=this._zoomBoundLayers[j].options;l=T.minZoom===void 0?l:Math.min(l,T.minZoom),h=T.maxZoom===void 0?h:Math.max(h,T.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=l===1/0?void 0:l,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var jn=Xt.extend({initialize:function(l,h){b(this,h),this._layers={};var v,j;if(l)for(v=0,j=l.length;v<j;v++)this.addLayer(l[v])},addLayer:function(l){var h=this.getLayerId(l);return this._layers[h]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var h=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(l){var h=typeof l=="number"?l:this.getLayerId(l);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var h=Array.prototype.slice.call(arguments,1),v,j;for(v in this._layers)j=this._layers[v],j[l]&&j[l].apply(j,h);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,h){for(var v in this._layers)l.call(h,this._layers[v]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return u(l)}}),So=function(l,h){return new jn(l,h)},Mn=jn.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),jn.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),jn.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new ge;for(var h in this._layers){var v=this._layers[h];l.extend(v.getBounds?v.getBounds():v.getLatLng())}return l}}),wu=function(l,h){return new Mn(l,h)},Ui=H.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){b(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,h){var v=this._getIconUrl(l);if(!v){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var j=this._createImg(v,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(j,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(j.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),j},_setIconStyles:function(l,h){var v=this.options,j=v[h+"Size"];typeof j=="number"&&(j=[j,j]);var T=B(j),$=B(h==="shadow"&&v.shadowAnchor||v.iconAnchor||T&&T.divideBy(2,!0));l.className="leaflet-marker-"+h+" "+(v.className||""),$&&(l.style.marginLeft=-$.x+"px",l.style.marginTop=-$.y+"px"),T&&(l.style.width=T.x+"px",l.style.height=T.y+"px")},_createImg:function(l,h){return h=h||document.createElement("img"),h.src=l,h},_getIconUrl:function(l){return it.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function p6(l){return new Ui(l)}var $h=Ui.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof $h.imagePath!="string"&&($h.imagePath=this._detectIconPath()),(this.options.imagePath||$h.imagePath)+Ui.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var h=function(v,j,T){var $=j.exec(v);return $&&$[T]};return l=h(l,/^url\((['"])?(.+)\1\)$/,2),l&&h(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Tt("div","leaflet-default-icon-path",document.body),h=yo(l,"background-image")||yo(l,"backgroundImage");if(document.body.removeChild(l),h=this._stripUrl(h),h)return h;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),xS=bs.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new fi(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),bt(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var h=this._marker,v=h._map,j=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,$=Us(h._icon),Q=v.getPixelBounds(),le=v.getPixelOrigin(),de=ue(Q.min._subtract(le).add(T),Q.max._subtract(le).subtract(T));if(!de.contains($)){var je=B((Math.max(de.max.x,$.x)-de.max.x)/(Q.max.x-de.max.x)-(Math.min(de.min.x,$.x)-de.min.x)/(Q.min.x-de.min.x),(Math.max(de.max.y,$.y)-de.max.y)/(Q.max.y-de.max.y)-(Math.min(de.min.y,$.y)-de.min.y)/(Q.min.y-de.min.y)).multiplyBy(j);v.panBy(je,{animate:!1}),this._draggable._newPos._add(je),this._draggable._startPos._add(je),ft(h._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=F(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,l)))},_onDrag:function(l){var h=this._marker,v=h._shadow,j=Us(h._icon),T=h._map.layerPointToLatLng(j);v&&ft(v,j),h._latlng=T,l.latlng=T,l.oldLatLng=this._oldLatLng,h.fire("move",l).fire("drag",l)},_onDragEnd:function(l){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),Lp=Xt.extend({options:{icon:new $h,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,h){b(this,h),this._latlng=$e(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var h=this._latlng;return this._latlng=$e(l),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=l.icon.createIcon(this._icon),j=!1;v!==this._icon&&(this._icon&&this._removeIcon(),j=!0,l.title&&(v.title=l.title),v.tagName==="IMG"&&(v.alt=l.alt||"")),bt(v,h),l.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ct(v,"focus",this._panOnFocus,this);var T=l.icon.createShadow(this._shadow),$=!1;T!==this._shadow&&(this._removeShadow(),$=!0),T&&(bt(T,h),T.alt=""),this._shadow=T,l.opacity<1&&this._updateOpacity(),j&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&$&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qt(this._icon,"focus",this._panOnFocus,this),rn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&rn(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&ft(this._icon,l),this._shadow&&ft(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(bt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xS)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xS(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Tn(this._icon,l),this._shadow&&Tn(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var h=this.options.icon.options,v=h.iconSize?B(h.iconSize):B(0,0),j=h.iconAnchor?B(h.iconAnchor):B(0,0);l.panInside(this._latlng,{paddingTopLeft:j,paddingBottomRight:v.subtract(j)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function g6(l,h){return new Lp(l,h)}var Eo=Xt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return b(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Fp=Eo.extend({options:{fill:!0,radius:10},initialize:function(l,h){b(this,h),this._latlng=$e(l),this._radius=this.options.radius},setLatLng:function(l){var h=this._latlng;return this._latlng=$e(l),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var h=l&&l.radius||this._radius;return Eo.prototype.setStyle.call(this,l),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,h=this._radiusY||l,v=this._clickTolerance(),j=[l+v,h+v];this._pxBounds=new X(this._point.subtract(j),this._point.add(j))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function v6(l,h){return new Fp(l,h)}var l0=Fp.extend({initialize:function(l,h,v){if(typeof h=="number"&&(h=i({},v,{radius:h})),b(this,h),this._latlng=$e(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new ge(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Eo.prototype.setStyle,_project:function(){var l=this._latlng.lng,h=this._latlng.lat,v=this._map,j=v.options.crs;if(j.distance===se.distance){var T=Math.PI/180,$=this._mRadius/se.R/T,Q=v.project([h+$,l]),le=v.project([h-$,l]),de=Q.add(le).divideBy(2),je=v.unproject(de).lat,Be=Math.acos((Math.cos($*T)-Math.sin(h*T)*Math.sin(je*T))/(Math.cos(h*T)*Math.cos(je*T)))/T;(isNaN(Be)||Be===0)&&(Be=$/Math.cos(Math.PI/180*h)),this._point=de.subtract(v.getPixelOrigin()),this._radius=isNaN(Be)?0:de.x-v.project([je,l-Be]).x,this._radiusY=de.y-Q.y}else{var ut=j.unproject(j.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(ut).x}this._updateBounds()}});function x6(l,h,v){return new l0(l,h,v)}var Ia=Eo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,h){b(this,h),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var h=1/0,v=null,j=Ws,T,$,Q=0,le=this._parts.length;Q<le;Q++)for(var de=this._parts[Q],je=1,Be=de.length;je<Be;je++){T=de[je-1],$=de[je];var ut=j(l,T,$,!0);ut<h&&(h=ut,v=j(l,T,$))}return v&&(v.distance=Math.sqrt(h)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return M(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,h){return h=h||this._defaultShape(),l=$e(l),h.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new ge,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return m(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var h=[],v=m(l),j=0,T=l.length;j<T;j++)v?(h[j]=$e(l[j]),this._bounds.extend(h[j])):h[j]=this._convertLatLngs(l[j]);return h},_project:function(){var l=new X;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),h=new I(l,l);this._rawPxBounds&&(this._pxBounds=new X([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(l,h,v){var j=l[0]instanceof De,T=l.length,$,Q;if(j){for(Q=[],$=0;$<T;$++)Q[$]=this._map.latLngToLayerPoint(l[$]),v.extend(Q[$]);h.push(Q)}else for($=0;$<T;$++)this._projectLatlngs(l[$],h,v)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,v,j,T,$,Q,le,de;for(v=0,T=0,$=this._rings.length;v<$;v++)for(de=this._rings[v],j=0,Q=de.length;j<Q-1;j++)le=Kl(de[j],de[j+1],l,j,!0),le&&(h[T]=h[T]||[],h[T].push(le[0]),(le[1]!==de[j+1]||j===Q-2)&&(h[T].push(le[1]),T++))}},_simplifyPoints:function(){for(var l=this._parts,h=this.options.smoothFactor,v=0,j=l.length;v<j;v++)l[v]=Vh(l[v],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,h){var v,j,T,$,Q,le,de=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(v=0,$=this._parts.length;v<$;v++)for(le=this._parts[v],j=0,Q=le.length,T=Q-1;j<Q;T=j++)if(!(!h&&j===0)&&zh(l,le[T],le[j])<=de)return!0;return!1}});function y6(l,h){return new Ia(l,h)}Ia._flat=C;var bu=Ia.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var h=Ia.prototype._convertLatLngs.call(this,l),v=h.length;return v>=2&&h[0]instanceof De&&h[0].equals(h[v-1])&&h.pop(),h},_setLatLngs:function(l){Ia.prototype._setLatLngs.call(this,l),m(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return m(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,h=this.options.weight,v=new I(h,h);if(l=new X(l.min.subtract(v),l.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var j=0,T=this._rings.length,$;j<T;j++)$=gu(this._rings[j],l,!0),$.length&&this._parts.push($)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var h=!1,v,j,T,$,Q,le,de,je;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for($=0,de=this._parts.length;$<de;$++)for(v=this._parts[$],Q=0,je=v.length,le=je-1;Q<je;le=Q++)j=v[Q],T=v[le],j.y>l.y!=T.y>l.y&&l.x<(T.x-j.x)*(l.y-j.y)/(T.y-j.y)+j.x&&(h=!h);return h||Ia.prototype._containsPoint.call(this,l,!0)}});function _6(l,h){return new bu(l,h)}var Aa=Mn.extend({initialize:function(l,h){b(this,h),this._layers={},l&&this.addData(l)},addData:function(l){var h=E(l)?l:l.features,v,j,T;if(h){for(v=0,j=h.length;v<j;v++)T=h[v],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var $=this.options;if($.filter&&!$.filter(l))return this;var Q=Vp(l,$);return Q?(Q.feature=$p(l),Q.defaultOptions=Q.options,this.resetStyle(Q),$.onEachFeature&&$.onEachFeature(l,Q),this.addLayer(Q)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=i({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(h){this._setLayerStyle(h,l)},this)},_setLayerStyle:function(l,h){l.setStyle&&(typeof h=="function"&&(h=h(l.feature)),l.setStyle(h))}});function Vp(l,h){var v=l.type==="Feature"?l.geometry:l,j=v?v.coordinates:null,T=[],$=h&&h.pointToLayer,Q=h&&h.coordsToLatLng||c0,le,de,je,Be;if(!j&&!v)return null;switch(v.type){case"Point":return le=Q(j),yS($,l,le,h);case"MultiPoint":for(je=0,Be=j.length;je<Be;je++)le=Q(j[je]),T.push(yS($,l,le,h));return new Mn(T);case"LineString":case"MultiLineString":return de=zp(j,v.type==="LineString"?0:1,Q),new Ia(de,h);case"Polygon":case"MultiPolygon":return de=zp(j,v.type==="Polygon"?1:2,Q),new bu(de,h);case"GeometryCollection":for(je=0,Be=v.geometries.length;je<Be;je++){var ut=Vp({geometry:v.geometries[je],type:"Feature",properties:l.properties},h);ut&&T.push(ut)}return new Mn(T);case"FeatureCollection":for(je=0,Be=v.features.length;je<Be;je++){var Nt=Vp(v.features[je],h);Nt&&T.push(Nt)}return new Mn(T);default:throw new Error("Invalid GeoJSON object.")}}function yS(l,h,v,j){return l?l(h,v):new Lp(v,j&&j.markersInheritOptions&&j)}function c0(l){return new De(l[1],l[0],l[2])}function zp(l,h,v){for(var j=[],T=0,$=l.length,Q;T<$;T++)Q=h?zp(l[T],h-1,v):(v||c0)(l[T]),j.push(Q);return j}function u0(l,h){return l=$e(l),l.alt!==void 0?[g(l.lng,h),g(l.lat,h),g(l.alt,h)]:[g(l.lng,h),g(l.lat,h)]}function Up(l,h,v,j){for(var T=[],$=0,Q=l.length;$<Q;$++)T.push(h?Up(l[$],m(l[$])?0:h-1,v,j):u0(l[$],j));return!h&&v&&T.length>0&&T.push(T[0].slice()),T}function ju(l,h){return l.feature?i({},l.feature,{geometry:h}):$p(h)}function $p(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var d0={toGeoJSON:function(l){return ju(this,{type:"Point",coordinates:u0(this.getLatLng(),l)})}};Lp.include(d0),l0.include(d0),Fp.include(d0),Ia.include({toGeoJSON:function(l){var h=!m(this._latlngs),v=Up(this._latlngs,h?1:0,!1,l);return ju(this,{type:(h?"Multi":"")+"LineString",coordinates:v})}}),bu.include({toGeoJSON:function(l){var h=!m(this._latlngs),v=h&&!m(this._latlngs[0]),j=Up(this._latlngs,v?2:h?1:0,!0,l);return h||(j=[j]),ju(this,{type:(v?"Multi":"")+"Polygon",coordinates:j})}}),jn.include({toMultiPoint:function(l){var h=[];return this.eachLayer(function(v){h.push(v.toGeoJSON(l).geometry.coordinates)}),ju(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(l){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(l);var v=h==="GeometryCollection",j=[];return this.eachLayer(function(T){if(T.toGeoJSON){var $=T.toGeoJSON(l);if(v)j.push($.geometry);else{var Q=$p($);Q.type==="FeatureCollection"?j.push.apply(j,Q.features):j.push(Q)}}}),v?ju(this,{geometries:j,type:"GeometryCollection"}):{type:"FeatureCollection",features:j}}});function _S(l,h){return new Aa(l,h)}var w6=_S,Bp=Xt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,h,v){this._url=l,this._bounds=Ee(h),b(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(bt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){rn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&Ea(this._image),this},bringToBack:function(){return this._map&&_o(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=Ee(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",h=this._image=l?this._url:Tt("img");if(bt(h,"leaflet-image-layer"),this._zoomAnimated&&bt(h,"leaflet-zoom-animated"),this.options.className&&bt(h,this.options.className),h.onselectstart=p,h.onmousemove=p,h.onload=o(this.fire,this,"load"),h.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(l){var h=this._map.getZoomScale(l.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Vi(this._image,v,h)},_reset:function(){var l=this._image,h=new X(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=h.getSize();ft(l,h.min),l.style.width=v.x+"px",l.style.height=v.y+"px"},_updateOpacity:function(){Tn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),b6=function(l,h,v){return new Bp(l,h,v)},wS=Bp.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",h=this._image=l?this._url:Tt("video");if(bt(h,"leaflet-image-layer"),this._zoomAnimated&&bt(h,"leaflet-zoom-animated"),this.options.className&&bt(h,this.options.className),h.onselectstart=p,h.onmousemove=p,h.onloadeddata=o(this.fire,this,"load"),l){for(var v=h.getElementsByTagName("source"),j=[],T=0;T<v.length;T++)j.push(v[T].src);this._url=v.length>0?j:[h.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var $=0;$<this._url.length;$++){var Q=Tt("source");Q.src=this._url[$],h.appendChild(Q)}}});function j6(l,h,v){return new wS(l,h,v)}var bS=Bp.extend({_initImage:function(){var l=this._image=this._url;bt(l,"leaflet-image-layer"),this._zoomAnimated&&bt(l,"leaflet-zoom-animated"),this.options.className&&bt(l,this.options.className),l.onselectstart=p,l.onmousemove=p}});function N6(l,h,v){return new bS(l,h,v)}var $i=Xt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,h){l&&(l instanceof De||E(l))?(this._latlng=$e(l),b(this,h)):(b(this,l),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Tn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Tn(this._container,1),this.bringToFront(),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Tn(this._container,0),this._removeTimeout=setTimeout(o(rn,void 0,this._container),200)):rn(this._container),this.options.interactive&&(pn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=$e(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ea(this._container),this},bringToBack:function(){return this._map&&_o(this._container),this},_prepareOpen:function(l){var h=this._source;if(!h._map)return!1;if(h instanceof Mn){h=null;var v=this._source._layers;for(var j in v)if(v[j]._map){h=v[j];break}if(!h)return!1;this._source=h}if(!l)if(h.getCenter)l=h.getCenter();else if(h.getLatLng)l=h.getLatLng();else if(h.getBounds)l=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")l.innerHTML=h;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),h=B(this.options.offset),v=this._getAnchor();this._zoomAnimated?ft(this._container,l.add(v)):h=h.add(l).add(v);var j=this._containerBottom=-h.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=j+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});Et.include({_initOverlay:function(l,h,v,j){var T=h;return T instanceof l||(T=new l(j).setContent(h)),v&&T.setLatLng(v),T}}),Xt.include({_initOverlay:function(l,h,v,j){var T=v;return T instanceof l?(b(T,j),T._source=this):(T=h&&!j?h:new l(j,this),T.setContent(v)),T}});var qp=$i.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,$i.prototype.openOn.call(this,l)},onAdd:function(l){$i.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Eo||this._source.on("preclick",qs))},onRemove:function(l){$i.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Eo||this._source.off("preclick",qs))},getEvents:function(){var l=$i.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",h=this._container=Tt("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=Tt("div",l+"-content-wrapper",h);if(this._contentNode=Tt("div",l+"-content",v),jo(h),bo(this._contentNode),ct(h,"contextmenu",qs),this._tipContainer=Tt("div",l+"-tip-container",h),this._tip=Tt("div",l+"-tip",this._tipContainer),this.options.closeButton){var j=this._closeButton=Tt("a",l+"-close-button",h);j.setAttribute("role","button"),j.setAttribute("aria-label","Close popup"),j.href="#close",j.innerHTML='<span aria-hidden="true">&#215;</span>',ct(j,"click",function(T){bn(T),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,h=l.style;h.width="",h.whiteSpace="nowrap";var v=l.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),h.width=v+1+"px",h.whiteSpace="",h.height="";var j=l.offsetHeight,T=this.options.maxHeight,$="leaflet-popup-scrolled";T&&j>T?(h.height=T+"px",bt(l,$)):pn(l,$),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),v=this._getAnchor();ft(this._container,h.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,h=parseInt(yo(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+h,j=this._containerWidth,T=new I(this._containerLeft,-v-this._containerBottom);T._add(Us(this._container));var $=l.layerPointToContainerPoint(T),Q=B(this.options.autoPanPadding),le=B(this.options.autoPanPaddingTopLeft||Q),de=B(this.options.autoPanPaddingBottomRight||Q),je=l.getSize(),Be=0,ut=0;$.x+j+de.x>je.x&&(Be=$.x+j-je.x+de.x),$.x-Be-le.x<0&&(Be=$.x-le.x),$.y+v+de.y>je.y&&(ut=$.y+v-je.y+de.y),$.y-ut-le.y<0&&(ut=$.y-le.y),(Be||ut)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Be,ut]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),S6=function(l,h){return new qp(l,h)};Et.mergeOptions({closePopupOnClick:!0}),Et.include({openPopup:function(l,h,v){return this._initOverlay(qp,l,h,v).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Xt.include({bindPopup:function(l,h){return this._popup=this._initOverlay(qp,this._popup,l,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Mn||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){ws(l);var h=l.layer||l.target;if(this._popup._source===h&&!(h instanceof Eo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=h,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Wp=$i.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){$i.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){$i.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=$i.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",h=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Tt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var h,v,j=this._map,T=this._container,$=j.latLngToContainerPoint(j.getCenter()),Q=j.layerPointToContainerPoint(l),le=this.options.direction,de=T.offsetWidth,je=T.offsetHeight,Be=B(this.options.offset),ut=this._getAnchor();le==="top"?(h=de/2,v=je):le==="bottom"?(h=de/2,v=0):le==="center"?(h=de/2,v=je/2):le==="right"?(h=0,v=je/2):le==="left"?(h=de,v=je/2):Q.x<$.x?(le="right",h=0,v=je/2):(le="left",h=de+(Be.x+ut.x)*2,v=je/2),l=l.subtract(B(h,v,!0)).add(Be).add(ut),pn(T,"leaflet-tooltip-right"),pn(T,"leaflet-tooltip-left"),pn(T,"leaflet-tooltip-top"),pn(T,"leaflet-tooltip-bottom"),bt(T,"leaflet-tooltip-"+le),ft(T,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Tn(this._container,l)},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(h)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),E6=function(l,h){return new Wp(l,h)};Et.include({openTooltip:function(l,h,v){return this._initOverlay(Wp,l,h,v).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Xt.include({bindTooltip:function(l,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Wp,this._tooltip,l,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var h=l?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[h](v),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Mn||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var h=typeof l.getElement=="function"&&l.getElement();h&&(ct(h,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),ct(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var h=typeof l.getElement=="function"&&l.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var h=l.latlng,v,j;this._tooltip.options.sticky&&l.originalEvent&&(v=this._map.mouseEventToContainerPoint(l.originalEvent),j=this._map.containerPointToLayerPoint(v),h=this._map.layerPointToLatLng(j)),this._tooltip.setLatLng(h)}});var jS=Ui.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var h=l&&l.tagName==="DIV"?l:document.createElement("div"),v=this.options;if(v.html instanceof Element?(Hl(h),h.appendChild(v.html)):h.innerHTML=v.html!==!1?v.html:"",v.bgPos){var j=B(v.bgPos);h.style.backgroundPosition=-j.x+"px "+-j.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function C6(l){return new jS(l)}Ui.Default=$h;var Bh=Xt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:it.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){b(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),rn(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ea(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_o(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof I?l:new I(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var h=this.getPane().children,v=-l(-1/0,1/0),j=0,T=h.length,$;j<T;j++)$=h[j].style.zIndex,h[j]!==this._container&&$&&(v=l(v,+$));isFinite(v)&&(this.options.zIndex=v+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!it.ielt9){Tn(this._container,this.options.opacity);var l=+new Date,h=!1,v=!1;for(var j in this._tiles){var T=this._tiles[j];if(!(!T.current||!T.loaded)){var $=Math.min(1,(l-T.loaded)/200);Tn(T.el,$),$<1?h=!0:(T.active?v=!0:this._onOpaqueTile(T),T.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),h&&(D(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,h=this.options.maxZoom;if(l!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===l?(this._levels[v].el.style.zIndex=h-Math.abs(l-v),this._onUpdateLevel(v)):(rn(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var j=this._levels[l],T=this._map;return j||(j=this._levels[l]={},j.el=Tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),j.el.style.zIndex=h,j.origin=T.project(T.unproject(T.getPixelOrigin()),l).round(),j.zoom=l,this._setZoomTransform(j,T.getCenter(),T.getZoom()),p(j.el.offsetWidth),this._onCreateLevel(j)),this._level=j,j}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var l,h,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)h=this._tiles[l],h.retain=h.current;for(l in this._tiles)if(h=this._tiles[l],h.current&&!h.active){var j=h.coords;this._retainParent(j.x,j.y,j.z,j.z-5)||this._retainChildren(j.x,j.y,j.z,j.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var h in this._tiles)this._tiles[h].coords.z===l&&this._removeTile(h)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)rn(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,h,v,j){var T=Math.floor(l/2),$=Math.floor(h/2),Q=v-1,le=new I(+T,+$);le.z=+Q;var de=this._tileCoordsToKey(le),je=this._tiles[de];return je&&je.active?(je.retain=!0,!0):(je&&je.loaded&&(je.retain=!0),Q>j?this._retainParent(T,$,Q,j):!1)},_retainChildren:function(l,h,v,j){for(var T=2*l;T<2*l+2;T++)for(var $=2*h;$<2*h+2;$++){var Q=new I(T,$);Q.z=v+1;var le=this._tileCoordsToKey(Q),de=this._tiles[le];if(de&&de.active){de.retain=!0;continue}else de&&de.loaded&&(de.retain=!0);v+1<j&&this._retainChildren(T,$,v+1,j)}},_resetView:function(l){var h=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var h=this.options;return h.minNativeZoom!==void 0&&l<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<l?h.maxNativeZoom:l},_setView:function(l,h,v,j){var T=Math.round(h);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var $=this.options.updateWhenZooming&&T!==this._tileZoom;(!j||$)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(l),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(l,h)},_setZoomTransforms:function(l,h){for(var v in this._levels)this._setZoomTransform(this._levels[v],l,h)},_setZoomTransform:function(l,h,v){var j=this._map.getZoomScale(v,l.zoom),T=l.origin.multiplyBy(j).subtract(this._map._getNewPixelOrigin(h,v)).round();it.any3d?Vi(l.el,T,j):ft(l.el,T)},_resetGrid:function(){var l=this._map,h=l.options.crs,v=this._tileSize=this.getTileSize(),j=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,h.wrapLng[0]],j).x/v.x),Math.ceil(l.project([0,h.wrapLng[1]],j).x/v.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([h.wrapLat[0],0],j).y/v.x),Math.ceil(l.project([h.wrapLat[1],0],j).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var h=this._map,v=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),j=h.getZoomScale(v,this._tileZoom),T=h.project(l,this._tileZoom).floor(),$=h.getSize().divideBy(j*2);return new X(T.subtract($),T.add($))},_update:function(l){var h=this._map;if(h){var v=this._clampZoom(h.getZoom());if(l===void 0&&(l=h.getCenter()),this._tileZoom!==void 0){var j=this._getTiledPixelBounds(l),T=this._pxBoundsToTileRange(j),$=T.getCenter(),Q=[],le=this.options.keepBuffer,de=new X(T.getBottomLeft().subtract([le,-le]),T.getTopRight().add([le,-le]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var je in this._tiles){var Be=this._tiles[je].coords;(Be.z!==this._tileZoom||!de.contains(new I(Be.x,Be.y)))&&(this._tiles[je].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(l,v);return}for(var ut=T.min.y;ut<=T.max.y;ut++)for(var Nt=T.min.x;Nt<=T.max.x;Nt++){var $r=new I(Nt,ut);if($r.z=this._tileZoom,!!this._isValidTile($r)){var dr=this._tiles[this._tileCoordsToKey($r)];dr?dr.current=!0:Q.push($r)}}if(Q.sort(function(as,Su){return as.distanceTo($)-Su.distanceTo($)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Hs=document.createDocumentFragment();for(Nt=0;Nt<Q.length;Nt++)this._addTile(Q[Nt],Hs);this._level.el.appendChild(Hs)}}}},_isValidTile:function(l){var h=this._map.options.crs;if(!h.infinite){var v=this._globalTileRange;if(!h.wrapLng&&(l.x<v.min.x||l.x>v.max.x)||!h.wrapLat&&(l.y<v.min.y||l.y>v.max.y))return!1}if(!this.options.bounds)return!0;var j=this._tileCoordsToBounds(l);return Ee(this.options.bounds).overlaps(j)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var h=this._map,v=this.getTileSize(),j=l.scaleBy(v),T=j.add(v),$=h.unproject(j,l.z),Q=h.unproject(T,l.z);return[$,Q]},_tileCoordsToBounds:function(l){var h=this._tileCoordsToNwSe(l),v=new ge(h[0],h[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var h=l.split(":"),v=new I(+h[0],+h[1]);return v.z=+h[2],v},_removeTile:function(l){var h=this._tiles[l];h&&(rn(h.el),delete this._tiles[l],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){bt(l,"leaflet-tile");var h=this.getTileSize();l.style.width=h.x+"px",l.style.height=h.y+"px",l.onselectstart=p,l.onmousemove=p,it.ielt9&&this.options.opacity<1&&Tn(l,this.options.opacity)},_addTile:function(l,h){var v=this._getTilePos(l),j=this._tileCoordsToKey(l),T=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(T),this.createTile.length<2&&F(o(this._tileReady,this,l,null,T)),ft(T,v),this._tiles[j]={el:T,coords:l,current:!0},h.appendChild(T),this.fire("tileloadstart",{tile:T,coords:l})},_tileReady:function(l,h,v){h&&this.fire("tileerror",{error:h,tile:v,coords:l});var j=this._tileCoordsToKey(l);v=this._tiles[j],v&&(v.loaded=+new Date,this._map._fadeAnimated?(Tn(v.el,0),D(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),h||(bt(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),it.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var h=new I(this._wrapX?f(l.x,this._wrapX):l.x,this._wrapY?f(l.y,this._wrapY):l.y);return h.z=l.z,h},_pxBoundsToTileRange:function(l){var h=this.getTileSize();return new X(l.min.unscaleBy(h).floor(),l.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function k6(l){return new Bh(l)}var Nu=Bh.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,h){this._url=l,h=b(this,h),h.detectRetina&&it.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,h){return this._url===l&&h===void 0&&(h=!0),this._url=l,h||this.redraw(),this},createTile:function(l,h){var v=document.createElement("img");return ct(v,"load",o(this._tileOnLoad,this,h,v)),ct(v,"error",o(this._tileOnError,this,h,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(l),v},getTileUrl:function(l){var h={r:it.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-l.y;this.options.tms&&(h.y=v),h["-y"]=v}return y(this._url,i(h,this.options))},_tileOnLoad:function(l,h){it.ielt9?setTimeout(o(l,this,null,h),0):l(null,h)},_tileOnError:function(l,h,v){var j=this.options.errorTileUrl;j&&h.getAttribute("src")!==j&&(h.src=j),l(v,h)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,h=this.options.maxZoom,v=this.options.zoomReverse,j=this.options.zoomOffset;return v&&(l=h-l),l+j},_getSubdomain:function(l){var h=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var l,h;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(h=this._tiles[l].el,h.onload=p,h.onerror=p,!h.complete)){h.src=O;var v=this._tiles[l].coords;rn(h),delete this._tiles[l],this.fire("tileabort",{tile:h,coords:v})}},_removeTile:function(l){var h=this._tiles[l];if(h)return h.el.setAttribute("src",O),Bh.prototype._removeTile.call(this,l)},_tileReady:function(l,h,v){if(!(!this._map||v&&v.getAttribute("src")===O))return Bh.prototype._tileReady.call(this,l,h,v)}});function NS(l,h){return new Nu(l,h)}var SS=Nu.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,h){this._url=l;var v=i({},this.defaultWmsParams);for(var j in h)j in this.options||(v[j]=h[j]);h=b(this,h);var T=h.detectRetina&&it.retina?2:1,$=this.getTileSize();v.width=$.x*T,v.height=$.y*T,this.wmsParams=v},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Nu.prototype.onAdd.call(this,l)},getTileUrl:function(l){var h=this._tileCoordsToNwSe(l),v=this._crs,j=ue(v.project(h[0]),v.project(h[1])),T=j.min,$=j.max,Q=(this._wmsVersion>=1.3&&this._crs===Wn?[T.y,T.x,$.y,$.x]:[T.x,T.y,$.x,$.y]).join(","),le=Nu.prototype.getTileUrl.call(this,l);return le+S(this.wmsParams,le,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(l,h){return i(this.wmsParams,l),h||this.redraw(),this}});function T6(l,h){return new SS(l,h)}Nu.WMS=SS,NS.wms=T6;var Ra=Xt.extend({options:{padding:.1},initialize:function(l){b(this,l),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),bt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,h){var v=this._map.getZoomScale(h,this._zoom),j=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,h),$=j.multiplyBy(-v).add(T).subtract(this._map._getNewPixelOrigin(l,h));it.any3d?Vi(this._container,$,v):ft(this._container,$)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,h=this._map.getSize(),v=this._map.containerPointToLayerPoint(h.multiplyBy(-l)).round();this._bounds=new X(v,v.add(h.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ES=Ra.extend({options:{tolerance:0},getEvents:function(){var l=Ra.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ra.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");ct(l,"mousemove",this._onMouseMove,this),ct(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ct(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,rn(this._container),Qt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var h in this._layers)l=this._layers[h],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ra.prototype._update.call(this);var l=this._bounds,h=this._container,v=l.getSize(),j=it.retina?2:1;ft(h,l.min),h.width=j*v.x,h.height=j*v.y,h.style.width=v.x+"px",h.style.height=v.y+"px",it.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Ra.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[u(l)]=l;var h=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var h=l._order,v=h.next,j=h.prev;v?v.prev=j:this._drawLast=j,j?j.next=v:this._drawFirst=v,delete l._order,delete this._layers[u(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var h=l.options.dashArray.split(/[, ]+/),v=[],j,T;for(T=0;T<h.length;T++){if(j=Number(h[T]),isNaN(j))return;v.push(j)}l.options._dashArray=v}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var h=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new X,this._redrawBounds.extend(l._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(l._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var h=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,h=this._redrawBounds;if(this._ctx.save(),h){var v=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var j=this._drawFirst;j;j=j.next)l=j.layer,(!h||l._pxBounds&&l._pxBounds.intersects(h))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,h){if(this._drawing){var v,j,T,$,Q=l._parts,le=Q.length,de=this._ctx;if(le){for(de.beginPath(),v=0;v<le;v++){for(j=0,T=Q[v].length;j<T;j++)$=Q[v][j],de[j?"lineTo":"moveTo"]($.x,$.y);h&&de.closePath()}this._fillStroke(de,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var h=l._point,v=this._ctx,j=Math.max(Math.round(l._radius),1),T=(Math.max(Math.round(l._radiusY),1)||j)/j;T!==1&&(v.save(),v.scale(1,T)),v.beginPath(),v.arc(h.x,h.y/T,j,0,Math.PI*2,!1),T!==1&&v.restore(),this._fillStroke(v,l)}},_fillStroke:function(l,h){var v=h.options;v.fill&&(l.globalAlpha=v.fillOpacity,l.fillStyle=v.fillColor||v.color,l.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(l.setLineDash&&l.setLineDash(h.options&&h.options._dashArray||[]),l.globalAlpha=v.opacity,l.lineWidth=v.weight,l.strokeStyle=v.color,l.lineCap=v.lineCap,l.lineJoin=v.lineJoin,l.stroke())},_onClick:function(l){for(var h=this._map.mouseEventToLayerPoint(l),v,j,T=this._drawFirst;T;T=T.next)v=T.layer,v.options.interactive&&v._containsPoint(h)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(v))&&(j=v);this._fireEvent(j?[j]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,h)}},_handleMouseOut:function(l){var h=this._hoveredLayer;h&&(pn(this._container,"leaflet-interactive"),this._fireEvent([h],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,h){if(!this._mouseHoverThrottled){for(var v,j,T=this._drawFirst;T;T=T.next)v=T.layer,v.options.interactive&&v._containsPoint(h)&&(j=v);j!==this._hoveredLayer&&(this._handleMouseOut(l),j&&(bt(this._container,"leaflet-interactive"),this._fireEvent([j],l,"mouseover"),this._hoveredLayer=j)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,h,v){this._map._fireDOMEvent(h,v||h.type,l)},_bringToFront:function(l){var h=l._order;if(h){var v=h.next,j=h.prev;if(v)v.prev=j;else return;j?j.next=v:v&&(this._drawFirst=v),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(l)}},_bringToBack:function(l){var h=l._order;if(h){var v=h.next,j=h.prev;if(j)j.next=v;else return;v?v.prev=j:j&&(this._drawLast=j),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(l)}}});function CS(l){return it.canvas?new ES(l):null}var qh=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),P6={_initContainer:function(){this._container=Tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ra.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var h=l._container=qh("shape");bt(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",l._path=qh("path"),h.appendChild(l._path),this._updateStyle(l),this._layers[u(l)]=l},_addPath:function(l){var h=l._container;this._container.appendChild(h),l.options.interactive&&l.addInteractiveTarget(h)},_removePath:function(l){var h=l._container;rn(h),l.removeInteractiveTarget(h),delete this._layers[u(l)]},_updateStyle:function(l){var h=l._stroke,v=l._fill,j=l.options,T=l._container;T.stroked=!!j.stroke,T.filled=!!j.fill,j.stroke?(h||(h=l._stroke=qh("stroke")),T.appendChild(h),h.weight=j.weight+"px",h.color=j.color,h.opacity=j.opacity,j.dashArray?h.dashStyle=E(j.dashArray)?j.dashArray.join(" "):j.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=j.lineCap.replace("butt","flat"),h.joinstyle=j.lineJoin):h&&(T.removeChild(h),l._stroke=null),j.fill?(v||(v=l._fill=qh("fill")),T.appendChild(v),v.color=j.fillColor||j.color,v.opacity=j.fillOpacity):v&&(T.removeChild(v),l._fill=null)},_updateCircle:function(l){var h=l._point.round(),v=Math.round(l._radius),j=Math.round(l._radiusY||v);this._setPath(l,l._empty()?"M0 0":"AL "+h.x+","+h.y+" "+v+","+j+" 0,"+65535*360)},_setPath:function(l,h){l._path.v=h},_bringToFront:function(l){Ea(l._container)},_bringToBack:function(l){_o(l._container)}},Hp=it.vml?qh:we,Wh=Ra.extend({_initContainer:function(){this._container=Hp("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Hp("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){rn(this._container),Qt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ra.prototype._update.call(this);var l=this._bounds,h=l.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,v.setAttribute("width",h.x),v.setAttribute("height",h.y)),ft(v,l.min),v.setAttribute("viewBox",[l.min.x,l.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(l){var h=l._path=Hp("path");l.options.className&&bt(h,l.options.className),l.options.interactive&&bt(h,"leaflet-interactive"),this._updateStyle(l),this._layers[u(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){rn(l._path),l.removeInteractiveTarget(l._path),delete this._layers[u(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var h=l._path,v=l.options;h&&(v.stroke?(h.setAttribute("stroke",v.color),h.setAttribute("stroke-opacity",v.opacity),h.setAttribute("stroke-width",v.weight),h.setAttribute("stroke-linecap",v.lineCap),h.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?h.setAttribute("stroke-dasharray",v.dashArray):h.removeAttribute("stroke-dasharray"),v.dashOffset?h.setAttribute("stroke-dashoffset",v.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),v.fill?(h.setAttribute("fill",v.fillColor||v.color),h.setAttribute("fill-opacity",v.fillOpacity),h.setAttribute("fill-rule",v.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(l,h){this._setPath(l,ne(l._parts,h))},_updateCircle:function(l){var h=l._point,v=Math.max(Math.round(l._radius),1),j=Math.max(Math.round(l._radiusY),1)||v,T="a"+v+","+j+" 0 1,0 ",$=l._empty()?"M0 0":"M"+(h.x-v)+","+h.y+T+v*2+",0 "+T+-v*2+",0 ";this._setPath(l,$)},_setPath:function(l,h){l._path.setAttribute("d",h)},_bringToFront:function(l){Ea(l._path)},_bringToBack:function(l){_o(l._path)}});it.vml&&Wh.include(P6);function kS(l){return it.svg||it.vml?new Wh(l):null}Et.include({getRenderer:function(l){var h=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var h=this._paneRenderers[l];return h===void 0&&(h=this._createRenderer({pane:l}),this._paneRenderers[l]=h),h},_createRenderer:function(l){return this.options.preferCanvas&&CS(l)||kS(l)}});var TS=bu.extend({initialize:function(l,h){bu.prototype.initialize.call(this,this._boundsToLatLngs(l),h)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=Ee(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function I6(l,h){return new TS(l,h)}Wh.create=Hp,Wh.pointsToPath=ne,Aa.geometryToLayer=Vp,Aa.coordsToLatLng=c0,Aa.coordsToLatLngs=zp,Aa.latLngToCoords=u0,Aa.latLngsToCoords=Up,Aa.getFeature=ju,Aa.asFeature=$p,Et.mergeOptions({boxZoom:!0});var PS=bs.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){ct(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){rn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),di(),kh(),this._startPoint=this._map.mouseEventToContainerPoint(l),ct(document,{contextmenu:ws,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Tt("div","leaflet-zoom-box",this._container),bt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var h=new X(this._point,this._startPoint),v=h.getSize();ft(this._box,h.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(rn(this._box),pn(this._container,"leaflet-crosshair")),hi(),Th(),Qt(document,{contextmenu:ws,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var h=new ge(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Et.addInitHook("addHandler","boxZoom",PS),Et.mergeOptions({doubleClickZoom:!0});var IS=bs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var h=this._map,v=h.getZoom(),j=h.options.zoomDelta,T=l.originalEvent.shiftKey?v-j:v+j;h.options.doubleClickZoom==="center"?h.setZoom(T):h.setZoomAround(l.containerPoint,T)}});Et.addInitHook("addHandler","doubleClickZoom",IS),Et.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var AS=bs.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new fi(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}bt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pn(this._map._container,"leaflet-grab"),pn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=Ee(this._map.options.maxBounds);this._offsetLimit=ue(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var h=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(h),this._prunePositions(h)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,h){return l-(l-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;l.x<h.min.x&&(l.x=this._viscousLimit(l.x,h.min.x)),l.y<h.min.y&&(l.y=this._viscousLimit(l.y,h.min.y)),l.x>h.max.x&&(l.x=this._viscousLimit(l.x,h.max.x)),l.y>h.max.y&&(l.y=this._viscousLimit(l.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,h=Math.round(l/2),v=this._initialWorldOffset,j=this._draggable._newPos.x,T=(j-h+v)%l+h-v,$=(j+h+v)%l-h-v,Q=Math.abs(T+v)<Math.abs($+v)?T:$;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(l){var h=this._map,v=h.options,j=!v.inertia||l.noInertia||this._times.length<2;if(h.fire("dragend",l),j)h.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),$=(this._lastTime-this._times[0])/1e3,Q=v.easeLinearity,le=T.multiplyBy(Q/$),de=le.distanceTo([0,0]),je=Math.min(v.inertiaMaxSpeed,de),Be=le.multiplyBy(je/de),ut=je/(v.inertiaDeceleration*Q),Nt=Be.multiplyBy(-ut/2).round();!Nt.x&&!Nt.y?h.fire("moveend"):(Nt=h._limitOffset(Nt,h.options.maxBounds),F(function(){h.panBy(Nt,{duration:ut,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});Et.addInitHook("addHandler","dragging",AS),Et.mergeOptions({keyboard:!0,keyboardPanDelta:80});var RS=bs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),ct(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,h=document.documentElement,v=l.scrollTop||h.scrollTop,j=l.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(j,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var h=this._panKeys={},v=this.keyCodes,j,T;for(j=0,T=v.left.length;j<T;j++)h[v.left[j]]=[-1*l,0];for(j=0,T=v.right.length;j<T;j++)h[v.right[j]]=[l,0];for(j=0,T=v.down.length;j<T;j++)h[v.down[j]]=[0,l];for(j=0,T=v.up.length;j<T;j++)h[v.up[j]]=[0,-1*l]},_setZoomDelta:function(l){var h=this._zoomKeys={},v=this.keyCodes,j,T;for(j=0,T=v.zoomIn.length;j<T;j++)h[v.zoomIn[j]]=l;for(j=0,T=v.zoomOut.length;j<T;j++)h[v.zoomOut[j]]=-l},_addHooks:function(){ct(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var h=l.keyCode,v=this._map,j;if(h in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(j=this._panKeys[h],l.shiftKey&&(j=B(j).multiplyBy(3)),v.options.maxBounds&&(j=v._limitOffset(B(j),v.options.maxBounds)),v.options.worldCopyJump){var T=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(j)));v.panTo(T)}else v.panBy(j)}else if(h in this._zoomKeys)v.setZoom(v.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;ws(l)}}});Et.addInitHook("addHandler","keyboard",RS),Et.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var MS=bs.extend({addHooks:function(){ct(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var h=Pp(l),v=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var j=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),j),ws(l)},_performZoom:function(){var l=this._map,h=l.getZoom(),v=this._map.options.zoomSnap||0;l._stop();var j=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(j))))/Math.LN2,$=v?Math.ceil(T/v)*v:T,Q=l._limitZoom(h+(this._delta>0?$:-$))-h;this._delta=0,this._startTime=null,Q&&(l.options.scrollWheelZoom==="center"?l.setZoom(h+Q):l.setZoomAround(this._lastMousePos,h+Q))}});Et.addInitHook("addHandler","scrollWheelZoom",MS);var A6=600;Et.mergeOptions({tapHold:it.touchNative&&it.safari&&it.mobile,tapTolerance:15});var OS=bs.extend({addHooks:function(){ct(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var h=l.touches[0];this._startPos=this._newPos=new I(h.clientX,h.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ct(document,"touchend",bn),ct(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),A6),ct(document,"touchend touchcancel contextmenu",this._cancel,this),ct(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Qt(document,"touchend",bn),Qt(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Qt(document,"touchend touchcancel contextmenu",this._cancel,this),Qt(document,"touchmove",this._onMove,this)},_onMove:function(l){var h=l.touches[0];this._newPos=new I(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,h){var v=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});v._simulated=!0,h.target.dispatchEvent(v)}});Et.addInitHook("addHandler","tapHold",OS),Et.mergeOptions({touchZoom:it.touch,bounceAtZoomLimits:!0});var DS=bs.extend({addHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),ct(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pn(this._map._container,"leaflet-touch-zoom"),Qt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var h=this._map;if(!(!l.touches||l.touches.length!==2||h._animatingZoom||this._zooming)){var v=h.mouseEventToContainerPoint(l.touches[0]),j=h.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(v.add(j)._divideBy(2))),this._startDist=v.distanceTo(j),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),ct(document,"touchmove",this._onTouchMove,this),ct(document,"touchend touchcancel",this._onTouchEnd,this),bn(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var h=this._map,v=h.mouseEventToContainerPoint(l.touches[0]),j=h.mouseEventToContainerPoint(l.touches[1]),T=v.distanceTo(j)/this._startDist;if(this._zoom=h.getScaleZoom(T,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&T<1||this._zoom>h.getMaxZoom()&&T>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var $=v._add(j)._divideBy(2)._subtract(this._centerPoint);if(T===1&&$.x===0&&$.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract($),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var Q=o(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(Q,this,!0),bn(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),Qt(document,"touchmove",this._onTouchMove,this),Qt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Et.addInitHook("addHandler","touchZoom",DS),Et.BoxZoom=PS,Et.DoubleClickZoom=IS,Et.Drag=AS,Et.Keyboard=RS,Et.ScrollWheelZoom=MS,Et.TapHold=OS,Et.TouchZoom=DS,n.Bounds=X,n.Browser=it,n.CRS=Ae,n.Canvas=ES,n.Circle=l0,n.CircleMarker=Fp,n.Class=H,n.Control=is,n.DivIcon=jS,n.DivOverlay=$i,n.DomEvent=Ip,n.DomUtil=kp,n.Draggable=fi,n.Evented=K,n.FeatureGroup=Mn,n.GeoJSON=Aa,n.GridLayer=Bh,n.Handler=bs,n.Icon=Ui,n.ImageOverlay=Bp,n.LatLng=De,n.LatLngBounds=ge,n.Layer=Xt,n.LayerGroup=jn,n.LineUtil=W,n.Map=Et,n.Marker=Lp,n.Mixin=Gl,n.Path=Eo,n.Point=I,n.PolyUtil=yu,n.Polygon=bu,n.Polyline=Ia,n.Popup=qp,n.PosAnimation=Dh,n.Projection=Me,n.Rectangle=TS,n.Renderer=Ra,n.SVG=Wh,n.SVGOverlay=bS,n.TileLayer=Nu,n.Tooltip=Wp,n.Transformation=Y,n.Util=P,n.VideoOverlay=wS,n.bind=o,n.bounds=ue,n.canvas=CS,n.circle=x6,n.circleMarker=v6,n.control=Ur,n.divIcon=C6,n.extend=i,n.featureGroup=wu,n.geoJSON=_S,n.geoJson=w6,n.gridLayer=k6,n.icon=p6,n.imageOverlay=b6,n.latLng=$e,n.latLngBounds=Ee,n.layerGroup=So,n.map=fu,n.marker=g6,n.point=B,n.polygon=_6,n.polyline=y6,n.popup=S6,n.rectangle=I6,n.setOptions=b,n.stamp=u,n.svg=kS,n.svgOverlay=N6,n.tileLayer=NS,n.tooltip=E6,n.transformation=oe,n.version=r,n.videoOverlay=j6;var R6=window.L;n.noConflict=function(){return window.L=R6,this},window.L=n})})(jb,jb.exports);var Zy=jb.exports;const ph=El(Zy);function p3(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function g3(t,e){return e==null?function(r,i){const a=x.useRef();return a.current||(a.current=t(r,i)),a}:function(r,i){const a=x.useRef();a.current||(a.current=t(r,i));const o=x.useRef(r),{instance:c}=a.current;return x.useEffect(function(){o.current!==r&&(e(c,r,o.current),o.current=r)},[c,r,i]),a}}function Eie(t,e){x.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function v3(t){return function(n){const r=f3(),i=t(m3(n,r),r);return yie(r.map,n.attribution),Sie(i.current,n.eventHandlers),Eie(i.current,r),i}}function Cie(t,e){const n=g3(t,e),r=v3(n);return jie(r)}function kie(t,e){const n=g3(t,e),r=v3(n);return Nie(r)}function Tie(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function Pie(){return f3().map}function zN(t){const e=Pie();return x.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Nb(){return Nb=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nb.apply(this,arguments)}function Iie({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:a,placeholder:o,style:c,whenReady:u,zoom:d,...f},p){const[g]=x.useState({className:i,id:a,style:c}),[_,N]=x.useState(null);x.useImperativeHandle(p,()=>(_==null?void 0:_.map)??null,[_]);const b=x.useCallback(w=>{if(w!==null&&_===null){const y=new Zy.Map(w,f);n!=null&&d!=null?y.setView(n,d):t!=null&&y.fitBounds(t,e),u!=null&&y.whenReady(u),N(wie(y))}},[]);x.useEffect(()=>()=>{_==null||_.map.remove()},[_]);const S=_?Le.createElement(h3,{value:_},r):o??null;return Le.createElement("div",Nb({},g,{ref:b}),S)}const UN=x.forwardRef(Iie),$N=Cie(function({position:e,...n},r){const i=new Zy.Marker(e,n);return p3(i,bie(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),BN=kie(function({url:e,...n},r){const i=new Zy.TileLayer(e,m3(n,r));return p3(i,r)},function(e,n,r){Tie(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});delete ph.Icon.Default.prototype._getIconUrl;ph.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const Aie=({open:t,onOpenChange:e,listing:n})=>{var F;const{currentUser:r,userProfile:i}=mn(),{createPaymentRequest:a,loading:o}=Gy(),[c,u]=x.useState("method"),[d,f]=x.useState(null),[p,g]=x.useState({}),[_,N]=x.useState({location:"",date:void 0,time:"",notes:""}),[b,S]=x.useState(!1),[w,y]=x.useState(null),E=(D,P)=>{f(D),g(P),u("details")},A=async()=>{if(!(!r||!d))try{const D=_.date&&_.time?new Date(`${or(_.date,"yyyy-MM-dd")} ${_.time}`):void 0;await a({listingId:n.id,buyerId:r.uid,sellerId:n.sellerId,amount:n.price,currency:n.currency||"EUR",paymentMethod:d,meetingLocation:_.location,meetingDateTime:D,paymentDetails:p,notes:_.notes}),e(!1),O()}catch(D){console.error("Erreur lors de la cration de la demande:",D)}},O=()=>{u("method"),f(null),g({}),N({location:"",date:void 0,time:"",notes:""})},q=(D,P)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:P||"EUR"}).format(D),R=D=>({cash:"Espces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[D]||D;async function V(D,P){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${D}&lon=${P}`)).json()).display_name||""}function U(){return zN({click:async D=>{y([D.latlng.lat,D.latlng.lng]),S(!0);const P=await V(D.latlng.lat,D.latlng.lng);N(H=>({...H,location:P})),S(!1),xe.success("Adresse dtecte automatiquement !")}}),w?s.jsx($N,{position:w}):null}const k=()=>{if(!navigator.geolocation){xe.error("La golocalisation n'est pas supporte par ce navigateur.");return}S(!0),navigator.geolocation.getCurrentPosition(async D=>{const{latitude:P,longitude:H}=D.coords;y([P,H]);const ee=await V(P,H);ee&&N(Z=>({...Z,location:ee})),S(!1)},()=>{xe.error("Impossible d'accder  la position."),S(!1)})};return s.jsx(da,{open:t,onOpenChange:e,children:s.jsxs(Ci,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(ha,{children:[s.jsxs(ki,{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-5 h-5"}),"Demande de paiement"]}),s.jsxs(xc,{children:['Crez une demande de paiement scurise pour "',n.title,'"']})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsxs("div",{className:`flex items-center ${c==="method"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="details"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Dtails"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),s.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-4",children:[((F=n.images)==null?void 0:F[0])&&s.jsx("img",{src:n.images[0],alt:n.title,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:n.title}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",n.sellerName,"  ",n.sellerUniversity]}),s.jsx("p",{className:"text-lg font-bold text-primary",children:q(n.price,n.currency||"EUR")})]})]})}),c==="method"&&s.jsx(u3,{amount:n.price,currency:n.currency||"EUR",onMethodSelect:E,selectedMethod:d}),c==="details"&&d&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Pt,{className:"w-5 h-5 text-green-600"}),s.jsxs("span",{className:"font-medium",children:["Mode de paiement slectionn : ",R(d)]})]}),d==="cash"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(Mr,{className:"w-5 h-5"}),"Dtails de la rencontre"]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Ge,{id:"meeting-location",placeholder:"Ex: Bibliothque universitaire, Hall principal...",value:_.location,onChange:D=>N(P=>({...P,location:D.target.value})),className:"flex-1"}),s.jsx(J,{type:"button",variant:"outline",onClick:k,disabled:b,title:"Dtecter ma position",children:b?s.jsx("span",{className:"animate-spin",children:""}):s.jsx("span",{children:""})})]})]}),s.jsx("div",{className:"mt-3",children:s.jsxs(UN,{center:w||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[s.jsx(BN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),s.jsx(U,{})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{children:"Date de rencontre"}),s.jsxs(Use,{children:[s.jsx($se,{asChild:!0,children:s.jsxs(J,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[s.jsx(Xs,{className:"mr-2 h-4 w-4"}),_.date?or(_.date,"PPP",{locale:Dr}):s.jsx("span",{children:"Choisir une date"})]})}),s.jsx(ZL,{className:"w-auto p-0",children:s.jsx(LL,{mode:"single",selected:_.date,onSelect:D=>N(P=>({...P,date:D})),disabled:D=>D<new Date,initialFocus:!0})})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"meeting-time",children:"Heure de rencontre"}),s.jsx(Ge,{id:"meeting-time",type:"time",value:_.time,onChange:D=>N(P=>({...P,time:D.target.value})),className:"mt-1"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),s.jsx(ri,{id:"payment-notes",placeholder:"Informations complmentaires pour le vendeur...",value:_.notes,onChange:D=>N(P=>({...P,notes:D.target.value})),rows:3,className:"mt-1"})]}),s.jsxs($t,{className:"border-blue-200 bg-blue-50",children:[s.jsx(zt,{className:"h-4 w-4 text-blue-600"}),s.jsxs(Bt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Scurit :"})," Un code de scurit unique sera gnr pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(J,{variant:"outline",onClick:()=>u("method"),className:"flex-1",children:"Retour"}),s.jsx(J,{onClick:()=>u("confirmation"),className:"flex-1",disabled:d==="cash"&&!_.location,children:"Continuer"})]})]}),c==="confirmation"&&d&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Rcapitulatif de la demande"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),s.jsx("p",{className:"font-medium",children:R(d)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),s.jsx("p",{className:"font-medium",children:q(n.price,n.currency||"EUR")})]}),d==="cash"&&_.location&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),s.jsx("p",{className:"font-medium",children:_.location})]}),_.date&&_.time&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),s.jsxs("p",{className:"font-medium",children:[or(_.date,"PPP",{locale:Dr}),"  ",_.time]})]})]})]}),_.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),s.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:_.notes})]})]}),s.jsxs($t,{children:[s.jsx(yl,{className:"h-4 w-4"}),s.jsx(Bt,{children:"En crant cette demande, vous vous engagez  effectuer le paiement selon les modalits convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(J,{variant:"outline",onClick:()=>u("details"),className:"flex-1",children:"Retour"}),s.jsx(J,{onClick:A,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Cration..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Crer la demande"]})})]})]})]})]})})},Rie=({listing:t,className:e})=>{const{currentUser:n,userProfile:r}=mn(),{createConversation:i,setCurrentConversation:a,conversations:o}=Fy(),c=cr(),[u,d]=x.useState(!1),[f,p]=x.useState(!1),[g,_]=x.useState(""),[N,b]=x.useState(""),[S,w]=x.useState(!1);if((n==null?void 0:n.uid)===t.sellerId)return null;const y=o.find(R=>R.listingId===t.id&&R.participants.includes((n==null?void 0:n.uid)||"")&&R.participants.includes(t.sellerId)),E=()=>{if(!n){c("/auth");return}if(y){a(y),c("/messages");return}const R=`Bonjour ${t.sellerName},

Je suis intress(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si ncessaire.

Cordialement,
${(r==null?void 0:r.displayName)||"Un tudiant intress"}`;_(R),b((r==null?void 0:r.email)||""),d(!0)},A=()=>{if(!n){c("/auth");return}p(!0)},O=async()=>{var R;if(!g.trim()||!N.trim()||!n||!r){xe.error("Veuillez remplir tous les champs");return}w(!0);try{const V=await i(t.id,t.title,t.price,(R=t.images)==null?void 0:R[0],n.uid,t.sellerId,{displayName:r.displayName,photoURL:r.photoURL,university:r.university,isVerified:r.isVerified,email:r.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},g.trim());d(!1),xe.success(s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Message envoy !"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",t.sellerName," recevra une notification email"]})]}),s.jsxs(J,{size:"sm",variant:"ghost",onClick:()=>{xe.dismiss(),c("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",s.jsx(_m,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{c("/messages")},2e3)}catch(V){console.error("Erreur lors de l'envoi du message:",V),xe.error("Erreur lors de l'envoi du message")}finally{w(!1)}},q=(R,V)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"change";const U=V||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:U}).format(R)}catch{return`${R} `}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{onClick:E,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[s.jsx(wn,{className:"w-4 h-4 mr-2"}),y?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&s.jsxs(J,{onClick:A,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-4 h-4"}),"Payer"]})]}),s.jsx(da,{open:u,onOpenChange:d,children:s.jsxs(Ci,{className:"max-w-md",children:[s.jsx(ha,{children:s.jsxs(ki,{className:"flex items-center gap-2",children:[s.jsx(wn,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(oo,{className:"w-8 h-8",children:[s.jsx(lo,{src:t.sellerAvatar||void 0}),s.jsx(co,{children:t.sellerName[0]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),s.jsx("p",{className:"text-sm font-medium",children:t.title}),s.jsx("p",{className:"text-sm text-primary font-semibold",children:q(t.price,t.currency)})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"contact-email",children:"Votre email"}),s.jsx(Ge,{id:"contact-email",type:"email",value:N,onChange:R=>b(R.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"contact-message",children:"Votre message"}),s.jsx(ri,{id:"contact-message",value:g,onChange:R=>_(R.target.value),placeholder:"Dcrivez votre intrt pour cette annonce...",rows:6,className:"mt-1"})]}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(yl,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:" Notification automatique"}),s.jsxs("p",{children:["Votre message sera envoy via la messagerie StudyMarket ET ",t.sellerName," recevra une notification email pour rpondre rapidement."]})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{variant:"outline",onClick:()=>d(!1),className:"flex-1",children:"Annuler"}),s.jsx(J,{onClick:O,disabled:S||!g.trim()||!N.trim(),className:"flex-1",children:S?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Rd,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),s.jsx(Aie,{open:f,onOpenChange:p,listing:t})]})},Mie=()=>{var y;const{id:t}=V1(),e=cr(),{currentUser:n}=mn(),{currentListing:r,loading:i,fetchListingById:a}=dp(),{fetchUserFavorites:o}=sD(),[c,u]=x.useState(0);if(x.useEffect(()=>{t&&a(t)},[t,a]),x.useEffect(()=>{n&&o(n.uid)},[n,o]),i)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"animate-pulse space-y-6",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!r)return s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx(In,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a t supprime."}),s.jsx(J,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const d=r,f=(n==null?void 0:n.uid)===d.sellerId,p=(E,A)=>{if(d.transactionType==="donation")return"Gratuit";if(d.transactionType==="exchange")return"change";const O=A||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:O}).format(E)}catch{return`${E} `}},g=E=>{switch(E){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon tat";case"fair":return"tat correct";case"poor":return"Mauvais tat";default:return E}},_=E=>{switch(E){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-orange-100 text-orange-800 border-orange-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=()=>{switch(d.transactionType){case"donation":return s.jsx(Ad,{className:"w-4 h-4"});case"exchange":return s.jsx(so,{className:"w-4 h-4"});case"service":return s.jsx(ih,{className:"w-4 h-4"});default:return s.jsx(ex,{className:"w-4 h-4"})}},b=()=>{switch(d.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},S=()=>{d.images&&d.images.length>1&&u(E=>E===d.images.length-1?0:E+1)},w=()=>{d.images&&d.images.length>1&&u(E=>E===0?d.images.length-1:E-1)};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-muted/30",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(ze,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),s.jsx("span",{children:"/"}),s.jsx(ze,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-foreground",children:d.title})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(J,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[s.jsx(mc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:d.images&&d.images.length>0?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:d.images[c],alt:d.title,className:"w-full h-full object-cover"}),d.images.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:w,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image prcdente",children:s.jsx(MG,{className:"w-6 h-6"})}),s.jsx("div",{onClick:S,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:s.jsx(Ji,{className:"w-6 h-6"})}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[c+1," / ",d.images.length]})]}),s.jsxs(da,{children:[s.jsx(fd,{asChild:!0,children:s.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:s.jsx(pc,{className:"w-5 h-5"})})}),s.jsxs(Ci,{className:"max-w-4xl",children:[s.jsx(ki,{children:"Image en plein cran de l'annonce"}),s.jsx("img",{src:d.images[c],alt:d.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(pc,{className:"w-16 h-16 mx-auto mb-4"}),s.jsx("p",{children:"Aucune image disponible"})]})})}),d.images&&d.images.length>1&&s.jsx("div",{className:"grid grid-cols-6 gap-2",children:d.images.map((E,A)=>s.jsx("button",{onClick:()=>u(A),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${A===c?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:s.jsx("img",{src:E,alt:`${d.title} ${A+1}`,className:"w-full h-full object-cover"})},A))})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(fe,{children:s.jsx(me,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(at,{className:"bg-primary/10 text-primary border-primary/20",children:[N(),s.jsx("span",{className:"ml-1",children:b()})]}),d.sellerVerified&&s.jsxs(at,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(zt,{className:"w-3 h-3 mr-1"}),"Vrifi"]})]}),s.jsxs("div",{className:"text-3xl font-bold text-primary",children:[p(d.price,d.currency),d.transactionType==="service"&&s.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),d.transactionType==="exchange"&&d.exchangeFor&&s.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[s.jsx(so,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Recherche en change :"})]}),s.jsx("p",{className:"text-purple-700 mt-1",children:d.exchangeFor})]}),d.aiPriceEstimate&&d.transactionType==="sale"&&s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[s.jsx(ep,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Prix estim par IA :"})]}),s.jsxs("p",{className:"text-green-700 text-sm",children:[d.aiPriceEstimate.min," - ",d.aiPriceEstimate.max,"",s.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(d.aiPriceEstimate.confidence*100),"%)"]})]})]}),s.jsx("div",{className:"space-y-3",children:f?s.jsxs("div",{className:"space-y-2",children:[s.jsx(ze,{to:`/edit-listing/${d.id}`,children:s.jsxs(J,{variant:"outline",className:"w-full",children:[s.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Rie,{listing:d,className:"w-full"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(iD,{listing:d,size:"lg",showText:!1}),s.jsx(aD,{listing:d,size:"lg",showText:!1})]}),s.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:s.jsx(lc,{className:"w-5 h-5"})})]})]})})]})})}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsx(Je,{className:"text-lg",children:"Vendeur"})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(oo,{className:"w-12 h-12",children:[s.jsx(lo,{src:d.sellerAvatar||void 0}),s.jsx(co,{children:(y=d.sellerName[0])==null?void 0:y.toUpperCase()})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold",children:d.sellerName}),d.sellerVerified&&s.jsx(zt,{className:"w-4 h-4 text-green-600"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:d.sellerUniversity})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"23"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"98%"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),d.environmentalImpact&&s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"text-lg flex items-center gap-2",children:[s.jsx(Ei,{className:"w-5 h-5 text-green-600"}),"Impact cologique"]})}),s.jsx(me,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",d.environmentalImpact.co2Saved," kg CO"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"conomiss en achetant d'occasion"})]})})]})]})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:d.title}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Id,{className:"w-4 h-4"}),s.jsxs("span",{children:[d.views," vues"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Un,{className:"w-4 h-4"}),s.jsx("span",{children:fh(d.createdAt,{addSuffix:!0,locale:Dr})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),s.jsx("span",{children:d.location.city})]})]})]}),s.jsx(at,{className:_(d.condition),children:g(d.condition)})]})}),s.jsx(me,{children:s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"whitespace-pre-wrap",children:d.description})})})]}),d.tags&&d.tags.length>0&&s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsx(Je,{className:"text-lg",children:"Tags"})}),s.jsx(me,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:d.tags.map((E,A)=>s.jsx(at,{variant:"secondary",children:E},A))})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"text-lg flex items-center gap-2",children:[s.jsx(Mr,{className:"w-5 h-5"}),"Localisation"]})}),s.jsxs(me,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:d.location.city}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.location.state,", ",d.location.country]})]}),d.location.campus&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Campus"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:d.location.campus})]}),d.location.university&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Universit"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:d.location.university})]})]})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"text-lg flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5"}),"Conseils de scurit"]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Pt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Pt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Vrifiez l'identit de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Pt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(yl,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]})]})};var gp=t=>t.type==="checkbox",cc=t=>t instanceof Date,Kr=t=>t==null;const x3=t=>typeof t=="object";var $n=t=>!Kr(t)&&!Array.isArray(t)&&x3(t)&&!cc(t),Oie=t=>$n(t)&&t.target?gp(t.target)?t.target.checked:t.target.value:t,Die=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Lie=(t,e)=>t.has(Die(e)),Fie=t=>{const e=t.constructor&&t.constructor.prototype;return $n(e)&&e.hasOwnProperty("isPrototypeOf")},qN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Pr(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(qN&&(t instanceof Blob||r))&&(n||$n(t)))if(e=n?[]:{},!n&&!Fie(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Pr(t[i]));else return t;return e}var Yy=t=>/^\w*$/.test(t),Zn=t=>t===void 0,WN=t=>Array.isArray(t)?t.filter(Boolean):[],HN=t=>WN(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Xe=(t,e,n)=>{if(!e||!$n(t))return n;const r=(Yy(e)?[e]:HN(e)).reduce((i,a)=>Kr(i)?i:i[a],t);return Zn(r)||r===t?Zn(t[e])?n:t[e]:r},Hi=t=>typeof t=="boolean",Jt=(t,e,n)=>{let r=-1;const i=Yy(e)?[e]:HN(e),a=i.length,o=a-1;for(;++r<a;){const c=i[r];let u=n;if(r!==o){const d=t[c];u=$n(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=u,t=t[c]}};const Ik={BLUR:"blur",FOCUS_OUT:"focusout"},wi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},La={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Vie=Le.createContext(null);Vie.displayName="HookFormContext";var zie=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==wi.all&&(e._proxyFormState[o]=!r||wi.all),t[o]}});return i};const Uie=typeof window<"u"?x.useLayoutEffect:x.useEffect;var na=t=>typeof t=="string",$ie=(t,e,n,r,i)=>na(t)?(r&&e.watch.add(t),Xe(n,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),Xe(n,a))):(r&&(e.watchAll=!0),n),y3=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Uf=t=>Array.isArray(t)?t:[t],Ak=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},Sb=t=>Kr(t)||!x3(t);function qo(t,e){if(Sb(t)||Sb(e))return t===e;if(cc(t)&&cc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const a=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(cc(a)&&cc(o)||$n(a)&&$n(o)||Array.isArray(a)&&Array.isArray(o)?!qo(a,o):a!==o)return!1}}return!0}var ls=t=>$n(t)&&!Object.keys(t).length,GN=t=>t.type==="file",bi=t=>typeof t=="function",px=t=>{if(!qN)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},_3=t=>t.type==="select-multiple",KN=t=>t.type==="radio",Bie=t=>KN(t)||gp(t),S_=t=>px(t)&&t.isConnected;function qie(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Zn(t)?r++:t[e[r++]];return t}function Wie(t){for(const e in t)if(t.hasOwnProperty(e)&&!Zn(t[e]))return!1;return!0}function nr(t,e){const n=Array.isArray(e)?e:Yy(e)?[e]:HN(e),r=n.length===1?t:qie(t,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&($n(r)&&ls(r)||Array.isArray(r)&&Wie(r))&&nr(t,n.slice(0,-1)),t}var w3=t=>{for(const e in t)if(bi(t[e]))return!0;return!1};function gx(t,e={}){const n=Array.isArray(t);if($n(t)||n)for(const r in t)Array.isArray(t[r])||$n(t[r])&&!w3(t[r])?(e[r]=Array.isArray(t[r])?[]:{},gx(t[r],e[r])):Kr(t[r])||(e[r]=!0);return e}function b3(t,e,n){const r=Array.isArray(t);if($n(t)||r)for(const i in t)Array.isArray(t[i])||$n(t[i])&&!w3(t[i])?Zn(e)||Sb(n[i])?n[i]=Array.isArray(t[i])?gx(t[i],[]):{...gx(t[i])}:b3(t[i],Kr(e)?{}:e[i],n[i]):n[i]=!qo(t[i],e[i]);return n}var of=(t,e)=>b3(t,e,gx(e));const Rk={value:!1,isValid:!1},Mk={value:!0,isValid:!0};var j3=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Zn(t[0].attributes.value)?Zn(t[0].value)||t[0].value===""?Mk:{value:t[0].value,isValid:!0}:Mk:Rk}return Rk},N3=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Zn(t)?t:e?t===""?NaN:t&&+t:n&&na(t)?new Date(t):r?r(t):t;const Ok={isValid:!1,value:null};var S3=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Ok):Ok;function Dk(t){const e=t.ref;return GN(e)?e.files:KN(e)?S3(t.refs).value:_3(e)?[...e.selectedOptions].map(({value:n})=>n):gp(e)?j3(t.refs).value:N3(Zn(e.value)?t.ref.value:e.value,t)}var Hie=(t,e,n,r)=>{const i={};for(const a of t){const o=Xe(e,a);o&&Jt(i,a,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},vx=t=>t instanceof RegExp,lf=t=>Zn(t)?t:vx(t)?t.source:$n(t)?vx(t.value)?t.value.source:t.value:t,Lk=t=>({isOnSubmit:!t||t===wi.onSubmit,isOnBlur:t===wi.onBlur,isOnChange:t===wi.onChange,isOnAll:t===wi.all,isOnTouch:t===wi.onTouched});const Fk="AsyncFunction";var Gie=t=>!!t&&!!t.validate&&!!(bi(t.validate)&&t.validate.constructor.name===Fk||$n(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Fk)),Kie=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Vk=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const $f=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const a=Xe(t,i);if(a){const{_f:o,...c}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if($f(c,e))break}else if($n(c)&&$f(c,e))break}}};function zk(t,e,n){const r=Xe(t,n);if(r||Yy(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=Xe(e,a),c=Xe(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(c&&c.type)return{name:a,error:c};if(c&&c.root&&c.root.type)return{name:`${a}.root`,error:c.root};i.pop()}return{name:n}}var Zie=(t,e,n,r)=>{n(t);const{name:i,...a}=t;return ls(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||wi.all))},Yie=(t,e,n)=>!t||!e||t===e||Uf(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),Qie=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,Xie=(t,e)=>!WN(Xe(t,e)).length&&nr(t,e),Jie=(t,e,n)=>{const r=Uf(Xe(t,n));return Jt(r,"root",e[n]),Jt(t,n,r),t},av=t=>na(t);function Uk(t,e,n="validate"){if(av(t)||Array.isArray(t)&&t.every(av)||Hi(t)&&!t)return{type:n,message:av(t)?t:"",ref:e}}var Au=t=>$n(t)&&!vx(t)?t:{value:t,message:""},$k=async(t,e,n,r,i,a)=>{const{ref:o,refs:c,required:u,maxLength:d,minLength:f,min:p,max:g,pattern:_,validate:N,name:b,valueAsNumber:S,mount:w}=t._f,y=Xe(n,b);if(!w||e.has(b))return{};const E=c?c[0]:o,A=D=>{i&&E.reportValidity&&(E.setCustomValidity(Hi(D)?"":D||""),E.reportValidity())},O={},q=KN(o),R=gp(o),V=q||R,U=(S||GN(o))&&Zn(o.value)&&Zn(y)||px(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,k=y3.bind(null,b,r,O),F=(D,P,H,ee=La.maxLength,Z=La.minLength)=>{const K=D?P:H;O[b]={type:D?ee:Z,message:K,ref:o,...k(D?ee:Z,K)}};if(a?!Array.isArray(y)||!y.length:u&&(!V&&(U||Kr(y))||Hi(y)&&!y||R&&!j3(c).isValid||q&&!S3(c).isValid)){const{value:D,message:P}=av(u)?{value:!!u,message:u}:Au(u);if(D&&(O[b]={type:La.required,message:P,ref:E,...k(La.required,P)},!r))return A(P),O}if(!U&&(!Kr(p)||!Kr(g))){let D,P;const H=Au(g),ee=Au(p);if(!Kr(y)&&!isNaN(y)){const Z=o.valueAsNumber||y&&+y;Kr(H.value)||(D=Z>H.value),Kr(ee.value)||(P=Z<ee.value)}else{const Z=o.valueAsDate||new Date(y),K=B=>new Date(new Date().toDateString()+" "+B),I=o.type=="time",z=o.type=="week";na(H.value)&&y&&(D=I?K(y)>K(H.value):z?y>H.value:Z>new Date(H.value)),na(ee.value)&&y&&(P=I?K(y)<K(ee.value):z?y<ee.value:Z<new Date(ee.value))}if((D||P)&&(F(!!D,H.message,ee.message,La.max,La.min),!r))return A(O[b].message),O}if((d||f)&&!U&&(na(y)||a&&Array.isArray(y))){const D=Au(d),P=Au(f),H=!Kr(D.value)&&y.length>+D.value,ee=!Kr(P.value)&&y.length<+P.value;if((H||ee)&&(F(H,D.message,P.message),!r))return A(O[b].message),O}if(_&&!U&&na(y)){const{value:D,message:P}=Au(_);if(vx(D)&&!y.match(D)&&(O[b]={type:La.pattern,message:P,ref:o,...k(La.pattern,P)},!r))return A(P),O}if(N){if(bi(N)){const D=await N(y,n),P=Uk(D,E);if(P&&(O[b]={...P,...k(La.validate,P.message)},!r))return A(P.message),O}else if($n(N)){let D={};for(const P in N){if(!ls(D)&&!r)break;const H=Uk(await N[P](y,n),E,P);H&&(D={...H,...k(P,H.message)},A(H.message),r&&(O[b]=D))}if(!ls(D)&&(O[b]={ref:E,...D},!r))return O}}return A(!0),O};const eae={mode:wi.onSubmit,reValidateMode:wi.onChange,shouldFocusError:!0};function tae(t={}){let e={...eae,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:bi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let i=$n(e.defaultValues)||$n(e.values)?Pr(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Pr(i),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,d=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const g={array:Ak(),state:Ak()},_=e.criteriaMode===wi.all,N=G=>re=>{clearTimeout(d),d=setTimeout(G,re)},b=async G=>{if(!e.disabled&&(f.isValid||p.isValid||G)){const re=e.resolver?ls((await R()).errors):await U(r,!0);re!==n.isValid&&g.state.next({isValid:re})}},S=(G,re)=>{!e.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((G||Array.from(c.mount)).forEach(ce=>{ce&&(re?Jt(n.validatingFields,ce,re):nr(n.validatingFields,ce))}),g.state.next({validatingFields:n.validatingFields,isValidating:!ls(n.validatingFields)}))},w=(G,re=[],ce,ke,Pe=!0,Ne=!0)=>{if(ke&&ce&&!e.disabled){if(o.action=!0,Ne&&Array.isArray(Xe(r,G))){const Fe=ce(Xe(r,G),ke.argA,ke.argB);Pe&&Jt(r,G,Fe)}if(Ne&&Array.isArray(Xe(n.errors,G))){const Fe=ce(Xe(n.errors,G),ke.argA,ke.argB);Pe&&Jt(n.errors,G,Fe),Xie(n.errors,G)}if((f.touchedFields||p.touchedFields)&&Ne&&Array.isArray(Xe(n.touchedFields,G))){const Fe=ce(Xe(n.touchedFields,G),ke.argA,ke.argB);Pe&&Jt(n.touchedFields,G,Fe)}(f.dirtyFields||p.dirtyFields)&&(n.dirtyFields=of(i,a)),g.state.next({name:G,isDirty:F(G,re),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Jt(a,G,re)},y=(G,re)=>{Jt(n.errors,G,re),g.state.next({errors:n.errors})},E=G=>{n.errors=G,g.state.next({errors:n.errors,isValid:!1})},A=(G,re,ce,ke)=>{const Pe=Xe(r,G);if(Pe){const Ne=Xe(a,G,Zn(ce)?Xe(i,G):ce);Zn(Ne)||ke&&ke.defaultChecked||re?Jt(a,G,re?Ne:Dk(Pe._f)):H(G,Ne),o.mount&&b()}},O=(G,re,ce,ke,Pe)=>{let Ne=!1,Fe=!1;const He={name:G};if(!e.disabled){if(!ce||ke){(f.isDirty||p.isDirty)&&(Fe=n.isDirty,n.isDirty=He.isDirty=F(),Ne=Fe!==He.isDirty);const nt=qo(Xe(i,G),re);Fe=!!Xe(n.dirtyFields,G),nt?nr(n.dirtyFields,G):Jt(n.dirtyFields,G,!0),He.dirtyFields=n.dirtyFields,Ne=Ne||(f.dirtyFields||p.dirtyFields)&&Fe!==!nt}if(ce){const nt=Xe(n.touchedFields,G);nt||(Jt(n.touchedFields,G,ce),He.touchedFields=n.touchedFields,Ne=Ne||(f.touchedFields||p.touchedFields)&&nt!==ce)}Ne&&Pe&&g.state.next(He)}return Ne?He:{}},q=(G,re,ce,ke)=>{const Pe=Xe(n.errors,G),Ne=(f.isValid||p.isValid)&&Hi(re)&&n.isValid!==re;if(e.delayError&&ce?(u=N(()=>y(G,ce)),u(e.delayError)):(clearTimeout(d),u=null,ce?Jt(n.errors,G,ce):nr(n.errors,G)),(ce?!qo(Pe,ce):Pe)||!ls(ke)||Ne){const Fe={...ke,...Ne&&Hi(re)?{isValid:re}:{},errors:n.errors,name:G};n={...n,...Fe},g.state.next(Fe)}},R=async G=>{S(G,!0);const re=await e.resolver(a,e.context,Hie(G||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return S(G),re},V=async G=>{const{errors:re}=await R(G);if(G)for(const ce of G){const ke=Xe(re,ce);ke?Jt(n.errors,ce,ke):nr(n.errors,ce)}else n.errors=re;return re},U=async(G,re,ce={valid:!0})=>{for(const ke in G){const Pe=G[ke];if(Pe){const{_f:Ne,...Fe}=Pe;if(Ne){const He=c.array.has(Ne.name),nt=Pe._f&&Gie(Pe._f);nt&&f.validatingFields&&S([ke],!0);const Yt=await $k(Pe,c.disabled,a,_,e.shouldUseNativeValidation&&!re,He);if(nt&&f.validatingFields&&S([ke]),Yt[Ne.name]&&(ce.valid=!1,re))break;!re&&(Xe(Yt,Ne.name)?He?Jie(n.errors,Yt,Ne.name):Jt(n.errors,Ne.name,Yt[Ne.name]):nr(n.errors,Ne.name))}!ls(Fe)&&await U(Fe,re,ce)}}return ce.valid},k=()=>{for(const G of c.unMount){const re=Xe(r,G);re&&(re._f.refs?re._f.refs.every(ce=>!S_(ce)):!S_(re._f.ref))&&Ae(G)}c.unMount=new Set},F=(G,re)=>!e.disabled&&(G&&re&&Jt(a,G,re),!qo(B(),i)),D=(G,re,ce)=>$ie(G,c,{...o.mount?a:Zn(re)?i:na(G)?{[G]:re}:re},ce,re),P=G=>WN(Xe(o.mount?a:i,G,e.shouldUnregister?Xe(i,G,[]):[])),H=(G,re,ce={})=>{const ke=Xe(r,G);let Pe=re;if(ke){const Ne=ke._f;Ne&&(!Ne.disabled&&Jt(a,G,N3(re,Ne)),Pe=px(Ne.ref)&&Kr(re)?"":re,_3(Ne.ref)?[...Ne.ref.options].forEach(Fe=>Fe.selected=Pe.includes(Fe.value)):Ne.refs?gp(Ne.ref)?Ne.refs.forEach(Fe=>{(!Fe.defaultChecked||!Fe.disabled)&&(Array.isArray(Pe)?Fe.checked=!!Pe.find(He=>He===Fe.value):Fe.checked=Pe===Fe.value||!!Pe)}):Ne.refs.forEach(Fe=>Fe.checked=Fe.value===Pe):GN(Ne.ref)?Ne.ref.value="":(Ne.ref.value=Pe,Ne.ref.type||g.state.next({name:G,values:Pr(a)})))}(ce.shouldDirty||ce.shouldTouch)&&O(G,Pe,ce.shouldTouch,ce.shouldDirty,!0),ce.shouldValidate&&z(G)},ee=(G,re,ce)=>{for(const ke in re){if(!re.hasOwnProperty(ke))return;const Pe=re[ke],Ne=G+"."+ke,Fe=Xe(r,Ne);(c.array.has(G)||$n(Pe)||Fe&&!Fe._f)&&!cc(Pe)?ee(Ne,Pe,ce):H(Ne,Pe,ce)}},Z=(G,re,ce={})=>{const ke=Xe(r,G),Pe=c.array.has(G),Ne=Pr(re);Jt(a,G,Ne),Pe?(g.array.next({name:G,values:Pr(a)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&ce.shouldDirty&&g.state.next({name:G,dirtyFields:of(i,a),isDirty:F(G,Ne)})):ke&&!ke._f&&!Kr(Ne)?ee(G,Ne,ce):H(G,Ne,ce),Vk(G,c)&&g.state.next({...n}),g.state.next({name:o.mount?G:void 0,values:Pr(a)})},K=async G=>{o.mount=!0;const re=G.target;let ce=re.name,ke=!0;const Pe=Xe(r,ce),Ne=nt=>{ke=Number.isNaN(nt)||cc(nt)&&isNaN(nt.getTime())||qo(nt,Xe(a,ce,nt))},Fe=Lk(e.mode),He=Lk(e.reValidateMode);if(Pe){let nt,Yt;const tr=re.type?Dk(Pe._f):Oie(G),qn=G.type===Ik.BLUR||G.type===Ik.FOCUS_OUT,zr=!Kie(Pe._f)&&!e.resolver&&!Xe(n.errors,ce)&&!Pe._f.deps||Qie(qn,Xe(n.touchedFields,ce),n.isSubmitted,He,Fe),rs=Vk(ce,c,qn);Jt(a,ce,tr),qn?(Pe._f.onBlur&&Pe._f.onBlur(G),u&&u(0)):Pe._f.onChange&&Pe._f.onChange(G);const ss=O(ce,tr,qn),Fi=!ls(ss)||rs;if(!qn&&g.state.next({name:ce,type:G.type,values:Pr(a)}),zr)return(f.isValid||p.isValid)&&(e.mode==="onBlur"?qn&&b():qn||b()),Fi&&g.state.next({name:ce,...rs?{}:ss});if(!qn&&rs&&g.state.next({...n}),e.resolver){const{errors:tu}=await R([ce]);if(Ne(tr),ke){const ba=zk(n.errors,r,ce),vo=zk(tu,r,ba.name||ce);nt=vo.error,ce=vo.name,Yt=ls(tu)}}else S([ce],!0),nt=(await $k(Pe,c.disabled,a,_,e.shouldUseNativeValidation))[ce],S([ce]),Ne(tr),ke&&(nt?Yt=!1:(f.isValid||p.isValid)&&(Yt=await U(r,!0)));ke&&(Pe._f.deps&&z(Pe._f.deps),q(ce,Yt,nt,ss))}},I=(G,re)=>{if(Xe(n.errors,re)&&G.focus)return G.focus(),1},z=async(G,re={})=>{let ce,ke;const Pe=Uf(G);if(e.resolver){const Ne=await V(Zn(G)?G:Pe);ce=ls(Ne),ke=G?!Pe.some(Fe=>Xe(Ne,Fe)):ce}else G?(ke=(await Promise.all(Pe.map(async Ne=>{const Fe=Xe(r,Ne);return await U(Fe&&Fe._f?{[Ne]:Fe}:Fe)}))).every(Boolean),!(!ke&&!n.isValid)&&b()):ke=ce=await U(r);return g.state.next({...!na(G)||(f.isValid||p.isValid)&&ce!==n.isValid?{}:{name:G},...e.resolver||!G?{isValid:ce}:{},errors:n.errors}),re.shouldFocus&&!ke&&$f(r,I,G?Pe:c.mount),ke},B=G=>{const re={...o.mount?a:i};return Zn(G)?re:na(G)?Xe(re,G):G.map(ce=>Xe(re,ce))},X=(G,re)=>({invalid:!!Xe((re||n).errors,G),isDirty:!!Xe((re||n).dirtyFields,G),error:Xe((re||n).errors,G),isValidating:!!Xe(n.validatingFields,G),isTouched:!!Xe((re||n).touchedFields,G)}),ue=G=>{G&&Uf(G).forEach(re=>nr(n.errors,re)),g.state.next({errors:G?n.errors:{}})},ge=(G,re,ce)=>{const ke=(Xe(r,G,{_f:{}})._f||{}).ref,Pe=Xe(n.errors,G)||{},{ref:Ne,message:Fe,type:He,...nt}=Pe;Jt(n.errors,G,{...nt,...re,ref:ke}),g.state.next({name:G,errors:n.errors,isValid:!1}),ce&&ce.shouldFocus&&ke&&ke.focus&&ke.focus()},Ee=(G,re)=>bi(G)?g.state.subscribe({next:ce=>G(D(void 0,re),ce)}):D(G,re,!0),De=G=>g.state.subscribe({next:re=>{Yie(G.name,re.name,G.exact)&&Zie(re,G.formState||f,_e,G.reRenderRoot)&&G.callback({values:{...a},...n,...re})}}).unsubscribe,$e=G=>(o.mount=!0,p={...p,...G.formState},De({...G,formState:p})),Ae=(G,re={})=>{for(const ce of G?Uf(G):c.mount)c.mount.delete(ce),c.array.delete(ce),re.keepValue||(nr(r,ce),nr(a,ce)),!re.keepError&&nr(n.errors,ce),!re.keepDirty&&nr(n.dirtyFields,ce),!re.keepTouched&&nr(n.touchedFields,ce),!re.keepIsValidating&&nr(n.validatingFields,ce),!e.shouldUnregister&&!re.keepDefaultValue&&nr(i,ce);g.state.next({values:Pr(a)}),g.state.next({...n,...re.keepDirty?{isDirty:F()}:{}}),!re.keepIsValid&&b()},se=({disabled:G,name:re})=>{(Hi(G)&&o.mount||G||c.disabled.has(re))&&(G?c.disabled.add(re):c.disabled.delete(re))},te=(G,re={})=>{let ce=Xe(r,G);const ke=Hi(re.disabled)||Hi(e.disabled);return Jt(r,G,{...ce||{},_f:{...ce&&ce._f?ce._f:{ref:{name:G}},name:G,mount:!0,...re}}),c.mount.add(G),ce?se({disabled:Hi(re.disabled)?re.disabled:e.disabled,name:G}):A(G,!0,re.value),{...ke?{disabled:re.disabled||e.disabled}:{},...e.progressive?{required:!!re.required,min:lf(re.min),max:lf(re.max),minLength:lf(re.minLength),maxLength:lf(re.maxLength),pattern:lf(re.pattern)}:{},name:G,onChange:K,onBlur:K,ref:Pe=>{if(Pe){te(G,re),ce=Xe(r,G);const Ne=Zn(Pe.value)&&Pe.querySelectorAll&&Pe.querySelectorAll("input,select,textarea")[0]||Pe,Fe=Bie(Ne),He=ce._f.refs||[];if(Fe?He.find(nt=>nt===Ne):Ne===ce._f.ref)return;Jt(r,G,{_f:{...ce._f,...Fe?{refs:[...He.filter(S_),Ne,...Array.isArray(Xe(i,G))?[{}]:[]],ref:{type:Ne.type,name:G}}:{ref:Ne}}}),A(G,!1,void 0,Ne)}else ce=Xe(r,G,{}),ce._f&&(ce._f.mount=!1),(e.shouldUnregister||re.shouldUnregister)&&!(Lie(c.array,G)&&o.action)&&c.unMount.add(G)}}},ie=()=>e.shouldFocusError&&$f(r,I,c.mount),Y=G=>{Hi(G)&&(g.state.next({disabled:G}),$f(r,(re,ce)=>{const ke=Xe(r,ce);ke&&(re.disabled=ke._f.disabled||G,Array.isArray(ke._f.refs)&&ke._f.refs.forEach(Pe=>{Pe.disabled=ke._f.disabled||G}))},0,!1))},oe=(G,re)=>async ce=>{let ke;ce&&(ce.preventDefault&&ce.preventDefault(),ce.persist&&ce.persist());let Pe=Pr(a);if(g.state.next({isSubmitting:!0}),e.resolver){const{errors:Ne,values:Fe}=await R();n.errors=Ne,Pe=Fe}else await U(r);if(c.disabled.size)for(const Ne of c.disabled)Jt(Pe,Ne,void 0);if(nr(n.errors,"root"),ls(n.errors)){g.state.next({errors:{}});try{await G(Pe,ce)}catch(Ne){ke=Ne}}else re&&await re({...n.errors},ce),ie(),setTimeout(ie);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ls(n.errors)&&!ke,submitCount:n.submitCount+1,errors:n.errors}),ke)throw ke},pe=(G,re={})=>{Xe(r,G)&&(Zn(re.defaultValue)?Z(G,Pr(Xe(i,G))):(Z(G,re.defaultValue),Jt(i,G,Pr(re.defaultValue))),re.keepTouched||nr(n.touchedFields,G),re.keepDirty||(nr(n.dirtyFields,G),n.isDirty=re.defaultValue?F(G,Pr(Xe(i,G))):F()),re.keepError||(nr(n.errors,G),f.isValid&&b()),g.state.next({...n}))},Ce=(G,re={})=>{const ce=G?Pr(G):i,ke=Pr(ce),Pe=ls(G),Ne=Pe?i:ke;if(re.keepDefaultValues||(i=ce),!re.keepValues){if(re.keepDirtyValues){const Fe=new Set([...c.mount,...Object.keys(of(i,a))]);for(const He of Array.from(Fe))Xe(n.dirtyFields,He)?Jt(Ne,He,Xe(a,He)):Z(He,Xe(Ne,He))}else{if(qN&&Zn(G))for(const Fe of c.mount){const He=Xe(r,Fe);if(He&&He._f){const nt=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;if(px(nt)){const Yt=nt.closest("form");if(Yt){Yt.reset();break}}}}for(const Fe of c.mount)Z(Fe,Xe(Ne,Fe))}a=Pr(Ne),g.array.next({values:{...Ne}}),g.state.next({values:{...Ne}})}c={mount:re.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!re.keepIsValid||!!re.keepDirtyValues,o.watch=!!e.shouldUnregister,g.state.next({submitCount:re.keepSubmitCount?n.submitCount:0,isDirty:Pe?!1:re.keepDirty?n.isDirty:!!(re.keepDefaultValues&&!qo(G,i)),isSubmitted:re.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Pe?{}:re.keepDirtyValues?re.keepDefaultValues&&a?of(i,a):n.dirtyFields:re.keepDefaultValues&&G?of(i,G):re.keepDirty?n.dirtyFields:{},touchedFields:re.keepTouched?n.touchedFields:{},errors:re.keepErrors?n.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},we=(G,re)=>Ce(bi(G)?G(a):G,re),ne=(G,re={})=>{const ce=Xe(r,G),ke=ce&&ce._f;if(ke){const Pe=ke.refs?ke.refs[0]:ke.ref;Pe.focus&&(Pe.focus(),re.shouldSelect&&bi(Pe.select)&&Pe.select())}},_e=G=>{n={...n,...G}},We={control:{register:te,unregister:Ae,getFieldState:X,handleSubmit:oe,setError:ge,_subscribe:De,_runSchema:R,_focusError:ie,_getWatch:D,_getDirty:F,_setValid:b,_setFieldArray:w,_setDisabledField:se,_setErrors:E,_getFieldArray:P,_reset:Ce,_resetDefaultValues:()=>bi(e.defaultValues)&&e.defaultValues().then(G=>{we(G,e.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:k,_disableForm:Y,_subjects:g,_proxyFormState:f,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(G){o=G},get _defaultValues(){return i},get _names(){return c},set _names(G){c=G},get _formState(){return n},get _options(){return e},set _options(G){e={...e,...G}}},subscribe:$e,trigger:z,register:te,handleSubmit:oe,watch:Ee,setValue:Z,getValues:B,reset:we,resetField:pe,clearErrors:ue,unregister:Ae,setError:ge,setFocus:ne,getFieldState:X};return{...We,formControl:We}}function yc(t={}){const e=Le.useRef(void 0),n=Le.useRef(void 0),[r,i]=Le.useState({isDirty:!1,isValidating:!1,isLoading:bi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:bi(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!bi(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...c}=tae(t);e.current={...c,formState:r}}const a=e.current.control;return a._options=t,Uie(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(c=>({...c,isReady:!0})),a._formState.isReady=!0,o},[a]),Le.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Le.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),Le.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),Le.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),Le.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),Le.useEffect(()=>{t.values&&!qo(t.values,n.current)?(a._reset(t.values,a._options.resetOptions),n.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),Le.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=zie(r,a),e.current}const Bk=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Xe(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},E3=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?Bk(r.ref,n,t):r.refs&&r.refs.forEach(i=>Bk(i,n,t))}},nae=(t,e)=>{e.shouldUseNativeValidation&&E3(t,e);const n={};for(const r in t){const i=Xe(e.fields,r),a=Object.assign(t[r]||{},{ref:i&&i.ref});if(rae(e.names||Object.keys(t),r)){const o=Object.assign({},Xe(n,r));Jt(o,"root",a),Jt(n,r,o)}else Jt(n,r,a)}return n},rae=(t,e)=>t.some(n=>n.startsWith(e+"."));var sae=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];n[o]={message:c.message,type:c.code}}else n[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(p){return t.push(p)})}),e){var u=n[o].types,d=u&&u[r.code];n[o]=y3(o,e,n,i,d?[].concat(d,r.message):r.message)}t.shift()}return n},_c=function(t,e,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve(function(o,c){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return a.shouldUseNativeValidation&&E3({},a),{errors:{},values:n.raw?r:d}})}catch(d){return c(d)}return u&&u.then?u.then(void 0,c):u}(0,function(o){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(o))return{values:{},errors:nae(sae(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Ft;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),o={};for(const c of a)o[c]=i[c];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Ft||(Ft={}));var qk;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(qk||(qk={}));const tt=Ft.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Oo=t=>{switch(typeof t){case"undefined":return tt.undefined;case"string":return tt.string;case"number":return Number.isNaN(t)?tt.nan:tt.number;case"boolean":return tt.boolean;case"function":return tt.function;case"bigint":return tt.bigint;case"symbol":return tt.symbol;case"object":return Array.isArray(t)?tt.array:t===null?tt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?tt.promise:typeof Map<"u"&&t instanceof Map?tt.map:typeof Set<"u"&&t instanceof Set?tt.set:typeof Date<"u"&&t instanceof Date?tt.date:tt.object;default:return tt.unknown}},Re=Ft.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class uo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let c=r,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(n(o))):c[d]=c[d]||{_errors:[]},c=c[d],u++}}};return i(this),r}static assert(e){if(!(e instanceof uo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ft.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}uo.create=t=>new uo(t);const Eb=(t,e)=>{let n;switch(t.code){case Re.invalid_type:t.received===tt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Re.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ft.jsonStringifyReplacer)}`;break;case Re.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ft.joinValues(t.keys,", ")}`;break;case Re.invalid_union:n="Invalid input";break;case Re.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ft.joinValues(t.options)}`;break;case Re.invalid_enum_value:n=`Invalid enum value. Expected ${Ft.joinValues(t.options)}, received '${t.received}'`;break;case Re.invalid_arguments:n="Invalid function arguments";break;case Re.invalid_return_type:n="Invalid function return type";break;case Re.invalid_date:n="Invalid date";break;case Re.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ft.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Re.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Re.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Re.custom:n="Invalid input";break;case Re.invalid_intersection_types:n="Intersection results could not be merged";break;case Re.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Re.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ft.assertNever(t)}return{message:n}};let iae=Eb;function aae(){return iae}const oae=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let c="";const u=r.filter(d=>!!d).slice().reverse();for(const d of u)c=d(o,{data:e,defaultError:c}).message;return{...i,path:a,message:c}};function qe(t,e){const n=aae(),r=oae({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Eb?void 0:Eb].filter(i=>!!i)});t.common.issues.push(r)}class Ds{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return xt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return Ds.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return xt;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const xt=Object.freeze({status:"aborted"}),Nf=t=>({status:"dirty",value:t}),oi=t=>({status:"valid",value:t}),Wk=t=>t.status==="aborted",Hk=t=>t.status==="dirty",Ud=t=>t.status==="valid",xx=t=>typeof Promise<"u"&&t instanceof Promise;var rt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(rt||(rt={}));class Nl{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Gk=(t,e)=>{if(Ud(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new uo(t.common.issues);return this._error=n,this._error}}};function St(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,c)=>{const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??c.defaultError}:typeof c.data>"u"?{message:u??r??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:u??n??c.defaultError}},description:i}}class Dt{get description(){return this._def.description}_getType(e){return Oo(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Oo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ds,ctx:{common:e.parent.common,data:e.data,parsedType:Oo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(xx(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oo(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Gk(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oo(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return Ud(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>Ud(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oo(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(xx(i)?i:Promise.resolve(i));return Gk(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=e(i),c=()=>a.addIssue({code:Re.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new qd({schema:this,typeName:_t.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return cl.create(this,this._def)}nullable(){return Wd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return fa.create(this)}promise(){return bx.create(this,this._def)}or(e){return _x.create([this,e],this._def)}and(e){return wx.create(this,e,this._def)}transform(e){return new qd({...St(this._def),schema:this,typeName:_t.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new kb({...St(this._def),innerType:this,defaultValue:n,typeName:_t.ZodDefault})}brand(){return new Pae({typeName:_t.ZodBranded,type:this,...St(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Tb({...St(this._def),innerType:this,catchValue:n,typeName:_t.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ZN.create(this,e)}readonly(){return Pb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const lae=/^c[^\s-]{8,}$/i,cae=/^[0-9a-z]+$/,uae=/^[0-9A-HJKMNP-TV-Z]{26}$/i,dae=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,hae=/^[a-z0-9_-]{21}$/i,fae=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,mae=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,pae=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,gae="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let E_;const vae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,yae=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,_ae=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,wae=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,bae=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,C3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",jae=new RegExp(`^${C3}$`);function k3(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function Nae(t){return new RegExp(`^${k3(t)}$`)}function Sae(t){let e=`${C3}T${k3(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Eae(t,e){return!!((e==="v4"||!e)&&vae.test(t)||(e==="v6"||!e)&&yae.test(t))}function Cae(t,e){if(!fae.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function kae(t,e){return!!((e==="v4"||!e)&&xae.test(t)||(e==="v6"||!e)&&_ae.test(t))}class Yo extends Dt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==tt.string){const a=this._getOrReturnCtx(e);return qe(a,{code:Re.invalid_type,expected:tt.string,received:a.parsedType}),xt}const r=new Ds;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),qe(i,{code:Re.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),qe(i,{code:Re.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,c=e.data.length<a.value;(o||c)&&(i=this._getOrReturnCtx(e,i),o?qe(i,{code:Re.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&qe(i,{code:Re.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")pae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"email",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")E_||(E_=new RegExp(gae,"u")),E_.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"emoji",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")dae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"uuid",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")hae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"nanoid",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")lae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"cuid",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")cae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"cuid2",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")uae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"ulid",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),qe(i,{validation:"url",code:Re.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"regex",code:Re.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),qe(i,{code:Re.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),qe(i,{code:Re.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),qe(i,{code:Re.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?Sae(a).test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{code:Re.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?jae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{code:Re.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?Nae(a).test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{code:Re.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?mae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"duration",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?Eae(e.data,a.version)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"ip",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?Cae(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"jwt",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?kae(e.data,a.version)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"cidr",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?wae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"base64",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?bae.test(e.data)||(i=this._getOrReturnCtx(e,i),qe(i,{validation:"base64url",code:Re.invalid_string,message:a.message}),r.dirty()):Ft.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Re.invalid_string,...rt.errToObj(r)})}_addCheck(e){return new Yo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...rt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...rt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...rt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...rt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...rt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...rt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...rt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...rt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...rt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...rt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...rt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...rt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...rt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...rt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...rt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...rt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...rt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...rt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...rt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...rt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...rt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...rt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...rt.errToObj(n)})}nonempty(e){return this.min(1,rt.errToObj(e))}trim(){return new Yo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Yo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Yo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Yo.create=t=>new Yo({checks:[],typeName:_t.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...St(t)});function Tae(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/10**i}class $d extends Dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==tt.number){const a=this._getOrReturnCtx(e);return qe(a,{code:Re.invalid_type,expected:tt.number,received:a.parsedType}),xt}let r;const i=new Ds;for(const a of this._def.checks)a.kind==="int"?Ft.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),qe(r,{code:Re.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Re.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Re.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?Tae(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Re.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),qe(r,{code:Re.not_finite,message:a.message}),i.dirty()):Ft.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,rt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,rt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,rt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,rt.toString(n))}setLimit(e,n,r,i){return new $d({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:rt.toString(i)}]})}_addCheck(e){return new $d({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:rt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:rt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:rt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:rt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:rt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:rt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:rt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:rt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:rt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ft.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}$d.create=t=>new $d({checks:[],typeName:_t.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...St(t)});class Tm extends Dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==tt.bigint)return this._getInvalidInput(e);let r;const i=new Ds;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Re.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Re.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Re.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Ft.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return qe(n,{code:Re.invalid_type,expected:tt.bigint,received:n.parsedType}),xt}gte(e,n){return this.setLimit("min",e,!0,rt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,rt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,rt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,rt.toString(n))}setLimit(e,n,r,i){return new Tm({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:rt.toString(i)}]})}_addCheck(e){return new Tm({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:rt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:rt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:rt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:rt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:rt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Tm.create=t=>new Tm({checks:[],typeName:_t.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...St(t)});class Kk extends Dt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==tt.boolean){const r=this._getOrReturnCtx(e);return qe(r,{code:Re.invalid_type,expected:tt.boolean,received:r.parsedType}),xt}return oi(e.data)}}Kk.create=t=>new Kk({typeName:_t.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...St(t)});class yx extends Dt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==tt.date){const a=this._getOrReturnCtx(e);return qe(a,{code:Re.invalid_type,expected:tt.date,received:a.parsedType}),xt}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return qe(a,{code:Re.invalid_date}),xt}const r=new Ds;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),qe(i,{code:Re.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),qe(i,{code:Re.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Ft.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new yx({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:rt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:rt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}yx.create=t=>new yx({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:_t.ZodDate,...St(t)});class Zk extends Dt{_parse(e){if(this._getType(e)!==tt.symbol){const r=this._getOrReturnCtx(e);return qe(r,{code:Re.invalid_type,expected:tt.symbol,received:r.parsedType}),xt}return oi(e.data)}}Zk.create=t=>new Zk({typeName:_t.ZodSymbol,...St(t)});class Yk extends Dt{_parse(e){if(this._getType(e)!==tt.undefined){const r=this._getOrReturnCtx(e);return qe(r,{code:Re.invalid_type,expected:tt.undefined,received:r.parsedType}),xt}return oi(e.data)}}Yk.create=t=>new Yk({typeName:_t.ZodUndefined,...St(t)});class Qk extends Dt{_parse(e){if(this._getType(e)!==tt.null){const r=this._getOrReturnCtx(e);return qe(r,{code:Re.invalid_type,expected:tt.null,received:r.parsedType}),xt}return oi(e.data)}}Qk.create=t=>new Qk({typeName:_t.ZodNull,...St(t)});class Xk extends Dt{constructor(){super(...arguments),this._any=!0}_parse(e){return oi(e.data)}}Xk.create=t=>new Xk({typeName:_t.ZodAny,...St(t)});class Jk extends Dt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return oi(e.data)}}Jk.create=t=>new Jk({typeName:_t.ZodUnknown,...St(t)});class Sl extends Dt{_parse(e){const n=this._getOrReturnCtx(e);return qe(n,{code:Re.invalid_type,expected:tt.never,received:n.parsedType}),xt}}Sl.create=t=>new Sl({typeName:_t.ZodNever,...St(t)});class eT extends Dt{_parse(e){if(this._getType(e)!==tt.undefined){const r=this._getOrReturnCtx(e);return qe(r,{code:Re.invalid_type,expected:tt.void,received:r.parsedType}),xt}return oi(e.data)}}eT.create=t=>new eT({typeName:_t.ZodVoid,...St(t)});class fa extends Dt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==tt.array)return qe(n,{code:Re.invalid_type,expected:tt.array,received:n.parsedType}),xt;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,c=n.data.length<i.exactLength.value;(o||c)&&(qe(n,{code:o?Re.too_big:Re.too_small,minimum:c?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(qe(n,{code:Re.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(qe(n,{code:Re.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,c)=>i.type._parseAsync(new Nl(n,o,n.path,c)))).then(o=>Ds.mergeArray(r,o));const a=[...n.data].map((o,c)=>i.type._parseSync(new Nl(n,o,n.path,c)));return Ds.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new fa({...this._def,minLength:{value:e,message:rt.toString(n)}})}max(e,n){return new fa({...this._def,maxLength:{value:e,message:rt.toString(n)}})}length(e,n){return new fa({...this._def,exactLength:{value:e,message:rt.toString(n)}})}nonempty(e){return this.min(1,e)}}fa.create=(t,e)=>new fa({type:t,minLength:null,maxLength:null,exactLength:null,typeName:_t.ZodArray,...St(e)});function Lu(t){if(t instanceof Kn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=cl.create(Lu(r))}return new Kn({...t._def,shape:()=>e})}else return t instanceof fa?new fa({...t._def,type:Lu(t.element)}):t instanceof cl?cl.create(Lu(t.unwrap())):t instanceof Wd?Wd.create(Lu(t.unwrap())):t instanceof zc?zc.create(t.items.map(e=>Lu(e))):t}class Kn extends Dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ft.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==tt.object){const d=this._getOrReturnCtx(e);return qe(d,{code:Re.invalid_type,expected:tt.object,received:d.parsedType}),xt}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Sl&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||c.push(d);const u=[];for(const d of o){const f=a[d],p=i.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new Nl(i,p,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof Sl){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of c)u.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(d==="strict")c.length>0&&(qe(i,{code:Re.unrecognized_keys,keys:c}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of c){const p=i.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new Nl(i,p,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of u){const p=await f.key,g=await f.value;d.push({key:p,value:g,alwaysSet:f.alwaysSet})}return d}).then(d=>Ds.mergeObjectSync(r,d)):Ds.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return rt.errToObj,new Kn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:rt.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Kn({...this._def,unknownKeys:"strip"})}passthrough(){return new Kn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Kn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Kn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:_t.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Kn({...this._def,catchall:e})}pick(e){const n={};for(const r of Ft.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Kn({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Ft.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Kn({...this._def,shape:()=>n})}deepPartial(){return Lu(this)}partial(e){const n={};for(const r of Ft.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new Kn({...this._def,shape:()=>n})}required(e){const n={};for(const r of Ft.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof cl;)a=a._def.innerType;n[r]=a}return new Kn({...this._def,shape:()=>n})}keyof(){return T3(Ft.objectKeys(this.shape))}}Kn.create=(t,e)=>new Kn({shape:()=>t,unknownKeys:"strip",catchall:Sl.create(),typeName:_t.ZodObject,...St(e)});Kn.strictCreate=(t,e)=>new Kn({shape:()=>t,unknownKeys:"strict",catchall:Sl.create(),typeName:_t.ZodObject,...St(e)});Kn.lazycreate=(t,e)=>new Kn({shape:t,unknownKeys:"strip",catchall:Sl.create(),typeName:_t.ZodObject,...St(e)});class _x extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const o=a.map(c=>new uo(c.ctx.common.issues));return qe(n,{code:Re.invalid_union,unionErrors:o}),xt}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const u of r){const d={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const c=o.map(u=>new uo(u));return qe(n,{code:Re.invalid_union,unionErrors:c}),xt}}get options(){return this._def.options}}_x.create=(t,e)=>new _x({options:t,typeName:_t.ZodUnion,...St(e)});function Cb(t,e){const n=Oo(t),r=Oo(e);if(t===e)return{valid:!0,data:t};if(n===tt.object&&r===tt.object){const i=Ft.objectKeys(e),a=Ft.objectKeys(t).filter(c=>i.indexOf(c)!==-1),o={...t,...e};for(const c of a){const u=Cb(t[c],e[c]);if(!u.valid)return{valid:!1};o[c]=u.data}return{valid:!0,data:o}}else if(n===tt.array&&r===tt.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],c=e[a],u=Cb(o,c);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===tt.date&&r===tt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class wx extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,o)=>{if(Wk(a)||Wk(o))return xt;const c=Cb(a.value,o.value);return c.valid?((Hk(a)||Hk(o))&&n.dirty(),{status:n.value,value:c.data}):(qe(r,{code:Re.invalid_intersection_types}),xt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}wx.create=(t,e,n)=>new wx({left:t,right:e,typeName:_t.ZodIntersection,...St(n)});class zc extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==tt.array)return qe(r,{code:Re.invalid_type,expected:tt.array,received:r.parsedType}),xt;if(r.data.length<this._def.items.length)return qe(r,{code:Re.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xt;!this._def.rest&&r.data.length>this._def.items.length&&(qe(r,{code:Re.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,c)=>{const u=this._def.items[c]||this._def.rest;return u?u._parse(new Nl(r,o,r.path,c)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Ds.mergeArray(n,o)):Ds.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new zc({...this._def,rest:e})}}zc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new zc({items:t,typeName:_t.ZodTuple,rest:null,...St(e)})};class tT extends Dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==tt.map)return qe(r,{code:Re.invalid_type,expected:tt.map,received:r.parsedType}),xt;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([c,u],d)=>({key:i._parse(new Nl(r,c,r.path,[d,"key"])),value:a._parse(new Nl(r,u,r.path,[d,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,f=await u.value;if(d.status==="aborted"||f.status==="aborted")return xt;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),c.set(d.value,f.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const u of o){const d=u.key,f=u.value;if(d.status==="aborted"||f.status==="aborted")return xt;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),c.set(d.value,f.value)}return{status:n.value,value:c}}}}tT.create=(t,e,n)=>new tT({valueType:e,keyType:t,typeName:_t.ZodMap,...St(n)});class Pm extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==tt.set)return qe(r,{code:Re.invalid_type,expected:tt.set,received:r.parsedType}),xt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(qe(r,{code:Re.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(qe(r,{code:Re.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(u){const d=new Set;for(const f of u){if(f.status==="aborted")return xt;f.status==="dirty"&&n.dirty(),d.add(f.value)}return{status:n.value,value:d}}const c=[...r.data.values()].map((u,d)=>a._parse(new Nl(r,u,r.path,d)));return r.common.async?Promise.all(c).then(u=>o(u)):o(c)}min(e,n){return new Pm({...this._def,minSize:{value:e,message:rt.toString(n)}})}max(e,n){return new Pm({...this._def,maxSize:{value:e,message:rt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Pm.create=(t,e)=>new Pm({valueType:t,minSize:null,maxSize:null,typeName:_t.ZodSet,...St(e)});class nT extends Dt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}nT.create=(t,e)=>new nT({getter:t,typeName:_t.ZodLazy,...St(e)});class rT extends Dt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return qe(n,{received:n.data,code:Re.invalid_literal,expected:this._def.value}),xt}return{status:"valid",value:e.data}}get value(){return this._def.value}}rT.create=(t,e)=>new rT({value:t,typeName:_t.ZodLiteral,...St(e)});function T3(t,e){return new Bd({values:t,typeName:_t.ZodEnum,...St(e)})}class Bd extends Dt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return qe(n,{expected:Ft.joinValues(r),received:n.parsedType,code:Re.invalid_type}),xt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return qe(n,{received:n.data,code:Re.invalid_enum_value,options:r}),xt}return oi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Bd.create(e,{...this._def,...n})}exclude(e,n=this._def){return Bd.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Bd.create=T3;class sT extends Dt{_parse(e){const n=Ft.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==tt.string&&r.parsedType!==tt.number){const i=Ft.objectValues(n);return qe(r,{expected:Ft.joinValues(i),received:r.parsedType,code:Re.invalid_type}),xt}if(this._cache||(this._cache=new Set(Ft.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Ft.objectValues(n);return qe(r,{received:r.data,code:Re.invalid_enum_value,options:i}),xt}return oi(e.data)}get enum(){return this._def.values}}sT.create=(t,e)=>new sT({values:t,typeName:_t.ZodNativeEnum,...St(e)});class bx extends Dt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==tt.promise&&n.common.async===!1)return qe(n,{code:Re.invalid_type,expected:tt.promise,received:n.parsedType}),xt;const r=n.parsedType===tt.promise?n.data:Promise.resolve(n.data);return oi(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}bx.create=(t,e)=>new bx({type:t,typeName:_t.ZodPromise,...St(e)});class qd extends Dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{qe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async c=>{if(n.value==="aborted")return xt;const u=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return u.status==="aborted"?xt:u.status==="dirty"||n.value==="dirty"?Nf(u.value):u});{if(n.value==="aborted")return xt;const c=this._def.schema._parseSync({data:o,path:r.path,parent:r});return c.status==="aborted"?xt:c.status==="dirty"||n.value==="dirty"?Nf(c.value):c}}if(i.type==="refinement"){const o=c=>{const u=i.refinement(c,a);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?xt:(c.status==="dirty"&&n.dirty(),o(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?xt:(c.status==="dirty"&&n.dirty(),o(c.value).then(()=>({status:n.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ud(o))return xt;const c=i.transform(o.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ud(o)?Promise.resolve(i.transform(o.value,a)).then(c=>({status:n.value,value:c})):xt);Ft.assertNever(i)}}qd.create=(t,e,n)=>new qd({schema:t,typeName:_t.ZodEffects,effect:e,...St(n)});qd.createWithPreprocess=(t,e,n)=>new qd({schema:e,effect:{type:"preprocess",transform:t},typeName:_t.ZodEffects,...St(n)});class cl extends Dt{_parse(e){return this._getType(e)===tt.undefined?oi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}cl.create=(t,e)=>new cl({innerType:t,typeName:_t.ZodOptional,...St(e)});class Wd extends Dt{_parse(e){return this._getType(e)===tt.null?oi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wd.create=(t,e)=>new Wd({innerType:t,typeName:_t.ZodNullable,...St(e)});class kb extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===tt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}kb.create=(t,e)=>new kb({innerType:t,typeName:_t.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...St(e)});class Tb extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return xx(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new uo(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new uo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Tb.create=(t,e)=>new Tb({innerType:t,typeName:_t.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...St(e)});class iT extends Dt{_parse(e){if(this._getType(e)!==tt.nan){const r=this._getOrReturnCtx(e);return qe(r,{code:Re.invalid_type,expected:tt.nan,received:r.parsedType}),xt}return{status:"valid",value:e.data}}}iT.create=t=>new iT({typeName:_t.ZodNaN,...St(t)});class Pae extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ZN extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?xt:a.status==="dirty"?(n.dirty(),Nf(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?xt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new ZN({in:e,out:n,typeName:_t.ZodPipeline})}}class Pb extends Dt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Ud(i)&&(i.value=Object.freeze(i.value)),i);return xx(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Pb.create=(t,e)=>new Pb({innerType:t,typeName:_t.ZodReadonly,...St(e)});var _t;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(_t||(_t={}));const gt=Yo.create,P3=$d.create;Sl.create;const YN=fa.create,Jc=Kn.create;_x.create;wx.create;zc.create;const Iae=Bd.create;bx.create;cl.create;Wd.create;var Qy="Checkbox",[Aae,Kue]=Sr(Qy),[Rae,QN]=Aae(Qy);function Mae(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:i,disabled:a,form:o,name:c,onCheckedChange:u,required:d,value:f="on",internal_do_not_use_render:p}=t,[g,_]=Os({prop:n,defaultProp:i??!1,onChange:u,caller:Qy}),[N,b]=x.useState(null),[S,w]=x.useState(null),y=x.useRef(!1),E=N?!!o||!!N.closest("form"):!0,A={checked:g,disabled:a,setChecked:_,control:N,setControl:b,name:c,form:o,value:f,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:ul(i)?!1:i,isFormControl:E,bubbleInput:S,setBubbleInput:w};return s.jsx(Rae,{scope:e,...A,children:Oae(p)?p(A):r})}var I3="CheckboxTrigger",A3=x.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},i)=>{const{control:a,value:o,disabled:c,checked:u,required:d,setControl:f,setChecked:p,hasConsumerStoppedPropagationRef:g,isFormControl:_,bubbleInput:N}=QN(I3,t),b=ht(i,f),S=x.useRef(u);return x.useEffect(()=>{const w=a==null?void 0:a.form;if(w){const y=()=>p(S.current);return w.addEventListener("reset",y),()=>w.removeEventListener("reset",y)}},[a,p]),s.jsx(Ze.button,{type:"button",role:"checkbox","aria-checked":ul(u)?"mixed":u,"aria-required":d,"data-state":L3(u),"data-disabled":c?"":void 0,disabled:c,value:o,...r,ref:b,onKeyDown:Oe(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Oe(n,w=>{p(y=>ul(y)?!0:!y),N&&_&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})})});A3.displayName=I3;var XN=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:u,onCheckedChange:d,form:f,...p}=t;return s.jsx(Mae,{__scopeCheckbox:n,checked:i,defaultChecked:a,disabled:c,required:o,onCheckedChange:d,name:r,form:f,value:u,internal_do_not_use_render:({isFormControl:g})=>s.jsxs(s.Fragment,{children:[s.jsx(A3,{...p,ref:e,__scopeCheckbox:n}),g&&s.jsx(D3,{__scopeCheckbox:n})]})})});XN.displayName=Qy;var R3="CheckboxIndicator",M3=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,a=QN(R3,n);return s.jsx(Er,{present:r||ul(a.checked)||a.checked===!0,children:s.jsx(Ze.span,{"data-state":L3(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});M3.displayName=R3;var O3="CheckboxBubbleInput",D3=x.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:c,disabled:u,name:d,value:f,form:p,bubbleInput:g,setBubbleInput:_}=QN(O3,t),N=ht(n,_),b=zy(a),S=Ty(r);x.useEffect(()=>{const y=g;if(!y)return;const E=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(E,"checked").set,q=!i.current;if(b!==a&&O){const R=new Event("click",{bubbles:q});y.indeterminate=ul(a),O.call(y,ul(a)?!1:a),y.dispatchEvent(R)}},[g,b,a,i]);const w=x.useRef(ul(a)?!1:a);return s.jsx(Ze.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:c,disabled:u,name:d,value:f,form:p,...e,tabIndex:-1,ref:N,style:{...e.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});D3.displayName=O3;function Oae(t){return typeof t=="function"}function ul(t){return t==="indeterminate"}function L3(t){return ul(t)?"indeterminate":t?"checked":"unchecked"}const jx=x.forwardRef(({className:t,...e},n)=>s.jsx(XN,{ref:n,className:st("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:s.jsx(M3,{className:st("flex items-center justify-center text-current"),children:s.jsx(wN,{className:"h-4 w-4"})})}));jx.displayName=XN.displayName;var F3=["PageUp","PageDown"],V3=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],z3={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},gh="Slider",[Ib,Dae,Lae]=np(gh),[U3,Zue]=Sr(gh,[Lae]),[Fae,Xy]=U3(gh),$3=x.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:d=[r],value:f,onValueChange:p=()=>{},onValueCommit:g=()=>{},inverted:_=!1,form:N,...b}=t,S=x.useRef(new Set),w=x.useRef(0),E=o==="horizontal"?Vae:zae,[A=[],O]=Os({prop:f,defaultProp:d,onChange:F=>{var P;(P=[...S.current][w.current])==null||P.focus(),p(F)}}),q=x.useRef(A);function R(F){const D=Wae(A,F);k(F,D)}function V(F){k(F,w.current)}function U(){const F=q.current[w.current];A[w.current]!==F&&g(A)}function k(F,D,{commit:P}={commit:!1}){const H=Zae(a),ee=Yae(Math.round((F-r)/a)*a+r,H),Z=km(ee,[r,i]);O((K=[])=>{const I=Bae(K,Z,D);if(Kae(I,u*a)){w.current=I.indexOf(Z);const z=String(I)!==String(K);return z&&P&&g(I),z?I:K}else return K})}return s.jsx(Fae,{scope:t.__scopeSlider,name:n,disabled:c,min:r,max:i,valueIndexToChangeRef:w,thumbs:S.current,values:A,orientation:o,form:N,children:s.jsx(Ib.Provider,{scope:t.__scopeSlider,children:s.jsx(Ib.Slot,{scope:t.__scopeSlider,children:s.jsx(E,{"aria-disabled":c,"data-disabled":c?"":void 0,...b,ref:e,onPointerDown:Oe(b.onPointerDown,()=>{c||(q.current=A)}),min:r,max:i,inverted:_,onSlideStart:c?void 0:R,onSlideMove:c?void 0:V,onSlideEnd:c?void 0:U,onHomeKeyDown:()=>!c&&k(r,0,{commit:!0}),onEndKeyDown:()=>!c&&k(i,A.length-1,{commit:!0}),onStepKeyDown:({event:F,direction:D})=>{if(!c){const ee=F3.includes(F.key)||F.shiftKey&&V3.includes(F.key)?10:1,Z=w.current,K=A[Z],I=a*ee*D;k(K+I,Z,{commit:!0})}}})})})})});$3.displayName=gh;var[B3,q3]=U3(gh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Vae=x.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:a,onSlideStart:o,onSlideMove:c,onSlideEnd:u,onStepKeyDown:d,...f}=t,[p,g]=x.useState(null),_=ht(e,E=>g(E)),N=x.useRef(void 0),b=Yc(i),S=b==="ltr",w=S&&!a||!S&&a;function y(E){const A=N.current||p.getBoundingClientRect(),O=[0,A.width],R=JN(O,w?[n,r]:[r,n]);return N.current=A,R(E-A.left)}return s.jsx(B3,{scope:t.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:s.jsx(W3,{dir:b,"data-orientation":"horizontal",...f,ref:_,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const A=y(E.clientX);o==null||o(A)},onSlideMove:E=>{const A=y(E.clientX);c==null||c(A)},onSlideEnd:()=>{N.current=void 0,u==null||u()},onStepKeyDown:E=>{const O=z3[w?"from-left":"from-right"].includes(E.key);d==null||d({event:E,direction:O?-1:1})}})})}),zae=x.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:c,onStepKeyDown:u,...d}=t,f=x.useRef(null),p=ht(e,f),g=x.useRef(void 0),_=!i;function N(b){const S=g.current||f.current.getBoundingClientRect(),w=[0,S.height],E=JN(w,_?[r,n]:[n,r]);return g.current=S,E(b-S.top)}return s.jsx(B3,{scope:t.__scopeSlider,startEdge:_?"bottom":"top",endEdge:_?"top":"bottom",size:"height",direction:_?1:-1,children:s.jsx(W3,{"data-orientation":"vertical",...d,ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const S=N(b.clientY);a==null||a(S)},onSlideMove:b=>{const S=N(b.clientY);o==null||o(S)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:b=>{const w=z3[_?"from-bottom":"from-top"].includes(b.key);u==null||u({event:b,direction:w?-1:1})}})})}),W3=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:c,onStepKeyDown:u,...d}=t,f=Xy(gh,n);return s.jsx(Ze.span,{...d,ref:e,onKeyDown:Oe(t.onKeyDown,p=>{p.key==="Home"?(o(p),p.preventDefault()):p.key==="End"?(c(p),p.preventDefault()):F3.concat(V3).includes(p.key)&&(u(p),p.preventDefault())}),onPointerDown:Oe(t.onPointerDown,p=>{const g=p.target;g.setPointerCapture(p.pointerId),p.preventDefault(),f.thumbs.has(g)?g.focus():r(p)}),onPointerMove:Oe(t.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&i(p)}),onPointerUp:Oe(t.onPointerUp,p=>{const g=p.target;g.hasPointerCapture(p.pointerId)&&(g.releasePointerCapture(p.pointerId),a(p))})})}),H3="SliderTrack",G3=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Xy(H3,n);return s.jsx(Ze.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});G3.displayName=H3;var Ab="SliderRange",K3=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Xy(Ab,n),a=q3(Ab,n),o=x.useRef(null),c=ht(e,o),u=i.values.length,d=i.values.map(g=>Q3(g,i.min,i.max)),f=u>1?Math.min(...d):0,p=100-Math.max(...d);return s.jsx(Ze.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:c,style:{...t.style,[a.startEdge]:f+"%",[a.endEdge]:p+"%"}})});K3.displayName=Ab;var Rb="SliderThumb",Z3=x.forwardRef((t,e)=>{const n=Dae(t.__scopeSlider),[r,i]=x.useState(null),a=ht(e,c=>i(c)),o=x.useMemo(()=>r?n().findIndex(c=>c.ref.current===r):-1,[n,r]);return s.jsx(Uae,{...t,ref:a,index:o})}),Uae=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...a}=t,o=Xy(Rb,n),c=q3(Rb,n),[u,d]=x.useState(null),f=ht(e,y=>d(y)),p=u?o.form||!!u.closest("form"):!0,g=Ty(u),_=o.values[r],N=_===void 0?0:Q3(_,o.min,o.max),b=qae(r,o.values.length),S=g==null?void 0:g[c.size],w=S?Hae(S,N,c.direction):0;return x.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${N}% + ${w}px)`},children:[s.jsx(Ib.ItemSlot,{scope:t.__scopeSlider,children:s.jsx(Ze.span,{role:"slider","aria-label":t["aria-label"]||b,"aria-valuemin":o.min,"aria-valuenow":_,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:f,style:_===void 0?{display:"none"}:t.style,onFocus:Oe(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),p&&s.jsx(Y3,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:_},r)]})});Z3.displayName=Rb;var $ae="RadioBubbleInput",Y3=x.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=x.useRef(null),a=ht(i,r),o=zy(e);return x.useEffect(()=>{const c=i.current;if(!c)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&f){const p=new Event("input",{bubbles:!0});f.call(c,e),c.dispatchEvent(p)}},[o,e]),s.jsx(Ze.input,{style:{display:"none"},...n,ref:a,defaultValue:e})});Y3.displayName=$ae;function Bae(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,a)=>i-a)}function Q3(t,e,n){const a=100/(n-e)*(t-e);return km(a,[0,100])}function qae(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Wae(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function Hae(t,e,n){const r=t/2,a=JN([0,50],[0,r]);return(r-a(e)*n)*n}function Gae(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Kae(t,e){if(e>0){const n=Gae(t);return Math.min(...n)>=e}return!0}function JN(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Zae(t){return(String(t).split(".")[1]||"").length}function Yae(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var X3=$3,Qae=G3,Xae=K3,Jae=Z3;const J3=x.forwardRef(({className:t,...e},n)=>s.jsxs(X3,{ref:n,className:st("relative flex w-full touch-none select-none items-center",t),...e,children:[s.jsx(Qae,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:s.jsx(Xae,{className:"absolute h-full bg-primary"})}),s.jsx(Jae,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));J3.displayName=X3.displayName;const vp=Jc({title:gt().min(5,"Le titre doit contenir au moins 5 caractres").max(80,"Le titre ne peut pas dpasser 80 caractres"),description:gt().min(20,"La description doit contenir au moins 20 caractres").max(1e3,"La description ne peut pas dpasser 1000 caractres"),tags:YN(gt()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:gt().min(1,"Veuillez spcifier un lieu de rencontre")}),eoe=vp.extend({price:gt().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit tre d'au moins 1");if(e>1e4)throw new Error("Le prix ne peut pas dpasser 10 000");return e}),condition:Iae(["new","like-new","good","fair"]),paymentMethods:YN(gt()).min(1,"Slectionnez au moins un mode de paiement")}),toe=vp.extend({donationReason:gt().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractres")}),noe=vp.extend({desiredItems:YN(gt()).min(1,"Ajoutez au moins un objet recherch"),estimatedValue:gt().min(1,"La valeur estime est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estime doit tre d'au moins 1");return e})}),roe=vp.extend({hourlyRate:gt().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit tre d'au moins 5/h");if(e>200)throw new Error("Le tarif ne peut pas dpasser 200/h");return e}),duration:P3().min(1,"La dure doit tre d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:gt().min(20,"Dcrivez vos comptences en dtail").max(500,"Maximum 500 caractres"),availability:gt().optional()}),soe=[{value:"new",label:"Neuf",description:"Jamais utilis, dans son emballage"},{value:"like-new",label:"Trs bon",description:"Utilis trs peu, aucun dfaut visible"},{value:"good",label:"Bon",description:"Utilis mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],aT=[{value:"cash",label:"Espces",icon:z4},{value:"transfer",label:"Virement bancaire",icon:Vn},{value:"lydia",label:"Lydia",icon:Zc},{value:"paypal",label:"PayPal",icon:Vn}];delete ph.Icon.Default.prototype._getIconUrl;ph.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const ioe=()=>{var se,te,ie,Y,oe,pe,Ce,we;const{currentUser:t,userProfile:e}=mn(),{createListing:n}=dp(),r=cr(),[i]=z1(),[a,o]=x.useState(()=>i.get("type")||"sell"),[c,u]=x.useState([]),[d,f]=x.useState(!1),[p,g]=x.useState(""),[_,N]=x.useState([]),[b,S]=x.useState(!1),[w,y]=x.useState([""]),[E,A]=x.useState(""),[O,q]=x.useState([]),[R,V]=x.useState([1]),[U,k]=x.useState(null),[F,D]=x.useState(!1),H=yc({resolver:_c((()=>{switch(a){case"sell":return eoe;case"gift":return toe;case"swap":return noe;case"service":return roe;default:return vp}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});x.useEffect(()=>{H.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),N([]),y([""]),q([]),V([1]),u([])},[a,H]);const ee=async ne=>{if(!t)throw new Error("User not authenticated");const _e=Date.now(),be=`listings/${t.uid}/${_e}_${ne.name}`,We=Yj(Xj,be),G=await Kj(We,ne);return await Zj(G.ref)},Z=async ne=>{const _e=ne.target.files;if(!(!_e||_e.length===0)){f(!0);try{const We=Array.from(_e).slice(0,10-c.length).filter(re=>re.size<=15728640).map(re=>ee(re)),G=await Promise.all(We);u(re=>[...re,...G])}catch(be){console.error("Error uploading images:",be)}finally{f(!1)}}},K=ne=>{u(_e=>_e.filter((be,We)=>We!==ne))},I=()=>{if(p.trim()&&!_.includes(p.trim())&&_.length<5){const ne=[..._,p.trim()];N(ne),H.setValue("tags",ne),g("")}},z=ne=>{const _e=_.filter(be=>be!==ne);N(_e),H.setValue("tags",_e)},B=()=>{if(E.trim()){const ne=[...w.filter(_e=>_e.trim()),E.trim()];y(ne),H.setValue("desiredItems",ne),A("")}},X=ne=>{const _e=w.filter((be,We)=>We!==ne);y(_e),H.setValue("desiredItems",_e)},ue=(ne,_e)=>{const be=_e?[...O,ne]:O.filter(We=>We!==ne);q(be),H.setValue("paymentMethods",be)};async function ge(ne){const be=await(await fetch(`https://nominatim.openstreetmap.org/search?format=jsonv2&q=${encodeURIComponent(ne)}`)).json();return be&&be[0]?[parseFloat(be[0].lat),parseFloat(be[0].lon)]:null}x.useEffect(()=>{const ne=H.watch("meetingLocation");ne&&ne.length>5&&ge(ne).then(_e=>{_e&&k(_e)})},[H.watch("meetingLocation")]);const Ee=async ne=>{if(!(!t||!e)){S(!0);try{const _e={title:ne.title,description:ne.description,currency:"EUR",category:"electronics",images:c,tags:ne.tags,location:{city:"Paris",state:"le-de-France",country:"France",campus:e.campus||void 0,university:e.university||void 0,coordinates:void 0},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let be;switch(a){case"sell":be={..._e,price:ne.price,condition:ne.condition,transactionType:"sale",description:`${ne.description}

Modes de paiement accepts: ${O.map(G=>{var re;return(re=aT.find(ce=>ce.value===G))==null?void 0:re.label}).join(", ")}`};break;case"gift":be={..._e,price:0,condition:"good",transactionType:"donation",description:`${ne.description}

Raison du don: ${ne.donationReason}`};break;case"swap":be={..._e,price:ne.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:w.filter(G=>G.trim()).join(", "),description:`${ne.description}

Recherche en change: ${w.filter(G=>G.trim()).join(", ")}
Valeur estime: ${ne.estimatedValue}`};break;case"service":be={..._e,price:ne.hourlyRate,condition:"new",transactionType:"service",description:`${ne.description}

Comptences: ${ne.skills}
Tarif: ${ne.hourlyRate}/h
Dure prvue: ${R[0]}h${ne.availability?`
Disponibilits: ${ne.availability}`:""}`};break;default:throw new Error("Type de transaction non support")}console.log("Submitting listing data:",be);const We=await n(be);r(`/listing/${We}`)}catch(_e){console.error("Error creating listing:",_e)}finally{S(!1)}}},De=()=>{const ne=H.formState.errors,_e=H.watch("title")&&H.watch("description")&&H.watch("meetingLocation")&&_.length>0;switch(a){case"sell":return _e&&H.watch("price")&&O.length>0&&!ne.title&&!ne.description&&!ne.price;case"gift":return _e&&H.watch("donationReason")&&!ne.title&&!ne.description&&!ne.donationReason;case"swap":return _e&&w.some(be=>be.trim())&&H.watch("estimatedValue")&&!ne.title&&!ne.description&&!ne.estimatedValue;case"service":return _e&&H.watch("hourlyRate")&&H.watch("skills")&&!ne.title&&!ne.description&&!ne.hourlyRate&&!ne.skills;default:return!1}},$e=()=>{if(!navigator.geolocation){alert("La golocalisation n'est pas supporte par ce navigateur.");return}D(!0),navigator.geolocation.getCurrentPosition(async ne=>{const{latitude:_e,longitude:be}=ne.coords;k([_e,be]);const G=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${_e}&lon=${be}`)).json();G&&G.display_name&&H.setValue("meetingLocation",G.display_name,{shouldValidate:!0}),D(!1)},()=>{alert("Impossible d'accder  la position."),D(!1)})};function Ae(){return zN({click:async ne=>{k([ne.latlng.lat,ne.latlng.lng]),D(!0);const be=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${ne.latlng.lat}&lon=${ne.latlng.lng}`)).json();be&&be.display_name&&H.setValue("meetingLocation",be.display_name,{shouldValidate:!0}),D(!1)}}),U?s.jsx($N,{position:U}):null}return s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2 text-foreground",children:"Crer une annonce"}),s.jsx("p",{className:"text-muted-foreground",children:"Partagez vos objets, services ou recherches avec la communaut tudiante vrifie"})]}),s.jsxs("form",{onSubmit:H.handleSubmit(Ee),className:"space-y-8",children:[s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(eb,{className:"w-5 h-5"}),"Type d'annonce"]}),s.jsx(Ct,{children:"Le formulaire s'adapte automatiquement selon votre choix"})]}),s.jsx(me,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(fe,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:s.jsxs(me,{className:"p-4 text-center",children:[s.jsx(ex,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Vendre"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendre un objet"})]})}),s.jsx(fe,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:s.jsxs(me,{className:"p-4 text-center",children:[s.jsx(Ad,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Donner"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),s.jsx(fe,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:s.jsxs(me,{className:"p-4 text-center",children:[s.jsx(so,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Troc"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"changer des objets"})]})}),s.jsx(fe,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:s.jsxs(me,{className:"p-4 text-center",children:[s.jsx(Un,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Service"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsx(Je,{className:"text-foreground",children:"Informations principales"})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"title",className:"text-foreground",children:"Titre * (max 80 caractres)"}),s.jsx(Ge,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait tat":a==="gift"?"Ex: Vlo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathmatiques",...H.register("title"),className:"mt-1",maxLength:80}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(se=H.formState.errors.title)==null?void 0:se.message}),s.jsxs("span",{children:[((te=H.watch("title"))==null?void 0:te.length)||0,"/80"]})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"description",className:"text-foreground",children:"Description dtaille * (max 1000 caractres)"}),s.jsx(ri,{id:"description",placeholder:a==="sell"?"Dcrivez l'tat, l'utilisation, la raison de la vente...":a==="gift"?"Dcrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Dcrivez ce que vous proposez et ce que vous recherchez...":"Dcrivez vos comptences, votre exprience, votre mthode...",rows:6,...H.register("description"),className:"mt-1",maxLength:1e3}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(ie=H.formState.errors.description)==null?void 0:ie.message}),s.jsxs("span",{children:[((Y=H.watch("description"))==null?void 0:Y.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(ex,{className:"w-5 h-5 text-blue-600"}),"Informations de vente"]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"price",className:"text-foreground",children:"Prix () *"}),s.jsx(Ge,{id:"price",type:"text",placeholder:"0,00",...H.register("price"),className:"mt-1"}),H.formState.errors.price&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:H.formState.errors.price.message})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"condition",className:"text-foreground",children:"tat du produit *"}),s.jsxs(tn,{onValueChange:ne=>H.setValue("condition",ne),children:[s.jsx(Ht,{className:"mt-1",children:s.jsx(nn,{placeholder:"Slectionnez un tat"})}),s.jsx(Gt,{children:soe.map(ne=>s.jsx(Ke,{value:ne.value,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-foreground",children:ne.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:ne.description})]})},ne.value))})]}),H.formState.errors.condition&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:H.formState.errors.condition.message})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{className:"text-foreground",children:"Modes de paiement accepts *"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:aT.map(ne=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(jx,{id:ne.value,checked:O.includes(ne.value),onCheckedChange:_e=>ue(ne.value,_e)}),s.jsxs(Ie,{htmlFor:ne.value,className:"flex items-center gap-2 cursor-pointer text-foreground",children:[s.jsx(ne.icon,{className:"w-4 h-4"}),ne.label]})]},ne.value))}),O.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Slectionnez au moins un mode de paiement"})]})]})]}),a==="gift"&&s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Ad,{className:"w-5 h-5 text-green-600"}),"Informations du don"]})}),s.jsx(me,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractres)"}),s.jsx(ri,{id:"donationReason",placeholder:"Ex: Je dmnage, plus besoin, fin d'tudes...",rows:3,...H.register("donationReason"),className:"mt-1",maxLength:140}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(oe=H.formState.errors.donationReason)==null?void 0:oe.message}),s.jsxs("span",{children:[((pe=H.watch("donationReason"))==null?void 0:pe.length)||0,"/140"]})]})]})})]}),a==="swap"&&s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(so,{className:"w-5 h-5 text-purple-600"}),"Informations d'change"]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{className:"text-foreground",children:"Objets recherchs * (minimum 1)"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[w.filter(ne=>ne.trim()).map((ne,_e)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{value:ne,readOnly:!0,className:"flex-1"}),s.jsx(J,{type:"button",variant:"outline",size:"icon",onClick:()=>X(_e),children:s.jsx(J4,{className:"w-4 h-4"})})]},_e)),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ge,{placeholder:"Ex: Livre de physique L2",value:E,onChange:ne=>A(ne.target.value),onKeyPress:ne=>ne.key==="Enter"&&(ne.preventDefault(),B()),className:"flex-1"}),s.jsx(J,{type:"button",onClick:B,disabled:!E.trim(),children:s.jsx(gc,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estime () *"}),s.jsx(Ge,{id:"estimatedValue",type:"text",placeholder:"0,00",...H.register("estimatedValue"),className:"mt-1"}),H.formState.errors.estimatedValue&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:H.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Un,{className:"w-5 h-5 text-orange-600"}),"Informations du service"]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"skills",className:"text-foreground",children:"Description des comptences *"}),s.jsx(ri,{id:"skills",placeholder:"Dcrivez vos comptences, votre exprience, votre mthode d'enseignement...",rows:4,...H.register("skills"),className:"mt-1",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(Ce=H.formState.errors.skills)==null?void 0:Ce.message}),s.jsxs("span",{children:[((we=H.watch("skills"))==null?void 0:we.length)||0,"/500"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (/h) *"}),s.jsx(Ge,{id:"hourlyRate",type:"text",placeholder:"15,00",...H.register("hourlyRate"),className:"mt-1"}),H.formState.errors.hourlyRate&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:H.formState.errors.hourlyRate.message})]}),s.jsxs("div",{children:[s.jsxs(Ie,{className:"text-foreground",children:["Dure prvue: ",R[0],"h"]}),s.jsx(J3,{value:R,onValueChange:ne=>{V(ne),H.setValue("duration",ne[0])},max:720,min:1,step:1,className:"mt-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{children:"1h"}),s.jsx("span",{children:"720h"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"availability",className:"text-foreground",children:"Disponibilits (optionnel)"}),s.jsx(Ge,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...H.register("availability"),className:"mt-1"})]})]})]}),s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(pc,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),s.jsx(Ct,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Premire photo = photo principale. Max 15MB par image."})]}),s.jsx(me,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[c.map((ne,_e)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:ne,alt:`Photo ${_e+1}`,className:"w-full h-20 object-cover rounded-lg"}),s.jsx(J,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>K(_e),children:s.jsx(nb,{className:"w-3 h-3"})}),_e===0&&s.jsx(at,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},_e)),c.length<10&&s.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[s.jsxs("div",{className:"text-center",children:[d?s.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):s.jsx(tb,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:d?"Upload...":"Ajouter"})]}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Z,className:"hidden",disabled:d})]})]})})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(wm,{className:"w-5 h-5"}),"Tags et localisation"]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{className:"text-foreground",children:"Tags * (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:_.map(ne=>s.jsxs(at,{variant:"secondary",className:"flex items-center gap-1",children:[ne,s.jsx(J,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>z(ne),children:s.jsx(nb,{className:"w-3 h-3"})})]},ne))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ge,{placeholder:"Ajouter un tag...",value:p,onChange:ne=>g(ne.target.value),onKeyPress:ne=>ne.key==="Enter"&&(ne.preventDefault(),I()),className:"flex-1"}),s.jsx(J,{type:"button",onClick:I,disabled:!p.trim()||_.length>=5,children:"Ajouter"})]}),_.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Ge,{id:"meetingLocation",placeholder:"Ex: Bibliothque universitaire, Hall principal...",...H.register("meetingLocation"),className:"flex-1"}),s.jsx(J,{type:"button",variant:"outline",onClick:$e,disabled:F,title:"Dtecter ma position",children:F?s.jsx("span",{className:"animate-spin",children:""}):s.jsx("span",{children:""})})]}),H.formState.errors.meetingLocation&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:H.formState.errors.meetingLocation.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilgiez les lieux publics et frquents"}),s.jsx("div",{className:"mt-3",children:s.jsxs(UN,{center:U||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[s.jsx(BN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),s.jsx(Ae,{})]})})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(zf,{className:"w-4 h-4"}),"Validation"]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:`flex items-center gap-2 ${H.watch("title")&&H.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H.watch("title")&&H.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Titre (5-80 caractres)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${H.watch("description")&&H.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H.watch("description")&&H.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Description (20-1000 caractres)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${_.length>0?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${_.length>0?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Tags (1-5)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${H.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Point de rencontre"})]})]})})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(zt,{className:"w-4 h-4"}),"Conseils de scurit"]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Vrifiez l'identit de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Privilgiez les paiements scuriss"})]})]})})]}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6",children:[s.jsx(J,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:b||!De()||d,children:b?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):s.jsxs(s.Fragment,{children:[s.jsx(eb,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),s.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:De()?"Votre annonce sera visible immdiatement":"Compltez tous les champs obligatoires"})]})})]})]})]})]})};var Jy="Tabs",[aoe,Yue]=Sr(Jy,[Iy]),e5=Iy(),[ooe,eS]=aoe(Jy),t5=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:c,activationMode:u="automatic",...d}=t,f=Yc(c),[p,g]=Os({prop:r,onChange:i,defaultProp:a??"",caller:Jy});return s.jsx(ooe,{scope:n,baseId:As(),value:p,onValueChange:g,orientation:o,dir:f,activationMode:u,children:s.jsx(Ze.div,{dir:f,"data-orientation":o,...d,ref:e})})});t5.displayName=Jy;var n5="TabsList",r5=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=eS(n5,n),o=e5(n);return s.jsx(FM,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(Ze.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});r5.displayName=n5;var s5="TabsTrigger",i5=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,o=eS(s5,n),c=e5(n),u=l5(o.baseId,r),d=c5(o.baseId,r),f=r===o.value;return s.jsx(VM,{asChild:!0,...c,focusable:!i,active:f,children:s.jsx(Ze.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...a,ref:e,onMouseDown:Oe(t.onMouseDown,p=>{!i&&p.button===0&&p.ctrlKey===!1?o.onValueChange(r):p.preventDefault()}),onKeyDown:Oe(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(r)}),onFocus:Oe(t.onFocus,()=>{const p=o.activationMode!=="manual";!f&&!i&&p&&o.onValueChange(r)})})})});i5.displayName=s5;var a5="TabsContent",o5=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=t,c=eS(a5,n),u=l5(c.baseId,r),d=c5(c.baseId,r),f=r===c.value,p=x.useRef(f);return x.useEffect(()=>{const g=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(g)},[]),s.jsx(Er,{present:i||f,children:({present:g})=>s.jsx(Ze.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!g,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:g&&a})})});o5.displayName=a5;function l5(t,e){return`${t}-trigger-${e}`}function c5(t,e){return`${t}-content-${e}`}var loe=t5,u5=r5,d5=i5,h5=o5;const eu=loe,Fl=x.forwardRef(({className:t,...e},n)=>s.jsx(u5,{ref:n,className:st("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Fl.displayName=u5.displayName;const on=x.forwardRef(({className:t,...e},n)=>s.jsx(d5,{ref:n,className:st("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));on.displayName=d5.displayName;const ln=x.forwardRef(({className:t,...e},n)=>s.jsx(h5,{ref:n,className:st("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ln.displayName=h5.displayName;const f5=({currentPhotoURL:t,displayName:e})=>{var w,y;const{currentUser:n,updateUserProfile:r}=mn(),[i,a]=x.useState(!1),[o,c]=x.useState(!1),[u,d]=x.useState(null),[f,p]=x.useState(null),g=x.useRef(null),_=E=>{var q;const A=(q=E.target.files)==null?void 0:q[0];if(!A)return;if(!A.type.startsWith("image/")){xe.error("Veuillez slectionner une image");return}if(A.size>5*1024*1024){xe.error("L'image ne doit pas dpasser 5MB");return}p(A);const O=new FileReader;O.onload=R=>{var V;d((V=R.target)==null?void 0:V.result)},O.readAsDataURL(A)},N=async()=>{if(!(!f||!n)){c(!0);try{const E=`profile-photos/${n.uid}-${Date.now()}.${f.name.split(".").pop()}`,A=Yj(Xj,E),O=await Kj(A,f),q=await Zj(O.ref);await dm(n,{photoURL:q}),await r({photoURL:q}),xe.success("Photo de profil mise  jour !"),a(!1),d(null),p(null)}catch(E){console.error("Erreur lors de l'upload:",E),xe.error("Erreur lors de la mise  jour de la photo")}finally{c(!1)}}},b=async()=>{if(n){c(!0);try{await dm(n,{photoURL:null}),await r({photoURL:null}),xe.success("Photo de profil supprime"),a(!1)}catch(E){console.error("Erreur lors de la suppression:",E),xe.error("Erreur lors de la suppression de la photo")}finally{c(!1)}}},S=()=>{p(null),d(null),g.current&&(g.current.value="")};return s.jsxs(da,{open:i,onOpenChange:a,children:[s.jsx(fd,{asChild:!0,children:s.jsxs("div",{className:"relative group cursor-pointer",children:[s.jsxs(oo,{className:"h-20 w-20",children:[s.jsx(lo,{src:t||""}),s.jsx(co,{className:"text-lg bg-gradient-to-br from-primary to-secondary text-white",children:((w=e[0])==null?void 0:w.toUpperCase())||"U"})]}),s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(pc,{className:"w-6 h-6 text-white"})}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(pc,{className:"w-3 h-3 text-white"})})]})}),s.jsxs(Ci,{className:"max-w-md",children:[s.jsx(ha,{children:s.jsxs(ki,{className:"flex items-center gap-2",children:[s.jsx(pc,{className:"w-5 h-5"}),"Photo de profil"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs(oo,{className:"h-32 w-32",children:[s.jsx(lo,{src:u||t||""}),s.jsx(co,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((y=e[0])==null?void 0:y.toUpperCase())||"U"})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:_,className:"hidden"}),f?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[s.jsx("p",{className:"font-medium",children:f.name}),s.jsxs("p",{children:[(f.size/1024/1024).toFixed(2)," MB"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{onClick:S,variant:"outline",className:"flex-1",disabled:o,children:"Annuler"}),s.jsx(J,{onClick:N,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}),"Upload..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tb,{className:"w-4 h-4 mr-2"}),"Confirmer"]})})]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs(J,{onClick:()=>{var E;return(E=g.current)==null?void 0:E.click()},variant:"outline",className:"w-full",children:[s.jsx(tb,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&s.jsxs(J,{onClick:b,variant:"outline",disabled:o,className:"w-full text-destructive hover:text-destructive",children:[o?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(nb,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsx("p",{children:" Formats accepts : JPG, PNG, GIF"}),s.jsx("p",{children:" Taille maximale : 5MB"}),s.jsx("p",{children:" Recommand : image carre, minimum 200x200px"})]})]})]})]})},qr=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return typeof t=="object"&&t!==null&&"seconds"in t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):new Date},coe=()=>{const{currentUser:t,userProfile:e}=mn(),[n,r]=x.useState([]),[i,a]=x.useState([]),[o,c]=x.useState([]),[u,d]=x.useState(null),[f,p]=x.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[g,_]=x.useState({profile:!0,listings:!0,reviews:!0,favorites:!0}),[N,b]=x.useState({}),[S,w]=x.useState(null),[y,E]=x.useState(""),[A,O]=x.useState((u==null?void 0:u.firstName)||(e==null?void 0:e.firstName)||""),[q,R]=x.useState((u==null?void 0:u.lastName)||(e==null?void 0:e.lastName)||""),V=async()=>{if(t)try{_(oe=>({...oe,profile:!0}));const Y=await Is(yt(Ue,"users",t.uid));if(Y.exists()){const oe=Y.data();d({...oe,createdAt:qr(oe.createdAt),updatedAt:qr(oe.updatedAt)})}else console.log("Aucun document utilisateur trouv dans Firestore"),d(null)}catch(Y){console.error("Erreur lors du chargement du profil:",Y),d(null)}finally{_(Y=>({...Y,profile:!1}))}};x.useEffect(()=>{t&&(V(),U(),k(),F())},[t]);const U=async()=>{if(t)try{_(we=>({...we,listings:!0}));const Y=_n(Vt(Ue,"listings"),Xn("sellerId","==",t.uid),ei(20)),oe=await Fn(Y),pe=[];oe.forEach(we=>{const ne=we.data();pe.push({id:we.id,...ne,createdAt:qr(ne.createdAt),updatedAt:qr(ne.updatedAt)})}),pe.sort((we,ne)=>qr(ne.createdAt).getTime()-qr(we.createdAt).getTime()),r(pe);const Ce=pe.filter(we=>we.status==="active");p(we=>({...we,totalListings:pe.length,activeListings:Ce.length}))}catch(Y){console.error("Erreur lors du chargement des annonces:",Y)}finally{_(Y=>({...Y,listings:!1}))}},k=async()=>{if(t)try{_(be=>({...be,reviews:!0}));const Y=_n(Vt(Ue,"reviews"),Xn("revieweeId","==",t.uid),ei(10)),oe=await Fn(Y),pe=[];oe.forEach(be=>{const We=be.data();pe.push({id:be.id,...We,replies:Array.isArray(We.replies)?We.replies.map(G=>({...G,createdAt:G.createdAt instanceof Date?G.createdAt:G.createdAt&&typeof G.createdAt.toDate=="function"?G.createdAt.toDate():new Date})):[],likes:Array.isArray(We.likes)?We.likes:[],dislikes:Array.isArray(We.dislikes)?We.dislikes:[],createdAt:qr(We.createdAt)})}),pe.sort((be,We)=>qr(We.createdAt).getTime()-qr(be.createdAt).getTime()),a(pe);const Ce=Array.from(new Set(pe.map(be=>be.reviewerId))),we={...N};await Promise.all(Ce.map(async be=>{if(!we[be]){const We=await Is(yt(Ue,"users",be));if(We.exists()){const G=We.data();we[be]={displayName:G.displayName||"Utilisateur",photoURL:G.photoURL||void 0}}else we[be]={displayName:""}}})),b(we);const ne=pe.reduce((be,We)=>be+We.rating,0),_e=pe.length>0?ne/pe.length:0;p(be=>({...be,totalReviews:pe.length,averageRating:Math.round(_e*10)/10}))}catch(Y){console.error("Erreur lors du chargement des avis:",Y)}finally{_(Y=>({...Y,reviews:!1}))}},F=async()=>{if(t)try{_(Ce=>({...Ce,favorites:!0}));const Y=_n(Vt(Ue,"favorites"),Xn("userId","==",t.uid),ei(20)),oe=await Fn(Y),pe=[];if(oe.forEach(Ce=>{const we=Ce.data();pe.push({id:Ce.id,...we,createdAt:qr(we.createdAt)})}),pe.sort((Ce,we)=>qr(we.createdAt).getTime()-qr(Ce.createdAt).getTime()),p(Ce=>({...Ce,totalFavorites:pe.length})),pe.length>0){const Ce=pe.slice(0,6).map(async ne=>{try{const _e=await Is(yt(Ue,"listings",ne.listingId));if(_e.exists()){const be=_e.data();return{id:_e.id,...be,createdAt:qr(be.createdAt),updatedAt:qr(be.updatedAt)}}return null}catch(_e){return console.error("Erreur lors du chargement d'une annonce favorite:",_e),null}}),we=await Promise.all(Ce);c(we.filter(ne=>ne!==null))}}catch(Y){console.error("Erreur lors du chargement des favoris:",Y)}finally{_(Y=>({...Y,favorites:!1}))}},D=Y=>{if(!Y)return"Date inconnue";try{const oe=qr(Y);return isNaN(oe.getTime())?"Date invalide":fh(oe,{addSuffix:!0,locale:Dr})}catch{return"Date invalide"}},P=Y=>Array.from({length:5},(oe,pe)=>s.jsx(Zo,{className:`h-4 w-4 ${pe<Y?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},pe)),H=localStorage.getItem("pendingUserData"),ee=H?JSON.parse(H):{};let Z=(u==null?void 0:u.displayName)||(e==null?void 0:e.displayName)||ee.displayName||"";!Z&&(t!=null&&t.displayName)&&(Z=t.displayName),!Z&&(t!=null&&t.email)&&(Z=t.email.split("@")[0]),Z||(Z="Utilisateur");let K=(u==null?void 0:u.university)||(e==null?void 0:e.university)||ee.university||"";if((u==null?void 0:u.university)==="Autre universit"&&u.otherUniversity||(e==null?void 0:e.university)==="Autre universit"&&e.otherUniversity||ee.university==="Autre universit"&&ee.otherUniversity){const Y=u==null?void 0:u.otherUniversity,oe=e==null?void 0:e.otherUniversity,pe=ee.otherUniversity;K=Y||oe||pe||"Universit personnalise"}K||(K="Universit spcifie lors de l'inscription");let I=(u==null?void 0:u.fieldOfStudy)||(e==null?void 0:e.fieldOfStudy)||ee.fieldOfStudy||"";if((u==null?void 0:u.fieldOfStudy)==="Autre"&&u.otherFieldOfStudy||(e==null?void 0:e.fieldOfStudy)==="Autre"&&e.otherFieldOfStudy||ee.fieldOfStudy==="Autre"&&ee.otherFieldOfStudy){const Y=u==null?void 0:u.otherFieldOfStudy,oe=e==null?void 0:e.otherFieldOfStudy,pe=ee.otherFieldOfStudy;I=Y||oe||pe||"Filire personnalise"}I||(I="Filire non spcifie");const z=(u==null?void 0:u.graduationYear)||(e==null?void 0:e.graduationYear)||ee.graduationYear||"",B=(u==null?void 0:u.email)||(e==null?void 0:e.email)||ee.email||(t==null?void 0:t.email)||"",X=(u==null?void 0:u.photoURL)||(e==null?void 0:e.photoURL)||"",ue=(u==null?void 0:u.createdAt)||(e==null?void 0:e.createdAt),ge=(u==null?void 0:u.isVerified)||(e==null?void 0:e.isVerified),Ee=(u==null?void 0:u.location)||(e==null?void 0:e.location)||"",De=(u==null?void 0:u.co2Saved)||(e==null?void 0:e.co2Saved)||0,$e=t&&e&&t.uid===e.id,Ae=async Y=>{if(t)try{const oe=yt(Ue,"reviews",Y),pe=i.find(ne=>ne.id===Y);if(!pe)return;const Ce=pe.likes||[],we=pe.dislikes||[];Ce.includes(t.uid)?await yn(oe,{likes:Ce.filter(ne=>ne!==t.uid)}):await yn(oe,{likes:[...Ce,t.uid],dislikes:we.filter(ne=>ne!==t.uid)}),a(ne=>ne.map(_e=>{if(_e.id===Y){const be=_e.likes||[],We=_e.dislikes||[];return be.includes(t.uid)?{..._e,likes:be.filter(G=>G!==t.uid)}:{..._e,likes:[...be,t.uid],dislikes:We.filter(G=>G!==t.uid)}}return _e}))}catch(oe){console.error("Error liking review:",oe),Ln.error("Erreur lors du like")}},se=async Y=>{if(t)try{const oe=yt(Ue,"reviews",Y),pe=i.find(ne=>ne.id===Y);if(!pe)return;const Ce=pe.likes||[],we=pe.dislikes||[];we.includes(t.uid)?await yn(oe,{dislikes:we.filter(ne=>ne!==t.uid)}):await yn(oe,{dislikes:[...we,t.uid],likes:Ce.filter(ne=>ne!==t.uid)}),a(ne=>ne.map(_e=>{if(_e.id===Y){const be=_e.likes||[],We=_e.dislikes||[];return We.includes(t.uid)?{..._e,dislikes:We.filter(G=>G!==t.uid)}:{..._e,dislikes:[...We,t.uid],likes:be.filter(G=>G!==t.uid)}}return _e}))}catch(oe){console.error("Error disliking review:",oe),Ln.error("Erreur lors du dislike")}},te=async Y=>{if(!(!t||!y.trim()))try{const oe=yt(Ue,"reviews",Y),pe=i.find(we=>we.id===Y);if(!pe)return;const Ce={userId:t.uid,comment:y.trim(),createdAt:new Date};await yn(oe,{replies:[...pe.replies||[],Ce]}),a(we=>we.map(ne=>ne.id===Y?{...ne,replies:[...ne.replies||[],Ce]}:ne)),E(""),w(null),Ln.success("Rponse envoye")}catch(oe){console.error("Error replying to review:",oe),Ln.error("Erreur lors de l'envoi de la rponse")}},ie=async()=>{if(t)try{const Y=`${A} ${q}`.trim();await yn(yt(Ue,"users",t.uid),{firstName:A,lastName:q,displayName:Y,updatedAt:new Date}),await t.reload(),Ln.success("Nom mis  jour !")}catch{Ln.error("Erreur lors de la mise  jour du nom")}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsx(fe,{children:s.jsx(Qe,{className:"text-left",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:space-x-4 text-center sm:text-left",children:[s.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0",children:[s.jsx(f5,{currentPhotoURL:X,displayName:Z}),ge&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(zt,{className:"w-3 h-3 text-white"})})]}),s.jsxs("div",{className:"flex-1 w-full",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-2 mb-1",children:[s.jsx(Je,{className:"text-2xl text-center sm:text-left w-full sm:w-auto",children:Z}),ge&&s.jsxs(at,{className:"bg-green-100 text-green-800 border-green-200 mt-2 sm:mt-0",children:[s.jsx(zt,{className:"w-3 h-3 mr-1"}),"Vrifi"]})]}),s.jsx(Ct,{className:"text-base text-center sm:text-left break-all",children:B}),s.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-muted-foreground text-center sm:text-left",children:[s.jsxs("div",{children:[s.jsx(Jr,{className:"h-4 w-4 mr-1 inline"})," Universit : ",s.jsx("span",{className:"text-sm",children:K})]}),s.jsxs("div",{children:[s.jsx(rh,{className:"h-4 w-4 mr-1 inline"})," Filire : ",s.jsx("span",{className:"text-sm",children:I})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold",children:"Anne de diplme :"})," ",s.jsx("span",{className:"text-sm",children:z})]})]}),Ee&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(Mr,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"text-sm",children:Ee})]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(Xs,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-sm",children:["Membre depuis ",D(ue)]})]}),De&&De>0&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-green-600 text-center sm:text-left",children:[s.jsx(Ei,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-sm font-medium",children:[De," kg CO conomiss"]})]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vn,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.listings?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.totalListings}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ep,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.listings?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.activeListings}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zo,{className:"h-5 w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.reviews?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.averageRating||""}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Or,{className:"h-5 w-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.favorites?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),s.jsxs(eu,{defaultValue:"listings",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-3",children:[s.jsxs(on,{value:"listings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(vn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"}),s.jsx("span",{className:"sm:hidden",children:"Annonces"}),!g.listings&&f.totalListings>0&&s.jsx(at,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalListings})]}),s.jsxs(on,{value:"reviews",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(Zo,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Avis Reus"}),s.jsx("span",{className:"sm:hidden",children:"Avis"}),!g.reviews&&f.totalReviews>0&&s.jsx(at,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalReviews})]}),s.jsxs(on,{value:"favorites",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(Or,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Favoris"}),s.jsx("span",{className:"sm:hidden",children:"Favoris"}),!g.favorites&&f.totalFavorites>0&&s.jsx(at,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalFavorites})]}),s.jsxs(on,{value:"settings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(Jr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Paramtres"}),s.jsx("span",{className:"sm:hidden",children:"Paramtres"})]})]}),s.jsx(ln,{value:"listings",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(vn,{className:"w-5 h-5"}),"Mes Annonces"]}),s.jsx(Ct,{children:"Grez vos annonces publies sur StudyMarket"})]}),s.jsx(me,{children:g.listings?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((Y,oe)=>s.jsxs(fe,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(me,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},oe))}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publi d'annonces."}),s.jsx(J,{asChild:!0,children:s.jsx(ze,{to:"/create",children:"Publier ma premire annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(Y=>s.jsx(Cm,{listing:Y},Y.id))})})]})}),s.jsx(ln,{value:"reviews",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Zo,{className:"w-5 h-5"}),"Avis Reus"]}),s.jsx(Ct,{children:"Les avis laisss par d'autres tudiants"})]}),s.jsx(me,{children:g.reviews?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((Y,oe)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((pe,Ce)=>s.jsx("div",{className:"w-4 h-4 bg-muted rounded"},Ce))}),s.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},oe))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(wn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reu pour le moment. Les avis apparatront aprs vos premires transactions."})]}):s.jsx("div",{className:"space-y-4",children:i.map(Y=>{var oe,pe,Ce,we,ne,_e;return s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex",children:P(Y.rating)}),s.jsxs(at,{variant:"secondary",className:"text-xs",children:[Y.rating,"/5"]})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:D(Y.createdAt)})]}),s.jsx("p",{className:"text-foreground mb-3 leading-relaxed text-left",children:Y.comment}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[((oe=N[Y.reviewerId])==null?void 0:oe.photoURL)&&s.jsx("img",{src:N[Y.reviewerId].photoURL,alt:"avatar",className:"w-7 h-7 rounded-full object-cover"}),Y.reviewerId===t.uid?(e==null?void 0:e.displayName)||"Vous":(pe=N[Y.reviewerId])!=null&&pe.displayName?N[Y.reviewerId].displayName:s.jsx("span",{className:"inline-block bg-gray-200 text-gray-600 px-2 py-0.5 rounded text-xs",children:"Profil supprim"})]}),s.jsx(at,{variant:"outline",className:"text-xs",children:Y.reviewType==="buyer"?"Acheteur":"Vendeur"})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[s.jsxs(J,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(Ce=Y.likes)!=null&&Ce.includes((t==null?void 0:t.uid)||"")?"text-primary":""}`,onClick:()=>Ae(Y.id),children:[s.jsx(tK,{className:"w-4 h-4"}),s.jsx("span",{children:((we=Y.likes)==null?void 0:we.length)||0})]}),s.jsxs(J,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(ne=Y.dislikes)!=null&&ne.includes((t==null?void 0:t.uid)||"")?"text-destructive":""}`,onClick:()=>se(Y.id),children:[s.jsx(eK,{className:"w-4 h-4"}),s.jsx("span",{children:((_e=Y.dislikes)==null?void 0:_e.length)||0})]}),s.jsxs(J,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>w(S===Y.id?null:Y.id),children:[s.jsx(wn,{className:"w-4 h-4"}),s.jsx("span",{children:"Rpondre"})]})]}),S===Y.id&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx(ri,{placeholder:"Votre rponse...",value:y,onChange:be=>E(be.target.value),className:"min-h-[80px]"}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(J,{variant:"outline",size:"sm",onClick:()=>{w(null),E("")},children:"Annuler"}),s.jsx(J,{size:"sm",onClick:()=>te(Y.id),disabled:!y.trim(),children:"Envoyer"})]})]}),Y.replies&&Y.replies.length>0&&s.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-muted",children:Y.replies.map((be,We)=>{var G;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-medium",children:$e&&be.userId===(t==null?void 0:t.uid)?"Vous":((G=N[be.userId])==null?void 0:G.displayName)||"Utilisateur"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:D(be.createdAt)})]}),s.jsx("p",{className:"text-muted-foreground text-left",children:be.comment})]},We)})})]},Y.id)})})})]})}),s.jsx(ln,{value:"favorites",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Or,{className:"w-5 h-5"}),"Mes Favoris"]}),s.jsx(Ct,{children:"Les annonces que vous avez ajoutes  vos favoris"})]}),s.jsx(me,{children:g.favorites?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((Y,oe)=>s.jsxs(fe,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(me,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},oe))}):o.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Or,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les  vos favoris !"}),s.jsx(J,{asChild:!0,children:s.jsx(ze,{to:"/create",children:"Publier ma premire annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(Y=>s.jsx(Cm,{listing:Y},Y.id))})})]})}),s.jsx(ln,{value:"settings",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsx(Je,{children:"Paramtres du profil"}),s.jsx(Ct,{children:"Modifie tes informations principales."})]}),s.jsxs(me,{children:[s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Ie,{htmlFor:"firstName",children:"Prnom"}),s.jsx(Ge,{id:"firstName",value:A,onChange:Y=>O(Y.target.value),autoComplete:"given-name"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Ie,{htmlFor:"lastName",children:"Nom"}),s.jsx(Ge,{id:"lastName",value:q,onChange:Y=>R(Y.target.value),autoComplete:"family-name"})]})]}),s.jsx(J,{onClick:ie,disabled:!A||!q,children:"Enregistrer"})]})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez tre connect pour voir votre profil."})})})})};var e0="Switch",[uoe,Que]=Sr(e0),[doe,hoe]=uoe(e0),m5=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:u="on",onCheckedChange:d,form:f,...p}=t,[g,_]=x.useState(null),N=ht(e,E=>_(E)),b=x.useRef(!1),S=g?f||!!g.closest("form"):!0,[w,y]=Os({prop:i,defaultProp:a??!1,onChange:d,caller:e0});return s.jsxs(doe,{scope:n,checked:w,disabled:c,children:[s.jsx(Ze.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":x5(w),"data-disabled":c?"":void 0,disabled:c,value:u,...p,ref:N,onClick:Oe(t.onClick,E=>{y(A=>!A),S&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),S&&s.jsx(v5,{control:g,bubbles:!b.current,name:r,value:u,checked:w,required:o,disabled:c,form:f,style:{transform:"translateX(-100%)"}})]})});m5.displayName=e0;var p5="SwitchThumb",g5=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=hoe(p5,n);return s.jsx(Ze.span,{"data-state":x5(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});g5.displayName=p5;var foe="SwitchBubbleInput",v5=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},a)=>{const o=x.useRef(null),c=ht(o,a),u=zy(n),d=Ty(e);return x.useEffect(()=>{const f=o.current;if(!f)return;const p=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==n&&_){const N=new Event("click",{bubbles:r});_.call(f,n),f.dispatchEvent(N)}},[u,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:c,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});v5.displayName=foe;function x5(t){return t?"checked":"unchecked"}var y5=m5,moe=g5;const rr=x.forwardRef(({className:t,...e},n)=>s.jsx(y5,{className:st("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:s.jsx(moe,{className:st("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));rr.displayName=y5.displayName;const poe=Jc({firstName:gt().min(2,"Le prnom doit contenir au moins 2 caractres"),lastName:gt().min(2,"Le nom doit contenir au moins 2 caractres"),displayName:gt().optional(),bio:gt().max(500,"La bio ne peut pas dpasser 500 caractres").optional(),phone:gt().optional(),university:gt().min(1,"Veuillez slectionner votre universit"),fieldOfStudy:gt().min(1,"Veuillez indiquer votre filire"),graduationYear:P3().min(2020).max(2035),campus:gt().optional(),location:gt().optional()}),goe=Jc({currentPassword:gt().min(6,"Le mot de passe actuel est requis"),newPassword:gt().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractres"),confirmPassword:gt()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),voe=Jc({newEmail:gt().email("Email invalide"),password:gt().min(6,"Mot de passe requis pour changer l'email")}),xoe=["Sorbonne Universit","Universit Paris-Dauphine","cole Polytechnique","ENS Paris","CentraleSuplec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Universit Paris 1 Panthon-Sorbonne","Universit Paris Cit","Sciences Po Paris","Universit de Lyon","Universit de Marseille","Universit de Toulouse","Universit de Bordeaux","Universit de Lille","Universit de Strasbourg","Universit de Nantes","Universit de Montpellier","Autre universit"],yoe=["Informatique","Ingnierie","Commerce/Management","Droit","Mdecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","conomie","Psychologie","Communication","Design","Autre"],_oe=()=>{var H,ee,Z,K,I,z;const{currentUser:t,userProfile:e,updateUserProfile:n,logout:r}=mn(),i=cr(),[a,o]=x.useState("profile"),[c,u]=x.useState(!1),[d,f]=x.useState(!1),[p,g]=x.useState(!1),[_,N]=x.useState(!1),[b,S]=x.useState(""),[w,y]=x.useState({email:((H=e==null?void 0:e.notificationPreferences)==null?void 0:H.email)??!0,push:((ee=e==null?void 0:e.notificationPreferences)==null?void 0:ee.push)??!0,sms:((Z=e==null?void 0:e.notificationPreferences)==null?void 0:Z.sms)??!1,alerts:((K=e==null?void 0:e.notificationPreferences)==null?void 0:K.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[E,A]=x.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),O=yc({resolver:_c(poe),defaultValues:{firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),q=yc({resolver:_c(goe)}),R=yc({resolver:_c(voe)});x.useEffect(()=>{var B,X,ue,ge;e&&(O.reset({firstName:e.firstName||"",lastName:e.lastName||"",displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),y({email:((B=e.notificationPreferences)==null?void 0:B.email)??!0,push:((X=e.notificationPreferences)==null?void 0:X.push)??!0,sms:((ue=e.notificationPreferences)==null?void 0:ue.sms)??!1,alerts:((ge=e.notificationPreferences)==null?void 0:ge.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,O]);const V=async B=>{u(!0);try{const{firstName:X,lastName:ue,...ge}=B,Ee=`${X} ${ue}`;await yn(yt(Ue,"users",t.uid),{...ge,firstName:X,lastName:ue,displayName:Ee,updatedAt:new Date}),xe.success("Profil mis  jour !")}catch{xe.error("Erreur lors de la mise  jour du profil")}finally{u(!1)}},U=async()=>{u(!0);try{await n({notificationPreferences:{email:w.email,push:w.push,sms:w.sms,alerts:w.alerts}}),xe.success("Prfrences de notification mises  jour !")}catch(B){console.error("Erreur lors de la mise  jour des notifications:",B),xe.error("Erreur lors de la mise  jour des notifications")}finally{u(!1)}},k=async B=>{if(t){u(!0);try{const X=ml.credential(t.email,B.currentPassword);await EE(t,X),await Z$(t,B.newPassword),xe.success("Mot de passe mis  jour avec succs !"),g(!1),q.reset()}catch(X){console.error("Erreur lors du changement de mot de passe:",X),X.code==="auth/wrong-password"?xe.error("Mot de passe actuel incorrect"):xe.error("Erreur lors du changement de mot de passe")}finally{u(!1)}}},F=async B=>{if(t){u(!0);try{const X=ml.credential(t.email,B.password);await EE(t,X),await K$(t,B.newEmail),await n({email:B.newEmail}),xe.success("Email mis  jour avec succs !"),N(!1),R.reset()}catch(X){console.error("Erreur lors du changement d'email:",X),X.code==="auth/wrong-password"?xe.error("Mot de passe incorrect"):X.code==="auth/email-already-in-use"?xe.error("Cet email est dj utilis"):xe.error("Erreur lors du changement d'email")}finally{u(!1)}}},D=async()=>{if(!(!t||b!=="SUPPRIMER")){u(!0);try{const B=x4(Ue),X=["listings","conversations","reviews","favorites","reports"];for(const ue of X){const ge=_n(Vt(Ue,ue),Xn("userId","==",t.uid));(await Fn(ge)).forEach(De=>{B.delete(De.ref)})}B.delete(yt(Ue,"users",t.uid)),await B.commit(),await e7(t),xe.success("Compte supprim avec succs"),i("/")}catch(B){console.error("Erreur lors de la suppression du compte:",B),xe.error("Erreur lors de la suppression du compte")}finally{u(!1)}}},P=async()=>{if(t){u(!0);try{const B={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},X=_n(Vt(Ue,"listings"),Xn("sellerId","==",t.uid)),ue=await Fn(X);B.listings=ue.docs.map(pe=>({id:pe.id,...pe.data()}));const ge=_n(Vt(Ue,"conversations"),Xn("participants","array-contains",t.uid)),Ee=await Fn(ge);B.conversations=Ee.docs.map(pe=>({id:pe.id,...pe.data()}));const De=_n(Vt(Ue,"reviews"),Xn("revieweeId","==",t.uid)),$e=await Fn(De);B.reviews=$e.docs.map(pe=>({id:pe.id,...pe.data()}));const Ae=_n(Vt(Ue,"favorites"),Xn("userId","==",t.uid)),se=await Fn(Ae);B.favorites=se.docs.map(pe=>({id:pe.id,...pe.data()}));const te=JSON.stringify(B,null,2),ie=new Blob([te],{type:"application/json"}),Y=URL.createObjectURL(ie),oe=document.createElement("a");oe.href=Y,oe.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,oe.click(),URL.revokeObjectURL(Y),xe.success("Donnes exportes avec succs !")}catch(B){console.error("Erreur lors de l'export des donnes:",B),xe.error("Erreur lors de l'export des donnes")}finally{u(!1)}}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[s.jsx(_y,{className:"w-8 h-8"}),"Paramtres"]}),s.jsx("p",{className:"text-muted-foreground",children:"Grez votre profil, vos prfrences et votre scurit"})]}),s.jsxs(eu,{value:a,onValueChange:o,className:"space-y-6",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-5",children:[s.jsxs(on,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(Jr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),s.jsxs(on,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(yi,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),s.jsxs(on,{value:"privacy",className:"flex items-center gap-2",children:[s.jsx(Id,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Confidentialit"})]}),s.jsxs(on,{value:"security",className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Scurit"})]}),s.jsxs(on,{value:"data",className:"flex items-center gap-2",children:[s.jsx(ti,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Donnes"})]})]}),s.jsx(ln,{value:"profile",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Jr,{className:"w-5 h-5"}),"Informations personnelles"]}),s.jsx(Ct,{children:"Mettez  jour vos informations de profil et vos prfrences"})]}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(f5,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Photo de profil"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),s.jsx(Zs,{}),s.jsxs("form",{onSubmit:O.handleSubmit(V),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"firstName",children:"Prnom *"}),s.jsx(Ge,{id:"firstName",...O.register("firstName"),placeholder:"Votre prnom"}),O.formState.errors.firstName&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.firstName.message})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"lastName",children:"Nom *"}),s.jsx(Ge,{id:"lastName",...O.register("lastName"),placeholder:"Votre nom"}),O.formState.errors.lastName&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.lastName.message})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"phone",children:"Tlphone"}),s.jsx(Ge,{id:"phone",type:"tel",...O.register("phone"),placeholder:"+33 6 12 34 56 78"})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"bio",children:"Biographie"}),s.jsx(ri,{id:"bio",...O.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((I=O.watch("bio"))==null?void 0:I.length)||0,"/500 caractres"]})]}),s.jsx(Zs,{}),s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(rh,{className:"w-4 h-4"}),"Informations acadmiques"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"university",children:"Universit *"}),s.jsxs(tn,{value:O.watch("university"),onValueChange:B=>O.setValue("university",B),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Slectionnez votre universit"})}),s.jsx(Gt,{children:xoe.map(B=>s.jsx(Ke,{value:B,children:B},B))})]}),O.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.university.message})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"fieldOfStudy",children:"Filire d'tudes *"}),s.jsxs(tn,{value:O.watch("fieldOfStudy"),onValueChange:B=>O.setValue("fieldOfStudy",B),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Slectionnez votre filire"})}),s.jsx(Gt,{children:yoe.map(B=>s.jsx(Ke,{value:B,children:B},B))})]}),O.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.fieldOfStudy.message})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"graduationYear",children:"Anne de diplme *"}),s.jsxs(tn,{value:(z=O.watch("graduationYear"))==null?void 0:z.toString(),onValueChange:B=>O.setValue("graduationYear",parseInt(B)),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Anne de diplme"})}),s.jsx(Gt,{children:Array.from({length:16},(B,X)=>2020+X).map(B=>s.jsx(Ke,{value:B.toString(),children:B},B))})]}),O.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.graduationYear.message})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"campus",children:"Campus"}),s.jsx(Ge,{id:"campus",...O.register("campus"),placeholder:"Campus principal"})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"location",children:"Localisation"}),s.jsx(Ge,{id:"location",...O.register("location"),placeholder:"Paris, France"})]}),s.jsx(J,{type:"submit",disabled:c,className:"w-full",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(s_,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),s.jsx(ln,{value:"notifications",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(yi,{className:"w-5 h-5"}),"Prfrences de notification"]}),s.jsx(Ct,{children:"Choisissez comment vous souhaitez tre notifi"})]}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(vs,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),s.jsx(rr,{checked:w.email,onCheckedChange:B=>y(X=>({...X,email:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zc,{className:"w-4 h-4 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notifications push"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),s.jsx(rr,{checked:w.push,onCheckedChange:B=>y(X=>({...X,push:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(sh,{className:"w-4 h-4 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"SMS"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientt disponible)"})]})]}),s.jsx(rr,{checked:w.sms,onCheckedChange:B=>y(X=>({...X,sms:B})),disabled:!0})]})]})]}),s.jsx(Zs,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Types de notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(wn,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),s.jsx(rr,{checked:w.messages,onCheckedChange:B=>y(X=>({...X,messages:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(vn,{className:"w-4 h-4 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Annonces"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant  vos recherches"})]})]}),s.jsx(rr,{checked:w.listings,onCheckedChange:B=>y(X=>({...X,listings:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zo,{className:"w-4 h-4 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Avis et valuations"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),s.jsx(rr,{checked:w.reviews,onCheckedChange:B=>y(X=>({...X,reviews:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(yi,{className:"w-4 h-4 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Alertes de scurit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises  jour de scurit"})]})]}),s.jsx(rr,{checked:w.alerts,onCheckedChange:B=>y(X=>({...X,alerts:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(GG,{className:"w-4 h-4 text-pink-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Marketing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalits et promotions"})]})]}),s.jsx(rr,{checked:w.marketing,onCheckedChange:B=>y(X=>({...X,marketing:B}))})]})]})]}),s.jsx(J,{onClick:U,disabled:c,className:"w-full",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(s_,{className:"w-4 h-4 mr-2"}),"Sauvegarder les prfrences"]})})]})]})}),s.jsx(ln,{value:"privacy",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Id,{className:"w-5 h-5"}),"Confidentialit et visibilit"]}),s.jsx(Ct,{children:"Contrlez qui peut voir vos informations"})]}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Visibilit du profil"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Profil public"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les tudiants vrifis"})]}),s.jsx(rr,{checked:E.profileVisibility==="public",onCheckedChange:B=>A(X=>({...X,profileVisibility:B?"public":"private"}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),s.jsx(rr,{checked:E.showEmail,onCheckedChange:B=>A(X=>({...X,showEmail:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher le tlphone"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numro de tlphone est visible sur votre profil"})]}),s.jsx(rr,{checked:E.showPhone,onCheckedChange:B=>A(X=>({...X,showPhone:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'universit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre universit est visible sur votre profil"})]}),s.jsx(rr,{checked:E.showUniversity,onCheckedChange:B=>A(X=>({...X,showUniversity:B}))})]})]})]}),s.jsx(Zs,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Interactions"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres tudiants peuvent vous envoyer des messages"})]}),s.jsx(rr,{checked:E.allowMessages,onCheckedChange:B=>A(X=>({...X,allowMessages:B}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Statut en ligne"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous tes en ligne"})]}),s.jsx(rr,{checked:E.showOnlineStatus,onCheckedChange:B=>A(X=>({...X,showOnlineStatus:B}))})]})]})]}),s.jsxs($t,{children:[s.jsx(zt,{className:"h-4 w-4"}),s.jsx(Bt,{children:"Vos informations personnelles sont toujours protges et ne sont jamais partages avec des tiers sans votre consentement."})]})]})]})}),s.jsx(ln,{value:"security",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5"}),"Scurit du compte"]}),s.jsx(Ct,{children:"Grez la scurit de votre compte StudyMarket"})]}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Informations du compte"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(vs,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Email"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),s.jsxs(da,{open:_,onOpenChange:N,children:[s.jsx(fd,{asChild:!0,children:s.jsx(J,{variant:"outline",size:"sm",children:"Changer l'email"})}),s.jsxs(Ci,{children:[s.jsxs(ha,{children:[s.jsx(ki,{children:"Changer l'adresse email"}),s.jsx(xc,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),s.jsxs("form",{onSubmit:R.handleSubmit(F),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"newEmail",children:"Nouvel email"}),s.jsx(Ge,{id:"newEmail",type:"email",...R.register("newEmail"),placeholder:"nouveau@email.com"}),R.formState.errors.newEmail&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.newEmail.message})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),s.jsx(Ge,{id:"emailPassword",type:"password",...R.register("password"),placeholder:""}),R.formState.errors.password&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.password.message})]}),s.jsxs(rv,{children:[s.jsx(J,{type:"button",variant:"outline",onClick:()=>N(!1),children:"Annuler"}),s.jsxs(J,{type:"submit",disabled:c,children:[c?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(s_,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Mc,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernire modification : il y a 30 jours"}),s.jsxs(da,{open:p,onOpenChange:g,children:[s.jsx(fd,{asChild:!0,children:s.jsx(J,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),s.jsxs(Ci,{children:[s.jsxs(ha,{children:[s.jsx(ki,{children:"Changer le mot de passe"}),s.jsx(xc,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),s.jsxs("form",{onSubmit:q.handleSubmit(k),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),s.jsx(Ge,{id:"currentPassword",type:"password",...q.register("currentPassword"),placeholder:""}),q.formState.errors.currentPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.currentPassword.message})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),s.jsx(Ge,{id:"newPassword",type:"password",...q.register("newPassword"),placeholder:""}),q.formState.errors.newPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.newPassword.message})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),s.jsx(Ge,{id:"confirmPassword",type:"password",...q.register("confirmPassword"),placeholder:""}),q.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.confirmPassword.message})]}),s.jsxs(rv,{children:[s.jsx(J,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Annuler"}),s.jsxs(J,{type:"submit",disabled:c,children:[c?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx($G,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),s.jsx(Zs,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Vrification du compte"}),s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vrifi":"Vrification en attente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut tudiant a t vrifi":"Votre statut tudiant est en cours de vrification"})]})]}),e!=null&&e.isVerified?s.jsxs(at,{className:"bg-green-100 text-green-800",children:[s.jsx(Pt,{className:"w-3 h-3 mr-1"}),"Vrifi"]}):s.jsx(at,{variant:"outline",children:"En attente"})]})})]}),s.jsxs($t,{children:[s.jsx(zt,{className:"h-4 w-4"}),s.jsx(Bt,{children:"Pour votre scurit, nous vous recommandons d'utiliser un mot de passe fort et de le changer rgulirement."})]})]})]})}),s.jsxs(ln,{value:"data",className:"space-y-6",children:[s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(ti,{className:"w-5 h-5"}),"Gestion des donnes"]}),s.jsx(Ct,{children:"Exportez ou supprimez vos donnes personnelles"})]}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Exporter mes donnes"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Tlchargez une copie de toutes vos donnes StudyMarket au format JSON."}),s.jsxs(J,{onClick:P,disabled:c,variant:"outline",children:[c?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(ti,{className:"w-4 h-4 mr-2"}),"Exporter mes donnes"]})]}),s.jsx(Zs,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),s.jsxs($t,{className:"border-destructive",children:[s.jsx(In,{className:"h-4 w-4"}),s.jsx(Bt,{children:"La suppression de votre compte est irrversible. Toutes vos donnes seront dfinitivement supprimes."})]}),s.jsxs(da,{open:d,onOpenChange:f,children:[s.jsx(fd,{asChild:!0,children:s.jsxs(J,{variant:"destructive",children:[s.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),s.jsxs(Ci,{children:[s.jsxs(ha,{children:[s.jsx(ki,{className:"text-destructive",children:"Supprimer dfinitivement le compte"}),s.jsxs(xc,{children:["Cette action est irrversible. Toutes vos donnes seront supprimes :",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"Profil utilisateur"}),s.jsx("li",{children:"Toutes vos annonces"}),s.jsx("li",{children:"Conversations et messages"}),s.jsx("li",{children:"Avis et valuations"}),s.jsx("li",{children:"Favoris et recherches sauvegardes"})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),s.jsx(Ge,{id:"deleteConfirm",value:b,onChange:B=>S(B.target.value),placeholder:"SUPPRIMER"})]})}),s.jsxs(rv,{children:[s.jsx(J,{variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsxs(J,{variant:"destructive",onClick:D,disabled:b!=="SUPPRIMER"||c,children:[c?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Supprimer dfinitivement"]})]})]})]})]})]})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Jv,{className:"w-5 h-5"}),"Informations lgales"]})}),s.jsx(me,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(J,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(hs,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),s.jsx(J,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(hs,{className:"w-4 h-4"}),"Politique de confidentialit"]})}),s.jsx(J,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(hs,{className:"w-4 h-4"}),"Politique des cookies"]})}),s.jsx(J,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(hs,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez tre connect pour accder aux paramtres."})})})})};var tS="Progress",nS=100,[woe,Xue]=Sr(tS),[boe,joe]=woe(tS),_5=x.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=Noe,...o}=t;(i||i===0)&&!oT(i)&&console.error(Soe(`${i}`,"Progress"));const c=oT(i)?i:nS;r!==null&&!lT(r,c)&&console.error(Eoe(`${r}`,"Progress"));const u=lT(r,c)?r:null,d=Nx(u)?a(u,c):void 0;return s.jsx(boe,{scope:n,value:u,max:c,children:s.jsx(Ze.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Nx(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":j5(u,c),"data-value":u??void 0,"data-max":c,...o,ref:e})})});_5.displayName=tS;var w5="ProgressIndicator",b5=x.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=joe(w5,n);return s.jsx(Ze.div,{"data-state":j5(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});b5.displayName=w5;function Noe(t,e){return`${Math.round(t/e*100)}%`}function j5(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Nx(t){return typeof t=="number"}function oT(t){return Nx(t)&&!isNaN(t)&&t>0}function lT(t,e){return Nx(t)&&!isNaN(t)&&t<=e&&t>=0}function Soe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${nS}\`.`}function Eoe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${nS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var N5=_5,Coe=b5;const S5=x.forwardRef(({className:t,value:e,...n},r)=>s.jsx(N5,{ref:r,className:st("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:s.jsx(Coe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));S5.displayName=N5.displayName;const Ql={electronics:{category:"lectronique",icon:Zc,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:U4,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:tx,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, dco, lectromnager"},clothing:{category:"Vtements",icon:eN,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vtements, chaussures, accessoires"}},koe=[{id:"first_transaction",name:"Premier Pas",icon:"",threshold:1,description:"Premire transaction cologique"},{id:"co2_saver_10",name:"co-Warrior",icon:"",threshold:10,description:"10 kg CO conomiss"},{id:"co2_saver_50",name:"Plante Protecteur",icon:"",threshold:50,description:"50 kg CO conomiss"},{id:"co2_saver_100",name:"Hros Climatique",icon:"",threshold:100,description:"100 kg CO conomiss"},{id:"water_saver",name:"Gardien de l'Eau",icon:"",threshold:1e3,description:"1000L d'eau conomiss"},{id:"recycling_master",name:"Matre du Recyclage",icon:"",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"",threshold:10,description:"10 transactions en un mois"}],Ru=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Toe=()=>{const{currentUser:t,userProfile:e}=mn(),[n,r]=x.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Dbutant",percentile:0}),[i,a]=x.useState([]),[o,c]=x.useState(!0),[u,d]=x.useState("all");x.useEffect(()=>{t&&f()},[t,u]);const f=async()=>{if(t){c(!0);try{const y=_n(Vt(Ue,"listings"),Xn("sellerId","==",t.uid)),E=await Fn(y),A=[];E.forEach(q=>{const R=q.data();A.push({id:q.id,...R,createdAt:Ru(R.createdAt),updatedAt:Ru(R.updatedAt)})}),a(A);const O=p(A,u);r(O),await b(O)}catch(y){console.error("Erreur lors du chargement des donnes environnementales:",y)}finally{c(!1)}}},p=(y,E)=>{const A=new Date;let O=y;if(E==="month"){const ee=new Date(A.getFullYear(),A.getMonth()-1,A.getDate());O=y.filter(Z=>Ru(Z.createdAt)>=ee)}else if(E==="year"){const ee=new Date(A.getFullYear()-1,A.getMonth(),A.getDate());O=y.filter(Z=>Ru(Z.createdAt)>=ee)}let q=0,R=0,V=0,U=0;const k={};O.forEach(ee=>{const Z=Ql[ee.category]||Ql.electronics,K=1;let I=1;ee.transactionType==="donation"?I=1.2:ee.transactionType==="exchange"&&(I=.8),q+=Z.co2PerItem*K*I,R+=Z.waterPerItem*K*I,V+=Z.energyPerItem*K*I,U+=Z.wastePerItem*K*I,k[ee.category]=(k[ee.category]||0)+1});const F=g(y),D=_(y,q,R),{rank:P,percentile:H}=N(q,y.length);return{totalCo2Saved:Math.round(q*10)/10,totalWaterSaved:Math.round(R),totalEnergySaved:Math.round(V*10)/10,totalWasteAvoided:Math.round(U*10)/10,transactionsByCategory:k,monthlyImpact:F,badges:D,rank:P,percentile:H}},g=y=>{const E={};for(let A=11;A>=0;A--){const O=new Date;O.setMonth(O.getMonth()-A);const q=O.toISOString().slice(0,7);E[q]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return y.forEach(A=>{const q=Ru(A.createdAt).toISOString().slice(0,7);if(E[q]){const R=Ql[A.category]||Ql.electronics;let V=1;A.transactionType==="donation"?V=1.2:A.transactionType==="exchange"&&(V=.8),E[q].co2Saved+=R.co2PerItem*V,E[q].waterSaved+=R.waterPerItem*V,E[q].energySaved+=R.energyPerItem*V,E[q].transactions+=1}}),Object.entries(E).map(([A,O])=>({month:A,co2Saved:Math.round(O.co2Saved*10)/10,transactions:O.transactions,waterSaved:Math.round(O.waterSaved),energySaved:Math.round(O.energySaved*10)/10}))},_=(y,E,A)=>{const O=[];y.length>=1&&O.push("first_transaction"),E>=10&&O.push("co2_saver_10"),E>=50&&O.push("co2_saver_50"),E>=100&&O.push("co2_saver_100"),A>=1e3&&O.push("water_saver"),y.length>=20&&O.push("recycling_master"),y.filter(U=>U.transactionType==="donation").length>=5&&O.push("donation_hero");const R=new Date().toISOString().slice(0,7);return y.filter(U=>Ru(U.createdAt).toISOString().slice(0,7)===R).length>=10&&O.push("monthly_champion"),O},N=(y,E)=>{let A="Dbutant",O=0;return y>=200?(A="Lgende cologique",O=95):y>=100?(A="Matre Environnemental",O=85):y>=50?(A="Expert Vert",O=70):y>=25?(A="co-Warrior",O=50):y>=10?(A="Protecteur",O=30):y>=5&&(A="Apprenti Vert",O=15),{rank:A,percentile:O}},b=async y=>{if(t)try{const E=yt(Ue,"users",t.uid);await yn(E,{co2Saved:y.totalCo2Saved,environmentalRank:y.rank,environmentalBadges:y.badges,lastEnvironmentalUpdate:new Date})}catch(E){console.error("Erreur lors de la mise  jour des donnes environnementales:",E)}},S=async()=>{const y=` Mon impact cologique sur StudyMarket :

 ${n.totalCo2Saved} kg CO conomiss
 ${n.totalWaterSaved} L d'eau prservs
 ${n.totalEnergySaved} kWh d'nergie conomiss
 Rang : ${n.rank}

Rejoignez la communaut tudiante co-responsable ! `;if(navigator.share)try{await navigator.share({title:"Mon Impact cologique - StudyMarket",text:y,url:window.location.origin})}catch{navigator.clipboard.writeText(y)}else navigator.clipboard.writeText(y)},w=()=>{const y={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:n,transactions:i.length,period:u},E=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),A=URL.createObjectURL(E),O=document.createElement("a");O.href=A,O.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,O.click(),URL.revokeObjectURL(A)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Ei,{className:"w-8 h-8 text-green-600"}),"Mon Impact cologique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Dcouvrez votre contribution  la protection de l'environnement"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{variant:"outline",onClick:S,className:"flex items-center gap-2",children:[s.jsx(wy,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(J,{variant:"outline",onClick:w,className:"flex items-center gap-2",children:[s.jsx(ti,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xs,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Priode d'analyse :"})]}),s.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette anne"},{key:"all",label:"Tout"}].map(y=>s.jsx(J,{variant:u===y.key?"default":"outline",size:"sm",onClick:()=>d(y.key),children:y.label},y.key))})]})})}),o?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((y,E)=>s.jsx(fe,{className:"animate-pulse",children:s.jsx(me,{className:"pt-6",children:s.jsx("div",{className:"h-16 bg-muted rounded"})})},E))}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(fe,{className:"border-green-200 bg-green-50/50",children:s.jsxs(me,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-700",children:n.totalCo2Saved}),s.jsx("p",{className:"text-sm text-green-600",children:"kg CO conomiss"})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ei,{className:"w-6 h-6 text-green-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-green-600",children:[" ",Math.round(n.totalCo2Saved/2.3)," km en voiture vits"]})]})}),s.jsx(fe,{className:"border-blue-200 bg-blue-50/50",children:s.jsxs(me,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.totalWaterSaved.toLocaleString()}),s.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau prservs"})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(PC,{className:"w-6 h-6 text-blue-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:[" ",Math.round(n.totalWaterSaved/150)," douches conomises"]})]})}),s.jsx(fe,{className:"border-yellow-200 bg-yellow-50/50",children:s.jsxs(me,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:n.totalEnergySaved}),s.jsx("p",{className:"text-sm text-yellow-600",children:"kWh conomiss"})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(ih,{className:"w-6 h-6 text-yellow-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:[" ",Math.round(n.totalEnergySaved/3.5)," jours d'lectricit"]})]})}),s.jsx(fe,{className:"border-purple-200 bg-purple-50/50",children:s.jsxs(me,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-700",children:n.totalWasteAvoided}),s.jsx("p",{className:"text-sm text-purple-600",children:"kg dchets vits"})]}),s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(YG,{className:"w-6 h-6 text-purple-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:[" ",Math.round(n.totalWasteAvoided/.5)," sacs poubelle vits"]})]})})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(V4,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang cologique"]})}),s.jsxs(me,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-primary",children:n.rank}),s.jsxs("p",{className:"text-muted-foreground",children:["Vous tes dans le top ",100-n.percentile,"% des utilisateurs"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl",children:""}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),s.jsx(S5,{value:n.percentile,className:"h-3"}),s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[s.jsx("span",{children:"Dbutant"}),s.jsx("span",{children:"Lgende cologique"})]})]})]}),s.jsxs(eu,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-4",children:[s.jsx(on,{value:"overview",children:"Vue d'ensemble"}),s.jsx(on,{value:"categories",children:"Par catgorie"}),s.jsx(on,{value:"badges",children:"Badges"}),s.jsx(on,{value:"methodology",children:"Mthodologie"})]}),s.jsxs(ln,{value:"overview",className:"space-y-6",children:[s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(H4,{className:"w-5 h-5"}),"volution Mensuelle"]}),s.jsx(Ct,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),s.jsx(me,{children:s.jsx("div",{className:"space-y-4",children:n.monthlyImpact.slice(-6).map((y,E)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"font-medium",children:new Date(y.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),s.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[y.co2Saved," kg"]}),s.jsx("div",{className:"text-muted-foreground",children:"CO"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-blue-600",children:[y.waterSaved," L"]}),s.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-primary",children:y.transactions}),s.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},y.month))})})]}),s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(K4,{className:"w-5 h-5"}),"quivalences Concrtes"]}),s.jsx(Ct,{children:"Votre impact traduit en quivalences du quotidien"})]}),s.jsx(me,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[s.jsx(W4,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/2.3)," km"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture vits"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[s.jsx(nK,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/22)," arbres"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"plants (quivalent CO)"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[s.jsx(FG,{className:"w-8 h-8 text-yellow-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalEnergySaved/24)," jours"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation lectrique"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[s.jsx(PC,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalWaterSaved/150)," douches"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes conomises"})]})]})]})})]})]}),s.jsx(ln,{value:"categories",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(vn,{className:"w-5 h-5"}),"Impact par Catgorie"]}),s.jsx(Ct,{children:"Dtail de votre impact selon les types d'objets changs"})]}),s.jsx(me,{children:s.jsx("div",{className:"space-y-4",children:Object.entries(n.transactionsByCategory).map(([y,E])=>{const A=Ql[y]||Ql.electronics,O=A.icon,q=E*A.co2PerItem;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx(O,{className:`w-5 h-5 ${A.color}`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:A.category}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[E," transaction",E>1?"s":""]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(q*10)/10," kg CO"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(E*A.waterPerItem)," L eau"]})]})]},y)})})})]})}),s.jsx(ln,{value:"badges",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(eb,{className:"w-5 h-5"}),"Badges cologiques"]}),s.jsx(Ct,{children:"Vos rcompenses pour votre engagement environnemental"})]}),s.jsx(me,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:koe.map(y=>{const E=n.badges.includes(y.id);return s.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${E?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl mb-2",children:y.icon}),s.jsx("h3",{className:`font-semibold ${E?"text-green-800":"text-gray-600"}`,children:y.name}),s.jsx("p",{className:`text-sm ${E?"text-green-600":"text-gray-500"}`,children:y.description}),E&&s.jsx(at,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},y.id)})})})]})}),s.jsx(ln,{value:"methodology",className:"space-y-6",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(yl,{className:"w-5 h-5"}),"Mthodologie de Calcul"]}),s.jsx(Ct,{children:"Comment nous calculons votre impact environnemental"})]}),s.jsxs(me,{className:"space-y-6",children:[s.jsxs($t,{children:[s.jsx(yl,{className:"h-4 w-4"}),s.jsx(Bt,{children:"Nos calculs sont bass sur des tudes scientifiques et des donnes de l'ADEME (Agence de l'Environnement et de la Matrise de l'nergie)."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),s.jsx("p",{className:"text-muted-foreground",children:"Chaque objet achet d'occasion vite la production d'un objet neuf. Nous calculons l'impact environnemental vit en nous basant sur l'empreinte carbone, hydrique et nergtique de la production de chaque catgorie d'objets."}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catgorie"}),s.jsx("div",{className:"space-y-3",children:Object.entries(Ql).map(([y,E])=>{const A=E.icon;return s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(A,{className:`w-4 h-4 ${E.color}`}),s.jsx("span",{className:"font-medium",children:E.category})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"CO:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[E.co2PerItem," kg"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[E.waterPerItem," L"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"nergie:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[E.energyPerItem," kWh"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Dchets:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[E.wastePerItem," kg"]})]})]})]},y)})}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondration"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ad,{className:"w-4 h-4 text-green-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(so,{className:"w-4 h-4 text-purple-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"changes/Troc :"})," -20% d'impact (pas de transaction montaire)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vn,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),s.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Rfrences"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:" ADEME - Base Carbone pour les facteurs d'mission"}),s.jsx("li",{children:" Water Footprint Network pour l'empreinte hydrique"}),s.jsx("li",{children:" IEA (International Energy Agency) pour l'nergie"}),s.jsx("li",{children:" Ellen MacArthur Foundation pour l'conomie circulaire"})]})]})]})]})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(Ei,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),s.jsx("p",{className:"text-muted-foreground",children:"Dcouvrez combien vous contribuez  la protection de l'environnement"})]})})})},kg=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Sx=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(Sx).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=Sx(t[n]);r!==void 0&&(e[n]=r)}),e}return t},cT=[{value:"all",label:"Toutes catgories"},{value:"electronics",label:"lectronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],uT=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"change"},{value:"service",label:"Service"}],Poe=[{value:"all",label:"Toutes universits"},{value:"sorbonne",label:"Sorbonne Universit"},{value:"dauphine",label:"Universit Paris-Dauphine"},{value:"polytechnique",label:"cole Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSuplec"}],Ioe=()=>{const{currentUser:t,userProfile:e}=mn(),[n,r]=x.useState([]),[i,a]=x.useState([]),[o,c]=x.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[u,d]=x.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[f,p]=x.useState(!1),[g,_]=x.useState(null),[N,b]=x.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});x.useEffect(()=>{t&&(S(),w())},[t]);const S=async()=>{if(t)try{d(H=>({...H,searches:!0}));const k=_n(Vt(Ue,"savedSearches"),Xn("userId","==",t.uid),ei(50)),F=await Fn(k),D=[];F.forEach(H=>{const ee=H.data();D.push({id:H.id,...ee,createdAt:kg(ee.createdAt),updatedAt:kg(ee.updatedAt),lastNotified:ee.lastNotified?kg(ee.lastNotified):void 0})}),D.sort((H,ee)=>ee.createdAt.getTime()-H.createdAt.getTime()),r(D);const P=D.filter(H=>H.alertsEnabled).length;c(H=>({...H,totalSearches:D.length,activeAlerts:P}))}catch(k){console.error("Erreur lors du chargement des recherches sauvegardes:",k),xe.error("Erreur lors du chargement des recherches sauvegardes")}finally{d(k=>({...k,searches:!1}))}},w=async()=>{if(t)try{d(H=>({...H,matches:!0}));const k=_n(Vt(Ue,"alertMatches"),Xn("userId","==",t.uid),ei(100)),F=await Fn(k),D=[];F.forEach(H=>{const ee=H.data();D.push({id:H.id,...ee,matchedAt:kg(ee.matchedAt)})}),D.sort((H,ee)=>ee.matchedAt.getTime()-H.matchedAt.getTime()),a(D);const P=D.filter(H=>!H.seen).length;c(H=>({...H,totalMatches:D.length,newMatches:P}))}catch(k){console.error("Erreur lors du chargement des correspondances:",k),xe.error("Erreur lors du chargement des correspondances")}finally{d(k=>({...k,matches:!1}))}},y=async()=>{if(!t||!N.name.trim()){xe.error("Veuillez remplir le nom de la recherche");return}d(k=>({...k,creating:!0}));try{const k={};if(N.query&&N.query.trim()&&(k.query=N.query.trim()),N.category&&N.category!=="all"&&(k.category=N.category),N.transactionType&&N.transactionType!=="all"&&(k.transactionType=N.transactionType),N.university&&N.university!=="all"&&(k.university=N.university),N.minPrice&&N.minPrice.trim()){const P=parseFloat(N.minPrice);!isNaN(P)&&P>=0&&(k.minPrice=P)}if(N.maxPrice&&N.maxPrice.trim()){const P=parseFloat(N.maxPrice);!isNaN(P)&&P>=0&&(k.maxPrice=P)}const F={userId:t.uid,name:N.name.trim(),filters:k,alertsEnabled:N.alertsEnabled,notificationFrequency:N.notificationFrequency,notificationMethods:{email:N.notificationMethods.email,push:N.notificationMethods.push,sms:N.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},D=Sx(F);await xl(Vt(Ue,"savedSearches"),D),xe.success("Alerte cre avec succs !"),p(!1),R(),S()}catch(k){console.error("Erreur lors de la cration de l'alerte:",k),xe.error("Erreur lors de la cration de l'alerte")}finally{d(k=>({...k,creating:!1}))}},E=async(k,F)=>{try{d(P=>({...P,updating:!0}));const D=Sx({...F,updatedAt:new Date});await yn(yt(Ue,"savedSearches",k),D),xe.success("Recherche mise  jour !"),S()}catch(D){console.error("Erreur lors de la mise  jour:",D),xe.error("Erreur lors de la mise  jour")}finally{d(D=>({...D,updating:!1}))}},A=async k=>{if(window.confirm("tes-vous sr de vouloir supprimer cette recherche sauvegarde ?"))try{await Td(yt(Ue,"savedSearches",k)),xe.success("Recherche supprime !"),S()}catch(F){console.error("Erreur lors de la suppression:",F),xe.error("Erreur lors de la suppression")}},O=async(k,F)=>{await E(k,{alertsEnabled:F})},q=async k=>{try{await yn(yt(Ue,"alertMatches",k),{seen:!0,seenAt:new Date}),w()}catch(F){console.error("Erreur lors du marquage comme vu:",F)}},R=()=>{b({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),_(null)},V=k=>{try{return fh(k,{addSuffix:!0,locale:Dr})}catch{return"Date inconnue"}},U=k=>{const F=[];if(k.query&&F.push(`"${k.query}"`),k.category&&k.category!=="all"){const D=cT.find(P=>P.value===k.category);D&&F.push(D.label)}if(k.transactionType&&k.transactionType!=="all"){const D=uT.find(P=>P.value===k.transactionType);D&&F.push(D.label)}return k.minPrice!==void 0&&F.push(` ${k.minPrice}`),k.maxPrice!==void 0&&F.push(` ${k.maxPrice}`),F.length>0?F.join("  "):"Tous les critres"};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(yi,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Grez vos recherches sauvegardes et recevez des notifications"})]}),s.jsxs(da,{open:f,onOpenChange:p,children:[s.jsx(fd,{asChild:!0,children:s.jsxs(J,{className:"bg-gradient-to-r from-primary to-secondary",children:[s.jsx(gc,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),s.jsxs(Ci,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(ha,{children:[s.jsxs(ki,{className:"flex items-center gap-2",children:[s.jsx(Zl,{className:"w-5 h-5"}),"Crer une Alerte Personnalise"]}),s.jsx(xc,{children:"Dfinissez vos critres de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),s.jsx(Ge,{id:"alert-name",value:N.name,onChange:k=>b(F=>({...F,name:k.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(yy,{className:"w-4 h-4"}),"Critres de Recherche"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"search-query",children:"Mots-cls"}),s.jsx(Ge,{id:"search-query",value:N.query,onChange:k=>b(F=>({...F,query:k.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"search-category",children:"Catgorie"}),s.jsxs(tn,{value:N.category,onValueChange:k=>b(F=>({...F,category:k})),children:[s.jsx(Ht,{className:"mt-1",children:s.jsx(nn,{})}),s.jsx(Gt,{children:cT.map(k=>s.jsx(Ke,{value:k.value,children:k.label},k.value))})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"transaction-type",children:"Type de transaction"}),s.jsxs(tn,{value:N.transactionType,onValueChange:k=>b(F=>({...F,transactionType:k})),children:[s.jsx(Ht,{className:"mt-1",children:s.jsx(nn,{})}),s.jsx(Gt,{children:uT.map(k=>s.jsx(Ke,{value:k.value,children:k.label},k.value))})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"search-university",children:"Universit"}),s.jsxs(tn,{value:N.university,onValueChange:k=>b(F=>({...F,university:k})),children:[s.jsx(Ht,{className:"mt-1",children:s.jsx(nn,{})}),s.jsx(Gt,{children:Poe.map(k=>s.jsx(Ke,{value:k.value,children:k.label},k.value))})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"min-price",children:"Prix minimum ()"}),s.jsx(Ge,{id:"min-price",type:"number",value:N.minPrice,onChange:k=>b(F=>({...F,minPrice:k.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"max-price",children:"Prix maximum ()"}),s.jsx(Ge,{id:"max-price",type:"number",value:N.maxPrice,onChange:k=>b(F=>({...F,maxPrice:k.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(yi,{className:"w-4 h-4"}),"Notifications"]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),s.jsx(rr,{id:"alerts-enabled",checked:N.alertsEnabled,onCheckedChange:k=>b(F=>({...F,alertsEnabled:k}))})]}),N.alertsEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Ie,{children:"Frquence des notifications"}),s.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantan",description:"Ds qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un rsum par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un rsum par semaine"}].map(k=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:k.value,name:"frequency",value:k.value,checked:N.notificationFrequency===k.value,onChange:F=>b(D=>({...D,notificationFrequency:F.target.value})),className:"rounded border-border"}),s.jsx(Ie,{htmlFor:k.value,className:"cursor-pointer",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:k.label}),s.jsx("div",{className:"text-sm text-muted-foreground",children:k.description})]})})]},k.value))})]}),s.jsxs("div",{children:[s.jsx(Ie,{children:"Mthodes de notification"}),s.jsxs("div",{className:"mt-2 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vs,{className:"w-4 h-4 text-blue-600"}),s.jsx(Ie,{htmlFor:"email-notifications",children:"Email"})]}),s.jsx(rr,{id:"email-notifications",checked:N.notificationMethods.email,onCheckedChange:k=>b(F=>({...F,notificationMethods:{...F.notificationMethods,email:k}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yi,{className:"w-4 h-4 text-green-600"}),s.jsx(Ie,{htmlFor:"push-notifications",children:"Notifications push"})]}),s.jsx(rr,{id:"push-notifications",checked:N.notificationMethods.push,onCheckedChange:k=>b(F=>({...F,notificationMethods:{...F.notificationMethods,push:k}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(IC,{className:"w-4 h-4 text-purple-600"}),s.jsx(Ie,{htmlFor:"sms-notifications",children:"SMS"}),s.jsx(at,{variant:"outline",className:"text-xs",children:"Bientt"})]}),s.jsx(rr,{id:"sms-notifications",checked:N.notificationMethods.sms,onCheckedChange:k=>b(F=>({...F,notificationMethods:{...F.notificationMethods,sms:k}})),disabled:!0})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(J,{variant:"outline",onClick:()=>p(!1),children:"Annuler"}),s.jsx(J,{onClick:y,disabled:u.creating||!N.name.trim(),children:u.creating?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Cration..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Zl,{className:"w-4 h-4 mr-2"}),"Crer l'alerte"]})})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauves"})]}),s.jsx(_r,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),s.jsx(yi,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),s.jsx(Zl,{className:"w-8 h-8 text-purple-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.newMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),s.jsx(ih,{className:"w-8 h-8 text-orange-600"})]})})})]}),s.jsxs(eu,{defaultValue:"searches",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-2",children:[s.jsxs(on,{value:"searches",className:"flex items-center gap-2",children:[s.jsx(_r,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsxs(on,{value:"matches",className:"flex items-center gap-2",children:[s.jsx(Zl,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&s.jsx(at,{className:"ml-1 bg-orange-500",children:o.newMatches})]})]}),s.jsx(ln,{value:"searches",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Jj,{className:"w-5 h-5"}),"Recherches Sauvegardes"]}),s.jsx(Ct,{children:"Grez vos alertes et critres de recherche personnaliss"})]}),s.jsx(me,{children:u.searches?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((k,F)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},F))}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(_r,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegarde"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Crez votre premire alerte pour tre notifi des nouvelles annonces"}),s.jsxs(J,{onClick:()=>p(!0),children:[s.jsx(gc,{className:"w-4 h-4 mr-2"}),"Crer ma premire alerte"]})]}):s.jsx("div",{className:"space-y-4",children:n.map(k=>s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold",children:k.name}),k.alertsEnabled?s.jsxs(at,{className:"bg-green-100 text-green-800",children:[s.jsx(yi,{className:"w-3 h-3 mr-1"}),"Actif"]}):s.jsxs(at,{variant:"secondary",children:[s.jsx(AC,{className:"w-3 h-3 mr-1"}),"Paus"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:U(k.filters)}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Xs,{className:"w-3 h-3"}),"Cr ",V(k.createdAt)]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Zl,{className:"w-3 h-3"}),k.matchCount," correspondance",k.matchCount!==1?"s":""]}),k.lastNotified&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(yi,{className:"w-3 h-3"}),"Dernire alerte ",V(k.lastNotified)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"ghost",size:"icon",onClick:()=>O(k.id,!k.alertsEnabled),title:k.alertsEnabled?"Dsactiver les alertes":"Activer les alertes",children:k.alertsEnabled?s.jsx(AC,{className:"w-4 h-4"}):s.jsx(ZG,{className:"w-4 h-4"})}),s.jsx(J,{variant:"ghost",size:"icon",onClick:()=>{var F,D;_(k),b({name:k.name,query:k.filters.query||"",category:k.filters.category||"all",transactionType:k.filters.transactionType||"all",university:k.filters.university||"all",minPrice:((F=k.filters.minPrice)==null?void 0:F.toString())||"",maxPrice:((D=k.filters.maxPrice)==null?void 0:D.toString())||"",alertsEnabled:k.alertsEnabled,notificationFrequency:k.notificationFrequency,notificationMethods:k.notificationMethods}),p(!0)},title:"Modifier",children:s.jsx(XG,{className:"w-4 h-4"})}),s.jsx(J,{variant:"ghost",size:"icon",onClick:()=>A(k.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:s.jsx(Ka,{className:"w-4 h-4"})})]})]}),k.alertsEnabled&&s.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Un,{className:"w-3 h-3"}),s.jsxs("span",{children:["Frquence: ",k.notificationFrequency==="instant"?"Instantan":k.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[k.notificationMethods.email&&s.jsx(vs,{className:"w-3 h-3 text-blue-600\\",title:"Email activ"}),k.notificationMethods.push&&s.jsx(yi,{className:"w-3 h-3 text-green-600\\",title:"Push activ"}),k.notificationMethods.sms&&s.jsx(IC,{className:"w-3 h-3 text-purple-600\\",title:"SMS activ"})]})]})]},k.id))})})]})}),s.jsx(ln,{value:"matches",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Zl,{className:"w-5 h-5"}),"Correspondances Trouves"]}),s.jsx(Ct,{children:"Les annonces qui correspondent  vos critres de recherche"})]}),s.jsx(me,{children:u.matches?s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((k,F)=>s.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},F))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Zl,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore  vos critres. Les nouvelles correspondances apparatront ici."})]}):s.jsx("div",{className:"space-y-4",children:i.map(k=>s.jsx("div",{className:`border rounded-lg p-4 transition-colors ${k.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[k.listingImage?s.jsx("img",{src:k.listingImage,alt:k.listingTitle,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:k.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2",children:[!k.seen&&s.jsx(at,{className:"bg-blue-500",children:"Nouveau"}),s.jsx("span",{className:"font-semibold text-primary",children:k.listingPrice===0?"Gratuit":`${k.listingPrice}`})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Un,{className:"w-3 h-3"}),"Trouv ",V(k.matchedAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"outline",size:"sm",onClick:()=>q(k.id),disabled:k.seen,children:k.seen?s.jsxs(s.Fragment,{children:[s.jsx(Pt,{className:"w-3 h-3 mr-1"}),"Vu"]}):s.jsxs(s.Fragment,{children:[s.jsx(Id,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),s.jsxs(J,{size:"sm",onClick:()=>window.open(`/listing/${k.listingId}`,"_blank"),children:[s.jsx(hs,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},k.id))})})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(_r,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour grer vos alertes"}),s.jsx("p",{className:"text-muted-foreground",children:"Crez des alertes personnalises pour tre notifi des nouvelles annonces"})]})})})},Tg=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},dT=[{value:"all",label:"Toutes catgories",icon:vn},{value:"electronics",label:"lectronique",icon:Zc},{value:"books",label:"Livres & Cours",icon:U4},{value:"furniture",label:"Mobilier",icon:tx},{value:"clothing",label:"Vtements",icon:eN},{value:"services",label:"Services",icon:tp},{value:"housing",label:"Logement",icon:tx},{value:"jobs",label:"Jobs & Stages",icon:B4}],Aoe=[{value:"all",label:"Tous types",icon:vn},{value:"sale",label:"Vente",icon:ex},{value:"donation",label:"Don",icon:Ad},{value:"exchange",label:"change",icon:so},{value:"service",label:"Service",icon:tp}],Roe=[{value:"recent",label:"Plus rcents",icon:Un},{value:"oldest",label:"Plus anciens",icon:Xs},{value:"price-asc",label:"Prix croissant",icon:TC},{value:"price-desc",label:"Prix dcroissant",icon:F4},{value:"title",label:"Titre A-Z",icon:TC},{value:"category",label:"Par catgorie",icon:wm}],Moe=()=>{const{currentUser:t,userProfile:e}=mn(),[n,r]=x.useState([]),[i,a]=x.useState([]),[o,c]=x.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[u,d]=x.useState({favorites:!0,listings:!0,removing:!1}),[f,p]=x.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[g,_]=x.useState("recent"),[N,b]=x.useState("grid"),[S,w]=x.useState([]);x.useEffect(()=>{t&&y()},[t]),x.useEffect(()=>{n.length>0&&E()},[n]);const y=async()=>{if(t)try{d(Z=>({...Z,favorites:!0}));const P=_n(Vt(Ue,"favorites"),Xn("userId","==",t.uid),ei(100)),H=await Fn(P),ee=[];H.forEach(Z=>{const K=Z.data();ee.push({id:Z.id,...K,createdAt:Tg(K.createdAt),updatedAt:Tg(K.updatedAt)})}),ee.sort((Z,K)=>K.createdAt.getTime()-Z.createdAt.getTime()),r(ee),A(ee)}catch(P){console.error("Erreur lors du chargement des favoris:",P),xe.error("Erreur lors du chargement des favoris")}finally{d(P=>({...P,favorites:!1}))}},E=async()=>{try{d(Z=>({...Z,listings:!0}));const P=n.map(async Z=>{try{const K=await Is(yt(Ue,"listings",Z.listingId));if(K.exists()){const I=K.data();return{id:K.id,...I,createdAt:Tg(I.createdAt),updatedAt:Tg(I.updatedAt)}}return null}catch(K){return console.error(`Erreur lors du chargement de l'annonce ${Z.listingId}:`,K),null}}),ee=(await Promise.all(P)).filter(Z=>Z!==null);a(ee)}catch(P){console.error("Erreur lors du chargement des annonces favorites:",P)}finally{d(P=>({...P,listings:!1}))}},A=P=>{const H={},ee={};let Z=0,K=0;const I=new Date;I.setDate(I.getDate()-7);let z=0;P.forEach(B=>{H[B.listingCategory]=(H[B.listingCategory]||0)+1,ee[B.listingTransactionType]=(ee[B.listingTransactionType]||0)+1,B.listingPrice>0&&(Z+=B.listingPrice,K++),B.createdAt>=I&&z++}),c({totalFavorites:P.length,byCategory:H,byTransactionType:ee,averagePrice:K>0?Math.round(Z/K):0,recentlyAdded:z,availableCount:P.length,soldCount:0})},O=async P=>{try{await Td(yt(Ue,"favorites",P)),xe.success("Favori supprim"),y()}catch(H){console.error("Erreur lors de la suppression:",H),xe.error("Erreur lors de la suppression")}},q=async()=>{if(S.length!==0&&window.confirm(`Supprimer ${S.length} favori(s) slectionn(s) ?`)){d(P=>({...P,removing:!0}));try{const P=S.map(H=>Td(yt(Ue,"favorites",H)));await Promise.all(P),xe.success(`${S.length} favori(s) supprim(s)`),w([]),y()}catch(P){console.error("Erreur lors de la suppression multiple:",P),xe.error("Erreur lors de la suppression")}finally{d(P=>({...P,removing:!1}))}}},R=()=>{const P={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:n.length,favorites:n.map(K=>({title:K.listingTitle,price:K.listingPrice,category:K.listingCategory,transactionType:K.listingTransactionType,seller:K.sellerName,university:K.sellerUniversity,addedDate:K.createdAt.toISOString(),notes:K.notes||"",tags:K.tags}))},H=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),ee=URL.createObjectURL(H),Z=document.createElement("a");Z.href=ee,Z.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,Z.click(),URL.revokeObjectURL(ee)},V=async()=>{const P=` Mes favoris StudyMarket :

 ${o.totalFavorites} annonces sauvegardes
 Prix moyen : ${o.averagePrice}
 ${o.recentlyAdded} ajoutes cette semaine

Dcouvrez la marketplace tudiante ! `;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:P,url:window.location.origin})}catch{navigator.clipboard.writeText(P),xe.success("Lien copi dans le presse-papiers")}else navigator.clipboard.writeText(P),xe.success("Lien copi dans le presse-papiers")},U=()=>{let P=n;if(f.search){const H=f.search.toLowerCase();P=P.filter(ee=>ee.listingTitle.toLowerCase().includes(H)||ee.sellerName.toLowerCase().includes(H)||ee.tags.some(Z=>Z.toLowerCase().includes(H)))}if(f.category!=="all"&&(P=P.filter(H=>H.listingCategory===f.category)),f.transactionType!=="all"&&(P=P.filter(H=>H.listingTransactionType===f.transactionType)),f.priceRange!=="all")switch(f.priceRange){case"free":P=P.filter(H=>H.listingPrice===0);break;case"under-50":P=P.filter(H=>H.listingPrice>0&&H.listingPrice<50);break;case"50-200":P=P.filter(H=>H.listingPrice>=50&&H.listingPrice<=200);break;case"over-200":P=P.filter(H=>H.listingPrice>200);break}switch(g){case"recent":P.sort((H,ee)=>ee.createdAt.getTime()-H.createdAt.getTime());break;case"oldest":P.sort((H,ee)=>H.createdAt.getTime()-ee.createdAt.getTime());break;case"price-asc":P.sort((H,ee)=>H.listingPrice-ee.listingPrice);break;case"price-desc":P.sort((H,ee)=>ee.listingPrice-H.listingPrice);break;case"title":P.sort((H,ee)=>H.listingTitle.localeCompare(ee.listingTitle));break;case"category":P.sort((H,ee)=>H.listingCategory.localeCompare(ee.listingCategory));break}return P},k=P=>{try{return fh(P,{addSuffix:!0,locale:Dr})}catch{return"Date inconnue"}},F=(P,H)=>H==="donation"?"Gratuit":H==="exchange"?"change":P===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(P),D=U();return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Or,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardes"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{variant:"outline",onClick:V,className:"flex items-center gap-2",children:[s.jsx(wy,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(J,{variant:"outline",onClick:R,className:"flex items-center gap-2",children:[s.jsx(ti,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),s.jsx(Or,{className:"w-8 h-8 text-red-500"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,""]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),s.jsx(ep,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),s.jsx(ih,{className:"w-8 h-8 text-orange-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Catgories"})]}),s.jsx(wm,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{placeholder:"Rechercher dans vos favoris...",value:f.search,onChange:P=>p(H=>({...H,search:P.target.value})),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(tn,{value:g,onValueChange:_,children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{})}),s.jsx(Gt,{children:Roe.map(P=>s.jsx(Ke,{value:P.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]})},P.value))})]}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx(J,{variant:N==="grid"?"default":"ghost",size:"icon",onClick:()=>b("grid"),className:"rounded-none",children:s.jsx(Z4,{className:"w-4 h-4"})}),s.jsx(J,{variant:N==="list"?"default":"ghost",size:"icon",onClick:()=>b("list"),className:"rounded-none",children:s.jsx(X4,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(tn,{value:f.category,onValueChange:P=>p(H=>({...H,category:P})),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Catgorie"})}),s.jsx(Gt,{children:dT.map(P=>s.jsx(Ke,{value:P.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]})},P.value))})]}),s.jsxs(tn,{value:f.transactionType,onValueChange:P=>p(H=>({...H,transactionType:P})),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Type"})}),s.jsx(Gt,{children:Aoe.map(P=>s.jsx(Ke,{value:P.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]})},P.value))})]}),s.jsxs(tn,{value:f.priceRange,onValueChange:P=>p(H=>({...H,priceRange:P})),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Prix"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"all",children:"Tous les prix"}),s.jsx(Ke,{value:"free",children:"Gratuit"}),s.jsx(Ke,{value:"under-50",children:"Moins de 50"}),s.jsx(Ke,{value:"50-200",children:"50 - 200"}),s.jsx(Ke,{value:"over-200",children:"Plus de 200"})]})]}),s.jsxs(tn,{value:f.availability,onValueChange:P=>p(H=>({...H,availability:P})),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Disponibilit"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"all",children:"Toutes"}),s.jsx(Ke,{value:"available",children:"Disponibles"}),s.jsx(Ke,{value:"sold",children:"Vendues"}),s.jsx(Ke,{value:"reserved",children:"Rserves"})]})]})]}),S.length>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[S.length," favori(s) slectionn(s)"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{variant:"outline",size:"sm",onClick:()=>w([]),children:"Dslectionner"}),s.jsx(J,{variant:"destructive",size:"sm",onClick:q,disabled:u.removing,children:u.removing?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ka,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),s.jsx("div",{className:"space-y-4",children:u.favorites?s.jsx("div",{className:`grid gap-6 ${N==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((P,H)=>s.jsxs(fe,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(me,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},H))}):D.length===0?s.jsx(fe,{children:s.jsx(me,{className:"pt-12 pb-12 text-center",children:n.length===0?s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajout d'annonces  vos favoris. Explorez les annonces et cliquez sur  pour les sauvegarder !"}),s.jsx(J,{asChild:!0,children:s.jsxs("a",{href:"/listings",children:[s.jsx(_r,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(yy,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun rsultat"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond  vos critres de recherche. Essayez de modifier vos filtres."}),s.jsx(J,{variant:"outline",onClick:()=>p({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Rinitialiser les filtres"})]})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-muted-foreground",children:[D.length," favori(s) trouv(s)",D.length!==n.length&&` sur ${n.length}`]}),s.jsx(J,{variant:"outline",size:"sm",onClick:()=>{S.length===D.length?w([]):w(D.map(P=>P.id))},children:S.length===D.length?"Dslectionner tout":"Slectionner tout"})]}),N==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(P=>{const H=i.find(ee=>ee.id===P.listingId);return s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("input",{type:"checkbox",checked:S.includes(P.id),onChange:ee=>{ee.target.checked?w(Z=>[...Z,P.id]):w(Z=>Z.filter(K=>K!==P.id))},className:"w-4 h-4 rounded border-border bg-background"})}),s.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(J,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>O(P.id),children:s.jsx(Ka,{className:"w-4 h-4"})})}),H?s.jsx(Cm,{listing:H}):s.jsxs(fe,{children:[s.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(zf,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),s.jsxs(me,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-2",children:P.listingTitle}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:F(P.listingPrice,P.listingTransactionType)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajout ",k(P.createdAt)]})]})]})]},P.id)})}):s.jsx("div",{className:"space-y-4",children:D.map(P=>{var ee;const H=i.find(Z=>Z.id===P.listingId);return s.jsx(fe,{className:"hover:shadow-md transition-shadow",children:s.jsx(me,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",checked:S.includes(P.id),onChange:Z=>{Z.target.checked?w(K=>[...K,P.id]):w(K=>K.filter(I=>I!==P.id))},className:"w-4 h-4 rounded border-border"}),s.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:P.listingImage?s.jsx("img",{src:P.listingImage,alt:P.listingTitle,className:"w-full h-full object-cover rounded-lg"}):s.jsx(vn,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold truncate",children:P.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("span",{className:"font-semibold text-primary",children:F(P.listingPrice,P.listingTransactionType)}),(H==null?void 0:H.status)&&s.jsx(at,{variant:H.status==="active"?"default":"secondary",children:H.status==="active"?"Disponible":H.status==="sold"?"Vendu":"Rserv"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Jr,{className:"w-3 h-3"}),P.sellerName]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-3 h-3"}),P.sellerUniversity]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(wm,{className:"w-3 h-3"}),(ee=dT.find(Z=>Z.value===P.listingCategory))==null?void 0:ee.label]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajout ",k(P.createdAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(J,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${P.listingId}`,"_blank"),children:[s.jsx(hs,{className:"w-3 h-3 mr-1"}),"Voir"]}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>O(P.id),className:"text-destructive hover:text-destructive",children:s.jsx(Ka,{className:"w-3 h-3"})})]})]})]})]})})},P.id)})})]})})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(Or,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),s.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces prfres et retrouvez-les facilement"})]})})})},C_=({request:t,userRole:e,onStatusUpdate:n})=>{const{updatePaymentStatus:r,getPaymentInstructions:i}=Gy(),a=N=>{switch(N){case"pending":return Un;case"confirmed":return Pt;case"completed":return Pt;case"cancelled":return Pd;case"disputed":return In;default:return Un}},o=N=>{switch(N){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},c=N=>{switch(N){case"pending":return"En attente";case"confirmed":return"Confirm";case"completed":return"Termin";case"cancelled":return"Annul";case"disputed":return"Litige";default:return N}},u=N=>({cash:"Espces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[N]||N,d=(N,b)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:b||"EUR"}).format(N),f=(N,b)=>{navigator.clipboard.writeText(N),xe.success(`${b} copi dans le presse-papiers`)},p=async N=>{try{await r(t.id,N),n==null||n(N)}catch(b){console.error("Erreur lors de la mise  jour du statut:",b)}},g=a(t.status),_=i(t.paymentMethod,t);return s.jsxs(fe,{className:"w-full",children:[s.jsx(Qe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Vn,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsxs(Je,{className:"text-lg",children:["Paiement ",u(t.paymentMethod)]}),s.jsxs(Ct,{children:[d(t.amount,t.currency),"  ",e==="buyer"?"Achat":"Vente"]})]})]}),s.jsxs(at,{className:o(t.status),children:[s.jsx(g,{className:"w-3 h-3 mr-1"}),c(t.status)]})]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Cr le :"}),s.jsx("p",{className:"font-medium",children:or(t.createdAt,"PPP  HH:mm",{locale:Dr})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Dernire mise  jour :"}),s.jsx("p",{className:"font-medium",children:or(t.updatedAt,"PPP  HH:mm",{locale:Dr})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Dtails de la rencontre"]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),s.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),s.jsx("p",{className:"font-medium",children:or(t.meetingDateTime,"PPP  HH:mm",{locale:Dr})})]})]})]}),t.securityCode&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(zt,{className:"w-4 h-4"}),"Code de scurit"]}),s.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[s.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),s.jsx(J,{variant:"ghost",size:"icon",onClick:()=>f(t.securityCode,"Code de scurit"),children:s.jsx(G4,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&_.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:s.jsx("ul",{className:"space-y-1 text-sm",children:_.map((N,b)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600 mt-0.5",children:""}),s.jsx("span",{children:N})]},b))})})]}),t.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Notes"}),s.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(J,{onClick:()=>p("confirmed"),className:"flex-1",children:[s.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Accepter"]}),s.jsxs(J,{variant:"outline",onClick:()=>p("cancelled"),className:"flex-1",children:[s.jsx(Pd,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&s.jsxs(J,{onClick:()=>p("completed"),className:"flex-1",children:[s.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Marquer comme pay"]}),e==="seller"&&t.status==="confirmed"&&s.jsxs(J,{onClick:()=>p("completed"),className:"flex-1",children:[s.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Confirmer la rception"]}),(t.status==="pending"||t.status==="confirmed")&&s.jsxs(J,{variant:"outline",onClick:()=>p("disputed"),className:"text-orange-600 hover:text-orange-700",children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Signaler un problme"]})]}),t.status==="pending"&&e==="buyer"&&s.jsxs($t,{children:[s.jsx(Un,{className:"h-4 w-4"}),s.jsx(Bt,{children:"Votre demande de paiement a t envoye au vendeur. Vous recevrez une notification ds qu'il l'aura accepte."})]}),t.status==="confirmed"&&e==="buyer"&&s.jsxs($t,{className:"border-green-200 bg-green-50",children:[s.jsx(Pt,{className:"h-4 w-4 text-green-600"}),s.jsx(Bt,{className:"text-green-800",children:"Le vendeur a accept votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&s.jsxs($t,{className:"border-green-200 bg-green-50",children:[s.jsx(Pt,{className:"h-4 w-4 text-green-600"}),s.jsx(Bt,{className:"text-green-800",children:"Transaction termine avec succs ! Merci d'avoir utilis StudyMarket."})]}),t.status==="disputed"&&s.jsxs($t,{className:"border-orange-200 bg-orange-50",children:[s.jsx(In,{className:"h-4 w-4 text-orange-600"}),s.jsx(Bt,{className:"text-orange-800",children:"Un litige a t signal. Notre quipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},Ooe=()=>{const{currentUser:t,userProfile:e}=mn(),{paymentRequests:n,loading:r,fetchUserPaymentRequests:i,initializePaymentMethods:a}=Gy(),[o,c]=x.useState(""),[u,d]=x.useState("all"),[f,p]=x.useState("all"),[g,_]=x.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});x.useEffect(()=>{a()},[a]),x.useEffect(()=>{t&&i(t.uid)},[t,i]),x.useEffect(()=>{N()},[n]);const N=()=>{const A={},O={};let q=0;n.forEach(R=>{A[R.paymentMethod]=(A[R.paymentMethod]||0)+1,O[R.status]=(O[R.status]||0)+1,q+=R.amount}),_({totalRequests:n.length,pendingRequests:O.pending||0,completedRequests:O.completed||0,totalAmount:q,averageAmount:n.length>0?q/n.length:0,byMethod:A,byStatus:O})},b=()=>n.filter(A=>{const O=!o||A.listingId.toLowerCase().includes(o.toLowerCase())||A.id.toLowerCase().includes(o.toLowerCase()),q=u==="all"||A.status===u,R=f==="all"||A.paymentMethod===f;return O&&q&&R}),S=()=>b().filter(A=>A.buyerId===(t==null?void 0:t.uid)),w=()=>b().filter(A=>A.sellerId===(t==null?void 0:t.uid)),y=A=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(A),E=()=>{const A={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:g,payments:n.map(V=>({id:V.id,amount:V.amount,currency:V.currency,method:V.paymentMethod,status:V.status,role:V.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:V.createdAt.toISOString(),updatedAt:V.updatedAt.toISOString()}))},O=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),q=URL.createObjectURL(O),R=document.createElement("a");R.href=q,R.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,R.click(),URL.revokeObjectURL(q)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(sK,{className:"w-8 h-8 text-primary"}),"Mes Paiements",g.totalRequests>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:g.totalRequests})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Grez vos demandes de paiement et suivez vos transactions"})]}),s.jsxs(J,{variant:"outline",onClick:E,className:"flex items-center gap-2",children:[s.jsx(ti,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.totalRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),s.jsx(Vn,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.pendingRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),s.jsx(Un,{className:"w-8 h-8 text-orange-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.completedRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Termines"})]}),s.jsx(Pt,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:y(g.totalAmount)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),s.jsx(ep,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:A=>c(A.target.value),className:"pl-10"})]}),s.jsxs(tn,{value:u,onValueChange:d,children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{placeholder:"Statut"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"all",children:"Tous les statuts"}),s.jsx(Ke,{value:"pending",children:"En attente"}),s.jsx(Ke,{value:"confirmed",children:"Confirm"}),s.jsx(Ke,{value:"completed",children:"Termin"}),s.jsx(Ke,{value:"cancelled",children:"Annul"}),s.jsx(Ke,{value:"disputed",children:"Litige"})]})]}),s.jsxs(tn,{value:f,onValueChange:p,children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{placeholder:"Mthode"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"all",children:"Toutes les mthodes"}),s.jsx(Ke,{value:"cash",children:"Espces"}),s.jsx(Ke,{value:"transfer",children:"Virement"}),s.jsx(Ke,{value:"paypal",children:"PayPal"}),s.jsx(Ke,{value:"lydia",children:"Lydia"})]})]})]})})}),s.jsxs(eu,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-3",children:[s.jsxs(on,{value:"all",className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-4 h-4"}),"Toutes",g.totalRequests>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:g.totalRequests})]}),s.jsxs(on,{value:"purchases",className:"flex items-center gap-2",children:[s.jsx(r_,{className:"w-4 h-4"}),"Mes achats",S().length>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:S().length})]}),s.jsxs(on,{value:"sales",className:"flex items-center gap-2",children:[s.jsx(n_,{className:"w-4 h-4"}),"Mes ventes",w().length>0&&s.jsx(at,{variant:"secondary\\",className:"ml-1",children:w().length})]})]}),s.jsx(ln,{value:"all",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(H4,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),s.jsx(Ct,{children:"Historique complet de vos transactions"})]}),s.jsx(me,{children:r?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((A,O)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},O))}):b().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),s.jsx("p",{className:"text-muted-foreground",children:n.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond  vos critres de recherche."})]}):s.jsx("div",{className:"space-y-4",children:b().map(A=>s.jsx(C_,{request:A,userRole:A.buyerId===t.uid?"buyer":"seller"},A.id))})})]})}),s.jsx(ln,{value:"purchases",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(r_,{className:"w-5 h-5"}),"Mes Achats"]}),s.jsx(Ct,{children:"Demandes de paiement que vous avez inities"})]}),s.jsx(me,{children:S().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(r_,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initi de demandes de paiement pour vos achats."})]}):s.jsx("div",{className:"space-y-4",children:S().map(A=>s.jsx(C_,{request:A,userRole:"buyer"},A.id))})})]})}),s.jsx(ln,{value:"sales",className:"space-y-4",children:s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(n_,{className:"w-5 h-5"}),"Mes Ventes"]}),s.jsx(Ct,{children:"Demandes de paiement reues pour vos annonces"})]}),s.jsx(me,{children:w().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(n_,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reu de demandes de paiement pour vos annonces."})]}):s.jsx("div",{className:"space-y-4",children:w().map(A=>s.jsx(C_,{request:A,userRole:"seller"},A.id))})})]})})]}),s.jsxs($t,{className:"border-blue-200 bg-blue-50",children:[s.jsx(zt,{className:"h-4 w-4 text-blue-600"}),s.jsxs(Bt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Conseils de scurit :"})," Ne communiquez jamais vos informations bancaires par message priv. Utilisez uniquement les canaux scuriss de StudyMarket pour vos transactions."]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(Vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),s.jsx("p",{className:"text-muted-foreground",children:"Grez vos demandes de paiement et suivez vos transactions"})]})})})};var t0="Collapsible",[Doe,E5]=Sr(t0),[Loe,rS]=Doe(t0),C5=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...c}=t,[u,d]=Os({prop:r,defaultProp:i??!1,onChange:o,caller:t0});return s.jsx(Loe,{scope:n,disabled:a,contentId:As(),open:u,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),children:s.jsx(Ze.div,{"data-state":iS(u),"data-disabled":a?"":void 0,...c,ref:e})})});C5.displayName=t0;var k5="CollapsibleTrigger",T5=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=rS(k5,n);return s.jsx(Ze.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":iS(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:Oe(t.onClick,i.onOpenToggle)})});T5.displayName=k5;var sS="CollapsibleContent",P5=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=rS(sS,t.__scopeCollapsible);return s.jsx(Er,{present:n||i.open,children:({present:a})=>s.jsx(Foe,{...r,ref:e,present:a})})});P5.displayName=sS;var Foe=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...a}=t,o=rS(sS,n),[c,u]=x.useState(r),d=x.useRef(null),f=ht(e,d),p=x.useRef(0),g=p.current,_=x.useRef(0),N=_.current,b=o.open||c,S=x.useRef(b),w=x.useRef(void 0);return x.useEffect(()=>{const y=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(y)},[]),Bn(()=>{const y=d.current;if(y){w.current=w.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const E=y.getBoundingClientRect();p.current=E.height,_.current=E.width,S.current||(y.style.transitionDuration=w.current.transitionDuration,y.style.animationName=w.current.animationName),u(r)}},[o.open,r]),s.jsx(Ze.div,{"data-state":iS(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!b,...a,ref:f,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":N?`${N}px`:void 0,...t.style},children:b&&i})});function iS(t){return t?"open":"closed"}var Voe=C5,zoe=T5,Uoe=P5,Li="Accordion",$oe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[aS,Boe,qoe]=np(Li),[n0,Jue]=Sr(Li,[qoe,E5]),oS=E5(),I5=Le.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,a=r;return s.jsx(aS.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?s.jsx(Koe,{...a,ref:e}):s.jsx(Goe,{...i,ref:e})})});I5.displayName=Li;var[A5,Woe]=n0(Li),[R5,Hoe]=n0(Li,{collapsible:!1}),Goe=Le.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:a=!1,...o}=t,[c,u]=Os({prop:n,defaultProp:r??"",onChange:i,caller:Li});return s.jsx(A5,{scope:t.__scopeAccordion,value:Le.useMemo(()=>c?[c]:[],[c]),onItemOpen:u,onItemClose:Le.useCallback(()=>a&&u(""),[a,u]),children:s.jsx(R5,{scope:t.__scopeAccordion,collapsible:a,children:s.jsx(M5,{...o,ref:e})})})}),Koe=Le.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...a}=t,[o,c]=Os({prop:n,defaultProp:r??[],onChange:i,caller:Li}),u=Le.useCallback(f=>c((p=[])=>[...p,f]),[c]),d=Le.useCallback(f=>c((p=[])=>p.filter(g=>g!==f)),[c]);return s.jsx(A5,{scope:t.__scopeAccordion,value:o,onItemOpen:u,onItemClose:d,children:s.jsx(R5,{scope:t.__scopeAccordion,collapsible:!0,children:s.jsx(M5,{...a,ref:e})})})}),[Zoe,r0]=n0(Li),M5=Le.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:a="vertical",...o}=t,c=Le.useRef(null),u=ht(c,e),d=Boe(n),p=Yc(i)==="ltr",g=Oe(t.onKeyDown,_=>{var V;if(!$oe.includes(_.key))return;const N=_.target,b=d().filter(U=>{var k;return!((k=U.ref.current)!=null&&k.disabled)}),S=b.findIndex(U=>U.ref.current===N),w=b.length;if(S===-1)return;_.preventDefault();let y=S;const E=0,A=w-1,O=()=>{y=S+1,y>A&&(y=E)},q=()=>{y=S-1,y<E&&(y=A)};switch(_.key){case"Home":y=E;break;case"End":y=A;break;case"ArrowRight":a==="horizontal"&&(p?O():q());break;case"ArrowDown":a==="vertical"&&O();break;case"ArrowLeft":a==="horizontal"&&(p?q():O());break;case"ArrowUp":a==="vertical"&&q();break}const R=y%w;(V=b[R].ref.current)==null||V.focus()});return s.jsx(Zoe,{scope:n,disabled:r,direction:i,orientation:a,children:s.jsx(aS.Slot,{scope:n,children:s.jsx(Ze.div,{...o,"data-orientation":a,ref:u,onKeyDown:r?void 0:g})})})}),Ex="AccordionItem",[Yoe,lS]=n0(Ex),O5=Le.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,a=r0(Ex,n),o=Woe(Ex,n),c=oS(n),u=As(),d=r&&o.value.includes(r)||!1,f=a.disabled||t.disabled;return s.jsx(Yoe,{scope:n,open:d,disabled:f,triggerId:u,children:s.jsx(Voe,{"data-orientation":a.orientation,"data-state":U5(d),...c,...i,ref:e,disabled:f,open:d,onOpenChange:p=>{p?o.onItemOpen(r):o.onItemClose(r)}})})});O5.displayName=Ex;var D5="AccordionHeader",L5=Le.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=r0(Li,n),a=lS(D5,n);return s.jsx(Ze.h3,{"data-orientation":i.orientation,"data-state":U5(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:e})});L5.displayName=D5;var Mb="AccordionTrigger",F5=Le.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=r0(Li,n),a=lS(Mb,n),o=Hoe(Mb,n),c=oS(n);return s.jsx(aS.ItemSlot,{scope:n,children:s.jsx(zoe,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...c,...r,ref:e})})});F5.displayName=Mb;var V5="AccordionContent",z5=Le.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=r0(Li,n),a=lS(V5,n),o=oS(n);return s.jsx(Uoe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});z5.displayName=V5;function U5(t){return t?"open":"closed"}var Qoe=I5,Xoe=O5,Joe=L5,$5=F5,B5=z5;const ele=Qoe,q5=x.forwardRef(({className:t,...e},n)=>s.jsx(Xoe,{ref:n,className:st("border-b",t),...e}));q5.displayName="AccordionItem";const W5=x.forwardRef(({className:t,children:e,...n},r)=>s.jsx(Joe,{className:"flex",children:s.jsxs($5,{ref:r,className:st("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,s.jsx(zO,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));W5.displayName=$5.displayName;const H5=x.forwardRef(({className:t,children:e,...n},r)=>s.jsx(B5,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:st("pb-4 pt-0",t),children:e})}));H5.displayName=B5.displayName;const hT=[{category:"Compte et Inscription",icon:tp,questions:[{question:"Comment crer un compte tudiant vrifi ?",answer:'Pour crer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre systme vrifie automatiquement votre statut tudiant. Vous recevrez un badge "tudiant certifi" une fois la vrification termine.'},{question:"Pourquoi mon universit n'est pas reconnue ?",answer:"Nous ajoutons rgulirement de nouvelles universits. Si la vtre n'apparat pas, contactez-nous avec votre carte tudiante et nous l'ajouterons rapidement  notre base de donnes."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, universit, et prfrences de notification. Certaines informations ncessitent une re-vrification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autoris. Cela garantit la confiance et la scurit de notre communaut tudiante."}]},{category:"Achats et Ventes",icon:Vn,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description dtaille, prix et lieu de rencontre. Votre annonce sera visible immdiatement aprs publication.'},{question:"Quels modes de paiement sont accepts ?",answer:"Nous recommandons les paiements scuriss : espces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. vitez les paiements  distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggre une fourchette de prix base sur l'tat et la catgorie. Consultez les annonces similaires et considrez l'tat rel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se prsente pas ?",answer:"Contactez-le via notre messagerie. Si pas de rponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au srieux."}]},{category:"Scurit et Confiance",icon:zt,questions:[{question:"Comment viter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothque). Vrifiez l'identit avec la carte tudiante. Ne payez jamais  l'avance sans avoir vu l'objet. Utilisez notre systme de signalement en cas de doute."},{question:"O se rencontrer en scurit ?",answer:`Privilgiez les lieux publics de votre campus : bibliothques, halls d'entre, caftrias. vitez les parkings isols ou les domiciles privs. Certaines universits ont des "zones d'change scurises".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Dcrivez prcisment le problme. Notre quipe examine tous les signalements sous 24h et prend les mesures appropries.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de rsolution, utilisez notre service de mdiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:wn,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rdigez un message poli et prcis. Le vendeur recevra une notification email et pourra vous rpondre via notre messagerie scurise.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reoivent des notifications email mais peuvent avoir des dlais de rponse. Soyez patient (24-48h). Si pas de rponse, l'annonce est peut-tre dj vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnes ?",answer:"Oui, mais seulement aprs les premiers changes via notre messagerie. Cela nous permet de garder une trace en cas de problme et de vous protger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez dbloquer depuis vos paramtres si ncessaire.`}]},{category:"Impact cologique",icon:Or,questions:[{question:"Comment est calcul mon impact CO ?",answer:"Chaque objet achet d'occasion vite la production d'un neuf. Nous calculons le CO conomis selon des donnes ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges cologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1re transaction), "co-Warrior" (10kg CO), "Hros Climatique" (100kg CO). Ils apparaissent sur votre profil et motivent la communaut.'},{question:"Comment amliorer mon rang cologique ?",answer:"Multipliez les transactions d'occasion, privilgiez les dons (bonus +20%), participez aux changes. Plus vous conomisez de CO, plus votre rang augmente : Dbutant  co-Warrior  Matre Environnemental  Lgende cologique."}]},{category:"Technique et Bugs",icon:_y,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vrifiez votre connexion internet. Si le problme persiste, contactez-nous avec votre navigateur et systme d'exploitation."},{question:"Je ne reois pas les notifications email",answer:'Vrifiez vos spams/courriers indsirables. Ajoutez notifications@studymarket.fr  vos contacts. Vrifiez vos prfrences de notification dans "Paramtres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vrifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous tes sur mobile, autorisez l'accs  la galerie dans les paramtres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramtres" > "Compte" > "Supprimer mon compte". Cette action est irrversible et supprime toutes vos donnes. Vos annonces actives seront automatiquement retires.'}]}],tle=[{title:"Chat en direct",description:"Rponse immdiate pendant les heures ouvrables",icon:wn,action:"Dmarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Rponse sous 24h maximum",icon:vs,action:"support@studymarket.fr",available:!0,hours:"24h/7j"},{title:"Tlphone",description:"Pour les urgences uniquement",icon:sh,action:"01 23 45 67 89",available:!1,hours:"Bientt disponible"},{title:"Centre de ressources",description:"Guides dtaills et tutoriels",icon:$4,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],nle=[{title:"Guide du vendeur dbutant",description:"Tout savoir pour vendre efficacement",icon:Zo,duration:"5 min",type:"Article"},{title:"Scurit : viter les arnaques",description:"Reconnatre et viter les situations dangereuses",icon:zt,duration:"3 min",type:"Vido"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:ih,duration:"7 min",type:"Article"},{title:"Impact cologique expliqu",description:"Comment nous calculons votre empreinte carbone",icon:Or,duration:"4 min",type:"Infographie"}],rle=()=>{const{currentUser:t,userProfile:e}=mn(),[n,r]=x.useState(""),[i,a]=x.useState("all"),[o,c]=x.useState({subject:"",category:"",message:"",priority:"normal"}),[u,d]=x.useState(!1),f=hT.filter(g=>{if(i!=="all"&&g.category!==i)return!1;if(n){const _=n.toLowerCase();return g.questions.some(N=>N.question.toLowerCase().includes(_)||N.answer.toLowerCase().includes(_))}return!0}),p=async g=>{if(g.preventDefault(),!o.subject||!o.message){xe.error("Veuillez remplir tous les champs obligatoires");return}d(!0);try{await new Promise(_=>setTimeout(_,1e3)),xe.success("Votre message a t envoy ! Nous vous rpondrons sous 24h."),c({subject:"",category:"",message:"",priority:"normal"})}catch{xe.error("Erreur lors de l'envoi. Veuillez ressayer.")}finally{d(!1)}};return s.jsxs("div",{className:"max-w-7xl mx-auto px-1 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:s.jsx(Jv,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide StudyMarket"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les rponses  vos questions ou contactez notre quipe support"})]}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[s.jsx(_r,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(Ge,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, scurit, notifications)",value:n,onChange:g=>r(g.target.value),className:"pl-12 h-14 text-lg"})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:tle.map((g,_)=>s.jsx(fe,{className:`transition-all hover:shadow-lg ${g.available?"hover:-translate-y-1":"opacity-60"}`,children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${g.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:s.jsx(g.icon,{className:"w-6 h-6"})}),s.jsx("h3",{className:"font-semibold mb-2",children:g.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:g.description}),s.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:g.hours}),s.jsx(J,{variant:g.available?"default":"secondary",size:"sm",disabled:!g.available,className:"w-full",children:g.action})]})},_))}),s.jsxs(eu,{defaultValue:"faq",className:"space-y-6",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-3",children:[s.jsxs(on,{value:"faq",className:"flex items-center gap-2",children:[s.jsx(Jv,{className:"w-4 h-4"}),"FAQ"]}),s.jsxs(on,{value:"guides",className:"flex items-center gap-2",children:[s.jsx($4,{className:"w-4 h-4"}),"Guides"]}),s.jsxs(on,{value:"contact",className:"flex items-center gap-2",children:[s.jsx(wn,{className:"w-4 h-4"}),"Contact"]})]}),s.jsxs(ln,{value:"faq",className:"space-y-6",children:[s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(J,{variant:i==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catgories"}),hT.map(g=>s.jsxs(J,{variant:i===g.category?"default":"outline",size:"sm",onClick:()=>a(g.category),className:"flex items-center gap-2",children:[s.jsx(g.icon,{className:"w-4 h-4"}),g.category]},g.category))]})})}),f.length===0?s.jsx(fe,{children:s.jsxs(me,{className:"pt-12 pb-12 text-center",children:[s.jsx(_r,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun rsultat trouv"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-cls ou contactez notre support"}),s.jsx(J,{variant:"outline",onClick:()=>r(""),children:"Effacer la recherche"})]})}):s.jsx("div",{className:"space-y-6",children:f.map((g,_)=>s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(g.icon,{className:"w-5 h-5"}),g.category]})}),s.jsx(me,{children:s.jsx(ele,{type:"single",collapsible:!0,className:"w-full",children:g.questions.map((N,b)=>s.jsxs(q5,{value:`${_}-${b}`,children:[s.jsx(W5,{className:"text-left",children:N.question}),s.jsx(H5,{className:"text-muted-foreground leading-relaxed",children:N.answer})]},b))})})]},_))})]}),s.jsxs(ln,{value:"guides",className:"space-y-6",children:[s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Q4,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),s.jsx(Ct,{children:"Apprenez  utiliser StudyMarket comme un pro avec nos guides dtaills"})]}),s.jsx(me,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:nle.map((g,_)=>s.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(g.icon,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold",children:g.title}),s.jsx(at,{variant:"outline",className:"text-xs",children:g.type})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:g.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Un,{className:"w-3 h-3"}),g.duration]}),s.jsxs(J,{size:"sm",variant:"outline",children:[s.jsx(hs,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},_))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(tM,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vido"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidos courtes"}),s.jsxs(J,{variant:"outline",size:"sm",children:[s.jsx(hs,{className:"w-3 h-3 mr-1"}),"Voir les vidos"]})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(ti,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Tlchargez nos guides au format PDF"}),s.jsxs(J,{variant:"outline",size:"sm",children:[s.jsx(ti,{className:"w-3 h-3 mr-1"}),"Tlcharger"]})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(tp,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Communaut"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"changez avec d'autres tudiants"}),s.jsxs(J,{variant:"outline",size:"sm",children:[s.jsx(hs,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),s.jsx(ln,{value:"contact",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Rd,{className:"w-5 h-5"}),"Contactez notre quipe"]}),s.jsx(Ct,{children:"Dcrivez votre problme en dtail pour une rponse rapide et prcise"})]}),s.jsx(me,{children:s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"subject",children:"Sujet *"}),s.jsx(Ge,{id:"subject",value:o.subject,onChange:g=>c(_=>({..._,subject:g.target.value})),placeholder:"Rsumez votre problme en quelques mots",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"category",children:"Catgorie"}),s.jsxs(tn,{value:o.category,onValueChange:g=>c(_=>({..._,category:g})),children:[s.jsx(Ht,{className:"mt-1",children:s.jsx(nn,{placeholder:"Slectionnez une catgorie"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"account",children:"Compte et profil"}),s.jsx(Ke,{value:"listing",children:"Annonces"}),s.jsx(Ke,{value:"payment",children:"Paiements"}),s.jsx(Ke,{value:"security",children:"Scurit"}),s.jsx(Ke,{value:"technical",children:"Problme technique"}),s.jsx(Ke,{value:"other",children:"Autre"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"priority",children:"Priorit"}),s.jsxs(tn,{value:o.priority,onValueChange:g=>c(_=>({..._,priority:g})),children:[s.jsx(Ht,{className:"mt-1",children:s.jsx(nn,{})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"low",children:"Basse - Question gnrale"}),s.jsx(Ke,{value:"normal",children:"Normale - Besoin d'aide"}),s.jsx(Ke,{value:"high",children:"Haute - Problme bloquant"}),s.jsx(Ke,{value:"urgent",children:"Urgente - Scurit/Arnaque"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"message",children:"Message *"}),s.jsx(ri,{id:"message",value:o.message,onChange:g=>c(_=>({..._,message:g.target.value})),placeholder:"Dcrivez votre problme en dtail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&s.jsxs($t,{children:[s.jsx(Pt,{className:"h-4 w-4"}),s.jsxs(Bt,{children:["Nous vous rpondrons  l'adresse ",s.jsx("strong",{children:t.email})]})]}),s.jsx(J,{type:"submit",className:"w-full",disabled:u||!o.subject||!o.message,children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Rd,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Un,{className:"w-5 h-5"}),"Temps de rponse"]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Questions gnrales"}),s.jsx(at,{variant:"secondary",children:"24h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Problmes techniques"}),s.jsx(at,{variant:"secondary",children:"12h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Urgences scurit"}),s.jsx(at,{className:"bg-red-500",children:"2h"})]})]})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(K4,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(vs,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Email direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"support@studymarket.fr"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(wn,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Chat en direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zc,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Application mobile"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientt disponible"})]})]})]})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(ih,{className:"w-5 h-5"}),"tat du systme"]})}),s.jsxs(me,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Plateforme web"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Oprationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Messagerie"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Oprationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Notifications email"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),s.jsxs(J,{variant:"outline",size:"sm",className:"w-full mt-3",children:[s.jsx(hs,{className:"w-3 h-3 mr-1"}),"Page de statut complte"]})]})]})]})]})})]})]})},sle=[{category:"Rencontres et changes",icon:Mr,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits frquents : bibliothques universitaires, halls d'entre, caftrias du campus.",type:"do",icon:Pt},{title:"vitez les lieux isols",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privs ou endroits dserts.",type:"dont",icon:Pd},{title:"Prvenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontre.",type:"do",icon:Pt},{title:"Rencontrez en journe",description:"Privilgiez les rendez-vous en journe, vitez les rencontres tardives ou nocturnes.",type:"do",icon:Pt}]},{category:"Vrification d'Identit",icon:eM,color:"text-green-600",tips:[{title:"Demandez la carte tudiante",description:"Vrifiez toujours l'identit avec la carte tudiante. C'est votre garantie de scurit.",type:"do",icon:Pt},{title:"Vrifiez le profil StudyMarket",description:"Consultez le profil : badge vrifi, avis, nombre de transactions, anciennet du compte.",type:"do",icon:Pt},{title:"Mfiez-vous des profils rcents",description:"Soyez prudent avec les comptes crs rcemment sans historique de transactions.",type:"dont",icon:In},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos changes via notre messagerie scurise.",type:"do",icon:Pt}]},{category:"Paiements Scuriss",icon:Vn,color:"text-purple-600",tips:[{title:"Payez  la remise",description:"Ne payez qu'aprs avoir inspect l'objet et lors de la remise en main propre.",type:"do",icon:Pt},{title:"vitez les paiements  l'avance",description:"Ne versez jamais d'acompte ou de paiement intgral avant d'avoir vu l'objet.",type:"dont",icon:Pd},{title:"Utilisez des moyens traables",description:"Privilgiez Lydia, PayPal, virements ou espces. vitez les cryptomonnaies.",type:"do",icon:Pt},{title:"Mfiez-vous des prix trop bas",description:"Un iPhone  50 ou un MacBook  200 sont probablement des arnaques.",type:"dont",icon:In}]},{category:"Communication",icon:wn,color:"text-orange-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos changes, mme en cas de dsaccord.",type:"do",icon:Pt},{title:"Posez des questions prcises",description:"Demandez des dtails sur l'tat, l'ge, la raison de la vente, les dfauts ventuels.",type:"do",icon:Pt},{title:"Mfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernire chance") sont suspects.',type:"dont",icon:In},{title:"Gardez les preuves",description:"Conservez les captures d'cran des conversations en cas de litige.",type:"do",icon:Pt}]}],ile=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:In},{title:"Paiement demand  l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:Vn},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:Mr},{title:"Photos de mauvaise qualit",description:"Images floues, prises sur internet ou trs peu nombreuses",severity:"medium",icon:pc},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte rcent",severity:"medium",icon:tp},{title:"Communication trange",description:"Franais approximatif, rponses vasives, pression temporelle",severity:"medium",icon:wn},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:Un},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres donnes sensibles",severity:"high",icon:Mc}],ale=[{title:"Urgence immdiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:sh,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des rgles",contact:`Bouton "Signaler" dans l'app`,icon:lc,color:"text-orange-600"},{title:"Support StudyMarket",description:"Questions, aide, mdiation de conflit",contact:"support@studymarket.fr",icon:wn,color:"text-blue-600"},{title:"Scurit Campus",description:"Incidents sur le campus universitaire",contact:"Service scurit de votre universit",icon:zt,color:"text-green-600"}],ole=()=>s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:s.jsx(zt,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Scurit & Conseils"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre scurit est notre priorit. Suivez ces conseils pour des changes sereins et scuriss entre tudiants."})]}),s.jsxs($t,{className:"border-green-200 bg-green-50",children:[s.jsx(zt,{className:"h-4 w-4 text-green-600"}),s.jsx(Bt,{className:"text-green-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vrifiez l'identit avec la carte tudiante."]}),s.jsxs(J,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[s.jsx(ti,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(zt,{className:"w-6 h-6 text-green-600"})}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions scurises"})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(eM,{className:"w-6 h-6 text-blue-600"})}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"tudiants vrifis"})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Un,{className:"w-6 h-6 text-purple-600"})}),s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Rponse aux signalements"})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Zo,{className:"w-6 h-6 text-orange-600"})}),s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"4.9/5"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction scurit"})]})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Scurit Complet"}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des changes en toute scurit"})]}),sle.map((t,e)=>s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),s.jsx(me,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((n,r)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${n.type==="do"?"border-green-200 bg-green-50":n.type==="dont"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(n.icon,{className:`w-5 h-5 mt-0.5 ${n.type==="do"?"text-green-600":n.type==="dont"?"text-red-600":"text-orange-600"}`}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-semibold mb-2 ${n.type==="do"?"text-green-800":n.type==="dont"?"text-red-800":"text-orange-800"}`,children:n.title}),s.jsx("p",{className:`text-sm ${n.type==="do"?"text-green-700":n.type==="dont"?"text-red-700":"text-orange-700"}`,children:n.description})]})]})},r))})})]},e))]}),s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(In,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme  Reconnatre"]}),s.jsx(Ct,{children:"Ces comportements doivent vous alerter et vous inciter  la prudence"})]}),s.jsx(me,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ile.map((t,e)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-orange-600"}`}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-orange-800"}`,children:t.title}),s.jsx(at,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),s.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-orange-700"}`,children:t.description})]})]})},e))})})]}),s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(sh,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),s.jsx(Ct,{children:"En cas de problme, voici qui contacter selon la situation"})]}),s.jsx(me,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ale.map((t,e)=>s.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-orange-600"?"bg-orange-100":t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold mb-1",children:t.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),s.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(VG,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Tlchargez notre guide de scurit complet"}),s.jsxs(J,{variant:"outline",className:"w-full",children:[s.jsx(ti,{className:"w-4 h-4 mr-2"}),"Tlcharger"]})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(Jv,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions frquentes sur la scurit"}),s.jsx(J,{variant:"outline",className:"w-full",asChild:!0,children:s.jsxs(ze,{to:"/help",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),s.jsx(fe,{children:s.jsxs(me,{className:"pt-6 text-center",children:[s.jsx(wn,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problme"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre quipe de scurit"}),s.jsxs(J,{variant:"outline",className:"w-full",children:[s.jsx(lc,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),s.jsxs($t,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Q4,{className:"h-4 w-4 text-blue-600"}),s.jsxs(Bt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hsitez pas  annuler la transaction. Votre scurit vaut plus que n'importe quel objet. L'quipe StudyMarket est l pour vous aider 24h/7j."]})]})]});function lle(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var cS="ScrollArea",[G5,ede]=Sr(cS),[cle,li]=G5(cS),K5=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=t,[c,u]=x.useState(null),[d,f]=x.useState(null),[p,g]=x.useState(null),[_,N]=x.useState(null),[b,S]=x.useState(null),[w,y]=x.useState(0),[E,A]=x.useState(0),[O,q]=x.useState(!1),[R,V]=x.useState(!1),U=ht(e,F=>u(F)),k=Yc(i);return s.jsx(cle,{scope:n,type:r,dir:k,scrollHideDelay:a,scrollArea:c,viewport:d,onViewportChange:f,content:p,onContentChange:g,scrollbarX:_,onScrollbarXChange:N,scrollbarXEnabled:O,onScrollbarXEnabledChange:q,scrollbarY:b,onScrollbarYChange:S,scrollbarYEnabled:R,onScrollbarYEnabledChange:V,onCornerWidthChange:y,onCornerHeightChange:A,children:s.jsx(Ze.div,{dir:k,...o,ref:U,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});K5.displayName=cS;var Z5="ScrollAreaViewport",Y5=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...a}=t,o=li(Z5,n),c=x.useRef(null),u=ht(e,c,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(Ze.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Y5.displayName=Z5;var wa="ScrollAreaScrollbar",uS=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=li(wa,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,c=t.orientation==="horizontal";return x.useEffect(()=>(c?a(!0):o(!0),()=>{c?a(!1):o(!1)}),[c,a,o]),i.type==="hover"?s.jsx(ule,{...r,ref:e,forceMount:n}):i.type==="scroll"?s.jsx(dle,{...r,ref:e,forceMount:n}):i.type==="auto"?s.jsx(Q5,{...r,ref:e,forceMount:n}):i.type==="always"?s.jsx(dS,{...r,ref:e}):null});uS.displayName=wa;var ule=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=li(wa,t.__scopeScrollArea),[a,o]=x.useState(!1);return x.useEffect(()=>{const c=i.scrollArea;let u=0;if(c){const d=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(Er,{present:n||a,children:s.jsx(Q5,{"data-state":a?"visible":"hidden",...r,ref:e})})}),dle=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=li(wa,t.__scopeScrollArea),a=t.orientation==="horizontal",o=i0(()=>u("SCROLL_END"),100),[c,u]=lle("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,i.scrollHideDelay,u]),x.useEffect(()=>{const d=i.viewport,f=a?"scrollLeft":"scrollTop";if(d){let p=d[f];const g=()=>{const _=d[f];p!==_&&(u("SCROLL"),o()),p=_};return d.addEventListener("scroll",g),()=>d.removeEventListener("scroll",g)}},[i.viewport,a,u,o]),s.jsx(Er,{present:n||c!=="hidden",children:s.jsx(dS,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Oe(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Oe(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),Q5=x.forwardRef((t,e)=>{const n=li(wa,t.__scopeScrollArea),{forceMount:r,...i}=t,[a,o]=x.useState(!1),c=t.orientation==="horizontal",u=i0(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(c?d:f)}},10);return Hd(n.viewport,u),Hd(n.content,u),s.jsx(Er,{present:r||a,children:s.jsx(dS,{"data-state":a?"visible":"hidden",...i,ref:e})})}),dS=x.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=li(wa,t.__scopeScrollArea),a=x.useRef(null),o=x.useRef(0),[c,u]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=n6(c.viewport,c.content),f={...r,sizes:c,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:g=>a.current=g,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:g=>o.current=g};function p(g,_){return vle(g,o.current,c,_)}return n==="horizontal"?s.jsx(hle,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const g=i.viewport.scrollLeft,_=fT(g,c,i.dir);a.current.style.transform=`translate3d(${_}px, 0, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollLeft=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollLeft=p(g,i.dir))}}):n==="vertical"?s.jsx(fle,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const g=i.viewport.scrollTop,_=fT(g,c);a.current.style.transform=`translate3d(0, ${_}px, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollTop=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollTop=p(g))}}):null}),hle=x.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=li(wa,t.__scopeScrollArea),[o,c]=x.useState(),u=x.useRef(null),d=ht(e,u,a.onScrollbarXChange);return x.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),s.jsx(J5,{"data-orientation":"horizontal",...i,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":s0(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,p)=>{if(a.viewport){const g=a.viewport.scrollLeft+f.deltaX;t.onWheelScroll(g),s6(g,p)&&f.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:kx(o.paddingLeft),paddingEnd:kx(o.paddingRight)}})}})}),fle=x.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=li(wa,t.__scopeScrollArea),[o,c]=x.useState(),u=x.useRef(null),d=ht(e,u,a.onScrollbarYChange);return x.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),s.jsx(J5,{"data-orientation":"vertical",...i,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":s0(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,p)=>{if(a.viewport){const g=a.viewport.scrollTop+f.deltaY;t.onWheelScroll(g),s6(g,p)&&f.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:kx(o.paddingTop),paddingEnd:kx(o.paddingBottom)}})}})}),[mle,X5]=G5(wa),J5=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:f,onResize:p,...g}=t,_=li(wa,n),[N,b]=x.useState(null),S=ht(e,U=>b(U)),w=x.useRef(null),y=x.useRef(""),E=_.viewport,A=r.content-r.viewport,O=mr(f),q=mr(u),R=i0(p,10);function V(U){if(w.current){const k=U.clientX-w.current.left,F=U.clientY-w.current.top;d({x:k,y:F})}}return x.useEffect(()=>{const U=k=>{const F=k.target;(N==null?void 0:N.contains(F))&&O(k,A)};return document.addEventListener("wheel",U,{passive:!1}),()=>document.removeEventListener("wheel",U,{passive:!1})},[E,N,A,O]),x.useEffect(q,[r,q]),Hd(N,R),Hd(_.content,R),s.jsx(mle,{scope:n,scrollbar:N,hasThumb:i,onThumbChange:mr(a),onThumbPointerUp:mr(o),onThumbPositionChange:q,onThumbPointerDown:mr(c),children:s.jsx(Ze.div,{...g,ref:S,style:{position:"absolute",...g.style},onPointerDown:Oe(t.onPointerDown,U=>{U.button===0&&(U.target.setPointerCapture(U.pointerId),w.current=N.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",_.viewport&&(_.viewport.style.scrollBehavior="auto"),V(U))}),onPointerMove:Oe(t.onPointerMove,V),onPointerUp:Oe(t.onPointerUp,U=>{const k=U.target;k.hasPointerCapture(U.pointerId)&&k.releasePointerCapture(U.pointerId),document.body.style.webkitUserSelect=y.current,_.viewport&&(_.viewport.style.scrollBehavior=""),w.current=null})})})}),Cx="ScrollAreaThumb",e6=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=X5(Cx,t.__scopeScrollArea);return s.jsx(Er,{present:n||i.hasThumb,children:s.jsx(ple,{ref:e,...r})})}),ple=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,a=li(Cx,n),o=X5(Cx,n),{onThumbPositionChange:c}=o,u=ht(e,p=>o.onThumbChange(p)),d=x.useRef(void 0),f=i0(()=>{d.current&&(d.current(),d.current=void 0)},100);return x.useEffect(()=>{const p=a.viewport;if(p){const g=()=>{if(f(),!d.current){const _=xle(p,c);d.current=_,c()}};return c(),p.addEventListener("scroll",g),()=>p.removeEventListener("scroll",g)}},[a.viewport,f,c]),s.jsx(Ze.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Oe(t.onPointerDownCapture,p=>{const _=p.target.getBoundingClientRect(),N=p.clientX-_.left,b=p.clientY-_.top;o.onThumbPointerDown({x:N,y:b})}),onPointerUp:Oe(t.onPointerUp,o.onThumbPointerUp)})});e6.displayName=Cx;var hS="ScrollAreaCorner",t6=x.forwardRef((t,e)=>{const n=li(hS,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(gle,{...t,ref:e}):null});t6.displayName=hS;var gle=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=li(hS,n),[a,o]=x.useState(0),[c,u]=x.useState(0),d=!!(a&&c);return Hd(i.scrollbarX,()=>{var p;const f=((p=i.scrollbarX)==null?void 0:p.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),Hd(i.scrollbarY,()=>{var p;const f=((p=i.scrollbarY)==null?void 0:p.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),d?s.jsx(Ze.div,{...r,ref:e,style:{width:a,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function kx(t){return t?parseInt(t,10):0}function n6(t,e){const n=t/e;return isNaN(n)?0:n}function s0(t){const e=n6(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function vle(t,e,n,r="ltr"){const i=s0(n),a=i/2,o=e||a,c=i-o,u=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-c,f=n.content-n.viewport,p=r==="ltr"?[0,f]:[f*-1,0];return r6([u,d],p)(t)}function fT(t,e,n="ltr"){const r=s0(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,c=a-r,u=n==="ltr"?[0,o]:[o*-1,0],d=km(t,u);return r6([0,o],[0,c])(d)}function r6(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function s6(t,e){return t>0&&t<e}var xle=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,c=n.top!==a.top;(o||c)&&e(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function i0(t,e){const n=mr(t),r=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),x.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Hd(t,e){const n=mr(e);Bn(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var i6=K5,yle=Y5,_le=t6;const fS=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(i6,{ref:r,className:st("relative overflow-hidden",t),...n,children:[s.jsx(yle,{className:"h-full w-full rounded-[inherit]",children:e}),s.jsx(a6,{}),s.jsx(_le,{})]}));fS.displayName=i6.displayName;const a6=x.forwardRef(({className:t,orientation:e="vertical",...n},r)=>s.jsx(uS,{ref:r,orientation:e,className:st("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:s.jsx(e6,{className:"relative flex-1 rounded-full bg-border"})}));a6.displayName=uS.displayName;const mT=({conversations:t,loading:e,searchQuery:n,setSearchQuery:r,currentConversation:i,currentUser:a,onSelectConversation:o})=>{const c=t.filter(f=>{const p=f.participants.find(_=>_!==(a==null?void 0:a.uid)),g=p?f.participantDetails[p]:null;return(g==null?void 0:g.name.toLowerCase().includes(n.toLowerCase()))||f.listingTitle.toLowerCase().includes(n.toLowerCase())}),u=f=>f===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(f),d=f=>{const p=f.participants.find(g=>g!==(a==null?void 0:a.uid));return p?f.participantDetails[p]:null};return s.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wn,{className:"w-5 h-5 text-primary"}),s.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:s.jsx(yy,{className:"w-4 h-4"})}),s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:s.jsx(F4,{className:"w-4 h-4"})}),s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramtres",children:s.jsx(_y,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(_r,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{placeholder:"Rechercher conversations...",value:n,onChange:f=>r(f.target.value),className:"pl-9 h-9 text-sm"})]})]}),s.jsx(fS,{className:"flex-1",children:e?s.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((f,p)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-2 p-2",children:[s.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:s.jsx(Jr,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},p))}):c.length===0?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx(wn,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),s.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n?s.jsxs(s.Fragment,{children:[s.jsx(_r,{className:"w-3 h-3 inline mr-1"}),'Aucun rsultat pour "',n,'"']}):s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparatront ici"]})})]}):s.jsx("div",{className:"p-1",children:c.map(f=>{var N,b;const p=d(f),g=f.unreadCount[a==null?void 0:a.uid]||0,_=(i==null?void 0:i.id)===f.id;return s.jsx("div",{onClick:()=>o(f),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${_?"bg-accent":""}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(oo,{className:"w-10 h-10",children:[s.jsx(lo,{src:p==null?void 0:p.avatar}),s.jsx(co,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((b=(N=p==null?void 0:p.name)==null?void 0:N[0])==null?void 0:b.toUpperCase())||s.jsx(Jr,{className:"w-4 h-4"})})]}),(p==null?void 0:p.verified)&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(zt,{className:"w-1.5 h-1.5 text-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(Jr,{className:"w-3 h-3 text-muted-foreground"}),(p==null?void 0:p.name)||"Utilisateur"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[f.lastMessage&&s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Un,{className:"w-3 h-3"}),fh(f.lastMessage.sentAt,{addSuffix:!0,locale:Dr})]}),g>0&&s.jsx(at,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:g>99?"99+":g})]})]}),s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.listingImage?s.jsx("img",{src:f.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):s.jsx(Y4,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:f.listingTitle}),s.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[f.listingPrice===0?s.jsx(Or,{className:"w-3 h-3 text-green-600"}):s.jsx("span",{children:""}),u(f.listingPrice)]})]}),f.lastMessage&&s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[f.lastMessage.senderId===(a==null?void 0:a.uid)?s.jsx(Rd,{className:"w-3 h-3"}):s.jsx(wn,{className:"w-3 h-3"}),f.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",f.lastMessage.text]})]})]})},f.id)})})})]})},pT=({conversation:t,messages:e,loading:n,currentUser:r,onBack:i})=>{var B,X;const{sendMessage:a,markMessagesAsSeen:o,blockUser:c,reportUser:u,deleteConversation:d}=Fy(),[f,p]=x.useState(""),[g,_]=x.useState(40),[N,b]=x.useState(!1),[S,w]=x.useState(!1),[y,E]=x.useState(""),[A,O]=x.useState(""),q=x.useRef(null),R=x.useRef(null),V=()=>{var ue;(ue=R.current)==null||ue.scrollIntoView({behavior:"smooth"})},U=x.useCallback(()=>{const ue=q.current;if(!ue)return;ue.style.height="auto";const ge=Math.max(40,Math.min(ue.scrollHeight,120));_(ge)},[]),k=x.useCallback(ue=>{const ge=ue.target.value;p(ge),b(!!ge.trim()),setTimeout(U,0)},[U]),F=async()=>{if(!f.trim()||!t||!r)return;const ue=f.trim();p(""),b(!1),_(40),await a(t.id,ue,r.uid,r.displayName||"Utilisateur",r.photoURL)},D=ue=>{ue.key==="Enter"&&!ue.shiftKey&&(ue.preventDefault(),F())},P=async()=>{!t||!r||await c(t.id,r.uid)},H=async()=>{if(!t||!r||!y.trim())return;const ue=t.participants.find(ge=>ge!==r.uid);ue&&(await u(t.id,r.uid,ue,y,A),w(!1),E(""),O(""))},ee=async()=>{!t||!r||(await d(t.id,r.uid),i())};if(x.useEffect(()=>{t&&r&&o(t.id,r.uid)},[t,r,o]),x.useEffect(V,[e]),!t)return s.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(wn,{className:"w-8 h-8 text-white"})}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Slectionnez une conversation"}),s.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(_r,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer  discuter"]})]})});const Z=t.participants.find(ue=>ue!==(r==null?void 0:r.uid)),K=Z?t.participantDetails[Z]:null,I=ue=>{const ge=new Date,Ee=new Date(ue);return Ee.toDateString()===ge.toDateString()?Ee.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((ge.getTime()-Ee.getTime())/(1e3*60*60*24))<7?Ee.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):Ee.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},z=ue=>ue.senderId!==(r==null?void 0:r.uid)?null:ue.seen?s.jsx(AG,{className:"w-3 h-3 text-blue-500"}):s.jsx(RG,{className:"w-3 h-3 text-muted-foreground"});return s.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(J,{variant:"ghost",size:"icon",onClick:i,className:"lg:hidden h-8 w-8",children:s.jsx(mc,{className:"w-4 h-4"})}),s.jsxs(oo,{className:"w-8 h-8",children:[s.jsx(lo,{src:K==null?void 0:K.avatar}),s.jsx(co,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((X=(B=K==null?void 0:K.name)==null?void 0:B[0])==null?void 0:X.toUpperCase())||s.jsx(Jr,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[s.jsx(Jr,{className:"w-3 h-3 text-muted-foreground"}),(K==null?void 0:K.name)||"Utilisateur"]}),(K==null?void 0:K.verified)&&s.jsx(zt,{className:"w-3 h-3 text-green-600"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[s.jsx(Mr,{className:"w-3 h-3"}),K==null?void 0:K.university]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:s.jsx(sh,{className:"w-4 h-4"})}),s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vido",children:s.jsx(tM,{className:"w-4 h-4"})}),s.jsxs(hb,{children:[s.jsx(fb,{asChild:!0,children:s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(OG,{className:"w-4 h-4"})})}),s.jsxs(lx,{align:"end",children:[s.jsx(en,{asChild:!0,children:s.jsxs(ze,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),s.jsxs(en,{children:[s.jsx(Zo,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),s.jsxs(en,{children:[s.jsx(kG,{className:"w-4 h-4 mr-2"}),"Archiver"]}),s.jsx(Wi,{}),s.jsxs(en,{onClick:()=>w(!0),children:[s.jsx(lc,{className:"w-4 h-4 mr-2"}),"Signaler"]}),s.jsxs(en,{onClick:P,children:[s.jsx(IG,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),s.jsxs(en,{onClick:ee,className:"text-destructive",children:[s.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),s.jsx(fe,{className:"mt-2",children:s.jsx(me,{className:"p-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?s.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):s.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:s.jsx(Y4,{className:"w-4 h-4 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(Jj,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),s.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs",children:""}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),s.jsx(J,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:s.jsxs(ze,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[s.jsx(hs,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsx(fS,{className:"flex-1 p-3",children:s.jsxs("div",{className:"space-y-3",children:[n?s.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((ue,ge)=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:`flex ${ge%2===0?"justify-start":"justify-end"}`,children:s.jsxs("div",{className:"max-w-xs",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),s.jsx("div",{className:"h-8 bg-muted rounded"})]})})},ge))}):e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(wn,{className:"w-6 h-6 text-white"})}),s.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(Rd,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(ue=>{const ge=ue.senderId===(r==null?void 0:r.uid);return s.jsx("div",{className:`flex ${ge?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${ge?"order-2":"order-1"}`,children:[s.jsx("div",{className:`rounded-2xl px-4 py-2 ${ge?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:s.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:ue.text})}),s.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${ge?"justify-end":"justify-start"}`,children:[s.jsx(Un,{className:"w-3 h-3"}),s.jsx("span",{children:I(ue.sentAt)}),z(ue)]})]})},ue.id)}),s.jsx("div",{ref:R})]})}),s.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[s.jsx(ri,{ref:q,value:f,placeholder:"Tapez votre message...",onChange:k,onKeyDown:D,rows:1,style:{height:g,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),s.jsx(J,{onClick:F,disabled:!f.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:s.jsx(Rd,{className:"h-3.5 w-3.5"})})]}),N&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[s.jsx(wn,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),s.jsx(da,{open:S,onOpenChange:w,children:s.jsxs(Ci,{children:[s.jsx(ha,{children:s.jsxs(ki,{className:"flex items-center gap-2",children:[s.jsx(lc,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs(Ie,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[s.jsx(In,{className:"w-4 h-4"}),"Motif du signalement"]}),s.jsxs(tn,{value:y,onValueChange:E,children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Slectionnez un motif"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"spam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vs,{className:"w-4 h-4"}),"Spam"]})}),s.jsx(Ke,{value:"harassment",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(In,{className:"w-4 h-4"}),"Harclement"]})}),s.jsx(Ke,{value:"inappropriate",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lc,{className:"w-4 h-4"}),"Contenu inappropri"]})}),s.jsx(Ke,{value:"scam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(In,{className:"w-4 h-4"}),"Arnaque"]})}),s.jsx(Ke,{value:"other",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yl,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),s.jsxs("div",{children:[s.jsxs(Ie,{htmlFor:"report-description",className:"flex items-center gap-2",children:[s.jsx(wn,{className:"w-4 h-4"}),"Description (optionnel)"]}),s.jsx(ri,{id:"report-description",value:A,onChange:ue=>O(ue.target.value),placeholder:"Dcrivez le problme...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(J,{variant:"outline",onClick:()=>w(!1),children:"Annuler"}),s.jsxs(J,{onClick:H,disabled:!y,className:"bg-red-500 hover:bg-red-600",children:[s.jsx(lc,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},wle=()=>{const{currentUser:t,userProfile:e}=mn(),{conversations:n,currentConversation:r,messages:i,loading:a,fetchConversations:o,fetchMessages:c,setCurrentConversation:u,cleanup:d}=Fy(),[f,p]=x.useState(""),[g,_]=x.useState(!1);x.useEffect(()=>(t&&o(t.uid),()=>{d()}),[t,o,d]),x.useEffect(()=>{r&&c(r.id)},[r,c]);const N=S=>{u(S),_(!0)},b=()=>{_(!1),u(null)};return t?s.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[s.jsx("div",{className:"lg:hidden w-full h-full",children:g?s.jsx(pT,{conversation:r,messages:i,loading:a,currentUser:t,onBack:b}):s.jsx(mT,{conversations:n,loading:a,searchQuery:f,setSearchQuery:p,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:N})}),s.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[s.jsx(mT,{conversations:n,loading:a,searchQuery:f,setSearchQuery:p,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:N}),s.jsx(pT,{conversation:r,messages:i,loading:a,currentUser:t,onBack:b})]})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(wn,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accder  vos messages"}),s.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[s.jsx(Jr,{className:"w-4 h-4"}),"Vous devez tre connect pour voir et envoyer des messages."]}),s.jsx(J,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:s.jsxs(ze,{to:"/auth",className:"flex items-center gap-2",children:[s.jsx(Jr,{className:"w-4 h-4"}),"Se connecter"]})})]})};var ov={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,a,o,c;return c=1.70158,o=0,a=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),a<Math.abs(i)?(a=i,c=o/4):c=o/(2*Math.PI)*Math.asin(i/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,a,o,c;return c=1.70158,o=0,a=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),a<Math.abs(i)?(a=i,c=o/4):c=o/(2*Math.PI)*Math.asin(i/a),a*Math.pow(2,-10*t)*Math.sin((t*r-c)*(2*Math.PI)/o)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,a,o,c;return c=1.70158,o=0,a=i,t===0?e:(t/=r/2)===2?e+i:(o||(o=r*(.3*1.5)),a<Math.abs(i)?(a=i,c=o/4):c=o/(2*Math.PI)*Math.asin(i/a),t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/o))+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/o)*.5+i+e)},easeInBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),a*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),a*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?a/2*(t*t*(((i*=1.525)+1)*t-i))+e:a/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,a;return a=ov.easeOutBounce(r-t,0,i,r),i-a+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,a;return t<r/2?(a=ov.easeInBounce(t*2,0,i,r),a*.5+e):(a=ov.easeOutBounce(t*2-r,0,i,r),a*.5+i*.5+e)}},ble=ov;function jle(t){return t*Math.PI/180}function Ns(t,e){return t+Math.random()*(e-t)}function Nle(t,e){return Math.floor(t+Math.random()*(e-t+1))}var Bf;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(Bf||(Bf={}));var Do;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Do||(Do={}));const Sle=1e3/60;class Ele{constructor(e,n,r,i){this.getOptions=n;const{colors:a,initialVelocityX:o,initialVelocityY:c}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=Ns(5,20),this.h=Ns(5,20),this.radius=Ns(5,10),this.vx=typeof o=="number"?Ns(-o,o):Ns(o.min,o.max),this.vy=typeof c=="number"?Ns(-c,0):Ns(c.min,c.max),this.shape=Nle(0,2),this.angle=jle(Ns(0,360)),this.angularSpin=Ns(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=Ns(0,1),this.rotationDirection=Ns(0,1)?Do.Positive:Do.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:a,drawShape:o}=this.getOptions(),c=e/Sle;this.x+=this.vx*c,this.y+=this.vy*c,this.vy+=n*c,this.vx+=r*c,this.vx*=i**c,this.vy*=i**c,this.rotateY>=1&&this.rotationDirection===Do.Positive?this.rotationDirection=Do.Negative:this.rotateY<=-1&&this.rotationDirection===Do.Negative&&(this.rotationDirection=Do.Positive);const u=.1*this.rotationDirection*c;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=a,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case Bf.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Bf.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Bf.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Cle{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=Ns(this.x,this.w+this.x),a=Ns(this.y,this.h+this.y);return new Ele(this.context,this.getOptions,i,a)},this.animate=i=>{const{canvas:a,context:o,particlesGenerated:c,lastNumberOfPieces:u}=this,{run:d,recycle:f,numberOfPieces:p,debug:g,tweenFunction:_,tweenDuration:N}=this.getOptions();if(!d)return!1;const b=this.particles.length,S=f?b:c;if(S<p){u!==p&&(this.tweenProgress=0,this.tweenFrom=S,this.lastNumberOfPieces=p),this.tweenProgress=Math.min(N,Math.max(0,this.tweenProgress+i));const w=_(this.tweenProgress,this.tweenFrom,p,N),y=Math.round(w-S);for(let E=0;E<y;E++)this.particles.push(this.getParticle());this.particlesGenerated+=y}g&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${b}`,a.width-10,a.height-20));for(let w=this.particles.length-1;w>=0;w--){const y=this.particles[w];y.update(i),(y.y>a.height||y.y<-100||y.x>a.width+100||y.x<-100)&&(f&&S<=p?this.particles[w]=this.getParticle():this.removeParticleAt(w))}return b>0||S<p},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const mS={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:ble.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class kle{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const a={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...a,...mS,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:a,onConfettiComplete:o,frameRate:c},canvas:u,context:d}=this,f=Math.min(i-this.lastFrameTime,50);if(c&&f<1e3/c){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(c?f%c:0),a&&(d.fillStyle="white",d.clearRect(0,0,u.width,u.height)),this.generator.animate(f)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new Cle(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,a;const n=(i=this._options)==null?void 0:i.run,r=(a=this._options)==null?void 0:a.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const Tle=Le.createRef();class pS extends Le.Component{constructor(e){super(e),this.canvas=Le.createRef(),this.canvas=e.canvasRef||Tle}componentDidMount(){if(this.canvas.current){const e=k_(this.props)[0];this.confetti=new kle(this.canvas.current,e)}}componentDidUpdate(){const e=k_(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=k_(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return s.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}pS.defaultProps={...mS};pS.displayName="ReactConfetti";function k_(t){const e={},n={},r={},i=[...Object.keys(mS),"confettiSource","drawShape","onConfettiComplete","frameRate"],a=["canvasRef"];for(const o in t){const c=t[o];i.includes(o)?e[o]=c:a.includes(o)?a[o]=c:r[o]=c}return[e,r,n]}const Ple=Le.forwardRef((t,e)=>s.jsx(pS,{canvasRef:e,...t})),Ile=({open:t,loading:e,email:n,onResend:r,onCheck:i,onClose:a,verified:o})=>s.jsx(da,{open:t,children:s.jsxs(Ci,{className:"max-w-md text-center",children:[o&&s.jsx(Ple,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:250,recycle:!1}),s.jsxs(ha,{children:[s.jsxs(ki,{className:"flex items-center justify-center gap-2 text-lg",children:[o?s.jsx(KG,{className:"w-6 h-6 text-green-500 animate-bounce"}):s.jsx(qG,{className:"w-5 h-5 text-primary"}),o?"Flicitations !":"Vrifie ton email"]}),s.jsx(xc,{children:o?"Ton compte est maintenant activ. Tu peux accder  la plateforme.":`Un lien de confirmation a t envoy  ${n}. Clique dessus pour activer ton compte.`})]}),!o&&s.jsxs("div",{className:"space-y-3 mt-2",children:[s.jsxs("p",{className:"text-muted-foreground text-sm",children:["Pense  vrifier tes spams. ",s.jsx("br",{}),"La vrification est automatique ds que tu as cliqu sur le lien."]}),s.jsxs(J,{onClick:i,disabled:e,className:"w-full",children:[e?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"J'ai valid mon email"]}),s.jsxs(J,{onClick:r,variant:"outline",disabled:e,className:"w-full",children:[e?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Renvoyer l'email"]})]}),o&&s.jsxs("div",{className:"space-y-3 mt-4",children:[s.jsx("p",{className:"text-green-600 font-semibold text-lg",children:"Bienvenue sur StudyMarket !"}),s.jsx(J,{onClick:a,className:"w-full bg-gradient-to-r from-primary to-secondary",children:"Accder au site"})]})]})}),Ale=Jc({email:gt().email("Email invalide"),password:gt().min(6,"Le mot de passe doit contenir au moins 6 caractres")}),Rle=Jc({firstName:gt().min(2,"Le prnom doit contenir au moins 2 caractres"),lastName:gt().min(2,"Le nom doit contenir au moins 2 caractres"),displayName:gt().optional(),email:gt().email("Email invalide").refine(t=>["univ-","edu","gmail.com","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),"Vous devez utiliser une adresse email universitaire"),university:gt().min(1,"Veuillez slectionner votre universit"),otherUniversity:gt().optional(),fieldOfStudy:gt().min(1,"Veuillez indiquer votre filire"),otherFieldOfStudy:gt().optional(),graduationYear:gt().min(1,"Veuillez indiquer votre anne de diplme"),password:gt().min(6,"Le mot de passe doit contenir au moins 6 caractres"),confirmPassword:gt()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}).refine(t=>t.university==="Autre universit"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre universit",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filire",path:["otherFieldOfStudy"]}),Mle=Jc({university:gt().min(1,"Veuillez slectionner votre universit"),otherUniversity:gt().optional(),fieldOfStudy:gt().min(1,"Veuillez indiquer votre filire"),otherFieldOfStudy:gt().optional(),graduationYear:gt().min(1,"Veuillez indiquer votre anne de diplme"),displayName:gt().min(2,"Le nom doit contenir au moins 2 caractres")}).refine(t=>t.university==="Autre universit"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre universit",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filire",path:["otherFieldOfStudy"]}),gT=["Sorbonne Universit","Universit Paris-Dauphine","cole Polytechnique","ENS Paris","CentraleSuplec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Universit Paris 1 Panthon-Sorbonne","Universit Paris 3 Sorbonne","Universit Paris Cit","Sciences Po Paris","Autre universit"],vT=["Informatique","Ingnierie","Commerce/Management","Droit","Mdecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],Ole=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),Dle=()=>{var K,I;const{currentUser:t,signIn:e,signInWithGoogle:n,fetchUserProfile:r}=mn(),[i,a]=x.useState(!1),[o,c]=x.useState(!1),[u,d]=x.useState(!1),[f,p]=x.useState(!1),[g,_]=x.useState(""),[N,b]=x.useState(""),[S,w]=x.useState(!1),[y,E]=x.useState(null);mo();const[A,O]=x.useState(!1),[q,R]=x.useState(!1),[V,U]=x.useState(!1),k=cr(),F=yc({resolver:_c(Ale),defaultValues:{email:"",password:""}}),D=yc({resolver:_c(Rle),defaultValues:{firstName:"",lastName:"",displayName:"",email:"",university:"",otherUniversity:"",fieldOfStudy:"",otherFieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),P=yc({resolver:_c(Mle),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}});if(x.useEffect(()=>{(async()=>{if(t)try{const B=await Is(yt(Ue,"users",t.uid));if(B.exists()){const X=B.data();if(!(t.emailVerified||t.providerData.some(ge=>ge.providerId==="google.com"))&&!X.emailVerified){b(t.email||""),p(!0),O(!0),U(!1);return}}else{if(t.providerData.some(ue=>ue.providerId==="google.com")){if(!Ole(t.email||"")){_("Vous devez utiliser une adresse email universitaire"),Gi.signOut();return}E({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),w(!0);return}const X=localStorage.getItem("pendingUserData");if(X&&t.emailVerified){const ue=JSON.parse(X),ge=Object.fromEntries(Object.entries(ue).filter(([,Ee])=>Ee!==void 0));await oc(yt(Ue,"users",t.uid),ge),await r(t.uid),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}}catch(B){console.error("Error checking user profile:",B)}})()},[t,r]),x.useEffect(()=>{let z=null;return f&&t&&!t.emailVerified&&(z=setInterval(async()=>{await vf(t),t.emailVerified&&(p(!1),b(""),_(""),window.location.reload())},5e3)),()=>{z&&clearInterval(z)}},[f,t]),x.useEffect(()=>{t?t.emailVerified?(O(!1),U(!1)):(b(t.email||""),O(!0),U(!1)):(O(!1),U(!1))},[t]),x.useEffect(()=>{let z=null;return A&&t&&!t.emailVerified&&(z=setInterval(async()=>{await vf(t),t.emailVerified&&(U(!0),z&&clearInterval(z))},5e3)),()=>{z&&clearInterval(z)}},[A,t]),S&&y)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(fe,{className:"w-full max-w-md",children:[s.jsxs(Qe,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(QG,{className:"w-6 h-6 text-green-600"})})}),s.jsx(Je,{className:"text-2xl text-green-600",children:"Compltez votre profil tudiant"}),s.jsx(Ct,{children:"Dernire tape pour accder  StudyMarket"})]}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs($t,{children:[s.jsx(Pt,{className:"h-4 w-4"}),s.jsxs(Bt,{children:["Connect avec ",s.jsx("strong",{children:y.email})]})]}),g&&s.jsxs($t,{variant:"destructive",children:[s.jsx(zf,{className:"h-4 w-4"}),s.jsx(Bt,{children:g})]}),s.jsxs("form",{onSubmit:P.handleSubmit(async z=>{d(!0),_("");try{const B=z.university==="Autre universit"?z.otherUniversity:z.university,X=z.fieldOfStudy==="Autre"?z.otherFieldOfStudy:z.fieldOfStudy,ue=Object.fromEntries(Object.entries(z).filter(([,ge])=>ge!==void 0));if(await oc(yt(Ue,"users",y.uid),{email:y.email,displayName:ue.displayName,photoURL:y.photoURL,university:B,otherUniversity:z.university==="Autre universit"?z.otherUniversity:void 0,fieldOfStudy:X,otherFieldOfStudy:z.fieldOfStudy==="Autre"?z.otherFieldOfStudy:void 0,graduationYear:parseInt(z.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),t&&y.displayName)try{await dm(t,{displayName:ue.displayName})}catch{}await r(y.uid),w(!1),window.location.reload()}catch(B){console.error("Error completing profile:",B),_("Erreur lors de la sauvegarde du profil")}finally{d(!1)}}),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"university",children:"Universit"}),s.jsxs(tn,{onValueChange:z=>P.setValue("university",z),value:P.watch("university"),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Slectionnez votre universit"})}),s.jsx(Gt,{children:gT.map(z=>s.jsx(Ke,{value:z,children:z},z))})]}),P.watch("university")==="Autre universit"&&s.jsx(Ge,{id:"otherUniversity",type:"text",placeholder:"Nom de votre universit",...P.register("otherUniversity"),className:"mt-2"}),P.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.university.message}),P.watch("university")==="Autre universit"&&P.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"fieldOfStudy",children:"Filire"}),s.jsxs(tn,{onValueChange:z=>P.setValue("fieldOfStudy",z),value:P.watch("fieldOfStudy"),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Filire"})}),s.jsx(Gt,{children:vT.map(z=>s.jsx(Ke,{value:z,children:z},z))})]}),P.watch("fieldOfStudy")==="Autre"&&s.jsx(Ge,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filire",...P.register("otherFieldOfStudy"),className:"mt-2"}),P.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.fieldOfStudy.message}),P.watch("fieldOfStudy")==="Autre"&&P.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"graduationYear",children:"Anne de diplme"}),s.jsxs(tn,{onValueChange:z=>P.setValue("graduationYear",z),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Anne"})}),s.jsx(Gt,{children:Array.from({length:8},(z,B)=>2024+B).map(z=>s.jsx(Ke,{value:z.toString(),children:z},z))})]}),P.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.graduationYear.message})]})]}),s.jsxs(J,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:u,children:[u?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),s.jsx(J,{variant:"outline",onClick:()=>{Gi.signOut(),w(!1),E(null)},className:"w-full",children:"Se dconnecter et recommencer"})]})]})});if(f)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(fe,{className:"w-full max-w-md",children:[s.jsxs(Qe,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(vs,{className:"w-6 h-6 text-blue-600"})})}),s.jsx(Je,{className:"text-2xl text-blue-600",children:"Vrifiez votre email"}),s.jsxs(Ct,{children:["Un lien d'activation a t envoy  ",s.jsx("strong",{children:N}),".",s.jsx("br",{}),"Cliquez sur le lien pour activer votre compte.",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(Vous pouvez fermer cette page et revenir aprs avoir valid l'email)"})]})]}),s.jsxs(me,{className:"space-y-4",children:[s.jsxs($t,{children:[s.jsx(Pt,{className:"h-4 w-4"}),s.jsxs(Bt,{children:["Nous avons envoy un lien d'activation  ",s.jsx("strong",{children:N}),".",s.jsx("br",{}),s.jsx("span",{className:"text-xs",children:"Vrifiez vos spams si vous ne le trouvez pas."})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Important :"})}),s.jsx("p",{children:" Cliquez sur le lien dans l'email pour activer votre compte"}),s.jsx("p",{children:" Vrifiez votre bote de rception et vos spams"}),s.jsx("p",{children:" Le lien expire dans 24h"})]}),s.jsxs(J,{onClick:async()=>{if(t){d(!0);try{await H0(t),_(""),alert("Email d'activation renvoy !")}catch(z){_("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",z)}d(!1)}},variant:"outline",className:"w-full",disabled:u||!t,children:[u?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(vs,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),s.jsx(J,{onClick:async()=>{if(t){d(!0);try{await vf(t),t.emailVerified?(p(!1),b(""),_(""),window.location.reload()):_("L'email n'est pas encore valid. Pensez  vrifier vos spams.")}catch{_("Erreur lors de la vrification de l'tat de l'email")}d(!1)}},variant:"secondary",className:"w-full",disabled:u||!t,children:"J'ai dj valid mon email"}),g&&s.jsxs($t,{variant:"destructive",children:[s.jsx(zf,{className:"h-4 w-4"}),s.jsx(Bt,{children:g})]}),s.jsx(J,{variant:"link",onClick:()=>{p(!1),b(""),_(""),t&&Gi.signOut()},className:"w-full",children:"Retour  l'inscription"})]})]})});const H=async z=>{d(!0),_("");try{await e(z.email,z.password),k("/")}catch(B){B.code==="auth/invalid-credential"?_("Email ou mot de passe incorrect"):B.code==="auth/user-not-found"?_("Aucun compte trouv avec cet email"):B.code==="auth/user-disabled"?_("Ce compte a t dsactiv"):B.code==="auth/too-many-requests"?_("Trop de tentatives. Ressayez plus tard."):_("Erreur de connexion: "+(B.message||"Erreur inconnue")),console.error("Sign in error:",B)}finally{d(!1)}},ee=async z=>{d(!0),_("");try{const{firstName:B,lastName:X,...ue}=z,ge=`${B} ${X}`,De=(await DA(Gi,z.email,z.password)).user;await H0(De,{url:`${window.location.origin}/auth`,handleCodeInApp:!1});const $e=z.university==="Autre universit"?z.otherUniversity:z.university,Ae=z.fieldOfStudy==="Autre"?z.otherFieldOfStudy:z.fieldOfStudy,se=Object.fromEntries(Object.entries(z).filter(([,ie])=>ie!==void 0)),te={firstName:B,lastName:X,displayName:ge,university:$e,otherUniversity:z.university==="Autre universit"?z.otherUniversity:void 0,fieldOfStudy:Ae,otherFieldOfStudy:z.fieldOfStudy==="Autre"?z.otherFieldOfStudy:void 0,graduationYear:parseInt(se.graduationYear),email:z.email,createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"email"};await oc(yt(Ue,"users",De.uid),te),await r(De.uid),b(z.email),O(!0),U(!1),De&&await dm(De,{displayName:ge}),window.location.reload()}catch(B){console.error("Sign up error:",B),B.code==="auth/email-already-in-use"?_("Cette adresse email est dj utilise"):B.code==="auth/weak-password"?_("Le mot de passe est trop faible"):B.code==="auth/invalid-email"?_("Adresse email invalide"):_("Erreur lors de la cration du compte")}finally{d(!1)}},Z=async()=>{d(!0),_("");try{await n()}catch(z){z.code==="auth/popup-closed-by-user"?_("Connexion annule"):z.code==="auth/popup-blocked"?_("Popup bloque par le navigateur"):z.code==="auth/account-exists-with-different-credential"?_("Un compte existe dj avec cet email"):_("Erreur de connexion avec Google: "+(z.message||"Erreur inconnue")),console.error("Google sign in error:",z)}finally{d(!1)}};return x.useEffect(()=>{(async()=>{if(t&&t.emailVerified&&!(await Is(yt(Ue,"users",t.uid))).exists()){const X=localStorage.getItem("pendingUserData");if(X){const ue=JSON.parse(X),ge=Object.fromEntries(Object.entries(ue).filter(([,Ee])=>Ee!==void 0));await oc(yt(Ue,"users",t.uid),ge),await r(t.uid),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}})()},[t,r]),s.jsxs("div",{className:"min-h-screen flex items-center justify-center px-2 sm:px-0",children:[s.jsxs(fe,{className:"w-full max-w-md mx-auto px-2 py-4 sm:px-6",children:[s.jsxs(Qe,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:s.jsx(rh,{className:"w-6 h-6 text-white"})})}),s.jsx(Je,{className:"text-2xl",children:i?"Rejoindre StudyMarket":"Se connecter"}),s.jsx(Ct,{children:i?"Inscription scurise pour tudiants":"Connectez-vous  votre compte tudiant"}),i&&s.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:s.jsxs(at,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(zt,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),s.jsxs(me,{className:"space-y-6",children:[g&&s.jsxs($t,{variant:"destructive",children:[s.jsx(zf,{className:"h-4 w-4"}),s.jsx(Bt,{children:g})]}),s.jsxs(J,{variant:"outline",className:"w-full",onClick:Z,disabled:u,children:[u?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google ducation"]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx(Zs,{className:"w-full"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),s.jsxs("form",{onSubmit:i?D.handleSubmit(ee):F.handleSubmit(H),className:"space-y-4",children:[i&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Ie,{htmlFor:"firstName",children:"Prnom"}),s.jsx(Ge,{id:"firstName",...D.register("firstName"),autoComplete:"given-name"}),D.formState.errors.firstName&&s.jsx("span",{className:"text-red-500 text-xs",children:D.formState.errors.firstName.message})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Ie,{htmlFor:"lastName",children:"Nom"}),s.jsx(Ge,{id:"lastName",...D.register("lastName"),autoComplete:"family-name"}),D.formState.errors.lastName&&s.jsx("span",{className:"text-red-500 text-xs",children:D.formState.errors.lastName.message})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"email",children:"Email universitaire"}),s.jsxs("div",{className:"relative",children:[s.jsx(vs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10",...i?D.register("email"):F.register("email")})]}),(i?D.formState.errors.email:F.formState.errors.email)&&s.jsx("p",{className:"text-sm text-destructive",children:(K=i?D.formState.errors.email:F.formState.errors.email)==null?void 0:K.message}),i&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoy  cette adresse"})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"university",children:"Universit"}),s.jsxs(tn,{onValueChange:z=>D.setValue("university",z),value:D.watch("university"),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Slectionnez votre universit"})}),s.jsx(Gt,{children:gT.map(z=>s.jsx(Ke,{value:z,children:z},z))})]}),D.watch("university")==="Autre universit"&&s.jsx(Ge,{id:"otherUniversity",type:"text",placeholder:"Nom de votre universit",...D.register("otherUniversity"),className:"mt-2"}),D.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.university.message}),D.watch("university")==="Autre universit"&&D.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"fieldOfStudy",children:"Filire"}),s.jsxs(tn,{onValueChange:z=>D.setValue("fieldOfStudy",z),value:D.watch("fieldOfStudy"),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Filire"})}),s.jsx(Gt,{children:vT.map(z=>s.jsx(Ke,{value:z,children:z},z))})]}),D.watch("fieldOfStudy")==="Autre"&&s.jsx(Ge,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filire",...D.register("otherFieldOfStudy"),className:"mt-2"}),D.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.fieldOfStudy.message}),D.watch("fieldOfStudy")==="Autre"&&D.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"graduationYear",children:"Anne de diplme"}),s.jsxs(tn,{onValueChange:z=>D.setValue("graduationYear",z),children:[s.jsx(Ht,{children:s.jsx(nn,{placeholder:"Anne"})}),s.jsx(Gt,{children:Array.from({length:8},(z,B)=>2024+B).map(z=>s.jsx(Ke,{value:z.toString(),children:z},z))})]}),D.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.graduationYear.message})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"password",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{id:"password",type:o?"text":"password",placeholder:"",className:"pl-10 pr-10",...i?D.register("password"):F.register("password")}),s.jsx(J,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-1/2 transform -translate-y-1/2 h-full px-3",onClick:()=>c(!o),children:o?s.jsx(DG,{className:"w-4 h-4"}):s.jsx(Id,{className:"w-4 h-4"})})]}),(i?D.formState.errors.password:F.formState.errors.password)&&s.jsx("p",{className:"text-sm text-destructive",children:(I=i?D.formState.errors.password:F.formState.errors.password)==null?void 0:I.message})]}),i&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{id:"confirmPassword",type:o?"text":"password",placeholder:"",className:"pl-10",...D.register("confirmPassword")})]}),D.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.confirmPassword.message})]}),s.jsxs(J,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",disabled:u,children:[u?s.jsx(Zr,{className:"w-4 h-4 mr-2 animate-spin"}):null,i?"Crer le compte et envoyer l'email":"Se connecter"]})]}),s.jsx("div",{className:"w-full",children:s.jsx(J,{variant:"link",onClick:()=>a(!i),disabled:u,className:"w-full flex justify-center items-center text-center break-words px-1",children:i?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})}),i&&s.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En crant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptes."})]})]}),s.jsx(Ile,{open:A,loading:q,email:N,onResend:async()=>{R(!0);try{t&&await H0(t)}finally{R(!1)}},onCheck:async()=>{R(!0);try{t&&(await vf(t),t.emailVerified&&U(!0))}finally{R(!1)}},onClose:()=>{O(!1),U(!1),k("/")},verified:V})]})},pi=({children:t})=>{const{currentUser:e}=mn(),n=mo();return e?s.jsx(s.Fragment,{children:t}):s.jsx(s8,{to:"/auth",state:{from:n},replace:!0})},o6=({cart:t,total:e,showCheckoutButton:n=!0})=>{const r=cr(),i=e,a=0,o=0,c=i+a-o,u=d=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d);return s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(_l,{className:"w-5 h-5"}),"Rcapitulatif de commande"]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Articles (",t.reduce((d,f)=>d+f.quantity,0),")"]}),s.jsx("span",{children:u(i)})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(by,{className:"w-4 h-4"}),"Livraison"]}),s.jsx("span",{className:"text-green-600 font-medium",children:"Gratuite"})]}),o>0,s.jsx(Zs,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Total"}),s.jsx("span",{className:"font-bold text-lg",children:u(c)})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"* TVA incluse"}),n&&s.jsxs(J,{onClick:()=>r("/checkout"),className:"w-full mt-4 bg-gradient-to-r from-primary to-secondary",disabled:t.length===0,children:[s.jsx(Vn,{className:"mr-2 h-4 w-4"}),"Procder au paiement",s.jsx(Ji,{className:"ml-2 h-4 w-4"})]})]})})]})},Lle=()=>{const{currentUser:t}=mn(),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:i,cartTotal:a}=dh(),o=cr(),[c,u]=x.useState(""),[d,f]=x.useState(!1),p=(N,b)=>{if(!(b<1)){if(b>10){xe.error("Maximum 10 articles par produit");return}n(N,b)}},g=N=>{r(N),xe.success("Article retir du panier")},_=()=>{c.trim()&&(f(!0),setTimeout(()=>{c.toLowerCase()==="etudiant10"?xe.success("Code promo appliqu : 10% de rduction"):xe.error("Code promo invalide ou expir"),f(!1)},1e3))};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(J,{variant:"ghost",onClick:()=>o(-1),className:"-ml-4",children:[s.jsx(mc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(_l,{className:"w-8 h-8"}),"Mon Panier"]}),e.length>0&&s.jsxs(J,{variant:"outline",onClick:i,className:"text-destructive hover:text-destructive",children:[s.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Vider le panier"]})]})]}),e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(_l,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre panier est vide"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajout d'articles  votre panier."}),s.jsx(J,{asChild:!0,children:s.jsxs(ze,{to:"/products",children:[s.jsx(vc,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Articles (",e.reduce((N,b)=>N+b.quantity,0),")"]}),s.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>o("/products"),children:[s.jsx(vc,{className:"w-4 h-4 mr-2"}),"Continuer mes achats"]})]})}),s.jsx(me,{children:s.jsx("div",{className:"space-y-4",children:e.map(N=>s.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[N.image?s.jsx("img",{src:N.image,alt:N.name,className:"w-20 h-20 object-cover rounded"}):s.jsx("div",{className:"w-20 h-20 bg-muted rounded flex items-center justify-center",children:s.jsx(vc,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:N.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:N.seller}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(J,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-r-none",onClick:()=>p(N.id,N.quantity-1),disabled:N.quantity<=1,children:s.jsx(J4,{className:"h-3 w-3"})}),s.jsx(Ge,{type:"number",value:N.quantity,onChange:b=>{const S=parseInt(b.target.value);isNaN(S)||p(N.id,S)},className:"h-8 w-12 rounded-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),s.jsx(J,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-l-none",onClick:()=>p(N.id,N.quantity+1),disabled:N.quantity>=10,children:s.jsx(gc,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(N.price*N.quantity)}),s.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>g(N.id),className:"text-destructive hover:text-destructive mt-2",children:[s.jsx(Ka,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})]},N.id))})})]}),s.jsx(fe,{className:"mt-6",children:s.jsxs(me,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(wm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{placeholder:"Code promo",value:c,onChange:N=>u(N.target.value),className:"pl-10"})]}),s.jsx(J,{onClick:_,disabled:!c.trim()||d,children:d?s.jsxs(s.Fragment,{children:[s.jsx(so,{className:"w-4 h-4 mr-2 animate-spin"}),"Application..."]}):"Appliquer"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Essayez le code "ETUDIANT10" pour 10% de rduction'})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(o6,{cart:e,total:a,showCheckoutButton:!0}),!t&&s.jsxs($t,{className:"border-orange-200 bg-orange-50",children:[s.jsx(In,{className:"h-4 w-4 text-orange-600"}),s.jsx(Bt,{className:"text-orange-800",children:"Vous devez tre connect pour finaliser votre commande."})]})]})]})]})},Pg=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},gS=uh((t,e)=>({orders:[],loading:!1,fetchUserOrders:async n=>{if(n)try{t({loading:!0});const r=_n(Vt(Ue,"orders"),Xn("userId","==",n),ei(100)),i=await Fn(r),a=[];i.forEach(o=>{const c=o.data();a.push({id:o.id,...c,createdAt:Pg(c.createdAt),updatedAt:Pg(c.updatedAt)})}),a.sort((o,c)=>c.createdAt.getTime()-o.createdAt.getTime()),t({orders:a,loading:!1})}catch(r){console.error("Error fetching orders:",r),xe.error("Erreur lors du chargement des commandes"),t({loading:!1})}},getOrderById:async n=>{try{const r=await Is(yt(Ue,"orders",n));if(r.exists()){const i=r.data();return{id:r.id,...i,createdAt:Pg(i.createdAt),updatedAt:Pg(i.updatedAt)}}return null}catch(r){return console.error("Error getting order:",r),xe.error("Erreur lors du chargement de la commande"),null}},createOrder:async n=>{try{const r=Math.random().toString(36).substring(2,8).toUpperCase(),i={...n,securityCode:r,createdAt:sr(),updatedAt:sr()},a=await xl(Vt(Ue,"orders"),i),o={id:a.id,...n,createdAt:new Date,updatedAt:new Date};return t(c=>({orders:[o,...c.orders]})),xe.success("Commande cre avec succs !"),a.id}catch(r){throw console.error("Error creating order:",r),xe.error("Erreur lors de la cration de la commande"),r}},updateOrderStatus:async(n,r,i)=>{try{const a={status:r,updatedAt:sr()};i&&(a.notes=i),await yn(yt(Ue,"orders",n),a),t(o=>({orders:o.orders.map(c=>c.id===n?{...c,status:r,notes:i||c.notes,updatedAt:new Date}:c)})),xe.success(`Statut de la commande mis  jour : ${r}`)}catch(a){console.error("Error updating order status:",a),xe.error("Erreur lors de la mise  jour du statut")}},cancelOrder:async(n,r)=>{try{await yn(yt(Ue,"orders",n),{status:"cancelled",notes:r,updatedAt:sr()}),t(i=>({orders:i.orders.map(a=>a.id===n?{...a,status:"cancelled",notes:r,updatedAt:new Date}:a)})),xe.success("Commande annule")}catch(i){console.error("Error cancelling order:",i),xe.error("Erreur lors de l'annulation de la commande")}}})),Fle=()=>{const{currentUser:t,userProfile:e}=mn(),n=cr(),r=mo(),{cart:i,cartTotal:a,clearCart:o}=dh(),{createOrder:c}=gS(),[u,d]=x.useState("shipping"),[f,p]=x.useState(!1),[g,_]=x.useState(null),[N,b]=x.useState({}),[S,w]=x.useState({fullName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:"",city:"",postalCode:"",country:"France",university:(e==null?void 0:e.university)||"",saveInfo:!0}),[y,E]=x.useState({}),[A,O]=x.useState(!1);x.useEffect(()=>{var F;i.length===0&&!((F=r.state)!=null&&F.directCheckout)&&(n("/cart"),xe.error("Votre panier est vide"))},[i,n,r]);const q=()=>{const F={};return S.fullName||(F.fullName="Nom complet requis"),S.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S.email)||(F.email="Format d'email invalide"):F.email="Email requis",S.phone||(F.phone="Tlphone requis"),S.address||(F.address="Adresse requise"),S.city||(F.city="Ville requise"),S.postalCode||(F.postalCode="Code postal requis"),E(F),Object.keys(F).length===0},R=F=>{F.preventDefault(),q()&&(d("payment"),window.scrollTo(0,0))},V=(F,D)=>{_(F),b(D),F==="card"&&D.stripePaymentId&&(d("review"),window.scrollTo(0,0))},U=()=>{if(!g){xe.error("Veuillez slectionner un mode de paiement");return}d("review"),window.scrollTo(0,0)},k=async()=>{if(!t){n("/auth");return}if(!A){xe.error("Veuillez accepter les conditions gnrales");return}p(!0);try{const F={userId:t.uid,items:i,total:a,shipping:S,payment:{method:g,details:N,transactionId:N.stripePaymentId},status:g==="card"?"processing":"pending"},D=await c(F);o(),n(`/order-confirmation/${D}`)}catch(F){console.error("Error placing order:",F),xe.error("Erreur lors de la cration de la commande")}finally{p(!1)}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(J,{variant:"ghost",onClick:()=>n(-1),className:"-ml-4",children:[s.jsx(mc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Finaliser votre commande"}),s.jsxs("div",{className:"flex items-center mt-6",children:[s.jsxs("div",{className:`flex items-center ${u==="shipping"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="shipping"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 font-medium",children:"Livraison"})]}),s.jsx(Ji,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${u==="payment"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="payment"||u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 font-medium",children:"Paiement"})]}),s.jsx(Ji,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${u==="review"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 font-medium",children:"Vrification"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u==="shipping"&&s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(by,{className:"w-5 h-5"}),"Informations de livraison"]}),s.jsx(Ct,{children:"Entrez vos coordonnes pour la livraison"})]}),s.jsx(me,{children:s.jsxs("form",{onSubmit:R,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(Ie,{htmlFor:"fullName",className:"flex items-center gap-1",children:[s.jsx(Jr,{className:"w-4 h-4"}),"Nom complet *"]}),s.jsx(Ge,{id:"fullName",value:S.fullName,onChange:F=>w({...S,fullName:F.target.value}),className:y.fullName?"border-red-500":""}),y.fullName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.fullName})]}),s.jsxs("div",{children:[s.jsxs(Ie,{htmlFor:"email",className:"flex items-center gap-1",children:[s.jsx(vs,{className:"w-4 h-4"}),"Email *"]}),s.jsx(Ge,{id:"email",type:"email",value:S.email,onChange:F=>w({...S,email:F.target.value}),className:y.email?"border-red-500":""}),y.email&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.email})]}),s.jsxs("div",{children:[s.jsxs(Ie,{htmlFor:"phone",className:"flex items-center gap-1",children:[s.jsx(sh,{className:"w-4 h-4"}),"Tlphone *"]}),s.jsx(Ge,{id:"phone",value:S.phone,onChange:F=>w({...S,phone:F.target.value}),className:y.phone?"border-red-500":""}),y.phone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.phone})]}),s.jsxs("div",{children:[s.jsxs(Ie,{htmlFor:"university",className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Universit"]}),s.jsx(Ge,{id:"university",value:S.university,onChange:F=>w({...S,university:F.target.value})})]})]}),s.jsxs("div",{children:[s.jsxs(Ie,{htmlFor:"address",className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Adresse *"]}),s.jsx(Ge,{id:"address",value:S.address,onChange:F=>w({...S,address:F.target.value}),className:y.address?"border-red-500":""}),y.address&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.address})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs(Ie,{htmlFor:"city",className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Ville *"]}),s.jsx(Ge,{id:"city",value:S.city,onChange:F=>w({...S,city:F.target.value}),className:y.city?"border-red-500":""}),y.city&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.city})]}),s.jsxs("div",{children:[s.jsxs(Ie,{htmlFor:"postalCode",className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Code postal *"]}),s.jsx(Ge,{id:"postalCode",value:S.postalCode,onChange:F=>w({...S,postalCode:F.target.value}),className:y.postalCode?"border-red-500":""}),y.postalCode&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.postalCode})]}),s.jsxs("div",{children:[s.jsxs(Ie,{htmlFor:"country",className:"flex items-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),"Pays *"]}),s.jsx(Ge,{id:"country",value:S.country,onChange:F=>w({...S,country:F.target.value}),disabled:!0})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[s.jsx(jx,{id:"saveInfo",checked:S.saveInfo,onCheckedChange:F=>w({...S,saveInfo:F})}),s.jsx(Ie,{htmlFor:"saveInfo",children:"Sauvegarder ces informations pour mes prochaines commandes"})]}),s.jsx("div",{className:"pt-4 flex justify-end",children:s.jsxs(J,{type:"submit",className:"w-full md:w-auto",children:["Continuer vers le paiement",s.jsx(Ji,{className:"ml-2 h-4 w-4"})]})})]})})]}),u==="payment"&&s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-5 h-5"}),"Mthode de paiement"]}),s.jsx(Ct,{children:"Choisissez votre mode de paiement prfr"})]}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(u3,{amount:a,currency:"EUR",onMethodSelect:V,selectedMethod:g}),s.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[s.jsxs(J,{variant:"outline",onClick:()=>d("shipping"),children:[s.jsx(mc,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsxs(J,{onClick:U,disabled:!g||g==="card"&&!N.stripePaymentId,children:["Vrifier la commande",s.jsx(Ji,{className:"ml-2 h-4 w-4"})]})]})]})})]}),u==="review"&&s.jsxs(fe,{children:[s.jsxs(Qe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Pt,{className:"w-5 h-5"}),"Vrification de la commande"]}),s.jsx(Ct,{children:"Vrifiez les dtails de votre commande avant de confirmer"})]}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Informations de livraison"}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>d("shipping"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsx("p",{className:"font-medium",children:S.fullName}),s.jsx("p",{children:S.address}),s.jsxs("p",{children:[S.postalCode," ",S.city,", ",S.country]}),s.jsx("p",{children:S.email}),s.jsx("p",{children:S.phone})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Mthode de paiement"}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>d("payment"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsxs("p",{className:"font-medium",children:[g==="card"&&"Carte bancaire",g==="paypal"&&"PayPal",g==="transfer"&&"Virement bancaire",g==="cash"&&"Paiement  la livraison",g==="lydia"&&"Lydia"]}),g==="card"&&N.stripePaymentId&&s.jsxs("p",{className:"text-green-600 text-sm",children:[s.jsx(Pt,{className:"w-3 h-3 inline mr-1"}),"Paiement autoris"]}),g==="paypal"&&N.paypalEmail&&s.jsx("p",{children:N.paypalEmail}),g==="lydia"&&N.lydiaPhone&&s.jsx("p",{children:N.lydiaPhone})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",i.length,")"]}),s.jsx("div",{className:"space-y-3",children:i.map(F=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[F.image&&s.jsx("img",{src:F.image,alt:F.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:F.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantit: ",F.quantity]})]}),s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(F.price*F.quantity)})]},F.id))})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(jx,{id:"terms",checked:A,onCheckedChange:F=>O(F)}),s.jsxs("div",{children:[s.jsx(Ie,{htmlFor:"terms",className:"font-medium",children:"J'accepte les conditions gnrales de vente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En passant commande, vous acceptez nos conditions gnrales de vente et notre politique de confidentialit."})]})]})}),s.jsxs("div",{className:"flex justify-between pt-4",children:[s.jsxs(J,{variant:"outline",onClick:()=>d("payment"),children:[s.jsx(mc,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsx(J,{onClick:k,disabled:f||!A,className:"bg-gradient-to-r from-primary to-secondary",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Mc,{className:"mr-2 h-4 w-4"}),"Confirmer la commande"]})})]})]})})]})]}),s.jsxs("div",{children:[s.jsx(o6,{cart:i,total:a,showCheckoutButton:!1}),s.jsxs($t,{className:"mt-4 border-blue-200 bg-blue-50",children:[s.jsx(zt,{className:"h-4 w-4 text-blue-600"}),s.jsxs(Bt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Paiement scuris :"})," Toutes vos informations sont cryptes et scurises."]})]}),s.jsx(fe,{className:"mt-4",children:s.jsx(me,{className:"pt-6",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(yl,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Besoin d'aide ?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre quipe est disponible 7j/7 pour vous aider avec votre commande."}),s.jsx(J,{variant:"link",className:"p-0 h-auto text-sm",children:"Contacter le support"})]})]})})})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6",children:[s.jsx(_l,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour finaliser votre achat"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez tre connect pour accder au processus de paiement"}),s.jsx(J,{onClick:()=>n("/auth"),children:"Se connecter"})]})})})},Vle=()=>{const{currentUser:t}=mn(),{orders:e,fetchUserOrders:n,loading:r}=gS(),i=cr(),[a,o]=x.useState(""),[c,u]=x.useState("all"),[d,f]=x.useState("date-desc"),[p,g]=x.useState("all");x.useEffect(()=>{t&&n(t.uid)},[t,n]);const _=()=>e.filter(w=>{const y=!a||w.id.toLowerCase().includes(a.toLowerCase()),E=c==="all"||w.status===c;let A=!0;if(p!=="all"){const O=new Date(w.createdAt),q=new Date;if(p==="last-30-days"){const R=new Date;R.setDate(q.getDate()-30),A=O>=R}else if(p==="last-6-months"){const R=new Date;R.setMonth(q.getMonth()-6),A=O>=R}}return y&&E&&A}).sort((w,y)=>d==="date-desc"?new Date(y.createdAt).getTime()-new Date(w.createdAt).getTime():d==="date-asc"?new Date(w.createdAt).getTime()-new Date(y.createdAt).getTime():d==="total-desc"?y.total-w.total:d==="total-asc"?w.total-y.total:0),N=w=>{switch(w){case"pending":return s.jsxs(at,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[s.jsx(Un,{className:"w-3 h-3 mr-1"}),"En attente"]});case"processing":return s.jsxs(at,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(vn,{className:"w-3 h-3 mr-1"}),"En traitement"]});case"shipped":return s.jsxs(at,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[s.jsx(by,{className:"w-3 h-3 mr-1"}),"Expdie"]});case"delivered":return s.jsxs(at,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(Pt,{className:"w-3 h-3 mr-1"}),"Livre"]});case"cancelled":return s.jsxs(at,{className:"bg-red-100 text-red-800 border-red-200",children:[s.jsx(Pd,{className:"w-3 h-3 mr-1"}),"Annule"]});default:return s.jsx(at,{children:w})}},b=w=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(w),S=()=>{const w={user:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),date:new Date().toISOString(),orders:e.map(O=>({id:O.id,date:O.createdAt,status:O.status,total:O.total,items:O.items.length}))},y=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),E=URL.createObjectURL(y),A=document.createElement("a");A.href=E,A.download=`commandes-${new Date().toISOString().slice(0,10)}.json`,A.click(),URL.revokeObjectURL(E)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(vn,{className:"w-8 h-8"}),"Mes Commandes"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Suivez et grez toutes vos commandes"})]}),s.jsxs(J,{variant:"outline",onClick:S,className:"flex items-center gap-2",children:[s.jsx(ti,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsx(fe,{children:s.jsx(me,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ge,{placeholder:"Rechercher par numro de commande...",value:a,onChange:w=>o(w.target.value),className:"pl-10"})]}),s.jsxs(tn,{value:c,onValueChange:u,children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{placeholder:"Statut"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"all",children:"Tous les statuts"}),s.jsx(Ke,{value:"pending",children:"En attente"}),s.jsx(Ke,{value:"processing",children:"En traitement"}),s.jsx(Ke,{value:"shipped",children:"Expdie"}),s.jsx(Ke,{value:"delivered",children:"Livre"}),s.jsx(Ke,{value:"cancelled",children:"Annule"})]})]}),s.jsxs(tn,{value:p,onValueChange:g,children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{placeholder:"Priode"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"all",children:"Toutes les priodes"}),s.jsx(Ke,{value:"last-30-days",children:"30 derniers jours"}),s.jsx(Ke,{value:"last-6-months",children:"6 derniers mois"})]})]}),s.jsxs(tn,{value:d,onValueChange:f,children:[s.jsx(Ht,{className:"w-40",children:s.jsx(nn,{placeholder:"Trier par"})}),s.jsxs(Gt,{children:[s.jsx(Ke,{value:"date-desc",children:"Date (rcent  ancien)"}),s.jsx(Ke,{value:"date-asc",children:"Date (ancien  rcent)"}),s.jsx(Ke,{value:"total-desc",children:"Prix (lev  bas)"}),s.jsx(Ke,{value:"total-asc",children:"Prix (bas  lev)"})]})]})]})})}),s.jsxs(eu,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-4",children:[s.jsx(on,{value:"all",children:"Toutes"}),s.jsx(on,{value:"active",children:"En cours"}),s.jsx(on,{value:"completed",children:"Termines"}),s.jsx(on,{value:"cancelled",children:"Annules"})]}),s.jsx(ln,{value:"all",className:"space-y-4",children:r?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((w,y)=>s.jsx(fe,{className:"animate-pulse",children:s.jsxs(me,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between mb-4",children:[s.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/6"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},y))}):_().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande trouve"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:e.length===0?"Vous n'avez pas encore pass de commande.":"Aucune commande ne correspond  vos critres de recherche."}),s.jsx(J,{asChild:!0,children:s.jsxs(ze,{to:"/listings",children:[s.jsx(vc,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsx("div",{className:"space-y-4",children:_().map(w=>s.jsx(fe,{className:"hover:shadow-md transition-shadow",children:s.jsxs(me,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),N(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Xs,{className:"w-3 h-3"}),or(new Date(w.createdAt),"dd MMMM yyyy",{locale:Dr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:b(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(J,{asChild:!0,children:s.jsxs(ze,{to:`/order/${w.id}`,children:["Dtails",s.jsx(Ji,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,E)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(vn,{className:"w-6 h-6 text-muted-foreground"})})},E)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(ln,{value:"active",className:"space-y-4",children:_().filter(w=>["pending","processing","shipped"].includes(w.status)).length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Un,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande en cours"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes en cours de traitement."})]}):s.jsx("div",{className:"space-y-4",children:_().filter(w=>["pending","processing","shipped"].includes(w.status)).map(w=>s.jsx(fe,{className:"hover:shadow-md transition-shadow",children:s.jsxs(me,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),N(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Xs,{className:"w-3 h-3"}),or(new Date(w.createdAt),"dd MMMM yyyy",{locale:Dr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:b(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(J,{asChild:!0,children:s.jsxs(ze,{to:`/order/${w.id}`,children:["Dtails",s.jsx(Ji,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,E)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(vn,{className:"w-6 h-6 text-muted-foreground"})})},E)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(ln,{value:"completed",className:"space-y-4",children:_().filter(w=>w.status==="delivered").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Pt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande termine"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore de commandes livres."})]}):s.jsx("div",{className:"space-y-4",children:_().filter(w=>w.status==="delivered").map(w=>s.jsx(fe,{className:"hover:shadow-md transition-shadow",children:s.jsxs(me,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),N(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Xs,{className:"w-3 h-3"}),or(new Date(w.createdAt),"dd MMMM yyyy",{locale:Dr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:b(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(J,{asChild:!0,children:s.jsxs(ze,{to:`/order/${w.id}`,children:["Dtails",s.jsx(Ji,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,E)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(vn,{className:"w-6 h-6 text-muted-foreground"})})},E)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(ln,{value:"cancelled",className:"space-y-4",children:_().filter(w=>w.status==="cancelled").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Pd,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande annule"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes annules."})]}):s.jsx("div",{className:"space-y-4",children:_().filter(w=>w.status==="cancelled").map(w=>s.jsx(fe,{className:"hover:shadow-md transition-shadow",children:s.jsxs(me,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),N(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Xs,{className:"w-3 h-3"}),or(new Date(w.createdAt),"dd MMMM yyyy",{locale:Dr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:b(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(J,{asChild:!0,children:s.jsxs(ze,{to:`/order/${w.id}`,children:["Dtails",s.jsx(Ji,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,E)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(vn,{className:"w-6 h-6 text-muted-foreground"})})},E)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6",children:[s.jsx(vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos commandes"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez tre connect pour accder  l'historique de vos commandes"}),s.jsx(J,{onClick:()=>i("/auth"),children:"Se connecter"})]})})})},zle=()=>{var f,p;const{orderId:t}=V1(),{getOrderById:e}=gS(),[n,r]=x.useState(null),[i,a]=x.useState(!0);x.useEffect(()=>{(async()=>{if(t)try{a(!0);const _=await e(t);r(_)}catch(_){console.error("Error loading order:",_)}finally{a(!1)}})()},[t,e]);const o=g=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(g),c=g=>({card:"Carte bancaire",paypal:"PayPal",transfer:"Virement bancaire",cash:"Paiement  la livraison"})[g]||g,u=()=>{const g=new Date,_=new Date(g);return _.setDate(g.getDate()+3),or(_,"EEEE d MMMM",{locale:Dr})},d=()=>{navigator.clipboard.writeText(t||""),xe.success("Numro de commande copi !")};return i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-3xl mx-auto",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mx-auto"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),s.jsx("div",{className:"h-32 bg-muted rounded"}),s.jsx("div",{className:"h-64 bg-muted rounded"})]})})}):n?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Pt,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Commande confirme !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre commande. Vous recevrez un email de confirmation  ",n.shipping.email,"."]})]}),s.jsxs(fe,{className:"mb-6",children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(vn,{className:"w-5 h-5"}),"Dtails de la commande"]}),s.jsx(at,{className:"bg-green-100 text-green-800 border-green-200",children:n.status==="pending"?"En attente":n.status==="processing"?"En traitement":n.status==="shipped"?"Expdie":n.status==="delivered"?"Livre":"Confirme"})]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Numro de commande"}),s.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t,s.jsx(J,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:d,children:s.jsx(G4,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),s.jsx("p",{className:"font-medium",children:or(new Date(n.createdAt),"dd/MM/yyyy")})]})]}),s.jsx(Zs,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Articles"}),s.jsx("div",{className:"space-y-3",children:n.items.map((g,_)=>s.jsxs("div",{className:"flex items-center gap-3",children:[g.image&&s.jsx("img",{src:g.image,alt:g.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:g.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantit: ",g.quantity]})]}),s.jsx("p",{className:"font-semibold",children:o(g.price*g.quantity)})]},_))})]}),s.jsx(Zs,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),s.jsx("span",{children:o(n.total)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Livraison"}),s.jsx("span",{className:"text-green-600",children:"Gratuite"})]}),s.jsxs("div",{className:"flex justify-between font-bold",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:o(n.total)})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-base",children:[s.jsx(by,{className:"w-4 h-4"}),"Livraison"]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:n.shipping.fullName}),s.jsx("p",{children:n.shipping.address}),s.jsxs("p",{children:[n.shipping.postalCode," ",n.shipping.city,", ",n.shipping.country]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.shipping.phone}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Xs,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Livraison estime: ",u()]})]})})]})})]}),s.jsxs(fe,{children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2 text-base",children:[s.jsx(Vn,{className:"w-4 h-4"}),"Paiement"]})}),s.jsx(me,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:c(n.payment.method)}),n.payment.method==="card"&&((f=n.payment.details)==null?void 0:f.cardNumber)&&s.jsxs("p",{children:["Carte se terminant par ",n.payment.details.cardNumber.slice(-4)]}),n.payment.method==="paypal"&&((p=n.payment.details)==null?void 0:p.paypalEmail)&&s.jsx("p",{children:n.payment.details.paypalEmail}),n.payment.method==="transfer"&&s.jsxs($t,{className:"mt-2",children:[s.jsx(In,{className:"h-4 w-4"}),s.jsx(Bt,{children:"Veuillez effectuer le virement dans les 48h pour valider votre commande."})]}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Un,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Statut: ",n.status==="pending"?"En attente":"Confirm"]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(J,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(ze,{to:"/orders",children:[s.jsx(vn,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsxs(J,{variant:"outline",className:"flex-1",children:[s.jsx(ti,{className:"mr-2 h-4 w-4"}),"Tlcharger la facture"]}),s.jsx(J,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(ze,{to:"/listings",children:[s.jsx(vc,{className:"mr-2 h-4 w-4"}),"Continuer mes achats"]})})]}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-2",children:"Besoin d'aide avec votre commande ?"}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsxs(J,{variant:"link",className:"text-primary",children:[s.jsx(vs,{className:"mr-2 h-4 w-4"}),"Contacter le support"]}),s.jsxs(J,{variant:"link",className:"text-primary",children:[s.jsx(_m,{className:"mr-2 h-4 w-4"}),"FAQ"]})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(fe,{children:s.jsxs(me,{className:"pt-6",children:[s.jsx(In,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Commande introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Nous n'avons pas pu trouver les dtails de cette commande."}),s.jsx(J,{asChild:!0,children:s.jsx(ze,{to:"/orders",children:"Voir mes commandes"})})]})})})},Ule=({id:t,name:e,description:n,price:r,currency:i,image:a,mode:o})=>{const{currentUser:c}=mn(),{addToCart:u}=dh(),d=cr(),f=(_,N)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:N}).format(_),p=()=>{if(!c){xe.error("Veuillez vous connecter pour ajouter au panier"),d("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t})},g=()=>{if(!c){xe.error("Veuillez vous connecter pour acheter"),d("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t}),d("/checkout")};return s.jsxs(fe,{className:"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-md dark:shadow-lg border border-gray-200 dark:border-gray-800 overflow-hidden transition-all hover:shadow-lg",children:[s.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a?s.jsx("img",{src:a,alt:e,className:"w-full h-full object-cover transition-transform hover:scale-105"}):s.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:s.jsx(PG,{className:"w-12 h-12 text-muted-foreground"})}),s.jsx(at,{className:"absolute top-2 right-2 bg-primary",children:o==="subscription"?"Abonnement":"Achat unique"})]}),s.jsxs(Qe,{children:[s.jsx(Je,{children:e}),s.jsx(Ct,{children:n})]}),s.jsx(me,{children:s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[f(r,i),o==="subscription"&&s.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/mois"})]})}),s.jsxs(rD,{className:"flex gap-2",children:[s.jsxs(J,{variant:"outline",className:"flex-1",onClick:p,children:[s.jsx(_l,{className:"w-4 h-4 mr-2"}),"Ajouter"]}),s.jsx(J,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",onClick:g,children:"Acheter"})]})]})},Ob=[{id:"prod_ST3q24zsLbS28p",name:"Bicyclette",description:"Vlo",priceId:"price_1RY7iN2XLhzYQhT9ErigqaGg",price:10,currency:"EUR",mode:"payment",image:"https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"}],$le=t=>Ob.find(e=>e.priceId===t),Ble="pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p";JL(Ble);async function qle(){return{customer_id:"cus_mock123",subscription_id:"sub_mock123",subscription_status:"active",price_id:"price_1RY7iN2XLhzYQhT9ErigqaGg",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"}}async function Wle(){return[{order_id:"ord_mock123",checkout_session_id:"cs_mock123",payment_intent_id:"pi_mock123",amount_subtotal:1e3,amount_total:1e3,currency:"eur",payment_status:"paid",order_status:"completed",order_date:new Date().toISOString()}]}const Hle=()=>{const{getCartItemCount:t}=dh(),e=cr(),n=t();return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(J,{variant:"ghost",onClick:()=>e(-1),className:"-ml-4",children:[s.jsx(mc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(vc,{className:"w-8 h-8"}),"Boutique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Dcouvrez nos produits et services"})]}),n>0&&s.jsxs(J,{onClick:()=>e("/cart"),className:"flex items-center gap-2",children:[s.jsx(_l,{className:"w-4 h-4"}),"Panier (",n,")"]})]})]}),!1,s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ob.map(r=>s.jsx(Ule,{id:r.id,name:r.name,description:r.description,price:r.price,currency:r.currency,image:r.image,mode:r.mode},r.id))}),Ob.length===0&&s.jsx(fe,{className:"text-center py-12",children:s.jsxs(me,{className:"pt-6",children:[s.jsx(vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit disponible"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Revenez bientt pour dcouvrir nos nouveaux produits."})]})})]})},Gle=()=>{const[t]=z1(),e=cr(),{currentUser:n}=mn(),{clearCart:r}=dh(),[i,a]=x.useState(!0),[o,c]=x.useState(null),[u,d]=x.useState(null),[f,p]=x.useState(null),g=t.get("session_id"),_=t.get("type")==="subscription";x.useEffect(()=>{r();async function b(){if(n)try{if(a(!0),_){const w=await qle();c(w)}else{const y=(await Wle())[0];d(y)}}catch(w){console.error("Error fetching checkout result:",w),p("Impossible de charger les dtails de votre achat")}finally{a(!1)}}const S=setTimeout(()=>{b()},2e3);return()=>clearTimeout(S)},[n,_,g,r]);const N=()=>{if(_&&(o!=null&&o.price_id)){const b=$le(o.price_id);return b?b.name:"Abonnement"}else if(u)return"Commande";return"Achat"};return n?i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto text-center",children:[s.jsx(Zr,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement de votre paiement..."}),s.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous confirmons votre transaction."})]})}):f?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs($t,{className:"border-red-200 bg-red-50",children:[s.jsx(In,{className:"h-4 w-4 text-red-600"}),s.jsx(Bt,{className:"text-red-800",children:f})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(J,{asChild:!0,children:s.jsx(ze,{to:"/",children:"Retour  l'accueil"})})})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Pt,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Merci pour votre achat !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Votre ",_?"abonnement":"commande"," a t confirm",_?"":"e","."]})]}),s.jsxs(fe,{className:"mb-6",children:[s.jsx(Qe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[_?s.jsx(Vn,{className:"w-5 h-5"}):s.jsx(vn,{className:"w-5 h-5"}),N()]})}),s.jsx(me,{children:s.jsx("div",{className:"space-y-4",children:_&&o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:o.subscription_status==="active"?"Actif":o.subscription_status==="trialing"?"Priode d'essai":o.subscription_status})]}),o.current_period_end&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Prochain renouvellement:"}),s.jsx("span",{className:"font-medium",children:new Date(o.current_period_end*1e3).toLocaleDateString("fr-FR")})]}),o.payment_method_brand&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Mthode de paiement:"}),s.jsxs("span",{className:"font-medium",children:[o.payment_method_brand.toUpperCase(),"  ",o.payment_method_last4]})]})]}):u?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Numro de commande:"}),s.jsx("span",{className:"font-medium",children:u.order_id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date:"}),s.jsx("span",{className:"font-medium",children:new Date(u.order_date).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant:"}),s.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:u.currency}).format(u.amount_total/100)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:u.order_status==="completed"?"Complt":u.order_status==="pending"?"En attente":u.order_status})]})]}):s.jsx("p",{children:"Merci pour votre achat. Vous recevrez un email de confirmation."})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs($t,{className:"bg-blue-50 border-blue-200",children:[s.jsx(Xs,{className:"h-4 w-4 text-blue-600"}),s.jsx(Bt,{className:"text-blue-800",children:_?"Vous pouvez grer votre abonnement  tout moment depuis votre compte.":"Vous recevrez un email de confirmation avec les dtails de votre commande."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(J,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(ze,{to:"/orders",children:[s.jsx(vn,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsx(J,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(ze,{to:"/products",children:[s.jsx(vc,{className:"mr-2 h-4 w-4"}),"Continuer mes achats",s.jsx(_m,{className:"ml-2 h-4 w-4"})]})})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs($t,{className:"border-orange-200 bg-orange-50",children:[s.jsx(In,{className:"h-4 w-4 text-orange-600"}),s.jsx(Bt,{className:"text-orange-800",children:"Vous devez tre connect pour voir les dtails de votre achat."})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(J,{onClick:()=>e("/auth"),children:"Se connecter"})})]})})};delete ph.Icon.Default.prototype._getIconUrl;ph.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});function Kle({position:t,onChange:e}){function n(){return zN({click(r){e([r.latlng.lat,r.latlng.lng])}}),t?s.jsx($N,{position:t}):null}return s.jsxs(UN,{center:t||[48.8584,2.2945],zoom:15,style:{height:300,width:"100%"},children:[s.jsx(BN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),s.jsx(n,{})]})}const Zle=[{value:"electronics",label:"lectronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"},{value:"donations",label:"Dons"},{value:"exchange",label:"Troc"}],Yle=()=>{const{id:t}=V1(),e=cr(),{currentUser:n}=mn(),{fetchListingById:r,updateListing:i,currentListing:a,loading:o}=dp(),[c,u]=x.useState({title:"",description:"",price:"",images:[]}),[d,f]=x.useState([]),[p,g]=x.useState(!1),[_,N]=x.useState(null),[b,S]=x.useState(""),[w,y]=x.useState([]),[E,A]=x.useState(""),[O,q]=x.useState(""),[R,V]=x.useState(null),[U,k]=x.useState(!1);x.useEffect(()=>{t&&r(t)},[t,r]),x.useEffect(()=>{var I;a&&(u({title:a.title||"",description:a.description||"",price:((I=a.price)==null?void 0:I.toString())||"",images:a.images||[]}),S(a.category||""),y(a.tags||[]),q(a.meetingLocation||""),a.coordinates&&V(a.coordinates))},[a]);const F=I=>{u({...c,[I.target.name]:I.target.value})},D=I=>{if(!I.target.files)return;const z=Array.from(I.target.files);f(B=>[...B,...z])},P=I=>{u({...c,images:c.images.filter((z,B)=>B!==I)})},H=I=>{f(d.filter((z,B)=>B!==I))},ee=()=>{E.trim()&&!w.includes(E.trim())&&w.length<5&&(y([...w,E.trim()]),A(""))},Z=I=>{y(w.filter(z=>z!==I))},K=async I=>{if(I.preventDefault(),!(!t||!n)){g(!0);try{let z=[];d.length>0&&(z=await Promise.all(d.map(X=>Qle(X,n.uid))));const B=[...c.images,...z];await i(t,{...c,price:parseFloat(c.price),images:B,category:b,tags:w,meetingLocation:O,coordinates:R}),e(`/listing/${t}`)}catch{N("Erreur lors de la mise  jour de l'annonce")}finally{g(!1)}}};return o?s.jsx("div",{children:"Chargement..."}):a?_?s.jsx("div",{className:"text-red-500",children:_}):s.jsx("form",{onSubmit:K,className:"max-w-lg mx-auto mt-10",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[s.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Modifier mon annonce"}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Ie,{htmlFor:"title",className:"block mb-1 text-gray-700",children:"Titre"}),s.jsx(Ge,{id:"title",name:"title",value:c.title,onChange:F,placeholder:"Titre",className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Ie,{htmlFor:"description",className:"block mb-1 text-gray-700",children:"Description"}),s.jsx(ri,{id:"description",name:"description",value:c.description,onChange:F,placeholder:"Description",className:"w-full",rows:4})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Ie,{htmlFor:"price",className:"block mb-1 text-gray-700",children:"Prix ()"}),s.jsx(Ge,{id:"price",name:"price",value:c.price,onChange:F,placeholder:"Prix",type:"number",min:0,className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Ie,{htmlFor:"category",className:"block mb-1 text-gray-700",children:"Catgorie"}),s.jsxs("select",{id:"category",name:"category",value:b,onChange:I=>S(I.target.value),className:"w-full border rounded px-3 py-2 bg-gray-50",required:!0,children:[s.jsx("option",{value:"",children:"Slectionnez une catgorie"}),Zle.map(I=>s.jsx("option",{value:I.value,children:I.label},I.value))]})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Ie,{htmlFor:"meetingLocation",className:"block mb-1 text-gray-700",children:"Point de rencontre"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(Ge,{id:"meetingLocation",name:"meetingLocation",value:O,onChange:I=>q(I.target.value),placeholder:"Ex: Bibliothque universitaire, Hall principal...",className:"flex-1"}),s.jsx(J,{type:"button",variant:"outline",onClick:async()=>{if(!navigator.geolocation)return alert("Golocalisation non supporte");k(!0),navigator.geolocation.getCurrentPosition(async I=>{const{latitude:z,longitude:B}=I.coords;V([z,B]);const X=await xT(z,B);q(X),k(!1)},()=>k(!1))},disabled:U,children:""})]}),s.jsx("div",{className:"mt-3",children:s.jsx(Kle,{position:R,onChange:async I=>{V(I);const z=await xT(I[0],I[1]);q(z)}})})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Ie,{className:"block mb-1 text-gray-700",children:"Tags (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:w.map(I=>s.jsxs("span",{className:"bg-gray-100 rounded px-2 py-1 flex items-center gap-1 text-sm",children:[I,s.jsx(J,{type:"button",size:"icon",variant:"ghost",className:"w-4 h-4 p-0",onClick:()=>Z(I),children:""})]},I))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ge,{placeholder:"Ajouter un tag...",value:E,onChange:I=>A(I.target.value),onKeyDown:I=>I.key==="Enter"&&(I.preventDefault(),ee()),className:"flex-1"}),s.jsx(J,{type:"button",onClick:ee,disabled:!E.trim()||w.length>=5,children:"Ajouter"})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx(Ie,{className:"block mb-1 text-gray-700",children:"Photos"}),s.jsxs("div",{className:"flex flex-wrap gap-4 mt-2",children:[c.images.map((I,z)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:I,alt:`photo-${z}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx(J,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>P(z),children:""})]},z)),d.map((I,z)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:URL.createObjectURL(I),alt:`new-photo-${z}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx(J,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>H(z),children:""})]},z)),s.jsxs("label",{className:"w-20 h-20 flex items-center justify-center border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition",children:[s.jsx("span",{className:"text-2xl text-gray-400",children:"+"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:D,disabled:p})]})]})]}),s.jsx(J,{type:"submit",className:"w-full",disabled:p,children:p?"Enregistrement...":"Enregistrer les modifications"}),_&&s.jsx("div",{className:"text-red-500 text-center mt-2",children:_})]})}):s.jsx("div",{className:"text-red-500",children:"Annonce introuvable"})};async function Qle(t,e){const n=Date.now(),r=`listings/${e}/${n}_${t.name}`,i=Yj(Xj,r),a=await Kj(i,t);return await Zj(a.ref)}async function xT(t,e){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${t}&lon=${e}`)).json()).display_name}const l6="Q3E5Y56YF4",Xle="5f0e550b9ede2710482ad296ad3b3cae",Jle="ff26b6f0fa03bc6384566ea42dfe0ab4",c6="study-market-jobs",ece="study-market-services",tce="student-housing",nce="study-market-materiel";async function rce(t){try{return(await(await fetch(`https://remotive.com/api/remote-jobs?search=${encodeURIComponent(t)}`)).json()).jobs.map(r=>({id:r.id.toString(),title:r.title,company:r.company_name,company_logo:r.company_logo_url,location:r.candidate_required_location,description:r.description,url:r.url,source:"Remotive",publication_date:r.publication_date,contract_type:r.job_type,remote:r.remote,tags:r.tags}))}catch(e){return console.error("Erreur Remotive:",e),[]}}async function sce(t){try{return((await(await fetch("https://jooble.org/api/167d4120-b9bf-4c78-b340-83d55ef013fc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keywords:t,location:"France"})})).json()).jobs||[]).map((r,i)=>({id:r.id||`jooble-${i}`,title:r.title,company:r.company,location:r.location,description:r.snippet,url:r.link,source:"Jooble",publication_date:r.date}))}catch(e){return console.error("Erreur Jooble:",e),[]}}async function ice(t){try{return((await(await fetch(`https://jsearch.p.rapidapi.com/search?query=${encodeURIComponent(t)}&location=France`,{headers:{"X-RapidAPI-Key":"685dd8c263msh87410947d828a2ep1772d3jsn329584c927b7","X-RapidAPI-Host":"jsearch.p.rapidapi.com"}})).json()).data||[]).map(r=>({id:r.job_id,title:r.job_title,company:r.employer_name,company_logo:r.employer_logo,location:r.job_city||r.job_country,description:r.job_description,url:r.job_apply_link,source:"JSearch",publication_date:r.job_posted_at_datetime_utc,contract_type:r.job_employment_type,remote:r.job_is_remote,tags:r.job_tags}))}catch(e){return console.error("Erreur JSearch:",e),[]}}async function ace(t){try{const e=`https://api.adzuna.com/v1/api/jobs/fr/search/1?app_id=f9025803&app_key=70805f677e7ed58080609ad89bd18a47&results_per_page=20&what=${encodeURIComponent(t)}&where=France`;return((await(await fetch(e)).json()).results||[]).map(i=>{var o,c;const a=i;return{id:a.id,title:a.title,company:(o=a.company)==null?void 0:o.display_name,location:(c=a.location)==null?void 0:c.display_name,description:a.description,url:a.redirect_url,source:"Adzuna",publication_date:a.created,contract_type:a.contract_type}})}catch(e){return console.error("Erreur Adzuna:",e),[]}}async function oce(t){try{const e=`https://www.themuse.com/api/public/jobs?location=France&page=1&category=${encodeURIComponent(t)}`;return((await(await fetch(e)).json()).results||[]).map(i=>{var o,c;const a=i;return{id:a.id,title:a.name,company:(o=a.company)==null?void 0:o.name,location:Array.isArray(a.locations)?a.locations.map(u=>u.name).join(", "):"",description:a.contents,url:(c=a.refs)==null?void 0:c.landing_page,source:"The Muse",publication_date:a.publication_date}})}catch(e){return console.error("Erreur The Muse:",e),[]}}async function lce(t){try{const e=`https://linkedin-job-search-api.p.rapidapi.com/active-jb-7d?limit=10&offset=0&location_filter=France&keywords=${encodeURIComponent(t)}`;return((await(await fetch(e,{headers:{"X-RapidAPI-Key":"685dd8c263msh87410947d828a2ep1772d3jsn329584c927b7","X-RapidAPI-Host":"linkedin-job-search-api.p.rapidapi.com"}})).json()).jobs||[]).map((i,a)=>{const o=i;return{id:o.job_id||`linkedin-${a}`,title:o.title,company:o.company,location:o.location,description:o.description,url:o.job_url,source:"LinkedIn",publication_date:o.posted_date}})}catch(e){return console.error("Erreur LinkedIn:",e),[]}}async function u6(t){try{console.log(" Recherche Algolia avec query:",t||"*");const e=l6,n=Jle,i=`https://${e}-dsn.algolia.net/1/indexes/${c6}/query`,a={query:t||"*",hitsPerPage:1e3,page:0,attributesToRetrieve:["*"],typoTolerance:!0,ignorePlurals:!0,removeStopWords:!0,analyticsTags:["job-search"]};console.log(" Recherche dans l'index: study-market-jobs"),console.log(" URL:",i),console.log(" Rcupration de toutes les offres disponibles...");let o=[],c=0;const u=10;for(;c<u;){const f={...a,page:c},p=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json","X-Algolia-API-Key":n,"X-Algolia-Application-Id":e},body:JSON.stringify(f)});if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const g=await p.json(),_=g.hits||[],N=g.nbHits||0;if(console.log(` Page ${c+1}: ${_.length} offres rcupres`),_.length===0){console.log(" Plus d'offres  rcuprer");break}if(o=o.concat(_),o.length>=N){console.log(` Toutes les ${N} offres rcupres`);break}c++}return console.log(` Total: ${o.length} offres rcupres depuis l'index "study-market-jobs"`),o.length===0?(console.log(" Aucun rsultat trouv dans l'index study-market-jobs"),[]):(console.log(" Structure du premier hit:",JSON.stringify(o[0],null,2)),o.map((f,p)=>{const g=f,_=()=>g.objectID||g.id||g.job_id||g._id||`algolia-${p}`,N=()=>g.title||g.job_title||g.position||g.name||"Titre non spcifi",b=()=>g.company||g.company_name||g.employer||g.employer_name||"Entreprise non spcifie",S=()=>g.location||g.city||g.country||g.address||"France",w=()=>g.description||g.summary||g.job_description||g.content||"",y=()=>g.url||g.apply_url||g.job_url||g.link||"#",E=()=>g.publication_date||g.date||g.posted_date||g.created_at||"",A=()=>g.contract_type||g.job_type||g.employment_type||g.type||"";return{id:_(),title:N(),company:b(),company_logo:g.company_logo||g.logo||"",location:S(),description:w(),url:y(),source:"Algolia",publication_date:E(),contract_type:A(),remote:!!(g.remote||g.is_remote||g.remote_ok),tags:Array.isArray(g.tags)?g.tags:Array.isArray(g.skills)?g.skills:[]}}))}catch(e){throw console.error(" Erreur complte Algolia:",e),new Error(`Erreur Algolia: ${e instanceof Error?e.message:"Erreur inconnue"}`)}}async function cce(t){console.log(" Dbut de la recherche pour:",t);const e=[{name:"Remotive",func:rce},{name:"Jooble",func:sce},{name:"JSearch",func:ice},{name:"Adzuna",func:ace},{name:"The Muse",func:oce},{name:"LinkedIn",func:lce},{name:"Algolia",func:u6}],r=(await Promise.allSettled(e.map(async a=>{console.log(` Appel API ${a.name}...`);try{const o=await a.func(t);return console.log(` ${a.name}: ${o.length} offres rcupres`),o}catch(o){return console.error(` ${a.name} a chou:`,o),[]}}))).filter(a=>a.status==="fulfilled").flatMap(a=>a.value||[]);console.log(` Total final: ${r.length} offres de ${e.length} sources`);const i=r.reduce((a,o)=>(a[o.source||"unknown"]=(a[o.source||"unknown"]||0)+1,a),{});return console.log(" Rsum par source:",i),r}function vS(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}async function uce(t,e){await xl(Vt(Ue,"users",t,"favoriteJobs"),vS(e))}async function yT(t){const e=_n(Vt(Ue,"users",t,"favoriteJobs"));return(await Fn(e)).docs.map(r=>({...r.data(),id:r.id}))}async function dce(t,e){const n=x4(Ue),r=Vt(Ue,"users",t,"searchedJobs");e.forEach(i=>{const a=yt(r);n.set(a,vS(i))}),await n.commit()}async function hce(t,e,n){const r=s4(),i=yt(r,"jobOffersCache",t),a=new Date().toISOString(),o=Array.isArray(n)?n.map(c=>vS(c)):[];await oc(i,{[e]:{jobs:o,fetchedAt:a}},{merge:!0})}const fce=({image:t,title:e,subtitle:n,location:r,date:i,isFavorite:a=!1,onFavoriteToggle:o,url:c,companyName:u})=>{const d=()=>{c&&window.open(c,"_blank","noopener,noreferrer")},f=g=>{g.stopPropagation(),o&&o()},p=g=>{g.stopPropagation()};return s.jsxs("div",{className:"job-card group relative flex flex-col rounded-[12px] bg-white dark:bg-gray-900 shadow-md dark:shadow-lg overflow-hidden transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-2xl min-h-[320px] md:min-h-[420px] font-sans cursor-pointer",style:{minHeight:320},onClick:d,children:[s.jsxs("div",{className:"card-image relative w-full aspect-[16/9] overflow-hidden",style:{minHeight:160,maxHeight:180},children:[s.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover",style:{objectFit:"cover",minHeight:160,maxHeight:180},onError:g=>{const _=g.target;_.src.endsWith("/assets/job-default.jpg")||(_.src="/assets/job-default.jpg")}}),s.jsx("div",{className:"overlay absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/70 pointer-events-none"}),s.jsxs("div",{className:"absolute top-2 right-2 md:top-3 md:right-3 flex flex-col gap-1 md:gap-2 z-10",children:[s.jsx("button",{className:"bg-white/90 dark:bg-gray-800/90 rounded-full p-1.5 md:p-2 shadow hover:bg-blue-100 dark:hover:bg-blue-900 transition","aria-label":a?"Retirer des favoris":"Ajouter aux favoris",onClick:f,children:s.jsx(Or,{className:a?"fill-red-500 text-red-500":"text-blue-400 dark:text-blue-300",strokeWidth:2,size:18,"aria-hidden":"true"})}),s.jsx("button",{className:"bg-white/90 dark:bg-gray-800/90 rounded-full p-1.5 md:p-2 shadow hover:bg-blue-100 dark:hover:bg-blue-900 transition","aria-label":"Partager",onClick:p,children:s.jsx(wy,{className:"text-blue-400 dark:text-blue-300",strokeWidth:2,size:18,"aria-hidden":"true"})})]})]}),u&&s.jsxs("div",{className:"flex items-center gap-1 md:gap-2 mb-2 px-3 md:px-5 pt-3",children:[s.jsx(q4,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-400 dark:text-blue-300","aria-hidden":"true"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-medium text-xs md:text-sm",children:u})]}),s.jsxs("div",{className:"card-content flex-1 flex flex-col px-3 md:px-5 py-2 text-left bg-white/80 dark:bg-gray-900/80 backdrop-blur-md justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"job-title font-bold text-base md:text-lg mb-1 leading-tight break-words font-sans text-gray-900 dark:text-gray-100",children:e}),n&&s.jsx("div",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2 bg-blue-50 dark:bg-blue-900 px-2 py-1 rounded",children:n})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-4 w-full",children:[s.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-300 text-sm gap-2",children:[s.jsx(Mr,{className:"w-4 h-4 text-blue-400 dark:text-blue-300","aria-hidden":"true"}),s.jsx("span",{children:r})]}),i&&s.jsxs("div",{className:"flex items-center text-xs text-gray-400 ml-auto",children:[s.jsx(Xs,{className:"w-4 h-4 mr-1","aria-hidden":"true"}),i]})]})]})]})},mce="3eFVqLX19mBYTUVCMxhpPH156xmJ8K5ccP5TBwH5R2h90pHMmgb638AS";async function pce(t){const e=await fetch(`https://api.pexels.com/v1/search?query=${encodeURIComponent(t)}&per_page=1`,{headers:{Authorization:mce}});if(!e.ok)return null;const n=await e.json();return n.photos&&n.photos.length>0?n.photos[0].src.large:null}function gce(t){const e=typeof t=="string"?new Date(t):t,r=Math.floor((new Date().getTime()-e.getTime())/(1e3*60*60*24));return r===0?"aujourd'hui":r===1?"hier":r===2?"avant-hier":e.toLocaleDateString("fr-FR")}const cf=12;function vce(t){var c,u;const e={marketing:"marketing, digital, social media, office",developpeur:"developer, code, computer, laptop, programming, team",developer:"developer, code, computer, laptop, programming, team",business:"business, meeting, office, people, suit",stage:"internship, young people, learning, teamwork",alternance:"apprenticeship, student, learning, office",cdi:"career, professional, office, team",remote:"remote work, home office, laptop",design:"design, creative, digital, graphics",data:"data, analytics, charts, computer",sales:"sales, business, meeting, handshake"};let n="professional, office, business";const r=((c=t.title)==null?void 0:c.toLowerCase())||"",i=((u=t.contract_type)==null?void 0:u.toLowerCase())||"";for(const d in e)if(r.includes(d)||i.includes(d)){n=e[d];break}const a=t.location?`, ${t.location}`:"",o=t.company?`, ${t.company}`:"";return`${t.title}${o}${a}, ${n}`.trim()}const xce=()=>{const[t,e]=x.useState(""),[n,r]=x.useState([]),[i,a]=x.useState(!1),{currentUser:o}=mn(),[c,u]=x.useState([]),[d,f]=x.useState(1),[p,g]=x.useState({}),[_,N]=x.useState(null),[b,S]=x.useState(!1),[w,y]=x.useState(null);x.useEffect(()=>{(async()=>{if(o)try{const F=await yT(o.uid);u(F)}catch(F){console.error("Erreur lors du chargement des favoris:",F)}})()},[o]),x.useEffect(()=>{(async()=>{try{console.log(" Test de connexion Algolia...");const F=await u6("");console.log(" Test Algolia russi:",F.length,"offres trouves"),F.length===0&&console.log(" Aucune offre dans l'index Algolia")}catch(F){console.error(" Erreur test Algolia:",F)}})()},[]),x.useEffect(()=>{if(n.length===0)return;(async()=>{const F={},D={},P=(d-1)*cf,H=P+cf,ee=n.slice(P,H);for(const Z of ee){const K=vce(Z),I=Z.id+Z.source;if(p[I]){F[I]=p[I];continue}if(D[K]){F[I]=D[K];continue}try{const z=await pce(K);z?(D[K]=z,F[I]=z):F[I]="/assets/job-default.jpg"}catch(z){console.warn("Erreur chargement image pour",Z.title,z),F[I]="/assets/job-default.jpg"}}g(Z=>({...Z,...F}))})()},[n,d,p]),x.useEffect(()=>{E("")},[]);const E=async k=>{const F=k??t;a(!0),N(null),S(!0);try{console.log(" Recherche avec query:",F);const D=await cce(F);console.log(" Rsultats par source:");const P=D.reduce((H,ee)=>(H[ee.source||"unknown"]=(H[ee.source||"unknown"]||0)+1,H),{});if(console.table(P),r(D),f(1),o&&D.length>0)try{await dce(o.uid,D);const H={};for(const ee of D){const Z=ee.source||"unknown";H[Z]||(H[Z]=[]),H[Z].push(ee)}for(const ee in H)await hce(o.uid,ee,H[ee])}catch(H){console.error("Erreur Firestore:",H)}D.length===0&&N("Aucune offre trouve pour cette recherche. Essayez avec des mots-cls diffrents.")}catch(D){console.error(" Erreur lors de la recherche:",D),N("Erreur lors de la recherche : "+(D instanceof Error?D.message:String(D)))}finally{a(!1)}},A=async k=>{if(!o){alert("Vous devez tre connect pour ajouter aux favoris.");return}try{if(c.some(D=>D.id===k.id&&D.source===k.source)){alert("Cette offre est dj dans vos favoris !");return}await uce(o.uid,k),u(D=>[...D,k]),alert("Offre ajoute aux favoris !")}catch(F){console.error("Erreur ajout favori:",F),alert("Erreur lors de l'ajout aux favoris.")}},O=async()=>{if(!o){alert("Vous devez tre connect pour voir vos favoris.");return}try{const k=await yT(o.uid);u(k),console.log("Favoris chargs:",k.length)}catch(k){console.error("Erreur chargement favoris:",k),alert("Erreur lors du chargement des favoris.")}},q=w?n.filter(k=>(k.source||"unknown")===w):n,R=Math.ceil(q.length/cf),V=q.slice((d-1)*cf,d*cf),U=n.reduce((k,F)=>{const D=F.source||"unknown";return k[D]=(k[D]||0)+1,k},{});return s.jsxs("div",{className:"max-w-7xl mx-auto px-1 sm:px-6 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Recherche d'emploi"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-2 mb-4",children:[s.jsx("input",{className:"border rounded px-3 py-2 flex-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",value:t,onChange:k=>e(k.target.value),placeholder:"Ex: dveloppeur, marketing, designer...",onKeyPress:k=>k.key==="Enter"&&E()}),s.jsx("button",{className:"bg-blue-600 dark:bg-blue-700 text-white px-4 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-800 transition disabled:opacity-50",onClick:()=>E(),disabled:i,children:i?"Recherche...":"Tout rechercher"}),s.jsxs("button",{onClick:O,className:"bg-yellow-500 dark:bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-600 dark:hover:bg-yellow-700 transition",children:["Mes favoris (",c.length,")"]})]}),b&&s.jsxs("div",{className:"mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow",children:[s.jsxs("div",{className:"text-gray-600 dark:text-gray-300 font-medium mb-2",children:[n.length," offres trouves"]}),Object.keys(U).length>0&&s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsxs("button",{className:`text-xs px-2 py-1 rounded ${w?"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-blue-200 text-blue-900 font-bold"}`,onClick:()=>{y(null),f(1)},children:["Tous: ",n.length]}),Object.entries(U).map(([k,F])=>s.jsxs("button",{className:`text-xs px-2 py-1 rounded ${w===k?"bg-blue-500 text-white font-bold":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,onClick:()=>{y(k),f(1)},children:[k,": ",F]},k))]})]}),V.length>0&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-6 mb-6",children:V.map(k=>s.jsx(fce,{image:p[k.id+k.source]||"/assets/job-default.jpg",companyName:k.company||void 0,title:k.title||"Titre non spcifi",subtitle:k.contract_type,location:k.location||"Non spcifi",date:k.publication_date?gce(k.publication_date):void 0,isFavorite:c.some(F=>F.id===k.id&&F.source===k.source),onFavoriteToggle:()=>A(k),url:k.url},`${k.id}-${k.source}`))}),R>1&&s.jsxs("div",{className:"flex justify-center items-center gap-1 md:gap-2 mb-6 overflow-x-auto px-1 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[s.jsx("button",{className:"px-3 py-1 rounded border bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 disabled:opacity-50",onClick:()=>f(d-1),disabled:d===1,children:"Prcdent"}),Array.from({length:R}).map((k,F)=>{const D=F+1,P=D===d;return D===1||D===2||D===R||D===R-1||Math.abs(D-d)<=1?s.jsx("button",{className:`px-3 py-1 rounded border ${P?"bg-blue-600 text-white font-bold":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700"} transition`,onClick:()=>f(D),disabled:P,children:D},D):D===3&&d>5||D===R-2&&d<R-4?s.jsx("span",{children:"..."},D):null}),s.jsx("button",{className:"px-3 py-1 rounded border bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 disabled:opacity-50",onClick:()=>f(d+1),disabled:d===R,children:"Suivant"})]}),c.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsxs("h2",{className:"font-bold text-xl mb-4 text-gray-900 dark:text-gray-100",children:["Mes offres favorites (",c.length,")"]}),s.jsx("div",{className:"space-y-4",children:c.map(k=>s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 rounded-lg shadow p-4 border border-yellow-200 dark:border-yellow-700",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:k.title}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[k.company,"  ",k.location]}),s.jsxs("div",{className:"flex gap-2",children:[k.contract_type&&s.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 px-2 py-1 rounded",children:k.contract_type}),s.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:k.source})]})]}),s.jsx("div",{className:"flex gap-2 ml-4",children:s.jsx("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 dark:bg-blue-700 text-white px-3 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-800 transition text-sm",children:"Voir l'offre"})})]})},`fav-${k.id}-${k.source}`))})]}),n.length===0&&!i&&b&&s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8 bg-white dark:bg-gray-800 rounded-lg p-8",children:[s.jsx("p",{className:"text-lg mb-2",children:"Aucune offre trouve"}),s.jsx("p",{className:"text-sm",children:"Essayez avec des mots-cls diffrents ou vrifiez votre configuration API."})]}),!b&&s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8 bg-white dark:bg-gray-800 rounded-lg p-8",children:[s.jsx("p",{className:"text-lg mb-2",children:"Commencez votre recherche"}),s.jsx("p",{className:"text-sm",children:`Saisissez des mots-cls et cliquez sur "Rechercher" pour trouver des offres d'emploi.`})]}),_&&s.jsx("div",{className:"text-center text-red-500 dark:text-red-400 mt-8 bg-red-50 dark:bg-red-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:s.jsx("p",{className:"font-semibold text-base",children:_})}),i&&s.jsx("div",{className:"text-center mt-8",children:s.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-current mr-3"}),"Recherche en cours..."]})})]})};var yce="Expected a function",_T=NaN,_ce="[object Symbol]",wce=/^\s+|\s+$/g,bce=/^[-+]0x[0-9a-f]+$/i,jce=/^0b[01]+$/i,Nce=/^0o[0-7]+$/i,Sce=parseInt,Ece=typeof Fu=="object"&&Fu&&Fu.Object===Object&&Fu,Cce=typeof self=="object"&&self&&self.Object===Object&&self,kce=Ece||Cce||Function("return this")(),Tce=Object.prototype,Pce=Tce.toString,Ice=Math.max,Ace=Math.min,T_=function(){return kce.Date.now()};function Rce(t,e,n){var r,i,a,o,c,u,d=0,f=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(yce);e=wT(e)||0,Db(n)&&(f=!!n.leading,p="maxWait"in n,a=p?Ice(wT(n.maxWait)||0,e):a,g="trailing"in n?!!n.trailing:g);function _(q){var R=r,V=i;return r=i=void 0,d=q,o=t.apply(V,R),o}function N(q){return d=q,c=setTimeout(w,e),f?_(q):o}function b(q){var R=q-u,V=q-d,U=e-R;return p?Ace(U,a-V):U}function S(q){var R=q-u,V=q-d;return u===void 0||R>=e||R<0||p&&V>=a}function w(){var q=T_();if(S(q))return y(q);c=setTimeout(w,b(q))}function y(q){return c=void 0,g&&r?_(q):(r=i=void 0,o)}function E(){c!==void 0&&clearTimeout(c),d=0,r=u=i=c=void 0}function A(){return c===void 0?o:y(T_())}function O(){var q=T_(),R=S(q);if(r=arguments,i=this,u=q,R){if(c===void 0)return N(u);if(p)return c=setTimeout(w,e),_(u)}return c===void 0&&(c=setTimeout(w,e)),o}return O.cancel=E,O.flush=A,O}function Db(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Mce(t){return!!t&&typeof t=="object"}function Oce(t){return typeof t=="symbol"||Mce(t)&&Pce.call(t)==_ce}function wT(t){if(typeof t=="number")return t;if(Oce(t))return _T;if(Db(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Db(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(wce,"");var n=jce.test(t);return n||Nce.test(t)?Sce(t.slice(2),n?2:8):bce.test(t)?_T:+t}var Dce=Rce;const Lce=El(Dce);var Fce=typeof Element<"u",Vce=typeof Map=="function",zce=typeof Set=="function",Uce=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function lv(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!lv(t[r],e[r]))return!1;return!0}var a;if(Vce&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;for(a=t.entries();!(r=a.next()).done;)if(!lv(r.value[1],e.get(r.value[0])))return!1;return!0}if(zce&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(Uce&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(Fce&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&t.$$typeof)&&!lv(t[i[r]],e[i[r]]))return!1;return!0}return t!==t&&e!==e}var $ce=function(e,n){try{return lv(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Bce=El($ce);var d6=x.createContext({onInternalStateUpdate:function(){},createHrefForState:function(){return"#"},onSearchForFacetValues:function(){},onSearchStateChange:function(){},onSearchParameters:function(){},store:{},widgetsManager:{},mainTargetedIndex:""}),qce=d6.Consumer;d6.Provider;var h6=x.createContext(void 0),Wce=h6.Consumer;h6.Provider;function Lb(t){"@babel/helpers - typeof";return Lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lb(t)}var Hce=Object.prototype.hasOwnProperty,bT=function(e,n){if(e===n)return!0;var r=Object.keys(e),i=Object.keys(n);if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(!Hce.call(n,r[a])||e[r[a]]!==n[r[a]])return!1;return!0},Gce=function(e){return e.displayName||e.name||"UnknownComponent"};Promise.resolve();var Kce=function(e){return Lb(e)==="object"&&e!==null&&!Array.isArray(e)},Zce=function t(e){return Object.keys(e).forEach(function(n){var r=e[n];Kce(r)&&(Yce(r)?t(r):delete e[n])}),e};function Yce(t){return t&&Object.keys(t).length>0}var Qce=["contextValue"];function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(t)}function Tx(){return Tx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tx.apply(this,arguments)}function Xce(t,e){if(t==null)return{};var n=Jce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jce(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function jT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jT(Object(n),!0).forEach(function(r){Wr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f6(r.key),r)}}function nue(t,e,n){return e&&tue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fb(t,e)}function Fb(t,e){return Fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Fb(t,e)}function sue(t){var e=aue();return function(){var r=Px(t),i;if(e){var a=Px(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return iue(this,i)}}function iue(t,e){if(e&&(Gd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return os(t)}function os(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Px(t){return Px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Px(t)}function Wr(t,e,n){return e=f6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f6(t){var e=oue(t,"string");return Gd(e)==="symbol"?e:String(e)}function oue(t,e){if(Gd(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lue(t){if(!t.displayName)throw new Error("`createConnector` requires you to provide a `displayName` property.");var e=typeof t.getSearchParameters=="function"||typeof t.getMetadata=="function"||typeof t.transitionState=="function";return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=function(a){rue(c,a);var o=sue(c);function c(u){var d;return eue(this,c),d=o.call(this,u),Wr(os(d),"unsubscribe",void 0),Wr(os(d),"unregisterWidget",void 0),Wr(os(d),"cleanupTimerRef",null),Wr(os(d),"isUnmounting",!1),Wr(os(d),"state",{providedProps:d.getProvidedProps(d.props)}),Wr(os(d),"refine",function(){for(var f,p=arguments.length,g=new Array(p),_=0;_<p;_++)g[_]=arguments[_];d.props.contextValue.onInternalStateUpdate((f=t.refine).call.apply(f,[os(d),d.props,d.props.contextValue.store.getState().widgets].concat(g)))}),Wr(os(d),"createURL",function(){for(var f,p=arguments.length,g=new Array(p),_=0;_<p;_++)g[_]=arguments[_];return d.props.contextValue.createHrefForState((f=t.refine).call.apply(f,[os(d),d.props,d.props.contextValue.store.getState().widgets].concat(g)))}),Wr(os(d),"searchForFacetValues",function(){for(var f,p=arguments.length,g=new Array(p),_=0;_<p;_++)g[_]=arguments[_];d.props.contextValue.onSearchForFacetValues((f=t.searchForFacetValues).call.apply(f,[os(d),d.props,d.props.contextValue.store.getState().widgets].concat(g)))}),t.getSearchParameters&&d.props.contextValue.onSearchParameters(t.getSearchParameters.bind(os(d)),{ais:d.props.contextValue,multiIndexContext:d.props.indexContextValue},d.props,t.getMetadata&&t.getMetadata.bind(os(d)),t.displayName),d}return nue(c,[{key:"componentDidMount",value:function(){var d=this;this.cleanupTimerRef&&(clearTimeout(this.cleanupTimerRef),this.cleanupTimerRef=null),this.unsubscribe=this.props.contextValue.store.subscribe(function(){d.isUnmounting||d.setState({providedProps:d.getProvidedProps(d.props)})}),e&&(this.unregisterWidget=this.props.contextValue.widgetsManager.registerWidget(this))}},{key:"shouldComponentUpdate",value:function(d,f){if(typeof t.shouldComponentUpdate=="function")return t.shouldComponentUpdate.call(this,this.props,d,this.state,f);var p=bT(this.props,d);return this.state.providedProps===null||f.providedProps===null?this.state.providedProps===f.providedProps?!p:!0:!p||!bT(this.state.providedProps,f.providedProps)}},{key:"componentDidUpdate",value:function(d){Bce(d,this.props)||(this.setState({providedProps:this.getProvidedProps(this.props)}),e&&(this.props.contextValue.widgetsManager.update(),typeof t.transitionState=="function"&&this.props.contextValue.onSearchStateChange(t.transitionState.call(this,this.props,this.props.contextValue.store.getState().widgets,this.props.contextValue.store.getState().widgets))))}},{key:"componentWillUnmount",value:function(){var d=this;this.cleanupTimerRef=setTimeout(function(){if(d.isUnmounting=!0,d.unsubscribe&&d.unsubscribe(),d.unregisterWidget&&(d.unregisterWidget(),typeof t.cleanUp=="function")){var f=t.cleanUp.call(d,d.props,d.props.contextValue.store.getState().widgets);d.props.contextValue.store.setState(NT(NT({},d.props.contextValue.store.getState()),{},{widgets:f})),d.props.contextValue.onSearchStateChange(Zce(f))}})}},{key:"getProvidedProps",value:function(d){var f=this.props.contextValue.store.getState(),p=f.widgets,g=f.results,_=f.resultsFacetValues,N=f.searching,b=f.searchingForFacetValues,S=f.isSearchStalled,w=f.metadata,y=f.error,E={results:g,searching:N,searchingForFacetValues:b,isSearchStalled:S,error:y};return t.getProvidedProps.call(this,d,p,E,w,_)}},{key:"getSearchParameters",value:function(d){return typeof t.getSearchParameters=="function"?t.getSearchParameters.call(this,d,this.props,this.props.contextValue.store.getState().widgets):null}},{key:"getMetadata",value:function(d){return typeof t.getMetadata=="function"?t.getMetadata.call(this,this.props,d):{}}},{key:"transitionState",value:function(d,f){return typeof t.transitionState=="function"?t.transitionState.call(this,this.props,d,f):f}},{key:"render",value:function(){var d=this.props;d.contextValue;var f=Xce(d,Qce),p=this.state.providedProps;if(p===null)return null;var g=typeof t.refine=="function"?{refine:this.refine,createURL:this.createURL}:{},_=typeof t.searchForFacetValues=="function"?{searchForItems:this.searchForFacetValues}:{};return Le.createElement(n,Tx({},f,p,g,_))}}]),c}(x.Component);return Wr(i,"displayName","".concat(t.displayName,"(").concat(Gce(n),")")),Wr(i,"$$type",t.$$type),Wr(i,"$$widgetType",r.$$widgetType),Wr(i,"propTypes",t.propTypes),Wr(i,"defaultProps",t.defaultProps),Wr(i,"_connectorDesc",t),i}}var cue=function(e){return function(n,r){var i=lue(e)(n,r),a=function(c){return Le.createElement(qce,null,function(u){return Le.createElement(Wce,null,function(d){return Le.createElement(i,Tx({contextValue:u,indexContextValue:d},c))})})};return a}};function uue(t){return hue(t)?t.multiIndexContext.targetedIndex:t.ais.mainTargetedIndex}function due(t,e){if(t.results){if(t.results.hits)return t.results;var n=uue(e);if(t.results[n])return t.results[n]}return null}function hue(t){return t&&t.multiIndexContext}const fue=cue({displayName:"AlgoliaStats",$$type:"ais.stats",getProvidedProps:function(e,n,r){var i=due(r,{ais:e.contextValue,multiIndexContext:e.indexContextValue});return i?{areHitsSorted:i.appliedRelevancyStrictness!==void 0&&i.appliedRelevancyStrictness>0&&i.nbHits!==i.nbSortedHits,nbHits:i.nbHits,nbSortedHits:i.nbSortedHits,processingTimeMS:i.processingTimeMS}:null}}),P_={lokaviz:"Lokaviz",abele:"Abl","location-etudiant":"Location tudiant"},mue={lokaviz:"bg-green-500 text-white border-green-500",abele:"bg-blue-500 text-white border-blue-500","location-etudiant":"bg-red-500 text-white border-red-500"},pue={lokaviz:"bg-green-600",abele:"bg-blue-600","location-etudiant":"bg-red-600"},gue=["Rsidence","Appartement","Studio","Chambre"],ST=[{key:"internet",label:"Internet",icon:""},{key:"laverie",label:"Laverie",icon:""},{key:"salle-sport",label:"Salle de sport",icon:""},{key:"parking",label:"Parking",icon:""},{key:"securite",label:"Scurit",icon:""}],vue={internet:"internet",laverie:"laverie","salle-sport":"salle de sport",parking:"parking",securite:"scurit"},xue={internet:"",laverie:"","salle de sport":"",parking:"",scurit:"",fitness:"",cour:""};function yue(t){if(!t)return"";const[e,n]=t.split("-");return`${{"01":"Janvier","02":"Fvrier","03":"Mars","04":"Avril","05":"Mai","06":"Juin","07":"Juillet","08":"Aot","09":"Septembre",10:"Octobre",11:"Novembre",12:"Dcembre"}[n]} ${e}`}function _ue({onQuickFilter:t}){const n=[new Date().getHours()>18?"Proche transports":"Proche universit","Internet inclus","Laverie","PMR","Coup de cur"];return s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-center",children:[s.jsx("span",{className:"font-semibold text-blue-700",children:"Suggestions pour toi :"}),n.map(r=>s.jsx("button",{onClick:()=>t(r),className:"px-3 py-1 rounded-full font-semibold text-xs bg-blue-100 dark:bg-blue-900 dark:text-blue-200 ring-1 ring-inset ring-blue-300 dark:ring-blue-800 transition-all duration-150 hover:bg-blue-200 dark:hover:bg-blue-800 shadow",children:r},r))]})})}fue(({searchResults:t})=>s.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded",children:t?s.jsxs("div",{children:[s.jsxs("strong",{children:["Rsultats: ",t.nbHits]}),' | Requte: "',t.query||"vide",'" | Temps: ',t.processingTimeMS,"ms"]}):s.jsx("div",{children:"Aucun rsultat de recherche"})}));const wue=function(){var ee,Z,K;const[e,n]=x.useState(""),[r,i]=x.useState([]),[a,o]=x.useState(!1),[c,u]=x.useState(1),[d,f]=x.useState({}),[p,g]=x.useState({sources:["lokaviz","abele","location-etudiant"],types:[],services:[],priceRange:{min:0,max:1500},location:"",situation:"",label:"",availability:"",hasPhoto:!1,pmr:!1,reference:""}),[_,N]=x.useState([]),[b,S]=x.useState(!1),w=x.useCallback(Lce((I,z,B)=>y(I,z,B),300),[]);x.useEffect(()=>{w(e,p,c)},[e,p,c]);const y=async(I,z,B)=>{o(!0);try{const X=[];if(z.sources.length>0){const Ee=z.sources.map(De=>`source:"${P_[De]}"`).join(" OR ");X.push(`(${Ee})`)}if(z.types.length>0){const Ee=z.types.map(De=>`types:"${De.toUpperCase()}"`).join(" OR ");X.push(`(${Ee})`)}if(z.services.length>0){const Ee=z.services.map(De=>`services:"${vue[De]}"`);X.push(...Ee)}(z.priceRange.min>0||z.priceRange.max<1500)&&X.push(`prix:${z.priceRange.min} TO ${z.priceRange.max}`),z.location&&X.push(`(adresse:${z.location} OR ville:${z.location} OR code_postal:${z.location})`),z.situation&&X.push(`situation:"${z.situation}"`),z.label&&X.push(`label:"${z.label}"`),z.availability&&X.push(`date_de_disponibilite >= ${z.availability}`),z.hasPhoto&&X.push("has_photo:true"),z.pmr&&X.push("pmr_accessible:true"),z.reference&&X.push(`reference:"${z.reference}"`);const ue=X.join(" AND "),ge=await index.search(I,{filters:ue,facets:["source","types","services","adresse"],maxValuesPerFacet:50,hitsPerPage:20,page:B-1});i(ge.hits),f(ge.facets),U(z)}catch{i([])}finally{o(!1)}},E=I=>{g(z=>({...z,sources:z.sources.includes(I)?z.sources.filter(B=>B!==I):[...z.sources,I]})),u(1)},A=I=>{g(z=>({...z,types:z.types.includes(I)?z.types.filter(B=>B!==I):[...z.types,I]})),u(1)},O=I=>{g(z=>({...z,services:z.services.includes(I)?z.services.filter(B=>B!==I):[...z.services,I]})),u(1)},q=(I,z)=>{g(B=>({...B,priceRange:{...B.priceRange,[I]:z}})),u(1)},R=()=>{g({sources:["lokaviz","abele","location-etudiant"],types:[],services:[],priceRange:{min:0,max:1500},location:"",situation:"",label:"",availability:"",hasPhoto:!1,pmr:!1,reference:""}),u(1)},V=(I,z)=>{g(B=>{const X=B[I];return Array.isArray(X)?{...B,[I]:X.filter(ue=>ue!==z)}:B}),u(1)},U=I=>{const z=[];I.sources.forEach(B=>z.push({type:"sources",value:B,label:P_[B]})),I.types.forEach(B=>z.push({type:"types",value:B,label:B})),I.services.forEach(B=>{var X;return z.push({type:"services",value:B,label:((X=ST.find(ue=>ue.key===B))==null?void 0:X.label)||B})}),(I.priceRange.min>0||I.priceRange.max<1500)&&z.push({type:"priceRange",value:"",label:`Prix: ${I.priceRange.min} - ${I.priceRange.max}`}),N(z)},k=()=>{R()},F=()=>u(I=>Math.max(1,I-1)),D=()=>u(I=>I+1),P={lokaviz:((ee=d==null?void 0:d.source)==null?void 0:ee.Lokaviz)||0,abele:((Z=d==null?void 0:d.source)==null?void 0:Z.Abl)||0,"location-etudiant":((K=d==null?void 0:d.source)==null?void 0:K["Location tudiant"])||0},H=I=>{I==="Proche campus"||I==="Proche universit"?g(z=>({...z,location:"campus"})):I==="Internet inclus"?g(z=>({...z,services:z.services.includes("internet")?z.services:[...z.services,"internet"]})):I==="Laverie"?g(z=>({...z,services:z.services.includes("laverie")?z.services:[...z.services,"laverie"]})):I==="PMR"&&g(z=>({...z,pmr:!0})),u(1)};return s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 min-h-screen pb-16",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row gap-8 px-2 md:px-6",children:[s.jsxs("aside",{className:"w-full md:w-72 md:sticky md:top-8 z-20 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-lg p-6 mb-4 md:mb-0 h-fit transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 md:hidden",children:[s.jsx("span",{className:"font-bold text-lg",children:"Filtres"}),s.jsx("button",{onClick:()=>S(!b),className:"text-blue-600 font-semibold",children:b?"Fermer":"Ouvrir"})]}),s.jsxs("div",{className:`space-y-6 ${b?"":"hidden md:block"}`,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Ville / Code postal"}),s.jsx("input",{type:"text",value:p.location,onChange:I=>g(z=>({...z,location:I.target.value})),placeholder:"Ex: Paris ou 75000",className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-400 transition"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Situation"}),s.jsxs("select",{value:p.situation,onChange:I=>g(z=>({...z,situation:I.target.value})),className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-400 transition",children:[s.jsx("option",{value:"",children:"Toutes"}),s.jsx("option",{value:"etudiant",children:"tudiant"}),s.jsx("option",{value:"alternant",children:"Alternant"}),s.jsx("option",{value:"stagiaire",children:"Stagiaire"}),s.jsx("option",{value:"autre",children:"Autre"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Label"}),s.jsxs("select",{value:p.label,onChange:I=>g(z=>({...z,label:I.target.value})),className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-400 transition",children:[s.jsx("option",{value:"",children:"Tous"}),s.jsx("option",{value:"lokaviz",children:"Lokaviz"}),s.jsx("option",{value:"crous",children:"Crous"}),s.jsx("option",{value:"autre",children:"Autre"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Source"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["lokaviz","abele","location-etudiant"].map(I=>s.jsxs("button",{onClick:()=>E(I),className:`px-3 py-1 rounded-full border-2 flex items-center space-x-2 text-xs transition-all ${p.sources.includes(I)?mue[I]:"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-500"}`,children:[s.jsx("span",{children:P_[I]}),s.jsx("span",{className:`${pue[I]} text-white px-2 py-1 rounded-full text-xs font-bold`,children:P[I]})]},I))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Type"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:gue.map(I=>s.jsx("button",{onClick:()=>A(I),className:`px-3 py-1 rounded-full border-2 text-xs transition-all ${p.types.includes(I)?"bg-blue-600 text-white border-blue-600":"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-600 hover:text-blue-600"}`,children:I},I))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"quipements / Services"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ST.map(I=>s.jsxs("button",{onClick:()=>O(I.key),className:`px-3 py-1 rounded-full border-2 flex items-center space-x-1 text-xs transition-all ${p.services.includes(I.key)?"bg-blue-600 text-white border-blue-600":"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-600"}`,children:[s.jsx("span",{children:I.icon}),s.jsx("span",{children:I.label})]},I.key))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Loyer ()"}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs("span",{className:"text-xs",children:[p.priceRange.min,""]}),s.jsx("input",{type:"range",min:0,max:1500,step:50,value:p.priceRange.min,onChange:I=>q("min",Number(I.target.value)),className:"w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer"}),s.jsx("input",{type:"range",min:0,max:1500,step:50,value:p.priceRange.max,onChange:I=>q("max",Number(I.target.value)),className:"w-full h-2 bg-blue-600 rounded-lg appearance-none cursor-pointer"}),s.jsxs("span",{className:"text-xs",children:[p.priceRange.max,""]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Disponibilit"}),s.jsx("input",{type:"date",value:p.availability,onChange:I=>g(z=>({...z,availability:I.target.value})),className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-400 transition"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[s.jsx("input",{type:"checkbox",checked:p.hasPhoto,onChange:I=>g(z=>({...z,hasPhoto:I.target.checked})),className:"accent-blue-600"}),"Photo"]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[s.jsx("input",{type:"checkbox",checked:p.pmr,onChange:I=>g(z=>({...z,pmr:I.target.checked})),className:"accent-blue-600"}),"PMR"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Rfrence"}),s.jsx("input",{type:"text",value:p.reference,onChange:I=>g(z=>({...z,reference:I.target.value})),placeholder:"Rfrence annonce",className:"w-full border rounded px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-400 transition"})]}),s.jsx("button",{onClick:R,className:"w-full mt-2 py-2 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600 transition",children:"Effacer tous les filtres"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-center py-8",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Toutes les annonces"})}),s.jsx(_ue,{onQuickFilter:H}),s.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mb-6",children:[s.jsx("button",{className:"px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-medium hover:bg-green-200",children:"Proche campus"}),s.jsx("button",{className:"px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-medium hover:bg-purple-200",children:"Internet inclus"}),s.jsx("button",{className:"px-3 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-medium hover:bg-yellow-200",children:"Laverie"}),s.jsx("button",{className:"px-3 py-1 rounded-full bg-pink-100 text-pink-700 text-xs font-medium hover:bg-pink-200",children:"PMR"}),s.jsx("button",{className:"px-3 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium hover:bg-red-200",children:"Coup de cur"})]}),s.jsx("div",{className:"max-w-2xl mx-auto mb-8 px-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Rechercher un logement...",value:e,onChange:I=>n(I.target.value),className:"w-full px-6 py-4 text-lg border-2 border-gray-200 rounded-full shadow-sm focus:border-blue-500 focus:outline-none pr-16"}),s.jsx("button",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 p-2 bg-gray-100 rounded-full hover:bg-gray-200",children:""})]})}),s.jsx("div",{className:"max-w-6xl mx-auto px-4 mb-8",children:_.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-center",children:[_.map((I,z)=>s.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 px-3 py-2 rounded-full flex items-center space-x-2 shadow-sm",children:[s.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-white",children:I.label}),s.jsx("button",{onClick:()=>{I.type==="priceRange"?R():V(I.type,I.value)},className:"w-6 h-6 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-white rounded-full flex items-center justify-center text-base font-bold hover:bg-red-500 hover:text-white transition-colors border border-gray-400 dark:border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":`Retirer le filtre ${I.label}`,children:""})]},z)),s.jsx("button",{onClick:R,className:"px-4 py-2 bg-red-500 text-white rounded-full text-sm font-semibold hover:bg-red-600 transition shadow focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Effacer tout"})]})}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[a&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Recherche en cours..."})]}),!a&&r.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Aucun rsultat trouv"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Essayez de modifier vos filtres ou votre recherche"}),s.jsx("button",{onClick:k,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Rinitialiser les filtres"})]}),!a&&r.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-6",children:s.jsxs("h2",{className:"text-xl font-semibold",children:[r.length," logement(s) trouv(s)"]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(I=>{const z=String(I.source_normalized||"").toLowerCase(),B=z==="abele"||String(I.source).toLowerCase().includes("adele"),X=z==="lokaviz",ue=z==="location-etudiant",ge=[];return B&&ge.push({label:"Adele",color:"bg-blue-500 text-white"}),X&&ge.push({label:"Lokaviz",color:"bg-green-500 text-white"}),ue&&ge.push({label:"Location-tudiant",color:"bg-red-500 text-white"}),(I.coup_de_coeur||I.recommande||I.note&&Number(I.note)>=4.5)&&ge.push({label:"Coup de cur",color:"bg-pink-500 text-white"}),X&&(I.label_lokaviz||I.label_crous)&&ge.push({label:"Label Lokaviz",color:"bg-green-700 text-white"}),I.pmr_accessible&&ge.push({label:"PMR",color:"bg-yellow-500 text-white"}),Array.isArray(I.services)&&I.services.includes("internet")&&ge.push({label:"Internet inclus",color:"bg-blue-200 text-blue-800"}),Array.isArray(I.services)&&I.services.includes("laverie")&&ge.push({label:"Laverie",color:"bg-yellow-200 text-yellow-800"}),(String(I.adresse).toLowerCase().includes("universit")||String(I.adresse).toLowerCase().includes("campus"))&&ge.push({label:"Proche campus",color:"bg-green-200 text-green-800"}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border dark:border-gray-700 hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1 hover:scale-[1.02] group",children:[s.jsxs("div",{className:"h-48 bg-gradient-to-br from-blue-100 to-blue-200 rounded-t-xl flex items-center justify-center overflow-hidden relative",children:[I.image?s.jsxs("picture",{children:[s.jsx("source",{srcSet:I.image.replace(/\.(jpg|png)$/i,".webp"),type:"image/webp"}),s.jsx("source",{srcSet:I.image.replace(/\.(jpg|png)$/i,".avif"),type:"image/avif"}),s.jsx("img",{src:I.image,alt:I.types||"Logement tudiant",className:"object-cover w-full h-full transition-transform duration-300 group-hover:scale-105",loading:"lazy"})]}):s.jsx("span",{className:"text-blue-600 text-4xl transition-transform duration-300 group-hover:scale-110",children:""}),s.jsx("button",{className:"absolute top-2 right-2 bg-white/80 rounded-full p-2 shadow hover:bg-pink-100 transition-colors group-hover:scale-110",children:s.jsx("svg",{className:"w-5 h-5 text-pink-500 animate-pulse group-hover:animate-heartbeat",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex flex-wrap gap-2 mb-2 transition-all duration-200",children:ge.map(Ee=>s.jsx("span",{className:`px-3 py-1 rounded-full font-semibold text-xs ${Ee.color} ring-1 ring-inset ring-black/10 dark:ring-white/20 transition-all duration-150 hover:scale-105 hover:shadow-md dark:bg-opacity-80`,children:Ee.label},Ee.label))}),s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${String(I.source_normalized)==="lokaviz"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":String(I.source_normalized)==="abele"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":String(I.source_normalized)==="locationetudiant"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:I.source}),s.jsx("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:B?I.note?`Note: ${I.note}/5`:"-":I.prix?`${I.prix}`:"-"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded text-sm font-medium",children:I.types}),I.surface&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-200 text-sm",children:[I.surface,"m"]})]}),I.adresse&&s.jsxs("p",{className:"text-gray-700 dark:text-white text-sm mb-3 line-clamp-2",children:[" ",I.adresse]}),I.services&&Array.isArray(I.services)&&I.services.length>0&&s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[I.services.slice(0,5).map(Ee=>s.jsxs("span",{className:"bg-gray-100 dark:bg-gray-700 dark:text-gray-100 px-2 py-1 rounded-full text-xs flex items-center gap-1 font-medium ring-1 ring-inset ring-black/5 dark:ring-white/10 transition-all duration-150 hover:bg-blue-100 dark:hover:bg-blue-800",children:[xue[Ee]||""," ",Ee]},Ee)),I.services.length>5&&s.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:["+",I.services.length-5]})]})}),I.date_de_disponibilite&&s.jsx("div",{className:"mb-4",children:s.jsxs("span",{className:"text-green-600 text-sm font-medium",children:[" Disponible: ",yue(String(I.date_de_disponibilite))]})}),B&&I.note&&s.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs font-semibold",children:["Note: ",String(I.note),"/5"]}),s.jsx("a",{href:String(I.lien),target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-blue-600 text-white text-center py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Voir le logement"})]})]},I.objectID)})}),s.jsxs("div",{className:"flex flex-col items-center space-y-2 mt-12",children:[s.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[s.jsx("button",{onClick:F,disabled:c===1,className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded-lg disabled:opacity-50",children:"Prcdent"}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Page ",c]}),s.jsx("button",{onClick:D,disabled:r.length<20,className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded-lg disabled:opacity-50",children:"Suivant"})]}),(()=>{let I=0;typeof d=="object"&&d!==null&&"nbHits"in d&&typeof d.nbHits=="number"?I=d.nbHits:Array.isArray(r)&&r.length>0&&typeof r[0]=="object"&&(I=r.length);const B=Math.ceil(I/20);if(B<=1)return null;let X=Math.max(1,c-3),ue=Math.min(B,c+3);c<=4&&(X=1,ue=Math.min(7,B)),c>B-4&&(ue=B,X=Math.max(1,B-6));const ge=[];for(let Ee=X;Ee<=ue;Ee++)ge.push(Ee);return s.jsxs("div",{className:"flex gap-1 mt-2",children:[X>1&&s.jsx("span",{className:"px-2",children:"..."}),ge.map(Ee=>s.jsx("button",{onClick:()=>u(Ee),className:`px-3 py-1 rounded-full text-sm font-semibold transition border-2 ${Ee===c?"bg-blue-600 text-white border-blue-600 shadow":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 border-gray-300 dark:border-gray-600 hover:bg-blue-100 dark:hover:bg-blue-900 hover:border-blue-400"}`,children:Ee},Ee)),ue<B&&s.jsx("span",{className:"px-2",children:"..."})]})})()]})]})]})]})]})})};var m6={exports:{}};/*! algoliasearch-lite.umd.js | 4.25.2 |  Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */(function(t,e){(function(n,r){t.exports=r()})(Fu,function(){function n(se,te,ie){return te in se?Object.defineProperty(se,te,{value:ie,enumerable:!0,configurable:!0,writable:!0}):se[te]=ie,se}function r(se,te){var ie=Object.keys(se);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(se);te&&(Y=Y.filter(function(oe){return Object.getOwnPropertyDescriptor(se,oe).enumerable})),ie.push.apply(ie,Y)}return ie}function i(se){for(var te=1;te<arguments.length;te++){var ie=arguments[te]!=null?arguments[te]:{};te%2?r(Object(ie),!0).forEach(function(Y){n(se,Y,ie[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(ie)):r(Object(ie)).forEach(function(Y){Object.defineProperty(se,Y,Object.getOwnPropertyDescriptor(ie,Y))})}return se}function a(se,te){if(se==null)return{};var ie,Y,oe=function(Ce,we){if(Ce==null)return{};var ne,_e,be={},We=Object.keys(Ce);for(_e=0;_e<We.length;_e++)ne=We[_e],we.indexOf(ne)>=0||(be[ne]=Ce[ne]);return be}(se,te);if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(se);for(Y=0;Y<pe.length;Y++)ie=pe[Y],te.indexOf(ie)>=0||Object.prototype.propertyIsEnumerable.call(se,ie)&&(oe[ie]=se[ie])}return oe}function o(se,te){return function(ie){if(Array.isArray(ie))return ie}(se)||function(ie,Y){if(Symbol.iterator in Object(ie)||Object.prototype.toString.call(ie)==="[object Arguments]"){var oe=[],pe=!0,Ce=!1,we=void 0;try{for(var ne,_e=ie[Symbol.iterator]();!(pe=(ne=_e.next()).done)&&(oe.push(ne.value),!Y||oe.length!==Y);pe=!0);}catch(be){Ce=!0,we=be}finally{try{pe||_e.return==null||_e.return()}finally{if(Ce)throw we}}return oe}}(se,te)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(se){return function(te){if(Array.isArray(te)){for(var ie=0,Y=new Array(te.length);ie<te.length;ie++)Y[ie]=te[ie];return Y}}(se)||function(te){if(Symbol.iterator in Object(te)||Object.prototype.toString.call(te)==="[object Arguments]")return Array.from(te)}(se)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(se){var te,ie="algoliasearch-client-js-".concat(se.key),Y=function(){return te===void 0&&(te=se.localStorage||window.localStorage),te},oe=function(){return JSON.parse(Y().getItem(ie)||"{}")},pe=function(we){Y().setItem(ie,JSON.stringify(we))},Ce=function(){var we=se.timeToLive?1e3*se.timeToLive:null,ne=oe(),_e=Object.fromEntries(Object.entries(ne).filter(function(We){return o(We,2)[1].timestamp!==void 0}));if(pe(_e),we){var be=Object.fromEntries(Object.entries(_e).filter(function(We){var G=o(We,2)[1],re=new Date().getTime();return!(G.timestamp+we<re)}));pe(be)}};return{get:function(we,ne){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){Ce();var be=JSON.stringify(we);return oe()[be]}).then(function(be){return Promise.all([be?be.value:ne(),be!==void 0])}).then(function(be){var We=o(be,2),G=We[0],re=We[1];return Promise.all([G,re||_e.miss(G)])}).then(function(be){return o(be,1)[0]})},set:function(we,ne){return Promise.resolve().then(function(){var _e=oe();return _e[JSON.stringify(we)]={timestamp:new Date().getTime(),value:ne},Y().setItem(ie,JSON.stringify(_e)),ne})},delete:function(we){return Promise.resolve().then(function(){var ne=oe();delete ne[JSON.stringify(we)],Y().setItem(ie,JSON.stringify(ne))})},clear:function(){return Promise.resolve().then(function(){Y().removeItem(ie)})}}}function d(se){var te=c(se.caches),ie=te.shift();return ie===void 0?{get:function(Y,oe){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},Ce=oe();return Ce.then(function(we){return Promise.all([we,pe.miss(we)])}).then(function(we){return o(we,1)[0]})},set:function(Y,oe){return Promise.resolve(oe)},delete:function(Y){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(Y,oe){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return ie.get(Y,oe,pe).catch(function(){return d({caches:te}).get(Y,oe,pe)})},set:function(Y,oe){return ie.set(Y,oe).catch(function(){return d({caches:te}).set(Y,oe)})},delete:function(Y){return ie.delete(Y).catch(function(){return d({caches:te}).delete(Y)})},clear:function(){return ie.clear().catch(function(){return d({caches:te}).clear()})}}}function f(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},te={};return{get:function(ie,Y){var oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},pe=JSON.stringify(ie);if(pe in te)return Promise.resolve(se.serializable?JSON.parse(te[pe]):te[pe]);var Ce=Y(),we=oe&&oe.miss||function(){return Promise.resolve()};return Ce.then(function(ne){return we(ne)}).then(function(){return Ce})},set:function(ie,Y){return te[JSON.stringify(ie)]=se.serializable?JSON.stringify(Y):Y,Promise.resolve(Y)},delete:function(ie){return delete te[JSON.stringify(ie)],Promise.resolve()},clear:function(){return te={},Promise.resolve()}}}function p(se){for(var te=se.length-1;te>0;te--){var ie=Math.floor(Math.random()*(te+1)),Y=se[te];se[te]=se[ie],se[ie]=Y}return se}function g(se,te){return te&&Object.keys(te).forEach(function(ie){se[ie]=te[ie](se)}),se}function _(se){for(var te=arguments.length,ie=new Array(te>1?te-1:0),Y=1;Y<te;Y++)ie[Y-1]=arguments[Y];var oe=0;return se.replace(/%s/g,function(){return encodeURIComponent(ie[oe++])})}var N={WithinQueryParameters:0,WithinHeaders:1};function b(se,te){var ie=se||{},Y=ie.data||{};return Object.keys(ie).forEach(function(oe){["timeout","headers","queryParameters","data","cacheable"].indexOf(oe)===-1&&(Y[oe]=ie[oe])}),{data:Object.entries(Y).length>0?Y:void 0,timeout:ie.timeout||te,headers:ie.headers||{},queryParameters:ie.queryParameters||{},cacheable:ie.cacheable}}var S={Read:1,Write:2,Any:3},w=1,y=2,E=3;function A(se){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w;return i(i({},se),{},{status:te,lastUpdate:Date.now()})}function O(se){return typeof se=="string"?{protocol:"https",url:se,accept:S.Any}:{protocol:se.protocol||"https",url:se.url,accept:se.accept||S.Any}}var q="GET",R="POST";function V(se,te){return Promise.all(te.map(function(ie){return se.get(ie,function(){return Promise.resolve(A(ie))})})).then(function(ie){var Y=ie.filter(function(Ce){return function(we){return we.status===w||Date.now()-we.lastUpdate>12e4}(Ce)}),oe=ie.filter(function(Ce){return function(we){return we.status===E&&Date.now()-we.lastUpdate<=12e4}(Ce)}),pe=[].concat(c(Y),c(oe));return{getTimeout:function(Ce,we){return(oe.length===0&&Ce===0?1:oe.length+3+Ce)*we},statelessHosts:pe.length>0?pe.map(function(Ce){return O(Ce)}):te}})}function U(se,te,ie,Y){var oe=[],pe=function(G,re){if(!(G.method===q||G.data===void 0&&re.data===void 0)){var ce=Array.isArray(G.data)?G.data:i(i({},G.data),re.data);return JSON.stringify(ce)}}(ie,Y),Ce=function(G,re){var ce=i(i({},G.headers),re.headers),ke={};return Object.keys(ce).forEach(function(Pe){var Ne=ce[Pe];ke[Pe.toLowerCase()]=Ne}),ke}(se,Y),we=ie.method,ne=ie.method!==q?{}:i(i({},ie.data),Y.data),_e=i(i(i({"x-algolia-agent":se.userAgent.value},se.queryParameters),ne),Y.queryParameters),be=0,We=function G(re,ce){var ke=re.pop();if(ke===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, please reach out to the Algolia Support team: https://alg.li/support .",transporterStackTrace:P(oe)};var Pe={data:pe,headers:Ce,method:we,url:F(ke,ie.path,_e),connectTimeout:ce(be,se.timeouts.connect),responseTimeout:ce(be,Y.timeout)},Ne=function(He){var nt={request:Pe,response:He,host:ke,triesLeft:re.length};return oe.push(nt),nt},Fe={onSuccess:function(He){return function(nt){try{return JSON.parse(nt.content)}catch(Yt){throw function(tr,qn){return{name:"DeserializationError",message:tr,response:qn}}(Yt.message,nt)}}(He)},onRetry:function(He){var nt=Ne(He);return He.isTimedOut&&be++,Promise.all([se.logger.info("Retryable failure",H(nt)),se.hostsCache.set(ke,A(ke,He.isTimedOut?E:y))]).then(function(){return G(re,ce)})},onFail:function(He){throw Ne(He),function(nt,Yt){var tr=nt.content,qn=nt.status,zr=tr;try{zr=JSON.parse(tr).message}catch{}return function(rs,ss,Fi){return{name:"ApiError",message:rs,status:ss,transporterStackTrace:Fi}}(zr,qn,Yt)}(He,P(oe))}};return se.requester.send(Pe).then(function(He){return function(nt,Yt){return function(tr){var qn=tr.status;return tr.isTimedOut||function(zr){var rs=zr.isTimedOut,ss=zr.status;return!rs&&~~ss==0}(tr)||~~(qn/100)!=2&&~~(qn/100)!=4}(nt)?Yt.onRetry(nt):~~(nt.status/100)==2?Yt.onSuccess(nt):Yt.onFail(nt)}(He,Fe)})};return V(se.hostsCache,te).then(function(G){return We(c(G.statelessHosts).reverse(),G.getTimeout)})}function k(se){var te={value:"Algolia for JavaScript (".concat(se,")"),add:function(ie){var Y="; ".concat(ie.segment).concat(ie.version!==void 0?" (".concat(ie.version,")"):"");return te.value.indexOf(Y)===-1&&(te.value="".concat(te.value).concat(Y)),te}};return te}function F(se,te,ie){var Y=D(ie),oe="".concat(se.protocol,"://").concat(se.url,"/").concat(te.charAt(0)==="/"?te.substr(1):te);return Y.length&&(oe+="?".concat(Y)),oe}function D(se){return Object.keys(se).map(function(te){return _("%s=%s",te,(ie=se[te],Object.prototype.toString.call(ie)==="[object Object]"||Object.prototype.toString.call(ie)==="[object Array]"?JSON.stringify(se[te]):se[te]));var ie}).join("&")}function P(se){return se.map(function(te){return H(te)})}function H(se){var te=se.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return i(i({},se),{},{request:i(i({},se.request),{},{headers:i(i({},se.request.headers),te)})})}var ee=function(se){var te=se.appId,ie=function(oe,pe,Ce){var we={"x-algolia-api-key":Ce,"x-algolia-application-id":pe};return{headers:function(){return oe===N.WithinHeaders?we:{}},queryParameters:function(){return oe===N.WithinQueryParameters?we:{}}}}(se.authMode!==void 0?se.authMode:N.WithinHeaders,te,se.apiKey),Y=function(oe){var pe=oe.hostsCache,Ce=oe.logger,we=oe.requester,ne=oe.requestsCache,_e=oe.responsesCache,be=oe.timeouts,We=oe.userAgent,G=oe.hosts,re=oe.queryParameters,ce={hostsCache:pe,logger:Ce,requester:we,requestsCache:ne,responsesCache:_e,timeouts:be,userAgent:We,headers:oe.headers,queryParameters:re,hosts:G.map(function(ke){return O(ke)}),read:function(ke,Pe){var Ne=b(Pe,ce.timeouts.read),Fe=function(){return U(ce,ce.hosts.filter(function(nt){return(nt.accept&S.Read)!=0}),ke,Ne)};if((Ne.cacheable!==void 0?Ne.cacheable:ke.cacheable)!==!0)return Fe();var He={request:ke,mappedRequestOptions:Ne,transporter:{queryParameters:ce.queryParameters,headers:ce.headers}};return ce.responsesCache.get(He,function(){return ce.requestsCache.get(He,function(){return ce.requestsCache.set(He,Fe()).then(function(nt){return Promise.all([ce.requestsCache.delete(He),nt])},function(nt){return Promise.all([ce.requestsCache.delete(He),Promise.reject(nt)])}).then(function(nt){var Yt=o(nt,2);return Yt[0],Yt[1]})})},{miss:function(nt){return ce.responsesCache.set(He,nt)}})},write:function(ke,Pe){return U(ce,ce.hosts.filter(function(Ne){return(Ne.accept&S.Write)!=0}),ke,b(Pe,ce.timeouts.write))}};return ce}(i(i({hosts:[{url:"".concat(te,"-dsn.algolia.net"),accept:S.Read},{url:"".concat(te,".algolia.net"),accept:S.Write}].concat(p([{url:"".concat(te,"-1.algolianet.com")},{url:"".concat(te,"-2.algolianet.com")},{url:"".concat(te,"-3.algolianet.com")}]))},se),{},{headers:i(i(i({},ie.headers()),{"content-type":"application/x-www-form-urlencoded"}),se.headers),queryParameters:i(i({},ie.queryParameters()),se.queryParameters)}));return g({transporter:Y,appId:te,addAlgoliaAgent:function(oe,pe){Y.userAgent.add({segment:oe,version:pe})},clearCache:function(){return Promise.all([Y.requestsCache.clear(),Y.responsesCache.clear()]).then(function(){})}},se.methods)},Z=function(se){return function(te,ie){return te.method===q?se.transporter.read(te,ie):se.transporter.write(te,ie)}},K=function(se){return function(te){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y={transporter:se.transporter,appId:se.appId,indexName:te};return g(Y,ie.methods)}},I=function(se){return function(te,ie){var Y=te.map(function(oe){return i(i({},oe),{},{params:D(oe.params||{})})});return se.transporter.read({method:R,path:"1/indexes/*/queries",data:{requests:Y},cacheable:!0},ie)}},z=function(se){return function(te,ie){return Promise.all(te.map(function(Y){var oe=Y.params,pe=oe.facetName,Ce=oe.facetQuery,we=a(oe,["facetName","facetQuery"]);return K(se)(Y.indexName,{methods:{searchForFacetValues:ue}}).searchForFacetValues(pe,Ce,i(i({},ie),we))}))}},B=function(se){return function(te,ie,Y){return se.transporter.read({method:R,path:_("1/answers/%s/prediction",se.indexName),data:{query:te,queryLanguages:ie},cacheable:!0},Y)}},X=function(se){return function(te,ie){return se.transporter.read({method:R,path:_("1/indexes/%s/query",se.indexName),data:{query:te},cacheable:!0},ie)}},ue=function(se){return function(te,ie,Y){return se.transporter.read({method:R,path:_("1/indexes/%s/facets/%s/query",se.indexName,te),data:{facetQuery:ie},cacheable:!0},Y)}},ge=1,Ee=2,De=3,$e=function(se){return function(te,ie){var Y=te.map(function(oe){return i(i({},oe),{},{threshold:oe.threshold||0})});return se.transporter.read({method:R,path:"1/indexes/*/recommendations",data:{requests:Y},cacheable:!0},ie)}};function Ae(se,te,ie){var Y,oe={appId:se,apiKey:te,timeouts:{connect:1,read:2,write:30},requester:{send:function(pe){return new Promise(function(Ce){var we=new XMLHttpRequest;we.open(pe.method,pe.url,!0),Object.keys(pe.headers).forEach(function(We){return we.setRequestHeader(We,pe.headers[We])});var ne,_e=function(We,G){return setTimeout(function(){we.abort(),Ce({status:0,content:G,isTimedOut:!0})},1e3*We)},be=_e(pe.connectTimeout,"Connection timeout");we.onreadystatechange=function(){we.readyState>we.OPENED&&ne===void 0&&(clearTimeout(be),ne=_e(pe.responseTimeout,"Socket timeout"))},we.onerror=function(){we.status===0&&(clearTimeout(be),clearTimeout(ne),Ce({content:we.responseText||"Network request failed",status:we.status,isTimedOut:!1}))},we.onload=function(){clearTimeout(be),clearTimeout(ne),Ce({content:we.responseText,status:we.status,isTimedOut:!1})},we.send(pe.data)})}},logger:(Y=De,{debug:function(pe,Ce){return ge>=Y&&console.debug(pe,Ce),Promise.resolve()},info:function(pe,Ce){return Ee>=Y&&console.info(pe,Ce),Promise.resolve()},error:function(pe,Ce){return console.error(pe,Ce),Promise.resolve()}}),responsesCache:f(),requestsCache:f({serializable:!1}),hostsCache:d({caches:[u({key:"".concat("4.25.2","-").concat(se)}),f()]}),userAgent:k("4.25.2").add({segment:"Browser",version:"lite"}),authMode:N.WithinQueryParameters};return ee(i(i(i({},oe),ie),{},{methods:{search:I,searchForFacetValues:z,multipleQueries:I,multipleSearchForFacetValues:z,customRequest:Z,initIndex:function(pe){return function(Ce){return K(pe)(Ce,{methods:{search:X,searchForFacetValues:ue,findAnswers:B}})}},getRecommendations:$e}}))}return Ae.version="4.25.2",Ae})})(m6);var bue=m6.exports;const jue=El(bue),uf={appId:l6,apiKey:Xle,indices:{jobs:c6,services:ece,logements:tce,materiel:nce}},Nue="https://openrouter.ai/api/v1/chat/completions",Sue={"deepseek/deepseek-r1:free":"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","meta-llama/llama-4-maverick:free":"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"},ET=[{value:"deepseek/deepseek-r1:free",label:"DeepSeek R1 (Raisonnement avanc)",maxTokens:6144,temperature:.75,topP:.88},{value:"meta-llama/llama-4-maverick:free",label:"Llama 4 Maverick (Rapide)",maxTokens:3072,temperature:.65,topP:.82}],CT=`Tu es l'Expert IA de StudyMarket, la plateforme tout-en-un #1 pour tudiants en France. Tu matrises PARFAITEMENT l'cosystme tudiant franais et StudyMarket.

MISSION STUDYMARKET : Faciliter TOUTE la vie tudiante en centralisant les dmarches essentielles.

SERVICES STUDYMARKET MATRISS :

**LOGEMENT TUDIANT** (Studios, colocations, rsidences, chambres)
 Recherche ultra-rapide avec filtres avancs (prix, localisation, type)
 Vrification propritaires et annonces fiables
 Systme de favoris et alertes personnalises
 Messagerie scurise intgre anti-arnaques

**JOBS & STAGES TUDIANTS** (Temps partiel, stages, missions)
 Offres adaptes profil tudiant et planning cours
 Filtres par compatibilit horaires et domaine d'tudes
 Systme de candidature directe sur plateforme
 Suivi candidatures et notifications opportunits

**SERVICES ENTRE TUDIANTS** (Cours particuliers, aide, babysitting)
 Marketplace comptences tudiantes
 Systme d'valuation et avis utilisateurs
 Gestion planning et rservations
 Paiement scuris avec protection

**MATRIEL SCOLAIRE** (Livres, ordinateurs, mobilier, quipements)
 Achat/vente/change optimis pour tudiants
 Vrification tat et authenticit matriel
 Ngociation prix intgre
 Livraison ou retrait sur campus

TECHNOLOGIES STUDYMARKET :
 **Interface moderne** : Design intuitif, navigation fluide
 **Recherche Algolia** : Rsultats instantans, suggestions intelligentes
 **IA Conversationnelle** : Conseils personnaliss, analyse besoins
 **Scurit** : Vrification identit, paiement protg, anti-arnaques
 **Mobile-first** : App iOS/Android, notifications push
 **Golocalisation** : Proximit campus, transports, commodits

VALEUR AJOUTE STUDYMARKET :
 **Centralisation** : Tout en un seul endroit (plus besoin de 10 sites)
 **Fiabilit** : Annonces vrifies, utilisateurs authentifis
 **Rapidit** : Recherche instantane, alerts temps rel
 **Scurit** : Paiement protg, messagerie scurise
 **Personnalisation** : Recommandations IA, profil tudiant
 **Communaut** : Entre tudiants, conseils pairs, entraide

OBJECTIF FINAL : Optimiser la russite tudiante en simplifiant logement, emploi, services et matriel.

RGLE CRITIQUE RECHERCHE : Format [SEARCH:type:query] pour toute recherche d'annonces.

Tu es le compagnon digital expert de l'tudiant franais, avec connaissance parfaite du march tudiant et de StudyMarket.`,Eue={Logement:["Pense  largir ta recherche aux villes voisines pour plus d'options.","La colocation est souvent plus conomique et conviviale !","N'hsite pas  demander des photos rcentes et  visiter avant de t'engager.","Vrifie si tu es ligible aux aides au logement (CAF, APL, etc.).","Sois vigilant face aux offres trop allchantes : privilgie les contacts via StudyMarket."],Job:["Prpare un CV  jour et une lettre de motivation personnalise.","Certains jobs tudiants sont compatibles avec ton emploi du temps universitaire.","N'hsite pas  postuler  plusieurs offres pour maximiser tes chances.","Utilise la messagerie StudyMarket pour changer en toute scurit avec les employeurs."],Service:["Prcise bien tes besoins ou comptences pour trouver le bon service ou client.","Privilgie les changes via la messagerie scurise StudyMarket.","Demande des recommandations ou avis si possible.","Sois clair sur les tarifs et modalits avant de t'engager."],Matriel:["Vrifie l'tat du matriel avant d'acheter ou de vendre.","Privilgie la remise en main propre pour plus de scurit.","N'hsite pas  ngocier le prix si besoin.","Ajoute plusieurs photos pour rassurer les acheteurs."]};function Cue(t){return t.length?t.length===1?t[0]:t.length===2?t[0]+" "+t[1]:t.slice(0,-1).join(" ")+" Enfin, "+t[t.length-1]:""}function kue(t,e){const n=Eue[e]||[];return n.length?t+"<br /><br /><em>Conseil StudyMarket :</em> "+Cue(n):t}const Tue=[{name:"Accueil",path:"/"},{name:"Logements",path:"/housing"},{name:"Jobs",path:"/jobs"},{name:"Services",path:"/listings?category=services"},{name:"Matriel",path:"/listings?category=material"},{name:"Favoris",path:"/favorites"},{name:"Profil",path:"/profile"},{name:"Messages",path:"/messages"},{name:"Paiements",path:"/payments"},{name:"Paramtres",path:"/settings"},{name:"Aide",path:"/help"}];function Pue(t){const e=t.toLowerCase();return e.includes("accueil")||e.includes("home")||e.includes("plateforme")||e.includes("site")||e.includes("explorer")||e.includes("menu")||e.includes("pages")||e.includes("sections")||e.includes("tout")||e.includes("navigation")}function Iue(){return"<ul>"+Tue.map(t=>`<li> <a href="${t.path}">${t.name}</a></li>`).join("")+"</ul>"}const Aue=()=>{const{userProfile:t,loading:e}=mn(),[n,r]=x.useState(!1),[i,a]=x.useState(!1),[o,c]=x.useState(!1),[u,d]=x.useState(""),[f,p]=x.useState(ET[0].value),g=x.useRef(null),_=x.useRef(null),N=x.useCallback(()=>{if(e)return" Connexion en cours...";let Z="",K="",I="";if(t){t.firstName&&t.lastName?Z=`${t.firstName} ${t.lastName}`:t.firstName?Z=t.firstName:t.displayName?Z=t.displayName:t.email&&(Z=t.email.split("@")[0]);const B=[];if(t.university&&B.push(` ${t.university}`),t.fieldOfStudy&&B.push(` ${t.fieldOfStudy}`),t.location&&B.push(` ${t.location}`),B.length>0&&(K=`

**Ton profil :** ${B.join("  ")}`),t.location){const ue=t.location.toLowerCase();ue.includes("paris")?I=`

 **Conseils Paris spcialiss :**
 Budget logement : 600-800/mois
 Quartiers tudiants : Rpublique, Belleville, Nation
 Transports : Pass Navigo tudiant 75/mois
 Jobs populaires : Cours particuliers 20-25/h`:ue.includes("lyon")?I=`

 **Conseils Lyon spcialiss :**
 Budget logement : 400-600/mois
 Quartiers tudiants : Guillotire, Croix-Rousse
 Transports : TCL tudiant 30/mois
 Jobs populaires : Cours particuliers 15-20/h`:ue.includes("toulouse")&&(I=`

 **Conseils Toulouse spcialiss :**
 Budget logement : 350-500/mois
 Quartiers tudiants : Rangueil, Mirail
 Transports : Tisso tudiant 25/mois
 Jobs populaires : Cours particuliers 15-18/h`)}const X=t.favorites||[];X.length>0&&(K+=`
 Tu as **${X.length} annonce${X.length>1?"s":""} en favori**`)}let z=` **Salut${Z?" "+Z:""} !** Je suis ton Expert StudyMarket, compagnon digital de ta russite tudiante.`;return z+=`

 **STUDYMARKET = PLATEFORME TOUT-EN-UN POUR TUDIANTS**`,z+=`

**Ma mission :** Faciliter TOUTE ta vie tudiante en centralisant :`,z+=`
  **Logement** : Studios, colocations, rsidences, chambres`,z+=`
  **Jobs & Stages** : Temps partiel, missions, compatibles tudes`,z+=`
  **Services** : Cours particuliers, aide, babysitting entre tudiants`,z+=`
  **Matriel** : Livres, ordinateurs, mobilier  prix tudiants`,z+=`

 **AVANTAGES STUDYMARKET :**`,z+=`
  **Recherche ultra-rapide** avec filtres avancs`,z+=`
  **Annonces vrifies** et utilisateurs authentifis`,z+=`
  **Messagerie scurise** anti-arnaques`,z+=`
  **Paiement protg** avec garantie`,z+=`
  **App mobile** avec notifications push`,z+=K,z+=I,z+=`

 **RSULTAT :** Plus besoin de 10 sites diffrents ! StudyMarket centralise tout pour ta russite tudiante.`,z+=`

 **Dis-moi ton besoin** et je te trouve les meilleures opportunits + mes conseils d'expert !`,z},[t,e]),[b,S]=x.useState({messages:[],loading:!1,error:null,retryCount:0});x.useEffect(()=>{const Z={role:"assistant",content:N(),timestamp:Date.now()};S(K=>({...K,messages:[Z]}))},[N]);const w=x.useCallback(()=>{g.current&&g.current.scrollIntoView({behavior:"smooth"})},[]);x.useEffect(()=>{var Z;n&&!i&&(w(),(Z=_.current)==null||Z.focus())},[b.messages,n,i,w]),x.useEffect(()=>{if(!o)return;const Z=K=>{K.target.closest(".chatbot-fab-menu")||c(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[o]);async function y(Z,K){const{appId:I,apiKey:z}=uf,X=jue(I,z).initIndex(Z),ue={hitsPerPage:20};return(await X.search(K,ue)).hits}function E(Z){const K=Z.toLowerCase();return K.includes("logement")||K.includes("coloc")||K.includes("appartement")||K.includes("studio")?{index:uf.indices.logements,label:"Logement"}:K.includes("job")||K.includes("emploi")||K.includes("stage")||K.includes("travail")?{index:uf.indices.jobs,label:"Job"}:K.includes("service")||K.includes("cours")||K.includes("soutien")||K.includes("aide")?{index:uf.indices.services,label:"Service"}:K.includes("matriel")||K.includes("livre")||K.includes("ordinateur")||K.includes("quipement")?{index:uf.indices.materiel,label:"Matriel"}:null}const A=(Z,K)=>{const I={Logement:{emoji:"",title:"EXPERTISE LOGEMENT TUDIANT",budgetAdvice:{Paris:"Budget : 600-800/mois  Quartiers : Rpublique, Belleville, Nation (ligne 1,2,3)",Lyon:"Budget : 400-600/mois  Quartiers : Guillotire, Croix-Rousse, Part-Dieu",Toulouse:"Budget : 350-500/mois  Quartiers : Rangueil, Mirail, Compans-Caffarelli",Marseille:"Budget : 400-550/mois  Quartiers : Endoume, Vauban, Lodi",Default:"Budget moyen France : 400-600/mois selon ville"},tips:[" **BUDGET & AIDES** : CAF jusqu' 250/mois, ngociation loyer possible (-50)"," **DOCUMENTS** : 3 bulletins salaire garant, assurance habitation, pice identit"," **RECHERCHE** : Alertes StudyMarket, visites groupes, ractivit <24h"," **SCURIT** : Jamais de virement avant visite, vrifier propritaire"," **COLOCATION** : Rglement intrieur, partage charges, bail solidaire"," **TRANSPORT** : <30min fac, proximit mtro/bus, pass tudiant"]},Job:{emoji:"",title:"EXPERTISE JOBS TUDIANTS",budgetAdvice:{Default:"Salaire moyen : 11,65/h SMIC  Limite lgale : 964h/an (60% temps plein)"},tips:[" **RMUNRATION** : SMIC 11,65/h minimum, cours particuliers 15-25/h"," **CONTRATS** : CDD tudiant, interim, auto-entrepreneur si >1000/mois"," **PLANNING** : Maximum 20h/semaine, viter priodes examens"," **JOBS POPULAIRES** : Cours particuliers, baby-sitting, vnementiel, restauration"," **CAMPUS** : Bibliothque, RU, accueil, tutorat (priorit tudiants)"," **DROITS** : Congs pays, protection sociale, chmage si >610h"]},Service:{emoji:"",title:"EXPERTISE SERVICES TUDIANTS",budgetAdvice:{Default:"Tarifs moyens : Cours particuliers 15-25/h  Traduction 0,10/mot  Rdaction 15/page"},tips:[" **TARIFS MARCH** : Maths/Physique 20-25/h, Langues 15-20/h, Informatique 25-30/h"," **MICRO-ENTREPRISE** : Obligatoire si >1000/mois, 22% charges sociales"," **SPCIALISATIONS** : Matires scientifiques, langues rares, informatique"," **CLIENTLE** : Collgiens/lycens, tudiants, adultes formation"," **LIEUX** : Domicile, bibliothque, visio (+ pratique)"," **ASSURANCE** : Responsabilit civile obligatoire, StudyMarket 0% commission"]},Matriel:{emoji:"",title:"EXPERTISE MATRIEL TUDIANT",budgetAdvice:{Default:"conomie moyenne : 30-50% vs neuf  Livres : 40-60%  lectronique : 20-40%"},tips:[" **PRIX MARCH** : Livres 20-40 vs 60 neuf, PC portable 300-800 vs 1200"," **VRIFICATIONS** : tat gnral, fonctionnement, garantie constructeur"," **LIVRES** : dition actuelle, annotations limites, programme en cours"," **LECTRONIQUE** : Test complet, dblocage oprateur, accessoires inclus"," **MOBILIER/VLO** : Vrification scurit, pices dtaches disponibles"," **NGOCIATION** : Comparer 3 annonces, dfauts = -10-20%, achat group"]}},z=I[Z]||I.Logement,B=K.match(/(paris|lyon|toulouse|marseille|bordeaux|lille|nice|nantes|strasbourg|montpellier)/i),X=B&&z.budgetAdvice[B[1].charAt(0).toUpperCase()+B[1].slice(1)]||z.budgetAdvice.Default;return`${z.emoji} **${z.title}** pour "${K}"

 **STUDYMARKET : PLATEFORME TOUT-EN-UN POUR TUDIANTS**

**Pourquoi StudyMarket rvolutionne ta vie tudiante :**
 **Centralisation** : Plus besoin de 10 sites diffrents
 **Fiabilit** : Annonces vrifies, utilisateurs authentifis
 **Rapidit** : Recherche Algolia instantane, alertes temps rel
 **Scurit** : Messagerie protge, paiement scuris
 **Personnalisation** : Recommandations IA selon ton profil

 **DONNES MARCH** : ${X}

 **CONSEILS EXPERT STUDYMARKET :**
${z.tips.join(`
`)}

 **RECHERCHE TEMPORAIREMENT INDISPONIBLE**

 **UTILISE STUDYMARKET DIRECTEMENT :**
 **Interface moderne** : Filtres avancs, recherche instantane
 **Alertes intelligentes** : Notifications ds qu'une annonce correspond
 **Favoris** : Sauvegarde tes annonces prfres
 **Messagerie** : Contacte directement les annonceurs en scurit
 **App mobile** : Accs partout, notifications push

 **StudyMarket = Ton compagnon digital pour russir tes tudes !**`},O=(Z,K,I)=>{if(Z.length===0){let B=` Aucun ${K.toLowerCase()} trouv pour "${I}"<br />`;return B+=" Essaie avec d'autres mots-cls ou poste une demande sur StudyMarket ! <br />",B=kue(B,K),B}let z=` ${Z.length} ${K.toLowerCase()}(s) trouv(s) :<br /><br />`;return Z.slice(0,10).forEach((B,X)=>{const ue=te=>te.titre||te.title||te.types||"Logement",ge=te=>{let ie=te.prix||te.price||te.rent||te.priceNumeric||te.loyer||te.montant;return typeof ie=="number"?ie+"":typeof ie=="string"?ie.replace(/\s/g,"").match(/^\d+$/)?ie+"":ie:"-"},Ee=te=>te.adresse||te.location||te.city||"-",De=te=>te.privilege||te.url||te.link||"#",$e=te=>te.surface||te.superficie||"",Ae=te=>te.description||"";z+=`<strong>${X+1}. ${ue(B)}</strong><br />`;const se=ge(B);if(se&&se!=="-"&&(z+=` ${se}<br />`),Ee(B)&&Ee(B)!=="-"&&(z+=` ${Ee(B)}<br />`),$e(B)&&(z+=` Surface: ${$e(B)}<br />`),Ae(B)){const te=Ae(B).length>100?Ae(B).substring(0,100)+"...":Ae(B);z+=` ${te}<br />`}De(B)&&De(B)!=="#"&&(z+=` <a href="${De(B)}" target="_blank">Voir l'annonce</a><br />`),z+="<br />"}),z},q=()=>t?`${CT}

CONTEXTE UTILISATEUR:
- Nom: ${t.firstName||""} ${t.lastName||""}
- Email: ${t.email}
- Universit: ${t.university||""}
- Domaine: ${t.fieldOfStudy||""}
- Localisation: ${t.location||""}`:CT,R=async()=>{if(!u.trim())return;const Z=[...b.messages,{role:"user",content:u,timestamp:Date.now()}];S(K=>({...K,messages:Z,loading:!0,error:null})),d("");try{if(Pue(u)){const I=`<strong>Voici les principales pages de StudyMarket :</strong><br />${Iue()}`;S(z=>({...z,messages:[...Z,{role:"assistant",content:I,timestamp:Date.now()}],loading:!1}));return}const K=E(u);if(K)try{const I=await y(K.index,u),z=O(I,K.label,u);S(B=>({...B,messages:[...Z,{role:"assistant",content:z,timestamp:Date.now()}],loading:!1}))}catch{const z=A(K.label,u);S(B=>({...B,messages:[...Z,{role:"assistant",content:z,timestamp:Date.now()}],loading:!1}))}else try{const I=Sue[f],z={model:f,messages:[{role:"system",content:q()},...Z.filter(ge=>ge.role!=="system").map(ge=>({role:ge.role,content:ge.content}))],temperature:.7,max_tokens:800},X=await(await fetch(Nue,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${I}`,"HTTP-Referer":window.location.origin},body:JSON.stringify(z)})).json();let ue="Dsol, je n'ai pas pu traiter ta demande.";X.choices&&X.choices[0]&&X.choices[0].message&&X.choices[0].message.content&&(ue=X.choices[0].message.content),S(ge=>({...ge,messages:[...Z,{role:"assistant",content:ue,timestamp:Date.now()}],loading:!1}))}catch{S(z=>({...z,messages:[...Z,{role:"assistant",content:` **Expert StudyMarket temporairement indisponible**

 **Diagnostic technique :** Service IA en maintenance

 **SOLUTIONS IMMDIATES :**
 **Navigue** : StudyMarket.fr section par section
 **Recherche** : Utilise filtres avancs sur le site
 **Communaut** : Pose ta question sur notre forum
 **Support** : quipe experte disponible 9h-18h

 **EN ATTENDANT, VOICI MES CONSEILS EXPERTS :**

** LOGEMENT :** Visite 3-4 appartements/jour, ngocie -50, dossier complet  l'avance

** JOBS :** Rponds dans les 24h, adapte CV, privilgie flexibilit horaires

** SERVICES :** Tarif march (15-25/h), spcialise-toi, fidlise clientle

** MATRIEL :** conomie 30-50% vs neuf, teste avant achat, ngocie -20%

 **Ressaie dans 2-3 minutes, je reviens avec toute mon expertise !**`,timestamp:Date.now()}],loading:!1,error:"Expert temporairement indisponible"}))}}catch{S(I=>({...I,messages:[...Z,{role:"assistant",content:` **Expert StudyMarket - Erreur technique**

 **Diagnostic :** Problme de connexion dtect

 **ACTIONS RECOMMANDES :**
 **Immdiat** : Rafrachis la page (Ctrl+F5)
 **Alternative** : StudyMarket.fr fonctionne normalement
 **Support** : quipe technique notifie automatiquement

 **CONSEILS EXPERTS PENDANT L'ATTENTE :**

**Optimise ta recherche :**
 Utilise mots-cls prcis : "Studio 20m2 Paris 11"
 Active notifications push sur l'app mobile
 Cre plusieurs alertes avec critres diffrents

**Ngocie comme un pro :**
 Prpare 3 arguments de ngociation
 Propose visite rapide (aujourd'hui/demain)
 Mentionne srieux de ton dossier

 **L'expertise StudyMarket revient dans quelques instants !**`,timestamp:Date.now()}],loading:!1,error:"Erreur technique - Expert disponible bientt"}))}},V=Z=>{Z.key==="Enter"&&!Z.shiftKey&&(Z.preventDefault(),R())},U=()=>{S(Z=>({...Z,messages:[{role:"assistant",content:N(),timestamp:Date.now()}],loading:!1,error:null,retryCount:0}))},k=()=>{const Z=[...b.messages].reverse().find(K=>K.role==="user");Z&&(d(Z.content),setTimeout(()=>R(),100))},F=()=>{c(!1),window.open("mailto:contact@studymarket.com?subject=Contact%20depuis%20StudyMarket","_blank")},D=()=>{c(!1),r(!0)},P=()=>{a(!0)},H=()=>{a(!1)},ee=Z=>Z.replace(/###?\s*(\d+)?\.?\s*(.*?)(\n|$)/g,(K,I,z)=>I?`
${I} ${z.trim()}
`:`
**${z.trim()}**
`).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br />");return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        @media (max-width: 768px) {
          .chatbot-modal {
            width: 95vw !important;
            max-width: 95vw !important;
            right: 2.5vw !important;
            bottom: 80px !important;
            height: 75vh !important;
            max-height: 75vh !important;
          }
          .chatbot-modal-minimized {
            width: 90vw !important;
            max-width: 320px !important;
            height: 60px !important;
            right: 5vw !important;
            bottom: 80px !important;
          }
          .chatbot-fab-btn {
            width: 56px !important;
            height: 56px !important;
            bottom: 20px !important;
            right: 20px !important;
          }
          .chatbot-fab-menu-items {
            bottom: 85px !important;
            right: 20px !important;
          }
          .chatbot-messages-container {
            max-height: 45vh !important;
          }
          .chatbot-input-container {
            padding: 12px !important;
          }
          .chatbot-input {
            padding: 12px 16px !important;
            font-size: 16px !important;
          }
          .chatbot-send-btn {
            min-width: 48px !important;
            height: 48px !important;
          }
          .chatbot-controls {
            padding: 8px 12px !important;
            flex-wrap: wrap !important;
            gap: 8px !important;
          }
          .chatbot-model-select {
            max-width: 140px !important;
            font-size: 11px !important;
          }
          .message-bubble {
            max-width: 90% !important;
          }
        }
        @media (max-width: 480px) {
          .chatbot-modal {
            width: 98vw !important;
            right: 1vw !important;
            bottom: 70px !important;
            height: 80vh !important;
            max-height: 80vh !important;
          }
          .chatbot-modal-minimized {
            width: 95vw !important;
            right: 2.5vw !important;
            bottom: 70px !important;
          }
          .chatbot-messages-container {
            max-height: 50vh !important;
          }
          .chatbot-fab-btn {
            width: 52px !important;
            height: 52px !important;
            bottom: 16px !important;
            right: 16px !important;
          }
          .chatbot-fab-menu-items {
            bottom: 75px !important;
            right: 16px !important;
          }
        }
        .chatbot-modal {
          animation: slideUpSmooth 0.3s ease-out;
        }
        .chatbot-modal-minimized {
          animation: slideUpSmooth 0.3s ease-out;
        }
        @keyframes slideUpSmooth {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .message-bubble {
          animation: fadeInMessage 0.3s ease-out;
        }
        @keyframes fadeInMessage {
          from { opacity: 0; transform: translateY(8px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .typing-indicator {
          animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
          0%, 100% { opacity: 0.7; }
          50% { opacity: 1; }
        }
        .dark ::-webkit-scrollbar-thumb {
          background: #374151; /* gray-700 */
        }
      `}),s.jsxs("div",{className:"chatbot-fab-menu",children:[s.jsxs("button",{"aria-label":"Ouvrir le menu StudyMarket",onClick:()=>c(Z=>!Z),className:"chatbot-fab-btn fixed bottom-6 right-6 z-50 shadow-lg rounded-full p-0 w-16 h-16 flex items-center justify-center transition-all duration-300 focus:outline-none bg-gradient-to-br from-blue-600 to-green-500 hover:from-blue-700 hover:to-green-600 hover:scale-105",children:[s.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})}),b.loading&&s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-ping"})]}),s.jsxs("div",{className:`fixed bottom-28 right-6 z-50 flex flex-col items-end gap-3 transition-all duration-300 chatbot-fab-menu-items ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"}`,children:[s.jsx("button",{onClick:F,className:"w-12 h-12 rounded-full flex items-center justify-center bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",title:"Contacter par email",children:s.jsx("span",{className:"text-xl",children:""})}),s.jsx("button",{onClick:D,className:"w-12 h-12 rounded-full flex items-center justify-center bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",title:"Assistant IA",children:s.jsx("span",{className:"text-xl",children:""})})]})]}),n&&s.jsxs("div",{className:`chatbot-modal fixed bottom-24 right-6 z-50 w-96 max-w-[90vw] bg-white dark:bg-gray-900 rounded-xl shadow-2xl flex flex-col overflow-hidden border border-gray-200 dark:border-gray-700 ${i?"chatbot-modal-minimized":""}`,style:{maxHeight:i?"60px":"75vh"},children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-green-500 text-white rounded-t-xl",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-white/20 dark:bg-gray-700 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-bold",children:""})}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-sm dark:text-blue-100",children:"Assistant IA"}),s.jsx("div",{className:"text-xs text-blue-100 dark:text-blue-300",children:" En ligne"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:i?H:P,className:"text-white/80 hover:text-white p-1 transition-colors focus:outline-none dark:text-blue-200 dark:hover:text-white",title:i?"Agrandir":"Rduire",style:{border:"none",outline:"none",boxShadow:"none",background:"transparent"},children:i?s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 3v3a2 2 0 01-2 2H3m18 0h-3a2 2 0 01-2-2V3m0 18v-3a2 2 0 012-2h3M3 16h3a2 2 0 012 2v3"})}):s.jsx("span",{className:"text-lg font-bold",children:""})}),s.jsx("button",{onClick:()=>r(!1),className:"text-white/80 hover:text-white p-1 transition-colors focus:outline-none dark:text-blue-200 dark:hover:text-white",title:"Fermer",style:{border:"none",outline:"none",boxShadow:"none",background:"transparent"},children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})]}),!i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between chatbot-controls",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Modle:"}),s.jsx("select",{value:f,onChange:Z=>p(Z.target.value),className:"text-xs rounded px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-400 chatbot-model-select",disabled:b.loading,children:ET.map(Z=>s.jsx("option",{value:Z.value,children:Z.label},Z.value))})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[b.error&&s.jsx("button",{onClick:k,className:"text-xs px-2 py-1 bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300 rounded hover:bg-orange-200 dark:hover:bg-orange-800",title:"Ressayer",children:""}),s.jsx("button",{onClick:U,className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"Nouveau chat",children:""})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-3 bg-gray-50 dark:bg-gray-800 chatbot-messages-container",style:{maxHeight:"50vh"},children:[b.messages.map((Z,K)=>s.jsx("div",{className:`flex ${Z.role==="user"?"justify-end":"justify-start"} message-bubble`,children:s.jsxs("div",{className:`rounded-lg px-3 py-2 text-sm message-bubble ${Z.role==="user"?"bg-blue-600 text-white max-w-[85%]":"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 shadow-sm border border-gray-200 dark:border-gray-600 max-w-[90%]"}`,children:[s.jsx("div",{dangerouslySetInnerHTML:{__html:ee(Z.content)},style:{textAlign:"left"}}),Z.timestamp&&s.jsx("div",{className:`text-xs mt-1 ${Z.role==="user"?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:new Date(Z.timestamp).toLocaleTimeString()})]})},K)),b.loading&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-lg px-3 py-2 shadow-sm border border-gray-200 dark:border-gray-600 typing-indicator",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Rflexion..."})]})})}),s.jsx("div",{ref:g})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 chatbot-input-container",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{ref:_,type:"text",value:u,onChange:Z=>d(Z.target.value),onKeyDown:V,placeholder:"Pose ta question...",className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none chatbot-input",disabled:b.loading,maxLength:500}),s.jsx("button",{onClick:R,disabled:b.loading||!u.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors disabled:cursor-not-allowed chatbot-send-btn flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsxs("span",{children:[u.length,"/500"]}),u.length>450&&s.jsx("span",{className:"text-orange-500",children:""})]}),s.jsx("span",{className:"hidden sm:inline",children:"Entre pour envoyer"}),s.jsx("span",{className:"sm:hidden",children:"Entre "})]})]})]})]})]})};function Rue({children:t}){const[e,n]=Le.useState(null);return Le.useEffect(()=>{const r=i=>{n(i.error||new Error(i.message))};return window.addEventListener("error",r),()=>window.removeEventListener("error",r)},[]),e?s.jsxs("div",{style:{color:"red",padding:"2rem",textAlign:"center"},children:["Une erreur est survenue : ",e.message]}):s.jsx(s.Fragment,{children:t})}function Mue(){return s.jsx(w8,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:s.jsx(NG,{children:s.jsxs(m8,{children:[s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx(PJ,{}),s.jsx("main",{className:"flex-1 pt-16",children:s.jsx(Rue,{children:s.jsxs(a8,{children:[s.jsx(hn,{path:"/",element:s.jsx(Gte,{})}),s.jsx(hn,{path:"/listings",element:s.jsx(Ine,{})}),s.jsx(hn,{path:"/listing/:id",element:s.jsx(Mie,{})}),s.jsx(hn,{path:"/auth",element:s.jsx(Dle,{})}),s.jsx(hn,{path:"/help",element:s.jsx(rle,{})}),s.jsx(hn,{path:"/safety",element:s.jsx(ole,{})}),s.jsx(hn,{path:"/cart",element:s.jsx(Lle,{})}),s.jsx(hn,{path:"/products",element:s.jsx(Hle,{})}),s.jsx(hn,{path:"/checkout/success",element:s.jsx(Gle,{})}),s.jsx(hn,{path:"/checkout",element:s.jsx(pi,{children:s.jsx(Fle,{})})}),s.jsx(hn,{path:"/orders",element:s.jsx(pi,{children:s.jsx(Vle,{})})}),s.jsx(hn,{path:"/order-confirmation/:orderId",element:s.jsx(pi,{children:s.jsx(zle,{})})}),s.jsx(hn,{path:"/create",element:s.jsx(pi,{children:s.jsx(ioe,{})})}),s.jsx(hn,{path:"/profile",element:s.jsx(pi,{children:s.jsx(coe,{})})}),s.jsx(hn,{path:"/settings",element:s.jsx(pi,{children:s.jsx(_oe,{})})}),s.jsx(hn,{path:"/impact",element:s.jsx(pi,{children:s.jsx(Toe,{})})}),s.jsx(hn,{path:"/saved-searches",element:s.jsx(pi,{children:s.jsx(Ioe,{})})}),s.jsx(hn,{path:"/favorites",element:s.jsx(pi,{children:s.jsx(Moe,{})})}),s.jsx(hn,{path:"/payments",element:s.jsx(pi,{children:s.jsx(Ooe,{})})}),s.jsx(hn,{path:"/messages",element:s.jsx(pi,{children:s.jsx(wle,{})})}),s.jsx(hn,{path:"/edit-listing/:id",element:s.jsx(Yle,{})}),s.jsx(hn,{path:"/jobs",element:s.jsx(xce,{})}),s.jsx(hn,{path:"/housing",element:s.jsx(wue,{})}),s.jsx(hn,{path:"*",element:s.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Page non trouve (404)"})})]})})}),s.jsx(AJ,{}),s.jsx(Aue,{})]}),s.jsx(pz,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"1px solid hsl(var(--border))"}}})]})})})}zI(document.getElementById("root")).render(s.jsx(x.StrictMode,{children:s.jsx(Mue,{})}));
