function Cz(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var sO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Go(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iO={exports:{}},E0={},aO={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg=Symbol.for("react.element"),Tz=Symbol.for("react.portal"),Rz=Symbol.for("react.fragment"),kz=Symbol.for("react.strict_mode"),Iz=Symbol.for("react.profiler"),Az=Symbol.for("react.provider"),Oz=Symbol.for("react.context"),Mz=Symbol.for("react.forward_ref"),Dz=Symbol.for("react.suspense"),Lz=Symbol.for("react.memo"),Fz=Symbol.for("react.lazy"),ZP=Symbol.iterator;function $z(t){return t===null||typeof t!="object"?null:(t=ZP&&t[ZP]||t["@@iterator"],typeof t=="function"?t:null)}var oO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lO=Object.assign,cO={};function Gh(t,e,n){this.props=t,this.context=e,this.refs=cO,this.updater=n||oO}Gh.prototype.isReactComponent={};Gh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uO(){}uO.prototype=Gh.prototype;function DN(t,e,n){this.props=t,this.context=e,this.refs=cO,this.updater=n||oO}var LN=DN.prototype=new uO;LN.constructor=DN;lO(LN,Gh.prototype);LN.isPureReactComponent=!0;var QP=Array.isArray,dO=Object.prototype.hasOwnProperty,FN={current:null},hO={key:!0,ref:!0,__self:!0,__source:!0};function fO(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)dO.call(e,r)&&!hO.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:yg,type:t,key:a,ref:o,props:s,_owner:FN.current}}function Vz(t,e){return{$$typeof:yg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $N(t){return typeof t=="object"&&t!==null&&t.$$typeof===yg}function zz(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var YP=/\/+/g;function hb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zz(""+t.key):e.toString(36)}function jy(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yg:case Tz:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+hb(o,0):r,QP(s)?(n="",t!=null&&(n=t.replace(YP,"$&/")+"/"),jy(s,e,n,"",function(d){return d})):s!=null&&($N(s)&&(s=Vz(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(YP,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",QP(t))for(var l=0;l<t.length;l++){a=t[l];var u=r+hb(a,l);o+=jy(a,e,n,u,s)}else if(u=$z(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=r+hb(a,l++),o+=jy(a,e,n,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ov(t,e,n){if(t==null)return t;var r=[],s=0;return jy(t,r,"","",function(a){return e.call(n,a,s++)}),r}function Uz(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vs={current:null},Ny={transition:null},Bz={ReactCurrentDispatcher:vs,ReactCurrentBatchConfig:Ny,ReactCurrentOwner:FN};function mO(){throw Error("act(...) is not supported in production builds of React.")}It.Children={map:Ov,forEach:function(t,e,n){Ov(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ov(t,function(){e++}),e},toArray:function(t){return Ov(t,function(e){return e})||[]},only:function(t){if(!$N(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};It.Component=Gh;It.Fragment=Rz;It.Profiler=Iz;It.PureComponent=DN;It.StrictMode=kz;It.Suspense=Dz;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bz;It.act=mO;It.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lO({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=FN.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)dO.call(e,u)&&!hO.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:yg,type:t.type,key:s,ref:a,props:r,_owner:o}};It.createContext=function(t){return t={$$typeof:Oz,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Az,_context:t},t.Consumer=t};It.createElement=fO;It.createFactory=function(t){var e=fO.bind(null,t);return e.type=t,e};It.createRef=function(){return{current:null}};It.forwardRef=function(t){return{$$typeof:Mz,render:t}};It.isValidElement=$N;It.lazy=function(t){return{$$typeof:Fz,_payload:{_status:-1,_result:t},_init:Uz}};It.memo=function(t,e){return{$$typeof:Lz,type:t,compare:e===void 0?null:e}};It.startTransition=function(t){var e=Ny.transition;Ny.transition={};try{t()}finally{Ny.transition=e}};It.unstable_act=mO;It.useCallback=function(t,e){return vs.current.useCallback(t,e)};It.useContext=function(t){return vs.current.useContext(t)};It.useDebugValue=function(){};It.useDeferredValue=function(t){return vs.current.useDeferredValue(t)};It.useEffect=function(t,e){return vs.current.useEffect(t,e)};It.useId=function(){return vs.current.useId()};It.useImperativeHandle=function(t,e,n){return vs.current.useImperativeHandle(t,e,n)};It.useInsertionEffect=function(t,e){return vs.current.useInsertionEffect(t,e)};It.useLayoutEffect=function(t,e){return vs.current.useLayoutEffect(t,e)};It.useMemo=function(t,e){return vs.current.useMemo(t,e)};It.useReducer=function(t,e,n){return vs.current.useReducer(t,e,n)};It.useRef=function(t){return vs.current.useRef(t)};It.useState=function(t){return vs.current.useState(t)};It.useSyncExternalStore=function(t,e,n){return vs.current.useSyncExternalStore(t,e,n)};It.useTransition=function(){return vs.current.useTransition()};It.version="18.3.1";aO.exports=It;var w=aO.exports;const oe=Go(w),VN=Cz({__proto__:null,default:oe},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wz=w,Hz=Symbol.for("react.element"),qz=Symbol.for("react.fragment"),Gz=Object.prototype.hasOwnProperty,Kz=Wz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zz={key:!0,ref:!0,__self:!0,__source:!0};function pO(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Gz.call(e,r)&&!Zz.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Hz,type:t,key:a,ref:o,props:s,_owner:Kz.current}}E0.Fragment=qz;E0.jsx=pO;E0.jsxs=pO;iO.exports=E0;var i=iO.exports,gO={exports:{}},ti={},vO={exports:{}},yO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,G){var q=D.length;D.push(G);e:for(;0<q;){var X=q-1>>>1,fe=D[X];if(0<s(fe,G))D[X]=G,D[q]=fe,q=X;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var G=D[0],q=D.pop();if(q!==G){D[0]=q;e:for(var X=0,fe=D.length,Te=fe>>>1;X<Te;){var $e=2*(X+1)-1,ze=D[$e],Le=$e+1,Ce=D[Le];if(0>s(ze,q))Le<fe&&0>s(Ce,ze)?(D[X]=Ce,D[Le]=q,X=Le):(D[X]=ze,D[$e]=q,X=$e);else if(Le<fe&&0>s(Ce,q))D[X]=Ce,D[Le]=q,X=Le;else break e}}return G}function s(D,G){var q=D.sortIndex-G.sortIndex;return q!==0?q:D.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,m=null,p=3,y=!1,j=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=D)r(d),G.sortIndex=G.expirationTime,e(u,G);else break;G=n(d)}}function C(D){if(_=!1,S(D),!j)if(n(u)!==null)j=!0,ee(R);else{var G=n(d);G!==null&&K(C,G.startTime-D)}}function R(D,G){j=!1,_&&(_=!1,b(I),I=-1),y=!0;var q=p;try{for(S(G),m=n(u);m!==null&&(!(m.expirationTime>G)||D&&!O());){var X=m.callback;if(typeof X=="function"){m.callback=null,p=m.priorityLevel;var fe=X(m.expirationTime<=G);G=t.unstable_now(),typeof fe=="function"?m.callback=fe:m===n(u)&&r(u),S(G)}else r(u);m=n(u)}if(m!==null)var Te=!0;else{var $e=n(d);$e!==null&&K(C,$e.startTime-G),Te=!1}return Te}finally{m=null,p=q,y=!1}}var z=!1,k=null,I=-1,V=5,T=-1;function O(){return!(t.unstable_now()-T<V)}function $(){if(k!==null){var D=t.unstable_now();T=D;var G=!0;try{G=k(!0,D)}finally{G?M():(z=!1,k=null)}}else z=!1}var M;if(typeof x=="function")M=function(){x($)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,J=B.port2;B.port1.onmessage=$,M=function(){J.postMessage(null)}}else M=function(){N($,0)};function ee(D){k=D,z||(z=!0,M())}function K(D,G){I=N(function(){D(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){j||y||(j=!0,ee(R))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(D){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var q=p;p=G;try{return D()}finally{p=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var q=p;p=D;try{return G()}finally{p=q}},t.unstable_scheduleCallback=function(D,G,q){var X=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?X+q:X):q=X,D){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=q+fe,D={id:h++,callback:G,priorityLevel:D,startTime:q,expirationTime:fe,sortIndex:-1},q>X?(D.sortIndex=q,e(d,D),n(u)===null&&D===n(d)&&(_?(b(I),I=-1):_=!0,K(C,q-X))):(D.sortIndex=fe,e(u,D),j||y||(j=!0,ee(R))),D},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(D){var G=p;return function(){var q=p;p=G;try{return D.apply(this,arguments)}finally{p=q}}}})(yO);vO.exports=yO;var Qz=vO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yz=w,Js=Qz;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xO=new Set,Qm={};function Ou(t,e){uh(t,e),uh(t+"Capture",e)}function uh(t,e){for(Qm[t]=e,t=0;t<e.length;t++)xO.add(e[t])}var Ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),B_=Object.prototype.hasOwnProperty,Jz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JP={},XP={};function Xz(t){return B_.call(XP,t)?!0:B_.call(JP,t)?!1:Jz.test(t)?XP[t]=!0:(JP[t]=!0,!1)}function eU(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tU(t,e,n,r){if(e===null||typeof e>"u"||eU(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ys(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lr[t]=new ys(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lr[e]=new ys(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lr[t]=new ys(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lr[t]=new ys(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lr[t]=new ys(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lr[t]=new ys(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lr[t]=new ys(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lr[t]=new ys(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lr[t]=new ys(t,5,!1,t.toLowerCase(),null,!1,!1)});var zN=/[\-:]([a-z])/g;function UN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zN,UN);Lr[e]=new ys(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zN,UN);Lr[e]=new ys(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zN,UN);Lr[e]=new ys(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lr[t]=new ys(t,1,!1,t.toLowerCase(),null,!1,!1)});Lr.xlinkHref=new ys("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lr[t]=new ys(t,1,!1,t.toLowerCase(),null,!0,!0)});function BN(t,e,n,r){var s=Lr.hasOwnProperty(e)?Lr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tU(e,n,s,r)&&(n=null),r||s===null?Xz(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ko=Yz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mv=Symbol.for("react.element"),Ad=Symbol.for("react.portal"),Od=Symbol.for("react.fragment"),WN=Symbol.for("react.strict_mode"),W_=Symbol.for("react.profiler"),wO=Symbol.for("react.provider"),bO=Symbol.for("react.context"),HN=Symbol.for("react.forward_ref"),H_=Symbol.for("react.suspense"),q_=Symbol.for("react.suspense_list"),qN=Symbol.for("react.memo"),yl=Symbol.for("react.lazy"),_O=Symbol.for("react.offscreen"),eC=Symbol.iterator;function Wf(t){return t===null||typeof t!="object"?null:(t=eC&&t[eC]||t["@@iterator"],typeof t=="function"?t:null)}var Dn=Object.assign,fb;function dm(t){if(fb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fb=e&&e[1]||""}return`
`+fb+t}var mb=!1;function pb(t,e){if(!t||mb)return"";mb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{mb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?dm(t):""}function nU(t){switch(t.tag){case 5:return dm(t.type);case 16:return dm("Lazy");case 13:return dm("Suspense");case 19:return dm("SuspenseList");case 0:case 2:case 15:return t=pb(t.type,!1),t;case 11:return t=pb(t.type.render,!1),t;case 1:return t=pb(t.type,!0),t;default:return""}}function G_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Od:return"Fragment";case Ad:return"Portal";case W_:return"Profiler";case WN:return"StrictMode";case H_:return"Suspense";case q_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bO:return(t.displayName||"Context")+".Consumer";case wO:return(t._context.displayName||"Context")+".Provider";case HN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qN:return e=t.displayName||null,e!==null?e:G_(t.type)||"Memo";case yl:e=t._payload,t=t._init;try{return G_(t(e))}catch{}}return null}function rU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G_(e);case 8:return e===WN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sU(t){var e=jO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dv(t){t._valueTracker||(t._valueTracker=sU(t))}function NO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jO(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function K_(t,e){var n=e.checked;return Dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Jl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function SO(t,e){e=e.checked,e!=null&&BN(t,"checked",e,!1)}function Z_(t,e){SO(t,e);var n=Jl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Q_(t,e.type,n):e.hasOwnProperty("defaultValue")&&Q_(t,e.type,Jl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Q_(t,e,n){(e!=="number"||rx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var hm=Array.isArray;function Kd(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Jl(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Y_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return Dn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rC(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ae(92));if(hm(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jl(n)}}function EO(t,e){var n=Jl(e.value),r=Jl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lv,CO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lv=Lv||document.createElement("div"),Lv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ym(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Tm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iU=["Webkit","ms","Moz","O"];Object.keys(Tm).forEach(function(t){iU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Tm[e]=Tm[t]})});function TO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Tm.hasOwnProperty(t)&&Tm[t]?(""+e).trim():e+"px"}function RO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=TO(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var aU=Dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function X_(t,e){if(e){if(aU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function e1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var t1=null;function GN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var n1=null,Zd=null,Qd=null;function iC(t){if(t=bg(t)){if(typeof n1!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=k0(e),n1(t.stateNode,t.type,e))}}function kO(t){Zd?Qd?Qd.push(t):Qd=[t]:Zd=t}function IO(){if(Zd){var t=Zd,e=Qd;if(Qd=Zd=null,iC(t),e)for(t=0;t<e.length;t++)iC(e[t])}}function AO(t,e){return t(e)}function OO(){}var gb=!1;function MO(t,e,n){if(gb)return t(e,n);gb=!0;try{return AO(t,e,n)}finally{gb=!1,(Zd!==null||Qd!==null)&&(OO(),IO())}}function Jm(t,e){var n=t.stateNode;if(n===null)return null;var r=k0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ae(231,e,typeof n));return n}var r1=!1;if(Ro)try{var Hf={};Object.defineProperty(Hf,"passive",{get:function(){r1=!0}}),window.addEventListener("test",Hf,Hf),window.removeEventListener("test",Hf,Hf)}catch{r1=!1}function oU(t,e,n,r,s,a,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Rm=!1,sx=null,ix=!1,s1=null,lU={onError:function(t){Rm=!0,sx=t}};function cU(t,e,n,r,s,a,o,l,u){Rm=!1,sx=null,oU.apply(lU,arguments)}function uU(t,e,n,r,s,a,o,l,u){if(cU.apply(this,arguments),Rm){if(Rm){var d=sx;Rm=!1,sx=null}else throw Error(Ae(198));ix||(ix=!0,s1=d)}}function Mu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function aC(t){if(Mu(t)!==t)throw Error(Ae(188))}function dU(t){var e=t.alternate;if(!e){if(e=Mu(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return aC(s),t;if(a===r)return aC(s),e;a=a.sibling}throw Error(Ae(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(Ae(189))}}if(n.alternate!==r)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?t:e}function LO(t){return t=dU(t),t!==null?FO(t):null}function FO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=FO(t);if(e!==null)return e;t=t.sibling}return null}var $O=Js.unstable_scheduleCallback,oC=Js.unstable_cancelCallback,hU=Js.unstable_shouldYield,fU=Js.unstable_requestPaint,Gn=Js.unstable_now,mU=Js.unstable_getCurrentPriorityLevel,KN=Js.unstable_ImmediatePriority,VO=Js.unstable_UserBlockingPriority,ax=Js.unstable_NormalPriority,pU=Js.unstable_LowPriority,zO=Js.unstable_IdlePriority,P0=null,Oa=null;function gU(t){if(Oa&&typeof Oa.onCommitFiberRoot=="function")try{Oa.onCommitFiberRoot(P0,t,void 0,(t.current.flags&128)===128)}catch{}}var Qi=Math.clz32?Math.clz32:xU,vU=Math.log,yU=Math.LN2;function xU(t){return t>>>=0,t===0?32:31-(vU(t)/yU|0)|0}var Fv=64,$v=4194304;function fm(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ox(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=fm(l):(a&=o,a!==0&&(r=fm(a)))}else o=n&~s,o!==0?r=fm(o):a!==0&&(r=fm(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qi(e),s=1<<n,r|=t[n],e&=~s;return r}function wU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bU(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Qi(a),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=wU(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function i1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function UO(){var t=Fv;return Fv<<=1,!(Fv&4194240)&&(Fv=64),t}function vb(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qi(e),t[e]=n}function _U(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Qi(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function ZN(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qi(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var en=0;function BO(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WO,QN,HO,qO,GO,a1=!1,Vv=[],Ll=null,Fl=null,$l=null,Xm=new Map,ep=new Map,_l=[],jU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lC(t,e){switch(t){case"focusin":case"focusout":Ll=null;break;case"dragenter":case"dragleave":Fl=null;break;case"mouseover":case"mouseout":$l=null;break;case"pointerover":case"pointerout":Xm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ep.delete(e.pointerId)}}function qf(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=bg(e),e!==null&&QN(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function NU(t,e,n,r,s){switch(e){case"focusin":return Ll=qf(Ll,t,e,n,r,s),!0;case"dragenter":return Fl=qf(Fl,t,e,n,r,s),!0;case"mouseover":return $l=qf($l,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Xm.set(a,qf(Xm.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,ep.set(a,qf(ep.get(a)||null,t,e,n,r,s)),!0}return!1}function KO(t){var e=qc(t.target);if(e!==null){var n=Mu(e);if(n!==null){if(e=n.tag,e===13){if(e=DO(n),e!==null){t.blockedOn=e,GO(t.priority,function(){HO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=o1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);t1=r,n.target.dispatchEvent(r),t1=null}else return e=bg(n),e!==null&&QN(e),t.blockedOn=n,!1;e.shift()}return!0}function cC(t,e,n){Sy(t)&&n.delete(e)}function SU(){a1=!1,Ll!==null&&Sy(Ll)&&(Ll=null),Fl!==null&&Sy(Fl)&&(Fl=null),$l!==null&&Sy($l)&&($l=null),Xm.forEach(cC),ep.forEach(cC)}function Gf(t,e){t.blockedOn===e&&(t.blockedOn=null,a1||(a1=!0,Js.unstable_scheduleCallback(Js.unstable_NormalPriority,SU)))}function tp(t){function e(s){return Gf(s,t)}if(0<Vv.length){Gf(Vv[0],t);for(var n=1;n<Vv.length;n++){var r=Vv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ll!==null&&Gf(Ll,t),Fl!==null&&Gf(Fl,t),$l!==null&&Gf($l,t),Xm.forEach(e),ep.forEach(e),n=0;n<_l.length;n++)r=_l[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_l.length&&(n=_l[0],n.blockedOn===null);)KO(n),n.blockedOn===null&&_l.shift()}var Yd=Ko.ReactCurrentBatchConfig,lx=!0;function EU(t,e,n,r){var s=en,a=Yd.transition;Yd.transition=null;try{en=1,YN(t,e,n,r)}finally{en=s,Yd.transition=a}}function PU(t,e,n,r){var s=en,a=Yd.transition;Yd.transition=null;try{en=4,YN(t,e,n,r)}finally{en=s,Yd.transition=a}}function YN(t,e,n,r){if(lx){var s=o1(t,e,n,r);if(s===null)Pb(t,e,r,cx,n),lC(t,r);else if(NU(s,t,e,n,r))r.stopPropagation();else if(lC(t,r),e&4&&-1<jU.indexOf(t)){for(;s!==null;){var a=bg(s);if(a!==null&&WO(a),a=o1(t,e,n,r),a===null&&Pb(t,e,r,cx,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Pb(t,e,r,null,n)}}var cx=null;function o1(t,e,n,r){if(cx=null,t=GN(r),t=qc(t),t!==null)if(e=Mu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DO(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cx=t,null}function ZO(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mU()){case KN:return 1;case VO:return 4;case ax:case pU:return 16;case zO:return 536870912;default:return 16}default:return 16}}var kl=null,JN=null,Ey=null;function QO(){if(Ey)return Ey;var t,e=JN,n=e.length,r,s="value"in kl?kl.value:kl.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return Ey=s.slice(t,1<r?1-r:void 0)}function Py(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zv(){return!0}function uC(){return!1}function ni(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?zv:uC,this.isPropagationStopped=uC,this}return Dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zv)},persist:function(){},isPersistent:zv}),e}var Kh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XN=ni(Kh),wg=Dn({},Kh,{view:0,detail:0}),CU=ni(wg),yb,xb,Kf,C0=Dn({},wg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kf&&(Kf&&t.type==="mousemove"?(yb=t.screenX-Kf.screenX,xb=t.screenY-Kf.screenY):xb=yb=0,Kf=t),yb)},movementY:function(t){return"movementY"in t?t.movementY:xb}}),dC=ni(C0),TU=Dn({},C0,{dataTransfer:0}),RU=ni(TU),kU=Dn({},wg,{relatedTarget:0}),wb=ni(kU),IU=Dn({},Kh,{animationName:0,elapsedTime:0,pseudoElement:0}),AU=ni(IU),OU=Dn({},Kh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),MU=ni(OU),DU=Dn({},Kh,{data:0}),hC=ni(DU),LU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$U={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$U[t])?!!e[t]:!1}function eS(){return VU}var zU=Dn({},wg,{key:function(t){if(t.key){var e=LU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Py(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eS,charCode:function(t){return t.type==="keypress"?Py(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Py(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UU=ni(zU),BU=Dn({},C0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fC=ni(BU),WU=Dn({},wg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eS}),HU=ni(WU),qU=Dn({},Kh,{propertyName:0,elapsedTime:0,pseudoElement:0}),GU=ni(qU),KU=Dn({},C0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZU=ni(KU),QU=[9,13,27,32],tS=Ro&&"CompositionEvent"in window,km=null;Ro&&"documentMode"in document&&(km=document.documentMode);var YU=Ro&&"TextEvent"in window&&!km,YO=Ro&&(!tS||km&&8<km&&11>=km),mC=" ",pC=!1;function JO(t,e){switch(t){case"keyup":return QU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Md=!1;function JU(t,e){switch(t){case"compositionend":return XO(e);case"keypress":return e.which!==32?null:(pC=!0,mC);case"textInput":return t=e.data,t===mC&&pC?null:t;default:return null}}function XU(t,e){if(Md)return t==="compositionend"||!tS&&JO(t,e)?(t=QO(),Ey=JN=kl=null,Md=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YO&&e.locale!=="ko"?null:e.data;default:return null}}var e7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!e7[t.type]:e==="textarea"}function e4(t,e,n,r){kO(r),e=ux(e,"onChange"),0<e.length&&(n=new XN("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Im=null,np=null;function t7(t){d4(t,0)}function T0(t){var e=Fd(t);if(NO(e))return t}function n7(t,e){if(t==="change")return e}var t4=!1;if(Ro){var bb;if(Ro){var _b="oninput"in document;if(!_b){var vC=document.createElement("div");vC.setAttribute("oninput","return;"),_b=typeof vC.oninput=="function"}bb=_b}else bb=!1;t4=bb&&(!document.documentMode||9<document.documentMode)}function yC(){Im&&(Im.detachEvent("onpropertychange",n4),np=Im=null)}function n4(t){if(t.propertyName==="value"&&T0(np)){var e=[];e4(e,np,t,GN(t)),MO(t7,e)}}function r7(t,e,n){t==="focusin"?(yC(),Im=e,np=n,Im.attachEvent("onpropertychange",n4)):t==="focusout"&&yC()}function s7(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return T0(np)}function i7(t,e){if(t==="click")return T0(e)}function a7(t,e){if(t==="input"||t==="change")return T0(e)}function o7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ra=typeof Object.is=="function"?Object.is:o7;function rp(t,e){if(ra(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!B_.call(e,s)||!ra(t[s],e[s]))return!1}return!0}function xC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wC(t,e){var n=xC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xC(n)}}function r4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function s4(){for(var t=window,e=rx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rx(t.document)}return e}function nS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function l7(t){var e=s4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&r4(n.ownerDocument.documentElement,n)){if(r!==null&&nS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=wC(n,a);var o=wC(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var c7=Ro&&"documentMode"in document&&11>=document.documentMode,Dd=null,l1=null,Am=null,c1=!1;function bC(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;c1||Dd==null||Dd!==rx(r)||(r=Dd,"selectionStart"in r&&nS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Am&&rp(Am,r)||(Am=r,r=ux(l1,"onSelect"),0<r.length&&(e=new XN("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Dd)))}function Uv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ld={animationend:Uv("Animation","AnimationEnd"),animationiteration:Uv("Animation","AnimationIteration"),animationstart:Uv("Animation","AnimationStart"),transitionend:Uv("Transition","TransitionEnd")},jb={},i4={};Ro&&(i4=document.createElement("div").style,"AnimationEvent"in window||(delete Ld.animationend.animation,delete Ld.animationiteration.animation,delete Ld.animationstart.animation),"TransitionEvent"in window||delete Ld.transitionend.transition);function R0(t){if(jb[t])return jb[t];if(!Ld[t])return t;var e=Ld[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in i4)return jb[t]=e[n];return t}var a4=R0("animationend"),o4=R0("animationiteration"),l4=R0("animationstart"),c4=R0("transitionend"),u4=new Map,_C="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fc(t,e){u4.set(t,e),Ou(e,[t])}for(var Nb=0;Nb<_C.length;Nb++){var Sb=_C[Nb],u7=Sb.toLowerCase(),d7=Sb[0].toUpperCase()+Sb.slice(1);fc(u7,"on"+d7)}fc(a4,"onAnimationEnd");fc(o4,"onAnimationIteration");fc(l4,"onAnimationStart");fc("dblclick","onDoubleClick");fc("focusin","onFocus");fc("focusout","onBlur");fc(c4,"onTransitionEnd");uh("onMouseEnter",["mouseout","mouseover"]);uh("onMouseLeave",["mouseout","mouseover"]);uh("onPointerEnter",["pointerout","pointerover"]);uh("onPointerLeave",["pointerout","pointerover"]);Ou("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ou("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ou("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ou("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ou("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ou("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h7=new Set("cancel close invalid load scroll toggle".split(" ").concat(mm));function jC(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uU(r,e,void 0,t),t.currentTarget=null}function d4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;jC(s,l,d),a=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;jC(s,l,d),a=u}}}if(ix)throw t=s1,ix=!1,s1=null,t}function xn(t,e){var n=e[m1];n===void 0&&(n=e[m1]=new Set);var r=t+"__bubble";n.has(r)||(h4(e,t,2,!1),n.add(r))}function Eb(t,e,n){var r=0;e&&(r|=4),h4(n,t,r,e)}var Bv="_reactListening"+Math.random().toString(36).slice(2);function sp(t){if(!t[Bv]){t[Bv]=!0,xO.forEach(function(n){n!=="selectionchange"&&(h7.has(n)||Eb(n,!1,t),Eb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bv]||(e[Bv]=!0,Eb("selectionchange",!1,e))}}function h4(t,e,n,r){switch(ZO(e)){case 1:var s=EU;break;case 4:s=PU;break;default:s=YN}n=s.bind(null,e,n,t),s=void 0,!r1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Pb(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=qc(l),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}l=l.parentNode}}r=r.return}MO(function(){var d=a,h=GN(n),m=[];e:{var p=u4.get(t);if(p!==void 0){var y=XN,j=t;switch(t){case"keypress":if(Py(n)===0)break e;case"keydown":case"keyup":y=UU;break;case"focusin":j="focus",y=wb;break;case"focusout":j="blur",y=wb;break;case"beforeblur":case"afterblur":y=wb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=dC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=RU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=HU;break;case a4:case o4:case l4:y=AU;break;case c4:y=GU;break;case"scroll":y=CU;break;case"wheel":y=ZU;break;case"copy":case"cut":case"paste":y=MU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=fC}var _=(e&4)!==0,N=!_&&t==="scroll",b=_?p!==null?p+"Capture":null:p;_=[];for(var x=d,S;x!==null;){S=x;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,b!==null&&(C=Jm(x,b),C!=null&&_.push(ip(x,C,S)))),N)break;x=x.return}0<_.length&&(p=new y(p,j,null,n,h),m.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==t1&&(j=n.relatedTarget||n.fromElement)&&(qc(j)||j[ko]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(j=n.relatedTarget||n.toElement,y=d,j=j?qc(j):null,j!==null&&(N=Mu(j),j!==N||j.tag!==5&&j.tag!==6)&&(j=null)):(y=null,j=d),y!==j)){if(_=dC,C="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(_=fC,C="onPointerLeave",b="onPointerEnter",x="pointer"),N=y==null?p:Fd(y),S=j==null?p:Fd(j),p=new _(C,x+"leave",y,n,h),p.target=N,p.relatedTarget=S,C=null,qc(h)===d&&(_=new _(b,x+"enter",j,n,h),_.target=S,_.relatedTarget=N,C=_),N=C,y&&j)t:{for(_=y,b=j,x=0,S=_;S;S=gd(S))x++;for(S=0,C=b;C;C=gd(C))S++;for(;0<x-S;)_=gd(_),x--;for(;0<S-x;)b=gd(b),S--;for(;x--;){if(_===b||b!==null&&_===b.alternate)break t;_=gd(_),b=gd(b)}_=null}else _=null;y!==null&&NC(m,p,y,_,!1),j!==null&&N!==null&&NC(m,N,j,_,!0)}}e:{if(p=d?Fd(d):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var R=n7;else if(gC(p))if(t4)R=a7;else{R=s7;var z=r7}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=i7);if(R&&(R=R(t,d))){e4(m,R,n,h);break e}z&&z(t,p,d),t==="focusout"&&(z=p._wrapperState)&&z.controlled&&p.type==="number"&&Q_(p,"number",p.value)}switch(z=d?Fd(d):window,t){case"focusin":(gC(z)||z.contentEditable==="true")&&(Dd=z,l1=d,Am=null);break;case"focusout":Am=l1=Dd=null;break;case"mousedown":c1=!0;break;case"contextmenu":case"mouseup":case"dragend":c1=!1,bC(m,n,h);break;case"selectionchange":if(c7)break;case"keydown":case"keyup":bC(m,n,h)}var k;if(tS)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Md?JO(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(YO&&n.locale!=="ko"&&(Md||I!=="onCompositionStart"?I==="onCompositionEnd"&&Md&&(k=QO()):(kl=h,JN="value"in kl?kl.value:kl.textContent,Md=!0)),z=ux(d,I),0<z.length&&(I=new hC(I,t,null,n,h),m.push({event:I,listeners:z}),k?I.data=k:(k=XO(n),k!==null&&(I.data=k)))),(k=YU?JU(t,n):XU(t,n))&&(d=ux(d,"onBeforeInput"),0<d.length&&(h=new hC("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=k))}d4(m,e)})}function ip(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ux(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Jm(t,n),a!=null&&r.unshift(ip(t,a,s)),a=Jm(t,e),a!=null&&r.push(ip(t,a,s))),t=t.return}return r}function gd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function NC(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Jm(n,a),u!=null&&o.unshift(ip(n,u,l))):s||(u=Jm(n,a),u!=null&&o.push(ip(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var f7=/\r\n?/g,m7=/\u0000|\uFFFD/g;function SC(t){return(typeof t=="string"?t:""+t).replace(f7,`
`).replace(m7,"")}function Wv(t,e,n){if(e=SC(e),SC(t)!==e&&n)throw Error(Ae(425))}function dx(){}var u1=null,d1=null;function h1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var f1=typeof setTimeout=="function"?setTimeout:void 0,p7=typeof clearTimeout=="function"?clearTimeout:void 0,EC=typeof Promise=="function"?Promise:void 0,g7=typeof queueMicrotask=="function"?queueMicrotask:typeof EC<"u"?function(t){return EC.resolve(null).then(t).catch(v7)}:f1;function v7(t){setTimeout(function(){throw t})}function Cb(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),tp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);tp(e)}function Vl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function PC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zh=Math.random().toString(36).slice(2),Sa="__reactFiber$"+Zh,ap="__reactProps$"+Zh,ko="__reactContainer$"+Zh,m1="__reactEvents$"+Zh,y7="__reactListeners$"+Zh,x7="__reactHandles$"+Zh;function qc(t){var e=t[Sa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ko]||n[Sa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=PC(t);t!==null;){if(n=t[Sa])return n;t=PC(t)}return e}t=n,n=t.parentNode}return null}function bg(t){return t=t[Sa]||t[ko],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function k0(t){return t[ap]||null}var p1=[],$d=-1;function mc(t){return{current:t}}function _n(t){0>$d||(t.current=p1[$d],p1[$d]=null,$d--)}function mn(t,e){$d++,p1[$d]=t.current,t.current=e}var Xl={},ns=mc(Xl),ks=mc(!1),hu=Xl;function dh(t,e){var n=t.type.contextTypes;if(!n)return Xl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Is(t){return t=t.childContextTypes,t!=null}function hx(){_n(ks),_n(ns)}function CC(t,e,n){if(ns.current!==Xl)throw Error(Ae(168));mn(ns,e),mn(ks,n)}function f4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ae(108,rU(t)||"Unknown",s));return Dn({},n,r)}function fx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xl,hu=ns.current,mn(ns,t),mn(ks,ks.current),!0}function TC(t,e,n){var r=t.stateNode;if(!r)throw Error(Ae(169));n?(t=f4(t,e,hu),r.__reactInternalMemoizedMergedChildContext=t,_n(ks),_n(ns),mn(ns,t)):_n(ks),mn(ks,n)}var wo=null,I0=!1,Tb=!1;function m4(t){wo===null?wo=[t]:wo.push(t)}function w7(t){I0=!0,m4(t)}function pc(){if(!Tb&&wo!==null){Tb=!0;var t=0,e=en;try{var n=wo;for(en=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wo=null,I0=!1}catch(s){throw wo!==null&&(wo=wo.slice(t+1)),$O(KN,pc),s}finally{en=e,Tb=!1}}return null}var Vd=[],zd=0,mx=null,px=0,gi=[],vi=0,fu=null,_o=1,jo="";function $c(t,e){Vd[zd++]=px,Vd[zd++]=mx,mx=t,px=e}function p4(t,e,n){gi[vi++]=_o,gi[vi++]=jo,gi[vi++]=fu,fu=t;var r=_o;t=jo;var s=32-Qi(r)-1;r&=~(1<<s),n+=1;var a=32-Qi(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,_o=1<<32-Qi(e)+s|n<<s|r,jo=a+t}else _o=1<<a|n<<s|r,jo=t}function rS(t){t.return!==null&&($c(t,1),p4(t,1,0))}function sS(t){for(;t===mx;)mx=Vd[--zd],Vd[zd]=null,px=Vd[--zd],Vd[zd]=null;for(;t===fu;)fu=gi[--vi],gi[vi]=null,jo=gi[--vi],gi[vi]=null,_o=gi[--vi],gi[vi]=null}var Ks=null,Hs=null,Pn=!1,qi=null;function g4(t,e){var n=xi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function RC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ks=t,Hs=Vl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ks=t,Hs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fu!==null?{id:_o,overflow:jo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ks=t,Hs=null,!0):!1;default:return!1}}function g1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function v1(t){if(Pn){var e=Hs;if(e){var n=e;if(!RC(t,e)){if(g1(t))throw Error(Ae(418));e=Vl(n.nextSibling);var r=Ks;e&&RC(t,e)?g4(r,n):(t.flags=t.flags&-4097|2,Pn=!1,Ks=t)}}else{if(g1(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,Pn=!1,Ks=t}}}function kC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ks=t}function Hv(t){if(t!==Ks)return!1;if(!Pn)return kC(t),Pn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!h1(t.type,t.memoizedProps)),e&&(e=Hs)){if(g1(t))throw v4(),Error(Ae(418));for(;e;)g4(t,e),e=Vl(e.nextSibling)}if(kC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Hs=Vl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Hs=null}}else Hs=Ks?Vl(t.stateNode.nextSibling):null;return!0}function v4(){for(var t=Hs;t;)t=Vl(t.nextSibling)}function hh(){Hs=Ks=null,Pn=!1}function iS(t){qi===null?qi=[t]:qi.push(t)}var b7=Ko.ReactCurrentBatchConfig;function Zf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var r=n.stateNode}if(!r)throw Error(Ae(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,t))}return t}function qv(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function IC(t){var e=t._init;return e(t._payload)}function y4(t){function e(b,x){if(t){var S=b.deletions;S===null?(b.deletions=[x],b.flags|=16):S.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function s(b,x){return b=Wl(b,x),b.index=0,b.sibling=null,b}function a(b,x,S){return b.index=S,t?(S=b.alternate,S!==null?(S=S.index,S<x?(b.flags|=2,x):S):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,S,C){return x===null||x.tag!==6?(x=Db(S,b.mode,C),x.return=b,x):(x=s(x,S),x.return=b,x)}function u(b,x,S,C){var R=S.type;return R===Od?h(b,x,S.props.children,C,S.key):x!==null&&(x.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===yl&&IC(R)===x.type)?(C=s(x,S.props),C.ref=Zf(b,x,S),C.return=b,C):(C=Oy(S.type,S.key,S.props,null,b.mode,C),C.ref=Zf(b,x,S),C.return=b,C)}function d(b,x,S,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Lb(S,b.mode,C),x.return=b,x):(x=s(x,S.children||[]),x.return=b,x)}function h(b,x,S,C,R){return x===null||x.tag!==7?(x=nu(S,b.mode,C,R),x.return=b,x):(x=s(x,S),x.return=b,x)}function m(b,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Db(""+x,b.mode,S),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Mv:return S=Oy(x.type,x.key,x.props,null,b.mode,S),S.ref=Zf(b,null,x),S.return=b,S;case Ad:return x=Lb(x,b.mode,S),x.return=b,x;case yl:var C=x._init;return m(b,C(x._payload),S)}if(hm(x)||Wf(x))return x=nu(x,b.mode,S,null),x.return=b,x;qv(b,x)}return null}function p(b,x,S,C){var R=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:l(b,x,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Mv:return S.key===R?u(b,x,S,C):null;case Ad:return S.key===R?d(b,x,S,C):null;case yl:return R=S._init,p(b,x,R(S._payload),C)}if(hm(S)||Wf(S))return R!==null?null:h(b,x,S,C,null);qv(b,S)}return null}function y(b,x,S,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(S)||null,l(x,b,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Mv:return b=b.get(C.key===null?S:C.key)||null,u(x,b,C,R);case Ad:return b=b.get(C.key===null?S:C.key)||null,d(x,b,C,R);case yl:var z=C._init;return y(b,x,S,z(C._payload),R)}if(hm(C)||Wf(C))return b=b.get(S)||null,h(x,b,C,R,null);qv(x,C)}return null}function j(b,x,S,C){for(var R=null,z=null,k=x,I=x=0,V=null;k!==null&&I<S.length;I++){k.index>I?(V=k,k=null):V=k.sibling;var T=p(b,k,S[I],C);if(T===null){k===null&&(k=V);break}t&&k&&T.alternate===null&&e(b,k),x=a(T,x,I),z===null?R=T:z.sibling=T,z=T,k=V}if(I===S.length)return n(b,k),Pn&&$c(b,I),R;if(k===null){for(;I<S.length;I++)k=m(b,S[I],C),k!==null&&(x=a(k,x,I),z===null?R=k:z.sibling=k,z=k);return Pn&&$c(b,I),R}for(k=r(b,k);I<S.length;I++)V=y(k,b,I,S[I],C),V!==null&&(t&&V.alternate!==null&&k.delete(V.key===null?I:V.key),x=a(V,x,I),z===null?R=V:z.sibling=V,z=V);return t&&k.forEach(function(O){return e(b,O)}),Pn&&$c(b,I),R}function _(b,x,S,C){var R=Wf(S);if(typeof R!="function")throw Error(Ae(150));if(S=R.call(S),S==null)throw Error(Ae(151));for(var z=R=null,k=x,I=x=0,V=null,T=S.next();k!==null&&!T.done;I++,T=S.next()){k.index>I?(V=k,k=null):V=k.sibling;var O=p(b,k,T.value,C);if(O===null){k===null&&(k=V);break}t&&k&&O.alternate===null&&e(b,k),x=a(O,x,I),z===null?R=O:z.sibling=O,z=O,k=V}if(T.done)return n(b,k),Pn&&$c(b,I),R;if(k===null){for(;!T.done;I++,T=S.next())T=m(b,T.value,C),T!==null&&(x=a(T,x,I),z===null?R=T:z.sibling=T,z=T);return Pn&&$c(b,I),R}for(k=r(b,k);!T.done;I++,T=S.next())T=y(k,b,I,T.value,C),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?I:T.key),x=a(T,x,I),z===null?R=T:z.sibling=T,z=T);return t&&k.forEach(function($){return e(b,$)}),Pn&&$c(b,I),R}function N(b,x,S,C){if(typeof S=="object"&&S!==null&&S.type===Od&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Mv:e:{for(var R=S.key,z=x;z!==null;){if(z.key===R){if(R=S.type,R===Od){if(z.tag===7){n(b,z.sibling),x=s(z,S.props.children),x.return=b,b=x;break e}}else if(z.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===yl&&IC(R)===z.type){n(b,z.sibling),x=s(z,S.props),x.ref=Zf(b,z,S),x.return=b,b=x;break e}n(b,z);break}else e(b,z);z=z.sibling}S.type===Od?(x=nu(S.props.children,b.mode,C,S.key),x.return=b,b=x):(C=Oy(S.type,S.key,S.props,null,b.mode,C),C.ref=Zf(b,x,S),C.return=b,b=C)}return o(b);case Ad:e:{for(z=S.key;x!==null;){if(x.key===z)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(b,x.sibling),x=s(x,S.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=Lb(S,b.mode,C),x.return=b,b=x}return o(b);case yl:return z=S._init,N(b,x,z(S._payload),C)}if(hm(S))return j(b,x,S,C);if(Wf(S))return _(b,x,S,C);qv(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(b,x.sibling),x=s(x,S),x.return=b,b=x):(n(b,x),x=Db(S,b.mode,C),x.return=b,b=x),o(b)):n(b,x)}return N}var fh=y4(!0),x4=y4(!1),gx=mc(null),vx=null,Ud=null,aS=null;function oS(){aS=Ud=vx=null}function lS(t){var e=gx.current;_n(gx),t._currentValue=e}function y1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jd(t,e){vx=t,aS=Ud=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ps=!0),t.firstContext=null)}function Pi(t){var e=t._currentValue;if(aS!==t)if(t={context:t,memoizedValue:e,next:null},Ud===null){if(vx===null)throw Error(Ae(308));Ud=t,vx.dependencies={lanes:0,firstContext:t}}else Ud=Ud.next=t;return e}var Gc=null;function cS(t){Gc===null?Gc=[t]:Gc.push(t)}function w4(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,cS(e)):(n.next=s.next,s.next=n),e.interleaved=n,Io(t,r)}function Io(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xl=!1;function uS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Po(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Vt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Io(t,n)}return s=r.interleaved,s===null?(e.next=e,cS(r)):(e.next=s.next,s.next=e),r.interleaved=e,Io(t,n)}function Cy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ZN(t,n)}}function AC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yx(t,e,n,r){var s=t.updateQueue;xl=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(a!==null){var m=s.baseState;o=0,h=d=u=null,l=a;do{var p=l.lane,y=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=t,_=l;switch(p=e,y=n,_.tag){case 1:if(j=_.payload,typeof j=="function"){m=j.call(y,m,p);break e}m=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=_.payload,p=typeof j=="function"?j.call(y,m,p):j,p==null)break e;m=Dn({},m,p);break e;case 2:xl=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else y={eventTime:y,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,u=m):h=h.next=y,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);pu|=o,t.lanes=o,t.memoizedState=m}}function OC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ae(191,s));s.call(r)}}}var _g={},Ma=mc(_g),op=mc(_g),lp=mc(_g);function Kc(t){if(t===_g)throw Error(Ae(174));return t}function dS(t,e){switch(mn(lp,e),mn(op,t),mn(Ma,_g),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:J_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=J_(e,t)}_n(Ma),mn(Ma,e)}function mh(){_n(Ma),_n(op),_n(lp)}function _4(t){Kc(lp.current);var e=Kc(Ma.current),n=J_(e,t.type);e!==n&&(mn(op,t),mn(Ma,n))}function hS(t){op.current===t&&(_n(Ma),_n(op))}var On=mc(0);function xx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rb=[];function fS(){for(var t=0;t<Rb.length;t++)Rb[t]._workInProgressVersionPrimary=null;Rb.length=0}var Ty=Ko.ReactCurrentDispatcher,kb=Ko.ReactCurrentBatchConfig,mu=0,Mn=null,mr=null,Nr=null,wx=!1,Om=!1,cp=0,_7=0;function Br(){throw Error(Ae(321))}function mS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ra(t[n],e[n]))return!1;return!0}function pS(t,e,n,r,s,a){if(mu=a,Mn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ty.current=t===null||t.memoizedState===null?E7:P7,t=n(r,s),Om){a=0;do{if(Om=!1,cp=0,25<=a)throw Error(Ae(301));a+=1,Nr=mr=null,e.updateQueue=null,Ty.current=C7,t=n(r,s)}while(Om)}if(Ty.current=bx,e=mr!==null&&mr.next!==null,mu=0,Nr=mr=Mn=null,wx=!1,e)throw Error(Ae(300));return t}function gS(){var t=cp!==0;return cp=0,t}function ba(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nr===null?Mn.memoizedState=Nr=t:Nr=Nr.next=t,Nr}function Ci(){if(mr===null){var t=Mn.alternate;t=t!==null?t.memoizedState:null}else t=mr.next;var e=Nr===null?Mn.memoizedState:Nr.next;if(e!==null)Nr=e,mr=t;else{if(t===null)throw Error(Ae(310));mr=t,t={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},Nr===null?Mn.memoizedState=Nr=t:Nr=Nr.next=t}return Nr}function up(t,e){return typeof e=="function"?e(t):e}function Ib(t){var e=Ci(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=mr,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,u=null,d=a;do{var h=d.lane;if((mu&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Mn.lanes|=h,pu|=h}d=d.next}while(d!==null&&d!==a);u===null?o=r:u.next=l,ra(r,e.memoizedState)||(Ps=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Mn.lanes|=a,pu|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ab(t){var e=Ci(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);ra(a,e.memoizedState)||(Ps=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function j4(){}function N4(t,e){var n=Mn,r=Ci(),s=e(),a=!ra(r.memoizedState,s);if(a&&(r.memoizedState=s,Ps=!0),r=r.queue,vS(P4.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Nr!==null&&Nr.memoizedState.tag&1){if(n.flags|=2048,dp(9,E4.bind(null,n,r,s,e),void 0,null),Pr===null)throw Error(Ae(349));mu&30||S4(n,e,s)}return s}function S4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function E4(t,e,n,r){e.value=n,e.getSnapshot=r,C4(e)&&T4(t)}function P4(t,e,n){return n(function(){C4(e)&&T4(t)})}function C4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ra(t,n)}catch{return!0}}function T4(t){var e=Io(t,1);e!==null&&Yi(e,t,1,-1)}function MC(t){var e=ba();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:up,lastRenderedState:t},e.queue=t,t=t.dispatch=S7.bind(null,Mn,t),[e.memoizedState,t]}function dp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function R4(){return Ci().memoizedState}function Ry(t,e,n,r){var s=ba();Mn.flags|=t,s.memoizedState=dp(1|e,n,void 0,r===void 0?null:r)}function A0(t,e,n,r){var s=Ci();r=r===void 0?null:r;var a=void 0;if(mr!==null){var o=mr.memoizedState;if(a=o.destroy,r!==null&&mS(r,o.deps)){s.memoizedState=dp(e,n,a,r);return}}Mn.flags|=t,s.memoizedState=dp(1|e,n,a,r)}function DC(t,e){return Ry(8390656,8,t,e)}function vS(t,e){return A0(2048,8,t,e)}function k4(t,e){return A0(4,2,t,e)}function I4(t,e){return A0(4,4,t,e)}function A4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function O4(t,e,n){return n=n!=null?n.concat([t]):null,A0(4,4,A4.bind(null,e,t),n)}function yS(){}function M4(t,e){var n=Ci();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function D4(t,e){var n=Ci();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function L4(t,e,n){return mu&21?(ra(n,e)||(n=UO(),Mn.lanes|=n,pu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ps=!0),t.memoizedState=n)}function j7(t,e){var n=en;en=n!==0&&4>n?n:4,t(!0);var r=kb.transition;kb.transition={};try{t(!1),e()}finally{en=n,kb.transition=r}}function F4(){return Ci().memoizedState}function N7(t,e,n){var r=Bl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$4(t))V4(e,n);else if(n=w4(t,e,n,r),n!==null){var s=ms();Yi(n,t,r,s),z4(n,e,r)}}function S7(t,e,n){var r=Bl(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($4(t))V4(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,ra(l,o)){var u=e.interleaved;u===null?(s.next=s,cS(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=w4(t,e,s,r),n!==null&&(s=ms(),Yi(n,t,r,s),z4(n,e,r))}}function $4(t){var e=t.alternate;return t===Mn||e!==null&&e===Mn}function V4(t,e){Om=wx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function z4(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ZN(t,n)}}var bx={readContext:Pi,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useInsertionEffect:Br,useLayoutEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useMutableSource:Br,useSyncExternalStore:Br,useId:Br,unstable_isNewReconciler:!1},E7={readContext:Pi,useCallback:function(t,e){return ba().memoizedState=[t,e===void 0?null:e],t},useContext:Pi,useEffect:DC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ry(4194308,4,A4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ry(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ry(4,2,t,e)},useMemo:function(t,e){var n=ba();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ba();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=N7.bind(null,Mn,t),[r.memoizedState,t]},useRef:function(t){var e=ba();return t={current:t},e.memoizedState=t},useState:MC,useDebugValue:yS,useDeferredValue:function(t){return ba().memoizedState=t},useTransition:function(){var t=MC(!1),e=t[0];return t=j7.bind(null,t[1]),ba().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Mn,s=ba();if(Pn){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=e(),Pr===null)throw Error(Ae(349));mu&30||S4(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,DC(P4.bind(null,r,a,t),[t]),r.flags|=2048,dp(9,E4.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=ba(),e=Pr.identifierPrefix;if(Pn){var n=jo,r=_o;n=(r&~(1<<32-Qi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=cp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_7++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},P7={readContext:Pi,useCallback:M4,useContext:Pi,useEffect:vS,useImperativeHandle:O4,useInsertionEffect:k4,useLayoutEffect:I4,useMemo:D4,useReducer:Ib,useRef:R4,useState:function(){return Ib(up)},useDebugValue:yS,useDeferredValue:function(t){var e=Ci();return L4(e,mr.memoizedState,t)},useTransition:function(){var t=Ib(up)[0],e=Ci().memoizedState;return[t,e]},useMutableSource:j4,useSyncExternalStore:N4,useId:F4,unstable_isNewReconciler:!1},C7={readContext:Pi,useCallback:M4,useContext:Pi,useEffect:vS,useImperativeHandle:O4,useInsertionEffect:k4,useLayoutEffect:I4,useMemo:D4,useReducer:Ab,useRef:R4,useState:function(){return Ab(up)},useDebugValue:yS,useDeferredValue:function(t){var e=Ci();return mr===null?e.memoizedState=t:L4(e,mr.memoizedState,t)},useTransition:function(){var t=Ab(up)[0],e=Ci().memoizedState;return[t,e]},useMutableSource:j4,useSyncExternalStore:N4,useId:F4,unstable_isNewReconciler:!1};function Bi(t,e){if(t&&t.defaultProps){e=Dn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function x1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Dn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var O0={isMounted:function(t){return(t=t._reactInternals)?Mu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ms(),s=Bl(t),a=Po(r,s);a.payload=e,n!=null&&(a.callback=n),e=zl(t,a,s),e!==null&&(Yi(e,t,s,r),Cy(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ms(),s=Bl(t),a=Po(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=zl(t,a,s),e!==null&&(Yi(e,t,s,r),Cy(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ms(),r=Bl(t),s=Po(n,r);s.tag=2,e!=null&&(s.callback=e),e=zl(t,s,r),e!==null&&(Yi(e,t,r,n),Cy(e,t,r))}};function LC(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!rp(n,r)||!rp(s,a):!0}function U4(t,e,n){var r=!1,s=Xl,a=e.contextType;return typeof a=="object"&&a!==null?a=Pi(a):(s=Is(e)?hu:ns.current,r=e.contextTypes,a=(r=r!=null)?dh(t,s):Xl),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=O0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function FC(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&O0.enqueueReplaceState(e,e.state,null)}function w1(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},uS(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Pi(a):(a=Is(e)?hu:ns.current,s.context=dh(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(x1(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&O0.enqueueReplaceState(s,s.state,null),yx(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ph(t,e){try{var n="",r=e;do n+=nU(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Ob(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function b1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var T7=typeof WeakMap=="function"?WeakMap:Map;function B4(t,e,n){n=Po(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jx||(jx=!0,k1=r),b1(t,e)},n}function W4(t,e,n){n=Po(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){b1(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){b1(t,e),typeof r!="function"&&(Ul===null?Ul=new Set([this]):Ul.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $C(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new T7;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=B7.bind(null,t,e,n),e.then(t,t))}function VC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zC(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Po(-1,1),e.tag=2,zl(n,e,1))),n.lanes|=1),t)}var R7=Ko.ReactCurrentOwner,Ps=!1;function us(t,e,n,r){e.child=t===null?x4(e,null,n,r):fh(e,t.child,n,r)}function UC(t,e,n,r,s){n=n.render;var a=e.ref;return Jd(e,s),r=pS(t,e,n,r,a,s),n=gS(),t!==null&&!Ps?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ao(t,e,s)):(Pn&&n&&rS(e),e.flags|=1,us(t,e,r,s),e.child)}function BC(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!ES(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,H4(t,e,a,r,s)):(t=Oy(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:rp,n(o,r)&&t.ref===e.ref)return Ao(t,e,s)}return e.flags|=1,t=Wl(a,r),t.ref=e.ref,t.return=e,e.child=t}function H4(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(rp(a,r)&&t.ref===e.ref)if(Ps=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(Ps=!0);else return e.lanes=t.lanes,Ao(t,e,s)}return _1(t,e,n,r,s)}function q4(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mn(Wd,Bs),Bs|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mn(Wd,Bs),Bs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,mn(Wd,Bs),Bs|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,mn(Wd,Bs),Bs|=r;return us(t,e,s,n),e.child}function G4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _1(t,e,n,r,s){var a=Is(n)?hu:ns.current;return a=dh(e,a),Jd(e,s),n=pS(t,e,n,r,a,s),r=gS(),t!==null&&!Ps?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ao(t,e,s)):(Pn&&r&&rS(e),e.flags|=1,us(t,e,n,s),e.child)}function WC(t,e,n,r,s){if(Is(n)){var a=!0;fx(e)}else a=!1;if(Jd(e,s),e.stateNode===null)ky(t,e),U4(e,n,r),w1(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Pi(d):(d=Is(n)?hu:ns.current,d=dh(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&FC(e,o,r,d),xl=!1;var p=e.memoizedState;o.state=p,yx(e,r,o,s),u=e.memoizedState,l!==r||p!==u||ks.current||xl?(typeof h=="function"&&(x1(e,n,h,r),u=e.memoizedState),(l=xl||LC(e,n,l,r,p,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,b4(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Bi(e.type,l),o.props=d,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Pi(u):(u=Is(n)?hu:ns.current,u=dh(e,u));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==u)&&FC(e,o,r,u),xl=!1,p=e.memoizedState,o.state=p,yx(e,r,o,s);var j=e.memoizedState;l!==m||p!==j||ks.current||xl?(typeof y=="function"&&(x1(e,n,y,r),j=e.memoizedState),(d=xl||LC(e,n,d,r,p,j,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,j,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,j,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=j),o.props=r,o.state=j,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return j1(t,e,n,r,a,s)}function j1(t,e,n,r,s,a){G4(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&TC(e,n,!1),Ao(t,e,a);r=e.stateNode,R7.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=fh(e,t.child,null,a),e.child=fh(e,null,l,a)):us(t,e,l,a),e.memoizedState=r.state,s&&TC(e,n,!0),e.child}function K4(t){var e=t.stateNode;e.pendingContext?CC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&CC(t,e.context,!1),dS(t,e.containerInfo)}function HC(t,e,n,r,s){return hh(),iS(s),e.flags|=256,us(t,e,n,r),e.child}var N1={dehydrated:null,treeContext:null,retryLane:0};function S1(t){return{baseLanes:t,cachePool:null,transitions:null}}function Z4(t,e,n){var r=e.pendingProps,s=On.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),mn(On,s&1),t===null)return v1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=L0(o,r,0,null),t=nu(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=S1(n),e.memoizedState=N1,t):xS(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return k7(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Wl(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Wl(l,a):(a=nu(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?S1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=N1,r}return a=t.child,t=a.sibling,r=Wl(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function xS(t,e){return e=L0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gv(t,e,n,r){return r!==null&&iS(r),fh(e,t.child,null,n),t=xS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function k7(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Ob(Error(Ae(422))),Gv(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=L0({mode:"visible",children:r.children},s,0,null),a=nu(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&fh(e,t.child,null,o),e.child.memoizedState=S1(o),e.memoizedState=N1,a);if(!(e.mode&1))return Gv(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(Ae(419)),r=Ob(a,r,void 0),Gv(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ps||l){if(r=Pr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Io(t,s),Yi(r,t,s,-1))}return SS(),r=Ob(Error(Ae(421))),Gv(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=W7.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Hs=Vl(s.nextSibling),Ks=e,Pn=!0,qi=null,t!==null&&(gi[vi++]=_o,gi[vi++]=jo,gi[vi++]=fu,_o=t.id,jo=t.overflow,fu=e),e=xS(e,r.children),e.flags|=4096,e)}function qC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),y1(t.return,e,n)}function Mb(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Q4(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(us(t,e,r.children,n),r=On.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qC(t,n,e);else if(t.tag===19)qC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(mn(On,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&xx(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Mb(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&xx(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Mb(e,!0,n,null,a);break;case"together":Mb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ky(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ao(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,n=Wl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function I7(t,e,n){switch(e.tag){case 3:K4(e),hh();break;case 5:_4(e);break;case 1:Is(e.type)&&fx(e);break;case 4:dS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;mn(gx,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(mn(On,On.current&1),e.flags|=128,null):n&e.child.childLanes?Z4(t,e,n):(mn(On,On.current&1),t=Ao(t,e,n),t!==null?t.sibling:null);mn(On,On.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Q4(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),mn(On,On.current),r)break;return null;case 22:case 23:return e.lanes=0,q4(t,e,n)}return Ao(t,e,n)}var Y4,E1,J4,X4;Y4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};E1=function(){};J4=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Kc(Ma.current);var a=null;switch(n){case"input":s=K_(t,s),r=K_(t,r),a=[];break;case"select":s=Dn({},s,{value:void 0}),r=Dn({},r,{value:void 0}),a=[];break;case"textarea":s=Y_(t,s),r=Y_(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dx)}X_(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Qm.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Qm.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&xn("scroll",t),a||l===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};X4=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qf(t,e){if(!Pn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function A7(t,e,n){var r=e.pendingProps;switch(sS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wr(e),null;case 1:return Is(e.type)&&hx(),Wr(e),null;case 3:return r=e.stateNode,mh(),_n(ks),_n(ns),fS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qi!==null&&(O1(qi),qi=null))),E1(t,e),Wr(e),null;case 5:hS(e);var s=Kc(lp.current);if(n=e.type,t!==null&&e.stateNode!=null)J4(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return Wr(e),null}if(t=Kc(Ma.current),Hv(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Sa]=e,r[ap]=a,t=(e.mode&1)!==0,n){case"dialog":xn("cancel",r),xn("close",r);break;case"iframe":case"object":case"embed":xn("load",r);break;case"video":case"audio":for(s=0;s<mm.length;s++)xn(mm[s],r);break;case"source":xn("error",r);break;case"img":case"image":case"link":xn("error",r),xn("load",r);break;case"details":xn("toggle",r);break;case"input":tC(r,a),xn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},xn("invalid",r);break;case"textarea":rC(r,a),xn("invalid",r)}X_(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Wv(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Wv(r.textContent,l,t),s=["children",""+l]):Qm.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&xn("scroll",r)}switch(n){case"input":Dv(r),nC(r,a,!0);break;case"textarea":Dv(r),sC(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=dx)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sa]=e,t[ap]=r,Y4(t,e,!1,!1),e.stateNode=t;e:{switch(o=e1(n,r),n){case"dialog":xn("cancel",t),xn("close",t),s=r;break;case"iframe":case"object":case"embed":xn("load",t),s=r;break;case"video":case"audio":for(s=0;s<mm.length;s++)xn(mm[s],t);s=r;break;case"source":xn("error",t),s=r;break;case"img":case"image":case"link":xn("error",t),xn("load",t),s=r;break;case"details":xn("toggle",t),s=r;break;case"input":tC(t,r),s=K_(t,r),xn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Dn({},r,{value:void 0}),xn("invalid",t);break;case"textarea":rC(t,r),s=Y_(t,r),xn("invalid",t);break;default:s=r}X_(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?RO(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&CO(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ym(t,u):typeof u=="number"&&Ym(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Qm.hasOwnProperty(a)?u!=null&&a==="onScroll"&&xn("scroll",t):u!=null&&BN(t,a,u,o))}switch(n){case"input":Dv(t),nC(t,r,!1);break;case"textarea":Dv(t),sC(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Jl(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Kd(t,!!r.multiple,a,!1):r.defaultValue!=null&&Kd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=dx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wr(e),null;case 6:if(t&&e.stateNode!=null)X4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(n=Kc(lp.current),Kc(Ma.current),Hv(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sa]=e,(a=r.nodeValue!==n)&&(t=Ks,t!==null))switch(t.tag){case 3:Wv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wv(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sa]=e,e.stateNode=r}return Wr(e),null;case 13:if(_n(On),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pn&&Hs!==null&&e.mode&1&&!(e.flags&128))v4(),hh(),e.flags|=98560,a=!1;else if(a=Hv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Ae(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ae(317));a[Sa]=e}else hh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wr(e),a=!1}else qi!==null&&(O1(qi),qi=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||On.current&1?pr===0&&(pr=3):SS())),e.updateQueue!==null&&(e.flags|=4),Wr(e),null);case 4:return mh(),E1(t,e),t===null&&sp(e.stateNode.containerInfo),Wr(e),null;case 10:return lS(e.type._context),Wr(e),null;case 17:return Is(e.type)&&hx(),Wr(e),null;case 19:if(_n(On),a=e.memoizedState,a===null)return Wr(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Qf(a,!1);else{if(pr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xx(t),o!==null){for(e.flags|=128,Qf(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mn(On,On.current&1|2),e.child}t=t.sibling}a.tail!==null&&Gn()>gh&&(e.flags|=128,r=!0,Qf(a,!1),e.lanes=4194304)}else{if(!r)if(t=xx(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qf(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Pn)return Wr(e),null}else 2*Gn()-a.renderingStartTime>gh&&n!==1073741824&&(e.flags|=128,r=!0,Qf(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Gn(),e.sibling=null,n=On.current,mn(On,r?n&1|2:n&1),e):(Wr(e),null);case 22:case 23:return NS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bs&1073741824&&(Wr(e),e.subtreeFlags&6&&(e.flags|=8192)):Wr(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function O7(t,e){switch(sS(e),e.tag){case 1:return Is(e.type)&&hx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mh(),_n(ks),_n(ns),fS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hS(e),null;case 13:if(_n(On),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));hh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _n(On),null;case 4:return mh(),null;case 10:return lS(e.type._context),null;case 22:case 23:return NS(),null;case 24:return null;default:return null}}var Kv=!1,Zr=!1,M7=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Bd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vn(t,e,r)}else n.current=null}function P1(t,e,n){try{n()}catch(r){Vn(t,e,r)}}var GC=!1;function D7(t,e){if(u1=lx,t=s4(),nS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==a||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)p=m,m=y;for(;;){if(m===t)break t;if(p===n&&++d===s&&(l=o),p===a&&++h===r&&(u=o),(y=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(d1={focusedElem:t,selectionRange:n},lx=!1,Xe=e;Xe!==null;)if(e=Xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Xe=t;else for(;Xe!==null;){e=Xe;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var _=j.memoizedProps,N=j.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?_:Bi(e.type,_),N);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(C){Vn(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}return j=GC,GC=!1,j}function Mm(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&P1(e,n,a)}s=s.next}while(s!==r)}}function M0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function C1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eM(t){var e=t.alternate;e!==null&&(t.alternate=null,eM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sa],delete e[ap],delete e[m1],delete e[y7],delete e[x7])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tM(t){return t.tag===5||t.tag===3||t.tag===4}function KC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function T1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dx));else if(r!==4&&(t=t.child,t!==null))for(T1(t,e,n),t=t.sibling;t!==null;)T1(t,e,n),t=t.sibling}function R1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(R1(t,e,n),t=t.sibling;t!==null;)R1(t,e,n),t=t.sibling}var Ir=null,Wi=!1;function cl(t,e,n){for(n=n.child;n!==null;)nM(t,e,n),n=n.sibling}function nM(t,e,n){if(Oa&&typeof Oa.onCommitFiberUnmount=="function")try{Oa.onCommitFiberUnmount(P0,n)}catch{}switch(n.tag){case 5:Zr||Bd(n,e);case 6:var r=Ir,s=Wi;Ir=null,cl(t,e,n),Ir=r,Wi=s,Ir!==null&&(Wi?(t=Ir,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ir.removeChild(n.stateNode));break;case 18:Ir!==null&&(Wi?(t=Ir,n=n.stateNode,t.nodeType===8?Cb(t.parentNode,n):t.nodeType===1&&Cb(t,n),tp(t)):Cb(Ir,n.stateNode));break;case 4:r=Ir,s=Wi,Ir=n.stateNode.containerInfo,Wi=!0,cl(t,e,n),Ir=r,Wi=s;break;case 0:case 11:case 14:case 15:if(!Zr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&P1(n,e,o),s=s.next}while(s!==r)}cl(t,e,n);break;case 1:if(!Zr&&(Bd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Vn(n,e,l)}cl(t,e,n);break;case 21:cl(t,e,n);break;case 22:n.mode&1?(Zr=(r=Zr)||n.memoizedState!==null,cl(t,e,n),Zr=r):cl(t,e,n);break;default:cl(t,e,n)}}function ZC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new M7),e.forEach(function(r){var s=H7.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Vi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ir=l.stateNode,Wi=!1;break e;case 3:Ir=l.stateNode.containerInfo,Wi=!0;break e;case 4:Ir=l.stateNode.containerInfo,Wi=!0;break e}l=l.return}if(Ir===null)throw Error(Ae(160));nM(a,o,s),Ir=null,Wi=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Vn(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rM(e,t),e=e.sibling}function rM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vi(e,t),va(t),r&4){try{Mm(3,t,t.return),M0(3,t)}catch(_){Vn(t,t.return,_)}try{Mm(5,t,t.return)}catch(_){Vn(t,t.return,_)}}break;case 1:Vi(e,t),va(t),r&512&&n!==null&&Bd(n,n.return);break;case 5:if(Vi(e,t),va(t),r&512&&n!==null&&Bd(n,n.return),t.flags&32){var s=t.stateNode;try{Ym(s,"")}catch(_){Vn(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&SO(s,a),e1(l,o);var d=e1(l,a);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?RO(s,m):h==="dangerouslySetInnerHTML"?CO(s,m):h==="children"?Ym(s,m):BN(s,h,m,d)}switch(l){case"input":Z_(s,a);break;case"textarea":EO(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?Kd(s,!!a.multiple,y,!1):p!==!!a.multiple&&(a.defaultValue!=null?Kd(s,!!a.multiple,a.defaultValue,!0):Kd(s,!!a.multiple,a.multiple?[]:"",!1))}s[ap]=a}catch(_){Vn(t,t.return,_)}}break;case 6:if(Vi(e,t),va(t),r&4){if(t.stateNode===null)throw Error(Ae(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(_){Vn(t,t.return,_)}}break;case 3:if(Vi(e,t),va(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{tp(e.containerInfo)}catch(_){Vn(t,t.return,_)}break;case 4:Vi(e,t),va(t);break;case 13:Vi(e,t),va(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(_S=Gn())),r&4&&ZC(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Zr=(d=Zr)||h,Vi(e,t),Zr=d):Vi(e,t),va(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(Xe=t,h=t.child;h!==null;){for(m=Xe=h;Xe!==null;){switch(p=Xe,y=p.child,p.tag){case 0:case 11:case 14:case 15:Mm(4,p,p.return);break;case 1:Bd(p,p.return);var j=p.stateNode;if(typeof j.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(_){Vn(r,n,_)}}break;case 5:Bd(p,p.return);break;case 22:if(p.memoizedState!==null){YC(m);continue}}y!==null?(y.return=p,Xe=y):YC(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=TO("display",o))}catch(_){Vn(t,t.return,_)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(_){Vn(t,t.return,_)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Vi(e,t),va(t),r&4&&ZC(t);break;case 21:break;default:Vi(e,t),va(t)}}function va(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tM(n)){var r=n;break e}n=n.return}throw Error(Ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ym(s,""),r.flags&=-33);var a=KC(t);R1(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=KC(t);T1(t,l,o);break;default:throw Error(Ae(161))}}catch(u){Vn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function L7(t,e,n){Xe=t,sM(t)}function sM(t,e,n){for(var r=(t.mode&1)!==0;Xe!==null;){var s=Xe,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Kv;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Zr;l=Kv;var d=Zr;if(Kv=o,(Zr=u)&&!d)for(Xe=s;Xe!==null;)o=Xe,u=o.child,o.tag===22&&o.memoizedState!==null?JC(s):u!==null?(u.return=o,Xe=u):JC(s);for(;a!==null;)Xe=a,sM(a),a=a.sibling;Xe=s,Kv=l,Zr=d}QC(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Xe=a):QC(t)}}function QC(t){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zr||M0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Bi(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&OC(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}OC(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&tp(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}Zr||e.flags&512&&C1(e)}catch(p){Vn(e,e.return,p)}}if(e===t){Xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Xe=n;break}Xe=e.return}}function YC(t){for(;Xe!==null;){var e=Xe;if(e===t){Xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Xe=n;break}Xe=e.return}}function JC(t){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{M0(4,e)}catch(u){Vn(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Vn(e,s,u)}}var a=e.return;try{C1(e)}catch(u){Vn(e,a,u)}break;case 5:var o=e.return;try{C1(e)}catch(u){Vn(e,o,u)}}}catch(u){Vn(e,e.return,u)}if(e===t){Xe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Xe=l;break}Xe=e.return}}var F7=Math.ceil,_x=Ko.ReactCurrentDispatcher,wS=Ko.ReactCurrentOwner,_i=Ko.ReactCurrentBatchConfig,Vt=0,Pr=null,ar=null,Mr=0,Bs=0,Wd=mc(0),pr=0,hp=null,pu=0,D0=0,bS=0,Dm=null,Ss=null,_S=0,gh=1/0,xo=null,jx=!1,k1=null,Ul=null,Zv=!1,Il=null,Nx=0,Lm=0,I1=null,Iy=-1,Ay=0;function ms(){return Vt&6?Gn():Iy!==-1?Iy:Iy=Gn()}function Bl(t){return t.mode&1?Vt&2&&Mr!==0?Mr&-Mr:b7.transition!==null?(Ay===0&&(Ay=UO()),Ay):(t=en,t!==0||(t=window.event,t=t===void 0?16:ZO(t.type)),t):1}function Yi(t,e,n,r){if(50<Lm)throw Lm=0,I1=null,Error(Ae(185));xg(t,n,r),(!(Vt&2)||t!==Pr)&&(t===Pr&&(!(Vt&2)&&(D0|=n),pr===4&&jl(t,Mr)),As(t,r),n===1&&Vt===0&&!(e.mode&1)&&(gh=Gn()+500,I0&&pc()))}function As(t,e){var n=t.callbackNode;bU(t,e);var r=ox(t,t===Pr?Mr:0);if(r===0)n!==null&&oC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&oC(n),e===1)t.tag===0?w7(XC.bind(null,t)):m4(XC.bind(null,t)),g7(function(){!(Vt&6)&&pc()}),n=null;else{switch(BO(r)){case 1:n=KN;break;case 4:n=VO;break;case 16:n=ax;break;case 536870912:n=zO;break;default:n=ax}n=hM(n,iM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iM(t,e){if(Iy=-1,Ay=0,Vt&6)throw Error(Ae(327));var n=t.callbackNode;if(Xd()&&t.callbackNode!==n)return null;var r=ox(t,t===Pr?Mr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sx(t,r);else{e=r;var s=Vt;Vt|=2;var a=oM();(Pr!==t||Mr!==e)&&(xo=null,gh=Gn()+500,tu(t,e));do try{z7();break}catch(l){aM(t,l)}while(!0);oS(),_x.current=a,Vt=s,ar!==null?e=0:(Pr=null,Mr=0,e=pr)}if(e!==0){if(e===2&&(s=i1(t),s!==0&&(r=s,e=A1(t,s))),e===1)throw n=hp,tu(t,0),jl(t,r),As(t,Gn()),n;if(e===6)jl(t,r);else{if(s=t.current.alternate,!(r&30)&&!$7(s)&&(e=Sx(t,r),e===2&&(a=i1(t),a!==0&&(r=a,e=A1(t,a))),e===1))throw n=hp,tu(t,0),jl(t,r),As(t,Gn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:Vc(t,Ss,xo);break;case 3:if(jl(t,r),(r&130023424)===r&&(e=_S+500-Gn(),10<e)){if(ox(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ms(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=f1(Vc.bind(null,t,Ss,xo),e);break}Vc(t,Ss,xo);break;case 4:if(jl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Qi(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=Gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*F7(r/1960))-r,10<r){t.timeoutHandle=f1(Vc.bind(null,t,Ss,xo),r);break}Vc(t,Ss,xo);break;case 5:Vc(t,Ss,xo);break;default:throw Error(Ae(329))}}}return As(t,Gn()),t.callbackNode===n?iM.bind(null,t):null}function A1(t,e){var n=Dm;return t.current.memoizedState.isDehydrated&&(tu(t,e).flags|=256),t=Sx(t,e),t!==2&&(e=Ss,Ss=n,e!==null&&O1(e)),t}function O1(t){Ss===null?Ss=t:Ss.push.apply(Ss,t)}function $7(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!ra(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jl(t,e){for(e&=~bS,e&=~D0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qi(e),r=1<<n;t[n]=-1,e&=~r}}function XC(t){if(Vt&6)throw Error(Ae(327));Xd();var e=ox(t,0);if(!(e&1))return As(t,Gn()),null;var n=Sx(t,e);if(t.tag!==0&&n===2){var r=i1(t);r!==0&&(e=r,n=A1(t,r))}if(n===1)throw n=hp,tu(t,0),jl(t,e),As(t,Gn()),n;if(n===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vc(t,Ss,xo),As(t,Gn()),null}function jS(t,e){var n=Vt;Vt|=1;try{return t(e)}finally{Vt=n,Vt===0&&(gh=Gn()+500,I0&&pc())}}function gu(t){Il!==null&&Il.tag===0&&!(Vt&6)&&Xd();var e=Vt;Vt|=1;var n=_i.transition,r=en;try{if(_i.transition=null,en=1,t)return t()}finally{en=r,_i.transition=n,Vt=e,!(Vt&6)&&pc()}}function NS(){Bs=Wd.current,_n(Wd)}function tu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,p7(n)),ar!==null)for(n=ar.return;n!==null;){var r=n;switch(sS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hx();break;case 3:mh(),_n(ks),_n(ns),fS();break;case 5:hS(r);break;case 4:mh();break;case 13:_n(On);break;case 19:_n(On);break;case 10:lS(r.type._context);break;case 22:case 23:NS()}n=n.return}if(Pr=t,ar=t=Wl(t.current,null),Mr=Bs=e,pr=0,hp=null,bS=D0=pu=0,Ss=Dm=null,Gc!==null){for(e=0;e<Gc.length;e++)if(n=Gc[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}Gc=null}return t}function aM(t,e){do{var n=ar;try{if(oS(),Ty.current=bx,wx){for(var r=Mn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}wx=!1}if(mu=0,Nr=mr=Mn=null,Om=!1,cp=0,wS.current=null,n===null||n.return===null){pr=1,hp=e,ar=null;break}e:{var a=t,o=n.return,l=n,u=e;if(e=Mr,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=VC(o);if(y!==null){y.flags&=-257,zC(y,o,l,a,e),y.mode&1&&$C(a,d,e),e=y,u=d;var j=e.updateQueue;if(j===null){var _=new Set;_.add(u),e.updateQueue=_}else j.add(u);break e}else{if(!(e&1)){$C(a,d,e),SS();break e}u=Error(Ae(426))}}else if(Pn&&l.mode&1){var N=VC(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),zC(N,o,l,a,e),iS(ph(u,l));break e}}a=u=ph(u,l),pr!==4&&(pr=2),Dm===null?Dm=[a]:Dm.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=B4(a,u,e);AC(a,b);break e;case 1:l=u;var x=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ul===null||!Ul.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var C=W4(a,l,e);AC(a,C);break e}}a=a.return}while(a!==null)}cM(n)}catch(R){e=R,ar===n&&n!==null&&(ar=n=n.return);continue}break}while(!0)}function oM(){var t=_x.current;return _x.current=bx,t===null?bx:t}function SS(){(pr===0||pr===3||pr===2)&&(pr=4),Pr===null||!(pu&268435455)&&!(D0&268435455)||jl(Pr,Mr)}function Sx(t,e){var n=Vt;Vt|=2;var r=oM();(Pr!==t||Mr!==e)&&(xo=null,tu(t,e));do try{V7();break}catch(s){aM(t,s)}while(!0);if(oS(),Vt=n,_x.current=r,ar!==null)throw Error(Ae(261));return Pr=null,Mr=0,pr}function V7(){for(;ar!==null;)lM(ar)}function z7(){for(;ar!==null&&!hU();)lM(ar)}function lM(t){var e=dM(t.alternate,t,Bs);t.memoizedProps=t.pendingProps,e===null?cM(t):ar=e,wS.current=null}function cM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=O7(n,e),n!==null){n.flags&=32767,ar=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pr=6,ar=null;return}}else if(n=A7(n,e,Bs),n!==null){ar=n;return}if(e=e.sibling,e!==null){ar=e;return}ar=e=t}while(e!==null);pr===0&&(pr=5)}function Vc(t,e,n){var r=en,s=_i.transition;try{_i.transition=null,en=1,U7(t,e,n,r)}finally{_i.transition=s,en=r}return null}function U7(t,e,n,r){do Xd();while(Il!==null);if(Vt&6)throw Error(Ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(_U(t,a),t===Pr&&(ar=Pr=null,Mr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zv||(Zv=!0,hM(ax,function(){return Xd(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=_i.transition,_i.transition=null;var o=en;en=1;var l=Vt;Vt|=4,wS.current=null,D7(t,n),rM(n,t),l7(d1),lx=!!u1,d1=u1=null,t.current=n,L7(n),fU(),Vt=l,en=o,_i.transition=a}else t.current=n;if(Zv&&(Zv=!1,Il=t,Nx=s),a=t.pendingLanes,a===0&&(Ul=null),gU(n.stateNode),As(t,Gn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jx)throw jx=!1,t=k1,k1=null,t;return Nx&1&&t.tag!==0&&Xd(),a=t.pendingLanes,a&1?t===I1?Lm++:(Lm=0,I1=t):Lm=0,pc(),null}function Xd(){if(Il!==null){var t=BO(Nx),e=_i.transition,n=en;try{if(_i.transition=null,en=16>t?16:t,Il===null)var r=!1;else{if(t=Il,Il=null,Nx=0,Vt&6)throw Error(Ae(331));var s=Vt;for(Vt|=4,Xe=t.current;Xe!==null;){var a=Xe,o=a.child;if(Xe.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Xe=d;Xe!==null;){var h=Xe;switch(h.tag){case 0:case 11:case 15:Mm(8,h,a)}var m=h.child;if(m!==null)m.return=h,Xe=m;else for(;Xe!==null;){h=Xe;var p=h.sibling,y=h.return;if(eM(h),h===d){Xe=null;break}if(p!==null){p.return=y,Xe=p;break}Xe=y}}}var j=a.alternate;if(j!==null){var _=j.child;if(_!==null){j.child=null;do{var N=_.sibling;_.sibling=null,_=N}while(_!==null)}}Xe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Xe=o;else e:for(;Xe!==null;){if(a=Xe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Mm(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,Xe=b;break e}Xe=a.return}}var x=t.current;for(Xe=x;Xe!==null;){o=Xe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Xe=S;else e:for(o=x;Xe!==null;){if(l=Xe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:M0(9,l)}}catch(R){Vn(l,l.return,R)}if(l===o){Xe=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,Xe=C;break e}Xe=l.return}}if(Vt=s,pc(),Oa&&typeof Oa.onPostCommitFiberRoot=="function")try{Oa.onPostCommitFiberRoot(P0,t)}catch{}r=!0}return r}finally{en=n,_i.transition=e}}return!1}function eT(t,e,n){e=ph(n,e),e=B4(t,e,1),t=zl(t,e,1),e=ms(),t!==null&&(xg(t,1,e),As(t,e))}function Vn(t,e,n){if(t.tag===3)eT(t,t,n);else for(;e!==null;){if(e.tag===3){eT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ul===null||!Ul.has(r))){t=ph(n,t),t=W4(e,t,1),e=zl(e,t,1),t=ms(),e!==null&&(xg(e,1,t),As(e,t));break}}e=e.return}}function B7(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ms(),t.pingedLanes|=t.suspendedLanes&n,Pr===t&&(Mr&n)===n&&(pr===4||pr===3&&(Mr&130023424)===Mr&&500>Gn()-_S?tu(t,0):bS|=n),As(t,e)}function uM(t,e){e===0&&(t.mode&1?(e=$v,$v<<=1,!($v&130023424)&&($v=4194304)):e=1);var n=ms();t=Io(t,e),t!==null&&(xg(t,e,n),As(t,n))}function W7(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uM(t,n)}function H7(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),uM(t,n)}var dM;dM=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ks.current)Ps=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ps=!1,I7(t,e,n);Ps=!!(t.flags&131072)}else Ps=!1,Pn&&e.flags&1048576&&p4(e,px,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ky(t,e),t=e.pendingProps;var s=dh(e,ns.current);Jd(e,n),s=pS(null,e,r,t,s,n);var a=gS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Is(r)?(a=!0,fx(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,uS(e),s.updater=O0,e.stateNode=s,s._reactInternals=e,w1(e,r,t,n),e=j1(null,e,r,!0,a,n)):(e.tag=0,Pn&&a&&rS(e),us(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ky(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=G7(r),t=Bi(r,t),s){case 0:e=_1(null,e,r,t,n);break e;case 1:e=WC(null,e,r,t,n);break e;case 11:e=UC(null,e,r,t,n);break e;case 14:e=BC(null,e,r,Bi(r.type,t),n);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bi(r,s),_1(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bi(r,s),WC(t,e,r,s,n);case 3:e:{if(K4(e),t===null)throw Error(Ae(387));r=e.pendingProps,a=e.memoizedState,s=a.element,b4(t,e),yx(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=ph(Error(Ae(423)),e),e=HC(t,e,r,n,s);break e}else if(r!==s){s=ph(Error(Ae(424)),e),e=HC(t,e,r,n,s);break e}else for(Hs=Vl(e.stateNode.containerInfo.firstChild),Ks=e,Pn=!0,qi=null,n=x4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hh(),r===s){e=Ao(t,e,n);break e}us(t,e,r,n)}e=e.child}return e;case 5:return _4(e),t===null&&v1(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,h1(r,s)?o=null:a!==null&&h1(r,a)&&(e.flags|=32),G4(t,e),us(t,e,o,n),e.child;case 6:return t===null&&v1(e),null;case 13:return Z4(t,e,n);case 4:return dS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fh(e,null,r,n):us(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bi(r,s),UC(t,e,r,s,n);case 7:return us(t,e,e.pendingProps,n),e.child;case 8:return us(t,e,e.pendingProps.children,n),e.child;case 12:return us(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,mn(gx,r._currentValue),r._currentValue=o,a!==null)if(ra(a.value,o)){if(a.children===s.children&&!ks.current){e=Ao(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Po(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),y1(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Ae(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),y1(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}us(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Jd(e,n),s=Pi(s),r=r(s),e.flags|=1,us(t,e,r,n),e.child;case 14:return r=e.type,s=Bi(r,e.pendingProps),s=Bi(r.type,s),BC(t,e,r,s,n);case 15:return H4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bi(r,s),ky(t,e),e.tag=1,Is(r)?(t=!0,fx(e)):t=!1,Jd(e,n),U4(e,r,s),w1(e,r,s,n),j1(null,e,r,!0,t,n);case 19:return Q4(t,e,n);case 22:return q4(t,e,n)}throw Error(Ae(156,e.tag))};function hM(t,e){return $O(t,e)}function q7(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(t,e,n,r){return new q7(t,e,n,r)}function ES(t){return t=t.prototype,!(!t||!t.isReactComponent)}function G7(t){if(typeof t=="function")return ES(t)?1:0;if(t!=null){if(t=t.$$typeof,t===HN)return 11;if(t===qN)return 14}return 2}function Wl(t,e){var n=t.alternate;return n===null?(n=xi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oy(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")ES(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Od:return nu(n.children,s,a,e);case WN:o=8,s|=8;break;case W_:return t=xi(12,n,e,s|2),t.elementType=W_,t.lanes=a,t;case H_:return t=xi(13,n,e,s),t.elementType=H_,t.lanes=a,t;case q_:return t=xi(19,n,e,s),t.elementType=q_,t.lanes=a,t;case _O:return L0(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wO:o=10;break e;case bO:o=9;break e;case HN:o=11;break e;case qN:o=14;break e;case yl:o=16,r=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=xi(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function nu(t,e,n,r){return t=xi(7,t,r,e),t.lanes=n,t}function L0(t,e,n,r){return t=xi(22,t,r,e),t.elementType=_O,t.lanes=n,t.stateNode={isHidden:!1},t}function Db(t,e,n){return t=xi(6,t,null,e),t.lanes=n,t}function Lb(t,e,n){return e=xi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function K7(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vb(0),this.expirationTimes=vb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vb(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function PS(t,e,n,r,s,a,o,l,u){return t=new K7(t,e,n,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=xi(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uS(a),t}function Z7(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ad,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fM(t){if(!t)return Xl;t=t._reactInternals;e:{if(Mu(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Is(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var n=t.type;if(Is(n))return f4(t,n,e)}return e}function mM(t,e,n,r,s,a,o,l,u){return t=PS(n,r,!0,t,s,a,o,l,u),t.context=fM(null),n=t.current,r=ms(),s=Bl(n),a=Po(r,s),a.callback=e??null,zl(n,a,s),t.current.lanes=s,xg(t,s,r),As(t,r),t}function F0(t,e,n,r){var s=e.current,a=ms(),o=Bl(s);return n=fM(n),e.context===null?e.context=n:e.pendingContext=n,e=Po(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zl(s,e,o),t!==null&&(Yi(t,s,o,a),Cy(t,s,o)),o}function Ex(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function CS(t,e){tT(t,e),(t=t.alternate)&&tT(t,e)}function Q7(){return null}var pM=typeof reportError=="function"?reportError:function(t){console.error(t)};function TS(t){this._internalRoot=t}$0.prototype.render=TS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));F0(t,e,null,null)};$0.prototype.unmount=TS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gu(function(){F0(null,t,null,null)}),e[ko]=null}};function $0(t){this._internalRoot=t}$0.prototype.unstable_scheduleHydration=function(t){if(t){var e=qO();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_l.length&&e!==0&&e<_l[n].priority;n++);_l.splice(n,0,t),n===0&&KO(t)}};function RS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function V0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nT(){}function Y7(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var d=Ex(o);a.call(d)}}var o=mM(e,r,t,0,null,!1,!1,"",nT);return t._reactRootContainer=o,t[ko]=o.current,sp(t.nodeType===8?t.parentNode:t),gu(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Ex(u);l.call(d)}}var u=PS(t,0,!1,null,null,!1,!1,"",nT);return t._reactRootContainer=u,t[ko]=u.current,sp(t.nodeType===8?t.parentNode:t),gu(function(){F0(e,u,n,r)}),u}function z0(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=Ex(o);l.call(u)}}F0(e,o,t,s)}else o=Y7(n,e,t,s,r);return Ex(o)}WO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fm(e.pendingLanes);n!==0&&(ZN(e,n|1),As(e,Gn()),!(Vt&6)&&(gh=Gn()+500,pc()))}break;case 13:gu(function(){var r=Io(t,1);if(r!==null){var s=ms();Yi(r,t,1,s)}}),CS(t,1)}};QN=function(t){if(t.tag===13){var e=Io(t,134217728);if(e!==null){var n=ms();Yi(e,t,134217728,n)}CS(t,134217728)}};HO=function(t){if(t.tag===13){var e=Bl(t),n=Io(t,e);if(n!==null){var r=ms();Yi(n,t,e,r)}CS(t,e)}};qO=function(){return en};GO=function(t,e){var n=en;try{return en=t,e()}finally{en=n}};n1=function(t,e,n){switch(e){case"input":if(Z_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=k0(r);if(!s)throw Error(Ae(90));NO(r),Z_(r,s)}}}break;case"textarea":EO(t,n);break;case"select":e=n.value,e!=null&&Kd(t,!!n.multiple,e,!1)}};AO=jS;OO=gu;var J7={usingClientEntryPoint:!1,Events:[bg,Fd,k0,kO,IO,jS]},Yf={findFiberByHostInstance:qc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X7={bundleType:Yf.bundleType,version:Yf.version,rendererPackageName:Yf.rendererPackageName,rendererConfig:Yf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ko.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=LO(t),t===null?null:t.stateNode},findFiberByHostInstance:Yf.findFiberByHostInstance||Q7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qv.isDisabled&&Qv.supportsFiber)try{P0=Qv.inject(X7),Oa=Qv}catch{}}ti.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J7;ti.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!RS(e))throw Error(Ae(200));return Z7(t,e,null,n)};ti.createRoot=function(t,e){if(!RS(t))throw Error(Ae(299));var n=!1,r="",s=pM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=PS(t,1,!1,null,null,n,!1,r,s),t[ko]=e.current,sp(t.nodeType===8?t.parentNode:t),new TS(e)};ti.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=LO(e),t=t===null?null:t.stateNode,t};ti.flushSync=function(t){return gu(t)};ti.hydrate=function(t,e,n){if(!V0(e))throw Error(Ae(200));return z0(null,t,e,!0,n)};ti.hydrateRoot=function(t,e,n){if(!RS(t))throw Error(Ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=pM;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mM(e,null,t,1,n??null,s,!1,a,o),t[ko]=e.current,sp(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new $0(e)};ti.render=function(t,e,n){if(!V0(e))throw Error(Ae(200));return z0(null,t,e,!1,n)};ti.unmountComponentAtNode=function(t){if(!V0(t))throw Error(Ae(40));return t._reactRootContainer?(gu(function(){z0(null,null,t,!1,function(){t._reactRootContainer=null,t[ko]=null})}),!0):!1};ti.unstable_batchedUpdates=jS;ti.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!V0(n))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return z0(t,e,n,!1,r)};ti.version="18.3.1-next-f1338f8080-20240426";function gM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gM)}catch(t){console.error(t)}}gM(),gO.exports=ti;var Qh=gO.exports;const eB=Go(Qh);var vM,rT=Qh;vM=rT.createRoot,rT.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fp(){return fp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fp.apply(this,arguments)}var Al;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Al||(Al={}));const sT="popstate";function tB(t){t===void 0&&(t={});function e(s,a){let{pathname:o="/",search:l="",hash:u=""}=Du(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),M1("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=s.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof a=="string"?a:Px(a))}function r(s,a){kS(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return rB(e,n,r,t)}function Yn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nB(){return Math.random().toString(36).substr(2,8)}function iT(t,e){return{usr:t.state,key:t.key,idx:e}}function M1(t,e,n,r){return n===void 0&&(n=null),fp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Du(e):e,{state:n,key:e&&e.key||r||nB()})}function Px(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Du(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function rB(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=Al.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(fp({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){l=Al.Pop;let N=h(),b=N==null?null:N-d;d=N,u&&u({action:l,location:_.location,delta:b})}function p(N,b){l=Al.Push;let x=M1(_.location,N,b);n&&n(x,N),d=h()+1;let S=iT(x,d),C=_.createHref(x);try{o.pushState(S,"",C)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(C)}a&&u&&u({action:l,location:_.location,delta:1})}function y(N,b){l=Al.Replace;let x=M1(_.location,N,b);n&&n(x,N),d=h();let S=iT(x,d),C=_.createHref(x);o.replaceState(S,"",C),a&&u&&u({action:l,location:_.location,delta:0})}function j(N){let b=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof N=="string"?N:Px(N);return x=x.replace(/ $/,"%20"),Yn(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let _={get action(){return l},get location(){return t(s,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(sT,m),u=N,()=>{s.removeEventListener(sT,m),u=null}},createHref(N){return e(s,N)},createURL:j,encodeLocation(N){let b=j(N);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:y,go(N){return o.go(N)}};return _}var aT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(aT||(aT={}));function sB(t,e,n){return n===void 0&&(n="/"),iB(t,e,n)}function iB(t,e,n,r){let s=typeof e=="string"?Du(e):e,a=IS(s.pathname||"/",n);if(a==null)return null;let o=yM(t);aB(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=yB(a);l=pB(o[u],d)}return l}function yM(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Yn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Hl([r,u.relativePath]),h=n.concat(u);a.children&&a.children.length>0&&(Yn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),yM(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:fB(d,a.index),routesMeta:h})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let u of xM(a.path))s(a,o,u)}),e}function xM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=xM(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function aB(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mB(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const oB=/^:[\w-]+$/,lB=3,cB=2,uB=1,dB=10,hB=-2,oT=t=>t==="*";function fB(t,e){let n=t.split("/"),r=n.length;return n.some(oT)&&(r+=hB),e&&(r+=cB),n.filter(s=>!oT(s)).reduce((s,a)=>s+(oB.test(a)?lB:a===""?uB:dB),r)}function mB(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function pB(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",m=gB({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Hl([a,m.pathname]),pathnameBase:_B(Hl([a,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(a=Hl([a,m.pathnameBase]))}return o}function gB(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=vB(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,m)=>{let{paramName:p,isOptional:y}=h;if(p==="*"){let _=l[m]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const j=l[m];return y&&!j?d[p]=void 0:d[p]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function vB(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),kS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function yB(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function IS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function xB(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Du(t):t;return{pathname:n?n.startsWith("/")?n:wB(n,e):e,search:jB(r),hash:NB(s)}}function wB(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Fb(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bB(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function AS(t,e){let n=bB(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function OS(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Du(t):(s=fp({},t),Yn(!s.pathname||!s.pathname.includes("?"),Fb("?","pathname","search",s)),Yn(!s.pathname||!s.pathname.includes("#"),Fb("#","pathname","hash",s)),Yn(!s.search||!s.search.includes("#"),Fb("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}l=m>=0?e[m]:"/"}let u=xB(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Hl=t=>t.join("/").replace(/\/\/+/g,"/"),_B=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jB=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,NB=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SB(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wM=["post","put","patch","delete"];new Set(wM);const EB=["get",...wM];new Set(EB);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mp(){return mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mp.apply(this,arguments)}const MS=w.createContext(null),PB=w.createContext(null),gc=w.createContext(null),U0=w.createContext(null),Zo=w.createContext({outlet:null,matches:[],isDataRoute:!1}),bM=w.createContext(null);function CB(t,e){let{relative:n}=e===void 0?{}:e;Yh()||Yn(!1);let{basename:r,navigator:s}=w.useContext(gc),{hash:a,pathname:o,search:l}=jM(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Hl([r,o])),s.createHref({pathname:u,search:l,hash:a})}function Yh(){return w.useContext(U0)!=null}function Qo(){return Yh()||Yn(!1),w.useContext(U0).location}function _M(t){w.useContext(gc).static||w.useLayoutEffect(t)}function yr(){let{isDataRoute:t}=w.useContext(Zo);return t?zB():TB()}function TB(){Yh()||Yn(!1);let t=w.useContext(MS),{basename:e,future:n,navigator:r}=w.useContext(gc),{matches:s}=w.useContext(Zo),{pathname:a}=Qo(),o=JSON.stringify(AS(s,n.v7_relativeSplatPath)),l=w.useRef(!1);return _M(()=>{l.current=!0}),w.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=OS(d,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Hl([e,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[e,r,o,a,t])}function DS(){let{matches:t}=w.useContext(Zo),e=t[t.length-1];return e?e.params:{}}function jM(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=w.useContext(gc),{matches:s}=w.useContext(Zo),{pathname:a}=Qo(),o=JSON.stringify(AS(s,r.v7_relativeSplatPath));return w.useMemo(()=>OS(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function RB(t,e){return kB(t,e)}function kB(t,e,n,r){Yh()||Yn(!1);let{navigator:s}=w.useContext(gc),{matches:a}=w.useContext(Zo),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Qo(),h;if(e){var m;let N=typeof e=="string"?Du(e):e;u==="/"||(m=N.pathname)!=null&&m.startsWith(u)||Yn(!1),h=N}else h=d;let p=h.pathname||"/",y=p;if(u!=="/"){let N=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(N.length).join("/")}let j=sB(t,{pathname:y}),_=DB(j&&j.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:Hl([u,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Hl([u,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,n,r);return e&&_?w.createElement(U0.Provider,{value:{location:mp({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Al.Pop}},_):_}function IB(){let t=VB(),e=SB(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:s},n):null,null)}const AB=w.createElement(IB,null);class OB extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(Zo.Provider,{value:this.props.routeContext},w.createElement(bM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MB(t){let{routeContext:e,match:n,children:r}=t,s=w.useContext(MS);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Zo.Provider,{value:e},r)}function DB(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||Yn(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:y}=n,j=m.route.loader&&p[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||j){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,p)=>{let y,j=!1,_=null,N=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,_=m.route.errorElement||AB,u&&(d<0&&p===0?(UB("route-fallback"),j=!0,N=null):d===p&&(j=!0,N=m.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),x=()=>{let S;return y?S=_:j?S=N:m.route.Component?S=w.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=h,w.createElement(MB,{match:m,routeContext:{outlet:h,matches:b,isDataRoute:n!=null},children:S})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?w.createElement(OB,{location:n.location,revalidation:n.revalidation,component:_,error:y,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var NM=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(NM||{}),SM=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(SM||{});function LB(t){let e=w.useContext(MS);return e||Yn(!1),e}function FB(t){let e=w.useContext(PB);return e||Yn(!1),e}function $B(t){let e=w.useContext(Zo);return e||Yn(!1),e}function EM(t){let e=$B(),n=e.matches[e.matches.length-1];return n.route.id||Yn(!1),n.route.id}function VB(){var t;let e=w.useContext(bM),n=FB(),r=EM();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function zB(){let{router:t}=LB(NM.UseNavigateStable),e=EM(SM.UseNavigateStable),n=w.useRef(!1);return _M(()=>{n.current=!0}),w.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,mp({fromRouteId:e},a)))},[t,e])}const lT={};function UB(t,e,n){lT[t]||(lT[t]=!0)}function BB(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function WB(t){let{to:e,replace:n,state:r,relative:s}=t;Yh()||Yn(!1);let{future:a,static:o}=w.useContext(gc),{matches:l}=w.useContext(Zo),{pathname:u}=Qo(),d=yr(),h=OS(e,AS(l,a.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(h);return w.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function wn(t){Yn(!1)}function HB(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Al.Pop,navigator:a,static:o=!1,future:l}=t;Yh()&&Yn(!1);let u=e.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:u,navigator:a,static:o,future:mp({v7_relativeSplatPath:!1},l)}),[u,l,a,o]);typeof r=="string"&&(r=Du(r));let{pathname:h="/",search:m="",hash:p="",state:y=null,key:j="default"}=r,_=w.useMemo(()=>{let N=IS(h,u);return N==null?null:{location:{pathname:N,search:m,hash:p,state:y,key:j},navigationType:s}},[u,h,m,p,y,j,s]);return _==null?null:w.createElement(gc.Provider,{value:d},w.createElement(U0.Provider,{children:n,value:_}))}function qB(t){let{children:e,location:n}=t;return RB(D1(e),n)}new Promise(()=>{});function D1(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,s)=>{if(!w.isValidElement(r))return;let a=[...e,s];if(r.type===w.Fragment){n.push.apply(n,D1(r.props.children,a));return}r.type!==wn&&Yn(!1),!r.props.index||!r.props.children||Yn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=D1(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function L1(){return L1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L1.apply(this,arguments)}function GB(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function KB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ZB(t,e){return t.button===0&&(!e||e==="_self")&&!KB(t)}function F1(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function QB(t,e){let n=F1(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const YB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],JB="6";try{window.__reactRouterVersion=JB}catch{}const XB="startTransition",cT=VN[XB];function eW(t){let{basename:e,children:n,future:r,window:s}=t,a=w.useRef();a.current==null&&(a.current=tB({window:s,v5Compat:!0}));let o=a.current,[l,u]=w.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=w.useCallback(m=>{d&&cT?cT(()=>u(m)):u(m)},[u,d]);return w.useLayoutEffect(()=>o.listen(h),[o,h]),w.useEffect(()=>BB(r),[r]),w.createElement(HB,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const tW=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=w.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:m}=e,p=GB(e,YB),{basename:y}=w.useContext(gc),j,_=!1;if(typeof d=="string"&&nW.test(d)&&(j=d,tW))try{let S=new URL(window.location.href),C=d.startsWith("//")?new URL(S.protocol+d):new URL(d),R=IS(C.pathname,y);C.origin===S.origin&&R!=null?d=R+C.search+C.hash:_=!0}catch{}let N=CB(d,{relative:s}),b=rW(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:m});function x(S){r&&r(S),S.defaultPrevented||b(S)}return w.createElement("a",L1({},p,{href:j||N,onClick:_||a?r:x,ref:n,target:u}))});var uT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(uT||(uT={}));var dT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dT||(dT={}));function rW(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,u=yr(),d=Qo(),h=jM(t,{relative:o});return w.useCallback(m=>{if(ZB(m,n)){m.preventDefault();let p=r!==void 0?r:Px(d)===Px(h);u(t,{replace:p,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,h,r,s,n,t,a,o,l])}function LS(t){let e=w.useRef(F1(t)),n=w.useRef(!1),r=Qo(),s=w.useMemo(()=>QB(r.search,n.current?null:e.current),[r.search]),a=yr(),o=w.useCallback((l,u)=>{const d=F1(typeof l=="function"?l(s):l);n.current=!0,a("?"+d,u)},[a,s]);return[s,o]}var Cx=["light","dark"],FS="(prefers-color-scheme: dark)",sW=typeof window>"u",$S=w.createContext(void 0),iW={setTheme:t=>{},themes:[]},aW=()=>{var t;return(t=w.useContext($S))!=null?t:iW},oW=t=>w.useContext($S)?t.children:w.createElement(cW,{...t}),lW=["light","dark"],cW=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:a=lW,defaultTheme:o=n?"system":"light",attribute:l="data-theme",value:u,children:d,nonce:h})=>{let[m,p]=w.useState(()=>hT(s,o)),[y,j]=w.useState(()=>hT(s)),_=u?Object.values(u):a,N=w.useCallback(C=>{let R=C;if(!R)return;C==="system"&&n&&(R=fT());let z=u?u[R]:R,k=e?dW():null,I=document.documentElement;if(l==="class"?(I.classList.remove(..._),z&&I.classList.add(z)):z?I.setAttribute(l,z):I.removeAttribute(l),r){let V=Cx.includes(o)?o:null,T=Cx.includes(R)?R:V;I.style.colorScheme=T}k==null||k()},[]),b=w.useCallback(C=>{let R=typeof C=="function"?C(C):C;p(R);try{localStorage.setItem(s,R)}catch{}},[t]),x=w.useCallback(C=>{let R=fT(C);j(R),m==="system"&&n&&!t&&N("system")},[m,t]);w.useEffect(()=>{let C=window.matchMedia(FS);return C.addListener(x),x(C),()=>C.removeListener(x)},[x]),w.useEffect(()=>{let C=R=>{if(R.key!==s)return;let z=R.newValue||o;b(z)};return window.addEventListener("storage",C),()=>window.removeEventListener("storage",C)},[b]),w.useEffect(()=>{N(t??m)},[t,m]);let S=w.useMemo(()=>({theme:m,setTheme:b,forcedTheme:t,resolvedTheme:m==="system"?y:m,themes:n?[...a,"system"]:a,systemTheme:n?y:void 0}),[m,b,t,y,n,a]);return w.createElement($S.Provider,{value:S},w.createElement(uW,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:a,defaultTheme:o,attribute:l,value:u,children:d,attrs:_,nonce:h}),d)},uW=w.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:u})=>{let d=a==="system",h=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(j=>`'${j}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,m=s?Cx.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(j,_=!1,N=!0)=>{let b=o?o[j]:j,x=_?j+"|| ''":`'${b}'`,S="";return s&&N&&!_&&Cx.includes(j)&&(S+=`d.style.colorScheme = '${j}';`),n==="class"?_||b?S+=`c.add(${x})`:S+="null":b&&(S+=`d[s](n,${x})`),S},y=t?`!function(){${h}${p(t)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${FS}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${d?"":"else{"+p(a,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(a,!1,!1)};}${m}}catch(t){}}();`;return w.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:y}})}),hT=(t,e)=>{if(sW)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},dW=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},fT=t=>(t||(t=window.matchMedia(FS)),t.matches?"dark":"light");let hW={data:""},fW=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||hW,mW=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,pW=/\/\*[^]*?\*\/|  +/g,mT=/\n+/g,Nl=(t,e)=>{let n="",r="",s="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?Nl(o,a):a+"{"+Nl(o,a[1]=="k"?"":e)+"}":typeof o=="object"?r+=Nl(o,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Nl.p?Nl.p(a,o):a+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},mo={},PM=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+PM(t[n]);return e}return t},gW=(t,e,n,r,s)=>{let a=PM(t),o=mo[a]||(mo[a]=(u=>{let d=0,h=11;for(;d<u.length;)h=101*h+u.charCodeAt(d++)>>>0;return"go"+h})(a));if(!mo[o]){let u=a!==t?t:(d=>{let h,m,p=[{}];for(;h=mW.exec(d.replace(pW,""));)h[4]?p.shift():h[3]?(m=h[3].replace(mT," ").trim(),p.unshift(p[0][m]=p[0][m]||{})):p[0][h[1]]=h[2].replace(mT," ").trim();return p[0]})(t);mo[o]=Nl(s?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&mo.g?mo.g:null;return n&&(mo.g=mo[o]),((u,d,h,m)=>{m?d.data=d.data.replace(m,u):d.data.indexOf(u)===-1&&(d.data=h?u+d.data:d.data+u)})(mo[o],e,r,l),o},vW=(t,e,n)=>t.reduce((r,s,a)=>{let o=e[a];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":Nl(l,""):l===!1?"":l}return r+s+(o??"")},"");function B0(t){let e=this||{},n=t.call?t(e.p):t;return gW(n.unshift?n.raw?vW(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,fW(e.target),e.g,e.o,e.k)}let CM,$1,V1;B0.bind({g:1});let Oo=B0.bind({k:1});function yW(t,e,n,r){Nl.p=e,CM=t,$1=n,V1=r}function vc(t,e){let n=this||{};return function(){let r=arguments;function s(a,o){let l=Object.assign({},a),u=l.className||s.className;n.p=Object.assign({theme:$1&&$1()},l),n.o=/ *go\d+/.test(u),l.className=B0.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),V1&&d[0]&&V1(l),CM(d,l)}return s}}var xW=t=>typeof t=="function",Tx=(t,e)=>xW(t)?t(e):t,wW=(()=>{let t=0;return()=>(++t).toString()})(),TM=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),bW=20,RM=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,bW)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return RM(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+s}))}}},My=[],Zc={toasts:[],pausedAt:void 0},Lu=t=>{Zc=RM(Zc,t),My.forEach(e=>{e(Zc)})},_W={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},jW=(t={})=>{let[e,n]=w.useState(Zc),r=w.useRef(Zc);w.useEffect(()=>(r.current!==Zc&&n(Zc),My.push(n),()=>{let a=My.indexOf(n);a>-1&&My.splice(a,1)}),[]);let s=e.toasts.map(a=>{var o,l,u;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||_W[a.type],style:{...t.style,...(u=t[a.type])==null?void 0:u.style,...a.style}}});return{...e,toasts:s}},NW=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||wW()}),jg=t=>(e,n)=>{let r=NW(e,t,n);return Lu({type:2,toast:r}),r.id},Kn=(t,e)=>jg("blank")(t,e);Kn.error=jg("error");Kn.success=jg("success");Kn.loading=jg("loading");Kn.custom=jg("custom");Kn.dismiss=t=>{Lu({type:3,toastId:t})};Kn.remove=t=>Lu({type:4,toastId:t});Kn.promise=(t,e,n)=>{let r=Kn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let a=e.success?Tx(e.success,s):void 0;return a?Kn.success(a,{id:r,...n,...n==null?void 0:n.success}):Kn.dismiss(r),s}).catch(s=>{let a=e.error?Tx(e.error,s):void 0;a?Kn.error(a,{id:r,...n,...n==null?void 0:n.error}):Kn.dismiss(r)}),t};var SW=(t,e)=>{Lu({type:1,toast:{id:t,height:e}})},EW=()=>{Lu({type:5,time:Date.now()})},Fm=new Map,PW=1e3,CW=(t,e=PW)=>{if(Fm.has(t))return;let n=setTimeout(()=>{Fm.delete(t),Lu({type:4,toastId:t})},e);Fm.set(t,n)},TW=t=>{let{toasts:e,pausedAt:n}=jW(t);w.useEffect(()=>{if(n)return;let a=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let u=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(u<0){l.visible&&Kn.dismiss(l.id);return}return setTimeout(()=>Kn.dismiss(l.id),u)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=w.useCallback(()=>{n&&Lu({type:6,time:Date.now()})},[n]),s=w.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:u=8,defaultPosition:d}=o||{},h=e.filter(y=>(y.position||d)===(a.position||d)&&y.height),m=h.findIndex(y=>y.id===a.id),p=h.filter((y,j)=>j<m&&y.visible).length;return h.filter(y=>y.visible).slice(...l?[p+1]:[0,p]).reduce((y,j)=>y+(j.height||0)+u,0)},[e]);return w.useEffect(()=>{e.forEach(a=>{if(a.dismissed)CW(a.id,a.removeDelay);else{let o=Fm.get(a.id);o&&(clearTimeout(o),Fm.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:SW,startPause:EW,endPause:r,calculateOffset:s}}},RW=Oo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,kW=Oo`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,IW=Oo`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,AW=vc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${kW} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${IW} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,OW=Oo`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,MW=vc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${OW} 1s linear infinite;
`,DW=Oo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,LW=Oo`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,FW=vc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${LW} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,$W=vc("div")`
  position: absolute;
`,VW=vc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,zW=Oo`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,UW=vc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${zW} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,BW=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?w.createElement(UW,null,e):e:n==="blank"?null:w.createElement(VW,null,w.createElement(MW,{...r}),n!=="loading"&&w.createElement($W,null,n==="error"?w.createElement(AW,{...r}):w.createElement(FW,{...r})))},WW=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,HW=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,qW="0%{opacity:0;} 100%{opacity:1;}",GW="0%{opacity:1;} 100%{opacity:0;}",KW=vc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ZW=vc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,QW=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=TM()?[qW,GW]:[WW(n),HW(n)];return{animation:e?`${Oo(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Oo(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},YW=w.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?QW(t.position||e||"top-center",t.visible):{opacity:0},a=w.createElement(BW,{toast:t}),o=w.createElement(ZW,{...t.ariaProps},Tx(t.message,t));return w.createElement(KW,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:a,message:o}):w.createElement(w.Fragment,null,a,o))});yW(w.createElement);var JW=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let a=w.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(t,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return w.createElement("div",{ref:a,className:e,style:n},s)},XW=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:TM()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},eH=B0`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Yv=16,tH=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:u}=TW(n);return w.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Yv,left:Yv,right:Yv,bottom:Yv,pointerEvents:"none",...a},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(d=>{let h=d.position||e,m=u.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),p=XW(h,m);return w.createElement(JW,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?eH:"",style:p},d.type==="custom"?Tx(d.message,d):s?s(d):w.createElement(YW,{toast:d,position:h}))}))},Ne=Kn,pT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},nH=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},IM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=a>>2,m=(a&3)<<4|l>>4;let p=(l&15)<<2|d>>6,y=d&63;u||(y=64,o||(p=64)),r.push(n[h],n[m],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||d==null||m==null)throw new rH;const p=a<<2|l>>4;if(r.push(p),d!==64){const y=l<<4&240|d>>2;if(r.push(y),m!==64){const j=d<<6&192|m;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sH=function(t){const e=kM(t);return IM.encodeByteArray(e,!0)},Rx=function(t){return sH(t).replace(/\./g,"")},AM=function(t){try{return IM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH=()=>iH().__FIREBASE_DEFAULTS__,oH=()=>{if(typeof process>"u"||typeof pT>"u")return;const t=pT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&AM(t[1]);return e&&JSON.parse(e)},W0=()=>{try{return aH()||oH()||lH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OM=t=>{var e,n;return(n=(e=W0())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},MM=t=>{const e=OM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},DM=()=>{var t;return(t=W0())===null||t===void 0?void 0:t.config},LM=t=>{var e;return(e=W0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Rx(JSON.stringify(n)),Rx(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rs())}function dH(){var t;const e=(t=W0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pH(){const t=rs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gH(){return!dH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vH(){try{return typeof indexedDB=="object"}catch{return!1}}function yH(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xH="FirebaseError";class Qa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xH,Object.setPrototypeOf(this,Qa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ng.prototype.create)}}class Ng{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?wH(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Qa(s,l,r)}}function wH(t,e){return t.replace(bH,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const bH=/\{\$([^}]+)}/g;function _H(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function kx(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(gT(a)&&gT(o)){if(!kx(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function gT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pm(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function gm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function jH(t,e){const n=new NH(t,e);return n.subscribe.bind(n)}class NH{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SH(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=$b),s.error===void 0&&(s.error=$b),s.complete===void 0&&(s.complete=$b);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SH(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $b(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){return t&&t._delegate?t._delegate:t}class ec{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cH;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CH(e))try{this.getOrInitializeService({instanceIdentifier:zc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=zc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zc){return this.instances.has(e)}getOptions(e=zc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PH(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zc){return this.component?this.component.multipleInstances?e:zc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PH(t){return t===zc?void 0:t}function CH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new EH(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Dt||(Dt={}));const RH={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},kH=Dt.INFO,IH={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},AH=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=IH[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class VS{constructor(e){this.name=e,this._logLevel=kH,this._logHandler=AH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...e),this._logHandler(this,Dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...e),this._logHandler(this,Dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...e),this._logHandler(this,Dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...e),this._logHandler(this,Dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...e),this._logHandler(this,Dt.ERROR,...e)}}const OH=(t,e)=>e.some(n=>t instanceof n);let vT,yT;function MH(){return vT||(vT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DH(){return yT||(yT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $M=new WeakMap,z1=new WeakMap,VM=new WeakMap,Vb=new WeakMap,zS=new WeakMap;function LH(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(ql(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$M.set(n,t)}).catch(()=>{}),zS.set(e,t),e}function FH(t){if(z1.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});z1.set(t,e)}let U1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return z1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||VM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ql(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $H(t){U1=t(U1)}function VH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zb(this),e,...n);return VM.set(r,e.sort?e.sort():[e]),ql(r)}:DH().includes(t)?function(...e){return t.apply(zb(this),e),ql($M.get(this))}:function(...e){return ql(t.apply(zb(this),e))}}function zH(t){return typeof t=="function"?VH(t):(t instanceof IDBTransaction&&FH(t),OH(t,MH())?new Proxy(t,U1):t)}function ql(t){if(t instanceof IDBRequest)return LH(t);if(Vb.has(t))return Vb.get(t);const e=zH(t);return e!==t&&(Vb.set(t,e),zS.set(e,t)),e}const zb=t=>zS.get(t);function UH(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=ql(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ql(o.result),u.oldVersion,u.newVersion,ql(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const BH=["get","getKey","getAll","getAllKeys","count"],WH=["put","add","delete","clear"],Ub=new Map;function xT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ub.get(e))return Ub.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=WH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BH.includes(n)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Ub.set(e,a),a}$H(t=>({...t,get:(e,n,r)=>xT(e,n)||t.get(e,n,r),has:(e,n)=>!!xT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qH(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qH(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const B1="@firebase/app",wT="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new VS("@firebase/app"),GH="@firebase/app-compat",KH="@firebase/analytics-compat",ZH="@firebase/analytics",QH="@firebase/app-check-compat",YH="@firebase/app-check",JH="@firebase/auth",XH="@firebase/auth-compat",eq="@firebase/database",tq="@firebase/data-connect",nq="@firebase/database-compat",rq="@firebase/functions",sq="@firebase/functions-compat",iq="@firebase/installations",aq="@firebase/installations-compat",oq="@firebase/messaging",lq="@firebase/messaging-compat",cq="@firebase/performance",uq="@firebase/performance-compat",dq="@firebase/remote-config",hq="@firebase/remote-config-compat",fq="@firebase/storage",mq="@firebase/storage-compat",pq="@firebase/firestore",gq="@firebase/vertexai-preview",vq="@firebase/firestore-compat",yq="firebase",xq="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="[DEFAULT]",wq={[B1]:"fire-core",[GH]:"fire-core-compat",[ZH]:"fire-analytics",[KH]:"fire-analytics-compat",[YH]:"fire-app-check",[QH]:"fire-app-check-compat",[JH]:"fire-auth",[XH]:"fire-auth-compat",[eq]:"fire-rtdb",[tq]:"fire-data-connect",[nq]:"fire-rtdb-compat",[rq]:"fire-fn",[sq]:"fire-fn-compat",[iq]:"fire-iid",[aq]:"fire-iid-compat",[oq]:"fire-fcm",[lq]:"fire-fcm-compat",[cq]:"fire-perf",[uq]:"fire-perf-compat",[dq]:"fire-rc",[hq]:"fire-rc-compat",[fq]:"fire-gcs",[mq]:"fire-gcs-compat",[pq]:"fire-fst",[vq]:"fire-fst-compat",[gq]:"fire-vertex","fire-js":"fire-js",[yq]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=new Map,bq=new Map,H1=new Map;function bT(t,e){try{t.container.addComponent(e)}catch(n){Mo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vu(t){const e=t.name;if(H1.has(e))return Mo.debug(`There were multiple attempts to register component ${e}.`),!1;H1.set(e,t);for(const n of Ix.values())bT(n,t);for(const n of bq.values())bT(n,t);return!0}function H0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _q={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gl=new Ng("app","Firebase",_q);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ec("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=xq;function zM(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:W1,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Gl.create("bad-app-name",{appName:String(s)});if(n||(n=DM()),!n)throw Gl.create("no-options");const a=Ix.get(s);if(a){if(kx(n,a.options)&&kx(r,a.config))return a;throw Gl.create("duplicate-app",{appName:s})}const o=new TH(s);for(const u of H1.values())o.addComponent(u);const l=new jq(n,r,o);return Ix.set(s,l),l}function US(t=W1){const e=Ix.get(t);if(!e&&t===W1&&DM())return zM();if(!e)throw Gl.create("no-app",{appName:t});return e}function Da(t,e,n){var r;let s=(r=wq[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mo.warn(l.join(" "));return}vu(new ec(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq="firebase-heartbeat-database",Sq=1,pp="firebase-heartbeat-store";let Bb=null;function UM(){return Bb||(Bb=UH(Nq,Sq,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pp)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gl.create("idb-open",{originalErrorMessage:t.message})})),Bb}async function Eq(t){try{const n=(await UM()).transaction(pp),r=await n.objectStore(pp).get(BM(t));return await n.done,r}catch(e){if(e instanceof Qa)Mo.warn(e.message);else{const n=Gl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mo.warn(n.message)}}}async function _T(t,e){try{const r=(await UM()).transaction(pp,"readwrite");await r.objectStore(pp).put(e,BM(t)),await r.done}catch(n){if(n instanceof Qa)Mo.warn(n.message);else{const r=Gl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mo.warn(r.message)}}}function BM(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pq=1024,Cq=30*24*60*60*1e3;class Tq{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kq(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=jT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Cq}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Mo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jT(),{heartbeatsToSend:r,unsentEntries:s}=Rq(this._heartbeatsCache.heartbeats),a=Rx(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Mo.warn(n),""}}}function jT(){return new Date().toISOString().substring(0,10)}function Rq(t,e=Pq){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),NT(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),NT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kq{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vH()?yH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Eq(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _T(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _T(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function NT(t){return Rx(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iq(t){vu(new ec("platform-logger",e=>new HH(e),"PRIVATE")),vu(new ec("heartbeat",e=>new Tq(e),"PRIVATE")),Da(B1,wT,t),Da(B1,wT,"esm2017"),Da("fire-js","")}Iq("");var Ea=function(){return Ea=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ea.apply(this,arguments)};function Eg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Aq(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function WM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Oq=WM,HM=new Ng("auth","Firebase",WM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new VS("@firebase/auth");function Mq(t,...e){Ax.logLevel<=Dt.WARN&&Ax.warn(`Auth (${Fu}): ${t}`,...e)}function Dy(t,...e){Ax.logLevel<=Dt.ERROR&&Ax.error(`Auth (${Fu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,...e){throw WS(t,...e)}function La(t,...e){return WS(t,...e)}function BS(t,e,n){const r=Object.assign(Object.assign({},Oq()),{[e]:n});return new Ng("auth","Firebase",r).create(e,{appName:t.name})}function Ji(t){return BS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dq(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ti(t,"argument-error"),BS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function WS(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return HM.create(t,...e)}function dt(t,e,...n){if(!t)throw WS(e,...n)}function No(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dy(e),new Error(e)}function Do(t,e){t||No(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Lq(){return ST()==="http:"||ST()==="https:"}function ST(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lq()||fH()||"connection"in navigator)?navigator.onLine:!0}function $q(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n){this.shortDelay=e,this.longDelay=n,Do(n>e,"Short delay should be less than long delay!"),this.isMobile=uH()||mH()}get(){return Fq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t,e){Do(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;No("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;No("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;No("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq=new Pg(3e4,6e4);function Yo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ca(t,e,n,r,s={}){return GM(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=Sg(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return hH()||(d.referrerPolicy="no-referrer"),qM.fetch()(KM(t,t.config.apiHost,n,l),d)})}async function GM(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Vq),e);try{const s=new Bq(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Jv(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jv(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Jv(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Jv(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw BS(t,h,d);Ti(t,h)}}catch(s){if(s instanceof Qa)throw s;Ti(t,"network-request-failed",{message:String(s)})}}async function Cg(t,e,n,r,s={}){const a=await ca(t,e,n,r,s);return"mfaPendingCredential"in a&&Ti(t,"multi-factor-auth-required",{_serverResponse:a}),a}function KM(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?HS(t.config,s):`${t.config.apiScheme}://${s}`}function Uq(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Bq{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(La(this.auth,"network-request-failed")),zq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jv(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=La(t,e,r);return s.customData._tokenResponse=n,s}function ET(t){return t!==void 0&&t.enterprise!==void 0}class Wq{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Uq(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Hq(t,e){return ca(t,"GET","/v2/recaptchaConfig",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qq(t,e){return ca(t,"POST","/v1/accounts:delete",e)}async function ZM(t,e){return ca(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gq(t,e=!1){const n=Gt(t),r=await n.getIdToken(e),s=qS(r);dt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:$m(Wb(s.auth_time)),issuedAtTime:$m(Wb(s.iat)),expirationTime:$m(Wb(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Wb(t){return Number(t)*1e3}function qS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dy("JWT malformed, contained fewer than 3 sections"),null;try{const s=AM(n);return s?JSON.parse(s):(Dy("Failed to decode base64 JWT payload"),null)}catch(s){return Dy("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function PT(t){const e=qS(t);return dt(e,"internal-error"),dt(typeof e.exp<"u","internal-error"),dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Qa&&Kq(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Kq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$m(this.lastLoginAt),this.creationTime=$m(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(t){var e;const n=t.auth,r=await t.getIdToken(),s=await yu(t,ZM(n,{idToken:r}));dt(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?QM(a.providerUserInfo):[],l=Qq(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new G1(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function vm(t){const e=Gt(t);await Ox(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qq(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function QM(t){return t.map(e=>{var{providerId:n}=e,r=Eg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yq(t,e){const n=await GM(t,{},async()=>{const r=Sg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=KM(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",qM.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Jq(t,e){return ca(t,"POST","/v2/accounts:revokeToken",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){dt(e.idToken,"internal-error"),dt(typeof e.idToken<"u","internal-error"),dt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){dt(e.length!==0,"internal-error");const n=PT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await Yq(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new eh;return r&&(dt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(dt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(dt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eh,this.toJSON())}_performRefresh(){return No("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t,e){dt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class So{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=Eg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new G1(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await yu(this,this.stsTokenManager.getToken(this.auth,e));return dt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Gq(this,e)}reload(){return vm(this)}_assign(e){this!==e&&(dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new So(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ox(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wi(this.auth.app))return Promise.reject(Ji(this.auth));const e=await this.getIdToken();return await yu(this,qq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,o,l,u,d,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,y=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,j=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(l=n.tenantId)!==null&&l!==void 0?l:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:C,isAnonymous:R,providerData:z,stsTokenManager:k}=n;dt(S&&k,e,"internal-error");const I=eh.fromJSON(this.name,k);dt(typeof S=="string",e,"internal-error"),ul(m,e.name),ul(p,e.name),dt(typeof C=="boolean",e,"internal-error"),dt(typeof R=="boolean",e,"internal-error"),ul(y,e.name),ul(j,e.name),ul(_,e.name),ul(N,e.name),ul(b,e.name),ul(x,e.name);const V=new So({uid:S,auth:e,email:p,emailVerified:C,displayName:m,isAnonymous:R,photoURL:j,phoneNumber:y,tenantId:_,stsTokenManager:I,createdAt:b,lastLoginAt:x});return z&&Array.isArray(z)&&(V.providerData=z.map(T=>Object.assign({},T))),N&&(V._redirectEventId=N),V}static async _fromIdTokenResponse(e,n,r=!1){const s=new eh;s.updateFromServerResponse(n);const a=new So({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ox(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];dt(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?QM(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new eh;l.updateFromIdToken(r);const u=new So({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new G1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new Map;function Eo(t){Do(t instanceof Function,"Expected a class definition");let e=CT.get(t);return e?(Do(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,CT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}YM.type="NONE";const TT=YM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t,e,n){return`firebase:${t}:${e}:${n}`}class th{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Ly(this.userKey,s.apiKey,a),this.fullPersistenceKey=Ly("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?So._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new th(Eo(TT),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||Eo(TT);const o=Ly(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){const m=So._fromJSON(e,h);d!==a&&(l=m),a=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new th(a,e,r):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new th(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rD(e))return"Blackberry";if(sD(e))return"Webos";if(XM(e))return"Safari";if((e.includes("chrome/")||eD(e))&&!e.includes("edge/"))return"Chrome";if(nD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function JM(t=rs()){return/firefox\//i.test(t)}function XM(t=rs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eD(t=rs()){return/crios\//i.test(t)}function tD(t=rs()){return/iemobile/i.test(t)}function nD(t=rs()){return/android/i.test(t)}function rD(t=rs()){return/blackberry/i.test(t)}function sD(t=rs()){return/webos/i.test(t)}function GS(t=rs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Xq(t=rs()){var e;return GS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eG(){return pH()&&document.documentMode===10}function iD(t=rs()){return GS(t)||nD(t)||sD(t)||rD(t)||/windows phone/i.test(t)||tD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t,e=[]){let n;switch(t){case"Browser":n=RT(rs());break;case"Worker":n=`${RT(rs())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nG(t,e={}){return ca(t,"GET","/v2/passwordPolicy",Yo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rG=6;class sG{constructor(e){var n,r,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:rG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kT(this),this.idTokenSubscription=new kT(this),this.beforeStateQueue=new tG(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Eo(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await th.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ZM(this,{idToken:e}),r=await So._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(wi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ox(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$q()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wi(this.app))return Promise.reject(Ji(this));const n=e?Gt(e):null;return n&&dt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wi(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wi(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Eo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nG(this),n=new sG(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ng("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Jq(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Eo(e)||this._popupRedirectResolver;dt(n,this,"argument-error"),this.redirectPersistenceManager=await th.create(this,[Eo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(dt(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Mq(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Jo(t){return Gt(t)}class kT{constructor(e){this.auth=e,this.observer=null,this.addObserver=jH(n=>this.observer=n)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aG(t){q0=t}function oD(t){return q0.loadJS(t)}function oG(){return q0.recaptchaEnterpriseScript}function lG(){return q0.gapiScript}function cG(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const uG="recaptcha-enterprise",dG="NO_RECAPTCHA";class hG{constructor(e){this.type=uG,this.auth=Jo(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{Hq(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new Wq(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(a,o,l){const u=window.grecaptcha;ET(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(dG)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&ET(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=oG();u.length!==0&&(u+=l),oD(u).then(()=>{s(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function IT(t,e,n,r=!1){const s=new hG(t);let a;try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function K1(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await IT(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await IT(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fG(t,e){const n=H0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(kx(a,e??{}))return s;Ti(s,"already-initialized")}return n.initialize({options:e})}function mG(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Eo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pG(t,e,n){const r=Jo(t);dt(r._canInitEmulator,r,"emulator-config-failed"),dt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=lD(e),{host:o,port:l}=gG(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),vG()}function lD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gG(t){const e=lD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:AT(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:AT(o)}}}function AT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vG(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return No("not implemented")}_getIdTokenResponse(e){return No("not implemented")}_linkToIdToken(e,n){return No("not implemented")}_getReauthenticationResolver(e){return No("not implemented")}}async function yG(t,e){return ca(t,"POST","/v1/accounts:update",e)}async function xG(t,e){return ca(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wG(t,e){return Cg(t,"POST","/v1/accounts:signInWithPassword",Yo(t,e))}async function bG(t,e){return ca(t,"POST","/v1/accounts:sendOobCode",Yo(t,e))}async function _G(t,e){return bG(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jG(t,e){return Cg(t,"POST","/v1/accounts:signInWithEmailLink",Yo(t,e))}async function NG(t,e){return Cg(t,"POST","/v1/accounts:signInWithEmailLink",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp extends KS{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new gp(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gp(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return K1(e,n,"signInWithPassword",wG);case"emailLink":return jG(e,{email:this._email,oobCode:this._password});default:Ti(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return K1(e,r,"signUpPassword",xG);case"emailLink":return NG(e,{idToken:n,email:this._email,oobCode:this._password});default:Ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nh(t,e){return Cg(t,"POST","/v1/accounts:signInWithIdp",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SG="http://localhost";class xu extends KS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=Eg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new xu(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return nh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,nh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,nh(e,n)}buildRequest(){const e={requestUri:SG,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Sg(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EG(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PG(t){const e=pm(gm(t)).link,n=e?pm(gm(e)).deep_link_id:null,r=pm(gm(t)).deep_link_id;return(r?pm(gm(r)).link:null)||r||n||e||t}class ZS{constructor(e){var n,r,s,a,o,l;const u=pm(gm(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,m=EG((s=u.mode)!==null&&s!==void 0?s:null);dt(d&&h&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=PG(e);try{return new ZS(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(){this.providerId=tc.PROVIDER_ID}static credential(e,n){return gp._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ZS.parseLink(n);return dt(r,"argument-error"),gp._fromEmailAndCode(e,r.code,r.tenantId)}}tc.PROVIDER_ID="password";tc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends QS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends Tg{constructor(){super("facebook.com")}static credential(e){return xu._fromParams({providerId:Sl.PROVIDER_ID,signInMethod:Sl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sl.credentialFromTaggedObject(e)}static credentialFromError(e){return Sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sl.credential(e.oauthAccessToken)}catch{return null}}}Sl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends Tg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xu._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bo.credential(n,r)}catch{return null}}}bo.GOOGLE_SIGN_IN_METHOD="google.com";bo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Tg{constructor(){super("github.com")}static credential(e){return xu._fromParams({providerId:El.PROVIDER_ID,signInMethod:El.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return El.credentialFromTaggedObject(e)}static credentialFromError(e){return El.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return El.credential(e.oauthAccessToken)}catch{return null}}}El.GITHUB_SIGN_IN_METHOD="github.com";El.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends Tg{constructor(){super("twitter.com")}static credential(e,n){return xu._fromParams({providerId:Pl.PROVIDER_ID,signInMethod:Pl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pl.credentialFromTaggedObject(e)}static credentialFromError(e){return Pl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pl.credential(n,r)}catch{return null}}}Pl.TWITTER_SIGN_IN_METHOD="twitter.com";Pl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CG(t,e){return Cg(t,"POST","/v1/accounts:signUp",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await So._fromIdTokenResponse(e,r,s),o=OT(r);return new wu({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=OT(r);return new wu({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function OT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx extends Qa{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Mx.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Mx(e,n,r,s)}}function cD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Mx._fromErrorAndOperation(t,a,e,r):a})}async function TG(t,e,n=!1){const r=await yu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t,e,n=!1){const{auth:r}=t;if(wi(r.app))return Promise.reject(Ji(r));const s="reauthenticate";try{const a=await yu(t,cD(r,s,e,t),n);dt(a.idToken,r,"internal-error");const o=qS(a.idToken);dt(o,r,"internal-error");const{sub:l}=o;return dt(t.uid===l,r,"user-mismatch"),wu._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ti(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t,e,n=!1){if(wi(t.app))return Promise.reject(Ji(t));const r="signIn",s=await cD(t,r,e),a=await wu._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function RG(t,e){return dD(Jo(t),e)}async function MT(t,e){return uD(Gt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kG(t,e,n){var r;dt(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),dt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(dt(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(dt(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(t){const e=Jo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fD(t,e,n){if(wi(t.app))return Promise.reject(Ji(t));const r=Jo(t),o=await K1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CG).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&hD(t),u}),l=await wu._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function IG(t,e,n){return wi(t.app)?Promise.reject(Ji(t)):RG(Gt(t),tc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hD(t),r})}async function Hb(t,e){const n=Gt(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&kG(n.auth,s,e);const{email:a}=await _G(n.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AG(t,e){return ca(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vp(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Gt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await yu(r,AG(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function OG(t,e){const n=Gt(t);return wi(n.auth.app)?Promise.reject(Ji(n.auth)):mD(n,e,null)}function MG(t,e){return mD(Gt(t),null,e)}async function mD(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const o=await yu(t,yG(r,a));await t._updateTokensIfNecessary(o,!0)}function DG(t,e,n,r){return Gt(t).onIdTokenChanged(e,n,r)}function LG(t,e,n){return Gt(t).beforeAuthStateChanged(e,n)}function FG(t,e,n,r){return Gt(t).onAuthStateChanged(e,n,r)}function $G(t){return Gt(t).signOut()}async function VG(t){return Gt(t).delete()}const Dx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dx,"1"),this.storage.removeItem(Dx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zG=1e3,UG=10;class gD extends pD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);eG()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UG):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gD.type="LOCAL";const BG=gD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD extends pD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vD.type="SESSION";const yD=vD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WG(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new G0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,a)),u=await WG(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}G0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const d=YS("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(p.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(){return window}function qG(t){Fa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(){return typeof Fa().WorkerGlobalScope<"u"&&typeof Fa().importScripts=="function"}async function GG(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KG(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ZG(){return xD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="firebaseLocalStorageDb",QG=1,Lx="firebaseLocalStorage",bD="fbase_key";class Rg{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function K0(t,e){return t.transaction([Lx],e?"readwrite":"readonly").objectStore(Lx)}function YG(){const t=indexedDB.deleteDatabase(wD);return new Rg(t).toPromise()}function Z1(){const t=indexedDB.open(wD,QG);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lx,{keyPath:bD})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lx)?e(r):(r.close(),await YG(),e(await Z1()))})})}async function DT(t,e,n){const r=K0(t,!0).put({[bD]:e,value:n});return new Rg(r).toPromise()}async function JG(t,e){const n=K0(t,!1).get(e),r=await new Rg(n).toPromise();return r===void 0?null:r.value}function LT(t,e){const n=K0(t,!0).delete(e);return new Rg(n).toPromise()}const XG=800,eK=3;class _D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Z1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>eK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=G0._getInstance(ZG()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await GG(),!this.activeServiceWorker)return;this.sender=new HG(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Z1();return await DT(e,Dx,"1"),await LT(e,Dx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>DT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>JG(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>LT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=K0(s,!1).getAll();return new Rg(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_D.type="LOCAL";const tK=_D;new Pg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e){return e?Eo(e):(dt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends KS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nK(t){return dD(t.auth,new JS(t),t.bypassAuthState)}function rK(t){const{auth:e,user:n}=t;return dt(n,e,"internal-error"),uD(n,new JS(t),t.bypassAuthState)}async function sK(t){const{auth:e,user:n}=t;return dt(n,e,"internal-error"),TG(n,new JS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nK;case"linkViaPopup":case"linkViaRedirect":return sK;case"reauthViaPopup":case"reauthViaRedirect":return rK;default:Ti(this.auth,"internal-error")}}resolve(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iK=new Pg(2e3,1e4);class Hd extends ND{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Hd.currentPopupAction&&Hd.currentPopupAction.cancel(),Hd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return dt(e,this.auth,"internal-error"),e}async onExecution(){Do(this.filter.length===1,"Popup operations only handle one event");const e=YS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(La(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(La(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(La(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iK.get())};e()}}Hd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK="pendingRedirect",Fy=new Map;class oK extends ND{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fy.get(this.auth._key());if(!e){try{const r=await lK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fy.set(this.auth._key(),e)}return this.bypassAuthState||Fy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lK(t,e){const n=ED(e),r=SD(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function cK(t,e){return SD(t)._set(ED(e),"true")}function uK(t,e){Fy.set(t._key(),e)}function SD(t){return Eo(t._redirectPersistence)}function ED(t){return Ly(aK,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dK(t,e,n){return hK(t,e,n)}async function hK(t,e,n){if(wi(t.app))return Promise.reject(Ji(t));const r=Jo(t);Dq(t,e,QS),await r._initializationPromise;const s=jD(r,n);return await cK(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function fK(t,e){return await Jo(t)._initializationPromise,PD(t,e,!1)}async function PD(t,e,n=!1){if(wi(t.app))return Promise.reject(Ji(t));const r=Jo(t),s=jD(r,e),o=await new oK(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK=10*60*1e3;class pK{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gK(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!CD(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(La(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mK&&this.cachedEventUids.clear(),this.cachedEventUids.has(FT(e))}saveEventToCache(e){this.cachedEventUids.add(FT(e)),this.lastProcessedEventTime=Date.now()}}function FT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vK(t,e={}){return ca(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xK=/^https?/;async function wK(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vK(t);for(const n of e)try{if(bK(n))return}catch{}Ti(t,"unauthorized-domain")}function bK(t){const e=q1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xK.test(n))return!1;if(yK.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _K=new Pg(3e4,6e4);function $T(){const t=Fa().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jK(t){return new Promise((e,n)=>{var r,s,a;function o(){$T(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$T(),n(La(t,"network-request-failed"))},timeout:_K.get()})}if(!((s=(r=Fa().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Fa().gapi)===null||a===void 0)&&a.load)o();else{const l=cG("iframefcb");return Fa()[l]=()=>{gapi.load?o():n(La(t,"network-request-failed"))},oD(`${lG()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw $y=null,e})}let $y=null;function NK(t){return $y=$y||jK(t),$y}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SK=new Pg(5e3,15e3),EK="__/auth/iframe",PK="emulator/auth/iframe",CK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RK(t){const e=t.config;dt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?HS(e,PK):`https://${t.config.authDomain}/${EK}`,r={apiKey:e.apiKey,appName:t.name,v:Fu},s=TK.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Sg(r).slice(1)}`}async function kK(t){const e=await NK(t),n=Fa().gapi;return dt(n,t,"internal-error"),e.open({where:document.body,url:RK(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CK,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=La(t,"network-request-failed"),l=Fa().setTimeout(()=>{a(o)},SK.get());function u(){Fa().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AK=500,OK=600,MK="_blank",DK="http://localhost";class VT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LK(t,e,n,r=AK,s=OK){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},IK),{width:r.toString(),height:s.toString(),top:a,left:o}),d=rs().toLowerCase();n&&(l=eD(d)?MK:n),JM(d)&&(e=e||DK,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[y,j])=>`${p}${y}=${j},`,"");if(Xq(d)&&l!=="_self")return FK(e||"",l),new VT(null);const m=window.open(e||"",l,h);dt(m,t,"popup-blocked");try{m.focus()}catch{}return new VT(m)}function FK(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $K="__/auth/handler",VK="emulator/auth/handler",zK=encodeURIComponent("fac");async function zT(t,e,n,r,s,a){dt(t.config.authDomain,t,"auth-domain-config-required"),dt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fu,eventId:s};if(e instanceof QS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_H(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof Tg){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${zK}=${encodeURIComponent(u)}`:"";return`${UK(t)}?${Sg(l).slice(1)}${d}`}function UK({config:t}){return t.emulator?HS(t,VK):`https://${t.authDomain}/${$K}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="webStorageSupport";class BK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yD,this._completeRedirectFn=PD,this._overrideRedirectResult=uK}async _openPopup(e,n,r,s){var a;Do((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await zT(e,n,r,q1(),s);return LK(e,o,YS())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await zT(e,n,r,q1(),s);return qG(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Do(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await kK(e),r=new pK(e);return n.register("authEvent",s=>(dt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qb,{type:qb},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[qb];o!==void 0&&n(!!o),Ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wK(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iD()||XM()||GS()}}const WK=BK;var UT="@firebase/auth",BT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GK(t){vu(new ec("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;dt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aD(t)},d=new iG(r,s,a,u);return mG(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vu(new ec("auth-internal",e=>{const n=Jo(e.getProvider("auth").getImmediate());return(r=>new HK(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Da(UT,BT,qK(t)),Da(UT,BT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK=5*60,ZK=LM("authIdTokenMaxAge")||KK;let WT=null;const QK=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ZK)return;const s=n==null?void 0:n.token;WT!==s&&(WT=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function YK(t=US()){const e=H0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fG(t,{popupRedirectResolver:WK,persistence:[tK,BG,yD]}),r=LM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=QK(a.toString());LG(n,o,()=>o(n.currentUser)),DG(n,l=>o(l))}}const s=OM("auth");return s&&pG(n,`http://${s}`),n}function JK(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aG({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=La("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",JK().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GK("Browser");var HT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ru,TD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function V(){}V.prototype=I.prototype,k.D=I.prototype,k.prototype=new V,k.prototype.constructor=k,k.C=function(T,O,$){for(var M=Array(arguments.length-2),B=2;B<arguments.length;B++)M[B-2]=arguments[B];return I.prototype[O].apply(T,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,I,V){V||(V=0);var T=Array(16);if(typeof I=="string")for(var O=0;16>O;++O)T[O]=I.charCodeAt(V++)|I.charCodeAt(V++)<<8|I.charCodeAt(V++)<<16|I.charCodeAt(V++)<<24;else for(O=0;16>O;++O)T[O]=I[V++]|I[V++]<<8|I[V++]<<16|I[V++]<<24;I=k.g[0],V=k.g[1],O=k.g[2];var $=k.g[3],M=I+($^V&(O^$))+T[0]+3614090360&4294967295;I=V+(M<<7&4294967295|M>>>25),M=$+(O^I&(V^O))+T[1]+3905402710&4294967295,$=I+(M<<12&4294967295|M>>>20),M=O+(V^$&(I^V))+T[2]+606105819&4294967295,O=$+(M<<17&4294967295|M>>>15),M=V+(I^O&($^I))+T[3]+3250441966&4294967295,V=O+(M<<22&4294967295|M>>>10),M=I+($^V&(O^$))+T[4]+4118548399&4294967295,I=V+(M<<7&4294967295|M>>>25),M=$+(O^I&(V^O))+T[5]+1200080426&4294967295,$=I+(M<<12&4294967295|M>>>20),M=O+(V^$&(I^V))+T[6]+2821735955&4294967295,O=$+(M<<17&4294967295|M>>>15),M=V+(I^O&($^I))+T[7]+4249261313&4294967295,V=O+(M<<22&4294967295|M>>>10),M=I+($^V&(O^$))+T[8]+1770035416&4294967295,I=V+(M<<7&4294967295|M>>>25),M=$+(O^I&(V^O))+T[9]+2336552879&4294967295,$=I+(M<<12&4294967295|M>>>20),M=O+(V^$&(I^V))+T[10]+4294925233&4294967295,O=$+(M<<17&4294967295|M>>>15),M=V+(I^O&($^I))+T[11]+2304563134&4294967295,V=O+(M<<22&4294967295|M>>>10),M=I+($^V&(O^$))+T[12]+1804603682&4294967295,I=V+(M<<7&4294967295|M>>>25),M=$+(O^I&(V^O))+T[13]+4254626195&4294967295,$=I+(M<<12&4294967295|M>>>20),M=O+(V^$&(I^V))+T[14]+2792965006&4294967295,O=$+(M<<17&4294967295|M>>>15),M=V+(I^O&($^I))+T[15]+1236535329&4294967295,V=O+(M<<22&4294967295|M>>>10),M=I+(O^$&(V^O))+T[1]+4129170786&4294967295,I=V+(M<<5&4294967295|M>>>27),M=$+(V^O&(I^V))+T[6]+3225465664&4294967295,$=I+(M<<9&4294967295|M>>>23),M=O+(I^V&($^I))+T[11]+643717713&4294967295,O=$+(M<<14&4294967295|M>>>18),M=V+($^I&(O^$))+T[0]+3921069994&4294967295,V=O+(M<<20&4294967295|M>>>12),M=I+(O^$&(V^O))+T[5]+3593408605&4294967295,I=V+(M<<5&4294967295|M>>>27),M=$+(V^O&(I^V))+T[10]+38016083&4294967295,$=I+(M<<9&4294967295|M>>>23),M=O+(I^V&($^I))+T[15]+3634488961&4294967295,O=$+(M<<14&4294967295|M>>>18),M=V+($^I&(O^$))+T[4]+3889429448&4294967295,V=O+(M<<20&4294967295|M>>>12),M=I+(O^$&(V^O))+T[9]+568446438&4294967295,I=V+(M<<5&4294967295|M>>>27),M=$+(V^O&(I^V))+T[14]+3275163606&4294967295,$=I+(M<<9&4294967295|M>>>23),M=O+(I^V&($^I))+T[3]+4107603335&4294967295,O=$+(M<<14&4294967295|M>>>18),M=V+($^I&(O^$))+T[8]+1163531501&4294967295,V=O+(M<<20&4294967295|M>>>12),M=I+(O^$&(V^O))+T[13]+2850285829&4294967295,I=V+(M<<5&4294967295|M>>>27),M=$+(V^O&(I^V))+T[2]+4243563512&4294967295,$=I+(M<<9&4294967295|M>>>23),M=O+(I^V&($^I))+T[7]+1735328473&4294967295,O=$+(M<<14&4294967295|M>>>18),M=V+($^I&(O^$))+T[12]+2368359562&4294967295,V=O+(M<<20&4294967295|M>>>12),M=I+(V^O^$)+T[5]+4294588738&4294967295,I=V+(M<<4&4294967295|M>>>28),M=$+(I^V^O)+T[8]+2272392833&4294967295,$=I+(M<<11&4294967295|M>>>21),M=O+($^I^V)+T[11]+1839030562&4294967295,O=$+(M<<16&4294967295|M>>>16),M=V+(O^$^I)+T[14]+4259657740&4294967295,V=O+(M<<23&4294967295|M>>>9),M=I+(V^O^$)+T[1]+2763975236&4294967295,I=V+(M<<4&4294967295|M>>>28),M=$+(I^V^O)+T[4]+1272893353&4294967295,$=I+(M<<11&4294967295|M>>>21),M=O+($^I^V)+T[7]+4139469664&4294967295,O=$+(M<<16&4294967295|M>>>16),M=V+(O^$^I)+T[10]+3200236656&4294967295,V=O+(M<<23&4294967295|M>>>9),M=I+(V^O^$)+T[13]+681279174&4294967295,I=V+(M<<4&4294967295|M>>>28),M=$+(I^V^O)+T[0]+3936430074&4294967295,$=I+(M<<11&4294967295|M>>>21),M=O+($^I^V)+T[3]+3572445317&4294967295,O=$+(M<<16&4294967295|M>>>16),M=V+(O^$^I)+T[6]+76029189&4294967295,V=O+(M<<23&4294967295|M>>>9),M=I+(V^O^$)+T[9]+3654602809&4294967295,I=V+(M<<4&4294967295|M>>>28),M=$+(I^V^O)+T[12]+3873151461&4294967295,$=I+(M<<11&4294967295|M>>>21),M=O+($^I^V)+T[15]+530742520&4294967295,O=$+(M<<16&4294967295|M>>>16),M=V+(O^$^I)+T[2]+3299628645&4294967295,V=O+(M<<23&4294967295|M>>>9),M=I+(O^(V|~$))+T[0]+4096336452&4294967295,I=V+(M<<6&4294967295|M>>>26),M=$+(V^(I|~O))+T[7]+1126891415&4294967295,$=I+(M<<10&4294967295|M>>>22),M=O+(I^($|~V))+T[14]+2878612391&4294967295,O=$+(M<<15&4294967295|M>>>17),M=V+($^(O|~I))+T[5]+4237533241&4294967295,V=O+(M<<21&4294967295|M>>>11),M=I+(O^(V|~$))+T[12]+1700485571&4294967295,I=V+(M<<6&4294967295|M>>>26),M=$+(V^(I|~O))+T[3]+2399980690&4294967295,$=I+(M<<10&4294967295|M>>>22),M=O+(I^($|~V))+T[10]+4293915773&4294967295,O=$+(M<<15&4294967295|M>>>17),M=V+($^(O|~I))+T[1]+2240044497&4294967295,V=O+(M<<21&4294967295|M>>>11),M=I+(O^(V|~$))+T[8]+1873313359&4294967295,I=V+(M<<6&4294967295|M>>>26),M=$+(V^(I|~O))+T[15]+4264355552&4294967295,$=I+(M<<10&4294967295|M>>>22),M=O+(I^($|~V))+T[6]+2734768916&4294967295,O=$+(M<<15&4294967295|M>>>17),M=V+($^(O|~I))+T[13]+1309151649&4294967295,V=O+(M<<21&4294967295|M>>>11),M=I+(O^(V|~$))+T[4]+4149444226&4294967295,I=V+(M<<6&4294967295|M>>>26),M=$+(V^(I|~O))+T[11]+3174756917&4294967295,$=I+(M<<10&4294967295|M>>>22),M=O+(I^($|~V))+T[2]+718787259&4294967295,O=$+(M<<15&4294967295|M>>>17),M=V+($^(O|~I))+T[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(O+(M<<21&4294967295|M>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+$&4294967295}r.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var V=I-this.blockSize,T=this.B,O=this.h,$=0;$<I;){if(O==0)for(;$<=V;)s(this,k,$),$+=this.blockSize;if(typeof k=="string"){for(;$<I;)if(T[O++]=k.charCodeAt($++),O==this.blockSize){s(this,T),O=0;break}}else for(;$<I;)if(T[O++]=k[$++],O==this.blockSize){s(this,T),O=0;break}}this.h=O,this.o+=I},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var V=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=V&255,V/=256;for(this.u(k),k=Array(16),I=V=0;4>I;++I)for(var T=0;32>T;T+=8)k[V++]=this.g[I]>>>T&255;return k};function a(k,I){var V=l;return Object.prototype.hasOwnProperty.call(V,k)?V[k]:V[k]=I(k)}function o(k,I){this.h=I;for(var V=[],T=!0,O=k.length-1;0<=O;O--){var $=k[O]|0;T&&$==I||(V[O]=$,T=!1)}this.g=V}var l={};function u(k){return-128<=k&&128>k?a(k,function(I){return new o([I|0],0>I?-1:0)}):new o([k|0],0>k?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return N(d(-k));for(var I=[],V=1,T=0;k>=V;T++)I[T]=k/V|0,V*=4294967296;return new o(I,0)}function h(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return N(h(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=d(Math.pow(I,8)),T=m,O=0;O<k.length;O+=8){var $=Math.min(8,k.length-O),M=parseInt(k.substring(O,O+$),I);8>$?($=d(Math.pow(I,$)),T=T.j($).add(d(M))):(T=T.j(V),T=T.add(d(M)))}return T}var m=u(0),p=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(_(this))return-N(this).m();for(var k=0,I=1,V=0;V<this.g.length;V++){var T=this.i(V);k+=(0<=T?T:4294967296+T)*I,I*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(j(this))return"0";if(_(this))return"-"+N(this).toString(k);for(var I=d(Math.pow(k,6)),V=this,T="";;){var O=C(V,I).g;V=b(V,O.j(I));var $=((0<V.g.length?V.g[0]:V.h)>>>0).toString(k);if(V=O,j(V))return $+T;for(;6>$.length;)$="0"+$;T=$+T}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function j(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function _(k){return k.h==-1}t.l=function(k){return k=b(this,k),_(k)?-1:j(k)?0:1};function N(k){for(var I=k.g.length,V=[],T=0;T<I;T++)V[T]=~k.g[T];return new o(V,~k.h).add(p)}t.abs=function(){return _(this)?N(this):this},t.add=function(k){for(var I=Math.max(this.g.length,k.g.length),V=[],T=0,O=0;O<=I;O++){var $=T+(this.i(O)&65535)+(k.i(O)&65535),M=($>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);T=M>>>16,$&=65535,M&=65535,V[O]=M<<16|$}return new o(V,V[V.length-1]&-2147483648?-1:0)};function b(k,I){return k.add(N(I))}t.j=function(k){if(j(this)||j(k))return m;if(_(this))return _(k)?N(this).j(N(k)):N(N(this).j(k));if(_(k))return N(this.j(N(k)));if(0>this.l(y)&&0>k.l(y))return d(this.m()*k.m());for(var I=this.g.length+k.g.length,V=[],T=0;T<2*I;T++)V[T]=0;for(T=0;T<this.g.length;T++)for(var O=0;O<k.g.length;O++){var $=this.i(T)>>>16,M=this.i(T)&65535,B=k.i(O)>>>16,J=k.i(O)&65535;V[2*T+2*O]+=M*J,x(V,2*T+2*O),V[2*T+2*O+1]+=$*J,x(V,2*T+2*O+1),V[2*T+2*O+1]+=M*B,x(V,2*T+2*O+1),V[2*T+2*O+2]+=$*B,x(V,2*T+2*O+2)}for(T=0;T<I;T++)V[T]=V[2*T+1]<<16|V[2*T];for(T=I;T<2*I;T++)V[T]=0;return new o(V,0)};function x(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function S(k,I){this.g=k,this.h=I}function C(k,I){if(j(I))throw Error("division by zero");if(j(k))return new S(m,m);if(_(k))return I=C(N(k),I),new S(N(I.g),N(I.h));if(_(I))return I=C(k,N(I)),new S(N(I.g),I.h);if(30<k.g.length){if(_(k)||_(I))throw Error("slowDivide_ only works with positive integers.");for(var V=p,T=I;0>=T.l(k);)V=R(V),T=R(T);var O=z(V,1),$=z(T,1);for(T=z(T,2),V=z(V,2);!j(T);){var M=$.add(T);0>=M.l(k)&&(O=O.add(V),$=M),T=z(T,1),V=z(V,1)}return I=b(k,O.j(I)),new S(O,I)}for(O=m;0<=k.l(I);){for(V=Math.max(1,Math.floor(k.m()/I.m())),T=Math.ceil(Math.log(V)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),$=d(V),M=$.j(I);_(M)||0<M.l(k);)V-=T,$=d(V),M=$.j(I);j($)&&($=p),O=O.add($),k=b(k,M)}return new S(O,k)}t.A=function(k){return C(this,k).h},t.and=function(k){for(var I=Math.max(this.g.length,k.g.length),V=[],T=0;T<I;T++)V[T]=this.i(T)&k.i(T);return new o(V,this.h&k.h)},t.or=function(k){for(var I=Math.max(this.g.length,k.g.length),V=[],T=0;T<I;T++)V[T]=this.i(T)|k.i(T);return new o(V,this.h|k.h)},t.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),V=[],T=0;T<I;T++)V[T]=this.i(T)^k.i(T);return new o(V,this.h^k.h)};function R(k){for(var I=k.g.length+1,V=[],T=0;T<I;T++)V[T]=k.i(T)<<1|k.i(T-1)>>>31;return new o(V,k.h)}function z(k,I){var V=I>>5;I%=32;for(var T=k.g.length-V,O=[],$=0;$<T;$++)O[$]=0<I?k.i($+V)>>>I|k.i($+V+1)<<32-I:k.i($+V);return new o(O,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,TD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,ru=o}).apply(typeof HT<"u"?HT:typeof self<"u"?self:typeof window<"u"?window:{});var Xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RD,ym,kD,Vy,Q1,ID,AD,OD;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,P,F){return g==Array.prototype||g==Object.prototype||(g[P]=F.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xv=="object"&&Xv];for(var P=0;P<g.length;++P){var F=g[P];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function s(g,P){if(P)e:{var F=r;g=g.split(".");for(var W=0;W<g.length-1;W++){var le=g[W];if(!(le in F))break e;F=F[le]}g=g[g.length-1],W=F[g],P=P(W),P!=W&&P!=null&&e(F,g,{configurable:!0,writable:!0,value:P})}}function a(g,P){g instanceof String&&(g+="");var F=0,W=!1,le={next:function(){if(!W&&F<g.length){var me=F++;return{value:P(me,g[me]),done:!1}}return W=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}s("Array.prototype.values",function(g){return g||function(){return a(this,function(P,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(g){var P=typeof g;return P=P!="object"?P:g?Array.isArray(g)?"array":P:"null",P=="array"||P=="object"&&typeof g.length=="number"}function d(g){var P=typeof g;return P=="object"&&g!=null||P=="function"}function h(g,P,F){return g.call.apply(g.bind,arguments)}function m(g,P,F){if(!g)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,W),g.apply(P,le)}}return function(){return g.apply(P,arguments)}}function p(g,P,F){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,p.apply(null,arguments)}function y(g,P){var F=Array.prototype.slice.call(arguments,1);return function(){var W=F.slice();return W.push.apply(W,arguments),g.apply(this,W)}}function j(g,P){function F(){}F.prototype=P.prototype,g.aa=P.prototype,g.prototype=new F,g.prototype.constructor=g,g.Qb=function(W,le,me){for(var Fe=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)Fe[Qt-2]=arguments[Qt];return P.prototype[le].apply(W,Fe)}}function _(g){const P=g.length;if(0<P){const F=Array(P);for(let W=0;W<P;W++)F[W]=g[W];return F}return[]}function N(g,P){for(let F=1;F<arguments.length;F++){const W=arguments[F];if(u(W)){const le=g.length||0,me=W.length||0;g.length=le+me;for(let Fe=0;Fe<me;Fe++)g[le+Fe]=W[Fe]}else g.push(W)}}class b{constructor(P,F){this.i=P,this.j=F,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function x(g){return/^[\s\xa0]*$/.test(g)}function S(){var g=l.navigator;return g&&(g=g.userAgent)?g:""}function C(g){return C[" "](g),g}C[" "]=function(){};var R=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function z(g,P,F){for(const W in g)P.call(F,g[W],W,g)}function k(g,P){for(const F in g)P.call(void 0,g[F],F,g)}function I(g){const P={};for(const F in g)P[F]=g[F];return P}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(g,P){let F,W;for(let le=1;le<arguments.length;le++){W=arguments[le];for(F in W)g[F]=W[F];for(let me=0;me<V.length;me++)F=V[me],Object.prototype.hasOwnProperty.call(W,F)&&(g[F]=W[F])}}function O(g){var P=1;g=g.split(":");const F=[];for(;0<P&&g.length;)F.push(g.shift()),P--;return g.length&&F.push(g.join(":")),F}function $(g){l.setTimeout(()=>{throw g},0)}function M(){var g=G;let P=null;return g.g&&(P=g.g,g.g=g.g.next,g.g||(g.h=null),P.next=null),P}class B{constructor(){this.h=this.g=null}add(P,F){const W=J.get();W.set(P,F),this.h?this.h.next=W:this.g=W,this.h=W}}var J=new b(()=>new ee,g=>g.reset());class ee{constructor(){this.next=this.g=this.h=null}set(P,F){this.h=P,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let K,D=!1,G=new B,q=()=>{const g=l.Promise.resolve(void 0);K=()=>{g.then(X)}};var X=()=>{for(var g;g=M();){try{g.h.call(g.g)}catch(F){$(F)}var P=J;P.j(g),100>P.h&&(P.h++,g.next=P.g,P.g=g)}D=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(g,P){this.type=g,this.g=this.target=P,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,P=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const F=()=>{};l.addEventListener("test",F,P),l.removeEventListener("test",F,P)}catch{}return g}();function ze(g,P){if(Te.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var F=this.type=g.type,W=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=P,P=g.relatedTarget){if(R){e:{try{C(P.nodeName);var le=!0;break e}catch{}le=!1}le||(P=null)}}else F=="mouseover"?P=g.fromElement:F=="mouseout"&&(P=g.toElement);this.relatedTarget=P,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Le[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&ze.aa.h.call(this)}}j(ze,Te);var Le={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),ne=0;function ie(g,P,F,W,le){this.listener=g,this.proxy=null,this.src=P,this.type=F,this.capture=!!W,this.ha=le,this.key=++ne,this.da=this.fa=!1}function ae(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Z(g){this.src=g,this.g={},this.h=0}Z.prototype.add=function(g,P,F,W,le){var me=g.toString();g=this.g[me],g||(g=this.g[me]=[],this.h++);var Fe=ve(g,P,W,le);return-1<Fe?(P=g[Fe],F||(P.fa=!1)):(P=new ie(P,this.src,me,!!W,le),P.fa=F,g.push(P)),P};function ce(g,P){var F=P.type;if(F in g.g){var W=g.g[F],le=Array.prototype.indexOf.call(W,P,void 0),me;(me=0<=le)&&Array.prototype.splice.call(W,le,1),me&&(ae(P),g.g[F].length==0&&(delete g.g[F],g.h--))}}function ve(g,P,F,W){for(var le=0;le<g.length;++le){var me=g[le];if(!me.da&&me.listener==P&&me.capture==!!F&&me.ha==W)return le}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),be={};function re(g,P,F,W,le){if(Array.isArray(P)){for(var me=0;me<P.length;me++)re(g,P[me],F,W,le);return null}return F=we(F),g&&g[Ce]?g.K(P,F,d(W)?!!W.capture:!1,le):_e(g,P,F,!1,W,le)}function _e(g,P,F,W,le,me){if(!P)throw Error("Invalid event type");var Fe=d(le)?!!le.capture:!!le,Qt=je(g);if(Qt||(g[ke]=Qt=new Z(g)),F=Qt.add(P,F,W,Fe,me),F.proxy)return F;if(W=Ee(),F.proxy=W,W.src=g,W.listener=F,g.addEventListener)$e||(le=Fe),le===void 0&&(le=!1),g.addEventListener(P.toString(),W,le);else if(g.attachEvent)g.attachEvent(Y(P.toString()),W);else if(g.addListener&&g.removeListener)g.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return F}function Ee(){function g(F){return P.call(g.src,g.listener,F)}const P=se;return g}function de(g,P,F,W,le){if(Array.isArray(P))for(var me=0;me<P.length;me++)de(g,P[me],F,W,le);else W=d(W)?!!W.capture:!!W,F=we(F),g&&g[Ce]?(g=g.i,P=String(P).toString(),P in g.g&&(me=g.g[P],F=ve(me,F,W,le),-1<F&&(ae(me[F]),Array.prototype.splice.call(me,F,1),me.length==0&&(delete g.g[P],g.h--)))):g&&(g=je(g))&&(P=g.g[P.toString()],g=-1,P&&(g=ve(P,F,W,le)),(F=-1<g?P[g]:null)&&H(F))}function H(g){if(typeof g!="number"&&g&&!g.da){var P=g.src;if(P&&P[Ce])ce(P.i,g);else{var F=g.type,W=g.proxy;P.removeEventListener?P.removeEventListener(F,W,g.capture):P.detachEvent?P.detachEvent(Y(F),W):P.addListener&&P.removeListener&&P.removeListener(W),(F=je(P))?(ce(F,g),F.h==0&&(F.src=null,P[ke]=null)):ae(g)}}}function Y(g){return g in be?be[g]:be[g]="on"+g}function se(g,P){if(g.da)g=!0;else{P=new ze(P,this);var F=g.listener,W=g.ha||g.src;g.fa&&H(g),g=F.call(W,P)}return g}function je(g){return g=g[ke],g instanceof Z?g:null}var ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(g){return typeof g=="function"?g:(g[ye]||(g[ye]=function(P){return g.handleEvent(P)}),g[ye])}function Ie(){fe.call(this),this.i=new Z(this),this.M=this,this.F=null}j(Ie,fe),Ie.prototype[Ce]=!0,Ie.prototype.removeEventListener=function(g,P,F,W){de(this,g,P,F,W)};function Me(g,P){var F,W=g.F;if(W)for(F=[];W;W=W.F)F.push(W);if(g=g.M,W=P.type||P,typeof P=="string")P=new Te(P,g);else if(P instanceof Te)P.target=P.target||g;else{var le=P;P=new Te(W,g),T(P,le)}if(le=!0,F)for(var me=F.length-1;0<=me;me--){var Fe=P.g=F[me];le=qe(Fe,W,!0,P)&&le}if(Fe=P.g=g,le=qe(Fe,W,!0,P)&&le,le=qe(Fe,W,!1,P)&&le,F)for(me=0;me<F.length;me++)Fe=P.g=F[me],le=qe(Fe,W,!1,P)&&le}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var g=this.i,P;for(P in g.g){for(var F=g.g[P],W=0;W<F.length;W++)ae(F[W]);delete g.g[P],g.h--}}this.F=null},Ie.prototype.K=function(g,P,F,W){return this.i.add(String(g),P,!1,F,W)},Ie.prototype.L=function(g,P,F,W){return this.i.add(String(g),P,!0,F,W)};function qe(g,P,F,W){if(P=g.i.g[String(P)],!P)return!0;P=P.concat();for(var le=!0,me=0;me<P.length;++me){var Fe=P[me];if(Fe&&!Fe.da&&Fe.capture==F){var Qt=Fe.listener,tr=Fe.ha||Fe.src;Fe.fa&&ce(g.i,Fe),le=Qt.call(tr,W)!==!1&&le}}return le&&!W.defaultPrevented}function Tt(g,P,F){if(typeof g=="function")F&&(g=p(g,F));else if(g&&typeof g.handleEvent=="function")g=p(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:l.setTimeout(g,P||0)}function Lt(g){g.g=Tt(()=>{g.g=null,g.i&&(g.i=!1,Lt(g))},g.l);const P=g.h;g.h=null,g.m.apply(null,P)}class nn extends fe{constructor(P,F){super(),this.m=P,this.l=F,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:Lt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(g){fe.call(this),this.h=g,this.g={}}j(Cr,fe);var zr=[];function Ur(g){z(g.g,function(P,F){this.g.hasOwnProperty(F)&&H(P)},g),g.g={}}Cr.prototype.N=function(){Cr.aa.N.call(this),Ur(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var si=l.JSON.stringify,to=l.JSON.parse,ii=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function Ii(){}Ii.prototype.h=null;function Nc(g){return g.h||(g.h=g.i())}function Xo(){}var Ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function no(){Te.call(this,"d")}j(no,Te);function el(){Te.call(this,"c")}j(el,Te);var ai={},ut=null;function Oi(){return ut=ut||new Ie}ai.La="serverreachability";function av(g){Te.call(this,ai.La,g)}j(av,Te);function Sc(g){const P=Oi();Me(P,new av(P))}ai.STAT_EVENT="statevent";function Ku(g,P){Te.call(this,ai.STAT_EVENT,g),this.stat=P}j(Ku,Te);function Tr(g){const P=Oi();Me(P,new Ku(P,g))}ai.Ma="timingevent";function ov(g,P){Te.call(this,ai.Ma,g),this.size=P}j(ov,Te);function Ec(g,P){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},P)}function Pc(){this.g=!0}Pc.prototype.xa=function(){this.g=!1};function oi(g,P,F,W,le,me){g.info(function(){if(g.g)if(me)for(var Fe="",Qt=me.split("&"),tr=0;tr<Qt.length;tr++){var Ft=Qt[tr].split("=");if(1<Ft.length){var sn=Ft[0];Ft=Ft[1];var In=sn.split("_");Fe=2<=In.length&&In[1]=="type"?Fe+(sn+"="+Ft+"&"):Fe+(sn+"=redacted&")}}else Fe=null;else Fe=me;return"XMLHTTP REQ ("+W+") [attempt "+le+"]: "+P+`
`+F+`
`+Fe})}function ot(g,P,F,W,le,me,Fe){g.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+le+"]: "+P+`
`+F+`
`+me+" "+Fe})}function ro(g,P,F,W){g.info(function(){return"XMLHTTP TEXT ("+P+"): "+cv(g,F)+(W?" "+W:"")})}function lv(g,P){g.info(function(){return"TIMEOUT: "+P})}Pc.prototype.info=function(){};function cv(g,P){if(!g.g)return P;if(!P)return null;try{var F=JSON.parse(P);if(F){for(g=0;g<F.length;g++)if(Array.isArray(F[g])){var W=F[g];if(!(2>W.length)){var le=W[1];if(Array.isArray(le)&&!(1>le.length)){var me=le[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Fe=1;Fe<le.length;Fe++)le[Fe]=""}}}}return si(F)}catch{return P}}var Cc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qu;function Mi(){}j(Mi,Ii),Mi.prototype.g=function(){return new XMLHttpRequest},Mi.prototype.i=function(){return{}},Qu=new Mi;function Di(g,P,F,W){this.j=g,this.i=P,this.l=F,this.R=W||1,this.U=new Cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uv}function uv(){this.i=null,this.g="",this.h=!1}var dv={},vf={};function yf(g,P,F){g.L=1,g.v=ci(Fn(P)),g.m=F,g.P=!0,xf(g,null)}function xf(g,P){g.F=Date.now(),Ju(g),g.A=Fn(g.v);var F=g.A,W=g.R;Array.isArray(W)||(W=[String(W)]),mv(F.i,"t",W),g.C=0,F=g.j.J,g.h=new uv,g.g=bv(g.j,F?P:null,!g.m),0<g.O&&(g.M=new nn(p(g.Y,g,g.g),g.O)),P=g.U,F=g.g,W=g.ca;var le="readystatechange";Array.isArray(le)||(le&&(zr[0]=le.toString()),le=zr);for(var me=0;me<le.length;me++){var Fe=re(F,le[me],W||P.handleEvent,!1,P.h||P);if(!Fe)break;P.g[Fe.key]=Fe}P=g.H?I(g.H):{},g.m?(g.u||(g.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,P)):(g.u="GET",g.g.ea(g.A,g.u,null,P)),Sc(),oi(g.i,g.u,g.A,g.l,g.R,g.m)}Di.prototype.ca=function(g){g=g.target;const P=this.M;P&&as(g)==3?P.j():this.Y(g)},Di.prototype.Y=function(g){try{if(g==this.g)e:{const In=as(this.g);var P=this.g.Ba();const ol=this.g.Z();if(!(3>In)&&(In!=3||this.g&&(this.h.h||this.g.oa()||Mf(this.g)))){this.J||In!=4||P==7||(P==8||0>=ol?Sc(3):Sc(2)),wf(this);var F=this.g.Z();this.X=F;t:if(hv(this)){var W=Mf(this.g);g="";var le=W.length,me=as(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){so(this),Tc(this);var Fe="";break t}this.h.i=new l.TextDecoder}for(P=0;P<le;P++)this.h.h=!0,g+=this.h.i.decode(W[P],{stream:!(me&&P==le-1)});W.length=0,this.h.g+=g,this.C=0,Fe=this.h.g}else Fe=this.g.oa();if(this.o=F==200,ot(this.i,this.u,this.A,this.l,this.R,In,F),this.o){if(this.T&&!this.K){t:{if(this.g){var Qt,tr=this.g;if((Qt=tr.g?tr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Qt)){var Ft=Qt;break t}}Ft=null}if(F=Ft)ro(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rc(this,F);else{this.o=!1,this.s=3,Tr(12),so(this),Tc(this);break e}}if(this.P){F=!0;let Hn;for(;!this.J&&this.C<Fe.length;)if(Hn=Yu(this,Fe),Hn==vf){In==4&&(this.s=4,Tr(14),F=!1),ro(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==dv){this.s=4,Tr(15),ro(this.i,this.l,Fe,"[Invalid Chunk]"),F=!1;break}else ro(this.i,this.l,Hn,null),Rc(this,Hn);if(hv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),In!=4||Fe.length!=0||this.h.h||(this.s=1,Tr(16),F=!1),this.o=this.o&&F,!F)ro(this.i,this.l,Fe,"[Invalid Chunked Response]"),so(this),Tc(this);else if(0<Fe.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+Fe.length),od(sn),sn.M=!0,Tr(11))}}else ro(this.i,this.l,Fe,null),Rc(this,Fe);In==4&&so(this),this.o&&!this.J&&(In==4?Lf(this.j,this):(this.o=!1,Ju(this)))}else ib(this.g),F==400&&0<Fe.indexOf("Unknown SID")?(this.s=3,Tr(12)):(this.s=0,Tr(13)),so(this),Tc(this)}}}catch{}finally{}};function hv(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Yu(g,P){var F=g.C,W=P.indexOf(`
`,F);return W==-1?vf:(F=Number(P.substring(F,W)),isNaN(F)?dv:(W+=1,W+F>P.length?vf:(P=P.slice(W,W+F),g.C=W+F,P)))}Di.prototype.cancel=function(){this.J=!0,so(this)};function Ju(g){g.S=Date.now()+g.I,fv(g,g.I)}function fv(g,P){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Ec(p(g.ba,g),P)}function wf(g){g.B&&(l.clearTimeout(g.B),g.B=null)}Di.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(lv(this.i,this.A),this.L!=2&&(Sc(),Tr(17)),so(this),this.s=2,Tc(this)):fv(this,this.S-g)};function Tc(g){g.j.G==0||g.J||Lf(g.j,g)}function so(g){wf(g);var P=g.M;P&&typeof P.ma=="function"&&P.ma(),g.M=null,Ur(g.U),g.g&&(P=g.g,g.g=null,P.abort(),P.ma())}function Rc(g,P){try{var F=g.j;if(F.G!=0&&(F.g==g||At(F.h,g))){if(!g.K&&At(F.h,g)&&F.G==3){try{var W=F.Da.g.parse(P)}catch{W=null}if(Array.isArray(W)&&W.length==3){var le=W;if(le[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<g.F)cd(F),id(F);else break e;ad(F),Tr(18)}}else F.za=le[1],0<F.za-F.T&&37500>le[2]&&F.F&&F.v==0&&!F.C&&(F.C=Ec(p(F.Za,F),6e3));if(1>=tl(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else co(F,11)}else if((g.K||F.g==g)&&cd(F),!x(P))for(le=F.Da.g.parse(P),P=0;P<le.length;P++){let Ft=le[P];if(F.T=Ft[0],Ft=Ft[1],F.G==2)if(Ft[0]=="c"){F.K=Ft[1],F.ia=Ft[2];const sn=Ft[3];sn!=null&&(F.la=sn,F.j.info("VER="+F.la));const In=Ft[4];In!=null&&(F.Aa=In,F.j.info("SVER="+F.Aa));const ol=Ft[5];ol!=null&&typeof ol=="number"&&0<ol&&(W=1.5*ol,F.L=W,F.j.info("backChannelRequestTimeoutMs_="+W)),W=F;const Hn=g.g;if(Hn){const dd=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dd){var me=W.h;me.g||dd.indexOf("spdy")==-1&&dd.indexOf("quic")==-1&&dd.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(cn(me,me.h),me.h=null))}if(W.D){const pa=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;pa&&(W.ya=pa,gt(W.I,W.D,pa))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-g.F,F.j.info("Handshake RTT: "+F.R+"ms")),W=F;var Fe=g;if(W.qa=ud(W,W.J?W.ia:null,W.W),Fe.K){Ic(W.h,Fe);var Qt=Fe,tr=W.L;tr&&(Qt.I=tr),Qt.B&&(wf(Qt),Ju(Qt)),W.g=Fe}else $i(W);0<F.i.length&&al(F)}else Ft[0]!="stop"&&Ft[0]!="close"||co(F,7);else F.G==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?co(F,7):sd(F):Ft[0]!="noop"&&F.l&&F.l.ta(Ft),F.v=0)}}Sc(4)}catch{}}var kc=class{constructor(g,P){this.g=g,this.map=P}};function bf(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _f(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function tl(g){return g.h?1:g.g?g.g.size:0}function At(g,P){return g.h?g.h==P:g.g?g.g.has(P):!1}function cn(g,P){g.g?g.g.add(P):g.h=P}function Ic(g,P){g.h&&g.h==P?g.h=null:g.g&&g.g.has(P)&&g.g.delete(P)}bf.prototype.cancel=function(){if(this.i=io(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function io(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let P=g.i;for(const F of g.g.values())P=P.concat(F.D);return P}return _(g.i)}function nl(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(u(g)){for(var P=[],F=g.length,W=0;W<F;W++)P.push(g[W]);return P}P=[],F=0;for(W in g)P[F++]=g[W];return P}function jf(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(u(g)||typeof g=="string"){var P=[];g=g.length;for(var F=0;F<g;F++)P.push(F);return P}P=[],F=0;for(const W in g)P[F++]=W;return P}}}function St(g,P){if(g.forEach&&typeof g.forEach=="function")g.forEach(P,void 0);else if(u(g)||typeof g=="string")Array.prototype.forEach.call(g,P,void 0);else for(var F=jf(g),W=nl(g),le=W.length,me=0;me<le;me++)P.call(void 0,W[me],F&&F[me],g)}var Nn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nf(g,P){if(g){g=g.split("&");for(var F=0;F<g.length;F++){var W=g[F].indexOf("="),le=null;if(0<=W){var me=g[F].substring(0,W);le=g[F].substring(W+1)}else me=g[F];P(me,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function li(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof li){this.h=g.h,Xu(this,g.j),this.o=g.o,this.g=g.g,ao(this,g.s),this.l=g.l;var P=g.i,F=new oo;F.i=P.i,P.g&&(F.g=new Map(P.g),F.h=P.h),fa(this,F),this.m=g.m}else g&&(P=String(g).match(Nn))?(this.h=!1,Xu(this,P[1]||"",!0),this.o=Li(P[2]||""),this.g=Li(P[3]||"",!0),ao(this,P[4]),this.l=Li(P[5]||"",!0),fa(this,P[6]||"",!0),this.m=Li(P[7]||"")):(this.h=!1,this.i=new oo(null,this.h))}li.prototype.toString=function(){var g=[],P=this.j;P&&g.push(Fi(P,rl,!0),":");var F=this.g;return(F||P=="file")&&(g.push("//"),(P=this.o)&&g.push(Fi(P,rl,!0),"@"),g.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&g.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&g.push("/"),g.push(Fi(F,F.charAt(0)=="/"?Pf:Ef,!0))),(F=this.i.toString())&&g.push("?",F),(F=this.m)&&g.push("#",Fi(F,Cf)),g.join("")};function Fn(g){return new li(g)}function Xu(g,P,F){g.j=F?Li(P,!0):P,g.j&&(g.j=g.j.replace(/:$/,""))}function ao(g,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);g.s=P}else g.s=null}function fa(g,P,F){P instanceof oo?(g.i=P,ui(g.i,g.h)):(F||(P=Fi(P,ed)),g.i=new oo(P,g.h))}function gt(g,P,F){g.i.set(P,F)}function ci(g){return gt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Li(g,P){return g?P?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Fi(g,P,F){return typeof g=="string"?(g=encodeURI(g).replace(P,Sf),F&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Sf(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var rl=/[#\/\?@]/g,Ef=/[#\?:]/g,Pf=/[#\?]/g,ed=/[#\?@]/g,Cf=/#/g;function oo(g,P){this.h=this.g=null,this.i=g||null,this.j=!!P}function Ls(g){g.g||(g.g=new Map,g.h=0,g.i&&Nf(g.i,function(P,F){g.add(decodeURIComponent(P.replace(/\+/g," ")),F)}))}t=oo.prototype,t.add=function(g,P){Ls(this),this.i=null,g=ht(this,g);var F=this.g.get(g);return F||this.g.set(g,F=[]),F.push(P),this.h+=1,this};function Tf(g,P){Ls(g),P=ht(g,P),g.g.has(P)&&(g.i=null,g.h-=g.g.get(P).length,g.g.delete(P))}function td(g,P){return Ls(g),P=ht(g,P),g.g.has(P)}t.forEach=function(g,P){Ls(this),this.g.forEach(function(F,W){F.forEach(function(le){g.call(P,le,W,this)},this)},this)},t.na=function(){Ls(this);const g=Array.from(this.g.values()),P=Array.from(this.g.keys()),F=[];for(let W=0;W<P.length;W++){const le=g[W];for(let me=0;me<le.length;me++)F.push(P[W])}return F},t.V=function(g){Ls(this);let P=[];if(typeof g=="string")td(this,g)&&(P=P.concat(this.g.get(ht(this,g))));else{g=Array.from(this.g.values());for(let F=0;F<g.length;F++)P=P.concat(g[F])}return P},t.set=function(g,P){return Ls(this),this.i=null,g=ht(this,g),td(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[P]),this.h+=1,this},t.get=function(g,P){return g?(g=this.V(g),0<g.length?String(g[0]):P):P};function mv(g,P,F){Tf(g,P),0<F.length&&(g.i=null,g.g.set(ht(g,P),_(F)),g.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],P=Array.from(this.g.keys());for(var F=0;F<P.length;F++){var W=P[F];const me=encodeURIComponent(String(W)),Fe=this.V(W);for(W=0;W<Fe.length;W++){var le=me;Fe[W]!==""&&(le+="="+encodeURIComponent(String(Fe[W]))),g.push(le)}}return this.i=g.join("&")};function ht(g,P){return P=String(P),g.j&&(P=P.toLowerCase()),P}function ui(g,P){P&&!g.j&&(Ls(g),g.i=null,g.g.forEach(function(F,W){var le=W.toLowerCase();W!=le&&(Tf(this,W),mv(this,le,F))},g)),g.j=P}function rn(g,P){const F=new Pc;if(l.Image){const W=new Image;W.onload=y(di,F,"TestLoadImage: loaded",!0,P,W),W.onerror=y(di,F,"TestLoadImage: error",!1,P,W),W.onabort=y(di,F,"TestLoadImage: abort",!1,P,W),W.ontimeout=y(di,F,"TestLoadImage: timeout",!1,P,W),l.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=g}else P(!1)}function pv(g,P){const F=new Pc,W=new AbortController,le=setTimeout(()=>{W.abort(),di(F,"TestPingServer: timeout",!1,P)},1e4);fetch(g,{signal:W.signal}).then(me=>{clearTimeout(le),me.ok?di(F,"TestPingServer: ok",!0,P):di(F,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(le),di(F,"TestPingServer: error",!1,P)})}function di(g,P,F,W,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),W(F)}catch{}}function Rf(){this.g=new ii}function kf(g,P,F){const W=F||"";try{St(g,function(le,me){let Fe=le;d(le)&&(Fe=si(le)),P.push(W+me+"="+encodeURIComponent(Fe))})}catch(le){throw P.push(W+"type="+encodeURIComponent("_badmap")),le}}function hi(g){this.l=g.Ub||null,this.j=g.eb||!1}j(hi,Ii),hi.prototype.g=function(){return new sl(this.l,this.j)},hi.prototype.i=function(g){return function(){return g}}({});function sl(g,P){Ie.call(this),this.D=g,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(sl,Ie),t=sl.prototype,t.open=function(g,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=P,this.readyState=1,Fs(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(P.body=g),(this.D||l).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kn(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Fs(this)),this.g&&(this.readyState=3,Fs(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;il(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function il(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var P=g.value?g.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!g.done}))&&(this.response=this.responseText+=P)}g.done?kn(this):Fs(this),this.readyState==3&&il(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,kn(this))},t.Qa=function(g){this.g&&(this.response=g,kn(this))},t.ga=function(){this.g&&kn(this)};function kn(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Fs(g)}t.setRequestHeader=function(g,P){this.u.append(g,P)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],P=this.h.entries();for(var F=P.next();!F.done;)F=F.value,g.push(F[0]+": "+F[1]),F=P.next();return g.join(`\r
`)};function Fs(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function If(g){let P="";return z(g,function(F,W){P+=W,P+=":",P+=F,P+=`\r
`}),P}function nd(g,P,F){e:{for(W in F){var W=!1;break e}W=!0}W||(F=If(F),typeof g=="string"?F!=null&&encodeURIComponent(String(F)):gt(g,P,F))}function Sn(g){Ie.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(Sn,Ie);var gv=/^https?$/i,Af=["POST","PUT"];t=Sn.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,P,F,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);P=P?P.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qu.g(),this.v=this.o?Nc(this.o):Nc(Qu),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(P,String(g),!0),this.B=!1}catch(me){vv(this,me);return}if(g=F||"",F=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var le in W)F.set(le,W[le]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const me of W.keys())F.set(me,W.get(me));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(F.keys()).find(me=>me.toLowerCase()=="content-type"),le=l.FormData&&g instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Af,P,void 0))||W||le||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Fe]of F)this.g.setRequestHeader(me,Fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ws(this),this.u=!0,this.g.send(g),this.u=!1}catch(me){vv(this,me)}};function vv(g,P){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=P,g.m=5,Of(g),rd(g)}function Of(g){g.A||(g.A=!0,Me(g,"complete"),Me(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Me(this,"complete"),Me(this,"abort"),rd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rd(this,!0)),Sn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rt(this):this.bb())},t.bb=function(){Rt(this)};function Rt(g){if(g.h&&typeof o<"u"&&(!g.v[1]||as(g)!=4||g.Z()!=2)){if(g.u&&as(g)==4)Tt(g.Ea,0,g);else if(Me(g,"readystatechange"),as(g)==4){g.h=!1;try{const Fe=g.Z();e:switch(Fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var F;if(!(F=P)){var W;if(W=Fe===0){var le=String(g.D).match(Nn)[1]||null;!le&&l.self&&l.self.location&&(le=l.self.location.protocol.slice(0,-1)),W=!gv.test(le?le.toLowerCase():"")}F=W}if(F)Me(g,"complete"),Me(g,"success");else{g.m=6;try{var me=2<as(g)?g.g.statusText:""}catch{me=""}g.l=me+" ["+g.Z()+"]",Of(g)}}finally{rd(g)}}}}function rd(g,P){if(g.g){ws(g);const F=g.g,W=g.v[0]?()=>{}:null;g.g=null,g.v=null,P||Me(g,"ready");try{F.onreadystatechange=W}catch{}}}function ws(g){g.I&&(l.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function as(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<as(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var P=this.g.responseText;return g&&P.indexOf(g)==0&&(P=P.substring(g.length)),to(P)}};function Mf(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function ib(g){const P={};g=(g.g&&2<=as(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<g.length;W++){if(x(g[W]))continue;var F=O(g[W]);const le=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const me=P[le]||[];P[le]=me,me.push(F)}k(P,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(g,P,F){return F&&F.internalChannelParams&&F.internalChannelParams[g]||P}function yv(g){this.Aa=0,this.i=[],this.j=new Pc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lo("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lo("baseRetryDelayMs",5e3,g),this.cb=lo("retryDelaySeedMs",1e4,g),this.Wa=lo("forwardChannelMaxRetries",2,g),this.wa=lo("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new bf(g&&g.concurrentRequestLimit),this.Da=new Rf,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=yv.prototype,t.la=8,t.G=1,t.connect=function(g,P,F,W){Tr(0),this.W=g,this.H=P||{},F&&W!==void 0&&(this.H.OSID=F,this.H.OAID=W),this.F=this.X,this.I=ud(this,null,this.W),al(this)};function sd(g){if(xv(g),g.G==3){var P=g.U++,F=Fn(g.I);if(gt(F,"SID",g.K),gt(F,"RID",P),gt(F,"TYPE","terminate"),Ac(g,F),P=new Di(g,g.j,P),P.L=2,P.v=ci(Fn(F)),F=!1,l.navigator&&l.navigator.sendBeacon)try{F=l.navigator.sendBeacon(P.v.toString(),"")}catch{}!F&&l.Image&&(new Image().src=P.v,F=!0),F||(P.g=bv(P.j,null),P.g.ea(P.v)),P.F=Date.now(),Ju(P)}wv(g)}function id(g){g.g&&(od(g),g.g.cancel(),g.g=null)}function xv(g){id(g),g.u&&(l.clearTimeout(g.u),g.u=null),cd(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&l.clearTimeout(g.s),g.s=null)}function al(g){if(!_f(g.h)&&!g.s){g.s=!0;var P=g.Ga;K||q(),D||(K(),D=!0),G.add(P,g),g.B=0}}function ab(g,P){return tl(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=P.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Ec(p(g.Ga,g,P),Ff(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const le=new Di(this,this.j,g);let me=this.o;if(this.S&&(me?(me=I(me),T(me,this.S)):me=this.S),this.m!==null||this.O||(le.H=me,me=null),this.P)e:{for(var P=0,F=0;F<this.i.length;F++){t:{var W=this.i[F];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(P+=W,4096<P){P=F;break e}if(P===4096||F===this.i.length-1){P=F+1;break e}}P=1e3}else P=1e3;P=Df(this,le,P),F=Fn(this.I),gt(F,"RID",g),gt(F,"CVER",22),this.D&&gt(F,"X-HTTP-Session-Id",this.D),Ac(this,F),me&&(this.O?P="headers="+encodeURIComponent(String(If(me)))+"&"+P:this.m&&nd(F,this.m,me)),cn(this.h,le),this.Ua&&gt(F,"TYPE","init"),this.P?(gt(F,"$req",P),gt(F,"SID","null"),le.T=!0,yf(le,F,null)):yf(le,F,P),this.G=2}}else this.G==3&&(g?$s(this,g):this.i.length==0||_f(this.h)||$s(this))};function $s(g,P){var F;P?F=P.l:F=g.U++;const W=Fn(g.I);gt(W,"SID",g.K),gt(W,"RID",F),gt(W,"AID",g.T),Ac(g,W),g.m&&g.o&&nd(W,g.m,g.o),F=new Di(g,g.j,F,g.B+1),g.m===null&&(F.H=g.o),P&&(g.i=P.D.concat(g.i)),P=Df(g,F,1e3),F.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),cn(g.h,F),yf(F,W,P)}function Ac(g,P){g.H&&z(g.H,function(F,W){gt(P,W,F)}),g.l&&St({},function(F,W){gt(P,W,F)})}function Df(g,P,F){F=Math.min(g.i.length,F);var W=g.l?p(g.l.Na,g.l,g):null;e:{var le=g.i;let me=-1;for(;;){const Fe=["count="+F];me==-1?0<F?(me=le[0].g,Fe.push("ofs="+me)):me=0:Fe.push("ofs="+me);let Qt=!0;for(let tr=0;tr<F;tr++){let Ft=le[tr].g;const sn=le[tr].map;if(Ft-=me,0>Ft)me=Math.max(0,le[tr].g-100),Qt=!1;else try{kf(sn,Fe,"req"+Ft+"_")}catch{W&&W(sn)}}if(Qt){W=Fe.join("&");break e}}}return g=g.i.splice(0,F),P.D=g,W}function $i(g){if(!g.g&&!g.u){g.Y=1;var P=g.Fa;K||q(),D||(K(),D=!0),G.add(P,g),g.v=0}}function ad(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Ec(p(g.Fa,g),Ff(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,ld(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Ec(p(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tr(10),id(this),ld(this))};function od(g){g.A!=null&&(l.clearTimeout(g.A),g.A=null)}function ld(g){g.g=new Di(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var P=Fn(g.qa);gt(P,"RID","rpc"),gt(P,"SID",g.K),gt(P,"AID",g.T),gt(P,"CI",g.F?"0":"1"),!g.F&&g.ja&&gt(P,"TO",g.ja),gt(P,"TYPE","xmlhttp"),Ac(g,P),g.m&&g.o&&nd(P,g.m,g.o),g.L&&(g.g.I=g.L);var F=g.g;g=g.ia,F.L=1,F.v=ci(Fn(P)),F.m=null,F.P=!0,xf(F,g)}t.Za=function(){this.C!=null&&(this.C=null,id(this),ad(this),Tr(19))};function cd(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function Lf(g,P){var F=null;if(g.g==P){cd(g),od(g),g.g=null;var W=2}else if(At(g.h,P))F=P.D,Ic(g.h,P),W=1;else return;if(g.G!=0){if(P.o)if(W==1){F=P.m?P.m.length:0,P=Date.now()-P.F;var le=g.B;W=Oi(),Me(W,new ov(W,F)),al(g)}else $i(g);else if(le=P.s,le==3||le==0&&0<P.X||!(W==1&&ab(g,P)||W==2&&ad(g)))switch(F&&0<F.length&&(P=g.h,P.i=P.i.concat(F)),le){case 1:co(g,5);break;case 4:co(g,10);break;case 3:co(g,6);break;default:co(g,2)}}}function Ff(g,P){let F=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(F*=2),F*P}function co(g,P){if(g.j.info("Error code "+P),P==2){var F=p(g.fb,g),W=g.Xa;const le=!W;W=new li(W||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Xu(W,"https"),ci(W),le?rn(W.toString(),F):pv(W.toString(),F)}else Tr(2);g.G=0,g.l&&g.l.sa(P),wv(g),xv(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Tr(2)):(this.j.info("Failed to ping google.com"),Tr(1))};function wv(g){if(g.G=0,g.ka=[],g.l){const P=io(g.h);(P.length!=0||g.i.length!=0)&&(N(g.ka,P),N(g.ka,g.i),g.h.i.length=0,_(g.i),g.i.length=0),g.l.ra()}}function ud(g,P,F){var W=F instanceof li?Fn(F):new li(F);if(W.g!="")P&&(W.g=P+"."+W.g),ao(W,W.s);else{var le=l.location;W=le.protocol,P=P?P+"."+le.hostname:le.hostname,le=+le.port;var me=new li(null);W&&Xu(me,W),P&&(me.g=P),le&&ao(me,le),F&&(me.l=F),W=me}return F=g.D,P=g.ya,F&&P&&gt(W,F,P),gt(W,"VER",g.la),Ac(g,W),W}function bv(g,P,F){if(P&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=g.Ca&&!g.pa?new Sn(new hi({eb:F})):new Sn(g.pa),P.Ha(g.J),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $f(){}t=$f.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Oc(){}Oc.prototype.g=function(g,P){return new wr(g,P)};function wr(g,P){Ie.call(this),this.g=new yv(P),this.l=g,this.h=P&&P.messageUrlParams||null,g=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(g?g["X-WebChannel-Content-Type"]=P.messageContentType:g={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(g?g["X-WebChannel-Client-Profile"]=P.va:g={"X-WebChannel-Client-Profile":P.va}),this.g.S=g,(g=P&&P.Sb)&&!x(g)&&(this.g.m=g),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!x(P)&&(this.g.D=P,g=this.h,g!==null&&P in g&&(g=this.h,P in g&&delete g[P])),this.j=new fi(this)}j(wr,Ie),wr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wr.prototype.close=function(){sd(this.g)},wr.prototype.o=function(g){var P=this.g;if(typeof g=="string"){var F={};F.__data__=g,g=F}else this.u&&(F={},F.__data__=si(g),g=F);P.i.push(new kc(P.Ya++,g)),P.G==3&&al(P)},wr.prototype.N=function(){this.g.l=null,delete this.j,sd(this.g),delete this.g,wr.aa.N.call(this)};function ma(g){no.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var P=g.__sm__;if(P){e:{for(const F in P){g=F;break e}g=void 0}(this.i=g)&&(g=this.i,P=P!==null&&g in P?P[g]:void 0),this.data=P}else this.data=g}j(ma,no);function _v(){el.call(this),this.status=1}j(_v,el);function fi(g){this.g=g}j(fi,$f),fi.prototype.ua=function(){Me(this.g,"a")},fi.prototype.ta=function(g){Me(this.g,new ma(g))},fi.prototype.sa=function(g){Me(this.g,new _v)},fi.prototype.ra=function(){Me(this.g,"b")},Oc.prototype.createWebChannel=Oc.prototype.g,wr.prototype.send=wr.prototype.o,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,OD=function(){return new Oc},AD=function(){return Oi()},ID=ai,Q1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cc.NO_ERROR=0,Cc.TIMEOUT=8,Cc.HTTP_ERROR=6,Vy=Cc,Zu.COMPLETE="complete",kD=Zu,Xo.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,ym=Xo,Sn.prototype.listenOnce=Sn.prototype.L,Sn.prototype.getLastError=Sn.prototype.Ka,Sn.prototype.getLastErrorCode=Sn.prototype.Ba,Sn.prototype.getStatus=Sn.prototype.Z,Sn.prototype.getResponseJson=Sn.prototype.Oa,Sn.prototype.getResponseText=Sn.prototype.oa,Sn.prototype.send=Sn.prototype.ea,Sn.prototype.setWithCredentials=Sn.prototype.Ha,RD=Sn}).apply(typeof Xv<"u"?Xv:typeof self<"u"?self:typeof window<"u"?window:{});const qT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Kr.UNAUTHENTICATED=new Kr(null),Kr.GOOGLE_CREDENTIALS=new Kr("google-credentials-uid"),Kr.FIRST_PARTY=new Kr("first-party-uid"),Kr.MOCK_USER=new Kr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new VS("@firebase/firestore");function Jf(){return bu.logLevel}function rt(t,...e){if(bu.logLevel<=Dt.DEBUG){const n=e.map(XS);bu.debug(`Firestore (${Jh}): ${t}`,...n)}}function Lo(t,...e){if(bu.logLevel<=Dt.ERROR){const n=e.map(XS);bu.error(`Firestore (${Jh}): ${t}`,...n)}}function vh(t,...e){if(bu.logLevel<=Dt.WARN){const n=e.map(XS);bu.warn(`Firestore (${Jh}): ${t}`,...n)}}function XS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t="Unexpected state"){const e=`FIRESTORE (${Jh}) INTERNAL ASSERTION FAILED: `+t;throw Lo(e),new Error(e)}function tn(t,e){t||vt()}function Nt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends Qa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Kr.UNAUTHENTICATED))}shutdown(){}}class eZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class tZ{constructor(e){this.t=e,this.currentUser=Kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tn(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Co;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Co,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Co)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tn(typeof r.accessToken=="string"),new MD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tn(e===null||typeof e=="string"),new Kr(e)}}class nZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Kr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class rZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new nZ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sZ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iZ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){tn(this.o===void 0);const r=a=>{a.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,rt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(tn(typeof n.token=="string"),this.R=n.token,new sZ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=aZ(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function Bt(t,e){return t<e?-1:t>e?1:0}function yh(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Be(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Be(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Be(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vr.fromMillis(Date.now())}static fromDate(e){return vr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new vr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new vr(0,0))}static max(){return new wt(new vr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n,r){n===void 0?n=0:n>e.length&&vt(),r===void 0?r=e.length-n:r>e.length-n&&vt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yp.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),o=n.get(s);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class fn extends yp{construct(e,n,r){return new fn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(xe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new fn(n)}static emptyPath(){return new fn([])}}const oZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Or extends yp{construct(e,n,r){return new Or(e,n,r)}static isValidIdentifier(e){return oZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Or(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Be(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Be(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Be(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new Be(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Or(n)}static emptyPath(){return new Or([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.path=e}static fromPath(e){return new ct(fn.fromString(e))}static fromName(e){return new ct(fn.fromString(e).popFirst(5))}static empty(){return new ct(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ct(new fn(e.slice()))}}function lZ(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=wt.fromTimestamp(r===1e9?new vr(n+1,0):new vr(n,r));return new nc(s,ct.empty(),e)}function cZ(t){return new nc(t.readTime,t.key,-1)}class nc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new nc(wt.min(),ct.empty(),-1)}static max(){return new nc(wt.max(),ct.empty(),-1)}}function uZ(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ct.comparator(t.documentKey,e.documentKey),n!==0?n:Bt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hZ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kg(t){if(t.code!==xe.FAILED_PRECONDITION||t.message!==dZ)throw t;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Re((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Re?n:Re.resolve(n)}catch(n){return Re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Re.reject(n)}static resolve(e){return new Re((n,r)=>{n(e)})}static reject(e){return new Re((n,r)=>{r(e)})}static waitFor(e){return new Re((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},u=>r(u))}),o=!0,a===s&&n()})}static or(e){let n=Re.resolve(!1);for(const r of e)n=n.next(s=>s?Re.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new Re((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++l,l===a&&r(o)},h=>s(h))}})}static doWhile(e,n){return new Re((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function fZ(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ig(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}e2.oe=-1;function Z0(t){return t==null}function Fx(t){return t===0&&1/t==-1/0}function mZ(t){return typeof t=="number"&&Number.isInteger(t)&&!Fx(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $u(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n){this.comparator=e,this.root=n||Ar.EMPTY}insert(e,n){return new Ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ar.BLACK,null,null))}remove(e){return new Ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ar.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ey(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ey(this.root,e,this.comparator,!1)}getReverseIterator(){return new ey(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ey(this.root,e,this.comparator,!0)}}class ey{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ar{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Ar.RED,this.left=s??Ar.EMPTY,this.right=a??Ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Ar(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ar.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}Ar.EMPTY=null,Ar.RED=!0,Ar.BLACK=!1;Ar.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(e,n,r,s,a){return this}insert(e,n,r){return new Ar(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.comparator=e,this.data=new Ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new KT(this.data.getIterator())}getIteratorFrom(e){return new KT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Dr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dr(this.comparator);return n.data=e,n}}class KT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.fields=e,e.sort(Or.comparator)}static empty(){return new qs([])}unionWith(e){let n=new Dr(Or.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new qs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yh(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new FD("Invalid base64 string: "+a):a}}(e);return new Fr(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Fr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const pZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rc(t){if(tn(!!t),typeof t=="string"){let e=0;const n=pZ.exec(t);if(tn(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(t.seconds),nanos:qn(t.nanos)}}function qn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _u(t){return typeof t=="string"?Fr.fromBase64String(t):Fr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function t2(t){const e=t.mapValue.fields.__previous_value__;return Q0(e)?t2(e):e}function xp(t){const e=rc(t.mapValue.fields.__local_write_time__.timestampValue);return new vr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(e,n,r,s,a,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class wp{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new wp("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof wp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty={mapValue:{}};function ju(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Q0(t)?4:yZ(t)?9007199254740991:vZ(t)?10:11:vt()}function Ha(t,e){if(t===e)return!0;const n=ju(t);if(n!==ju(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xp(t).isEqual(xp(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=rc(s.timestampValue),l=rc(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return _u(s.bytesValue).isEqual(_u(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return qn(s.geoPointValue.latitude)===qn(a.geoPointValue.latitude)&&qn(s.geoPointValue.longitude)===qn(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return qn(s.integerValue)===qn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=qn(s.doubleValue),l=qn(a.doubleValue);return o===l?Fx(o)===Fx(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return yh(t.arrayValue.values||[],e.arrayValue.values||[],Ha);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(GT(o)!==GT(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Ha(o[u],l[u])))return!1;return!0}(t,e);default:return vt()}}function bp(t,e){return(t.values||[]).find(n=>Ha(n,e))!==void 0}function xh(t,e){if(t===e)return 0;const n=ju(t),r=ju(e);if(n!==r)return Bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=qn(a.integerValue||a.doubleValue),u=qn(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return ZT(t.timestampValue,e.timestampValue);case 4:return ZT(xp(t),xp(e));case 5:return Bt(t.stringValue,e.stringValue);case 6:return function(a,o){const l=_u(a),u=_u(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=Bt(l[d],u[d]);if(h!==0)return h}return Bt(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Bt(qn(a.latitude),qn(o.latitude));return l!==0?l:Bt(qn(a.longitude),qn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return QT(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,d,h;const m=a.fields||{},p=o.fields||{},y=(l=m.value)===null||l===void 0?void 0:l.arrayValue,j=(u=p.value)===null||u===void 0?void 0:u.arrayValue,_=Bt(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((h=j==null?void 0:j.values)===null||h===void 0?void 0:h.length)||0);return _!==0?_:QT(y,j)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===ty.mapValue&&o===ty.mapValue)return 0;if(a===ty.mapValue)return 1;if(o===ty.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=Bt(u[m],h[m]);if(p!==0)return p;const y=xh(l[u[m]],d[h[m]]);if(y!==0)return y}return Bt(u.length,h.length)}(t.mapValue,e.mapValue);default:throw vt()}}function ZT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Bt(t,e);const n=rc(t),r=rc(e),s=Bt(n.seconds,r.seconds);return s!==0?s:Bt(n.nanos,r.nanos)}function QT(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=xh(n[s],r[s]);if(a)return a}return Bt(n.length,r.length)}function wh(t){return Y1(t)}function Y1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=rc(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _u(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ct.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Y1(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${Y1(n.fields[o])}`;return s+"}"}(t.mapValue):vt()}function $x(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function J1(t){return!!t&&"integerValue"in t}function n2(t){return!!t&&"arrayValue"in t}function YT(t){return!!t&&"nullValue"in t}function JT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zy(t){return!!t&&"mapValue"in t}function vZ(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Vm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return $u(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vm(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vm(t.arrayValue.values[n]);return e}return Object.assign({},t)}function yZ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.value=e}static empty(){return new Es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vm(n)}setAll(e){let n=Or.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Vm(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());zy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ha(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];zy(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){$u(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Es(Vm(this.value))}}function $D(t){const e=[];return $u(t.fields,(n,r)=>{const s=new Or([n]);if(zy(r)){const a=$D(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new qs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Qr(e,0,wt.min(),wt.min(),wt.min(),Es.empty(),0)}static newFoundDocument(e,n,r,s){return new Qr(e,1,n,wt.min(),r,s,0)}static newNoDocument(e,n){return new Qr(e,2,n,wt.min(),wt.min(),Es.empty(),0)}static newUnknownDocument(e,n){return new Qr(e,3,n,wt.min(),wt.min(),Es.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n){this.position=e,this.inclusive=n}}function XT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=ct.comparator(ct.fromName(o.referenceValue),n.key):r=xh(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function eR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ha(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,n="asc"){this.field=e,this.dir=n}}function xZ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VD=class{};class or extends VD{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bZ(e,n,r):n==="array-contains"?new NZ(e,r):n==="in"?new SZ(e,r):n==="not-in"?new EZ(e,r):n==="array-contains-any"?new PZ(e,r):new or(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _Z(e,r):new jZ(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xh(n,this.value)):n!==null&&ju(this.value)===ju(n)&&this.matchesComparison(xh(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sa extends VD{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new sa(e,n)}matches(e){return zD(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zD(t){return t.op==="and"}function UD(t){return wZ(t)&&zD(t)}function wZ(t){for(const e of t.filters)if(e instanceof sa)return!1;return!0}function X1(t){if(t instanceof or)return t.field.canonicalString()+t.op.toString()+wh(t.value);if(UD(t))return t.filters.map(e=>X1(e)).join(",");{const e=t.filters.map(n=>X1(n)).join(",");return`${t.op}(${e})`}}function BD(t,e){return t instanceof or?function(r,s){return s instanceof or&&r.op===s.op&&r.field.isEqual(s.field)&&Ha(r.value,s.value)}(t,e):t instanceof sa?function(r,s){return s instanceof sa&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&BD(o,s.filters[l]),!0):!1}(t,e):void vt()}function WD(t){return t instanceof or?function(n){return`${n.field.canonicalString()} ${n.op} ${wh(n.value)}`}(t):t instanceof sa?function(n){return n.op.toString()+" {"+n.getFilters().map(WD).join(" ,")+"}"}(t):"Filter"}class bZ extends or{constructor(e,n,r){super(e,n,r),this.key=ct.fromName(r.referenceValue)}matches(e){const n=ct.comparator(e.key,this.key);return this.matchesComparison(n)}}class _Z extends or{constructor(e,n){super(e,"in",n),this.keys=HD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jZ extends or{constructor(e,n){super(e,"not-in",n),this.keys=HD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function HD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ct.fromName(r.referenceValue))}class NZ extends or{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return n2(n)&&bp(n.arrayValue,this.value)}}class SZ extends or{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bp(this.value.arrayValue,n)}}class EZ extends or{constructor(e,n){super(e,"not-in",n)}matches(e){if(bp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!bp(this.value.arrayValue,n)}}class PZ extends or{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!n2(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CZ{constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function tR(t,e=null,n=[],r=[],s=null,a=null,o=null){return new CZ(t,e,n,r,s,a,o)}function r2(t){const e=Nt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>X1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Z0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>wh(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>wh(r)).join(",")),e.ue=n}return e.ue}function s2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xZ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eR(t.startAt,e.startAt)&&eR(t.endAt,e.endAt)}function ej(t){return ct.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function TZ(t,e,n,r,s,a,o,l){return new Vu(t,e,n,r,s,a,o,l)}function Y0(t){return new Vu(t)}function nR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function i2(t){return t.collectionGroup!==null}function rh(t){const e=Nt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Dr(Or.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new _p(a,r))}),n.has(Or.keyField().canonicalString())||e.ce.push(new _p(Or.keyField(),r))}return e.ce}function $a(t){const e=Nt(t);return e.le||(e.le=RZ(e,rh(t))),e.le}function RZ(t,e){if(t.limitType==="F")return tR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new _p(s.field,a)});const n=t.endAt?new bh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bh(t.startAt.position,t.startAt.inclusive):null;return tR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tj(t,e){const n=t.filters.concat([e]);return new Vu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vx(t,e,n){return new Vu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function J0(t,e){return s2($a(t),$a(e))&&t.limitType===e.limitType}function qD(t){return`${r2($a(t))}|lt:${t.limitType}`}function Td(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>WD(s)).join(", ")}]`),Z0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>wh(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>wh(s)).join(",")),`Target(${r})`}($a(t))}; limitType=${t.limitType})`}function X0(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ct.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of rh(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=XT(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,rh(r),s)||r.endAt&&!function(o,l,u){const d=XT(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,rh(r),s))}(t,e)}function kZ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GD(t){return(e,n)=>{let r=!1;for(const s of rh(t)){const a=IZ(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function IZ(t,e,n){const r=t.field.isKeyField()?ct.comparator(e.key,n.key):function(a,o,l){const u=o.data.field(a),d=l.data.field(a);return u!==null&&d!==null?xh(u,d):vt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return vt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$u(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return LD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AZ=new Ln(ct.comparator);function Fo(){return AZ}const KD=new Ln(ct.comparator);function xm(...t){let e=KD;for(const n of t)e=e.insert(n.key,n);return e}function ZD(t){let e=KD;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qc(){return zm()}function QD(){return zm()}function zm(){return new Xh(t=>t.toString(),(t,e)=>t.isEqual(e))}const OZ=new Ln(ct.comparator),MZ=new Dr(ct.comparator);function Mt(...t){let e=MZ;for(const n of t)e=e.add(n);return e}const DZ=new Dr(Bt);function LZ(){return DZ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fx(e)?"-0":e}}function YD(t){return{integerValue:""+t}}function FZ(t,e){return mZ(e)?YD(e):a2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this._=void 0}}function $Z(t,e,n){return t instanceof jp?function(s,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Q0(a)&&(a=t2(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof Np?XD(t,e):t instanceof Sp?eL(t,e):function(s,a){const o=JD(s,a),l=rR(o)+rR(s.Pe);return J1(o)&&J1(s.Pe)?YD(l):a2(s.serializer,l)}(t,e)}function VZ(t,e,n){return t instanceof Np?XD(t,e):t instanceof Sp?eL(t,e):n}function JD(t,e){return t instanceof zx?function(r){return J1(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class jp extends ew{}class Np extends ew{constructor(e){super(),this.elements=e}}function XD(t,e){const n=tL(e);for(const r of t.elements)n.some(s=>Ha(s,r))||n.push(r);return{arrayValue:{values:n}}}class Sp extends ew{constructor(e){super(),this.elements=e}}function eL(t,e){let n=tL(e);for(const r of t.elements)n=n.filter(s=>!Ha(s,r));return{arrayValue:{values:n}}}class zx extends ew{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function rR(t){return qn(t.integerValue||t.doubleValue)}function tL(t){return n2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zZ{constructor(e,n){this.field=e,this.transform=n}}function UZ(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Np&&s instanceof Np||r instanceof Sp&&s instanceof Sp?yh(r.elements,s.elements,Ha):r instanceof zx&&s instanceof zx?Ha(r.Pe,s.Pe):r instanceof jp&&s instanceof jp}(t.transform,e.transform)}class BZ{constructor(e,n){this.version=e,this.transformResults=n}}class ps{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ps}static exists(e){return new ps(void 0,e)}static updateTime(e){return new ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uy(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tw{}function nL(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nw(t.key,ps.none()):new Ag(t.key,t.data,ps.none());{const n=t.data,r=Es.empty();let s=new Dr(Or.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new yc(t.key,r,new qs(s.toArray()),ps.none())}}function WZ(t,e,n){t instanceof Ag?function(s,a,o){const l=s.value.clone(),u=iR(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof yc?function(s,a,o){if(!Uy(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=iR(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(rL(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Um(t,e,n,r){return t instanceof Ag?function(a,o,l,u){if(!Uy(a.precondition,o))return l;const d=a.value.clone(),h=aR(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof yc?function(a,o,l,u){if(!Uy(a.precondition,o))return l;const d=aR(a.fieldTransforms,u,o),h=o.data;return h.setAll(rL(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(a,o,l){return Uy(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function HZ(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=JD(r.transform,s||null);a!=null&&(n===null&&(n=Es.empty()),n.set(r.field,a))}return n||null}function sR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&yh(r,s,(a,o)=>UZ(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ag extends tw{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class yc extends tw{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function rL(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function iR(t,e,n){const r=new Map;tn(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,VZ(o,l,n[s]))}return r}function aR(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,$Z(a,o,e))}return r}class nw extends tw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qZ extends tw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GZ{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&WZ(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Um(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Um(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QD();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const u=nL(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(wt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Mt())}isEqual(e){return this.batchId===e.batchId&&yh(this.mutations,e.mutations,(n,r)=>sR(n,r))&&yh(this.baseMutations,e.baseMutations,(n,r)=>sR(n,r))}}class o2{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){tn(e.mutations.length===r.length);let s=function(){return OZ}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new o2(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KZ=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZZ{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rr,$t;function QZ(t){switch(t){default:return vt();case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0}}function sL(t){if(t===void 0)return Lo("GRPC error has no .code"),xe.UNKNOWN;switch(t){case rr.OK:return xe.OK;case rr.CANCELLED:return xe.CANCELLED;case rr.UNKNOWN:return xe.UNKNOWN;case rr.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case rr.INTERNAL:return xe.INTERNAL;case rr.UNAVAILABLE:return xe.UNAVAILABLE;case rr.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case rr.NOT_FOUND:return xe.NOT_FOUND;case rr.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case rr.ABORTED:return xe.ABORTED;case rr.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case rr.DATA_LOSS:return xe.DATA_LOSS;default:return vt()}}($t=rr||(rr={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YZ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JZ=new ru([4294967295,4294967295],0);function oR(t){const e=YZ().encode(t),n=new TD;return n.update(e),new Uint8Array(n.digest())}function lR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ru([n,r],0),new ru([s,a],0)]}class l2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wm(`Invalid padding: ${n}`);if(r<0)throw new wm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wm(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wm(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ru.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ru.fromNumber(r)));return s.compare(JZ)===1&&(s=new ru([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=oR(e),[r,s]=lR(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new l2(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=oR(e),[r,s]=lR(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class wm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Og.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rw(wt.min(),s,new Ln(Bt),Fo(),Mt())}}class Og{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Og(r,n,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class iL{constructor(e,n){this.targetId=e,this.me=n}}class aL{constructor(e,n,r=Fr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class cR{constructor(){this.fe=0,this.ge=dR(),this.pe=Fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Mt(),n=Mt(),r=Mt();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:vt()}}),new Og(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=dR()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,tn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class XZ{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fo(),this.qe=uR(),this.Qe=new Ln(Bt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:vt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(ej(a))if(r===0){const o=new ct(a.path);this.Ue(n,o,Qr.newNoDocument(o,wt.min()))}else tn(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=_u(r).toUint8Array()}catch(u){if(u instanceof FD)return vh("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new l2(o,s,a)}catch(u){return vh(u instanceof wm?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,a,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&ej(l.target)){const u=new ct(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Qr.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=Mt();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const s=new rw(e,n,this.Qe,this.ke,r);return this.ke=Fo(),this.qe=uR(),this.Qe=new Ln(Bt),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new cR,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Dr(Bt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||rt("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cR),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function uR(){return new Ln(ct.comparator)}function dR(){return new Ln(ct.comparator)}const eQ={asc:"ASCENDING",desc:"DESCENDING"},tQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nQ={and:"AND",or:"OR"};class rQ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nj(t,e){return t.useProto3Json||Z0(e)?e:{value:e}}function Ux(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oL(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sQ(t,e){return Ux(t,e.toTimestamp())}function Va(t){return tn(!!t),wt.fromTimestamp(function(n){const r=rc(n);return new vr(r.seconds,r.nanos)}(t))}function c2(t,e){return rj(t,e).canonicalString()}function rj(t,e){const n=function(s){return new fn(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lL(t){const e=fn.fromString(t);return tn(fL(e)),e}function sj(t,e){return c2(t.databaseId,e.path)}function Gb(t,e){const n=lL(e);if(n.get(1)!==t.databaseId.projectId)throw new Be(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Be(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ct(uL(n))}function cL(t,e){return c2(t.databaseId,e)}function iQ(t){const e=lL(t);return e.length===4?fn.emptyPath():uL(e)}function ij(t){return new fn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uL(t){return tn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hR(t,e,n){return{name:sj(t,e),fields:n.value.mapValue.fields}}function aQ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:vt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(tn(h===void 0||typeof h=="string"),Fr.fromBase64String(h||"")):(tn(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Fr.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?xe.UNKNOWN:sL(d.code);return new Be(h,d.message||"")}(o);n=new aL(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gb(t,r.document.name),a=Va(r.document.updateTime),o=r.document.createTime?Va(r.document.createTime):wt.min(),l=new Es({mapValue:{fields:r.document.fields}}),u=Qr.newFoundDocument(s,a,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new By(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gb(t,r.document),a=r.readTime?Va(r.readTime):wt.min(),o=Qr.newNoDocument(s,a),l=r.removedTargetIds||[];n=new By([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gb(t,r.document),a=r.removedTargetIds||[];n=new By([],a,s,null)}else{if(!("filter"in e))return vt();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new ZZ(s,a),l=r.targetId;n=new iL(l,o)}}return n}function oQ(t,e){let n;if(e instanceof Ag)n={update:hR(t,e.key,e.value)};else if(e instanceof nw)n={delete:sj(t,e.key)};else if(e instanceof yc)n={update:hR(t,e.key,e.data),updateMask:gQ(e.fieldMask)};else{if(!(e instanceof qZ))return vt();n={verify:sj(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof jp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Np)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Sp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof zx)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw vt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:sQ(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:vt()}(t,e.precondition)),n}function lQ(t,e){return t&&t.length>0?(tn(e!==void 0),t.map(n=>function(s,a){let o=s.updateTime?Va(s.updateTime):Va(a);return o.isEqual(wt.min())&&(o=Va(a)),new BZ(o,s.transformResults||[])}(n,e))):[]}function cQ(t,e){return{documents:[cL(t,e.path)]}}function uQ(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cL(t,s);const a=function(d){if(d.length!==0)return hL(sa.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Rd(p.field),direction:fQ(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=nj(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function dQ(t){let e=iQ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){tn(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=function(m){const p=dL(m);return p instanceof sa&&UD(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(j){return new _p(kd(j.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,Z0(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,y=m.values||[];return new bh(y,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,y=m.values||[];return new bh(y,p)}(n.endAt)),TZ(e,s,o,a,l,"F",u,d)}function hQ(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dL(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=kd(n.unaryFilter.field);return or.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=kd(n.unaryFilter.field);return or.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=kd(n.unaryFilter.field);return or.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=kd(n.unaryFilter.field);return or.create(o,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(t):t.fieldFilter!==void 0?function(n){return or.create(kd(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sa.create(n.compositeFilter.filters.map(r=>dL(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return vt()}}(n.compositeFilter.op))}(t):vt()}function fQ(t){return eQ[t]}function mQ(t){return tQ[t]}function pQ(t){return nQ[t]}function Rd(t){return{fieldPath:t.canonicalString()}}function kd(t){return Or.fromServerFormat(t.fieldPath)}function hL(t){return t instanceof or?function(n){if(n.op==="=="){if(JT(n.value))return{unaryFilter:{field:Rd(n.field),op:"IS_NAN"}};if(YT(n.value))return{unaryFilter:{field:Rd(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(JT(n.value))return{unaryFilter:{field:Rd(n.field),op:"IS_NOT_NAN"}};if(YT(n.value))return{unaryFilter:{field:Rd(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rd(n.field),op:mQ(n.op),value:n.value}}}(t):t instanceof sa?function(n){const r=n.getFilters().map(s=>hL(s));return r.length===1?r[0]:{compositeFilter:{op:pQ(n.op),filters:r}}}(t):vt()}function gQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n,r,s,a=wt.min(),o=wt.min(),l=Fr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Ol(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ol(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ol(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ol(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vQ{constructor(e){this.ct=e}}function yQ(t){const e=dQ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vx(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQ{constructor(){this.un=new wQ}addToCollectionParentIndex(e,n){return this.un.add(n),Re.resolve()}getCollectionParents(e,n){return Re.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Re.resolve()}deleteFieldIndex(e,n){return Re.resolve()}deleteAllFieldIndexes(e){return Re.resolve()}createTargetIndexes(e,n){return Re.resolve()}getDocumentsMatchingTarget(e,n){return Re.resolve(null)}getIndexType(e,n){return Re.resolve(0)}getFieldIndexes(e,n){return Re.resolve([])}getNextCollectionGroupToUpdate(e){return Re.resolve(null)}getMinOffset(e,n){return Re.resolve(nc.min())}getMinOffsetFromCollectionGroup(e,n){return Re.resolve(nc.min())}updateCollectionGroup(e,n,r){return Re.resolve()}updateIndexEntries(e,n){return Re.resolve()}}class wQ{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Dr(fn.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Dr(fn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new _h(0)}static kn(){return new _h(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQ{constructor(){this.changes=new Xh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Re.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Q{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Um(r.mutation,s,qs.empty(),vr.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Mt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Mt()){const s=Qc();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=xm();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Qc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Mt()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=Fo();const o=zm(),l=function(){return zm()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof yc)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Um(h.mutation,d,h.mutation.getFieldMask(),vr.now())):o.set(d.key,qs.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var m;return l.set(d,new _Q(h,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=zm();let s=new Ln((o,l)=>o-l),a=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||qs.empty();h=l.applyToLocalView(d,h),r.set(u,h);const m=(s.get(l.batchId)||Mt()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,m=QD();h.forEach(p=>{if(!a.has(p)){const y=nL(n.get(p),r.get(p));y!==null&&m.set(p,y),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return Re.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ct.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):i2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):Re.resolve(Qc());let l=-1,u=a;return o.next(d=>Re.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(h)?Re.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,Mt())).next(h=>({batchId:l,changes:ZD(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ct(n)).next(r=>{let s=xm();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=xm();return this.indexManager.getCollectionParents(e,a).next(l=>Re.forEach(l,u=>{const d=function(m,p){return new Vu(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Qr.newInvalidDocument(h)))});let l=xm();return o.forEach((u,d)=>{const h=a.get(u);h!==void 0&&Um(h.mutation,d,qs.empty(),vr.now()),X0(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NQ{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Re.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Va(s.createTime)}}(n)),Re.resolve()}getNamedQuery(e,n){return Re.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:yQ(s.bundledQuery),readTime:Va(s.readTime)}}(n)),Re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQ{constructor(){this.overlays=new Ln(ct.comparator),this.Ir=new Map}getOverlay(e,n){return Re.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qc();return Re.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.ht(e,n,a)}),Re.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),Re.resolve()}getOverlaysForCollection(e,n,r){const s=Qc(),a=n.length+1,o=new ct(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return Re.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Ln((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=Qc(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Qc(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return Re.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new KZ(n,r));let a=this.Ir.get(n);a===void 0&&(a=Mt(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EQ{constructor(){this.sessionToken=Fr.EMPTY_BYTE_STRING}getSessionToken(e){return Re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.Tr=new Dr(jr.Er),this.dr=new Dr(jr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new jr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new jr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ct(new fn([])),r=new jr(n,e),s=new jr(n,e+1),a=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ct(new fn([])),r=new jr(n,e),s=new jr(n,e+1);let a=Mt();return this.dr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new jr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class jr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ct.comparator(e.key,n.key)||Bt(e.wr,n.wr)}static Ar(e,n){return Bt(e.wr,n.wr)||ct.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Dr(jr.Er)}checkEmpty(e){return Re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new GZ(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new jr(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Re.resolve(o)}lookupMutationBatch(e,n){return Re.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return Re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new jr(n,0),s=new jr(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);a.push(l)}),Re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dr(Bt);return n.forEach(s=>{const a=new jr(s,0),o=new jr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{r=r.add(l.wr)})}),Re.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;ct.isDocumentKey(a)||(a=a.child(""));const o=new jr(new ct(a),0);let l=new Dr(Bt);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),Re.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){tn(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Re.forEach(n.mutations,s=>{const a=new jr(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new jr(n,0),s=this.br.firstAfterOrEqual(r);return Re.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Re.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CQ{constructor(e){this.Mr=e,this.docs=function(){return new Ln(ct.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Re.resolve(r?r.document.mutableCopy():Qr.newInvalidDocument(n))}getEntries(e,n){let r=Fo();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Qr.newInvalidDocument(s))}),Re.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Fo();const o=n.path,l=new ct(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||uZ(cZ(h),r)<=0||(s.has(h.key)||X0(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return Re.resolve(a)}getAllFromCollectionGroup(e,n,r,s){vt()}Or(e,n){return Re.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new TQ(this)}getSize(e){return Re.resolve(this.size)}}class TQ extends bQ{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),Re.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RQ{constructor(e){this.persistence=e,this.Nr=new Xh(n=>r2(n),s2),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new u2,this.targetCount=0,this.kr=_h.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Re.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new _h(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Re.resolve()}updateTargetData(e,n){return this.Kn(n),Re.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Re.waitFor(a).next(()=>s)}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Re.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Re.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),Re.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Re.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Re.resolve(r)}containsKey(e,n){return Re.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{constructor(e,n){this.qr={},this.overlays={},this.Qr=new e2(0),this.Kr=!1,this.Kr=!0,this.$r=new EQ,this.referenceDelegate=e(this),this.Ur=new RQ(this),this.indexManager=new xQ,this.remoteDocumentCache=function(s){return new CQ(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new vQ(n),this.Gr=new NQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new PQ(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){rt("MemoryPersistence","Starting transaction:",e);const s=new IQ(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,n){return Re.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class IQ extends hZ{constructor(e){super(),this.currentSequenceNumber=e}}class d2{constructor(e){this.persistence=e,this.Jr=new u2,this.Yr=null}static Zr(e){return new d2(e)}get Xr(){if(this.Yr)return this.Yr;throw vt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Re.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Re.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Re.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.Xr,r=>{const s=ct.fromPath(r);return this.ei(e,s).next(a=>{a||n.removeEntry(s,wt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Re.or([()=>Re.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Mt(),s=Mt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new h2(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return gH()?8:fZ(rs())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new AQ;return this.Xi(e,n,o).next(l=>{if(a.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>a.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Jf()<=Dt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",Td(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Re.resolve()):(Jf()<=Dt.DEBUG&&rt("QueryEngine","Query:",Td(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Jf()<=Dt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",Td(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$a(n))):Re.resolve())}Yi(e,n){if(nR(n))return Re.resolve(null);let r=$a(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Vx(n,null,"F"),r=$a(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Mt(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Vx(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return nR(n)||s.isEqual(wt.min())?Re.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,s)?Re.resolve(null):(Jf()<=Dt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Td(n)),this.rs(e,o,n,lZ(s,-1)).next(l=>l))})}ts(e,n){let r=new Dr(GD(e));return n.forEach((s,a)=>{X0(e,a)&&(r=r.add(a))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return Jf()<=Dt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",Td(n)),this.Ji.getDocumentsMatchingQuery(e,n,nc.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MQ{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ln(Bt),this._s=new Xh(a=>r2(a),s2),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jQ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function DQ(t,e,n,r){return new MQ(t,e,n,r)}async function mL(t,e){const n=Nt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let u=Mt();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function LQ(t,e){const n=Nt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const m=d.batch,p=m.keys();let y=Re.resolve();return p.forEach(j=>{y=y.next(()=>h.getEntry(u,j)).next(_=>{const N=d.docVersions.get(j);tn(N!==null),_.version.compareTo(N)<0&&(m.applyToRemoteDocument(_,d),_.isValidDocument()&&(_.setReadTime(d.commitVersion),h.addEntry(_)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Mt();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function pL(t){const e=Nt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function FQ(t,e){const n=Nt(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((h,m)=>{const p=s.get(m);if(!p)return;l.push(n.Ur.removeMatchingKeys(a,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(a,h.addedDocuments,m)));let y=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Fr.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(m,y),function(_,N,b){return _.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,y,h)&&l.push(n.Ur.updateTargetData(a,y))});let u=Fo(),d=Mt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push($Q(a,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!r.isEqual(wt.min())){const h=n.Ur.getLastRemoteSnapshotVersion(a).next(m=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(h)}return Re.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.os=s,a))}function $Q(t,e,n){let r=Mt(),s=Mt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Fo();return n.forEach((l,u)=>{const d=a.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(wt.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):rt("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function VQ(t,e){const n=Nt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zQ(t,e){const n=Nt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(a=>a?(s=a,Re.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Ol(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function aj(t,e,n){const r=Nt(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ig(o))throw o;rt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function fR(t,e,n){const r=Nt(t);let s=wt.min(),a=Mt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const m=Nt(u),p=m._s.get(h);return p!==void 0?Re.resolve(m.os.get(p)):m.Ur.getTargetData(d,h)}(r,o,$a(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:wt.min(),n?a:Mt())).next(l=>(UQ(r,kZ(e),l),{documents:l,Ts:a})))}function UQ(t,e,n){let r=t.us.get(e)||wt.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class mR{constructor(){this.activeTargetIds=LZ()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BQ{constructor(){this.so=new mR,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new mR,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ny=null;function Kb(){return ny===null?ny=function(){return 268435456+Math.round(2147483648*Math.random())}():ny++,"0x"+ny.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="WebChannelConnection";class GQ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,o){const l=Kb(),u=this.xo(n,r.toUriEncodedString());rt("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(n,u,d,s).then(h=>(rt("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw vh("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(n,r,s,a,o,l){return this.Mo(n,r,s,a,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jh}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),s&&s.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const s=HQ[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=Kb();return new Promise((o,l)=>{const u=new RD;u.setWithCredentials(!0),u.listenOnce(kD.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vy.NO_ERROR:const h=u.getResponseJson();rt(Hr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Vy.TIMEOUT:rt(Hr,`RPC '${e}' ${a} timed out`),l(new Be(xe.DEADLINE_EXCEEDED,"Request time out"));break;case Vy.HTTP_ERROR:const m=u.getStatus();if(rt(Hr,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const j=function(N){const b=N.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(b)>=0?b:xe.UNKNOWN}(y.status);l(new Be(j,y.message))}else l(new Be(xe.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Be(xe.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{rt(Hr,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);rt(Hr,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Kb(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OD(),l=AD(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");rt(Hr,`Creating RPC '${e}' stream ${s}: ${h}`,u);const m=o.createWebChannel(h,u);let p=!1,y=!1;const j=new qQ({Io:N=>{y?rt(Hr,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(p||(rt(Hr,`Opening RPC '${e}' stream ${s} transport.`),m.open(),p=!0),rt(Hr,`RPC '${e}' stream ${s} sending:`,N),m.send(N))},To:()=>m.close()}),_=(N,b,x)=>{N.listen(b,S=>{try{x(S)}catch(C){setTimeout(()=>{throw C},0)}})};return _(m,ym.EventType.OPEN,()=>{y||(rt(Hr,`RPC '${e}' stream ${s} transport opened.`),j.yo())}),_(m,ym.EventType.CLOSE,()=>{y||(y=!0,rt(Hr,`RPC '${e}' stream ${s} transport closed`),j.So())}),_(m,ym.EventType.ERROR,N=>{y||(y=!0,vh(Hr,`RPC '${e}' stream ${s} transport errored:`,N),j.So(new Be(xe.UNAVAILABLE,"The operation could not be completed")))}),_(m,ym.EventType.MESSAGE,N=>{var b;if(!y){const x=N.data[0];tn(!!x);const S=x,C=S.error||((b=S[0])===null||b===void 0?void 0:b.error);if(C){rt(Hr,`RPC '${e}' stream ${s} received error:`,C);const R=C.status;let z=function(V){const T=rr[V];if(T!==void 0)return sL(T)}(R),k=C.message;z===void 0&&(z=xe.INTERNAL,k="Unknown error status: "+R+" with message "+C.message),y=!0,j.So(new Be(z,k)),m.close()}else rt(Hr,`RPC '${e}' stream ${s} received:`,x),j.bo(x)}}),_(l,ID.STAT_EVENT,N=>{N.stat===Q1.PROXY?rt(Hr,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Q1.NOPROXY&&rt(Hr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{j.wo()},0),j}}function Zb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t){return new rQ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&rt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n,r,s,a,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gL(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===xe.RESOURCE_EXHAUSTED?(Lo(n.toString()),Lo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Be(xe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return rt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KQ extends vL{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=aQ(this.serializer,e),r=function(a){if(!("targetChange"in a))return wt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?wt.min():o.readTime?Va(o.readTime):wt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ij(this.serializer),n.addTarget=function(a,o){let l;const u=o.target;if(l=ej(u)?{documents:cQ(a,u)}:{query:uQ(a,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=oL(a,o.resumeToken);const d=nj(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(wt.min())>0){l.readTime=Ux(a,o.snapshotVersion.toTimestamp());const d=nj(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=hQ(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ij(this.serializer),n.removeTarget=e,this.a_(n)}}class ZQ extends vL{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return tn(!!e.streamToken),this.lastStreamToken=e.streamToken,tn(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){tn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=lQ(e.writeResults,e.commitTime),r=Va(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ij(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>oQ(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Be(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,rj(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Be(xe.UNKNOWN,a.toString())})}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,rj(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Be(xe.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class YQ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Lo(n),this.D_=!1):rt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{zu(this)&&(rt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=Nt(u);d.L_.add(4),await Mg(d),d.q_.set("Unknown"),d.L_.delete(4),await iw(d)}(this))})}),this.q_=new YQ(r,s)}}async function iw(t){if(zu(t))for(const e of t.B_)await e(!0)}async function Mg(t){for(const e of t.B_)await e(!1)}function yL(t,e){const n=Nt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),g2(n)?p2(n):ef(n).r_()&&m2(n,e))}function f2(t,e){const n=Nt(t),r=ef(n);n.N_.delete(e),r.r_()&&xL(n,e),n.N_.size===0&&(r.r_()?r.o_():zu(n)&&n.q_.set("Unknown"))}function m2(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ef(t).A_(e)}function xL(t,e){t.Q_.xe(e),ef(t).R_(e)}function p2(t){t.Q_=new XZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ef(t).start(),t.q_.v_()}function g2(t){return zu(t)&&!ef(t).n_()&&t.N_.size>0}function zu(t){return Nt(t).L_.size===0}function wL(t){t.Q_=void 0}async function XQ(t){t.q_.set("Online")}async function eY(t){t.N_.forEach((e,n)=>{m2(t,e)})}async function tY(t,e){wL(t),g2(t)?(t.q_.M_(e),p2(t)):t.q_.set("Unknown")}async function nY(t,e,n){if(t.q_.set("Online"),e instanceof aL&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){rt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bx(t,r)}else if(e instanceof By?t.Q_.Ke(e):e instanceof iL?t.Q_.He(e):t.Q_.We(e),!n.isEqual(wt.min()))try{const r=await pL(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.N_.get(d);h&&a.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=a.N_.get(u);if(!h)return;a.N_.set(u,h.withResumeToken(Fr.EMPTY_BYTE_STRING,h.snapshotVersion)),xL(a,u);const m=new Ol(h.target,u,d,h.sequenceNumber);m2(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){rt("RemoteStore","Failed to raise snapshot:",r),await Bx(t,r)}}async function Bx(t,e,n){if(!Ig(e))throw e;t.L_.add(1),await Mg(t),t.q_.set("Offline"),n||(n=()=>pL(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{rt("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await iw(t)})}function bL(t,e){return e().catch(n=>Bx(t,n,e))}async function aw(t){const e=Nt(t),n=sc(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;rY(e);)try{const s=await VQ(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,sY(e,s)}catch(s){await Bx(e,s)}_L(e)&&jL(e)}function rY(t){return zu(t)&&t.O_.length<10}function sY(t,e){t.O_.push(e);const n=sc(t);n.r_()&&n.V_&&n.m_(e.mutations)}function _L(t){return zu(t)&&!sc(t).n_()&&t.O_.length>0}function jL(t){sc(t).start()}async function iY(t){sc(t).p_()}async function aY(t){const e=sc(t);for(const n of t.O_)e.m_(n.mutations)}async function oY(t,e,n){const r=t.O_.shift(),s=o2.from(r,e,n);await bL(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await aw(t)}async function lY(t,e){e&&sc(t).V_&&await async function(r,s){if(function(o){return QZ(o)&&o!==xe.ABORTED}(s.code)){const a=r.O_.shift();sc(r).s_(),await bL(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await aw(r)}}(t,e),_L(t)&&jL(t)}async function gR(t,e){const n=Nt(t);n.asyncQueue.verifyOperationInProgress(),rt("RemoteStore","RemoteStore received new credentials");const r=zu(n);n.L_.add(3),await Mg(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await iw(n)}async function cY(t,e){const n=Nt(t);e?(n.L_.delete(2),await iw(n)):e||(n.L_.add(2),await Mg(n),n.q_.set("Unknown"))}function ef(t){return t.K_||(t.K_=function(n,r,s){const a=Nt(n);return a.w_(),new KQ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:XQ.bind(null,t),Ro:eY.bind(null,t),mo:tY.bind(null,t),d_:nY.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),g2(t)?p2(t):t.q_.set("Unknown")):(await t.K_.stop(),wL(t))})),t.K_}function sc(t){return t.U_||(t.U_=function(n,r,s){const a=Nt(n);return a.w_(),new ZQ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iY.bind(null,t),mo:lY.bind(null,t),f_:aY.bind(null,t),g_:oY.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await aw(t)):(await t.U_.stop(),t.O_.length>0&&(rt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Co,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new v2(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Be(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function y2(t,e){if(Lo("AsyncQueue",`${e}: ${t}`),Ig(t))return new Be(xe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ct.comparator(n.key,r.key):(n,r)=>ct.comparator(n.key,r.key),this.keyedMap=xm(),this.sortedSet=new Ln(this.comparator)}static emptySet(e){return new sh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new sh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.W_=new Ln(ct.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):vt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class jh{constructor(e,n,r,s,a,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new jh(e,n,sh.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&J0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class dY{constructor(){this.queries=yR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Nt(n),a=s.queries;s.queries=yR(),a.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Be(xe.ABORTED,"Firestore shutting down"))}}function yR(){return new Xh(t=>qD(t),J0)}async function x2(t,e){const n=Nt(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new uY,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=y2(o,`Initialization of query '${Td(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&b2(n)}async function w2(t,e){const n=Nt(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hY(t,e){const n=Nt(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&b2(n)}function fY(t,e,n){const r=Nt(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function b2(t){t.Y_.forEach(e=>{e.next()})}var oj,xR;(xR=oj||(oj={})).ea="default",xR.Cache="cache";class _2{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new jh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=jh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==oj.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.key=e}}class SL{constructor(e){this.key=e}}class mY{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Mt(),this.mutatedKeys=Mt(),this.Aa=GD(e),this.Ra=new sh(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new vR,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const p=s.get(h),y=X0(this.query,m)?m:null,j=!!p&&this.mutatedKeys.has(p.key),_=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let N=!1;p&&y?p.data.isEqual(y.data)?j!==_&&(r.track({type:3,doc:y}),N=!0):this.ga(p,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Aa(y,u)>0||d&&this.Aa(y,d)<0)&&(l=!0)):!p&&y?(r.track({type:0,doc:y}),N=!0):p&&!y&&(r.track({type:1,doc:p}),N=!0,(u||d)&&(l=!0)),N&&(y?(o=o.add(y),a=_?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:l,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(y,j){const _=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return _(y)-_(j)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new jh(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vR,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Mt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new SL(r))}),this.da.forEach(r=>{e.has(r)||n.push(new NL(r))}),n}ba(e){this.Ta=e.Ts,this.da=Mt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return jh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class pY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class gY{constructor(e){this.key=e,this.va=!1}}class vY{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Xh(l=>qD(l),J0),this.Ma=new Map,this.xa=new Set,this.Oa=new Ln(ct.comparator),this.Na=new Map,this.La=new u2,this.Ba={},this.ka=new Map,this.qa=_h.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function yY(t,e,n=!0){const r=kL(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await EL(r,e,n,!0),s}async function xY(t,e){const n=kL(t);await EL(n,e,!0,!1)}async function EL(t,e,n,r){const s=await zQ(t.localStore,$a(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await wY(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&yL(t.remoteStore,s),l}async function wY(t,e,n,r,s){t.Ka=(m,p,y)=>async function(_,N,b,x){let S=N.view.ma(b);S.ns&&(S=await fR(_.localStore,N.query,!1).then(({documents:k})=>N.view.ma(k,S)));const C=x&&x.targetChanges.get(N.targetId),R=x&&x.targetMismatches.get(N.targetId)!=null,z=N.view.applyChanges(S,_.isPrimaryClient,C,R);return bR(_,N.targetId,z.wa),z.snapshot}(t,m,p,y);const a=await fR(t.localStore,e,!0),o=new mY(e,a.Ts),l=o.ma(a.documents),u=Og.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);bR(t,n,d.wa);const h=new pY(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function bY(t,e,n){const r=Nt(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter(o=>!J0(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await aj(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&f2(r.remoteStore,s.targetId),lj(r,s.targetId)}).catch(kg)):(lj(r,s.targetId),await aj(r.localStore,s.targetId,!0))}async function _Y(t,e){const n=Nt(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),f2(n.remoteStore,r.targetId))}async function jY(t,e,n){const r=RY(t);try{const s=await function(o,l){const u=Nt(o),d=vr.now(),h=l.reduce((y,j)=>y.add(j.key),Mt());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let j=Fo(),_=Mt();return u.cs.getEntries(y,h).next(N=>{j=N,j.forEach((b,x)=>{x.isValidDocument()||(_=_.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,j)).next(N=>{m=N;const b=[];for(const x of l){const S=HZ(x,m.get(x.key).overlayedDocument);S!=null&&b.push(new yc(x.key,S,$D(S.value.mapValue),ps.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,b,l)}).next(N=>{p=N;const b=N.applyToLocalDocumentSet(m,_);return u.documentOverlayCache.saveOverlays(y,N.batchId,b)})}).then(()=>({batchId:p.batchId,changes:ZD(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ln(Bt)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Dg(r,s.changes),await aw(r.remoteStore)}catch(s){const a=y2(s,"Failed to persist write");n.reject(a)}}async function PL(t,e){const n=Nt(t);try{const r=await FQ(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Na.get(a);o&&(tn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?tn(o.va):s.removedDocuments.size>0&&(tn(o.va),o.va=!1))}),await Dg(n,r,e)}catch(r){await kg(r)}}function wR(t,e,n){const r=Nt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Nt(o);u.onlineState=l;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.j_)p.Z_(l)&&(d=!0)}),d&&b2(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NY(t,e,n){const r=Nt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let o=new Ln(ct.comparator);o=o.insert(a,Qr.newNoDocument(a,wt.min()));const l=Mt().add(a),u=new rw(wt.min(),new Map,new Ln(Bt),o,l);await PL(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),j2(r)}else await aj(r.localStore,e,!1).then(()=>lj(r,e,n)).catch(kg)}async function SY(t,e){const n=Nt(t),r=e.batch.batchId;try{const s=await LQ(n.localStore,e);TL(n,r,null),CL(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Dg(n,s)}catch(s){await kg(s)}}async function EY(t,e,n){const r=Nt(t);try{const s=await function(o,l){const u=Nt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(tn(m!==null),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);TL(r,e,n),CL(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Dg(r,s)}catch(s){await kg(s)}}function CL(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function TL(t,e,n){const r=Nt(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function lj(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||RL(t,r)})}function RL(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(f2(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),j2(t))}function bR(t,e,n){for(const r of n)r instanceof NL?(t.La.addReference(r.key,e),PY(t,r)):r instanceof SL?(rt("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||RL(t,r.key)):vt()}function PY(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(rt("SyncEngine","New document in limbo: "+n),t.xa.add(r),j2(t))}function j2(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ct(fn.fromString(e)),r=t.qa.next();t.Na.set(r,new gY(n)),t.Oa=t.Oa.insert(n,r),yL(t.remoteStore,new Ol($a(Y0(n.path)),r,"TargetPurposeLimboResolution",e2.oe))}}async function Dg(t,e,n){const r=Nt(t),s=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=h2.Wi(u.targetId,d);a.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const h=Nt(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Re.forEach(d,p=>Re.forEach(p.$i,y=>h.persistence.referenceDelegate.addReference(m,p.targetId,y)).next(()=>Re.forEach(p.Ui,y=>h.persistence.referenceDelegate.removeReference(m,p.targetId,y)))))}catch(m){if(!Ig(m))throw m;rt("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const y=h.os.get(p),j=y.snapshotVersion,_=y.withLastLimboFreeSnapshotVersion(j);h.os=h.os.insert(p,_)}}}(r.localStore,a))}async function CY(t,e){const n=Nt(t);if(!n.currentUser.isEqual(e)){rt("SyncEngine","User change. New user:",e.toKey());const r=await mL(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(u=>{u.reject(new Be(xe.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Dg(n,r.hs)}}function TY(t,e){const n=Nt(t),r=n.Na.get(e);if(r&&r.va)return Mt().add(r.key);{let s=Mt();const a=n.Ma.get(e);if(!a)return s;for(const o of a){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function kL(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NY.bind(null,e),e.Ca.d_=hY.bind(null,e.eventManager),e.Ca.$a=fY.bind(null,e.eventManager),e}function RY(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EY.bind(null,e),e}class Wx{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sw(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return DQ(this.persistence,new OQ,e.initialUser,this.serializer)}Ga(e){return new kQ(d2.Zr,this.serializer)}Wa(e){return new BQ}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wx.provider={build:()=>new Wx};class cj{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CY.bind(null,this.syncEngine),await cY(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dY}()}createDatastore(e){const n=sw(e.databaseInfo.databaseId),r=function(a){return new GQ(a)}(e.databaseInfo);return function(a,o,l,u){return new QQ(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new JQ(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>wR(this.syncEngine,n,0),function(){return pR.D()?new pR:new WQ}())}createSyncEngine(e,n){return function(s,a,o,l,u,d,h){const m=new vY(s,a,o,l,u,d);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Nt(s);rt("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Mg(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}cj.provider={build:()=>new cj};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Lo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kY{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Kr.UNAUTHENTICATED,this.clientId=DD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{rt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(rt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Co;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=y2(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qb(t,e){t.asyncQueue.verifyOperationInProgress(),rt("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await mL(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _R(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IY(t);rt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>gR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>gR(e.remoteStore,s)),t._onlineComponents=e}async function IY(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){rt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===xe.FAILED_PRECONDITION||s.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;vh("Error using user provided cache. Falling back to memory cache: "+n),await Qb(t,new Wx)}}else rt("FirestoreClient","Using default OfflineComponentProvider"),await Qb(t,new Wx);return t._offlineComponents}async function IL(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(rt("FirestoreClient","Using user provided OnlineComponentProvider"),await _R(t,t._uninitializedComponentsProvider._online)):(rt("FirestoreClient","Using default OnlineComponentProvider"),await _R(t,new cj))),t._onlineComponents}function AY(t){return IL(t).then(e=>e.syncEngine)}async function Hx(t){const e=await IL(t),n=e.eventManager;return n.onListen=yY.bind(null,e.syncEngine),n.onUnlisten=bY.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=xY.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_Y.bind(null,e.syncEngine),n}function OY(t,e,n={}){const r=new Co;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new N2({next:p=>{h.Za(),o.enqueueAndForget(()=>w2(a,m));const y=p.docs.has(l);!y&&p.fromCache?d.reject(new Be(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&u&&u.source==="server"?d.reject(new Be(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new _2(Y0(l.path),h,{includeMetadataChanges:!0,_a:!0});return x2(a,m)}(await Hx(t),t.asyncQueue,e,n,r)),r.promise}function MY(t,e,n={}){const r=new Co;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new N2({next:p=>{h.Za(),o.enqueueAndForget(()=>w2(a,m)),p.fromCache&&u.source==="server"?d.reject(new Be(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new _2(l,h,{includeMetadataChanges:!0,_a:!0});return x2(a,m)}(await Hx(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t,e,n){if(!n)throw new Be(xe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DY(t,e,n,r){if(e===!0&&r===!0)throw new Be(xe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function NR(t){if(!ct.isDocumentKey(t))throw new Be(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function SR(t){if(ct.isDocumentKey(t))throw new Be(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ow(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":vt()}function gs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Be(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ow(t);throw new Be(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function LY(t,e){if(e<=0)throw new Be(xe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Be(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Be(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AL((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Be(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Be(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Be(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lw{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ER({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Be(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Be(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ER(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XK;switch(r.type){case"firstParty":return new rZ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Be(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jR.get(n);r&&(rt("ComponentProvider","Removing Datastore"),jR.delete(n),r.terminate())}(this),Promise.resolve()}}function FY(t,e,n,r={}){var s;const a=(t=gs(t,lw))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&vh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Kr.MOCK_USER;else{l=FM(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Be(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Kr(d)}t._authCredentials=new eZ(new MD(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ya(this.firestore,e,this._query)}}class es{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new es(this.firestore,e,this._key)}}class Kl extends Ya{constructor(e,n,r){super(e,n,Y0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new es(this.firestore,null,new ct(e))}withConverter(e){return new Kl(this.firestore,e,this._path)}}function Ht(t,e,...n){if(t=Gt(t),OL("collection","path",e),t instanceof lw){const r=fn.fromString(e,...n);return SR(r),new Kl(t,null,r)}{if(!(t instanceof es||t instanceof Kl))throw new Be(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fn.fromString(e,...n));return SR(r),new Kl(t.firestore,null,r)}}function _t(t,e,...n){if(t=Gt(t),arguments.length===1&&(e=DD.newId()),OL("doc","path",e),t instanceof lw){const r=fn.fromString(e,...n);return NR(r),new es(t,null,new ct(r))}{if(!(t instanceof es||t instanceof Kl))throw new Be(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fn.fromString(e,...n));return NR(r),new es(t.firestore,t instanceof Kl?t.converter:null,new ct(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gL(this,"async_queue_retry"),this.Vu=()=>{const r=Zb();r&&rt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Zb();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Zb();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Co;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ig(e))throw e;rt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Lo("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=v2.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&vt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function CR(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class qa extends lw{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new PR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PR(e),this._firestoreClient=void 0,await e}}}function ML(t,e){const n=typeof t=="object"?t:US(),r=typeof t=="string"?t:"(default)",s=H0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=MM("firestore");a&&FY(s,...a)}return s}function Lg(t){if(t._terminated)throw new Be(xe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$Y(t),t._firestoreClient}function $Y(t){var e,n,r;const s=t._freezeSettings(),a=function(l,u,d,h){return new gZ(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,AL(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new kY(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nh(Fr.fromBase64String(e))}catch(n){throw new Be(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nh(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Be(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Be(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Be(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VY=/^__.*__$/;class zY{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ag(e,this.data,n,this.fieldTransforms)}}class DL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new yc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class P2{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new P2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return qx(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(LL(this.Cu)&&VY.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class UY{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sw(e)}Qu(e,n,r,s=!1){return new P2({Cu:e,methodName:n,qu:r,path:Or.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tf(t){const e=t._freezeSettings(),n=sw(t._databaseId);return new UY(t._databaseId,!!e.ignoreUndefinedProperties,n)}function C2(t,e,n,r,s,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);R2("Data must be an object, but it was:",o,r);const l=zL(r,o);let u,d;if(a.merge)u=new qs(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const m of a.mergeFields){const p=uj(e,m,n);if(!o.contains(p))throw new Be(xe.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);BL(h,p)||h.push(p)}u=new qs(h),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new zY(new Es(l),u,d)}class uw extends cw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uw}}class T2 extends cw{_toFieldTransform(e){return new zZ(e.path,new jp)}isEqual(e){return e instanceof T2}}function FL(t,e,n,r){const s=t.Qu(1,e,n);R2("Data must be an object, but it was:",s,r);const a=[],o=Es.empty();$u(r,(u,d)=>{const h=k2(e,u,n);d=Gt(d);const m=s.Nu(h);if(d instanceof uw)a.push(h);else{const p=$g(d,m);p!=null&&(a.push(h),o.set(h,p))}});const l=new qs(a);return new DL(o,l,s.fieldTransforms)}function $L(t,e,n,r,s,a){const o=t.Qu(1,e,n),l=[uj(e,r,n)],u=[s];if(a.length%2!=0)throw new Be(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)l.push(uj(e,a[p])),u.push(a[p+1]);const d=[],h=Es.empty();for(let p=l.length-1;p>=0;--p)if(!BL(d,l[p])){const y=l[p];let j=u[p];j=Gt(j);const _=o.Nu(y);if(j instanceof uw)d.push(y);else{const N=$g(j,_);N!=null&&(d.push(y),h.set(y,N))}}const m=new qs(d);return new DL(h,m,o.fieldTransforms)}function VL(t,e,n,r=!1){return $g(n,t.Qu(r?4:3,e))}function $g(t,e){if(UL(t=Gt(t)))return R2("Unsupported field value:",e,t),zL(t,e);if(t instanceof cw)return function(r,s){if(!LL(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let u=$g(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FZ(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=vr.fromDate(r);return{timestampValue:Ux(s.serializer,a)}}if(r instanceof vr){const a=new vr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ux(s.serializer,a)}}if(r instanceof S2)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nh)return{bytesValue:oL(s.serializer,r._byteString)};if(r instanceof es){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:c2(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof E2)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return a2(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${ow(r)}`)}(t,e)}function zL(t,e){const n={};return LD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$u(t,(r,s)=>{const a=$g(s,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function UL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vr||t instanceof S2||t instanceof Nh||t instanceof es||t instanceof cw||t instanceof E2)}function R2(t,e,n){if(!UL(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ow(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function uj(t,e,n){if((e=Gt(e))instanceof Fg)return e._internalPath;if(typeof e=="string")return k2(t,e);throw qx("Field path arguments must be of type string or ",t,!1,void 0,n)}const BY=new RegExp("[~\\*/\\[\\]]");function k2(t,e,n){if(e.search(BY)>=0)throw qx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fg(...e.split("."))._internalPath}catch{throw qx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qx(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Be(xe.INVALID_ARGUMENT,l+t+u)}function BL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new es(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WY extends I2{data(){return super.data()}}function dw(t,e){return typeof e=="string"?k2(t,e):e instanceof Fg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Be(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class A2{}class hw extends A2{}function Tn(t,e,...n){let r=[];e instanceof A2&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof O2).length,l=a.filter(u=>u instanceof fw).length;if(o>1||o>0&&l>0)throw new Be(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class fw extends hw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fw(e,n,r)}_apply(e){const n=this._parse(e);return HL(e._query,n),new Ya(e.firestore,e.converter,tj(e._query,n))}_parse(e){const n=tf(e.firestore);return function(a,o,l,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Be(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){kR(m,h);const y=[];for(const j of m)y.push(RR(u,a,j));p={arrayValue:{values:y}}}else p=RR(u,a,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||kR(m,h),p=VL(l,o,m,h==="in"||h==="not-in");return or.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function lr(t,e,n){const r=e,s=dw("where",t);return fw._create(s,r,n)}class O2 extends A2{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new O2(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sa.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const u of l)HL(o,u),o=tj(o,u)}(e._query,n),new Ya(e.firestore,e.converter,tj(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class M2 extends hw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new M2(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new Be(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Be(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _p(a,o)}(e._query,this._field,this._direction);return new Ya(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new Vu(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function TR(t,e="asc"){const n=e,r=dw("orderBy",t);return M2._create(r,n)}class D2 extends hw{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new D2(e,n,r)}_apply(e){return new Ya(e.firestore,e.converter,Vx(e._query,this._limit,this._limitType))}}function ji(t){return LY("limit",t),D2._create("limit",t,"F")}class L2 extends hw{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new L2(e,n,r)}_apply(e){const n=qY(e,this.type,this._docOrFields,this._inclusive);return new Ya(e.firestore,e.converter,function(s,a){return new Vu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)}(e._query,n))}}function HY(...t){return L2._create("startAfter",t,!1)}function qY(t,e,n,r){if(n[0]=Gt(n[0]),n[0]instanceof I2)return function(a,o,l,u,d){if(!u)throw new Be(xe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const m of rh(a))if(m.field.isKeyField())h.push($x(o,u.key));else{const p=u.data.field(m.field);if(Q0(p))throw new Be(xe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=m.field.canonicalString();throw new Be(xe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(p)}return new bh(h,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=tf(t.firestore);return function(o,l,u,d,h,m){const p=o.explicitOrderBy;if(h.length>p.length)throw new Be(xe.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let j=0;j<h.length;j++){const _=h[j];if(p[j].field.isKeyField()){if(typeof _!="string")throw new Be(xe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof _}`);if(!i2(o)&&_.indexOf("/")!==-1)throw new Be(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${_}' contains a slash.`);const N=o.path.child(fn.fromString(_));if(!ct.isDocumentKey(N))throw new Be(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const b=new ct(N);y.push($x(l,b))}else{const N=VL(u,d,_);y.push(N)}}return new bh(y,m)}(t._query,t.firestore._databaseId,s,e,n,r)}}function RR(t,e,n){if(typeof(n=Gt(n))=="string"){if(n==="")throw new Be(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i2(e)&&n.indexOf("/")!==-1)throw new Be(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(fn.fromString(n));if(!ct.isDocumentKey(r))throw new Be(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $x(t,new ct(r))}if(n instanceof es)return $x(t,n._key);throw new Be(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ow(n)}.`)}function kR(t,e){if(!Array.isArray(t)||t.length===0)throw new Be(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HL(t,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Be(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Be(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class GY{convertValue(e,n="none"){switch(ju(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_u(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw vt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $u(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>qn(o.doubleValue));return new E2(a)}convertGeoPoint(e){return new S2(qn(e.latitude),qn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=t2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xp(e));default:return null}}convertTimestamp(e){const n=rc(e);return new vr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=fn.fromString(e);tn(fL(r));const s=new wp(r.get(1),r.get(3)),a=new ct(r.popFirst(5));return s.isEqual(n)||Lo(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qL extends I2{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Wy extends qL{data(e={}){return super.data(e)}}class GL{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new bm(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Wy(this._firestore,this._userDataWriter,r.key,r,new bm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Be(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Wy(s._firestore,s._userDataWriter,l.doc.key,l.doc,new bm(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new Wy(s._firestore,s._userDataWriter,l.doc.key,l.doc,new bm(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:KY(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function KY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t){t=gs(t,es);const e=gs(t.firestore,qa);return OY(Lg(e),t._key).then(n=>KL(e,t,n))}class $2 extends GY{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nh(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new es(this.firestore,null,n)}}function Zn(t){t=gs(t,Ya);const e=gs(t.firestore,qa),n=Lg(e),r=new $2(e);return WL(t._query),MY(n,t._query).then(s=>new GL(e,r,t,s))}function Yc(t,e,n){t=gs(t,es);const r=gs(t.firestore,qa),s=F2(t.converter,e,n);return Vg(r,[C2(tf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ps.none())])}function Cn(t,e,n,...r){t=gs(t,es);const s=gs(t.firestore,qa),a=tf(s);let o;return o=typeof(e=Gt(e))=="string"||e instanceof Fg?$L(a,"updateDoc",t._key,e,n,r):FL(a,"updateDoc",t._key,e),Vg(s,[o.toMutation(t._key,ps.exists(!0))])}function Sh(t){return Vg(gs(t.firestore,qa),[new nw(t._key,ps.none())])}function ic(t,e){const n=gs(t.firestore,qa),r=_t(t),s=F2(t.converter,e);return Vg(n,[C2(tf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ps.exists(!1))]).then(()=>r)}function IR(t,...e){var n,r,s;t=Gt(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||CR(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(CR(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,h;if(t instanceof es)d=gs(t.firestore,qa),h=Y0(t._key.path),u={next:m=>{e[o]&&e[o](KL(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=gs(t,Ya);d=gs(m.firestore,qa),h=m._query;const p=new $2(d);u={next:y=>{e[o]&&e[o](new GL(d,p,m,y))},error:e[o+1],complete:e[o+2]},WL(t._query)}return function(p,y,j,_){const N=new N2(_),b=new _2(y,N,j);return p.asyncQueue.enqueueAndForget(async()=>x2(await Hx(p),b)),()=>{N.Za(),p.asyncQueue.enqueueAndForget(async()=>w2(await Hx(p),b))}}(Lg(d),h,l,u)}function Vg(t,e){return function(r,s){const a=new Co;return r.asyncQueue.enqueueAndForget(async()=>jY(await AY(r),s,a)),a.promise}(Lg(t),e)}function KL(t,e,n){const r=n.docs.get(e._key),s=new $2(t);return new qL(t,s,e._key,r,new bm(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZY{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=tf(e)}set(e,n,r){this._verifyNotCommitted();const s=Yb(e,this._firestore),a=F2(s.converter,n,r),o=C2(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,ps.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=Yb(e,this._firestore);let o;return o=typeof(n=Gt(n))=="string"||n instanceof Fg?$L(this._dataReader,"WriteBatch.update",a._key,n,r,s):FL(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,ps.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Yb(e,this._firestore);return this._mutations=this._mutations.concat(new nw(n._key,ps.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yb(t,e){if((t=Gt(t)).firestore!==e)throw new Be(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function fr(){return new T2("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t){return Lg(t=gs(t,qa)),new ZY(t,e=>Vg(t,e))}(function(e,n=!0){(function(s){Jh=s})(Fu),vu(new ec("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new qa(new tZ(r.getProvider("auth-internal")),new iZ(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Be(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wp(d.options.projectId,h)}(o,s),o);return a=Object.assign({useFetchStreams:n},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Da(qT,"4.7.3",e),Da(qT,"4.7.3","esm2017")})();var QY="firebase",YY="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Da(QY,YY,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL="firebasestorage.googleapis.com",YL="storageBucket",JY=2*60*1e3,XY=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Qa{constructor(e,n,r=0){super(Jb(e),`Firebase Storage: ${n} (${Jb(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bn||(Bn={}));function Jb(t){return"storage/"+t}function V2(){const t="An unknown error occurred, please check the error payload for server response.";return new Wn(Bn.UNKNOWN,t)}function eJ(t){return new Wn(Bn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function tJ(t){return new Wn(Bn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function nJ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Wn(Bn.UNAUTHENTICATED,t)}function rJ(){return new Wn(Bn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function sJ(t){return new Wn(Bn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function iJ(){return new Wn(Bn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aJ(){return new Wn(Bn.CANCELED,"User canceled the upload/download.")}function oJ(t){return new Wn(Bn.INVALID_URL,"Invalid URL '"+t+"'.")}function lJ(t){return new Wn(Bn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function cJ(){return new Wn(Bn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YL+"' property when initializing the app?")}function uJ(){return new Wn(Bn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dJ(){return new Wn(Bn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hJ(t){return new Wn(Bn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function dj(t){return new Wn(Bn.INVALID_ARGUMENT,t)}function JL(){return new Wn(Bn.APP_DELETED,"The Firebase app was deleted.")}function fJ(t){return new Wn(Bn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bm(t,e){return new Wn(Bn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Xf(t){throw new Wn(Bn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Gs.makeFromUrl(e,n)}catch{return new Gs(e,"")}if(r.path==="")return r;throw lJ(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(C){C.path_=decodeURIComponent(C.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${h}/b/${s}/o${p}`,"i"),j={bucket:1,path:3},_=n===QL?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",b=new RegExp(`^https?://${_}/${s}/${N}`,"i"),S=[{regex:l,indices:u,postModify:a},{regex:y,indices:j,postModify:d},{regex:b,indices:{bucket:1,path:2},postModify:d}];for(let C=0;C<S.length;C++){const R=S[C],z=R.regex.exec(e);if(z){const k=z[R.indices.bucket];let I=z[R.indices.path];I||(I=""),r=new Gs(k,I),R.postModify(r);break}}if(r==null)throw oJ(e);return r}}class mJ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pJ(t,e,n){let r=1,s=null,a=null,o=!1,l=0;function u(){return l===2}let d=!1;function h(...N){d||(d=!0,e.apply(null,N))}function m(N){s=setTimeout(()=>{s=null,t(y,u())},N)}function p(){a&&clearTimeout(a)}function y(N,...b){if(d){p();return}if(N){p(),h.call(null,N,...b);return}if(u()||o){p(),h.call(null,N,...b);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,m(S)}let j=!1;function _(N){j||(j=!0,p(),!d&&(s!==null?(N||(l=2),clearTimeout(s),m(0)):N||(l=1)))}return m(0),a=setTimeout(()=>{o=!0,_(!0)},n),_}function gJ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vJ(t){return t!==void 0}function yJ(t){return typeof t=="object"&&!Array.isArray(t)}function z2(t){return typeof t=="string"||t instanceof String}function AR(t){return U2()&&t instanceof Blob}function U2(){return typeof Blob<"u"}function OR(t,e,n,r){if(r<e)throw dj(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw dj(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function XL(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var su;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(su||(su={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xJ(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wJ{constructor(e,n,r,s,a,o,l,u,d,h,m,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,j)=>{this.resolve_=y,this.reject_=j,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ry(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===su.NO_ERROR,u=a.getStatus();if(!l||xJ(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===su.ABORT;r(!1,new ry(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new ry(d,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());vJ(u)?a(u):a()}catch(u){o(u)}else if(l!==null){const u=V2();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?JL():aJ();o(u)}else{const u=iJ();o(u)}};this.canceled_?n(!1,new ry(!1,null,!0)):this.backoffId_=pJ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gJ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ry{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function bJ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function _J(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jJ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function NJ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function SJ(t,e,n,r,s,a,o=!0){const l=XL(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return jJ(d,e),bJ(d,n),_J(d,a),NJ(d,r),new wJ(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function PJ(...t){const e=EJ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(U2())return new Blob(t);throw new Wn(Bn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function CJ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TJ(t){if(typeof atob>"u")throw hJ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xb{constructor(e,n){this.data=e,this.contentType=n||null}}function RJ(t,e){switch(t){case Ta.RAW:return new Xb(e3(e));case Ta.BASE64:case Ta.BASE64URL:return new Xb(t3(t,e));case Ta.DATA_URL:return new Xb(IJ(e),AJ(e))}throw V2()}function e3(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function kJ(t){let e;try{e=decodeURIComponent(t)}catch{throw Bm(Ta.DATA_URL,"Malformed data URL.")}return e3(e)}function t3(t,e){switch(t){case Ta.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw Bm(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ta.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw Bm(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=TJ(e)}catch(s){throw s.message.includes("polyfill")?s:Bm(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class n3{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Bm(Ta.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=OJ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function IJ(t){const e=new n3(t);return e.base64?t3(Ta.BASE64,e.rest):kJ(e.rest)}function AJ(t){return new n3(t).contentType}function OJ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){let r=0,s="";AR(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(AR(this.data_)){const r=this.data_,s=CJ(r,e,n);return s===null?null:new Cl(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Cl(r,!0)}}static getBlob(...e){if(U2()){const n=e.map(r=>r instanceof Cl?r.data_:r);return new Cl(PJ.apply(null,n))}else{const n=e.map(o=>z2(o)?RJ(Ta.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[a++]=o[l]}),new Cl(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t){let e;try{e=JSON.parse(t)}catch{return null}return yJ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MJ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function DJ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function s3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LJ(t,e){return e}class ls{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||LJ}}let sy=null;function FJ(t){return!z2(t)||t.length<2?t:s3(t)}function i3(){if(sy)return sy;const t=[];t.push(new ls("bucket")),t.push(new ls("generation")),t.push(new ls("metageneration")),t.push(new ls("name","fullPath",!0));function e(a,o){return FJ(o)}const n=new ls("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const s=new ls("size");return s.xform=r,t.push(s),t.push(new ls("timeCreated")),t.push(new ls("updated")),t.push(new ls("md5Hash",null,!0)),t.push(new ls("cacheControl",null,!0)),t.push(new ls("contentDisposition",null,!0)),t.push(new ls("contentEncoding",null,!0)),t.push(new ls("contentLanguage",null,!0)),t.push(new ls("contentType",null,!0)),t.push(new ls("metadata","customMetadata",!0)),sy=t,sy}function $J(t,e){function n(){const r=t.bucket,s=t.fullPath,a=new Gs(r,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function VJ(t,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return $J(r,t),r}function a3(t,e,n){const r=r3(e);return r===null?null:VJ(t,r,n)}function zJ(t,e,n,r){const s=r3(e);if(s===null||!z2(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const h=t.bucket,m=t.fullPath,p="/b/"+o(h)+"/o/"+o(m),y=B2(p,n,r),j=XL({alt:"media",token:d});return y+j})[0]}function UJ(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class o3{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t){if(!t)throw V2()}function BJ(t,e){function n(r,s){const a=a3(t,s,e);return l3(a!==null),a}return n}function WJ(t,e){function n(r,s){const a=a3(t,s,e);return l3(a!==null),zJ(a,s,t.host,t._protocol)}return n}function c3(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=rJ():s=nJ():n.getStatus()===402?s=tJ(t.bucket):n.getStatus()===403?s=sJ(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function HJ(t){const e=c3(t);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=eJ(t.path)),a.serverResponse=s.serverResponse,a}return n}function qJ(t,e,n){const r=e.fullServerUrl(),s=B2(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new o3(s,a,WJ(t,n),o);return l.errorHandler=HJ(e),l}function GJ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function KJ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=GJ(null,e)),r}function ZJ(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let S="";for(let C=0;C<2;C++)S=S+Math.random().toString().slice(2);return S}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=KJ(e,r,s),h=UJ(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",y=Cl.getBlob(m,r,p);if(y===null)throw uJ();const j={name:d.fullPath},_=B2(a,t.host,t._protocol),N="POST",b=t.maxUploadRetryTime,x=new o3(_,N,BJ(t,n),b);return x.urlParams=j,x.headers=o,x.body=y.uploadData(),x.errorHandler=c3(e),x}class QJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=su.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=su.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=su.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Xf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class YJ extends QJ{initXhr(){this.xhr_.responseType="text"}}function u3(){return new YJ}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){this._service=e,n instanceof Gs?this._location=n:this._location=Gs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Nu(e,n)}get root(){const e=new Gs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s3(this._location.path)}get storage(){return this._service}get parent(){const e=MJ(this._location.path);if(e===null)return null;const n=new Gs(this._location.bucket,e);return new Nu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fJ(e)}}function JJ(t,e,n){t._throwIfRoot("uploadBytes");const r=ZJ(t.storage,t._location,i3(),new Cl(e,!0),n);return t.storage.makeRequestWithTokens(r,u3).then(s=>({metadata:s,ref:t}))}function XJ(t){t._throwIfRoot("getDownloadURL");const e=qJ(t.storage,t._location,i3());return t.storage.makeRequestWithTokens(e,u3).then(n=>{if(n===null)throw dJ();return n})}function eX(t,e){const n=DJ(t._location.path,e),r=new Gs(t._location.bucket,n);return new Nu(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tX(t){return/^[A-Za-z]+:\/\//.test(t)}function nX(t,e){return new Nu(t,e)}function d3(t,e){if(t instanceof W2){const n=t;if(n._bucket==null)throw cJ();const r=new Nu(n,n._bucket);return e!=null?d3(r,e):r}else return e!==void 0?eX(t,e):t}function rX(t,e){if(e&&tX(e)){if(t instanceof W2)return nX(t,e);throw dj("To use ref(service, url), the first argument must be a Storage instance.")}else return d3(t,e)}function MR(t,e){const n=e==null?void 0:e[YL];return n==null?null:Gs.makeFromBucketSpec(n,t)}function sX(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:FM(s,t.app.options.projectId))}class W2{constructor(e,n,r,s,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=QL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=JY,this._maxUploadRetryTime=XY,this._requests=new Set,s!=null?this._bucket=Gs.makeFromBucketSpec(s,this._host):this._bucket=MR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gs.makeFromBucketSpec(this._url,e):this._bucket=MR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){OR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){OR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Nu(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new mJ(JL());{const o=SJ(e,this._appId,r,s,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const DR="@firebase/storage",LR="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3="storage";function H2(t,e,n){return t=Gt(t),JJ(t,e,n)}function q2(t){return t=Gt(t),XJ(t)}function G2(t,e){return t=Gt(t),rX(t,e)}function iX(t=US(),e){t=Gt(t);const r=H0(t,h3).getImmediate({identifier:e}),s=MM("storage");return s&&aX(r,...s),r}function aX(t,e,n,r={}){sX(t,e,n,r)}function oX(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new W2(n,r,s,e,Fu)}function lX(){vu(new ec(h3,oX,"PUBLIC").setMultipleInstances(!0)),Da(DR,LR,""),Da(DR,LR,"esm2017")}lX();const cX={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},K2=zM(cX),ja=YK(K2),We=ML(K2),Z2=iX(K2),f3=w.createContext(null),e_=t=>{const e={};return Object.keys(t).forEach(n=>{t[n]!==void 0&&(e[n]=t[n])}),e},jn=()=>{const t=w.useContext(f3);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},uX=({children:t})=>{const[e,n]=w.useState(null),[r,s]=w.useState(null),[a,o]=w.useState(!0),l=async _=>{try{const N=localStorage.getItem("pendingUserData");if(N){const b=JSON.parse(N);console.log("🚨 Données récupérées depuis localStorage:",b);const x=_t(We,"users",_.uid),S=await Zs(x);if(S.exists()){const C=S.data();console.log("📊 Données actuelles dans Firestore:",C);const R={...C,...b,id:_.uid,email:_.email,createdAt:C.createdAt||new Date,lastSeen:new Date},z=e_(R);return await Cn(x,z),console.log("✅ Données récupérées et mises à jour !"),s(R),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),Ne.success("Données de profil récupérées !"),!0}}return!1}catch(N){return console.error("❌ Erreur récupération:",N),!1}},u=async(_,N)=>{const b=_t(We,"users",_.uid),x=await Zs(b);if(x.exists()){const S=x.data();if(console.log("📊 Données existantes trouvées:",S),!await l(_)){const R={id:_.uid,email:_.email,lastSeen:new Date};S.displayName||(R.displayName=_.displayName||"Utilisateur"),S.university||(R.university="Université non spécifiée"),S.fieldOfStudy||(R.fieldOfStudy="Non spécifié");const z=e_(R);await Cn(b,z);const k={...S,...z};s(k),console.log("✅ Profil mis à jour sans écraser les données existantes")}}else{const S={id:_.uid,email:_.email,displayName:_.displayName||(N==null?void 0:N.displayName)||"Utilisateur",photoURL:_.photoURL||(N==null?void 0:N.photoURL)||void 0,phone:(N==null?void 0:N.phone)||void 0,isVerified:!1,verificationStatus:"pending",university:(N==null?void 0:N.university)||"Université non spécifiée",otherUniversity:(N==null?void 0:N.otherUniversity)||void 0,studentId:(N==null?void 0:N.studentId)||void 0,graduationYear:(N==null?void 0:N.graduationYear)||new Date().getFullYear()+2,fieldOfStudy:(N==null?void 0:N.fieldOfStudy)||"Non spécifié",otherFieldOfStudy:(N==null?void 0:N.otherFieldOfStudy)||void 0,campus:(N==null?void 0:N.campus)||"Campus principal",bio:(N==null?void 0:N.bio)||void 0,rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date},C=e_(S);await Yc(b,C),s(S)}},d=async(_,N)=>{try{await IG(ja,_,N),Ne.success("Connexion réussie !")}catch(b){const x=b instanceof Error?b.message:"Erreur inconnue";throw Ne.error("Erreur de connexion : "+x),b}},h=async(_,N,b,x)=>{try{const{user:S}=await fD(ja,_,N);await vp(S,{displayName:b}),await u(S,x),Ne.success("Compte créé avec succès !")}catch(S){const C=S instanceof Error?S.message:"Erreur inconnue";throw Ne.error("Erreur lors de la création du compte : "+C),S}},m=async()=>{try{const _=new bo;_.setCustomParameters({prompt:"select_account"}),_.addScope("email"),_.addScope("profile"),await dK(ja,_)}catch(_){console.error("Google sign in error:",_);const N=_ instanceof Error?_.message:"Erreur inconnue";throw Ne.error("Erreur de connexion Google : "+N),_}},p=async()=>{try{await $G(ja),s(null),Ne.success("Déconnexion réussie !")}catch(_){throw Ne.error("Erreur lors de la déconnexion"),_}},y=async _=>{if(!(!e||!r))try{const N=_t(We,"users",e.uid),b=Object.fromEntries(Object.entries(_).filter(([,x])=>x!==void 0));if(b.updatedAt=new Date,Object.keys(b).length===0){console.warn("Aucune donnée valide à mettre à jour");return}await Cn(N,b),s({...r,...b}),console.log("Profil mis à jour avec:",b),Ne.success("Profil mis à jour !")}catch(N){throw console.error("Erreur mise à jour profil:",N),Ne.error("Erreur lors de la mise à jour du profil"),N}};w.useEffect(()=>{const _=FG(ja,async b=>{n(b),b?await u(b):s(null),o(!1)});return(async()=>{try{const b=await fK(ja);b!=null&&b.user&&(await u(b.user),Ne.success("Connexion Google réussie !"))}catch(b){if(console.error("Redirect result error:",b),b&&typeof b=="object"&&"code"in b&&b.code!=="auth/null-user"){const x=b instanceof Error?b.message:"Erreur inconnue";Ne.error("Erreur de connexion Google : "+x)}}})(),_},[]);const j={currentUser:e,userProfile:r,loading:a,signIn:d,signUp:h,signInWithGoogle:m,logout:p,updateUserProfile:y};return i.jsx(f3.Provider,{value:j,children:!a&&t})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m3=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=w.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},u)=>w.createElement("svg",{ref:u,...hX,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:m3("lucide",s),...l},[...o.map(([d,h])=>w.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(t,e)=>{const n=w.forwardRef(({className:r,...s},a)=>w.createElement(fX,{ref:a,iconNode:e,className:m3(`lucide-${dX(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=Se("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=Se("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=Se("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=Se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=Se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=Se("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=Se("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=Se("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=Se("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=Se("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=Se("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=Se("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=Se("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=Se("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=Se("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=Se("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=Se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=Se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=Se("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=Se("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=Se("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=Se("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=Se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=Se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=Se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=Se("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=Se("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=Se("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=Se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=Se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=Se("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=Se("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=Se("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=Se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=Se("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=Se("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=Se("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=Se("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=Se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=Se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Se("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=Se("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=Se("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=Se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=Se("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=Se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=Se("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=Se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=Se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=Se("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=Se("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=Se("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=Se("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=Se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=Se("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=Se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=Se("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Se("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=Se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Se("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=Se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Se("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=Se("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Se("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=Se("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=Se("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=Se("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=Se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=Se("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=Se("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=Se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=Se("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=Se("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=Se("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=Se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=Se("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=Se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=Se("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=Se("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=Se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=Se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=Se("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=Se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=Se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=Se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=Se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Se("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=Se("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=Se("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=Se("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=Se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=Se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=Se("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=Se("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=Se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=Se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=Se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=Se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=Se("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=Se("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=Se("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function UR(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function vw(...t){return e=>{let n=!1;const r=t.map(s=>{const a=UR(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():UR(t[s],null)}}}}function pt(...t){return w.useCallback(vw(...t),t)}function lc(t){const e=qX(t),n=w.forwardRef((r,s)=>{const{children:a,...o}=r,l=w.Children.toArray(a),u=l.find(KX);if(u){const d=u.props.children,h=l.map(m=>m===u?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:m);return i.jsx(e,{...o,ref:s,children:w.isValidElement(d)?w.cloneElement(d,void 0,h):null})}return i.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}var HX=lc("Slot");function qX(t){const e=w.forwardRef((n,r)=>{const{children:s,...a}=n;if(w.isValidElement(s)){const o=QX(s),l=ZX(a,s.props);return s.type!==w.Fragment&&(l.ref=r?vw(r,o):o),w.cloneElement(s,l)}return w.Children.count(s)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var GX=Symbol("radix.slottable");function KX(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===GX}function ZX(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const u=a(...l);return s(...l),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function QX(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function O3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=O3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function M3(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=O3(t))&&(r&&(r+=" "),r+=e);return r}const BR=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,WR=M3,yw=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return WR(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],m=a==null?void 0:a[d];if(h===null)return null;const p=BR(h)||BR(m);return s[d][p]}),l=n&&Object.entries(n).reduce((d,h)=>{let[m,p]=h;return p===void 0||(d[m]=p),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:m,className:p,...y}=h;return Object.entries(y).every(j=>{let[_,N]=j;return Array.isArray(N)?N.includes({...a,...l}[_]):{...a,...l}[_]===N})?[...d,m,p]:d},[]);return WR(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},J2="-",YX=t=>{const e=XX(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(J2);return l[0]===""&&l.length!==1&&l.shift(),D3(l,e)||JX(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},D3=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?D3(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(J2);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},HR=/^\[(.+)\]$/,JX=t=>{if(HR.test(t)){const e=HR.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},XX=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return tee(Object.entries(t.classGroups),n).forEach(([a,o])=>{mj(o,r,a,e)}),r},mj=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:qR(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(eee(s)){mj(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{mj(o,qR(e,a),n,r)})})},qR=(t,e)=>{let n=t;return e.split(J2).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},eee=t=>t.isThemeGetter,tee=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,s]}):t,nee=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},L3="!",ree=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,o=l=>{const u=[];let d=0,h=0,m;for(let N=0;N<l.length;N++){let b=l[N];if(d===0){if(b===s&&(r||l.slice(N,N+a)===e)){u.push(l.slice(h,N)),h=N+a;continue}if(b==="/"){m=N;continue}}b==="["?d++:b==="]"&&d--}const p=u.length===0?l:l.substring(h),y=p.startsWith(L3),j=y?p.substring(1):p,_=m&&m>h?m-h:void 0;return{modifiers:u,hasImportantModifier:y,baseClassName:j,maybePostfixModifierPosition:_}};return n?l=>n({className:l,parseClassName:o}):o},see=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},iee=t=>({cache:nee(t.cacheSize),parseClassName:ree(t),...YX(t)}),aee=/\s+/,oee=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(aee);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:h,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:y}=n(d);let j=!!y,_=r(j?p.substring(0,y):p);if(!_){if(!j){l=d+(l.length>0?" "+l:l);continue}if(_=r(p),!_){l=d+(l.length>0?" "+l:l);continue}j=!1}const N=see(h).join(":"),b=m?N+L3:N,x=b+_;if(a.includes(x))continue;a.push(x);const S=s(_,j);for(let C=0;C<S.length;++C){const R=S[C];a.push(b+R)}l=d+(l.length>0?" "+l:l)}return l};function lee(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=F3(e))&&(r&&(r+=" "),r+=n);return r}const F3=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=F3(t[r]))&&(n&&(n+=" "),n+=e);return n};function cee(t,...e){let n,r,s,a=o;function o(u){const d=e.reduce((h,m)=>m(h),t());return n=iee(d),r=n.cache.get,s=n.cache.set,a=l,l(u)}function l(u){const d=r(u);if(d)return d;const h=oee(u,n);return s(u,h),h}return function(){return a(lee.apply(null,arguments))}}const yn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},$3=/^\[(?:([a-z-]+):)?(.+)\]$/i,uee=/^\d+\/\d+$/,dee=new Set(["px","full","screen"]),hee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mee=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,pee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gee=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,po=t=>ih(t)||dee.has(t)||uee.test(t),dl=t=>af(t,"length",Nee),ih=t=>!!t&&!Number.isNaN(Number(t)),s_=t=>af(t,"number",ih),em=t=>!!t&&Number.isInteger(Number(t)),vee=t=>t.endsWith("%")&&ih(t.slice(0,-1)),Et=t=>$3.test(t),hl=t=>hee.test(t),yee=new Set(["length","size","percentage"]),xee=t=>af(t,yee,V3),wee=t=>af(t,"position",V3),bee=new Set(["image","url"]),_ee=t=>af(t,bee,Eee),jee=t=>af(t,"",See),tm=()=>!0,af=(t,e,n)=>{const r=$3.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Nee=t=>fee.test(t)&&!mee.test(t),V3=()=>!1,See=t=>pee.test(t),Eee=t=>gee.test(t),Pee=()=>{const t=yn("colors"),e=yn("spacing"),n=yn("blur"),r=yn("brightness"),s=yn("borderColor"),a=yn("borderRadius"),o=yn("borderSpacing"),l=yn("borderWidth"),u=yn("contrast"),d=yn("grayscale"),h=yn("hueRotate"),m=yn("invert"),p=yn("gap"),y=yn("gradientColorStops"),j=yn("gradientColorStopPositions"),_=yn("inset"),N=yn("margin"),b=yn("opacity"),x=yn("padding"),S=yn("saturate"),C=yn("scale"),R=yn("sepia"),z=yn("skew"),k=yn("space"),I=yn("translate"),V=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Et,e],$=()=>[Et,e],M=()=>["",po,dl],B=()=>["auto",ih,Et],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],G=()=>["","0",Et],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[ih,Et];return{cacheSize:500,separator:":",theme:{colors:[tm],spacing:[po,dl],blur:["none","",hl,Et],brightness:X(),borderColor:[t],borderRadius:["none","","full",hl,Et],borderSpacing:$(),borderWidth:M(),contrast:X(),grayscale:G(),hueRotate:X(),invert:G(),gap:$(),gradientColorStops:[t],gradientColorStopPositions:[vee,dl],inset:O(),margin:O(),opacity:X(),padding:$(),saturate:X(),scale:X(),sepia:G(),skew:X(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",Et]}],container:["container"],columns:[{columns:[hl]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),Et]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",em,Et]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Et]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",em,Et]}],"grid-cols":[{"grid-cols":[tm]}],"col-start-end":[{col:["auto",{span:["full",em,Et]},Et]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[tm]}],"row-start-end":[{row:["auto",{span:[em,Et]},Et]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Et]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Et]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[N]}],mx:[{mx:[N]}],my:[{my:[N]}],ms:[{ms:[N]}],me:[{me:[N]}],mt:[{mt:[N]}],mr:[{mr:[N]}],mb:[{mb:[N]}],ml:[{ml:[N]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Et,e]}],"min-w":[{"min-w":[Et,e,"min","max","fit"]}],"max-w":[{"max-w":[Et,e,"none","full","min","max","fit","prose",{screen:[hl]},hl]}],h:[{h:[Et,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Et,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Et,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Et,e,"auto","min","max","fit"]}],"font-size":[{text:["base",hl,dl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",s_]}],"font-family":[{font:[tm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Et]}],"line-clamp":[{"line-clamp":["none",ih,s_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",po,Et]}],"list-image":[{"list-image":["none",Et]}],"list-style-type":[{list:["none","disc","decimal",Et]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",po,dl]}],"underline-offset":[{"underline-offset":["auto",po,Et]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),wee]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",xee]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},_ee]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:ee()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[po,Et]}],"outline-w":[{outline:[po,dl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[po,dl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",hl,jee]}],"shadow-color":[{shadow:[tm]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",hl,Et]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[S]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Et]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",Et]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",Et]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[em,Et]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Et]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Et]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Et]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[po,dl,s_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Cee=cee(Pee);function at(...t){return Cee(M3(t))}const pj=yw("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),te=w.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const o=r?HX:"button";return i.jsx(o,{className:at(pj({variant:e,size:n,className:t})),ref:a,...s})});te.displayName="Button";const Ze=w.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:at("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Ze.displayName="Input";function Ve(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Tee(t,e){const n=w.createContext(e),r=a=>{const{children:o,...l}=a,u=w.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function s(a){const o=w.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function $r(t,e=[]){let n=[];function r(a,o){const l=w.createContext(o),u=n.length;n=[...n,o];const d=m=>{var b;const{scope:p,children:y,...j}=m,_=((b=p==null?void 0:p[t])==null?void 0:b[u])||l,N=w.useMemo(()=>j,Object.values(j));return i.jsx(_.Provider,{value:N,children:y})};d.displayName=a+"Provider";function h(m,p){var _;const y=((_=p==null?void 0:p[t])==null?void 0:_[u])||l,j=w.useContext(y);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[d,h]}const s=()=>{const a=n.map(o=>w.createContext(o));return function(l){const u=(l==null?void 0:l[t])||a;return w.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return s.scopeName=t,[r,Ree(s,...e)]}function Ree(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:u,scopeName:d})=>{const m=u(a)[`__scope${d}`];return{...l,...m}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var er=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},kee=VN[" useInsertionEffect ".trim().toString()]||er;function Xs({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,a,o]=Iee({defaultProp:e,onChange:n}),l=t!==void 0,u=l?t:s;{const h=w.useRef(t!==void 0);w.useEffect(()=>{const m=h.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const d=w.useCallback(h=>{var m;if(l){const p=Aee(h)?h(t):h;p!==t&&((m=o.current)==null||m.call(o,p))}else a(h)},[l,t,a,o]);return[u,d]}function Iee({defaultProp:t,onChange:e}){const[n,r]=w.useState(t),s=w.useRef(n),a=w.useRef(e);return kee(()=>{a.current=e},[e]),w.useEffect(()=>{var o;s.current!==n&&((o=a.current)==null||o.call(a,n),s.current=n)},[n,s]),[n,r,a]}function Aee(t){return typeof t=="function"}var Oee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ye=Oee.reduce((t,e)=>{const n=lc(`Primitive.${e}`),r=w.forwardRef((s,a)=>{const{asChild:o,...l}=s,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function z3(t,e){t&&Qh.flushSync(()=>t.dispatchEvent(e))}function Bg(t){const e=t+"CollectionProvider",[n,r]=$r(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=_=>{const{scope:N,children:b}=_,x=oe.useRef(null),S=oe.useRef(new Map).current;return i.jsx(s,{scope:N,itemMap:S,collectionRef:x,children:b})};o.displayName=e;const l=t+"CollectionSlot",u=lc(l),d=oe.forwardRef((_,N)=>{const{scope:b,children:x}=_,S=a(l,b),C=pt(N,S.collectionRef);return i.jsx(u,{ref:C,children:x})});d.displayName=l;const h=t+"CollectionItemSlot",m="data-radix-collection-item",p=lc(h),y=oe.forwardRef((_,N)=>{const{scope:b,children:x,...S}=_,C=oe.useRef(null),R=pt(N,C),z=a(h,b);return oe.useEffect(()=>(z.itemMap.set(C,{ref:C,...S}),()=>void z.itemMap.delete(C))),i.jsx(p,{[m]:"",ref:R,children:x})});y.displayName=h;function j(_){const N=a(t+"CollectionConsumer",_);return oe.useCallback(()=>{const x=N.collectionRef.current;if(!x)return[];const S=Array.from(x.querySelectorAll(`[${m}]`));return Array.from(N.itemMap.values()).sort((z,k)=>S.indexOf(z.ref.current)-S.indexOf(k.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:o,Slot:d,ItemSlot:y},j,r]}var Mee=w.createContext(void 0);function Bu(t){const e=w.useContext(Mee);return t||e||"ltr"}function Sr(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Dee(t,e=globalThis==null?void 0:globalThis.document){const n=Sr(t);w.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Lee="DismissableLayer",gj="dismissableLayer.update",Fee="dismissableLayer.pointerDownOutside",$ee="dismissableLayer.focusOutside",GR,U3=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wg=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...u}=t,d=w.useContext(U3),[h,m]=w.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=w.useState({}),j=pt(e,k=>m(k)),_=Array.from(d.layers),[N]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=_.indexOf(N),x=h?_.indexOf(h):-1,S=d.layersWithOutsidePointerEventsDisabled.size>0,C=x>=b,R=Uee(k=>{const I=k.target,V=[...d.branches].some(T=>T.contains(I));!C||V||(s==null||s(k),o==null||o(k),k.defaultPrevented||l==null||l())},p),z=Bee(k=>{const I=k.target;[...d.branches].some(T=>T.contains(I))||(a==null||a(k),o==null||o(k),k.defaultPrevented||l==null||l())},p);return Dee(k=>{x===d.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},p),w.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(GR=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),KR(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=GR)}},[h,p,n,d]),w.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),KR())},[h,d]),w.useEffect(()=>{const k=()=>y({});return document.addEventListener(gj,k),()=>document.removeEventListener(gj,k)},[]),i.jsx(Ye.div,{...u,ref:j,style:{pointerEvents:S?C?"auto":"none":void 0,...t.style},onFocusCapture:Ve(t.onFocusCapture,z.onFocusCapture),onBlurCapture:Ve(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:Ve(t.onPointerDownCapture,R.onPointerDownCapture)})});Wg.displayName=Lee;var Vee="DismissableLayerBranch",zee=w.forwardRef((t,e)=>{const n=w.useContext(U3),r=w.useRef(null),s=pt(e,r);return w.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(Ye.div,{...t,ref:s})});zee.displayName=Vee;function Uee(t,e=globalThis==null?void 0:globalThis.document){const n=Sr(t),r=w.useRef(!1),s=w.useRef(()=>{});return w.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let u=function(){B3(Fee,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Bee(t,e=globalThis==null?void 0:globalThis.document){const n=Sr(t),r=w.useRef(!1);return w.useEffect(()=>{const s=a=>{a.target&&!r.current&&B3($ee,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function KR(){const t=new CustomEvent(gj);document.dispatchEvent(t)}function B3(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?z3(s,a):s.dispatchEvent(a)}var i_=0;function xw(){w.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??ZR()),document.body.insertAdjacentElement("beforeend",t[1]??ZR()),i_++,()=>{i_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),i_--}},[])}function ZR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var a_="focusScope.autoFocusOnMount",o_="focusScope.autoFocusOnUnmount",QR={bubbles:!1,cancelable:!0},Wee="FocusScope",Hg=w.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,u]=w.useState(null),d=Sr(s),h=Sr(a),m=w.useRef(null),p=pt(e,_=>u(_)),y=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let _=function(S){if(y.paused||!l)return;const C=S.target;l.contains(C)?m.current=C:vl(m.current,{select:!0})},N=function(S){if(y.paused||!l)return;const C=S.relatedTarget;C!==null&&(l.contains(C)||vl(m.current,{select:!0}))},b=function(S){if(document.activeElement===document.body)for(const R of S)R.removedNodes.length>0&&vl(l)};document.addEventListener("focusin",_),document.addEventListener("focusout",N);const x=new MutationObserver(b);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",N),x.disconnect()}}},[r,l,y.paused]),w.useEffect(()=>{if(l){JR.add(y);const _=document.activeElement;if(!l.contains(_)){const b=new CustomEvent(a_,QR);l.addEventListener(a_,d),l.dispatchEvent(b),b.defaultPrevented||(Hee(Qee(W3(l)),{select:!0}),document.activeElement===_&&vl(l))}return()=>{l.removeEventListener(a_,d),setTimeout(()=>{const b=new CustomEvent(o_,QR);l.addEventListener(o_,h),l.dispatchEvent(b),b.defaultPrevented||vl(_??document.body,{select:!0}),l.removeEventListener(o_,h),JR.remove(y)},0)}}},[l,d,h,y]);const j=w.useCallback(_=>{if(!n&&!r||y.paused)return;const N=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,b=document.activeElement;if(N&&b){const x=_.currentTarget,[S,C]=qee(x);S&&C?!_.shiftKey&&b===C?(_.preventDefault(),n&&vl(S,{select:!0})):_.shiftKey&&b===S&&(_.preventDefault(),n&&vl(C,{select:!0})):b===x&&_.preventDefault()}},[n,r,y.paused]);return i.jsx(Ye.div,{tabIndex:-1,...o,ref:p,onKeyDown:j})});Hg.displayName=Wee;function Hee(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(vl(r,{select:e}),document.activeElement!==n)return}function qee(t){const e=W3(t),n=YR(e,t),r=YR(e.reverse(),t);return[n,r]}function W3(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function YR(t,e){for(const n of t)if(!Gee(n,{upTo:e}))return n}function Gee(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Kee(t){return t instanceof HTMLInputElement&&"select"in t}function vl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Kee(t)&&e&&t.select()}}var JR=Zee();function Zee(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=XR(t,e),t.unshift(e)},remove(e){var n;t=XR(t,e),(n=t[0])==null||n.resume()}}}function XR(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Qee(t){return t.filter(e=>e.tagName!=="A")}var Yee=VN[" useId ".trim().toString()]||(()=>{}),Jee=0;function Qs(t){const[e,n]=w.useState(Yee());return er(()=>{n(r=>r??String(Jee++))},[t]),e?`radix-${e}`:""}const Xee=["top","right","bottom","left"],cc=Math.min,Ws=Math.max,Qx=Math.round,iy=Math.floor,za=t=>({x:t,y:t}),ete={left:"right",right:"left",bottom:"top",top:"bottom"},tte={start:"end",end:"start"};function vj(t,e,n){return Ws(t,cc(e,n))}function Vo(t,e){return typeof t=="function"?t(e):t}function zo(t){return t.split("-")[0]}function of(t){return t.split("-")[1]}function X2(t){return t==="x"?"y":"x"}function eE(t){return t==="y"?"height":"width"}function ka(t){return["top","bottom"].includes(zo(t))?"y":"x"}function tE(t){return X2(ka(t))}function nte(t,e,n){n===void 0&&(n=!1);const r=of(t),s=tE(t),a=eE(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Yx(o)),[o,Yx(o)]}function rte(t){const e=Yx(t);return[yj(t),e,yj(e)]}function yj(t){return t.replace(/start|end/g,e=>tte[e])}function ste(t,e,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?a:o;default:return[]}}function ite(t,e,n,r){const s=of(t);let a=ste(zo(t),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(yj)))),a}function Yx(t){return t.replace(/left|right|bottom|top/g,e=>ete[e])}function ate(t){return{top:0,right:0,bottom:0,left:0,...t}}function H3(t){return typeof t!="number"?ate(t):{top:t,right:t,bottom:t,left:t}}function Jx(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function ek(t,e,n){let{reference:r,floating:s}=t;const a=ka(e),o=tE(e),l=eE(o),u=zo(e),d=a==="y",h=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let y;switch(u){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:m};break;case"left":y={x:r.x-s.width,y:m};break;default:y={x:r.x,y:r.y}}switch(of(e)){case"start":y[o]-=p*(n&&d?-1:1);break;case"end":y[o]+=p*(n&&d?-1:1);break}return y}const ote=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:m}=ek(d,r,u),p=r,y={},j=0;for(let _=0;_<l.length;_++){const{name:N,fn:b}=l[_],{x,y:S,data:C,reset:R}=await b({x:h,y:m,initialPlacement:r,placement:p,strategy:s,middlewareData:y,rects:d,platform:o,elements:{reference:t,floating:e}});h=x??h,m=S??m,y={...y,[N]:{...y[N],...C}},R&&j<=50&&(j++,typeof R=="object"&&(R.placement&&(p=R.placement),R.rects&&(d=R.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):R.rects),{x:h,y:m}=ek(d,p,u)),_=-1)}return{x:h,y:m,placement:p,strategy:s,middlewareData:y}};async function Tp(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:p=!1,padding:y=0}=Vo(e,t),j=H3(y),N=l[p?m==="floating"?"reference":"floating":m],b=Jx(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(N)))==null||n?N:N.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:u})),x=m==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),C=await(a.isElement==null?void 0:a.isElement(S))?await(a.getScale==null?void 0:a.getScale(S))||{x:1,y:1}:{x:1,y:1},R=Jx(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:S,strategy:u}):x);return{top:(b.top-R.top+j.top)/C.y,bottom:(R.bottom-b.bottom+j.bottom)/C.y,left:(b.left-R.left+j.left)/C.x,right:(R.right-b.right+j.right)/C.x}}const lte=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:u}=e,{element:d,padding:h=0}=Vo(t,e)||{};if(d==null)return{};const m=H3(h),p={x:n,y:r},y=tE(s),j=eE(y),_=await o.getDimensions(d),N=y==="y",b=N?"top":"left",x=N?"bottom":"right",S=N?"clientHeight":"clientWidth",C=a.reference[j]+a.reference[y]-p[y]-a.floating[j],R=p[y]-a.reference[y],z=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let k=z?z[S]:0;(!k||!await(o.isElement==null?void 0:o.isElement(z)))&&(k=l.floating[S]||a.floating[j]);const I=C/2-R/2,V=k/2-_[j]/2-1,T=cc(m[b],V),O=cc(m[x],V),$=T,M=k-_[j]-O,B=k/2-_[j]/2+I,J=vj($,B,M),ee=!u.arrow&&of(s)!=null&&B!==J&&a.reference[j]/2-(B<$?T:O)-_[j]/2<0,K=ee?B<$?B-$:B-M:0;return{[y]:p[y]+K,data:{[y]:J,centerOffset:B-J-K,...ee&&{alignmentOffset:K}},reset:ee}}}),cte=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:u,elements:d}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:_=!0,...N}=Vo(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=zo(s),x=ka(l),S=zo(l)===l,C=await(u.isRTL==null?void 0:u.isRTL(d.floating)),R=p||(S||!_?[Yx(l)]:rte(l)),z=j!=="none";!p&&z&&R.push(...ite(l,_,j,C));const k=[l,...R],I=await Tp(e,N),V=[];let T=((r=a.flip)==null?void 0:r.overflows)||[];if(h&&V.push(I[b]),m){const B=nte(s,o,C);V.push(I[B[0]],I[B[1]])}if(T=[...T,{placement:s,overflows:V}],!V.every(B=>B<=0)){var O,$;const B=(((O=a.flip)==null?void 0:O.index)||0)+1,J=k[B];if(J&&(!(m==="alignment"?x!==ka(J):!1)||T.every(D=>D.overflows[0]>0&&ka(D.placement)===x)))return{data:{index:B,overflows:T},reset:{placement:J}};let ee=($=T.filter(K=>K.overflows[0]<=0).sort((K,D)=>K.overflows[1]-D.overflows[1])[0])==null?void 0:$.placement;if(!ee)switch(y){case"bestFit":{var M;const K=(M=T.filter(D=>{if(z){const G=ka(D.placement);return G===x||G==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(G=>G>0).reduce((G,q)=>G+q,0)]).sort((D,G)=>D[1]-G[1])[0])==null?void 0:M[0];K&&(ee=K);break}case"initialPlacement":ee=l;break}if(s!==ee)return{reset:{placement:ee}}}return{}}}};function tk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function nk(t){return Xee.some(e=>t[e]>=0)}const ute=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Vo(t,e);switch(r){case"referenceHidden":{const a=await Tp(e,{...s,elementContext:"reference"}),o=tk(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:nk(o)}}}case"escaped":{const a=await Tp(e,{...s,altBoundary:!0}),o=tk(a,n.floating);return{data:{escapedOffsets:o,escaped:nk(o)}}}default:return{}}}}};async function dte(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=zo(n),l=of(n),u=ka(n)==="y",d=["left","top"].includes(o)?-1:1,h=a&&u?-1:1,m=Vo(e,t);let{mainAxis:p,crossAxis:y,alignmentAxis:j}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof j=="number"&&(y=l==="end"?j*-1:j),u?{x:y*h,y:p*d}:{x:p*d,y:y*h}}const hte=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=e,u=await dte(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:a+u.y,data:{...u,placement:o}}}}},fte=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:N=>{let{x:b,y:x}=N;return{x:b,y:x}}},...u}=Vo(t,e),d={x:n,y:r},h=await Tp(e,u),m=ka(zo(s)),p=X2(m);let y=d[p],j=d[m];if(a){const N=p==="y"?"top":"left",b=p==="y"?"bottom":"right",x=y+h[N],S=y-h[b];y=vj(x,y,S)}if(o){const N=m==="y"?"top":"left",b=m==="y"?"bottom":"right",x=j+h[N],S=j-h[b];j=vj(x,j,S)}const _=l.fn({...e,[p]:y,[m]:j});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[p]:a,[m]:o}}}}}},mte=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:u=!0,crossAxis:d=!0}=Vo(t,e),h={x:n,y:r},m=ka(s),p=X2(m);let y=h[p],j=h[m];const _=Vo(l,e),N=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(u){const S=p==="y"?"height":"width",C=a.reference[p]-a.floating[S]+N.mainAxis,R=a.reference[p]+a.reference[S]-N.mainAxis;y<C?y=C:y>R&&(y=R)}if(d){var b,x;const S=p==="y"?"width":"height",C=["top","left"].includes(zo(s)),R=a.reference[m]-a.floating[S]+(C&&((b=o.offset)==null?void 0:b[m])||0)+(C?0:N.crossAxis),z=a.reference[m]+a.reference[S]+(C?0:((x=o.offset)==null?void 0:x[m])||0)-(C?N.crossAxis:0);j<R?j=R:j>z&&(j=z)}return{[p]:y,[m]:j}}}},pte=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:u=()=>{},...d}=Vo(t,e),h=await Tp(e,d),m=zo(s),p=of(s),y=ka(s)==="y",{width:j,height:_}=a.floating;let N,b;m==="top"||m==="bottom"?(N=m,b=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=m,N=p==="end"?"top":"bottom");const x=_-h.top-h.bottom,S=j-h.left-h.right,C=cc(_-h[N],x),R=cc(j-h[b],S),z=!e.middlewareData.shift;let k=C,I=R;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=x),z&&!p){const T=Ws(h.left,0),O=Ws(h.right,0),$=Ws(h.top,0),M=Ws(h.bottom,0);y?I=j-2*(T!==0||O!==0?T+O:Ws(h.left,h.right)):k=_-2*($!==0||M!==0?$+M:Ws(h.top,h.bottom))}await u({...e,availableWidth:I,availableHeight:k});const V=await o.getDimensions(l.floating);return j!==V.width||_!==V.height?{reset:{rects:!0}}:{}}}};function ww(){return typeof window<"u"}function lf(t){return q3(t)?(t.nodeName||"").toLowerCase():"#document"}function Ys(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ja(t){var e;return(e=(q3(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function q3(t){return ww()?t instanceof Node||t instanceof Ys(t).Node:!1}function ia(t){return ww()?t instanceof Element||t instanceof Ys(t).Element:!1}function Ga(t){return ww()?t instanceof HTMLElement||t instanceof Ys(t).HTMLElement:!1}function rk(t){return!ww()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ys(t).ShadowRoot}function qg(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=aa(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function gte(t){return["table","td","th"].includes(lf(t))}function bw(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function nE(t){const e=rE(),n=ia(t)?aa(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function vte(t){let e=uc(t);for(;Ga(e)&&!Rh(e);){if(nE(e))return e;if(bw(e))return null;e=uc(e)}return null}function rE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Rh(t){return["html","body","#document"].includes(lf(t))}function aa(t){return Ys(t).getComputedStyle(t)}function _w(t){return ia(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function uc(t){if(lf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||rk(t)&&t.host||Ja(t);return rk(e)?e.host:e}function G3(t){const e=uc(t);return Rh(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ga(e)&&qg(e)?e:G3(e)}function Rp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=G3(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),o=Ys(s);if(a){const l=xj(o);return e.concat(o,o.visualViewport||[],qg(s)?s:[],l&&n?Rp(l):[])}return e.concat(s,Rp(s,[],n))}function xj(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function K3(t){const e=aa(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ga(t),a=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Qx(n)!==a||Qx(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function sE(t){return ia(t)?t:t.contextElement}function ah(t){const e=sE(t);if(!Ga(e))return za(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=K3(e);let o=(a?Qx(n.width):n.width)/r,l=(a?Qx(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const yte=za(0);function Z3(t){const e=Ys(t);return!rE()||!e.visualViewport?yte:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function xte(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ys(t)?!1:e}function Eu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=sE(t);let o=za(1);e&&(r?ia(r)&&(o=ah(r)):o=ah(t));const l=xte(a,n,r)?Z3(a):za(0);let u=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,h=s.width/o.x,m=s.height/o.y;if(a){const p=Ys(a),y=r&&ia(r)?Ys(r):r;let j=p,_=xj(j);for(;_&&r&&y!==j;){const N=ah(_),b=_.getBoundingClientRect(),x=aa(_),S=b.left+(_.clientLeft+parseFloat(x.paddingLeft))*N.x,C=b.top+(_.clientTop+parseFloat(x.paddingTop))*N.y;u*=N.x,d*=N.y,h*=N.x,m*=N.y,u+=S,d+=C,j=Ys(_),_=xj(j)}}return Jx({width:h,height:m,x:u,y:d})}function iE(t,e){const n=_w(t).scrollLeft;return e?e.left+n:Eu(Ja(t)).left+n}function Q3(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:iE(t,r)),a=r.top+e.scrollTop;return{x:s,y:a}}function wte(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",o=Ja(r),l=e?bw(e.floating):!1;if(r===o||l&&a)return n;let u={scrollLeft:0,scrollTop:0},d=za(1);const h=za(0),m=Ga(r);if((m||!m&&!a)&&((lf(r)!=="body"||qg(o))&&(u=_w(r)),Ga(r))){const y=Eu(r);d=ah(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const p=o&&!m&&!a?Q3(o,u,!0):za(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+h.x+p.x,y:n.y*d.y-u.scrollTop*d.y+h.y+p.y}}function bte(t){return Array.from(t.getClientRects())}function _te(t){const e=Ja(t),n=_w(t),r=t.ownerDocument.body,s=Ws(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Ws(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+iE(t);const l=-n.scrollTop;return aa(r).direction==="rtl"&&(o+=Ws(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function jte(t,e){const n=Ys(t),r=Ja(t),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,u=0;if(s){a=s.width,o=s.height;const d=rE();(!d||d&&e==="fixed")&&(l=s.offsetLeft,u=s.offsetTop)}return{width:a,height:o,x:l,y:u}}function Nte(t,e){const n=Eu(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=Ga(t)?ah(t):za(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,u=s*a.x,d=r*a.y;return{width:o,height:l,x:u,y:d}}function sk(t,e,n){let r;if(e==="viewport")r=jte(t,n);else if(e==="document")r=_te(Ja(t));else if(ia(e))r=Nte(e,n);else{const s=Z3(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Jx(r)}function Y3(t,e){const n=uc(t);return n===e||!ia(n)||Rh(n)?!1:aa(n).position==="fixed"||Y3(n,e)}function Ste(t,e){const n=e.get(t);if(n)return n;let r=Rp(t,[],!1).filter(l=>ia(l)&&lf(l)!=="body"),s=null;const a=aa(t).position==="fixed";let o=a?uc(t):t;for(;ia(o)&&!Rh(o);){const l=aa(o),u=nE(o);!u&&l.position==="fixed"&&(s=null),(a?!u&&!s:!u&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||qg(o)&&!u&&Y3(t,o))?r=r.filter(h=>h!==o):s=l,o=uc(o)}return e.set(t,r),r}function Ete(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?bw(e)?[]:Ste(e,this._c):[].concat(n),r],l=o[0],u=o.reduce((d,h)=>{const m=sk(e,h,s);return d.top=Ws(m.top,d.top),d.right=cc(m.right,d.right),d.bottom=cc(m.bottom,d.bottom),d.left=Ws(m.left,d.left),d},sk(e,l,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Pte(t){const{width:e,height:n}=K3(t);return{width:e,height:n}}function Cte(t,e,n){const r=Ga(e),s=Ja(e),a=n==="fixed",o=Eu(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const u=za(0);function d(){u.x=iE(s)}if(r||!r&&!a)if((lf(e)!=="body"||qg(s))&&(l=_w(e)),r){const y=Eu(e,!0,a,e);u.x=y.x+e.clientLeft,u.y=y.y+e.clientTop}else s&&d();a&&!r&&s&&d();const h=s&&!r&&!a?Q3(s,l):za(0),m=o.left+l.scrollLeft-u.x-h.x,p=o.top+l.scrollTop-u.y-h.y;return{x:m,y:p,width:o.width,height:o.height}}function l_(t){return aa(t).position==="static"}function ik(t,e){if(!Ga(t)||aa(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ja(t)===n&&(n=n.ownerDocument.body),n}function J3(t,e){const n=Ys(t);if(bw(t))return n;if(!Ga(t)){let s=uc(t);for(;s&&!Rh(s);){if(ia(s)&&!l_(s))return s;s=uc(s)}return n}let r=ik(t,e);for(;r&&gte(r)&&l_(r);)r=ik(r,e);return r&&Rh(r)&&l_(r)&&!nE(r)?n:r||vte(t)||n}const Tte=async function(t){const e=this.getOffsetParent||J3,n=this.getDimensions,r=await n(t.floating);return{reference:Cte(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Rte(t){return aa(t).direction==="rtl"}const kte={convertOffsetParentRelativeRectToViewportRelativeRect:wte,getDocumentElement:Ja,getClippingRect:Ete,getOffsetParent:J3,getElementRects:Tte,getClientRects:bte,getDimensions:Pte,getScale:ah,isElement:ia,isRTL:Rte};function X3(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Ite(t,e){let n=null,r;const s=Ja(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),a();const d=t.getBoundingClientRect(),{left:h,top:m,width:p,height:y}=d;if(l||e(),!p||!y)return;const j=iy(m),_=iy(s.clientWidth-(h+p)),N=iy(s.clientHeight-(m+y)),b=iy(h),S={rootMargin:-j+"px "+-_+"px "+-N+"px "+-b+"px",threshold:Ws(0,cc(1,u))||1};let C=!0;function R(z){const k=z[0].intersectionRatio;if(k!==u){if(!C)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!X3(d,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(R,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(R,S)}n.observe(t)}return o(!0),a}function Ate(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=sE(t),h=s||a?[...d?Rp(d):[],...Rp(e)]:[];h.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const m=d&&l?Ite(d,n):null;let p=-1,y=null;o&&(y=new ResizeObserver(b=>{let[x]=b;x&&x.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=y)==null||S.observe(e)})),n()}),d&&!u&&y.observe(d),y.observe(e));let j,_=u?Eu(t):null;u&&N();function N(){const b=Eu(t);_&&!X3(_,b)&&n(),_=b,j=requestAnimationFrame(N)}return n(),()=>{var b;h.forEach(x=>{s&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),m==null||m(),(b=y)==null||b.disconnect(),y=null,u&&cancelAnimationFrame(j)}}const Ote=hte,Mte=fte,Dte=cte,Lte=pte,Fte=ute,ak=lte,$te=mte,Vte=(t,e,n)=>{const r=new Map,s={platform:kte,...n},a={...s.platform,_c:r};return ote(t,e,{...s,platform:a})};var zte=typeof document<"u",Ute=function(){},Hy=zte?w.useLayoutEffect:Ute;function Xx(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Xx(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!Xx(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function e5(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ok(t,e){const n=e5(t);return Math.round(e*n)/n}function c_(t){const e=w.useRef(t);return Hy(()=>{e.current=t}),e}function Bte(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:u,open:d}=t,[h,m]=w.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,y]=w.useState(r);Xx(p,r)||y(r);const[j,_]=w.useState(null),[N,b]=w.useState(null),x=w.useCallback(D=>{D!==z.current&&(z.current=D,_(D))},[]),S=w.useCallback(D=>{D!==k.current&&(k.current=D,b(D))},[]),C=a||j,R=o||N,z=w.useRef(null),k=w.useRef(null),I=w.useRef(h),V=u!=null,T=c_(u),O=c_(s),$=c_(d),M=w.useCallback(()=>{if(!z.current||!k.current)return;const D={placement:e,strategy:n,middleware:p};O.current&&(D.platform=O.current),Vte(z.current,k.current,D).then(G=>{const q={...G,isPositioned:$.current!==!1};B.current&&!Xx(I.current,q)&&(I.current=q,Qh.flushSync(()=>{m(q)}))})},[p,e,n,O,$]);Hy(()=>{d===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,m(D=>({...D,isPositioned:!1})))},[d]);const B=w.useRef(!1);Hy(()=>(B.current=!0,()=>{B.current=!1}),[]),Hy(()=>{if(C&&(z.current=C),R&&(k.current=R),C&&R){if(T.current)return T.current(C,R,M);M()}},[C,R,M,T,V]);const J=w.useMemo(()=>({reference:z,floating:k,setReference:x,setFloating:S}),[x,S]),ee=w.useMemo(()=>({reference:C,floating:R}),[C,R]),K=w.useMemo(()=>{const D={position:n,left:0,top:0};if(!ee.floating)return D;const G=ok(ee.floating,h.x),q=ok(ee.floating,h.y);return l?{...D,transform:"translate("+G+"px, "+q+"px)",...e5(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:q}},[n,l,ee.floating,h.x,h.y]);return w.useMemo(()=>({...h,update:M,refs:J,elements:ee,floatingStyles:K}),[h,M,J,ee,K])}const Wte=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?ak({element:r.current,padding:s}).fn(n):{}:r?ak({element:r,padding:s}).fn(n):{}}}},Hte=(t,e)=>({...Ote(t),options:[t,e]}),qte=(t,e)=>({...Mte(t),options:[t,e]}),Gte=(t,e)=>({...$te(t),options:[t,e]}),Kte=(t,e)=>({...Dte(t),options:[t,e]}),Zte=(t,e)=>({...Lte(t),options:[t,e]}),Qte=(t,e)=>({...Fte(t),options:[t,e]}),Yte=(t,e)=>({...Wte(t),options:[t,e]});var Jte="Arrow",t5=w.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return i.jsx(Ye.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});t5.displayName=Jte;var Xte=t5;function jw(t){const[e,n]=w.useState(void 0);return er(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const u=a.borderBoxSize,d=Array.isArray(u)?u[0]:u;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var aE="Popper",[n5,cf]=$r(aE),[ene,r5]=n5(aE),s5=t=>{const{__scopePopper:e,children:n}=t,[r,s]=w.useState(null);return i.jsx(ene,{scope:e,anchor:r,onAnchorChange:s,children:n})};s5.displayName=aE;var i5="PopperAnchor",a5=w.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=r5(i5,n),o=w.useRef(null),l=pt(e,o);return w.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(Ye.div,{...s,ref:l})});a5.displayName=i5;var oE="PopperContent",[tne,nne]=n5(oE),o5=w.forwardRef((t,e)=>{var Ce,ne,ie,ae,Z,ce;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:y="optimized",onPlaced:j,..._}=t,N=r5(oE,n),[b,x]=w.useState(null),S=pt(e,ve=>x(ve)),[C,R]=w.useState(null),z=jw(C),k=(z==null?void 0:z.width)??0,I=(z==null?void 0:z.height)??0,V=r+(a!=="center"?"-"+a:""),T=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},O=Array.isArray(d)?d:[d],$=O.length>0,M={padding:T,boundary:O.filter(sne),altBoundary:$},{refs:B,floatingStyles:J,placement:ee,isPositioned:K,middlewareData:D}=Bte({strategy:"fixed",placement:V,whileElementsMounted:(...ve)=>Ate(...ve,{animationFrame:y==="always"}),elements:{reference:N.anchor},middleware:[Hte({mainAxis:s+I,alignmentAxis:o}),u&&qte({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Gte():void 0,...M}),u&&Kte({...M}),Zte({...M,apply:({elements:ve,rects:ke,availableWidth:be,availableHeight:re})=>{const{width:_e,height:Ee}=ke.reference,de=ve.floating.style;de.setProperty("--radix-popper-available-width",`${be}px`),de.setProperty("--radix-popper-available-height",`${re}px`),de.setProperty("--radix-popper-anchor-width",`${_e}px`),de.setProperty("--radix-popper-anchor-height",`${Ee}px`)}}),C&&Yte({element:C,padding:l}),ine({arrowWidth:k,arrowHeight:I}),p&&Qte({strategy:"referenceHidden",...M})]}),[G,q]=u5(ee),X=Sr(j);er(()=>{K&&(X==null||X())},[K,X]);const fe=(Ce=D.arrow)==null?void 0:Ce.x,Te=(ne=D.arrow)==null?void 0:ne.y,$e=((ie=D.arrow)==null?void 0:ie.centerOffset)!==0,[ze,Le]=w.useState();return er(()=>{b&&Le(window.getComputedStyle(b).zIndex)},[b]),i.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:K?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ze,"--radix-popper-transform-origin":[(ae=D.transformOrigin)==null?void 0:ae.x,(Z=D.transformOrigin)==null?void 0:Z.y].join(" "),...((ce=D.hide)==null?void 0:ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(tne,{scope:n,placedSide:G,onArrowChange:R,arrowX:fe,arrowY:Te,shouldHideArrow:$e,children:i.jsx(Ye.div,{"data-side":G,"data-align":q,..._,ref:S,style:{..._.style,animation:K?void 0:"none"}})})})});o5.displayName=oE;var l5="PopperArrow",rne={top:"bottom",right:"left",bottom:"top",left:"right"},c5=w.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=nne(l5,r),o=rne[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(Xte,{...s,ref:n,style:{...s.style,display:"block"}})})});c5.displayName=l5;function sne(t){return t!==null}var ine=t=>({name:"transformOrigin",options:t,fn(e){var N,b,x;const{placement:n,rects:r,middlewareData:s}=e,o=((N=s.arrow)==null?void 0:N.centerOffset)!==0,l=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[d,h]=u5(n),m={start:"0%",center:"50%",end:"100%"}[h],p=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,y=(((x=s.arrow)==null?void 0:x.y)??0)+u/2;let j="",_="";return d==="bottom"?(j=o?m:`${p}px`,_=`${-u}px`):d==="top"?(j=o?m:`${p}px`,_=`${r.floating.height+u}px`):d==="right"?(j=`${-u}px`,_=o?m:`${y}px`):d==="left"&&(j=`${r.floating.width+u}px`,_=o?m:`${y}px`),{data:{x:j,y:_}}}});function u5(t){const[e,n="center"]=t.split("-");return[e,n]}var lE=s5,Nw=a5,cE=o5,uE=c5,ane="Portal",Gg=w.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,a]=w.useState(!1);er(()=>a(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?eB.createPortal(i.jsx(Ye.div,{...r,ref:e}),o):null});Gg.displayName=ane;function one(t,e){return w.useReducer((n,r)=>e[n][r]??n,t)}var Vr=t=>{const{present:e,children:n}=t,r=lne(e),s=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),a=pt(r.ref,cne(s));return typeof n=="function"||r.isPresent?w.cloneElement(s,{ref:a}):null};Vr.displayName="Presence";function lne(t){const[e,n]=w.useState(),r=w.useRef(null),s=w.useRef(t),a=w.useRef("none"),o=t?"mounted":"unmounted",[l,u]=one(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const d=ay(r.current);a.current=l==="mounted"?d:"none"},[l]),er(()=>{const d=r.current,h=s.current;if(h!==t){const p=a.current,y=ay(d);t?u("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(h&&p!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,u]),er(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,m=y=>{const _=ay(r.current).includes(y.animationName);if(y.target===e&&_&&(u("ANIMATION_END"),!s.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},p=y=>{y.target===e&&(a.current=ay(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:w.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function ay(t){return(t==null?void 0:t.animationName)||"none"}function cne(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var u_="rovingFocusGroup.onEntryFocus",une={bubbles:!1,cancelable:!0},Kg="RovingFocusGroup",[wj,d5,dne]=Bg(Kg),[hne,Sw]=$r(Kg,[dne]),[fne,mne]=hne(Kg),h5=w.forwardRef((t,e)=>i.jsx(wj.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(wj.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(pne,{...t,ref:e})})}));h5.displayName=Kg;var pne=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...m}=t,p=w.useRef(null),y=pt(e,p),j=Bu(a),[_,N]=Xs({prop:o,defaultProp:l??null,onChange:u,caller:Kg}),[b,x]=w.useState(!1),S=Sr(d),C=d5(n),R=w.useRef(!1),[z,k]=w.useState(0);return w.useEffect(()=>{const I=p.current;if(I)return I.addEventListener(u_,S),()=>I.removeEventListener(u_,S)},[S]),i.jsx(fne,{scope:n,orientation:r,dir:j,loop:s,currentTabStopId:_,onItemFocus:w.useCallback(I=>N(I),[N]),onItemShiftTab:w.useCallback(()=>x(!0),[]),onFocusableItemAdd:w.useCallback(()=>k(I=>I+1),[]),onFocusableItemRemove:w.useCallback(()=>k(I=>I-1),[]),children:i.jsx(Ye.div,{tabIndex:b||z===0?-1:0,"data-orientation":r,...m,ref:y,style:{outline:"none",...t.style},onMouseDown:Ve(t.onMouseDown,()=>{R.current=!0}),onFocus:Ve(t.onFocus,I=>{const V=!R.current;if(I.target===I.currentTarget&&V&&!b){const T=new CustomEvent(u_,une);if(I.currentTarget.dispatchEvent(T),!T.defaultPrevented){const O=C().filter(ee=>ee.focusable),$=O.find(ee=>ee.active),M=O.find(ee=>ee.id===_),J=[$,M,...O].filter(Boolean).map(ee=>ee.ref.current);p5(J,h)}}R.current=!1}),onBlur:Ve(t.onBlur,()=>x(!1))})})}),f5="RovingFocusGroupItem",m5=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...l}=t,u=Qs(),d=a||u,h=mne(f5,n),m=h.currentTabStopId===d,p=d5(n),{onFocusableItemAdd:y,onFocusableItemRemove:j,currentTabStopId:_}=h;return w.useEffect(()=>{if(r)return y(),()=>j()},[r,y,j]),i.jsx(wj.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:i.jsx(Ye.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:Ve(t.onMouseDown,N=>{r?h.onItemFocus(d):N.preventDefault()}),onFocus:Ve(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:Ve(t.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){h.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const b=yne(N,h.orientation,h.dir);if(b!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let S=p().filter(C=>C.focusable).map(C=>C.ref.current);if(b==="last")S.reverse();else if(b==="prev"||b==="next"){b==="prev"&&S.reverse();const C=S.indexOf(N.currentTarget);S=h.loop?xne(S,C+1):S.slice(C+1)}setTimeout(()=>p5(S))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:_!=null}):o})})});m5.displayName=f5;var gne={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vne(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function yne(t,e,n){const r=vne(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return gne[r]}function p5(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function xne(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var g5=h5,v5=m5,wne=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},vd=new WeakMap,oy=new WeakMap,ly={},d_=0,y5=function(t){return t&&(t.host||y5(t.parentNode))},bne=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=y5(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},_ne=function(t,e,n,r){var s=bne(e,Array.isArray(t)?t:[t]);ly[n]||(ly[n]=new WeakMap);var a=ly[n],o=[],l=new Set,u=new Set(s),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};s.forEach(d);var h=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))h(p);else try{var y=p.getAttribute(r),j=y!==null&&y!=="false",_=(vd.get(p)||0)+1,N=(a.get(p)||0)+1;vd.set(p,_),a.set(p,N),o.push(p),_===1&&j&&oy.set(p,!0),N===1&&p.setAttribute(n,"true"),j||p.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return h(e),l.clear(),d_++,function(){o.forEach(function(m){var p=vd.get(m)-1,y=a.get(m)-1;vd.set(m,p),a.set(m,y),p||(oy.has(m)||m.removeAttribute(r),oy.delete(m)),y||m.removeAttribute(n)}),d_--,d_||(vd=new WeakMap,vd=new WeakMap,oy=new WeakMap,ly={})}},Ew=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=wne(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),_ne(r,s,n,"aria-hidden")):function(){return null}},qy="right-scroll-bar-position",Gy="width-before-scroll-bar",jne="with-scroll-bars-hidden",Nne="--removed-body-scroll-bar-size";function h_(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Sne(t,e){var n=w.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var Ene=typeof window<"u"?w.useLayoutEffect:w.useEffect,lk=new WeakMap;function Pne(t,e){var n=Sne(null,function(r){return t.forEach(function(s){return h_(s,r)})});return Ene(function(){var r=lk.get(n);if(r){var s=new Set(r),a=new Set(t),o=n.current;s.forEach(function(l){a.has(l)||h_(l,null)}),a.forEach(function(l){s.has(l)||h_(l,o)})}lk.set(n,t)},[t]),n}function Cne(t){return t}function Tne(t,e){e===void 0&&(e=Cne);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var u=function(){var h=o;o=[],h.forEach(a)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return s}function Rne(t){t===void 0&&(t={});var e=Tne(null);return e.options=Ea({async:!0,ssr:!1},t),e}var x5=function(t){var e=t.sideCar,n=Eg(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,Ea({},n))};x5.isSideCarExport=!0;function kne(t,e){return t.useMedium(e),x5}var w5=Rne(),f_=function(){},Pw=w.forwardRef(function(t,e){var n=w.useRef(null),r=w.useState({onScrollCapture:f_,onWheelCapture:f_,onTouchMoveCapture:f_}),s=r[0],a=r[1],o=t.forwardProps,l=t.children,u=t.className,d=t.removeScrollBar,h=t.enabled,m=t.shards,p=t.sideCar,y=t.noRelative,j=t.noIsolation,_=t.inert,N=t.allowPinchZoom,b=t.as,x=b===void 0?"div":b,S=t.gapMode,C=Eg(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=p,z=Pne([n,e]),k=Ea(Ea({},C),s);return w.createElement(w.Fragment,null,h&&w.createElement(R,{sideCar:w5,removeScrollBar:d,shards:m,noRelative:y,noIsolation:j,inert:_,setCallbacks:a,allowPinchZoom:!!N,lockRef:n,gapMode:S}),o?w.cloneElement(w.Children.only(l),Ea(Ea({},k),{ref:z})):w.createElement(x,Ea({},k,{className:u,ref:z}),l))});Pw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pw.classNames={fullWidth:Gy,zeroRight:qy};var Ine=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ane(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Ine();return e&&t.setAttribute("nonce",e),t}function One(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Mne(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Dne=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Ane())&&(One(e,n),Mne(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Lne=function(){var t=Dne();return function(e,n){w.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},b5=function(){var t=Lne(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Fne={left:0,top:0,right:0,gap:0},m_=function(t){return parseInt(t||"",10)||0},$ne=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[m_(n),m_(r),m_(s)]},Vne=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Fne;var e=$ne(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},zne=b5(),oh="data-scroll-locked",Une=function(t,e,n,r){var s=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(jne,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(oh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(qy,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Gy,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(qy," .").concat(qy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Gy," .").concat(Gy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(oh,`] {
    `).concat(Nne,": ").concat(l,`px;
  }
`)},ck=function(){var t=parseInt(document.body.getAttribute(oh)||"0",10);return isFinite(t)?t:0},Bne=function(){w.useEffect(function(){return document.body.setAttribute(oh,(ck()+1).toString()),function(){var t=ck()-1;t<=0?document.body.removeAttribute(oh):document.body.setAttribute(oh,t.toString())}},[])},Wne=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Bne();var a=w.useMemo(function(){return Vne(s)},[s]);return w.createElement(zne,{styles:Une(a,!e,s,n?"":"!important")})},bj=!1;if(typeof window<"u")try{var cy=Object.defineProperty({},"passive",{get:function(){return bj=!0,!0}});window.addEventListener("test",cy,cy),window.removeEventListener("test",cy,cy)}catch{bj=!1}var yd=bj?{passive:!1}:!1,Hne=function(t){return t.tagName==="TEXTAREA"},_5=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Hne(t)&&n[e]==="visible")},qne=function(t){return _5(t,"overflowY")},Gne=function(t){return _5(t,"overflowX")},uk=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=j5(t,r);if(s){var a=N5(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Kne=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Zne=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},j5=function(t,e){return t==="v"?qne(e):Gne(e)},N5=function(t,e){return t==="v"?Kne(e):Zne(e)},Qne=function(t,e){return t==="h"&&e==="rtl"?-1:1},Yne=function(t,e,n,r,s){var a=Qne(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,u=e.contains(l),d=!1,h=o>0,m=0,p=0;do{if(!l)break;var y=N5(t,l),j=y[0],_=y[1],N=y[2],b=_-N-a*j;(j||b)&&j5(t,l)&&(m+=b,p+=j);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!u&&l!==document.body||u&&(e.contains(l)||e===l));return(h&&Math.abs(m)<1||!h&&Math.abs(p)<1)&&(d=!0),d},uy=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},dk=function(t){return[t.deltaX,t.deltaY]},hk=function(t){return t&&"current"in t?t.current:t},Jne=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Xne=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},ere=0,xd=[];function tre(t){var e=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),s=w.useState(ere++)[0],a=w.useState(b5)[0],o=w.useRef(t);w.useEffect(function(){o.current=t},[t]),w.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var _=Aq([t.lockRef.current],(t.shards||[]).map(hk),!0).filter(Boolean);return _.forEach(function(N){return N.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=w.useCallback(function(_,N){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!o.current.allowPinchZoom;var b=uy(_),x=n.current,S="deltaX"in _?_.deltaX:x[0]-b[0],C="deltaY"in _?_.deltaY:x[1]-b[1],R,z=_.target,k=Math.abs(S)>Math.abs(C)?"h":"v";if("touches"in _&&k==="h"&&z.type==="range")return!1;var I=uk(k,z);if(!I)return!0;if(I?R=k:(R=k==="v"?"h":"v",I=uk(k,z)),!I)return!1;if(!r.current&&"changedTouches"in _&&(S||C)&&(r.current=R),!R)return!0;var V=r.current||R;return Yne(V,N,_,V==="h"?S:C)},[]),u=w.useCallback(function(_){var N=_;if(!(!xd.length||xd[xd.length-1]!==a)){var b="deltaY"in N?dk(N):uy(N),x=e.current.filter(function(R){return R.name===N.type&&(R.target===N.target||N.target===R.shadowParent)&&Jne(R.delta,b)})[0];if(x&&x.should){N.cancelable&&N.preventDefault();return}if(!x){var S=(o.current.shards||[]).map(hk).filter(Boolean).filter(function(R){return R.contains(N.target)}),C=S.length>0?l(N,S[0]):!o.current.noIsolation;C&&N.cancelable&&N.preventDefault()}}},[]),d=w.useCallback(function(_,N,b,x){var S={name:_,delta:N,target:b,should:x,shadowParent:nre(b)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(C){return C!==S})},1)},[]),h=w.useCallback(function(_){n.current=uy(_),r.current=void 0},[]),m=w.useCallback(function(_){d(_.type,dk(_),_.target,l(_,t.lockRef.current))},[]),p=w.useCallback(function(_){d(_.type,uy(_),_.target,l(_,t.lockRef.current))},[]);w.useEffect(function(){return xd.push(a),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",u,yd),document.addEventListener("touchmove",u,yd),document.addEventListener("touchstart",h,yd),function(){xd=xd.filter(function(_){return _!==a}),document.removeEventListener("wheel",u,yd),document.removeEventListener("touchmove",u,yd),document.removeEventListener("touchstart",h,yd)}},[]);var y=t.removeScrollBar,j=t.inert;return w.createElement(w.Fragment,null,j?w.createElement(a,{styles:Xne(s)}):null,y?w.createElement(Wne,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function nre(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const rre=kne(w5,tre);var Zg=w.forwardRef(function(t,e){return w.createElement(Pw,Ea({},t,{ref:e,sideCar:rre}))});Zg.classNames=Pw.classNames;var _j=["Enter"," "],sre=["ArrowDown","PageUp","Home"],S5=["ArrowUp","PageDown","End"],ire=[...sre,...S5],are={ltr:[..._j,"ArrowRight"],rtl:[..._j,"ArrowLeft"]},ore={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Qg="Menu",[kp,lre,cre]=Bg(Qg),[Wu,E5]=$r(Qg,[cre,cf,Sw]),Cw=cf(),P5=Sw(),[ure,Hu]=Wu(Qg),[dre,Yg]=Wu(Qg),C5=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:a,modal:o=!0}=t,l=Cw(e),[u,d]=w.useState(null),h=w.useRef(!1),m=Sr(a),p=Bu(s);return w.useEffect(()=>{const y=()=>{h.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>h.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),i.jsx(lE,{...l,children:i.jsx(ure,{scope:e,open:n,onOpenChange:m,content:u,onContentChange:d,children:i.jsx(dre,{scope:e,onClose:w.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:p,modal:o,children:r})})})};C5.displayName=Qg;var hre="MenuAnchor",dE=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Cw(n);return i.jsx(Nw,{...s,...r,ref:e})});dE.displayName=hre;var hE="MenuPortal",[fre,T5]=Wu(hE,{forceMount:void 0}),R5=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,a=Hu(hE,e);return i.jsx(fre,{scope:e,forceMount:n,children:i.jsx(Vr,{present:n||a.open,children:i.jsx(Gg,{asChild:!0,container:s,children:r})})})};R5.displayName=hE;var Si="MenuContent",[mre,fE]=Wu(Si),k5=w.forwardRef((t,e)=>{const n=T5(Si,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=Hu(Si,t.__scopeMenu),o=Yg(Si,t.__scopeMenu);return i.jsx(kp.Provider,{scope:t.__scopeMenu,children:i.jsx(Vr,{present:r||a.open,children:i.jsx(kp.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx(pre,{...s,ref:e}):i.jsx(gre,{...s,ref:e})})})})}),pre=w.forwardRef((t,e)=>{const n=Hu(Si,t.__scopeMenu),r=w.useRef(null),s=pt(e,r);return w.useEffect(()=>{const a=r.current;if(a)return Ew(a)},[]),i.jsx(mE,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ve(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),gre=w.forwardRef((t,e)=>{const n=Hu(Si,t.__scopeMenu);return i.jsx(mE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),vre=lc("MenuContent.ScrollLock"),mE=w.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:y,disableOutsideScroll:j,..._}=t,N=Hu(Si,n),b=Yg(Si,n),x=Cw(n),S=P5(n),C=lre(n),[R,z]=w.useState(null),k=w.useRef(null),I=pt(e,k,N.onContentChange),V=w.useRef(0),T=w.useRef(""),O=w.useRef(0),$=w.useRef(null),M=w.useRef("right"),B=w.useRef(0),J=j?Zg:w.Fragment,ee=j?{as:vre,allowPinchZoom:!0}:void 0,K=G=>{var Ce,ne;const q=T.current+G,X=C().filter(ie=>!ie.disabled),fe=document.activeElement,Te=(Ce=X.find(ie=>ie.ref.current===fe))==null?void 0:Ce.textValue,$e=X.map(ie=>ie.textValue),ze=Tre($e,q,Te),Le=(ne=X.find(ie=>ie.textValue===ze))==null?void 0:ne.ref.current;(function ie(ae){T.current=ae,window.clearTimeout(V.current),ae!==""&&(V.current=window.setTimeout(()=>ie(""),1e3))})(q),Le&&setTimeout(()=>Le.focus())};w.useEffect(()=>()=>window.clearTimeout(V.current),[]),xw();const D=w.useCallback(G=>{var X,fe;return M.current===((X=$.current)==null?void 0:X.side)&&kre(G,(fe=$.current)==null?void 0:fe.area)},[]);return i.jsx(mre,{scope:n,searchRef:T,onItemEnter:w.useCallback(G=>{D(G)&&G.preventDefault()},[D]),onItemLeave:w.useCallback(G=>{var q;D(G)||((q=k.current)==null||q.focus(),z(null))},[D]),onTriggerLeave:w.useCallback(G=>{D(G)&&G.preventDefault()},[D]),pointerGraceTimerRef:O,onPointerGraceIntentChange:w.useCallback(G=>{$.current=G},[]),children:i.jsx(J,{...ee,children:i.jsx(Hg,{asChild:!0,trapped:s,onMountAutoFocus:Ve(a,G=>{var q;G.preventDefault(),(q=k.current)==null||q.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(Wg,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:y,children:i.jsx(g5,{asChild:!0,...S,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:R,onCurrentTabStopIdChange:z,onEntryFocus:Ve(u,G=>{b.isUsingKeyboardRef.current||G.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(cE,{role:"menu","aria-orientation":"vertical","data-state":G5(N.open),"data-radix-menu-content":"",dir:b.dir,...x,..._,ref:I,style:{outline:"none",..._.style},onKeyDown:Ve(_.onKeyDown,G=>{const X=G.target.closest("[data-radix-menu-content]")===G.currentTarget,fe=G.ctrlKey||G.altKey||G.metaKey,Te=G.key.length===1;X&&(G.key==="Tab"&&G.preventDefault(),!fe&&Te&&K(G.key));const $e=k.current;if(G.target!==$e||!ire.includes(G.key))return;G.preventDefault();const Le=C().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);S5.includes(G.key)&&Le.reverse(),Pre(Le)}),onBlur:Ve(t.onBlur,G=>{G.currentTarget.contains(G.target)||(window.clearTimeout(V.current),T.current="")}),onPointerMove:Ve(t.onPointerMove,Ip(G=>{const q=G.target,X=B.current!==G.clientX;if(G.currentTarget.contains(q)&&X){const fe=G.clientX>B.current?"right":"left";M.current=fe,B.current=G.clientX}}))})})})})})})});k5.displayName=Si;var yre="MenuGroup",pE=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Ye.div,{role:"group",...r,ref:e})});pE.displayName=yre;var xre="MenuLabel",I5=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Ye.div,{...r,ref:e})});I5.displayName=xre;var e0="MenuItem",fk="menu.itemSelect",Tw=w.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,a=w.useRef(null),o=Yg(e0,t.__scopeMenu),l=fE(e0,t.__scopeMenu),u=pt(e,a),d=w.useRef(!1),h=()=>{const m=a.current;if(!n&&m){const p=new CustomEvent(fk,{bubbles:!0,cancelable:!0});m.addEventListener(fk,y=>r==null?void 0:r(y),{once:!0}),z3(m,p),p.defaultPrevented?d.current=!1:o.onClose()}};return i.jsx(A5,{...s,ref:u,disabled:n,onClick:Ve(t.onClick,h),onPointerDown:m=>{var p;(p=t.onPointerDown)==null||p.call(t,m),d.current=!0},onPointerUp:Ve(t.onPointerUp,m=>{var p;d.current||(p=m.currentTarget)==null||p.click()}),onKeyDown:Ve(t.onKeyDown,m=>{const p=l.searchRef.current!=="";n||p&&m.key===" "||_j.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Tw.displayName=e0;var A5=w.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=t,o=fE(e0,n),l=P5(n),u=w.useRef(null),d=pt(e,u),[h,m]=w.useState(!1),[p,y]=w.useState("");return w.useEffect(()=>{const j=u.current;j&&y((j.textContent??"").trim())},[a.children]),i.jsx(kp.ItemSlot,{scope:n,disabled:r,textValue:s??p,children:i.jsx(v5,{asChild:!0,...l,focusable:!r,children:i.jsx(Ye.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:Ve(t.onPointerMove,Ip(j=>{r?o.onItemLeave(j):(o.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ve(t.onPointerLeave,Ip(j=>o.onItemLeave(j))),onFocus:Ve(t.onFocus,()=>m(!0)),onBlur:Ve(t.onBlur,()=>m(!1))})})})}),wre="MenuCheckboxItem",O5=w.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx($5,{scope:t.__scopeMenu,checked:n,children:i.jsx(Tw,{role:"menuitemcheckbox","aria-checked":t0(n)?"mixed":n,...s,ref:e,"data-state":vE(n),onSelect:Ve(s.onSelect,()=>r==null?void 0:r(t0(n)?!0:!n),{checkForDefaultPrevented:!1})})})});O5.displayName=wre;var M5="MenuRadioGroup",[bre,_re]=Wu(M5,{value:void 0,onValueChange:()=>{}}),D5=w.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,a=Sr(r);return i.jsx(bre,{scope:t.__scopeMenu,value:n,onValueChange:a,children:i.jsx(pE,{...s,ref:e})})});D5.displayName=M5;var L5="MenuRadioItem",F5=w.forwardRef((t,e)=>{const{value:n,...r}=t,s=_re(L5,t.__scopeMenu),a=n===s.value;return i.jsx($5,{scope:t.__scopeMenu,checked:a,children:i.jsx(Tw,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":vE(a),onSelect:Ve(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});F5.displayName=L5;var gE="MenuItemIndicator",[$5,jre]=Wu(gE,{checked:!1}),V5=w.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,a=jre(gE,n);return i.jsx(Vr,{present:r||t0(a.checked)||a.checked===!0,children:i.jsx(Ye.span,{...s,ref:e,"data-state":vE(a.checked)})})});V5.displayName=gE;var Nre="MenuSeparator",z5=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Ye.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});z5.displayName=Nre;var Sre="MenuArrow",U5=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Cw(n);return i.jsx(uE,{...s,...r,ref:e})});U5.displayName=Sre;var Ere="MenuSub",[X1e,B5]=Wu(Ere),_m="MenuSubTrigger",W5=w.forwardRef((t,e)=>{const n=Hu(_m,t.__scopeMenu),r=Yg(_m,t.__scopeMenu),s=B5(_m,t.__scopeMenu),a=fE(_m,t.__scopeMenu),o=w.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:u}=a,d={__scopeMenu:t.__scopeMenu},h=w.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return w.useEffect(()=>h,[h]),w.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),u(null)}},[l,u]),i.jsx(dE,{asChild:!0,...d,children:i.jsx(A5,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":G5(n.open),...t,ref:vw(e,s.onTriggerChange),onClick:m=>{var p;(p=t.onClick)==null||p.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ve(t.onPointerMove,Ip(m=>{a.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:Ve(t.onPointerLeave,Ip(m=>{var y,j;h();const p=(y=n.content)==null?void 0:y.getBoundingClientRect();if(p){const _=(j=n.content)==null?void 0:j.dataset.side,N=_==="right",b=N?-5:5,x=p[N?"left":"right"],S=p[N?"right":"left"];a.onPointerGraceIntentChange({area:[{x:m.clientX+b,y:m.clientY},{x,y:p.top},{x:S,y:p.top},{x:S,y:p.bottom},{x,y:p.bottom}],side:_}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(m),m.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Ve(t.onKeyDown,m=>{var y;const p=a.searchRef.current!=="";t.disabled||p&&m.key===" "||are[r.dir].includes(m.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),m.preventDefault())})})})});W5.displayName=_m;var H5="MenuSubContent",q5=w.forwardRef((t,e)=>{const n=T5(Si,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=Hu(Si,t.__scopeMenu),o=Yg(Si,t.__scopeMenu),l=B5(H5,t.__scopeMenu),u=w.useRef(null),d=pt(e,u);return i.jsx(kp.Provider,{scope:t.__scopeMenu,children:i.jsx(Vr,{present:r||a.open,children:i.jsx(kp.Slot,{scope:t.__scopeMenu,children:i.jsx(mE,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var m;o.isUsingKeyboardRef.current&&((m=u.current)==null||m.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Ve(t.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Ve(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:Ve(t.onKeyDown,h=>{var y;const m=h.currentTarget.contains(h.target),p=ore[o.dir].includes(h.key);m&&p&&(a.onOpenChange(!1),(y=l.trigger)==null||y.focus(),h.preventDefault())})})})})})});q5.displayName=H5;function G5(t){return t?"open":"closed"}function t0(t){return t==="indeterminate"}function vE(t){return t0(t)?"indeterminate":t?"checked":"unchecked"}function Pre(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Cre(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Tre(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=Cre(t,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function Rre(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],u=e[o],d=l.x,h=l.y,m=u.x,p=u.y;h>r!=p>r&&n<(m-d)*(r-h)/(p-h)+d&&(s=!s)}return s}function kre(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Rre(n,e)}function Ip(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Ire=C5,Are=dE,Ore=R5,Mre=k5,Dre=pE,Lre=I5,Fre=Tw,$re=O5,Vre=D5,zre=F5,Ure=V5,Bre=z5,Wre=U5,Hre=W5,qre=q5,Rw="DropdownMenu",[Gre,eje]=$r(Rw,[E5]),xs=E5(),[Kre,K5]=Gre(Rw),Z5=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,u=xs(e),d=w.useRef(null),[h,m]=Xs({prop:s,defaultProp:a??!1,onChange:o,caller:Rw});return i.jsx(Kre,{scope:e,triggerId:Qs(),triggerRef:d,contentId:Qs(),open:h,onOpenChange:m,onOpenToggle:w.useCallback(()=>m(p=>!p),[m]),modal:l,children:i.jsx(Ire,{...u,open:h,onOpenChange:m,dir:r,modal:l,children:n})})};Z5.displayName=Rw;var Q5="DropdownMenuTrigger",Y5=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,a=K5(Q5,n),o=xs(n);return i.jsx(Are,{asChild:!0,...o,children:i.jsx(Ye.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:vw(e,a.triggerRef),onPointerDown:Ve(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Ve(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Y5.displayName=Q5;var Zre="DropdownMenuPortal",J5=t=>{const{__scopeDropdownMenu:e,...n}=t,r=xs(e);return i.jsx(Ore,{...r,...n})};J5.displayName=Zre;var X5="DropdownMenuContent",eF=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=K5(X5,n),a=xs(n),o=w.useRef(!1);return i.jsx(Mre,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:e,onCloseAutoFocus:Ve(t.onCloseAutoFocus,l=>{var u;o.current||(u=s.triggerRef.current)==null||u.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ve(t.onInteractOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,h=u.button===2||d;(!s.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});eF.displayName=X5;var Qre="DropdownMenuGroup",Yre=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xs(n);return i.jsx(Dre,{...s,...r,ref:e})});Yre.displayName=Qre;var Jre="DropdownMenuLabel",tF=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xs(n);return i.jsx(Lre,{...s,...r,ref:e})});tF.displayName=Jre;var Xre="DropdownMenuItem",nF=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xs(n);return i.jsx(Fre,{...s,...r,ref:e})});nF.displayName=Xre;var ese="DropdownMenuCheckboxItem",rF=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xs(n);return i.jsx($re,{...s,...r,ref:e})});rF.displayName=ese;var tse="DropdownMenuRadioGroup",nse=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xs(n);return i.jsx(Vre,{...s,...r,ref:e})});nse.displayName=tse;var rse="DropdownMenuRadioItem",sF=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xs(n);return i.jsx(zre,{...s,...r,ref:e})});sF.displayName=rse;var sse="DropdownMenuItemIndicator",iF=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xs(n);return i.jsx(Ure,{...s,...r,ref:e})});iF.displayName=sse;var ise="DropdownMenuSeparator",aF=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xs(n);return i.jsx(Bre,{...s,...r,ref:e})});aF.displayName=ise;var ase="DropdownMenuArrow",ose=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xs(n);return i.jsx(Wre,{...s,...r,ref:e})});ose.displayName=ase;var lse="DropdownMenuSubTrigger",oF=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xs(n);return i.jsx(Hre,{...s,...r,ref:e})});oF.displayName=lse;var cse="DropdownMenuSubContent",lF=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xs(n);return i.jsx(qre,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lF.displayName=cse;var use=Z5,dse=Y5,hse=J5,cF=eF,uF=tF,dF=nF,hF=rF,fF=sF,mF=iF,pF=aF,gF=oF,vF=lF;function xc(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var fse=["color"],mse=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=xc(t,fse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),pse=["color"],yE=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=xc(t,pse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),gse=["color"],yF=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=xc(t,gse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),vse=["color"],yse=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=xc(t,vse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),xse=["color"],xF=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=xc(t,xse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),wse=["color"],bse=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=xc(t,wse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),_se=["color"],jse=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=xc(t,_se);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Nse=["color"],Sse=w.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,s=xc(t,Nse);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});const jj=use,Nj=dse,Ese=w.forwardRef(({className:t,inset:e,children:n,...r},s)=>i.jsxs(gF,{ref:s,className:at("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,i.jsx(xF,{className:"ml-auto h-4 w-4"})]}));Ese.displayName=gF.displayName;const Pse=w.forwardRef(({className:t,...e},n)=>i.jsx(vF,{ref:n,className:at("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Pse.displayName=vF.displayName;const n0=w.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(hse,{children:i.jsx(cF,{ref:r,sideOffset:e,className:at("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));n0.displayName=cF.displayName;const Ut=w.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(dF,{ref:r,className:at("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Ut.displayName=dF.displayName;const Cse=w.forwardRef(({className:t,children:e,checked:n,...r},s)=>i.jsxs(hF,{ref:s,className:at("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(mF,{children:i.jsx(yE,{className:"h-4 w-4"})})}),e]}));Cse.displayName=hF.displayName;const Tse=w.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(fF,{ref:r,className:at("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(mF,{children:i.jsx(Sse,{className:"h-4 w-4 fill-current"})})}),e]}));Tse.displayName=fF.displayName;const Rse=w.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(uF,{ref:r,className:at("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Rse.displayName=uF.displayName;const pi=w.forwardRef(({className:t,...e},n)=>i.jsx(pF,{ref:n,className:at("-mx-1 my-1 h-px bg-muted",t),...e}));pi.displayName=pF.displayName;var wF={exports:{}},bF={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kh=w;function kse(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ise=typeof Object.is=="function"?Object.is:kse,Ase=kh.useState,Ose=kh.useEffect,Mse=kh.useLayoutEffect,Dse=kh.useDebugValue;function Lse(t,e){var n=e(),r=Ase({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return Mse(function(){s.value=n,s.getSnapshot=e,p_(s)&&a({inst:s})},[t,n,e]),Ose(function(){return p_(s)&&a({inst:s}),t(function(){p_(s)&&a({inst:s})})},[t]),Dse(n),n}function p_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ise(t,n)}catch{return!0}}function Fse(t,e){return e()}var $se=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Fse:Lse;bF.useSyncExternalStore=kh.useSyncExternalStore!==void 0?kh.useSyncExternalStore:$se;wF.exports=bF;var xE=wF.exports;function Vse(){return xE.useSyncExternalStore(zse,()=>!0,()=>!1)}function zse(){return()=>{}}var wE="Avatar",[Use,tje]=$r(wE),[Bse,_F]=Use(wE),jF=w.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=w.useState("idle");return i.jsx(Bse,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(Ye.span,{...r,ref:e})})});jF.displayName=wE;var NF="AvatarImage",SF=w.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,o=_F(NF,n),l=Wse(r,a),u=Sr(d=>{s(d),o.onImageLoadingStatusChange(d)});return er(()=>{l!=="idle"&&u(l)},[l,u]),l==="loaded"?i.jsx(Ye.img,{...a,ref:e,src:r}):null});SF.displayName=NF;var EF="AvatarFallback",PF=w.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=_F(EF,n),[o,l]=w.useState(r===void 0);return w.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(u)}},[r]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(Ye.span,{...s,ref:e}):null});PF.displayName=EF;function mk(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Wse(t,{referrerPolicy:e,crossOrigin:n}){const r=Vse(),s=w.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=w.useState(()=>mk(a,t));return er(()=>{l(mk(a,t))},[a,t]),er(()=>{const u=m=>()=>{l(m)};if(!a)return;const d=u("loaded"),h=u("error");return a.addEventListener("load",d),a.addEventListener("error",h),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",d),a.removeEventListener("error",h)}},[a,n,e]),o}var CF=jF,TF=SF,RF=PF;const Uo=w.forwardRef(({className:t,...e},n)=>i.jsx(CF,{ref:n,className:at("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Uo.displayName=CF.displayName;const Bo=w.forwardRef(({className:t,...e},n)=>i.jsx(TF,{ref:n,className:at("aspect-square h-full w-full",t),...e}));Bo.displayName=TF.displayName;const Wo=w.forwardRef(({className:t,...e},n)=>i.jsx(RF,{ref:n,className:at("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Wo.displayName=RF.displayName;const Hse=yw("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function lt({className:t,variant:e,...n}){return i.jsx("div",{className:at(Hse({variant:e}),t),...n})}const qse={},pk=t=>{let e;const n=new Set,r=(h,m)=>{const p=typeof h=="function"?h(e):h;if(!Object.is(p,e)){const y=e;e=m??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(j=>j(e,y))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(qse?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,s,u);return u},Gse=t=>t?pk(t):pk;var kF={exports:{}},IF={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw=w,Kse=xE;function Zse(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qse=typeof Object.is=="function"?Object.is:Zse,Yse=Kse.useSyncExternalStore,Jse=kw.useRef,Xse=kw.useEffect,eie=kw.useMemo,tie=kw.useDebugValue;IF.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var a=Jse(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=eie(function(){function u(y){if(!d){if(d=!0,h=y,y=r(y),s!==void 0&&o.hasValue){var j=o.value;if(s(j,y))return m=j}return m=y}if(j=m,Qse(h,y))return j;var _=r(y);return s!==void 0&&s(j,_)?(h=y,j):(h=y,m=_)}var d=!1,h,m,p=n===void 0?null:n;return[function(){return u(e())},p===null?void 0:function(){return u(p())}]},[e,n,r,s]);var l=Yse(t,a[0],a[1]);return Xse(function(){o.hasValue=!0,o.value=l},[l]),tie(l),l};kF.exports=IF;var nie=kF.exports;const rie=Go(nie),AF={},{useDebugValue:sie}=oe,{useSyncExternalStoreWithSelector:iie}=rie;let gk=!1;const aie=t=>t;function oie(t,e=aie,n){(AF?"production":void 0)!=="production"&&n&&!gk&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),gk=!0);const r=iie(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return sie(r),r}const vk=t=>{(AF?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Gse(t):t,n=(r,s)=>oie(e,r,s);return Object.assign(n,e),n},uf=t=>t?vk(t):vk,Dc=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},lie=(t,e,n)=>{const r=[t,e].sort();return`${r[0]}_${r[1]}_${n}`},cie=async(t,e,n,r,s,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const l=`${window.location.origin}/messages?conversation=${o}`,u=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:n,senderUniversity:r,listingTitle:s,messagePreview:a,conversationUrl:l})});u.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await u.text())}catch(l){console.error("Error sending email notification:",l)}},Iw=uf((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:n=>{t({loading:!0});const{unsubscribeConversations:r}=e();r&&r();try{const s=Tn(Ht(We,"conversations"),lr("participants","array-contains",n)),a=IR(s,o=>{const l=[];o.docs.forEach(u=>{const d=u.data();d.deletedFor&&d.deletedFor.includes(n)||d.blockedBy&&d.blockedBy.includes(n)||l.push({id:u.id,participants:d.participants||[],listingId:d.listingId||"",listingTitle:d.listingTitle||"",listingImage:d.listingImage,listingPrice:d.listingPrice||0,participantDetails:d.participantDetails||{},lastMessage:d.lastMessage?{...d.lastMessage,sentAt:Dc(d.lastMessage.sentAt)}:void 0,unreadCount:d.unreadCount||{},blockedBy:d.blockedBy||[],deletedFor:d.deletedFor||[],status:d.status||"active",createdAt:Dc(d.createdAt),updatedAt:Dc(d.updatedAt)})}),l.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()),t({conversations:l,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),Ne.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(s){console.error("Error setting up conversations listener:",s),t({loading:!1})}},fetchMessages:n=>{const{unsubscribeMessages:r}=e();r&&r();try{const s=Tn(Ht(We,"conversations",n,"messages")),a=IR(s,o=>{const l=o.docs.map(u=>{const d=u.data();return{id:u.id,conversationId:n,senderId:d.senderId,senderName:d.senderName,senderAvatar:d.senderAvatar,text:d.text,type:d.type||"text",attachments:d.attachments||[],seen:d.seen||!1,sentAt:Dc(d.sentAt)}});l.sort((u,d)=>u.sentAt.getTime()-d.sentAt.getTime()),t({messages:l,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),Ne.error("Erreur lors du chargement des messages")})}catch(s){console.error("Error setting up messages listener:",s)}},sendMessage:async(n,r,s,a,o)=>{try{console.log("Sending message:",{conversationId:n,text:r,senderId:s,senderName:a});const l=e().currentConversation;if(!l){console.error("No current conversation");return}if(l.blockedBy&&l.blockedBy.includes(s)){Ne.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const u={conversationId:n,senderId:s,senderName:a,senderAvatar:o||null,text:r,type:"text",seen:!1,sentAt:fr()};console.log("Adding message to Firestore:",u);const d=await ic(Ht(We,"conversations",n,"messages"),u);console.log("Message added with ID:",d.id);const h=l.participants.filter(y=>y!==s),m={};h.forEach(y=>{m[`unreadCount.${y}`]=(l.unreadCount[y]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:r,sentAt:fr(),senderId:s,senderName:a},updatedAt:fr(),...m});const p=Object.fromEntries(Object.entries(m).filter(([,y])=>y!==void 0));await Cn(_t(We,"conversations",n),{lastMessage:{text:r,sentAt:fr(),senderId:s,senderName:a},updatedAt:fr(),...p}),h.forEach(async y=>{const j=l.participantDetails[y];if(j&&j.email){const _=l.participantDetails[s];await cie(j.email,j.name,a,(_==null?void 0:_.university)||"Université non spécifiée",l.listingTitle,r,n)}}),console.log("Message sent successfully")}catch(l){console.error("Error sending message:",l),Ne.error("Erreur lors de l'envoi du message")}},createConversation:async(n,r,s,a,o,l,u,d,h)=>{try{console.log("Creating conversation:",{listingId:n,buyerId:o,sellerId:l});const m=lie(o,l,n);console.log("Generated conversation ID:",m);const p=await Zs(_t(We,"conversations",m));if(p.exists()){console.log("Conversation already exists, sending message");const N=p.data(),b={id:m,participants:N.participants||[],listingId:N.listingId||"",listingTitle:N.listingTitle||"",listingImage:N.listingImage,listingPrice:N.listingPrice||0,participantDetails:N.participantDetails||{},lastMessage:N.lastMessage?{...N.lastMessage,sentAt:Dc(N.lastMessage.sentAt)}:void 0,unreadCount:N.unreadCount||{},blockedBy:N.blockedBy||[],deletedFor:N.deletedFor||[],status:N.status||"active",createdAt:Dc(N.createdAt),updatedAt:Dc(N.updatedAt)};return t({currentConversation:b}),await e().sendMessage(m,h,o,u.displayName,u.photoURL),m}console.log("Creating new conversation");const y={participants:[o,l],listingId:n,listingTitle:r,listingImage:a||null,listingPrice:s,participantDetails:{[o]:{name:u.displayName,avatar:u.photoURL||null,university:u.university,verified:u.isVerified||!1,email:u.email||null},[l]:{name:d.sellerName,avatar:d.sellerAvatar||null,university:d.sellerUniversity,verified:d.sellerVerified||!1,email:d.email||null}},unreadCount:{[o]:0,[l]:1},status:"active",createdAt:fr(),updatedAt:fr()};console.log("Setting conversation document:",y);const j=Object.fromEntries(Object.entries(y).filter(([,N])=>N!==void 0));await Yc(_t(We,"conversations",m),j);const _={id:m,participants:[o,l],listingId:n,listingTitle:r,listingImage:a||void 0,listingPrice:s,participantDetails:y.participantDetails,unreadCount:y.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:_}),console.log("Sending initial message"),await e().sendMessage(m,h,o,u.displayName,u.photoURL),m}catch(m){throw console.error("Error creating conversation:",m),Ne.error("Erreur lors de la création de la conversation"),m}},markMessagesAsSeen:async(n,r)=>{try{const s=_t(We,"conversations",n),a=Object.fromEntries(Object.entries({[`unreadCount.${r}`]:0}).filter(([,o])=>o!==void 0));await Cn(s,a)}catch(s){console.error("Error marking messages as seen:",s)}},setCurrentConversation:n=>{t({currentConversation:n})},blockUser:async(n,r)=>{try{const s=_t(We,"conversations",n),a=await Zs(s);if(a.exists()){const l=a.data().blockedBy||[];if(!l.includes(r)){const u=Object.fromEntries(Object.entries({blockedBy:[...l,r],status:"blocked",updatedAt:fr()}).filter(([,d])=>d!==void 0));await Cn(s,u),Ne.success("Utilisateur bloqué")}}}catch(s){console.error("Error blocking user:",s),Ne.error("Erreur lors du blocage")}},reportUser:async(n,r,s,a,o)=>{try{const l={reporterId:r,reportedUserId:s,conversationId:n,reason:a,description:o,status:"pending",createdAt:fr()},u=Object.fromEntries(Object.entries(l).filter(([,d])=>d!==void 0));await ic(Ht(We,"reports"),u),Ne.success("Signalement envoyé")}catch(l){console.error("Error reporting user:",l),Ne.error("Erreur lors du signalement")}},deleteConversation:async(n,r)=>{try{const s=_t(We,"conversations",n),a=await Zs(s);if(a.exists()){const o=a.data(),l=o.deletedFor||[];if(!l.includes(r)){const u=[...l,r];if(u.length===o.participants.length)await Sh(s);else{const d=Object.fromEntries(Object.entries({deletedFor:u,updatedAt:fr()}).filter(([,h])=>h!==void 0));await Cn(s,d)}Ne.success("Conversation supprimée")}}}catch(s){console.error("Error deleting conversation:",s),Ne.error("Erreur lors de la suppression")}},findConversationByListing:(n,r)=>{const{conversations:s}=e();return s.find(a=>a.listingId===n&&a.participants.includes(r))||null},cleanup:()=>{const{unsubscribeConversations:n,unsubscribeMessages:r}=e();n&&n(),r&&r(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),uie={};function die(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),l=(a=n.getItem(s))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,a)=>n.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>n.removeItem(s)}}const Ap=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Ap(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ap(r)(n)}}}},hie=(t,e)=>(n,r,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:N=>N,version:0,merge:(N,b)=>({...b,...N}),...e},o=!1;const l=new Set,u=new Set;let d;try{d=a.getStorage()}catch{}if(!d)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...N)},r,s);const h=Ap(a.serialize),m=()=>{const N=a.partialize({...r()});let b;const x=h({state:N,version:a.version}).then(S=>d.setItem(a.name,S)).catch(S=>{b=S});if(b)throw b;return x},p=s.setState;s.setState=(N,b)=>{p(N,b),m()};const y=t((...N)=>{n(...N),m()},r,s);let j;const _=()=>{var N;if(!d)return;o=!1,l.forEach(x=>x(r()));const b=((N=a.onRehydrateStorage)==null?void 0:N.call(a,r()))||void 0;return Ap(d.getItem.bind(d))(a.name).then(x=>{if(x)return a.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return a.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var S;return j=a.merge(x,(S=r())!=null?S:y),n(j,!0),m()}).then(()=>{b==null||b(j,void 0),o=!0,u.forEach(x=>x(j))}).catch(x=>{b==null||b(void 0,x)})};return s.persist={setOptions:N=>{a={...a,...N},N.getStorage&&(d=N.getStorage())},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:N=>(l.add(N),()=>{l.delete(N)}),onFinishHydration:N=>(u.add(N),()=>{u.delete(N)})},_(),j||y},fie=(t,e)=>(n,r,s)=>{let a={storage:die(()=>localStorage),partialize:_=>_,version:0,merge:(_,N)=>({...N,..._}),...e},o=!1;const l=new Set,u=new Set;let d=a.storage;if(!d)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(..._)},r,s);const h=()=>{const _=a.partialize({...r()});return d.setItem(a.name,{state:_,version:a.version})},m=s.setState;s.setState=(_,N)=>{m(_,N),h()};const p=t((..._)=>{n(..._),h()},r,s);s.getInitialState=()=>p;let y;const j=()=>{var _,N;if(!d)return;o=!1,l.forEach(x=>{var S;return x((S=r())!=null?S:p)});const b=((N=a.onRehydrateStorage)==null?void 0:N.call(a,(_=r())!=null?_:p))||void 0;return Ap(d.getItem.bind(d))(a.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return[!0,a.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var S;const[C,R]=x;if(y=a.merge(R,(S=r())!=null?S:p),n(y,!0),C)return h()}).then(()=>{b==null||b(y,void 0),y=r(),o=!0,u.forEach(x=>x(y))}).catch(x=>{b==null||b(void 0,x)})};return s.persist={setOptions:_=>{a={...a,..._},_.storage&&(d=_.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>j(),hasHydrated:()=>o,onHydrate:_=>(l.add(_),()=>{l.delete(_)}),onFinishHydration:_=>(u.add(_),()=>{u.delete(_)})},a.skipHydration||j(),y||p},mie=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((uie?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),hie(t,e)):fie(t,e),pie=mie,df=uf()(pie((t,e)=>({cart:[],cartTotal:0,addToCart:n=>{const{cart:r}=e(),s=r.find(a=>a.id===n.id);t(s?{cart:r.map(a=>a.id===n.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+n.price}:{cart:[...r,{...n,quantity:1}],cartTotal:e().cartTotal+n.price}),Ne.success("Article ajouté au panier")},removeFromCart:n=>{const{cart:r}=e(),s=r.find(a=>a.id===n);s&&t({cart:r.filter(a=>a.id!==n),cartTotal:e().cartTotal-s.price*s.quantity})},updateQuantity:(n,r)=>{const{cart:s}=e(),a=s.find(o=>o.id===n);if(a){const o=r-a.quantity;t({cart:s.map(l=>l.id===n?{...l,quantity:r}:l),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((n,r)=>n+r.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})})),gie=()=>{var x,S;const{currentUser:t,userProfile:e,logout:n}=jn(),{conversations:r,fetchConversations:s}=Iw(),{getCartItemCount:a}=df(),{theme:o,setTheme:l}=aW(),u=yr(),[d,h]=w.useState(""),m=oe.useMemo(()=>!t||!r.length?0:r.reduce((C,R)=>{const z=R.unreadCount[t.uid]||0;return C+z},0),[r,t]);w.useEffect(()=>{t&&s(t.uid)},[t,s]);const p=C=>{C.preventDefault(),d.trim()&&u(`/listings?q=${encodeURIComponent(d.trim())}`)},y=async()=>{try{await n(),u("/")}catch(C){console.error("Logout error:",C)}},j=a(),_=localStorage.getItem("pendingUserData"),N=_?JSON.parse(_):{};let b="";return e!=null&&e.firstName&&(e!=null&&e.lastName)?b=`${e.firstName} ${e.lastName}`:e!=null&&e.displayName?b=e.displayName:t!=null&&t.displayName?b=t.displayName:t!=null&&t.email?b=t.email.split("@")[0]:b="Utilisateur",e!=null&&e.university||N.university,((e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||N.university==="Autre université"&&N.otherUniversity)&&(e&&e.otherUniversity||N.otherUniversity),w.useEffect(()=>{_&&(t!=null&&t.emailVerified)},[t,_]),i.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm",children:i.jsxs("div",{className:"container mx-auto px-2 sm:px-4 h-14 sm:h-16 flex items-center justify-between",children:[i.jsxs(Ue,{to:"/",className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:i.jsx(nf,{className:"w-3 h-3 sm:w-5 sm:h-5 text-white"})}),i.jsxs("div",{className:"hidden sm:block",children:[i.jsx("span",{className:"font-bold text-lg sm:text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),i.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),i.jsx("form",{onSubmit:p,className:"flex-1 max-w-lg mx-2 sm:mx-4 hidden sm:block",children:i.jsxs("div",{className:"relative",children:[i.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ze,{type:"text",placeholder:"Rechercher entre étudiants...",value:d,onChange:C=>h(C.target.value),className:"pl-10 w-full"})]})}),i.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[i.jsxs("div",{onClick:()=>l(o==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors","aria-label":"Changer le thème",children:[i.jsx($X,{className:"h-4 w-4 sm:h-5 sm:w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),i.jsx(IX,{className:"absolute top-0 left-0 h-4 w-4 sm:h-5 sm:w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?i.jsxs(i.Fragment,{children:[i.jsx(te,{asChild:!0,className:"hidden sm:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:i.jsxs(Ue,{to:"/create",children:[i.jsx(ou,{className:"w-4 h-4 mr-2"}),"Publier"]})}),i.jsxs("div",{className:"relative hidden sm:block",children:[i.jsx(te,{variant:"ghost",size:"icon",asChild:!0,children:i.jsx(Ue,{to:"/cart",children:i.jsx(oc,{className:"w-4 h-4"})})}),j>0&&i.jsx(lt,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full",children:j>99?"99+":j})]}),i.jsx(te,{variant:"ghost",size:"icon",asChild:!0,className:"hidden sm:flex",children:i.jsx(Ue,{to:"/saved-searches",children:i.jsx(Hi,{className:"w-4 h-4"})})}),i.jsxs("div",{className:"relative hidden sm:block",children:[i.jsx(te,{variant:"ghost",size:"icon",asChild:!0,children:i.jsx(Ue,{to:"/messages",children:i.jsx(Rn,{className:"w-4 h-4"})})}),m>0&&i.jsx(lt,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full",children:m>99?"99+":m})]}),i.jsxs(jj,{children:[i.jsx(Nj,{asChild:!0,children:i.jsxs(te,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:[i.jsxs(Uo,{className:"h-8 w-8",children:[i.jsx(Bo,{src:e==null?void 0:e.photoURL}),i.jsx(Wo,{children:((S=(x=e==null?void 0:e.displayName)==null?void 0:x[0])==null?void 0:S.toUpperCase())||"U"})]}),(e==null?void 0:e.isVerified)&&i.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx(qt,{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 text-white"})})]})}),i.jsxs(n0,{className:"w-64",align:"end",children:[i.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:i.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"font-medium text-sm sm:text-base",children:b}),(e==null?void 0:e.isVerified)&&i.jsxs(lt,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:[i.jsx(qt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),e&&i.jsx("div",{children:i.jsx("div",{className:"text-xs text-muted-foreground",children:e.university==="Autre université"?e.otherUniversity:e.university})}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(Xi,{className:"w-3 h-3 text-green-600"}),i.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO₂ économisés"]})]})]})}),i.jsx(pi,{}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/profile",className:"cursor-pointer",children:[i.jsx(ts,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/settings",className:"cursor-pointer",children:[i.jsx(Pp,{className:"w-4 h-4 mr-2"}),"Paramètres"]})}),i.jsx(pi,{}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/orders",className:"cursor-pointer",children:[i.jsx(En,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/payments",className:"cursor-pointer",children:[i.jsx(zg,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),i.jsx(pi,{}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/favorites",className:"cursor-pointer",children:[i.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/saved-searches",className:"cursor-pointer",children:[i.jsx(Q2,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardées"]})}),i.jsx(pi,{}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/messages",className:"cursor-pointer relative",children:[i.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Messages",m>0&&i.jsx(lt,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})}),i.jsx(pi,{}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/impact",className:"cursor-pointer",children:[i.jsx(Xi,{className:"w-4 h-4 mr-2"}),"Mon impact écologique"]})}),i.jsx(pi,{}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/help",className:"cursor-pointer",children:[i.jsx(Un,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/safety",className:"cursor-pointer",children:[i.jsx(qt,{className:"w-4 h-4 mr-2"}),"Conseils de sécurité"]})}),i.jsx(pi,{}),i.jsxs(Ut,{onClick:y,className:"cursor-pointer text-destructive",children:[i.jsx(TX,{className:"w-4 h-4 mr-2"}),"Se déconnecter"]})]})]}),i.jsx(te,{size:"icon",asChild:!0,className:"sm:hidden bg-gradient-to-r from-primary to-secondary",children:i.jsx(Ue,{to:"/create",children:i.jsx(ou,{className:"w-4 h-4"})})})]}):i.jsxs(i.Fragment,{children:[i.jsx(te,{variant:"ghost",asChild:!0,className:"hidden sm:flex",children:i.jsx(Ue,{to:"/auth",children:"Se connecter"})}),i.jsx(te,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 hidden sm:flex",children:i.jsx(Ue,{to:"/auth",children:"Rejoindre"})})]}),i.jsxs(jj,{children:[i.jsx(Nj,{asChild:!0,className:"sm:hidden",children:i.jsx(te,{className:"p-2 text-foreground hover:text-primary transition-colors","aria-label":"Menu",children:i.jsx(kX,{className:"w-4 h-4"})})}),i.jsxs(n0,{className:"w-56",align:"end",children:[i.jsx("div",{className:"p-2",children:i.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[i.jsx(Ze,{type:"text",placeholder:"Rechercher...",value:d,onChange:C=>h(C.target.value),className:"flex-1"}),i.jsx(te,{type:"submit",size:"icon",children:i.jsx(Er,{className:"w-4 h-4"})})]})}),i.jsx(pi,{}),i.jsx(Ut,{asChild:!0,children:i.jsx(Ue,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),i.jsx(Ut,{asChild:!0,children:i.jsx(Ue,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre étudiants"})}),i.jsx(Ut,{asChild:!0,children:i.jsx(Ue,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & Échanges"})}),i.jsx(Ut,{asChild:!0,children:i.jsx(Ue,{to:"/listings?category=services",className:"cursor-pointer",children:"Services étudiants"})}),i.jsx(Ut,{asChild:!0,children:i.jsx(Ue,{to:"/listings?category=housing",className:"cursor-pointer",children:"Logement & Colocation"})}),i.jsx(Ut,{asChild:!0,children:i.jsx(Ue,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&i.jsxs(i.Fragment,{children:[i.jsx(pi,{}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/create",className:"cursor-pointer",children:[i.jsx(ou,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/cart",className:"cursor-pointer relative",children:[i.jsx(oc,{className:"w-4 h-4 mr-2 "}),"Panier",j>0&&i.jsx(lt,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 ",children:j})]})}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/messages",className:"cursor-pointer relative",children:[i.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Messages",m>0&&i.jsx(lt,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/favorites",className:"cursor-pointer",children:[i.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/profile",className:"cursor-pointer",children:[i.jsx(ts,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:"/settings",className:"cursor-pointer",children:[i.jsx(Pp,{className:"w-4 h-4 mr-2"}),"Paramètres"]})})]}),!t&&i.jsxs(i.Fragment,{children:[i.jsx(pi,{}),i.jsx(Ut,{asChild:!0,children:i.jsx(Ue,{to:"/auth",className:"cursor-pointer",children:"Se connecter"})}),i.jsx(Ut,{asChild:!0,children:i.jsx(Ue,{to:"/auth",className:"cursor-pointer",children:"Rejoindre"})})]})]})]})]})]})})};function vie({icon:t,size:e=32,gradientId:n}){return i.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:n,x1:"0",y1:"0",x2:"1",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#2ECC71"}),i.jsx("stop",{offset:"100%",stopColor:"#4A90E2"})]})}),i.jsx(t,{width:e,height:e,fill:`url(#${n})`})]})}const yie=()=>i.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto",children:i.jsxs("div",{className:"container mx-auto px-4 py-12",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(vie,{icon:nf,gradientId:"gradient-footer",size:32}),i.jsxs("div",{children:[i.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),i.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"La première plateforme d'échange entre étudiants vérifiés. Achetez, vendez, donnez et échangez en toute sécurité au sein de votre communauté universitaire."}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx("a",{href:"https://facebook.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:i.jsx(jX,{className:"w-5 h-5"})}),i.jsx("a",{href:"https://twitter.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:i.jsx(BX,{className:"w-5 h-5"})}),i.jsx("a",{href:"https://instagram.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:i.jsx(PX,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Navigation"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsx("li",{children:i.jsx(Ue,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors",children:"Toutes les annonces"})}),i.jsx("li",{children:i.jsx(Ue,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors",children:"Dons entre étudiants"})}),i.jsx("li",{children:i.jsx(Ue,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors",children:"Troc & Échanges"})}),i.jsx("li",{children:i.jsx(Ue,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors",children:"Publier une annonce"})}),i.jsx("li",{children:i.jsx(Ue,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors",children:"Comment ça marche"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Catégories populaires"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsx("li",{children:i.jsx(Ue,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors",children:"Livres & Cours"})}),i.jsx("li",{children:i.jsx(Ue,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors",children:"Électronique"})}),i.jsx("li",{children:i.jsx(Ue,{to:"/listings?category=housing",className:"text-muted-foreground hover:text-primary transition-colors",children:"Logement & Colocation"})}),i.jsx("li",{children:i.jsx(Ue,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors",children:"Services étudiants"})}),i.jsx("li",{children:i.jsx(Ue,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors",children:"Jobs & Stages"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Sécurité & Confiance"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[i.jsx(qt,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{children:"Étudiants 100% vérifiés"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[i.jsx(Xi,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{children:"Impact écologique mesuré"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[i.jsx(Os,{className:"w-4 h-4"}),i.jsx("span",{children:"support@studymarket.fr"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ue,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conseils de sécurité"}),i.jsx(Ue,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Processus de vérification"}),i.jsx(Ue,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Règles de la communauté"}),i.jsx(Ue,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Centre d'aide"})]})]})]}),i.jsxs("div",{className:"border-t border-border mt-8 pt-8 flex flex-col sm:flex-row justify-between items-center",children:[i.jsx("p",{className:"text-muted-foreground text-sm",children:"© 2024 StudyMarket. Tous droits réservés. Plateforme dédiée aux étudiants vérifiés."}),i.jsxs("div",{className:"flex space-x-6 mt-4 sm:mt-0",children:[i.jsx(Ue,{to:"/terms",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conditions d'utilisation"}),i.jsx(Ue,{to:"/privacy",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Politique de confidentialité"}),i.jsx(Ue,{to:"/cookies",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Cookies"}),i.jsxs("a",{href:"mailto:support@studymarket.fr",className:"text-muted-foreground hover:text-primary transition-colors text-sm flex items-center gap-1",children:[i.jsx(Cs,{className:"w-3 h-3"}),"Contact"]})]})]})]})}),pe=w.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:at("rounded-xl border bg-card text-card-foreground shadow",t),...e}));pe.displayName="Card";const et=w.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:at("flex flex-col space-y-1.5 p-6",t),...e}));et.displayName="CardHeader";const nt=w.forwardRef(({className:t,...e},n)=>i.jsx("h3",{ref:n,className:at("font-semibold leading-none tracking-tight",t),...e}));nt.displayName="CardTitle";const kt=w.forwardRef(({className:t,...e},n)=>i.jsx("p",{ref:n,className:at("text-sm text-muted-foreground",t),...e}));kt.displayName="CardDescription";const ge=w.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:at("p-6 pt-0",t),...e}));ge.displayName="CardContent";const OF=w.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:at("flex items-center p-6 pt-0",t),...e}));OF.displayName="CardFooter";const r0=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(r0).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=r0(t[n]);r!==void 0&&(e[n]=r)}),e}return t},yk=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},g_=t=>{var n,r,s,a,o,l;const e=t.data();return{id:t.id,...e,createdAt:yk(e.createdAt),updatedAt:yk(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((n=e.location)==null?void 0:n.city)||"Paris",state:((r=e.location)==null?void 0:r.state)||"Île-de-France",country:((s=e.location)==null?void 0:s.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((l=e.location)==null?void 0:l.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Université non spécifiée",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},Jg=uf((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(n={},r=!1)=>{const{listings:s,lastDoc:a}=e();if(!(!r&&!a)){t({loading:!0});try{let o=Tn(Ht(We,"listings"),TR("createdAt","desc"),ji(20));!r&&a&&(o=Tn(o,HY(a)));const l=await Zn(o);let u=l.docs.map(g_);if(n.category&&n.category!=="all"&&(u=u.filter(h=>h.category===n.category)),n.minPrice!==void 0&&(u=u.filter(h=>h.price>=n.minPrice)),n.maxPrice!==void 0&&(u=u.filter(h=>h.price<=n.maxPrice)),n.query){const h=n.query.toLowerCase();u=u.filter(m=>{var p;return m.title.toLowerCase().includes(h)||m.description.toLowerCase().includes(h)||((p=m.tags)==null?void 0:p.some(y=>y.toLowerCase().includes(h)))})}if(n.condition&&n.condition.length>0&&(u=u.filter(h=>n.condition.includes(h.condition))),n.sortBy)switch(n.sortBy){case"price-asc":u.sort((h,m)=>h.price-m.price);break;case"price-desc":u.sort((h,m)=>m.price-h.price);break;case"date":default:u.sort((h,m)=>new Date(m.createdAt).getTime()-new Date(h.createdAt).getTime());break}const d=l.docs[l.docs.length-1];t({listings:r?u:[...s,...u],lastDoc:d,hasMore:l.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),Ne.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log("🔍 Fetching featured listings...");const n=Tn(Ht(We,"listings"),TR("createdAt","desc"),ji(6)),r=await Zn(n);console.log(`📊 Found ${r.docs.length} documents`);const s=r.docs.map((a,o)=>{try{console.log(`🔄 Processing document ${o+1}:`,a.id);const l=g_(a);return console.log(`✅ Successfully converted listing: ${l.title}`),l}catch(l){return console.error(`❌ Error converting document ${a.id}:`,l),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas être affichée pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"Île-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Université non spécifiée",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(`🎉 Successfully processed ${s.length} featured listings`),t({featuredListings:s})}catch(n){console.error("❌ Error fetching featured listings:",n),t({featuredListings:[]})}},fetchListingById:async n=>{t({loading:!0});try{const r=_t(We,"listings",n),s=await Zs(r);if(s.exists()){const a=g_(s);await Cn(r,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),Ne.error("Annonce introuvable")}catch(r){console.error("Error fetching listing:",r),Ne.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async n=>{var r,s,a,o,l,u;try{const d=r0({...n,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((r=n.location)==null?void 0:r.city)||"Paris",state:((s=n.location)==null?void 0:s.state)||"Île-de-France",country:((a=n.location)==null?void 0:a.country)||"France",campus:((o=n.location)==null?void 0:o.campus)||null,university:((l=n.location)==null?void 0:l.university)||null,coordinates:((u=n.location)==null?void 0:u.coordinates)||null},currency:n.currency||"EUR",images:n.images||[],tags:n.tags||[],condition:n.condition||"good",transactionType:n.transactionType||"sale"});console.log("Creating listing with data:",d);const h=await ic(Ht(We,"listings"),d);return Ne.success("Annonce créée avec succès !"),h.id}catch(d){throw console.error("Error creating listing:",d),Ne.error("Erreur lors de la création de l'annonce"),d}},updateListing:async(n,r)=>{try{const s=_t(We,"listings",n),a=r0({...r,updatedAt:new Date});await Cn(s,a);const{listings:o,currentListing:l}=e(),u=o.map(d=>d.id===n?{...d,...r}:d);t({listings:u,currentListing:(l==null?void 0:l.id)===n?{...l,...r}:l}),Ne.success("Annonce mise à jour !")}catch(s){throw console.error("Error updating listing:",s),Ne.error("Erreur lors de la mise à jour"),s}},deleteListing:async n=>{try{await Sh(_t(We,"listings",n));const{listings:r}=e(),s=r.filter(a=>a.id!==n);t({listings:s}),Ne.success("Annonce supprimée !")}catch(r){throw console.error("Error deleting listing:",r),Ne.error("Erreur lors de la suppression"),r}},searchListings:async n=>{await e().fetchListings(n,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),xk=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},MF=uf((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async n=>{if(n){t({loading:!0});try{const r=Tn(Ht(We,"favorites"),lr("userId","==",n),ji(100)),s=await Zn(r),a=[],o=new Set;s.forEach(l=>{const u=l.data(),d={id:l.id,...u,createdAt:xk(u.createdAt),updatedAt:xk(u.updatedAt)};a.push(d),o.add(d.listingId)}),a.sort((l,u)=>u.createdAt.getTime()-l.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(r){console.error("Erreur lors du chargement des favoris:",r),Ne.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(n,r)=>{var s;if(!(!n||!r))try{if(e().userFavoriteIds.has(r.id)){Ne.info("Déjà dans vos favoris");return}const a={userId:n,listingId:r.id,listingTitle:r.title,listingPrice:r.price,listingImage:((s=r.images)==null?void 0:s[0])||null,listingCategory:r.category,listingTransactionType:r.transactionType,sellerName:r.sellerName,sellerUniversity:r.sellerUniversity,notes:"",tags:r.tags||[],createdAt:fr(),updatedAt:fr()},l={id:(await ic(Ht(We,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:u,userFavoriteIds:d}=e(),h=new Set(d);h.add(r.id),t({favorites:[l,...u],userFavoriteIds:h});try{await Cn(_t(We,"listings",r.id),{likes:(r.likes||0)+1})}catch(m){console.error("Erreur lors de la mise à jour du compteur de likes:",m)}Ne.success("Ajouté aux favoris ❤️")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),Ne.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(n,r)=>{if(!(!n||!r))try{const s=Tn(Ht(We,"favorites"),lr("userId","==",n),lr("listingId","==",r)),a=await Zn(s);if(a.empty){Ne.info("Pas dans vos favoris");return}const o=a.docs[0];await Sh(_t(We,"favorites",o.id));const{favorites:l,userFavoriteIds:u}=e(),d=new Set(u);d.delete(r),t({favorites:l.filter(h=>h.listingId!==r),userFavoriteIds:d});try{const h=_t(We,"listings",r),m=await Zn(Tn(Ht(We,"listings"),lr("__name__","==",r)));if(!m.empty){const p=m.docs[0].data().likes||0;await Cn(h,{likes:Math.max(0,p-1)})}}catch(h){console.error("Erreur lors de la mise à jour du compteur de likes:",h)}Ne.success("Retiré des favoris")}catch(s){console.error("Erreur lors de la suppression des favoris:",s),Ne.error("Erreur lors de la suppression des favoris")}},isFavorite:n=>e().userFavoriteIds.has(n),toggleFavorite:async(n,r)=>{const{isFavorite:s,addToFavorites:a,removeFromFavorites:o}=e();s(r.id)?await o(n,r.id):await a(n,r)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),DF=({listing:t,size:e="default",className:n=""})=>{const{currentUser:r}=jn(),{isFavorite:s,toggleFavorite:a}=MF(),o=yr(),l=s(t.id),u=h=>{if(h.preventDefault(),h.stopPropagation(),!r){Ne.error("Connectez-vous pour ajouter aux favoris"),o("/auth");return}a(r.uid,t)},d=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return i.jsx(te,{variant:"ghost",size:"icon",onClick:u,className:`${d()} ${l?"text-red-500 hover:text-red-600":"text-blue-500 hover:text-red-500"} ${n}`,"aria-label":l?"Retirer des favoris":"Ajouter aux favoris",children:i.jsx(Jr,{className:`w-4 h-4 ${l?"fill-current text-red-500":"stroke-current text-blue-500"}`,strokeWidth:2,fill:l?"currentColor":"none"})})},LF=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const s=async o=>{o.preventDefault(),o.stopPropagation();const l={title:t.title,text:`Découvrez cette annonce sur StudyMarket: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(l):(await navigator.clipboard.writeText(window.location.href),Ne.success("Lien copié dans le presse-papiers"))}catch(u){console.error("Error sharing:",u)}},a=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return i.jsx(te,{variant:"ghost",size:"icon",onClick:s,className:`${a()} ${r}`,"aria-label":"Partager",children:i.jsx(pw,{className:"w-4 h-4"})})};function yt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Ds(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function ds(t,e){const n=yt(t);return isNaN(e)?Ds(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function oa(t,e){const n=yt(t);if(isNaN(e))return Ds(t,NaN);if(!e)return n;const r=n.getDate(),s=Ds(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const a=s.getDate();return r>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const bE=6048e5,xie=864e5,dy=43200,wk=1440;let wie={};function hf(){return wie}function Ka(t,e){var l,u,d,h;const n=hf(),r=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=yt(t),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Pu(t){return Ka(t,{weekStartsOn:1})}function FF(t){const e=yt(t),n=e.getFullYear(),r=Ds(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Pu(r),a=Ds(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Pu(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Ih(t){const e=yt(t);return e.setHours(0,0,0,0),e}function Ah(t){const e=yt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Ia(t,e){const n=Ih(t),r=Ih(e),s=+n-Ah(n),a=+r-Ah(r);return Math.round((s-a)/xie)}function bie(t){const e=FF(t),n=Ds(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Pu(n)}function Sj(t,e){const n=e*7;return ds(t,n)}function _ie(t,e){return oa(t,e*12)}function jie(t){let e;return t.forEach(function(n){const r=yt(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function Nie(t){let e;return t.forEach(n=>{const r=yt(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Ky(t,e){const n=yt(t),r=yt(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function Sie(t){return Ds(t,Date.now())}function Ts(t,e){const n=Ih(t),r=Ih(e);return+n==+r}function _E(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Eie(t){if(!_E(t)&&typeof t!="number")return!1;const e=yt(t);return!isNaN(Number(e))}function Oh(t,e){const n=yt(t),r=yt(e),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function Pie(t,e,n){const r=Ka(t,n),s=Ka(e,n),a=+r-Ah(r),o=+s-Ah(s);return Math.round((a-o)/bE)}function Cie(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Tie(t,e){return+yt(t)-+yt(e)}function Rie(t){const e=yt(t);return e.setHours(23,59,59,999),e}function Aw(t){const e=yt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function kie(t){const e=yt(t);return+Rie(e)==+Aw(e)}function Iie(t,e){const n=yt(t),r=yt(e),s=Ky(n,r),a=Math.abs(Oh(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);let l=Ky(n,r)===-s;kie(yt(t))&&a===1&&Ky(t,r)===1&&(l=!1),o=s*(a-Number(l))}return o===0?0:o}function Aie(t,e,n){const r=Tie(t,e)/1e3;return Cie(n==null?void 0:n.roundingMethod)(r)}function Ms(t){const e=yt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function $F(t){const e=yt(t),n=Ds(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function jE(t,e){var l,u,d,h;const n=hf(),r=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=yt(t),a=s.getDay(),o=(a<r?-7:0)+6-(a-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function VF(t){return jE(t,{weekStartsOn:1})}const Oie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Mie=(t,e,n)=>{let r;const s=Oie[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function lh(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Die={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Lie={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Fie={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$ie={date:lh({formats:Die,defaultWidth:"full"}),time:lh({formats:Lie,defaultWidth:"full"}),dateTime:lh({formats:Fie,defaultWidth:"full"})},Vie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zie=(t,e,n,r)=>Vie[t];function Pa(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const Uie={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Bie={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Wie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Hie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Gie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Kie=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Zie={ordinalNumber:Kie,era:Pa({values:Uie,defaultWidth:"wide"}),quarter:Pa({values:Bie,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Pa({values:Wie,defaultWidth:"wide"}),day:Pa({values:Hie,defaultWidth:"wide"}),dayPeriod:Pa({values:qie,defaultWidth:"wide",formattingValues:Gie,defaultFormattingWidth:"wide"})};function Ca(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?Yie(l,m=>m.test(o)):Qie(l,m=>m.test(o));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const h=e.slice(o.length);return{value:d,rest:h}}}function Qie(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Yie(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function zF(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const Jie=/^(\d+)(th|st|nd|rd)?/i,Xie=/\d+/i,eae={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tae={any:[/^b/i,/^(a|c)/i]},nae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rae={any:[/1/i,/2/i,/3/i,/4/i]},sae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},iae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},aae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},oae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uae={ordinalNumber:zF({matchPattern:Jie,parsePattern:Xie,valueCallback:t=>parseInt(t,10)}),era:Ca({matchPatterns:eae,defaultMatchWidth:"wide",parsePatterns:tae,defaultParseWidth:"any"}),quarter:Ca({matchPatterns:nae,defaultMatchWidth:"wide",parsePatterns:rae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ca({matchPatterns:sae,defaultMatchWidth:"wide",parsePatterns:iae,defaultParseWidth:"any"}),day:Ca({matchPatterns:aae,defaultMatchWidth:"wide",parsePatterns:oae,defaultParseWidth:"any"}),dayPeriod:Ca({matchPatterns:lae,defaultMatchWidth:"any",parsePatterns:cae,defaultParseWidth:"any"})},NE={code:"en-US",formatDistance:Mie,formatLong:$ie,formatRelative:zie,localize:Zie,match:uae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dae(t){const e=yt(t);return Ia(e,$F(e))+1}function UF(t){const e=yt(t),n=+Pu(e)-+bie(e);return Math.round(n/bE)+1}function BF(t,e){var h,m,p,y;const n=yt(t),r=n.getFullYear(),s=hf(),a=(e==null?void 0:e.firstWeekContainsDate)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((y=(p=s.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??1,o=Ds(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=Ka(o,e),u=Ds(t,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const d=Ka(u,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function hae(t,e){var l,u,d,h;const n=hf(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=BF(t,e),a=Ds(t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Ka(a,e)}function WF(t,e){const n=yt(t),r=+Ka(n,e)-+hae(n,e);return Math.round(r/bE)+1}function Yt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const fl={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Yt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Yt(n+1,2)},d(t,e){return Yt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Yt(t.getHours()%12||12,e.length)},H(t,e){return Yt(t.getHours(),e.length)},m(t,e){return Yt(t.getMinutes(),e.length)},s(t,e){return Yt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Yt(s,e.length)}},wd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},bk={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return fl.y(t,e)},Y:function(t,e,n,r){const s=BF(t,r),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return Yt(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Yt(a,e.length)},R:function(t,e){const n=FF(t);return Yt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Yt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Yt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Yt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return fl.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Yt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=WF(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Yt(s,e.length)},I:function(t,e,n){const r=UF(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Yt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):fl.d(t,e)},D:function(t,e,n){const r=dae(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Yt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Yt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Yt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Yt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=wd.noon:r===0?s=wd.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=wd.evening:r>=12?s=wd.afternoon:r>=4?s=wd.morning:s=wd.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return fl.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):fl.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Yt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Yt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):fl.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):fl.s(t,e)},S:function(t,e){return fl.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return jk(r);case"XXXX":case"XX":return Uc(r);case"XXXXX":case"XXX":default:return Uc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return jk(r);case"xxxx":case"xx":return Uc(r);case"xxxxx":case"xxx":default:return Uc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_k(r,":");case"OOOO":default:return"GMT"+Uc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_k(r,":");case"zzzz":default:return"GMT"+Uc(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Yt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Yt(r,e.length)}};function _k(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+Yt(a,2)}function jk(t,e){return t%60===0?(t>0?"-":"+")+Yt(Math.abs(t)/60,2):Uc(t,e)}function Uc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Yt(Math.trunc(r/60),2),a=Yt(r%60,2);return n+s+e+a}const Nk=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},HF=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},fae=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Nk(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Nk(r,e)).replace("{{time}}",HF(s,e))},mae={p:HF,P:fae},pae=/^D+$/,gae=/^Y+$/,vae=["D","DD","YY","YYYY"];function yae(t){return pae.test(t)}function xae(t){return gae.test(t)}function wae(t,e,n){const r=bae(t,e,n);if(console.warn(r),vae.includes(t))throw new RangeError(r)}function bae(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _ae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Nae=/^'([^]*?)'?$/,Sae=/''/g,Eae=/[a-zA-Z]/;function gr(t,e,n){var h,m,p,y,j,_,N,b;const r=hf(),s=(n==null?void 0:n.locale)??r.locale??NE,a=(n==null?void 0:n.firstWeekContainsDate)??((m=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(p=r.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((_=(j=n==null?void 0:n.locale)==null?void 0:j.options)==null?void 0:_.weekStartsOn)??r.weekStartsOn??((b=(N=r.locale)==null?void 0:N.options)==null?void 0:b.weekStartsOn)??0,l=yt(t);if(!Eie(l))throw new RangeError("Invalid time value");let u=e.match(jae).map(x=>{const S=x[0];if(S==="p"||S==="P"){const C=mae[S];return C(x,s.formatLong)}return x}).join("").match(_ae).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const S=x[0];if(S==="'")return{isToken:!1,value:Pae(x)};if(bk[S])return{isToken:!0,value:x};if(S.match(Eae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(u=s.localize.preprocessor(l,u));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return u.map(x=>{if(!x.isToken)return x.value;const S=x.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&xae(S)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&yae(S))&&wae(S,e,String(t));const C=bk[S[0]];return C(l,S,s.localize,d)}).join("")}function Pae(t){const e=t.match(Nae);return e?e[1].replace(Sae,"'"):t}function Cae(t,e,n){const r=hf(),s=(n==null?void 0:n.locale)??r.locale??NE,a=2520,o=Ky(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let u,d;o>0?(u=yt(e),d=yt(t)):(u=yt(t),d=yt(e));const h=Aie(d,u),m=(Ah(d)-Ah(u))/1e3,p=Math.round((h-m)/60);let y;if(p<2)return n!=null&&n.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,l):h<10?s.formatDistance("lessThanXSeconds",10,l):h<20?s.formatDistance("lessThanXSeconds",20,l):h<40?s.formatDistance("halfAMinute",0,l):h<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):p===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",p,l);if(p<45)return s.formatDistance("xMinutes",p,l);if(p<90)return s.formatDistance("aboutXHours",1,l);if(p<wk){const j=Math.round(p/60);return s.formatDistance("aboutXHours",j,l)}else{if(p<a)return s.formatDistance("xDays",1,l);if(p<dy){const j=Math.round(p/wk);return s.formatDistance("xDays",j,l)}else if(p<dy*2)return y=Math.round(p/dy),s.formatDistance("aboutXMonths",y,l)}if(y=Iie(d,u),y<12){const j=Math.round(p/dy);return s.formatDistance("xMonths",j,l)}else{const j=y%12,_=Math.trunc(y/12);return j<3?s.formatDistance("aboutXYears",_,l):j<9?s.formatDistance("overXYears",_,l):s.formatDistance("almostXYears",_+1,l)}}function ff(t,e){return Cae(t,Sie(t),e)}function Tae(t){const e=yt(t),n=e.getFullYear(),r=e.getMonth(),s=Ds(t,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function Rae(t){return Math.trunc(+yt(t)/1e3)}function kae(t){const e=yt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function Iae(t,e){return Pie(kae(t),Ms(t),e)+1}function Ej(t,e){const n=yt(t),r=yt(e);return n.getTime()>r.getTime()}function qF(t,e){const n=yt(t),r=yt(e);return+n<+r}function SE(t,e){const n=yt(t),r=yt(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Aae(t,e){const n=yt(t),r=yt(e);return n.getFullYear()===r.getFullYear()}function v_(t,e){return ds(t,-e)}function y_(t,e){const n=yt(t),r=n.getFullYear(),s=n.getDate(),a=Ds(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const o=Tae(a);return n.setMonth(e,Math.min(s,o)),n}function Sk(t,e){const n=yt(t);return isNaN(+n)?Ds(t,NaN):(n.setFullYear(e),n)}const Oae={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Mae=(t,e,n)=>{let r;const s=Oae[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},Dae={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Lae={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Fae={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$ae={date:lh({formats:Dae,defaultWidth:"full"}),time:lh({formats:Lae,defaultWidth:"full"}),dateTime:lh({formats:Fae,defaultWidth:"full"})},Vae={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},zae=(t,e,n,r)=>Vae[t],Uae={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},Bae={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},Wae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},Hae={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},qae={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Gae=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let a;return n===1?a=r&&s.includes(r)?"ère":"er":a="ème",n+a},Kae=["MMM","MMMM"],Zae={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&Kae.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:Gae,era:Pa({values:Uae,defaultWidth:"wide"}),quarter:Pa({values:Bae,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Pa({values:Wae,defaultWidth:"wide"}),day:Pa({values:Hae,defaultWidth:"wide"}),dayPeriod:Pa({values:qae,defaultWidth:"wide"})},Qae=/^(\d+)(ième|ère|ème|er|e)?/i,Yae=/\d+/i,Jae={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},Xae={any:[/^av/i,/^ap/i]},eoe={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},toe={any:[/1/i,/2/i,/3/i,/4/i]},noe={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},roe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},soe={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},ioe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},aoe={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},ooe={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},loe={ordinalNumber:zF({matchPattern:Qae,parsePattern:Yae,valueCallback:t=>parseInt(t)}),era:Ca({matchPatterns:Jae,defaultMatchWidth:"wide",parsePatterns:Xae,defaultParseWidth:"any"}),quarter:Ca({matchPatterns:eoe,defaultMatchWidth:"wide",parsePatterns:toe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ca({matchPatterns:noe,defaultMatchWidth:"wide",parsePatterns:roe,defaultParseWidth:"any"}),day:Ca({matchPatterns:soe,defaultMatchWidth:"wide",parsePatterns:ioe,defaultParseWidth:"any"}),dayPeriod:Ca({matchPatterns:aoe,defaultMatchWidth:"any",parsePatterns:ooe,defaultParseWidth:"any"})},Xr={code:"fr",formatDistance:Mae,formatLong:$ae,formatRelative:zae,localize:Zae,match:loe,options:{weekStartsOn:1,firstWeekContainsDate:4}},Op=({listing:t})=>{var m,p,y,j,_,N;const e=(b,x)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const S=x;try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:S}).format(b)}catch{return`${b} €`}},n=b=>{switch(b){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-orange-100 text-orange-700 border-orange-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},r=b=>{switch(b){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return b}},s=()=>{switch(t.transactionType){case"donation":return i.jsx(Ch,{className:"w-3 h-3"});case"exchange":return i.jsx($o,{className:"w-3 h-3"});default:return null}},a=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},o=b=>{try{let x;if(!b)return"Date inconnue";if(b instanceof Date)x=b;else if(typeof b=="string"||typeof b=="number")x=new Date(b);else if(b&&typeof b.toDate=="function")x=b.toDate();else if(b&&typeof b=="object"&&"seconds"in b)x=new Date(b.seconds*1e3);else return"Date inconnue";return isNaN(x.getTime())?"Date inconnue":ff(x,{addSuffix:!0,locale:Xr})}catch{return"Date inconnue"}},l=t.price||0,u=t.currency||"EUR",d=t.condition||"good",h=t.transactionType||"sale";return i.jsxs(pe,{className:"group relative bg-white dark:bg-gray-900 rounded-xl shadow-sm dark:shadow-lg hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[i.jsx(Ue,{to:`/listing/${t.id}`,className:"block",children:i.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100",children:[i.jsx("img",{src:((m=t.images)==null?void 0:m[0])||"/assets/image.png",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),i.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[i.jsx(DF,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"}),i.jsx(LF,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"})]}),h!=="sale"&&i.jsxs(lt,{className:`absolute top-3 left-3 ${a()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[s(),i.jsx("span",{className:"ml-1.5 text-sm",children:h==="donation"?"Don":"Troc"})]}),h==="sale"&&i.jsx(lt,{className:`absolute top-3 left-3 ${n(d)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:r(d)}),t.environmentalImpact&&i.jsxs(lt,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[i.jsx(Xi,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO₂"]}),t.images&&t.images.length>1&&i.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),i.jsxs(ge,{className:"p-6 space-y-4",children:[i.jsxs(Ue,{to:`/listing/${t.id}`,className:"block",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:`text-2xl font-bold ${h==="donation"?"text-green-600":h==="exchange"?"text-purple-600":"text-slate-900 dark:text-white"}`,children:e(l,u)}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 bg-gray-50 px-2.5 py-1 rounded-full",children:[i.jsx(Ph,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"font-medium",children:t.views||0})]})]}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),h==="exchange"&&t.exchangeFor&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-purple-50 px-3 py-2 rounded-lg mb-4",children:[i.jsx($o,{className:"w-4 h-4 text-purple-500"}),i.jsxs("span",{children:[i.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[i.jsx(Yr,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),i.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-semibold truncate",children:((p=t.location)==null?void 0:p.campus)||((y=t.location)!=null&&y.city&&((j=t.location)!=null&&j.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spécifiée")})]}),i.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[i.jsx(Jn,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-300 whitespace-nowrap",children:o(t.createdAt)})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsxs(Uo,{className:"w-9 h-9",children:[i.jsx(Bo,{src:t.sellerAvatar}),i.jsx(Wo,{className:"text-sm bg-gray-100 text-gray-600 font-medium",children:((N=(_=t.sellerName)==null?void 0:_[0])==null?void 0:N.toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&i.jsx(qt,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),i.jsx("span",{className:"text-xs text-gray-500 truncate block text-left",children:i.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:t.sellerUniversity||"Université non spécifiée"})})]})]}),t.aiPriceEstimate&&h==="sale"&&i.jsx(lt,{className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste ✓"})]})]})]})};var GF={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ek=oe.createContext&&oe.createContext(GF),coe=["attr","size","title"];function uoe(t,e){if(t==null)return{};var n=doe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function doe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function s0(){return s0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s0.apply(this,arguments)}function Pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function i0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pk(Object(n),!0).forEach(function(r){hoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hoe(t,e,n){return e=foe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function foe(t){var e=moe(t,"string");return typeof e=="symbol"?e:e+""}function moe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KF(t){return t&&t.map((e,n)=>oe.createElement(e.tag,i0({key:n},e.attr),KF(e.child)))}function xr(t){return e=>oe.createElement(poe,s0({attr:i0({},t.attr)},e),KF(t.child))}function poe(t){var e=n=>{var{attr:r,size:s,title:a}=t,o=uoe(t,coe),l=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),oe.createElement("svg",s0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:i0(i0({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&oe.createElement("title",null,a),t.children)};return Ek!==void 0?oe.createElement(Ek.Consumer,null,n=>e(n)):e(GF)}function goe(t){return xr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function voe(t){return xr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function yoe(t){return xr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function xoe(t){return xr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function woe(t){return xr({attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function boe(t){return xr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function _oe(t){return xr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function joe(t){return xr({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const Noe=()=>{const[t,e]=w.useState(""),n=yr(),r=s=>{s.preventDefault(),t.trim()&&n(`/listings?q=${encodeURIComponent(t.trim())}`)};return i.jsxs("form",{onSubmit:r,className:"flex items-center w-full max-w-2xl mx-auto rounded-full border-2 border-primary/40 bg-white shadow-sm focus-within:ring-2 focus-within:ring-primary/30 transition px-1 sm:px-0",role:"search","aria-label":"Recherche",children:[i.jsx("span",{className:"pl-0 sm:pl-4 text-gray-400",children:i.jsx(Er,{className:"w-5 h-5"})}),i.jsx("input",{type:"text",className:"flex-1 bg-transparent outline-none border-0 px-2 sm:px-4 py-2 sm:py-3 text-base rounded-l-full min-w-0",placeholder:"Rechercher parmi les étudiants de votre région...",value:t,onChange:s=>e(s.target.value),"aria-label":"Rechercher"}),i.jsx("button",{type:"submit",className:"rounded-full bg-gradient-to-r from-primary to-secondary text-white font-semibold px-3 sm:px-6 py-2 m-1 transition hover:from-primary/90 hover:to-secondary/90 focus:outline-none whitespace-nowrap text-sm sm:text-base",children:"Rechercher"})]})},Soe={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/troc.svg"},Eoe=()=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:"w-50 h-50"}),Poe=()=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Trending Up",className:"w-50 h-50"}),Coe=()=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Trending Up",className:"w-50 h-50"}),Toe=()=>i.jsx("img",{src:"/StudyMarket/assets/Icon/Bleu/chat.svg",alt:"Trending Up",className:"w-50 h-50"}),Roe=[{id:"electronics",name:"Électronique",icon:xoe,color:"text-blue-600",description:"Ordinateurs, téléphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:voe,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:goe,color:"text-blue-600",description:"Meubles, déco, électroménager"},{id:"housing",name:"Logement",icon:yoe,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:woe,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:boe,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:joe,color:"text-blue-600",description:"Objets gratuits, entraide"},{id:"exchange",name:"Troc",icon:_oe,color:"text-blue-600",description:"Échanges de services et objets"}],koe=[{icon:qt,title:"Étudiants vérifiés uniquement",description:'Chaque membre est vérifié avec son adresse universitaire. Badge "Étudiant certifié" sur tous les profils.'},{icon:Toe,title:"Chat sécurisé intégré",description:"Messagerie avec proposition de rendez-vous, points de rencontre campus et protection des données."},{icon:Xi,title:"Impact écologique mesuré",description:"Suivez votre impact environnemental : CO₂ économisé, ressources préservées grâce à vos achats d'occasion."},{icon:g3,title:"Avis publics et réputation",description:"Système de notation transparent. Consultez les avis avant chaque transaction pour échanger en confiance."}],Ioe=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",icon:Eoe,link:"/create",color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",icon:Poe,link:"/create?type=donation",color:"border-2 border-green-500 text-green-500"},{title:"Proposer un troc",description:"Échangez services et objets sans argent",icon:Coe,link:"/create?type=exchange",color:"border-2 border-green-500 text-green-500"}],Aoe=()=>{const{featuredListings:t,fetchFeaturedListings:e}=Jg();return w.useEffect(()=>{e()},[e]),i.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 py-2 sm:py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[i.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4 sm:mb-8 text-center sm:text-left",children:"Bienvenue sur StudyMarket"}),i.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 py-6 sm:py-8 lg:py-16 px-2 sm:px-4 rounded-lg sm:rounded-xl",children:i.jsxs("div",{className:"container mx-auto text-center max-w-4xl",children:[i.jsx("div",{className:"flex items-center justify-center mb-3 sm:mb-4 lg:mb-6",children:i.jsxs(lt,{className:"bg-green-100 text-green-800 border-green-200 px-2 sm:px-3 lg:px-4 py-1 sm:py-1.5 lg:py-2 text-xs sm:text-sm",children:[i.jsx(qt,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Communauté 100% étudiants vérifiés"}),i.jsx("span",{className:"sm:hidden",children:"Étudiants vérifiés"})]})}),i.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold mb-3 sm:mb-4 lg:mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent px-2",children:"La marketplace des étudiants"}),i.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-muted-foreground mb-4 sm:mb-6 lg:mb-8 max-w-2xl mx-auto px-2",children:"Achetez, vendez, donnez et échangez entre étudiants certifiés de votre région. Sécurisé, écologique et pensé pour la vie étudiante."}),i.jsx("div",{className:"mb-4 sm:mb-6 lg:mb-8 px-2 sm:px-4",children:i.jsx(Noe,{})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 mb-4 sm:mb-6 lg:mb-8",children:Ioe.map((n,r)=>i.jsx(Ue,{to:n.link,className:"group",children:i.jsx(pe,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:i.jsxs(ge,{className:"p-3 sm:p-4 text-center",children:[i.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 ${n.color} rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-3 group-hover:scale-110 transition-transform`,children:i.jsx(n.icon,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),i.jsx("h3",{className:"font-semibold mb-1 text-sm sm:text-base",children:n.title}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:n.description})]})})},r))}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center px-2",children:[i.jsx(te,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary w-full sm:w-auto text-sm sm:text-base",children:i.jsxs(Ue,{to:"/listings",children:["Parcourir les annonces",i.jsx(Ep,{className:"w-4 h-4 ml-2"})]})}),i.jsx(te,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto text-sm sm:text-base",children:i.jsx(Ue,{to:"/auth",children:"Rejoindre la communauté"})})]})]})}),i.jsx("section",{className:"py-8 sm:py-10 lg:py-16 px-2 sm:px-4",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center mb-2 sm:mb-3 lg:mb-4",children:"Catégories étudiantes"}),i.jsx("p",{className:"text-center text-muted-foreground mb-6 sm:mb-8 lg:mb-12 max-w-2xl mx-auto text-xs sm:text-sm lg:text-base px-2",children:"Des catégories pensées spécifiquement pour la vie étudiante, avec des filtres adaptés à vos besoins"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:Roe.map(n=>{let r;return n.id==="jobs"?r="/jobs":n.id==="housing"?r="/housing":r=`/listings?category=${n.id}`,i.jsx(Ue,{to:r,className:"group",children:i.jsx(pe,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:i.jsxs(ge,{className:"p-3 sm:p-4 text-center",children:[i.jsx("img",{src:Soe[n.id],alt:n.name,className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 mx-auto mb-2 sm:mb-3"}),i.jsx("h3",{className:"font-semibold text-xs sm:text-sm lg:text-base mb-1",children:n.name}),i.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:n.description})]})})},n.id)})})]})}),t.length>0&&i.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-muted/30",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 sm:mb-8 lg:mb-12 gap-4",children:[i.jsxs("div",{className:"text-center sm:text-left",children:[i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-1 sm:mb-2",children:"Annonces récentes"}),i.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Les dernières offres de la communauté étudiante"})]}),i.jsx(te,{variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:i.jsxs(Ue,{to:"/listings",children:["Voir tout",i.jsx(Ep,{className:"w-4 h-4 ml-2"})]})})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:t.slice(0,6).map(n=>i.jsx(Op,{listing:n},n.id))})]})}),i.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center mb-3 sm:mb-4",children:"Pourquoi StudyMarket ?"}),i.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-12 max-w-2xl mx-auto text-sm sm:text-base px-2",children:"Une plateforme pensée par et pour les étudiants, avec des fonctionnalités uniques pour votre sécurité et votre tranquillité d'esprit"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:koe.map((n,r)=>i.jsx(pe,{className:"border-0 shadow-none",children:i.jsx(ge,{className:"p-4 sm:p-6",children:i.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4",children:[i.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(n.icon,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-primary"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-semibold mb-1 sm:mb-2",children:n.title}),i.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-muted-foreground",children:n.description})]})]})})},r))})]})}),i.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 rounded-lg sm:rounded-xl",children:i.jsx("div",{className:"container mx-auto text-center",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsx(Xi,{className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 text-green-600 mx-auto mb-4 sm:mb-6"}),i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-3 sm:mb-4",children:"Votre impact écologique compte"}),i.jsx("p",{className:"text-sm sm:text-base lg:text-xl text-muted-foreground mb-6 sm:mb-8 px-2",children:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental et découvrez combien de CO₂ vous économisez grâce à vos échanges étudiants."}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"2.5T"}),i.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"CO₂ économisé par la communauté"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"15K"}),i.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Objets donnés cette année"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 mb-1 sm:mb-2",children:"8K"}),i.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Étudiants engagés"})]})]}),i.jsx(te,{size:"lg",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white w-full sm:w-auto",children:i.jsx(Ue,{to:"/impact",className:"cursor-pointer",children:"Découvrir mon impact"})})]})})}),i.jsx("section",{className:"py-8 sm:py-12 lg:py-16 px-2 sm:px-4 bg-gradient-to-r from-primary to-secondary rounded-lg sm:rounded-xl",children:i.jsxs("div",{className:"container mx-auto text-center",children:[i.jsx(nf,{className:"w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 text-white mx-auto mb-4 sm:mb-6"}),i.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-3 sm:mb-4",children:"Rejoignez la communauté étudiante"}),i.jsx("p",{className:"text-sm sm:text-base lg:text-xl text-white/90 mb-6 sm:mb-8 max-w-2xl mx-auto px-2",children:"Plus de 10 000 étudiants font déjà confiance à StudyMarket pour leurs achats, ventes et échanges. Rejoignez une communauté sûre, vérifiée et solidaire."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[i.jsx(te,{size:"lg",variant:"secondary",asChild:!0,className:"w-full sm:w-auto",children:i.jsxs(Ue,{to:"/auth",children:[i.jsx(qt,{className:"w-4 h-4 mr-2"}),"Inscription vérifiée"]})}),i.jsx(te,{size:"lg",variant:"outline",className:"border-white text-white bg-transparent hover:bg-white hover:text-primary w-full sm:w-auto",asChild:!0,children:i.jsx(Ue,{to:"/listings",children:"Commencer à explorer"})})]})]})})]})};function Mp(t,[e,n]){return Math.min(n,Math.max(e,t))}function Ow(t){const e=w.useRef({value:t,previous:t});return w.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var ZF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ooe="VisuallyHidden",Moe=w.forwardRef((t,e)=>i.jsx(Ye.span,{...t,ref:e,style:{...ZF,...t.style}}));Moe.displayName=Ooe;var Doe=[" ","Enter","ArrowUp","ArrowDown"],Loe=[" ","Enter"],Cu="Select",[Mw,Dw,Foe]=Bg(Cu),[mf,nje]=$r(Cu,[Foe,cf]),Lw=cf(),[$oe,wc]=mf(Cu),[Voe,zoe]=mf(Cu),QF=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:u,dir:d,name:h,autoComplete:m,disabled:p,required:y,form:j}=t,_=Lw(e),[N,b]=w.useState(null),[x,S]=w.useState(null),[C,R]=w.useState(!1),z=Bu(d),[k,I]=Xs({prop:r,defaultProp:s??!1,onChange:a,caller:Cu}),[V,T]=Xs({prop:o,defaultProp:l,onChange:u,caller:Cu}),O=w.useRef(null),$=N?j||!!N.closest("form"):!0,[M,B]=w.useState(new Set),J=Array.from(M).map(ee=>ee.props.value).join(";");return i.jsx(lE,{..._,children:i.jsxs($oe,{required:y,scope:e,trigger:N,onTriggerChange:b,valueNode:x,onValueNodeChange:S,valueNodeHasChildren:C,onValueNodeHasChildrenChange:R,contentId:Qs(),value:V,onValueChange:T,open:k,onOpenChange:I,dir:z,triggerPointerDownPosRef:O,disabled:p,children:[i.jsx(Mw.Provider,{scope:e,children:i.jsx(Voe,{scope:t.__scopeSelect,onNativeOptionAdd:w.useCallback(ee=>{B(K=>new Set(K).add(ee))},[]),onNativeOptionRemove:w.useCallback(ee=>{B(K=>{const D=new Set(K);return D.delete(ee),D})},[]),children:n})}),$?i.jsxs(w6,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:m,value:V,onChange:ee=>T(ee.target.value),disabled:p,form:j,children:[V===void 0?i.jsx("option",{value:""}):null,Array.from(M)]},J):null]})})};QF.displayName=Cu;var YF="SelectTrigger",JF=w.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=Lw(n),o=wc(YF,n),l=o.disabled||r,u=pt(e,o.onTriggerChange),d=Dw(n),h=w.useRef("touch"),[m,p,y]=_6(_=>{const N=d().filter(S=>!S.disabled),b=N.find(S=>S.value===o.value),x=j6(N,_,b);x!==void 0&&o.onValueChange(x.value)}),j=_=>{l||(o.onOpenChange(!0),y()),_&&(o.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return i.jsx(Nw,{asChild:!0,...a,children:i.jsx(Ye.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":b6(o.value)?"":void 0,...s,ref:u,onClick:Ve(s.onClick,_=>{_.currentTarget.focus(),h.current!=="mouse"&&j(_)}),onPointerDown:Ve(s.onPointerDown,_=>{h.current=_.pointerType;const N=_.target;N.hasPointerCapture(_.pointerId)&&N.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(j(_),_.preventDefault())}),onKeyDown:Ve(s.onKeyDown,_=>{const N=m.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&p(_.key),!(N&&_.key===" ")&&Doe.includes(_.key)&&(j(),_.preventDefault())})})})});JF.displayName=YF;var XF="SelectValue",e6=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=t,u=wc(XF,n),{onValueNodeHasChildrenChange:d}=u,h=a!==void 0,m=pt(e,u.onValueNodeChange);return er(()=>{d(h)},[d,h]),i.jsx(Ye.span,{...l,ref:m,style:{pointerEvents:"none"},children:b6(u.value)?i.jsx(i.Fragment,{children:o}):a})});e6.displayName=XF;var Uoe="SelectIcon",t6=w.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(Ye.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});t6.displayName=Uoe;var Boe="SelectPortal",n6=t=>i.jsx(Gg,{asChild:!0,...t});n6.displayName=Boe;var Tu="SelectContent",r6=w.forwardRef((t,e)=>{const n=wc(Tu,t.__scopeSelect),[r,s]=w.useState();if(er(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?Qh.createPortal(i.jsx(s6,{scope:t.__scopeSelect,children:i.jsx(Mw.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(i6,{...t,ref:e})});r6.displayName=Tu;var Ui=10,[s6,bc]=mf(Tu),Woe="SelectContentImpl",Hoe=lc("SelectContent.RemoveScroll"),i6=w.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:u,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:y,sticky:j,hideWhenDetached:_,avoidCollisions:N,...b}=t,x=wc(Tu,n),[S,C]=w.useState(null),[R,z]=w.useState(null),k=pt(e,Ce=>C(Ce)),[I,V]=w.useState(null),[T,O]=w.useState(null),$=Dw(n),[M,B]=w.useState(!1),J=w.useRef(!1);w.useEffect(()=>{if(S)return Ew(S)},[S]),xw();const ee=w.useCallback(Ce=>{const[ne,...ie]=$().map(ce=>ce.ref.current),[ae]=ie.slice(-1),Z=document.activeElement;for(const ce of Ce)if(ce===Z||(ce==null||ce.scrollIntoView({block:"nearest"}),ce===ne&&R&&(R.scrollTop=0),ce===ae&&R&&(R.scrollTop=R.scrollHeight),ce==null||ce.focus(),document.activeElement!==Z))return},[$,R]),K=w.useCallback(()=>ee([I,S]),[ee,I,S]);w.useEffect(()=>{M&&K()},[M,K]);const{onOpenChange:D,triggerPointerDownPosRef:G}=x;w.useEffect(()=>{if(S){let Ce={x:0,y:0};const ne=ae=>{var Z,ce;Ce={x:Math.abs(Math.round(ae.pageX)-(((Z=G.current)==null?void 0:Z.x)??0)),y:Math.abs(Math.round(ae.pageY)-(((ce=G.current)==null?void 0:ce.y)??0))}},ie=ae=>{Ce.x<=10&&Ce.y<=10?ae.preventDefault():S.contains(ae.target)||D(!1),document.removeEventListener("pointermove",ne),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",ie,{capture:!0})}}},[S,D,G]),w.useEffect(()=>{const Ce=()=>D(!1);return window.addEventListener("blur",Ce),window.addEventListener("resize",Ce),()=>{window.removeEventListener("blur",Ce),window.removeEventListener("resize",Ce)}},[D]);const[q,X]=_6(Ce=>{const ne=$().filter(Z=>!Z.disabled),ie=ne.find(Z=>Z.ref.current===document.activeElement),ae=j6(ne,Ce,ie);ae&&setTimeout(()=>ae.ref.current.focus())}),fe=w.useCallback((Ce,ne,ie)=>{const ae=!J.current&&!ie;(x.value!==void 0&&x.value===ne||ae)&&(V(Ce),ae&&(J.current=!0))},[x.value]),Te=w.useCallback(()=>S==null?void 0:S.focus(),[S]),$e=w.useCallback((Ce,ne,ie)=>{const ae=!J.current&&!ie;(x.value!==void 0&&x.value===ne||ae)&&O(Ce)},[x.value]),ze=r==="popper"?Pj:a6,Le=ze===Pj?{side:l,sideOffset:u,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:y,sticky:j,hideWhenDetached:_,avoidCollisions:N}:{};return i.jsx(s6,{scope:n,content:S,viewport:R,onViewportChange:z,itemRefCallback:fe,selectedItem:I,onItemLeave:Te,itemTextRefCallback:$e,focusSelectedItem:K,selectedItemText:T,position:r,isPositioned:M,searchRef:q,children:i.jsx(Zg,{as:Hoe,allowPinchZoom:!0,children:i.jsx(Hg,{asChild:!0,trapped:x.open,onMountAutoFocus:Ce=>{Ce.preventDefault()},onUnmountAutoFocus:Ve(s,Ce=>{var ne;(ne=x.trigger)==null||ne.focus({preventScroll:!0}),Ce.preventDefault()}),children:i.jsx(Wg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Ce=>Ce.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:i.jsx(ze,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Ce=>Ce.preventDefault(),...b,...Le,onPlaced:()=>B(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Ve(b.onKeyDown,Ce=>{const ne=Ce.ctrlKey||Ce.altKey||Ce.metaKey;if(Ce.key==="Tab"&&Ce.preventDefault(),!ne&&Ce.key.length===1&&X(Ce.key),["ArrowUp","ArrowDown","Home","End"].includes(Ce.key)){let ae=$().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);if(["ArrowUp","End"].includes(Ce.key)&&(ae=ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ce.key)){const Z=Ce.target,ce=ae.indexOf(Z);ae=ae.slice(ce+1)}setTimeout(()=>ee(ae)),Ce.preventDefault()}})})})})})})});i6.displayName=Woe;var qoe="SelectItemAlignedPosition",a6=w.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=wc(Tu,n),o=bc(Tu,n),[l,u]=w.useState(null),[d,h]=w.useState(null),m=pt(e,k=>h(k)),p=Dw(n),y=w.useRef(!1),j=w.useRef(!0),{viewport:_,selectedItem:N,selectedItemText:b,focusSelectedItem:x}=o,S=w.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&_&&N&&b){const k=a.trigger.getBoundingClientRect(),I=d.getBoundingClientRect(),V=a.valueNode.getBoundingClientRect(),T=b.getBoundingClientRect();if(a.dir!=="rtl"){const Z=T.left-I.left,ce=V.left-Z,ve=k.left-ce,ke=k.width+ve,be=Math.max(ke,I.width),re=window.innerWidth-Ui,_e=Mp(ce,[Ui,Math.max(Ui,re-be)]);l.style.minWidth=ke+"px",l.style.left=_e+"px"}else{const Z=I.right-T.right,ce=window.innerWidth-V.right-Z,ve=window.innerWidth-k.right-ce,ke=k.width+ve,be=Math.max(ke,I.width),re=window.innerWidth-Ui,_e=Mp(ce,[Ui,Math.max(Ui,re-be)]);l.style.minWidth=ke+"px",l.style.right=_e+"px"}const O=p(),$=window.innerHeight-Ui*2,M=_.scrollHeight,B=window.getComputedStyle(d),J=parseInt(B.borderTopWidth,10),ee=parseInt(B.paddingTop,10),K=parseInt(B.borderBottomWidth,10),D=parseInt(B.paddingBottom,10),G=J+ee+M+D+K,q=Math.min(N.offsetHeight*5,G),X=window.getComputedStyle(_),fe=parseInt(X.paddingTop,10),Te=parseInt(X.paddingBottom,10),$e=k.top+k.height/2-Ui,ze=$-$e,Le=N.offsetHeight/2,Ce=N.offsetTop+Le,ne=J+ee+Ce,ie=G-ne;if(ne<=$e){const Z=O.length>0&&N===O[O.length-1].ref.current;l.style.bottom="0px";const ce=d.clientHeight-_.offsetTop-_.offsetHeight,ve=Math.max(ze,Le+(Z?Te:0)+ce+K),ke=ne+ve;l.style.height=ke+"px"}else{const Z=O.length>0&&N===O[0].ref.current;l.style.top="0px";const ve=Math.max($e,J+_.offsetTop+(Z?fe:0)+Le)+ie;l.style.height=ve+"px",_.scrollTop=ne-$e+_.offsetTop}l.style.margin=`${Ui}px 0`,l.style.minHeight=q+"px",l.style.maxHeight=$+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[p,a.trigger,a.valueNode,l,d,_,N,b,a.dir,r]);er(()=>S(),[S]);const[C,R]=w.useState();er(()=>{d&&R(window.getComputedStyle(d).zIndex)},[d]);const z=w.useCallback(k=>{k&&j.current===!0&&(S(),x==null||x(),j.current=!1)},[S,x]);return i.jsx(Koe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:z,children:i.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:i.jsx(Ye.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});a6.displayName=qoe;var Goe="SelectPopperPosition",Pj=w.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Ui,...a}=t,o=Lw(n);return i.jsx(cE,{...o,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Pj.displayName=Goe;var[Koe,EE]=mf(Tu,{}),Cj="SelectViewport",o6=w.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=bc(Cj,n),o=EE(Cj,n),l=pt(e,a.onViewportChange),u=w.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(Mw.Slot,{scope:n,children:i.jsx(Ye.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ve(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&m){const y=Math.abs(u.current-h.scrollTop);if(y>0){const j=window.innerHeight-Ui*2,_=parseFloat(m.style.minHeight),N=parseFloat(m.style.height),b=Math.max(_,N);if(b<j){const x=b+y,S=Math.min(j,x),C=x-S;m.style.height=S+"px",m.style.bottom==="0px"&&(h.scrollTop=C>0?C:0,m.style.justifyContent="flex-end")}}}u.current=h.scrollTop})})})]})});o6.displayName=Cj;var l6="SelectGroup",[Zoe,Qoe]=mf(l6),Yoe=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Qs();return i.jsx(Zoe,{scope:n,id:s,children:i.jsx(Ye.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Yoe.displayName=l6;var c6="SelectLabel",u6=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Qoe(c6,n);return i.jsx(Ye.div,{id:s.id,...r,ref:e})});u6.displayName=c6;var a0="SelectItem",[Joe,d6]=mf(a0),h6=w.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=t,l=wc(a0,n),u=bc(a0,n),d=l.value===r,[h,m]=w.useState(a??""),[p,y]=w.useState(!1),j=pt(e,x=>{var S;return(S=u.itemRefCallback)==null?void 0:S.call(u,x,r,s)}),_=Qs(),N=w.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Joe,{scope:n,value:r,disabled:s,textId:_,isSelected:d,onItemTextChange:w.useCallback(x=>{m(S=>S||((x==null?void 0:x.textContent)??"").trim())},[]),children:i.jsx(Mw.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:i.jsx(Ye.div,{role:"option","aria-labelledby":_,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:j,onFocus:Ve(o.onFocus,()=>y(!0)),onBlur:Ve(o.onBlur,()=>y(!1)),onClick:Ve(o.onClick,()=>{N.current!=="mouse"&&b()}),onPointerUp:Ve(o.onPointerUp,()=>{N.current==="mouse"&&b()}),onPointerDown:Ve(o.onPointerDown,x=>{N.current=x.pointerType}),onPointerMove:Ve(o.onPointerMove,x=>{var S;N.current=x.pointerType,s?(S=u.onItemLeave)==null||S.call(u):N.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ve(o.onPointerLeave,x=>{var S;x.currentTarget===document.activeElement&&((S=u.onItemLeave)==null||S.call(u))}),onKeyDown:Ve(o.onKeyDown,x=>{var C;((C=u.searchRef)==null?void 0:C.current)!==""&&x.key===" "||(Loe.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});h6.displayName=a0;var jm="SelectItemText",f6=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,o=wc(jm,n),l=bc(jm,n),u=d6(jm,n),d=zoe(jm,n),[h,m]=w.useState(null),p=pt(e,b=>m(b),u.onItemTextChange,b=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,b,u.value,u.disabled)}),y=h==null?void 0:h.textContent,j=w.useMemo(()=>i.jsx("option",{value:u.value,disabled:u.disabled,children:y},u.value),[u.disabled,u.value,y]),{onNativeOptionAdd:_,onNativeOptionRemove:N}=d;return er(()=>(_(j),()=>N(j)),[_,N,j]),i.jsxs(i.Fragment,{children:[i.jsx(Ye.span,{id:u.textId,...a,ref:p}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Qh.createPortal(a.children,o.valueNode):null]})});f6.displayName=jm;var m6="SelectItemIndicator",p6=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return d6(m6,n).isSelected?i.jsx(Ye.span,{"aria-hidden":!0,...r,ref:e}):null});p6.displayName=m6;var Tj="SelectScrollUpButton",g6=w.forwardRef((t,e)=>{const n=bc(Tj,t.__scopeSelect),r=EE(Tj,t.__scopeSelect),[s,a]=w.useState(!1),o=pt(e,r.onScrollButtonChange);return er(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=u.scrollTop>0;a(d)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(y6,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop-u.offsetHeight)}}):null});g6.displayName=Tj;var Rj="SelectScrollDownButton",v6=w.forwardRef((t,e)=>{const n=bc(Rj,t.__scopeSelect),r=EE(Rj,t.__scopeSelect),[s,a]=w.useState(!1),o=pt(e,r.onScrollButtonChange);return er(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=u.scrollHeight-u.clientHeight,h=Math.ceil(u.scrollTop)<d;a(h)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(y6,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop+u.offsetHeight)}}):null});v6.displayName=Rj;var y6=w.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=bc("SelectScrollButton",n),o=w.useRef(null),l=Dw(n),u=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>u(),[u]),er(()=>{var h;const d=l().find(m=>m.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),i.jsx(Ye.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ve(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ve(s.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ve(s.onPointerLeave,()=>{u()})})}),Xoe="SelectSeparator",x6=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(Ye.div,{"aria-hidden":!0,...r,ref:e})});x6.displayName=Xoe;var kj="SelectArrow",ele=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Lw(n),a=wc(kj,n),o=bc(kj,n);return a.open&&o.position==="popper"?i.jsx(uE,{...s,...r,ref:e}):null});ele.displayName=kj;var tle="SelectBubbleInput",w6=w.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=w.useRef(null),a=pt(r,s),o=Ow(e);return w.useEffect(()=>{const l=s.current;if(!l)return;const u=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&h){const m=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(m)}},[o,e]),i.jsx(Ye.select,{...n,style:{...ZF,...n.style},ref:a,defaultValue:e})});w6.displayName=tle;function b6(t){return t===""||t===void 0}function _6(t){const e=Sr(t),n=w.useRef(""),r=w.useRef(0),s=w.useCallback(o=>{const l=n.current+o;e(l),function u(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(l)},[e]),a=w.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function j6(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=nle(t,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==n));const u=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function nle(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var rle=QF,N6=JF,sle=e6,ile=t6,ale=n6,S6=r6,ole=o6,E6=u6,P6=h6,lle=f6,cle=p6,C6=g6,T6=v6,R6=x6;const on=rle,ln=sle,Jt=w.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(N6,{ref:r,className:at("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(ile,{asChild:!0,children:i.jsx(mse,{className:"h-4 w-4 opacity-50"})})]}));Jt.displayName=N6.displayName;const k6=w.forwardRef(({className:t,...e},n)=>i.jsx(C6,{ref:n,className:at("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(bse,{})}));k6.displayName=C6.displayName;const I6=w.forwardRef(({className:t,...e},n)=>i.jsx(T6,{ref:n,className:at("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(yF,{})}));I6.displayName=T6.displayName;const Xt=w.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>i.jsx(ale,{children:i.jsxs(S6,{ref:s,className:at("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(k6,{}),i.jsx(ole,{className:at("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(I6,{})]})}));Xt.displayName=S6.displayName;const ule=w.forwardRef(({className:t,...e},n)=>i.jsx(E6,{ref:n,className:at("px-2 py-1.5 text-sm font-semibold",t),...e}));ule.displayName=E6.displayName;const Qe=w.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(P6,{ref:r,className:at("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(cle,{children:i.jsx(yE,{className:"h-4 w-4"})})}),i.jsx(lle,{children:e})]}));Qe.displayName=P6.displayName;const dle=w.forwardRef(({className:t,...e},n)=>i.jsx(R6,{ref:n,className:at("-mx-1 my-1 h-px bg-muted",t),...e}));dle.displayName=R6.displayName;var hle="Separator",Ck="horizontal",fle=["horizontal","vertical"],A6=w.forwardRef((t,e)=>{const{decorative:n,orientation:r=Ck,...s}=t,a=mle(r)?r:Ck,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(Ye.div,{"data-orientation":a,...l,...s,ref:e})});A6.displayName=hle;function mle(t){return fle.includes(t)}var O6=A6;const yi=w.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>i.jsx(O6,{ref:s,decorative:n,orientation:e,className:at("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));yi.displayName=O6.displayName;const x_=[{value:"all",label:"Toutes catégories",icon:null},{value:"electronics",label:"Électronique",icon:Uu},{value:"vehicles",label:"Véhicules",icon:_3},{value:"real-estate",label:"Immobilier",icon:Zx},{value:"fashion",label:"Mode",icon:Y2},{value:"gaming",label:"Jeux & Jouets",icon:EX},{value:"baby",label:"Bébé & Enfant",icon:pX},{value:"business",label:"Équipement Pro",icon:w3}],ple=[{value:"new",label:"Neuf"},{value:"like-new",label:"Comme neuf"},{value:"good",label:"Bon état"},{value:"fair",label:"État correct"},{value:"poor",label:"Mauvais état"}],gle=[{value:"relevance",label:"Pertinence"},{value:"date",label:"Plus récent"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix décroissant"}],vle=()=>{var b;const[t,e]=LS(),{listings:n,loading:r,hasMore:s,fetchListings:a,searchListings:o}=Jg(),[l,u]=w.useState({query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"}),[d,h]=w.useState("grid"),[m,p]=w.useState(!1);w.useEffect(()=>{const x={query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"};u(x),o(x)},[t,o]);const y=()=>{const x={...l};o(x);const S=new URLSearchParams;x.query&&S.set("q",x.query),x.category&&S.set("category",x.category),e(S)},j=(x,S)=>{const C={...l,[x]:S};u(C)},_=()=>{a(l,!1)},N=()=>{const x={query:"",sortBy:"date"};u(x),o(x),e({})};return i.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8",children:[i.jsxs("div",{className:"mb-6 sm:mb-8",children:[i.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-3 sm:mb-4 text-center sm:text-left",children:"Toutes les annonces"}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ze,{type:"text",placeholder:"Rechercher des articles...",value:l.query||"",onChange:x=>j("query",x.target.value),onKeyPress:x=>x.key==="Enter"&&y(),className:"pl-10"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(te,{onClick:y,className:"whitespace-nowrap flex-1 sm:flex-none",children:[i.jsx(Er,{className:"w-4 h-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Rechercher"}),i.jsx("span",{className:"sm:hidden",children:"Rechercher"})]}),i.jsxs(te,{variant:"outline",onClick:()=>p(!m),className:"lg:hidden",children:[i.jsx(mw,{className:"w-4 h-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Filtres"}),i.jsx("span",{className:"sm:hidden",children:"Filtres"})]})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4 overflow-x-auto pb-2 sm:pb-0",children:x_.slice(1,6).map(x=>{const S=x.icon;return i.jsxs(te,{variant:l.category===x.value?"default":"outline",size:"sm",onClick:()=>j("category",l.category===x.value?"":x.value),className:"flex items-center gap-2 whitespace-nowrap flex-shrink-0",children:[S&&i.jsx(S,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:x.label}),i.jsx("span",{className:"sm:hidden",children:x.label.split(" ")[0]})]},x.value)})})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8",children:[i.jsx("aside",{className:`lg:w-80 space-y-6 ${m?"block":"hidden lg:block"}`,children:i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-base sm:text-lg",children:"Filtres"}),i.jsx(te,{variant:"ghost",size:"sm",onClick:N,children:"Effacer"})]})}),i.jsxs(ge,{className:"space-y-4 sm:space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Catégorie"}),i.jsxs(on,{value:l.category||"all",onValueChange:x=>j("category",x==="all"?"":x),children:[i.jsx(Jt,{children:i.jsx(ln,{})}),i.jsx(Xt,{children:x_.map(x=>{const S=x.icon;return i.jsx(Qe,{value:x.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[S&&i.jsx(S,{className:"w-4 h-4"}),x.label]})},x.value)})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Prix"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ze,{type:"number",placeholder:"Min",value:l.minPrice||"",onChange:x=>j("minPrice",x.target.value?parseInt(x.target.value):void 0),className:"text-sm"}),i.jsx(Ze,{type:"number",placeholder:"Max",value:l.maxPrice||"",onChange:x=>j("maxPrice",x.target.value?parseInt(x.target.value):void 0),className:"text-sm"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"État"}),i.jsx("div",{className:"space-y-2",children:ple.map(x=>{var S;return i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:((S=l.condition)==null?void 0:S.includes(x.value))||!1,onChange:C=>{const R=l.condition||[],z=C.target.checked?[...R,x.value]:R.filter(k=>k!==x.value);j("condition",z.length>0?z:void 0)},className:"rounded border-border"}),i.jsx("span",{className:"text-sm",children:x.label})]},x.value)})})]}),i.jsx(te,{onClick:y,className:"w-full",children:"Appliquer les filtres"})]})]})}),i.jsxs("main",{className:"flex-1",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 gap-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[i.jsxs("span",{className:"text-muted-foreground text-sm",children:[n.length," résultat(s)"]}),(l.query||l.category||l.minPrice||l.maxPrice)&&i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtres actifs:"}),l.query&&i.jsxs(lt,{variant:"secondary",className:"text-xs",children:['"',l.query,'"']}),l.category&&i.jsx(lt,{variant:"secondary",className:"text-xs",children:(b=x_.find(x=>x.value===l.category))==null?void 0:b.label})]})]}),i.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[i.jsxs(on,{value:l.sortBy||"date",onValueChange:x=>j("sortBy",x),children:[i.jsx(Jt,{className:"w-32 sm:w-40",children:i.jsx(ln,{})}),i.jsx(Xt,{children:gle.map(x=>i.jsx(Qe,{value:x.value,children:x.label},x.value))})]}),i.jsx(yi,{orientation:"vertical",className:"h-6 hidden sm:block"}),i.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[i.jsx(te,{variant:d==="grid"?"default":"ghost",size:"icon",onClick:()=>h("grid"),className:"rounded-none w-10 h-10 sm:w-12 sm:h-12",title:"Vue en grille",children:i.jsx(E3,{className:"w-4 h-4"})}),i.jsx(te,{variant:d==="list"?"default":"ghost",size:"icon",onClick:()=>h("list"),className:"rounded-none w-10 h-10 sm:w-12 sm:h-12",title:"Vue en liste",children:i.jsx(T3,{className:"w-4 h-4"})})]})]})]}),r&&n.length===0?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:Array.from({length:6}).map((x,S)=>i.jsxs(pe,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(ge,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},S))}):n.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`grid gap-4 sm:gap-6 ${d==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:n.map(x=>i.jsx(Op,{listing:x},x.id))}),s&&i.jsx("div",{className:"text-center mt-6 sm:mt-8",children:i.jsx(te,{onClick:_,disabled:r,variant:"outline",size:"lg",className:"w-full sm:w-auto",children:r?"Chargement...":"Charger plus"})})]}):i.jsxs("div",{className:"text-center py-8 sm:py-12",children:[i.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Aucun résultat trouvé"}),i.jsx("p",{className:"text-muted-foreground mb-4 text-sm sm:text-base",children:"Essayez de modifier vos critères de recherche"}),i.jsx(te,{onClick:N,variant:"outline",className:"w-full sm:w-auto",children:"Effacer les filtres"})]})]})]})]})};var Fw="Dialog",[M6,rje]=$r(Fw),[yle,ua]=M6(Fw),D6=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=w.useRef(null),u=w.useRef(null),[d,h]=Xs({prop:r,defaultProp:s??!1,onChange:a,caller:Fw});return i.jsx(yle,{scope:e,triggerRef:l,contentRef:u,contentId:Qs(),titleId:Qs(),descriptionId:Qs(),open:d,onOpenChange:h,onOpenToggle:w.useCallback(()=>h(m=>!m),[h]),modal:o,children:n})};D6.displayName=Fw;var L6="DialogTrigger",F6=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ua(L6,n),a=pt(e,s.triggerRef);return i.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":TE(s.open),...r,ref:a,onClick:Ve(t.onClick,s.onOpenToggle)})});F6.displayName=L6;var PE="DialogPortal",[xle,$6]=M6(PE,{forceMount:void 0}),V6=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=ua(PE,e);return i.jsx(xle,{scope:e,forceMount:n,children:w.Children.map(r,o=>i.jsx(Vr,{present:n||a.open,children:i.jsx(Gg,{asChild:!0,container:s,children:o})}))})};V6.displayName=PE;var o0="DialogOverlay",z6=w.forwardRef((t,e)=>{const n=$6(o0,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=ua(o0,t.__scopeDialog);return a.modal?i.jsx(Vr,{present:r||a.open,children:i.jsx(ble,{...s,ref:e})}):null});z6.displayName=o0;var wle=lc("DialogOverlay.RemoveScroll"),ble=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ua(o0,n);return i.jsx(Zg,{as:wle,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Ye.div,{"data-state":TE(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ru="DialogContent",U6=w.forwardRef((t,e)=>{const n=$6(Ru,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=ua(Ru,t.__scopeDialog);return i.jsx(Vr,{present:r||a.open,children:a.modal?i.jsx(_le,{...s,ref:e}):i.jsx(jle,{...s,ref:e})})});U6.displayName=Ru;var _le=w.forwardRef((t,e)=>{const n=ua(Ru,t.__scopeDialog),r=w.useRef(null),s=pt(e,n.contentRef,r);return w.useEffect(()=>{const a=r.current;if(a)return Ew(a)},[]),i.jsx(B6,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ve(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ve(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Ve(t.onFocusOutside,a=>a.preventDefault())})}),jle=w.forwardRef((t,e)=>{const n=ua(Ru,t.__scopeDialog),r=w.useRef(!1),s=w.useRef(!1);return i.jsx(B6,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),B6=w.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=ua(Ru,n),u=w.useRef(null),d=pt(e,u);return xw(),i.jsxs(i.Fragment,{children:[i.jsx(Hg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(Wg,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":TE(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Nle,{titleId:l.titleId}),i.jsx(Ele,{contentRef:u,descriptionId:l.descriptionId})]})]})}),CE="DialogTitle",W6=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ua(CE,n);return i.jsx(Ye.h2,{id:s.titleId,...r,ref:e})});W6.displayName=CE;var H6="DialogDescription",q6=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ua(H6,n);return i.jsx(Ye.p,{id:s.descriptionId,...r,ref:e})});q6.displayName=H6;var G6="DialogClose",K6=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ua(G6,n);return i.jsx(Ye.button,{type:"button",...r,ref:e,onClick:Ve(t.onClick,()=>s.onOpenChange(!1))})});K6.displayName=G6;function TE(t){return t?"open":"closed"}var Z6="DialogTitleWarning",[sje,Q6]=Tee(Z6,{contentName:Ru,titleName:CE,docsSlug:"dialog"}),Nle=({titleId:t})=>{const e=Q6(Z6),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Sle="DialogDescriptionWarning",Ele=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Q6(Sle).contentName}}.`;return w.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Ple=D6,Cle=F6,Tle=V6,Y6=z6,J6=U6,X6=W6,e$=q6,Rle=K6;const Ua=Ple,ch=Cle,kle=Tle,t$=w.forwardRef(({className:t,...e},n)=>i.jsx(Y6,{ref:n,className:at("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));t$.displayName=Y6.displayName;const ea=w.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(kle,{children:[i.jsx(t$,{}),i.jsxs(J6,{ref:r,className:at("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(Rle,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(jse,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ea.displayName=J6.displayName;const Ba=({className:t,...e})=>i.jsx("div",{className:at("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ba.displayName="DialogHeader";const Zy=({className:t,...e})=>i.jsx("div",{className:at("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Zy.displayName="DialogFooter";const ta=w.forwardRef(({className:t,...e},n)=>i.jsx(X6,{ref:n,className:at("text-lg font-semibold leading-none tracking-tight",t),...e}));ta.displayName=X6.displayName;const cu=w.forwardRef(({className:t,...e},n)=>i.jsx(e$,{ref:n,className:at("text-sm text-muted-foreground",t),...e}));cu.displayName=e$.displayName;const Ei=w.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:at("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Ei.displayName="Textarea";var Ile="Label",n$=w.forwardRef((t,e)=>i.jsx(Ye.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));n$.displayName=Ile;var r$=n$;const Ale=yw("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Oe=w.forwardRef(({className:t,...e},n)=>i.jsx(r$,{ref:n,className:at(Ale(),t),...e}));Oe.displayName=r$.displayName;const Ole=yw("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Kt=w.forwardRef(({className:t,variant:e,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:at(Ole({variant:e}),t),...n}));Kt.displayName="Alert";const Mle=w.forwardRef(({className:t,...e},n)=>i.jsx("h5",{ref:n,className:at("mb-1 font-medium leading-none tracking-tight",t),...e}));Mle.displayName="AlertTitle";const Zt=w.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:at("text-sm [&_p]:leading-relaxed",t),...e}));Zt.displayName="AlertDescription";var mt=function(){return mt=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mt.apply(this,arguments)};function Dle(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function s$(t,e,n){for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Xg(t){return t.mode==="multiple"}function ev(t){return t.mode==="range"}function $w(t){return t.mode==="single"}var Lle={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Fle(t,e){return gr(t,"LLLL y",e)}function $le(t,e){return gr(t,"d",e)}function Vle(t,e){return gr(t,"LLLL",e)}function zle(t){return"".concat(t)}function Ule(t,e){return gr(t,"cccccc",e)}function Ble(t,e){return gr(t,"yyyy",e)}var Wle=Object.freeze({__proto__:null,formatCaption:Fle,formatDay:$le,formatMonthCaption:Vle,formatWeekNumber:zle,formatWeekdayName:Ule,formatYearCaption:Ble}),Hle=function(t,e,n){return gr(t,"do MMMM (EEEE)",n)},qle=function(){return"Month: "},Gle=function(){return"Go to next month"},Kle=function(){return"Go to previous month"},Zle=function(t,e){return gr(t,"cccc",e)},Qle=function(t){return"Week n. ".concat(t)},Yle=function(){return"Year: "},Jle=Object.freeze({__proto__:null,labelDay:Hle,labelMonthDropdown:qle,labelNext:Gle,labelPrevious:Kle,labelWeekNumber:Qle,labelWeekday:Zle,labelYearDropdown:Yle});function Xle(){var t="buttons",e=Lle,n=NE,r={},s={},a=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:Wle,labels:Jle,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:a,styles:o,today:l,mode:"default"}}function ece(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,s=t.toMonth,a=t.fromDate,o=t.toDate;return r?a=Ms(r):e&&(a=new Date(e,0,1)),s?o=Aw(s):n&&(o=new Date(n,11,31)),{fromDate:a?Ih(a):void 0,toDate:o?Ih(o):void 0}}var i$=w.createContext(void 0);function tce(t){var e,n=t.initialProps,r=Xle(),s=ece(n),a=s.fromDate,o=s.toDate,l=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var u;($w(n)||Xg(n)||ev(n))&&(u=n.onSelect);var d=mt(mt(mt({},r),n),{captionLayout:l,classNames:mt(mt({},r.classNames),n.classNames),components:mt({},n.components),formatters:mt(mt({},r.formatters),n.formatters),fromDate:a,labels:mt(mt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:mt(mt({},r.modifiers),n.modifiers),modifiersClassNames:mt(mt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:u,styles:mt(mt({},r.styles),n.styles),toDate:o});return i.jsx(i$.Provider,{value:d,children:t.children})}function vn(){var t=w.useContext(i$);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function a$(t){var e=vn(),n=e.locale,r=e.classNames,s=e.styles,a=e.formatters.formatCaption;return i.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function nce(t){return i.jsx("svg",mt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function o$(t){var e,n,r=t.onChange,s=t.value,a=t.children,o=t.caption,l=t.className,u=t.style,d=vn(),h=(n=(e=d.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:nce;return i.jsxs("div",{className:l,style:u,children:[i.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),i.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:s,onChange:r,children:a}),i.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(h,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function rce(t){var e,n=vn(),r=n.fromDate,s=n.toDate,a=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,u=n.classNames,d=n.components,h=n.labels.labelMonthDropdown;if(!r)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});var m=[];if(Aae(r,s))for(var p=Ms(r),y=r.getMonth();y<=s.getMonth();y++)m.push(y_(p,y));else for(var p=Ms(new Date),y=0;y<=11;y++)m.push(y_(p,y));var j=function(N){var b=Number(N.target.value),x=y_(Ms(t.displayMonth),b);t.onChange(x)},_=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:o$;return i.jsx(_,{name:"months","aria-label":h(),className:u.dropdown_month,style:a.dropdown_month,onChange:j,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:m.map(function(N){return i.jsx("option",{value:N.getMonth(),children:l(N,{locale:o})},N.getMonth())})})}function sce(t){var e,n=t.displayMonth,r=vn(),s=r.fromDate,a=r.toDate,o=r.locale,l=r.styles,u=r.classNames,d=r.components,h=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,p=[];if(!s)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});for(var y=s.getFullYear(),j=a.getFullYear(),_=y;_<=j;_++)p.push(Sk($F(new Date),_));var N=function(x){var S=Sk(Ms(n),Number(x.target.value));t.onChange(S)},b=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:o$;return i.jsx(b,{name:"years","aria-label":m(),className:u.dropdown_year,style:l.dropdown_year,onChange:N,value:n.getFullYear(),caption:h(n,{locale:o}),children:p.map(function(x){return i.jsx("option",{value:x.getFullYear(),children:h(x,{locale:o})},x.getFullYear())})})}function ice(t,e){var n=w.useState(t),r=n[0],s=n[1],a=e===void 0?r:e;return[a,s]}function ace(t){var e=t.month,n=t.defaultMonth,r=t.today,s=e||n||r||new Date,a=t.toDate,o=t.fromDate,l=t.numberOfMonths,u=l===void 0?1:l;if(a&&Oh(a,s)<0){var d=-1*(u-1);s=oa(a,d)}return o&&Oh(s,o)<0&&(s=o),Ms(s)}function oce(){var t=vn(),e=ace(t),n=ice(e,t.month),r=n[0],s=n[1],a=function(o){var l;if(!t.disableNavigation){var u=Ms(o);s(u),(l=t.onMonthChange)===null||l===void 0||l.call(t,u)}};return[r,a]}function lce(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,s=Ms(t),a=Ms(oa(s,r)),o=Oh(a,s),l=[],u=0;u<o;u++){var d=oa(s,u);l.push(d)}return n&&(l=l.reverse()),l}function cce(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,o=r?a:1,l=Ms(t);if(!n)return oa(l,o);var u=Oh(n,t);if(!(u<a))return oa(l,o)}}function uce(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,o=r?a:1,l=Ms(t);if(!n)return oa(l,-o);var u=Oh(l,n);if(!(u<=0))return oa(l,-o)}}var l$=w.createContext(void 0);function dce(t){var e=vn(),n=oce(),r=n[0],s=n[1],a=lce(r,e),o=cce(r,e),l=uce(r,e),u=function(m){return a.some(function(p){return SE(m,p)})},d=function(m,p){u(m)||(p&&qF(m,p)?s(oa(m,1+e.numberOfMonths*-1)):s(m))},h={currentMonth:r,displayMonths:a,goToMonth:s,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:u};return i.jsx(l$.Provider,{value:h,children:t.children})}function tv(){var t=w.useContext(l$);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Tk(t){var e,n=vn(),r=n.classNames,s=n.styles,a=n.components,o=tv().goToMonth,l=function(h){o(oa(h,t.displayIndex?-t.displayIndex:0))},u=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:a$,d=i.jsx(u,{id:t.id,displayMonth:t.displayMonth});return i.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[i.jsx("div",{className:r.vhidden,children:d}),i.jsx(rce,{onChange:l,displayMonth:t.displayMonth}),i.jsx(sce,{onChange:l,displayMonth:t.displayMonth})]})}function hce(t){return i.jsx("svg",mt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function fce(t){return i.jsx("svg",mt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var l0=w.forwardRef(function(t,e){var n=vn(),r=n.classNames,s=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var o=a.join(" "),l=mt(mt({},s.button_reset),s.button);return t.style&&Object.assign(l,t.style),i.jsx("button",mt({},t,{ref:e,type:"button",className:o,style:l}))});function mce(t){var e,n,r=vn(),s=r.dir,a=r.locale,o=r.classNames,l=r.styles,u=r.labels,d=u.labelPrevious,h=u.labelNext,m=r.components;if(!t.nextMonth&&!t.previousMonth)return i.jsx(i.Fragment,{});var p=d(t.previousMonth,{locale:a}),y=[o.nav_button,o.nav_button_previous].join(" "),j=h(t.nextMonth,{locale:a}),_=[o.nav_button,o.nav_button_next].join(" "),N=(e=m==null?void 0:m.IconRight)!==null&&e!==void 0?e:fce,b=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:hce;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&i.jsx(l0,{name:"previous-month","aria-label":p,className:y,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?i.jsx(N,{className:o.nav_icon,style:l.nav_icon}):i.jsx(b,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&i.jsx(l0,{name:"next-month","aria-label":j,className:_,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?i.jsx(b,{className:o.nav_icon,style:l.nav_icon}):i.jsx(N,{className:o.nav_icon,style:l.nav_icon})})]})}function Rk(t){var e=vn().numberOfMonths,n=tv(),r=n.previousMonth,s=n.nextMonth,a=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(j){return SE(t.displayMonth,j)}),u=l===0,d=l===o.length-1,h=e>1&&(u||!d),m=e>1&&(d||!u),p=function(){r&&a(r)},y=function(){s&&a(s)};return i.jsx(mce,{displayMonth:t.displayMonth,hideNext:h,hidePrevious:m,nextMonth:s,previousMonth:r,onPreviousClick:p,onNextClick:y})}function pce(t){var e,n=vn(),r=n.classNames,s=n.disableNavigation,a=n.styles,o=n.captionLayout,l=n.components,u=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:a$,d;return s?d=i.jsx(u,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?d=i.jsx(Tk,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?d=i.jsxs(i.Fragment,{children:[i.jsx(Tk,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),i.jsx(Rk,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=i.jsxs(i.Fragment,{children:[i.jsx(u,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),i.jsx(Rk,{displayMonth:t.displayMonth,id:t.id})]}),i.jsx("div",{className:r.caption,style:a.caption,children:d})}function gce(t){var e=vn(),n=e.footer,r=e.styles,s=e.classNames.tfoot;return n?i.jsx("tfoot",{className:s,style:r.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:n})})}):i.jsx(i.Fragment,{})}function vce(t,e,n){for(var r=n?Pu(new Date):Ka(new Date,{locale:t,weekStartsOn:e}),s=[],a=0;a<7;a++){var o=ds(r,a);s.push(o)}return s}function yce(){var t=vn(),e=t.classNames,n=t.styles,r=t.showWeekNumber,s=t.locale,a=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,u=t.labels.labelWeekday,d=vce(s,a,o);return i.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&i.jsx("td",{style:n.head_cell,className:e.head_cell}),d.map(function(h,m){return i.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":u(h,{locale:s}),children:l(h,{locale:s})},m)})]})}function xce(){var t,e=vn(),n=e.classNames,r=e.styles,s=e.components,a=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:yce;return i.jsx("thead",{style:r.head,className:n.head,children:i.jsx(a,{})})}function wce(t){var e=vn(),n=e.locale,r=e.formatters.formatDay;return i.jsx(i.Fragment,{children:r(t.date,{locale:n})})}var RE=w.createContext(void 0);function bce(t){if(!Xg(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return i.jsx(RE.Provider,{value:e,children:t.children})}return i.jsx(_ce,{initialProps:t.initialProps,children:t.children})}function _ce(t){var e=t.initialProps,n=t.children,r=e.selected,s=e.min,a=e.max,o=function(d,h,m){var p,y;(p=e.onDayClick)===null||p===void 0||p.call(e,d,h,m);var j=!!(h.selected&&s&&(r==null?void 0:r.length)===s);if(!j){var _=!!(!h.selected&&a&&(r==null?void 0:r.length)===a);if(!_){var N=r?s$([],r):[];if(h.selected){var b=N.findIndex(function(x){return Ts(d,x)});N.splice(b,1)}else N.push(d);(y=e.onSelect)===null||y===void 0||y.call(e,N,d,h,m)}}},l={disabled:[]};r&&l.disabled.push(function(d){var h=a&&r.length>a-1,m=r.some(function(p){return Ts(p,d)});return!!(h&&!m)});var u={selected:r,onDayClick:o,modifiers:l};return i.jsx(RE.Provider,{value:u,children:n})}function kE(){var t=w.useContext(RE);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function jce(t,e){var n=e||{},r=n.from,s=n.to;return r&&s?Ts(s,t)&&Ts(r,t)?void 0:Ts(s,t)?{from:s,to:void 0}:Ts(r,t)?void 0:Ej(r,t)?{from:t,to:s}:{from:r,to:t}:s?Ej(t,s)?{from:s,to:t}:{from:t,to:s}:r?qF(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var IE=w.createContext(void 0);function Nce(t){if(!ev(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(IE.Provider,{value:e,children:t.children})}return i.jsx(Sce,{initialProps:t.initialProps,children:t.children})}function Sce(t){var e=t.initialProps,n=t.children,r=e.selected,s=r||{},a=s.from,o=s.to,l=e.min,u=e.max,d=function(y,j,_){var N,b;(N=e.onDayClick)===null||N===void 0||N.call(e,y,j,_);var x=jce(y,r);(b=e.onSelect)===null||b===void 0||b.call(e,x,y,j,_)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(h.range_start=[a],o?(h.range_end=[o],Ts(a,o)||(h.range_middle=[{after:a,before:o}])):h.range_end=[a]):o&&(h.range_start=[o],h.range_end=[o]),l&&(a&&!o&&h.disabled.push({after:v_(a,l-1),before:ds(a,l-1)}),a&&o&&h.disabled.push({after:a,before:ds(a,l-1)}),!a&&o&&h.disabled.push({after:v_(o,l-1),before:ds(o,l-1)})),u){if(a&&!o&&(h.disabled.push({before:ds(a,-u+1)}),h.disabled.push({after:ds(a,u-1)})),a&&o){var m=Ia(o,a)+1,p=u-m;h.disabled.push({before:v_(a,p)}),h.disabled.push({after:ds(o,p)})}!a&&o&&(h.disabled.push({before:ds(o,-u+1)}),h.disabled.push({after:ds(o,u-1)}))}return i.jsx(IE.Provider,{value:{selected:r,onDayClick:d,modifiers:h},children:n})}function AE(){var t=w.useContext(IE);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Qy(t){return Array.isArray(t)?s$([],t):t!==void 0?[t]:[]}function Ece(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],s=n[1];e[r]=Qy(s)}),e}var la;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(la||(la={}));var Pce=la.Selected,go=la.Disabled,Cce=la.Hidden,Tce=la.Today,w_=la.RangeEnd,b_=la.RangeMiddle,__=la.RangeStart,Rce=la.Outside;function kce(t,e,n){var r,s=(r={},r[Pce]=Qy(t.selected),r[go]=Qy(t.disabled),r[Cce]=Qy(t.hidden),r[Tce]=[t.today],r[w_]=[],r[b_]=[],r[__]=[],r[Rce]=[],r);return t.fromDate&&s[go].push({before:t.fromDate}),t.toDate&&s[go].push({after:t.toDate}),Xg(t)?s[go]=s[go].concat(e.modifiers[go]):ev(t)&&(s[go]=s[go].concat(n.modifiers[go]),s[__]=n.modifiers[__],s[b_]=n.modifiers[b_],s[w_]=n.modifiers[w_]),s}var c$=w.createContext(void 0);function Ice(t){var e=vn(),n=kE(),r=AE(),s=kce(e,n,r),a=Ece(e.modifiers),o=mt(mt({},s),a);return i.jsx(c$.Provider,{value:o,children:t.children})}function u$(){var t=w.useContext(c$);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Ace(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Oce(t){return!!(t&&typeof t=="object"&&"from"in t)}function Mce(t){return!!(t&&typeof t=="object"&&"after"in t)}function Dce(t){return!!(t&&typeof t=="object"&&"before"in t)}function Lce(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Fce(t,e){var n,r=e.from,s=e.to;if(r&&s){var a=Ia(s,r)<0;a&&(n=[s,r],r=n[0],s=n[1]);var o=Ia(t,r)>=0&&Ia(s,t)>=0;return o}return s?Ts(s,t):r?Ts(r,t):!1}function $ce(t){return _E(t)}function Vce(t){return Array.isArray(t)&&t.every(_E)}function zce(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if($ce(n))return Ts(t,n);if(Vce(n))return n.includes(t);if(Oce(n))return Fce(t,n);if(Lce(n))return n.dayOfWeek.includes(t.getDay());if(Ace(n)){var r=Ia(n.before,t),s=Ia(n.after,t),a=r>0,o=s<0,l=Ej(n.before,n.after);return l?o&&a:a||o}return Mce(n)?Ia(t,n.after)>0:Dce(n)?Ia(n.before,t)>0:typeof n=="function"?n(t):!1})}function OE(t,e,n){var r=Object.keys(e).reduce(function(a,o){var l=e[o];return zce(t,l)&&a.push(o),a},[]),s={};return r.forEach(function(a){return s[a]=!0}),n&&!SE(t,n)&&(s.outside=!0),s}function Uce(t,e){for(var n=Ms(t[0]),r=Aw(t[t.length-1]),s,a,o=n;o<=r;){var l=OE(o,e),u=!l.disabled&&!l.hidden;if(!u){o=ds(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),s||(s=o),o=ds(o,1)}return a||s}var Bce=365;function d$(t,e){var n=e.moveBy,r=e.direction,s=e.context,a=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,u=s.weekStartsOn,d=s.fromDate,h=s.toDate,m=s.locale,p={day:ds,week:Sj,month:oa,year:_ie,startOfWeek:function(N){return s.ISOWeek?Pu(N):Ka(N,{locale:m,weekStartsOn:u})},endOfWeek:function(N){return s.ISOWeek?VF(N):jE(N,{locale:m,weekStartsOn:u})}},y=p[n](t,r==="after"?1:-1);r==="before"&&d?y=jie([d,y]):r==="after"&&h&&(y=Nie([h,y]));var j=!0;if(a){var _=OE(y,a);j=!_.disabled&&!_.hidden}return j?y:l.count>Bce?l.lastFocused:d$(y,{moveBy:n,direction:r,context:s,modifiers:a,retry:mt(mt({},l),{count:l.count+1})})}var h$=w.createContext(void 0);function Wce(t){var e=tv(),n=u$(),r=w.useState(),s=r[0],a=r[1],o=w.useState(),l=o[0],u=o[1],d=Uce(e.displayMonths,n),h=s??(l&&e.isDateDisplayed(l))?l:d,m=function(){u(s),a(void 0)},p=function(N){a(N)},y=vn(),j=function(N,b){if(s){var x=d$(s,{moveBy:N,direction:b,context:y,modifiers:n});Ts(s,x)||(e.goToDate(x,s),p(x))}},_={focusedDay:s,focusTarget:h,blur:m,focus:p,focusDayAfter:function(){return j("day","after")},focusDayBefore:function(){return j("day","before")},focusWeekAfter:function(){return j("week","after")},focusWeekBefore:function(){return j("week","before")},focusMonthBefore:function(){return j("month","before")},focusMonthAfter:function(){return j("month","after")},focusYearBefore:function(){return j("year","before")},focusYearAfter:function(){return j("year","after")},focusStartOfWeek:function(){return j("startOfWeek","before")},focusEndOfWeek:function(){return j("endOfWeek","after")}};return i.jsx(h$.Provider,{value:_,children:t.children})}function ME(){var t=w.useContext(h$);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Hce(t,e){var n=u$(),r=OE(t,n,e);return r}var DE=w.createContext(void 0);function qce(t){if(!$w(t.initialProps)){var e={selected:void 0};return i.jsx(DE.Provider,{value:e,children:t.children})}return i.jsx(Gce,{initialProps:t.initialProps,children:t.children})}function Gce(t){var e=t.initialProps,n=t.children,r=function(a,o,l){var u,d,h;if((u=e.onDayClick)===null||u===void 0||u.call(e,a,o,l),o.selected&&!e.required){(d=e.onSelect)===null||d===void 0||d.call(e,void 0,a,o,l);return}(h=e.onSelect)===null||h===void 0||h.call(e,a,a,o,l)},s={selected:e.selected,onDayClick:r};return i.jsx(DE.Provider,{value:s,children:n})}function f$(){var t=w.useContext(DE);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Kce(t,e){var n=vn(),r=f$(),s=kE(),a=AE(),o=ME(),l=o.focusDayAfter,u=o.focusDayBefore,d=o.focusWeekAfter,h=o.focusWeekBefore,m=o.blur,p=o.focus,y=o.focusMonthBefore,j=o.focusMonthAfter,_=o.focusYearBefore,N=o.focusYearAfter,b=o.focusStartOfWeek,x=o.focusEndOfWeek,S=function(K){var D,G,q,X;$w(n)?(D=r.onDayClick)===null||D===void 0||D.call(r,t,e,K):Xg(n)?(G=s.onDayClick)===null||G===void 0||G.call(s,t,e,K):ev(n)?(q=a.onDayClick)===null||q===void 0||q.call(a,t,e,K):(X=n.onDayClick)===null||X===void 0||X.call(n,t,e,K)},C=function(K){var D;p(t),(D=n.onDayFocus)===null||D===void 0||D.call(n,t,e,K)},R=function(K){var D;m(),(D=n.onDayBlur)===null||D===void 0||D.call(n,t,e,K)},z=function(K){var D;(D=n.onDayMouseEnter)===null||D===void 0||D.call(n,t,e,K)},k=function(K){var D;(D=n.onDayMouseLeave)===null||D===void 0||D.call(n,t,e,K)},I=function(K){var D;(D=n.onDayPointerEnter)===null||D===void 0||D.call(n,t,e,K)},V=function(K){var D;(D=n.onDayPointerLeave)===null||D===void 0||D.call(n,t,e,K)},T=function(K){var D;(D=n.onDayTouchCancel)===null||D===void 0||D.call(n,t,e,K)},O=function(K){var D;(D=n.onDayTouchEnd)===null||D===void 0||D.call(n,t,e,K)},$=function(K){var D;(D=n.onDayTouchMove)===null||D===void 0||D.call(n,t,e,K)},M=function(K){var D;(D=n.onDayTouchStart)===null||D===void 0||D.call(n,t,e,K)},B=function(K){var D;(D=n.onDayKeyUp)===null||D===void 0||D.call(n,t,e,K)},J=function(K){var D;switch(K.key){case"ArrowLeft":K.preventDefault(),K.stopPropagation(),n.dir==="rtl"?l():u();break;case"ArrowRight":K.preventDefault(),K.stopPropagation(),n.dir==="rtl"?u():l();break;case"ArrowDown":K.preventDefault(),K.stopPropagation(),d();break;case"ArrowUp":K.preventDefault(),K.stopPropagation(),h();break;case"PageUp":K.preventDefault(),K.stopPropagation(),K.shiftKey?_():y();break;case"PageDown":K.preventDefault(),K.stopPropagation(),K.shiftKey?N():j();break;case"Home":K.preventDefault(),K.stopPropagation(),b();break;case"End":K.preventDefault(),K.stopPropagation(),x();break}(D=n.onDayKeyDown)===null||D===void 0||D.call(n,t,e,K)},ee={onClick:S,onFocus:C,onBlur:R,onKeyDown:J,onKeyUp:B,onMouseEnter:z,onMouseLeave:k,onPointerEnter:I,onPointerLeave:V,onTouchCancel:T,onTouchEnd:O,onTouchMove:$,onTouchStart:M};return ee}function Zce(){var t=vn(),e=f$(),n=kE(),r=AE(),s=$w(t)?e.selected:Xg(t)?n.selected:ev(t)?r.selected:void 0;return s}function Qce(t){return Object.values(la).includes(t)}function Yce(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var s=t.modifiersClassNames[r];if(s)n.push(s);else if(Qce(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function Jce(t,e){var n=mt({},t.styles.day);return Object.keys(e).forEach(function(r){var s;n=mt(mt({},n),(s=t.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function Xce(t,e,n){var r,s,a,o=vn(),l=ME(),u=Hce(t,e),d=Kce(t,u),h=Zce(),m=!!(o.onDayClick||o.mode!=="default");w.useEffect(function(){var z;u.outside||l.focusedDay&&m&&Ts(l.focusedDay,t)&&((z=n.current)===null||z===void 0||z.focus())},[l.focusedDay,t,n,m,u.outside]);var p=Yce(o,u).join(" "),y=Jce(o,u),j=!!(u.outside&&!o.showOutsideDays||u.hidden),_=(a=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:wce,N=i.jsx(_,{date:t,displayMonth:e,activeModifiers:u}),b={style:y,className:p,children:N,role:"gridcell"},x=l.focusTarget&&Ts(l.focusTarget,t)&&!u.outside,S=l.focusedDay&&Ts(l.focusedDay,t),C=mt(mt(mt({},b),(r={disabled:u.disabled,role:"gridcell"},r["aria-selected"]=u.selected,r.tabIndex=S||x?0:-1,r)),d),R={isButton:m,isHidden:j,activeModifiers:u,selectedDays:h,buttonProps:C,divProps:b};return R}function eue(t){var e=w.useRef(null),n=Xce(t.date,t.displayMonth,e);return n.isHidden?i.jsx("div",{role:"gridcell"}):n.isButton?i.jsx(l0,mt({name:"day",ref:e},n.buttonProps)):i.jsx("div",mt({},n.divProps))}function tue(t){var e=t.number,n=t.dates,r=vn(),s=r.onWeekNumberClick,a=r.styles,o=r.classNames,l=r.locale,u=r.labels.labelWeekNumber,d=r.formatters.formatWeekNumber,h=d(Number(e),{locale:l});if(!s)return i.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:h});var m=u(Number(e),{locale:l}),p=function(y){s(e,n,y)};return i.jsx(l0,{name:"week-number","aria-label":m,className:o.weeknumber,style:a.weeknumber,onClick:p,children:h})}function nue(t){var e,n,r=vn(),s=r.styles,a=r.classNames,o=r.showWeekNumber,l=r.components,u=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:eue,d=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:tue,h;return o&&(h=i.jsx("td",{className:a.cell,style:s.cell,children:i.jsx(d,{number:t.weekNumber,dates:t.dates})})),i.jsxs("tr",{className:a.row,style:s.row,children:[h,t.dates.map(function(m){return i.jsx("td",{className:a.cell,style:s.cell,role:"presentation",children:i.jsx(u,{displayMonth:t.displayMonth,date:m})},Rae(m))})]})}function kk(t,e,n){for(var r=n!=null&&n.ISOWeek?VF(e):jE(e,n),s=n!=null&&n.ISOWeek?Pu(t):Ka(t,n),a=Ia(r,s),o=[],l=0;l<=a;l++)o.push(ds(s,l));var u=o.reduce(function(d,h){var m=n!=null&&n.ISOWeek?UF(h):WF(h,n),p=d.find(function(y){return y.weekNumber===m});return p?(p.dates.push(h),d):(d.push({weekNumber:m,dates:[h]}),d)},[]);return u}function rue(t,e){var n=kk(Ms(t),Aw(t),e);if(e!=null&&e.useFixedWeeks){var r=Iae(t,e);if(r<6){var s=n[n.length-1],a=s.dates[s.dates.length-1],o=Sj(a,6-r),l=kk(Sj(a,1),o,e);n.push.apply(n,l)}}return n}function sue(t){var e,n,r,s=vn(),a=s.locale,o=s.classNames,l=s.styles,u=s.hideHead,d=s.fixedWeeks,h=s.components,m=s.weekStartsOn,p=s.firstWeekContainsDate,y=s.ISOWeek,j=rue(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:y,locale:a,weekStartsOn:m,firstWeekContainsDate:p}),_=(e=h==null?void 0:h.Head)!==null&&e!==void 0?e:xce,N=(n=h==null?void 0:h.Row)!==null&&n!==void 0?n:nue,b=(r=h==null?void 0:h.Footer)!==null&&r!==void 0?r:gce;return i.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!u&&i.jsx(_,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:j.map(function(x){return i.jsx(N,{displayMonth:t.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),i.jsx(b,{displayMonth:t.displayMonth})]})}function iue(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var aue=iue()?w.useLayoutEffect:w.useEffect,j_=!1,oue=0;function Ik(){return"react-day-picker-".concat(++oue)}function lue(t){var e,n=t??(j_?Ik():null),r=w.useState(n),s=r[0],a=r[1];return aue(function(){s===null&&a(Ik())},[]),w.useEffect(function(){j_===!1&&(j_=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function cue(t){var e,n,r=vn(),s=r.dir,a=r.classNames,o=r.styles,l=r.components,u=tv().displayMonths,d=lue(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),h=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,m=[a.month],p=o.month,y=t.displayIndex===0,j=t.displayIndex===u.length-1,_=!y&&!j;s==="rtl"&&(e=[y,j],j=e[0],y=e[1]),y&&(m.push(a.caption_start),p=mt(mt({},p),o.caption_start)),j&&(m.push(a.caption_end),p=mt(mt({},p),o.caption_end)),_&&(m.push(a.caption_between),p=mt(mt({},p),o.caption_between));var N=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:pce;return i.jsxs("div",{className:m.join(" "),style:p,children:[i.jsx(N,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),i.jsx(sue,{id:h,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function uue(t){var e=vn(),n=e.classNames,r=e.styles;return i.jsx("div",{className:n.months,style:r.months,children:t.children})}function due(t){var e,n,r=t.initialProps,s=vn(),a=ME(),o=tv(),l=w.useState(!1),u=l[0],d=l[1];w.useEffect(function(){s.initialFocus&&a.focusTarget&&(u||(a.focus(a.focusTarget),d(!0)))},[s.initialFocus,u,a.focus,a.focusTarget,a]);var h=[s.classNames.root,s.className];s.numberOfMonths>1&&h.push(s.classNames.multiple_months),s.showWeekNumber&&h.push(s.classNames.with_weeknumber);var m=mt(mt({},s.styles.root),s.style),p=Object.keys(r).filter(function(j){return j.startsWith("data-")}).reduce(function(j,_){var N;return mt(mt({},j),(N={},N[_]=r[_],N))},{}),y=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:uue;return i.jsx("div",mt({className:h.join(" "),style:m,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:i.jsx(y,{children:o.displayMonths.map(function(j,_){return i.jsx(cue,{displayIndex:_,displayMonth:j},_)})})}))}function hue(t){var e=t.children,n=Dle(t,["children"]);return i.jsx(tce,{initialProps:n,children:i.jsx(dce,{children:i.jsx(qce,{initialProps:n,children:i.jsx(bce,{initialProps:n,children:i.jsx(Nce,{initialProps:n,children:i.jsx(Ice,{children:i.jsx(Wce,{children:e})})})})})})})}function fue(t){return i.jsx(hue,mt({},t,{children:i.jsx(due,{initialProps:t})}))}function m$({className:t,classNames:e,showOutsideDays:n=!0,...r}){return i.jsx(fue,{showOutsideDays:n,className:at("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:at(pj({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:at("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:at(pj({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>i.jsx(yse,{className:"h-4 w-4"}),IconRight:({...s})=>i.jsx(xF,{className:"h-4 w-4"})},...r})}m$.displayName="Calendar";var Vw="Popover",[p$,ije]=$r(Vw,[cf]),nv=cf(),[mue,_c]=p$(Vw),g$=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!1}=t,l=nv(e),u=w.useRef(null),[d,h]=w.useState(!1),[m,p]=Xs({prop:r,defaultProp:s??!1,onChange:a,caller:Vw});return i.jsx(lE,{...l,children:i.jsx(mue,{scope:e,contentId:Qs(),triggerRef:u,open:m,onOpenChange:p,onOpenToggle:w.useCallback(()=>p(y=>!y),[p]),hasCustomAnchor:d,onCustomAnchorAdd:w.useCallback(()=>h(!0),[]),onCustomAnchorRemove:w.useCallback(()=>h(!1),[]),modal:o,children:n})})};g$.displayName=Vw;var v$="PopoverAnchor",pue=w.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=_c(v$,n),a=nv(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return w.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(Nw,{...a,...r,ref:e})});pue.displayName=v$;var y$="PopoverTrigger",x$=w.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=_c(y$,n),a=nv(n),o=pt(e,s.triggerRef),l=i.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":N$(s.open),...r,ref:o,onClick:Ve(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(Nw,{asChild:!0,...a,children:l})});x$.displayName=y$;var LE="PopoverPortal",[gue,vue]=p$(LE,{forceMount:void 0}),w$=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,a=_c(LE,e);return i.jsx(gue,{scope:e,forceMount:n,children:i.jsx(Vr,{present:n||a.open,children:i.jsx(Gg,{asChild:!0,container:s,children:r})})})};w$.displayName=LE;var Mh="PopoverContent",b$=w.forwardRef((t,e)=>{const n=vue(Mh,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,a=_c(Mh,t.__scopePopover);return i.jsx(Vr,{present:r||a.open,children:a.modal?i.jsx(xue,{...s,ref:e}):i.jsx(wue,{...s,ref:e})})});b$.displayName=Mh;var yue=lc("PopoverContent.RemoveScroll"),xue=w.forwardRef((t,e)=>{const n=_c(Mh,t.__scopePopover),r=w.useRef(null),s=pt(e,r),a=w.useRef(!1);return w.useEffect(()=>{const o=r.current;if(o)return Ew(o)},[]),i.jsx(Zg,{as:yue,allowPinchZoom:!0,children:i.jsx(_$,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ve(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ve(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Ve(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),wue=w.forwardRef((t,e)=>{const n=_c(Mh,t.__scopePopover),r=w.useRef(!1),s=w.useRef(!1);return i.jsx(_$,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),_$=w.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,...m}=t,p=_c(Mh,n),y=nv(n);return xw(),i.jsx(Hg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(Wg,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:i.jsx(cE,{"data-state":N$(p.open),role:"dialog",id:p.contentId,...y,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),j$="PopoverClose",bue=w.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=_c(j$,n);return i.jsx(Ye.button,{type:"button",...r,ref:e,onClick:Ve(t.onClick,()=>s.onOpenChange(!1))})});bue.displayName=j$;var _ue="PopoverArrow",jue=w.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=nv(n);return i.jsx(uE,{...s,...r,ref:e})});jue.displayName=_ue;function N$(t){return t?"open":"closed"}var Nue=g$,Sue=x$,Eue=w$,S$=b$;const Pue=Nue,Cue=Sue,E$=w.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>i.jsx(Eue,{children:i.jsx(S$,{ref:s,align:e,sideOffset:n,className:at("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));E$.displayName=S$.displayName;const bd=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},zw=uf((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espèces",icon:"💵",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"🏦",description:"Virement SEPA sécurisé",fees:0,processingTime:"1-2 jours ouvrés",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"💳",description:"Paiement sécurisé via PayPal",fees:2.9,processingTime:"Immédiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"📱",description:"Paiement mobile instantané",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async n=>{try{t({loading:!0});const r=e().generateSecurityCode(),s={...n,securityCode:r,status:"pending",createdAt:fr(),updatedAt:fr()},a=await ic(Ht(We,"paymentRequests"),s),o={id:a.id,...n,securityCode:r,status:"pending",createdAt:new Date,updatedAt:new Date};return t(l=>({paymentRequests:[o,...l.paymentRequests],loading:!1})),Ne.success("Demande de paiement créée avec succès"),a.id}catch(r){throw console.error("Erreur lors de la création de la demande de paiement:",r),Ne.error("Erreur lors de la création de la demande de paiement"),t({loading:!1}),r}},updatePaymentStatus:async(n,r,s)=>{try{const a={status:r,updatedAt:fr()};s&&(a.notes=s),await Cn(_t(We,"paymentRequests",n),a),t(l=>({paymentRequests:l.paymentRequests.map(u=>u.id===n?{...u,status:r,notes:s||u.notes,updatedAt:new Date}:u)}));const o={confirmed:"Paiement confirmé",completed:"Paiement terminé",cancelled:"Paiement annulé",disputed:"Litige signalé"};Ne.success(o[r]||"Statut mis à jour")}catch(a){console.error("Erreur lors de la mise à jour du statut:",a),Ne.error("Erreur lors de la mise à jour du statut")}},fetchUserPaymentRequests:async n=>{if(n)try{t({loading:!0});const r=Tn(Ht(We,"paymentRequests"),lr("buyerId","==",n),ji(50)),s=Tn(Ht(We,"paymentRequests"),lr("sellerId","==",n),ji(50)),[a,o]=await Promise.all([Zn(r),Zn(s)]),l=[];a.forEach(u=>{const d=u.data();l.push({id:u.id,...d,createdAt:bd(d.createdAt),updatedAt:bd(d.updatedAt),meetingDateTime:d.meetingDateTime?bd(d.meetingDateTime):void 0})}),o.forEach(u=>{const d=u.data();l.find(h=>h.id===u.id)||l.push({id:u.id,...d,createdAt:bd(d.createdAt),updatedAt:bd(d.updatedAt),meetingDateTime:d.meetingDateTime?bd(d.meetingDateTime):void 0})}),l.sort((u,d)=>d.createdAt.getTime()-u.createdAt.getTime()),t({paymentRequests:l,loading:!1})}catch(r){console.error("Erreur lors du chargement des demandes de paiement:",r),Ne.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(n,r)=>{switch(n){case"cash":return!0;case"transfer":return r.bankDetails&&r.bankDetails.iban&&r.bankDetails.accountName;case"paypal":return r.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.paypalEmail);case"lydia":return r.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(r.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(n,r)=>{const{paymentMethods:s}=e(),a=s.find(o=>o.type===r);return a?n*a.fees/100:0},getPaymentInstructions:(n,r)=>{var a,o,l;const s=[];switch(n){case"cash":s.push("💵 Paiement en espèces","📍 Rencontrez-vous au lieu convenu","🔍 Vérifiez l'objet avant de payer","🧾 Demandez un reçu si nécessaire",`🔐 Code de sécurité : ${r.securityCode}`);break;case"transfer":s.push("🏦 Virement bancaire SEPA","📋 Utilisez les coordonnées bancaires fournies","💬 Indiquez la référence de transaction","⏱️ Délai : 1-2 jours ouvrés",`🔐 Code de sécurité : ${r.securityCode}`),(a=r.paymentDetails)!=null&&a.bankDetails&&s.push(`📊 IBAN : ${r.paymentDetails.bankDetails.iban}`,`🏛️ Titulaire : ${r.paymentDetails.bankDetails.accountName}`);break;case"paypal":s.push("💳 Paiement PayPal","📧 Envoyez le paiement à l'adresse email fournie",'🛡️ Utilisez "Biens et services" pour la protection',"⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(o=r.paymentDetails)!=null&&o.paypalEmail&&s.push(`📧 Email PayPal : ${r.paymentDetails.paypalEmail}`);break;case"lydia":s.push("📱 Paiement Lydia","📞 Envoyez le paiement au numéro fourni","💬 Indiquez la référence de transaction","⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(l=r.paymentDetails)!=null&&l.lydiaPhone&&s.push(`📞 Numéro Lydia : ${r.paymentDetails.lydiaPhone}`);break}return s}}));var P$="https://js.stripe.com/v3",Tue=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var Rue=function(){for(var e=document.querySelectorAll('script[src^="'.concat(P$,'"]')),n=0;n<e.length;n++){var r=e[n];if(Tue.test(r.src))return r}return null},Ak=function(e){var n="",r=document.createElement("script");r.src="".concat(P$).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},kue=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:n})},nm=null,hy=null,fy=null,Iue=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},Aue=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},Oue=function(e){return nm!==null?nm:(nm=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var s=Rue();if(!(s&&e)){if(!s)s=Ak(e);else if(s&&fy!==null&&hy!==null){var a;s.removeEventListener("load",fy),s.removeEventListener("error",hy),(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=Ak(e)}}fy=Aue(n,r),hy=Iue(r),s.addEventListener("load",fy),s.addEventListener("error",hy)}catch(o){r(o);return}}),nm.catch(function(n){return nm=null,Promise.reject(n)}))},Mue=function(e,n,r){if(e===null)return null;var s=e.apply(void 0,n);return kue(s,r),s},rm,C$=!1,T$=function(){return rm||(rm=Oue(null).catch(function(e){return rm=null,Promise.reject(e)}),rm)};Promise.resolve().then(function(){return T$()}).catch(function(t){C$||console.warn(t)});var R$=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];C$=!0;var s=Date.now();return T$().then(function(a){return Mue(a,n,s)})},k$={exports:{}},Due="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Lue=Due,Fue=Lue;function I$(){}function A$(){}A$.resetWarningCache=I$;var $ue=function(){function t(r,s,a,o,l,u){if(u!==Fue){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:A$,resetWarningCache:I$};return n.PropTypes=n,n};k$.exports=$ue();var Vue=k$.exports;const An=Go(Vue);function Ok(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Mk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ok(Object(n),!0).forEach(function(r){O$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ok(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yy(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yy=function(e){return typeof e}:Yy=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yy(t)}function O$(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M$(t,e){return zue(t)||Uue(t,e)||Bue(t,e)||Wue()}function zue(t){if(Array.isArray(t))return t}function Uue(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],s=!0,a=!1,o,l;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(u){a=!0,l=u}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function Bue(t,e){if(t){if(typeof t=="string")return Dk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dk(t,e)}}function Dk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Vs=function(e,n,r){var s=!!r,a=oe.useRef(r);oe.useEffect(function(){a.current=r},[r]),oe.useEffect(function(){if(!s||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,o),function(){e.off(n,o)}},[s,n,e,a])},Ij=function(e){var n=oe.useRef(e);return oe.useEffect(function(){n.current=e},[e]),n.current},Dh=function(e){return e!==null&&Yy(e)==="object"},Hue=function(e){return Dh(e)&&typeof e.then=="function"},que=function(e){return Dh(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Lk="[object Object]",Gue=function t(e,n){if(!Dh(e)||!Dh(n))return e===n;var r=Array.isArray(e),s=Array.isArray(n);if(r!==s)return!1;var a=Object.prototype.toString.call(e)===Lk,o=Object.prototype.toString.call(n)===Lk;if(a!==o)return!1;if(!a&&!r)return e===n;var l=Object.keys(e),u=Object.keys(n);if(l.length!==u.length)return!1;for(var d={},h=0;h<l.length;h+=1)d[l[h]]=!0;for(var m=0;m<u.length;m+=1)d[u[m]]=!0;var p=Object.keys(d);if(p.length!==l.length)return!1;var y=e,j=n,_=function(b){return t(y[b],j[b])};return p.every(_)},D$=function(e,n,r){return Dh(e)?Object.keys(e).reduce(function(s,a){var o=!Dh(n)||!Gue(e[a],n[a]);return r.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):o?Mk(Mk({},s||{}),{},O$({},a,e[a])):s},null):null},L$="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Fk=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:L$;if(e===null||que(e))return e;throw new Error(n)},Kue=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:L$;if(Hue(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(s){return Fk(s,n)})};var r=Fk(e,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},Zue=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},Uw=oe.createContext(null);Uw.displayName="ElementsContext";var F$=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},$$=function(e){var n=e.stripe,r=e.options,s=e.children,a=oe.useMemo(function(){return Kue(n)},[n]),o=oe.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),l=M$(o,2),u=l[0],d=l[1];oe.useEffect(function(){var p=!0,y=function(_){d(function(N){return N.stripe?N:{stripe:_,elements:_.elements(r)}})};return a.tag==="async"&&!u.stripe?a.stripePromise.then(function(j){j&&p&&y(j)}):a.tag==="sync"&&!u.stripe&&y(a.stripe),function(){p=!1}},[a,u,r]);var h=Ij(n);oe.useEffect(function(){h!==null&&h!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[h,n]);var m=Ij(r);return oe.useEffect(function(){if(u.elements){var p=D$(r,m,["clientSecret","fonts"]);p&&u.elements.update(p)}},[r,m,u.elements]),oe.useEffect(function(){Zue(u.stripe)},[u.stripe]),oe.createElement(Uw.Provider,{value:u},s)};$$.propTypes={stripe:An.any,options:An.object};var Que=function(e){var n=oe.useContext(Uw);return F$(n,e)},Yue=function(){var e=Que("calls useElements()"),n=e.elements;return n};An.func.isRequired;var V$=oe.createContext(null);V$.displayName="CustomCheckoutSdkContext";var Jue=function(e,n){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return e},Xue=oe.createContext(null);Xue.displayName="CustomCheckoutContext";An.any,An.shape({clientSecret:An.string.isRequired,elementsOptions:An.object}).isRequired;var Aj=function(e){var n=oe.useContext(V$),r=oe.useContext(Uw);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?Jue(n,e):F$(r,e)},ede=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},cr=function(e,n){var r="".concat(ede(e),"Element"),s=function(u){var d=u.id,h=u.className,m=u.options,p=m===void 0?{}:m,y=u.onBlur,j=u.onFocus,_=u.onReady,N=u.onChange,b=u.onEscape,x=u.onClick,S=u.onLoadError,C=u.onLoaderStart,R=u.onNetworksChange,z=u.onConfirm,k=u.onCancel,I=u.onShippingAddressChange,V=u.onShippingRateChange,T=Aj("mounts <".concat(r,">")),O="elements"in T?T.elements:null,$="customCheckoutSdk"in T?T.customCheckoutSdk:null,M=oe.useState(null),B=M$(M,2),J=B[0],ee=B[1],K=oe.useRef(null),D=oe.useRef(null);Vs(J,"blur",y),Vs(J,"focus",j),Vs(J,"escape",b),Vs(J,"click",x),Vs(J,"loaderror",S),Vs(J,"loaderstart",C),Vs(J,"networkschange",R),Vs(J,"confirm",z),Vs(J,"cancel",k),Vs(J,"shippingaddresschange",I),Vs(J,"shippingratechange",V),Vs(J,"change",N);var G;_&&(e==="expressCheckout"?G=_:G=function(){_(J)}),Vs(J,"ready",G),oe.useLayoutEffect(function(){if(K.current===null&&D.current!==null&&(O||$)){var X=null;$?X=$.createElement(e,p):O&&(X=O.create(e,p)),K.current=X,ee(X),X&&X.mount(D.current)}},[O,$,p]);var q=Ij(p);return oe.useEffect(function(){if(K.current){var X=D$(p,q,["paymentRequest"]);X&&"update"in K.current&&K.current.update(X)}},[p,q]),oe.useLayoutEffect(function(){return function(){if(K.current&&typeof K.current.destroy=="function")try{K.current.destroy(),K.current=null}catch{}}},[]),oe.createElement("div",{id:d,className:h,ref:D})},a=function(u){Aj("mounts <".concat(r,">"));var d=u.id,h=u.className;return oe.createElement("div",{id:d,className:h})},o=n?a:s;return o.propTypes={id:An.string,className:An.string,onChange:An.func,onBlur:An.func,onFocus:An.func,onReady:An.func,onEscape:An.func,onClick:An.func,onLoadError:An.func,onLoaderStart:An.func,onNetworksChange:An.func,onConfirm:An.func,onCancel:An.func,onShippingAddressChange:An.func,onShippingRateChange:An.func,options:An.object},o.displayName=r,o.__elementType=e,o},ur=typeof window>"u",tde=oe.createContext(null);tde.displayName="EmbeddedCheckoutProviderContext";var nde=function(){var e=Aj("calls useStripe()"),n=e.stripe;return n};cr("auBankAccount",ur);cr("card",ur);cr("cardNumber",ur);cr("cardExpiry",ur);cr("cardCvc",ur);cr("fpxBank",ur);cr("iban",ur);cr("idealBank",ur);cr("p24Bank",ur);cr("epsBank",ur);cr("payment",ur);cr("expressCheckout",ur);cr("currencySelector",ur);cr("paymentRequestButton",ur);cr("linkAuthentication",ur);cr("address",ur);cr("shippingAddress",ur);cr("paymentMethodMessaging",ur);cr("affirmMessage",ur);cr("afterpayClearpayMessage",ur);const rde=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{nde(),Yue();const[s,a]=w.useState(!1),[o,l]=w.useState(null),u=async d=>{d.preventDefault(),a(!0),l(null);try{await new Promise(m=>setTimeout(m,2e3));const h="pi_"+Math.random().toString(36).substring(2,15);Ne.success("Paiement réussi !"),n(h)}catch(h){console.error("Payment error:",h),l(h.message||"Une erreur est survenue lors du paiement"),r(h.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Qn,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),i.jsx(kt,{children:"Paiement sécurisé via Stripe"})]}),i.jsx(ge,{children:i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsx("div",{className:"p-4 border rounded-md",children:i.jsx("div",{className:"h-10 flex items-center",children:i.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&i.jsxs(Kt,{className:"border-red-200 bg-red-50",children:[i.jsx(Un,{className:"h-4 w-4 text-red-600"}),i.jsx(Zt,{className:"text-red-800",children:o})]}),i.jsxs(Kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(Su,{className:"h-4 w-4 text-blue-600"}),i.jsx(Zt,{className:"text-blue-800",children:"Vos informations de paiement sont sécurisées et cryptées par Stripe."})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),i.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[i.jsx("li",{children:"Succès : 4242 4242 4242 4242"}),i.jsx("li",{children:"Échec : 4000 0000 0000 0002"}),i.jsx("li",{children:"Date : n'importe quelle date future"}),i.jsx("li",{children:"CVC : n'importe quel nombre à 3 chiffres"})]})]}),i.jsx(te,{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-primary to-secondary",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Su,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},$k=R$("pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p"),sde=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{const s={appearance:{theme:"stripe"},locale:"fr"};return $k?i.jsx($$,{stripe:$k,options:s,children:i.jsx(rde,{amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})}):i.jsxs(Kt,{className:"border-yellow-200 bg-yellow-50",children:[i.jsx(Un,{className:"h-4 w-4 text-yellow-600"}),i.jsxs(Zt,{className:"text-yellow-800",children:[i.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre clé publique Stripe dans le fichier .env"]})]})},z$=({amount:t,currency:e,onMethodSelect:n,selectedMethod:r})=>{const{paymentMethods:s,calculateFees:a}=zw(),[o,l]=w.useState({}),[u,d]=w.useState({}),[h,m]=w.useState(null),p=[{id:"card",type:"card",name:"Carte bancaire",icon:Qn,description:"Paiement sécurisé par carte",fees:1.5,processingTime:"Immédiat",securityLevel:"high",available:!0},...s],y=R=>{switch(R){case"card":return Qn;case"cash":return v3;case"transfer":return b3;case"paypal":return Qn;case"lydia":return Uu;default:return Qn}},j=R=>{switch(R){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},_=(R,z)=>{var I,V;const k={};switch(R){case"card":return!0;case"transfer":(I=z.bankDetails)!=null&&I.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(z.bankDetails.iban.replace(/\s/g,""))||(k.iban="Format IBAN invalide"):k.iban="IBAN requis",(V=z.bankDetails)!=null&&V.accountName||(k.accountName="Nom du titulaire requis");break;case"paypal":z.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z.paypalEmail)||(k.paypalEmail="Format email invalide"):k.paypalEmail="Email PayPal requis";break;case"lydia":z.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(z.lydiaPhone.replace(/\s/g,""))||(k.lydiaPhone="Format de téléphone invalide"):k.lydiaPhone="Numéro de téléphone requis";break}return d(k),Object.keys(k).length===0},N=R=>{if(R==="card"){n(R,{});return}const z=o[R]||{};(R==="cash"||_(R,z))&&n(R,z)},b=(R,z,k)=>{l(I=>({...I,[R]:{...I[R],[z]:k}}))},x=(R,z)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:z||"EUR"}).format(R),S=R=>{m(R),n("card",{stripePaymentId:R})},C=R=>{console.error("Stripe payment error:",R)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),i.jsxs("p",{className:"text-muted-foreground",children:["Montant à payer : ",i.jsx("span",{className:"font-semibold text-primary",children:x(t,e)})]})]}),r==="card"?i.jsx(sde,{amount:t,currency:e,onPaymentSuccess:S,onPaymentError:C}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(R=>{var T,O,$,M,B,J,ee,K;const z=y(R.type),k=R.type==="card"?t*R.fees/100:a(t,R.type),I=t+k,V=r===R.type;return i.jsxs(pe,{className:`cursor-pointer transition-all hover:shadow-md ${V?"ring-2 ring-primary bg-primary/5":""} ${R.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>R.available&&N(R.type),children:[i.jsx(et,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(z,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{children:[i.jsx(nt,{className:"text-lg",children:R.name}),i.jsx(kt,{className:"text-sm",children:R.description})]})]}),V&&i.jsx(Ot,{className:"w-6 h-6 text-green-600"})]})}),i.jsxs(ge,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Jn,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:R.processingTime})]}),i.jsxs(lt,{className:j(R.securityLevel),children:[i.jsx(qt,{className:"w-3 h-3 mr-1"}),R.securityLevel==="high"?"Très sécurisé":R.securityLevel==="medium"?"Sécurisé":"Basique"]})]}),k>0&&i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Montant :"}),i.jsx("span",{children:x(t,e)})]}),i.jsxs("div",{className:"flex justify-between text-orange-600",children:[i.jsxs("span",{children:["Frais (",R.fees,"%) :"]}),i.jsx("span",{children:x(k,e)})]}),i.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[i.jsx("span",{children:"Total :"}),i.jsx("span",{children:x(I,e)})]})]}),V&&R.type!=="cash"&&R.type!=="card"&&i.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[R.type==="transfer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:`iban-${R.id}`,children:"IBAN *"}),i.jsx(Ze,{id:`iban-${R.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((O=(T=o[R.type])==null?void 0:T.bankDetails)==null?void 0:O.iban)||"",onChange:D=>{var G;return b(R.type,"bankDetails",{...(G=o[R.type])==null?void 0:G.bankDetails,iban:D.target.value})},className:u.iban?"border-red-500":""}),u.iban&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.iban})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:`account-name-${R.id}`,children:"Nom du titulaire *"}),i.jsx(Ze,{id:`account-name-${R.id}`,placeholder:"Jean Dupont",value:((M=($=o[R.type])==null?void 0:$.bankDetails)==null?void 0:M.accountName)||"",onChange:D=>{var G;return b(R.type,"bankDetails",{...(G=o[R.type])==null?void 0:G.bankDetails,accountName:D.target.value})},className:u.accountName?"border-red-500":""}),u.accountName&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.accountName})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:`bic-${R.id}`,children:"BIC (optionnel)"}),i.jsx(Ze,{id:`bic-${R.id}`,placeholder:"BNPAFRPP",value:((J=(B=o[R.type])==null?void 0:B.bankDetails)==null?void 0:J.bic)||"",onChange:D=>{var G;return b(R.type,"bankDetails",{...(G=o[R.type])==null?void 0:G.bankDetails,bic:D.target.value})}})]})]}),R.type==="paypal"&&i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:`paypal-email-${R.id}`,children:"Email PayPal *"}),i.jsx(Ze,{id:`paypal-email-${R.id}`,type:"email",placeholder:"votre.email@example.com",value:((ee=o[R.type])==null?void 0:ee.paypalEmail)||"",onChange:D=>b(R.type,"paypalEmail",D.target.value),className:u.paypalEmail?"border-red-500":""}),u.paypalEmail&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.paypalEmail})]}),R.type==="lydia"&&i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:`lydia-phone-${R.id}`,children:"Numéro de téléphone *"}),i.jsx(Ze,{id:`lydia-phone-${R.id}`,type:"tel",placeholder:"06 12 34 56 78",value:((K=o[R.type])==null?void 0:K.lydiaPhone)||"",onChange:D=>b(R.type,"lydiaPhone",D.target.value),className:u.lydiaPhone?"border-red-500":""}),u.lydiaPhone&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.lydiaPhone})]})]}),V&&R.type!=="card"&&i.jsxs(Kt,{className:"mt-3",children:[i.jsx(ac,{className:"h-4 w-4"}),i.jsxs(Zt,{children:[R.type==="cash"&&"Rencontrez-vous dans un lieu public et vérifiez l'objet avant de payer.",R.type==="transfer"&&"Le virement sera effectué après confirmation de la transaction. Délai : 1-2 jours ouvrés.",R.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bénéficier de la protection PayPal.",R.type==="lydia"&&"Le paiement Lydia est instantané. Vérifiez le numéro avant d'envoyer."]})]})]})]},R.id)})}),i.jsxs(Kt,{className:"border-yellow-200 bg-yellow-50",children:[i.jsx(Un,{className:"h-4 w-4 text-yellow-600"}),i.jsxs(Zt,{className:"text-yellow-800",children:[i.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux sécurisés de StudyMarket pour les transactions."]})]})]})};function ide(t,e){const n=w.useRef(e);w.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const ade=1;function ode(t){return Object.freeze({__version:ade,map:t})}function lde(t,e){return Object.freeze({...t,...e})}const U$=w.createContext(null),B$=U$.Provider;function W$(){const t=w.useContext(U$);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function cde(t){function e(n,r){const{instance:s,context:a}=t(n).current;return w.useImperativeHandle(r,()=>s),n.children==null?null:oe.createElement(B$,{value:a},n.children)}return w.forwardRef(e)}function ude(t){function e(n,r){const{instance:s}=t(n).current;return w.useImperativeHandle(r,()=>s),null}return w.forwardRef(e)}function dde(t,e){const n=w.useRef();w.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function H$(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Oj={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(sO,function(n){var r="1.9.4";function s(c){var f,v,E,A;for(v=1,E=arguments.length;v<E;v++){A=arguments[v];for(f in A)c[f]=A[f]}return c}var a=Object.create||function(){function c(){}return function(f){return c.prototype=f,new c}}();function o(c,f){var v=Array.prototype.slice;if(c.bind)return c.bind.apply(c,v.call(arguments,1));var E=v.call(arguments,2);return function(){return c.apply(f,E.length?E.concat(v.call(arguments)):arguments)}}var l=0;function u(c){return"_leaflet_id"in c||(c._leaflet_id=++l),c._leaflet_id}function d(c,f,v){var E,A,U,Q;return Q=function(){E=!1,A&&(U.apply(v,A),A=!1)},U=function(){E?A=arguments:(c.apply(v,arguments),setTimeout(Q,f),E=!0)},U}function h(c,f,v){var E=f[1],A=f[0],U=E-A;return c===E&&v?c:((c-A)%U+U)%U+A}function m(){return!1}function p(c,f){if(f===!1)return c;var v=Math.pow(10,f===void 0?6:f);return Math.round(c*v)/v}function y(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function j(c){return y(c).split(/\s+/)}function _(c,f){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?a(c.options):{});for(var v in f)c.options[v]=f[v];return c.options}function N(c,f,v){var E=[];for(var A in c)E.push(encodeURIComponent(v?A.toUpperCase():A)+"="+encodeURIComponent(c[A]));return(!f||f.indexOf("?")===-1?"?":"&")+E.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function x(c,f){return c.replace(b,function(v,E){var A=f[E];if(A===void 0)throw new Error("No value provided for variable "+v);return typeof A=="function"&&(A=A(f)),A})}var S=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function C(c,f){for(var v=0;v<c.length;v++)if(c[v]===f)return v;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var k=0;function I(c){var f=+new Date,v=Math.max(0,16-(f-k));return k=f+v,window.setTimeout(c,v)}var V=window.requestAnimationFrame||z("RequestAnimationFrame")||I,T=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function O(c,f,v){if(v&&V===I)c.call(f);else return V.call(window,o(c,f))}function $(c){c&&T.call(window,c)}var M={__proto__:null,extend:s,create:a,bind:o,get lastId(){return l},stamp:u,throttle:d,wrapNum:h,falseFn:m,formatNum:p,trim:y,splitWords:j,setOptions:_,getParamString:N,template:x,isArray:S,indexOf:C,emptyImageUrl:R,requestFn:V,cancelFn:T,requestAnimFrame:O,cancelAnimFrame:$};function B(){}B.extend=function(c){var f=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=f.__super__=this.prototype,E=a(v);E.constructor=f,f.prototype=E;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(f[A]=this[A]);return c.statics&&s(f,c.statics),c.includes&&(J(c.includes),s.apply(null,[E].concat(c.includes))),s(E,c),delete E.statics,delete E.includes,E.options&&(E.options=v.options?a(v.options):{},s(E.options,c.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var U=0,Q=E._initHooks.length;U<Q;U++)E._initHooks[U].call(this)}},f},B.include=function(c){var f=this.prototype.options;return s(this.prototype,c),c.options&&(this.prototype.options=f,this.mergeOptions(c.options)),this},B.mergeOptions=function(c){return s(this.prototype.options,c),this},B.addInitHook=function(c){var f=Array.prototype.slice.call(arguments,1),v=typeof c=="function"?c:function(){this[c].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function J(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=S(c)?c:[c];for(var f=0;f<c.length;f++)c[f]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(c,f,v){if(typeof c=="object")for(var E in c)this._on(E,c[E],f);else{c=j(c);for(var A=0,U=c.length;A<U;A++)this._on(c[A],f,v)}return this},off:function(c,f,v){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var E in c)this._off(E,c[E],f);else{c=j(c);for(var A=arguments.length===1,U=0,Q=c.length;U<Q;U++)A?this._off(c[U]):this._off(c[U],f,v)}return this},_on:function(c,f,v,E){if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}if(this._listens(c,f,v)===!1){v===this&&(v=void 0);var A={fn:f,ctx:v};E&&(A.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(A)}},_off:function(c,f,v){var E,A,U;if(this._events&&(E=this._events[c],!!E)){if(arguments.length===1){if(this._firingCount)for(A=0,U=E.length;A<U;A++)E[A].fn=m;delete this._events[c];return}if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}var Q=this._listens(c,f,v);if(Q!==!1){var ue=E[Q];this._firingCount&&(ue.fn=m,this._events[c]=E=E.slice()),E.splice(Q,1)}}},fire:function(c,f,v){if(!this.listens(c,v))return this;var E=s({},f,{type:c,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var A=this._events[c];if(A){this._firingCount=this._firingCount+1||1;for(var U=0,Q=A.length;U<Q;U++){var ue=A[U],he=ue.fn;ue.once&&this.off(c,he,ue.ctx),he.call(ue.ctx||this,E)}this._firingCount--}}return v&&this._propagateEvent(E),this},listens:function(c,f,v,E){typeof c!="string"&&console.warn('"string" type argument expected');var A=f;typeof f!="function"&&(E=!!f,A=void 0,v=void 0);var U=this._events&&this._events[c];if(U&&U.length&&this._listens(c,A,v)!==!1)return!0;if(E){for(var Q in this._eventParents)if(this._eventParents[Q].listens(c,f,v,E))return!0}return!1},_listens:function(c,f,v){if(!this._events)return!1;var E=this._events[c]||[];if(!f)return!!E.length;v===this&&(v=void 0);for(var A=0,U=E.length;A<U;A++)if(E[A].fn===f&&E[A].ctx===v)return A;return!1},once:function(c,f,v){if(typeof c=="object")for(var E in c)this._on(E,c[E],f,!0);else{c=j(c);for(var A=0,U=c.length;A<U;A++)this._on(c[A],f,v,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[u(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[u(c)],this},_propagateEvent:function(c){for(var f in this._eventParents)this._eventParents[f].fire(c.type,s({layer:c.target,propagatedFrom:c.target},c),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var K=B.extend(ee);function D(c,f,v){this.x=v?Math.round(c):c,this.y=v?Math.round(f):f}var G=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};D.prototype={clone:function(){return new D(this.x,this.y)},add:function(c){return this.clone()._add(q(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(q(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new D(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new D(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=G(this.x),this.y=G(this.y),this},distanceTo:function(c){c=q(c);var f=c.x-this.x,v=c.y-this.y;return Math.sqrt(f*f+v*v)},equals:function(c){return c=q(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=q(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function q(c,f,v){return c instanceof D?c:S(c)?new D(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new D(c.x,c.y):new D(c,f,v)}function X(c,f){if(c)for(var v=f?[c,f]:c,E=0,A=v.length;E<A;E++)this.extend(v[E])}X.prototype={extend:function(c){var f,v;if(!c)return this;if(c instanceof D||typeof c[0]=="number"||"x"in c)f=v=q(c);else if(c=fe(c),f=c.min,v=c.max,!f||!v)return this;return!this.min&&!this.max?(this.min=f.clone(),this.max=v.clone()):(this.min.x=Math.min(f.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(f.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(c){return q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return q(this.min.x,this.max.y)},getTopRight:function(){return q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var f,v;return typeof c[0]=="number"||c instanceof D?c=q(c):c=fe(c),c instanceof X?(f=c.min,v=c.max):f=v=c,f.x>=this.min.x&&v.x<=this.max.x&&f.y>=this.min.y&&v.y<=this.max.y},intersects:function(c){c=fe(c);var f=this.min,v=this.max,E=c.min,A=c.max,U=A.x>=f.x&&E.x<=v.x,Q=A.y>=f.y&&E.y<=v.y;return U&&Q},overlaps:function(c){c=fe(c);var f=this.min,v=this.max,E=c.min,A=c.max,U=A.x>f.x&&E.x<v.x,Q=A.y>f.y&&E.y<v.y;return U&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var f=this.min,v=this.max,E=Math.abs(f.x-v.x)*c,A=Math.abs(f.y-v.y)*c;return fe(q(f.x-E,f.y-A),q(v.x+E,v.y+A))},equals:function(c){return c?(c=fe(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function fe(c,f){return!c||c instanceof X?c:new X(c,f)}function Te(c,f){if(c)for(var v=f?[c,f]:c,E=0,A=v.length;E<A;E++)this.extend(v[E])}Te.prototype={extend:function(c){var f=this._southWest,v=this._northEast,E,A;if(c instanceof ze)E=c,A=c;else if(c instanceof Te){if(E=c._southWest,A=c._northEast,!E||!A)return this}else return c?this.extend(Le(c)||$e(c)):this;return!f&&!v?(this._southWest=new ze(E.lat,E.lng),this._northEast=new ze(A.lat,A.lng)):(f.lat=Math.min(E.lat,f.lat),f.lng=Math.min(E.lng,f.lng),v.lat=Math.max(A.lat,v.lat),v.lng=Math.max(A.lng,v.lng)),this},pad:function(c){var f=this._southWest,v=this._northEast,E=Math.abs(f.lat-v.lat)*c,A=Math.abs(f.lng-v.lng)*c;return new Te(new ze(f.lat-E,f.lng-A),new ze(v.lat+E,v.lng+A))},getCenter:function(){return new ze((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ze(this.getNorth(),this.getWest())},getSouthEast:function(){return new ze(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof ze||"lat"in c?c=Le(c):c=$e(c);var f=this._southWest,v=this._northEast,E,A;return c instanceof Te?(E=c.getSouthWest(),A=c.getNorthEast()):E=A=c,E.lat>=f.lat&&A.lat<=v.lat&&E.lng>=f.lng&&A.lng<=v.lng},intersects:function(c){c=$e(c);var f=this._southWest,v=this._northEast,E=c.getSouthWest(),A=c.getNorthEast(),U=A.lat>=f.lat&&E.lat<=v.lat,Q=A.lng>=f.lng&&E.lng<=v.lng;return U&&Q},overlaps:function(c){c=$e(c);var f=this._southWest,v=this._northEast,E=c.getSouthWest(),A=c.getNorthEast(),U=A.lat>f.lat&&E.lat<v.lat,Q=A.lng>f.lng&&E.lng<v.lng;return U&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,f){return c?(c=$e(c),this._southWest.equals(c.getSouthWest(),f)&&this._northEast.equals(c.getNorthEast(),f)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function $e(c,f){return c instanceof Te?c:new Te(c,f)}function ze(c,f,v){if(isNaN(c)||isNaN(f))throw new Error("Invalid LatLng object: ("+c+", "+f+")");this.lat=+c,this.lng=+f,v!==void 0&&(this.alt=+v)}ze.prototype={equals:function(c,f){if(!c)return!1;c=Le(c);var v=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return v<=(f===void 0?1e-9:f)},toString:function(c){return"LatLng("+p(this.lat,c)+", "+p(this.lng,c)+")"},distanceTo:function(c){return ne.distance(this,Le(c))},wrap:function(){return ne.wrapLatLng(this)},toBounds:function(c){var f=180*c/40075017,v=f/Math.cos(Math.PI/180*this.lat);return $e([this.lat-f,this.lng-v],[this.lat+f,this.lng+v])},clone:function(){return new ze(this.lat,this.lng,this.alt)}};function Le(c,f,v){return c instanceof ze?c:S(c)&&typeof c[0]!="object"?c.length===3?new ze(c[0],c[1],c[2]):c.length===2?new ze(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new ze(c.lat,"lng"in c?c.lng:c.lon,c.alt):f===void 0?null:new ze(c,f,v)}var Ce={latLngToPoint:function(c,f){var v=this.projection.project(c),E=this.scale(f);return this.transformation._transform(v,E)},pointToLatLng:function(c,f){var v=this.scale(f),E=this.transformation.untransform(c,v);return this.projection.unproject(E)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var f=this.projection.bounds,v=this.scale(c),E=this.transformation.transform(f.min,v),A=this.transformation.transform(f.max,v);return new X(E,A)},infinite:!1,wrapLatLng:function(c){var f=this.wrapLng?h(c.lng,this.wrapLng,!0):c.lng,v=this.wrapLat?h(c.lat,this.wrapLat,!0):c.lat,E=c.alt;return new ze(v,f,E)},wrapLatLngBounds:function(c){var f=c.getCenter(),v=this.wrapLatLng(f),E=f.lat-v.lat,A=f.lng-v.lng;if(E===0&&A===0)return c;var U=c.getSouthWest(),Q=c.getNorthEast(),ue=new ze(U.lat-E,U.lng-A),he=new ze(Q.lat-E,Q.lng-A);return new Te(ue,he)}},ne=s({},Ce,{wrapLng:[-180,180],R:6371e3,distance:function(c,f){var v=Math.PI/180,E=c.lat*v,A=f.lat*v,U=Math.sin((f.lat-c.lat)*v/2),Q=Math.sin((f.lng-c.lng)*v/2),ue=U*U+Math.cos(E)*Math.cos(A)*Q*Q,he=2*Math.atan2(Math.sqrt(ue),Math.sqrt(1-ue));return this.R*he}}),ie=6378137,ae={R:ie,MAX_LATITUDE:85.0511287798,project:function(c){var f=Math.PI/180,v=this.MAX_LATITUDE,E=Math.max(Math.min(v,c.lat),-v),A=Math.sin(E*f);return new D(this.R*c.lng*f,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(c){var f=180/Math.PI;return new ze((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*f,c.x*f/this.R)},bounds:function(){var c=ie*Math.PI;return new X([-c,-c],[c,c])}()};function Z(c,f,v,E){if(S(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=f,this._c=v,this._d=E}Z.prototype={transform:function(c,f){return this._transform(c.clone(),f)},_transform:function(c,f){return f=f||1,c.x=f*(this._a*c.x+this._b),c.y=f*(this._c*c.y+this._d),c},untransform:function(c,f){return f=f||1,new D((c.x/f-this._b)/this._a,(c.y/f-this._d)/this._c)}};function ce(c,f,v,E){return new Z(c,f,v,E)}var ve=s({},ne,{code:"EPSG:3857",projection:ae,transformation:function(){var c=.5/(Math.PI*ae.R);return ce(c,.5,-c,.5)}()}),ke=s({},ve,{code:"EPSG:900913"});function be(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function re(c,f){var v="",E,A,U,Q,ue,he;for(E=0,U=c.length;E<U;E++){for(ue=c[E],A=0,Q=ue.length;A<Q;A++)he=ue[A],v+=(A?"L":"M")+he.x+" "+he.y;v+=f?ot.svg?"z":"x":""}return v||"M0 0"}var _e=document.documentElement.style,Ee="ActiveXObject"in window,de=Ee&&!document.addEventListener,H="msLaunchUri"in navigator&&!("documentMode"in document),Y=oi("webkit"),se=oi("android"),je=oi("android 2")||oi("android 3"),ye=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),we=se&&oi("Google")&&ye<537&&!("AudioNode"in window),Ie=!!window.opera,Me=!H&&oi("chrome"),qe=oi("gecko")&&!Y&&!Ie&&!Ee,Tt=!Me&&oi("safari"),Lt=oi("phantom"),nn="OTransition"in _e,Cr=navigator.platform.indexOf("Win")===0,zr=Ee&&"transition"in _e,Ur="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!je,si="MozPerspective"in _e,to=!window.L_DISABLE_3D&&(zr||Ur||si)&&!nn&&!Lt,ii=typeof orientation<"u"||oi("mobile"),Ii=ii&&Y,Nc=ii&&Ur,Xo=!window.PointerEvent&&window.MSPointerEvent,Ai=!!(window.PointerEvent||Xo),no="ontouchstart"in window||!!window.TouchEvent,el=!window.L_NO_TOUCH&&(no||Ai),ai=ii&&Ie,ut=ii&&qe,Oi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,av=function(){var c=!1;try{var f=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",m,f),window.removeEventListener("testPassiveEventSupport",m,f)}catch{}return c}(),Sc=function(){return!!document.createElement("canvas").getContext}(),Ku=!!(document.createElementNS&&be("svg").createSVGRect),Tr=!!Ku&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ov=!Ku&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var f=c.firstChild;return f.style.behavior="url(#default#VML)",f&&typeof f.adj=="object"}catch{return!1}}(),Ec=navigator.platform.indexOf("Mac")===0,Pc=navigator.platform.indexOf("Linux")===0;function oi(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var ot={ie:Ee,ielt9:de,edge:H,webkit:Y,android:se,android23:je,androidStock:we,opera:Ie,chrome:Me,gecko:qe,safari:Tt,phantom:Lt,opera12:nn,win:Cr,ie3d:zr,webkit3d:Ur,gecko3d:si,any3d:to,mobile:ii,mobileWebkit:Ii,mobileWebkit3d:Nc,msPointer:Xo,pointer:Ai,touch:el,touchNative:no,mobileOpera:ai,mobileGecko:ut,retina:Oi,passiveEvents:av,canvas:Sc,svg:Ku,vml:ov,inlineSvg:Tr,mac:Ec,linux:Pc},ro=ot.msPointer?"MSPointerDown":"pointerdown",lv=ot.msPointer?"MSPointerMove":"pointermove",cv=ot.msPointer?"MSPointerUp":"pointerup",Cc=ot.msPointer?"MSPointerCancel":"pointercancel",Zu={touchstart:ro,touchmove:lv,touchend:cv,touchcancel:Cc},Qu={touchstart:Ju,touchmove:Yu,touchend:Yu,touchcancel:Yu},Mi={},Di=!1;function uv(c,f,v){return f==="touchstart"&&hv(),Qu[f]?(v=Qu[f].bind(this,v),c.addEventListener(Zu[f],v,!1),v):(console.warn("wrong event specified:",f),m)}function dv(c,f,v){if(!Zu[f]){console.warn("wrong event specified:",f);return}c.removeEventListener(Zu[f],v,!1)}function vf(c){Mi[c.pointerId]=c}function yf(c){Mi[c.pointerId]&&(Mi[c.pointerId]=c)}function xf(c){delete Mi[c.pointerId]}function hv(){Di||(document.addEventListener(ro,vf,!0),document.addEventListener(lv,yf,!0),document.addEventListener(cv,xf,!0),document.addEventListener(Cc,xf,!0),Di=!0)}function Yu(c,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){f.touches=[];for(var v in Mi)f.touches.push(Mi[v]);f.changedTouches=[f],c(f)}}function Ju(c,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&kn(f),Yu(c,f)}function fv(c){var f={},v,E;for(E in c)v=c[E],f[E]=v&&v.bind?v.bind(c):v;return c=f,f.type="dblclick",f.detail=2,f.isTrusted=!1,f._simulated=!0,f}var wf=200;function Tc(c,f){c.addEventListener("dblclick",f);var v=0,E;function A(U){if(U.detail!==1){E=U.detail;return}if(!(U.pointerType==="mouse"||U.sourceCapabilities&&!U.sourceCapabilities.firesTouchEvents)){var Q=If(U);if(!(Q.some(function(he){return he instanceof HTMLLabelElement&&he.attributes.for})&&!Q.some(function(he){return he instanceof HTMLInputElement||he instanceof HTMLSelectElement}))){var ue=Date.now();ue-v<=wf?(E++,E===2&&f(fv(U))):E=1,v=ue}}}return c.addEventListener("click",A),{dblclick:f,simDblclick:A}}function so(c,f){c.removeEventListener("dblclick",f.dblclick),c.removeEventListener("click",f.simDblclick)}var Rc=ao(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),kc=ao(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),bf=kc==="webkitTransition"||kc==="OTransition"?kc+"End":"transitionend";function _f(c){return typeof c=="string"?document.getElementById(c):c}function tl(c,f){var v=c.style[f]||c.currentStyle&&c.currentStyle[f];if((!v||v==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(c,null);v=E?E[f]:null}return v==="auto"?null:v}function At(c,f,v){var E=document.createElement(c);return E.className=f||"",v&&v.appendChild(E),E}function cn(c){var f=c.parentNode;f&&f.removeChild(c)}function Ic(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function io(c){var f=c.parentNode;f&&f.lastChild!==c&&f.appendChild(c)}function nl(c){var f=c.parentNode;f&&f.firstChild!==c&&f.insertBefore(c,f.firstChild)}function jf(c,f){if(c.classList!==void 0)return c.classList.contains(f);var v=li(c);return v.length>0&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(v)}function St(c,f){if(c.classList!==void 0)for(var v=j(f),E=0,A=v.length;E<A;E++)c.classList.add(v[E]);else if(!jf(c,f)){var U=li(c);Nf(c,(U?U+" ":"")+f)}}function Nn(c,f){c.classList!==void 0?c.classList.remove(f):Nf(c,y((" "+li(c)+" ").replace(" "+f+" "," ")))}function Nf(c,f){c.className.baseVal===void 0?c.className=f:c.className.baseVal=f}function li(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function Fn(c,f){"opacity"in c.style?c.style.opacity=f:"filter"in c.style&&Xu(c,f)}function Xu(c,f){var v=!1,E="DXImageTransform.Microsoft.Alpha";try{v=c.filters.item(E)}catch{if(f===1)return}f=Math.round(f*100),v?(v.Enabled=f!==100,v.Opacity=f):c.style.filter+=" progid:"+E+"(opacity="+f+")"}function ao(c){for(var f=document.documentElement.style,v=0;v<c.length;v++)if(c[v]in f)return c[v];return!1}function fa(c,f,v){var E=f||new D(0,0);c.style[Rc]=(ot.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(v?" scale("+v+")":"")}function gt(c,f){c._leaflet_pos=f,ot.any3d?fa(c,f):(c.style.left=f.x+"px",c.style.top=f.y+"px")}function ci(c){return c._leaflet_pos||new D(0,0)}var Li,Fi,Sf;if("onselectstart"in document)Li=function(){ht(window,"selectstart",kn)},Fi=function(){rn(window,"selectstart",kn)};else{var rl=ao(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Li=function(){if(rl){var c=document.documentElement.style;Sf=c[rl],c[rl]="none"}},Fi=function(){rl&&(document.documentElement.style[rl]=Sf,Sf=void 0)}}function Ef(){ht(window,"dragstart",kn)}function Pf(){rn(window,"dragstart",kn)}var ed,Cf;function oo(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(Ls(),ed=c,Cf=c.style.outlineStyle,c.style.outlineStyle="none",ht(window,"keydown",Ls))}function Ls(){ed&&(ed.style.outlineStyle=Cf,ed=void 0,Cf=void 0,rn(window,"keydown",Ls))}function Tf(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function td(c){var f=c.getBoundingClientRect();return{x:f.width/c.offsetWidth||1,y:f.height/c.offsetHeight||1,boundingClientRect:f}}var mv={__proto__:null,TRANSFORM:Rc,TRANSITION:kc,TRANSITION_END:bf,get:_f,getStyle:tl,create:At,remove:cn,empty:Ic,toFront:io,toBack:nl,hasClass:jf,addClass:St,removeClass:Nn,setClass:Nf,getClass:li,setOpacity:Fn,testProp:ao,setTransform:fa,setPosition:gt,getPosition:ci,get disableTextSelection(){return Li},get enableTextSelection(){return Fi},disableImageDrag:Ef,enableImageDrag:Pf,preventOutline:oo,restoreOutline:Ls,getSizedParentNode:Tf,getScale:td};function ht(c,f,v,E){if(f&&typeof f=="object")for(var A in f)Rf(c,A,f[A],v);else{f=j(f);for(var U=0,Q=f.length;U<Q;U++)Rf(c,f[U],v,E)}return this}var ui="_leaflet_events";function rn(c,f,v,E){if(arguments.length===1)pv(c),delete c[ui];else if(f&&typeof f=="object")for(var A in f)kf(c,A,f[A],v);else if(f=j(f),arguments.length===2)pv(c,function(ue){return C(f,ue)!==-1});else for(var U=0,Q=f.length;U<Q;U++)kf(c,f[U],v,E);return this}function pv(c,f){for(var v in c[ui]){var E=v.split(/\d/)[0];(!f||f(E))&&kf(c,E,null,null,v)}}var di={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Rf(c,f,v,E){var A=f+u(v)+(E?"_"+u(E):"");if(c[ui]&&c[ui][A])return this;var U=function(ue){return v.call(E||c,ue||window.event)},Q=U;!ot.touchNative&&ot.pointer&&f.indexOf("touch")===0?U=uv(c,f,U):ot.touch&&f==="dblclick"?U=Tc(c,U):"addEventListener"in c?f==="touchstart"||f==="touchmove"||f==="wheel"||f==="mousewheel"?c.addEventListener(di[f]||f,U,ot.passiveEvents?{passive:!1}:!1):f==="mouseenter"||f==="mouseleave"?(U=function(ue){ue=ue||window.event,Af(c,ue)&&Q(ue)},c.addEventListener(di[f],U,!1)):c.addEventListener(f,Q,!1):c.attachEvent("on"+f,U),c[ui]=c[ui]||{},c[ui][A]=U}function kf(c,f,v,E,A){A=A||f+u(v)+(E?"_"+u(E):"");var U=c[ui]&&c[ui][A];if(!U)return this;!ot.touchNative&&ot.pointer&&f.indexOf("touch")===0?dv(c,f,U):ot.touch&&f==="dblclick"?so(c,U):"removeEventListener"in c?c.removeEventListener(di[f]||f,U,!1):c.detachEvent("on"+f,U),c[ui][A]=null}function hi(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function sl(c){return Rf(c,"wheel",hi),this}function il(c){return ht(c,"mousedown touchstart dblclick contextmenu",hi),c._leaflet_disable_click=!0,this}function kn(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function Fs(c){return kn(c),hi(c),this}function If(c){if(c.composedPath)return c.composedPath();for(var f=[],v=c.target;v;)f.push(v),v=v.parentNode;return f}function nd(c,f){if(!f)return new D(c.clientX,c.clientY);var v=td(f),E=v.boundingClientRect;return new D((c.clientX-E.left)/v.x-f.clientLeft,(c.clientY-E.top)/v.y-f.clientTop)}var Sn=ot.linux&&ot.chrome?window.devicePixelRatio:ot.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function gv(c){return ot.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/Sn:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function Af(c,f){var v=f.relatedTarget;if(!v)return!0;try{for(;v&&v!==c;)v=v.parentNode}catch{return!1}return v!==c}var vv={__proto__:null,on:ht,off:rn,stopPropagation:hi,disableScrollPropagation:sl,disableClickPropagation:il,preventDefault:kn,stop:Fs,getPropagationPath:If,getMousePosition:nd,getWheelDelta:gv,isExternalTarget:Af,addListener:ht,removeListener:rn},Of=K.extend({run:function(c,f,v,E){this.stop(),this._el=c,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=ci(c),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(c){var f=+new Date-this._startTime,v=this._duration*1e3;f<v?this._runFrame(this._easeOut(f/v),c):(this._runFrame(1),this._complete())},_runFrame:function(c,f){var v=this._startPos.add(this._offset.multiplyBy(c));f&&v._round(),gt(this._el,v),this.fire("step")},_complete:function(){$(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Rt=K.extend({options:{crs:ve,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,f){f=_(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),f.zoom!==void 0&&(this._zoom=this._limitZoom(f.zoom)),f.center&&f.zoom!==void 0&&this.setView(Le(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=kc&&ot.any3d&&!ot.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ht(this._proxy,bf,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,f,v){if(f=f===void 0?this._zoom:this._limitZoom(f),c=this._limitCenter(Le(c),f,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=s({animate:v.animate},v.zoom),v.pan=s({animate:v.animate,duration:v.duration},v.pan));var E=this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,f,v.zoom):this._tryAnimatedPan(c,v.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(c,f,v.pan&&v.pan.noMoveStart),this},setZoom:function(c,f){return this._loaded?this.setView(this.getCenter(),c,{zoom:f}):(this._zoom=c,this)},zoomIn:function(c,f){return c=c||(ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,f)},zoomOut:function(c,f){return c=c||(ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,f)},setZoomAround:function(c,f,v){var E=this.getZoomScale(f),A=this.getSize().divideBy(2),U=c instanceof D?c:this.latLngToContainerPoint(c),Q=U.subtract(A).multiplyBy(1-1/E),ue=this.containerPointToLatLng(A.add(Q));return this.setView(ue,f,{zoom:v})},_getBoundsCenterZoom:function(c,f){f=f||{},c=c.getBounds?c.getBounds():$e(c);var v=q(f.paddingTopLeft||f.padding||[0,0]),E=q(f.paddingBottomRight||f.padding||[0,0]),A=this.getBoundsZoom(c,!1,v.add(E));if(A=typeof f.maxZoom=="number"?Math.min(f.maxZoom,A):A,A===1/0)return{center:c.getCenter(),zoom:A};var U=E.subtract(v).divideBy(2),Q=this.project(c.getSouthWest(),A),ue=this.project(c.getNorthEast(),A),he=this.unproject(Q.add(ue).divideBy(2).add(U),A);return{center:he,zoom:A}},fitBounds:function(c,f){if(c=$e(c),!c.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(c,f);return this.setView(v.center,v.zoom,f)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,f){return this.setView(c,this._zoom,{pan:f})},panBy:function(c,f){if(c=q(c).round(),f=f||{},!c.x&&!c.y)return this.fire("moveend");if(f.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Of,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),f.animate!==!1){St(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,v,f.duration||.25,f.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,f,v){if(v=v||{},v.animate===!1||!ot.any3d)return this.setView(c,f,v);this._stop();var E=this.project(this.getCenter()),A=this.project(c),U=this.getSize(),Q=this._zoom;c=Le(c),f=f===void 0?Q:f;var ue=Math.max(U.x,U.y),he=ue*this.getZoomScale(Q,f),Pe=A.distanceTo(E)||1,Ge=1.42,ft=Ge*Ge;function Pt(nr){var Av=nr?-1:1,Nz=nr?he:ue,Sz=he*he-ue*ue+Av*ft*ft*Pe*Pe,Ez=2*Nz*ft*Pe,db=Sz/Ez,KP=Math.sqrt(db*db+1)-db,Pz=KP<1e-9?-18:Math.log(KP);return Pz}function os(nr){return(Math.exp(nr)-Math.exp(-nr))/2}function br(nr){return(Math.exp(nr)+Math.exp(-nr))/2}function mi(nr){return os(nr)/br(nr)}var bs=Pt(0);function pd(nr){return ue*(br(bs)/br(bs+Ge*nr))}function wz(nr){return ue*(br(bs)*mi(bs+Ge*nr)-os(bs))/ft}function bz(nr){return 1-Math.pow(1-nr,1.5)}var _z=Date.now(),qP=(Pt(1)-bs)/Ge,jz=v.duration?1e3*v.duration:1e3*qP*.8;function GP(){var nr=(Date.now()-_z)/jz,Av=bz(nr)*qP;nr<=1?(this._flyToFrame=O(GP,this),this._move(this.unproject(E.add(A.subtract(E).multiplyBy(wz(Av)/Pe)),Q),this.getScaleZoom(ue/pd(Av),Q),{flyTo:!0})):this._move(c,f)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),GP.call(this),this},flyToBounds:function(c,f){var v=this._getBoundsCenterZoom(c,f);return this.flyTo(v.center,v.zoom,f)},setMaxBounds:function(c){return c=$e(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var f=this.options.minZoom;return this.options.minZoom=c,this._loaded&&f!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var f=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&f!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,f){this._enforcingBounds=!0;var v=this.getCenter(),E=this._limitCenter(v,this._zoom,$e(c));return v.equals(E)||this.panTo(E,f),this._enforcingBounds=!1,this},panInside:function(c,f){f=f||{};var v=q(f.paddingTopLeft||f.padding||[0,0]),E=q(f.paddingBottomRight||f.padding||[0,0]),A=this.project(this.getCenter()),U=this.project(c),Q=this.getPixelBounds(),ue=fe([Q.min.add(v),Q.max.subtract(E)]),he=ue.getSize();if(!ue.contains(U)){this._enforcingBounds=!0;var Pe=U.subtract(ue.getCenter()),Ge=ue.extend(U).getSize().subtract(he);A.x+=Pe.x<0?-Ge.x:Ge.x,A.y+=Pe.y<0?-Ge.y:Ge.y,this.panTo(this.unproject(A),f),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=s({animate:!1,pan:!0},c===!0?{animate:!0}:c);var f=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),E=f.divideBy(2).round(),A=v.divideBy(2).round(),U=E.subtract(A);return!U.x&&!U.y?this:(c.animate&&c.pan?this.panBy(U):(c.pan&&this._rawPanBy(U),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=s({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var f=o(this._handleGeolocationResponse,this),v=o(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,v,c):navigator.geolocation.getCurrentPosition(f,v,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var f=c.code,v=c.message||(f===1?"permission denied":f===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var f=c.coords.latitude,v=c.coords.longitude,E=new ze(f,v),A=E.toBounds(c.coords.accuracy*2),U=this._locateOptions;if(U.setView){var Q=this.getBoundsZoom(A);this.setView(E,U.maxZoom?Math.min(Q,U.maxZoom):Q)}var ue={latlng:E,bounds:A,timestamp:c.timestamp};for(var he in c.coords)typeof c.coords[he]=="number"&&(ue[he]=c.coords[he]);this.fire("locationfound",ue)}},addHandler:function(c,f){if(!f)return this;var v=this[c]=new f(this);return this._handlers.push(v),this.options[c]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),cn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)cn(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,f){var v="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),E=At("div",v,f||this._mapPane);return c&&(this._panes[c]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),f=this.unproject(c.getBottomLeft()),v=this.unproject(c.getTopRight());return new Te(f,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,f,v){c=$e(c),v=q(v||[0,0]);var E=this.getZoom()||0,A=this.getMinZoom(),U=this.getMaxZoom(),Q=c.getNorthWest(),ue=c.getSouthEast(),he=this.getSize().subtract(v),Pe=fe(this.project(ue,E),this.project(Q,E)).getSize(),Ge=ot.any3d?this.options.zoomSnap:1,ft=he.x/Pe.x,Pt=he.y/Pe.y,os=f?Math.max(ft,Pt):Math.min(ft,Pt);return E=this.getScaleZoom(os,E),Ge&&(E=Math.round(E/(Ge/100))*(Ge/100),E=f?Math.ceil(E/Ge)*Ge:Math.floor(E/Ge)*Ge),Math.max(A,Math.min(U,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,f){var v=this._getTopLeftPoint(c,f);return new X(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,f){var v=this.options.crs;return f=f===void 0?this._zoom:f,v.scale(c)/v.scale(f)},getScaleZoom:function(c,f){var v=this.options.crs;f=f===void 0?this._zoom:f;var E=v.zoom(c*v.scale(f));return isNaN(E)?1/0:E},project:function(c,f){return f=f===void 0?this._zoom:f,this.options.crs.latLngToPoint(Le(c),f)},unproject:function(c,f){return f=f===void 0?this._zoom:f,this.options.crs.pointToLatLng(q(c),f)},layerPointToLatLng:function(c){var f=q(c).add(this.getPixelOrigin());return this.unproject(f)},latLngToLayerPoint:function(c){var f=this.project(Le(c))._round();return f._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(Le(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds($e(c))},distance:function(c,f){return this.options.crs.distance(Le(c),Le(f))},containerPointToLayerPoint:function(c){return q(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return q(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var f=this.containerPointToLayerPoint(q(c));return this.layerPointToLatLng(f)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Le(c)))},mouseEventToContainerPoint:function(c){return nd(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var f=this._container=_f(c);if(f){if(f._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ht(f,"scroll",this._onScroll,this),this._containerId=u(f)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&ot.any3d,St(c,"leaflet-container"+(ot.touch?" leaflet-touch":"")+(ot.retina?" leaflet-retina":"")+(ot.ielt9?" leaflet-oldie":"")+(ot.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var f=tl(c,"position");f!=="absolute"&&f!=="relative"&&f!=="fixed"&&f!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),gt(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(St(c.markerPane,"leaflet-zoom-hide"),St(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,f,v){gt(this._mapPane,new D(0,0));var E=!this._loaded;this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset");var A=this._zoom!==f;this._moveStart(A,v)._move(c,f)._moveEnd(A),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(c,f){return c&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(c,f,v,E){f===void 0&&(f=this._zoom);var A=this._zoom!==f;return this._zoom=f,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),E?v&&v.pinch&&this.fire("zoom",v):((A||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){gt(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[u(this._container)]=this;var f=c?rn:ht;f(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),ot.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,f){for(var v=[],E,A=f==="mouseout"||f==="mouseover",U=c.target||c.srcElement,Q=!1;U;){if(E=this._targets[u(U)],E&&(f==="click"||f==="preclick")&&this._draggableMoved(E)){Q=!0;break}if(E&&E.listens(f,!0)&&(A&&!Af(U,c)||(v.push(E),A))||U===this._container)break;U=U.parentNode}return!v.length&&!Q&&!A&&this.listens(f,!0)&&(v=[this]),v},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var f=c.target||c.srcElement;if(!(!this._loaded||f._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(f))){var v=c.type;v==="mousedown"&&oo(f),this._fireDOMEvent(c,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,f,v){if(c.type==="click"){var E=s({},c);E.type="preclick",this._fireDOMEvent(E,E.type,v)}var A=this._findEventTargets(c,f);if(v){for(var U=[],Q=0;Q<v.length;Q++)v[Q].listens(f,!0)&&U.push(v[Q]);A=U.concat(A)}if(A.length){f==="contextmenu"&&kn(c);var ue=A[0],he={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var Pe=ue.getLatLng&&(!ue._radius||ue._radius<=10);he.containerPoint=Pe?this.latLngToContainerPoint(ue.getLatLng()):this.mouseEventToContainerPoint(c),he.layerPoint=this.containerPointToLayerPoint(he.containerPoint),he.latlng=Pe?ue.getLatLng():this.layerPointToLatLng(he.layerPoint)}for(Q=0;Q<A.length;Q++)if(A[Q].fire(f,he,!0),he.originalEvent._stopped||A[Q].options.bubblingMouseEvents===!1&&C(this._mouseEvents,f)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,f=this._handlers.length;c<f;c++)this._handlers[c].disable()},whenReady:function(c,f){return this._loaded?c.call(f||this,{target:this}):this.on("load",c,f),this},_getMapPanePos:function(){return ci(this._mapPane)||new D(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,f){var v=c&&f!==void 0?this._getNewPixelOrigin(c,f):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,f){var v=this.getSize()._divideBy(2);return this.project(c,f)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,f,v){var E=this._getNewPixelOrigin(v,f);return this.project(c,f)._subtract(E)},_latLngBoundsToNewLayerBounds:function(c,f,v){var E=this._getNewPixelOrigin(v,f);return fe([this.project(c.getSouthWest(),f)._subtract(E),this.project(c.getNorthWest(),f)._subtract(E),this.project(c.getSouthEast(),f)._subtract(E),this.project(c.getNorthEast(),f)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,f,v){if(!v)return c;var E=this.project(c,f),A=this.getSize().divideBy(2),U=new X(E.subtract(A),E.add(A)),Q=this._getBoundsOffset(U,v,f);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?c:this.unproject(E.add(Q),f)},_limitOffset:function(c,f){if(!f)return c;var v=this.getPixelBounds(),E=new X(v.min.add(c),v.max.add(c));return c.add(this._getBoundsOffset(E,f))},_getBoundsOffset:function(c,f,v){var E=fe(this.project(f.getNorthEast(),v),this.project(f.getSouthWest(),v)),A=E.min.subtract(c.min),U=E.max.subtract(c.max),Q=this._rebound(A.x,-U.x),ue=this._rebound(A.y,-U.y);return new D(Q,ue)},_rebound:function(c,f){return c+f>0?Math.round(c-f)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(f))},_limitZoom:function(c){var f=this.getMinZoom(),v=this.getMaxZoom(),E=ot.any3d?this.options.zoomSnap:1;return E&&(c=Math.round(c/E)*E),Math.max(f,Math.min(v,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Nn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,f){var v=this._getCenterOffset(c)._trunc();return(f&&f.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,f),!0)},_createAnimProxy:function(){var c=this._proxy=At("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(f){var v=Rc,E=this._proxy.style[v];fa(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),E===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){cn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),f=this.getZoom();fa(this._proxy,this.project(c,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,f,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(f),A=this._getCenterOffset(c)._divideBy(1-1/E);return v.animate!==!0&&!this.getSize().contains(A)?!1:(O(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(c,f,!0)},this),!0)},_animateZoom:function(c,f,v,E){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=f,St(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:f,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Nn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rd(c,f){return new Rt(c,f)}var ws=B.extend({options:{position:"topright"},initialize:function(c){_(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var f=this._map;return f&&f.removeControl(this),this.options.position=c,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var f=this._container=this.onAdd(c),v=this.getPosition(),E=c._controlCorners[v];return St(f,"leaflet-control"),v.indexOf("bottom")!==-1?E.insertBefore(f,E.firstChild):E.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(cn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),as=function(c){return new ws(c)};Rt.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},f="leaflet-",v=this._controlContainer=At("div",f+"control-container",this._container);function E(A,U){var Q=f+A+" "+f+U;c[A+U]=At("div",Q,v)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)cn(this._controlCorners[c]);cn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Mf=ws.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,f,v,E){return v<E?-1:E<v?1:0}},initialize:function(c,f,v){_(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in c)this._addLayer(c[E],E);for(E in f)this._addLayer(f[E],E,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return ws.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,f){return this._addLayer(c,f),this._map?this._update():this},addOverlay:function(c,f){return this._addLayer(c,f,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var f=this._getLayer(u(c));return f&&this._layers.splice(this._layers.indexOf(f),1),this._map?this._update():this},expand:function(){St(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(St(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):Nn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Nn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",f=this._container=At("div",c),v=this.options.collapsed;f.setAttribute("aria-haspopup",!0),il(f),sl(f);var E=this._section=At("section",c+"-list");v&&(this._map.on("click",this.collapse,this),ht(f,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=At("a",c+"-toggle",f);A.href="#",A.title="Layers",A.setAttribute("role","button"),ht(A,{keydown:function(U){U.keyCode===13&&this._expandSafely()},click:function(U){kn(U),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=At("div",c+"-base",E),this._separator=At("div",c+"-separator",E),this._overlaysList=At("div",c+"-overlays",E),f.appendChild(E)},_getLayer:function(c){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&u(this._layers[f].layer)===c)return this._layers[f]},_addLayer:function(c,f,v){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:f,overlay:v}),this.options.sortLayers&&this._layers.sort(o(function(E,A){return this.options.sortFunction(E.layer,A.layer,E.name,A.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ic(this._baseLayersList),Ic(this._overlaysList),this._layerControlInputs=[];var c,f,v,E,A=0;for(v=0;v<this._layers.length;v++)E=this._layers[v],this._addItem(E),f=f||E.overlay,c=c||!E.overlay,A+=E.overlay?0:1;return this.options.hideSingleBase&&(c=c&&A>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=f&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var f=this._getLayer(u(c.target)),v=f.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;v&&this._map.fire(v,f)},_createRadioElement:function(c,f){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(f?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=v,E.firstChild},_addItem:function(c){var f=document.createElement("label"),v=this._map.hasLayer(c.layer),E;c.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=v):E=this._createRadioElement("leaflet-base-layers_"+u(this),v),this._layerControlInputs.push(E),E.layerId=u(c.layer),ht(E,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+c.name;var U=document.createElement("span");f.appendChild(U),U.appendChild(E),U.appendChild(A);var Q=c.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,f,v,E=[],A=[];this._handlingClick=!0;for(var U=c.length-1;U>=0;U--)f=c[U],v=this._getLayer(f.layerId).layer,f.checked?E.push(v):f.checked||A.push(v);for(U=0;U<A.length;U++)this._map.hasLayer(A[U])&&this._map.removeLayer(A[U]);for(U=0;U<E.length;U++)this._map.hasLayer(E[U])||this._map.addLayer(E[U]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,f,v,E=this._map.getZoom(),A=c.length-1;A>=0;A--)f=c[A],v=this._getLayer(f.layerId).layer,f.disabled=v.options.minZoom!==void 0&&E<v.options.minZoom||v.options.maxZoom!==void 0&&E>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,ht(c,"click",kn),this.expand();var f=this;setTimeout(function(){rn(c,"click",kn),f._preventClick=!1})}}),ib=function(c,f,v){return new Mf(c,f,v)},lo=ws.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var f="leaflet-control-zoom",v=At("div",f+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,f+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,f+"-out",v,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,f,v,E,A){var U=At("a",v,E);return U.innerHTML=c,U.href="#",U.title=f,U.setAttribute("role","button"),U.setAttribute("aria-label",f),il(U),ht(U,"click",Fs),ht(U,"click",A,this),ht(U,"click",this._refocusOnMap,this),U},_updateDisabled:function(){var c=this._map,f="leaflet-disabled";Nn(this._zoomInButton,f),Nn(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(St(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(St(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}});Rt.mergeOptions({zoomControl:!0}),Rt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new lo,this.addControl(this.zoomControl))});var yv=function(c){return new lo(c)},sd=ws.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var f="leaflet-control-scale",v=At("div",f),E=this.options;return this._addScales(E,f+"-line",v),c.on(E.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),v},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,f,v){c.metric&&(this._mScale=At("div",f,v)),c.imperial&&(this._iScale=At("div",f,v))},_update:function(){var c=this._map,f=c.getSize().y/2,v=c.distance(c.containerPointToLatLng([0,f]),c.containerPointToLatLng([this.options.maxWidth,f]));this._updateScales(v)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var f=this._getRoundNum(c),v=f<1e3?f+" m":f/1e3+" km";this._updateScale(this._mScale,v,f/c)},_updateImperial:function(c){var f=c*3.2808399,v,E,A;f>5280?(v=f/5280,E=this._getRoundNum(v),this._updateScale(this._iScale,E+" mi",E/v)):(A=this._getRoundNum(f),this._updateScale(this._iScale,A+" ft",A/f))},_updateScale:function(c,f,v){c.style.width=Math.round(this.options.maxWidth*v)+"px",c.innerHTML=f},_getRoundNum:function(c){var f=Math.pow(10,(Math.floor(c)+"").length-1),v=c/f;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,f*v}}),id=function(c){return new sd(c)},xv='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',al=ws.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ot.inlineSvg?xv+" ":"")+"Leaflet</a>"},initialize:function(c){_(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=At("div","leaflet-control-attribution"),il(this._container);for(var f in c._layers)c._layers[f].getAttribution&&this.addAttribution(c._layers[f].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var f in this._attributions)this._attributions[f]&&c.push(f);var v=[];this.options.prefix&&v.push(this.options.prefix),c.length&&v.push(c.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});Rt.mergeOptions({attributionControl:!0}),Rt.addInitHook(function(){this.options.attributionControl&&new al().addTo(this)});var ab=function(c){return new al(c)};ws.Layers=Mf,ws.Zoom=lo,ws.Scale=sd,ws.Attribution=al,as.layers=ib,as.zoom=yv,as.scale=id,as.attribution=ab;var $s=B.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});$s.addTo=function(c,f){return c.addHandler(f,this),this};var Ac={Events:ee},Df=ot.touch?"touchstart mousedown":"mousedown",$i=K.extend({options:{clickTolerance:3},initialize:function(c,f,v,E){_(this,E),this._element=c,this._dragStartTarget=f||c,this._preventOutline=v},enable:function(){this._enabled||(ht(this._dragStartTarget,Df,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&($i._dragging===this&&this.finishDrag(!0),rn(this._dragStartTarget,Df,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!jf(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){$i._dragging===this&&this.finishDrag();return}if(!($i._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&($i._dragging=this,this._preventOutline&&oo(this._element),Ef(),Li(),!this._moving)){this.fire("down");var f=c.touches?c.touches[0]:c,v=Tf(this._element);this._startPoint=new D(f.clientX,f.clientY),this._startPos=ci(this._element),this._parentScale=td(v);var E=c.type==="mousedown";ht(document,E?"mousemove":"touchmove",this._onMove,this),ht(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var f=c.touches&&c.touches.length===1?c.touches[0]:c,v=new D(f.clientX,f.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,kn(c),this._moved||(this.fire("dragstart"),this._moved=!0,St(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),St(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),gt(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){Nn(document.body,"leaflet-dragging"),this._lastTarget&&(Nn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),rn(document,"mousemove touchmove",this._onMove,this),rn(document,"mouseup touchend touchcancel",this._onUp,this),Pf(),Fi();var f=this._moved&&this._moving;this._moving=!1,$i._dragging=!1,f&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function ad(c,f,v){var E,A=[1,4,2,8],U,Q,ue,he,Pe,Ge,ft,Pt;for(U=0,Ge=c.length;U<Ge;U++)c[U]._code=ma(c[U],f);for(ue=0;ue<4;ue++){for(ft=A[ue],E=[],U=0,Ge=c.length,Q=Ge-1;U<Ge;Q=U++)he=c[U],Pe=c[Q],he._code&ft?Pe._code&ft||(Pt=wr(Pe,he,ft,f,v),Pt._code=ma(Pt,f),E.push(Pt)):(Pe._code&ft&&(Pt=wr(Pe,he,ft,f,v),Pt._code=ma(Pt,f),E.push(Pt)),E.push(he));c=E}return c}function od(c,f){var v,E,A,U,Q,ue,he,Pe,Ge;if(!c||c.length===0)throw new Error("latlngs not passed");g(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var ft=Le([0,0]),Pt=$e(c),os=Pt.getNorthWest().distanceTo(Pt.getSouthWest())*Pt.getNorthEast().distanceTo(Pt.getNorthWest());os<1700&&(ft=ld(c));var br=c.length,mi=[];for(v=0;v<br;v++){var bs=Le(c[v]);mi.push(f.project(Le([bs.lat-ft.lat,bs.lng-ft.lng])))}for(ue=he=Pe=0,v=0,E=br-1;v<br;E=v++)A=mi[v],U=mi[E],Q=A.y*U.x-U.y*A.x,he+=(A.x+U.x)*Q,Pe+=(A.y+U.y)*Q,ue+=Q*3;ue===0?Ge=mi[0]:Ge=[he/ue,Pe/ue];var pd=f.unproject(q(Ge));return Le([pd.lat+ft.lat,pd.lng+ft.lng])}function ld(c){for(var f=0,v=0,E=0,A=0;A<c.length;A++){var U=Le(c[A]);f+=U.lat,v+=U.lng,E++}return Le([f/E,v/E])}var cd={__proto__:null,clipPolygon:ad,polygonCenter:od,centroid:ld};function Lf(c,f){if(!f||!c.length)return c.slice();var v=f*f;return c=bv(c,v),c=wv(c,v),c}function Ff(c,f,v){return Math.sqrt(fi(c,f,v,!0))}function co(c,f,v){return fi(c,f,v)}function wv(c,f){var v=c.length,E=typeof Uint8Array<"u"?Uint8Array:Array,A=new E(v);A[0]=A[v-1]=1,ud(c,A,f,0,v-1);var U,Q=[];for(U=0;U<v;U++)A[U]&&Q.push(c[U]);return Q}function ud(c,f,v,E,A){var U=0,Q,ue,he;for(ue=E+1;ue<=A-1;ue++)he=fi(c[ue],c[E],c[A],!0),he>U&&(Q=ue,U=he);U>v&&(f[Q]=1,ud(c,f,v,E,Q),ud(c,f,v,Q,A))}function bv(c,f){for(var v=[c[0]],E=1,A=0,U=c.length;E<U;E++)_v(c[E],c[A])>f&&(v.push(c[E]),A=E);return A<U-1&&v.push(c[U-1]),v}var $f;function Oc(c,f,v,E,A){var U=E?$f:ma(c,v),Q=ma(f,v),ue,he,Pe;for($f=Q;;){if(!(U|Q))return[c,f];if(U&Q)return!1;ue=U||Q,he=wr(c,f,ue,v,A),Pe=ma(he,v),ue===U?(c=he,U=Pe):(f=he,Q=Pe)}}function wr(c,f,v,E,A){var U=f.x-c.x,Q=f.y-c.y,ue=E.min,he=E.max,Pe,Ge;return v&8?(Pe=c.x+U*(he.y-c.y)/Q,Ge=he.y):v&4?(Pe=c.x+U*(ue.y-c.y)/Q,Ge=ue.y):v&2?(Pe=he.x,Ge=c.y+Q*(he.x-c.x)/U):v&1&&(Pe=ue.x,Ge=c.y+Q*(ue.x-c.x)/U),new D(Pe,Ge,A)}function ma(c,f){var v=0;return c.x<f.min.x?v|=1:c.x>f.max.x&&(v|=2),c.y<f.min.y?v|=4:c.y>f.max.y&&(v|=8),v}function _v(c,f){var v=f.x-c.x,E=f.y-c.y;return v*v+E*E}function fi(c,f,v,E){var A=f.x,U=f.y,Q=v.x-A,ue=v.y-U,he=Q*Q+ue*ue,Pe;return he>0&&(Pe=((c.x-A)*Q+(c.y-U)*ue)/he,Pe>1?(A=v.x,U=v.y):Pe>0&&(A+=Q*Pe,U+=ue*Pe)),Q=c.x-A,ue=c.y-U,E?Q*Q+ue*ue:new D(A,U)}function g(c){return!S(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function P(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),g(c)}function F(c,f){var v,E,A,U,Q,ue,he,Pe;if(!c||c.length===0)throw new Error("latlngs not passed");g(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Ge=Le([0,0]),ft=$e(c),Pt=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());Pt<1700&&(Ge=ld(c));var os=c.length,br=[];for(v=0;v<os;v++){var mi=Le(c[v]);br.push(f.project(Le([mi.lat-Ge.lat,mi.lng-Ge.lng])))}for(v=0,E=0;v<os-1;v++)E+=br[v].distanceTo(br[v+1])/2;if(E===0)Pe=br[0];else for(v=0,U=0;v<os-1;v++)if(Q=br[v],ue=br[v+1],A=Q.distanceTo(ue),U+=A,U>E){he=(U-E)/A,Pe=[ue.x-he*(ue.x-Q.x),ue.y-he*(ue.y-Q.y)];break}var bs=f.unproject(q(Pe));return Le([bs.lat+Ge.lat,bs.lng+Ge.lng])}var W={__proto__:null,simplify:Lf,pointToSegmentDistance:Ff,closestPointOnSegment:co,clipSegment:Oc,_getEdgeIntersection:wr,_getBitCode:ma,_sqClosestPointOnSegment:fi,isFlat:g,_flat:P,polylineCenter:F},le={project:function(c){return new D(c.lng,c.lat)},unproject:function(c){return new ze(c.y,c.x)},bounds:new X([-180,-90],[180,90])},me={R:6378137,R_MINOR:6356752314245179e-9,bounds:new X([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var f=Math.PI/180,v=this.R,E=c.lat*f,A=this.R_MINOR/v,U=Math.sqrt(1-A*A),Q=U*Math.sin(E),ue=Math.tan(Math.PI/4-E/2)/Math.pow((1-Q)/(1+Q),U/2);return E=-v*Math.log(Math.max(ue,1e-10)),new D(c.lng*f*v,E)},unproject:function(c){for(var f=180/Math.PI,v=this.R,E=this.R_MINOR/v,A=Math.sqrt(1-E*E),U=Math.exp(-c.y/v),Q=Math.PI/2-2*Math.atan(U),ue=0,he=.1,Pe;ue<15&&Math.abs(he)>1e-7;ue++)Pe=A*Math.sin(Q),Pe=Math.pow((1-Pe)/(1+Pe),A/2),he=Math.PI/2-2*Math.atan(U*Pe)-Q,Q+=he;return new ze(Q*f,c.x*f/v)}},Fe={__proto__:null,LonLat:le,Mercator:me,SphericalMercator:ae},Qt=s({},ne,{code:"EPSG:3395",projection:me,transformation:function(){var c=.5/(Math.PI*me.R);return ce(c,.5,-c,.5)}()}),tr=s({},ne,{code:"EPSG:4326",projection:le,transformation:ce(1/180,1,-1/180,.5)}),Ft=s({},Ce,{projection:le,transformation:ce(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,f){var v=f.lng-c.lng,E=f.lat-c.lat;return Math.sqrt(v*v+E*E)},infinite:!0});Ce.Earth=ne,Ce.EPSG3395=Qt,Ce.EPSG3857=ve,Ce.EPSG900913=ke,Ce.EPSG4326=tr,Ce.Simple=Ft;var sn=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[u(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[u(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var f=c.target;if(f.hasLayer(this)){if(this._map=f,this._zoomAnimated=f._zoomAnimated,this.getEvents){var v=this.getEvents();f.on(v,this),this.once("remove",function(){f.off(v,this)},this)}this.onAdd(f),this.fire("add"),f.fire("layeradd",{layer:this})}}});Rt.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var f=u(c);return this._layers[f]?this:(this._layers[f]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var f=u(c);return this._layers[f]?(this._loaded&&c.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return u(c)in this._layers},eachLayer:function(c,f){for(var v in this._layers)c.call(f,this._layers[v]);return this},_addLayers:function(c){c=c?S(c)?c:[c]:[];for(var f=0,v=c.length;f<v;f++)this.addLayer(c[f])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[u(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var f=u(c);this._zoomBoundLayers[f]&&(delete this._zoomBoundLayers[f],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,f=-1/0,v=this._getZoomSpan();for(var E in this._zoomBoundLayers){var A=this._zoomBoundLayers[E].options;c=A.minZoom===void 0?c:Math.min(c,A.minZoom),f=A.maxZoom===void 0?f:Math.max(f,A.maxZoom)}this._layersMaxZoom=f===-1/0?void 0:f,this._layersMinZoom=c===1/0?void 0:c,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var In=sn.extend({initialize:function(c,f){_(this,f),this._layers={};var v,E;if(c)for(v=0,E=c.length;v<E;v++)this.addLayer(c[v])},addLayer:function(c){var f=this.getLayerId(c);return this._layers[f]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var f=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[f]&&this._map.removeLayer(this._layers[f]),delete this._layers[f],this},hasLayer:function(c){var f=typeof c=="number"?c:this.getLayerId(c);return f in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var f=Array.prototype.slice.call(arguments,1),v,E;for(v in this._layers)E=this._layers[v],E[c]&&E[c].apply(E,f);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,f){for(var v in this._layers)c.call(f,this._layers[v]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return u(c)}}),ol=function(c,f){return new In(c,f)},Hn=In.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),In.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),In.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new Te;for(var f in this._layers){var v=this._layers[f];c.extend(v.getBounds?v.getBounds():v.getLatLng())}return c}}),dd=function(c,f){return new Hn(c,f)},pa=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){_(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,f){var v=this._getIconUrl(c);if(!v){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(v,f&&f.tagName==="IMG"?f:null);return this._setIconStyles(E,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(c,f){var v=this.options,E=v[f+"Size"];typeof E=="number"&&(E=[E,E]);var A=q(E),U=q(f==="shadow"&&v.shadowAnchor||v.iconAnchor||A&&A.divideBy(2,!0));c.className="leaflet-marker-"+f+" "+(v.className||""),U&&(c.style.marginLeft=-U.x+"px",c.style.marginTop=-U.y+"px"),A&&(c.style.width=A.x+"px",c.style.height=A.y+"px")},_createImg:function(c,f){return f=f||document.createElement("img"),f.src=c,f},_getIconUrl:function(c){return ot.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function tz(c){return new pa(c)}var Vf=pa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof Vf.imagePath!="string"&&(Vf.imagePath=this._detectIconPath()),(this.options.imagePath||Vf.imagePath)+pa.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var f=function(v,E,A){var U=E.exec(v);return U&&U[A]};return c=f(c,/^url\((['"])?(.+)\1\)$/,2),c&&f(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=At("div","leaflet-default-icon-path",document.body),f=tl(c,"background-image")||tl(c,"backgroundImage");if(document.body.removeChild(c),f=this._stripUrl(f),f)return f;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),PP=$s.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new $i(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),St(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Nn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var f=this._marker,v=f._map,E=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,U=ci(f._icon),Q=v.getPixelBounds(),ue=v.getPixelOrigin(),he=fe(Q.min._subtract(ue).add(A),Q.max._subtract(ue).subtract(A));if(!he.contains(U)){var Pe=q((Math.max(he.max.x,U.x)-he.max.x)/(Q.max.x-he.max.x)-(Math.min(he.min.x,U.x)-he.min.x)/(Q.min.x-he.min.x),(Math.max(he.max.y,U.y)-he.max.y)/(Q.max.y-he.max.y)-(Math.min(he.min.y,U.y)-he.min.y)/(Q.min.y-he.min.y)).multiplyBy(E);v.panBy(Pe,{animate:!1}),this._draggable._newPos._add(Pe),this._draggable._startPos._add(Pe),gt(f._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=O(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&($(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,c)))},_onDrag:function(c){var f=this._marker,v=f._shadow,E=ci(f._icon),A=f._map.layerPointToLatLng(E);v&&gt(v,E),f._latlng=A,c.latlng=A,c.oldLatLng=this._oldLatLng,f.fire("move",c).fire("drag",c)},_onDragEnd:function(c){$(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),jv=sn.extend({options:{icon:new Vf,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,f){_(this,f),this._latlng=Le(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var f=this._latlng;return this._latlng=Le(c),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=c.icon.createIcon(this._icon),E=!1;v!==this._icon&&(this._icon&&this._removeIcon(),E=!0,c.title&&(v.title=c.title),v.tagName==="IMG"&&(v.alt=c.alt||"")),St(v,f),c.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ht(v,"focus",this._panOnFocus,this);var A=c.icon.createShadow(this._shadow),U=!1;A!==this._shadow&&(this._removeShadow(),U=!0),A&&(St(A,f),A.alt=""),this._shadow=A,c.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&U&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&rn(this._icon,"focus",this._panOnFocus,this),cn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&cn(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&gt(this._icon,c),this._shadow&&gt(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var f=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(f)},_initInteraction:function(){if(this.options.interactive&&(St(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),PP)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new PP(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Fn(this._icon,c),this._shadow&&Fn(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var f=this.options.icon.options,v=f.iconSize?q(f.iconSize):q(0,0),E=f.iconAnchor?q(f.iconAnchor):q(0,0);c.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:v.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nz(c,f){return new jv(c,f)}var ll=sn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return _(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Nv=ll.extend({options:{fill:!0,radius:10},initialize:function(c,f){_(this,f),this._latlng=Le(c),this._radius=this.options.radius},setLatLng:function(c){var f=this._latlng;return this._latlng=Le(c),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var f=c&&c.radius||this._radius;return ll.prototype.setStyle.call(this,c),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,f=this._radiusY||c,v=this._clickTolerance(),E=[c+v,f+v];this._pxBounds=new X(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function rz(c,f){return new Nv(c,f)}var ob=Nv.extend({initialize:function(c,f,v){if(typeof f=="number"&&(f=s({},v,{radius:f})),_(this,f),this._latlng=Le(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new Te(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:ll.prototype.setStyle,_project:function(){var c=this._latlng.lng,f=this._latlng.lat,v=this._map,E=v.options.crs;if(E.distance===ne.distance){var A=Math.PI/180,U=this._mRadius/ne.R/A,Q=v.project([f+U,c]),ue=v.project([f-U,c]),he=Q.add(ue).divideBy(2),Pe=v.unproject(he).lat,Ge=Math.acos((Math.cos(U*A)-Math.sin(f*A)*Math.sin(Pe*A))/(Math.cos(f*A)*Math.cos(Pe*A)))/A;(isNaN(Ge)||Ge===0)&&(Ge=U/Math.cos(Math.PI/180*f)),this._point=he.subtract(v.getPixelOrigin()),this._radius=isNaN(Ge)?0:he.x-v.project([Pe,c-Ge]).x,this._radiusY=he.y-Q.y}else{var ft=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(ft).x}this._updateBounds()}});function sz(c,f,v){return new ob(c,f,v)}var uo=ll.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,f){_(this,f),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var f=1/0,v=null,E=fi,A,U,Q=0,ue=this._parts.length;Q<ue;Q++)for(var he=this._parts[Q],Pe=1,Ge=he.length;Pe<Ge;Pe++){A=he[Pe-1],U=he[Pe];var ft=E(c,A,U,!0);ft<f&&(f=ft,v=E(c,A,U))}return v&&(v.distance=Math.sqrt(f)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return F(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,f){return f=f||this._defaultShape(),c=Le(c),f.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new Te,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return g(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var f=[],v=g(c),E=0,A=c.length;E<A;E++)v?(f[E]=Le(c[E]),this._bounds.extend(f[E])):f[E]=this._convertLatLngs(c[E]);return f},_project:function(){var c=new X;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),f=new D(c,c);this._rawPxBounds&&(this._pxBounds=new X([this._rawPxBounds.min.subtract(f),this._rawPxBounds.max.add(f)]))},_projectLatlngs:function(c,f,v){var E=c[0]instanceof ze,A=c.length,U,Q;if(E){for(Q=[],U=0;U<A;U++)Q[U]=this._map.latLngToLayerPoint(c[U]),v.extend(Q[U]);f.push(Q)}else for(U=0;U<A;U++)this._projectLatlngs(c[U],f,v)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var f=this._parts,v,E,A,U,Q,ue,he;for(v=0,A=0,U=this._rings.length;v<U;v++)for(he=this._rings[v],E=0,Q=he.length;E<Q-1;E++)ue=Oc(he[E],he[E+1],c,E,!0),ue&&(f[A]=f[A]||[],f[A].push(ue[0]),(ue[1]!==he[E+1]||E===Q-2)&&(f[A].push(ue[1]),A++))}},_simplifyPoints:function(){for(var c=this._parts,f=this.options.smoothFactor,v=0,E=c.length;v<E;v++)c[v]=Lf(c[v],f)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,f){var v,E,A,U,Q,ue,he=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(v=0,U=this._parts.length;v<U;v++)for(ue=this._parts[v],E=0,Q=ue.length,A=Q-1;E<Q;A=E++)if(!(!f&&E===0)&&Ff(c,ue[A],ue[E])<=he)return!0;return!1}});function iz(c,f){return new uo(c,f)}uo._flat=P;var hd=uo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return od(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var f=uo.prototype._convertLatLngs.call(this,c),v=f.length;return v>=2&&f[0]instanceof ze&&f[0].equals(f[v-1])&&f.pop(),f},_setLatLngs:function(c){uo.prototype._setLatLngs.call(this,c),g(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return g(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,f=this.options.weight,v=new D(f,f);if(c=new X(c.min.subtract(v),c.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,A=this._rings.length,U;E<A;E++)U=ad(this._rings[E],c,!0),U.length&&this._parts.push(U)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var f=!1,v,E,A,U,Q,ue,he,Pe;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(U=0,he=this._parts.length;U<he;U++)for(v=this._parts[U],Q=0,Pe=v.length,ue=Pe-1;Q<Pe;ue=Q++)E=v[Q],A=v[ue],E.y>c.y!=A.y>c.y&&c.x<(A.x-E.x)*(c.y-E.y)/(A.y-E.y)+E.x&&(f=!f);return f||uo.prototype._containsPoint.call(this,c,!0)}});function az(c,f){return new hd(c,f)}var ho=Hn.extend({initialize:function(c,f){_(this,f),this._layers={},c&&this.addData(c)},addData:function(c){var f=S(c)?c:c.features,v,E,A;if(f){for(v=0,E=f.length;v<E;v++)A=f[v],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var U=this.options;if(U.filter&&!U.filter(c))return this;var Q=Sv(c,U);return Q?(Q.feature=Cv(c),Q.defaultOptions=Q.options,this.resetStyle(Q),U.onEachFeature&&U.onEachFeature(c,Q),this.addLayer(Q)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=s({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(f){this._setLayerStyle(f,c)},this)},_setLayerStyle:function(c,f){c.setStyle&&(typeof f=="function"&&(f=f(c.feature)),c.setStyle(f))}});function Sv(c,f){var v=c.type==="Feature"?c.geometry:c,E=v?v.coordinates:null,A=[],U=f&&f.pointToLayer,Q=f&&f.coordsToLatLng||lb,ue,he,Pe,Ge;if(!E&&!v)return null;switch(v.type){case"Point":return ue=Q(E),CP(U,c,ue,f);case"MultiPoint":for(Pe=0,Ge=E.length;Pe<Ge;Pe++)ue=Q(E[Pe]),A.push(CP(U,c,ue,f));return new Hn(A);case"LineString":case"MultiLineString":return he=Ev(E,v.type==="LineString"?0:1,Q),new uo(he,f);case"Polygon":case"MultiPolygon":return he=Ev(E,v.type==="Polygon"?1:2,Q),new hd(he,f);case"GeometryCollection":for(Pe=0,Ge=v.geometries.length;Pe<Ge;Pe++){var ft=Sv({geometry:v.geometries[Pe],type:"Feature",properties:c.properties},f);ft&&A.push(ft)}return new Hn(A);case"FeatureCollection":for(Pe=0,Ge=v.features.length;Pe<Ge;Pe++){var Pt=Sv(v.features[Pe],f);Pt&&A.push(Pt)}return new Hn(A);default:throw new Error("Invalid GeoJSON object.")}}function CP(c,f,v,E){return c?c(f,v):new jv(v,E&&E.markersInheritOptions&&E)}function lb(c){return new ze(c[1],c[0],c[2])}function Ev(c,f,v){for(var E=[],A=0,U=c.length,Q;A<U;A++)Q=f?Ev(c[A],f-1,v):(v||lb)(c[A]),E.push(Q);return E}function cb(c,f){return c=Le(c),c.alt!==void 0?[p(c.lng,f),p(c.lat,f),p(c.alt,f)]:[p(c.lng,f),p(c.lat,f)]}function Pv(c,f,v,E){for(var A=[],U=0,Q=c.length;U<Q;U++)A.push(f?Pv(c[U],g(c[U])?0:f-1,v,E):cb(c[U],E));return!f&&v&&A.length>0&&A.push(A[0].slice()),A}function fd(c,f){return c.feature?s({},c.feature,{geometry:f}):Cv(f)}function Cv(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var ub={toGeoJSON:function(c){return fd(this,{type:"Point",coordinates:cb(this.getLatLng(),c)})}};jv.include(ub),ob.include(ub),Nv.include(ub),uo.include({toGeoJSON:function(c){var f=!g(this._latlngs),v=Pv(this._latlngs,f?1:0,!1,c);return fd(this,{type:(f?"Multi":"")+"LineString",coordinates:v})}}),hd.include({toGeoJSON:function(c){var f=!g(this._latlngs),v=f&&!g(this._latlngs[0]),E=Pv(this._latlngs,v?2:f?1:0,!0,c);return f||(E=[E]),fd(this,{type:(v?"Multi":"")+"Polygon",coordinates:E})}}),In.include({toMultiPoint:function(c){var f=[];return this.eachLayer(function(v){f.push(v.toGeoJSON(c).geometry.coordinates)}),fd(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(c){var f=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(f==="MultiPoint")return this.toMultiPoint(c);var v=f==="GeometryCollection",E=[];return this.eachLayer(function(A){if(A.toGeoJSON){var U=A.toGeoJSON(c);if(v)E.push(U.geometry);else{var Q=Cv(U);Q.type==="FeatureCollection"?E.push.apply(E,Q.features):E.push(Q)}}}),v?fd(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function TP(c,f){return new ho(c,f)}var oz=TP,Tv=sn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,f,v){this._url=c,this._bounds=$e(f),_(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(St(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){cn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&io(this._image),this},bringToBack:function(){return this._map&&nl(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=$e(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",f=this._image=c?this._url:At("img");if(St(f,"leaflet-image-layer"),this._zoomAnimated&&St(f,"leaflet-zoom-animated"),this.options.className&&St(f,this.options.className),f.onselectstart=m,f.onmousemove=m,f.onload=o(this.fire,this,"load"),f.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=f.src;return}f.src=this._url,f.alt=this.options.alt},_animateZoom:function(c){var f=this._map.getZoomScale(c.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;fa(this._image,v,f)},_reset:function(){var c=this._image,f=new X(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=f.getSize();gt(c,f.min),c.style.width=v.x+"px",c.style.height=v.y+"px"},_updateOpacity:function(){Fn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),lz=function(c,f,v){return new Tv(c,f,v)},RP=Tv.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",f=this._image=c?this._url:At("video");if(St(f,"leaflet-image-layer"),this._zoomAnimated&&St(f,"leaflet-zoom-animated"),this.options.className&&St(f,this.options.className),f.onselectstart=m,f.onmousemove=m,f.onloadeddata=o(this.fire,this,"load"),c){for(var v=f.getElementsByTagName("source"),E=[],A=0;A<v.length;A++)E.push(v[A].src);this._url=v.length>0?E:[f.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var U=0;U<this._url.length;U++){var Q=At("source");Q.src=this._url[U],f.appendChild(Q)}}});function cz(c,f,v){return new RP(c,f,v)}var kP=Tv.extend({_initImage:function(){var c=this._image=this._url;St(c,"leaflet-image-layer"),this._zoomAnimated&&St(c,"leaflet-zoom-animated"),this.options.className&&St(c,this.options.className),c.onselectstart=m,c.onmousemove=m}});function uz(c,f,v){return new kP(c,f,v)}var ga=sn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,f){c&&(c instanceof ze||S(c))?(this._latlng=Le(c),_(this,f)):(_(this,c),this._source=f),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Fn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Fn(this._container,1),this.bringToFront(),this.options.interactive&&(St(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Fn(this._container,0),this._removeTimeout=setTimeout(o(cn,void 0,this._container),200)):cn(this._container),this.options.interactive&&(Nn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=Le(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&io(this._container),this},bringToBack:function(){return this._map&&nl(this._container),this},_prepareOpen:function(c){var f=this._source;if(!f._map)return!1;if(f instanceof Hn){f=null;var v=this._source._layers;for(var E in v)if(v[E]._map){f=v[E];break}if(!f)return!1;this._source=f}if(!c)if(f.getCenter)c=f.getCenter();else if(f.getLatLng)c=f.getLatLng();else if(f.getBounds)c=f.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,f=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof f=="string")c.innerHTML=f;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),f=q(this.options.offset),v=this._getAnchor();this._zoomAnimated?gt(this._container,c.add(v)):f=f.add(c).add(v);var E=this._containerBottom=-f.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+f.x;this._container.style.bottom=E+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});Rt.include({_initOverlay:function(c,f,v,E){var A=f;return A instanceof c||(A=new c(E).setContent(f)),v&&A.setLatLng(v),A}}),sn.include({_initOverlay:function(c,f,v,E){var A=v;return A instanceof c?(_(A,E),A._source=this):(A=f&&!E?f:new c(E,this),A.setContent(v)),A}});var Rv=ga.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,ga.prototype.openOn.call(this,c)},onAdd:function(c){ga.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ll||this._source.on("preclick",hi))},onRemove:function(c){ga.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ll||this._source.off("preclick",hi))},getEvents:function(){var c=ga.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",f=this._container=At("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=At("div",c+"-content-wrapper",f);if(this._contentNode=At("div",c+"-content",v),il(f),sl(this._contentNode),ht(f,"contextmenu",hi),this._tipContainer=At("div",c+"-tip-container",f),this._tip=At("div",c+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=At("a",c+"-close-button",f);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',ht(E,"click",function(A){kn(A),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,f=c.style;f.width="",f.whiteSpace="nowrap";var v=c.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),f.width=v+1+"px",f.whiteSpace="",f.height="";var E=c.offsetHeight,A=this.options.maxHeight,U="leaflet-popup-scrolled";A&&E>A?(f.height=A+"px",St(c,U)):Nn(c,U),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var f=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),v=this._getAnchor();gt(this._container,f.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,f=parseInt(tl(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+f,E=this._containerWidth,A=new D(this._containerLeft,-v-this._containerBottom);A._add(ci(this._container));var U=c.layerPointToContainerPoint(A),Q=q(this.options.autoPanPadding),ue=q(this.options.autoPanPaddingTopLeft||Q),he=q(this.options.autoPanPaddingBottomRight||Q),Pe=c.getSize(),Ge=0,ft=0;U.x+E+he.x>Pe.x&&(Ge=U.x+E-Pe.x+he.x),U.x-Ge-ue.x<0&&(Ge=U.x-ue.x),U.y+v+he.y>Pe.y&&(ft=U.y+v-Pe.y+he.y),U.y-ft-ue.y<0&&(ft=U.y-ue.y),(Ge||ft)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([Ge,ft]))}},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),dz=function(c,f){return new Rv(c,f)};Rt.mergeOptions({closePopupOnClick:!0}),Rt.include({openPopup:function(c,f,v){return this._initOverlay(Rv,c,f,v).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),sn.include({bindPopup:function(c,f){return this._popup=this._initOverlay(Rv,this._popup,c,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof Hn||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){Fs(c);var f=c.layer||c.target;if(this._popup._source===f&&!(f instanceof ll)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=f,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var kv=ga.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){ga.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){ga.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=ga.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",f=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=At("div",f),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var f,v,E=this._map,A=this._container,U=E.latLngToContainerPoint(E.getCenter()),Q=E.layerPointToContainerPoint(c),ue=this.options.direction,he=A.offsetWidth,Pe=A.offsetHeight,Ge=q(this.options.offset),ft=this._getAnchor();ue==="top"?(f=he/2,v=Pe):ue==="bottom"?(f=he/2,v=0):ue==="center"?(f=he/2,v=Pe/2):ue==="right"?(f=0,v=Pe/2):ue==="left"?(f=he,v=Pe/2):Q.x<U.x?(ue="right",f=0,v=Pe/2):(ue="left",f=he+(Ge.x+ft.x)*2,v=Pe/2),c=c.subtract(q(f,v,!0)).add(Ge).add(ft),Nn(A,"leaflet-tooltip-right"),Nn(A,"leaflet-tooltip-left"),Nn(A,"leaflet-tooltip-top"),Nn(A,"leaflet-tooltip-bottom"),St(A,"leaflet-tooltip-"+ue),gt(A,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Fn(this._container,c)},_animateZoom:function(c){var f=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(f)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),hz=function(c,f){return new kv(c,f)};Rt.include({openTooltip:function(c,f,v){return this._initOverlay(kv,c,f,v).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),sn.include({bindTooltip:function(c,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(kv,this._tooltip,c,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var f=c?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[f](v),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof Hn||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var f=typeof c.getElement=="function"&&c.getElement();f&&(ht(f,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),ht(f,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var f=typeof c.getElement=="function"&&c.getElement();f&&f.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var f=this;this._map.once("moveend",function(){f._openOnceFlag=!1,f._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var f=c.latlng,v,E;this._tooltip.options.sticky&&c.originalEvent&&(v=this._map.mouseEventToContainerPoint(c.originalEvent),E=this._map.containerPointToLayerPoint(v),f=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(f)}});var IP=pa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var f=c&&c.tagName==="DIV"?c:document.createElement("div"),v=this.options;if(v.html instanceof Element?(Ic(f),f.appendChild(v.html)):f.innerHTML=v.html!==!1?v.html:"",v.bgPos){var E=q(v.bgPos);f.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(f,"icon"),f},createShadow:function(){return null}});function fz(c){return new IP(c)}pa.Default=Vf;var zf=sn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ot.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){_(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),cn(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(io(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(nl(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof D?c:new D(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var f=this.getPane().children,v=-c(-1/0,1/0),E=0,A=f.length,U;E<A;E++)U=f[E].style.zIndex,f[E]!==this._container&&U&&(v=c(v,+U));isFinite(v)&&(this.options.zIndex=v+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ot.ielt9){Fn(this._container,this.options.opacity);var c=+new Date,f=!1,v=!1;for(var E in this._tiles){var A=this._tiles[E];if(!(!A.current||!A.loaded)){var U=Math.min(1,(c-A.loaded)/200);Fn(A.el,U),U<1?f=!0:(A.active?v=!0:this._onOpaqueTile(A),A.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),f&&($(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=At("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,f=this.options.maxZoom;if(c!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===c?(this._levels[v].el.style.zIndex=f-Math.abs(c-v),this._onUpdateLevel(v)):(cn(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var E=this._levels[c],A=this._map;return E||(E=this._levels[c]={},E.el=At("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=f,E.origin=A.project(A.unproject(A.getPixelOrigin()),c).round(),E.zoom=c,this._setZoomTransform(E,A.getCenter(),A.getZoom()),m(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var c,f,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)f=this._tiles[c],f.retain=f.current;for(c in this._tiles)if(f=this._tiles[c],f.current&&!f.active){var E=f.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var f in this._tiles)this._tiles[f].coords.z===c&&this._removeTile(f)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)cn(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,f,v,E){var A=Math.floor(c/2),U=Math.floor(f/2),Q=v-1,ue=new D(+A,+U);ue.z=+Q;var he=this._tileCoordsToKey(ue),Pe=this._tiles[he];return Pe&&Pe.active?(Pe.retain=!0,!0):(Pe&&Pe.loaded&&(Pe.retain=!0),Q>E?this._retainParent(A,U,Q,E):!1)},_retainChildren:function(c,f,v,E){for(var A=2*c;A<2*c+2;A++)for(var U=2*f;U<2*f+2;U++){var Q=new D(A,U);Q.z=v+1;var ue=this._tileCoordsToKey(Q),he=this._tiles[ue];if(he&&he.active){he.retain=!0;continue}else he&&he.loaded&&(he.retain=!0);v+1<E&&this._retainChildren(A,U,v+1,E)}},_resetView:function(c){var f=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),f,f)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var f=this.options;return f.minNativeZoom!==void 0&&c<f.minNativeZoom?f.minNativeZoom:f.maxNativeZoom!==void 0&&f.maxNativeZoom<c?f.maxNativeZoom:c},_setView:function(c,f,v,E){var A=Math.round(f);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var U=this.options.updateWhenZooming&&A!==this._tileZoom;(!E||U)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(c),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(c,f)},_setZoomTransforms:function(c,f){for(var v in this._levels)this._setZoomTransform(this._levels[v],c,f)},_setZoomTransform:function(c,f,v){var E=this._map.getZoomScale(v,c.zoom),A=c.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(f,v)).round();ot.any3d?fa(c.el,A,E):gt(c.el,A)},_resetGrid:function(){var c=this._map,f=c.options.crs,v=this._tileSize=this.getTileSize(),E=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,f.wrapLng[0]],E).x/v.x),Math.ceil(c.project([0,f.wrapLng[1]],E).x/v.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([f.wrapLat[0],0],E).y/v.x),Math.ceil(c.project([f.wrapLat[1],0],E).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var f=this._map,v=f._animatingZoom?Math.max(f._animateToZoom,f.getZoom()):f.getZoom(),E=f.getZoomScale(v,this._tileZoom),A=f.project(c,this._tileZoom).floor(),U=f.getSize().divideBy(E*2);return new X(A.subtract(U),A.add(U))},_update:function(c){var f=this._map;if(f){var v=this._clampZoom(f.getZoom());if(c===void 0&&(c=f.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(c),A=this._pxBoundsToTileRange(E),U=A.getCenter(),Q=[],ue=this.options.keepBuffer,he=new X(A.getBottomLeft().subtract([ue,-ue]),A.getTopRight().add([ue,-ue]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Pe in this._tiles){var Ge=this._tiles[Pe].coords;(Ge.z!==this._tileZoom||!he.contains(new D(Ge.x,Ge.y)))&&(this._tiles[Pe].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(c,v);return}for(var ft=A.min.y;ft<=A.max.y;ft++)for(var Pt=A.min.x;Pt<=A.max.x;Pt++){var os=new D(Pt,ft);if(os.z=this._tileZoom,!!this._isValidTile(os)){var br=this._tiles[this._tileCoordsToKey(os)];br?br.current=!0:Q.push(os)}}if(Q.sort(function(bs,pd){return bs.distanceTo(U)-pd.distanceTo(U)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var mi=document.createDocumentFragment();for(Pt=0;Pt<Q.length;Pt++)this._addTile(Q[Pt],mi);this._level.el.appendChild(mi)}}}},_isValidTile:function(c){var f=this._map.options.crs;if(!f.infinite){var v=this._globalTileRange;if(!f.wrapLng&&(c.x<v.min.x||c.x>v.max.x)||!f.wrapLat&&(c.y<v.min.y||c.y>v.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(c);return $e(this.options.bounds).overlaps(E)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var f=this._map,v=this.getTileSize(),E=c.scaleBy(v),A=E.add(v),U=f.unproject(E,c.z),Q=f.unproject(A,c.z);return[U,Q]},_tileCoordsToBounds:function(c){var f=this._tileCoordsToNwSe(c),v=new Te(f[0],f[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var f=c.split(":"),v=new D(+f[0],+f[1]);return v.z=+f[2],v},_removeTile:function(c){var f=this._tiles[c];f&&(cn(f.el),delete this._tiles[c],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){St(c,"leaflet-tile");var f=this.getTileSize();c.style.width=f.x+"px",c.style.height=f.y+"px",c.onselectstart=m,c.onmousemove=m,ot.ielt9&&this.options.opacity<1&&Fn(c,this.options.opacity)},_addTile:function(c,f){var v=this._getTilePos(c),E=this._tileCoordsToKey(c),A=this.createTile(this._wrapCoords(c),o(this._tileReady,this,c));this._initTile(A),this.createTile.length<2&&O(o(this._tileReady,this,c,null,A)),gt(A,v),this._tiles[E]={el:A,coords:c,current:!0},f.appendChild(A),this.fire("tileloadstart",{tile:A,coords:c})},_tileReady:function(c,f,v){f&&this.fire("tileerror",{error:f,tile:v,coords:c});var E=this._tileCoordsToKey(c);v=this._tiles[E],v&&(v.loaded=+new Date,this._map._fadeAnimated?(Fn(v.el,0),$(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),f||(St(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ot.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var f=new D(this._wrapX?h(c.x,this._wrapX):c.x,this._wrapY?h(c.y,this._wrapY):c.y);return f.z=c.z,f},_pxBoundsToTileRange:function(c){var f=this.getTileSize();return new X(c.min.unscaleBy(f).floor(),c.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function mz(c){return new zf(c)}var md=zf.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,f){this._url=c,f=_(this,f),f.detectRetina&&ot.retina&&f.maxZoom>0?(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom=Math.min(f.maxZoom,f.minZoom+1)):(f.zoomOffset++,f.maxZoom=Math.max(f.minZoom,f.maxZoom-1)),f.minZoom=Math.max(0,f.minZoom)):f.zoomReverse?f.minZoom=Math.min(f.maxZoom,f.minZoom):f.maxZoom=Math.max(f.minZoom,f.maxZoom),typeof f.subdomains=="string"&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,f){return this._url===c&&f===void 0&&(f=!0),this._url=c,f||this.redraw(),this},createTile:function(c,f){var v=document.createElement("img");return ht(v,"load",o(this._tileOnLoad,this,f,v)),ht(v,"error",o(this._tileOnError,this,f,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(c),v},getTileUrl:function(c){var f={r:ot.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-c.y;this.options.tms&&(f.y=v),f["-y"]=v}return x(this._url,s(f,this.options))},_tileOnLoad:function(c,f){ot.ielt9?setTimeout(o(c,this,null,f),0):c(null,f)},_tileOnError:function(c,f,v){var E=this.options.errorTileUrl;E&&f.getAttribute("src")!==E&&(f.src=E),c(v,f)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,f=this.options.maxZoom,v=this.options.zoomReverse,E=this.options.zoomOffset;return v&&(c=f-c),c+E},_getSubdomain:function(c){var f=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[f]},_abortLoading:function(){var c,f;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(f=this._tiles[c].el,f.onload=m,f.onerror=m,!f.complete)){f.src=R;var v=this._tiles[c].coords;cn(f),delete this._tiles[c],this.fire("tileabort",{tile:f,coords:v})}},_removeTile:function(c){var f=this._tiles[c];if(f)return f.el.setAttribute("src",R),zf.prototype._removeTile.call(this,c)},_tileReady:function(c,f,v){if(!(!this._map||v&&v.getAttribute("src")===R))return zf.prototype._tileReady.call(this,c,f,v)}});function AP(c,f){return new md(c,f)}var OP=md.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,f){this._url=c;var v=s({},this.defaultWmsParams);for(var E in f)E in this.options||(v[E]=f[E]);f=_(this,f);var A=f.detectRetina&&ot.retina?2:1,U=this.getTileSize();v.width=U.x*A,v.height=U.y*A,this.wmsParams=v},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var f=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[f]=this._crs.code,md.prototype.onAdd.call(this,c)},getTileUrl:function(c){var f=this._tileCoordsToNwSe(c),v=this._crs,E=fe(v.project(f[0]),v.project(f[1])),A=E.min,U=E.max,Q=(this._wmsVersion>=1.3&&this._crs===tr?[A.y,A.x,U.y,U.x]:[A.x,A.y,U.x,U.y]).join(","),ue=md.prototype.getTileUrl.call(this,c);return ue+N(this.wmsParams,ue,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(c,f){return s(this.wmsParams,c),f||this.redraw(),this}});function pz(c,f){return new OP(c,f)}md.WMS=OP,AP.wms=pz;var fo=sn.extend({options:{padding:.1},initialize:function(c){_(this,c),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),St(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,f){var v=this._map.getZoomScale(f,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,f),U=E.multiplyBy(-v).add(A).subtract(this._map._getNewPixelOrigin(c,f));ot.any3d?fa(this._container,U,v):gt(this._container,U)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,f=this._map.getSize(),v=this._map.containerPointToLayerPoint(f.multiplyBy(-c)).round();this._bounds=new X(v,v.add(f.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),MP=fo.extend({options:{tolerance:0},getEvents:function(){var c=fo.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){fo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");ht(c,"mousemove",this._onMouseMove,this),ht(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ht(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){$(this._redrawRequest),delete this._ctx,cn(this._container),rn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var f in this._layers)c=this._layers[f],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fo.prototype._update.call(this);var c=this._bounds,f=this._container,v=c.getSize(),E=ot.retina?2:1;gt(f,c.min),f.width=E*v.x,f.height=E*v.y,f.style.width=v.x+"px",f.style.height=v.y+"px",ot.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){fo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[u(c)]=c;var f=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=f),this._drawLast=f,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var f=c._order,v=f.next,E=f.prev;v?v.prev=E:this._drawLast=E,E?E.next=v:this._drawFirst=v,delete c._order,delete this._layers[u(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var f=c.options.dashArray.split(/[, ]+/),v=[],E,A;for(A=0;A<f.length;A++){if(E=Number(f[A]),isNaN(E))return;v.push(E)}c.options._dashArray=v}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var f=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new X,this._redrawBounds.extend(c._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(c._pxBounds.max.add([f,f]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var f=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,f.x,f.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,f=this._redrawBounds;if(this._ctx.save(),f){var v=f.getSize();this._ctx.beginPath(),this._ctx.rect(f.min.x,f.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)c=E.layer,(!f||c._pxBounds&&c._pxBounds.intersects(f))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,f){if(this._drawing){var v,E,A,U,Q=c._parts,ue=Q.length,he=this._ctx;if(ue){for(he.beginPath(),v=0;v<ue;v++){for(E=0,A=Q[v].length;E<A;E++)U=Q[v][E],he[E?"lineTo":"moveTo"](U.x,U.y);f&&he.closePath()}this._fillStroke(he,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var f=c._point,v=this._ctx,E=Math.max(Math.round(c._radius),1),A=(Math.max(Math.round(c._radiusY),1)||E)/E;A!==1&&(v.save(),v.scale(1,A)),v.beginPath(),v.arc(f.x,f.y/A,E,0,Math.PI*2,!1),A!==1&&v.restore(),this._fillStroke(v,c)}},_fillStroke:function(c,f){var v=f.options;v.fill&&(c.globalAlpha=v.fillOpacity,c.fillStyle=v.fillColor||v.color,c.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(c.setLineDash&&c.setLineDash(f.options&&f.options._dashArray||[]),c.globalAlpha=v.opacity,c.lineWidth=v.weight,c.strokeStyle=v.color,c.lineCap=v.lineCap,c.lineJoin=v.lineJoin,c.stroke())},_onClick:function(c){for(var f=this._map.mouseEventToLayerPoint(c),v,E,A=this._drawFirst;A;A=A.next)v=A.layer,v.options.interactive&&v._containsPoint(f)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(v))&&(E=v);this._fireEvent(E?[E]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var f=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,f)}},_handleMouseOut:function(c){var f=this._hoveredLayer;f&&(Nn(this._container,"leaflet-interactive"),this._fireEvent([f],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,f){if(!this._mouseHoverThrottled){for(var v,E,A=this._drawFirst;A;A=A.next)v=A.layer,v.options.interactive&&v._containsPoint(f)&&(E=v);E!==this._hoveredLayer&&(this._handleMouseOut(c),E&&(St(this._container,"leaflet-interactive"),this._fireEvent([E],c,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,f,v){this._map._fireDOMEvent(f,v||f.type,c)},_bringToFront:function(c){var f=c._order;if(f){var v=f.next,E=f.prev;if(v)v.prev=E;else return;E?E.next=v:v&&(this._drawFirst=v),f.prev=this._drawLast,this._drawLast.next=f,f.next=null,this._drawLast=f,this._requestRedraw(c)}},_bringToBack:function(c){var f=c._order;if(f){var v=f.next,E=f.prev;if(E)E.next=v;else return;v?v.prev=E:E&&(this._drawLast=E),f.prev=null,f.next=this._drawFirst,this._drawFirst.prev=f,this._drawFirst=f,this._requestRedraw(c)}}});function DP(c){return ot.canvas?new MP(c):null}var Uf=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),gz={_initContainer:function(){this._container=At("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(fo.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var f=c._container=Uf("shape");St(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",c._path=Uf("path"),f.appendChild(c._path),this._updateStyle(c),this._layers[u(c)]=c},_addPath:function(c){var f=c._container;this._container.appendChild(f),c.options.interactive&&c.addInteractiveTarget(f)},_removePath:function(c){var f=c._container;cn(f),c.removeInteractiveTarget(f),delete this._layers[u(c)]},_updateStyle:function(c){var f=c._stroke,v=c._fill,E=c.options,A=c._container;A.stroked=!!E.stroke,A.filled=!!E.fill,E.stroke?(f||(f=c._stroke=Uf("stroke")),A.appendChild(f),f.weight=E.weight+"px",f.color=E.color,f.opacity=E.opacity,E.dashArray?f.dashStyle=S(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):f.dashStyle="",f.endcap=E.lineCap.replace("butt","flat"),f.joinstyle=E.lineJoin):f&&(A.removeChild(f),c._stroke=null),E.fill?(v||(v=c._fill=Uf("fill")),A.appendChild(v),v.color=E.fillColor||E.color,v.opacity=E.fillOpacity):v&&(A.removeChild(v),c._fill=null)},_updateCircle:function(c){var f=c._point.round(),v=Math.round(c._radius),E=Math.round(c._radiusY||v);this._setPath(c,c._empty()?"M0 0":"AL "+f.x+","+f.y+" "+v+","+E+" 0,"+65535*360)},_setPath:function(c,f){c._path.v=f},_bringToFront:function(c){io(c._container)},_bringToBack:function(c){nl(c._container)}},Iv=ot.vml?Uf:be,Bf=fo.extend({_initContainer:function(){this._container=Iv("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Iv("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){cn(this._container),rn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fo.prototype._update.call(this);var c=this._bounds,f=c.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(f))&&(this._svgSize=f,v.setAttribute("width",f.x),v.setAttribute("height",f.y)),gt(v,c.min),v.setAttribute("viewBox",[c.min.x,c.min.y,f.x,f.y].join(" ")),this.fire("update")}},_initPath:function(c){var f=c._path=Iv("path");c.options.className&&St(f,c.options.className),c.options.interactive&&St(f,"leaflet-interactive"),this._updateStyle(c),this._layers[u(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){cn(c._path),c.removeInteractiveTarget(c._path),delete this._layers[u(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var f=c._path,v=c.options;f&&(v.stroke?(f.setAttribute("stroke",v.color),f.setAttribute("stroke-opacity",v.opacity),f.setAttribute("stroke-width",v.weight),f.setAttribute("stroke-linecap",v.lineCap),f.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?f.setAttribute("stroke-dasharray",v.dashArray):f.removeAttribute("stroke-dasharray"),v.dashOffset?f.setAttribute("stroke-dashoffset",v.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),v.fill?(f.setAttribute("fill",v.fillColor||v.color),f.setAttribute("fill-opacity",v.fillOpacity),f.setAttribute("fill-rule",v.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(c,f){this._setPath(c,re(c._parts,f))},_updateCircle:function(c){var f=c._point,v=Math.max(Math.round(c._radius),1),E=Math.max(Math.round(c._radiusY),1)||v,A="a"+v+","+E+" 0 1,0 ",U=c._empty()?"M0 0":"M"+(f.x-v)+","+f.y+A+v*2+",0 "+A+-v*2+",0 ";this._setPath(c,U)},_setPath:function(c,f){c._path.setAttribute("d",f)},_bringToFront:function(c){io(c._path)},_bringToBack:function(c){nl(c._path)}});ot.vml&&Bf.include(gz);function LP(c){return ot.svg||ot.vml?new Bf(c):null}Rt.include({getRenderer:function(c){var f=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return f||(f=this._renderer=this._createRenderer()),this.hasLayer(f)||this.addLayer(f),f},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var f=this._paneRenderers[c];return f===void 0&&(f=this._createRenderer({pane:c}),this._paneRenderers[c]=f),f},_createRenderer:function(c){return this.options.preferCanvas&&DP(c)||LP(c)}});var FP=hd.extend({initialize:function(c,f){hd.prototype.initialize.call(this,this._boundsToLatLngs(c),f)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=$e(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function vz(c,f){return new FP(c,f)}Bf.create=Iv,Bf.pointsToPath=re,ho.geometryToLayer=Sv,ho.coordsToLatLng=lb,ho.coordsToLatLngs=Ev,ho.latLngToCoords=cb,ho.latLngsToCoords=Pv,ho.getFeature=fd,ho.asFeature=Cv,Rt.mergeOptions({boxZoom:!0});var $P=$s.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){rn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){cn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Li(),Ef(),this._startPoint=this._map.mouseEventToContainerPoint(c),ht(document,{contextmenu:Fs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=At("div","leaflet-zoom-box",this._container),St(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var f=new X(this._point,this._startPoint),v=f.getSize();gt(this._box,f.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(cn(this._box),Nn(this._container,"leaflet-crosshair")),Fi(),Pf(),rn(document,{contextmenu:Fs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var f=new Te(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(f).fire("boxzoomend",{boxZoomBounds:f})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Rt.addInitHook("addHandler","boxZoom",$P),Rt.mergeOptions({doubleClickZoom:!0});var VP=$s.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var f=this._map,v=f.getZoom(),E=f.options.zoomDelta,A=c.originalEvent.shiftKey?v-E:v+E;f.options.doubleClickZoom==="center"?f.setZoom(A):f.setZoomAround(c.containerPoint,A)}});Rt.addInitHook("addHandler","doubleClickZoom",VP),Rt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var zP=$s.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new $i(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}St(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Nn(this._map._container,"leaflet-grab"),Nn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var f=$e(this._map.options.maxBounds);this._offsetLimit=fe(this._map.latLngToContainerPoint(f.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(f.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var f=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(f),this._prunePositions(f)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,f){return c-(c-f)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),f=this._offsetLimit;c.x<f.min.x&&(c.x=this._viscousLimit(c.x,f.min.x)),c.y<f.min.y&&(c.y=this._viscousLimit(c.y,f.min.y)),c.x>f.max.x&&(c.x=this._viscousLimit(c.x,f.max.x)),c.y>f.max.y&&(c.y=this._viscousLimit(c.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,f=Math.round(c/2),v=this._initialWorldOffset,E=this._draggable._newPos.x,A=(E-f+v)%c+f-v,U=(E+f+v)%c-f-v,Q=Math.abs(A+v)<Math.abs(U+v)?A:U;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(c){var f=this._map,v=f.options,E=!v.inertia||c.noInertia||this._times.length<2;if(f.fire("dragend",c),E)f.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),U=(this._lastTime-this._times[0])/1e3,Q=v.easeLinearity,ue=A.multiplyBy(Q/U),he=ue.distanceTo([0,0]),Pe=Math.min(v.inertiaMaxSpeed,he),Ge=ue.multiplyBy(Pe/he),ft=Pe/(v.inertiaDeceleration*Q),Pt=Ge.multiplyBy(-ft/2).round();!Pt.x&&!Pt.y?f.fire("moveend"):(Pt=f._limitOffset(Pt,f.options.maxBounds),O(function(){f.panBy(Pt,{duration:ft,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});Rt.addInitHook("addHandler","dragging",zP),Rt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var UP=$s.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),ht(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),rn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,f=document.documentElement,v=c.scrollTop||f.scrollTop,E=c.scrollLeft||f.scrollLeft;this._map._container.focus(),window.scrollTo(E,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var f=this._panKeys={},v=this.keyCodes,E,A;for(E=0,A=v.left.length;E<A;E++)f[v.left[E]]=[-1*c,0];for(E=0,A=v.right.length;E<A;E++)f[v.right[E]]=[c,0];for(E=0,A=v.down.length;E<A;E++)f[v.down[E]]=[0,c];for(E=0,A=v.up.length;E<A;E++)f[v.up[E]]=[0,-1*c]},_setZoomDelta:function(c){var f=this._zoomKeys={},v=this.keyCodes,E,A;for(E=0,A=v.zoomIn.length;E<A;E++)f[v.zoomIn[E]]=c;for(E=0,A=v.zoomOut.length;E<A;E++)f[v.zoomOut[E]]=-c},_addHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){rn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var f=c.keyCode,v=this._map,E;if(f in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(E=this._panKeys[f],c.shiftKey&&(E=q(E).multiplyBy(3)),v.options.maxBounds&&(E=v._limitOffset(q(E),v.options.maxBounds)),v.options.worldCopyJump){var A=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(E)));v.panTo(A)}else v.panBy(E)}else if(f in this._zoomKeys)v.setZoom(v.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[f]);else if(f===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;Fs(c)}}});Rt.addInitHook("addHandler","keyboard",UP),Rt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var BP=$s.extend({addHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){rn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var f=gv(c),v=this._map.options.wheelDebounceTime;this._delta+=f,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var E=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),E),Fs(c)},_performZoom:function(){var c=this._map,f=c.getZoom(),v=this._map.options.zoomSnap||0;c._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,U=v?Math.ceil(A/v)*v:A,Q=c._limitZoom(f+(this._delta>0?U:-U))-f;this._delta=0,this._startTime=null,Q&&(c.options.scrollWheelZoom==="center"?c.setZoom(f+Q):c.setZoomAround(this._lastMousePos,f+Q))}});Rt.addInitHook("addHandler","scrollWheelZoom",BP);var yz=600;Rt.mergeOptions({tapHold:ot.touchNative&&ot.safari&&ot.mobile,tapTolerance:15});var WP=$s.extend({addHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){rn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var f=c.touches[0];this._startPos=this._newPos=new D(f.clientX,f.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ht(document,"touchend",kn),ht(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),yz),ht(document,"touchend touchcancel contextmenu",this._cancel,this),ht(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){rn(document,"touchend",kn),rn(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),rn(document,"touchend touchcancel contextmenu",this._cancel,this),rn(document,"touchmove",this._onMove,this)},_onMove:function(c){var f=c.touches[0];this._newPos=new D(f.clientX,f.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,f){var v=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY});v._simulated=!0,f.target.dispatchEvent(v)}});Rt.addInitHook("addHandler","tapHold",WP),Rt.mergeOptions({touchZoom:ot.touch,bounceAtZoomLimits:!0});var HP=$s.extend({addHooks:function(){St(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Nn(this._map._container,"leaflet-touch-zoom"),rn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var f=this._map;if(!(!c.touches||c.touches.length!==2||f._animatingZoom||this._zooming)){var v=f.mouseEventToContainerPoint(c.touches[0]),E=f.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=f.getSize()._divideBy(2),this._startLatLng=f.containerPointToLatLng(this._centerPoint),f.options.touchZoom!=="center"&&(this._pinchStartLatLng=f.containerPointToLatLng(v.add(E)._divideBy(2))),this._startDist=v.distanceTo(E),this._startZoom=f.getZoom(),this._moved=!1,this._zooming=!0,f._stop(),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend touchcancel",this._onTouchEnd,this),kn(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var f=this._map,v=f.mouseEventToContainerPoint(c.touches[0]),E=f.mouseEventToContainerPoint(c.touches[1]),A=v.distanceTo(E)/this._startDist;if(this._zoom=f.getScaleZoom(A,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&A<1||this._zoom>f.getMaxZoom()&&A>1)&&(this._zoom=f._limitZoom(this._zoom)),f.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var U=v._add(E)._divideBy(2)._subtract(this._centerPoint);if(A===1&&U.x===0&&U.y===0)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(U),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),$(this._animRequest);var Q=o(f._move,f,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(Q,this,!0),kn(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$(this._animRequest),rn(document,"touchmove",this._onTouchMove,this),rn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Rt.addInitHook("addHandler","touchZoom",HP),Rt.BoxZoom=$P,Rt.DoubleClickZoom=VP,Rt.Drag=zP,Rt.Keyboard=UP,Rt.ScrollWheelZoom=BP,Rt.TapHold=WP,Rt.TouchZoom=HP,n.Bounds=X,n.Browser=ot,n.CRS=Ce,n.Canvas=MP,n.Circle=ob,n.CircleMarker=Nv,n.Class=B,n.Control=ws,n.DivIcon=IP,n.DivOverlay=ga,n.DomEvent=vv,n.DomUtil=mv,n.Draggable=$i,n.Evented=K,n.FeatureGroup=Hn,n.GeoJSON=ho,n.GridLayer=zf,n.Handler=$s,n.Icon=pa,n.ImageOverlay=Tv,n.LatLng=ze,n.LatLngBounds=Te,n.Layer=sn,n.LayerGroup=In,n.LineUtil=W,n.Map=Rt,n.Marker=jv,n.Mixin=Ac,n.Path=ll,n.Point=D,n.PolyUtil=cd,n.Polygon=hd,n.Polyline=uo,n.Popup=Rv,n.PosAnimation=Of,n.Projection=Fe,n.Rectangle=FP,n.Renderer=fo,n.SVG=Bf,n.SVGOverlay=kP,n.TileLayer=md,n.Tooltip=kv,n.Transformation=Z,n.Util=M,n.VideoOverlay=RP,n.bind=o,n.bounds=fe,n.canvas=DP,n.circle=sz,n.circleMarker=rz,n.control=as,n.divIcon=fz,n.extend=s,n.featureGroup=dd,n.geoJSON=TP,n.geoJson=oz,n.gridLayer=mz,n.icon=tz,n.imageOverlay=lz,n.latLng=Le,n.latLngBounds=$e,n.layerGroup=ol,n.map=rd,n.marker=nz,n.point=q,n.polygon=az,n.polyline=iz,n.popup=dz,n.rectangle=vz,n.setOptions=_,n.stamp=u,n.svg=LP,n.svgOverlay=uz,n.tileLayer=AP,n.tooltip=hz,n.transformation=ce,n.version=r,n.videoOverlay=cz;var xz=window.L;n.noConflict=function(){return window.L=xz,this},window.L=n})})(Oj,Oj.exports);var Bw=Oj.exports;const pf=Go(Bw);function q$(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function G$(t,e){return e==null?function(r,s){const a=w.useRef();return a.current||(a.current=t(r,s)),a}:function(r,s){const a=w.useRef();a.current||(a.current=t(r,s));const o=w.useRef(r),{instance:l}=a.current;return w.useEffect(function(){o.current!==r&&(e(l,r,o.current),o.current=r)},[l,r,s]),a}}function hde(t,e){w.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function K$(t){return function(n){const r=W$(),s=t(H$(n,r),r);return ide(r.map,n.attribution),dde(s.current,n.eventHandlers),hde(s.current,r),s}}function fde(t,e){const n=G$(t,e),r=K$(n);return cde(r)}function mde(t,e){const n=G$(t,e),r=K$(n);return ude(r)}function pde(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function gde(){return W$().map}function FE(t){const e=gde();return w.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Mj(){return Mj=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mj.apply(this,arguments)}function vde({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:a,placeholder:o,style:l,whenReady:u,zoom:d,...h},m){const[p]=w.useState({className:s,id:a,style:l}),[y,j]=w.useState(null);w.useImperativeHandle(m,()=>(y==null?void 0:y.map)??null,[y]);const _=w.useCallback(b=>{if(b!==null&&y===null){const x=new Bw.Map(b,h);n!=null&&d!=null?x.setView(n,d):t!=null&&x.fitBounds(t,e),u!=null&&x.whenReady(u),j(ode(x))}},[]);w.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const N=y?oe.createElement(B$,{value:y},r):o??null;return oe.createElement("div",Mj({},p,{ref:_}),N)}const $E=w.forwardRef(vde),VE=fde(function({position:e,...n},r){const s=new Bw.Marker(e,n);return q$(s,lde(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),zE=mde(function({url:e,...n},r){const s=new Bw.TileLayer(e,H$(n,r));return q$(s,r)},function(e,n,r){pde(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});delete pf.Icon.Default.prototype._getIconUrl;pf.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const yde=({open:t,onOpenChange:e,listing:n})=>{var O;const{currentUser:r,userProfile:s}=jn(),{createPaymentRequest:a,loading:o}=zw(),[l,u]=w.useState("method"),[d,h]=w.useState(null),[m,p]=w.useState({}),[y,j]=w.useState({location:"",date:void 0,time:"",notes:""}),[_,N]=w.useState(!1),[b,x]=w.useState(null),S=($,M)=>{h($),p(M),u("details")},C=async()=>{if(!(!r||!d))try{const $=y.date&&y.time?new Date(`${gr(y.date,"yyyy-MM-dd")} ${y.time}`):void 0;await a({listingId:n.id,buyerId:r.uid,sellerId:n.sellerId,amount:n.price,currency:n.currency||"EUR",paymentMethod:d,meetingLocation:y.location,meetingDateTime:$,paymentDetails:m,notes:y.notes}),e(!1),R()}catch($){console.error("Erreur lors de la création de la demande:",$)}},R=()=>{u("method"),h(null),p({}),j({location:"",date:void 0,time:"",notes:""})},z=($,M)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:M||"EUR"}).format($),k=$=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[$]||$;async function I($,M){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${$}&lon=${M}`)).json()).display_name||""}function V(){return FE({click:async $=>{x([$.latlng.lat,$.latlng.lng]),N(!0);const M=await I($.latlng.lat,$.latlng.lng);j(B=>({...B,location:M})),N(!1),Ne.success("Adresse détectée automatiquement !")}}),b?i.jsx(VE,{position:b}):null}const T=()=>{if(!navigator.geolocation){Ne.error("La géolocalisation n'est pas supportée par ce navigateur.");return}N(!0),navigator.geolocation.getCurrentPosition(async $=>{const{latitude:M,longitude:B}=$.coords;x([M,B]);const J=await I(M,B);J&&j(ee=>({...ee,location:J})),N(!1)},()=>{Ne.error("Impossible d'accéder à la position."),N(!1)})};return i.jsx(Ua,{open:t,onOpenChange:e,children:i.jsxs(ea,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(Ba,{children:[i.jsxs(ta,{className:"flex items-center gap-2",children:[i.jsx(Qn,{className:"w-5 h-5"}),"Demande de paiement"]}),i.jsxs(cu,{children:['Créez une demande de paiement sécurisée pour "',n.title,'"']})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[i.jsxs("div",{className:`flex items-center ${l==="method"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),i.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${l==="details"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Détails"})]}),i.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${l==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),i.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),i.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-4",children:[((O=n.images)==null?void 0:O[0])&&i.jsx("img",{src:n.images[0],alt:n.title,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:n.title}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",n.sellerName," • ",n.sellerUniversity]}),i.jsx("p",{className:"text-lg font-bold text-primary",children:z(n.price,n.currency||"EUR")})]})]})}),l==="method"&&i.jsx(z$,{amount:n.price,currency:n.currency||"EUR",onMethodSelect:S,selectedMethod:d}),l==="details"&&d&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Ot,{className:"w-5 h-5 text-green-600"}),i.jsxs("span",{className:"font-medium",children:["Mode de paiement sélectionné : ",k(d)]})]}),d==="cash"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[i.jsx(Yr,{className:"w-5 h-5"}),"Détails de la rencontre"]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx(Ze,{id:"meeting-location",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",value:y.location,onChange:$=>j(M=>({...M,location:$.target.value})),className:"flex-1"}),i.jsx(te,{type:"button",variant:"outline",onClick:T,disabled:_,title:"Détecter ma position",children:_?i.jsx("span",{className:"animate-spin",children:"📍"}):i.jsx("span",{children:"📍"})})]})]}),i.jsx("div",{className:"mt-3",children:i.jsxs($E,{center:b||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[i.jsx(zE,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),i.jsx(V,{})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{children:"Date de rencontre"}),i.jsxs(Pue,{children:[i.jsx(Cue,{asChild:!0,children:i.jsxs(te,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[i.jsx(bi,{className:"mr-2 h-4 w-4"}),y.date?gr(y.date,"PPP",{locale:Xr}):i.jsx("span",{children:"Choisir une date"})]})}),i.jsx(E$,{className:"w-auto p-0",children:i.jsx(m$,{mode:"single",selected:y.date,onSelect:$=>j(M=>({...M,date:$})),disabled:$=>$<new Date,initialFocus:!0})})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"meeting-time",children:"Heure de rencontre"}),i.jsx(Ze,{id:"meeting-time",type:"time",value:y.time,onChange:$=>j(M=>({...M,time:$.target.value})),className:"mt-1"})]})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),i.jsx(Ei,{id:"payment-notes",placeholder:"Informations complémentaires pour le vendeur...",value:y.notes,onChange:$=>j(M=>({...M,notes:$.target.value})),rows:3,className:"mt-1"})]}),i.jsxs(Kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(qt,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Zt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Sécurité :"})," Un code de sécurité unique sera généré pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(te,{variant:"outline",onClick:()=>u("method"),className:"flex-1",children:"Retour"}),i.jsx(te,{onClick:()=>u("confirmation"),className:"flex-1",disabled:d==="cash"&&!y.location,children:"Continuer"})]})]}),l==="confirmation"&&d&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Récapitulatif de la demande"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),i.jsx("p",{className:"font-medium",children:k(d)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),i.jsx("p",{className:"font-medium",children:z(n.price,n.currency||"EUR")})]}),d==="cash"&&y.location&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),i.jsx("p",{className:"font-medium",children:y.location})]}),y.date&&y.time&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),i.jsxs("p",{className:"font-medium",children:[gr(y.date,"PPP",{locale:Xr})," à ",y.time]})]})]})]}),y.notes&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),i.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:y.notes})]})]}),i.jsxs(Kt,{children:[i.jsx(ac,{className:"h-4 w-4"}),i.jsx(Zt,{children:"En créant cette demande, vous vous engagez à effectuer le paiement selon les modalités convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(te,{variant:"outline",onClick:()=>u("details"),className:"flex-1",children:"Retour"}),i.jsx(te,{onClick:C,className:"flex-1",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ot,{className:"w-4 h-4 mr-2"}),"Créer la demande"]})})]})]})]})]})})},xde=({listing:t,className:e})=>{const{currentUser:n,userProfile:r}=jn(),{createConversation:s,setCurrentConversation:a,conversations:o}=Iw(),l=yr(),[u,d]=w.useState(!1),[h,m]=w.useState(!1),[p,y]=w.useState(""),[j,_]=w.useState(""),[N,b]=w.useState(!1);if((n==null?void 0:n.uid)===t.sellerId)return null;const x=o.find(k=>k.listingId===t.id&&k.participants.includes((n==null?void 0:n.uid)||"")&&k.participants.includes(t.sellerId)),S=()=>{if(!n){l("/auth");return}if(x){a(x),l("/messages");return}const k=`Bonjour ${t.sellerName},

Je suis intéressé(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si nécessaire.

Cordialement,
${(r==null?void 0:r.displayName)||"Un étudiant intéressé"}`;y(k),_((r==null?void 0:r.email)||""),d(!0)},C=()=>{if(!n){l("/auth");return}m(!0)},R=async()=>{var k;if(!p.trim()||!j.trim()||!n||!r){Ne.error("Veuillez remplir tous les champs");return}b(!0);try{const I=await s(t.id,t.title,t.price,(k=t.images)==null?void 0:k[0],n.uid,t.sellerId,{displayName:r.displayName,photoURL:r.photoURL,university:r.university,isVerified:r.isVerified,email:r.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},p.trim());d(!1),Ne.success(i.jsxs("div",{className:"flex items-center justify-between w-full",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Message envoyé !"}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["📧 ",t.sellerName," recevra une notification email"]})]}),i.jsxs(te,{size:"sm",variant:"ghost",onClick:()=>{Ne.dismiss(),l("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",i.jsx(Ep,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{l("/messages")},2e3)}catch(I){console.error("Erreur lors de l'envoi du message:",I),Ne.error("Erreur lors de l'envoi du message")}finally{b(!1)}},z=(k,I)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const V=I||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:V}).format(k)}catch{return`${k} €`}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(te,{onClick:S,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[i.jsx(Rn,{className:"w-4 h-4 mr-2"}),x?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&i.jsxs(te,{onClick:C,variant:"outline",className:"flex items-center gap-2",children:[i.jsx(Qn,{className:"w-4 h-4"}),"Payer"]})]}),i.jsx(Ua,{open:u,onOpenChange:d,children:i.jsxs(ea,{className:"max-w-md",children:[i.jsx(Ba,{children:i.jsxs(ta,{className:"flex items-center gap-2",children:[i.jsx(Rn,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs(Uo,{className:"w-8 h-8",children:[i.jsx(Bo,{src:t.sellerAvatar||void 0}),i.jsx(Wo,{children:t.sellerName[0]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),i.jsx("p",{className:"text-sm font-medium",children:t.title}),i.jsx("p",{className:"text-sm text-primary font-semibold",children:z(t.price,t.currency)})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"contact-email",children:"Votre email"}),i.jsx(Ze,{id:"contact-email",type:"email",value:j,onChange:k=>_(k.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"contact-message",children:"Votre message"}),i.jsx(Ei,{id:"contact-message",value:p,onChange:k=>y(k.target.value),placeholder:"Décrivez votre intérêt pour cette annonce...",rows:6,className:"mt-1"})]}),i.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(ac,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"📧 Notification automatique"}),i.jsxs("p",{children:["Votre message sera envoyé via la messagerie StudyMarket ET ",t.sellerName," recevra une notification email pour répondre rapidement."]})]})]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(te,{variant:"outline",onClick:()=>d(!1),className:"flex-1",children:"Annuler"}),i.jsx(te,{onClick:R,disabled:N||!p.trim()||!j.trim(),className:"flex-1",children:N?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Th,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),i.jsx(yde,{open:h,onOpenChange:m,listing:t})]})},wde=()=>{var x;const{id:t}=DS(),e=yr(),{currentUser:n}=jn(),{currentListing:r,loading:s,fetchListingById:a}=Jg(),{fetchUserFavorites:o}=MF(),[l,u]=w.useState(0);if(w.useEffect(()=>{t&&a(t)},[t,a]),w.useEffect(()=>{n&&o(n.uid)},[n,o]),s)return i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"animate-pulse space-y-6",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!r)return i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsx(Un,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a été supprimée."}),i.jsx(te,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const d=r,h=(n==null?void 0:n.uid)===d.sellerId,m=(S,C)=>{if(d.transactionType==="donation")return"Gratuit";if(d.transactionType==="exchange")return"Échange";const R=C||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:R}).format(S)}catch{return`${S} €`}},p=S=>{switch(S){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return S}},y=S=>{switch(S){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-orange-100 text-orange-800 border-orange-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},j=()=>{switch(d.transactionType){case"donation":return i.jsx(Ch,{className:"w-4 h-4"});case"exchange":return i.jsx($o,{className:"w-4 h-4"});case"service":return i.jsx(sf,{className:"w-4 h-4"});default:return i.jsx(Kx,{className:"w-4 h-4"})}},_=()=>{switch(d.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},N=()=>{d.images&&d.images.length>1&&u(S=>S===d.images.length-1?0:S+1)},b=()=>{d.images&&d.images.length>1&&u(S=>S===0?d.images.length-1:S-1)};return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx("div",{className:"border-b border-border bg-muted/30",children:i.jsx("div",{className:"container mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Ue,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),i.jsx("span",{children:"/"}),i.jsx(Ue,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),i.jsx("span",{children:"/"}),i.jsx("span",{className:"text-foreground",children:d.title})]})})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs(te,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[i.jsx(iu,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:d.images&&d.images.length>0?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:d.images[l],alt:d.title,className:"w-full h-full object-cover"}),d.images.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:b,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image précédente",children:i.jsx(wX,{className:"w-6 h-6"})}),i.jsx("div",{onClick:N,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:i.jsx(Ra,{className:"w-6 h-6"})}),i.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[l+1," / ",d.images.length]})]}),i.jsxs(Ua,{children:[i.jsx(ch,{asChild:!0,children:i.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:i.jsx(au,{className:"w-5 h-5"})})}),i.jsxs(ea,{className:"max-w-4xl",children:[i.jsx(ta,{children:"Image en plein écran de l'annonce"}),i.jsx("img",{src:d.images[l],alt:d.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(au,{className:"w-16 h-16 mx-auto mb-4"}),i.jsx("p",{children:"Aucune image disponible"})]})})}),d.images&&d.images.length>1&&i.jsx("div",{className:"grid grid-cols-6 gap-2",children:d.images.map((S,C)=>i.jsx("button",{onClick:()=>u(C),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${C===l?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:i.jsx("img",{src:S,alt:`${d.title} ${C+1}`,className:"w-full h-full object-cover"})},C))})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(pe,{children:i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(lt,{className:"bg-primary/10 text-primary border-primary/20",children:[j(),i.jsx("span",{className:"ml-1",children:_()})]}),d.sellerVerified&&i.jsxs(lt,{className:"bg-green-100 text-green-800 border-green-200",children:[i.jsx(qt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),i.jsxs("div",{className:"text-3xl font-bold text-primary",children:[m(d.price,d.currency),d.transactionType==="service"&&i.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),d.transactionType==="exchange"&&d.exchangeFor&&i.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[i.jsx($o,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:"Recherche en échange :"})]}),i.jsx("p",{className:"text-purple-700 mt-1",children:d.exchangeFor})]}),d.aiPriceEstimate&&d.transactionType==="sale"&&i.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[i.jsx(zg,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:"Prix estimé par IA :"})]}),i.jsxs("p",{className:"text-green-700 text-sm",children:[d.aiPriceEstimate.min,"€ - ",d.aiPriceEstimate.max,"€",i.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(d.aiPriceEstimate.confidence*100),"%)"]})]})]}),i.jsx("div",{className:"space-y-3",children:h?i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ue,{to:`/edit-listing/${d.id}`,children:i.jsxs(te,{variant:"outline",className:"w-full",children:[i.jsx(ts,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),i.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):i.jsxs(i.Fragment,{children:[i.jsx(xde,{listing:d,className:"w-full"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(DF,{listing:d,size:"lg",showText:!1}),i.jsx(LF,{listing:d,size:"lg",showText:!1})]}),i.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:i.jsx(Jc,{className:"w-5 h-5"})})]})]})})]})})}),i.jsxs(pe,{children:[i.jsx(et,{children:i.jsx(nt,{className:"text-lg",children:"Vendeur"})}),i.jsx(ge,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Uo,{className:"w-12 h-12",children:[i.jsx(Bo,{src:d.sellerAvatar||void 0}),i.jsx(Wo,{children:(x=d.sellerName[0])==null?void 0:x.toUpperCase()})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-semibold",children:d.sellerName}),d.sellerVerified&&i.jsx(qt,{className:"w-4 h-4 text-green-600"})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:d.sellerUniversity})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"23"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:"98%"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),d.environmentalImpact&&i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"text-lg flex items-center gap-2",children:[i.jsx(Xi,{className:"w-5 h-5 text-green-600"}),"Impact écologique"]})}),i.jsx(ge,{children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",d.environmentalImpact.co2Saved," kg CO₂"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"économisés en achetant d'occasion"})]})})]})]})]}),i.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:d.title}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ph,{className:"w-4 h-4"}),i.jsxs("span",{children:[d.views," vues"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Jn,{className:"w-4 h-4"}),i.jsx("span",{children:ff(d.createdAt,{addSuffix:!0,locale:Xr})})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Yr,{className:"w-4 h-4"}),i.jsx("span",{children:d.location.city})]})]})]}),i.jsx(lt,{className:y(d.condition),children:p(d.condition)})]})}),i.jsx(ge,{children:i.jsx("div",{className:"prose prose-sm max-w-none",children:i.jsx("p",{className:"whitespace-pre-wrap",children:d.description})})})]}),d.tags&&d.tags.length>0&&i.jsxs(pe,{children:[i.jsx(et,{children:i.jsx(nt,{className:"text-lg",children:"Tags"})}),i.jsx(ge,{children:i.jsx("div",{className:"flex flex-wrap gap-2",children:d.tags.map((S,C)=>i.jsx(lt,{variant:"secondary",children:S},C))})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"text-lg flex items-center gap-2",children:[i.jsx(Yr,{className:"w-5 h-5"}),"Localisation"]})}),i.jsxs(ge,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:d.location.city}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.location.state,", ",d.location.country]})]}),d.location.campus&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Campus"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:d.location.campus})]}),d.location.university&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Université"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:d.location.university})]})]})]}),i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"text-lg flex items-center gap-2",children:[i.jsx(qt,{className:"w-5 h-5"}),"Conseils de sécurité"]})}),i.jsx(ge,{children:i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Ot,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Ot,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Vérifiez l'identité de l'autre personne"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Ot,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Testez l'objet avant la transaction"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(ac,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]})]})};var rv=t=>t.type==="checkbox",Xc=t=>t instanceof Date,hs=t=>t==null;const Z$=t=>typeof t=="object";var Xn=t=>!hs(t)&&!Array.isArray(t)&&Z$(t)&&!Xc(t),bde=t=>Xn(t)&&t.target?rv(t.target)?t.target.checked:t.target.value:t,_de=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,jde=(t,e)=>t.has(_de(e)),Nde=t=>{const e=t.constructor&&t.constructor.prototype;return Xn(e)&&e.hasOwnProperty("isPrototypeOf")},UE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Gr(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(UE&&(t instanceof Blob||r))&&(n||Xn(t)))if(e=n?[]:{},!n&&!Nde(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Gr(t[s]));else return t;return e}var Ww=t=>/^\w*$/.test(t),ir=t=>t===void 0,BE=t=>Array.isArray(t)?t.filter(Boolean):[],WE=t=>BE(t.replace(/["|']|\]/g,"").split(/\.|\[/)),tt=(t,e,n)=>{if(!e||!Xn(t))return n;const r=(Ww(e)?[e]:WE(e)).reduce((s,a)=>hs(s)?s:s[a],t);return ir(r)||r===t?ir(t[e])?n:t[e]:r},_a=t=>typeof t=="boolean",an=(t,e,n)=>{let r=-1;const s=Ww(e)?[e]:WE(e),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let u=n;if(r!==o){const d=t[l];u=Xn(d)||Array.isArray(d)?d:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=u,t=t[l]}};const Vk={BLUR:"blur",FOCUS_OUT:"focusout"},Gi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},vo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Sde=oe.createContext(null);Sde.displayName="HookFormContext";var Ede=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const o=a;return e._proxyFormState[o]!==Gi.all&&(e._proxyFormState[o]=!r||Gi.all),t[o]}});return s};const Pde=typeof window<"u"?w.useLayoutEffect:w.useEffect;var Aa=t=>typeof t=="string",Cde=(t,e,n,r,s)=>Aa(t)?(r&&e.watch.add(t),tt(n,t,s)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),tt(n,a))):(r&&(e.watchAll=!0),n),Q$=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Hm=t=>Array.isArray(t)?t:[t],zk=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},Dj=t=>hs(t)||!Z$(t);function Tl(t,e){if(Dj(t)||Dj(e))return t===e;if(Xc(t)&&Xc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const a=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(Xc(a)&&Xc(o)||Xn(a)&&Xn(o)||Array.isArray(a)&&Array.isArray(o)?!Tl(a,o):a!==o)return!1}}return!0}var Ns=t=>Xn(t)&&!Object.keys(t).length,HE=t=>t.type==="file",Ki=t=>typeof t=="function",c0=t=>{if(!UE)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Y$=t=>t.type==="select-multiple",qE=t=>t.type==="radio",Tde=t=>qE(t)||rv(t),N_=t=>c0(t)&&t.isConnected;function Rde(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=ir(t)?r++:t[e[r++]];return t}function kde(t){for(const e in t)if(t.hasOwnProperty(e)&&!ir(t[e]))return!1;return!0}function dr(t,e){const n=Array.isArray(e)?e:Ww(e)?[e]:WE(e),r=n.length===1?t:Rde(t,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(Xn(r)&&Ns(r)||Array.isArray(r)&&kde(r))&&dr(t,n.slice(0,-1)),t}var J$=t=>{for(const e in t)if(Ki(t[e]))return!0;return!1};function u0(t,e={}){const n=Array.isArray(t);if(Xn(t)||n)for(const r in t)Array.isArray(t[r])||Xn(t[r])&&!J$(t[r])?(e[r]=Array.isArray(t[r])?[]:{},u0(t[r],e[r])):hs(t[r])||(e[r]=!0);return e}function X$(t,e,n){const r=Array.isArray(t);if(Xn(t)||r)for(const s in t)Array.isArray(t[s])||Xn(t[s])&&!J$(t[s])?ir(e)||Dj(n[s])?n[s]=Array.isArray(t[s])?u0(t[s],[]):{...u0(t[s])}:X$(t[s],hs(e)?{}:e[s],n[s]):n[s]=!Tl(t[s],e[s]);return n}var sm=(t,e)=>X$(t,e,u0(e));const Uk={value:!1,isValid:!1},Bk={value:!0,isValid:!0};var e8=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ir(t[0].attributes.value)?ir(t[0].value)||t[0].value===""?Bk:{value:t[0].value,isValid:!0}:Bk:Uk}return Uk},t8=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>ir(t)?t:e?t===""?NaN:t&&+t:n&&Aa(t)?new Date(t):r?r(t):t;const Wk={isValid:!1,value:null};var n8=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Wk):Wk;function Hk(t){const e=t.ref;return HE(e)?e.files:qE(e)?n8(t.refs).value:Y$(e)?[...e.selectedOptions].map(({value:n})=>n):rv(e)?e8(t.refs).value:t8(ir(e.value)?t.ref.value:e.value,t)}var Ide=(t,e,n,r)=>{const s={};for(const a of t){const o=tt(e,a);o&&an(s,a,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},d0=t=>t instanceof RegExp,im=t=>ir(t)?t:d0(t)?t.source:Xn(t)?d0(t.value)?t.value.source:t.value:t,qk=t=>({isOnSubmit:!t||t===Gi.onSubmit,isOnBlur:t===Gi.onBlur,isOnChange:t===Gi.onChange,isOnAll:t===Gi.all,isOnTouch:t===Gi.onTouched});const Gk="AsyncFunction";var Ade=t=>!!t&&!!t.validate&&!!(Ki(t.validate)&&t.validate.constructor.name===Gk||Xn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Gk)),Ode=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Kk=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const qm=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const a=tt(t,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(qm(l,e))break}else if(Xn(l)&&qm(l,e))break}}};function Zk(t,e,n){const r=tt(t,n);if(r||Ww(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=tt(e,a),l=tt(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};s.pop()}return{name:n}}var Mde=(t,e,n,r)=>{n(t);const{name:s,...a}=t;return Ns(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||Gi.all))},Dde=(t,e,n)=>!t||!e||t===e||Hm(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),Lde=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,Fde=(t,e)=>!BE(tt(t,e)).length&&dr(t,e),$de=(t,e,n)=>{const r=Hm(tt(t,n));return an(r,"root",e[n]),an(t,n,r),t},Jy=t=>Aa(t);function Qk(t,e,n="validate"){if(Jy(t)||Array.isArray(t)&&t.every(Jy)||_a(t)&&!t)return{type:n,message:Jy(t)?t:"",ref:e}}var _d=t=>Xn(t)&&!d0(t)?t:{value:t,message:""},Yk=async(t,e,n,r,s,a)=>{const{ref:o,refs:l,required:u,maxLength:d,minLength:h,min:m,max:p,pattern:y,validate:j,name:_,valueAsNumber:N,mount:b}=t._f,x=tt(n,_);if(!b||e.has(_))return{};const S=l?l[0]:o,C=$=>{s&&S.reportValidity&&(S.setCustomValidity(_a($)?"":$||""),S.reportValidity())},R={},z=qE(o),k=rv(o),I=z||k,V=(N||HE(o))&&ir(o.value)&&ir(x)||c0(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,T=Q$.bind(null,_,r,R),O=($,M,B,J=vo.maxLength,ee=vo.minLength)=>{const K=$?M:B;R[_]={type:$?J:ee,message:K,ref:o,...T($?J:ee,K)}};if(a?!Array.isArray(x)||!x.length:u&&(!I&&(V||hs(x))||_a(x)&&!x||k&&!e8(l).isValid||z&&!n8(l).isValid)){const{value:$,message:M}=Jy(u)?{value:!!u,message:u}:_d(u);if($&&(R[_]={type:vo.required,message:M,ref:S,...T(vo.required,M)},!r))return C(M),R}if(!V&&(!hs(m)||!hs(p))){let $,M;const B=_d(p),J=_d(m);if(!hs(x)&&!isNaN(x)){const ee=o.valueAsNumber||x&&+x;hs(B.value)||($=ee>B.value),hs(J.value)||(M=ee<J.value)}else{const ee=o.valueAsDate||new Date(x),K=q=>new Date(new Date().toDateString()+" "+q),D=o.type=="time",G=o.type=="week";Aa(B.value)&&x&&($=D?K(x)>K(B.value):G?x>B.value:ee>new Date(B.value)),Aa(J.value)&&x&&(M=D?K(x)<K(J.value):G?x<J.value:ee<new Date(J.value))}if(($||M)&&(O(!!$,B.message,J.message,vo.max,vo.min),!r))return C(R[_].message),R}if((d||h)&&!V&&(Aa(x)||a&&Array.isArray(x))){const $=_d(d),M=_d(h),B=!hs($.value)&&x.length>+$.value,J=!hs(M.value)&&x.length<+M.value;if((B||J)&&(O(B,$.message,M.message),!r))return C(R[_].message),R}if(y&&!V&&Aa(x)){const{value:$,message:M}=_d(y);if(d0($)&&!x.match($)&&(R[_]={type:vo.pattern,message:M,ref:o,...T(vo.pattern,M)},!r))return C(M),R}if(j){if(Ki(j)){const $=await j(x,n),M=Qk($,S);if(M&&(R[_]={...M,...T(vo.validate,M.message)},!r))return C(M.message),R}else if(Xn(j)){let $={};for(const M in j){if(!Ns($)&&!r)break;const B=Qk(await j[M](x,n),S,M);B&&($={...B,...T(M,B.message)},C(B.message),r&&(R[_]=$))}if(!Ns($)&&(R[_]={ref:S,...$},!r))return R}}return C(!0),R};const Vde={mode:Gi.onSubmit,reValidateMode:Gi.onChange,shouldFocusError:!0};function zde(t={}){let e={...Vde,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ki(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=Xn(e.defaultValues)||Xn(e.values)?Gr(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Gr(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...h};const p={array:zk(),state:zk()},y=e.criteriaMode===Gi.all,j=H=>Y=>{clearTimeout(d),d=setTimeout(H,Y)},_=async H=>{if(!e.disabled&&(h.isValid||m.isValid||H)){const Y=e.resolver?Ns((await k()).errors):await V(r,!0);Y!==n.isValid&&p.state.next({isValid:Y})}},N=(H,Y)=>{!e.disabled&&(h.isValidating||h.validatingFields||m.isValidating||m.validatingFields)&&((H||Array.from(l.mount)).forEach(se=>{se&&(Y?an(n.validatingFields,se,Y):dr(n.validatingFields,se))}),p.state.next({validatingFields:n.validatingFields,isValidating:!Ns(n.validatingFields)}))},b=(H,Y=[],se,je,ye=!0,we=!0)=>{if(je&&se&&!e.disabled){if(o.action=!0,we&&Array.isArray(tt(r,H))){const Ie=se(tt(r,H),je.argA,je.argB);ye&&an(r,H,Ie)}if(we&&Array.isArray(tt(n.errors,H))){const Ie=se(tt(n.errors,H),je.argA,je.argB);ye&&an(n.errors,H,Ie),Fde(n.errors,H)}if((h.touchedFields||m.touchedFields)&&we&&Array.isArray(tt(n.touchedFields,H))){const Ie=se(tt(n.touchedFields,H),je.argA,je.argB);ye&&an(n.touchedFields,H,Ie)}(h.dirtyFields||m.dirtyFields)&&(n.dirtyFields=sm(s,a)),p.state.next({name:H,isDirty:O(H,Y),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else an(a,H,Y)},x=(H,Y)=>{an(n.errors,H,Y),p.state.next({errors:n.errors})},S=H=>{n.errors=H,p.state.next({errors:n.errors,isValid:!1})},C=(H,Y,se,je)=>{const ye=tt(r,H);if(ye){const we=tt(a,H,ir(se)?tt(s,H):se);ir(we)||je&&je.defaultChecked||Y?an(a,H,Y?we:Hk(ye._f)):B(H,we),o.mount&&_()}},R=(H,Y,se,je,ye)=>{let we=!1,Ie=!1;const Me={name:H};if(!e.disabled){if(!se||je){(h.isDirty||m.isDirty)&&(Ie=n.isDirty,n.isDirty=Me.isDirty=O(),we=Ie!==Me.isDirty);const qe=Tl(tt(s,H),Y);Ie=!!tt(n.dirtyFields,H),qe?dr(n.dirtyFields,H):an(n.dirtyFields,H,!0),Me.dirtyFields=n.dirtyFields,we=we||(h.dirtyFields||m.dirtyFields)&&Ie!==!qe}if(se){const qe=tt(n.touchedFields,H);qe||(an(n.touchedFields,H,se),Me.touchedFields=n.touchedFields,we=we||(h.touchedFields||m.touchedFields)&&qe!==se)}we&&ye&&p.state.next(Me)}return we?Me:{}},z=(H,Y,se,je)=>{const ye=tt(n.errors,H),we=(h.isValid||m.isValid)&&_a(Y)&&n.isValid!==Y;if(e.delayError&&se?(u=j(()=>x(H,se)),u(e.delayError)):(clearTimeout(d),u=null,se?an(n.errors,H,se):dr(n.errors,H)),(se?!Tl(ye,se):ye)||!Ns(je)||we){const Ie={...je,...we&&_a(Y)?{isValid:Y}:{},errors:n.errors,name:H};n={...n,...Ie},p.state.next(Ie)}},k=async H=>{N(H,!0);const Y=await e.resolver(a,e.context,Ide(H||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return N(H),Y},I=async H=>{const{errors:Y}=await k(H);if(H)for(const se of H){const je=tt(Y,se);je?an(n.errors,se,je):dr(n.errors,se)}else n.errors=Y;return Y},V=async(H,Y,se={valid:!0})=>{for(const je in H){const ye=H[je];if(ye){const{_f:we,...Ie}=ye;if(we){const Me=l.array.has(we.name),qe=ye._f&&Ade(ye._f);qe&&h.validatingFields&&N([je],!0);const Tt=await Yk(ye,l.disabled,a,y,e.shouldUseNativeValidation&&!Y,Me);if(qe&&h.validatingFields&&N([je]),Tt[we.name]&&(se.valid=!1,Y))break;!Y&&(tt(Tt,we.name)?Me?$de(n.errors,Tt,we.name):an(n.errors,we.name,Tt[we.name]):dr(n.errors,we.name))}!Ns(Ie)&&await V(Ie,Y,se)}}return se.valid},T=()=>{for(const H of l.unMount){const Y=tt(r,H);Y&&(Y._f.refs?Y._f.refs.every(se=>!N_(se)):!N_(Y._f.ref))&&Ce(H)}l.unMount=new Set},O=(H,Y)=>!e.disabled&&(H&&Y&&an(a,H,Y),!Tl(q(),s)),$=(H,Y,se)=>Cde(H,l,{...o.mount?a:ir(Y)?s:Aa(H)?{[H]:Y}:Y},se,Y),M=H=>BE(tt(o.mount?a:s,H,e.shouldUnregister?tt(s,H,[]):[])),B=(H,Y,se={})=>{const je=tt(r,H);let ye=Y;if(je){const we=je._f;we&&(!we.disabled&&an(a,H,t8(Y,we)),ye=c0(we.ref)&&hs(Y)?"":Y,Y$(we.ref)?[...we.ref.options].forEach(Ie=>Ie.selected=ye.includes(Ie.value)):we.refs?rv(we.ref)?we.refs.forEach(Ie=>{(!Ie.defaultChecked||!Ie.disabled)&&(Array.isArray(ye)?Ie.checked=!!ye.find(Me=>Me===Ie.value):Ie.checked=ye===Ie.value||!!ye)}):we.refs.forEach(Ie=>Ie.checked=Ie.value===ye):HE(we.ref)?we.ref.value="":(we.ref.value=ye,we.ref.type||p.state.next({name:H,values:Gr(a)})))}(se.shouldDirty||se.shouldTouch)&&R(H,ye,se.shouldTouch,se.shouldDirty,!0),se.shouldValidate&&G(H)},J=(H,Y,se)=>{for(const je in Y){if(!Y.hasOwnProperty(je))return;const ye=Y[je],we=H+"."+je,Ie=tt(r,we);(l.array.has(H)||Xn(ye)||Ie&&!Ie._f)&&!Xc(ye)?J(we,ye,se):B(we,ye,se)}},ee=(H,Y,se={})=>{const je=tt(r,H),ye=l.array.has(H),we=Gr(Y);an(a,H,we),ye?(p.array.next({name:H,values:Gr(a)}),(h.isDirty||h.dirtyFields||m.isDirty||m.dirtyFields)&&se.shouldDirty&&p.state.next({name:H,dirtyFields:sm(s,a),isDirty:O(H,we)})):je&&!je._f&&!hs(we)?J(H,we,se):B(H,we,se),Kk(H,l)&&p.state.next({...n}),p.state.next({name:o.mount?H:void 0,values:Gr(a)})},K=async H=>{o.mount=!0;const Y=H.target;let se=Y.name,je=!0;const ye=tt(r,se),we=qe=>{je=Number.isNaN(qe)||Xc(qe)&&isNaN(qe.getTime())||Tl(qe,tt(a,se,qe))},Ie=qk(e.mode),Me=qk(e.reValidateMode);if(ye){let qe,Tt;const Lt=Y.type?Hk(ye._f):bde(H),nn=H.type===Vk.BLUR||H.type===Vk.FOCUS_OUT,Cr=!Ode(ye._f)&&!e.resolver&&!tt(n.errors,se)&&!ye._f.deps||Lde(nn,tt(n.touchedFields,se),n.isSubmitted,Me,Ie),zr=Kk(se,l,nn);an(a,se,Lt),nn?(ye._f.onBlur&&ye._f.onBlur(H),u&&u(0)):ye._f.onChange&&ye._f.onChange(H);const Ur=R(se,Lt,nn),si=!Ns(Ur)||zr;if(!nn&&p.state.next({name:se,type:H.type,values:Gr(a)}),Cr)return(h.isValid||m.isValid)&&(e.mode==="onBlur"?nn&&_():nn||_()),si&&p.state.next({name:se,...zr?{}:Ur});if(!nn&&zr&&p.state.next({...n}),e.resolver){const{errors:to}=await k([se]);if(we(Lt),je){const ii=Zk(n.errors,r,se),Ii=Zk(to,r,ii.name||se);qe=Ii.error,se=Ii.name,Tt=Ns(to)}}else N([se],!0),qe=(await Yk(ye,l.disabled,a,y,e.shouldUseNativeValidation))[se],N([se]),we(Lt),je&&(qe?Tt=!1:(h.isValid||m.isValid)&&(Tt=await V(r,!0)));je&&(ye._f.deps&&G(ye._f.deps),z(se,Tt,qe,Ur))}},D=(H,Y)=>{if(tt(n.errors,Y)&&H.focus)return H.focus(),1},G=async(H,Y={})=>{let se,je;const ye=Hm(H);if(e.resolver){const we=await I(ir(H)?H:ye);se=Ns(we),je=H?!ye.some(Ie=>tt(we,Ie)):se}else H?(je=(await Promise.all(ye.map(async we=>{const Ie=tt(r,we);return await V(Ie&&Ie._f?{[we]:Ie}:Ie)}))).every(Boolean),!(!je&&!n.isValid)&&_()):je=se=await V(r);return p.state.next({...!Aa(H)||(h.isValid||m.isValid)&&se!==n.isValid?{}:{name:H},...e.resolver||!H?{isValid:se}:{},errors:n.errors}),Y.shouldFocus&&!je&&qm(r,D,H?ye:l.mount),je},q=H=>{const Y={...o.mount?a:s};return ir(H)?Y:Aa(H)?tt(Y,H):H.map(se=>tt(Y,se))},X=(H,Y)=>({invalid:!!tt((Y||n).errors,H),isDirty:!!tt((Y||n).dirtyFields,H),error:tt((Y||n).errors,H),isValidating:!!tt(n.validatingFields,H),isTouched:!!tt((Y||n).touchedFields,H)}),fe=H=>{H&&Hm(H).forEach(Y=>dr(n.errors,Y)),p.state.next({errors:H?n.errors:{}})},Te=(H,Y,se)=>{const je=(tt(r,H,{_f:{}})._f||{}).ref,ye=tt(n.errors,H)||{},{ref:we,message:Ie,type:Me,...qe}=ye;an(n.errors,H,{...qe,...Y,ref:je}),p.state.next({name:H,errors:n.errors,isValid:!1}),se&&se.shouldFocus&&je&&je.focus&&je.focus()},$e=(H,Y)=>Ki(H)?p.state.subscribe({next:se=>H($(void 0,Y),se)}):$(H,Y,!0),ze=H=>p.state.subscribe({next:Y=>{Dde(H.name,Y.name,H.exact)&&Mde(Y,H.formState||h,_e,H.reRenderRoot)&&H.callback({values:{...a},...n,...Y})}}).unsubscribe,Le=H=>(o.mount=!0,m={...m,...H.formState},ze({...H,formState:m})),Ce=(H,Y={})=>{for(const se of H?Hm(H):l.mount)l.mount.delete(se),l.array.delete(se),Y.keepValue||(dr(r,se),dr(a,se)),!Y.keepError&&dr(n.errors,se),!Y.keepDirty&&dr(n.dirtyFields,se),!Y.keepTouched&&dr(n.touchedFields,se),!Y.keepIsValidating&&dr(n.validatingFields,se),!e.shouldUnregister&&!Y.keepDefaultValue&&dr(s,se);p.state.next({values:Gr(a)}),p.state.next({...n,...Y.keepDirty?{isDirty:O()}:{}}),!Y.keepIsValid&&_()},ne=({disabled:H,name:Y})=>{(_a(H)&&o.mount||H||l.disabled.has(Y))&&(H?l.disabled.add(Y):l.disabled.delete(Y))},ie=(H,Y={})=>{let se=tt(r,H);const je=_a(Y.disabled)||_a(e.disabled);return an(r,H,{...se||{},_f:{...se&&se._f?se._f:{ref:{name:H}},name:H,mount:!0,...Y}}),l.mount.add(H),se?ne({disabled:_a(Y.disabled)?Y.disabled:e.disabled,name:H}):C(H,!0,Y.value),{...je?{disabled:Y.disabled||e.disabled}:{},...e.progressive?{required:!!Y.required,min:im(Y.min),max:im(Y.max),minLength:im(Y.minLength),maxLength:im(Y.maxLength),pattern:im(Y.pattern)}:{},name:H,onChange:K,onBlur:K,ref:ye=>{if(ye){ie(H,Y),se=tt(r,H);const we=ir(ye.value)&&ye.querySelectorAll&&ye.querySelectorAll("input,select,textarea")[0]||ye,Ie=Tde(we),Me=se._f.refs||[];if(Ie?Me.find(qe=>qe===we):we===se._f.ref)return;an(r,H,{_f:{...se._f,...Ie?{refs:[...Me.filter(N_),we,...Array.isArray(tt(s,H))?[{}]:[]],ref:{type:we.type,name:H}}:{ref:we}}}),C(H,!1,void 0,we)}else se=tt(r,H,{}),se._f&&(se._f.mount=!1),(e.shouldUnregister||Y.shouldUnregister)&&!(jde(l.array,H)&&o.action)&&l.unMount.add(H)}}},ae=()=>e.shouldFocusError&&qm(r,D,l.mount),Z=H=>{_a(H)&&(p.state.next({disabled:H}),qm(r,(Y,se)=>{const je=tt(r,se);je&&(Y.disabled=je._f.disabled||H,Array.isArray(je._f.refs)&&je._f.refs.forEach(ye=>{ye.disabled=je._f.disabled||H}))},0,!1))},ce=(H,Y)=>async se=>{let je;se&&(se.preventDefault&&se.preventDefault(),se.persist&&se.persist());let ye=Gr(a);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:we,values:Ie}=await k();n.errors=we,ye=Ie}else await V(r);if(l.disabled.size)for(const we of l.disabled)an(ye,we,void 0);if(dr(n.errors,"root"),Ns(n.errors)){p.state.next({errors:{}});try{await H(ye,se)}catch(we){je=we}}else Y&&await Y({...n.errors},se),ae(),setTimeout(ae);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ns(n.errors)&&!je,submitCount:n.submitCount+1,errors:n.errors}),je)throw je},ve=(H,Y={})=>{tt(r,H)&&(ir(Y.defaultValue)?ee(H,Gr(tt(s,H))):(ee(H,Y.defaultValue),an(s,H,Gr(Y.defaultValue))),Y.keepTouched||dr(n.touchedFields,H),Y.keepDirty||(dr(n.dirtyFields,H),n.isDirty=Y.defaultValue?O(H,Gr(tt(s,H))):O()),Y.keepError||(dr(n.errors,H),h.isValid&&_()),p.state.next({...n}))},ke=(H,Y={})=>{const se=H?Gr(H):s,je=Gr(se),ye=Ns(H),we=ye?s:je;if(Y.keepDefaultValues||(s=se),!Y.keepValues){if(Y.keepDirtyValues){const Ie=new Set([...l.mount,...Object.keys(sm(s,a))]);for(const Me of Array.from(Ie))tt(n.dirtyFields,Me)?an(we,Me,tt(a,Me)):ee(Me,tt(we,Me))}else{if(UE&&ir(H))for(const Ie of l.mount){const Me=tt(r,Ie);if(Me&&Me._f){const qe=Array.isArray(Me._f.refs)?Me._f.refs[0]:Me._f.ref;if(c0(qe)){const Tt=qe.closest("form");if(Tt){Tt.reset();break}}}}for(const Ie of l.mount)ee(Ie,tt(we,Ie))}a=Gr(we),p.array.next({values:{...we}}),p.state.next({values:{...we}})}l={mount:Y.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues,o.watch=!!e.shouldUnregister,p.state.next({submitCount:Y.keepSubmitCount?n.submitCount:0,isDirty:ye?!1:Y.keepDirty?n.isDirty:!!(Y.keepDefaultValues&&!Tl(H,s)),isSubmitted:Y.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ye?{}:Y.keepDirtyValues?Y.keepDefaultValues&&a?sm(s,a):n.dirtyFields:Y.keepDefaultValues&&H?sm(s,H):Y.keepDirty?n.dirtyFields:{},touchedFields:Y.keepTouched?n.touchedFields:{},errors:Y.keepErrors?n.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},be=(H,Y)=>ke(Ki(H)?H(a):H,Y),re=(H,Y={})=>{const se=tt(r,H),je=se&&se._f;if(je){const ye=je.refs?je.refs[0]:je.ref;ye.focus&&(ye.focus(),Y.shouldSelect&&Ki(ye.select)&&ye.select())}},_e=H=>{n={...n,...H}},de={control:{register:ie,unregister:Ce,getFieldState:X,handleSubmit:ce,setError:Te,_subscribe:ze,_runSchema:k,_focusError:ae,_getWatch:$,_getDirty:O,_setValid:_,_setFieldArray:b,_setDisabledField:ne,_setErrors:S,_getFieldArray:M,_reset:ke,_resetDefaultValues:()=>Ki(e.defaultValues)&&e.defaultValues().then(H=>{be(H,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:Z,_subjects:p,_proxyFormState:h,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(H){o=H},get _defaultValues(){return s},get _names(){return l},set _names(H){l=H},get _formState(){return n},get _options(){return e},set _options(H){e={...e,...H}}},subscribe:Le,trigger:G,register:ie,handleSubmit:ce,watch:$e,setValue:ee,getValues:q,reset:be,resetField:ve,clearErrors:fe,unregister:Ce,setError:Te,setFocus:re,getFieldState:X};return{...de,formControl:de}}function uu(t={}){const e=oe.useRef(void 0),n=oe.useRef(void 0),[r,s]=oe.useState({isDirty:!1,isValidating:!1,isLoading:Ki(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ki(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Ki(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=zde(t);e.current={...l,formState:r}}const a=e.current.control;return a._options=t,Pde(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),oe.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),oe.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),oe.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),oe.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),oe.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),oe.useEffect(()=>{t.values&&!Tl(t.values,n.current)?(a._reset(t.values,a._options.resetOptions),n.current=t.values,s(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),oe.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=Ede(r,a),e.current}const Jk=(t,e,n)=>{if(t&&"reportValidity"in t){const r=tt(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},r8=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?Jk(r.ref,n,t):r.refs&&r.refs.forEach(s=>Jk(s,n,t))}},Ude=(t,e)=>{e.shouldUseNativeValidation&&r8(t,e);const n={};for(const r in t){const s=tt(e.fields,r),a=Object.assign(t[r]||{},{ref:s&&s.ref});if(Bde(e.names||Object.keys(t),r)){const o=Object.assign({},tt(n,r));an(o,"root",a),an(n,r,o)}else an(n,r,a)}return n},Bde=(t,e)=>t.some(n=>n.startsWith(e+"."));var Wde=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(m){return t.push(m)})}),e){var u=n[o].types,d=u&&u[r.code];n[o]=Q$(o,e,n,s,d?[].concat(d,r.message):r.message)}t.shift()}return n},du=function(t,e,n){return n===void 0&&(n={}),function(r,s,a){try{return Promise.resolve(function(o,l){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return a.shouldUseNativeValidation&&r8({},a),{errors:{},values:n.raw?r:d}})}catch(d){return l(d)}return u&&u.then?u.then(void 0,l):u}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Ude(Wde(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Wt;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const a={};for(const o of s)a[o]=o;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of a)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(const o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(Wt||(Wt={}));var Xk;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Xk||(Xk={}));const st=Wt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wl=t=>{switch(typeof t){case"undefined":return st.undefined;case"string":return st.string;case"number":return Number.isNaN(t)?st.nan:st.number;case"boolean":return st.boolean;case"function":return st.function;case"bigint":return st.bigint;case"symbol":return st.symbol;case"object":return Array.isArray(t)?st.array:t===null?st.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?st.promise:typeof Map<"u"&&t instanceof Map?st.map:typeof Set<"u"&&t instanceof Set?st.set:typeof Date<"u"&&t instanceof Date?st.date:st.object;default:return st.unknown}},De=Wt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ho extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return s(this),r}static assert(e){if(!(e instanceof Ho))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Wt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ho.create=t=>new Ho(t);const Lj=(t,e)=>{let n;switch(t.code){case De.invalid_type:t.received===st.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case De.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Wt.jsonStringifyReplacer)}`;break;case De.unrecognized_keys:n=`Unrecognized key(s) in object: ${Wt.joinValues(t.keys,", ")}`;break;case De.invalid_union:n="Invalid input";break;case De.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Wt.joinValues(t.options)}`;break;case De.invalid_enum_value:n=`Invalid enum value. Expected ${Wt.joinValues(t.options)}, received '${t.received}'`;break;case De.invalid_arguments:n="Invalid function arguments";break;case De.invalid_return_type:n="Invalid function return type";break;case De.invalid_date:n="Invalid date";break;case De.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Wt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case De.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case De.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case De.custom:n="Invalid input";break;case De.invalid_intersection_types:n="Intersection results could not be merged";break;case De.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case De.not_finite:n="Number must be finite";break;default:n=e.defaultError,Wt.assertNever(t)}return{message:n}};let Hde=Lj;function qde(){return Hde}const Gde=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,a=[...n,...s.path||[]],o={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const u=r.filter(d=>!!d).slice().reverse();for(const d of u)l=d(o,{data:e,defaultError:l}).message;return{...s,path:a,message:l}};function Ke(t,e){const n=qde(),r=Gde({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Lj?void 0:Lj].filter(s=>!!s)});t.common.issues.push(r)}class ei{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return bt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const a=await s.key,o=await s.value;r.push({key:a,value:o})}return ei.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return bt;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const bt=Object.freeze({status:"aborted"}),Nm=t=>({status:"dirty",value:t}),Ri=t=>({status:"valid",value:t}),eI=t=>t.status==="aborted",tI=t=>t.status==="dirty",Lh=t=>t.status==="valid",h0=t=>typeof Promise<"u"&&t instanceof Promise;var it;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(it||(it={}));class dc{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const nI=(t,e)=>{if(Lh(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ho(t.common.issues);return this._error=n,this._error}}};function Ct(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:u??n??l.defaultError}},description:s}}class zt{get description(){return this._def.description}_getType(e){return wl(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:wl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ei,ctx:{common:e.parent.common,data:e.data,parsedType:wl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(h0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wl(e)},s=this._parseSync({data:e,path:r.path,parent:r});return nI(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wl(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return Lh(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(s=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>Lh(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wl(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(h0(s)?s:Promise.resolve(s));return nI(r,a)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,a)=>{const o=e(s),l=()=>a.addIssue({code:De.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Vh({schema:this,typeName:jt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Zl.create(this,this._def)}nullable(){return zh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Wa.create(this)}promise(){return g0.create(this,this._def)}or(e){return m0.create([this,e],this._def)}and(e){return p0.create(this,e,this._def)}transform(e){return new Vh({...Ct(this._def),schema:this,typeName:jt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new $j({...Ct(this._def),innerType:this,defaultValue:n,typeName:jt.ZodDefault})}brand(){return new ghe({typeName:jt.ZodBranded,type:this,...Ct(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Vj({...Ct(this._def),innerType:this,catchValue:n,typeName:jt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return GE.create(this,e)}readonly(){return zj.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Kde=/^c[^\s-]{8,}$/i,Zde=/^[0-9a-z]+$/,Qde=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Yde=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Jde=/^[a-z0-9_-]{21}$/i,Xde=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ehe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,the=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,nhe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let S_;const rhe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,she=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ihe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ahe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ohe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,lhe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,s8="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",che=new RegExp(`^${s8}$`);function i8(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function uhe(t){return new RegExp(`^${i8(t)}$`)}function dhe(t){let e=`${s8}T${i8(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function hhe(t,e){return!!((e==="v4"||!e)&&rhe.test(t)||(e==="v6"||!e)&&ihe.test(t))}function fhe(t,e){if(!Xde.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function mhe(t,e){return!!((e==="v4"||!e)&&she.test(t)||(e==="v6"||!e)&&ahe.test(t))}class Dl extends zt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==st.string){const a=this._getOrReturnCtx(e);return Ke(a,{code:De.invalid_type,expected:st.string,received:a.parsedType}),bt}const r=new ei;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),Ke(s,{code:De.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),Ke(s,{code:De.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?Ke(s,{code:De.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ke(s,{code:De.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")the.test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"email",code:De.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")S_||(S_=new RegExp(nhe,"u")),S_.test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"emoji",code:De.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Yde.test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"uuid",code:De.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")Jde.test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"nanoid",code:De.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")Kde.test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"cuid",code:De.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")Zde.test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"cuid2",code:De.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")Qde.test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"ulid",code:De.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ke(s,{validation:"url",code:De.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"regex",code:De.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),Ke(s,{code:De.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),Ke(s,{code:De.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),Ke(s,{code:De.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?dhe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{code:De.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?che.test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{code:De.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?uhe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{code:De.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?ehe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"duration",code:De.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?hhe(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"ip",code:De.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?fhe(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"jwt",code:De.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?mhe(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"cidr",code:De.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?ohe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"base64",code:De.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?lhe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ke(s,{validation:"base64url",code:De.invalid_string,message:a.message}),r.dirty()):Wt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:De.invalid_string,...it.errToObj(r)})}_addCheck(e){return new Dl({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...it.errToObj(e)})}url(e){return this._addCheck({kind:"url",...it.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...it.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...it.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...it.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...it.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...it.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...it.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...it.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...it.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...it.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...it.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...it.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...it.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...it.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...it.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...it.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...it.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...it.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...it.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...it.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...it.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...it.errToObj(n)})}nonempty(e){return this.min(1,it.errToObj(e))}trim(){return new Dl({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Dl({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Dl({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Dl.create=t=>new Dl({checks:[],typeName:jt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ct(t)});function phe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,a=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return a%o/10**s}class Fh extends zt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==st.number){const a=this._getOrReturnCtx(e);return Ke(a,{code:De.invalid_type,expected:st.number,received:a.parsedType}),bt}let r;const s=new ei;for(const a of this._def.checks)a.kind==="int"?Wt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{code:De.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:De.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:De.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?phe(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:De.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{code:De.not_finite,message:a.message}),s.dirty()):Wt.assertNever(a);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,it.toString(n))}gt(e,n){return this.setLimit("min",e,!1,it.toString(n))}lte(e,n){return this.setLimit("max",e,!0,it.toString(n))}lt(e,n){return this.setLimit("max",e,!1,it.toString(n))}setLimit(e,n,r,s){return new Fh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:it.toString(s)}]})}_addCheck(e){return new Fh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:it.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:it.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:it.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:it.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:it.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:it.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:it.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:it.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:it.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Wt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Fh.create=t=>new Fh({checks:[],typeName:jt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ct(t)});class Dp extends zt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==st.bigint)return this._getInvalidInput(e);let r;const s=new ei;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:De.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:De.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:De.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):Wt.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ke(n,{code:De.invalid_type,expected:st.bigint,received:n.parsedType}),bt}gte(e,n){return this.setLimit("min",e,!0,it.toString(n))}gt(e,n){return this.setLimit("min",e,!1,it.toString(n))}lte(e,n){return this.setLimit("max",e,!0,it.toString(n))}lt(e,n){return this.setLimit("max",e,!1,it.toString(n))}setLimit(e,n,r,s){return new Dp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:it.toString(s)}]})}_addCheck(e){return new Dp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:it.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:it.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:it.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:it.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:it.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Dp.create=t=>new Dp({checks:[],typeName:jt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ct(t)});class rI extends zt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==st.boolean){const r=this._getOrReturnCtx(e);return Ke(r,{code:De.invalid_type,expected:st.boolean,received:r.parsedType}),bt}return Ri(e.data)}}rI.create=t=>new rI({typeName:jt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ct(t)});class f0 extends zt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==st.date){const a=this._getOrReturnCtx(e);return Ke(a,{code:De.invalid_type,expected:st.date,received:a.parsedType}),bt}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Ke(a,{code:De.invalid_date}),bt}const r=new ei;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),Ke(s,{code:De.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),Ke(s,{code:De.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Wt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new f0({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:it.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:it.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}f0.create=t=>new f0({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:jt.ZodDate,...Ct(t)});class sI extends zt{_parse(e){if(this._getType(e)!==st.symbol){const r=this._getOrReturnCtx(e);return Ke(r,{code:De.invalid_type,expected:st.symbol,received:r.parsedType}),bt}return Ri(e.data)}}sI.create=t=>new sI({typeName:jt.ZodSymbol,...Ct(t)});class iI extends zt{_parse(e){if(this._getType(e)!==st.undefined){const r=this._getOrReturnCtx(e);return Ke(r,{code:De.invalid_type,expected:st.undefined,received:r.parsedType}),bt}return Ri(e.data)}}iI.create=t=>new iI({typeName:jt.ZodUndefined,...Ct(t)});class aI extends zt{_parse(e){if(this._getType(e)!==st.null){const r=this._getOrReturnCtx(e);return Ke(r,{code:De.invalid_type,expected:st.null,received:r.parsedType}),bt}return Ri(e.data)}}aI.create=t=>new aI({typeName:jt.ZodNull,...Ct(t)});class oI extends zt{constructor(){super(...arguments),this._any=!0}_parse(e){return Ri(e.data)}}oI.create=t=>new oI({typeName:jt.ZodAny,...Ct(t)});class lI extends zt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ri(e.data)}}lI.create=t=>new lI({typeName:jt.ZodUnknown,...Ct(t)});class hc extends zt{_parse(e){const n=this._getOrReturnCtx(e);return Ke(n,{code:De.invalid_type,expected:st.never,received:n.parsedType}),bt}}hc.create=t=>new hc({typeName:jt.ZodNever,...Ct(t)});class cI extends zt{_parse(e){if(this._getType(e)!==st.undefined){const r=this._getOrReturnCtx(e);return Ke(r,{code:De.invalid_type,expected:st.void,received:r.parsedType}),bt}return Ri(e.data)}}cI.create=t=>new cI({typeName:jt.ZodVoid,...Ct(t)});class Wa extends zt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==st.array)return Ke(n,{code:De.invalid_type,expected:st.array,received:n.parsedType}),bt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(o||l)&&(Ke(n,{code:o?De.too_big:De.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ke(n,{code:De.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ke(n,{code:De.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>s.type._parseAsync(new dc(n,o,n.path,l)))).then(o=>ei.mergeArray(r,o));const a=[...n.data].map((o,l)=>s.type._parseSync(new dc(n,o,n.path,l)));return ei.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Wa({...this._def,minLength:{value:e,message:it.toString(n)}})}max(e,n){return new Wa({...this._def,maxLength:{value:e,message:it.toString(n)}})}length(e,n){return new Wa({...this._def,exactLength:{value:e,message:it.toString(n)}})}nonempty(e){return this.min(1,e)}}Wa.create=(t,e)=>new Wa({type:t,minLength:null,maxLength:null,exactLength:null,typeName:jt.ZodArray,...Ct(e)});function Id(t){if(t instanceof sr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Zl.create(Id(r))}return new sr({...t._def,shape:()=>e})}else return t instanceof Wa?new Wa({...t._def,type:Id(t.element)}):t instanceof Zl?Zl.create(Id(t.unwrap())):t instanceof zh?zh.create(Id(t.unwrap())):t instanceof ku?ku.create(t.items.map(e=>Id(e))):t}class sr extends zt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Wt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==st.object){const d=this._getOrReturnCtx(e);return Ke(d,{code:De.invalid_type,expected:st.object,received:d.parsedType}),bt}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof hc&&this._def.unknownKeys==="strip"))for(const d in s.data)o.includes(d)||l.push(d);const u=[];for(const d of o){const h=a[d],m=s.data[d];u.push({key:{status:"valid",value:d},value:h._parse(new dc(s,m,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof hc){const d=this._def.unknownKeys;if(d==="passthrough")for(const h of l)u.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(d==="strict")l.length>0&&(Ke(s,{code:De.unrecognized_keys,keys:l}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const h of l){const m=s.data[h];u.push({key:{status:"valid",value:h},value:d._parse(new dc(s,m,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const h of u){const m=await h.key,p=await h.value;d.push({key:m,value:p,alwaysSet:h.alwaysSet})}return d}).then(d=>ei.mergeObjectSync(r,d)):ei.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return it.errToObj,new sr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const s=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:it.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new sr({...this._def,unknownKeys:"strip"})}passthrough(){return new sr({...this._def,unknownKeys:"passthrough"})}extend(e){return new sr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new sr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:jt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new sr({...this._def,catchall:e})}pick(e){const n={};for(const r of Wt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new sr({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Wt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new sr({...this._def,shape:()=>n})}deepPartial(){return Id(this)}partial(e){const n={};for(const r of Wt.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new sr({...this._def,shape:()=>n})}required(e){const n={};for(const r of Wt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Zl;)a=a._def.innerType;n[r]=a}return new sr({...this._def,shape:()=>n})}keyof(){return a8(Wt.objectKeys(this.shape))}}sr.create=(t,e)=>new sr({shape:()=>t,unknownKeys:"strip",catchall:hc.create(),typeName:jt.ZodObject,...Ct(e)});sr.strictCreate=(t,e)=>new sr({shape:()=>t,unknownKeys:"strict",catchall:hc.create(),typeName:jt.ZodObject,...Ct(e)});sr.lazycreate=(t,e)=>new sr({shape:t,unknownKeys:"strip",catchall:hc.create(),typeName:jt.ZodObject,...Ct(e)});class m0 extends zt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new Ho(l.ctx.common.issues));return Ke(n,{code:De.invalid_union,unionErrors:o}),bt}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let a;const o=[];for(const u of r){const d={...n,common:{...n.common,issues:[]},parent:null},h=u._parseSync({data:n.data,path:n.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(u=>new Ho(u));return Ke(n,{code:De.invalid_union,unionErrors:l}),bt}}get options(){return this._def.options}}m0.create=(t,e)=>new m0({options:t,typeName:jt.ZodUnion,...Ct(e)});function Fj(t,e){const n=wl(t),r=wl(e);if(t===e)return{valid:!0,data:t};if(n===st.object&&r===st.object){const s=Wt.objectKeys(e),a=Wt.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of a){const u=Fj(t[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(n===st.array&&r===st.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],u=Fj(o,l);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return n===st.date&&r===st.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class p0 extends zt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(a,o)=>{if(eI(a)||eI(o))return bt;const l=Fj(a.value,o.value);return l.valid?((tI(a)||tI(o))&&n.dirty(),{status:n.value,value:l.data}):(Ke(r,{code:De.invalid_intersection_types}),bt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}p0.create=(t,e,n)=>new p0({left:t,right:e,typeName:jt.ZodIntersection,...Ct(n)});class ku extends zt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==st.array)return Ke(r,{code:De.invalid_type,expected:st.array,received:r.parsedType}),bt;if(r.data.length<this._def.items.length)return Ke(r,{code:De.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),bt;!this._def.rest&&r.data.length>this._def.items.length&&(Ke(r,{code:De.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new dc(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>ei.mergeArray(n,o)):ei.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new ku({...this._def,rest:e})}}ku.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ku({items:t,typeName:jt.ZodTuple,rest:null,...Ct(e)})};class uI extends zt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==st.map)return Ke(r,{code:De.invalid_type,expected:st.map,received:r.parsedType}),bt;const s=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,u],d)=>({key:s._parse(new dc(r,l,r.path,[d,"key"])),value:a._parse(new dc(r,u,r.path,[d,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,h=await u.value;if(d.status==="aborted"||h.status==="aborted")return bt;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(d.value,h.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const u of o){const d=u.key,h=u.value;if(d.status==="aborted"||h.status==="aborted")return bt;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(d.value,h.value)}return{status:n.value,value:l}}}}uI.create=(t,e,n)=>new uI({valueType:e,keyType:t,typeName:jt.ZodMap,...Ct(n)});class Lp extends zt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==st.set)return Ke(r,{code:De.invalid_type,expected:st.set,received:r.parsedType}),bt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ke(r,{code:De.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ke(r,{code:De.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function o(u){const d=new Set;for(const h of u){if(h.status==="aborted")return bt;h.status==="dirty"&&n.dirty(),d.add(h.value)}return{status:n.value,value:d}}const l=[...r.data.values()].map((u,d)=>a._parse(new dc(r,u,r.path,d)));return r.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,n){return new Lp({...this._def,minSize:{value:e,message:it.toString(n)}})}max(e,n){return new Lp({...this._def,maxSize:{value:e,message:it.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Lp.create=(t,e)=>new Lp({valueType:t,minSize:null,maxSize:null,typeName:jt.ZodSet,...Ct(e)});class dI extends zt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}dI.create=(t,e)=>new dI({getter:t,typeName:jt.ZodLazy,...Ct(e)});class hI extends zt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ke(n,{received:n.data,code:De.invalid_literal,expected:this._def.value}),bt}return{status:"valid",value:e.data}}get value(){return this._def.value}}hI.create=(t,e)=>new hI({value:t,typeName:jt.ZodLiteral,...Ct(e)});function a8(t,e){return new $h({values:t,typeName:jt.ZodEnum,...Ct(e)})}class $h extends zt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ke(n,{expected:Wt.joinValues(r),received:n.parsedType,code:De.invalid_type}),bt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ke(n,{received:n.data,code:De.invalid_enum_value,options:r}),bt}return Ri(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return $h.create(e,{...this._def,...n})}exclude(e,n=this._def){return $h.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}$h.create=a8;class fI extends zt{_parse(e){const n=Wt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==st.string&&r.parsedType!==st.number){const s=Wt.objectValues(n);return Ke(r,{expected:Wt.joinValues(s),received:r.parsedType,code:De.invalid_type}),bt}if(this._cache||(this._cache=new Set(Wt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Wt.objectValues(n);return Ke(r,{received:r.data,code:De.invalid_enum_value,options:s}),bt}return Ri(e.data)}get enum(){return this._def.values}}fI.create=(t,e)=>new fI({values:t,typeName:jt.ZodNativeEnum,...Ct(e)});class g0 extends zt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==st.promise&&n.common.async===!1)return Ke(n,{code:De.invalid_type,expected:st.promise,received:n.parsedType}),bt;const r=n.parsedType===st.promise?n.data:Promise.resolve(n.data);return Ri(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}g0.create=(t,e)=>new g0({type:t,typeName:jt.ZodPromise,...Ct(e)});class Vh extends zt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===jt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{Ke(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const o=s.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return bt;const u=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return u.status==="aborted"?bt:u.status==="dirty"||n.value==="dirty"?Nm(u.value):u});{if(n.value==="aborted")return bt;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?bt:l.status==="dirty"||n.value==="dirty"?Nm(l.value):l}}if(s.type==="refinement"){const o=l=>{const u=s.refinement(l,a);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?bt:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?bt:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Lh(o))return bt;const l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Lh(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:n.value,value:l})):bt);Wt.assertNever(s)}}Vh.create=(t,e,n)=>new Vh({schema:t,typeName:jt.ZodEffects,effect:e,...Ct(n)});Vh.createWithPreprocess=(t,e,n)=>new Vh({schema:e,effect:{type:"preprocess",transform:t},typeName:jt.ZodEffects,...Ct(n)});class Zl extends zt{_parse(e){return this._getType(e)===st.undefined?Ri(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Zl.create=(t,e)=>new Zl({innerType:t,typeName:jt.ZodOptional,...Ct(e)});class zh extends zt{_parse(e){return this._getType(e)===st.null?Ri(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zh.create=(t,e)=>new zh({innerType:t,typeName:jt.ZodNullable,...Ct(e)});class $j extends zt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===st.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}$j.create=(t,e)=>new $j({innerType:t,typeName:jt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ct(e)});class Vj extends zt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return h0(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ho(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ho(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Vj.create=(t,e)=>new Vj({innerType:t,typeName:jt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ct(e)});class mI extends zt{_parse(e){if(this._getType(e)!==st.nan){const r=this._getOrReturnCtx(e);return Ke(r,{code:De.invalid_type,expected:st.nan,received:r.parsedType}),bt}return{status:"valid",value:e.data}}}mI.create=t=>new mI({typeName:jt.ZodNaN,...Ct(t)});class ghe extends zt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class GE extends zt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?bt:a.status==="dirty"?(n.dirty(),Nm(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?bt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new GE({in:e,out:n,typeName:jt.ZodPipeline})}}class zj extends zt{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Lh(s)&&(s.value=Object.freeze(s.value)),s);return h0(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}zj.create=(t,e)=>new zj({innerType:t,typeName:jt.ZodReadonly,...Ct(e)});var jt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(jt||(jt={}));const xt=Dl.create,o8=Fh.create;hc.create;const KE=Wa.create,qu=sr.create;m0.create;p0.create;ku.create;const vhe=$h.create;g0.create;Zl.create;zh.create;var l8=["PageUp","PageDown"],c8=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],u8={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},gf="Slider",[Uj,yhe,xhe]=Bg(gf),[d8,aje]=$r(gf,[xhe]),[whe,Hw]=d8(gf),h8=w.forwardRef((t,e)=>{const{name:n,min:r=0,max:s=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:u=0,defaultValue:d=[r],value:h,onValueChange:m=()=>{},onValueCommit:p=()=>{},inverted:y=!1,form:j,..._}=t,N=w.useRef(new Set),b=w.useRef(0),S=o==="horizontal"?bhe:_he,[C=[],R]=Xs({prop:h,defaultProp:d,onChange:O=>{var M;(M=[...N.current][b.current])==null||M.focus(),m(O)}}),z=w.useRef(C);function k(O){const $=Phe(C,O);T(O,$)}function I(O){T(O,b.current)}function V(){const O=z.current[b.current];C[b.current]!==O&&p(C)}function T(O,$,{commit:M}={commit:!1}){const B=khe(a),J=Ihe(Math.round((O-r)/a)*a+r,B),ee=Mp(J,[r,s]);R((K=[])=>{const D=She(K,ee,$);if(Rhe(D,u*a)){b.current=D.indexOf(ee);const G=String(D)!==String(K);return G&&M&&p(D),G?D:K}else return K})}return i.jsx(whe,{scope:t.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:b,thumbs:N.current,values:C,orientation:o,form:j,children:i.jsx(Uj.Provider,{scope:t.__scopeSlider,children:i.jsx(Uj.Slot,{scope:t.__scopeSlider,children:i.jsx(S,{"aria-disabled":l,"data-disabled":l?"":void 0,..._,ref:e,onPointerDown:Ve(_.onPointerDown,()=>{l||(z.current=C)}),min:r,max:s,inverted:y,onSlideStart:l?void 0:k,onSlideMove:l?void 0:I,onSlideEnd:l?void 0:V,onHomeKeyDown:()=>!l&&T(r,0,{commit:!0}),onEndKeyDown:()=>!l&&T(s,C.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:$})=>{if(!l){const J=l8.includes(O.key)||O.shiftKey&&c8.includes(O.key)?10:1,ee=b.current,K=C[ee],D=a*J*$;T(K+D,ee,{commit:!0})}}})})})})});h8.displayName=gf;var[f8,m8]=d8(gf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),bhe=w.forwardRef((t,e)=>{const{min:n,max:r,dir:s,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:u,onStepKeyDown:d,...h}=t,[m,p]=w.useState(null),y=pt(e,S=>p(S)),j=w.useRef(void 0),_=Bu(s),N=_==="ltr",b=N&&!a||!N&&a;function x(S){const C=j.current||m.getBoundingClientRect(),R=[0,C.width],k=ZE(R,b?[n,r]:[r,n]);return j.current=C,k(S-C.left)}return i.jsx(f8,{scope:t.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:i.jsx(p8,{dir:_,"data-orientation":"horizontal",...h,ref:y,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const C=x(S.clientX);o==null||o(C)},onSlideMove:S=>{const C=x(S.clientX);l==null||l(C)},onSlideEnd:()=>{j.current=void 0,u==null||u()},onStepKeyDown:S=>{const R=u8[b?"from-left":"from-right"].includes(S.key);d==null||d({event:S,direction:R?-1:1})}})})}),_he=w.forwardRef((t,e)=>{const{min:n,max:r,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:u,...d}=t,h=w.useRef(null),m=pt(e,h),p=w.useRef(void 0),y=!s;function j(_){const N=p.current||h.current.getBoundingClientRect(),b=[0,N.height],S=ZE(b,y?[r,n]:[n,r]);return p.current=N,S(_-N.top)}return i.jsx(f8,{scope:t.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:i.jsx(p8,{"data-orientation":"vertical",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:_=>{const N=j(_.clientY);a==null||a(N)},onSlideMove:_=>{const N=j(_.clientY);o==null||o(N)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:_=>{const b=u8[y?"from-bottom":"from-top"].includes(_.key);u==null||u({event:_,direction:b?-1:1})}})})}),p8=w.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:u,...d}=t,h=Hw(gf,n);return i.jsx(Ye.span,{...d,ref:e,onKeyDown:Ve(t.onKeyDown,m=>{m.key==="Home"?(o(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):l8.concat(c8).includes(m.key)&&(u(m),m.preventDefault())}),onPointerDown:Ve(t.onPointerDown,m=>{const p=m.target;p.setPointerCapture(m.pointerId),m.preventDefault(),h.thumbs.has(p)?p.focus():r(m)}),onPointerMove:Ve(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&s(m)}),onPointerUp:Ve(t.onPointerUp,m=>{const p=m.target;p.hasPointerCapture(m.pointerId)&&(p.releasePointerCapture(m.pointerId),a(m))})})}),g8="SliderTrack",v8=w.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=Hw(g8,n);return i.jsx(Ye.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});v8.displayName=g8;var Bj="SliderRange",y8=w.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=Hw(Bj,n),a=m8(Bj,n),o=w.useRef(null),l=pt(e,o),u=s.values.length,d=s.values.map(p=>b8(p,s.min,s.max)),h=u>1?Math.min(...d):0,m=100-Math.max(...d);return i.jsx(Ye.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...t.style,[a.startEdge]:h+"%",[a.endEdge]:m+"%"}})});y8.displayName=Bj;var Wj="SliderThumb",x8=w.forwardRef((t,e)=>{const n=yhe(t.__scopeSlider),[r,s]=w.useState(null),a=pt(e,l=>s(l)),o=w.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return i.jsx(jhe,{...t,ref:a,index:o})}),jhe=w.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:s,...a}=t,o=Hw(Wj,n),l=m8(Wj,n),[u,d]=w.useState(null),h=pt(e,x=>d(x)),m=u?o.form||!!u.closest("form"):!0,p=jw(u),y=o.values[r],j=y===void 0?0:b8(y,o.min,o.max),_=Ehe(r,o.values.length),N=p==null?void 0:p[l.size],b=N?Che(N,j,l.direction):0;return w.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${j}% + ${b}px)`},children:[i.jsx(Uj.ItemSlot,{scope:t.__scopeSlider,children:i.jsx(Ye.span,{role:"slider","aria-label":t["aria-label"]||_,"aria-valuemin":o.min,"aria-valuenow":y,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:h,style:y===void 0?{display:"none"}:t.style,onFocus:Ve(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),m&&i.jsx(w8,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:y},r)]})});x8.displayName=Wj;var Nhe="RadioBubbleInput",w8=w.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const s=w.useRef(null),a=pt(s,r),o=Ow(e);return w.useEffect(()=>{const l=s.current;if(!l)return;const u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&h){const m=new Event("input",{bubbles:!0});h.call(l,e),l.dispatchEvent(m)}},[o,e]),i.jsx(Ye.input,{style:{display:"none"},...n,ref:a,defaultValue:e})});w8.displayName=Nhe;function She(t=[],e,n){const r=[...t];return r[n]=e,r.sort((s,a)=>s-a)}function b8(t,e,n){const a=100/(n-e)*(t-e);return Mp(a,[0,100])}function Ehe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Phe(t,e){if(t.length===1)return 0;const n=t.map(s=>Math.abs(s-e)),r=Math.min(...n);return n.indexOf(r)}function Che(t,e,n){const r=t/2,a=ZE([0,50],[0,r]);return(r-a(e)*n)*n}function The(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Rhe(t,e){if(e>0){const n=The(t);return Math.min(...n)>=e}return!0}function ZE(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function khe(t){return(String(t).split(".")[1]||"").length}function Ihe(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var _8=h8,Ahe=v8,Ohe=y8,Mhe=x8;const j8=w.forwardRef(({className:t,...e},n)=>i.jsxs(_8,{ref:n,className:at("relative flex w-full touch-none select-none items-center",t),...e,children:[i.jsx(Ahe,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:i.jsx(Ohe,{className:"absolute h-full bg-primary"})}),i.jsx(Mhe,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));j8.displayName=_8.displayName;const sv=qu({title:xt().min(5,"Le titre doit contenir au moins 5 caractères").max(80,"Le titre ne peut pas dépasser 80 caractères"),description:xt().min(20,"La description doit contenir au moins 20 caractères").max(1e3,"La description ne peut pas dépasser 1000 caractères"),tags:KE(xt()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:xt().min(1,"Veuillez spécifier un lieu de rencontre")}),Dhe=sv.extend({price:xt().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit être d'au moins 1€");if(e>1e4)throw new Error("Le prix ne peut pas dépasser 10 000€");return e}),condition:vhe(["new","like-new","good","fair"]),paymentMethods:KE(xt()).min(1,"Sélectionnez au moins un mode de paiement")}),Lhe=sv.extend({donationReason:xt().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractères")}),Fhe=sv.extend({desiredItems:KE(xt()).min(1,"Ajoutez au moins un objet recherché"),estimatedValue:xt().min(1,"La valeur estimée est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estimée doit être d'au moins 1€");return e})}),$he=sv.extend({hourlyRate:xt().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit être d'au moins 5€/h");if(e>200)throw new Error("Le tarif ne peut pas dépasser 200€/h");return e}),duration:o8().min(1,"La durée doit être d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:xt().min(20,"Décrivez vos compétences en détail").max(500,"Maximum 500 caractères"),availability:xt().optional()}),Vhe=[{value:"new",label:"Neuf",description:"Jamais utilisé, dans son emballage"},{value:"like-new",label:"Très bon",description:"Utilisé très peu, aucun défaut visible"},{value:"good",label:"Bon",description:"Utilisé mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],pI=[{value:"cash",label:"Espèces",icon:v3},{value:"transfer",label:"Virement bancaire",icon:Qn},{value:"lydia",label:"Lydia",icon:Uu},{value:"paypal",label:"PayPal",icon:Qn}];delete pf.Icon.Default.prototype._getIconUrl;pf.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const zhe=()=>{var ne,ie,ae,Z,ce,ve,ke,be;const{currentUser:t,userProfile:e}=jn(),{createListing:n}=Jg(),r=yr(),[s]=LS(),[a,o]=w.useState(()=>s.get("type")||"sell"),[l,u]=w.useState([]),[d,h]=w.useState(!1),[m,p]=w.useState(""),[y,j]=w.useState([]),[_,N]=w.useState(!1),[b,x]=w.useState([""]),[S,C]=w.useState(""),[R,z]=w.useState([]),[k,I]=w.useState([1]),[V,T]=w.useState(null),[O,$]=w.useState(!1),B=uu({resolver:du((()=>{switch(a){case"sell":return Dhe;case"gift":return Lhe;case"swap":return Fhe;case"service":return $he;default:return sv}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});w.useEffect(()=>{B.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),j([]),x([""]),z([]),I([1]),u([])},[a,B]);const J=async re=>{if(!t)throw new Error("User not authenticated");const _e=Date.now(),Ee=`listings/${t.uid}/${_e}_${re.name}`,de=G2(Z2,Ee),H=await H2(de,re);return await q2(H.ref)},ee=async re=>{const _e=re.target.files;if(!(!_e||_e.length===0)){h(!0);try{const de=Array.from(_e).slice(0,10-l.length).filter(Y=>Y.size<=15728640).map(Y=>J(Y)),H=await Promise.all(de);u(Y=>[...Y,...H])}catch(Ee){console.error("Error uploading images:",Ee)}finally{h(!1)}}},K=re=>{u(_e=>_e.filter((Ee,de)=>de!==re))},D=()=>{if(m.trim()&&!y.includes(m.trim())&&y.length<5){const re=[...y,m.trim()];j(re),B.setValue("tags",re),p("")}},G=re=>{const _e=y.filter(Ee=>Ee!==re);j(_e),B.setValue("tags",_e)},q=()=>{if(S.trim()){const re=[...b.filter(_e=>_e.trim()),S.trim()];x(re),B.setValue("desiredItems",re),C("")}},X=re=>{const _e=b.filter((Ee,de)=>de!==re);x(_e),B.setValue("desiredItems",_e)},fe=(re,_e)=>{const Ee=_e?[...R,re]:R.filter(de=>de!==re);z(Ee),B.setValue("paymentMethods",Ee)};async function Te(re){const Ee=await(await fetch(`https://nominatim.openstreetmap.org/search?format=jsonv2&q=${encodeURIComponent(re)}`)).json();return Ee&&Ee[0]?[parseFloat(Ee[0].lat),parseFloat(Ee[0].lon)]:null}w.useEffect(()=>{const re=B.watch("meetingLocation");re&&re.length>5&&Te(re).then(_e=>{_e&&T(_e)})},[B.watch("meetingLocation")]);const $e=async re=>{if(!(!t||!e)){N(!0);try{const _e={title:re.title,description:re.description,currency:"EUR",category:"electronics",images:l,tags:re.tags,location:{city:"Paris",state:"Île-de-France",country:"France",campus:e.campus||void 0,university:e.university||void 0,coordinates:void 0},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let Ee;switch(a){case"sell":Ee={..._e,price:re.price,condition:re.condition,transactionType:"sale",description:`${re.description}

Modes de paiement acceptés: ${R.map(H=>{var Y;return(Y=pI.find(se=>se.value===H))==null?void 0:Y.label}).join(", ")}`};break;case"gift":Ee={..._e,price:0,condition:"good",transactionType:"donation",description:`${re.description}

Raison du don: ${re.donationReason}`};break;case"swap":Ee={..._e,price:re.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:b.filter(H=>H.trim()).join(", "),description:`${re.description}

Recherche en échange: ${b.filter(H=>H.trim()).join(", ")}
Valeur estimée: ${re.estimatedValue}€`};break;case"service":Ee={..._e,price:re.hourlyRate,condition:"new",transactionType:"service",description:`${re.description}

Compétences: ${re.skills}
Tarif: ${re.hourlyRate}€/h
Durée prévue: ${k[0]}h${re.availability?`
Disponibilités: ${re.availability}`:""}`};break;default:throw new Error("Type de transaction non supporté")}console.log("Submitting listing data:",Ee);const de=await n(Ee);r(`/listing/${de}`)}catch(_e){console.error("Error creating listing:",_e)}finally{N(!1)}}},ze=()=>{const re=B.formState.errors,_e=B.watch("title")&&B.watch("description")&&B.watch("meetingLocation")&&y.length>0;switch(a){case"sell":return _e&&B.watch("price")&&R.length>0&&!re.title&&!re.description&&!re.price;case"gift":return _e&&B.watch("donationReason")&&!re.title&&!re.description&&!re.donationReason;case"swap":return _e&&b.some(Ee=>Ee.trim())&&B.watch("estimatedValue")&&!re.title&&!re.description&&!re.estimatedValue;case"service":return _e&&B.watch("hourlyRate")&&B.watch("skills")&&!re.title&&!re.description&&!re.hourlyRate&&!re.skills;default:return!1}},Le=()=>{if(!navigator.geolocation){alert("La géolocalisation n'est pas supportée par ce navigateur.");return}$(!0),navigator.geolocation.getCurrentPosition(async re=>{const{latitude:_e,longitude:Ee}=re.coords;T([_e,Ee]);const H=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${_e}&lon=${Ee}`)).json();H&&H.display_name&&B.setValue("meetingLocation",H.display_name,{shouldValidate:!0}),$(!1)},()=>{alert("Impossible d'accéder à la position."),$(!1)})};function Ce(){return FE({click:async re=>{T([re.latlng.lat,re.latlng.lng]),$(!0);const Ee=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${re.latlng.lat}&lon=${re.latlng.lng}`)).json();Ee&&Ee.display_name&&B.setValue("meetingLocation",Ee.display_name,{shouldValidate:!0}),$(!1)}}),V?i.jsx(VE,{position:V}):null}return i.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8 max-w-4xl",children:[i.jsxs("div",{className:"mb-6 sm:mb-8",children:[i.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-2 sm:mb-4 text-center sm:text-left",children:"Publier une annonce"}),i.jsx("p",{className:"text-sm sm:text-base text-muted-foreground text-center sm:text-left",children:"Partagez vos objets, services ou dons avec la communauté étudiante"})]}),i.jsxs(pe,{className:"mb-6 sm:mb-8",children:[i.jsxs(et,{children:[i.jsx(nt,{className:"text-lg sm:text-xl",children:"Type de transaction"}),i.jsx(kt,{className:"text-sm",children:"Choisissez le type de transaction qui correspond à votre annonce"})]}),i.jsx(ge,{children:i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[i.jsx(pe,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:i.jsxs(ge,{className:"p-3 sm:p-4 text-center",children:[i.jsx(Kx,{className:"w-6 h-6 sm:w-8 sm:h-8 mx-auto mb-2 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-foreground text-sm sm:text-base",children:"Vendre"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Vente d'objets"})]})}),i.jsx(pe,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:i.jsxs(ge,{className:"p-3 sm:p-4 text-center",children:[i.jsx(Ch,{className:"w-6 h-6 sm:w-8 sm:h-8 mx-auto mb-2 text-green-600"}),i.jsx("h3",{className:"font-semibold text-foreground text-sm sm:text-base",children:"Donner"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),i.jsx(pe,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:i.jsxs(ge,{className:"p-3 sm:p-4 text-center",children:[i.jsx($o,{className:"w-6 h-6 sm:w-8 sm:h-8 mx-auto mb-2 text-purple-600"}),i.jsx("h3",{className:"font-semibold text-foreground text-sm sm:text-base",children:"Troc"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Échanger des objets"})]})}),i.jsx(pe,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:i.jsxs(ge,{className:"p-3 sm:p-4 text-center",children:[i.jsx(Jn,{className:"w-6 h-6 sm:w-8 sm:h-8 mx-auto mb-2 text-orange-600"}),i.jsx("h3",{className:"font-semibold text-foreground text-sm sm:text-base",children:"Service"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),i.jsx("form",{onSubmit:B.handleSubmit($e),className:"space-y-6 sm:space-y-8",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[i.jsxs(pe,{children:[i.jsx(et,{children:i.jsx(nt,{className:"text-lg sm:text-xl text-foreground",children:"Informations principales"})}),i.jsxs(ge,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"title",className:"text-sm sm:text-base text-foreground",children:"Titre * (max 80 caractères)"}),i.jsx(Ze,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait état":a==="gift"?"Ex: Vélo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathématiques",...B.register("title"),className:"mt-1 text-sm",maxLength:80}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(ne=B.formState.errors.title)==null?void 0:ne.message}),i.jsxs("span",{children:[((ie=B.watch("title"))==null?void 0:ie.length)||0,"/80"]})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"description",className:"text-sm sm:text-base text-foreground",children:"Description détaillée * (max 1000 caractères)"}),i.jsx(Ei,{id:"description",placeholder:a==="sell"?"Décrivez l'état, l'utilisation, la raison de la vente...":a==="gift"?"Décrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Décrivez ce que vous proposez et ce que vous recherchez...":"Décrivez vos compétences, votre expérience, votre méthode...",rows:6,...B.register("description"),className:"mt-1 text-sm",maxLength:1e3}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(ae=B.formState.errors.description)==null?void 0:ae.message}),i.jsxs("span",{children:[((Z=B.watch("description"))==null?void 0:Z.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2 text-foreground text-lg sm:text-xl",children:[i.jsx(Kx,{className:"w-5 h-5 text-blue-600"}),"Informations de vente"]})}),i.jsxs(ge,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"price",className:"text-sm sm:text-base text-foreground",children:"Prix (€) *"}),i.jsx(Ze,{id:"price",type:"text",placeholder:"0.00",...B.register("price"),className:"mt-1 text-sm"}),B.formState.errors.price&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.price.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"condition",className:"text-sm sm:text-base text-foreground",children:"État *"}),i.jsxs(on,{onValueChange:re=>B.setValue("condition",re),value:B.watch("condition"),children:[i.jsx(Jt,{className:"mt-1 text-sm",children:i.jsx(ln,{placeholder:"Sélectionnez l'état"})}),i.jsx(Xt,{children:Vhe.map(re=>i.jsx(Qe,{value:re.value,children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:re.label}),i.jsx("div",{className:"text-xs text-muted-foreground",children:re.description})]})},re.value))})]}),B.formState.errors.condition&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.condition.message})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{className:"text-sm sm:text-base text-foreground",children:"Modes de paiement acceptés *"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-2",children:pI.map(re=>{var Ee;const _e=re.icon;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:((Ee=B.watch("paymentMethods"))==null?void 0:Ee.includes(re.value))||!1,onChange:de=>fe(re.value,de.target.checked),className:"rounded border-border"}),i.jsx(_e,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:re.label})]},re.value)})}),B.formState.errors.paymentMethods&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.paymentMethods.message})]})]})]}),a==="gift"&&i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Ch,{className:"w-5 h-5 text-green-600"}),"Informations du don"]})}),i.jsx(ge,{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractères)"}),i.jsx(Ei,{id:"donationReason",placeholder:"Ex: Je déménage, plus besoin, fin d'études...",rows:3,...B.register("donationReason"),className:"mt-1",maxLength:140}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(ce=B.formState.errors.donationReason)==null?void 0:ce.message}),i.jsxs("span",{children:[((ve=B.watch("donationReason"))==null?void 0:ve.length)||0,"/140"]})]})]})})]}),a==="swap"&&i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2 text-foreground",children:[i.jsx($o,{className:"w-5 h-5 text-purple-600"}),"Informations d'échange"]})}),i.jsxs(ge,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{className:"text-foreground",children:"Objets recherchés * (minimum 1)"}),i.jsxs("div",{className:"space-y-2 mt-2",children:[b.filter(re=>re.trim()).map((re,_e)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ze,{value:re,readOnly:!0,className:"flex-1"}),i.jsx(te,{type:"button",variant:"outline",size:"icon",onClick:()=>X(_e),children:i.jsx(R3,{className:"w-4 h-4"})})]},_e)),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ze,{placeholder:"Ex: Livre de physique L2",value:S,onChange:re=>C(re.target.value),onKeyPress:re=>re.key==="Enter"&&(re.preventDefault(),q()),className:"flex-1"}),i.jsx(te,{type:"button",onClick:q,disabled:!S.trim(),children:i.jsx(ou,{className:"w-4 h-4"})})]})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estimée (€) *"}),i.jsx(Ze,{id:"estimatedValue",type:"text",placeholder:"0,00",...B.register("estimatedValue"),className:"mt-1"}),B.formState.errors.estimatedValue&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Jn,{className:"w-5 h-5 text-orange-600"}),"Informations du service"]})}),i.jsxs(ge,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"skills",className:"text-foreground",children:"Description des compétences *"}),i.jsx(Ei,{id:"skills",placeholder:"Décrivez vos compétences, votre expérience, votre méthode d'enseignement...",rows:4,...B.register("skills"),className:"mt-1",maxLength:500}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{className:"text-destructive",children:(ke=B.formState.errors.skills)==null?void 0:ke.message}),i.jsxs("span",{children:[((be=B.watch("skills"))==null?void 0:be.length)||0,"/500"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (€/h) *"}),i.jsx(Ze,{id:"hourlyRate",type:"text",placeholder:"15,00",...B.register("hourlyRate"),className:"mt-1"}),B.formState.errors.hourlyRate&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.hourlyRate.message})]}),i.jsxs("div",{children:[i.jsxs(Oe,{className:"text-foreground",children:["Durée prévue: ",k[0],"h"]}),i.jsx(j8,{value:k,onValueChange:re=>{I(re),B.setValue("duration",re[0])},max:720,min:1,step:1,className:"mt-2"}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{children:"1h"}),i.jsx("span",{children:"720h"})]})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"availability",className:"text-foreground",children:"Disponibilités (optionnel)"}),i.jsx(Ze,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...B.register("availability"),className:"mt-1"})]})]})]}),i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(au,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),i.jsx(kt,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Première photo = photo principale. Max 15MB par image."})]}),i.jsx(ge,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[l.map((re,_e)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:re,alt:`Photo ${_e+1}`,className:"w-full h-20 object-cover rounded-lg"}),i.jsx(te,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>K(_e),children:i.jsx(fj,{className:"w-3 h-3"})}),_e===0&&i.jsx(lt,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},_e)),l.length<10&&i.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[i.jsxs("div",{className:"text-center",children:[d?i.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):i.jsx(hj,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:d?"Upload...":"Ajouter"})]}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:ee,className:"hidden",disabled:d})]})]})})]}),i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2 text-foreground",children:[i.jsx(Cp,{className:"w-5 h-5"}),"Tags et localisation"]})}),i.jsxs(ge,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{className:"text-foreground",children:"Tags * (max 5)"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:y.map(re=>i.jsxs(lt,{variant:"secondary",className:"flex items-center gap-1",children:[re,i.jsx(te,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>G(re),children:i.jsx(fj,{className:"w-3 h-3"})})]},re))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ze,{placeholder:"Ajouter un tag...",value:m,onChange:re=>p(re.target.value),onKeyPress:re=>re.key==="Enter"&&(re.preventDefault(),D()),className:"flex-1"}),i.jsx(te,{type:"button",onClick:D,disabled:!m.trim()||y.length>=5,children:"Ajouter"})]}),y.length===0&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx(Ze,{id:"meetingLocation",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",...B.register("meetingLocation"),className:"flex-1"}),i.jsx(te,{type:"button",variant:"outline",onClick:Le,disabled:O,title:"Détecter ma position",children:O?i.jsx("span",{className:"animate-spin",children:"📍"}):i.jsx("span",{children:"📍"})})]}),B.formState.errors.meetingLocation&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.meetingLocation.message}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilégiez les lieux publics et fréquentés"}),i.jsx("div",{className:"mt-3",children:i.jsxs($E,{center:V||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[i.jsx(zE,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),i.jsx(Ce,{})]})})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2 text-sm text-foreground",children:[i.jsx(Wm,{className:"w-4 h-4"}),"Validation"]})}),i.jsx(ge,{children:i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:`flex items-center gap-2 ${B.watch("title")&&B.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${B.watch("title")&&B.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Titre (5-80 caractères)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${B.watch("description")&&B.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${B.watch("description")&&B.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Description (20-1000 caractères)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${y.length>0?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${y.length>0?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Tags (1-5)"})]}),i.jsxs("div",{className:`flex items-center gap-2 ${B.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${B.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),i.jsx("span",{children:"Point de rencontre"})]})]})})]}),i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2 text-sm text-foreground",children:[i.jsx(qt,{className:"w-4 h-4"}),"Conseils de sécurité"]})}),i.jsx(ge,{children:i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Vérifiez l'identité de l'autre personne"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:"Privilégiez les paiements sécurisés"})]})]})})]}),i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6",children:[i.jsx(te,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:_||!ze()||d,children:_?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):i.jsxs(i.Fragment,{children:[i.jsx(k3,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:ze()?"Votre annonce sera visible immédiatement":"Complétez tous les champs obligatoires"})]})})]})]})})]})};var qw="Tabs",[Uhe,oje]=$r(qw,[Sw]),N8=Sw(),[Bhe,QE]=Uhe(qw),S8=w.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:u="automatic",...d}=t,h=Bu(l),[m,p]=Xs({prop:r,onChange:s,defaultProp:a??"",caller:qw});return i.jsx(Bhe,{scope:n,baseId:Qs(),value:m,onValueChange:p,orientation:o,dir:h,activationMode:u,children:i.jsx(Ye.div,{dir:h,"data-orientation":o,...d,ref:e})})});S8.displayName=qw;var E8="TabsList",P8=w.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=QE(E8,n),o=N8(n);return i.jsx(g5,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(Ye.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});P8.displayName=E8;var C8="TabsTrigger",T8=w.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,o=QE(C8,n),l=N8(n),u=I8(o.baseId,r),d=A8(o.baseId,r),h=r===o.value;return i.jsx(v5,{asChild:!0,...l,focusable:!s,active:h,children:i.jsx(Ye.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...a,ref:e,onMouseDown:Ve(t.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?o.onValueChange(r):m.preventDefault()}),onKeyDown:Ve(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(r)}),onFocus:Ve(t.onFocus,()=>{const m=o.activationMode!=="manual";!h&&!s&&m&&o.onValueChange(r)})})})});T8.displayName=C8;var R8="TabsContent",k8=w.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=t,l=QE(R8,n),u=I8(l.baseId,r),d=A8(l.baseId,r),h=r===l.value,m=w.useRef(h);return w.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),i.jsx(Vr,{present:s||h,children:({present:p})=>i.jsx(Ye.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:m.current?"0s":void 0},children:p&&a})})});k8.displayName=R8;function I8(t,e){return`${t}-trigger-${e}`}function A8(t,e){return`${t}-content-${e}`}var Whe=S8,O8=P8,M8=T8,D8=k8;const Gu=Whe,jc=w.forwardRef(({className:t,...e},n)=>i.jsx(O8,{ref:n,className:at("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));jc.displayName=O8.displayName;const pn=w.forwardRef(({className:t,...e},n)=>i.jsx(M8,{ref:n,className:at("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));pn.displayName=M8.displayName;const gn=w.forwardRef(({className:t,...e},n)=>i.jsx(D8,{ref:n,className:at("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));gn.displayName=D8.displayName;const L8=({currentPhotoURL:t,displayName:e})=>{var b,x;const{currentUser:n,updateUserProfile:r}=jn(),[s,a]=w.useState(!1),[o,l]=w.useState(!1),[u,d]=w.useState(null),[h,m]=w.useState(null),p=w.useRef(null),y=S=>{var z;const C=(z=S.target.files)==null?void 0:z[0];if(!C)return;if(!C.type.startsWith("image/")){Ne.error("Veuillez sélectionner une image");return}if(C.size>5*1024*1024){Ne.error("L'image ne doit pas dépasser 5MB");return}m(C);const R=new FileReader;R.onload=k=>{var I;d((I=k.target)==null?void 0:I.result)},R.readAsDataURL(C)},j=async()=>{if(!(!h||!n)){l(!0);try{const S=`profile-photos/${n.uid}-${Date.now()}.${h.name.split(".").pop()}`,C=G2(Z2,S),R=await H2(C,h),z=await q2(R.ref);await vp(n,{photoURL:z}),await r({photoURL:z}),Ne.success("Photo de profil mise à jour !"),a(!1),d(null),m(null)}catch(S){console.error("Erreur lors de l'upload:",S),Ne.error("Erreur lors de la mise à jour de la photo")}finally{l(!1)}}},_=async()=>{if(n){l(!0);try{await vp(n,{photoURL:null}),await r({photoURL:null}),Ne.success("Photo de profil supprimée"),a(!1)}catch(S){console.error("Erreur lors de la suppression:",S),Ne.error("Erreur lors de la suppression de la photo")}finally{l(!1)}}},N=()=>{m(null),d(null),p.current&&(p.current.value="")};return i.jsxs(Ua,{open:s,onOpenChange:a,children:[i.jsx(ch,{asChild:!0,children:i.jsxs("div",{className:"relative group cursor-pointer",children:[i.jsxs(Uo,{className:"h-20 w-20",children:[i.jsx(Bo,{src:t||""}),i.jsx(Wo,{className:"text-lg bg-gradient-to-br from-primary to-secondary text-white",children:((b=e[0])==null?void 0:b.toUpperCase())||"U"})]}),i.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(au,{className:"w-6 h-6 text-white"})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:i.jsx(au,{className:"w-3 h-3 text-white"})})]})}),i.jsxs(ea,{className:"max-w-md",children:[i.jsx(Ba,{children:i.jsxs(ta,{className:"flex items-center gap-2",children:[i.jsx(au,{className:"w-5 h-5"}),"Photo de profil"]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center",children:i.jsxs(Uo,{className:"h-32 w-32",children:[i.jsx(Bo,{src:u||t||""}),i.jsx(Wo,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((x=e[0])==null?void 0:x.toUpperCase())||"U"})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:y,className:"hidden"}),h?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[i.jsx("p",{className:"font-medium",children:h.name}),i.jsxs("p",{children:[(h.size/1024/1024).toFixed(2)," MB"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(te,{onClick:N,variant:"outline",className:"flex-1",disabled:o,children:"Annuler"}),i.jsx(te,{onClick:j,className:"flex-1",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}),"Upload..."]}):i.jsxs(i.Fragment,{children:[i.jsx(hj,{className:"w-4 h-4 mr-2"}),"Confirmer"]})})]})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs(te,{onClick:()=>{var S;return(S=p.current)==null?void 0:S.click()},variant:"outline",className:"w-full",children:[i.jsx(hj,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&i.jsxs(te,{onClick:_,variant:"outline",disabled:o,className:"w-full text-destructive hover:text-destructive",children:[o?i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(fj,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]}),i.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[i.jsx("p",{children:"• Formats acceptés : JPG, PNG, GIF"}),i.jsx("p",{children:"• Taille maximale : 5MB"}),i.jsx("p",{children:"• Recommandé : image carrée, minimum 200x200px"})]})]})]})]})},cs=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return typeof t=="object"&&t!==null&&"seconds"in t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):new Date},Hhe=()=>{const{currentUser:t,userProfile:e}=jn(),[n,r]=w.useState([]),[s,a]=w.useState([]),[o,l]=w.useState([]),[u,d]=w.useState(null),[h,m]=w.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[p,y]=w.useState({profile:!0,listings:!0,reviews:!0,favorites:!0}),[j,_]=w.useState({}),[N,b]=w.useState(null),[x,S]=w.useState(""),[C,R]=w.useState((u==null?void 0:u.firstName)||(e==null?void 0:e.firstName)||""),[z,k]=w.useState((u==null?void 0:u.lastName)||(e==null?void 0:e.lastName)||""),I=async()=>{if(t)try{y(ce=>({...ce,profile:!0}));const Z=await Zs(_t(We,"users",t.uid));if(Z.exists()){const ce=Z.data();d({...ce,createdAt:cs(ce.createdAt),updatedAt:cs(ce.updatedAt)})}else console.log("Aucun document utilisateur trouvé dans Firestore"),d(null)}catch(Z){console.error("Erreur lors du chargement du profil:",Z),d(null)}finally{y(Z=>({...Z,profile:!1}))}};w.useEffect(()=>{t&&(I(),V(),T(),O())},[t]);const V=async()=>{if(t)try{y(be=>({...be,listings:!0}));const Z=Tn(Ht(We,"listings"),lr("sellerId","==",t.uid),ji(20)),ce=await Zn(Z),ve=[];ce.forEach(be=>{const re=be.data();ve.push({id:be.id,...re,createdAt:cs(re.createdAt),updatedAt:cs(re.updatedAt)})}),ve.sort((be,re)=>cs(re.createdAt).getTime()-cs(be.createdAt).getTime()),r(ve);const ke=ve.filter(be=>be.status==="active");m(be=>({...be,totalListings:ve.length,activeListings:ke.length}))}catch(Z){console.error("Erreur lors du chargement des annonces:",Z)}finally{y(Z=>({...Z,listings:!1}))}},T=async()=>{if(t)try{y(Ee=>({...Ee,reviews:!0}));const Z=Tn(Ht(We,"reviews"),lr("revieweeId","==",t.uid),ji(10)),ce=await Zn(Z),ve=[];ce.forEach(Ee=>{const de=Ee.data();ve.push({id:Ee.id,...de,replies:Array.isArray(de.replies)?de.replies.map(H=>({...H,createdAt:H.createdAt instanceof Date?H.createdAt:H.createdAt&&typeof H.createdAt.toDate=="function"?H.createdAt.toDate():new Date})):[],likes:Array.isArray(de.likes)?de.likes:[],dislikes:Array.isArray(de.dislikes)?de.dislikes:[],createdAt:cs(de.createdAt)})}),ve.sort((Ee,de)=>cs(de.createdAt).getTime()-cs(Ee.createdAt).getTime()),a(ve);const ke=Array.from(new Set(ve.map(Ee=>Ee.reviewerId))),be={...j};await Promise.all(ke.map(async Ee=>{if(!be[Ee]){const de=await Zs(_t(We,"users",Ee));if(de.exists()){const H=de.data();be[Ee]={displayName:H.displayName||"Utilisateur",photoURL:H.photoURL||void 0}}else be[Ee]={displayName:""}}})),_(be);const re=ve.reduce((Ee,de)=>Ee+de.rating,0),_e=ve.length>0?re/ve.length:0;m(Ee=>({...Ee,totalReviews:ve.length,averageRating:Math.round(_e*10)/10}))}catch(Z){console.error("Erreur lors du chargement des avis:",Z)}finally{y(Z=>({...Z,reviews:!1}))}},O=async()=>{if(t)try{y(ke=>({...ke,favorites:!0}));const Z=Tn(Ht(We,"favorites"),lr("userId","==",t.uid),ji(20)),ce=await Zn(Z),ve=[];if(ce.forEach(ke=>{const be=ke.data();ve.push({id:ke.id,...be,createdAt:cs(be.createdAt)})}),ve.sort((ke,be)=>cs(be.createdAt).getTime()-cs(ke.createdAt).getTime()),m(ke=>({...ke,totalFavorites:ve.length})),ve.length>0){const ke=ve.slice(0,6).map(async re=>{try{const _e=await Zs(_t(We,"listings",re.listingId));if(_e.exists()){const Ee=_e.data();return{id:_e.id,...Ee,createdAt:cs(Ee.createdAt),updatedAt:cs(Ee.updatedAt)}}return null}catch(_e){return console.error("Erreur lors du chargement d'une annonce favorite:",_e),null}}),be=await Promise.all(ke);l(be.filter(re=>re!==null))}}catch(Z){console.error("Erreur lors du chargement des favoris:",Z)}finally{y(Z=>({...Z,favorites:!1}))}},$=Z=>{if(!Z)return"Date inconnue";try{const ce=cs(Z);return isNaN(ce.getTime())?"Date invalide":ff(ce,{addSuffix:!0,locale:Xr})}catch{return"Date invalide"}},M=Z=>Array.from({length:5},(ce,ve)=>i.jsx(Ml,{className:`h-4 w-4 ${ve<Z?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},ve)),B=localStorage.getItem("pendingUserData"),J=B?JSON.parse(B):{};let ee=(u==null?void 0:u.displayName)||(e==null?void 0:e.displayName)||J.displayName||"";!ee&&(t!=null&&t.displayName)&&(ee=t.displayName),!ee&&(t!=null&&t.email)&&(ee=t.email.split("@")[0]),ee||(ee="Utilisateur");let K=(u==null?void 0:u.university)||(e==null?void 0:e.university)||J.university||"";if((u==null?void 0:u.university)==="Autre université"&&u.otherUniversity||(e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||J.university==="Autre université"&&J.otherUniversity){const Z=u==null?void 0:u.otherUniversity,ce=e==null?void 0:e.otherUniversity,ve=J.otherUniversity;K=Z||ce||ve||"Université personnalisée"}K||(K="Université spécifiée lors de l'inscription");let D=(u==null?void 0:u.fieldOfStudy)||(e==null?void 0:e.fieldOfStudy)||J.fieldOfStudy||"";if((u==null?void 0:u.fieldOfStudy)==="Autre"&&u.otherFieldOfStudy||(e==null?void 0:e.fieldOfStudy)==="Autre"&&e.otherFieldOfStudy||J.fieldOfStudy==="Autre"&&J.otherFieldOfStudy){const Z=u==null?void 0:u.otherFieldOfStudy,ce=e==null?void 0:e.otherFieldOfStudy,ve=J.otherFieldOfStudy;D=Z||ce||ve||"Filière personnalisée"}D||(D="Filière non spécifiée");const G=(u==null?void 0:u.graduationYear)||(e==null?void 0:e.graduationYear)||J.graduationYear||"",q=(u==null?void 0:u.email)||(e==null?void 0:e.email)||J.email||(t==null?void 0:t.email)||"",X=(u==null?void 0:u.photoURL)||(e==null?void 0:e.photoURL)||"",fe=(u==null?void 0:u.createdAt)||(e==null?void 0:e.createdAt),Te=(u==null?void 0:u.isVerified)||(e==null?void 0:e.isVerified),$e=(u==null?void 0:u.location)||(e==null?void 0:e.location)||"",ze=(u==null?void 0:u.co2Saved)||(e==null?void 0:e.co2Saved)||0,Le=t&&e&&t.uid===e.id,Ce=async Z=>{if(t)try{const ce=_t(We,"reviews",Z),ve=s.find(re=>re.id===Z);if(!ve)return;const ke=ve.likes||[],be=ve.dislikes||[];ke.includes(t.uid)?await Cn(ce,{likes:ke.filter(re=>re!==t.uid)}):await Cn(ce,{likes:[...ke,t.uid],dislikes:be.filter(re=>re!==t.uid)}),a(re=>re.map(_e=>{if(_e.id===Z){const Ee=_e.likes||[],de=_e.dislikes||[];return Ee.includes(t.uid)?{..._e,likes:Ee.filter(H=>H!==t.uid)}:{..._e,likes:[...Ee,t.uid],dislikes:de.filter(H=>H!==t.uid)}}return _e}))}catch(ce){console.error("Error liking review:",ce),Kn.error("Erreur lors du like")}},ne=async Z=>{if(t)try{const ce=_t(We,"reviews",Z),ve=s.find(re=>re.id===Z);if(!ve)return;const ke=ve.likes||[],be=ve.dislikes||[];be.includes(t.uid)?await Cn(ce,{dislikes:be.filter(re=>re!==t.uid)}):await Cn(ce,{dislikes:[...be,t.uid],likes:ke.filter(re=>re!==t.uid)}),a(re=>re.map(_e=>{if(_e.id===Z){const Ee=_e.likes||[],de=_e.dislikes||[];return de.includes(t.uid)?{..._e,dislikes:de.filter(H=>H!==t.uid)}:{..._e,dislikes:[...de,t.uid],likes:Ee.filter(H=>H!==t.uid)}}return _e}))}catch(ce){console.error("Error disliking review:",ce),Kn.error("Erreur lors du dislike")}},ie=async Z=>{if(!(!t||!x.trim()))try{const ce=_t(We,"reviews",Z),ve=s.find(be=>be.id===Z);if(!ve)return;const ke={userId:t.uid,comment:x.trim(),createdAt:new Date};await Cn(ce,{replies:[...ve.replies||[],ke]}),a(be=>be.map(re=>re.id===Z?{...re,replies:[...re.replies||[],ke]}:re)),S(""),b(null),Kn.success("Réponse envoyée")}catch(ce){console.error("Error replying to review:",ce),Kn.error("Erreur lors de l'envoi de la réponse")}},ae=async()=>{if(t)try{const Z=`${C} ${z}`.trim();await Cn(_t(We,"users",t.uid),{firstName:C,lastName:z,displayName:Z,updatedAt:new Date}),await t.reload(),Kn.success("Nom mis à jour !")}catch{Kn.error("Erreur lors de la mise à jour du nom")}};return t?i.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8 space-y-4 sm:space-y-6",children:[i.jsx(pe,{children:i.jsx(et,{className:"text-left",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:space-x-4 text-center sm:text-left",children:[i.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0",children:[i.jsx(L8,{currentPhotoURL:X,displayName:ee}),Te&&i.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 sm:w-6 sm:h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:i.jsx(qt,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 text-white"})})]}),i.jsxs("div",{className:"flex-1 w-full",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-2 mb-1",children:[i.jsx(nt,{className:"text-xl sm:text-2xl lg:text-3xl text-center sm:text-left w-full sm:w-auto",children:ee}),Te&&i.jsxs(lt,{className:"bg-green-100 text-green-800 border-green-200 mt-2 sm:mt-0 text-xs sm:text-sm",children:[i.jsx(qt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),i.jsx(kt,{className:"text-sm sm:text-base text-center sm:text-left break-all",children:q}),i.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-muted-foreground text-center sm:text-left text-xs sm:text-sm",children:[i.jsxs("div",{children:[i.jsx(ts,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 inline"})," Université : ",i.jsx("span",{className:"text-xs sm:text-sm",children:K})]}),i.jsxs("div",{children:[i.jsx(nf,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 inline"})," Filière : ",i.jsx("span",{className:"text-xs sm:text-sm",children:D})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-bold",children:"Année de diplôme :"})," ",i.jsx("span",{className:"text-xs sm:text-sm",children:G})]})]}),$e&&i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[i.jsx(Yr,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),i.jsx("span",{className:"text-xs sm:text-sm",children:$e})]}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[i.jsx(bi,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),i.jsxs("span",{className:"text-xs sm:text-sm",children:["Membre depuis ",$(fe)]})]}),ze&&ze>0&&i.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-green-600 text-center sm:text-left",children:[i.jsx(Xi,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),i.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[ze," kg CO₂ économisés"]})]})]})]})})}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[i.jsx(pe,{children:i.jsx(ge,{className:"pt-4 sm:pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(En,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:p.listings?i.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):h.totalListings}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-4 sm:pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zg,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:p.listings?i.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):h.activeListings}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-4 sm:pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ml,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:p.reviews?i.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):h.averageRating||"—"}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-4 sm:pt-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Jr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-red-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:p.favorites?i.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 bg-muted animate-pulse rounded"}):h.totalFavorites}),i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),i.jsxs(Gu,{defaultValue:"listings",className:"space-y-4",children:[i.jsxs(jc,{className:"grid w-full grid-cols-4 sm:grid-cols-4",children:[i.jsxs(pn,{value:"listings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(En,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"}),i.jsx("span",{className:"sm:hidden",children:"Annonces"}),!p.listings&&h.totalListings>0&&i.jsx(lt,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:h.totalListings})]}),i.jsxs(pn,{value:"reviews",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(Ml,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Avis Reçus"}),i.jsx("span",{className:"sm:hidden",children:"Avis"}),!p.reviews&&h.totalReviews>0&&i.jsx(lt,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:h.totalReviews})]}),i.jsxs(pn,{value:"favorites",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(Jr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Favoris"}),i.jsx("span",{className:"sm:hidden",children:"Favoris"}),!p.favorites&&h.totalFavorites>0&&i.jsx(lt,{variant:"secondary",className:"ml-1 text-[8px] sm:text-[10px] px-1 py-0.5",children:h.totalFavorites})]}),i.jsxs(pn,{value:"settings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[i.jsx(ts,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Paramètres"}),i.jsx("span",{className:"sm:hidden",children:"Paramètres"})]})]}),i.jsx(gn,{value:"listings",className:"space-y-4",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(En,{className:"w-5 h-5"}),"Mes Annonces"]}),i.jsx(kt,{children:"Gérez vos annonces publiées sur StudyMarket"})]}),i.jsx(ge,{children:p.listings?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((Z,ce)=>i.jsxs(pe,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(ge,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},ce))}):n.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(En,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publié d'annonces."}),i.jsx(te,{asChild:!0,children:i.jsx(Ue,{to:"/create",children:"Publier ma première annonce"})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(Z=>i.jsx(Op,{listing:Z},Z.id))})})]})}),i.jsx(gn,{value:"reviews",className:"space-y-4",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Ml,{className:"w-5 h-5"}),"Avis Reçus"]}),i.jsx(kt,{children:"Les avis laissés par d'autres étudiants"})]}),i.jsx(ge,{children:p.reviews?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((Z,ce)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((ve,ke)=>i.jsx("div",{className:"w-4 h-4 bg-muted rounded"},ke))}),i.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},ce))}):s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Rn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),i.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reçu pour le moment. Les avis apparaîtront après vos premières transactions."})]}):i.jsx("div",{className:"space-y-4",children:s.map(Z=>{var ce,ve,ke,be,re,_e;return i.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"flex",children:M(Z.rating)}),i.jsxs(lt,{variant:"secondary",className:"text-xs",children:[Z.rating,"/5"]})]}),i.jsx("span",{className:"text-sm text-muted-foreground",children:$(Z.createdAt)})]}),i.jsx("p",{className:"text-foreground mb-3 leading-relaxed text-left",children:Z.comment}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[((ce=j[Z.reviewerId])==null?void 0:ce.photoURL)&&i.jsx("img",{src:j[Z.reviewerId].photoURL,alt:"avatar",className:"w-7 h-7 rounded-full object-cover"}),Z.reviewerId===t.uid?(e==null?void 0:e.displayName)||"Vous":(ve=j[Z.reviewerId])!=null&&ve.displayName?j[Z.reviewerId].displayName:i.jsx("span",{className:"inline-block bg-gray-200 text-gray-600 px-2 py-0.5 rounded text-xs",children:"Profil supprimé"})]}),i.jsx(lt,{variant:"outline",className:"text-xs",children:Z.reviewType==="buyer"?"Acheteur":"Vendeur"})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[i.jsxs(te,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(ke=Z.likes)!=null&&ke.includes((t==null?void 0:t.uid)||"")?"text-primary":""}`,onClick:()=>Ce(Z.id),children:[i.jsx(zX,{className:"w-4 h-4"}),i.jsx("span",{children:((be=Z.likes)==null?void 0:be.length)||0})]}),i.jsxs(te,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(re=Z.dislikes)!=null&&re.includes((t==null?void 0:t.uid)||"")?"text-destructive":""}`,onClick:()=>ne(Z.id),children:[i.jsx(VX,{className:"w-4 h-4"}),i.jsx("span",{children:((_e=Z.dislikes)==null?void 0:_e.length)||0})]}),i.jsxs(te,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>b(N===Z.id?null:Z.id),children:[i.jsx(Rn,{className:"w-4 h-4"}),i.jsx("span",{children:"Répondre"})]})]}),N===Z.id&&i.jsxs("div",{className:"mt-3 space-y-2",children:[i.jsx(Ei,{placeholder:"Votre réponse...",value:x,onChange:Ee=>S(Ee.target.value),className:"min-h-[80px]"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(te,{variant:"outline",size:"sm",onClick:()=>{b(null),S("")},children:"Annuler"}),i.jsx(te,{size:"sm",onClick:()=>ie(Z.id),disabled:!x.trim(),children:"Envoyer"})]})]}),Z.replies&&Z.replies.length>0&&i.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-muted",children:Z.replies.map((Ee,de)=>{var H;return i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"font-medium",children:Le&&Ee.userId===(t==null?void 0:t.uid)?"Vous":((H=j[Ee.userId])==null?void 0:H.displayName)||"Utilisateur"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:$(Ee.createdAt)})]}),i.jsx("p",{className:"text-muted-foreground text-left",children:Ee.comment})]},de)})})]},Z.id)})})})]})}),i.jsx(gn,{value:"favorites",className:"space-y-4",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Jr,{className:"w-5 h-5"}),"Mes Favoris"]}),i.jsx(kt,{children:"Les annonces que vous avez ajoutées à vos favoris"})]}),i.jsx(ge,{children:p.favorites?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((Z,ce)=>i.jsxs(pe,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(ge,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},ce))}):o.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Jr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les à vos favoris !"}),i.jsx(te,{asChild:!0,children:i.jsx(Ue,{to:"/create",children:"Publier ma première annonce"})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(Z=>i.jsx(Op,{listing:Z},Z.id))})})]})}),i.jsx(gn,{value:"settings",className:"space-y-4",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Paramètres du profil"}),i.jsx(kt,{children:"Modifie tes informations principales."})]}),i.jsxs(ge,{children:[i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(Oe,{htmlFor:"firstName",children:"Prénom"}),i.jsx(Ze,{id:"firstName",value:C,onChange:Z=>R(Z.target.value),autoComplete:"given-name"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Oe,{htmlFor:"lastName",children:"Nom"}),i.jsx(Ze,{id:"lastName",value:z,onChange:Z=>k(Z.target.value),autoComplete:"family-name"})]})]}),i.jsx(te,{onClick:ae,disabled:!C||!z,children:"Enregistrer"})]})]})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour voir votre profil."})})})})};var Gw="Switch",[qhe,lje]=$r(Gw),[Ghe,Khe]=qhe(Gw),F8=w.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:u="on",onCheckedChange:d,form:h,...m}=t,[p,y]=w.useState(null),j=pt(e,S=>y(S)),_=w.useRef(!1),N=p?h||!!p.closest("form"):!0,[b,x]=Xs({prop:s,defaultProp:a??!1,onChange:d,caller:Gw});return i.jsxs(Ghe,{scope:n,checked:b,disabled:l,children:[i.jsx(Ye.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":U8(b),"data-disabled":l?"":void 0,disabled:l,value:u,...m,ref:j,onClick:Ve(t.onClick,S=>{x(C=>!C),N&&(_.current=S.isPropagationStopped(),_.current||S.stopPropagation())})}),N&&i.jsx(z8,{control:p,bubbles:!_.current,name:r,value:u,checked:b,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});F8.displayName=Gw;var $8="SwitchThumb",V8=w.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=Khe($8,n);return i.jsx(Ye.span,{"data-state":U8(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});V8.displayName=$8;var Zhe="SwitchBubbleInput",z8=w.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},a)=>{const o=w.useRef(null),l=pt(o,a),u=Ow(n),d=jw(e);return w.useEffect(()=>{const h=o.current;if(!h)return;const m=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==n&&y){const j=new Event("click",{bubbles:r});y.call(h,n),h.dispatchEvent(j)}},[u,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});z8.displayName=Zhe;function U8(t){return t?"checked":"unchecked"}var B8=F8,Qhe=V8;const hr=w.forwardRef(({className:t,...e},n)=>i.jsx(B8,{className:at("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:i.jsx(Qhe,{className:at("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));hr.displayName=B8.displayName;const Yhe=qu({firstName:xt().min(2,"Le prénom doit contenir au moins 2 caractères"),lastName:xt().min(2,"Le nom doit contenir au moins 2 caractères"),displayName:xt().optional(),bio:xt().max(500,"La bio ne peut pas dépasser 500 caractères").optional(),phone:xt().optional(),university:xt().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:xt().min(1,"Veuillez indiquer votre filière"),graduationYear:o8().min(2020).max(2035),campus:xt().optional(),location:xt().optional()}),Jhe=qu({currentPassword:xt().min(6,"Le mot de passe actuel est requis"),newPassword:xt().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractères"),confirmPassword:xt()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),Xhe=qu({newEmail:xt().email("Email invalide"),password:xt().min(6,"Mot de passe requis pour changer l'email")}),efe=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris Cité","Sciences Po Paris","Université de Lyon","Université de Marseille","Université de Toulouse","Université de Bordeaux","Université de Lille","Université de Strasbourg","Université de Nantes","Université de Montpellier","Autre université"],tfe=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Économie","Psychologie","Communication","Design","Autre"],nfe=()=>{var B,J,ee,K,D,G;const{currentUser:t,userProfile:e,updateUserProfile:n,logout:r}=jn(),s=yr(),[a,o]=w.useState("profile"),[l,u]=w.useState(!1),[d,h]=w.useState(!1),[m,p]=w.useState(!1),[y,j]=w.useState(!1),[_,N]=w.useState(""),[b,x]=w.useState({email:((B=e==null?void 0:e.notificationPreferences)==null?void 0:B.email)??!0,push:((J=e==null?void 0:e.notificationPreferences)==null?void 0:J.push)??!0,sms:((ee=e==null?void 0:e.notificationPreferences)==null?void 0:ee.sms)??!1,alerts:((K=e==null?void 0:e.notificationPreferences)==null?void 0:K.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[S,C]=w.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),R=uu({resolver:du(Yhe),defaultValues:{firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),z=uu({resolver:du(Jhe)}),k=uu({resolver:du(Xhe)});w.useEffect(()=>{var q,X,fe,Te;e&&(R.reset({firstName:e.firstName||"",lastName:e.lastName||"",displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),x({email:((q=e.notificationPreferences)==null?void 0:q.email)??!0,push:((X=e.notificationPreferences)==null?void 0:X.push)??!0,sms:((fe=e.notificationPreferences)==null?void 0:fe.sms)??!1,alerts:((Te=e.notificationPreferences)==null?void 0:Te.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,R]);const I=async q=>{u(!0);try{const{firstName:X,lastName:fe,...Te}=q,$e=`${X} ${fe}`;await Cn(_t(We,"users",t.uid),{...Te,firstName:X,lastName:fe,displayName:$e,updatedAt:new Date}),Ne.success("Profil mis à jour !")}catch{Ne.error("Erreur lors de la mise à jour du profil")}finally{u(!1)}},V=async()=>{u(!0);try{await n({notificationPreferences:{email:b.email,push:b.push,sms:b.sms,alerts:b.alerts}}),Ne.success("Préférences de notification mises à jour !")}catch(q){console.error("Erreur lors de la mise à jour des notifications:",q),Ne.error("Erreur lors de la mise à jour des notifications")}finally{u(!1)}},T=async q=>{if(t){u(!0);try{const X=tc.credential(t.email,q.currentPassword);await MT(t,X),await MG(t,q.newPassword),Ne.success("Mot de passe mis à jour avec succès !"),p(!1),z.reset()}catch(X){console.error("Erreur lors du changement de mot de passe:",X),X.code==="auth/wrong-password"?Ne.error("Mot de passe actuel incorrect"):Ne.error("Erreur lors du changement de mot de passe")}finally{u(!1)}}},O=async q=>{if(t){u(!0);try{const X=tc.credential(t.email,q.password);await MT(t,X),await OG(t,q.newEmail),await n({email:q.newEmail}),Ne.success("Email mis à jour avec succès !"),j(!1),k.reset()}catch(X){console.error("Erreur lors du changement d'email:",X),X.code==="auth/wrong-password"?Ne.error("Mot de passe incorrect"):X.code==="auth/email-already-in-use"?Ne.error("Cet email est déjà utilisé"):Ne.error("Erreur lors du changement d'email")}finally{u(!1)}}},$=async()=>{if(!(!t||_!=="SUPPRIMER")){u(!0);try{const q=ZL(We),X=["listings","conversations","reviews","favorites","reports"];for(const fe of X){const Te=Tn(Ht(We,fe),lr("userId","==",t.uid));(await Zn(Te)).forEach(ze=>{q.delete(ze.ref)})}q.delete(_t(We,"users",t.uid)),await q.commit(),await VG(t),Ne.success("Compte supprimé avec succès"),s("/")}catch(q){console.error("Erreur lors de la suppression du compte:",q),Ne.error("Erreur lors de la suppression du compte")}finally{u(!1)}}},M=async()=>{if(t){u(!0);try{const q={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},X=Tn(Ht(We,"listings"),lr("sellerId","==",t.uid)),fe=await Zn(X);q.listings=fe.docs.map(ve=>({id:ve.id,...ve.data()}));const Te=Tn(Ht(We,"conversations"),lr("participants","array-contains",t.uid)),$e=await Zn(Te);q.conversations=$e.docs.map(ve=>({id:ve.id,...ve.data()}));const ze=Tn(Ht(We,"reviews"),lr("revieweeId","==",t.uid)),Le=await Zn(ze);q.reviews=Le.docs.map(ve=>({id:ve.id,...ve.data()}));const Ce=Tn(Ht(We,"favorites"),lr("userId","==",t.uid)),ne=await Zn(Ce);q.favorites=ne.docs.map(ve=>({id:ve.id,...ve.data()}));const ie=JSON.stringify(q,null,2),ae=new Blob([ie],{type:"application/json"}),Z=URL.createObjectURL(ae),ce=document.createElement("a");ce.href=Z,ce.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,ce.click(),URL.revokeObjectURL(Z),Ne.success("Données exportées avec succès !")}catch(q){console.error("Erreur lors de l'export des données:",q),Ne.error("Erreur lors de l'export des données")}finally{u(!1)}}};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[i.jsx(Pp,{className:"w-8 h-8"}),"Paramètres"]}),i.jsx("p",{className:"text-muted-foreground",children:"Gérez votre profil, vos préférences et votre sécurité"})]}),i.jsxs(Gu,{value:a,onValueChange:o,className:"space-y-6",children:[i.jsxs(jc,{className:"grid w-full grid-cols-5",children:[i.jsxs(pn,{value:"profile",className:"flex items-center gap-2",children:[i.jsx(ts,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),i.jsxs(pn,{value:"notifications",className:"flex items-center gap-2",children:[i.jsx(Hi,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),i.jsxs(pn,{value:"privacy",className:"flex items-center gap-2",children:[i.jsx(Ph,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Confidentialité"})]}),i.jsxs(pn,{value:"security",className:"flex items-center gap-2",children:[i.jsx(qt,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Sécurité"})]}),i.jsxs(pn,{value:"data",className:"flex items-center gap-2",children:[i.jsx(Ni,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Données"})]})]}),i.jsx(gn,{value:"profile",className:"space-y-6",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(ts,{className:"w-5 h-5"}),"Informations personnelles"]}),i.jsx(kt,{children:"Mettez à jour vos informations de profil et vos préférences"})]}),i.jsxs(ge,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(L8,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Photo de profil"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),i.jsx(yi,{}),i.jsxs("form",{onSubmit:R.handleSubmit(I),className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"firstName",children:"Prénom *"}),i.jsx(Ze,{id:"firstName",...R.register("firstName"),placeholder:"Votre prénom"}),R.formState.errors.firstName&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.firstName.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"lastName",children:"Nom *"}),i.jsx(Ze,{id:"lastName",...R.register("lastName"),placeholder:"Votre nom"}),R.formState.errors.lastName&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.lastName.message})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"phone",children:"Téléphone"}),i.jsx(Ze,{id:"phone",type:"tel",...R.register("phone"),placeholder:"+33 6 12 34 56 78"})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"bio",children:"Biographie"}),i.jsx(Ei,{id:"bio",...R.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((D=R.watch("bio"))==null?void 0:D.length)||0,"/500 caractères"]})]}),i.jsx(yi,{}),i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(nf,{className:"w-4 h-4"}),"Informations académiques"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"university",children:"Université *"}),i.jsxs(on,{value:R.watch("university"),onValueChange:q=>R.setValue("university",q),children:[i.jsx(Jt,{children:i.jsx(ln,{placeholder:"Sélectionnez votre université"})}),i.jsx(Xt,{children:efe.map(q=>i.jsx(Qe,{value:q,children:q},q))})]}),R.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.university.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"fieldOfStudy",children:"Filière d'études *"}),i.jsxs(on,{value:R.watch("fieldOfStudy"),onValueChange:q=>R.setValue("fieldOfStudy",q),children:[i.jsx(Jt,{children:i.jsx(ln,{placeholder:"Sélectionnez votre filière"})}),i.jsx(Xt,{children:tfe.map(q=>i.jsx(Qe,{value:q,children:q},q))})]}),R.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.fieldOfStudy.message})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"graduationYear",children:"Année de diplôme *"}),i.jsxs(on,{value:(G=R.watch("graduationYear"))==null?void 0:G.toString(),onValueChange:q=>R.setValue("graduationYear",parseInt(q)),children:[i.jsx(Jt,{children:i.jsx(ln,{placeholder:"Année de diplôme"})}),i.jsx(Xt,{children:Array.from({length:16},(q,X)=>2020+X).map(q=>i.jsx(Qe,{value:q.toString(),children:q},q))})]}),R.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.graduationYear.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"campus",children:"Campus"}),i.jsx(Ze,{id:"campus",...R.register("campus"),placeholder:"Campus principal"})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"location",children:"Localisation"}),i.jsx(Ze,{id:"location",...R.register("location"),placeholder:"Paris, France"})]}),i.jsx(te,{type:"submit",disabled:l,className:"w-full",children:l?i.jsxs(i.Fragment,{children:[i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):i.jsxs(i.Fragment,{children:[i.jsx(r_,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),i.jsx(gn,{value:"notifications",className:"space-y-6",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Hi,{className:"w-5 h-5"}),"Préférences de notification"]}),i.jsx(kt,{children:"Choisissez comment vous souhaitez être notifié"})]}),i.jsxs(ge,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Os,{className:"w-4 h-4 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),i.jsx(hr,{checked:b.email,onCheckedChange:q=>x(X=>({...X,email:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Uu,{className:"w-4 h-4 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Notifications push"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),i.jsx(hr,{checked:b.push,onCheckedChange:q=>x(X=>({...X,push:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(rf,{className:"w-4 h-4 text-purple-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"SMS"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientôt disponible)"})]})]}),i.jsx(hr,{checked:b.sms,onCheckedChange:q=>x(X=>({...X,sms:q})),disabled:!0})]})]})]}),i.jsx(yi,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Types de notifications"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Rn,{className:"w-4 h-4 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Messages"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),i.jsx(hr,{checked:b.messages,onCheckedChange:q=>x(X=>({...X,messages:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(En,{className:"w-4 h-4 text-orange-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Annonces"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant à vos recherches"})]})]}),i.jsx(hr,{checked:b.listings,onCheckedChange:q=>x(X=>({...X,listings:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ml,{className:"w-4 h-4 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Avis et évaluations"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),i.jsx(hr,{checked:b.reviews,onCheckedChange:q=>x(X=>({...X,reviews:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Hi,{className:"w-4 h-4 text-red-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Alertes de sécurité"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises à jour de sécurité"})]})]}),i.jsx(hr,{checked:b.alerts,onCheckedChange:q=>x(X=>({...X,alerts:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(AX,{className:"w-4 h-4 text-pink-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Marketing"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalités et promotions"})]})]}),i.jsx(hr,{checked:b.marketing,onCheckedChange:q=>x(X=>({...X,marketing:q}))})]})]})]}),i.jsx(te,{onClick:V,disabled:l,className:"w-full",children:l?i.jsxs(i.Fragment,{children:[i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):i.jsxs(i.Fragment,{children:[i.jsx(r_,{className:"w-4 h-4 mr-2"}),"Sauvegarder les préférences"]})})]})]})}),i.jsx(gn,{value:"privacy",className:"space-y-6",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Ph,{className:"w-5 h-5"}),"Confidentialité et visibilité"]}),i.jsx(kt,{children:"Contrôlez qui peut voir vos informations"})]}),i.jsxs(ge,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Visibilité du profil"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Profil public"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les étudiants vérifiés"})]}),i.jsx(hr,{checked:S.profileVisibility==="public",onCheckedChange:q=>C(X=>({...X,profileVisibility:q?"public":"private"}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher l'email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),i.jsx(hr,{checked:S.showEmail,onCheckedChange:q=>C(X=>({...X,showEmail:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher le téléphone"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numéro de téléphone est visible sur votre profil"})]}),i.jsx(hr,{checked:S.showPhone,onCheckedChange:q=>C(X=>({...X,showPhone:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Afficher l'université"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre université est visible sur votre profil"})]}),i.jsx(hr,{checked:S.showUniversity,onCheckedChange:q=>C(X=>({...X,showUniversity:q}))})]})]})]}),i.jsx(yi,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Interactions"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres étudiants peuvent vous envoyer des messages"})]}),i.jsx(hr,{checked:S.allowMessages,onCheckedChange:q=>C(X=>({...X,allowMessages:q}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Statut en ligne"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous êtes en ligne"})]}),i.jsx(hr,{checked:S.showOnlineStatus,onCheckedChange:q=>C(X=>({...X,showOnlineStatus:q}))})]})]})]}),i.jsxs(Kt,{children:[i.jsx(qt,{className:"h-4 w-4"}),i.jsx(Zt,{children:"Vos informations personnelles sont toujours protégées et ne sont jamais partagées avec des tiers sans votre consentement."})]})]})]})}),i.jsx(gn,{value:"security",className:"space-y-6",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(qt,{className:"w-5 h-5"}),"Sécurité du compte"]}),i.jsx(kt,{children:"Gérez la sécurité de votre compte StudyMarket"})]}),i.jsxs(ge,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Informations du compte"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Os,{className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"font-medium",children:"Email"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),i.jsxs(Ua,{open:y,onOpenChange:j,children:[i.jsx(ch,{asChild:!0,children:i.jsx(te,{variant:"outline",size:"sm",children:"Changer l'email"})}),i.jsxs(ea,{children:[i.jsxs(Ba,{children:[i.jsx(ta,{children:"Changer l'adresse email"}),i.jsx(cu,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),i.jsxs("form",{onSubmit:k.handleSubmit(O),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"newEmail",children:"Nouvel email"}),i.jsx(Ze,{id:"newEmail",type:"email",...k.register("newEmail"),placeholder:"nouveau@email.com"}),k.formState.errors.newEmail&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:k.formState.errors.newEmail.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),i.jsx(Ze,{id:"emailPassword",type:"password",...k.register("password"),placeholder:"••••••••"}),k.formState.errors.password&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:k.formState.errors.password.message})]}),i.jsxs(Zy,{children:[i.jsx(te,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Annuler"}),i.jsxs(te,{type:"submit",disabled:l,children:[l?i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(r_,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Su,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernière modification : il y a 30 jours"}),i.jsxs(Ua,{open:m,onOpenChange:p,children:[i.jsx(ch,{asChild:!0,children:i.jsx(te,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),i.jsxs(ea,{children:[i.jsxs(Ba,{children:[i.jsx(ta,{children:"Changer le mot de passe"}),i.jsx(cu,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),i.jsxs("form",{onSubmit:z.handleSubmit(T),className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),i.jsx(Ze,{id:"currentPassword",type:"password",...z.register("currentPassword"),placeholder:"••••••••"}),z.formState.errors.currentPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:z.formState.errors.currentPassword.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),i.jsx(Ze,{id:"newPassword",type:"password",...z.register("newPassword"),placeholder:"••••••••"}),z.formState.errors.newPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:z.formState.errors.newPassword.message})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),i.jsx(Ze,{id:"confirmPassword",type:"password",...z.register("confirmPassword"),placeholder:"••••••••"}),z.formState.errors.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive mt-1",children:z.formState.errors.confirmPassword.message})]}),i.jsxs(Zy,{children:[i.jsx(te,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Annuler"}),i.jsxs(te,{type:"submit",disabled:l,children:[l?i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(CX,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),i.jsx(yi,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Vérification du compte"}),i.jsx("div",{className:"p-4 border rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vérifié":"Vérification en attente"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut étudiant a été vérifié":"Votre statut étudiant est en cours de vérification"})]})]}),e!=null&&e.isVerified?i.jsxs(lt,{className:"bg-green-100 text-green-800",children:[i.jsx(Ot,{className:"w-3 h-3 mr-1"}),"Vérifié"]}):i.jsx(lt,{variant:"outline",children:"En attente"})]})})]}),i.jsxs(Kt,{children:[i.jsx(qt,{className:"h-4 w-4"}),i.jsx(Zt,{children:"Pour votre sécurité, nous vous recommandons d'utiliser un mot de passe fort et de le changer régulièrement."})]})]})]})}),i.jsxs(gn,{value:"data",className:"space-y-6",children:[i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Ni,{className:"w-5 h-5"}),"Gestion des données"]}),i.jsx(kt,{children:"Exportez ou supprimez vos données personnelles"})]}),i.jsxs(ge,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Exporter mes données"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Téléchargez une copie de toutes vos données StudyMarket au format JSON."}),i.jsxs(te,{onClick:M,disabled:l,variant:"outline",children:[l?i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(Ni,{className:"w-4 h-4 mr-2"}),"Exporter mes données"]})]}),i.jsx(yi,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),i.jsxs(Kt,{className:"border-destructive",children:[i.jsx(Un,{className:"h-4 w-4"}),i.jsx(Zt,{children:"La suppression de votre compte est irréversible. Toutes vos données seront définitivement supprimées."})]}),i.jsxs(Ua,{open:d,onOpenChange:h,children:[i.jsx(ch,{asChild:!0,children:i.jsxs(te,{variant:"destructive",children:[i.jsx(To,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),i.jsxs(ea,{children:[i.jsxs(Ba,{children:[i.jsx(ta,{className:"text-destructive",children:"Supprimer définitivement le compte"}),i.jsxs(cu,{children:["Cette action est irréversible. Toutes vos données seront supprimées :",i.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[i.jsx("li",{children:"Profil utilisateur"}),i.jsx("li",{children:"Toutes vos annonces"}),i.jsx("li",{children:"Conversations et messages"}),i.jsx("li",{children:"Avis et évaluations"}),i.jsx("li",{children:"Favoris et recherches sauvegardées"})]})]})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),i.jsx(Ze,{id:"deleteConfirm",value:_,onChange:q=>N(q.target.value),placeholder:"SUPPRIMER"})]})}),i.jsxs(Zy,{children:[i.jsx(te,{variant:"outline",onClick:()=>h(!1),children:"Annuler"}),i.jsxs(te,{variant:"destructive",onClick:$,disabled:_!=="SUPPRIMER"||l,children:[l?i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(To,{className:"w-4 h-4 mr-2"}),"Supprimer définitivement"]})]})]})]})]})]})]}),i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Gx,{className:"w-5 h-5"}),"Informations légales"]})}),i.jsx(ge,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(te,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Cs,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),i.jsx(te,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Cs,{className:"w-4 h-4"}),"Politique de confidentialité"]})}),i.jsx(te,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Cs,{className:"w-4 h-4"}),"Politique des cookies"]})}),i.jsx(te,{variant:"outline",asChild:!0,children:i.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[i.jsx(Cs,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour accéder aux paramètres."})})})})};var YE="Progress",JE=100,[rfe,cje]=$r(YE),[sfe,ife]=rfe(YE),W8=w.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=afe,...o}=t;(s||s===0)&&!gI(s)&&console.error(ofe(`${s}`,"Progress"));const l=gI(s)?s:JE;r!==null&&!vI(r,l)&&console.error(lfe(`${r}`,"Progress"));const u=vI(r,l)?r:null,d=v0(u)?a(u,l):void 0;return i.jsx(sfe,{scope:n,value:u,max:l,children:i.jsx(Ye.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":v0(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":G8(u,l),"data-value":u??void 0,"data-max":l,...o,ref:e})})});W8.displayName=YE;var H8="ProgressIndicator",q8=w.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=ife(H8,n);return i.jsx(Ye.div,{"data-state":G8(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});q8.displayName=H8;function afe(t,e){return`${Math.round(t/e*100)}%`}function G8(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function v0(t){return typeof t=="number"}function gI(t){return v0(t)&&!isNaN(t)&&t>0}function vI(t,e){return v0(t)&&!isNaN(t)&&t<=e&&t>=0}function ofe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${JE}\`.`}function lfe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${JE} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var K8=W8,cfe=q8;const Z8=w.forwardRef(({className:t,value:e,...n},r)=>i.jsx(K8,{ref:r,className:at("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:i.jsx(cfe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Z8.displayName=K8.displayName;const Lc={electronics:{category:"Électronique",icon:Uu,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:y3,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:Zx,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, déco, électroménager"},clothing:{category:"Vêtements",icon:Y2,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vêtements, chaussures, accessoires"}},ufe=[{id:"first_transaction",name:"Premier Pas",icon:"🌱",threshold:1,description:"Première transaction écologique"},{id:"co2_saver_10",name:"Éco-Warrior",icon:"🌍",threshold:10,description:"10 kg CO₂ économisés"},{id:"co2_saver_50",name:"Planète Protecteur",icon:"🛡️",threshold:50,description:"50 kg CO₂ économisés"},{id:"co2_saver_100",name:"Héros Climatique",icon:"🦸",threshold:100,description:"100 kg CO₂ économisés"},{id:"water_saver",name:"Gardien de l'Eau",icon:"💧",threshold:1e3,description:"1000L d'eau économisés"},{id:"recycling_master",name:"Maître du Recyclage",icon:"♻️",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"😇",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"🏆",threshold:10,description:"10 transactions en un mois"}],jd=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},dfe=()=>{const{currentUser:t,userProfile:e}=jn(),[n,r]=w.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Débutant",percentile:0}),[s,a]=w.useState([]),[o,l]=w.useState(!0),[u,d]=w.useState("all");w.useEffect(()=>{t&&h()},[t,u]);const h=async()=>{if(t){l(!0);try{const x=Tn(Ht(We,"listings"),lr("sellerId","==",t.uid)),S=await Zn(x),C=[];S.forEach(z=>{const k=z.data();C.push({id:z.id,...k,createdAt:jd(k.createdAt),updatedAt:jd(k.updatedAt)})}),a(C);const R=m(C,u);r(R),await _(R)}catch(x){console.error("Erreur lors du chargement des données environnementales:",x)}finally{l(!1)}}},m=(x,S)=>{const C=new Date;let R=x;if(S==="month"){const J=new Date(C.getFullYear(),C.getMonth()-1,C.getDate());R=x.filter(ee=>jd(ee.createdAt)>=J)}else if(S==="year"){const J=new Date(C.getFullYear()-1,C.getMonth(),C.getDate());R=x.filter(ee=>jd(ee.createdAt)>=J)}let z=0,k=0,I=0,V=0;const T={};R.forEach(J=>{const ee=Lc[J.category]||Lc.electronics,K=1;let D=1;J.transactionType==="donation"?D=1.2:J.transactionType==="exchange"&&(D=.8),z+=ee.co2PerItem*K*D,k+=ee.waterPerItem*K*D,I+=ee.energyPerItem*K*D,V+=ee.wastePerItem*K*D,T[J.category]=(T[J.category]||0)+1});const O=p(x),$=y(x,z,k),{rank:M,percentile:B}=j(z,x.length);return{totalCo2Saved:Math.round(z*10)/10,totalWaterSaved:Math.round(k),totalEnergySaved:Math.round(I*10)/10,totalWasteAvoided:Math.round(V*10)/10,transactionsByCategory:T,monthlyImpact:O,badges:$,rank:M,percentile:B}},p=x=>{const S={};for(let C=11;C>=0;C--){const R=new Date;R.setMonth(R.getMonth()-C);const z=R.toISOString().slice(0,7);S[z]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return x.forEach(C=>{const z=jd(C.createdAt).toISOString().slice(0,7);if(S[z]){const k=Lc[C.category]||Lc.electronics;let I=1;C.transactionType==="donation"?I=1.2:C.transactionType==="exchange"&&(I=.8),S[z].co2Saved+=k.co2PerItem*I,S[z].waterSaved+=k.waterPerItem*I,S[z].energySaved+=k.energyPerItem*I,S[z].transactions+=1}}),Object.entries(S).map(([C,R])=>({month:C,co2Saved:Math.round(R.co2Saved*10)/10,transactions:R.transactions,waterSaved:Math.round(R.waterSaved),energySaved:Math.round(R.energySaved*10)/10}))},y=(x,S,C)=>{const R=[];x.length>=1&&R.push("first_transaction"),S>=10&&R.push("co2_saver_10"),S>=50&&R.push("co2_saver_50"),S>=100&&R.push("co2_saver_100"),C>=1e3&&R.push("water_saver"),x.length>=20&&R.push("recycling_master"),x.filter(V=>V.transactionType==="donation").length>=5&&R.push("donation_hero");const k=new Date().toISOString().slice(0,7);return x.filter(V=>jd(V.createdAt).toISOString().slice(0,7)===k).length>=10&&R.push("monthly_champion"),R},j=(x,S)=>{let C="Débutant",R=0;return x>=200?(C="Légende Écologique",R=95):x>=100?(C="Maître Environnemental",R=85):x>=50?(C="Expert Vert",R=70):x>=25?(C="Éco-Warrior",R=50):x>=10?(C="Protecteur",R=30):x>=5&&(C="Apprenti Vert",R=15),{rank:C,percentile:R}},_=async x=>{if(t)try{const S=_t(We,"users",t.uid);await Cn(S,{co2Saved:x.totalCo2Saved,environmentalRank:x.rank,environmentalBadges:x.badges,lastEnvironmentalUpdate:new Date})}catch(S){console.error("Erreur lors de la mise à jour des données environnementales:",S)}},N=async()=>{const x=`🌍 Mon impact écologique sur StudyMarket :

🌱 ${n.totalCo2Saved} kg CO₂ économisés
💧 ${n.totalWaterSaved} L d'eau préservés
⚡ ${n.totalEnergySaved} kWh d'énergie économisés
🏆 Rang : ${n.rank}

Rejoignez la communauté étudiante éco-responsable ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mon Impact Écologique - StudyMarket",text:x,url:window.location.origin})}catch{navigator.clipboard.writeText(x)}else navigator.clipboard.writeText(x)},b=()=>{const x={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:n,transactions:s.length,period:u},S=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),C=URL.createObjectURL(S),R=document.createElement("a");R.href=C,R.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,R.click(),URL.revokeObjectURL(C)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Xi,{className:"w-8 h-8 text-green-600"}),"Mon Impact Écologique"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez votre contribution à la protection de l'environnement"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(te,{variant:"outline",onClick:N,className:"flex items-center gap-2",children:[i.jsx(pw,{className:"w-4 h-4"}),"Partager"]}),i.jsxs(te,{variant:"outline",onClick:b,className:"flex items-center gap-2",children:[i.jsx(Ni,{className:"w-4 h-4"}),"Exporter"]})]})]}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(bi,{className:"w-5 h-5 text-muted-foreground"}),i.jsx("span",{className:"font-medium",children:"Période d'analyse :"})]}),i.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette année"},{key:"all",label:"Tout"}].map(x=>i.jsx(te,{variant:u===x.key?"default":"outline",size:"sm",onClick:()=>d(x.key),children:x.label},x.key))})]})})}),o?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((x,S)=>i.jsx(pe,{className:"animate-pulse",children:i.jsx(ge,{className:"pt-6",children:i.jsx("div",{className:"h-16 bg-muted rounded"})})},S))}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(pe,{className:"border-green-200 bg-green-50/50",children:i.jsxs(ge,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-green-700",children:n.totalCo2Saved}),i.jsx("p",{className:"text-sm text-green-600",children:"kg CO₂ économisés"})]}),i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(Xi,{className:"w-6 h-6 text-green-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-green-600",children:["≈ ",Math.round(n.totalCo2Saved/2.3)," km en voiture évités"]})]})}),i.jsx(pe,{className:"border-blue-200 bg-blue-50/50",children:i.jsxs(ge,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.totalWaterSaved.toLocaleString()}),i.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau préservés"})]}),i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx($R,{className:"w-6 h-6 text-blue-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["≈ ",Math.round(n.totalWaterSaved/150)," douches économisées"]})]})}),i.jsx(pe,{className:"border-yellow-200 bg-yellow-50/50",children:i.jsxs(ge,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:n.totalEnergySaved}),i.jsx("p",{className:"text-sm text-yellow-600",children:"kWh économisés"})]}),i.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:i.jsx(sf,{className:"w-6 h-6 text-yellow-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:["≈ ",Math.round(n.totalEnergySaved/3.5)," jours d'électricité"]})]})}),i.jsx(pe,{className:"border-purple-200 bg-purple-50/50",children:i.jsxs(ge,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-purple-700",children:n.totalWasteAvoided}),i.jsx("p",{className:"text-sm text-purple-600",children:"kg déchets évités"})]}),i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:i.jsx(DX,{className:"w-6 h-6 text-purple-600"})})]}),i.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["≈ ",Math.round(n.totalWasteAvoided/.5)," sacs poubelle évités"]})]})})]}),i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(g3,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang Écologique"]})}),i.jsxs(ge,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-primary",children:n.rank}),i.jsxs("p",{className:"text-muted-foreground",children:["Vous êtes dans le top ",100-n.percentile,"% des utilisateurs"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl",children:"🏆"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),i.jsx(Z8,{value:n.percentile,className:"h-3"}),i.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[i.jsx("span",{children:"Débutant"}),i.jsx("span",{children:"Légende Écologique"})]})]})]}),i.jsxs(Gu,{defaultValue:"overview",className:"space-y-4",children:[i.jsxs(jc,{className:"grid w-full grid-cols-4",children:[i.jsx(pn,{value:"overview",children:"Vue d'ensemble"}),i.jsx(pn,{value:"categories",children:"Par catégorie"}),i.jsx(pn,{value:"badges",children:"Badges"}),i.jsx(pn,{value:"methodology",children:"Méthodologie"})]}),i.jsxs(gn,{value:"overview",className:"space-y-6",children:[i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(j3,{className:"w-5 h-5"}),"Évolution Mensuelle"]}),i.jsx(kt,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),i.jsx(ge,{children:i.jsx("div",{className:"space-y-4",children:n.monthlyImpact.slice(-6).map((x,S)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),i.jsx("span",{className:"font-medium",children:new Date(x.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),i.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-green-600",children:[x.co2Saved," kg"]}),i.jsx("div",{className:"text-muted-foreground",children:"CO₂"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-blue-600",children:[x.waterSaved," L"]}),i.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold text-primary",children:x.transactions}),i.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},x.month))})})]}),i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(S3,{className:"w-5 h-5"}),"Équivalences Concrètes"]}),i.jsx(kt,{children:"Votre impact traduit en équivalences du quotidien"})]}),i.jsx(ge,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[i.jsx(_3,{className:"w-8 h-8 text-green-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/2.3)," km"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture évités"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[i.jsx(UX,{className:"w-8 h-8 text-blue-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/22)," arbres"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"plantés (équivalent CO₂)"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[i.jsx(NX,{className:"w-8 h-8 text-yellow-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalEnergySaved/24)," jours"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation électrique"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[i.jsx($R,{className:"w-8 h-8 text-purple-600"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalWaterSaved/150)," douches"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes économisées"})]})]})]})})]})]}),i.jsx(gn,{value:"categories",className:"space-y-6",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(En,{className:"w-5 h-5"}),"Impact par Catégorie"]}),i.jsx(kt,{children:"Détail de votre impact selon les types d'objets échangés"})]}),i.jsx(ge,{children:i.jsx("div",{className:"space-y-4",children:Object.entries(n.transactionsByCategory).map(([x,S])=>{const C=Lc[x]||Lc.electronics,R=C.icon,z=S*C.co2PerItem;return i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:i.jsx(R,{className:`w-5 h-5 ${C.color}`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:C.category}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[S," transaction",S>1?"s":""]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(z*10)/10," kg CO₂"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(S*C.waterPerItem)," L eau"]})]})]},x)})})})]})}),i.jsx(gn,{value:"badges",className:"space-y-6",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(k3,{className:"w-5 h-5"}),"Badges Écologiques"]}),i.jsx(kt,{children:"Vos récompenses pour votre engagement environnemental"})]}),i.jsx(ge,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ufe.map(x=>{const S=n.badges.includes(x.id);return i.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${S?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl mb-2",children:x.icon}),i.jsx("h3",{className:`font-semibold ${S?"text-green-800":"text-gray-600"}`,children:x.name}),i.jsx("p",{className:`text-sm ${S?"text-green-600":"text-gray-500"}`,children:x.description}),S&&i.jsx(lt,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},x.id)})})})]})}),i.jsx(gn,{value:"methodology",className:"space-y-6",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(ac,{className:"w-5 h-5"}),"Méthodologie de Calcul"]}),i.jsx(kt,{children:"Comment nous calculons votre impact environnemental"})]}),i.jsxs(ge,{className:"space-y-6",children:[i.jsxs(Kt,{children:[i.jsx(ac,{className:"h-4 w-4"}),i.jsx(Zt,{children:"Nos calculs sont basés sur des études scientifiques et des données de l'ADEME (Agence de l'Environnement et de la Maîtrise de l'Énergie)."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),i.jsx("p",{className:"text-muted-foreground",children:"Chaque objet acheté d'occasion évite la production d'un objet neuf. Nous calculons l'impact environnemental évité en nous basant sur l'empreinte carbone, hydrique et énergétique de la production de chaque catégorie d'objets."}),i.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catégorie"}),i.jsx("div",{className:"space-y-3",children:Object.entries(Lc).map(([x,S])=>{const C=S.icon;return i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(C,{className:`w-4 h-4 ${S.color}`}),i.jsx("span",{className:"font-medium",children:S.category})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"CO₂:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[S.co2PerItem," kg"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[S.waterPerItem," L"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Énergie:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[S.energyPerItem," kWh"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Déchets:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[S.wastePerItem," kg"]})]})]})]},x)})}),i.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondération"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ch,{className:"w-4 h-4 text-green-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($o,{className:"w-4 h-4 text-purple-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Échanges/Troc :"})," -20% d'impact (pas de transaction monétaire)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(En,{className:"w-4 h-4 text-blue-600"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),i.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Références"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• ADEME - Base Carbone® pour les facteurs d'émission"}),i.jsx("li",{children:"• Water Footprint Network pour l'empreinte hydrique"}),i.jsx("li",{children:"• IEA (International Energy Agency) pour l'énergie"}),i.jsx("li",{children:"• Ellen MacArthur Foundation pour l'économie circulaire"})]})]})]})]})})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx(Xi,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),i.jsx("p",{className:"text-muted-foreground",children:"Découvrez combien vous contribuez à la protection de l'environnement"})]})})})},my=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},y0=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(y0).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=y0(t[n]);r!==void 0&&(e[n]=r)}),e}return t},yI=[{value:"all",label:"Toutes catégories"},{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],xI=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"Échange"},{value:"service",label:"Service"}],hfe=[{value:"all",label:"Toutes universités"},{value:"sorbonne",label:"Sorbonne Université"},{value:"dauphine",label:"Université Paris-Dauphine"},{value:"polytechnique",label:"École Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSupélec"}],ffe=()=>{const{currentUser:t,userProfile:e}=jn(),[n,r]=w.useState([]),[s,a]=w.useState([]),[o,l]=w.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[u,d]=w.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[h,m]=w.useState(!1),[p,y]=w.useState(null),[j,_]=w.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});w.useEffect(()=>{t&&(N(),b())},[t]);const N=async()=>{if(t)try{d(B=>({...B,searches:!0}));const T=Tn(Ht(We,"savedSearches"),lr("userId","==",t.uid),ji(50)),O=await Zn(T),$=[];O.forEach(B=>{const J=B.data();$.push({id:B.id,...J,createdAt:my(J.createdAt),updatedAt:my(J.updatedAt),lastNotified:J.lastNotified?my(J.lastNotified):void 0})}),$.sort((B,J)=>J.createdAt.getTime()-B.createdAt.getTime()),r($);const M=$.filter(B=>B.alertsEnabled).length;l(B=>({...B,totalSearches:$.length,activeAlerts:M}))}catch(T){console.error("Erreur lors du chargement des recherches sauvegardées:",T),Ne.error("Erreur lors du chargement des recherches sauvegardées")}finally{d(T=>({...T,searches:!1}))}},b=async()=>{if(t)try{d(B=>({...B,matches:!0}));const T=Tn(Ht(We,"alertMatches"),lr("userId","==",t.uid),ji(100)),O=await Zn(T),$=[];O.forEach(B=>{const J=B.data();$.push({id:B.id,...J,matchedAt:my(J.matchedAt)})}),$.sort((B,J)=>J.matchedAt.getTime()-B.matchedAt.getTime()),a($);const M=$.filter(B=>!B.seen).length;l(B=>({...B,totalMatches:$.length,newMatches:M}))}catch(T){console.error("Erreur lors du chargement des correspondances:",T),Ne.error("Erreur lors du chargement des correspondances")}finally{d(T=>({...T,matches:!1}))}},x=async()=>{if(!t||!j.name.trim()){Ne.error("Veuillez remplir le nom de la recherche");return}d(T=>({...T,creating:!0}));try{const T={};if(j.query&&j.query.trim()&&(T.query=j.query.trim()),j.category&&j.category!=="all"&&(T.category=j.category),j.transactionType&&j.transactionType!=="all"&&(T.transactionType=j.transactionType),j.university&&j.university!=="all"&&(T.university=j.university),j.minPrice&&j.minPrice.trim()){const M=parseFloat(j.minPrice);!isNaN(M)&&M>=0&&(T.minPrice=M)}if(j.maxPrice&&j.maxPrice.trim()){const M=parseFloat(j.maxPrice);!isNaN(M)&&M>=0&&(T.maxPrice=M)}const O={userId:t.uid,name:j.name.trim(),filters:T,alertsEnabled:j.alertsEnabled,notificationFrequency:j.notificationFrequency,notificationMethods:{email:j.notificationMethods.email,push:j.notificationMethods.push,sms:j.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},$=y0(O);await ic(Ht(We,"savedSearches"),$),Ne.success("Alerte créée avec succès !"),m(!1),k(),N()}catch(T){console.error("Erreur lors de la création de l'alerte:",T),Ne.error("Erreur lors de la création de l'alerte")}finally{d(T=>({...T,creating:!1}))}},S=async(T,O)=>{try{d(M=>({...M,updating:!0}));const $=y0({...O,updatedAt:new Date});await Cn(_t(We,"savedSearches",T),$),Ne.success("Recherche mise à jour !"),N()}catch($){console.error("Erreur lors de la mise à jour:",$),Ne.error("Erreur lors de la mise à jour")}finally{d($=>({...$,updating:!1}))}},C=async T=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette recherche sauvegardée ?"))try{await Sh(_t(We,"savedSearches",T)),Ne.success("Recherche supprimée !"),N()}catch(O){console.error("Erreur lors de la suppression:",O),Ne.error("Erreur lors de la suppression")}},R=async(T,O)=>{await S(T,{alertsEnabled:O})},z=async T=>{try{await Cn(_t(We,"alertMatches",T),{seen:!0,seenAt:new Date}),b()}catch(O){console.error("Erreur lors du marquage comme vu:",O)}},k=()=>{_({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),y(null)},I=T=>{try{return ff(T,{addSuffix:!0,locale:Xr})}catch{return"Date inconnue"}},V=T=>{const O=[];if(T.query&&O.push(`"${T.query}"`),T.category&&T.category!=="all"){const $=yI.find(M=>M.value===T.category);$&&O.push($.label)}if(T.transactionType&&T.transactionType!=="all"){const $=xI.find(M=>M.value===T.transactionType);$&&O.push($.label)}return T.minPrice!==void 0&&O.push(`≥ ${T.minPrice}€`),T.maxPrice!==void 0&&O.push(`≤ ${T.maxPrice}€`),O.length>0?O.join(" • "):"Tous les critères"};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Hi,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&i.jsx(lt,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos recherches sauvegardées et recevez des notifications"})]}),i.jsxs(Ua,{open:h,onOpenChange:m,children:[i.jsx(ch,{asChild:!0,children:i.jsxs(te,{className:"bg-gradient-to-r from-primary to-secondary",children:[i.jsx(ou,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),i.jsxs(ea,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(Ba,{children:[i.jsxs(ta,{className:"flex items-center gap-2",children:[i.jsx(Mc,{className:"w-5 h-5"}),"Créer une Alerte Personnalisée"]}),i.jsx(cu,{children:"Définissez vos critères de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),i.jsx(Ze,{id:"alert-name",value:j.name,onChange:T=>_(O=>({...O,name:T.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(mw,{className:"w-4 h-4"}),"Critères de Recherche"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"search-query",children:"Mots-clés"}),i.jsx(Ze,{id:"search-query",value:j.query,onChange:T=>_(O=>({...O,query:T.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"search-category",children:"Catégorie"}),i.jsxs(on,{value:j.category,onValueChange:T=>_(O=>({...O,category:T})),children:[i.jsx(Jt,{className:"mt-1",children:i.jsx(ln,{})}),i.jsx(Xt,{children:yI.map(T=>i.jsx(Qe,{value:T.value,children:T.label},T.value))})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"transaction-type",children:"Type de transaction"}),i.jsxs(on,{value:j.transactionType,onValueChange:T=>_(O=>({...O,transactionType:T})),children:[i.jsx(Jt,{className:"mt-1",children:i.jsx(ln,{})}),i.jsx(Xt,{children:xI.map(T=>i.jsx(Qe,{value:T.value,children:T.label},T.value))})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"search-university",children:"Université"}),i.jsxs(on,{value:j.university,onValueChange:T=>_(O=>({...O,university:T})),children:[i.jsx(Jt,{className:"mt-1",children:i.jsx(ln,{})}),i.jsx(Xt,{children:hfe.map(T=>i.jsx(Qe,{value:T.value,children:T.label},T.value))})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"min-price",children:"Prix minimum (€)"}),i.jsx(Ze,{id:"min-price",type:"number",value:j.minPrice,onChange:T=>_(O=>({...O,minPrice:T.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"max-price",children:"Prix maximum (€)"}),i.jsx(Ze,{id:"max-price",type:"number",value:j.maxPrice,onChange:T=>_(O=>({...O,maxPrice:T.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.jsx(Hi,{className:"w-4 h-4"}),"Notifications"]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),i.jsx(hr,{id:"alerts-enabled",checked:j.alertsEnabled,onCheckedChange:T=>_(O=>({...O,alertsEnabled:T}))})]}),j.alertsEnabled&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(Oe,{children:"Fréquence des notifications"}),i.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantané",description:"Dès qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un résumé par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un résumé par semaine"}].map(T=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:T.value,name:"frequency",value:T.value,checked:j.notificationFrequency===T.value,onChange:O=>_($=>({...$,notificationFrequency:O.target.value})),className:"rounded border-border"}),i.jsx(Oe,{htmlFor:T.value,className:"cursor-pointer",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:T.label}),i.jsx("div",{className:"text-sm text-muted-foreground",children:T.description})]})})]},T.value))})]}),i.jsxs("div",{children:[i.jsx(Oe,{children:"Méthodes de notification"}),i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Os,{className:"w-4 h-4 text-blue-600"}),i.jsx(Oe,{htmlFor:"email-notifications",children:"Email"})]}),i.jsx(hr,{id:"email-notifications",checked:j.notificationMethods.email,onCheckedChange:T=>_(O=>({...O,notificationMethods:{...O.notificationMethods,email:T}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hi,{className:"w-4 h-4 text-green-600"}),i.jsx(Oe,{htmlFor:"push-notifications",children:"Notifications push"})]}),i.jsx(hr,{id:"push-notifications",checked:j.notificationMethods.push,onCheckedChange:T=>_(O=>({...O,notificationMethods:{...O.notificationMethods,push:T}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(VR,{className:"w-4 h-4 text-purple-600"}),i.jsx(Oe,{htmlFor:"sms-notifications",children:"SMS"}),i.jsx(lt,{variant:"outline",className:"text-xs",children:"Bientôt"})]}),i.jsx(hr,{id:"sms-notifications",checked:j.notificationMethods.sms,onCheckedChange:T=>_(O=>({...O,notificationMethods:{...O.notificationMethods,sms:T}})),disabled:!0})]})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[i.jsx(te,{variant:"outline",onClick:()=>m(!1),children:"Annuler"}),i.jsx(te,{onClick:x,disabled:u.creating||!j.name.trim(),children:u.creating?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Créer l'alerte"]})})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauvées"})]}),i.jsx(Er,{className:"w-8 h-8 text-blue-600"})]})})}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),i.jsx(Hi,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),i.jsx(Mc,{className:"w-8 h-8 text-purple-600"})]})})}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.newMatches}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),i.jsx(sf,{className:"w-8 h-8 text-orange-600"})]})})})]}),i.jsxs(Gu,{defaultValue:"searches",className:"space-y-4",children:[i.jsxs(jc,{className:"grid w-full grid-cols-2",children:[i.jsxs(pn,{value:"searches",className:"flex items-center gap-2",children:[i.jsx(Er,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&i.jsx(lt,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),i.jsxs(pn,{value:"matches",className:"flex items-center gap-2",children:[i.jsx(Mc,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&i.jsx(lt,{className:"ml-1 bg-orange-500",children:o.newMatches})]})]}),i.jsx(gn,{value:"searches",className:"space-y-4",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Q2,{className:"w-5 h-5"}),"Recherches Sauvegardées"]}),i.jsx(kt,{children:"Gérez vos alertes et critères de recherche personnalisés"})]}),i.jsx(ge,{children:u.searches?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((T,O)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),i.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},O))}):n.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Er,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegardée"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Créez votre première alerte pour être notifié des nouvelles annonces"}),i.jsxs(te,{onClick:()=>m(!0),children:[i.jsx(ou,{className:"w-4 h-4 mr-2"}),"Créer ma première alerte"]})]}):i.jsx("div",{className:"space-y-4",children:n.map(T=>i.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h3",{className:"font-semibold",children:T.name}),T.alertsEnabled?i.jsxs(lt,{className:"bg-green-100 text-green-800",children:[i.jsx(Hi,{className:"w-3 h-3 mr-1"}),"Actif"]}):i.jsxs(lt,{variant:"secondary",children:[i.jsx(zR,{className:"w-3 h-3 mr-1"}),"Pausé"]})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:V(T.filters)}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(bi,{className:"w-3 h-3"}),"Créé ",I(T.createdAt)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Mc,{className:"w-3 h-3"}),T.matchCount," correspondance",T.matchCount!==1?"s":""]}),T.lastNotified&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Hi,{className:"w-3 h-3"}),"Dernière alerte ",I(T.lastNotified)]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>R(T.id,!T.alertsEnabled),title:T.alertsEnabled?"Désactiver les alertes":"Activer les alertes",children:T.alertsEnabled?i.jsx(zR,{className:"w-4 h-4"}):i.jsx(MX,{className:"w-4 h-4"})}),i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>{var O,$;y(T),_({name:T.name,query:T.filters.query||"",category:T.filters.category||"all",transactionType:T.filters.transactionType||"all",university:T.filters.university||"all",minPrice:((O=T.filters.minPrice)==null?void 0:O.toString())||"",maxPrice:(($=T.filters.maxPrice)==null?void 0:$.toString())||"",alertsEnabled:T.alertsEnabled,notificationFrequency:T.notificationFrequency,notificationMethods:T.notificationMethods}),m(!0)},title:"Modifier",children:i.jsx(FX,{className:"w-4 h-4"})}),i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>C(T.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:i.jsx(To,{className:"w-4 h-4"})})]})]}),T.alertsEnabled&&i.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Jn,{className:"w-3 h-3"}),i.jsxs("span",{children:["Fréquence: ",T.notificationFrequency==="instant"?"Instantané":T.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[T.notificationMethods.email&&i.jsx(Os,{className:"w-3 h-3 text-blue-600\\",title:"Email activé"}),T.notificationMethods.push&&i.jsx(Hi,{className:"w-3 h-3 text-green-600\\",title:"Push activé"}),T.notificationMethods.sms&&i.jsx(VR,{className:"w-3 h-3 text-purple-600\\",title:"SMS activé"})]})]})]},T.id))})})]})}),i.jsx(gn,{value:"matches",className:"space-y-4",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Mc,{className:"w-5 h-5"}),"Correspondances Trouvées"]}),i.jsx(kt,{children:"Les annonces qui correspondent à vos critères de recherche"})]}),i.jsx(ge,{children:u.matches?i.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((T,O)=>i.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},O))}):s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Mc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),i.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore à vos critères. Les nouvelles correspondances apparaîtront ici."})]}):i.jsx("div",{className:"space-y-4",children:s.map(T=>i.jsx("div",{className:`border rounded-lg p-4 transition-colors ${T.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[T.listingImage?i.jsx("img",{src:T.listingImage,alt:T.listingTitle,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:T.listingTitle}),i.jsxs("div",{className:"flex items-center gap-2",children:[!T.seen&&i.jsx(lt,{className:"bg-blue-500",children:"Nouveau"}),i.jsx("span",{className:"font-semibold text-primary",children:T.listingPrice===0?"Gratuit":`${T.listingPrice}€`})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Jn,{className:"w-3 h-3"}),"Trouvé ",I(T.matchedAt)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(te,{variant:"outline",size:"sm",onClick:()=>z(T.id),disabled:T.seen,children:T.seen?i.jsxs(i.Fragment,{children:[i.jsx(Ot,{className:"w-3 h-3 mr-1"}),"Vu"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ph,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),i.jsxs(te,{size:"sm",onClick:()=>window.open(`/listing/${T.listingId}`,"_blank"),children:[i.jsx(Cs,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},T.id))})})]})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx(Er,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour gérer vos alertes"}),i.jsx("p",{className:"text-muted-foreground",children:"Créez des alertes personnalisées pour être notifié des nouvelles annonces"})]})})})},py=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},wI=[{value:"all",label:"Toutes catégories",icon:En},{value:"electronics",label:"Électronique",icon:Uu},{value:"books",label:"Livres & Cours",icon:y3},{value:"furniture",label:"Mobilier",icon:Zx},{value:"clothing",label:"Vêtements",icon:Y2},{value:"services",label:"Services",icon:Ug},{value:"housing",label:"Logement",icon:Zx},{value:"jobs",label:"Jobs & Stages",icon:w3}],mfe=[{value:"all",label:"Tous types",icon:En},{value:"sale",label:"Vente",icon:Kx},{value:"donation",label:"Don",icon:Ch},{value:"exchange",label:"Échange",icon:$o},{value:"service",label:"Service",icon:Ug}],pfe=[{value:"recent",label:"Plus récents",icon:Jn},{value:"oldest",label:"Plus anciens",icon:bi},{value:"price-asc",label:"Prix croissant",icon:FR},{value:"price-desc",label:"Prix décroissant",icon:p3},{value:"title",label:"Titre A-Z",icon:FR},{value:"category",label:"Par catégorie",icon:Cp}],gfe=()=>{const{currentUser:t,userProfile:e}=jn(),[n,r]=w.useState([]),[s,a]=w.useState([]),[o,l]=w.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[u,d]=w.useState({favorites:!0,listings:!0,removing:!1}),[h,m]=w.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[p,y]=w.useState("recent"),[j,_]=w.useState("grid"),[N,b]=w.useState([]);w.useEffect(()=>{t&&x()},[t]),w.useEffect(()=>{n.length>0&&S()},[n]);const x=async()=>{if(t)try{d(ee=>({...ee,favorites:!0}));const M=Tn(Ht(We,"favorites"),lr("userId","==",t.uid),ji(100)),B=await Zn(M),J=[];B.forEach(ee=>{const K=ee.data();J.push({id:ee.id,...K,createdAt:py(K.createdAt),updatedAt:py(K.updatedAt)})}),J.sort((ee,K)=>K.createdAt.getTime()-ee.createdAt.getTime()),r(J),C(J)}catch(M){console.error("Erreur lors du chargement des favoris:",M),Ne.error("Erreur lors du chargement des favoris")}finally{d(M=>({...M,favorites:!1}))}},S=async()=>{try{d(ee=>({...ee,listings:!0}));const M=n.map(async ee=>{try{const K=await Zs(_t(We,"listings",ee.listingId));if(K.exists()){const D=K.data();return{id:K.id,...D,createdAt:py(D.createdAt),updatedAt:py(D.updatedAt)}}return null}catch(K){return console.error(`Erreur lors du chargement de l'annonce ${ee.listingId}:`,K),null}}),J=(await Promise.all(M)).filter(ee=>ee!==null);a(J)}catch(M){console.error("Erreur lors du chargement des annonces favorites:",M)}finally{d(M=>({...M,listings:!1}))}},C=M=>{const B={},J={};let ee=0,K=0;const D=new Date;D.setDate(D.getDate()-7);let G=0;M.forEach(q=>{B[q.listingCategory]=(B[q.listingCategory]||0)+1,J[q.listingTransactionType]=(J[q.listingTransactionType]||0)+1,q.listingPrice>0&&(ee+=q.listingPrice,K++),q.createdAt>=D&&G++}),l({totalFavorites:M.length,byCategory:B,byTransactionType:J,averagePrice:K>0?Math.round(ee/K):0,recentlyAdded:G,availableCount:M.length,soldCount:0})},R=async M=>{try{await Sh(_t(We,"favorites",M)),Ne.success("Favori supprimé"),x()}catch(B){console.error("Erreur lors de la suppression:",B),Ne.error("Erreur lors de la suppression")}},z=async()=>{if(N.length!==0&&window.confirm(`Supprimer ${N.length} favori(s) sélectionné(s) ?`)){d(M=>({...M,removing:!0}));try{const M=N.map(B=>Sh(_t(We,"favorites",B)));await Promise.all(M),Ne.success(`${N.length} favori(s) supprimé(s)`),b([]),x()}catch(M){console.error("Erreur lors de la suppression multiple:",M),Ne.error("Erreur lors de la suppression")}finally{d(M=>({...M,removing:!1}))}}},k=()=>{const M={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:n.length,favorites:n.map(K=>({title:K.listingTitle,price:K.listingPrice,category:K.listingCategory,transactionType:K.listingTransactionType,seller:K.sellerName,university:K.sellerUniversity,addedDate:K.createdAt.toISOString(),notes:K.notes||"",tags:K.tags}))},B=new Blob([JSON.stringify(M,null,2)],{type:"application/json"}),J=URL.createObjectURL(B),ee=document.createElement("a");ee.href=J,ee.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,ee.click(),URL.revokeObjectURL(J)},I=async()=>{const M=`🌟 Mes favoris StudyMarket :

📚 ${o.totalFavorites} annonces sauvegardées
💰 Prix moyen : ${o.averagePrice}€
🆕 ${o.recentlyAdded} ajoutées cette semaine

Découvrez la marketplace étudiante ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:M,url:window.location.origin})}catch{navigator.clipboard.writeText(M),Ne.success("Lien copié dans le presse-papiers")}else navigator.clipboard.writeText(M),Ne.success("Lien copié dans le presse-papiers")},V=()=>{let M=n;if(h.search){const B=h.search.toLowerCase();M=M.filter(J=>J.listingTitle.toLowerCase().includes(B)||J.sellerName.toLowerCase().includes(B)||J.tags.some(ee=>ee.toLowerCase().includes(B)))}if(h.category!=="all"&&(M=M.filter(B=>B.listingCategory===h.category)),h.transactionType!=="all"&&(M=M.filter(B=>B.listingTransactionType===h.transactionType)),h.priceRange!=="all")switch(h.priceRange){case"free":M=M.filter(B=>B.listingPrice===0);break;case"under-50":M=M.filter(B=>B.listingPrice>0&&B.listingPrice<50);break;case"50-200":M=M.filter(B=>B.listingPrice>=50&&B.listingPrice<=200);break;case"over-200":M=M.filter(B=>B.listingPrice>200);break}switch(p){case"recent":M.sort((B,J)=>J.createdAt.getTime()-B.createdAt.getTime());break;case"oldest":M.sort((B,J)=>B.createdAt.getTime()-J.createdAt.getTime());break;case"price-asc":M.sort((B,J)=>B.listingPrice-J.listingPrice);break;case"price-desc":M.sort((B,J)=>J.listingPrice-B.listingPrice);break;case"title":M.sort((B,J)=>B.listingTitle.localeCompare(J.listingTitle));break;case"category":M.sort((B,J)=>B.listingCategory.localeCompare(J.listingCategory));break}return M},T=M=>{try{return ff(M,{addSuffix:!0,locale:Xr})}catch{return"Date inconnue"}},O=(M,B)=>B==="donation"?"Gratuit":B==="exchange"?"Échange":M===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(M),$=V();return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Jr,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&i.jsx(lt,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardées"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(te,{variant:"outline",onClick:I,className:"flex items-center gap-2",children:[i.jsx(pw,{className:"w-4 h-4"}),"Partager"]}),i.jsxs(te,{variant:"outline",onClick:k,className:"flex items-center gap-2",children:[i.jsx(Ni,{className:"w-4 h-4"}),"Exporter"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),i.jsx(Jr,{className:"w-8 h-8 text-red-500"})]})})}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,"€"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),i.jsx(zg,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),i.jsx(sf,{className:"w-8 h-8 text-orange-600"})]})})}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Catégories"})]}),i.jsx(Cp,{className:"w-8 h-8 text-purple-600"})]})})})]}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ze,{placeholder:"Rechercher dans vos favoris...",value:h.search,onChange:M=>m(B=>({...B,search:M.target.value})),className:"pl-10"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(on,{value:p,onValueChange:y,children:[i.jsx(Jt,{className:"w-40",children:i.jsx(ln,{})}),i.jsx(Xt,{children:pfe.map(M=>i.jsx(Qe,{value:M.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(M.icon,{className:"w-4 h-4"}),M.label]})},M.value))})]}),i.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[i.jsx(te,{variant:j==="grid"?"default":"ghost",size:"icon",onClick:()=>_("grid"),className:"rounded-none",children:i.jsx(E3,{className:"w-4 h-4"})}),i.jsx(te,{variant:j==="list"?"default":"ghost",size:"icon",onClick:()=>_("list"),className:"rounded-none",children:i.jsx(T3,{className:"w-4 h-4"})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(on,{value:h.category,onValueChange:M=>m(B=>({...B,category:M})),children:[i.jsx(Jt,{children:i.jsx(ln,{placeholder:"Catégorie"})}),i.jsx(Xt,{children:wI.map(M=>i.jsx(Qe,{value:M.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(M.icon,{className:"w-4 h-4"}),M.label]})},M.value))})]}),i.jsxs(on,{value:h.transactionType,onValueChange:M=>m(B=>({...B,transactionType:M})),children:[i.jsx(Jt,{children:i.jsx(ln,{placeholder:"Type"})}),i.jsx(Xt,{children:mfe.map(M=>i.jsx(Qe,{value:M.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(M.icon,{className:"w-4 h-4"}),M.label]})},M.value))})]}),i.jsxs(on,{value:h.priceRange,onValueChange:M=>m(B=>({...B,priceRange:M})),children:[i.jsx(Jt,{children:i.jsx(ln,{placeholder:"Prix"})}),i.jsxs(Xt,{children:[i.jsx(Qe,{value:"all",children:"Tous les prix"}),i.jsx(Qe,{value:"free",children:"Gratuit"}),i.jsx(Qe,{value:"under-50",children:"Moins de 50€"}),i.jsx(Qe,{value:"50-200",children:"50€ - 200€"}),i.jsx(Qe,{value:"over-200",children:"Plus de 200€"})]})]}),i.jsxs(on,{value:h.availability,onValueChange:M=>m(B=>({...B,availability:M})),children:[i.jsx(Jt,{children:i.jsx(ln,{placeholder:"Disponibilité"})}),i.jsxs(Xt,{children:[i.jsx(Qe,{value:"all",children:"Toutes"}),i.jsx(Qe,{value:"available",children:"Disponibles"}),i.jsx(Qe,{value:"sold",children:"Vendues"}),i.jsx(Qe,{value:"reserved",children:"Réservées"})]})]})]}),N.length>0&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[N.length," favori(s) sélectionné(s)"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(te,{variant:"outline",size:"sm",onClick:()=>b([]),children:"Désélectionner"}),i.jsx(te,{variant:"destructive",size:"sm",onClick:z,disabled:u.removing,children:u.removing?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):i.jsxs(i.Fragment,{children:[i.jsx(To,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),i.jsx("div",{className:"space-y-4",children:u.favorites?i.jsx("div",{className:`grid gap-6 ${j==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((M,B)=>i.jsxs(pe,{className:"animate-pulse",children:[i.jsx("div",{className:"aspect-[4/3] bg-muted"}),i.jsxs(ge,{className:"p-4 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},B))}):$.length===0?i.jsx(pe,{children:i.jsx(ge,{className:"pt-12 pb-12 text-center",children:n.length===0?i.jsxs(i.Fragment,{children:[i.jsx(Jr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'annonces à vos favoris. Explorez les annonces et cliquez sur ❤️ pour les sauvegarder !"}),i.jsx(te,{asChild:!0,children:i.jsxs("a",{href:"/listings",children:[i.jsx(Er,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):i.jsxs(i.Fragment,{children:[i.jsx(mw,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond à vos critères de recherche. Essayez de modifier vos filtres."}),i.jsx(te,{variant:"outline",onClick:()=>m({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Réinitialiser les filtres"})]})})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("p",{className:"text-muted-foreground",children:[$.length," favori(s) trouvé(s)",$.length!==n.length&&` sur ${n.length}`]}),i.jsx(te,{variant:"outline",size:"sm",onClick:()=>{N.length===$.length?b([]):b($.map(M=>M.id))},children:N.length===$.length?"Désélectionner tout":"Sélectionner tout"})]}),j==="grid"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$.map(M=>{const B=s.find(J=>J.id===M.listingId);return i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute top-2 left-2 z-10",children:i.jsx("input",{type:"checkbox",checked:N.includes(M.id),onChange:J=>{J.target.checked?b(ee=>[...ee,M.id]):b(ee=>ee.filter(K=>K!==M.id))},className:"w-4 h-4 rounded border-border bg-background"})}),i.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(te,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>R(M.id),children:i.jsx(To,{className:"w-4 h-4"})})}),B?i.jsx(Op,{listing:B}):i.jsxs(pe,{children:[i.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Wm,{className:"w-8 h-8 mx-auto mb-2"}),i.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),i.jsxs(ge,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold mb-2",children:M.listingTitle}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:O(M.listingPrice,M.listingTransactionType)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajouté ",T(M.createdAt)]})]})]})]},M.id)})}):i.jsx("div",{className:"space-y-4",children:$.map(M=>{var J;const B=s.find(ee=>ee.id===M.listingId);return i.jsx(pe,{className:"hover:shadow-md transition-shadow",children:i.jsx(ge,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("input",{type:"checkbox",checked:N.includes(M.id),onChange:ee=>{ee.target.checked?b(K=>[...K,M.id]):b(K=>K.filter(D=>D!==M.id))},className:"w-4 h-4 rounded border-border"}),i.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:M.listingImage?i.jsx("img",{src:M.listingImage,alt:M.listingTitle,className:"w-full h-full object-cover rounded-lg"}):i.jsx(En,{className:"w-8 h-8 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold truncate",children:M.listingTitle}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("span",{className:"font-semibold text-primary",children:O(M.listingPrice,M.listingTransactionType)}),(B==null?void 0:B.status)&&i.jsx(lt,{variant:B.status==="active"?"default":"secondary",children:B.status==="active"?"Disponible":B.status==="sold"?"Vendu":"Réservé"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ts,{className:"w-3 h-3"}),M.sellerName]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Yr,{className:"w-3 h-3"}),M.sellerUniversity]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Cp,{className:"w-3 h-3"}),(J=wI.find(ee=>ee.value===M.listingCategory))==null?void 0:J.label]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajouté ",T(M.createdAt)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(te,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${M.listingId}`,"_blank"),children:[i.jsx(Cs,{className:"w-3 h-3 mr-1"}),"Voir"]}),i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>R(M.id),className:"text-destructive hover:text-destructive",children:i.jsx(To,{className:"w-3 h-3"})})]})]})]})]})})},M.id)})})]})})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx(Jr,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),i.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces préférées et retrouvez-les facilement"})]})})})},E_=({request:t,userRole:e,onStatusUpdate:n})=>{const{updatePaymentStatus:r,getPaymentInstructions:s}=zw(),a=j=>{switch(j){case"pending":return Jn;case"confirmed":return Ot;case"completed":return Ot;case"cancelled":return Eh;case"disputed":return Un;default:return Jn}},o=j=>{switch(j){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},l=j=>{switch(j){case"pending":return"En attente";case"confirmed":return"Confirmé";case"completed":return"Terminé";case"cancelled":return"Annulé";case"disputed":return"Litige";default:return j}},u=j=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[j]||j,d=(j,_)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:_||"EUR"}).format(j),h=(j,_)=>{navigator.clipboard.writeText(j),Ne.success(`${_} copié dans le presse-papiers`)},m=async j=>{try{await r(t.id,j),n==null||n(j)}catch(_){console.error("Erreur lors de la mise à jour du statut:",_)}},p=a(t.status),y=s(t.paymentMethod,t);return i.jsxs(pe,{className:"w-full",children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(Qn,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{children:[i.jsxs(nt,{className:"text-lg",children:["Paiement ",u(t.paymentMethod)]}),i.jsxs(kt,{children:[d(t.amount,t.currency)," • ",e==="buyer"?"Achat":"Vente"]})]})]}),i.jsxs(lt,{className:o(t.status),children:[i.jsx(p,{className:"w-3 h-3 mr-1"}),l(t.status)]})]})}),i.jsxs(ge,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Créé le :"}),i.jsx("p",{className:"font-medium",children:gr(t.createdAt,"PPP à HH:mm",{locale:Xr})})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Dernière mise à jour :"}),i.jsx("p",{className:"font-medium",children:gr(t.updatedAt,"PPP à HH:mm",{locale:Xr})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Détails de la rencontre"]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),i.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),i.jsx("p",{className:"font-medium",children:gr(t.meetingDateTime,"PPP à HH:mm",{locale:Xr})})]})]})]}),t.securityCode&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[i.jsx(qt,{className:"w-4 h-4"}),"Code de sécurité"]}),i.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[i.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>h(t.securityCode,"Code de sécurité"),children:i.jsx(N3,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&y.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:i.jsx("ul",{className:"space-y-1 text-sm",children:y.map((j,_)=>i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-blue-600 mt-0.5",children:"•"}),i.jsx("span",{children:j})]},_))})})]}),t.notes&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Notes"}),i.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),i.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsxs(te,{onClick:()=>m("confirmed"),className:"flex-1",children:[i.jsx(Ot,{className:"w-4 h-4 mr-2"}),"Accepter"]}),i.jsxs(te,{variant:"outline",onClick:()=>m("cancelled"),className:"flex-1",children:[i.jsx(Eh,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&i.jsxs(te,{onClick:()=>m("completed"),className:"flex-1",children:[i.jsx(Ot,{className:"w-4 h-4 mr-2"}),"Marquer comme payé"]}),e==="seller"&&t.status==="confirmed"&&i.jsxs(te,{onClick:()=>m("completed"),className:"flex-1",children:[i.jsx(Ot,{className:"w-4 h-4 mr-2"}),"Confirmer la réception"]}),(t.status==="pending"||t.status==="confirmed")&&i.jsxs(te,{variant:"outline",onClick:()=>m("disputed"),className:"text-orange-600 hover:text-orange-700",children:[i.jsx(Un,{className:"w-4 h-4 mr-2"}),"Signaler un problème"]})]}),t.status==="pending"&&e==="buyer"&&i.jsxs(Kt,{children:[i.jsx(Jn,{className:"h-4 w-4"}),i.jsx(Zt,{children:"Votre demande de paiement a été envoyée au vendeur. Vous recevrez une notification dès qu'il l'aura acceptée."})]}),t.status==="confirmed"&&e==="buyer"&&i.jsxs(Kt,{className:"border-green-200 bg-green-50",children:[i.jsx(Ot,{className:"h-4 w-4 text-green-600"}),i.jsx(Zt,{className:"text-green-800",children:"Le vendeur a accepté votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&i.jsxs(Kt,{className:"border-green-200 bg-green-50",children:[i.jsx(Ot,{className:"h-4 w-4 text-green-600"}),i.jsx(Zt,{className:"text-green-800",children:"Transaction terminée avec succès ! Merci d'avoir utilisé StudyMarket."})]}),t.status==="disputed"&&i.jsxs(Kt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(Un,{className:"h-4 w-4 text-orange-600"}),i.jsx(Zt,{className:"text-orange-800",children:"Un litige a été signalé. Notre équipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},vfe=()=>{const{currentUser:t,userProfile:e}=jn(),{paymentRequests:n,loading:r,fetchUserPaymentRequests:s,initializePaymentMethods:a}=zw(),[o,l]=w.useState(""),[u,d]=w.useState("all"),[h,m]=w.useState("all"),[p,y]=w.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});w.useEffect(()=>{a()},[a]),w.useEffect(()=>{t&&s(t.uid)},[t,s]),w.useEffect(()=>{j()},[n]);const j=()=>{const C={},R={};let z=0;n.forEach(k=>{C[k.paymentMethod]=(C[k.paymentMethod]||0)+1,R[k.status]=(R[k.status]||0)+1,z+=k.amount}),y({totalRequests:n.length,pendingRequests:R.pending||0,completedRequests:R.completed||0,totalAmount:z,averageAmount:n.length>0?z/n.length:0,byMethod:C,byStatus:R})},_=()=>n.filter(C=>{const R=!o||C.listingId.toLowerCase().includes(o.toLowerCase())||C.id.toLowerCase().includes(o.toLowerCase()),z=u==="all"||C.status===u,k=h==="all"||C.paymentMethod===h;return R&&z&&k}),N=()=>_().filter(C=>C.buyerId===(t==null?void 0:t.uid)),b=()=>_().filter(C=>C.sellerId===(t==null?void 0:t.uid)),x=C=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(C),S=()=>{const C={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:p,payments:n.map(I=>({id:I.id,amount:I.amount,currency:I.currency,method:I.paymentMethod,status:I.status,role:I.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:I.createdAt.toISOString(),updatedAt:I.updatedAt.toISOString()}))},R=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),z=URL.createObjectURL(R),k=document.createElement("a");k.href=z,k.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,k.click(),URL.revokeObjectURL(z)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(WX,{className:"w-8 h-8 text-primary"}),"Mes Paiements",p.totalRequests>0&&i.jsx(lt,{variant:"secondary\\",className:"ml-1",children:p.totalRequests})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos demandes de paiement et suivez vos transactions"})]}),i.jsxs(te,{variant:"outline",onClick:S,className:"flex items-center gap-2",children:[i.jsx(Ni,{className:"w-4 h-4"}),"Exporter"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.totalRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),i.jsx(Qn,{className:"w-8 h-8 text-blue-600"})]})})}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.pendingRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),i.jsx(Jn,{className:"w-8 h-8 text-orange-600"})]})})}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:p.completedRequests}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Terminées"})]}),i.jsx(Ot,{className:"w-8 h-8 text-green-600"})]})})}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:x(p.totalAmount)}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),i.jsx(zg,{className:"w-8 h-8 text-purple-600"})]})})})]}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ze,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:C=>l(C.target.value),className:"pl-10"})]}),i.jsxs(on,{value:u,onValueChange:d,children:[i.jsx(Jt,{className:"w-40",children:i.jsx(ln,{placeholder:"Statut"})}),i.jsxs(Xt,{children:[i.jsx(Qe,{value:"all",children:"Tous les statuts"}),i.jsx(Qe,{value:"pending",children:"En attente"}),i.jsx(Qe,{value:"confirmed",children:"Confirmé"}),i.jsx(Qe,{value:"completed",children:"Terminé"}),i.jsx(Qe,{value:"cancelled",children:"Annulé"}),i.jsx(Qe,{value:"disputed",children:"Litige"})]})]}),i.jsxs(on,{value:h,onValueChange:m,children:[i.jsx(Jt,{className:"w-40",children:i.jsx(ln,{placeholder:"Méthode"})}),i.jsxs(Xt,{children:[i.jsx(Qe,{value:"all",children:"Toutes les méthodes"}),i.jsx(Qe,{value:"cash",children:"Espèces"}),i.jsx(Qe,{value:"transfer",children:"Virement"}),i.jsx(Qe,{value:"paypal",children:"PayPal"}),i.jsx(Qe,{value:"lydia",children:"Lydia"})]})]})]})})}),i.jsxs(Gu,{defaultValue:"all",className:"space-y-4",children:[i.jsxs(jc,{className:"grid w-full grid-cols-3",children:[i.jsxs(pn,{value:"all",className:"flex items-center gap-2",children:[i.jsx(Qn,{className:"w-4 h-4"}),"Toutes",p.totalRequests>0&&i.jsx(lt,{variant:"secondary\\",className:"ml-1",children:p.totalRequests})]}),i.jsxs(pn,{value:"purchases",className:"flex items-center gap-2",children:[i.jsx(n_,{className:"w-4 h-4"}),"Mes achats",N().length>0&&i.jsx(lt,{variant:"secondary\\",className:"ml-1",children:N().length})]}),i.jsxs(pn,{value:"sales",className:"flex items-center gap-2",children:[i.jsx(t_,{className:"w-4 h-4"}),"Mes ventes",b().length>0&&i.jsx(lt,{variant:"secondary\\",className:"ml-1",children:b().length})]})]}),i.jsx(gn,{value:"all",className:"space-y-4",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(j3,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),i.jsx(kt,{children:"Historique complet de vos transactions"})]}),i.jsx(ge,{children:r?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((C,R)=>i.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),i.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},R))}):_().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Qn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),i.jsx("p",{className:"text-muted-foreground",children:n.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond à vos critères de recherche."})]}):i.jsx("div",{className:"space-y-4",children:_().map(C=>i.jsx(E_,{request:C,userRole:C.buyerId===t.uid?"buyer":"seller"},C.id))})})]})}),i.jsx(gn,{value:"purchases",className:"space-y-4",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(n_,{className:"w-5 h-5"}),"Mes Achats"]}),i.jsx(kt,{children:"Demandes de paiement que vous avez initiées"})]}),i.jsx(ge,{children:N().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(n_,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),i.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initié de demandes de paiement pour vos achats."})]}):i.jsx("div",{className:"space-y-4",children:N().map(C=>i.jsx(E_,{request:C,userRole:"buyer"},C.id))})})]})}),i.jsx(gn,{value:"sales",className:"space-y-4",children:i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(t_,{className:"w-5 h-5"}),"Mes Ventes"]}),i.jsx(kt,{children:"Demandes de paiement reçues pour vos annonces"})]}),i.jsx(ge,{children:b().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(t_,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),i.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reçu de demandes de paiement pour vos annonces."})]}):i.jsx("div",{className:"space-y-4",children:b().map(C=>i.jsx(E_,{request:C,userRole:"seller"},C.id))})})]})})]}),i.jsxs(Kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(qt,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Zt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message privé. Utilisez uniquement les canaux sécurisés de StudyMarket pour vos transactions."]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx(Qn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),i.jsx("p",{className:"text-muted-foreground",children:"Gérez vos demandes de paiement et suivez vos transactions"})]})})})};var Kw="Collapsible",[yfe,Q8]=$r(Kw),[xfe,XE]=yfe(Kw),Y8=w.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:a,onOpenChange:o,...l}=t,[u,d]=Xs({prop:r,defaultProp:s??!1,onChange:o,caller:Kw});return i.jsx(xfe,{scope:n,disabled:a,contentId:Qs(),open:u,onOpenToggle:w.useCallback(()=>d(h=>!h),[d]),children:i.jsx(Ye.div,{"data-state":tP(u),"data-disabled":a?"":void 0,...l,ref:e})})});Y8.displayName=Kw;var J8="CollapsibleTrigger",X8=w.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=XE(J8,n);return i.jsx(Ye.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":tP(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:Ve(t.onClick,s.onOpenToggle)})});X8.displayName=J8;var eP="CollapsibleContent",e9=w.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=XE(eP,t.__scopeCollapsible);return i.jsx(Vr,{present:n||s.open,children:({present:a})=>i.jsx(wfe,{...r,ref:e,present:a})})});e9.displayName=eP;var wfe=w.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...a}=t,o=XE(eP,n),[l,u]=w.useState(r),d=w.useRef(null),h=pt(e,d),m=w.useRef(0),p=m.current,y=w.useRef(0),j=y.current,_=o.open||l,N=w.useRef(_),b=w.useRef(void 0);return w.useEffect(()=>{const x=requestAnimationFrame(()=>N.current=!1);return()=>cancelAnimationFrame(x)},[]),er(()=>{const x=d.current;if(x){b.current=b.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const S=x.getBoundingClientRect();m.current=S.height,y.current=S.width,N.current||(x.style.transitionDuration=b.current.transitionDuration,x.style.animationName=b.current.animationName),u(r)}},[o.open,r]),i.jsx(Ye.div,{"data-state":tP(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!_,...a,ref:h,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":j?`${j}px`:void 0,...t.style},children:_&&s})});function tP(t){return t?"open":"closed"}var bfe=Y8,_fe=X8,jfe=e9,da="Accordion",Nfe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[nP,Sfe,Efe]=Bg(da),[Zw,uje]=$r(da,[Efe,Q8]),rP=Q8(),t9=oe.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,a=r;return i.jsx(nP.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?i.jsx(Rfe,{...a,ref:e}):i.jsx(Tfe,{...s,ref:e})})});t9.displayName=da;var[n9,Pfe]=Zw(da),[r9,Cfe]=Zw(da,{collapsible:!1}),Tfe=oe.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:a=!1,...o}=t,[l,u]=Xs({prop:n,defaultProp:r??"",onChange:s,caller:da});return i.jsx(n9,{scope:t.__scopeAccordion,value:oe.useMemo(()=>l?[l]:[],[l]),onItemOpen:u,onItemClose:oe.useCallback(()=>a&&u(""),[a,u]),children:i.jsx(r9,{scope:t.__scopeAccordion,collapsible:a,children:i.jsx(s9,{...o,ref:e})})})}),Rfe=oe.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=t,[o,l]=Xs({prop:n,defaultProp:r??[],onChange:s,caller:da}),u=oe.useCallback(h=>l((m=[])=>[...m,h]),[l]),d=oe.useCallback(h=>l((m=[])=>m.filter(p=>p!==h)),[l]);return i.jsx(n9,{scope:t.__scopeAccordion,value:o,onItemOpen:u,onItemClose:d,children:i.jsx(r9,{scope:t.__scopeAccordion,collapsible:!0,children:i.jsx(s9,{...a,ref:e})})})}),[kfe,Qw]=Zw(da),s9=oe.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:a="vertical",...o}=t,l=oe.useRef(null),u=pt(l,e),d=Sfe(n),m=Bu(s)==="ltr",p=Ve(t.onKeyDown,y=>{var I;if(!Nfe.includes(y.key))return;const j=y.target,_=d().filter(V=>{var T;return!((T=V.ref.current)!=null&&T.disabled)}),N=_.findIndex(V=>V.ref.current===j),b=_.length;if(N===-1)return;y.preventDefault();let x=N;const S=0,C=b-1,R=()=>{x=N+1,x>C&&(x=S)},z=()=>{x=N-1,x<S&&(x=C)};switch(y.key){case"Home":x=S;break;case"End":x=C;break;case"ArrowRight":a==="horizontal"&&(m?R():z());break;case"ArrowDown":a==="vertical"&&R();break;case"ArrowLeft":a==="horizontal"&&(m?z():R());break;case"ArrowUp":a==="vertical"&&z();break}const k=x%b;(I=_[k].ref.current)==null||I.focus()});return i.jsx(kfe,{scope:n,disabled:r,direction:s,orientation:a,children:i.jsx(nP.Slot,{scope:n,children:i.jsx(Ye.div,{...o,"data-orientation":a,ref:u,onKeyDown:r?void 0:p})})})}),x0="AccordionItem",[Ife,sP]=Zw(x0),i9=oe.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,a=Qw(x0,n),o=Pfe(x0,n),l=rP(n),u=Qs(),d=r&&o.value.includes(r)||!1,h=a.disabled||t.disabled;return i.jsx(Ife,{scope:n,open:d,disabled:h,triggerId:u,children:i.jsx(bfe,{"data-orientation":a.orientation,"data-state":d9(d),...l,...s,ref:e,disabled:h,open:d,onOpenChange:m=>{m?o.onItemOpen(r):o.onItemClose(r)}})})});i9.displayName=x0;var a9="AccordionHeader",o9=oe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Qw(da,n),a=sP(a9,n);return i.jsx(Ye.h3,{"data-orientation":s.orientation,"data-state":d9(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:e})});o9.displayName=a9;var Hj="AccordionTrigger",l9=oe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Qw(da,n),a=sP(Hj,n),o=Cfe(Hj,n),l=rP(n);return i.jsx(nP.ItemSlot,{scope:n,children:i.jsx(_fe,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:a.triggerId,...l,...r,ref:e})})});l9.displayName=Hj;var c9="AccordionContent",u9=oe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Qw(da,n),a=sP(c9,n),o=rP(n);return i.jsx(jfe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":s.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});u9.displayName=c9;function d9(t){return t?"open":"closed"}var Afe=t9,Ofe=i9,Mfe=o9,h9=l9,f9=u9;const Dfe=Afe,m9=w.forwardRef(({className:t,...e},n)=>i.jsx(Ofe,{ref:n,className:at("border-b",t),...e}));m9.displayName="AccordionItem";const p9=w.forwardRef(({className:t,children:e,...n},r)=>i.jsx(Mfe,{className:"flex",children:i.jsxs(h9,{ref:r,className:at("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,i.jsx(yF,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));p9.displayName=h9.displayName;const g9=w.forwardRef(({className:t,children:e,...n},r)=>i.jsx(f9,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:at("pb-4 pt-0",t),children:e})}));g9.displayName=f9.displayName;const bI=[{category:"Compte et Inscription",icon:Ug,questions:[{question:"Comment créer un compte étudiant vérifié ?",answer:'Pour créer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre système vérifie automatiquement votre statut étudiant. Vous recevrez un badge "Étudiant certifié" une fois la vérification terminée.'},{question:"Pourquoi mon université n'est pas reconnue ?",answer:"Nous ajoutons régulièrement de nouvelles universités. Si la vôtre n'apparaît pas, contactez-nous avec votre carte étudiante et nous l'ajouterons rapidement à notre base de données."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, université, et préférences de notification. Certaines informations nécessitent une re-vérification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autorisé. Cela garantit la confiance et la sécurité de notre communauté étudiante."}]},{category:"Achats et Ventes",icon:Qn,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description détaillée, prix et lieu de rencontre. Votre annonce sera visible immédiatement après publication.'},{question:"Quels modes de paiement sont acceptés ?",answer:"Nous recommandons les paiements sécurisés : espèces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. Évitez les paiements à distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggère une fourchette de prix basée sur l'état et la catégorie. Consultez les annonces similaires et considérez l'état réel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se présente pas ?",answer:"Contactez-le via notre messagerie. Si pas de réponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au sérieux."}]},{category:"Sécurité et Confiance",icon:qt,questions:[{question:"Comment éviter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothèque). Vérifiez l'identité avec la carte étudiante. Ne payez jamais à l'avance sans avoir vu l'objet. Utilisez notre système de signalement en cas de doute."},{question:"Où se rencontrer en sécurité ?",answer:`Privilégiez les lieux publics de votre campus : bibliothèques, halls d'entrée, cafétérias. Évitez les parkings isolés ou les domiciles privés. Certaines universités ont des "zones d'échange sécurisées".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Décrivez précisément le problème. Notre équipe examine tous les signalements sous 24h et prend les mesures appropriées.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de résolution, utilisez notre service de médiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:Rn,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rédigez un message poli et précis. Le vendeur recevra une notification email et pourra vous répondre via notre messagerie sécurisée.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reçoivent des notifications email mais peuvent avoir des délais de réponse. Soyez patient (24-48h). Si pas de réponse, l'annonce est peut-être déjà vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnées ?",answer:"Oui, mais seulement après les premiers échanges via notre messagerie. Cela nous permet de garder une trace en cas de problème et de vous protéger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez débloquer depuis vos paramètres si nécessaire.`}]},{category:"Impact Écologique",icon:Jr,questions:[{question:"Comment est calculé mon impact CO₂ ?",answer:"Chaque objet acheté d'occasion évite la production d'un neuf. Nous calculons le CO₂ économisé selon des données ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges écologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1ère transaction), "Éco-Warrior" (10kg CO₂), "Héros Climatique" (100kg CO₂). Ils apparaissent sur votre profil et motivent la communauté.'},{question:"Comment améliorer mon rang écologique ?",answer:"Multipliez les transactions d'occasion, privilégiez les dons (bonus +20%), participez aux échanges. Plus vous économisez de CO₂, plus votre rang augmente : Débutant → Éco-Warrior → Maître Environnemental → Légende Écologique."}]},{category:"Technique et Bugs",icon:Pp,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vérifiez votre connexion internet. Si le problème persiste, contactez-nous avec votre navigateur et système d'exploitation."},{question:"Je ne reçois pas les notifications email",answer:'Vérifiez vos spams/courriers indésirables. Ajoutez notifications@studymarket.fr à vos contacts. Vérifiez vos préférences de notification dans "Paramètres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vérifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous êtes sur mobile, autorisez l'accès à la galerie dans les paramètres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramètres" > "Compte" > "Supprimer mon compte". Cette action est irréversible et supprime toutes vos données. Vos annonces actives seront automatiquement retirées.'}]}],Lfe=[{title:"Chat en direct",description:"Réponse immédiate pendant les heures ouvrables",icon:Rn,action:"Démarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Réponse sous 24h maximum",icon:Os,action:"support@studymarket.fr",available:!0,hours:"24h/7j"},{title:"Téléphone",description:"Pour les urgences uniquement",icon:rf,action:"01 23 45 67 89",available:!1,hours:"Bientôt disponible"},{title:"Centre de ressources",description:"Guides détaillés et tutoriels",icon:x3,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],Ffe=[{title:"Guide du vendeur débutant",description:"Tout savoir pour vendre efficacement",icon:Ml,duration:"5 min",type:"Article"},{title:"Sécurité : éviter les arnaques",description:"Reconnaître et éviter les situations dangereuses",icon:qt,duration:"3 min",type:"Vidéo"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:sf,duration:"7 min",type:"Article"},{title:"Impact écologique expliqué",description:"Comment nous calculons votre empreinte carbone",icon:Jr,duration:"4 min",type:"Infographie"}],$fe=()=>{const{currentUser:t,userProfile:e}=jn(),[n,r]=w.useState(""),[s,a]=w.useState("all"),[o,l]=w.useState({subject:"",category:"",message:"",priority:"normal"}),[u,d]=w.useState(!1),h=bI.filter(p=>{if(s!=="all"&&p.category!==s)return!1;if(n){const y=n.toLowerCase();return p.questions.some(j=>j.question.toLowerCase().includes(y)||j.answer.toLowerCase().includes(y))}return!0}),m=async p=>{if(p.preventDefault(),!o.subject||!o.message){Ne.error("Veuillez remplir tous les champs obligatoires");return}d(!0);try{await new Promise(y=>setTimeout(y,1e3)),Ne.success("Votre message a été envoyé ! Nous vous répondrons sous 24h."),l({subject:"",category:"",message:"",priority:"normal"})}catch{Ne.error("Erreur lors de l'envoi. Veuillez réessayer.")}finally{d(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto px-1 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:i.jsx(Gx,{className:"w-6 h-6 text-white"})})}),i.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide StudyMarket"}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les réponses à vos questions ou contactez notre équipe support"})]}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[i.jsx(Er,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),i.jsx(Ze,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, sécurité, notifications)",value:n,onChange:p=>r(p.target.value),className:"pl-12 h-14 text-lg"})]})})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Lfe.map((p,y)=>i.jsx(pe,{className:`transition-all hover:shadow-lg ${p.available?"hover:-translate-y-1":"opacity-60"}`,children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${p.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:i.jsx(p.icon,{className:"w-6 h-6"})}),i.jsx("h3",{className:"font-semibold mb-2",children:p.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:p.description}),i.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:p.hours}),i.jsx(te,{variant:p.available?"default":"secondary",size:"sm",disabled:!p.available,className:"w-full",children:p.action})]})},y))}),i.jsxs(Gu,{defaultValue:"faq",className:"space-y-6",children:[i.jsxs(jc,{className:"grid w-full grid-cols-3",children:[i.jsxs(pn,{value:"faq",className:"flex items-center gap-2",children:[i.jsx(Gx,{className:"w-4 h-4"}),"FAQ"]}),i.jsxs(pn,{value:"guides",className:"flex items-center gap-2",children:[i.jsx(x3,{className:"w-4 h-4"}),"Guides"]}),i.jsxs(pn,{value:"contact",className:"flex items-center gap-2",children:[i.jsx(Rn,{className:"w-4 h-4"}),"Contact"]})]}),i.jsxs(gn,{value:"faq",className:"space-y-6",children:[i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(te,{variant:s==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catégories"}),bI.map(p=>i.jsxs(te,{variant:s===p.category?"default":"outline",size:"sm",onClick:()=>a(p.category),className:"flex items-center gap-2",children:[i.jsx(p.icon,{className:"w-4 h-4"}),p.category]},p.category))]})})}),h.length===0?i.jsx(pe,{children:i.jsxs(ge,{className:"pt-12 pb-12 text-center",children:[i.jsx(Er,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat trouvé"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-clés ou contactez notre support"}),i.jsx(te,{variant:"outline",onClick:()=>r(""),children:"Effacer la recherche"})]})}):i.jsx("div",{className:"space-y-6",children:h.map((p,y)=>i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(p.icon,{className:"w-5 h-5"}),p.category]})}),i.jsx(ge,{children:i.jsx(Dfe,{type:"single",collapsible:!0,className:"w-full",children:p.questions.map((j,_)=>i.jsxs(m9,{value:`${y}-${_}`,children:[i.jsx(p9,{className:"text-left",children:j.question}),i.jsx(g9,{className:"text-muted-foreground leading-relaxed",children:j.answer})]},_))})})]},y))})]}),i.jsxs(gn,{value:"guides",className:"space-y-6",children:[i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(C3,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),i.jsx(kt,{children:"Apprenez à utiliser StudyMarket comme un pro avec nos guides détaillés"})]}),i.jsx(ge,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Ffe.map((p,y)=>i.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:i.jsx(p.icon,{className:"w-6 h-6 text-primary"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h3",{className:"font-semibold",children:p.title}),i.jsx(lt,{variant:"outline",className:"text-xs",children:p.type})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:p.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(Jn,{className:"w-3 h-3"}),p.duration]}),i.jsxs(te,{size:"sm",variant:"outline",children:[i.jsx(Cs,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},y))})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx(A3,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vidéo"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidéos courtes"}),i.jsxs(te,{variant:"outline",size:"sm",children:[i.jsx(Cs,{className:"w-3 h-3 mr-1"}),"Voir les vidéos"]})]})}),i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx(Ni,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez nos guides au format PDF"}),i.jsxs(te,{variant:"outline",size:"sm",children:[i.jsx(Ni,{className:"w-3 h-3 mr-1"}),"Télécharger"]})]})}),i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx(Ug,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Communauté"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Échangez avec d'autres étudiants"}),i.jsxs(te,{variant:"outline",size:"sm",children:[i.jsx(Cs,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),i.jsx(gn,{value:"contact",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Th,{className:"w-5 h-5"}),"Contactez notre équipe"]}),i.jsx(kt,{children:"Décrivez votre problème en détail pour une réponse rapide et précise"})]}),i.jsx(ge,{children:i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"subject",children:"Sujet *"}),i.jsx(Ze,{id:"subject",value:o.subject,onChange:p=>l(y=>({...y,subject:p.target.value})),placeholder:"Résumez votre problème en quelques mots",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"category",children:"Catégorie"}),i.jsxs(on,{value:o.category,onValueChange:p=>l(y=>({...y,category:p})),children:[i.jsx(Jt,{className:"mt-1",children:i.jsx(ln,{placeholder:"Sélectionnez une catégorie"})}),i.jsxs(Xt,{children:[i.jsx(Qe,{value:"account",children:"Compte et profil"}),i.jsx(Qe,{value:"listing",children:"Annonces"}),i.jsx(Qe,{value:"payment",children:"Paiements"}),i.jsx(Qe,{value:"security",children:"Sécurité"}),i.jsx(Qe,{value:"technical",children:"Problème technique"}),i.jsx(Qe,{value:"other",children:"Autre"})]})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"priority",children:"Priorité"}),i.jsxs(on,{value:o.priority,onValueChange:p=>l(y=>({...y,priority:p})),children:[i.jsx(Jt,{className:"mt-1",children:i.jsx(ln,{})}),i.jsxs(Xt,{children:[i.jsx(Qe,{value:"low",children:"Basse - Question générale"}),i.jsx(Qe,{value:"normal",children:"Normale - Besoin d'aide"}),i.jsx(Qe,{value:"high",children:"Haute - Problème bloquant"}),i.jsx(Qe,{value:"urgent",children:"Urgente - Sécurité/Arnaque"})]})]})]}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"message",children:"Message *"}),i.jsx(Ei,{id:"message",value:o.message,onChange:p=>l(y=>({...y,message:p.target.value})),placeholder:"Décrivez votre problème en détail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&i.jsxs(Kt,{children:[i.jsx(Ot,{className:"h-4 w-4"}),i.jsxs(Zt,{children:["Nous vous répondrons à l'adresse ",i.jsx("strong",{children:t.email})]})]}),i.jsx(te,{type:"submit",className:"w-full",disabled:u||!o.subject||!o.message,children:u?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Th,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Jn,{className:"w-5 h-5"}),"Temps de réponse"]})}),i.jsxs(ge,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Questions générales"}),i.jsx(lt,{variant:"secondary",children:"24h"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Problèmes techniques"}),i.jsx(lt,{variant:"secondary",children:"12h"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Urgences sécurité"}),i.jsx(lt,{className:"bg-red-500",children:"2h"})]})]})]}),i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(S3,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),i.jsxs(ge,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Os,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Email direct"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"support@studymarket.fr"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Rn,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Chat en direct"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Uu,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Application mobile"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientôt disponible"})]})]})]})]}),i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(sf,{className:"w-5 h-5"}),"État du système"]})}),i.jsxs(ge,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Plateforme web"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Messagerie"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Notifications email"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),i.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),i.jsxs(te,{variant:"outline",size:"sm",className:"w-full mt-3",children:[i.jsx(Cs,{className:"w-3 h-3 mr-1"}),"Page de statut complète"]})]})]})]})]})})]})]})},Vfe=[{category:"Rencontres et Échanges",icon:Yr,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits fréquentés : bibliothèques universitaires, halls d'entrée, cafétérias du campus.",type:"do",icon:Ot},{title:"Évitez les lieux isolés",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privés ou endroits déserts.",type:"dont",icon:Eh},{title:"Prévenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontrée.",type:"do",icon:Ot},{title:"Rencontrez en journée",description:"Privilégiez les rendez-vous en journée, évitez les rencontres tardives ou nocturnes.",type:"do",icon:Ot}]},{category:"Vérification d'Identité",icon:I3,color:"text-green-600",tips:[{title:"Demandez la carte étudiante",description:"Vérifiez toujours l'identité avec la carte étudiante. C'est votre garantie de sécurité.",type:"do",icon:Ot},{title:"Vérifiez le profil StudyMarket",description:"Consultez le profil : badge vérifié, avis, nombre de transactions, ancienneté du compte.",type:"do",icon:Ot},{title:"Méfiez-vous des profils récents",description:"Soyez prudent avec les comptes créés récemment sans historique de transactions.",type:"dont",icon:Un},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos échanges via notre messagerie sécurisée.",type:"do",icon:Ot}]},{category:"Paiements Sécurisés",icon:Qn,color:"text-purple-600",tips:[{title:"Payez à la remise",description:"Ne payez qu'après avoir inspecté l'objet et lors de la remise en main propre.",type:"do",icon:Ot},{title:"Évitez les paiements à l'avance",description:"Ne versez jamais d'acompte ou de paiement intégral avant d'avoir vu l'objet.",type:"dont",icon:Eh},{title:"Utilisez des moyens traçables",description:"Privilégiez Lydia, PayPal, virements ou espèces. Évitez les cryptomonnaies.",type:"do",icon:Ot},{title:"Méfiez-vous des prix trop bas",description:"Un iPhone à 50€ ou un MacBook à 200€ sont probablement des arnaques.",type:"dont",icon:Un}]},{category:"Communication",icon:Rn,color:"text-orange-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos échanges, même en cas de désaccord.",type:"do",icon:Ot},{title:"Posez des questions précises",description:"Demandez des détails sur l'état, l'âge, la raison de la vente, les défauts éventuels.",type:"do",icon:Ot},{title:"Méfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernière chance") sont suspects.',type:"dont",icon:Un},{title:"Gardez les preuves",description:"Conservez les captures d'écran des conversations en cas de litige.",type:"do",icon:Ot}]}],zfe=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:Un},{title:"Paiement demandé à l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:Qn},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:Yr},{title:"Photos de mauvaise qualité",description:"Images floues, prises sur internet ou très peu nombreuses",severity:"medium",icon:au},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte récent",severity:"medium",icon:Ug},{title:"Communication étrange",description:"Français approximatif, réponses évasives, pression temporelle",severity:"medium",icon:Rn},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:Jn},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres données sensibles",severity:"high",icon:Su}],Ufe=[{title:"Urgence immédiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:rf,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des règles",contact:`Bouton "Signaler" dans l'app`,icon:Jc,color:"text-orange-600"},{title:"Support StudyMarket",description:"Questions, aide, médiation de conflit",contact:"support@studymarket.fr",icon:Rn,color:"text-blue-600"},{title:"Sécurité Campus",description:"Incidents sur le campus universitaire",contact:"Service sécurité de votre université",icon:qt,color:"text-green-600"}],Bfe=()=>i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:i.jsx(qt,{className:"w-6 h-6 text-white"})})}),i.jsx("h1",{className:"text-4xl font-bold",children:"Sécurité & Conseils"}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre sécurité est notre priorité. Suivez ces conseils pour des échanges sereins et sécurisés entre étudiants."})]}),i.jsxs(Kt,{className:"border-green-200 bg-green-50",children:[i.jsx(qt,{className:"h-4 w-4 text-green-600"}),i.jsx(Zt,{className:"text-green-800",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vérifiez l'identité avec la carte étudiante."]}),i.jsxs(te,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[i.jsx(Ni,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(qt,{className:"w-6 h-6 text-green-600"})}),i.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions sécurisées"})]})}),i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(I3,{className:"w-6 h-6 text-blue-600"})}),i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants vérifiés"})]})}),i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Jn,{className:"w-6 h-6 text-purple-600"})}),i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Réponse aux signalements"})]})}),i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Ml,{className:"w-6 h-6 text-orange-600"})}),i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"4.9/5"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction sécurité"})]})})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Sécurité Complet"}),i.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des échanges en toute sécurité"})]}),Vfe.map((t,e)=>i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),i.jsx(ge,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((n,r)=>i.jsx("div",{className:`p-4 rounded-lg border-2 ${n.type==="do"?"border-green-200 bg-green-50":n.type==="dont"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(n.icon,{className:`w-5 h-5 mt-0.5 ${n.type==="do"?"text-green-600":n.type==="dont"?"text-red-600":"text-orange-600"}`}),i.jsxs("div",{children:[i.jsx("h4",{className:`font-semibold mb-2 ${n.type==="do"?"text-green-800":n.type==="dont"?"text-red-800":"text-orange-800"}`,children:n.title}),i.jsx("p",{className:`text-sm ${n.type==="do"?"text-green-700":n.type==="dont"?"text-red-700":"text-orange-700"}`,children:n.description})]})]})},r))})})]},e))]}),i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme à Reconnaître"]}),i.jsx(kt,{children:"Ces comportements doivent vous alerter et vous inciter à la prudence"})]}),i.jsx(ge,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:zfe.map((t,e)=>i.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-orange-600"}`}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-orange-800"}`,children:t.title}),i.jsx(lt,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),i.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-orange-700"}`,children:t.description})]})]})},e))})})]}),i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(rf,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),i.jsx(kt,{children:"En cas de problème, voici qui contacter selon la situation"})]}),i.jsx(ge,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Ufe.map((t,e)=>i.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-orange-600"?"bg-orange-100":t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:i.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold mb-1",children:t.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),i.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx(SX,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez notre guide de sécurité complet"}),i.jsxs(te,{variant:"outline",className:"w-full",children:[i.jsx(Ni,{className:"w-4 h-4 mr-2"}),"Télécharger"]})]})}),i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx(Gx,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions fréquentes sur la sécurité"}),i.jsx(te,{variant:"outline",className:"w-full",asChild:!0,children:i.jsxs(Ue,{to:"/help",children:[i.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6 text-center",children:[i.jsx(Rn,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problème"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre équipe de sécurité"}),i.jsxs(te,{variant:"outline",className:"w-full",children:[i.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),i.jsxs(Kt,{className:"border-blue-200 bg-blue-50",children:[i.jsx(C3,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Zt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hésitez pas à annuler la transaction. Votre sécurité vaut plus que n'importe quel objet. L'équipe StudyMarket est là pour vous aider 24h/7j."]})]})]});function Wfe(t,e){return w.useReducer((n,r)=>e[n][r]??n,t)}var iP="ScrollArea",[v9,dje]=$r(iP),[Hfe,ki]=v9(iP),y9=w.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=t,[l,u]=w.useState(null),[d,h]=w.useState(null),[m,p]=w.useState(null),[y,j]=w.useState(null),[_,N]=w.useState(null),[b,x]=w.useState(0),[S,C]=w.useState(0),[R,z]=w.useState(!1),[k,I]=w.useState(!1),V=pt(e,O=>u(O)),T=Bu(s);return i.jsx(Hfe,{scope:n,type:r,dir:T,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:h,content:m,onContentChange:p,scrollbarX:y,onScrollbarXChange:j,scrollbarXEnabled:R,onScrollbarXEnabledChange:z,scrollbarY:_,onScrollbarYChange:N,scrollbarYEnabled:k,onScrollbarYEnabledChange:I,onCornerWidthChange:x,onCornerHeightChange:C,children:i.jsx(Ye.div,{dir:T,...o,ref:V,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});y9.displayName=iP;var x9="ScrollAreaViewport",w9=w.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=t,o=ki(x9,n),l=w.useRef(null),u=pt(e,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(Ye.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});w9.displayName=x9;var Xa="ScrollAreaScrollbar",aP=w.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ki(Xa,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return w.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(qfe,{...r,ref:e,forceMount:n}):s.type==="scroll"?i.jsx(Gfe,{...r,ref:e,forceMount:n}):s.type==="auto"?i.jsx(b9,{...r,ref:e,forceMount:n}):s.type==="always"?i.jsx(oP,{...r,ref:e}):null});aP.displayName=Xa;var qfe=w.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ki(Xa,t.__scopeScrollArea),[a,o]=w.useState(!1);return w.useEffect(()=>{const l=s.scrollArea;let u=0;if(l){const d=()=>{window.clearTimeout(u),o(!0)},h=()=>{u=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Vr,{present:n||a,children:i.jsx(b9,{"data-state":a?"visible":"hidden",...r,ref:e})})}),Gfe=w.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ki(Xa,t.__scopeScrollArea),a=t.orientation==="horizontal",o=Jw(()=>u("SCROLL_END"),100),[l,u]=Wfe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,u]),w.useEffect(()=>{const d=s.viewport,h=a?"scrollLeft":"scrollTop";if(d){let m=d[h];const p=()=>{const y=d[h];m!==y&&(u("SCROLL"),o()),m=y};return d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[s.viewport,a,u,o]),i.jsx(Vr,{present:n||l!=="hidden",children:i.jsx(oP,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Ve(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Ve(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),b9=w.forwardRef((t,e)=>{const n=ki(Xa,t.__scopeScrollArea),{forceMount:r,...s}=t,[a,o]=w.useState(!1),l=t.orientation==="horizontal",u=Jw(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:h)}},10);return Uh(n.viewport,u),Uh(n.content,u),i.jsx(Vr,{present:r||a,children:i.jsx(oP,{"data-state":a?"visible":"hidden",...s,ref:e})})}),oP=w.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=ki(Xa,t.__scopeScrollArea),a=w.useRef(null),o=w.useRef(0),[l,u]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=E9(l.viewport,l.content),h={...r,sizes:l,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function m(p,y){return Xfe(p,o.current,l,y)}return n==="horizontal"?i.jsx(Kfe,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollLeft,y=_I(p,l,s.dir);a.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=m(p,s.dir))}}):n==="vertical"?i.jsx(Zfe,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollTop,y=_I(p,l);a.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=m(p))}}):null}),Kfe=w.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=ki(Xa,t.__scopeScrollArea),[o,l]=w.useState(),u=w.useRef(null),d=pt(e,u,a.onScrollbarXChange);return w.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),i.jsx(j9,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Yw(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,m)=>{if(a.viewport){const p=a.viewport.scrollLeft+h.deltaX;t.onWheelScroll(p),C9(p,m)&&h.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:b0(o.paddingLeft),paddingEnd:b0(o.paddingRight)}})}})}),Zfe=w.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=ki(Xa,t.__scopeScrollArea),[o,l]=w.useState(),u=w.useRef(null),d=pt(e,u,a.onScrollbarYChange);return w.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),i.jsx(j9,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Yw(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,m)=>{if(a.viewport){const p=a.viewport.scrollTop+h.deltaY;t.onWheelScroll(p),C9(p,m)&&h.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:b0(o.paddingTop),paddingEnd:b0(o.paddingBottom)}})}})}),[Qfe,_9]=v9(Xa),j9=w.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:h,onResize:m,...p}=t,y=ki(Xa,n),[j,_]=w.useState(null),N=pt(e,V=>_(V)),b=w.useRef(null),x=w.useRef(""),S=y.viewport,C=r.content-r.viewport,R=Sr(h),z=Sr(u),k=Jw(m,10);function I(V){if(b.current){const T=V.clientX-b.current.left,O=V.clientY-b.current.top;d({x:T,y:O})}}return w.useEffect(()=>{const V=T=>{const O=T.target;(j==null?void 0:j.contains(O))&&R(T,C)};return document.addEventListener("wheel",V,{passive:!1}),()=>document.removeEventListener("wheel",V,{passive:!1})},[S,j,C,R]),w.useEffect(z,[r,z]),Uh(j,k),Uh(y.content,k),i.jsx(Qfe,{scope:n,scrollbar:j,hasThumb:s,onThumbChange:Sr(a),onThumbPointerUp:Sr(o),onThumbPositionChange:z,onThumbPointerDown:Sr(l),children:i.jsx(Ye.div,{...p,ref:N,style:{position:"absolute",...p.style},onPointerDown:Ve(t.onPointerDown,V=>{V.button===0&&(V.target.setPointerCapture(V.pointerId),b.current=j.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),I(V))}),onPointerMove:Ve(t.onPointerMove,I),onPointerUp:Ve(t.onPointerUp,V=>{const T=V.target;T.hasPointerCapture(V.pointerId)&&T.releasePointerCapture(V.pointerId),document.body.style.webkitUserSelect=x.current,y.viewport&&(y.viewport.style.scrollBehavior=""),b.current=null})})})}),w0="ScrollAreaThumb",N9=w.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=_9(w0,t.__scopeScrollArea);return i.jsx(Vr,{present:n||s.hasThumb,children:i.jsx(Yfe,{ref:e,...r})})}),Yfe=w.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,a=ki(w0,n),o=_9(w0,n),{onThumbPositionChange:l}=o,u=pt(e,m=>o.onThumbChange(m)),d=w.useRef(void 0),h=Jw(()=>{d.current&&(d.current(),d.current=void 0)},100);return w.useEffect(()=>{const m=a.viewport;if(m){const p=()=>{if(h(),!d.current){const y=eme(m,l);d.current=y,l()}};return l(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[a.viewport,h,l]),i.jsx(Ye.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ve(t.onPointerDownCapture,m=>{const y=m.target.getBoundingClientRect(),j=m.clientX-y.left,_=m.clientY-y.top;o.onThumbPointerDown({x:j,y:_})}),onPointerUp:Ve(t.onPointerUp,o.onThumbPointerUp)})});N9.displayName=w0;var lP="ScrollAreaCorner",S9=w.forwardRef((t,e)=>{const n=ki(lP,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(Jfe,{...t,ref:e}):null});S9.displayName=lP;var Jfe=w.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=ki(lP,n),[a,o]=w.useState(0),[l,u]=w.useState(0),d=!!(a&&l);return Uh(s.scrollbarX,()=>{var m;const h=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(h),u(h)}),Uh(s.scrollbarY,()=>{var m;const h=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(h),o(h)}),d?i.jsx(Ye.div,{...r,ref:e,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function b0(t){return t?parseInt(t,10):0}function E9(t,e){const n=t/e;return isNaN(n)?0:n}function Yw(t){const e=E9(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Xfe(t,e,n,r="ltr"){const s=Yw(n),a=s/2,o=e||a,l=s-o,u=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,m=r==="ltr"?[0,h]:[h*-1,0];return P9([u,d],m)(t)}function _I(t,e,n="ltr"){const r=Yw(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,o=e.content-e.viewport,l=a-r,u=n==="ltr"?[0,o]:[o*-1,0],d=Mp(t,u);return P9([0,o],[0,l])(d)}function P9(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function C9(t,e){return t>0&&t<e}var eme=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&e(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Jw(t,e){const n=Sr(t),r=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),w.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Uh(t,e){const n=Sr(e);er(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var T9=y9,tme=w9,nme=S9;const cP=w.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(T9,{ref:r,className:at("relative overflow-hidden",t),...n,children:[i.jsx(tme,{className:"h-full w-full rounded-[inherit]",children:e}),i.jsx(R9,{}),i.jsx(nme,{})]}));cP.displayName=T9.displayName;const R9=w.forwardRef(({className:t,orientation:e="vertical",...n},r)=>i.jsx(aP,{ref:r,orientation:e,className:at("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:i.jsx(N9,{className:"relative flex-1 rounded-full bg-border"})}));R9.displayName=aP.displayName;const jI=({conversations:t,loading:e,searchQuery:n,setSearchQuery:r,currentConversation:s,currentUser:a,onSelectConversation:o})=>{const l=t.filter(h=>{const m=h.participants.find(y=>y!==(a==null?void 0:a.uid)),p=m?h.participantDetails[m]:null;return(p==null?void 0:p.name.toLowerCase().includes(n.toLowerCase()))||h.listingTitle.toLowerCase().includes(n.toLowerCase())}),u=h=>h===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(h),d=h=>{const m=h.participants.find(p=>p!==(a==null?void 0:a.uid));return m?h.participantDetails[m]:null};return i.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[i.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Rn,{className:"w-5 h-5 text-primary"}),i.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:i.jsx(mw,{className:"w-4 h-4"})}),i.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:i.jsx(p3,{className:"w-4 h-4"})}),i.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramètres",children:i.jsx(Pp,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Er,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ze,{placeholder:"Rechercher conversations...",value:n,onChange:h=>r(h.target.value),className:"pl-9 h-9 text-sm"})]})]}),i.jsx(cP,{className:"flex-1",children:e?i.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((h,m)=>i.jsx("div",{className:"animate-pulse",children:i.jsxs("div",{className:"flex items-center gap-2 p-2",children:[i.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:i.jsx(ts,{className:"w-5 h-5 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 space-y-1",children:[i.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},m))}):l.length===0?i.jsxs("div",{className:"p-6 text-center",children:[i.jsx(Rn,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),i.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:n?i.jsxs(i.Fragment,{children:[i.jsx(Er,{className:"w-3 h-3 inline mr-1"}),'Aucun résultat pour "',n,'"']}):i.jsxs(i.Fragment,{children:[i.jsx(Os,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparaîtront ici"]})})]}):i.jsx("div",{className:"p-1",children:l.map(h=>{var j,_;const m=d(h),p=h.unreadCount[a==null?void 0:a.uid]||0,y=(s==null?void 0:s.id)===h.id;return i.jsx("div",{onClick:()=>o(h),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${y?"bg-accent":""}`,children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsxs(Uo,{className:"w-10 h-10",children:[i.jsx(Bo,{src:m==null?void 0:m.avatar}),i.jsx(Wo,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((_=(j=m==null?void 0:m.name)==null?void 0:j[0])==null?void 0:_.toUpperCase())||i.jsx(ts,{className:"w-4 h-4"})})]}),(m==null?void 0:m.verified)&&i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx(qt,{className:"w-1.5 h-1.5 text-white"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[i.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[i.jsx(ts,{className:"w-3 h-3 text-muted-foreground"}),(m==null?void 0:m.name)||"Utilisateur"]}),i.jsxs("div",{className:"flex items-center gap-1",children:[h.lastMessage&&i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(Jn,{className:"w-3 h-3"}),ff(h.lastMessage.sentAt,{addSuffix:!0,locale:Xr})]}),p>0&&i.jsx(lt,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:p>99?"99+":p})]})]}),i.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[h.listingImage?i.jsx("img",{src:h.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):i.jsx(P3,{className:"w-3 h-3 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:h.listingTitle}),i.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[h.listingPrice===0?i.jsx(Jr,{className:"w-3 h-3 text-green-600"}):i.jsx("span",{children:"€"}),u(h.listingPrice)]})]}),h.lastMessage&&i.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[h.lastMessage.senderId===(a==null?void 0:a.uid)?i.jsx(Th,{className:"w-3 h-3"}):i.jsx(Rn,{className:"w-3 h-3"}),h.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",h.lastMessage.text]})]})]})},h.id)})})})]})},NI=({conversation:t,messages:e,loading:n,currentUser:r,onBack:s})=>{var q,X;const{sendMessage:a,markMessagesAsSeen:o,blockUser:l,reportUser:u,deleteConversation:d}=Iw(),[h,m]=w.useState(""),[p,y]=w.useState(40),[j,_]=w.useState(!1),[N,b]=w.useState(!1),[x,S]=w.useState(""),[C,R]=w.useState(""),z=w.useRef(null),k=w.useRef(null),I=()=>{var fe;(fe=k.current)==null||fe.scrollIntoView({behavior:"smooth"})},V=w.useCallback(()=>{const fe=z.current;if(!fe)return;fe.style.height="auto";const Te=Math.max(40,Math.min(fe.scrollHeight,120));y(Te)},[]),T=w.useCallback(fe=>{const Te=fe.target.value;m(Te),_(!!Te.trim()),setTimeout(V,0)},[V]),O=async()=>{if(!h.trim()||!t||!r)return;const fe=h.trim();m(""),_(!1),y(40),await a(t.id,fe,r.uid,r.displayName||"Utilisateur",r.photoURL)},$=fe=>{fe.key==="Enter"&&!fe.shiftKey&&(fe.preventDefault(),O())},M=async()=>{!t||!r||await l(t.id,r.uid)},B=async()=>{if(!t||!r||!x.trim())return;const fe=t.participants.find(Te=>Te!==r.uid);fe&&(await u(t.id,r.uid,fe,x,C),b(!1),S(""),R(""))},J=async()=>{!t||!r||(await d(t.id,r.uid),s())};if(w.useEffect(()=>{t&&r&&o(t.id,r.uid)},[t,r,o]),w.useEffect(I,[e]),!t)return i.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Rn,{className:"w-8 h-8 text-white"})}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sélectionnez une conversation"}),i.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[i.jsx(Er,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer à discuter"]})]})});const ee=t.participants.find(fe=>fe!==(r==null?void 0:r.uid)),K=ee?t.participantDetails[ee]:null,D=fe=>{const Te=new Date,$e=new Date(fe);return $e.toDateString()===Te.toDateString()?$e.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((Te.getTime()-$e.getTime())/(1e3*60*60*24))<7?$e.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):$e.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},G=fe=>fe.senderId!==(r==null?void 0:r.uid)?null:fe.seen?i.jsx(yX,{className:"w-3 h-3 text-blue-500"}):i.jsx(xX,{className:"w-3 h-3 text-muted-foreground"});return i.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[i.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx(te,{variant:"ghost",size:"icon",onClick:s,className:"lg:hidden h-8 w-8",children:i.jsx(iu,{className:"w-4 h-4"})}),i.jsxs(Uo,{className:"w-8 h-8",children:[i.jsx(Bo,{src:K==null?void 0:K.avatar}),i.jsx(Wo,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((X=(q=K==null?void 0:K.name)==null?void 0:q[0])==null?void 0:X.toUpperCase())||i.jsx(ts,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[i.jsx(ts,{className:"w-3 h-3 text-muted-foreground"}),(K==null?void 0:K.name)||"Utilisateur"]}),(K==null?void 0:K.verified)&&i.jsx(qt,{className:"w-3 h-3 text-green-600"})]}),i.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[i.jsx(Yr,{className:"w-3 h-3"}),K==null?void 0:K.university]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:i.jsx(rf,{className:"w-4 h-4"})}),i.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vidéo",children:i.jsx(A3,{className:"w-4 h-4"})}),i.jsxs(jj,{children:[i.jsx(Nj,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8",children:i.jsx(bX,{className:"w-4 h-4"})})}),i.jsxs(n0,{align:"end",children:[i.jsx(Ut,{asChild:!0,children:i.jsxs(Ue,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[i.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),i.jsxs(Ut,{children:[i.jsx(Ml,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),i.jsxs(Ut,{children:[i.jsx(mX,{className:"w-4 h-4 mr-2"}),"Archiver"]}),i.jsx(pi,{}),i.jsxs(Ut,{onClick:()=>b(!0),children:[i.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Signaler"]}),i.jsxs(Ut,{onClick:M,children:[i.jsx(vX,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),i.jsxs(Ut,{onClick:J,className:"text-destructive",children:[i.jsx(To,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),i.jsx(pe,{className:"mt-2",children:i.jsx(ge,{className:"p-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?i.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):i.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:i.jsx(P3,{className:"w-4 h-4 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[i.jsx(Q2,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),i.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?i.jsxs(i.Fragment,{children:[i.jsx(Jr,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-xs",children:"€"}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),i.jsx(te,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:i.jsxs(Ue,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[i.jsx(Cs,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[i.jsx(cP,{className:"flex-1 p-3",children:i.jsxs("div",{className:"space-y-3",children:[n?i.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((fe,Te)=>i.jsx("div",{className:"animate-pulse",children:i.jsx("div",{className:`flex ${Te%2===0?"justify-start":"justify-end"}`,children:i.jsxs("div",{className:"max-w-xs",children:[i.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),i.jsx("div",{className:"h-8 bg-muted rounded"})]})})},Te))}):e.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Rn,{className:"w-6 h-6 text-white"})}),i.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[i.jsx(Th,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(fe=>{const Te=fe.senderId===(r==null?void 0:r.uid);return i.jsx("div",{className:`flex ${Te?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${Te?"order-2":"order-1"}`,children:[i.jsx("div",{className:`rounded-2xl px-4 py-2 ${Te?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:i.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:fe.text})}),i.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${Te?"justify-end":"justify-start"}`,children:[i.jsx(Jn,{className:"w-3 h-3"}),i.jsx("span",{children:D(fe.sentAt)}),G(fe)]})]})},fe.id)}),i.jsx("div",{ref:k})]})}),i.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[i.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[i.jsx(Ei,{ref:z,value:h,placeholder:"Tapez votre message...",onChange:T,onKeyDown:$,rows:1,style:{height:p,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),i.jsx(te,{onClick:O,disabled:!h.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:i.jsx(Th,{className:"h-3.5 w-3.5"})})]}),j&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[i.jsx(Rn,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),i.jsx(Ua,{open:N,onOpenChange:b,children:i.jsxs(ea,{children:[i.jsx(Ba,{children:i.jsxs(ta,{className:"flex items-center gap-2",children:[i.jsx(Jc,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-4 h-4"}),"Motif du signalement"]}),i.jsxs(on,{value:x,onValueChange:S,children:[i.jsx(Jt,{children:i.jsx(ln,{placeholder:"Sélectionnez un motif"})}),i.jsxs(Xt,{children:[i.jsx(Qe,{value:"spam",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Os,{className:"w-4 h-4"}),"Spam"]})}),i.jsx(Qe,{value:"harassment",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-4 h-4"}),"Harcèlement"]})}),i.jsx(Qe,{value:"inappropriate",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Jc,{className:"w-4 h-4"}),"Contenu inapproprié"]})}),i.jsx(Qe,{value:"scam",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"w-4 h-4"}),"Arnaque"]})}),i.jsx(Qe,{value:"other",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ac,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"report-description",className:"flex items-center gap-2",children:[i.jsx(Rn,{className:"w-4 h-4"}),"Description (optionnel)"]}),i.jsx(Ei,{id:"report-description",value:C,onChange:fe=>R(fe.target.value),placeholder:"Décrivez le problème...",rows:3})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(te,{variant:"outline",onClick:()=>b(!1),children:"Annuler"}),i.jsxs(te,{onClick:B,disabled:!x,className:"bg-red-500 hover:bg-red-600",children:[i.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},rme=()=>{const{currentUser:t,userProfile:e}=jn(),{conversations:n,currentConversation:r,messages:s,loading:a,fetchConversations:o,fetchMessages:l,setCurrentConversation:u,cleanup:d}=Iw(),[h,m]=w.useState(""),[p,y]=w.useState(!1);w.useEffect(()=>(t&&o(t.uid),()=>{d()}),[t,o,d]),w.useEffect(()=>{r&&l(r.id)},[r,l]);const j=N=>{u(N),y(!0)},_=()=>{y(!1),u(null)};return t?i.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[i.jsx("div",{className:"lg:hidden w-full h-full",children:p?i.jsx(NI,{conversation:r,messages:s,loading:a,currentUser:t,onBack:_}):i.jsx(jI,{conversations:n,loading:a,searchQuery:h,setSearchQuery:m,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:j})}),i.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[i.jsx(jI,{conversations:n,loading:a,searchQuery:h,setSearchQuery:m,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:j}),i.jsx(NI,{conversation:r,messages:s,loading:a,currentUser:t,onBack:_})]})]}):i.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Rn,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accéder à vos messages"}),i.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[i.jsx(ts,{className:"w-4 h-4"}),"Vous devez être connecté pour voir et envoyer des messages."]}),i.jsx(te,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:i.jsxs(Ue,{to:"/auth",className:"flex items-center gap-2",children:[i.jsx(ts,{className:"w-4 h-4"}),"Se connecter"]})})]})};var Xy={linear:function(t,e,n,r){var s=n-e;return s*t/r+e},easeInQuad:function(t,e,n,r){var s=n-e;return s*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var s=n-e;return-s*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var s=n-e;return-s*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var s=n-e;return-s*Math.cos(t/r*(Math.PI/2))+s+e},easeOutSine:function(t,e,n,r){var s=n-e;return s*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var s=n-e;return-s/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var s=n-e;return t==0?e:s*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var s=n-e;return t==r?e+s:s*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var s=n-e;return t===0?e:t===r?e+s:(t/=r/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var s=n-e;return-s*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var s=n-e;return s*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var s=n-e,a,o,l;return l=1.70158,o=0,a=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-l)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var s=n-e,a,o,l;return l=1.70158,o=0,a=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),a*Math.pow(2,-10*t)*Math.sin((t*r-l)*(2*Math.PI)/o)+s+e)},easeInOutElastic:function(t,e,n,r){var s=n-e,a,o,l;return l=1.70158,o=0,a=s,t===0?e:(t/=r/2)===2?e+s:(o||(o=r*(.3*1.5)),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-l)*(2*Math.PI)/o))+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-l)*(2*Math.PI)/o)*.5+s+e)},easeInBack:function(t,e,n,r,s){var a=n-e;return s===void 0&&(s=1.70158),a*(t/=r)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,n,r,s){var a=n-e;return s===void 0&&(s=1.70158),a*((t=t/r-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,n,r,s){var a=n-e;return s===void 0&&(s=1.70158),(t/=r/2)<1?a/2*(t*t*(((s*=1.525)+1)*t-s))+e:a/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,n,r){var s=n-e,a;return a=Xy.easeOutBounce(r-t,0,s,r),s-a+e},easeOutBounce:function(t,e,n,r){var s=n-e;return(t/=r)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var s=n-e,a;return t<r/2?(a=Xy.easeInBounce(t*2,0,s,r),a*.5+e):(a=Xy.easeOutBounce(t*2-r,0,s,r),a*.5+s*.5+e)}},sme=Xy;function ime(t){return t*Math.PI/180}function Us(t,e){return t+Math.random()*(e-t)}function ame(t,e){return Math.floor(t+Math.random()*(e-t+1))}var Gm;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(Gm||(Gm={}));var bl;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(bl||(bl={}));const ome=1e3/60;class lme{constructor(e,n,r,s){this.getOptions=n;const{colors:a,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=e,this.x=r,this.y=s,this.w=Us(5,20),this.h=Us(5,20),this.radius=Us(5,10),this.vx=typeof o=="number"?Us(-o,o):Us(o.min,o.max),this.vy=typeof l=="number"?Us(-l,0):Us(l.min,l.max),this.shape=ame(0,2),this.angle=ime(Us(0,360)),this.angularSpin=Us(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=Us(0,1),this.rotationDirection=Us(0,1)?bl.Positive:bl.Negative}update(e){const{gravity:n,wind:r,friction:s,opacity:a,drawShape:o}=this.getOptions(),l=e/ome;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=n*l,this.vx+=r*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===bl.Positive?this.rotationDirection=bl.Negative:this.rotateY<=-1&&this.rotationDirection===bl.Negative&&(this.rotationDirection=bl.Positive);const u=.1*this.rotationDirection*l;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=a,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case Gm.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Gm.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Gm.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class cme{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=Us(this.x,this.w+this.x),a=Us(this.y,this.h+this.y);return new lme(this.context,this.getOptions,s,a)},this.animate=s=>{const{canvas:a,context:o,particlesGenerated:l,lastNumberOfPieces:u}=this,{run:d,recycle:h,numberOfPieces:m,debug:p,tweenFunction:y,tweenDuration:j}=this.getOptions();if(!d)return!1;const _=this.particles.length,N=h?_:l;if(N<m){u!==m&&(this.tweenProgress=0,this.tweenFrom=N,this.lastNumberOfPieces=m),this.tweenProgress=Math.min(j,Math.max(0,this.tweenProgress+s));const b=y(this.tweenProgress,this.tweenFrom,m,j),x=Math.round(b-N);for(let S=0;S<x;S++)this.particles.push(this.getParticle());this.particlesGenerated+=x}p&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${_}`,a.width-10,a.height-20));for(let b=this.particles.length-1;b>=0;b--){const x=this.particles[b];x.update(s),(x.y>a.height||x.y<-100||x.x>a.width+100||x.x<-100)&&(h&&N<=m?this.particles[b]=this.getParticle():this.removeParticleAt(b))}return _>0||N<m},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const uP={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:sme.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class ume{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const a={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...a,...uP,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:a,onConfettiComplete:o,frameRate:l},canvas:u,context:d}=this,h=Math.min(s-this.lastFrameTime,50);if(l&&h<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?h%l:0),a&&(d.fillStyle="white",d.clearRect(0,0,u.width,u.height)),this.generator.animate(h)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new cme(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var s,a;const n=(s=this._options)==null?void 0:s.run,r=(a=this._options)==null?void 0:a.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const dme=oe.createRef();class dP extends oe.Component{constructor(e){super(e),this.canvas=oe.createRef(),this.canvas=e.canvasRef||dme}componentDidMount(){if(this.canvas.current){const e=P_(this.props)[0];this.confetti=new ume(this.canvas.current,e)}}componentDidUpdate(){const e=P_(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=P_(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return i.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}dP.defaultProps={...uP};dP.displayName="ReactConfetti";function P_(t){const e={},n={},r={},s=[...Object.keys(uP),"confettiSource","drawShape","onConfettiComplete","frameRate"],a=["canvasRef"];for(const o in t){const l=t[o];s.includes(o)?e[o]=l:a.includes(o)?a[o]=l:r[o]=l}return[e,r,n]}const hme=oe.forwardRef((t,e)=>i.jsx(dP,{canvasRef:e,...t})),fme=({open:t,loading:e,email:n,onResend:r,onCheck:s,onClose:a,verified:o})=>i.jsx(Ua,{open:t,children:i.jsxs(ea,{className:"max-w-md text-center",children:[o&&i.jsx(hme,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:250,recycle:!1}),i.jsxs(Ba,{children:[i.jsxs(ta,{className:"flex items-center justify-center gap-2 text-lg",children:[o?i.jsx(OX,{className:"w-6 h-6 text-green-500 animate-bounce"}):i.jsx(RX,{className:"w-5 h-5 text-primary"}),o?"Félicitations !":"Vérifie ton email"]}),i.jsx(cu,{children:o?"Ton compte est maintenant activé. Tu peux accéder à la plateforme.":`Un lien de confirmation a été envoyé à ${n}. Clique dessus pour activer ton compte.`})]}),!o&&i.jsxs("div",{className:"space-y-3 mt-2",children:[i.jsxs("p",{className:"text-muted-foreground text-sm",children:["Pense à vérifier tes spams. ",i.jsx("br",{}),"La vérification est automatique dès que tu as cliqué sur le lien."]}),i.jsxs(te,{onClick:s,disabled:e,className:"w-full",children:[e?i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}):null,"J'ai validé mon email"]}),i.jsxs(te,{onClick:r,variant:"outline",disabled:e,className:"w-full",children:[e?i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Renvoyer l'email"]})]}),o&&i.jsxs("div",{className:"space-y-3 mt-4",children:[i.jsx("p",{className:"text-green-600 font-semibold text-lg",children:"Bienvenue sur StudyMarket !"}),i.jsx(te,{onClick:a,className:"w-full bg-gradient-to-r from-primary to-secondary",children:"Accéder au site"})]})]})}),mme=qu({email:xt().email("Email invalide"),password:xt().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),pme=qu({firstName:xt().min(2,"Le prénom doit contenir au moins 2 caractères"),lastName:xt().min(2,"Le nom doit contenir au moins 2 caractères"),displayName:xt().optional(),email:xt().email("Email invalide").refine(t=>["univ-","edu","gmail.com","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),"Vous devez utiliser une adresse email universitaire"),university:xt().min(1,"Veuillez sélectionner votre université"),otherUniversity:xt().optional(),fieldOfStudy:xt().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:xt().optional(),graduationYear:xt().min(1,"Veuillez indiquer votre année de diplôme"),password:xt().min(6,"Le mot de passe doit contenir au moins 6 caractères"),confirmPassword:xt()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),gme=qu({university:xt().min(1,"Veuillez sélectionner votre université"),otherUniversity:xt().optional(),fieldOfStudy:xt().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:xt().optional(),graduationYear:xt().min(1,"Veuillez indiquer votre année de diplôme"),displayName:xt().min(2,"Le nom doit contenir au moins 2 caractères")}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),SI=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris 3 Sorbonne","Université Paris Cité","Sciences Po Paris","Autre université"],EI=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],vme=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),yme=()=>{var ee,K;const{currentUser:t,signIn:e,signInWithGoogle:n}=jn(),[r,s]=w.useState(!1),[a,o]=w.useState(!1),[l,u]=w.useState(!1),[d,h]=w.useState(!1),[m,p]=w.useState(""),[y,j]=w.useState(""),[_,N]=w.useState(!1),[b,x]=w.useState(null);Qo();const[S,C]=w.useState(!1),[R,z]=w.useState(!1),[k,I]=w.useState(!1),V=yr(),T=uu({resolver:du(mme),defaultValues:{email:"",password:""}}),O=uu({resolver:du(pme),defaultValues:{firstName:"",lastName:"",displayName:"",email:"",university:"",otherUniversity:"",fieldOfStudy:"",otherFieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),$=uu({resolver:du(gme),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}});if(w.useEffect(()=>{(async()=>{if(t)try{const G=await Zs(_t(We,"users",t.uid));if(G.exists()){const q=G.data();if(!(t.emailVerified||t.providerData.some(fe=>fe.providerId==="google.com"))&&!q.emailVerified){j(t.email||""),h(!0),C(!0),I(!1);return}}else{if(t.providerData.some(X=>X.providerId==="google.com")){if(!vme(t.email||"")){p("Vous devez utiliser une adresse email universitaire"),ja.signOut();return}x({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),N(!0);return}const q=localStorage.getItem("pendingUserData");if(q&&t.emailVerified){const X=JSON.parse(q),fe=Object.fromEntries(Object.entries(X).filter(([,Te])=>Te!==void 0));await Yc(_t(We,"users",t.uid),fe),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}}catch(G){console.error("Error checking user profile:",G)}})()},[t]),w.useEffect(()=>{let D=null;return d&&t&&!t.emailVerified&&(D=setInterval(async()=>{await vm(t),t.emailVerified&&(h(!1),j(""),p(""),window.location.reload())},5e3)),()=>{D&&clearInterval(D)}},[d,t]),w.useEffect(()=>{t?t.emailVerified?(C(!1),I(!1)):(j(t.email||""),C(!0),I(!1)):(C(!1),I(!1))},[t]),w.useEffect(()=>{let D=null;return S&&t&&!t.emailVerified&&(D=setInterval(async()=>{await vm(t),t.emailVerified&&(I(!0),D&&clearInterval(D))},5e3)),()=>{D&&clearInterval(D)}},[S,t]),_&&b)return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:i.jsxs(pe,{className:"w-full max-w-md",children:[i.jsxs(et,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:i.jsx(LX,{className:"w-6 h-6 text-green-600"})})}),i.jsx(nt,{className:"text-2xl text-green-600",children:"Complétez votre profil étudiant"}),i.jsx(kt,{children:"Dernière étape pour accéder à StudyMarket"})]}),i.jsxs(ge,{className:"space-y-4",children:[i.jsxs(Kt,{children:[i.jsx(Ot,{className:"h-4 w-4"}),i.jsxs(Zt,{children:["Connecté avec ",i.jsx("strong",{children:b.email})]})]}),m&&i.jsxs(Kt,{variant:"destructive",children:[i.jsx(Wm,{className:"h-4 w-4"}),i.jsx(Zt,{children:m})]}),i.jsxs("form",{onSubmit:$.handleSubmit(async D=>{u(!0),p("");try{const G=D.university==="Autre université"?D.otherUniversity:D.university,q=D.fieldOfStudy==="Autre"?D.otherFieldOfStudy:D.fieldOfStudy,X=Object.fromEntries(Object.entries(D).filter(([,fe])=>fe!==void 0));if(await Yc(_t(We,"users",b.uid),{email:b.email,displayName:X.displayName,photoURL:b.photoURL,university:G,otherUniversity:D.university==="Autre université"?D.otherUniversity:void 0,fieldOfStudy:q,otherFieldOfStudy:D.fieldOfStudy==="Autre"?D.otherFieldOfStudy:void 0,graduationYear:parseInt(D.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),t&&b.displayName)try{await vp(t,{displayName:X.displayName})}catch{}window.location.reload()}catch(G){console.error("Error completing profile:",G),p("Erreur lors de la sauvegarde du profil")}finally{u(!1)}}),className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"university",children:"Université"}),i.jsxs(on,{onValueChange:D=>$.setValue("university",D),value:$.watch("university"),children:[i.jsx(Jt,{children:i.jsx(ln,{placeholder:"Sélectionnez votre université"})}),i.jsx(Xt,{children:SI.map(D=>i.jsx(Qe,{value:D,children:D},D))})]}),$.watch("university")==="Autre université"&&i.jsx(Ze,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...$.register("otherUniversity"),className:"mt-2"}),$.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive",children:$.formState.errors.university.message}),$.watch("university")==="Autre université"&&$.formState.errors.otherUniversity&&i.jsx("p",{className:"text-sm text-destructive",children:$.formState.errors.otherUniversity.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"fieldOfStudy",children:"Filière"}),i.jsxs(on,{onValueChange:D=>$.setValue("fieldOfStudy",D),value:$.watch("fieldOfStudy"),children:[i.jsx(Jt,{children:i.jsx(ln,{placeholder:"Filière"})}),i.jsx(Xt,{children:EI.map(D=>i.jsx(Qe,{value:D,children:D},D))})]}),$.watch("fieldOfStudy")==="Autre"&&i.jsx(Ze,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...$.register("otherFieldOfStudy"),className:"mt-2"}),$.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:$.formState.errors.fieldOfStudy.message}),$.watch("fieldOfStudy")==="Autre"&&$.formState.errors.otherFieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:$.formState.errors.otherFieldOfStudy.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"graduationYear",children:"Année de diplôme"}),i.jsxs(on,{onValueChange:D=>$.setValue("graduationYear",D),children:[i.jsx(Jt,{children:i.jsx(ln,{placeholder:"Année"})}),i.jsx(Xt,{children:Array.from({length:8},(D,G)=>2024+G).map(D=>i.jsx(Qe,{value:D.toString(),children:D},D))})]}),$.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive",children:$.formState.errors.graduationYear.message})]})]}),i.jsxs(te,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:l,children:[l?i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),i.jsx(te,{variant:"outline",onClick:()=>{ja.signOut(),N(!1),x(null)},className:"w-full",children:"Se déconnecter et recommencer"})]})]})});if(d)return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:i.jsxs(pe,{className:"w-full max-w-md",children:[i.jsxs(et,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(Os,{className:"w-6 h-6 text-blue-600"})})}),i.jsx(nt,{className:"text-2xl text-blue-600",children:"Vérifiez votre email"}),i.jsxs(kt,{children:["Un lien d'activation a été envoyé à ",i.jsx("strong",{children:y}),".",i.jsx("br",{}),"Cliquez sur le lien pour activer votre compte.",i.jsx("br",{}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"(Vous pouvez fermer cette page et revenir après avoir validé l'email)"})]})]}),i.jsxs(ge,{className:"space-y-4",children:[i.jsxs(Kt,{children:[i.jsx(Ot,{className:"h-4 w-4"}),i.jsxs(Zt,{children:["Nous avons envoyé un lien d'activation à ",i.jsx("strong",{children:y}),".",i.jsx("br",{}),i.jsx("span",{className:"text-xs",children:"Vérifiez vos spams si vous ne le trouvez pas."})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[i.jsx("p",{children:i.jsx("strong",{children:"Important :"})}),i.jsx("p",{children:"• Cliquez sur le lien dans l'email pour activer votre compte"}),i.jsx("p",{children:"• Vérifiez votre boîte de réception et vos spams"}),i.jsx("p",{children:"• Le lien expire dans 24h"})]}),i.jsxs(te,{onClick:async()=>{if(t){u(!0);try{await Hb(t),p(""),alert("Email d'activation renvoyé !")}catch(D){p("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",D)}u(!1)}},variant:"outline",className:"w-full",disabled:l||!t,children:[l?i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(Os,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),i.jsx(te,{onClick:async()=>{if(t){u(!0);try{await vm(t),t.emailVerified?(h(!1),j(""),p(""),window.location.reload()):p("L'email n'est pas encore validé. Pensez à vérifier vos spams.")}catch{p("Erreur lors de la vérification de l'état de l'email")}u(!1)}},variant:"secondary",className:"w-full",disabled:l||!t,children:"J'ai déjà validé mon email"}),m&&i.jsxs(Kt,{variant:"destructive",children:[i.jsx(Wm,{className:"h-4 w-4"}),i.jsx(Zt,{children:m})]}),i.jsx(te,{variant:"link",onClick:()=>{h(!1),j(""),p(""),t&&ja.signOut()},className:"w-full",children:"Retour à l'inscription"})]})]})});const M=async D=>{u(!0),p("");try{await e(D.email,D.password),V("/")}catch(G){G.code==="auth/invalid-credential"?p("Email ou mot de passe incorrect"):G.code==="auth/user-not-found"?p("Aucun compte trouvé avec cet email"):G.code==="auth/user-disabled"?p("Ce compte a été désactivé"):G.code==="auth/too-many-requests"?p("Trop de tentatives. Réessayez plus tard."):p("Erreur de connexion: "+(G.message||"Erreur inconnue")),console.error("Sign in error:",G)}finally{u(!1)}},B=async D=>{u(!0),p("");try{const{firstName:G,lastName:q,...X}=D,fe=`${G} ${q}`,$e=(await fD(ja,D.email,D.password)).user;await Hb($e,{url:`${window.location.origin}/auth`,handleCodeInApp:!1});const ze=D.university==="Autre université"?D.otherUniversity:D.university,Le=D.fieldOfStudy==="Autre"?D.otherFieldOfStudy:D.fieldOfStudy,Ce=Object.fromEntries(Object.entries(D).filter(([,ie])=>ie!==void 0)),ne={firstName:G,lastName:q,displayName:fe,university:ze,otherUniversity:D.university==="Autre université"?D.otherUniversity:void 0,fieldOfStudy:Le,otherFieldOfStudy:D.fieldOfStudy==="Autre"?D.otherFieldOfStudy:void 0,graduationYear:parseInt(Ce.graduationYear),email:D.email,createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"email"};await Yc(_t(We,"users",$e.uid),ne),j(D.email),C(!0),I(!1),$e&&await vp($e,{displayName:fe}),window.location.reload()}catch(G){console.error("Sign up error:",G),G.code==="auth/email-already-in-use"?p("Cette adresse email est déjà utilisée"):G.code==="auth/weak-password"?p("Le mot de passe est trop faible"):G.code==="auth/invalid-email"?p("Adresse email invalide"):p("Erreur lors de la création du compte")}finally{u(!1)}},J=async()=>{u(!0),p("");try{await n()}catch(D){D.code==="auth/popup-closed-by-user"?p("Connexion annulée"):D.code==="auth/popup-blocked"?p("Popup bloquée par le navigateur"):D.code==="auth/account-exists-with-different-credential"?p("Un compte existe déjà avec cet email"):p("Erreur de connexion avec Google: "+(D.message||"Erreur inconnue")),console.error("Google sign in error:",D)}finally{u(!1)}};return w.useEffect(()=>{(async()=>{if(t&&t.emailVerified&&!(await Zs(_t(We,"users",t.uid))).exists()){const q=localStorage.getItem("pendingUserData");if(q){const X=JSON.parse(q),fe=Object.fromEntries(Object.entries(X).filter(([,Te])=>Te!==void 0));await Yc(_t(We,"users",t.uid),fe),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}})()},[t]),i.jsxs("div",{className:"min-h-screen flex items-center justify-center px-2 sm:px-4 py-4 sm:py-8 bg-gradient-to-br from-primary/5 via-background to-secondary/5",children:[i.jsxs(pe,{className:"w-full max-w-md sm:max-w-lg lg:max-w-xl mx-auto",children:[i.jsxs(et,{className:"text-center space-y-2 sm:space-y-4",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:i.jsx(nf,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),i.jsx(nt,{className:"text-xl sm:text-2xl lg:text-3xl",children:r?"Rejoindre StudyMarket":"Connectez-vous à votre compte étudiant"}),i.jsx(kt,{className:"text-sm sm:text-base",children:r?"Créez votre compte étudiant vérifié et rejoignez la communauté":"Connectez-vous à votre compte étudiant"}),r&&i.jsx("div",{className:"flex items-center justify-center gap-2 mt-2 sm:mt-4",children:i.jsxs(lt,{className:"bg-blue-100 text-blue-800 border-blue-200 text-xs sm:text-sm",children:[i.jsx(qt,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),i.jsxs(ge,{className:"space-y-4 sm:space-y-6",children:[m&&i.jsxs(Kt,{variant:"destructive",children:[i.jsx(Wm,{className:"h-4 w-4"}),i.jsx(Zt,{children:m})]}),i.jsxs(te,{variant:"outline",className:"w-full",onClick:J,disabled:l,children:[l?i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),i.jsx("span",{className:"hidden sm:inline",children:"Continuer avec Google Éducation"}),i.jsx("span",{className:"sm:hidden",children:"Google Éducation"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx(yi,{className:"w-full"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),i.jsxs("form",{onSubmit:r?O.handleSubmit(B):T.handleSubmit(M),className:"space-y-4",children:[r&&i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(Oe,{htmlFor:"firstName",className:"text-sm",children:"Prénom"}),i.jsx(Ze,{id:"firstName",...O.register("firstName"),autoComplete:"given-name",className:"text-sm"}),O.formState.errors.firstName&&i.jsx("span",{className:"text-red-500 text-xs",children:O.formState.errors.firstName.message})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Oe,{htmlFor:"lastName",className:"text-sm",children:"Nom"}),i.jsx(Ze,{id:"lastName",...O.register("lastName"),autoComplete:"family-name",className:"text-sm"}),O.formState.errors.lastName&&i.jsx("span",{className:"text-red-500 text-xs",children:O.formState.errors.lastName.message})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"email",className:"text-sm",children:"Email universitaire"}),i.jsxs("div",{className:"relative",children:[i.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ze,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10 text-sm",...r?O.register("email"):T.register("email")})]}),(r?O.formState.errors.email:T.formState.errors.email)&&i.jsx("p",{className:"text-sm text-destructive",children:(ee=r?O.formState.errors.email:T.formState.errors.email)==null?void 0:ee.message}),r&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoyé à cette adresse"})]}),r&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"university",className:"text-sm",children:"Université"}),i.jsxs(on,{onValueChange:D=>O.setValue("university",D),value:O.watch("university"),children:[i.jsx(Jt,{className:"text-sm",children:i.jsx(ln,{placeholder:"Sélectionnez votre université"})}),i.jsx(Xt,{children:SI.map(D=>i.jsx(Qe,{value:D,children:D},D))})]}),O.watch("university")==="Autre université"&&i.jsx(Ze,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...O.register("otherUniversity"),className:"mt-2 text-sm"}),O.formState.errors.university&&i.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.university.message}),O.watch("university")==="Autre université"&&O.formState.errors.otherUniversity&&i.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.otherUniversity.message})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"fieldOfStudy",className:"text-sm",children:"Filière"}),i.jsxs(on,{onValueChange:D=>O.setValue("fieldOfStudy",D),value:O.watch("fieldOfStudy"),children:[i.jsx(Jt,{className:"text-sm",children:i.jsx(ln,{placeholder:"Sélectionnez votre filière"})}),i.jsx(Xt,{children:EI.map(D=>i.jsx(Qe,{value:D,children:D},D))})]}),O.watch("fieldOfStudy")==="Autre"&&i.jsx(Ze,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...O.register("otherFieldOfStudy"),className:"mt-2 text-sm"}),O.formState.errors.fieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.fieldOfStudy.message}),O.watch("fieldOfStudy")==="Autre"&&O.formState.errors.otherFieldOfStudy&&i.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.otherFieldOfStudy.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"graduationYear",className:"text-sm",children:"Année de diplôme"}),i.jsxs(on,{onValueChange:D=>O.setValue("graduationYear",D),value:O.watch("graduationYear"),children:[i.jsx(Jt,{className:"text-sm",children:i.jsx(ln,{placeholder:"Sélectionnez votre année"})}),i.jsx(Xt,{children:Array.from({length:8},(D,G)=>2024+G).map(D=>i.jsx(Qe,{value:D.toString(),children:D},D))})]}),O.formState.errors.graduationYear&&i.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.graduationYear.message})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"password",className:"text-sm",children:"Mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(Su,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ze,{id:"password",type:a?"text":"password",placeholder:"••••••••",className:"pl-10 text-sm",...r?O.register("password"):T.register("password")}),i.jsx(te,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>o(!a),children:a?i.jsx(_X,{className:"w-4 h-4"}):i.jsx(Ph,{className:"w-4 h-4"})})]}),(r?O.formState.errors.password:T.formState.errors.password)&&i.jsx("p",{className:"text-sm text-destructive",children:(K=r?O.formState.errors.password:T.formState.errors.password)==null?void 0:K.message})]}),r&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Oe,{htmlFor:"confirmPassword",className:"text-sm",children:"Confirmer le mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(Su,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ze,{id:"confirmPassword",type:a?"text":"password",placeholder:"••••••••",className:"pl-10 text-sm",...O.register("confirmPassword")})]}),O.formState.errors.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.confirmPassword.message})]}),i.jsxs(te,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-sm sm:text-base",disabled:l,children:[l?i.jsx(fs,{className:"w-4 h-4 mr-2 animate-spin"}):null,r?"Créer le compte et envoyer l'email":"Se connecter"]})]}),i.jsx("div",{className:"w-full",children:i.jsx(te,{variant:"link",onClick:()=>s(!r),disabled:l,className:"w-full flex justify-center items-center text-center break-words px-1 text-sm sm:text-base",children:r?"Déjà un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})}),r&&i.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En créant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptées."})]})]}),i.jsx(fme,{open:S,loading:R,email:y,onResend:async()=>{z(!0);try{t&&await Hb(t)}finally{z(!1)}},onCheck:async()=>{z(!0);try{t&&(await vm(t),t.emailVerified&&I(!0))}finally{z(!1)}},onClose:()=>{C(!1),I(!1),V("/")},verified:k})]})},zi=({children:t})=>{const{currentUser:e}=jn(),n=Qo();return e?i.jsx(i.Fragment,{children:t}):i.jsx(WB,{to:"/auth",state:{from:n},replace:!0})},k9=({cart:t,total:e,showCheckoutButton:n=!0})=>{const r=yr(),s=e,a=0,o=0,l=s+a-o,u=d=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d);return i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(oc,{className:"w-5 h-5"}),"Récapitulatif de commande"]})}),i.jsx(ge,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["Articles (",t.reduce((d,h)=>d+h.quantity,0),")"]}),i.jsx("span",{children:u(s)})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx(gw,{className:"w-4 h-4"}),"Livraison"]}),i.jsx("span",{className:"text-green-600 font-medium",children:"Gratuite"})]}),o>0,i.jsx(yi,{}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Total"}),i.jsx("span",{className:"font-bold text-lg",children:u(l)})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"* TVA incluse"}),n&&i.jsxs(te,{onClick:()=>r("/checkout"),className:"w-full mt-4 bg-gradient-to-r from-primary to-secondary",disabled:t.length===0,children:[i.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Procéder au paiement",i.jsx(Ra,{className:"ml-2 h-4 w-4"})]})]})})]})},xme=()=>{const{currentUser:t}=jn(),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:s,cartTotal:a}=df(),o=yr(),[l,u]=w.useState(""),[d,h]=w.useState(!1),m=(j,_)=>{if(!(_<1)){if(_>10){Ne.error("Maximum 10 articles par produit");return}n(j,_)}},p=j=>{r(j),Ne.success("Article retiré du panier")},y=()=>{l.trim()&&(h(!0),setTimeout(()=>{l.toLowerCase()==="etudiant10"?Ne.success("Code promo appliqué : 10% de réduction"):Ne.error("Code promo invalide ou expiré"),h(!1)},1e3))};return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(te,{variant:"ghost",onClick:()=>o(-1),className:"-ml-4",children:[i.jsx(iu,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(oc,{className:"w-8 h-8"}),"Mon Panier"]}),e.length>0&&i.jsxs(te,{variant:"outline",onClick:s,className:"text-destructive hover:text-destructive",children:[i.jsx(To,{className:"w-4 h-4 mr-2"}),"Vider le panier"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(oc,{className:"w-8 h-8 text-muted-foreground"})}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre panier est vide"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'articles à votre panier."}),i.jsx(te,{asChild:!0,children:i.jsxs(Ue,{to:"/products",children:[i.jsx(lu,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center justify-between",children:[i.jsxs("span",{children:["Articles (",e.reduce((j,_)=>j+_.quantity,0),")"]}),i.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>o("/products"),children:[i.jsx(lu,{className:"w-4 h-4 mr-2"}),"Continuer mes achats"]})]})}),i.jsx(ge,{children:i.jsx("div",{className:"space-y-4",children:e.map(j=>i.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[j.image?i.jsx("img",{src:j.image,alt:j.name,className:"w-20 h-20 object-cover rounded"}):i.jsx("div",{className:"w-20 h-20 bg-muted rounded flex items-center justify-center",children:i.jsx(lu,{className:"w-8 h-8 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:j.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:j.seller}),i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx(te,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-r-none",onClick:()=>m(j.id,j.quantity-1),disabled:j.quantity<=1,children:i.jsx(R3,{className:"h-3 w-3"})}),i.jsx(Ze,{type:"number",value:j.quantity,onChange:_=>{const N=parseInt(_.target.value);isNaN(N)||m(j.id,N)},className:"h-8 w-12 rounded-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),i.jsx(te,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-l-none",onClick:()=>m(j.id,j.quantity+1),disabled:j.quantity>=10,children:i.jsx(ou,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(j.price*j.quantity)}),i.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>p(j.id),className:"text-destructive hover:text-destructive mt-2",children:[i.jsx(To,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})]},j.id))})})]}),i.jsx(pe,{className:"mt-6",children:i.jsxs(ge,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Cp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ze,{placeholder:"Code promo",value:l,onChange:j=>u(j.target.value),className:"pl-10"})]}),i.jsx(te,{onClick:y,disabled:!l.trim()||d,children:d?i.jsxs(i.Fragment,{children:[i.jsx($o,{className:"w-4 h-4 mr-2 animate-spin"}),"Application..."]}):"Appliquer"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Essayez le code "ETUDIANT10" pour 10% de réduction'})]})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(k9,{cart:e,total:a,showCheckoutButton:!0}),!t&&i.jsxs(Kt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(Un,{className:"h-4 w-4 text-orange-600"}),i.jsx(Zt,{className:"text-orange-800",children:"Vous devez être connecté pour finaliser votre commande."})]})]})]})]})};var Xw="Checkbox",[wme,hje]=$r(Xw),[bme,hP]=wme(Xw);function _me(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:a,form:o,name:l,onCheckedChange:u,required:d,value:h="on",internal_do_not_use_render:m}=t,[p,y]=Xs({prop:n,defaultProp:s??!1,onChange:u,caller:Xw}),[j,_]=w.useState(null),[N,b]=w.useState(null),x=w.useRef(!1),S=j?!!o||!!j.closest("form"):!0,C={checked:p,disabled:a,setChecked:y,control:j,setControl:_,name:l,form:o,value:h,hasConsumerStoppedPropagationRef:x,required:d,defaultChecked:Ql(s)?!1:s,isFormControl:S,bubbleInput:N,setBubbleInput:b};return i.jsx(bme,{scope:e,...C,children:jme(m)?m(C):r})}var I9="CheckboxTrigger",A9=w.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:a,value:o,disabled:l,checked:u,required:d,setControl:h,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:y,bubbleInput:j}=hP(I9,t),_=pt(s,h),N=w.useRef(u);return w.useEffect(()=>{const b=a==null?void 0:a.form;if(b){const x=()=>m(N.current);return b.addEventListener("reset",x),()=>b.removeEventListener("reset",x)}},[a,m]),i.jsx(Ye.button,{type:"button",role:"checkbox","aria-checked":Ql(u)?"mixed":u,"aria-required":d,"data-state":F9(u),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:_,onKeyDown:Ve(e,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:Ve(n,b=>{m(x=>Ql(x)?!0:!x),j&&y&&(p.current=b.isPropagationStopped(),p.current||b.stopPropagation())})})});A9.displayName=I9;var fP=w.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:u,onCheckedChange:d,form:h,...m}=t;return i.jsx(_me,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:o,onCheckedChange:d,name:r,form:h,value:u,internal_do_not_use_render:({isFormControl:p})=>i.jsxs(i.Fragment,{children:[i.jsx(A9,{...m,ref:e,__scopeCheckbox:n}),p&&i.jsx(L9,{__scopeCheckbox:n})]})})});fP.displayName=Xw;var O9="CheckboxIndicator",M9=w.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,a=hP(O9,n);return i.jsx(Vr,{present:r||Ql(a.checked)||a.checked===!0,children:i.jsx(Ye.span,{"data-state":F9(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});M9.displayName=O9;var D9="CheckboxBubbleInput",L9=w.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:l,disabled:u,name:d,value:h,form:m,bubbleInput:p,setBubbleInput:y}=hP(D9,t),j=pt(n,y),_=Ow(a),N=jw(r);w.useEffect(()=>{const x=p;if(!x)return;const S=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(S,"checked").set,z=!s.current;if(_!==a&&R){const k=new Event("click",{bubbles:z});x.indeterminate=Ql(a),R.call(x,Ql(a)?!1:a),x.dispatchEvent(k)}},[p,_,a,s]);const b=w.useRef(Ql(a)?!1:a);return i.jsx(Ye.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:u,name:d,value:h,form:m,...e,tabIndex:-1,ref:j,style:{...e.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});L9.displayName=D9;function jme(t){return typeof t=="function"}function Ql(t){return t==="indeterminate"}function F9(t){return Ql(t)?"indeterminate":t?"checked":"unchecked"}const qj=w.forwardRef(({className:t,...e},n)=>i.jsx(fP,{ref:n,className:at("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:i.jsx(M9,{className:at("flex items-center justify-center text-current"),children:i.jsx(yE,{className:"h-4 w-4"})})}));qj.displayName=fP.displayName;const gy=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},mP=uf((t,e)=>({orders:[],loading:!1,fetchUserOrders:async n=>{if(n)try{t({loading:!0});const r=Tn(Ht(We,"orders"),lr("userId","==",n),ji(100)),s=await Zn(r),a=[];s.forEach(o=>{const l=o.data();a.push({id:o.id,...l,createdAt:gy(l.createdAt),updatedAt:gy(l.updatedAt)})}),a.sort((o,l)=>l.createdAt.getTime()-o.createdAt.getTime()),t({orders:a,loading:!1})}catch(r){console.error("Error fetching orders:",r),Ne.error("Erreur lors du chargement des commandes"),t({loading:!1})}},getOrderById:async n=>{try{const r=await Zs(_t(We,"orders",n));if(r.exists()){const s=r.data();return{id:r.id,...s,createdAt:gy(s.createdAt),updatedAt:gy(s.updatedAt)}}return null}catch(r){return console.error("Error getting order:",r),Ne.error("Erreur lors du chargement de la commande"),null}},createOrder:async n=>{try{const r=Math.random().toString(36).substring(2,8).toUpperCase(),s={...n,securityCode:r,createdAt:fr(),updatedAt:fr()},a=await ic(Ht(We,"orders"),s),o={id:a.id,...n,createdAt:new Date,updatedAt:new Date};return t(l=>({orders:[o,...l.orders]})),Ne.success("Commande créée avec succès !"),a.id}catch(r){throw console.error("Error creating order:",r),Ne.error("Erreur lors de la création de la commande"),r}},updateOrderStatus:async(n,r,s)=>{try{const a={status:r,updatedAt:fr()};s&&(a.notes=s),await Cn(_t(We,"orders",n),a),t(o=>({orders:o.orders.map(l=>l.id===n?{...l,status:r,notes:s||l.notes,updatedAt:new Date}:l)})),Ne.success(`Statut de la commande mis à jour : ${r}`)}catch(a){console.error("Error updating order status:",a),Ne.error("Erreur lors de la mise à jour du statut")}},cancelOrder:async(n,r)=>{try{await Cn(_t(We,"orders",n),{status:"cancelled",notes:r,updatedAt:fr()}),t(s=>({orders:s.orders.map(a=>a.id===n?{...a,status:"cancelled",notes:r,updatedAt:new Date}:a)})),Ne.success("Commande annulée")}catch(s){console.error("Error cancelling order:",s),Ne.error("Erreur lors de l'annulation de la commande")}}})),Nme=()=>{const{currentUser:t,userProfile:e}=jn(),n=yr(),r=Qo(),{cart:s,cartTotal:a,clearCart:o}=df(),{createOrder:l}=mP(),[u,d]=w.useState("shipping"),[h,m]=w.useState(!1),[p,y]=w.useState(null),[j,_]=w.useState({}),[N,b]=w.useState({fullName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:"",city:"",postalCode:"",country:"France",university:(e==null?void 0:e.university)||"",saveInfo:!0}),[x,S]=w.useState({}),[C,R]=w.useState(!1);w.useEffect(()=>{var O;s.length===0&&!((O=r.state)!=null&&O.directCheckout)&&(n("/cart"),Ne.error("Votre panier est vide"))},[s,n,r]);const z=()=>{const O={};return N.fullName||(O.fullName="Nom complet requis"),N.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N.email)||(O.email="Format d'email invalide"):O.email="Email requis",N.phone||(O.phone="Téléphone requis"),N.address||(O.address="Adresse requise"),N.city||(O.city="Ville requise"),N.postalCode||(O.postalCode="Code postal requis"),S(O),Object.keys(O).length===0},k=O=>{O.preventDefault(),z()&&(d("payment"),window.scrollTo(0,0))},I=(O,$)=>{y(O),_($),O==="card"&&$.stripePaymentId&&(d("review"),window.scrollTo(0,0))},V=()=>{if(!p){Ne.error("Veuillez sélectionner un mode de paiement");return}d("review"),window.scrollTo(0,0)},T=async()=>{if(!t){n("/auth");return}if(!C){Ne.error("Veuillez accepter les conditions générales");return}m(!0);try{const O={userId:t.uid,items:s,total:a,shipping:N,payment:{method:p,details:j,transactionId:j.stripePaymentId},status:p==="card"?"processing":"pending"},$=await l(O);o(),n(`/order-confirmation/${$}`)}catch(O){console.error("Error placing order:",O),Ne.error("Erreur lors de la création de la commande")}finally{m(!1)}};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(te,{variant:"ghost",onClick:()=>n(-1),className:"-ml-4",children:[i.jsx(iu,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Finaliser votre commande"}),i.jsxs("div",{className:"flex items-center mt-6",children:[i.jsxs("div",{className:`flex items-center ${u==="shipping"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="shipping"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),i.jsx("span",{className:"ml-2 font-medium",children:"Livraison"})]}),i.jsx(Ra,{className:"mx-2 text-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${u==="payment"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="payment"||u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),i.jsx("span",{className:"ml-2 font-medium",children:"Paiement"})]}),i.jsx(Ra,{className:"mx-2 text-muted-foreground"}),i.jsxs("div",{className:`flex items-center ${u==="review"?"text-primary":"text-muted-foreground"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),i.jsx("span",{className:"ml-2 font-medium",children:"Vérification"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u==="shipping"&&i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(gw,{className:"w-5 h-5"}),"Informations de livraison"]}),i.jsx(kt,{children:"Entrez vos coordonnées pour la livraison"})]}),i.jsx(ge,{children:i.jsxs("form",{onSubmit:k,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"fullName",className:"flex items-center gap-1",children:[i.jsx(ts,{className:"w-4 h-4"}),"Nom complet *"]}),i.jsx(Ze,{id:"fullName",value:N.fullName,onChange:O=>b({...N,fullName:O.target.value}),className:x.fullName?"border-red-500":""}),x.fullName&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.fullName})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"email",className:"flex items-center gap-1",children:[i.jsx(Os,{className:"w-4 h-4"}),"Email *"]}),i.jsx(Ze,{id:"email",type:"email",value:N.email,onChange:O=>b({...N,email:O.target.value}),className:x.email?"border-red-500":""}),x.email&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.email})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"phone",className:"flex items-center gap-1",children:[i.jsx(rf,{className:"w-4 h-4"}),"Téléphone *"]}),i.jsx(Ze,{id:"phone",value:N.phone,onChange:O=>b({...N,phone:O.target.value}),className:x.phone?"border-red-500":""}),x.phone&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.phone})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"university",className:"flex items-center gap-1",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Université"]}),i.jsx(Ze,{id:"university",value:N.university,onChange:O=>b({...N,university:O.target.value})})]})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"address",className:"flex items-center gap-1",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Adresse *"]}),i.jsx(Ze,{id:"address",value:N.address,onChange:O=>b({...N,address:O.target.value}),className:x.address?"border-red-500":""}),x.address&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.address})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"city",className:"flex items-center gap-1",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Ville *"]}),i.jsx(Ze,{id:"city",value:N.city,onChange:O=>b({...N,city:O.target.value}),className:x.city?"border-red-500":""}),x.city&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.city})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"postalCode",className:"flex items-center gap-1",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Code postal *"]}),i.jsx(Ze,{id:"postalCode",value:N.postalCode,onChange:O=>b({...N,postalCode:O.target.value}),className:x.postalCode?"border-red-500":""}),x.postalCode&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.postalCode})]}),i.jsxs("div",{children:[i.jsxs(Oe,{htmlFor:"country",className:"flex items-center gap-1",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Pays *"]}),i.jsx(Ze,{id:"country",value:N.country,onChange:O=>b({...N,country:O.target.value}),disabled:!0})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[i.jsx(qj,{id:"saveInfo",checked:N.saveInfo,onCheckedChange:O=>b({...N,saveInfo:O})}),i.jsx(Oe,{htmlFor:"saveInfo",children:"Sauvegarder ces informations pour mes prochaines commandes"})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsxs(te,{type:"submit",className:"w-full md:w-auto",children:["Continuer vers le paiement",i.jsx(Ra,{className:"ml-2 h-4 w-4"})]})})]})})]}),u==="payment"&&i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Qn,{className:"w-5 h-5"}),"Méthode de paiement"]}),i.jsx(kt,{children:"Choisissez votre mode de paiement préféré"})]}),i.jsx(ge,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsx(z$,{amount:a,currency:"EUR",onMethodSelect:I,selectedMethod:p}),i.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[i.jsxs(te,{variant:"outline",onClick:()=>d("shipping"),children:[i.jsx(iu,{className:"mr-2 h-4 w-4"}),"Retour"]}),i.jsxs(te,{onClick:V,disabled:!p||p==="card"&&!j.stripePaymentId,children:["Vérifier la commande",i.jsx(Ra,{className:"ml-2 h-4 w-4"})]})]})]})})]}),u==="review"&&i.jsxs(pe,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(Ot,{className:"w-5 h-5"}),"Vérification de la commande"]}),i.jsx(kt,{children:"Vérifiez les détails de votre commande avant de confirmer"})]}),i.jsx(ge,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:"Informations de livraison"}),i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>d("shipping"),children:"Modifier"})]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[i.jsx("p",{className:"font-medium",children:N.fullName}),i.jsx("p",{children:N.address}),i.jsxs("p",{children:[N.postalCode," ",N.city,", ",N.country]}),i.jsx("p",{children:N.email}),i.jsx("p",{children:N.phone})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:"Méthode de paiement"}),i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>d("payment"),children:"Modifier"})]}),i.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[i.jsxs("p",{className:"font-medium",children:[p==="card"&&"Carte bancaire",p==="paypal"&&"PayPal",p==="transfer"&&"Virement bancaire",p==="cash"&&"Paiement à la livraison",p==="lydia"&&"Lydia"]}),p==="card"&&j.stripePaymentId&&i.jsxs("p",{className:"text-green-600 text-sm",children:[i.jsx(Ot,{className:"w-3 h-3 inline mr-1"}),"Paiement autorisé"]}),p==="paypal"&&j.paypalEmail&&i.jsx("p",{children:j.paypalEmail}),p==="lydia"&&j.lydiaPhone&&i.jsx("p",{children:j.lydiaPhone})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",s.length,")"]}),i.jsx("div",{className:"space-y-3",children:s.map(O=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[O.image&&i.jsx("img",{src:O.image,alt:O.name,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:O.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",O.quantity]})]}),i.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(O.price*O.quantity)})]},O.id))})]}),i.jsx("div",{className:"pt-4 border-t",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(qj,{id:"terms",checked:C,onCheckedChange:O=>R(O)}),i.jsxs("div",{children:[i.jsx(Oe,{htmlFor:"terms",className:"font-medium",children:"J'accepte les conditions générales de vente"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"En passant commande, vous acceptez nos conditions générales de vente et notre politique de confidentialité."})]})]})}),i.jsxs("div",{className:"flex justify-between pt-4",children:[i.jsxs(te,{variant:"outline",onClick:()=>d("payment"),children:[i.jsx(iu,{className:"mr-2 h-4 w-4"}),"Retour"]}),i.jsx(te,{onClick:T,disabled:h||!C,className:"bg-gradient-to-r from-primary to-secondary",children:h?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Su,{className:"mr-2 h-4 w-4"}),"Confirmer la commande"]})})]})]})})]})]}),i.jsxs("div",{children:[i.jsx(k9,{cart:s,total:a,showCheckoutButton:!1}),i.jsxs(Kt,{className:"mt-4 border-blue-200 bg-blue-50",children:[i.jsx(qt,{className:"h-4 w-4 text-blue-600"}),i.jsxs(Zt,{className:"text-blue-800",children:[i.jsx("strong",{children:"Paiement sécurisé :"})," Toutes vos informations sont cryptées et sécurisées."]})]}),i.jsx(pe,{className:"mt-4",children:i.jsx(ge,{className:"pt-6",children:i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ac,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Besoin d'aide ?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre équipe est disponible 7j/7 pour vous aider avec votre commande."}),i.jsx(te,{variant:"link",className:"p-0 h-auto text-sm",children:"Contacter le support"})]})]})})})})]})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6",children:[i.jsx(oc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour finaliser votre achat"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder au processus de paiement"}),i.jsx(te,{onClick:()=>n("/auth"),children:"Se connecter"})]})})})},Sme=()=>{const{currentUser:t}=jn(),{orders:e,fetchUserOrders:n,loading:r}=mP(),s=yr(),[a,o]=w.useState(""),[l,u]=w.useState("all"),[d,h]=w.useState("date-desc"),[m,p]=w.useState("all");w.useEffect(()=>{t&&n(t.uid)},[t,n]);const y=()=>e.filter(b=>{const x=!a||b.id.toLowerCase().includes(a.toLowerCase()),S=l==="all"||b.status===l;let C=!0;if(m!=="all"){const R=new Date(b.createdAt),z=new Date;if(m==="last-30-days"){const k=new Date;k.setDate(z.getDate()-30),C=R>=k}else if(m==="last-6-months"){const k=new Date;k.setMonth(z.getMonth()-6),C=R>=k}}return x&&S&&C}).sort((b,x)=>d==="date-desc"?new Date(x.createdAt).getTime()-new Date(b.createdAt).getTime():d==="date-asc"?new Date(b.createdAt).getTime()-new Date(x.createdAt).getTime():d==="total-desc"?x.total-b.total:d==="total-asc"?b.total-x.total:0),j=b=>{switch(b){case"pending":return i.jsxs(lt,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[i.jsx(Jn,{className:"w-3 h-3 mr-1"}),"En attente"]});case"processing":return i.jsxs(lt,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[i.jsx(En,{className:"w-3 h-3 mr-1"}),"En traitement"]});case"shipped":return i.jsxs(lt,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[i.jsx(gw,{className:"w-3 h-3 mr-1"}),"Expédiée"]});case"delivered":return i.jsxs(lt,{className:"bg-green-100 text-green-800 border-green-200",children:[i.jsx(Ot,{className:"w-3 h-3 mr-1"}),"Livrée"]});case"cancelled":return i.jsxs(lt,{className:"bg-red-100 text-red-800 border-red-200",children:[i.jsx(Eh,{className:"w-3 h-3 mr-1"}),"Annulée"]});default:return i.jsx(lt,{children:b})}},_=b=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(b),N=()=>{const b={user:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),date:new Date().toISOString(),orders:e.map(R=>({id:R.id,date:R.createdAt,status:R.status,total:R.total,items:R.items.length}))},x=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),S=URL.createObjectURL(x),C=document.createElement("a");C.href=S,C.download=`commandes-${new Date().toISOString().slice(0,10)}.json`,C.click(),URL.revokeObjectURL(S)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(En,{className:"w-8 h-8"}),"Mes Commandes"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Suivez et gérez toutes vos commandes"})]}),i.jsxs(te,{variant:"outline",onClick:N,className:"flex items-center gap-2",children:[i.jsx(Ni,{className:"w-4 h-4"}),"Exporter"]})]}),i.jsx(pe,{children:i.jsx(ge,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(Ze,{placeholder:"Rechercher par numéro de commande...",value:a,onChange:b=>o(b.target.value),className:"pl-10"})]}),i.jsxs(on,{value:l,onValueChange:u,children:[i.jsx(Jt,{className:"w-40",children:i.jsx(ln,{placeholder:"Statut"})}),i.jsxs(Xt,{children:[i.jsx(Qe,{value:"all",children:"Tous les statuts"}),i.jsx(Qe,{value:"pending",children:"En attente"}),i.jsx(Qe,{value:"processing",children:"En traitement"}),i.jsx(Qe,{value:"shipped",children:"Expédiée"}),i.jsx(Qe,{value:"delivered",children:"Livrée"}),i.jsx(Qe,{value:"cancelled",children:"Annulée"})]})]}),i.jsxs(on,{value:m,onValueChange:p,children:[i.jsx(Jt,{className:"w-40",children:i.jsx(ln,{placeholder:"Période"})}),i.jsxs(Xt,{children:[i.jsx(Qe,{value:"all",children:"Toutes les périodes"}),i.jsx(Qe,{value:"last-30-days",children:"30 derniers jours"}),i.jsx(Qe,{value:"last-6-months",children:"6 derniers mois"})]})]}),i.jsxs(on,{value:d,onValueChange:h,children:[i.jsx(Jt,{className:"w-40",children:i.jsx(ln,{placeholder:"Trier par"})}),i.jsxs(Xt,{children:[i.jsx(Qe,{value:"date-desc",children:"Date (récent → ancien)"}),i.jsx(Qe,{value:"date-asc",children:"Date (ancien → récent)"}),i.jsx(Qe,{value:"total-desc",children:"Prix (élevé → bas)"}),i.jsx(Qe,{value:"total-asc",children:"Prix (bas → élevé)"})]})]})]})})}),i.jsxs(Gu,{defaultValue:"all",className:"space-y-4",children:[i.jsxs(jc,{className:"grid w-full grid-cols-4",children:[i.jsx(pn,{value:"all",children:"Toutes"}),i.jsx(pn,{value:"active",children:"En cours"}),i.jsx(pn,{value:"completed",children:"Terminées"}),i.jsx(pn,{value:"cancelled",children:"Annulées"})]}),i.jsx(gn,{value:"all",className:"space-y-4",children:r?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((b,x)=>i.jsx(pe,{className:"animate-pulse",children:i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),i.jsx("div",{className:"h-6 bg-muted rounded w-1/6"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},x))}):y().length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(En,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande trouvée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:e.length===0?"Vous n'avez pas encore passé de commande.":"Aucune commande ne correspond à vos critères de recherche."}),i.jsx(te,{asChild:!0,children:i.jsxs(Ue,{to:"/listings",children:[i.jsx(lu,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):i.jsx("div",{className:"space-y-4",children:y().map(b=>i.jsx(pe,{className:"hover:shadow-md transition-shadow",children:i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",b.id.slice(0,8)]}),j(b.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(bi,{className:"w-3 h-3"}),gr(new Date(b.createdAt),"dd MMMM yyyy",{locale:Xr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:_(b.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.items.length," article",b.items.length>1?"s":""]})]}),i.jsx(te,{asChild:!0,children:i.jsxs(Ue,{to:`/order/${b.id}`,children:["Détails",i.jsx(Ra,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[b.items.slice(0,4).map((x,S)=>i.jsx("div",{className:"flex-shrink-0",children:x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(En,{className:"w-6 h-6 text-muted-foreground"})})},S)),b.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",b.items.length-4]})})]})]})},b.id))})}),i.jsx(gn,{value:"active",className:"space-y-4",children:y().filter(b=>["pending","processing","shipped"].includes(b.status)).length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Jn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande en cours"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes en cours de traitement."})]}):i.jsx("div",{className:"space-y-4",children:y().filter(b=>["pending","processing","shipped"].includes(b.status)).map(b=>i.jsx(pe,{className:"hover:shadow-md transition-shadow",children:i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",b.id.slice(0,8)]}),j(b.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(bi,{className:"w-3 h-3"}),gr(new Date(b.createdAt),"dd MMMM yyyy",{locale:Xr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:_(b.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.items.length," article",b.items.length>1?"s":""]})]}),i.jsx(te,{asChild:!0,children:i.jsxs(Ue,{to:`/order/${b.id}`,children:["Détails",i.jsx(Ra,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[b.items.slice(0,4).map((x,S)=>i.jsx("div",{className:"flex-shrink-0",children:x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(En,{className:"w-6 h-6 text-muted-foreground"})})},S)),b.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",b.items.length-4]})})]})]})},b.id))})}),i.jsx(gn,{value:"completed",className:"space-y-4",children:y().filter(b=>b.status==="delivered").length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ot,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande terminée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore de commandes livrées."})]}):i.jsx("div",{className:"space-y-4",children:y().filter(b=>b.status==="delivered").map(b=>i.jsx(pe,{className:"hover:shadow-md transition-shadow",children:i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",b.id.slice(0,8)]}),j(b.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(bi,{className:"w-3 h-3"}),gr(new Date(b.createdAt),"dd MMMM yyyy",{locale:Xr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:_(b.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.items.length," article",b.items.length>1?"s":""]})]}),i.jsx(te,{asChild:!0,children:i.jsxs(Ue,{to:`/order/${b.id}`,children:["Détails",i.jsx(Ra,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[b.items.slice(0,4).map((x,S)=>i.jsx("div",{className:"flex-shrink-0",children:x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(En,{className:"w-6 h-6 text-muted-foreground"})})},S)),b.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",b.items.length-4]})})]})]})},b.id))})}),i.jsx(gn,{value:"cancelled",className:"space-y-4",children:y().filter(b=>b.status==="cancelled").length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Eh,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande annulée"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes annulées."})]}):i.jsx("div",{className:"space-y-4",children:y().filter(b=>b.status==="cancelled").map(b=>i.jsx(pe,{className:"hover:shadow-md transition-shadow",children:i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h3",{className:"font-semibold",children:["Commande #",b.id.slice(0,8)]}),j(b.status)]}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(bi,{className:"w-3 h-3"}),gr(new Date(b.createdAt),"dd MMMM yyyy",{locale:Xr})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:_(b.total)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.items.length," article",b.items.length>1?"s":""]})]}),i.jsx(te,{asChild:!0,children:i.jsxs(Ue,{to:`/order/${b.id}`,children:["Détails",i.jsx(Ra,{className:"ml-1 w-4 h-4"})]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[b.items.slice(0,4).map((x,S)=>i.jsx("div",{className:"flex-shrink-0",children:x.image?i.jsx("img",{src:x.image,alt:x.name,className:"w-16 h-16 object-cover rounded"}):i.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsx(En,{className:"w-6 h-6 text-muted-foreground"})})},S)),b.items.length>4&&i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-medium",children:["+",b.items.length-4]})})]})]})},b.id))})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6",children:[i.jsx(En,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos commandes"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder à l'historique de vos commandes"}),i.jsx(te,{onClick:()=>s("/auth"),children:"Se connecter"})]})})})},Eme=()=>{var h,m;const{orderId:t}=DS(),{getOrderById:e}=mP(),[n,r]=w.useState(null),[s,a]=w.useState(!0);w.useEffect(()=>{(async()=>{if(t)try{a(!0);const y=await e(t);r(y)}catch(y){console.error("Error loading order:",y)}finally{a(!1)}})()},[t,e]);const o=p=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(p),l=p=>({card:"Carte bancaire",paypal:"PayPal",transfer:"Virement bancaire",cash:"Paiement à la livraison"})[p]||p,u=()=>{const p=new Date,y=new Date(p);return y.setDate(p.getDate()+3),gr(y,"EEEE d MMMM",{locale:Xr})},d=()=>{navigator.clipboard.writeText(t||""),Ne.success("Numéro de commande copié !")};return s?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx("div",{className:"max-w-3xl mx-auto",children:i.jsxs("div",{className:"animate-pulse space-y-4",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mx-auto"}),i.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),i.jsx("div",{className:"h-32 bg-muted rounded"}),i.jsx("div",{className:"h-64 bg-muted rounded"})]})})}):n?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ot,{className:"w-8 h-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Commande confirmée !"}),i.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre commande. Vous recevrez un email de confirmation à ",n.shipping.email,"."]})]}),i.jsxs(pe,{className:"mb-6",children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(En,{className:"w-5 h-5"}),"Détails de la commande"]}),i.jsx(lt,{className:"bg-green-100 text-green-800 border-green-200",children:n.status==="pending"?"En attente":n.status==="processing"?"En traitement":n.status==="shipped"?"Expédiée":n.status==="delivered"?"Livrée":"Confirmée"})]})}),i.jsx(ge,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Numéro de commande"}),i.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t,i.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:d,children:i.jsx(N3,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),i.jsx("p",{className:"font-medium",children:gr(new Date(n.createdAt),"dd/MM/yyyy")})]})]}),i.jsx(yi,{}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Articles"}),i.jsx("div",{className:"space-y-3",children:n.items.map((p,y)=>i.jsxs("div",{className:"flex items-center gap-3",children:[p.image&&i.jsx("img",{src:p.image,alt:p.name,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:p.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",p.quantity]})]}),i.jsx("p",{className:"font-semibold",children:o(p.price*p.quantity)})]},y))})]}),i.jsx(yi,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),i.jsx("span",{children:o(n.total)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Livraison"}),i.jsx("span",{className:"text-green-600",children:"Gratuite"})]}),i.jsxs("div",{className:"flex justify-between font-bold",children:[i.jsx("span",{children:"Total"}),i.jsx("span",{children:o(n.total)})]})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2 text-base",children:[i.jsx(gw,{className:"w-4 h-4"}),"Livraison"]})}),i.jsx(ge,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:n.shipping.fullName}),i.jsx("p",{children:n.shipping.address}),i.jsxs("p",{children:[n.shipping.postalCode," ",n.shipping.city,", ",n.shipping.country]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:n.shipping.phone}),i.jsx("div",{className:"pt-2 mt-2 border-t",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(bi,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{children:["Livraison estimée: ",u()]})]})})]})})]}),i.jsxs(pe,{children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2 text-base",children:[i.jsx(Qn,{className:"w-4 h-4"}),"Paiement"]})}),i.jsx(ge,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:l(n.payment.method)}),n.payment.method==="card"&&((h=n.payment.details)==null?void 0:h.cardNumber)&&i.jsxs("p",{children:["Carte se terminant par ",n.payment.details.cardNumber.slice(-4)]}),n.payment.method==="paypal"&&((m=n.payment.details)==null?void 0:m.paypalEmail)&&i.jsx("p",{children:n.payment.details.paypalEmail}),n.payment.method==="transfer"&&i.jsxs(Kt,{className:"mt-2",children:[i.jsx(Un,{className:"h-4 w-4"}),i.jsx(Zt,{children:"Veuillez effectuer le virement dans les 48h pour valider votre commande."})]}),i.jsx("div",{className:"pt-2 mt-2 border-t",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Jn,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{children:["Statut: ",n.status==="pending"?"En attente":"Confirmé"]})]})})]})})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(te,{variant:"outline",className:"flex-1",asChild:!0,children:i.jsxs(Ue,{to:"/orders",children:[i.jsx(En,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),i.jsxs(te,{variant:"outline",className:"flex-1",children:[i.jsx(Ni,{className:"mr-2 h-4 w-4"}),"Télécharger la facture"]}),i.jsx(te,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:i.jsxs(Ue,{to:"/listings",children:[i.jsx(lu,{className:"mr-2 h-4 w-4"}),"Continuer mes achats"]})})]}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("p",{className:"text-muted-foreground mb-2",children:"Besoin d'aide avec votre commande ?"}),i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsxs(te,{variant:"link",className:"text-primary",children:[i.jsx(Os,{className:"mr-2 h-4 w-4"}),"Contacter le support"]}),i.jsxs(te,{variant:"link",className:"text-primary",children:[i.jsx(Ep,{className:"mr-2 h-4 w-4"}),"FAQ"]})]})]})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:i.jsx(pe,{children:i.jsxs(ge,{className:"pt-6",children:[i.jsx(Un,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Commande introuvable"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Nous n'avons pas pu trouver les détails de cette commande."}),i.jsx(te,{asChild:!0,children:i.jsx(Ue,{to:"/orders",children:"Voir mes commandes"})})]})})})},Pme=({id:t,name:e,description:n,price:r,currency:s,image:a,mode:o})=>{const{currentUser:l}=jn(),{addToCart:u}=df(),d=yr(),h=(y,j)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:j}).format(y),m=()=>{if(!l){Ne.error("Veuillez vous connecter pour ajouter au panier"),d("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t})},p=()=>{if(!l){Ne.error("Veuillez vous connecter pour acheter"),d("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t}),d("/checkout")};return i.jsxs(pe,{className:"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-md dark:shadow-lg border border-gray-200 dark:border-gray-800 overflow-hidden transition-all hover:shadow-lg",children:[i.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a?i.jsx("img",{src:a,alt:e,className:"w-full h-full object-cover transition-transform hover:scale-105"}):i.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:i.jsx(gX,{className:"w-12 h-12 text-muted-foreground"})}),i.jsx(lt,{className:"absolute top-2 right-2 bg-primary",children:o==="subscription"?"Abonnement":"Achat unique"})]}),i.jsxs(et,{children:[i.jsx(nt,{children:e}),i.jsx(kt,{children:n})]}),i.jsx(ge,{children:i.jsxs("div",{className:"text-2xl font-bold text-primary",children:[h(r,s),o==="subscription"&&i.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/mois"})]})}),i.jsxs(OF,{className:"flex gap-2",children:[i.jsxs(te,{variant:"outline",className:"flex-1",onClick:m,children:[i.jsx(oc,{className:"w-4 h-4 mr-2"}),"Ajouter"]}),i.jsx(te,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",onClick:p,children:"Acheter"})]})]})},Gj=[{id:"prod_ST3q24zsLbS28p",name:"Bicyclette",description:"Vélo",priceId:"price_1RY7iN2XLhzYQhT9ErigqaGg",price:10,currency:"EUR",mode:"payment",image:"https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"}],Cme=t=>Gj.find(e=>e.priceId===t),Tme="pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p";R$(Tme);async function Rme(){return{customer_id:"cus_mock123",subscription_id:"sub_mock123",subscription_status:"active",price_id:"price_1RY7iN2XLhzYQhT9ErigqaGg",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"}}async function kme(){return[{order_id:"ord_mock123",checkout_session_id:"cs_mock123",payment_intent_id:"pi_mock123",amount_subtotal:1e3,amount_total:1e3,currency:"eur",payment_status:"paid",order_status:"completed",order_date:new Date().toISOString()}]}const Ime=()=>{const{getCartItemCount:t}=df(),e=yr(),n=t();return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(te,{variant:"ghost",onClick:()=>e(-1),className:"-ml-4",children:[i.jsx(iu,{className:"w-4 h-4 mr-2"}),"Retour"]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(lu,{className:"w-8 h-8"}),"Boutique"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez nos produits et services"})]}),n>0&&i.jsxs(te,{onClick:()=>e("/cart"),className:"flex items-center gap-2",children:[i.jsx(oc,{className:"w-4 h-4"}),"Panier (",n,")"]})]})]}),!1,i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Gj.map(r=>i.jsx(Pme,{id:r.id,name:r.name,description:r.description,price:r.price,currency:r.currency,image:r.image,mode:r.mode},r.id))}),Gj.length===0&&i.jsx(pe,{className:"text-center py-12",children:i.jsxs(ge,{className:"pt-6",children:[i.jsx(En,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit disponible"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Revenez bientôt pour découvrir nos nouveaux produits."})]})})]})},Ame=()=>{const[t]=LS(),e=yr(),{currentUser:n}=jn(),{clearCart:r}=df(),[s,a]=w.useState(!0),[o,l]=w.useState(null),[u,d]=w.useState(null),[h,m]=w.useState(null),p=t.get("session_id"),y=t.get("type")==="subscription";w.useEffect(()=>{r();async function _(){if(n)try{if(a(!0),y){const b=await Rme();l(b)}else{const x=(await kme())[0];d(x)}}catch(b){console.error("Error fetching checkout result:",b),m("Impossible de charger les détails de votre achat")}finally{a(!1)}}const N=setTimeout(()=>{_()},2e3);return()=>clearTimeout(N)},[n,y,p,r]);const j=()=>{if(y&&(o!=null&&o.price_id)){const _=Cme(o.price_id);return _?_.name:"Abonnement"}else if(u)return"Commande";return"Achat"};return n?s?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto text-center",children:[i.jsx(fs,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement de votre paiement..."}),i.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous confirmons votre transaction."})]})}):h?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs(Kt,{className:"border-red-200 bg-red-50",children:[i.jsx(Un,{className:"h-4 w-4 text-red-600"}),i.jsx(Zt,{className:"text-red-800",children:h})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx(te,{asChild:!0,children:i.jsx(Ue,{to:"/",children:"Retour à l'accueil"})})})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ot,{className:"w-8 h-8 text-green-600"})}),i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Merci pour votre achat !"}),i.jsxs("p",{className:"text-muted-foreground",children:["Votre ",y?"abonnement":"commande"," a été confirmé",y?"":"e","."]})]}),i.jsxs(pe,{className:"mb-6",children:[i.jsx(et,{children:i.jsxs(nt,{className:"flex items-center gap-2",children:[y?i.jsx(Qn,{className:"w-5 h-5"}):i.jsx(En,{className:"w-5 h-5"}),j()]})}),i.jsx(ge,{children:i.jsx("div",{className:"space-y-4",children:y&&o?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),i.jsx("span",{className:"font-medium",children:o.subscription_status==="active"?"Actif":o.subscription_status==="trialing"?"Période d'essai":o.subscription_status})]}),o.current_period_end&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Prochain renouvellement:"}),i.jsx("span",{className:"font-medium",children:new Date(o.current_period_end*1e3).toLocaleDateString("fr-FR")})]}),o.payment_method_brand&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Méthode de paiement:"}),i.jsxs("span",{className:"font-medium",children:[o.payment_method_brand.toUpperCase()," •••• ",o.payment_method_last4]})]})]}):u?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Numéro de commande:"}),i.jsx("span",{className:"font-medium",children:u.order_id})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Date:"}),i.jsx("span",{className:"font-medium",children:new Date(u.order_date).toLocaleDateString("fr-FR")})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Montant:"}),i.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:u.currency}).format(u.amount_total/100)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),i.jsx("span",{className:"font-medium",children:u.order_status==="completed"?"Complété":u.order_status==="pending"?"En attente":u.order_status})]})]}):i.jsx("p",{children:"Merci pour votre achat. Vous recevrez un email de confirmation."})})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(Kt,{className:"bg-blue-50 border-blue-200",children:[i.jsx(bi,{className:"h-4 w-4 text-blue-600"}),i.jsx(Zt,{className:"text-blue-800",children:y?"Vous pouvez gérer votre abonnement à tout moment depuis votre compte.":"Vous recevrez un email de confirmation avec les détails de votre commande."})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx(te,{variant:"outline",className:"flex-1",asChild:!0,children:i.jsxs(Ue,{to:"/orders",children:[i.jsx(En,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),i.jsx(te,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:i.jsxs(Ue,{to:"/products",children:[i.jsx(lu,{className:"mr-2 h-4 w-4"}),"Continuer mes achats",i.jsx(Ep,{className:"ml-2 h-4 w-4"})]})})]})]})]})}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs(Kt,{className:"border-orange-200 bg-orange-50",children:[i.jsx(Un,{className:"h-4 w-4 text-orange-600"}),i.jsx(Zt,{className:"text-orange-800",children:"Vous devez être connecté pour voir les détails de votre achat."})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx(te,{onClick:()=>e("/auth"),children:"Se connecter"})})]})})};delete pf.Icon.Default.prototype._getIconUrl;pf.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});function Ome({position:t,onChange:e}){function n(){return FE({click(r){e([r.latlng.lat,r.latlng.lng])}}),t?i.jsx(VE,{position:t}):null}return i.jsxs($E,{center:t||[48.8584,2.2945],zoom:15,style:{height:300,width:"100%"},children:[i.jsx(zE,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),i.jsx(n,{})]})}const Mme=[{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"},{value:"donations",label:"Dons"},{value:"exchange",label:"Troc"}],Dme=()=>{const{id:t}=DS(),e=yr(),{currentUser:n}=jn(),{fetchListingById:r,updateListing:s,currentListing:a,loading:o}=Jg(),[l,u]=w.useState({title:"",description:"",price:"",images:[]}),[d,h]=w.useState([]),[m,p]=w.useState(!1),[y,j]=w.useState(null),[_,N]=w.useState(""),[b,x]=w.useState([]),[S,C]=w.useState(""),[R,z]=w.useState(""),[k,I]=w.useState(null),[V,T]=w.useState(!1);w.useEffect(()=>{t&&r(t)},[t,r]),w.useEffect(()=>{var D;a&&(u({title:a.title||"",description:a.description||"",price:((D=a.price)==null?void 0:D.toString())||"",images:a.images||[]}),N(a.category||""),x(a.tags||[]),z(a.meetingLocation||""),a.coordinates&&I(a.coordinates))},[a]);const O=D=>{u({...l,[D.target.name]:D.target.value})},$=D=>{if(!D.target.files)return;const G=Array.from(D.target.files);h(q=>[...q,...G])},M=D=>{u({...l,images:l.images.filter((G,q)=>q!==D)})},B=D=>{h(d.filter((G,q)=>q!==D))},J=()=>{S.trim()&&!b.includes(S.trim())&&b.length<5&&(x([...b,S.trim()]),C(""))},ee=D=>{x(b.filter(G=>G!==D))},K=async D=>{if(D.preventDefault(),!(!t||!n)){p(!0);try{let G=[];d.length>0&&(G=await Promise.all(d.map(X=>Lme(X,n.uid))));const q=[...l.images,...G];await s(t,{...l,price:parseFloat(l.price),images:q,category:_,tags:b,meetingLocation:R,coordinates:k}),e(`/listing/${t}`)}catch{j("Erreur lors de la mise à jour de l'annonce")}finally{p(!1)}}};return o?i.jsx("div",{children:"Chargement..."}):a?y?i.jsx("div",{className:"text-red-500",children:y}):i.jsx("form",{onSubmit:K,className:"max-w-lg mx-auto mt-10",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[i.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Modifier mon annonce"}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Oe,{htmlFor:"title",className:"block mb-1 text-gray-700",children:"Titre"}),i.jsx(Ze,{id:"title",name:"title",value:l.title,onChange:O,placeholder:"Titre",className:"w-full"})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Oe,{htmlFor:"description",className:"block mb-1 text-gray-700",children:"Description"}),i.jsx(Ei,{id:"description",name:"description",value:l.description,onChange:O,placeholder:"Description",className:"w-full",rows:4})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Oe,{htmlFor:"price",className:"block mb-1 text-gray-700",children:"Prix (€)"}),i.jsx(Ze,{id:"price",name:"price",value:l.price,onChange:O,placeholder:"Prix",type:"number",min:0,className:"w-full"})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Oe,{htmlFor:"category",className:"block mb-1 text-gray-700",children:"Catégorie"}),i.jsxs("select",{id:"category",name:"category",value:_,onChange:D=>N(D.target.value),className:"w-full border rounded px-3 py-2 bg-gray-50",required:!0,children:[i.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),Mme.map(D=>i.jsx("option",{value:D.value,children:D.label},D.value))]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Oe,{htmlFor:"meetingLocation",className:"block mb-1 text-gray-700",children:"Point de rencontre"}),i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsx(Ze,{id:"meetingLocation",name:"meetingLocation",value:R,onChange:D=>z(D.target.value),placeholder:"Ex: Bibliothèque universitaire, Hall principal...",className:"flex-1"}),i.jsx(te,{type:"button",variant:"outline",onClick:async()=>{if(!navigator.geolocation)return alert("Géolocalisation non supportée");T(!0),navigator.geolocation.getCurrentPosition(async D=>{const{latitude:G,longitude:q}=D.coords;I([G,q]);const X=await PI(G,q);z(X),T(!1)},()=>T(!1))},disabled:V,children:"📍"})]}),i.jsx("div",{className:"mt-3",children:i.jsx(Ome,{position:k,onChange:async D=>{I(D);const G=await PI(D[0],D[1]);z(G)}})})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx(Oe,{className:"block mb-1 text-gray-700",children:"Tags (max 5)"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:b.map(D=>i.jsxs("span",{className:"bg-gray-100 rounded px-2 py-1 flex items-center gap-1 text-sm",children:[D,i.jsx(te,{type:"button",size:"icon",variant:"ghost",className:"w-4 h-4 p-0",onClick:()=>ee(D),children:"×"})]},D))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ze,{placeholder:"Ajouter un tag...",value:S,onChange:D=>C(D.target.value),onKeyDown:D=>D.key==="Enter"&&(D.preventDefault(),J()),className:"flex-1"}),i.jsx(te,{type:"button",onClick:J,disabled:!S.trim()||b.length>=5,children:"Ajouter"})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx(Oe,{className:"block mb-1 text-gray-700",children:"Photos"}),i.jsxs("div",{className:"flex flex-wrap gap-4 mt-2",children:[l.images.map((D,G)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:D,alt:`photo-${G}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),i.jsx(te,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>M(G),children:"×"})]},G)),d.map((D,G)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:URL.createObjectURL(D),alt:`new-photo-${G}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),i.jsx(te,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>B(G),children:"×"})]},G)),i.jsxs("label",{className:"w-20 h-20 flex items-center justify-center border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition",children:[i.jsx("span",{className:"text-2xl text-gray-400",children:"+"}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:$,disabled:m})]})]})]}),i.jsx(te,{type:"submit",className:"w-full",disabled:m,children:m?"Enregistrement...":"Enregistrer les modifications"}),y&&i.jsx("div",{className:"text-red-500 text-center mt-2",children:y})]})}):i.jsx("div",{className:"text-red-500",children:"Annonce introuvable"})};async function Lme(t,e){const n=Date.now(),r=`listings/${e}/${n}_${t.name}`,s=G2(Z2,r),a=await H2(s,t);return await q2(a.ref)}async function PI(t,e){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${t}&lon=${e}`)).json()).display_name}const pP="Q3E5Y56YF4",$9="5f0e550b9ede2710482ad296ad3b3cae",Fme="ff26b6f0fa03bc6384566ea42dfe0ab4",V9="study-market-jobs",$me="study-market-services",Bc="student-housing",Vme="study-market-materiel";async function zme(t){try{return(await(await fetch(`https://remotive.com/api/remote-jobs?search=${encodeURIComponent(t)}`)).json()).jobs.map(r=>({id:r.id.toString(),title:r.title,company:r.company_name,company_logo:r.company_logo_url,location:r.candidate_required_location,description:r.description,url:r.url,source:"Remotive",publication_date:r.publication_date,contract_type:r.job_type,remote:r.remote,tags:r.tags}))}catch(e){return console.error("Erreur Remotive:",e),[]}}async function Ume(t){try{return((await(await fetch("https://jooble.org/api/167d4120-b9bf-4c78-b340-83d55ef013fc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keywords:t,location:"France"})})).json()).jobs||[]).map((r,s)=>({id:r.id||`jooble-${s}`,title:r.title,company:r.company,location:r.location,description:r.snippet,url:r.link,source:"Jooble",publication_date:r.date}))}catch(e){return console.error("Erreur Jooble:",e),[]}}async function Bme(t){try{return((await(await fetch(`https://jsearch.p.rapidapi.com/search?query=${encodeURIComponent(t)}&location=France`,{headers:{"X-RapidAPI-Key":"685dd8c263msh87410947d828a2ep1772d3jsn329584c927b7","X-RapidAPI-Host":"jsearch.p.rapidapi.com"}})).json()).data||[]).map(r=>({id:r.job_id,title:r.job_title,company:r.employer_name,company_logo:r.employer_logo,location:r.job_city||r.job_country,description:r.job_description,url:r.job_apply_link,source:"JSearch",publication_date:r.job_posted_at_datetime_utc,contract_type:r.job_employment_type,remote:r.job_is_remote,tags:r.job_tags}))}catch(e){return console.error("Erreur JSearch:",e),[]}}async function Wme(t){try{const e=`https://api.adzuna.com/v1/api/jobs/fr/search/1?app_id=f9025803&app_key=70805f677e7ed58080609ad89bd18a47&results_per_page=20&what=${encodeURIComponent(t)}&where=France`;return((await(await fetch(e)).json()).results||[]).map(s=>{var o,l;const a=s;return{id:a.id,title:a.title,company:(o=a.company)==null?void 0:o.display_name,location:(l=a.location)==null?void 0:l.display_name,description:a.description,url:a.redirect_url,source:"Adzuna",publication_date:a.created,contract_type:a.contract_type}})}catch(e){return console.error("Erreur Adzuna:",e),[]}}async function Hme(t){try{const e=`https://www.themuse.com/api/public/jobs?location=France&page=1&category=${encodeURIComponent(t)}`;return((await(await fetch(e)).json()).results||[]).map(s=>{var o,l;const a=s;return{id:a.id,title:a.name,company:(o=a.company)==null?void 0:o.name,location:Array.isArray(a.locations)?a.locations.map(u=>u.name).join(", "):"",description:a.contents,url:(l=a.refs)==null?void 0:l.landing_page,source:"The Muse",publication_date:a.publication_date}})}catch(e){return console.error("Erreur The Muse:",e),[]}}async function qme(t){try{const e=`https://linkedin-job-search-api.p.rapidapi.com/active-jb-7d?limit=10&offset=0&location_filter=France&keywords=${encodeURIComponent(t)}`;return((await(await fetch(e,{headers:{"X-RapidAPI-Key":"685dd8c263msh87410947d828a2ep1772d3jsn329584c927b7","X-RapidAPI-Host":"linkedin-job-search-api.p.rapidapi.com"}})).json()).jobs||[]).map((s,a)=>{const o=s;return{id:o.job_id||`linkedin-${a}`,title:o.title,company:o.company,location:o.location,description:o.description,url:o.job_url,source:"LinkedIn",publication_date:o.posted_date}})}catch(e){return console.error("Erreur LinkedIn:",e),[]}}async function z9(t){try{console.log("🔍 Recherche Algolia avec query:",t||"*");const e=pP,n=Fme,s=`https://${e}-dsn.algolia.net/1/indexes/${V9}/query`,a={query:t||"*",hitsPerPage:1e3,page:0,attributesToRetrieve:["*"],typoTolerance:!0,ignorePlurals:!0,removeStopWords:!0,analyticsTags:["job-search"]};console.log("🧪 Recherche dans l'index: study-market-jobs"),console.log("🔗 URL:",s),console.log("📊 Récupération de toutes les offres disponibles...");let o=[],l=0;const u=10;for(;l<u;){const h={...a,page:l},m=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json","X-Algolia-API-Key":n,"X-Algolia-Application-Id":e},body:JSON.stringify(h)});if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const p=await m.json(),y=p.hits||[],j=p.nbHits||0;if(console.log(`📄 Page ${l+1}: ${y.length} offres récupérées`),y.length===0){console.log("✅ Plus d'offres à récupérer");break}if(o=o.concat(y),o.length>=j){console.log(`✅ Toutes les ${j} offres récupérées`);break}l++}return console.log(`📊 Total: ${o.length} offres récupérées depuis l'index "study-market-jobs"`),o.length===0?(console.log("ℹ️ Aucun résultat trouvé dans l'index study-market-jobs"),[]):(console.log("🔍 Structure du premier hit:",JSON.stringify(o[0],null,2)),o.map((h,m)=>{const p=h,y=()=>p.objectID||p.id||p.job_id||p._id||`algolia-${m}`,j=()=>p.title||p.job_title||p.position||p.name||"Titre non spécifié",_=()=>p.company||p.company_name||p.employer||p.employer_name||"Entreprise non spécifiée",N=()=>p.location||p.city||p.country||p.address||"France",b=()=>p.description||p.summary||p.job_description||p.content||"",x=()=>p.url||p.apply_url||p.job_url||p.link||"#",S=()=>p.publication_date||p.date||p.posted_date||p.created_at||"",C=()=>p.contract_type||p.job_type||p.employment_type||p.type||"";return{id:y(),title:j(),company:_(),company_logo:p.company_logo||p.logo||"",location:N(),description:b(),url:x(),source:"Algolia",publication_date:S(),contract_type:C(),remote:!!(p.remote||p.is_remote||p.remote_ok),tags:Array.isArray(p.tags)?p.tags:Array.isArray(p.skills)?p.skills:[]}}))}catch(e){throw console.error("❌ Erreur complète Algolia:",e),new Error(`Erreur Algolia: ${e instanceof Error?e.message:"Erreur inconnue"}`)}}async function Gme(t){console.log("🚀 Début de la recherche pour:",t);const e=[{name:"Remotive",func:zme},{name:"Jooble",func:Ume},{name:"JSearch",func:Bme},{name:"Adzuna",func:Wme},{name:"The Muse",func:Hme},{name:"LinkedIn",func:qme},{name:"Algolia",func:z9}],r=(await Promise.allSettled(e.map(async a=>{console.log(`🔄 Appel API ${a.name}...`);try{const o=await a.func(t);return console.log(`✅ ${a.name}: ${o.length} offres récupérées`),o}catch(o){return console.error(`❌ ${a.name} a échoué:`,o),[]}}))).filter(a=>a.status==="fulfilled").flatMap(a=>a.value||[]);console.log(`📋 Total final: ${r.length} offres de ${e.length} sources`);const s=r.reduce((a,o)=>(a[o.source||"unknown"]=(a[o.source||"unknown"]||0)+1,a),{});return console.log("📊 Résumé par source:",s),r}function gP(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}async function Kme(t,e){await ic(Ht(We,"users",t,"favoriteJobs"),gP(e))}async function CI(t){const e=Tn(Ht(We,"users",t,"favoriteJobs"));return(await Zn(e)).docs.map(r=>({...r.data(),id:r.id}))}async function Zme(t,e){const n=ZL(We),r=Ht(We,"users",t,"searchedJobs");e.forEach(s=>{const a=_t(r);n.set(a,gP(s))}),await n.commit()}async function Qme(t,e,n){const r=ML(),s=_t(r,"jobOffersCache",t),a=new Date().toISOString(),o=Array.isArray(n)?n.map(l=>gP(l)):[];await Yc(s,{[e]:{jobs:o,fetchedAt:a}},{merge:!0})}const Yme=({image:t,title:e,subtitle:n,location:r,date:s,isFavorite:a=!1,onFavoriteToggle:o,url:l,companyName:u})=>{const d=()=>{l&&window.open(l,"_blank","noopener,noreferrer")},h=p=>{p.stopPropagation(),o&&o()},m=p=>{p.stopPropagation()};return i.jsxs("div",{className:"job-card group relative flex flex-col rounded-[12px] bg-white dark:bg-gray-900 shadow-md dark:shadow-lg overflow-hidden transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-2xl min-h-[320px] md:min-h-[420px] font-sans cursor-pointer",style:{minHeight:320},onClick:d,children:[i.jsxs("div",{className:"card-image relative w-full aspect-[16/9] overflow-hidden",style:{minHeight:160,maxHeight:180},children:[i.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover",style:{objectFit:"cover",minHeight:160,maxHeight:180},onError:p=>{const y=p.target;y.src.endsWith("/assets/job-default.jpg")||(y.src="/assets/job-default.jpg")}}),i.jsx("div",{className:"overlay absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/70 pointer-events-none"}),i.jsxs("div",{className:"absolute top-2 right-2 md:top-3 md:right-3 flex flex-col gap-1 md:gap-2 z-10",children:[i.jsx("button",{className:"bg-white/90 dark:bg-gray-800/90 rounded-full p-1.5 md:p-2 shadow hover:bg-blue-100 dark:hover:bg-blue-900 transition","aria-label":a?"Retirer des favoris":"Ajouter aux favoris",onClick:h,children:i.jsx(Jr,{className:a?"fill-red-500 text-red-500":"text-blue-400 dark:text-blue-300",strokeWidth:2,size:18,"aria-hidden":"true"})}),i.jsx("button",{className:"bg-white/90 dark:bg-gray-800/90 rounded-full p-1.5 md:p-2 shadow hover:bg-blue-100 dark:hover:bg-blue-900 transition","aria-label":"Partager",onClick:m,children:i.jsx(pw,{className:"text-blue-400 dark:text-blue-300",strokeWidth:2,size:18,"aria-hidden":"true"})})]})]}),u&&i.jsxs("div",{className:"flex items-center gap-1 md:gap-2 mb-2 px-3 md:px-5 pt-3",children:[i.jsx(b3,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-400 dark:text-blue-300","aria-hidden":"true"}),i.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-medium text-xs md:text-sm",children:u})]}),i.jsxs("div",{className:"card-content flex-1 flex flex-col px-3 md:px-5 py-2 text-left bg-white/80 dark:bg-gray-900/80 backdrop-blur-md justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"job-title font-bold text-base md:text-lg mb-1 leading-tight break-words font-sans text-gray-900 dark:text-gray-100",children:e}),n&&i.jsx("div",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2 bg-blue-50 dark:bg-blue-900 px-2 py-1 rounded",children:n})]}),i.jsxs("div",{className:"flex items-center gap-4 mt-4 w-full",children:[i.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-300 text-sm gap-2",children:[i.jsx(Yr,{className:"w-4 h-4 text-blue-400 dark:text-blue-300","aria-hidden":"true"}),i.jsx("span",{children:r})]}),s&&i.jsxs("div",{className:"flex items-center text-xs text-gray-400 ml-auto",children:[i.jsx(bi,{className:"w-4 h-4 mr-1","aria-hidden":"true"}),s]})]})]})]})},Jme="3eFVqLX19mBYTUVCMxhpPH156xmJ8K5ccP5TBwH5R2h90pHMmgb638AS";async function Xme(t){const e=await fetch(`https://api.pexels.com/v1/search?query=${encodeURIComponent(t)}&per_page=1`,{headers:{Authorization:Jme}});if(!e.ok)return null;const n=await e.json();return n.photos&&n.photos.length>0?n.photos[0].src.large:null}function epe(t){const e=typeof t=="string"?new Date(t):t,r=Math.floor((new Date().getTime()-e.getTime())/(1e3*60*60*24));return r===0?"aujourd'hui":r===1?"hier":r===2?"avant-hier":e.toLocaleDateString("fr-FR")}const am=12;function tpe(t){var l,u;const e={marketing:"marketing, digital, social media, office",developpeur:"developer, code, computer, laptop, programming, team",developer:"developer, code, computer, laptop, programming, team",business:"business, meeting, office, people, suit",stage:"internship, young people, learning, teamwork",alternance:"apprenticeship, student, learning, office",cdi:"career, professional, office, team",remote:"remote work, home office, laptop",design:"design, creative, digital, graphics",data:"data, analytics, charts, computer",sales:"sales, business, meeting, handshake"};let n="professional, office, business";const r=((l=t.title)==null?void 0:l.toLowerCase())||"",s=((u=t.contract_type)==null?void 0:u.toLowerCase())||"";for(const d in e)if(r.includes(d)||s.includes(d)){n=e[d];break}const a=t.location?`, ${t.location}`:"",o=t.company?`, ${t.company}`:"";return`${t.title}${o}${a}, ${n}`.trim()}const npe=()=>{const[t,e]=w.useState(""),[n,r]=w.useState([]),[s,a]=w.useState(!1),{currentUser:o}=jn(),[l,u]=w.useState([]),[d,h]=w.useState(1),[m,p]=w.useState({}),[y,j]=w.useState(null),[_,N]=w.useState(!1),[b,x]=w.useState(null);w.useEffect(()=>{(async()=>{if(o)try{const O=await CI(o.uid);u(O)}catch(O){console.error("Erreur lors du chargement des favoris:",O)}})()},[o]),w.useEffect(()=>{(async()=>{try{console.log("🧪 Test de connexion Algolia...");const O=await z9("");console.log("✅ Test Algolia réussi:",O.length,"offres trouvées"),O.length===0&&console.log("⚠️ Aucune offre dans l'index Algolia")}catch(O){console.error("❌ Erreur test Algolia:",O)}})()},[]),w.useEffect(()=>{if(n.length===0)return;(async()=>{const O={},$={},M=(d-1)*am,B=M+am,J=n.slice(M,B);for(const ee of J){const K=tpe(ee),D=ee.id+ee.source;if(m[D]){O[D]=m[D];continue}if($[K]){O[D]=$[K];continue}try{const G=await Xme(K);G?($[K]=G,O[D]=G):O[D]="/assets/job-default.jpg"}catch(G){console.warn("Erreur chargement image pour",ee.title,G),O[D]="/assets/job-default.jpg"}}p(ee=>({...ee,...O}))})()},[n,d,m]),w.useEffect(()=>{S("")},[]);const S=async T=>{const O=T??t;a(!0),j(null),N(!0);try{console.log("🔍 Recherche avec query:",O);const $=await Gme(O);console.log("📊 Résultats par source:");const M=$.reduce((B,J)=>(B[J.source||"unknown"]=(B[J.source||"unknown"]||0)+1,B),{});if(console.table(M),r($),h(1),o&&$.length>0)try{await Zme(o.uid,$);const B={};for(const J of $){const ee=J.source||"unknown";B[ee]||(B[ee]=[]),B[ee].push(J)}for(const J in B)await Qme(o.uid,J,B[J])}catch(B){console.error("Erreur Firestore:",B)}$.length===0&&j("Aucune offre trouvée pour cette recherche. Essayez avec des mots-clés différents.")}catch($){console.error("❌ Erreur lors de la recherche:",$),j("Erreur lors de la recherche : "+($ instanceof Error?$.message:String($)))}finally{a(!1)}},C=async T=>{if(!o){alert("Vous devez être connecté pour ajouter aux favoris.");return}try{if(l.some($=>$.id===T.id&&$.source===T.source)){alert("Cette offre est déjà dans vos favoris !");return}await Kme(o.uid,T),u($=>[...$,T]),alert("Offre ajoutée aux favoris !")}catch(O){console.error("Erreur ajout favori:",O),alert("Erreur lors de l'ajout aux favoris.")}},R=async()=>{if(!o){alert("Vous devez être connecté pour voir vos favoris.");return}try{const T=await CI(o.uid);u(T),console.log("Favoris chargés:",T.length)}catch(T){console.error("Erreur chargement favoris:",T),alert("Erreur lors du chargement des favoris.")}},z=b?n.filter(T=>(T.source||"unknown")===b):n,k=Math.ceil(z.length/am),I=z.slice((d-1)*am,d*am),V=n.reduce((T,O)=>{const $=O.source||"unknown";return T[$]=(T[$]||0)+1,T},{});return i.jsxs("div",{className:"max-w-7xl mx-auto px-1 sm:px-6 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Recherche d'emploi"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-2 mb-4",children:[i.jsx("input",{className:"border rounded px-3 py-2 flex-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",value:t,onChange:T=>e(T.target.value),placeholder:"Ex: développeur, marketing, designer...",onKeyPress:T=>T.key==="Enter"&&S()}),i.jsx("button",{className:"bg-blue-600 dark:bg-blue-700 text-white px-4 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-800 transition disabled:opacity-50",onClick:()=>S(),disabled:s,children:s?"Recherche...":"Tout rechercher"}),i.jsxs("button",{onClick:R,className:"bg-yellow-500 dark:bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-600 dark:hover:bg-yellow-700 transition",children:["Mes favoris (",l.length,")"]})]}),_&&i.jsxs("div",{className:"mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow",children:[i.jsxs("div",{className:"text-gray-600 dark:text-gray-300 font-medium mb-2",children:[n.length," offres trouvées"]}),Object.keys(V).length>0&&i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[i.jsxs("button",{className:`text-xs px-2 py-1 rounded ${b?"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-blue-200 text-blue-900 font-bold"}`,onClick:()=>{x(null),h(1)},children:["Tous: ",n.length]}),Object.entries(V).map(([T,O])=>i.jsxs("button",{className:`text-xs px-2 py-1 rounded ${b===T?"bg-blue-500 text-white font-bold":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,onClick:()=>{x(T),h(1)},children:[T,": ",O]},T))]})]}),I.length>0&&i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-6 mb-6",children:I.map(T=>i.jsx(Yme,{image:m[T.id+T.source]||"/assets/job-default.jpg",companyName:T.company||void 0,title:T.title||"Titre non spécifié",subtitle:T.contract_type,location:T.location||"Non spécifié",date:T.publication_date?epe(T.publication_date):void 0,isFavorite:l.some(O=>O.id===T.id&&O.source===T.source),onFavoriteToggle:()=>C(T),url:T.url},`${T.id}-${T.source}`))}),k>1&&i.jsxs("div",{className:"flex justify-center items-center gap-1 md:gap-2 mb-6 overflow-x-auto px-1 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[i.jsx("button",{className:"px-3 py-1 rounded border bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 disabled:opacity-50",onClick:()=>h(d-1),disabled:d===1,children:"Précédent"}),Array.from({length:k}).map((T,O)=>{const $=O+1,M=$===d;return $===1||$===2||$===k||$===k-1||Math.abs($-d)<=1?i.jsx("button",{className:`px-3 py-1 rounded border ${M?"bg-blue-600 text-white font-bold":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700"} transition`,onClick:()=>h($),disabled:M,children:$},$):$===3&&d>5||$===k-2&&d<k-4?i.jsx("span",{children:"..."},$):null}),i.jsx("button",{className:"px-3 py-1 rounded border bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 disabled:opacity-50",onClick:()=>h(d+1),disabled:d===k,children:"Suivant"})]}),l.length>0&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[i.jsxs("h2",{className:"font-bold text-xl mb-4 text-gray-900 dark:text-gray-100",children:["Mes offres favorites (",l.length,")"]}),i.jsx("div",{className:"space-y-4",children:l.map(T=>i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 rounded-lg shadow p-4 border border-yellow-200 dark:border-yellow-700",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:T.title}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[T.company," — ",T.location]}),i.jsxs("div",{className:"flex gap-2",children:[T.contract_type&&i.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 px-2 py-1 rounded",children:T.contract_type}),i.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:T.source})]})]}),i.jsx("div",{className:"flex gap-2 ml-4",children:i.jsx("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 dark:bg-blue-700 text-white px-3 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-800 transition text-sm",children:"Voir l'offre"})})]})},`fav-${T.id}-${T.source}`))})]}),n.length===0&&!s&&_&&i.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8 bg-white dark:bg-gray-800 rounded-lg p-8",children:[i.jsx("p",{className:"text-lg mb-2",children:"Aucune offre trouvée"}),i.jsx("p",{className:"text-sm",children:"Essayez avec des mots-clés différents ou vérifiez votre configuration API."})]}),!_&&i.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8 bg-white dark:bg-gray-800 rounded-lg p-8",children:[i.jsx("p",{className:"text-lg mb-2",children:"Commencez votre recherche"}),i.jsx("p",{className:"text-sm",children:`Saisissez des mots-clés et cliquez sur "Rechercher" pour trouver des offres d'emploi.`})]}),y&&i.jsx("div",{className:"text-center text-red-500 dark:text-red-400 mt-8 bg-red-50 dark:bg-red-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:i.jsx("p",{className:"font-semibold text-base",children:y})}),s&&i.jsx("div",{className:"text-center mt-8",children:i.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-current mr-3"}),"Recherche en cours..."]})})]})},Kj="6.47.3";function ss(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var vP=ss;ss.prototype._events=void 0;ss.prototype._maxListeners=void 0;ss.defaultMaxListeners=10;ss.prototype.setMaxListeners=function(t){if(!rpe(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this};ss.prototype.emit=function(t){var e,n,r,s,a,o;if(this._events||(this._events={}),t==="error"&&(!this._events.error||Fp(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],U9(n))return!1;if(qo(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(Fp(n))for(s=Array.prototype.slice.call(arguments,1),o=n.slice(),r=o.length,a=0;a<r;a++)o[a].apply(this,s);return!0};ss.prototype.addListener=function(t,e){var n;if(!qo(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,qo(e.listener)?e.listener:e),this._events[t]?Fp(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,Fp(this._events[t])&&!this._events[t].warned&&(U9(this._maxListeners)?n=ss.defaultMaxListeners:n=this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),typeof console.trace=="function"&&console.trace())),this};ss.prototype.on=ss.prototype.addListener;ss.prototype.once=function(t,e){if(!qo(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this};ss.prototype.removeListener=function(t,e){var n,r,s,a;if(!qo(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||qo(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(Fp(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;n.length===1?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this};ss.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[t]&&delete this._events[t],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],qo(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this};ss.prototype.listeners=function(t){var e;return!this._events||!this._events[t]?e=[]:qo(this._events[t])?e=[this._events[t]]:e=this._events[t].slice(),e};ss.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(qo(e))return 1;if(e)return e.length}return 0};ss.listenerCount=function(t,e){return t.listenerCount(e)};function qo(t){return typeof t=="function"}function rpe(t){return typeof t=="number"}function Fp(t){return typeof t=="object"&&t!==null}function U9(t){return t===void 0}const spe=Go(vP);function ipe(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}var B9=ipe,ape=vP,ope=B9;function eb(t,e){this.main=t,this.fn=e,this.lastResults=null}ope(eb,ape);eb.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)};eb.prototype.getModifiedState=function(t){return this.fn(t)};var lpe=eb;function cpe(t){return typeof t!="string"?t:String(t).replace(/^-/,"\\-")}function upe(t){return typeof t!="string"?t:t.replace(/^\\-/,"-")}var yP={escapeFacetValue:cpe,unescapeFacetValue:upe};function dpe(t){return typeof t=="object"&&t!==null?xP(Array.isArray(t)?[]:{},t):t}function _0(t){return typeof t=="function"||Array.isArray(t)||Object.prototype.toString.call(t)==="[object Object]"}function xP(t,e){if(t===e)return t;for(var n in e)if(!(!Object.prototype.hasOwnProperty.call(e,n)||n==="__proto__"||n==="constructor")){var r=e[n],s=t[n];typeof s<"u"&&typeof r>"u"||(_0(s)&&_0(r)?t[n]=xP(s,r):t[n]=dpe(r))}return t}function hpe(t){_0(t)||(t={});for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];_0(r)&&xP(t,r)}return t}var tb=hpe;function fpe(t){return t&&Object.keys(t).length>0}var wP=fpe;function mpe(t,e){if(t===null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var bP=mpe,C_=tb;function T_(t){return Object.keys(t).sort().reduce(function(e,n){return e[n]=t[n],e},{})}var zs={_getQueries:function(e,n){var r=[];return r.push({indexName:e,params:zs._getHitsSearchParams(n)}),n.getRefinedDisjunctiveFacets().forEach(function(s){r.push({indexName:e,params:zs._getDisjunctiveFacetSearchParams(n,s)})}),n.getRefinedHierarchicalFacets().forEach(function(s){var a=n.getHierarchicalFacetByName(s),o=n.getHierarchicalRefinement(s),l=n._getHierarchicalFacetSeparator(a);if(o.length>0&&o[0].split(l).length>1){var u=o[0].split(l).slice(0,-1).reduce(function(h,m,p){return h.concat({attribute:a.attributes[p],value:p===0?m:[h[h.length-1].value,m].join(l)})},[]);u.forEach(function(d,h){var m=zs._getDisjunctiveFacetSearchParams(n,d.attribute,h===0);function p(_){return a.attributes.some(function(N){return N===_.split(":")[0]})}var y=(m.facetFilters||[]).reduce(function(_,N){if(Array.isArray(N)){var b=N.filter(function(x){return!p(x)});b.length>0&&_.push(b)}return typeof N=="string"&&!p(N)&&_.push(N),_},[]),j=u[h-1];h>0?m.facetFilters=y.concat(j.attribute+":"+j.value):m.facetFilters=y.length>0?y:void 0,r.push({indexName:e,params:m})})}}),r},_getHitsSearchParams:function(t){var e=t.facets.concat(t.disjunctiveFacets).concat(zs._getHitsHierarchicalFacetsAttributes(t)).sort(),n=zs._getFacetFilters(t),r=zs._getNumericFilters(t),s=zs._getTagFilters(t),a={facets:e.indexOf("*")>-1?["*"]:e,tagFilters:s};return n.length>0&&(a.facetFilters=n),r.length>0&&(a.numericFilters=r),T_(C_({},t.getQueryParams(),a))},_getDisjunctiveFacetSearchParams:function(t,e,n){var r=zs._getFacetFilters(t,e,n),s=zs._getNumericFilters(t,e),a=zs._getTagFilters(t),o={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1};a.length>0&&(o.tagFilters=a);var l=t.getHierarchicalFacetByName(e);return l?o.facets=zs._getDisjunctiveHierarchicalFacetAttribute(t,l,n):o.facets=e,s.length>0&&(o.numericFilters=s),r.length>0&&(o.facetFilters=r),T_(C_({},t.getQueryParams(),o))},_getNumericFilters:function(t,e){if(t.numericFilters)return t.numericFilters;var n=[];return Object.keys(t.numericRefinements).forEach(function(r){var s=t.numericRefinements[r]||{};Object.keys(s).forEach(function(a){var o=s[a]||[];e!==r&&o.forEach(function(l){if(Array.isArray(l)){var u=l.map(function(d){return r+a+d});n.push(u)}else n.push(r+a+l)})})}),n},_getTagFilters:function(t){return t.tagFilters?t.tagFilters:t.tagRefinements.join(",")},_getFacetFilters:function(t,e,n){var r=[],s=t.facetsRefinements||{};Object.keys(s).sort().forEach(function(u){var d=s[u]||[];d.sort().forEach(function(h){r.push(u+":"+h)})});var a=t.facetsExcludes||{};Object.keys(a).sort().forEach(function(u){var d=a[u]||[];d.sort().forEach(function(h){r.push(u+":-"+h)})});var o=t.disjunctiveFacetsRefinements||{};Object.keys(o).sort().forEach(function(u){var d=o[u]||[];if(!(u===e||!d||d.length===0)){var h=[];d.sort().forEach(function(m){h.push(u+":"+m)}),r.push(h)}});var l=t.hierarchicalFacetsRefinements||{};return Object.keys(l).sort().forEach(function(u){var d=l[u]||[],h=d[0];if(h!==void 0){var m=t.getHierarchicalFacetByName(u),p=t._getHierarchicalFacetSeparator(m),y=t._getHierarchicalRootPath(m),j,_;if(e===u){if(h.indexOf(p)===-1||!y&&n===!0||y&&y.split(p).length===h.split(p).length)return;y?(_=y.split(p).length-1,h=y):(_=h.split(p).length-2,h=h.slice(0,h.lastIndexOf(p))),j=m.attributes[_]}else _=h.split(p).length-1,j=m.attributes[_];j&&r.push([j+":"+h])}}),r},_getHitsHierarchicalFacetsAttributes:function(t){var e=[];return t.hierarchicalFacets.reduce(function(r,s){var a=t.getHierarchicalRefinement(s.name)[0];if(!a)return r.push(s.attributes[0]),r;var o=t._getHierarchicalFacetSeparator(s),l=a.split(o).length,u=s.attributes.slice(0,l+1);return r.concat(u)},e)},_getDisjunctiveHierarchicalFacetAttribute:function(t,e,n){var r=t._getHierarchicalFacetSeparator(e);if(n===!0){var s=t._getHierarchicalRootPath(e),a=0;return s&&(a=s.split(r).length),[e.attributes[a]]}var o=t.getHierarchicalRefinement(e.name)[0]||"",l=o.split(r).length-1;return e.attributes.slice(0,l+1)},getSearchForFacetQuery:function(t,e,n,r){var s=r.isDisjunctiveFacet(t)?r.clearRefinements(t):r,a={facetQuery:e,facetName:t};return typeof n=="number"&&(a.maxFacetHits=n),T_(C_({},zs._getHitsSearchParams(s),a))}},ppe=zs,_P=function(){var e=Array.prototype.slice.call(arguments);return e.reduceRight(function(n,r){return Object.keys(Object(r)).forEach(function(s){r[s]!==void 0&&(n[s]!==void 0&&delete n[s],n[s]=r[s])}),n},{})},nb=function(e,n){if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(n(e[r]))return e[r]}};function gpe(t,e){return t.filter(function(n,r){return e.indexOf(n)>-1&&t.indexOf(n)===r})}var vpe=gpe;function W9(t){if(typeof t=="number")return t;if(typeof t=="string")return parseFloat(t);if(Array.isArray(t))return t.map(W9);throw new Error("The value should be a number, a parsable string or an array of those.")}var ype=W9,xpe=function(e){return e===null?!1:/^[a-zA-Z0-9_-]{1,64}$/.test(e)},wpe=_P,bpe=wP,_pe=bP,Wc={addRefinement:function(e,n,r){if(Wc.isRefined(e,n,r))return e;var s=""+r,a=e[n]?e[n].concat(s):[s],o={};return o[n]=a,wpe({},o,e)},removeRefinement:function(e,n,r){if(r===void 0)return Wc.clearRefinement(e,function(a,o){return n===o});var s=""+r;return Wc.clearRefinement(e,function(a,o){return n===o&&s===a})},toggleRefinement:function(e,n,r){if(r===void 0)throw new Error("toggleRefinement should be used with a value");return Wc.isRefined(e,n,r)?Wc.removeRefinement(e,n,r):Wc.addRefinement(e,n,r)},clearRefinement:function(e,n,r){if(n===void 0)return bpe(e)?{}:e;if(typeof n=="string")return _pe(e,[n]);if(typeof n=="function"){var s=!1,a=Object.keys(e).reduce(function(o,l){var u=e[l]||[],d=u.filter(function(h){return!n(h,l,r)});return d.length!==u.length&&(s=!0),o[l]=d,o},{});return s?a:e}},isRefined:function(e,n,r){var s=!!e[n]&&e[n].length>0;if(r===void 0||!s)return s;var a=""+r;return e[n].indexOf(a)!==-1}},jpe=Wc,R_=_P,H9=nb,TI=vpe,Zj=tb,Qj=wP,RI=bP,k_=ype,Npe=xpe,$n=jpe;function jP(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every(function(n,r){return jP(e[r],n)}):t===e}function Spe(t,e){return H9(t,function(n){return jP(n,e)})}function Rs(t){var e=t?Rs._parseNumbers(t):{};e.userToken!==void 0&&!Npe(e.userToken)&&console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=e.facets||[],this.disjunctiveFacets=e.disjunctiveFacets||[],this.hierarchicalFacets=e.hierarchicalFacets||[],this.facetsRefinements=e.facetsRefinements||{},this.facetsExcludes=e.facetsExcludes||{},this.disjunctiveFacetsRefinements=e.disjunctiveFacetsRefinements||{},this.numericRefinements=e.numericRefinements||{},this.tagRefinements=e.tagRefinements||[],this.hierarchicalFacetsRefinements=e.hierarchicalFacetsRefinements||{};var n=this;Object.keys(e).forEach(function(r){var s=Rs.PARAMETERS.indexOf(r)!==-1,a=e[r]!==void 0;!s&&a&&(n[r]=e[r])})}Rs.PARAMETERS=Object.keys(new Rs);Rs._parseNumbers=function(t){if(t instanceof Rs)return t;var e={},n=["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"];if(n.forEach(function(s){var a=t[s];if(typeof a=="string"){var o=parseFloat(a);e[s]=isNaN(o)?a:o}}),Array.isArray(t.insideBoundingBox)&&(e.insideBoundingBox=t.insideBoundingBox.map(function(s){return Array.isArray(s)?s.map(function(a){return parseFloat(a)}):s})),t.numericRefinements){var r={};Object.keys(t.numericRefinements).forEach(function(s){var a=t.numericRefinements[s]||{};r[s]={},Object.keys(a).forEach(function(o){var l=a[o],u=l.map(function(d){return Array.isArray(d)?d.map(function(h){return typeof h=="string"?parseFloat(h):h}):typeof d=="string"?parseFloat(d):d});r[s][o]=u})}),e.numericRefinements=r}return Zj({},t,e)};Rs.make=function(e){var n=new Rs(e),r=e.hierarchicalFacets||[];return r.forEach(function(s){if(s.rootPath){var a=n.getHierarchicalRefinement(s.name);a.length>0&&a[0].indexOf(s.rootPath)!==0&&(n=n.clearRefinements(s.name)),a=n.getHierarchicalRefinement(s.name),a.length===0&&(n=n.toggleHierarchicalFacetRefinement(s.name,s.rootPath))}}),n};Rs.validate=function(t,e){var n=e||{};return t.tagFilters&&n.tagRefinements&&n.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):t.tagRefinements.length>0&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):t.numericFilters&&n.numericRefinements&&Qj(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):Qj(t.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null};Rs.prototype={constructor:Rs,clearRefinements:function(e){var n={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:$n.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:$n.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:$n.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:$n.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return n.numericRefinements===this.numericRefinements&&n.facetsRefinements===this.facetsRefinements&&n.facetsExcludes===this.facetsExcludes&&n.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&n.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(n)},clearTags:function(){return this.tagFilters===void 0&&this.tagRefinements.length===0?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(t,e,n){var r=k_(n);if(this.isNumericRefined(t,e,r))return this;var s=Zj({},this.numericRefinements);return s[t]=Zj({},s[t]),s[t][e]?(s[t][e]=s[t][e].slice(),s[t][e].push(r)):s[t][e]=[r],this.setQueryParameters({numericRefinements:s})},getConjunctiveRefinements:function(t){return this.isConjunctiveFacet(t)?this.facetsRefinements[t]||[]:[]},getDisjunctiveRefinements:function(t){return this.isDisjunctiveFacet(t)?this.disjunctiveFacetsRefinements[t]||[]:[]},getHierarchicalRefinement:function(t){return this.hierarchicalFacetsRefinements[t]||[]},getExcludeRefinements:function(t){return this.isConjunctiveFacet(t)?this.facetsExcludes[t]||[]:[]},removeNumericRefinement:function(t,e,n){var r=n;return r!==void 0?this.isNumericRefined(t,e,r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(s,a){return a===t&&s.op===e&&jP(s.val,k_(r))})}):this:e!==void 0?this.isNumericRefined(t,e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(s,a){return a===t&&s.op===e})}):this:this.isNumericRefined(t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(s,a){return a===t})}):this},getNumericRefinements:function(t){return this.numericRefinements[t]||{}},getNumericRefinement:function(t,e){return this.numericRefinements[t]&&this.numericRefinements[t][e]},_clearNumericRefinements:function(e){if(e===void 0)return Qj(this.numericRefinements)?{}:this.numericRefinements;if(typeof e=="string")return RI(this.numericRefinements,[e]);if(typeof e=="function"){var n=!1,r=this.numericRefinements,s=Object.keys(r).reduce(function(a,o){var l=r[o],u={};return l=l||{},Object.keys(l).forEach(function(d){var h=l[d]||[],m=[];h.forEach(function(p){var y=e({val:p,op:d},o,"numeric");y||m.push(p)}),m.length!==h.length&&(n=!0),u[d]=m}),a[o]=u,a},{});return n?s:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return $n.isRefined(this.facetsRefinements,e,n)?this:this.setQueryParameters({facetsRefinements:$n.addRefinement(this.facetsRefinements,e,n)})},addExcludeRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return $n.isRefined(this.facetsExcludes,e,n)?this:this.setQueryParameters({facetsExcludes:$n.addRefinement(this.facetsExcludes,e,n)})},addDisjunctiveFacetRefinement:function(e,n){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return $n.isRefined(this.disjunctiveFacetsRefinements,e,n)?this:this.setQueryParameters({disjunctiveFacetsRefinements:$n.addRefinement(this.disjunctiveFacetsRefinements,e,n)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var n={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(n)},removeFacet:function(e){return this.isConjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({facets:this.facets.filter(function(n){return n!==e})}):this},removeDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(n){return n!==e})}):this},removeHierarchicalFacet:function(e){return this.isHierarchicalFacet(e)?this.clearRefinements(e).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(n){return n.name!==e})}):this},removeFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return $n.isRefined(this.facetsRefinements,e,n)?this.setQueryParameters({facetsRefinements:$n.removeRefinement(this.facetsRefinements,e,n)}):this},removeExcludeRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return $n.isRefined(this.facetsExcludes,e,n)?this.setQueryParameters({facetsExcludes:$n.removeRefinement(this.facetsExcludes,e,n)}):this},removeDisjunctiveFacetRefinement:function(e,n){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return $n.isRefined(this.disjunctiveFacetsRefinements,e,n)?this.setQueryParameters({disjunctiveFacetsRefinements:$n.removeRefinement(this.disjunctiveFacetsRefinements,e,n)}):this},removeTagRefinement:function(e){if(!this.isTagRefined(e))return this;var n={tagRefinements:this.tagRefinements.filter(function(r){return r!==e})};return this.setQueryParameters(n)},toggleRefinement:function(e,n){return this.toggleFacetRefinement(e,n)},toggleFacetRefinement:function(e,n){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,n);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,n);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,n);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:$n.toggleRefinement(this.facetsRefinements,e,n)})},toggleExcludeFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:$n.toggleRefinement(this.facetsExcludes,e,n)})},toggleDisjunctiveFacetRefinement:function(e,n){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:$n.toggleRefinement(this.disjunctiveFacetsRefinements,e,n)})},toggleHierarchicalFacetRefinement:function(e,n){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),s={},a=this.hierarchicalFacetsRefinements[e]!==void 0&&this.hierarchicalFacetsRefinements[e].length>0&&(this.hierarchicalFacetsRefinements[e][0]===n||this.hierarchicalFacetsRefinements[e][0].indexOf(n+r)===0);return a?n.indexOf(r)===-1?s[e]=[]:s[e]=[n.slice(0,n.lastIndexOf(r))]:s[e]=[n],this.setQueryParameters({hierarchicalFacetsRefinements:R_({},s,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(t,e){if(this.isHierarchicalFacetRefined(t))throw new Error(t+" is already refined.");if(!this.isHierarchicalFacet(t))throw new Error(t+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var n={};return n[t]=[e],this.setQueryParameters({hierarchicalFacetsRefinements:R_({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(t){if(!this.isHierarchicalFacetRefined(t))return this;var e={};return e[t]=[],this.setQueryParameters({hierarchicalFacetsRefinements:R_({},e,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(t){return this.disjunctiveFacets.indexOf(t)>-1},isHierarchicalFacet:function(t){return this.getHierarchicalFacetByName(t)!==void 0},isConjunctiveFacet:function(t){return this.facets.indexOf(t)>-1},isFacetRefined:function(e,n){return this.isConjunctiveFacet(e)?$n.isRefined(this.facetsRefinements,e,n):!1},isExcludeRefined:function(e,n){return this.isConjunctiveFacet(e)?$n.isRefined(this.facetsExcludes,e,n):!1},isDisjunctiveFacetRefined:function(e,n){return this.isDisjunctiveFacet(e)?$n.isRefined(this.disjunctiveFacetsRefinements,e,n):!1},isHierarchicalFacetRefined:function(e,n){if(!this.isHierarchicalFacet(e))return!1;var r=this.getHierarchicalRefinement(e);return n?r.indexOf(n)!==-1:r.length>0},isNumericRefined:function(e,n,r){if(r===void 0&&n===void 0)return!!this.numericRefinements[e];var s=this.numericRefinements[e]&&this.numericRefinements[e][n]!==void 0;if(r===void 0||!s)return s;var a=k_(r),o=Spe(this.numericRefinements[e][n],a)!==void 0;return s&&o},isTagRefined:function(e){return this.tagRefinements.indexOf(e)!==-1},getRefinedDisjunctiveFacets:function(){var e=this,n=TI(Object.keys(this.numericRefinements).filter(function(r){return Object.keys(e.numericRefinements[r]).length>0}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(r){return e.disjunctiveFacetsRefinements[r].length>0}).concat(n).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var e=this;return TI(this.hierarchicalFacets.map(function(n){return n.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(n){return e.hierarchicalFacetsRefinements[n].length>0})).sort()},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(e){return t.indexOf(e)===-1})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var e=this.managedParameters,n={},r=this;return Object.keys(this).forEach(function(s){var a=r[s];e.indexOf(s)===-1&&a!==void 0&&(n[s]=a)}),n},setQueryParameter:function(e,n){if(this[e]===n)return this;var r={};return r[e]=n,this.setQueryParameters(r)},setQueryParameters:function(e){if(!e)return this;var n=Rs.validate(this,e);if(n)throw n;var r=this,s=Rs._parseNumbers(e),a=Object.keys(this).reduce(function(l,u){return l[u]=r[u],l},{}),o=Object.keys(s).reduce(function(l,u){var d=l[u]!==void 0,h=s[u]!==void 0;return d&&!h?RI(l,[u]):(h&&(l[u]=s[u]),l)},a);return new this.constructor(o)},resetPage:function(){return this.page===void 0?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(t){return t.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(t){return t.separator||" > "},_getHierarchicalRootPath:function(t){return t.rootPath||null},_getHierarchicalShowParentLevel:function(t){return typeof t.showParentLevel=="boolean"?t.showParentLevel:!0},getHierarchicalFacetByName:function(t){return H9(this.hierarchicalFacets,function(e){return e.name===t})},getHierarchicalFacetBreadcrumb:function(t){if(!this.isHierarchicalFacet(t))return[];var e=this.getHierarchicalRefinement(t)[0];if(!e)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(t)),r=e.split(n);return r.map(function(s){return s.trim()})},toString:function(){return JSON.stringify(this,null,2)}};var q9=Rs,Epe=function(e){return Array.isArray(e)?e.filter(Boolean):[]},Ppe=function(e,n){if(!Array.isArray(e))return-1;for(var r=0;r<e.length;r++)if(n(e[r]))return r;return-1},Cpe=nb,G9=function(e,n){var r=(n||[]).map(function(s){return s.split(":")});return e.reduce(function(a,o){var l=o.split(":"),u=Cpe(r,function(d){return d[0]===l[0]});return l.length>1||!u?(a[0].push(l[0]),a[1].push(l[1]),a):(a[0].push(u[0]),a[1].push(u[1]),a)},[[],[]])};function Tpe(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=e!==void 0,a=e===null;if(!a&&t>e||r&&s||!n)return 1;if(!r&&t<e||a&&n||!s)return-1}return 0}function Rpe(t,e,n){if(!Array.isArray(t))return[];Array.isArray(n)||(n=[]);var r=t.map(function(s,a){return{criteria:e.map(function(o){return s[o]}),index:a,value:s}});return r.sort(function(a,o){for(var l=-1;++l<a.criteria.length;){var u=Tpe(a.criteria[l],o.criteria[l]);if(u)return l>=n.length?u:n[l]==="desc"?-u:u}return a.index-o.index}),r.map(function(s){return s.value})}var K9=Rpe,kpe=Lpe,Z9=yP,Ipe=nb,Ape=G9,Ope=K9,Mpe=Z9.escapeFacetValue,Dpe=Z9.unescapeFacetValue;function Lpe(t){return function(n,r){var s=t.hierarchicalFacets[r],a=t.hierarchicalFacetsRefinements[s.name]&&t.hierarchicalFacetsRefinements[s.name][0]||"",o=t._getHierarchicalFacetSeparator(s),l=t._getHierarchicalRootPath(s),u=t._getHierarchicalShowParentLevel(s),d=Ape(t._getHierarchicalFacetSortBy(s)),h=n.every(function(y){return y.exhaustive}),m=Fpe(d,o,l,u,a),p=n;return l&&(p=n.slice(l.split(o).length)),p.reduce(m,{name:t.hierarchicalFacets[r].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:h,data:null})}}function Fpe(t,e,n,r,s){return function(o,l,u){var d=o;if(u>0){var h=0;for(d=o;h<u;){var m=d&&Array.isArray(d.data)?d.data:[];d=Ipe(m,function(y){return y.isRefined}),h++}}if(d){var p=Object.keys(l.data).map(function(y){return[y,l.data[y]]}).filter(function(y){var j=y[0];return $pe(j,d.path||n,s,e,n,r)});d.data=Ope(p.map(function(y){var j=y[0],_=y[1];return Vpe(_,j,e,Dpe(s),l.exhaustive)}),t[0],t[1])}return o}}function $pe(t,e,n,r,s,a){return s&&(t.indexOf(s)!==0||s===t)?!1:!s&&t.indexOf(r)===-1||s&&t.split(r).length-s.split(r).length===1||t.indexOf(r)===-1&&n.indexOf(r)===-1||n.indexOf(t)===0||t.indexOf(e+r)===0&&(a||t.indexOf(n)===0)}function Vpe(t,e,n,r,s){var a=e.split(n);return{name:a[a.length-1].trim(),path:e,escapedValue:Mpe(e),count:t,isRefined:r===e||r.indexOf(e+n)===0,exhaustive:s,data:null}}var I_=Epe,j0=_P,Q9=yP,na=nb,om=Ppe,zpe=G9,Upe=tb,Y9=K9,kI=Q9.escapeFacetValue,J9=Q9.unescapeFacetValue,Bpe=kpe;function II(t){var e={};return t.forEach(function(n,r){e[n]=r}),e}function A_(t,e,n){e&&e[n]&&(t.stats=e[n])}function Wpe(t,e){return na(t,function(r){var s=r.attributes||[];return s.indexOf(e)>-1})}function Yl(t,e,n){var r=e[0];this._rawResults=e;var s=this;Object.keys(r).forEach(function(h){s[h]=r[h]}),Object.keys(n||{}).forEach(function(h){s[h]=n[h]}),this.processingTimeMS=e.reduce(function(h,m){return m.processingTimeMS===void 0?h:h+m.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=t.hierarchicalFacets.map(function(){return[]}),this.facets=[];var a=t.getRefinedDisjunctiveFacets(),o=II(t.facets),l=II(t.disjunctiveFacets),u=1,d=r.facets||{};Object.keys(d).forEach(function(h){var m=d[h],p=Wpe(t.hierarchicalFacets,h);if(p){var y=p.attributes.indexOf(h),j=om(t.hierarchicalFacets,function(x){return x.name===p.name});s.hierarchicalFacets[j][y]={attribute:h,data:m,exhaustive:r.exhaustiveFacetsCount}}else{var _=t.disjunctiveFacets.indexOf(h)!==-1,N=t.facets.indexOf(h)!==-1,b;_&&(b=l[h],s.disjunctiveFacets[b]={name:h,data:m,exhaustive:r.exhaustiveFacetsCount},A_(s.disjunctiveFacets[b],r.facets_stats,h)),N&&(b=o[h],s.facets[b]={name:h,data:m,exhaustive:r.exhaustiveFacetsCount},A_(s.facets[b],r.facets_stats,h))}}),this.hierarchicalFacets=I_(this.hierarchicalFacets),a.forEach(function(h){var m=e[u],p=m&&m.facets?m.facets:{},y=t.getHierarchicalFacetByName(h);Object.keys(p).forEach(function(j){var _=p[j],N;if(y){N=om(t.hierarchicalFacets,function(S){return S.name===y.name});var b=om(s.hierarchicalFacets[N],function(S){return S.attribute===j});if(b===-1)return;s.hierarchicalFacets[N][b].data=Upe({},s.hierarchicalFacets[N][b].data,_)}else{N=l[j];var x=r.facets&&r.facets[j]||{};s.disjunctiveFacets[N]={name:j,data:j0({},_,x),exhaustive:m.exhaustiveFacetsCount},A_(s.disjunctiveFacets[N],m.facets_stats,j),t.disjunctiveFacetsRefinements[j]&&t.disjunctiveFacetsRefinements[j].forEach(function(S){!s.disjunctiveFacets[N].data[S]&&t.disjunctiveFacetsRefinements[j].indexOf(J9(S))>-1&&(s.disjunctiveFacets[N].data[S]=0)})}}),u++}),t.getRefinedHierarchicalFacets().forEach(function(h){var m=t.getHierarchicalFacetByName(h),p=t._getHierarchicalFacetSeparator(m),y=t.getHierarchicalRefinement(h);y.length===0||y[0].split(p).length<2||e.slice(u).forEach(function(j){var _=j&&j.facets?j.facets:{};Object.keys(_).forEach(function(N){var b=_[N],x=om(t.hierarchicalFacets,function(z){return z.name===m.name}),S=om(s.hierarchicalFacets[x],function(z){return z.attribute===N});if(S!==-1){var C={};if(y.length>0){var R=y[0].split(p)[0];C[R]=s.hierarchicalFacets[x][S].data[R]}s.hierarchicalFacets[x][S].data=j0(C,b,s.hierarchicalFacets[x][S].data)}}),u++})}),Object.keys(t.facetsExcludes).forEach(function(h){var m=t.facetsExcludes[h],p=o[h];s.facets[p]={name:h,data:d[h],exhaustive:r.exhaustiveFacetsCount},m.forEach(function(y){s.facets[p]=s.facets[p]||{name:h},s.facets[p].data=s.facets[p].data||{},s.facets[p].data[y]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(Bpe(t)),this.facets=I_(this.facets),this.disjunctiveFacets=I_(this.disjunctiveFacets),this._state=t}Yl.prototype.getFacetByName=function(t){function e(n){return n.name===t}return na(this.facets,e)||na(this.disjunctiveFacets,e)||na(this.hierarchicalFacets,e)};function Hpe(t,e){function n(h){return h.name===e}if(t._state.isConjunctiveFacet(e)){var r=na(t.facets,n);return r?Object.keys(r.data).map(function(h){var m=kI(h);return{name:h,escapedValue:m,count:r.data[h],isRefined:t._state.isFacetRefined(e,m),isExcluded:t._state.isExcludeRefined(e,h)}}):[]}else if(t._state.isDisjunctiveFacet(e)){var s=na(t.disjunctiveFacets,n);return s?Object.keys(s.data).map(function(h){var m=kI(h);return{name:h,escapedValue:m,count:s.data[h],isRefined:t._state.isDisjunctiveFacetRefined(e,m)}}):[]}else if(t._state.isHierarchicalFacet(e)){var a=na(t.hierarchicalFacets,n);if(!a)return a;var o=t._state.getHierarchicalFacetByName(e),l=t._state._getHierarchicalFacetSeparator(o),u=J9(t._state.getHierarchicalRefinement(e)[0]||"");u.indexOf(o.rootPath)===0&&(u=u.replace(o.rootPath+l,""));var d=u.split(l);return d.unshift(e),X9(a,d,0),a}}function X9(t,e,n){t.isRefined=t.name===e[n],t.data&&t.data.forEach(function(r){X9(r,e,n+1)})}function eV(t,e,n,r){if(r=r||0,Array.isArray(e))return t(e,n[r]);if(!e.data||e.data.length===0)return e;var s=e.data.map(function(l){return eV(t,l,n,r+1)}),a=t(s,n[r]),o=j0({data:a},e);return o}Yl.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"];function qpe(t,e){return e.sort(t)}function Gpe(t,e){var n=[],r=[],s=e.order||[],a=s.reduce(function(u,d,h){return u[d]=h,u},{});t.forEach(function(u){var d=u.path||u.name;a[d]!==void 0?n[a[d]]=u:r.push(u)}),n=n.filter(function(u){return u});var o=e.sortRemainingBy,l;return o==="hidden"?n:(o==="alpha"?l=[["path","name"],["asc","asc"]]:l=[["count"],["desc"]],n.concat(Y9(r,l[0],l[1])))}function Kpe(t,e){return t.renderingContent&&t.renderingContent.facetOrdering&&t.renderingContent.facetOrdering.values&&t.renderingContent.facetOrdering.values[e]}Yl.prototype.getFacetValues=function(t,e){var n=Hpe(this,t);if(n){var r=j0({},e,{sortBy:Yl.DEFAULT_SORT,facetOrdering:!(e&&e.sortBy)}),s=this,a;if(Array.isArray(n))a=[t];else{var o=s._state.getHierarchicalFacetByName(n.name);a=o.attributes}return eV(function(l,u){if(r.facetOrdering){var d=Kpe(s,u);if(d)return Gpe(l,d)}if(Array.isArray(r.sortBy)){var h=zpe(r.sortBy,Yl.DEFAULT_SORT);return Y9(l,h[0],h[1])}else if(typeof r.sortBy=="function")return qpe(r.sortBy,l);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},n,a)}};Yl.prototype.getFacetStats=function(t){if(this._state.isConjunctiveFacet(t))return AI(this.facets,t);if(this._state.isDisjunctiveFacet(t))return AI(this.disjunctiveFacets,t)};function AI(t,e){var n=na(t,function(r){return r.name===e});return n&&n.stats}Yl.prototype.getRefinements=function(){var t=this._state,e=this,n=[];return Object.keys(t.facetsRefinements).forEach(function(r){t.facetsRefinements[r].forEach(function(s){n.push(O_(t,"facet",r,s,e.facets))})}),Object.keys(t.facetsExcludes).forEach(function(r){t.facetsExcludes[r].forEach(function(s){n.push(O_(t,"exclude",r,s,e.facets))})}),Object.keys(t.disjunctiveFacetsRefinements).forEach(function(r){t.disjunctiveFacetsRefinements[r].forEach(function(s){n.push(O_(t,"disjunctive",r,s,e.disjunctiveFacets))})}),Object.keys(t.hierarchicalFacetsRefinements).forEach(function(r){t.hierarchicalFacetsRefinements[r].forEach(function(s){n.push(Zpe(t,r,s,e.hierarchicalFacets))})}),Object.keys(t.numericRefinements).forEach(function(r){var s=t.numericRefinements[r];Object.keys(s).forEach(function(a){s[a].forEach(function(o){n.push({type:"numeric",attributeName:r,name:o,numericValue:o,operator:a})})})}),t.tagRefinements.forEach(function(r){n.push({type:"tag",attributeName:"_tags",name:r})}),n};function O_(t,e,n,r,s){var a=na(s,function(u){return u.name===n}),o=a&&a.data&&a.data[r]?a.data[r]:0,l=a&&a.exhaustive||!1;return{type:e,attributeName:n,name:r,count:o,exhaustive:l}}function Zpe(t,e,n,r){var s=t.getHierarchicalFacetByName(e),a=t._getHierarchicalFacetSeparator(s),o=n.split(a),l=na(r,function(p){return p.name===e}),u=o.reduce(function(p,y){var j=p&&na(p.data,function(_){return _.name===y});return j!==void 0?j:p},l),d=u&&u.count||0,h=u&&u.exhaustive||!1,m=u&&u.path||"";return{type:"hierarchical",attributeName:e,name:m,count:d,exhaustive:h}}var tV=Yl,nV="3.14.0",Qpe=vP,Ype=lpe,Jpe=yP.escapeFacetValue,Xpe=B9,ege=tb,tge=wP,nge=bP,Bh=ppe,NP=q9,Yj=tV,rV=nV;function Je(t,e,n){typeof t.addAlgoliaAgent=="function"&&t.addAlgoliaAgent("JS Helper ("+rV+")"),this.setClient(t);var r=n||{};r.index=e,this.state=NP.make(r),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}Xpe(Je,Qpe);Je.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this};Je.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this};Je.prototype.getQuery=function(){var t=this.state;return Bh._getHitsSearchParams(t)};Je.prototype.searchOnce=function(t,e){var n=t?this.state.setQueryParameters(t):this.state,r=Bh._getQueries(n.index,n),s=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:n}),e){this.client.search(r).then(function(a){s._currentNbQueries--,s._currentNbQueries===0&&s.emit("searchQueueEmpty"),e(null,new Yj(n,a.results),n)}).catch(function(a){s._currentNbQueries--,s._currentNbQueries===0&&s.emit("searchQueueEmpty"),e(a,null,n)});return}return this.client.search(r).then(function(a){return s._currentNbQueries--,s._currentNbQueries===0&&s.emit("searchQueueEmpty"),{content:new Yj(n,a.results),state:n,_originalResponse:a}},function(a){throw s._currentNbQueries--,s._currentNbQueries===0&&s.emit("searchQueueEmpty"),a})};Je.prototype.findAnswers=function(t){console.warn("[algoliasearch-helper] answers is no longer supported");var e=this.state,n=this.derivedHelpers[0];if(!n)return Promise.resolve([]);var r=n.getModifiedState(e),s=ege({attributesForPrediction:t.attributesForPrediction,nbHits:t.nbHits},{params:nge(Bh._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),a="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if(typeof this.client.initIndex!="function")throw new Error(a);var o=this.client.initIndex(r.index);if(typeof o.findAnswers!="function")throw new Error(a);return o.findAnswers(r.query,t.queryLanguages,s)};Je.prototype.searchForFacetValues=function(t,e,n,r){var s=typeof this.client.searchForFacetValues=="function",a=typeof this.client.initIndex=="function";if(!s&&!a&&typeof this.client.search!="function")throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var o=this.state.setQueryParameters(r||{}),l=o.isDisjunctiveFacet(t),u=Bh.getSearchForFacetQuery(t,e,n,o);this._currentNbQueries++;var d=this,h;return s?h=this.client.searchForFacetValues([{indexName:o.index,params:u}]):a?h=this.client.initIndex(o.index).searchForFacetValues(u):(delete u.facetName,h=this.client.search([{type:"facet",facet:t,indexName:o.index,params:u}]).then(function(p){return p.results[0]})),this.emit("searchForFacetValues",{state:o,facet:t,query:e}),h.then(function(p){return d._currentNbQueries--,d._currentNbQueries===0&&d.emit("searchQueueEmpty"),p=Array.isArray(p)?p[0]:p,p.facetHits.forEach(function(y){y.escapedValue=Jpe(y.value),y.isRefined=l?o.isDisjunctiveFacetRefined(t,y.escapedValue):o.isFacetRefined(t,y.escapedValue)}),p},function(m){throw d._currentNbQueries--,d._currentNbQueries===0&&d.emit("searchQueueEmpty"),m})};Je.prototype.setQuery=function(t){return this._change({state:this.state.resetPage().setQuery(t),isPageReset:!0}),this};Je.prototype.clearRefinements=function(t){return this._change({state:this.state.resetPage().clearRefinements(t),isPageReset:!0}),this};Je.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this};Je.prototype.addDisjunctiveFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(t,e),isPageReset:!0}),this};Je.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)};Je.prototype.addHierarchicalFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(t,e),isPageReset:!0}),this};Je.prototype.addNumericRefinement=function(t,e,n){return this._change({state:this.state.resetPage().addNumericRefinement(t,e,n),isPageReset:!0}),this};Je.prototype.addFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().addFacetRefinement(t,e),isPageReset:!0}),this};Je.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)};Je.prototype.addFacetExclusion=function(t,e){return this._change({state:this.state.resetPage().addExcludeRefinement(t,e),isPageReset:!0}),this};Je.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)};Je.prototype.addTag=function(t){return this._change({state:this.state.resetPage().addTagRefinement(t),isPageReset:!0}),this};Je.prototype.removeNumericRefinement=function(t,e,n){return this._change({state:this.state.resetPage().removeNumericRefinement(t,e,n),isPageReset:!0}),this};Je.prototype.removeDisjunctiveFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(t,e),isPageReset:!0}),this};Je.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)};Je.prototype.removeHierarchicalFacetRefinement=function(t){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(t),isPageReset:!0}),this};Je.prototype.removeFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().removeFacetRefinement(t,e),isPageReset:!0}),this};Je.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)};Je.prototype.removeFacetExclusion=function(t,e){return this._change({state:this.state.resetPage().removeExcludeRefinement(t,e),isPageReset:!0}),this};Je.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)};Je.prototype.removeTag=function(t){return this._change({state:this.state.resetPage().removeTagRefinement(t),isPageReset:!0}),this};Je.prototype.toggleFacetExclusion=function(t,e){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(t,e),isPageReset:!0}),this};Je.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)};Je.prototype.toggleRefinement=function(t,e){return this.toggleFacetRefinement(t,e)};Je.prototype.toggleFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().toggleFacetRefinement(t,e),isPageReset:!0}),this};Je.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)};Je.prototype.toggleTag=function(t){return this._change({state:this.state.resetPage().toggleTagRefinement(t),isPageReset:!0}),this};Je.prototype.nextPage=function(){var t=this.state.page||0;return this.setPage(t+1)};Je.prototype.previousPage=function(){var t=this.state.page||0;return this.setPage(t-1)};function sV(t){if(t<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(t),isPageReset:!1}),this}Je.prototype.setCurrentPage=sV;Je.prototype.setPage=sV;Je.prototype.setIndex=function(t){return this._change({state:this.state.resetPage().setIndex(t),isPageReset:!0}),this};Je.prototype.setQueryParameter=function(t,e){return this._change({state:this.state.resetPage().setQueryParameter(t,e),isPageReset:!0}),this};Je.prototype.setState=function(t){return this._change({state:NP.make(t),isPageReset:!1}),this};Je.prototype.overrideStateWithoutTriggeringChangeEvent=function(t){return this.state=new NP(t),this};Je.prototype.hasRefinements=function(t){return tge(this.state.getNumericRefinements(t))?!0:this.state.isConjunctiveFacet(t)?this.state.isFacetRefined(t):this.state.isDisjunctiveFacet(t)?this.state.isDisjunctiveFacetRefined(t):this.state.isHierarchicalFacet(t)?this.state.isHierarchicalFacetRefined(t):!1};Je.prototype.isExcluded=function(t,e){return this.state.isExcludeRefined(t,e)};Je.prototype.isDisjunctiveRefined=function(t,e){return this.state.isDisjunctiveFacetRefined(t,e)};Je.prototype.hasTag=function(t){return this.state.isTagRefined(t)};Je.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)};Je.prototype.getIndex=function(){return this.state.index};function iV(){return this.state.page}Je.prototype.getCurrentPage=iV;Je.prototype.getPage=iV;Je.prototype.getTags=function(){return this.state.tagRefinements};Je.prototype.getRefinements=function(t){var e=[];if(this.state.isConjunctiveFacet(t)){var n=this.state.getConjunctiveRefinements(t);n.forEach(function(o){e.push({value:o,type:"conjunctive"})});var r=this.state.getExcludeRefinements(t);r.forEach(function(o){e.push({value:o,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(t)){var s=this.state.getDisjunctiveRefinements(t);s.forEach(function(o){e.push({value:o,type:"disjunctive"})})}var a=this.state.getNumericRefinements(t);return Object.keys(a).forEach(function(o){var l=a[o];e.push({value:l,operator:o,type:"numeric"})}),e};Je.prototype.getNumericRefinement=function(t,e){return this.state.getNumericRefinement(t,e)};Je.prototype.getHierarchicalFacetBreadcrumb=function(t){return this.state.getHierarchicalFacetBreadcrumb(t)};Je.prototype._search=function(t){var e=this.state,n=[],r=[];t.onlyWithDerivedHelpers||(r=Bh._getQueries(e.index,e),n.push({state:e,queriesCount:r.length,helper:this}),this.emit("search",{state:e,results:this.lastResults}));var s=this.derivedHelpers.map(function(l){var u=l.getModifiedState(e),d=u.index?Bh._getQueries(u.index,u):[];return n.push({state:u,queriesCount:d.length,helper:l}),l.emit("search",{state:u,results:l.lastResults}),d}),a=Array.prototype.concat.apply(r,s),o=this._queryId++;if(this._currentNbQueries++,!a.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,n,o));try{this.client.search(a).then(this._dispatchAlgoliaResponse.bind(this,n,o)).catch(this._dispatchAlgoliaError.bind(this,o))}catch(l){this.emit("error",{error:l})}};Je.prototype._dispatchAlgoliaResponse=function(t,e,n){if(!(e<this._lastQueryIdReceived)){this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this._currentNbQueries===0&&this.emit("searchQueueEmpty");var r=n.results.slice();t.forEach(function(s){var a=s.state,o=s.queriesCount,l=s.helper,u=r.splice(0,o);if(!a.index){l.emit("result",{results:null,state:a});return}l.lastResults=new Yj(a,u),l.emit("result",{results:l.lastResults,state:a})})}};Je.prototype._dispatchAlgoliaError=function(t,e){t<this._lastQueryIdReceived||(this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,this.emit("error",{error:e}),this._currentNbQueries===0&&this.emit("searchQueueEmpty"))};Je.prototype.containsRefinement=function(t,e,n,r){return t||e.length!==0||n.length!==0||r.length!==0};Je.prototype._hasDisjunctiveRefinements=function(t){return this.state.disjunctiveRefinements[t]&&this.state.disjunctiveRefinements[t].length>0};Je.prototype._change=function(t){var e=t.state,n=t.isPageReset;e!==this.state&&(this.state=e,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:n}))};Je.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this};Je.prototype.setClient=function(t){return this.client===t?this:(typeof t.addAlgoliaAgent=="function"&&t.addAlgoliaAgent("JS Helper ("+rV+")"),this.client=t,this)};Je.prototype.getClient=function(){return this.client};Je.prototype.derive=function(t){var e=new Ype(this,t);return this.derivedHelpers.push(e),e};Je.prototype.detachDerivedHelper=function(t){var e=this.derivedHelpers.indexOf(t);if(e===-1)throw new Error("Derived helper already detached");this.derivedHelpers.splice(e,1)};Je.prototype.hasPendingRequests=function(){return this._currentNbQueries>0};var rge=Je,aV=rge,sge=q9,ige=tV;function iv(t,e,n){return new aV(t,e,n)}iv.version=nV;iv.AlgoliaSearchHelper=aV;iv.SearchParameters=sge;iv.SearchResults=ige;var age=iv;const Zi=Go(age);function zn(){}function oge(t){return Object.prototype.toString.call(t).slice(8,-1)}function eo(t,e){if(t===void 0||typeof t!="function")throw new Error("The render function is not valid (received type ".concat(oge(t),`).

`).concat(e))}function OI(t){var e=t.helper,n=t.attributesToClear,r=n===void 0?[]:n,s=e.state.setPage(0);return s=r.reduce(function(a,o){return s.isNumericRefined(o)?a.removeNumericRefinement(o):s.isHierarchicalFacet(o)?a.removeHierarchicalFacetRefinement(o):s.isDisjunctiveFacet(o)?a.removeDisjunctiveFacetRefinement(o):s.isConjunctiveFacet(o)?a.removeFacetRefinement(o):a},s),r.indexOf("query")!==-1&&(s=s.setQuery("")),s}var lge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oV=/[&<>"']/g,cge=RegExp(oV.source);function uge(t){return t&&cge.test(t)?t.replace(oV,function(e){return lge[e]}):t}var dge={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},lV=/&(amp|quot|lt|gt|#39);/g,hge=RegExp(lV.source);function fge(t){return t&&hge.test(t)?t.replace(lV,function(e){return dge[e]}):t}function Jj(t){"@babel/helpers - typeof";return Jj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jj(t)}function mge(t){return t===null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function pge(t){return Jj(t)==="object"&&t!==null}function cV(t){if(!pge(t)||mge(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function $p(t){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(t)}function gge(t){if(t==null)throw new TypeError("Cannot destructure "+t)}function Xj(){return Xj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xj.apply(this,arguments)}function MI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MI(Object(n),!0).forEach(function(r){uV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uV(t,e,n){return e=vge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vge(t){var e=yge(t,"string");return $p(e)==="symbol"?e:String(e)}function yge(t,e){if($p(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($p(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wh={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},is={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function dV(t){return uge(t).replace(new RegExp(Wh.highlightPreTag,"g"),is.highlightPreTag).replace(new RegExp(Wh.highlightPostTag,"g"),is.highlightPostTag)}function N0(t){return cV(t)&&typeof t.value!="string"?Object.keys(t).reduce(function(e,n){return qd(qd({},e),{},uV({},n,N0(t[n])))},{}):Array.isArray(t)?t.map(N0):qd(qd({},t),{},{value:dV(t.value)})}function xge(t){return t.__escaped===void 0&&(t=t.map(function(e){var n=Xj({},(gge(e),e));return n._highlightResult&&(n._highlightResult=N0(n._highlightResult)),n._snippetResult&&(n._snippetResult=N0(n._snippetResult)),n}),t.__escaped=!0),t}function wge(t){return t.map(function(e){return qd(qd({},e),{},{highlighted:dV(e.highlighted)})})}function hV(t){var e=is.highlightPreTag,n=is.highlightPostTag;return t.map(function(r){return r.isHighlighted?e+r.value+n:r.value}).join("")}function bge(t,e,n){return t.state.isHierarchicalFacet(e)?t.state.isHierarchicalFacetRefined(e,n):t.state.isConjunctiveFacet(e)?t.state.isFacetRefined(e,n):t.state.isDisjunctiveFacetRefined(e,n)}function eN(t){"@babel/helpers - typeof";return eN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eN(t)}function _ge(t,e){return Ege(t)||Sge(t,e)||Nge(t,e)||jge()}function jge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nge(t,e){if(t){if(typeof t=="string")return DI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DI(t,e)}}function DI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Ege(t){if(Array.isArray(t))return t}function Pge(t){var e=t.instantSearchInstance,n=t.helper,r=t.attribute,s=t.widgetType,a=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var h=u[1],m=u[2],p=m===void 0?"Filter Applied":m,y=u[0].split(":"),j=_ge(y,2),_=j[0],N=j[1],b=typeof r=="string"?r:r(h);u.length===1&&eN(u[0])==="object"?e.sendEventToInsights(u[0]):_==="click"&&(u.length===2||u.length===3)&&(bge(n,b,h)||e.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:s,eventType:_,eventModifier:N,payload:{eventName:p,index:n.getIndex(),filters:["".concat(b,":").concat(h)]},attribute:b}))};return a}function fV(t){return btoa(encodeURIComponent(JSON.stringify(t)))}function Cge(t,e){return Ige(t)||kge(t,e)||Rge(t,e)||Tge()}function Tge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rge(t,e){if(t){if(typeof t=="string")return LI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LI(t,e)}}function LI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Ige(t){if(Array.isArray(t))return t}function tN(t){"@babel/helpers - typeof";return tN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tN(t)}function Age(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,n=[],r=0;r<Math.ceil(t.length/e);r++)n.push(t.slice(r*e,(r+1)*e));return n}function mV(t){var e=t.index,n=t.widgetType;t.methodName;var r=t.args,s=t.instantSearchInstance;if(r.length===1&&tN(r[0])==="object")return[r[0]];var a=r[0].split(":"),o=Cge(a,2),l=o[0],u=o[1],d=r[1],h=r[2];if(!d)return[];if((l==="click"||l==="conversion")&&!h)return[];var m=Array.isArray(d)?d:[d];if(m.length===0)return[];var p=m[0].__queryID,y=Age(m),j=y.map(function(N){return N.map(function(b){return b.objectID})}),_=y.map(function(N){return N.map(function(b){return b.__position})});return l==="view"?s.status!=="idle"?[]:y.map(function(N,b){return{insightsMethod:"viewedObjectIDs",widgetType:n,eventType:l,payload:{eventName:h||"Hits Viewed",index:e,objectIDs:j[b]},hits:N,eventModifier:u}}):l==="click"?y.map(function(N,b){return{insightsMethod:"clickedObjectIDsAfterSearch",widgetType:n,eventType:l,payload:{eventName:h||"Hit Clicked",index:e,queryID:p,objectIDs:j[b],positions:_[b]},hits:N,eventModifier:u}}):l==="conversion"?y.map(function(N,b){return{insightsMethod:"convertedObjectIDsAfterSearch",widgetType:n,eventType:l,payload:{eventName:h||"Hit Converted",index:e,queryID:p,objectIDs:j[b]},hits:N,eventModifier:u}}):[]}function Oge(t){var e=t.instantSearchInstance,n=t.index,r=t.widgetType,s={},a=void 0,o=function(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];var m=mV({widgetType:r,index:n,methodName:"sendEvent",args:d,instantSearchInstance:e});m.forEach(function(p){p.eventType==="click"&&p.eventModifier==="internal"&&s[p.eventType]||(s[p.eventType]=!0,e.sendEventToInsights(p))}),clearTimeout(a),a=setTimeout(function(){s={}},0)};return o}function Mge(t){var e=t.index,n=t.widgetType,r=t.instantSearchInstance,s=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=mV({widgetType:n,index:e,methodName:"bindEvent",args:l,instantSearchInstance:r});return d.length?"data-insights-event=".concat(fV(d)):""};return s}function Iu(t){return t.$$type==="ais.index"}function nN(t,e){var n=t[e.getIndexId()]||{};e.getHelper().setState(e.getWidgetSearchParameters(e.getHelper().state,{uiState:n})),e.getWidgets().filter(Iu).forEach(function(r){return nN(t,r)})}var Dge=Promise.resolve();function lm(t){var e=null,n=!1,r=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];e===null&&(e=Dge.then(function(){if(e=null,n){n=!1;return}t.apply(void 0,o)}))};return r.wait=function(){if(e===null)throw new Error("The deferred function should be called before calling `wait()`");return e},r.cancel=function(){e!==null&&(n=!0)},r}function Lge(t){var e=t.name,n=t.connector,r=n===void 0?!1:n;return["https://www.algolia.com/doc/api-reference/widgets/",e,"/js/",r?"#connector":""].join("")}function ri(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.map(function(s){return Lge(s)}).join(", ");return function(s){return[s,"See documentation: ".concat(r)].filter(Boolean).join(`

`)}}function Fge(t){return typeof t=="string"?t.replace(/^\\-/,"-"):t}function Sm(t){return typeof t=="number"&&t<0||typeof t=="string"?String(t).replace(/^-/,"\\-"):t}function Au(t,e){for(var n,r=0;r<t.length;r++)if(n=t[r],e(n,r,t))return n}function $ge(t,e){if(!Array.isArray(t))return-1;for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}function Vge(t){if(t.transporter){var e=t.transporter,n=e.headers,r=e.queryParameters,s="x-algolia-application-id",a="x-algolia-api-key",o=n[s]||r[s],l=n[a]||r[a];return[o,l]}else return[t.applicationID,t.apiKey]}function pV(t){var e=is.highlightPostTag,n=is.highlightPreTag,r=t.split(n),s=r.shift(),a=s?[{value:s,isHighlighted:!1}]:[];return r.forEach(function(o){var l=o.split(e);a.push({value:l[0],isHighlighted:!0}),l[1]!==""&&a.push({value:l[1],isHighlighted:!1})}),a}var zge=new RegExp(/\w/i);function Uge(t,e){var n,r,s=t[e],a=((n=t[e+1])===null||n===void 0?void 0:n.isHighlighted)||!0,o=((r=t[e-1])===null||r===void 0?void 0:r.isHighlighted)||!0;return!zge.test(fge(s.value))&&o===a?o:s.isHighlighted}function rb(t,e){var n=Array.isArray(e)?e:e.split(".");return n.reduce(function(r,s){return r&&r[s]},t)}function M_(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],a={type:e,attribute:n,name:r,escapedValue:Sm(r)},o=Au(s,function(y){return y.name===n}),l;if(e==="hierarchical"){for(var u=t.getHierarchicalFacetByName(n),d=r.split(u.separator),h=function(j){return function(_){return j[_]}},m=function(j){o=o&&o.data&&Au(Object.keys(o.data).map(h(o.data)),function(_){return _.name===d[j]})},p=0;o!==void 0&&p<d.length;++p)m(p);l=o&&o.count}else l=o&&o.data&&o.data[a.name];return l!==void 0&&(a.count=l),o&&o.exhaustive!==void 0&&(a.exhaustive=o.exhaustive),a}function gV(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=[],s=e.facetsRefinements,a=s===void 0?{}:s,o=e.facetsExcludes,l=o===void 0?{}:o,u=e.disjunctiveFacetsRefinements,d=u===void 0?{}:u,h=e.hierarchicalFacetsRefinements,m=h===void 0?{}:h,p=e.numericRefinements,y=p===void 0?{}:p,j=e.tagRefinements,_=j===void 0?[]:j;return Object.keys(a).forEach(function(N){var b=a[N];b.forEach(function(x){r.push(M_(e,"facet",N,x,t.facets))})}),Object.keys(l).forEach(function(N){var b=l[N];b.forEach(function(x){r.push({type:"exclude",attribute:N,name:x,exclude:!0})})}),Object.keys(d).forEach(function(N){var b=d[N];b.forEach(function(x){r.push(M_(e,"disjunctive",N,Fge(x),t.disjunctiveFacets))})}),Object.keys(m).forEach(function(N){var b=m[N];b.forEach(function(x){r.push(M_(e,"hierarchical",N,x,t.hierarchicalFacets))})}),Object.keys(y).forEach(function(N){var b=y[N];Object.keys(b).forEach(function(x){var S=x,C=b[S],R=Array.isArray(C)?C:[C];R.forEach(function(z){r.push({type:"numeric",attribute:N,name:"".concat(z),numericValue:z,operator:S})})})}),_.forEach(function(N){r.push({type:"tag",attribute:"_tags",name:N})}),n&&e.query&&e.query.trim()&&r.push({attribute:"query",type:"query",name:e.query,query:e.query}),r}function Vp(t){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vp(t)}function FI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $I(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FI(Object(n),!0).forEach(function(r){Bge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bge(t,e,n){return e=Wge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wge(t){var e=Hge(t,"string");return Vp(e)==="symbol"?e:String(e)}function Hge(t,e){if(Vp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qge(t,e,n){return t.map(function(r,s){return $I($I({},r),{},{__position:n*e+s+1})})}function zp(t){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(t)}function VI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function zI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VI(Object(n),!0).forEach(function(r){Gge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gge(t,e,n){return e=Kge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kge(t){var e=Zge(t,"string");return zp(e)==="symbol"?e:String(e)}function Zge(t,e){if(zp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qge(t,e){return e?t.map(function(n){return zI(zI({},n),{},{__queryID:e})}):t}function UI(t){return t!==Object(t)}function vV(t,e){if(t===e)return!0;if(UI(t)||UI(e)||typeof t=="function"||typeof e=="function")return t===e;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n=0,r=Object.keys(t);n<r.length;n++){var s=r[n];if(!(s in e)||!vV(t[s],e[s]))return!1}return!0}function un(t){return typeof t=="number"&&isFinite(t)}function yV(t){return t.filter(function(e,n,r){return r.indexOf(e)===n})}function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(t)}var Yge=["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"];function BI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Za(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BI(Object(n),!0).forEach(function(r){Jge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jge(t,e,n){return e=Xge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xge(t){var e=eve(t,"string");return Up(e)==="symbol"?e:String(e)}function eve(t,e){if(Up(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Up(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tve(t,e){if(t==null)return{};var n=nve(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nve(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var rve=function(e,n){n.facets,n.disjunctiveFacets,n.facetsRefinements,n.facetsExcludes,n.disjunctiveFacetsRefinements,n.numericRefinements,n.tagRefinements,n.hierarchicalFacets,n.hierarchicalFacetsRefinements,n.ruleContexts;var r=tve(n,Yge);return e.setQueryParameters(r)},sve=function(e,n){return n.facets.reduce(function(r,s){return r.addFacet(s)},e)},ive=function(e,n){return n.disjunctiveFacets.reduce(function(r,s){return r.addDisjunctiveFacet(s)},e)},ave=function(e,n){return e.setQueryParameters({hierarchicalFacets:n.hierarchicalFacets.reduce(function(r,s){var a=$ge(r,function(l){return l.name===s.name});if(a===-1)return r.concat(s);var o=r.slice();return o.splice(a,1,s),o},e.hierarchicalFacets)})},ove=function(e,n){return n.tagRefinements.reduce(function(r,s){return r.addTagRefinement(s)},e)},lve=function(e,n){return e.setQueryParameters({facetsRefinements:Za(Za({},e.facetsRefinements),n.facetsRefinements)})},cve=function(e,n){return e.setQueryParameters({facetsExcludes:Za(Za({},e.facetsExcludes),n.facetsExcludes)})},uve=function(e,n){return e.setQueryParameters({disjunctiveFacetsRefinements:Za(Za({},e.disjunctiveFacetsRefinements),n.disjunctiveFacetsRefinements)})},dve=function(e,n){return e.setQueryParameters({numericRefinements:Za(Za({},e.numericRefinements),n.numericRefinements)})},hve=function(e,n){return e.setQueryParameters({hierarchicalFacetsRefinements:Za(Za({},e.hierarchicalFacetsRefinements),n.hierarchicalFacetsRefinements)})},fve=function(e,n){var r=yV([].concat(e.ruleContexts).concat(n.ruleContexts).filter(Boolean));return r.length>0?e.setQueryParameters({ruleContexts:r}):e},Km=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce(function(s,a){var o=hve(s,a),l=ave(o,a),u=ove(l,a),d=dve(u,a),h=uve(d,a),m=cve(h,a),p=lve(m,a),y=ive(p,a),j=fve(y,a),_=sve(j,a);return rve(_,a)})};function mve(t){return yve(t)||vve(t)||gve(t)||pve()}function pve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gve(t,e){if(t){if(typeof t=="string")return rN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rN(t,e)}}function vve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yve(t){if(Array.isArray(t))return rN(t)}function rN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WI(t){var e=t.start,n=e===void 0?0:e,r=t.end,s=t.step,a=s===void 0?1:s,o=a===0?1:a,l=Math.round((r-n)/o);return mve(Array(l)).map(function(u,d){return n+d*o})}function Em(t,e,n){var r=e.getHelper();return{uiState:n,helper:r,parent:e,instantSearchInstance:t,state:r.state,renderState:t.renderState,templatesConfig:t.templatesConfig,createURL:e.createURL,scopedResults:[],searchMetadata:{isSearchStalled:t.status==="stalled"},status:t.status,error:t.error}}function HI(t,e){var n=e.getResults(),r=e.getHelper();return{helper:r,parent:e,instantSearchInstance:t,results:n,scopedResults:e.getScopedResults(),state:n?n._state:r.state,renderState:t.renderState,templatesConfig:t.templatesConfig,createURL:e.createURL,searchMetadata:{isSearchStalled:t.status==="stalled"},status:t.status,error:t.error}}function xve(t){for(var e=t.getParent(),n=[t.getHelper().state];e!==null;)n=[e.getHelper().state].concat(n),e=e.getParent();return n}function Bp(t){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(t)}function qI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function vy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qI(Object(n),!0).forEach(function(r){wve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wve(t,e,n){return e=bve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bve(t){var e=_ve(t,"string");return Bp(e)==="symbol"?e:String(e)}function _ve(t,e){if(Bp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xV(t){return t.some(function(e){return e.isHighlighted})?t.map(function(e,n){return vy(vy({},e),{},{isHighlighted:!Uge(t,n)})}):t.map(function(e){return vy(vy({},e),{},{isHighlighted:!1})})}function Rl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{fallback:function(){}},n=e.fallback;return typeof window>"u"?n():t({window})}function D_(t){return Array.isArray(t)?t:[t]}function Wp(t){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(t)}function GI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GI(Object(n),!0).forEach(function(r){wV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wV(t,e,n){return e=jve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jve(t){var e=Nve(t,"string");return Wp(e)==="symbol"?e:String(e)}function Nve(t,e){if(Wp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sve=ri({name:"configure",connector:!0});function KI(t,e){return t.setQueryParameters(Object.keys(e.searchParameters).reduce(function(n,r){return _r(_r({},n),{},wV({},r,void 0))},{}))}var Eve=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zn,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return function(r){if(!r||!cV(r.searchParameters))throw new Error(Sve("The `searchParameters` option expects an object."));var s={};function a(o){return function(l){var u=KI(o.state,r),d=Km(u,new Zi.SearchParameters(l));r.searchParameters=l,o.setState(d).search()}}return{$$type:"ais.configure",init:function(l){var u=l.instantSearchInstance;e(_r(_r({},this.getWidgetRenderState(l)),{},{instantSearchInstance:u}),!0)},render:function(l){var u=l.instantSearchInstance;e(_r(_r({},this.getWidgetRenderState(l)),{},{instantSearchInstance:u}),!1)},dispose:function(l){var u=l.state;return n(),KI(u,r)},getRenderState:function(l,u){var d,h=this.getWidgetRenderState(u);return _r(_r({},l),{},{configure:_r(_r({},h),{},{widgetParams:_r(_r({},h.widgetParams),{},{searchParameters:Km(new Zi.SearchParameters((d=l.configure)===null||d===void 0?void 0:d.widgetParams.searchParameters),new Zi.SearchParameters(h.widgetParams.searchParameters)).getQueryParams()})})})},getWidgetRenderState:function(l){var u=l.helper;return s.refine||(s.refine=a(u)),{refine:s.refine,widgetParams:r}},getWidgetSearchParameters:function(l,u){var d=u.uiState;return Km(l,new Zi.SearchParameters(_r(_r({},d.configure),r.searchParameters)))},getWidgetUiState:function(l){return _r(_r({},l),{},{configure:_r(_r({},l.configure),r.searchParameters)})}}}};function sN(t){"@babel/helpers - typeof";return sN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sN(t)}var ZI=Object.prototype.hasOwnProperty;function Hp(t,e,n){if(n!=null&&n(t,e))return!0;var r,s;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((s=t.length)===e.length)for(;s--&&Hp(t[s],e[s],n););return s===-1}if(!r||sN(t)==="object"){s=0;for(r in t)if(ZI.call(t,r)&&++s&&!ZI.call(e,r)||!(r in e)||!Hp(t[r],e[r],n))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}function QI(t){var e,n,r;return new Zi.SearchResults(t,[{query:(e=t.query)!==null&&e!==void 0?e:"",page:(n=t.page)!==null&&n!==void 0?n:0,hitsPerPage:(r=t.hitsPerPage)!==null&&r!==void 0?r:20,hits:[],nbHits:0,nbPages:0,params:"",exhaustiveNbHits:!0,exhaustiveFacetsCount:!0,processingTimeMS:0,index:t.index}],{__isArtificial:!0})}function qp(t){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qp(t)}function YI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function JI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YI(Object(n),!0).forEach(function(r){Pve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pve(t,e,n){return e=Cve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cve(t){var e=Tve(t,"string");return qp(e)==="symbol"?e:String(e)}function Tve(t,e){if(qp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rve(t){var e=t.getHelper(),n=t.getResults()||QI(e.state),r=t.getScopedResults().map(function(s){var a=s.indexId===t.getIndexId()?n:QI(s.helper.state);return JI(JI({},s),{},{results:s.results||a})});return{results:n,scopedResults:r}}function bV(t,e){if(!t)throw new Error("Invariant failed")}var _V=w.createContext(null);function kve(){var t=w.useContext(_V);return bV(t!==null),t}var jV=w.createContext(null);function NV(){var t=w.useContext(jV);return bV(t!==null),t}var Ive=w.createContext(null);function SV(){return w.useContext(Ive)}function Ave(t,e){return Lve(t)||Dve(t,e)||Mve(t,e)||Ove()}function Ove(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mve(t,e){if(t){if(typeof t=="string")return XI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XI(t,e)}}function XI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dve(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Lve(t){if(Array.isArray(t))return t}function eA(t){var e=w.useState(function(){return t}),n=Ave(e,2),r=n[0],s=n[1];return Hp(r,t)||s(t),r}var Fve=typeof window<"u"?w.useLayoutEffect:w.useEffect;function $ve(t){var e=t.widget,n=t.parentIndex,r=t.props,s=t.shouldSsr,a=w.useRef(r);w.useEffect(function(){a.current=r},[r]);var o=w.useRef(e);w.useEffect(function(){o.current=e},[e]);var l=w.useRef(null),u=s&&!n.getWidgets().includes(e),d=NV();Fve(function(){var h=o.current;if(!l.current)u||n.addWidgets([e]);else{clearTimeout(l.current);var m=Hp(r,a.current);m||(n.removeWidgets([h]),n.addWidgets([e]))}return function(){l.current=setTimeout(function(){d._schedule(function(){d._preventWidgetCleanup||n.removeWidgets([h])})})}},[n,e,u,d,r]),u&&n.addWidgets([e])}function Gp(t){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gp(t)}var Vve=["instantSearchInstance","widgetParams"],zve=["widgetParams"];function Uve(t,e){return qve(t)||Hve(t,e)||Wve(t,e)||Bve()}function Bve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wve(t,e){if(t){if(typeof t=="string")return tA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tA(t,e)}}function tA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hve(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function qve(t){if(Array.isArray(t))return t}function nA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function rA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nA(Object(n),!0).forEach(function(r){Gve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gve(t,e,n){return e=Kve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kve(t){var e=Zve(t,"string");return Gp(e)==="symbol"?e:String(e)}function Zve(t,e){if(Gp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sA(t,e){if(t==null)return{};var n=Qve(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Qve(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ha(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=SV(),s=NV(),a=kve(),o=eA(e),l=eA(n),u=w.useRef(!0),d=w.useRef(null),h=w.useRef(s.status),m=w.useMemo(function(){var N=t(function(b,x){if(x){u.current=!0;return}if(u.current){var S=b.instantSearchInstance;b.widgetParams;var C=sA(b,Vve);(!Hp(C,d.current,function(R,z){return(R==null?void 0:R.constructor)===Function&&(z==null?void 0:z.constructor)===Function})||S.status!==h.current)&&(_(C),d.current=C,h.current=S.status)}},function(){u.current=!1});return rA(rA({},N(o)),l)},[t,o,l]),p=w.useState(function(){if(m.getWidgetRenderState){var N,b=a.getHelper(),x=a.getWidgetUiState({})[a.getIndexId()];b.state=((N=m.getWidgetSearchParameters)===null||N===void 0?void 0:N.call(m,b.state,{uiState:x}))||b.state;var S=Rve(a),C=S.results,R=S.scopedResults,z=m.getWidgetRenderState({helper:b,parent:a,instantSearchInstance:s,results:C,scopedResults:R,state:b.state,renderState:s.renderState,templatesConfig:s.templatesConfig,createURL:a.createURL,searchMetadata:{isSearchStalled:s.status==="stalled"},status:s.status,error:s.error});z.widgetParams;var k=sA(z,zve);return k}return{}}),y=Uve(p,2),j=y[0],_=y[1];return $ve({widget:m,parentIndex:a,props:o,shouldSsr:!!r}),j}function Yve(t,e){return ha(Eve,{searchParameters:t},e)}function Jve(t){return Yve(t,{$$widgetType:"ais.configure"}),null}function Kp(t){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(t)}var Xve=["initialSearchParameters"];function iA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Na(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iA(Object(n),!0).forEach(function(r){Gd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gd(t,e,n){return e=eye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eye(t){var e=tye(t,"string");return Kp(e)==="symbol"?e:String(e)}function tye(t,e){if(Kp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EV(t){return iye(t)||sye(t)||rye(t)||nye()}function nye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rye(t,e){if(t){if(typeof t=="string")return iN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iN(t,e)}}function sye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iye(t){if(Array.isArray(t))return iN(t)}function iN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aye(t,e){if(t==null)return{};var n=oye(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oye(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var cm=ri({name:"index-widget"});function PV(t,e){var n=e.state,r=e.isPageReset,s=e._uiState;n!==t.state&&(t.state=n,t.emit("change",{state:t.state,results:t.lastResults,isPageReset:r,_uiState:s}))}function yy(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.reduce(function(r,s){return Iu(s)||!s.getWidgetUiState&&!s.getWidgetState?r:s.getWidgetUiState?s.getWidgetUiState(r,e):s.getWidgetState(r,e)},n)}function xy(t,e){var n=e.initialSearchParameters,r=aye(e,Xve);return t.filter(function(s){return!Iu(s)}).reduce(function(s,a){return a.getWidgetSearchParameters?a.getWidgetSearchParameters(s,r):s},n)}function CV(t){var e=t.filter(Iu);e.length!==0&&e.forEach(function(n){var r=n.getHelper();PV(r,{state:r.state.resetPage(),isPageReset:!0}),CV(n.getWidgets())})}function TV(t){var e=t.filter(Iu);return e.reduce(function(n,r){return n.concat.apply(n,[{indexId:r.getIndexId(),results:r.getResults(),helper:r.getHelper()}].concat(EV(TV(r.getWidgets()))))},[])}var lye=function(e){if(e===void 0||e.indexName===void 0)throw new Error(cm("The `indexName` option is required."));var n=e.indexName,r=e.indexId,s=r===void 0?n:r,a=[],o={},l=null,u=null,d=null,h=null,m=null;return{$$type:"ais.index",$$widgetType:"ais.index",getIndexName:function(){return n},getIndexId:function(){return s},getHelper:function(){return d},getResults:function(){var y;return(y=h)!==null&&y!==void 0&&y.lastResults?(h.lastResults._state=d.state,h.lastResults):null},getPreviousState:function(){return m},getScopedResults:function(){var y=this.getParent(),j=y?y.getWidgets():[this];return TV(j)},getParent:function(){return u},createURL:function(y){return typeof y=="function"?l._createURL(Gd({},s,y(o))):l._createURL(Gd({},s,yy(a,{searchParameters:y,helper:d})))},getWidgets:function(){return a},addWidgets:function(y){var j=this;if(!Array.isArray(y))throw new Error(cm("The `addWidgets` method expects an array of widgets."));if(y.some(function(_){return typeof _.init!="function"&&typeof _.render!="function"}))throw new Error(cm("The widget definition expects a `render` and/or an `init` method."));return a=a.concat(y),l&&y.length&&(PV(d,{state:xy(a,{uiState:o,initialSearchParameters:d.state}),_uiState:o}),y.forEach(function(_){if(_.getRenderState){var N=_.getRenderState(l.renderState[j.getIndexId()]||{},Em(l,j,l._initialUiState));L_({renderState:N,instantSearchInstance:l,parent:j})}}),y.forEach(function(_){_.init&&_.init(Em(l,j,l._initialUiState))}),l.scheduleSearch()),this},removeWidgets:function(y){var j=this;if(!Array.isArray(y))throw new Error(cm("The `removeWidgets` method expects an array of widgets."));if(y.some(function(N){return typeof N.dispose!="function"}))throw new Error(cm("The widget definition expects a `dispose` method."));if(a=a.filter(function(N){return y.indexOf(N)===-1}),l&&y.length){var _=y.reduce(function(N,b){var x=b.dispose({helper:d,state:N,parent:j});return x||N},d.state);o=yy(a,{searchParameters:_,helper:d}),d.setState(xy(a,{uiState:o,initialSearchParameters:_})),a.length&&l.scheduleSearch()}return this},init:function(y){var j=this,_,N=y.instantSearchInstance,b=y.parent,x=y.uiState;if(d===null){l=N,u=b,o=x[s]||{};var S=N.mainHelper,C=xy(a,{uiState:o,initialSearchParameters:new Zi.SearchParameters({index:n})});d=Zi({},C.index,C),d.search=function(){return N.onStateChange?(N.onStateChange({uiState:N.mainIndex.getWidgetUiState({}),setUiState:function(I){return N.setUiState(I,!1)}}),S):S.search()},d.searchWithoutTriggeringOnStateChange=function(){return S.search()},d.searchForFacetValues=function(k,I,V,T){var O=d.state.setQueryParameters(T);return S.searchForFacetValues(k,I,V,O)},h=S.derive(function(){return Km.apply(void 0,EV(xve(j)))});var R=(_=N._initialResults)===null||_===void 0?void 0:_[this.getIndexId()];if(R){var z=new Zi.SearchResults(new Zi.SearchParameters(R.state),R.results);h.lastResults=z,d.lastResults=z}d.on("change",function(k){var I=k.isPageReset;I&&CV(a)}),h.on("search",function(){N.scheduleStalledRender()}),h.on("result",function(k){var I=k.results;N.scheduleRender(),d.lastResults=I,m=I==null?void 0:I._state}),a.forEach(function(k){if(k.getRenderState){var I=k.getRenderState(N.renderState[j.getIndexId()]||{},Em(N,j,x));L_({renderState:I,instantSearchInstance:N,parent:j})}}),a.forEach(function(k){k.init&&k.init(Em(N,j,x))}),d.on("change",function(k){var I=k.state,V=k._uiState;o=yy(a,{searchParameters:I,helper:d},V||{}),N.onStateChange||N.onInternalStateChange()}),R&&N.scheduleRender()}},render:function(y){var j=this,_=y.instantSearchInstance;_.status==="error"&&!_.mainHelper.hasPendingRequests()&&m&&d.setState(m);var N=this.getResults()?a:a.filter(Iu);N.forEach(function(b){if(b.getRenderState){var x=b.getRenderState(_.renderState[j.getIndexId()]||{},HI(_,j));L_({renderState:x,instantSearchInstance:_,parent:j})}}),N.forEach(function(b){b.render&&b.render(HI(_,j))})},dispose:function(){var y=this,j,_;a.forEach(function(N){N.dispose&&N.dispose({helper:d,state:d.state,parent:y})}),l=null,u=null,(j=d)===null||j===void 0||j.removeAllListeners(),d=null,(_=h)===null||_===void 0||_.detach(),h=null},getWidgetUiState:function(y){return a.filter(Iu).reduce(function(j,_){return _.getWidgetUiState(j)},Na(Na({},y),{},Gd({},s,Na(Na({},y[s]),o))))},getWidgetState:function(y){return this.getWidgetUiState(y)},getWidgetSearchParameters:function(y,j){var _=j.uiState;return xy(a,{uiState:_,initialSearchParameters:y})},refreshUiState:function(){o=yy(a,{searchParameters:this.getHelper().state,helper:this.getHelper()},o)},setIndexUiState:function(y){var j=typeof y=="function"?y(o):y;l.setUiState(function(_){return Na(Na({},_),{},Gd({},s,j))})}}};function L_(t){var e=t.renderState,n=t.instantSearchInstance,r=t.parent,s=r?r.getIndexId():n.mainIndex.getIndexId();n.renderState=Na(Na({},n.renderState),{},Gd({},s,Na(Na({},n.renderState[s]),e)))}function cye(t,e){return fye(t)||hye(t,e)||dye(t,e)||uye()}function uye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dye(t,e){if(t){if(typeof t=="string")return aA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aA(t,e)}}function aA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function fye(t){if(Array.isArray(t))return t}function mye(){var t=w.useReducer(function(r){return r+1},0),e=cye(t,2),n=e[1];return n}var pye=w.createContext(null);function gye(){return w.useContext(pye)}var vye="ais",sb=function(e){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.descendantName,s=n.modifierName,a=r?"-".concat(r):"",o=s?"--".concat(s):"";return"".concat(vye,"-").concat(e).concat(a).concat(o)}},yye=sb("Highlight");function xye(t){var e=t.attribute,n=t.highlightedTagName,r=n===void 0?"mark":n,s=t.hit,a=t.cssClasses,o=a===void 0?{}:a,l=rb(s._highlightResult,e),u=l||{},d=u.value,h=d===void 0?"":d,m=yye({descendantName:"highlighted"})+(o.highlighted?" ".concat(o.highlighted):"");return h.replace(new RegExp(is.highlightPreTag,"g"),"<".concat(r,' class="').concat(m,'">')).replace(new RegExp(is.highlightPostTag,"g"),"</".concat(r,">"))}var wye=sb("ReverseHighlight");function bye(t){var e=t.attribute,n=t.highlightedTagName,r=n===void 0?"mark":n,s=t.hit,a=t.cssClasses,o=a===void 0?{}:a,l=rb(s._highlightResult,e),u=l||{},d=u.value,h=d===void 0?"":d,m=wye({descendantName:"highlighted"})+(o.highlighted?" ".concat(o.highlighted):""),p=hV(xV(pV(h)));return p.replace(new RegExp(is.highlightPreTag,"g"),"<".concat(r,' class="').concat(m,'">')).replace(new RegExp(is.highlightPostTag,"g"),"</".concat(r,">"))}var _ye=sb("Snippet");function jye(t){var e=t.attribute,n=t.highlightedTagName,r=n===void 0?"mark":n,s=t.hit,a=t.cssClasses,o=a===void 0?{}:a,l=rb(s._snippetResult,e),u=l||{},d=u.value,h=d===void 0?"":d,m=_ye({descendantName:"highlighted"})+(o.highlighted?" ".concat(o.highlighted):"");return h.replace(new RegExp(is.highlightPreTag,"g"),"<".concat(r,' class="').concat(m,'">')).replace(new RegExp(is.highlightPostTag,"g"),"</".concat(r,">"))}var Nye=sb("ReverseSnippet");function Sye(t){var e=t.attribute,n=t.highlightedTagName,r=n===void 0?"mark":n,s=t.hit,a=t.cssClasses,o=a===void 0?{}:a,l=rb(s._snippetResult,e),u=l||{},d=u.value,h=d===void 0?"":d,m=Nye({descendantName:"highlighted"})+(o.highlighted?" ".concat(o.highlighted):""),p=hV(xV(pV(h)));return p.replace(new RegExp(is.highlightPreTag,"g"),"<".concat(r,' class="').concat(m,'">')).replace(new RegExp(is.highlightPostTag,"g"),"</".concat(r,">"))}function aN(t){"@babel/helpers - typeof";return aN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aN(t)}function Eye(t){var e=t.method,n=t.payload;if(aN(n)!=="object")throw new Error("The insights helper expects the payload to be an object.");var r;try{r=fV(n)}catch{throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(e,'" data-insights-payload="').concat(r,'"')}function Pye(t,e){return Eye({method:t,payload:e})}function oN(t){"@babel/helpers - typeof";return oN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oN(t)}var Cye="_ALGOLIA";function Tye(t){if(!((typeof document>"u"?"undefined":oN(document))!=="object"||typeof document.cookie!="string"))for(var e="".concat(t,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var s=n[r];s.charAt(0)===" ";)s=s.substring(1);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}}function Rye(){return Tye(Cye)}function Zp(t){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(t)}function oA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Fc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oA(Object(n),!0).forEach(function(r){kye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kye(t,e,n){return e=Iye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iye(t){var e=Aye(t,"string");return Zp(e)==="symbol"?e:String(e)}function Aye(t,e){if(Zp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ex(t,e){return Dye(t)||Mye(t,e)||RV(t,e)||Oye()}function Oye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Dye(t){if(Array.isArray(t))return t}function Lye(t){return Vye(t)||$ye(t)||RV(t)||Fye()}function Fye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RV(t,e){if(t){if(typeof t=="string")return lN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lN(t,e)}}function $ye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vye(t){if(Array.isArray(t))return lN(t)}function lN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var kV="2.6.0",zye="https://cdn.jsdelivr.net/npm/search-insights@".concat(kV,"/dist/search-insights.min.js");function Uye(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.insightsClient,n=t.insightsInitParams,r=t.onEvent,s=t.$$internal,a=s===void 0?!1:s,o=e;!e&&e!==null&&Rl(function(u){var d=u.window,h=d.AlgoliaAnalyticsObject||"aa";typeof h=="string"&&(o=d[h]),o||(d.AlgoliaAnalyticsObject=h,d[h]||(d[h]=function(){d[h].queue||(d[h].queue=[]);for(var m=arguments.length,p=new Array(m),y=0;y<m;y++)p[y]=arguments[y];d[h].queue.push(p)},d[h].version=kV,d[h].shouldAddScript=!0),o=d[h])});var l=o||zn;return function(u){var d=u.instantSearchInstance,h=d.middleware.filter(function(R){return R.instance.$$type==="ais.insights"&&R.instance.$$internal}).map(function(R){return R.creator});d.unuse.apply(d,Lye(h));var m=Vge(d.client),p=ex(m,2),y=p[0],j=p[1],_=void 0,N=void 0;if(Array.isArray(l.queue)){var b=Au(l.queue.slice().reverse(),function(R){var z=ex(R,1),k=z[0];return k==="setUserToken"})||[],x=ex(b,2);_=x[1]}l("getUserToken",null,function(R,z){N=z}),(n||!lA(l))&&l("init",Fc({appId:y,apiKey:j,partial:!0},n));var S,C;return{$$type:"ais.insights",$$internal:a,onStateChange:function(){},subscribe:function(){if(l.shouldAddScript){var z="[insights middleware]: could not load search-insights.js. Please load it manually following https://alg.li/insights-init";try{var k=document.createElement("script");k.async=!0,k.src=zye,k.onerror=function(){d.emit("error",new Error(z))},document.body.appendChild(k),l.shouldAddScript=!1}catch{l.shouldAddScript=!1,d.emit("error",new Error(z))}}},started:function(){l("addAlgoliaAgent","insights-middleware"),C=d.helper,S={userToken:C.state.userToken,clickAnalytics:C.state.clickAnalytics},C.overrideStateWithoutTriggeringChangeEvent(Fc(Fc({},C.state),{},{clickAnalytics:!0})),a||d.scheduleSearch();var z=function(T){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!T)return;var $=C.state.userToken;function M(){C.overrideStateWithoutTriggeringChangeEvent(Fc(Fc({},C.state),{},{userToken:T})),$&&$!==T&&d.scheduleSearch()}O?M():setTimeout(M,0)},k=Rye();k&&z(k,!0),N?(z(N,!0),l("setUserToken",N)):_&&(z(_,!0),l("setUserToken",_)),l("onUserTokenChange",z,{immediate:!0});var I=l;lA(l)&&(I=function(T,O){var $={headers:{"X-Algolia-Application-Id":y,"X-Algolia-API-Key":j}};return l(T,O,$)}),d.sendEventToInsights=function(V){r?r(V,I):V.insightsMethod&&(V.payload.algoliaSource=["instantsearch"],V.eventModifier==="internal"&&V.payload.algoliaSource.push("instantsearch-internal"),I(V.insightsMethod,V.payload))}},unsubscribe:function(){l("onUserTokenChange",void 0),d.sendEventToInsights=zn,C&&S&&(C.overrideStateWithoutTriggeringChangeEvent(Fc(Fc({},C.state),S)),d.scheduleSearch())}}}}function lA(t){var e=(t.version||"").split(".").map(Number),n=ex(e,2),r=n[0],s=n[1],a=r>=3,o=r===2&&s>=6,l=r===1&&s>=10;return a||o||l}function IV(t,e,n){var r=Em(e,e.mainIndex,e._initialUiState);t.forEach(function(s){var a={};if(s.getWidgetRenderState){var o=s.getWidgetRenderState(r);o&&o.widgetParams&&(a=o.widgetParams)}var l=Object.keys(a).filter(function(u){return a[u]!==void 0});n.widgets.push({type:s.$$type,widgetType:s.$$widgetType,params:l}),s.$$type==="ais.index"&&IV(s.getWidgets(),e,n)})}function Bye(){return Rl(function(t){var e,n,r=t.window;return((e=r.navigator)===null||e===void 0||(n=e.userAgent)===null||n===void 0?void 0:n.indexOf("Algolia Crawler"))>-1},{fallback:function(){return!1}})}function Wye(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.$$internal,n=e===void 0?!1:e;return function(r){var s=r.instantSearchInstance,a={widgets:[]},o=document.createElement("meta"),l=document.querySelector("head");return o.name="instantsearch:widgets",{$$type:"ais.metadata",$$internal:n,onStateChange:function(){},subscribe:function(){setTimeout(function(){var d=s.client;a.ua=d.transporter&&d.transporter.userAgent?d.transporter.userAgent.value:d._ua,IV(s.mainIndex.getWidgets(),s,a),s.middleware.forEach(function(h){return a.widgets.push({middleware:!0,type:h.instance.$$type,internal:h.instance.$$internal})}),o.content=JSON.stringify(a),l.appendChild(o)},0)},started:function(){},unsubscribe:function(){o.remove()}}}}var Hye=String.prototype.replace,qye=/%20/g,F_={RFC1738:"RFC1738",RFC3986:"RFC3986"},SP={default:F_.RFC3986,formatters:{RFC1738:function(t){return Hye.call(t,qye,"+")},RFC3986:function(t){return String(t)}},RFC1738:F_.RFC1738,RFC3986:F_.RFC3986},Gye=SP,$_=Object.prototype.hasOwnProperty,Hc=Array.isArray,ya=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Kye=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(Hc(r)){for(var s=[],a=0;a<r.length;++a)typeof r[a]<"u"&&s.push(r[a]);n.obj[n.prop]=s}}},AV=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},s=0;s<e.length;++s)typeof e[s]<"u"&&(r[s]=e[s]);return r},Zye=function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(Hc(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!$_.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var s=e;return Hc(e)&&!Hc(n)&&(s=AV(e,r)),Hc(e)&&Hc(n)?(n.forEach(function(a,o){if($_.call(e,o)){var l=e[o];l&&typeof l=="object"&&a&&typeof a=="object"?e[o]=t(l,a,r):e.push(a)}else e[o]=a}),e):Object.keys(n).reduce(function(a,o){var l=n[o];return $_.call(a,o)?a[o]=t(a[o],l,r):a[o]=l,a},s)},Qye=function(e,n){return Object.keys(n).reduce(function(r,s){return r[s]=n[s],r},e)},Yye=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},Jye=function(e,n,r,s,a){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var l="",u=0;u<o.length;++u){var d=o.charCodeAt(u);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||a===Gye.RFC1738&&(d===40||d===41)){l+=o.charAt(u);continue}if(d<128){l=l+ya[d];continue}if(d<2048){l=l+(ya[192|d>>6]+ya[128|d&63]);continue}if(d<55296||d>=57344){l=l+(ya[224|d>>12]+ya[128|d>>6&63]+ya[128|d&63]);continue}u+=1,d=65536+((d&1023)<<10|o.charCodeAt(u)&1023),l+=ya[240|d>>18]+ya[128|d>>12&63]+ya[128|d>>6&63]+ya[128|d&63]}return l},Xye=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],s=0;s<n.length;++s)for(var a=n[s],o=a.obj[a.prop],l=Object.keys(o),u=0;u<l.length;++u){var d=l[u],h=o[d];typeof h=="object"&&h!==null&&r.indexOf(h)===-1&&(n.push({obj:o,prop:d}),r.push(h))}return Kye(n),e},exe=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},txe=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},nxe=function(e,n){return[].concat(e,n)},rxe=function(e,n){if(Hc(e)){for(var r=[],s=0;s<e.length;s+=1)r.push(n(e[s]));return r}return n(e)},OV={arrayToObject:AV,assign:Qye,combine:nxe,compact:Xye,decode:Yye,encode:Jye,isBuffer:txe,isRegExp:exe,maybeMap:rxe,merge:Zye},cN=OV,Zm=SP,sxe=Object.prototype.hasOwnProperty,cA={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},eu=Array.isArray,ixe=String.prototype.split,axe=Array.prototype.push,MV=function(t,e){axe.apply(t,eu(e)?e:[e])},oxe=Date.prototype.toISOString,uA=Zm.default,kr={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:cN.encode,encodeValuesOnly:!1,format:uA,formatter:Zm.formatters[uA],indices:!1,serializeDate:function(e){return oxe.call(e)},skipNulls:!1,strictNullHandling:!1},lxe=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},cxe=function t(e,n,r,s,a,o,l,u,d,h,m,p,y,j){var _=e;if(typeof l=="function"?_=l(n,_):_ instanceof Date?_=h(_):r==="comma"&&eu(_)&&(_=cN.maybeMap(_,function(O){return O instanceof Date?h(O):O})),_===null){if(s)return o&&!y?o(n,kr.encoder,j,"key",m):n;_=""}if(lxe(_)||cN.isBuffer(_)){if(o){var N=y?n:o(n,kr.encoder,j,"key",m);if(r==="comma"&&y){for(var b=ixe.call(String(_),","),x="",S=0;S<b.length;++S)x+=(S===0?"":",")+p(o(b[S],kr.encoder,j,"value",m));return[p(N)+"="+x]}return[p(N)+"="+p(o(_,kr.encoder,j,"value",m))]}return[p(n)+"="+p(String(_))]}var C=[];if(typeof _>"u")return C;var R;if(r==="comma"&&eu(_))R=[{value:_.length>0?_.join(",")||null:void 0}];else if(eu(l))R=l;else{var z=Object.keys(_);R=u?z.sort(u):z}for(var k=0;k<R.length;++k){var I=R[k],V=typeof I=="object"&&typeof I.value<"u"?I.value:_[I];if(!(a&&V===null)){var T=eu(_)?typeof r=="function"?r(n,I):n:n+(d?"."+I:"["+I+"]");MV(C,t(V,T,r,s,a,o,l,u,d,h,m,p,y,j))}}return C},uxe=function(e){if(!e)return kr;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||kr.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Zm.default;if(typeof e.format<"u"){if(!sxe.call(Zm.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var s=Zm.formatters[r],a=kr.filter;return(typeof e.filter=="function"||eu(e.filter))&&(a=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:kr.addQueryPrefix,allowDots:typeof e.allowDots>"u"?kr.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:kr.charsetSentinel,delimiter:typeof e.delimiter>"u"?kr.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:kr.encode,encoder:typeof e.encoder=="function"?e.encoder:kr.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:kr.encodeValuesOnly,filter:a,format:r,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:kr.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:kr.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:kr.strictNullHandling}},dxe=function(t,e){var n=t,r=uxe(e),s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):eu(r.filter)&&(a=r.filter,s=a);var o=[];if(typeof n!="object"||n===null)return"";var l;e&&e.arrayFormat in cA?l=e.arrayFormat:e&&"indices"in e?l=e.indices?"indices":"repeat":l="indices";var u=cA[l];s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);for(var d=0;d<s.length;++d){var h=s[d];r.skipNulls&&n[h]===null||MV(o,cxe(n[h],h,u,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset))}var m=o.join(r.delimiter),p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""},Hh=OV,uN=Object.prototype.hasOwnProperty,hxe=Array.isArray,Rr={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Hh.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},fxe=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},DV=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},mxe="utf8=%26%2310003%3B",pxe="utf8=%E2%9C%93",gxe=function(e,n){var r={},s=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=n.parameterLimit===1/0?void 0:n.parameterLimit,o=s.split(n.delimiter,a),l=-1,u,d=n.charset;if(n.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===pxe?d="utf-8":o[u]===mxe&&(d="iso-8859-1"),l=u,u=o.length);for(u=0;u<o.length;++u)if(u!==l){var h=o[u],m=h.indexOf("]="),p=m===-1?h.indexOf("="):m+1,y,j;p===-1?(y=n.decoder(h,Rr.decoder,d,"key"),j=n.strictNullHandling?null:""):(y=n.decoder(h.slice(0,p),Rr.decoder,d,"key"),j=Hh.maybeMap(DV(h.slice(p+1),n),function(_){return n.decoder(_,Rr.decoder,d,"value")})),j&&n.interpretNumericEntities&&d==="iso-8859-1"&&(j=fxe(j)),h.indexOf("[]=")>-1&&(j=hxe(j)?[j]:j),uN.call(r,y)?r[y]=Hh.combine(r[y],j):r[y]=j}return r},vxe=function(t,e,n,r){for(var s=r?e:DV(e,n),a=t.length-1;a>=0;--a){var o,l=t[a];if(l==="[]"&&n.parseArrays)o=[].concat(s);else{o=n.plainObjects?Object.create(null):{};var u=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,d=parseInt(u,10);!n.parseArrays&&u===""?o={0:s}:!isNaN(d)&&l!==u&&String(d)===u&&d>=0&&n.parseArrays&&d<=n.arrayLimit?(o=[],o[d]=s):u!=="__proto__"&&(o[u]=s)}s=o}return s},yxe=function(e,n,r,s){if(e){var a=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,u=r.depth>0&&o.exec(a),d=u?a.slice(0,u.index):a,h=[];if(d){if(!r.plainObjects&&uN.call(Object.prototype,d)&&!r.allowPrototypes)return;h.push(d)}for(var m=0;r.depth>0&&(u=l.exec(a))!==null&&m<r.depth;){if(m+=1,!r.plainObjects&&uN.call(Object.prototype,u[1].slice(1,-1))&&!r.allowPrototypes)return;h.push(u[1])}return u&&h.push("["+a.slice(u.index)+"]"),vxe(h,n,r,s)}},xxe=function(e){if(!e)return Rr;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?Rr.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?Rr.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Rr.allowPrototypes,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Rr.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Rr.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Rr.comma,decoder:typeof e.decoder=="function"?e.decoder:Rr.decoder,delimiter:typeof e.delimiter=="string"||Hh.isRegExp(e.delimiter)?e.delimiter:Rr.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Rr.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Rr.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Rr.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Rr.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Rr.strictNullHandling}},wxe=function(t,e){var n=xxe(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?gxe(t,n):t,s=n.plainObjects?Object.create(null):{},a=Object.keys(r),o=0;o<a.length;++o){var l=a[o],u=yxe(l,r[l],n,typeof t=="string");s=Hh.merge(s,u,n)}return Hh.compact(s)},bxe=dxe,_xe=wxe,jxe=SP,Nxe={formats:jxe,parse:_xe,stringify:bxe};const dA=Go(Nxe);function Qp(t){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(t)}function Sxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Exe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LV(r.key),r)}}function Pxe(t,e,n){return e&&Exe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _s(t,e,n){return e=LV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LV(t){var e=Cxe(t,"string");return Qp(e)==="symbol"?e:String(e)}function Cxe(t,e){if(Qp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hA=function(e){e&&(window.document.title=e)},Txe=function(){function t(e){var n=this,r=e.windowTitle,s=e.writeDelay,a=s===void 0?400:s,o=e.createURL,l=e.parseURL,u=e.getLocation,d=e.start,h=e.dispose,m=e.push;Sxe(this,t),_s(this,"$$type","ais.browser"),_s(this,"windowTitle",void 0),_s(this,"writeDelay",void 0),_s(this,"_createURL",void 0),_s(this,"parseURL",void 0),_s(this,"getLocation",void 0),_s(this,"writeTimer",void 0),_s(this,"_onPopState",void 0),_s(this,"inPopState",!1),_s(this,"isDisposed",!1),_s(this,"latestAcknowledgedHistory",0),_s(this,"_start",void 0),_s(this,"_dispose",void 0),_s(this,"_push",void 0),this.windowTitle=r,this.writeTimer=void 0,this.writeDelay=a,this._createURL=o,this.parseURL=l,this.getLocation=u,this._start=d,this._dispose=h,this._push=m,Rl(function(p){var y=p.window,j=n.windowTitle&&n.windowTitle(n.read());hA(j),n.latestAcknowledgedHistory=y.history.length})}return Pxe(t,[{key:"read",value:function(){return this.parseURL({qsModule:dA,location:this.getLocation()})}},{key:"write",value:function(n){var r=this;Rl(function(s){var a=s.window,o=r.createURL(n),l=r.windowTitle&&r.windowTitle(n);r.writeTimer&&clearTimeout(r.writeTimer),r.writeTimer=setTimeout(function(){hA(l),r.shouldWrite(o)&&(r._push?r._push(o):a.history.pushState(n,l||"",o),r.latestAcknowledgedHistory=a.history.length),r.inPopState=!1,r.writeTimer=void 0},r.writeDelay)})}},{key:"onUpdate",value:function(n){var r=this;this._start&&this._start(function(){n(r.read())}),this._onPopState=function(){r.writeTimer&&(clearTimeout(r.writeTimer),r.writeTimer=void 0),r.inPopState=!0,n(r.read())},Rl(function(s){var a=s.window;a.addEventListener("popstate",r._onPopState)})}},{key:"createURL",value:function(n){var r=this._createURL({qsModule:dA,routeState:n,location:this.getLocation()});return r}},{key:"dispose",value:function(){var n=this;this._dispose&&this._dispose(),this.isDisposed=!0,Rl(function(r){var s=r.window;n._onPopState&&s.removeEventListener("popstate",n._onPopState)}),this.writeTimer&&clearTimeout(this.writeTimer),this.write({})}},{key:"start",value:function(){this.isDisposed=!1}},{key:"shouldWrite",value:function(n){var r=this;return Rl(function(s){var a=s.window,o=!(r.isDisposed&&r.latestAcknowledgedHistory!==a.history.length);return!r.inPopState&&o&&n!==a.location.href})}}]),t}();function Rxe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.createURL,n=e===void 0?function(y){var j=y.qsModule,_=y.routeState,N=y.location,b=N.protocol,x=N.hostname,S=N.port,C=S===void 0?"":S,R=N.pathname,z=N.hash,k=j.stringify(_),I=C===""?"":":".concat(C);return k?"".concat(b,"//").concat(x).concat(I).concat(R,"?").concat(k).concat(z):"".concat(b,"//").concat(x).concat(I).concat(R).concat(z)}:e,r=t.parseURL,s=r===void 0?function(y){var j=y.qsModule,_=y.location;return j.parse(_.search.slice(1),{arrayLimit:99})}:r,a=t.writeDelay,o=a===void 0?400:a,l=t.windowTitle,u=t.getLocation,d=u===void 0?function(){return Rl(function(y){var j=y.window;return j.location},{fallback:function(){throw new Error("You need to provide `getLocation` to the `history` router in environments where `window` does not exist.")}})}:u,h=t.start,m=t.dispose,p=t.push;return new Txe({createURL:n,parseURL:s,writeDelay:o,windowTitle:l,getLocation:d,start:h,dispose:m,push:p})}function Yp(t){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(t)}var kxe=["configure"];function fA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function wy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fA(Object(n),!0).forEach(function(r){dN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dN(t,e,n){return e=Ixe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ixe(t){var e=Axe(t,"string");return Yp(e)==="symbol"?e:String(e)}function Axe(t,e){if(Yp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oxe(t,e){if(t==null)return{};var n=Mxe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mxe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function mA(t){t.configure;var e=Oxe(t,kxe);return e}function Dxe(){return{$$type:"ais.simple",stateToRoute:function(e){return Object.keys(e).reduce(function(n,r){return wy(wy({},n),{},dN({},r,mA(e[r])))},{})},routeToState:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(n,r){return wy(wy({},n),{},dN({},r,mA(e[r])))},{})}}}function Jp(t){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(t)}function pA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function by(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pA(Object(n),!0).forEach(function(r){FV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FV(t,e,n){return e=Lxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lxe(t){var e=Fxe(t,"string");return Jp(e)==="symbol"?e:String(e)}function Fxe(t,e){if(Jp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $xe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.router,r=n===void 0?Rxe():n,s=e.stateMapping,a=s===void 0?Dxe():s,o=e.$$internal,l=o===void 0?!1:o;return function(u){var d=u.instantSearchInstance;function h(y){var j=d.mainIndex.getWidgets().length===0?d._initialUiState:d.mainIndex.getWidgetUiState({}),_=Object.keys(y).reduce(function(b,x){return by(by({},b),{},FV({},x,y[x]))},j),N=a.stateToRoute(_);return r.createURL(N)}d._createURL=h;var m=void 0,p=d._initialUiState;return{$$type:"ais.router({router:".concat(r.$$type||"__unknown__",", stateMapping:").concat(a.$$type||"__unknown__","})"),$$internal:l,onStateChange:function(j){var _=j.uiState,N=a.stateToRoute(_);(m===void 0||!vV(m,N))&&(r.write(N),m=N)},subscribe:function(){d._initialUiState=by(by({},p),a.routeToState(r.read())),r.onUpdate(function(j){d.mainIndex.getWidgets().length>0&&d.setUiState(a.routeToState(j))})},started:function(){var j;(j=r.start)===null||j===void 0||j.call(r)},unsubscribe:function(){r.dispose()}}}};function Vxe(t,e){return t.toLocaleString(e)}function Xp(t){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(t)}function gA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function yo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gA(Object(n),!0).forEach(function(r){zxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zxe(t,e,n){return e=Uxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uxe(t){var e=Bxe(t,"string");return Xp(e)==="symbol"?e:String(e)}function Bxe(t,e){if(Xp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wxe(t){var e=t.numberLocale;return{formatNumber:function(r,s){return Vxe(Number(s(r)),e)},highlight:function(r,s){try{var a=JSON.parse(r);return s(xye(yo(yo({},a),{},{hit:this})))}catch{throw new Error(`
The highlight helper expects a JSON object of the format:
{ "attribute": "name", "highlightedTagName": "mark" }`)}},reverseHighlight:function(r,s){try{var a=JSON.parse(r);return s(bye(yo(yo({},a),{},{hit:this})))}catch{throw new Error(`
  The reverseHighlight helper expects a JSON object of the format:
  { "attribute": "name", "highlightedTagName": "mark" }`)}},snippet:function(r,s){try{var a=JSON.parse(r);return s(jye(yo(yo({},a),{},{hit:this})))}catch{throw new Error(`
The snippet helper expects a JSON object of the format:
{ "attribute": "name", "highlightedTagName": "mark" }`)}},reverseSnippet:function(r,s){try{var a=JSON.parse(r);return s(Sye(yo(yo({},a),{},{hit:this})))}catch{throw new Error(`
  The reverseSnippet helper expects a JSON object of the format:
  { "attribute": "name", "highlightedTagName": "mark" }`)}},insights:function(r,s){try{var a=JSON.parse(r),o=a.method,l=a.payload;return s(Pye(o,yo({objectIDs:[this.objectID]},l)))}catch{throw new Error(`
The insights helper expects a JSON object of the format:
{ "method": "method-name", "payload": { "eventName": "name of the event" } }`)}}}}const Hxe="4.56.8";function qh(t){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(t)}function vA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vA(Object(n),!0).forEach(function(r){bn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$V(r.key),r)}}function Zxe(t,e,n){return e&&Kxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hN(t,e)}function hN(t,e){return hN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},hN(t,e)}function Yxe(t){var e=Xxe();return function(){var r=S0(t),s;if(e){var a=S0(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Jxe(this,s)}}function Jxe(t,e){if(e&&(qh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hn(t)}function hn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S0(t){return S0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},S0(t)}function bn(t,e,n){return e=$V(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $V(t){var e=e0e(t,"string");return qh(e)==="symbol"?e:String(e)}function e0e(t,e){if(qh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xa=ri({name:"instantsearch"});function t0e(){return"#"}var n0e=function(t){Qxe(n,t);var e=Yxe(n);function n(r){var s;Gxe(this,n),s=e.call(this),bn(hn(s),"client",void 0),bn(hn(s),"indexName",void 0),bn(hn(s),"insightsClient",void 0),bn(hn(s),"onStateChange",null),bn(hn(s),"helper",void 0),bn(hn(s),"mainHelper",void 0),bn(hn(s),"mainIndex",void 0),bn(hn(s),"started",void 0),bn(hn(s),"templatesConfig",void 0),bn(hn(s),"renderState",{}),bn(hn(s),"_stalledSearchDelay",void 0),bn(hn(s),"_searchStalledTimer",void 0),bn(hn(s),"_initialUiState",void 0),bn(hn(s),"_initialResults",void 0),bn(hn(s),"_createURL",void 0),bn(hn(s),"_searchFunction",void 0),bn(hn(s),"_mainHelperSearch",void 0),bn(hn(s),"middleware",[]),bn(hn(s),"sendEventToInsights",void 0),bn(hn(s),"status","idle"),bn(hn(s),"error",void 0),bn(hn(s),"scheduleSearch",lm(function(){s.started&&s.mainHelper.search()})),bn(hn(s),"scheduleRender",lm(function(){var V,T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(V=s.mainHelper)!==null&&V!==void 0&&V.hasPendingRequests()||(clearTimeout(s._searchStalledTimer),s._searchStalledTimer=null,T&&(s.status="idle",s.error=void 0)),s.mainIndex.render({instantSearchInstance:hn(s)}),s.emit("render")})),bn(hn(s),"onInternalStateChange",lm(function(){var V=s.mainIndex.getWidgetUiState({});s.middleware.forEach(function(T){var O=T.instance;O.onStateChange({uiState:V})})})),s.setMaxListeners(100);var a=r.indexName,o=a===void 0?"":a,l=r.numberLocale,u=r.initialUiState,d=u===void 0?{}:u,h=r.routing,m=h===void 0?null:h,p=r.insights,y=p===void 0?!1:p,j=r.searchFunction,_=r.stalledSearchDelay,N=_===void 0?200:_,b=r.searchClient,x=b===void 0?null:b,S=r.insightsClient,C=S===void 0?null:S,R=r.onStateChange,z=R===void 0?null:R;if(x===null)throw new Error(xa("The `searchClient` option is required."));if(typeof x.search!="function")throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");if(typeof x.addAlgoliaAgent=="function"&&x.addAlgoliaAgent("instantsearch.js (".concat(Hxe,")")),C&&typeof C!="function")throw new Error(xa("The `insightsClient` option should be a function."));if(s.client=x,s.insightsClient=C,s.indexName=o,s.helper=null,s.mainHelper=null,s.mainIndex=lye({indexName:o}),s.onStateChange=z,s.started=!1,s.templatesConfig={helpers:Wxe({numberLocale:l}),compileOptions:{}},s._stalledSearchDelay=N,s._searchStalledTimer=null,s._createURL=t0e,s._initialUiState=d,s._initialResults=null,j&&(s._searchFunction=j),s.sendEventToInsights=zn,m){var k=typeof m=="boolean"?{}:m;k.$$internal=!0,s.use($xe(k))}if(y){var I=typeof y=="boolean"?{}:y;I.$$internal=!0,s.use(Uye(I))}return Bye()&&s.use(Wye({$$internal:!0})),s}return Zxe(n,[{key:"_isSearchStalled",get:function(){return this.status==="stalled"}},{key:"use",value:function(){for(var s=this,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var u=o.map(function(d){var h=qxe({$$type:"__unknown__",$$internal:!1,subscribe:zn,started:zn,unsubscribe:zn,onStateChange:zn},d({instantSearchInstance:s}));return s.middleware.push({creator:d,instance:h}),h});return this.started&&u.forEach(function(d){d.subscribe(),d.started()}),this}},{key:"unuse",value:function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return this.middleware.filter(function(l){return a.includes(l.creator)}).forEach(function(l){return l.instance.unsubscribe()}),this.middleware=this.middleware.filter(function(l){return!a.includes(l.creator)}),this}},{key:"EXPERIMENTAL_use",value:function(){return this.use.apply(this,arguments)}},{key:"addWidget",value:function(s){return this.addWidgets([s])}},{key:"addWidgets",value:function(s){if(!Array.isArray(s))throw new Error(xa("The `addWidgets` method expects an array of widgets. Please use `addWidget`."));if(s.some(function(a){return typeof a.init!="function"&&typeof a.render!="function"}))throw new Error(xa("The widget definition expects a `render` and/or an `init` method."));return this.mainIndex.addWidgets(s),this}},{key:"removeWidget",value:function(s){return this.removeWidgets([s])}},{key:"removeWidgets",value:function(s){if(!Array.isArray(s))throw new Error(xa("The `removeWidgets` method expects an array of widgets. Please use `removeWidget`."));if(s.some(function(a){return typeof a.dispose!="function"}))throw new Error(xa("The widget definition expects a `dispose` method."));return this.mainIndex.removeWidgets(s),this}},{key:"start",value:function(){var s=this;if(this.started)throw new Error(xa("The `start` method has already been called once."));var a=this.mainHelper||Zi(this.client,this.indexName);if(a.search=function(){return s.status="loading",s.scheduleRender(!1),a.searchOnlyWithDerivedHelpers()},this._searchFunction){var o={search:function(){return new Promise(zn)}};this._mainHelperSearch=a.search.bind(a),a.search=function(){var u=s.mainIndex.getHelper(),d=Zi(o,u.state.index,u.state);return d.once("search",function(h){var m=h.state;u.overrideStateWithoutTriggeringChangeEvent(m),s._mainHelperSearch()}),d.on("change",function(h){var m=h.state;u.setState(m)}),s._searchFunction(d),a}}if(a.on("error",function(u){var d=u.error;if(!(d instanceof Error)){var h=d;d=Object.keys(h).reduce(function(m,p){return m[p]=h[p],m},new Error(h.message))}d.error=d,s.error=d,s.status="error",s.scheduleRender(!1),s.emit("error",d)}),this.mainHelper=a,this.middleware.forEach(function(u){var d=u.instance;d.subscribe()}),this.mainIndex.init({instantSearchInstance:this,parent:null,uiState:this._initialUiState}),this._initialResults){var l=this.scheduleSearch;this.scheduleSearch=lm(zn),lm(function(){s.scheduleSearch=l})()}else this.mainIndex.getWidgets().length>0&&this.scheduleSearch();this.helper=this.mainIndex.getHelper(),this.started=!0,this.middleware.forEach(function(u){var d=u.instance;d.started()})}},{key:"dispose",value:function(){var s;this.scheduleSearch.cancel(),this.scheduleRender.cancel(),clearTimeout(this._searchStalledTimer),this.removeWidgets(this.mainIndex.getWidgets()),this.mainIndex.dispose(),this.started=!1,this.removeAllListeners(),(s=this.mainHelper)===null||s===void 0||s.removeAllListeners(),this.mainHelper=null,this.helper=null,this.middleware.forEach(function(a){var o=a.instance;o.unsubscribe()})}},{key:"scheduleStalledRender",value:function(){var s=this;this._searchStalledTimer||(this._searchStalledTimer=setTimeout(function(){s.status="stalled",s.scheduleRender()},this._stalledSearchDelay))}},{key:"setUiState",value:function(s){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!this.mainHelper)throw new Error(xa("The `start` method needs to be called before `setUiState`."));this.mainIndex.refreshUiState();var l=typeof s=="function"?s(this.mainIndex.getWidgetUiState({})):s;this.onStateChange&&o?this.onStateChange({uiState:l,setUiState:function(d){nN(typeof d=="function"?d(l):d,a.mainIndex),a.scheduleSearch(),a.onInternalStateChange()}}):(nN(l,this.mainIndex),this.scheduleSearch(),this.onInternalStateChange())}},{key:"getUiState",value:function(){return this.started&&this.mainIndex.refreshUiState(),this.mainIndex.getWidgetUiState({})}},{key:"createURL",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.started)throw new Error(xa("The `start` method needs to be called before `createURL`."));return this._createURL(s)}},{key:"refresh",value:function(){if(!this.mainHelper)throw new Error(xa("The `start` method needs to be called before `refresh`."));this.mainHelper.clearCache().search()}}]),n}(spe),r0e={},yA=["react (".concat(w.version,")"),"react-instantsearch (".concat(Kj,")"),"react-instantsearch-hooks (".concat(Kj,")")],xA="react-instantsearch-server (".concat(Kj,")"),s0e=function(e){return e?"next.js (".concat(e,")"):null};function i0e(t){var e=mye(),n=SV(),r=gye(),s=r==null?void 0:r.initialResults,a=w.useRef(t),o=w.useRef(null);if(r&&(o=r.ssrSearchRef),o.current===null){var l=new n0e(t);l._schedule=function(j){l._schedule.queue.push(j),clearTimeout(l._schedule.timer),l._schedule.timer=setTimeout(function(){l._schedule.queue.forEach(function(_){_()}),l._schedule.queue=[]},0)},l._schedule.queue=[],(n||s)&&(l._initialResults=s||{}),wA(t.searchClient,[].concat(yA,[n&&xA,s0e(a0e())])),(n||s)&&l.start(),n&&n.notifyServer({search:l}),t.routing,o.current=l}{var u=o.current,d=a.current;if(d.indexName!==t.indexName&&(u.helper.setIndex(t.indexName||"").search(),a.current=t),d.searchClient!==t.searchClient&&(wA(t.searchClient,[].concat(yA,[n&&xA])),u.mainHelper.setClient(t.searchClient).search(),a.current=t),d.onStateChange!==t.onStateChange&&(u.onStateChange=t.onStateChange,a.current=t),d.searchFunction!==t.searchFunction&&(u._searchFunction=t.searchFunction,a.current=t),d.stalledSearchDelay!==t.stalledSearchDelay){var h;u._stalledSearchDelay=(h=t.stalledSearchDelay)!==null&&h!==void 0?h:200,a.current=t}}var m=w.useRef(null),p=xE.useSyncExternalStore(w.useCallback(function(){var y=o.current;return m.current===null?y.started||(y.start(),e()):(clearTimeout(m.current),y._preventWidgetCleanup=!1),function(){function j(){y.dispose()}clearTimeout(y._schedule.timer),m.current=setTimeout(j),y._preventWidgetCleanup=!0}},[e]),function(){return o.current},function(){return o.current});return p}function wA(t,e){typeof t.addAlgoliaAgent=="function"&&e.filter(Boolean).forEach(function(n){t.addAlgoliaAgent(n)})}function a0e(){var t,e;return typeof window<"u"&&((t=window.next)===null||t===void 0?void 0:t.version)||(typeof process<"u"?(e=r0e)===null||e===void 0?void 0:e.NEXT_RUNTIME:void 0)}var o0e=["children"];function l0e(t,e){if(t==null)return{};var n=c0e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function c0e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function u0e(t){var e=t.children,n=l0e(t,o0e),r=i0e(n);return r.started?oe.createElement(jV.Provider,{value:r},oe.createElement(_V.Provider,{value:r.mainIndex},e)):null}function eg(t){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(t)}function d0e(t){return p0e(t)||m0e(t)||f0e(t)||h0e()}function h0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f0e(t,e){if(t){if(typeof t=="string")return fN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fN(t,e)}}function m0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function p0e(t){if(Array.isArray(t))return fN(t)}function fN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Nd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bA(Object(n),!0).forEach(function(r){g0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g0e(t,e,n){return e=v0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v0e(t){var e=y0e(t,"string");return eg(e)==="symbol"?e:String(e)}function y0e(t,e){if(eg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(eg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _A=ri({name:"clear-refinements",connector:!0}),x0e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return eo(e,_A()),function(r){var s=r||{},a=s.includedAttributes,o=a===void 0?[]:a,l=s.excludedAttributes,u=l===void 0?["query"]:l,d=s.transformItems,h=d===void 0?function(j){return j}:d;if(r&&r.includedAttributes&&r.excludedAttributes)throw new Error(_A("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var m={refine:zn,createURL:function(){return""},attributesToClear:[]},p=function(){return m.refine()},y=function(){return m.createURL()};return{$$type:"ais.clearRefinements",init:function(_){var N=_.instantSearchInstance;e(Nd(Nd({},this.getWidgetRenderState(_)),{},{instantSearchInstance:N}),!0)},render:function(_){var N=_.instantSearchInstance;e(Nd(Nd({},this.getWidgetRenderState(_)),{},{instantSearchInstance:N}),!1)},dispose:function(){n()},getRenderState:function(_,N){return Nd(Nd({},_),{},{clearRefinements:this.getWidgetRenderState(N)})},getWidgetRenderState:function(_){var N=_.createURL,b=_.scopedResults,x=_.results;m.attributesToClear=b.reduce(function(C,R){return C.concat(w0e({scopedResult:R,includedAttributes:o,excludedAttributes:u,transformItems:h,results:x}))},[]),m.refine=function(){m.attributesToClear.forEach(function(C){var R=C.helper,z=C.items;R.setState(OI({helper:R,attributesToClear:z})).search()})},m.createURL=function(){return N(Km.apply(void 0,d0e(m.attributesToClear.map(function(C){var R=C.helper,z=C.items;return OI({helper:R,attributesToClear:z})}))))};var S=m.attributesToClear.some(function(C){return C.items.length>0});return{canRefine:S,hasRefinements:S,refine:p,createURL:y,widgetParams:r}}}}};function w0e(t){var e=t.scopedResult,n=t.includedAttributes,r=t.excludedAttributes,s=t.transformItems,a=t.results,o=n.indexOf("query")!==-1||r.indexOf("query")===-1;return{helper:e.helper,items:s(yV(gV(e.results,e.helper.state,o).map(function(l){return l.attribute}).filter(function(l){return n.length===0||n.indexOf(l)!==-1}).filter(function(l){return l==="query"&&o||r.indexOf(l)===-1})),{results:a})}}function b0e(t,e){return ha(x0e,t,e)}function tg(t){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(t)}function _0e(t){return E0e(t)||S0e(t)||N0e(t)||j0e()}function j0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N0e(t,e){if(t){if(typeof t=="string")return mN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mN(t,e)}}function S0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function E0e(t){if(Array.isArray(t))return mN(t)}function mN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Sd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jA(Object(n),!0).forEach(function(r){P0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P0e(t,e,n){return e=C0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C0e(t){var e=T0e(t,"string");return tg(e)==="symbol"?e:String(e)}function T0e(t,e){if(tg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NA=ri({name:"current-refinements",connector:!0}),R0e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return eo(e,NA()),function(r){if((r||{}).includedAttributes&&(r||{}).excludedAttributes)throw new Error(NA("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var s=r||{},a=s.includedAttributes,o=s.excludedAttributes,l=o===void 0?["query"]:o,u=s.transformItems,d=u===void 0?function(h){return h}:u;return{$$type:"ais.currentRefinements",init:function(m){var p=m.instantSearchInstance;e(Sd(Sd({},this.getWidgetRenderState(m)),{},{instantSearchInstance:p}),!0)},render:function(m){var p=m.instantSearchInstance;e(Sd(Sd({},this.getWidgetRenderState(m)),{},{instantSearchInstance:p}),!1)},dispose:function(){n()},getRenderState:function(m,p){return Sd(Sd({},m),{},{currentRefinements:this.getWidgetRenderState(p)})},getWidgetRenderState:function(m){var p=m.results,y=m.scopedResults,j=m.createURL,_=m.helper;function N(){return p?y.reduce(function(x,S){return x.concat(d(SA({results:S.results,helper:S.helper,indexId:S.indexId,includedAttributes:a,excludedAttributes:l}),{results:p}))},[]):d(SA({results:{},helper:_,indexId:_.state.index,includedAttributes:a,excludedAttributes:l}),{results:p})}var b=N();return{items:b,canRefine:b.length>0,refine:function(S){return zV(_,S)},createURL:function(S){return j(VV(_.state,S))},widgetParams:r}}}}};function SA(t){var e=t.results,n=t.helper,r=t.indexId,s=t.includedAttributes,a=t.excludedAttributes,o=(s||[]).indexOf("query")!==-1||(a||[]).indexOf("query")===-1,l=s?function(d){return s.indexOf(d.attribute)!==-1}:function(d){return a.indexOf(d.attribute)===-1},u=gV(e,n.state,o).map(I0e).filter(l);return u.reduce(function(d,h){return[].concat(_0e(d.filter(function(m){return m.attribute!==h.attribute})),[{indexName:n.state.index,indexId:r,attribute:h.attribute,label:h.attribute,refinements:u.filter(function(m){return m.attribute===h.attribute}).sort(function(m,p){return m.type==="numeric"?m.value-p.value:0}),refine:function(p){return zV(n,p)}}])},[])}function VV(t,e){switch(t=t.resetPage(),e.type){case"facet":return t.removeFacetRefinement(e.attribute,String(e.value));case"disjunctive":return t.removeDisjunctiveFacetRefinement(e.attribute,String(e.value));case"hierarchical":return t.removeHierarchicalFacetRefinement(e.attribute);case"exclude":return t.removeExcludeRefinement(e.attribute,String(e.value));case"numeric":return t.removeNumericRefinement(e.attribute,e.operator,String(e.value));case"tag":return t.removeTagRefinement(String(e.value));case"query":return t.setQueryParameter("query","");default:return t}}function zV(t,e){t.setState(VV(t.state,e)).search()}function k0e(t){switch(t){case">=":return"≥";case"<=":return"≤";default:return t}}function I0e(t){var e=A0e(t),n=t.operator?"".concat(k0e(t.operator)," ").concat(t.name):t.name,r={attribute:t.attribute,type:t.type,value:e,label:n};return t.operator!==void 0&&(r.operator=t.operator),t.count!==void 0&&(r.count=t.count),t.exhaustive!==void 0&&(r.exhaustive=t.exhaustive),r}function A0e(t){return t.type==="numeric"?Number(t.name):"escapedValue"in t?t.escapedValue:t.name}function O0e(t,e){return ha(R0e,t,e)}function ng(t){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(t)}function EA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ml(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EA(Object(n),!0).forEach(function(r){UV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UV(t,e,n){return e=M0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M0e(t){var e=D0e(t,"string");return ng(e)==="symbol"?e:String(e)}function D0e(t,e){if(ng(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ng(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var L0e=ri({name:"hits",connector:!0}),F0e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return eo(e,L0e()),function(r){var s=r||{},a=s.escapeHTML,o=a===void 0?!0:a,l=s.transformItems,u=l===void 0?function(m){return m}:l,d,h;return{$$type:"ais.hits",init:function(p){e(ml(ml({},this.getWidgetRenderState(p)),{},{instantSearchInstance:p.instantSearchInstance}),!0)},render:function(p){var y=this.getWidgetRenderState(p);e(ml(ml({},y),{},{instantSearchInstance:p.instantSearchInstance}),!1),y.sendEvent("view:internal",y.hits)},getRenderState:function(p,y){return ml(ml({},p),{},{hits:this.getWidgetRenderState(y)})},getWidgetRenderState:function(p){var y=p.results,j=p.helper,_=p.instantSearchInstance;if(d||(d=Oge({instantSearchInstance:_,index:j.getIndex(),widgetType:this.$$type})),h||(h=Mge({index:j.getIndex(),widgetType:this.$$type,instantSearchInstance:_})),!y)return{hits:[],results:void 0,sendEvent:d,bindEvent:h,widgetParams:r};o&&y.hits.length>0&&(y.hits=xge(y.hits));var N=qge(y.hits,y.page,y.hitsPerPage),b=Qge(N,y.queryID),x=u(b,{results:y});return{hits:x,results:y,sendEvent:d,bindEvent:h,widgetParams:r}},dispose:function(p){var y=p.state;return n(),o?y.setQueryParameters(Object.keys(Wh).reduce(function(j,_){return ml(ml({},j),{},UV({},_,void 0))},{})):y},getWidgetSearchParameters:function(p){return o?p.setQueryParameters(Wh):p}}}};function $0e(t,e){return ha(F0e,t,e)}function rg(t){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(t)}function V0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BV(r.key),r)}}function U0e(t,e,n){return e&&z0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function V_(t,e,n){return e=BV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BV(t){var e=B0e(t,"string");return rg(e)==="symbol"?e:String(e)}function B0e(t,e){if(rg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W0e=function(){function t(e){V0e(this,t),V_(this,"currentPage",void 0),V_(this,"total",void 0),V_(this,"padding",void 0),this.currentPage=e.currentPage,this.total=e.total,this.padding=e.padding}return U0e(t,[{key:"pages",value:function(){var n=this.total,r=this.currentPage,s=this.padding;if(n===0)return[0];var a=this.nbPagesDisplayed(s,n);if(a===n)return WI({end:n});var o=this.calculatePaddingLeft(r,s,n,a),l=a-o,u=r-o,d=r+l;return WI({start:u,end:d})}},{key:"nbPagesDisplayed",value:function(n,r){return Math.min(2*n+1,r)}},{key:"calculatePaddingLeft",value:function(n,r,s,a){return n<=r?n:n>=s-r?a-(s-n):r}},{key:"isLastPage",value:function(){return this.currentPage===this.total-1||this.total===0}},{key:"isFirstPage",value:function(){return this.currentPage===0}}]),t}();function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function PA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function wa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PA(Object(n),!0).forEach(function(r){H0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H0e(t,e,n){return e=q0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q0e(t){var e=G0e(t,"string");return sg(e)==="symbol"?e:String(e)}function G0e(t,e){if(sg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K0e=ri({name:"pagination",connector:!0}),Z0e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return eo(e,K0e()),function(r){var s=r||{},a=s.totalPages,o=s.padding,l=o===void 0?3:o,u=new W0e({currentPage:0,total:0,padding:l}),d={};function h(m){var p=m.nbPages;return a!==void 0?Math.min(a,p):p}return{$$type:"ais.pagination",init:function(p){var y=p.instantSearchInstance;e(wa(wa({},this.getWidgetRenderState(p)),{},{instantSearchInstance:y}),!0)},render:function(p){var y=p.instantSearchInstance;e(wa(wa({},this.getWidgetRenderState(p)),{},{instantSearchInstance:y}),!1)},dispose:function(p){var y=p.state;return n(),y.setQueryParameter("page",void 0)},getWidgetUiState:function(p,y){var j=y.searchParameters,_=j.page||0;return _?wa(wa({},p),{},{page:_+1}):p},getWidgetSearchParameters:function(p,y){var j=y.uiState,_=j.page?j.page-1:0;return p.setQueryParameter("page",_)},getWidgetRenderState:function(p){var y=p.results,j=p.helper,_=p.state,N=p.createURL;d.refine||(d.refine=function(S){j.setPage(S),j.search()}),d.createURL||(d.createURL=function(S){return N(function(C){return wa(wa({},C),{},{page:S})})});var b=_.page||0,x=h(y||{nbPages:0});return u.currentPage=b,u.total=x,{createURL:d.createURL,refine:d.refine,canRefine:x>1,currentRefinement:b,nbHits:(y==null?void 0:y.nbHits)||0,nbPages:x,pages:y?u.pages():[],isFirstPage:u.isFirstPage(),isLastPage:u.isLastPage(),widgetParams:r}},getRenderState:function(p,y){return wa(wa({},p),{},{pagination:this.getWidgetRenderState(y)})}}}};function Q0e(t,e){return ha(Z0e,t,e)}function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(t)}function CA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CA(Object(n),!0).forEach(function(r){tx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tx(t,e,n){return e=Y0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y0e(t){var e=J0e(t,"string");return ig(e)==="symbol"?e:String(e)}function J0e(t,e){if(ig(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ig(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ed(t,e){return nwe(t)||twe(t,e)||ewe(t,e)||X0e()}function X0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ewe(t,e){if(t){if(typeof t=="string")return TA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TA(t,e)}}function TA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function twe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function nwe(t){if(Array.isArray(t))return t}var z_=ri({name:"range-input",connector:!0},{name:"range-slider",connector:!0}),rwe="ais.range";function RA(t){var e=t.min,n=t.max,r=t.precision,s=Math.pow(10,r);return{min:e&&Math.floor(e*s)/s,max:n&&Math.ceil(n*s)/s}}var swe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return eo(e,z_()),function(r){var s=r||{},a=s.attribute,o=a===void 0?"":a,l=s.min,u=s.max,d=s.precision,h=d===void 0?0:d;if(!o)throw new Error(z_("The `attribute` option is required."));if(un(l)&&un(u)&&l>u)throw new Error(z_("The `max` option can't be lower than `min`."));var m=function(S){return Number(Number(S).toFixed(h))},p={from:function(S){return S.toLocaleString()},to:function(S){return m(S).toLocaleString()}},y=function(S,C,R,z){var k=S.state,I=C.min,V=C.max,T=k.getNumericRefinement(o,">=")||[],O=Ed(T,1),$=O[0],M=k.getNumericRefinement(o,"<=")||[],B=Ed(M,1),J=B[0],ee=R===void 0||R==="",K=z===void 0||z==="",D=RA({min:ee?void 0:parseFloat(R),max:K?void 0:parseFloat(z),precision:h}),G=D.min,q=D.max,X;!un(l)&&I===G?X=void 0:un(l)&&ee?X=l:X=G;var fe;!un(u)&&V===q?fe=void 0:un(u)&&K?fe=u:fe=q;var Te=X===void 0,$e=un(I)&&I<=X,ze=Te||un(X)&&(!un(I)||$e),Le=fe===void 0,Ce=un(fe)&&V>=fe,ne=Le||un(fe)&&(!un(V)||Ce),ie=$!==X,ae=J!==fe;return(ie||ae)&&ze&&ne?(k=k.removeNumericRefinement(o),un(X)&&(k=k.addNumericRefinement(o,">=",X)),un(fe)&&(k=k.addNumericRefinement(o,"<=",fe)),k.resetPage()):null},j=function(S){return function(){if(arguments.length===1){S.sendEventToInsights(arguments.length<=0?void 0:arguments[0]);return}}};function _(x){var S;un(l)?S=l:un(x.min)?S=x.min:S=0;var C;return un(u)?C=u:un(x.max)?C=x.max:C=0,RA({min:S,max:C,precision:h})}function N(x){var S=x.getNumericRefinement(o,">=")||[],C=Ed(S,1),R=C[0],z=x.getNumericRefinement(o,"<=")||[],k=Ed(z,1),I=k[0],V=un(R)?R:-1/0,T=un(I)?I:1/0;return[V,T]}function b(x,S){return function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[void 0,void 0],R=Ed(C,2),z=R[0],k=R[1],I=y(x,S,z,k);I&&x.setState(I).search()}}return{$$type:rwe,init:function(S){e(qr(qr({},this.getWidgetRenderState(S)),{},{instantSearchInstance:S.instantSearchInstance}),!0)},render:function(S){e(qr(qr({},this.getWidgetRenderState(S)),{},{instantSearchInstance:S.instantSearchInstance}),!1)},getRenderState:function(S,C){return qr(qr({},S),{},{range:qr(qr({},S.range),{},tx({},o,this.getWidgetRenderState(C)))})},getWidgetRenderState:function(S){var C=S.results,R=S.helper,z=S.instantSearchInstance,k=C&&C.disjunctiveFacets||[],I=Au(k,function(M){return M.name===o}),V=I&&I.stats||{min:void 0,max:void 0},T=_(V),O=N(R),$;return C?$=b(R,T):$=b(R,{min:void 0,max:void 0}),{refine:$,canRefine:T.min!==T.max,format:p,range:T,sendEvent:j(z),widgetParams:qr(qr({},r),{},{precision:h}),start:O}},dispose:function(S){var C=S.state;return n(),C.removeDisjunctiveFacet(o).removeNumericRefinement(o)},getWidgetUiState:function(S,C){var R=C.searchParameters,z=R.getNumericRefinements(o),k=z[">="],I=k===void 0?[]:k,V=z["<="],T=V===void 0?[]:V;return I.length===0&&T.length===0?S:qr(qr({},S),{},{range:qr(qr({},S.range),{},tx({},o,"".concat(I,":").concat(T)))})},getWidgetSearchParameters:function(S,C){var R=C.uiState,z=S.addDisjunctiveFacet(o).setQueryParameters({numericRefinements:qr(qr({},S.numericRefinements),{},tx({},o,{}))});un(l)&&(z=z.addNumericRefinement(o,">=",l)),un(u)&&(z=z.addNumericRefinement(o,"<=",u));var k=R.range&&R.range[o];if(!k||k.indexOf(":")===-1)return z;var I=k.split(":").map(parseFloat),V=Ed(I,2),T=V[0],O=V[1];return un(T)&&(!un(l)||l<T)&&(z=z.removeNumericRefinement(o,">="),z=z.addNumericRefinement(o,">=",T)),un(O)&&(!un(u)||O<u)&&(z=z.removeNumericRefinement(o,"<="),z=z.addNumericRefinement(o,"<=",O)),z}}}};function iwe(t,e){return ha(swe,t,e)}function ag(t){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(t)}var awe=["name","escapedValue"],owe=["escapedValue","value"];function kA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kA(Object(n),!0).forEach(function(r){Pm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pm(t,e,n){return e=lwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lwe(t){var e=cwe(t,"string");return ag(e)==="symbol"?e:String(e)}function cwe(t,e){if(ag(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ag(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IA(t,e){if(t==null)return{};var n=uwe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uwe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var _y=ri({name:"refinement-list",connector:!0}),AA=["isRefined","count:desc","name:asc"],dwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return eo(e,_y()),function(r){var s=r||{},a=s.attribute,o=s.operator,l=o===void 0?"or":o,u=s.limit,d=u===void 0?10:u,h=s.showMore,m=h===void 0?!1:h,p=s.showMoreLimit,y=p===void 0?20:p,j=s.sortBy,_=j===void 0?AA:j,N=s.escapeFacetValues,b=N===void 0?!0:N,x=s.transformItems,S=x===void 0?function(K){return K}:x;if(!a)throw new Error(_y("The `attribute` option is required."));if(!/^(and|or)$/.test(l))throw new Error(_y('The `operator` must one of: `"and"`, `"or"` (got "'.concat(l,'").')));if(m===!0&&y<=d)throw new Error(_y("`showMoreLimit` should be greater than `limit`."));var C=function(D){var G=D.name,q=D.escapedValue,X=IA(D,awe);return dn(dn({},X),{},{value:q,label:G,highlighted:G})},R,z=[],k=!0,I,V,T=!1,O=function(){};function $(){O()}function M(K,D){return function(){T=!T,D.render(K)}}function B(){return T?y:d}var J=function(){return function(){}},ee=function(D,G){return function(q){return function(X){var fe=q.instantSearchInstance,Te=q.results;if(X===""&&z)e(dn(dn({},G.getWidgetRenderState(dn(dn({},q),{},{results:R}))),{},{instantSearchInstance:fe}),!1);else{var $e={highlightPreTag:b?Wh.highlightPreTag:is.highlightPreTag,highlightPostTag:b?Wh.highlightPostTag:is.highlightPostTag};D.searchForFacetValues(a,X,Math.min(B(),100),$e).then(function(ze){var Le=b?wge(ze.facetHits):ze.facetHits,Ce=S(Le.map(function(ne){var ie=ne.escapedValue,ae=ne.value,Z=IA(ne,owe);return dn(dn({},Z),{},{value:ie,label:ae})}),{results:Te});e(dn(dn({},G.getWidgetRenderState(dn(dn({},q),{},{results:R}))),{},{items:Ce,canToggleShowMore:!1,canRefine:!0,isFromSearch:!0,instantSearchInstance:fe}),!1)})}}}};return{$$type:"ais.refinementList",init:function(D){e(dn(dn({},this.getWidgetRenderState(D)),{},{instantSearchInstance:D.instantSearchInstance}),!0)},render:function(D){e(dn(dn({},this.getWidgetRenderState(D)),{},{instantSearchInstance:D.instantSearchInstance}),!1)},getRenderState:function(D,G){return dn(dn({},D),{},{refinementList:dn(dn({},D.refinementList),{},Pm({},a,this.getWidgetRenderState(G)))})},getWidgetRenderState:function(D){var G=this,q=D.results,X=D.state,fe=D.createURL,Te=D.instantSearchInstance,$e=D.helper,ze=[],Le=[];if((!V||!I||!J)&&(V=Pge({instantSearchInstance:Te,helper:$e,attribute:a,widgetType:this.$$type}),I=function(be){V("click:internal",be),$e.toggleFacetRefinement(a,be).search()},J=ee($e,this)),q){var Ce=q.getFacetValues(a,{sortBy:_,facetOrdering:_===AA});Le=Ce&&Array.isArray(Ce)?Ce:[],ze=S(Le.slice(0,B()).map(C),{results:q});var ne=X.maxValuesPerFacet,ie=B();k=ne>ie?Le.length<=ie:Le.length<ie,R=q,z=ze,D.results&&(O=M(D,this))}var ae=J&&J(D),Z=T&&z.length>d,ce=m&&!k,ve=Z||ce;return{createURL:function(be){return fe(function(re){return G.getWidgetUiState(re,{searchParameters:X.resetPage().toggleFacetRefinement(a,be),helper:$e})})},items:ze,refine:I,searchForItems:ae,isFromSearch:!1,canRefine:ze.length>0,widgetParams:r,isShowingMore:T,canToggleShowMore:ve,toggleShowMore:$,sendEvent:V,hasExhaustiveItems:k}},dispose:function(D){var G=D.state;n();var q=G.setQueryParameter("maxValuesPerFacet",void 0);return l==="and"?q.removeFacet(a):q.removeDisjunctiveFacet(a)},getWidgetUiState:function(D,G){var q=G.searchParameters,X=l==="or"?q.getDisjunctiveRefinements(a):q.getConjunctiveRefinements(a);return X.length?dn(dn({},D),{},{refinementList:dn(dn({},D.refinementList),{},Pm({},a,X))}):D},getWidgetSearchParameters:function(D,G){var q=G.uiState,X=l==="or";if(D.isHierarchicalFacet(a)||X&&D.isConjunctiveFacet(a)||!X&&D.isDisjunctiveFacet(a))return D;var fe=q.refinementList&&q.refinementList[a],Te=D.clearRefinements(a),$e=X?Te.addDisjunctiveFacet(a):Te.addFacet(a),ze=$e.maxValuesPerFacet||0,Le=Math.max(ze,m?y:d),Ce=$e.setQueryParameter("maxValuesPerFacet",Le);if(!fe){var ne=X?"disjunctiveFacetsRefinements":"facetsRefinements";return Ce.setQueryParameters(Pm({},ne,dn(dn({},Ce[ne]),{},Pm({},a,[]))))}return fe.reduce(function(ie,ae){return X?ie.addDisjunctiveFacetRefinement(a,ae):ie.addFacetRefinement(a,ae)},Ce)}}}};function hwe(t,e){return ha(dwe,t,e)}function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}function OA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OA(Object(n),!0).forEach(function(r){fwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fwe(t,e,n){return e=mwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mwe(t){var e=pwe(t,"string");return og(e)==="symbol"?e:String(e)}function pwe(t,e){if(og(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(og(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gwe=ri({name:"search-box",connector:!0}),vwe=function(e,n){return n(e)},ywe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return eo(e,gwe()),function(r){var s=r||{},a=s.queryHook,o=a===void 0?vwe:a,l,u;return{$$type:"ais.searchBox",init:function(h){var m=h.instantSearchInstance;e(pl(pl({},this.getWidgetRenderState(h)),{},{instantSearchInstance:m}),!0)},render:function(h){var m=h.instantSearchInstance;e(pl(pl({},this.getWidgetRenderState(h)),{},{instantSearchInstance:m}),!1)},dispose:function(h){var m=h.state;return n(),m.setQueryParameter("query",void 0)},getRenderState:function(h,m){return pl(pl({},h),{},{searchBox:this.getWidgetRenderState(m)})},getWidgetRenderState:function(h){var m=h.helper,p=h.searchMetadata,y=h.state;return l||(l=function(_){o(_,function(N){return m.setQuery(N).search()})},u=function(){m.setQuery("").search()}),{query:y.query||"",refine:l,clear:u,widgetParams:r,isSearchStalled:p.isSearchStalled}},getWidgetUiState:function(h,m){var p=m.searchParameters,y=p.query||"";return y===""||h&&h.query===y?h:pl(pl({},h),{},{query:y})},getWidgetSearchParameters:function(h,m){var p=m.uiState;return h.setQueryParameter("query",p.query||"")}}}};function xwe(t,e){return ha(ywe,t,e)}function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}function MA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MA(Object(n),!0).forEach(function(r){wwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wwe(t,e,n){return e=bwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bwe(t){var e=_we(t,"string");return lg(e)==="symbol"?e:String(e)}function _we(t,e){if(lg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DA=ri({name:"sort-by",connector:!0}),jwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;eo(e,DA());var r={};return function(s){var a=s||{},o=a.items,l=a.transformItems,u=l===void 0?function(d){return d}:l;if(!Array.isArray(o))throw new Error(DA("The `items` option expects an array of objects."));return{$$type:"ais.sortBy",init:function(h){var m=h.instantSearchInstance,p=this.getWidgetRenderState(h),y=p.currentRefinement;Au(o,function(j){return j.value===y}),e(gl(gl({},p),{},{instantSearchInstance:m}),!0)},render:function(h){var m=h.instantSearchInstance;e(gl(gl({},this.getWidgetRenderState(h)),{},{instantSearchInstance:m}),!1)},dispose:function(h){var m=h.state;return n(),r.initialIndex?m.setIndex(r.initialIndex):m},getRenderState:function(h,m){return gl(gl({},h),{},{sortBy:this.getWidgetRenderState(m)})},getWidgetRenderState:function(h){var m=h.results,p=h.helper,y=h.state,j=h.parent;!r.initialIndex&&j&&(r.initialIndex=j.getIndexName()),r.setIndex||(r.setIndex=function(N){p.setIndex(N).search()});var _=m?m.nbHits===0:!0;return{currentRefinement:y.index,options:u(o,{results:m}),refine:r.setIndex,hasNoResults:_,canRefine:!_&&o.length>0,widgetParams:s}},getWidgetUiState:function(h,m){var p=m.searchParameters,y=p.index;return gl(gl({},h),{},{sortBy:y!==r.initialIndex?y:void 0})},getWidgetSearchParameters:function(h,m){var p=m.uiState;return h.setQueryParameter("index",p.sortBy||r.initialIndex||h.index)}}}};function Nwe(t,e){return ha(jwe,t,e)}function cg(t){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}function LA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Pd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LA(Object(n),!0).forEach(function(r){Swe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Swe(t,e,n){return e=Ewe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ewe(t){var e=Pwe(t,"string");return cg(e)==="symbol"?e:String(e)}function Pwe(t,e){if(cg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cwe=ri({name:"stats",connector:!0}),Twe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return eo(e,Cwe()),function(r){return{$$type:"ais.stats",init:function(a){var o=a.instantSearchInstance;e(Pd(Pd({},this.getWidgetRenderState(a)),{},{instantSearchInstance:o}),!0)},render:function(a){var o=a.instantSearchInstance;e(Pd(Pd({},this.getWidgetRenderState(a)),{},{instantSearchInstance:o}),!1)},dispose:function(){n()},getRenderState:function(a,o){return Pd(Pd({},a),{},{stats:this.getWidgetRenderState(o)})},getWidgetRenderState:function(a){var o=a.results,l=a.state;return o?{hitsPerPage:o.hitsPerPage,nbHits:o.nbHits,nbSortedHits:o.nbSortedHits,areHitsSorted:typeof o.appliedRelevancyStrictness<"u"&&o.appliedRelevancyStrictness>0&&o.nbSortedHits!==o.nbHits,nbPages:o.nbPages,page:o.page,processingTimeMS:o.processingTimeMS,query:o.query,widgetParams:r}:{hitsPerPage:l.hitsPerPage,nbHits:0,nbSortedHits:void 0,areHitsSorted:!1,nbPages:0,page:l.page||0,processingTimeMS:-1,query:l.query||"",widgetParams:r}}}}};function Rwe(t,e){return ha(Twe,t,e)}function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}function FA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FA(Object(n),!0).forEach(function(r){nx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nx(t,e,n){return e=kwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kwe(t){var e=Iwe(t,"string");return ug(e)==="symbol"?e:String(e)}function Iwe(t,e){if(ug(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ug(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Awe(t,e){return Lwe(t)||Dwe(t,e)||Mwe(t,e)||Owe()}function Owe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mwe(t,e){if(t){if(typeof t=="string")return $A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $A(t,e)}}function $A(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dwe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Lwe(t){if(Array.isArray(t))return t}var VA=ri({name:"toggle-refinement",connector:!0}),WV="ais.toggleRefinement",Fwe=function(e){var n=e.instantSearchInstance,r=e.helper,s=e.attribute,a=e.on,o=function(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];if(d.length===1){n.sendEventToInsights(d[0]);return}var m=d[1],p=d[2],y=p===void 0?"Filter Applied":p,j=d[0].split(":"),_=Awe(j,2),N=_[0],b=_[1];N!=="click"||a===void 0||m||n.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:WV,eventType:N,eventModifier:b,payload:{eventName:y,index:r.getIndex(),filters:a.map(function(x){return"".concat(s,":").concat(x)})},attribute:s})};return o},$we=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return eo(e,VA()),function(r){var s=r||{},a=s.attribute,o=s.on,l=o===void 0?!0:o,u=s.off;if(!a)throw new Error(VA("The `attribute` option is required."));var d=u!==void 0,h=D_(l).map(Sm),m=d?D_(u).map(Sm):void 0,p,y=function(N){return function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{isRefined:!1},x=b.isRefined;x?(h.forEach(function(S){return N.removeDisjunctiveFacetRefinement(a,S)}),d&&m.forEach(function(S){return N.addDisjunctiveFacetRefinement(a,S)})):(p("click:internal",x),d&&m.forEach(function(S){return N.removeDisjunctiveFacetRefinement(a,S)}),h.forEach(function(S){return N.addDisjunctiveFacetRefinement(a,S)})),N.search()}},j={createURLFactory:function(N,b){var x=b.state,S=b.createURL,C=b.getWidgetUiState,R=b.helper;return function(){x=x.resetPage();var z=N?h:m;z&&z.forEach(function(I){x=x.removeDisjunctiveFacetRefinement(a,I)});var k=N?m:h;return k&&k.forEach(function(I){x=x.addDisjunctiveFacetRefinement(a,I)}),S(function(I){return C(I,{searchParameters:x,helper:R})})}}};return{$$type:WV,init:function(N){var b=N.instantSearchInstance;e(js(js({},this.getWidgetRenderState(N)),{},{instantSearchInstance:b}),!0)},render:function(N){var b=N.instantSearchInstance;e(js(js({},this.getWidgetRenderState(N)),{},{instantSearchInstance:b}),!1)},dispose:function(N){var b=N.state;return n(),b.removeDisjunctiveFacet(a)},getRenderState:function(N,b){return js(js({},N),{},{toggleRefinement:js(js({},N.toggleRefinement),{},nx({},a,this.getWidgetRenderState(b)))})},getWidgetRenderState:function(N){var b=N.state,x=N.helper,S=N.results,C=N.createURL,R=N.instantSearchInstance,z=S?h.every(function(B){return b.isDisjunctiveFacetRefined(a,B)}):h.every(function(B){return b.isDisjunctiveFacetRefined(a,B)}),k={isRefined:z,count:0},I={isRefined:d&&!z,count:0};if(S){var V=D_(m||!1),T=S.getFacetValues(a,{})||[],O=h.map(function(B){return Au(T,function(J){var ee=J.escapedValue;return ee===Sm(String(B))})}).filter(function(B){return B!==void 0}),$=d?V.map(function(B){return Au(T,function(J){var ee=J.escapedValue;return ee===Sm(String(B))})}).filter(function(B){return B!==void 0}):[];k={isRefined:O.length?O.every(function(B){return B.isRefined}):!1,count:O.reduce(function(B,J){return B+J.count},0)||null},I={isRefined:$.length?$.every(function(B){return B.isRefined}):!1,count:$.reduce(function(B,J){return B+J.count},0)||T.reduce(function(B,J){var ee=J.count;return B+ee},0)}}p||(p=Fwe({instantSearchInstance:R,attribute:a,on:h,helper:x}));var M=z?I:k;return{value:{name:a,isRefined:z,count:S?M.count:null,onFacetValue:k,offFacetValue:I},createURL:j.createURLFactory(z,{state:b,createURL:C,helper:x,getWidgetUiState:this.getWidgetUiState}),sendEvent:p,canRefine:!!(S&&M.count),refine:y(x),widgetParams:r}},getWidgetUiState:function(N,b){var x=b.searchParameters,S=h&&h.every(function(R){return x.isDisjunctiveFacetRefined(a,R)});if(!S){var C;return(C=N.toggle)===null||C===void 0||delete C[a],N}return js(js({},N),{},{toggle:js(js({},N.toggle),{},nx({},a,S))})},getWidgetSearchParameters:function(N,b){var x=b.uiState;if(N.isHierarchicalFacet(a)||N.isConjunctiveFacet(a))return N;var S=N.clearRefinements(a).addDisjunctiveFacet(a),C=!!(x.toggle&&x.toggle[a]);return C?(h&&h.forEach(function(R){S=S.addDisjunctiveFacetRefinement(a,R)}),S):d?(m&&m.forEach(function(R){S=S.addDisjunctiveFacetRefinement(a,R)}),S):S.setQueryParameters({disjunctiveFacetsRefinements:js(js({},N.disjunctiveFacetsRefinements),{},nx({},a,[]))})}}}};function Vwe(t,e){return ha($we,t,e)}function He(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")}function HV(t){var e=t.button===1;return!!(e||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}var zwe=["classNames","disabled","onClick","translations"];function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pN.apply(this,arguments)}function Uwe(t,e){if(t==null)return{};var n=Bwe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bwe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Wwe(t){var e=t.classNames,n=e===void 0?{}:e,r=t.disabled,s=r===void 0?!1:r,a=t.onClick,o=a===void 0?function(){}:a,l=t.translations,u=Uwe(t,zwe);return oe.createElement("div",pN({},u,{className:He("ais-ClearRefinements",n.root,u.className)}),oe.createElement("button",{disabled:s,onClick:o,className:He("ais-ClearRefinements-button",n.button,s&&He("ais-ClearRefinements-button--disabled",n.disabledButton))},l.resetButtonText))}function dg(t){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(t)}var Hwe=["includedAttributes","excludedAttributes","transformItems","translations"];function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gN.apply(this,arguments)}function zA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qwe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zA(Object(n),!0).forEach(function(r){Gwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gwe(t,e,n){return e=Kwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kwe(t){var e=Zwe(t,"string");return dg(e)==="symbol"?e:String(e)}function Zwe(t,e){if(dg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qwe(t,e){if(t==null)return{};var n=Ywe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ywe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Jwe(t){var e=t.includedAttributes,n=t.excludedAttributes,r=t.transformItems,s=t.translations,a=Qwe(t,Hwe),o=b0e({includedAttributes:e,excludedAttributes:n,transformItems:r},{$$widgetType:"ais.clearRefinements"}),l=o.canRefine,u=o.refine,d={onClick:u,disabled:!l,translations:qwe({resetButtonText:"Clear refinements"},s)};return oe.createElement(Wwe,gN({},a,d))}var Xwe=["classNames","items","onRemove","hasRefinements"];function vN(){return vN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vN.apply(this,arguments)}function ebe(t,e){if(t==null)return{};var n=tbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function nbe(t){var e=t.classNames,n=e===void 0?{}:e,r=t.items,s=r===void 0?[]:r,a=t.onRemove,o=a===void 0?function(){}:a,l=t.hasRefinements,u=l===void 0?!1:l,d=ebe(t,Xwe);return oe.createElement("div",vN({},d,{className:He("ais-CurrentRefinements",n.root,!u&&He("ais-CurrentRefinements--noRefinement",n.noRefinementRoot),d.className)}),oe.createElement("ul",{className:He("ais-CurrentRefinements-list",n.list,!u&&He("ais-CurrentRefinements-list--noRefinement",n.noRefinementList))},s.map(function(h){return oe.createElement("li",{key:[h.indexName,h.label].join("/"),className:He("ais-CurrentRefinements-item",n.item)},oe.createElement("span",{className:He("ais-CurrentRefinements-label",n.label)},h.label,":"),h.refinements.map(function(m){return oe.createElement("span",{key:m.label,className:He("ais-CurrentRefinements-category",n.category)},oe.createElement("span",{className:He("ais-CurrentRefinements-categoryLabel",n.categoryLabel)},m.label),oe.createElement("button",{type:"button",onClick:function(y){HV(y)||o(m)},className:He("ais-CurrentRefinements-delete",n.delete)},"✕"))}))})))}var rbe=["includedAttributes","excludedAttributes","transformItems"];function yN(){return yN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yN.apply(this,arguments)}function sbe(t,e){if(t==null)return{};var n=ibe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ibe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function abe(t){var e=t.includedAttributes,n=t.excludedAttributes,r=t.transformItems,s=sbe(t,rbe),a=O0e({includedAttributes:e,excludedAttributes:n,transformItems:r},{$$widgetType:"ais.currentRefinements"}),o=a.items,l=a.refine,u=a.canRefine,d={items:o,onRemove:l,hasRefinements:u};return oe.createElement(nbe,yN({},s,d))}var obe=["isShowingMore","translations"];function lbe(t,e){if(t==null)return{};var n=cbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ube(t){var e=t.isShowingMore,n=t.translations,r=lbe(t,obe);return oe.createElement("button",r,n.showMoreButtonText({isShowingMore:e}))}var dbe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qV=/&(amp|quot|lt|gt|#39);/g,hbe=RegExp(qV.source);function fbe(t){return t&&hbe.test(t)?t.replace(qV,function(e){return dbe[e]}):t}var UA={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function mbe(t){var e=UA.highlightPostTag,n=UA.highlightPreTag,r=t.split(n),s=r.shift(),a=s?[{value:s,isHighlighted:!1}]:[];return r.forEach(function(o){var l=o.split(e);a.push({value:l[0],isHighlighted:!0}),l[1]!==""&&a.push({value:l[1],isHighlighted:!1})}),a}var pbe=["parts","highlightedTagName","nonHighlightedTagName","separator","className","classNames"];function xN(){return xN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xN.apply(this,arguments)}function gbe(t,e){if(t==null)return{};var n=vbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ybe(t){var e=t.classNames,n=t.children,r=t.highlightedTagName,s=t.isHighlighted,a=t.nonHighlightedTagName,o=s?r:a;return oe.createElement(o,{className:s?e.highlighted:e.nonHighlighted},n)}function xbe(t){var e=t.parts,n=t.highlightedTagName,r=n===void 0?"mark":n,s=t.nonHighlightedTagName,a=s===void 0?"span":s,o=t.separator,l=o===void 0?", ":o,u=t.className,d=t.classNames,h=gbe(t,pbe);return oe.createElement("span",xN({},h,{className:He(d.root,u)}),e.map(function(m,p){var y=p===e.length-1;return oe.createElement(w.Fragment,{key:p},m.map(function(j,_){return oe.createElement(ybe,{key:_,classNames:d,highlightedTagName:r,nonHighlightedTagName:a,isHighlighted:j.isHighlighted},j.value)}),!y&&oe.createElement("span",{className:d.separator},l))}))}var wbe=["classNames"];function wN(){return wN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wN.apply(this,arguments)}function bbe(t,e){if(t==null)return{};var n=_be(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _be(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function jbe(t){var e=t.classNames,n=e===void 0?{}:e,r=bbe(t,wbe);return oe.createElement(xbe,wN({classNames:{root:He("ais-Highlight",n.root),highlighted:He("ais-Highlight-highlighted",n.highlighted),nonHighlighted:He("ais-Highlight-nonHighlighted",n.nonHighlighted),separator:He("ais-Highlight-separator",n.separator)}},r))}var Nbe=["hits","sendEvent","hitComponent","classNames"];function bN(){return bN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bN.apply(this,arguments)}function Sbe(t,e){if(t==null)return{};var n=Ebe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ebe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Pbe(t){var e=t.hit;return oe.createElement("div",{style:{wordBreak:"break-all"}},JSON.stringify(e).slice(0,100),"…")}function Cbe(t){var e=t.hits,n=t.sendEvent,r=t.hitComponent,s=r===void 0?Pbe:r,a=t.classNames,o=a===void 0?{}:a,l=Sbe(t,Nbe);return oe.createElement("div",bN({},l,{className:He("ais-Hits",o.root,e.length===0&&He("ais-Hits--empty",o.emptyRoot),l.className)}),oe.createElement("ol",{className:He("ais-Hits-list",o.list)},e.map(function(u){return oe.createElement("li",{key:u.objectID,className:He("ais-Hits-item",o.item),onClick:function(){n("click:internal",u,"Hit Clicked")},onAuxClick:function(){n("click:internal",u,"Hit Clicked")}},oe.createElement(s,{hit:u,sendEvent:n}))})))}var Tbe=["escapeHTML","transformItems"];function _N(){return _N=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_N.apply(this,arguments)}function Rbe(t,e){if(t==null)return{};var n=kbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Ibe(t){var e=t.escapeHTML,n=t.transformItems,r=Rbe(t,Tbe),s=$0e({escapeHTML:e,transformItems:n},{$$widgetType:"ais.hits"}),a=s.hits,o=s.sendEvent,l={hits:a,sendEvent:o};return oe.createElement(Cbe,_N({},r,l))}var Abe=["pages","currentPage","nbPages","isFirstPage","isLastPage","showFirst","showPrevious","showNext","showLast","createURL","onNavigate","translations","classNames"],Obe=["isDisabled","className","classNames","href","onClick"];function hg(){return hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hg.apply(this,arguments)}function GV(t,e){if(t==null)return{};var n=Mbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Dbe(t){var e=t.pages,n=t.currentPage,r=t.nbPages,s=t.isFirstPage,a=t.isLastPage,o=t.showFirst,l=o===void 0?!0:o,u=t.showPrevious,d=u===void 0?!0:u,h=t.showNext,m=h===void 0?!0:h,p=t.showLast,y=p===void 0?!0:p,j=t.createURL,_=t.onNavigate,N=t.translations,b=t.classNames,x=b===void 0?{}:b,S=GV(t,Abe),C=0,R=n-1,z=n+1,k=r-1;return oe.createElement("div",hg({},S,{className:He("ais-Pagination",x.root,r<=1&&He("ais-Pagination--noRefinement",x.noRefinementRoot),S.className)}),oe.createElement("ul",{className:He("ais-Pagination-list",x.list)},l&&oe.createElement(um,{isDisabled:s,className:He("ais-Pagination-item--firstPage",x.firstPageItem),classNames:x,"aria-label":N.firstPageItemAriaLabel,href:j(C),onClick:function(){return _(C)}},N.firstPageItemText),d&&oe.createElement(um,{isDisabled:s,className:He("ais-Pagination-item--previousPage",x.previousPageItem),classNames:x,"aria-label":N.previousPageItemAriaLabel,href:j(R),onClick:function(){return _(R)}},N.previousPageItemText),e.map(function(I){return oe.createElement(um,{key:I,isDisabled:!1,className:He("ais-Pagination-item--page",x.pageItem,I===n&&He("ais-Pagination-item--selected",x.selectedItem)),classNames:x,"aria-label":N.pageItemAriaLabel({currentPage:I+1,nbPages:r}),href:j(I),onClick:function(){return _(I)}},N.pageItemText({currentPage:I+1,nbPages:r}))}),m&&oe.createElement(um,{isDisabled:a,className:He("ais-Pagination-item--nextPage",x.nextPageItem),classNames:x,"aria-label":N.nextPageItemAriaLabel,href:j(z),onClick:function(){return _(z)}},N.nextPageItemText),y&&oe.createElement(um,{isDisabled:a,className:He("ais-Pagination-item--lastPage",x.lastPageItem),classNames:x,"aria-label":N.lastPageItemAriaLabel,href:j(k),onClick:function(){return _(k)}},N.lastPageItemText)))}function um(t){var e=t.isDisabled,n=t.className,r=t.classNames,s=t.href,a=t.onClick,o=GV(t,Obe);return e?oe.createElement("li",{className:He("ais-Pagination-item",r.item,"ais-Pagination-item--disabled",r.disabledItem,n)},oe.createElement("span",hg({className:He("ais-Pagination-link",r.link)},o))):oe.createElement("li",{className:He("ais-Pagination-item",r.item,n)},oe.createElement("a",hg({className:He("ais-Pagination-link",r.link),href:s,onClick:function(u){HV(u)||(u.preventDefault(),a(u))}},o)))}function fg(t){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fg(t)}var Lbe=["showFirst","showPrevious","showNext","showLast","padding","totalPages","translations"];function jN(){return jN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jN.apply(this,arguments)}function BA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Fbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BA(Object(n),!0).forEach(function(r){$be(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $be(t,e,n){return e=Vbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vbe(t){var e=zbe(t,"string");return fg(e)==="symbol"?e:String(e)}function zbe(t,e){if(fg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ube(t,e){if(t==null)return{};var n=Bbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Wbe(t){var e=t.showFirst,n=t.showPrevious,r=t.showNext,s=t.showLast,a=t.padding,o=t.totalPages,l=t.translations,u=Ube(t,Lbe),d=Q0e({padding:a,totalPages:o},{$$widgetType:"ais.pagination"}),h=d.pages,m=d.currentRefinement,p=d.isFirstPage,y=d.isLastPage,j=d.nbPages,_=d.createURL,N=d.refine,b={pages:h,currentPage:m,isFirstPage:p,isLastPage:y,nbPages:j,createURL:_,onNavigate:N,translations:Fbe({firstPageItemText:"‹‹",previousPageItemText:"‹",nextPageItemText:"›",lastPageItemText:"››",pageItemText:function(S){var C=S.currentPage;return String(C)},firstPageItemAriaLabel:"First",previousPageItemAriaLabel:"Previous",nextPageItemAriaLabel:"Next",lastPageItemAriaLabel:"Last",pageItemAriaLabel:function(S){var C=S.currentPage;return"Page ".concat(C)}},l)};return oe.createElement(Dbe,jN({},u,b,{showFirst:e,showPrevious:n,showNext:r,showLast:s}))}var Hbe=["classNames","range","start","step","disabled","onSubmit","translations"];function NN(){return NN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NN.apply(this,arguments)}function qbe(t,e){if(t==null)return{};var n=Gbe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Gbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function U_(t,e){return Ybe(t)||Qbe(t,e)||Zbe(t,e)||Kbe()}function Kbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zbe(t,e){if(t){if(typeof t=="string")return WA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WA(t,e)}}function WA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Ybe(t){if(Array.isArray(t))return t}var Cd="";function HA(t){return t.replace(/^(0+)\d/,function(e){return Number(e).toString()})}function Jbe(t){var e,n,r=t.classNames,s=r===void 0?{}:r,a=t.range,o=a.min,l=a.max,u=U_(t.start,2),d=u[0],h=u[1],m=t.step,p=m===void 0?1:m,y=t.disabled,j=t.onSubmit,_=t.translations,N=qbe(t,Hbe),b={min:d!==-1/0&&d!==o?d:Cd,max:h!==1/0&&h!==l?h:Cd},x=w.useState(b),S=U_(x,2),C=S[0],R=S[1],z=w.useState({from:(e=b.min)===null||e===void 0?void 0:e.toString(),to:(n=b.max)===null||n===void 0?void 0:n.toString()}),k=U_(z,2),I=k[0],V=I.from,T=I.to,O=k[1];if(b.min!==C.min||b.max!==C.max){var $,M;O({from:($=b.min)===null||$===void 0?void 0:$.toString(),to:(M=b.max)===null||M===void 0?void 0:M.toString()}),R(b)}return oe.createElement("div",NN({},N,{className:He(He("ais-RangeInput",s.root),y&&He("ais-RangeInput--noRefinement",s.noRefinementRoot),N.className)}),oe.createElement("form",{className:He("ais-RangeInput-form",s.form),onSubmit:function(J){J.preventDefault(),j([V?Number(V):void 0,T?Number(T):void 0])}},oe.createElement("label",{className:He("ais-RangeInput-label",s.label)},oe.createElement("input",{className:He("ais-RangeInput-input",s.input,"ais-RangeInput-input--min",s.inputMin),type:"number",min:o,max:l,value:HA(V||Cd),step:p,placeholder:o==null?void 0:o.toString(),disabled:y,onInput:function(J){var ee=J.currentTarget,K=ee.value;O({from:K||Cd,to:T})}})),oe.createElement("span",{className:He("ais-RangeInput-separator",s.separator)},_.separatorElementText),oe.createElement("label",{className:He("ais-RangeInput-label",s.label)},oe.createElement("input",{className:He("ais-RangeInput-input",s.input,"ais-RangeInput-input--max",s.inputMax),type:"number",min:o,max:l,value:HA(T||Cd),step:p,placeholder:l==null?void 0:l.toString(),disabled:y,onInput:function(J){var ee=J.currentTarget,K=ee.value;O({from:V,to:K||Cd})}})),oe.createElement("button",{className:He("ais-RangeInput-submit",s.submit),type:"submit"},_.submitButtonText)))}function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}var Xbe=["attribute","min","max","precision","translations"];function SN(){return SN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SN.apply(this,arguments)}function qA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function e_e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qA(Object(n),!0).forEach(function(r){t_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t_e(t,e,n){return e=n_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n_e(t){var e=r_e(t,"string");return mg(e)==="symbol"?e:String(e)}function r_e(t,e){if(mg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s_e(t,e){if(t==null)return{};var n=i_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function i_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function GA(t){var e=t.attribute,n=t.min,r=t.max,s=t.precision,a=t.translations,o=s_e(t,Xbe),l=iwe({attribute:e,min:n,max:r,precision:s},{$$widgetType:"ais.rangeInput"}),u=l.range,d=l.start,h=l.canRefine,m=l.refine,p=1/Math.pow(10,s||0),y={range:u,start:d,step:p,disabled:!h,onSubmit:m,translations:e_e({separatorElementText:"to",submitButtonText:"Go"},a)};return oe.createElement(Jbe,SN({},o,y))}var a_e=["canRefine","items","onRefine","query","searchBox","noResults","showMore","canToggleShowMore","onToggleShowMore","isShowingMore","className","classNames","translations"];function EN(){return EN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EN.apply(this,arguments)}function o_e(t,e){if(t==null)return{};var n=l_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function l_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function c_e(t){var e=t.canRefine,n=t.items,r=t.onRefine,s=t.query,a=t.searchBox,o=t.noResults,l=t.showMore,u=t.canToggleShowMore,d=t.onToggleShowMore,h=t.isShowingMore,m=t.className,p=t.classNames,y=p===void 0?{}:p,j=t.translations,_=o_e(t,a_e);return oe.createElement("div",EN({},_,{className:He("ais-RefinementList",y.root,!e&&He("ais-RefinementList--noRefinement",y.noRefinementRoot),m)}),a&&oe.createElement("div",{className:He("ais-RefinementList-searchBox",y.searchBox)},a),o?oe.createElement("div",{className:He("ais-RefinementList-noResults",y.noResults)},o):oe.createElement("ul",{className:He("ais-RefinementList-list",y.list)},n.map(function(N){return oe.createElement("li",{key:N.value,className:He("ais-RefinementList-item",y.item,N.isRefined&&He("ais-RefinementList-item--selected",y.selectedItem))},oe.createElement("label",{className:He("ais-RefinementList-label",y.label)},oe.createElement("input",{checked:N.isRefined,className:He("ais-RefinementList-checkbox",y.checkbox),type:"checkbox",value:N.value,onChange:function(){r(N)}}),oe.createElement("span",{className:He("ais-RefinementList-labelText",y.labelText)},s.length>0?oe.createElement(jbe,{parts:[mbe(fbe(N.highlighted||""))]}):N.label),oe.createElement("span",{className:He("ais-RefinementList-count",y.count)},N.count)))})),l&&oe.createElement(ube,{className:He("ais-RefinementList-showMore",y.showMore,!u&&He("ais-RefinementList-showMore--disabled",y.disabledShowMore)),disabled:!u,onClick:d,isShowingMore:h,translations:j}))}var u_e=["formRef","inputRef","isSearchStalled","onChange","onReset","onSubmit","placeholder","value","autoFocus","resetIconComponent","submitIconComponent","loadingIconComponent","classNames","translations"];function PN(){return PN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PN.apply(this,arguments)}function d_e(t,e){if(t==null)return{};var n=h_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function h_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var f_e=oe.createElement("path",{d:"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"});function m_e(t){var e=t.classNames;return oe.createElement("svg",{className:He("ais-SearchBox-submitIcon",e.submitIcon),width:"10",height:"10",viewBox:"0 0 40 40","aria-hidden":"true"},f_e)}var p_e=oe.createElement("path",{d:"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z"});function g_e(t){var e=t.classNames;return oe.createElement("svg",{className:He("ais-SearchBox-resetIcon",e.resetIcon),viewBox:"0 0 20 20",width:"10",height:"10","aria-hidden":"true"},p_e)}var v_e=oe.createElement("g",{fill:"none",fillRule:"evenodd"},oe.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},oe.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),oe.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},oe.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}))));function y_e(t){var e=t.classNames;return oe.createElement("svg",{width:"16",height:"16",viewBox:"0 0 38 38",stroke:"#444",className:He("ais-SearchBox-loadingIcon",e.loadingIcon),"aria-hidden":"true"},v_e)}function KV(t){var e=t.formRef,n=t.inputRef,r=t.isSearchStalled,s=t.onChange,a=t.onReset,o=t.onSubmit,l=t.placeholder,u=t.value,d=t.autoFocus,h=t.resetIconComponent,m=h===void 0?g_e:h,p=t.submitIconComponent,y=p===void 0?m_e:p,j=t.loadingIconComponent,_=j===void 0?y_e:j,N=t.classNames,b=N===void 0?{}:N,x=t.translations,S=d_e(t,u_e);function C(z){z.preventDefault(),z.stopPropagation(),o&&o(z),n.current&&n.current.blur()}function R(z){z.preventDefault(),z.stopPropagation(),a(z),n.current&&n.current.focus()}return oe.createElement("div",PN({},S,{className:He("ais-SearchBox",b.root,S.className)}),oe.createElement("form",{ref:e,action:"",className:He("ais-SearchBox-form",b.form),noValidate:!0,onSubmit:C,onReset:R},oe.createElement("input",{ref:n,className:He("ais-SearchBox-input",b.input),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",placeholder:l,spellCheck:!1,maxLength:512,type:"search",value:u,onChange:s,autoFocus:d}),oe.createElement("button",{className:He("ais-SearchBox-submit",b.submit),type:"submit",title:x.submitButtonTitle},oe.createElement(y,{classNames:b})),oe.createElement("button",{className:He("ais-SearchBox-reset",b.reset),type:"reset",title:x.resetButtonTitle,hidden:u.length===0||r},oe.createElement(m,{classNames:b})),oe.createElement("span",{className:He("ais-SearchBox-loadingIndicator",b.loadingIndicator),hidden:!r},oe.createElement(_,{classNames:b}))))}function pg(t){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(t)}var x_e=["searchable","searchablePlaceholder","attribute","operator","limit","showMore","showMoreLimit","sortBy","escapeFacetValues","transformItems","translations"];function CN(){return CN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CN.apply(this,arguments)}function KA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function w_e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KA(Object(n),!0).forEach(function(r){b_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b_e(t,e,n){return e=__e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function __e(t){var e=j_e(t,"string");return pg(e)==="symbol"?e:String(e)}function j_e(t,e){if(pg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N_e(t,e){return C_e(t)||P_e(t,e)||E_e(t,e)||S_e()}function S_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E_e(t,e){if(t){if(typeof t=="string")return ZA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZA(t,e)}}function ZA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function C_e(t){if(Array.isArray(t))return t}function T_e(t,e){if(t==null)return{};var n=R_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function R_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function QA(t){var e=t.searchable,n=t.searchablePlaceholder,r=t.attribute,s=t.operator,a=t.limit,o=t.showMore,l=t.showMoreLimit,u=t.sortBy,d=t.escapeFacetValues,h=t.transformItems,m=t.translations,p=T_e(t,x_e),y=hwe({attribute:r,operator:s,limit:a,showMore:o,showMoreLimit:l,sortBy:u,escapeFacetValues:d,transformItems:h},{$$widgetType:"ais.refinementList"}),j=y.canRefine,_=y.canToggleShowMore,N=y.isFromSearch,b=y.isShowingMore,x=y.items,S=y.refine,C=y.searchForItems,R=y.toggleShowMore,z=w.useState(""),k=N_e(z,2),I=k[0],V=k[1],T=w.useRef(null);function O(D){V(D),C(D)}function $(D){S(D.value),O("")}function M(D){O(D.currentTarget.value)}function B(){O("")}function J(){x.length>0&&(S(x[0].value),O(""))}var ee=w_e({resetButtonTitle:"Clear the search query",submitButtonTitle:"Submit the search query",noResultsText:"No results.",showMoreButtonText:function(G){return G.isShowingMore?"Show less":"Show more"}},m),K={items:x,canRefine:j,onRefine:$,query:I,searchBox:e&&oe.createElement(KV,{inputRef:T,placeholder:n,isSearchStalled:!1,value:I,onChange:M,onReset:B,onSubmit:J,translations:{submitButtonTitle:ee.submitButtonTitle,resetButtonTitle:ee.resetButtonTitle}}),noResults:e&&N&&x.length===0&&ee.noResultsText,canToggleShowMore:_,onToggleShowMore:R,isShowingMore:b,translations:{showMoreButtonText:ee.showMoreButtonText}};return oe.createElement(c_e,CN({},p,K,{showMore:o}))}function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}var k_e=["queryHook","searchAsYouType","translations"];function TN(){return TN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TN.apply(this,arguments)}function YA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function I_e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YA(Object(n),!0).forEach(function(r){A_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A_e(t,e,n){return e=O_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O_e(t){var e=M_e(t,"string");return gg(e)==="symbol"?e:String(e)}function M_e(t,e){if(gg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D_e(t,e){return V_e(t)||$_e(t,e)||F_e(t,e)||L_e()}function L_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F_e(t,e){if(t){if(typeof t=="string")return JA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JA(t,e)}}function JA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function V_e(t){if(Array.isArray(t))return t}function z_e(t,e){if(t==null)return{};var n=U_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function U_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function B_e(t){var e=t.queryHook,n=t.searchAsYouType,r=n===void 0?!0:n,s=t.translations,a=z_e(t,k_e),o=xwe({queryHook:e},{$$widgetType:"ais.searchBox"}),l=o.query,u=o.refine,d=o.isSearchStalled,h=w.useState(l),m=D_e(h,2),p=m[0],y=m[1],j=w.useRef(null);function _(C){y(C),r&&u(C)}function N(){_(""),r||u("")}function b(C){_(C.currentTarget.value)}function x(C){r||u(p),a.onSubmit&&a.onSubmit(C)}l!==p&&document.activeElement!==j.current&&y(l);var S={inputRef:j,isSearchStalled:d,onChange:b,onReset:N,onSubmit:x,value:p,translations:I_e({submitButtonTitle:"Submit the search query",resetButtonTitle:"Clear the search query"},s)};return oe.createElement(KV,TN({},a,S))}var W_e=["items","value","onChange","classNames"];function RN(){return RN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RN.apply(this,arguments)}function H_e(t,e){if(t==null)return{};var n=q_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function q_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function G_e(t){var e=t.items,n=t.value,r=t.onChange,s=r===void 0?function(){}:r,a=t.classNames,o=a===void 0?{}:a,l=H_e(t,W_e);return oe.createElement("div",RN({},l,{className:He("ais-SortBy",o.root,l.className)}),oe.createElement("select",{className:He("ais-SortBy-select",o.select),onChange:function(d){return s(d.target.value)},value:n},e.map(function(u){return oe.createElement("option",{className:He("ais-SortBy-option",o.option),key:u.value,value:u.value},u.label)})))}var K_e=["items","transformItems"];function kN(){return kN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kN.apply(this,arguments)}function Z_e(t,e){if(t==null)return{};var n=Q_e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Q_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Y_e(t){var e=t.items,n=t.transformItems,r=Z_e(t,K_e),s=Nwe({items:e,transformItems:n},{$$widgetType:"ais.sortBy"}),a=s.currentRefinement,o=s.options,l=s.refine,u={items:o,value:a,onChange:l};return oe.createElement(G_e,kN({},r,u))}var J_e=["classNames","nbHits","processingTimeMS","nbSortedHits","areHitsSorted","translations"];function IN(){return IN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IN.apply(this,arguments)}function X_e(t,e){if(t==null)return{};var n=e1e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function e1e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function t1e(t){var e=t.classNames,n=e===void 0?{}:e,r=t.nbHits,s=t.processingTimeMS,a=t.nbSortedHits,o=t.areHitsSorted,l=t.translations,u=X_e(t,J_e),d={nbHits:r,processingTimeMS:s,nbSortedHits:a,areHitsSorted:o};return oe.createElement("div",IN({},u,{className:He("ais-Stats",n.root,u.className)}),oe.createElement("span",{className:"ais-Stats-text"},l.rootElementText(d)))}function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}var n1e=["translations"];function AN(){return AN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AN.apply(this,arguments)}function XA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function r1e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XA(Object(n),!0).forEach(function(r){s1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s1e(t,e,n){return e=i1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i1e(t){var e=a1e(t,"string");return vg(e)==="symbol"?e:String(e)}function a1e(t,e){if(vg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o1e(t,e){if(t==null)return{};var n=l1e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function l1e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function c1e(t){var e=t.translations,n=o1e(t,n1e),r=Rwe(void 0,{$$widgetType:"ais.stats"}),s=r.nbHits,a=r.nbSortedHits,o=r.processingTimeMS,l=r.areHitsSorted,u=function(m){return m.areHitsSorted?"".concat(m.nbSortedHits.toLocaleString()," relevant results sorted out of ").concat(m.nbHits.toLocaleString()," found in ").concat(m.processingTimeMS.toLocaleString(),"ms"):"".concat(m.nbHits.toLocaleString()," results found in ").concat(m.processingTimeMS.toLocaleString(),"ms")},d={nbHits:s,nbSortedHits:a,processingTimeMS:o,areHitsSorted:l,translations:r1e({rootElementText:(e==null?void 0:e.stats)||u},e)};return oe.createElement(t1e,AN({},n,d))}var u1e=["classNames","checked","onChange","label"];function ON(){return ON=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ON.apply(this,arguments)}function d1e(t,e){if(t==null)return{};var n=h1e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function h1e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function f1e(t){var e=t.classNames,n=e===void 0?{}:e,r=t.checked,s=t.onChange,a=t.label,o=d1e(t,u1e);return oe.createElement("div",ON({},o,{className:He("ais-ToggleRefinement",n.root,o.className)}),oe.createElement("label",{className:He("ais-ToggleRefinement-label",n.label)},oe.createElement("input",{className:He("ais-ToggleRefinement-checkbox",n.checkbox),type:"checkbox",checked:r,onChange:function(u){s(u.target.checked)}}),oe.createElement("span",{className:He("ais-ToggleRefinement-labelText",n.labelText)},a)))}var m1e=["attribute","on","off"];function MN(){return MN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MN.apply(this,arguments)}function p1e(t,e){if(t==null)return{};var n=g1e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function g1e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function v1e(t){var e=t.attribute,n=t.on,r=t.off,s=p1e(t,m1e),a=Vwe({attribute:e,on:n,off:r},{$$widgetType:"ais.toggleRefinement"}),o=a.refine,l=a.value,u={checked:l.isRefined,onChange:function(h){return o({isRefined:!h})}};return oe.createElement(f1e,MN({label:l.name},s,u))}var ZV={exports:{}};/*! algoliasearch-lite.umd.js | 4.25.2 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */(function(t,e){(function(n,r){t.exports=r()})(sO,function(){function n(ne,ie,ae){return ie in ne?Object.defineProperty(ne,ie,{value:ae,enumerable:!0,configurable:!0,writable:!0}):ne[ie]=ae,ne}function r(ne,ie){var ae=Object.keys(ne);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(ne);ie&&(Z=Z.filter(function(ce){return Object.getOwnPropertyDescriptor(ne,ce).enumerable})),ae.push.apply(ae,Z)}return ae}function s(ne){for(var ie=1;ie<arguments.length;ie++){var ae=arguments[ie]!=null?arguments[ie]:{};ie%2?r(Object(ae),!0).forEach(function(Z){n(ne,Z,ae[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(ae)):r(Object(ae)).forEach(function(Z){Object.defineProperty(ne,Z,Object.getOwnPropertyDescriptor(ae,Z))})}return ne}function a(ne,ie){if(ne==null)return{};var ae,Z,ce=function(ke,be){if(ke==null)return{};var re,_e,Ee={},de=Object.keys(ke);for(_e=0;_e<de.length;_e++)re=de[_e],be.indexOf(re)>=0||(Ee[re]=ke[re]);return Ee}(ne,ie);if(Object.getOwnPropertySymbols){var ve=Object.getOwnPropertySymbols(ne);for(Z=0;Z<ve.length;Z++)ae=ve[Z],ie.indexOf(ae)>=0||Object.prototype.propertyIsEnumerable.call(ne,ae)&&(ce[ae]=ne[ae])}return ce}function o(ne,ie){return function(ae){if(Array.isArray(ae))return ae}(ne)||function(ae,Z){if(Symbol.iterator in Object(ae)||Object.prototype.toString.call(ae)==="[object Arguments]"){var ce=[],ve=!0,ke=!1,be=void 0;try{for(var re,_e=ae[Symbol.iterator]();!(ve=(re=_e.next()).done)&&(ce.push(re.value),!Z||ce.length!==Z);ve=!0);}catch(Ee){ke=!0,be=Ee}finally{try{ve||_e.return==null||_e.return()}finally{if(ke)throw be}}return ce}}(ne,ie)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(ne){return function(ie){if(Array.isArray(ie)){for(var ae=0,Z=new Array(ie.length);ae<ie.length;ae++)Z[ae]=ie[ae];return Z}}(ne)||function(ie){if(Symbol.iterator in Object(ie)||Object.prototype.toString.call(ie)==="[object Arguments]")return Array.from(ie)}(ne)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(ne){var ie,ae="algoliasearch-client-js-".concat(ne.key),Z=function(){return ie===void 0&&(ie=ne.localStorage||window.localStorage),ie},ce=function(){return JSON.parse(Z().getItem(ae)||"{}")},ve=function(be){Z().setItem(ae,JSON.stringify(be))},ke=function(){var be=ne.timeToLive?1e3*ne.timeToLive:null,re=ce(),_e=Object.fromEntries(Object.entries(re).filter(function(de){return o(de,2)[1].timestamp!==void 0}));if(ve(_e),be){var Ee=Object.fromEntries(Object.entries(_e).filter(function(de){var H=o(de,2)[1],Y=new Date().getTime();return!(H.timestamp+be<Y)}));ve(Ee)}};return{get:function(be,re){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){ke();var Ee=JSON.stringify(be);return ce()[Ee]}).then(function(Ee){return Promise.all([Ee?Ee.value:re(),Ee!==void 0])}).then(function(Ee){var de=o(Ee,2),H=de[0],Y=de[1];return Promise.all([H,Y||_e.miss(H)])}).then(function(Ee){return o(Ee,1)[0]})},set:function(be,re){return Promise.resolve().then(function(){var _e=ce();return _e[JSON.stringify(be)]={timestamp:new Date().getTime(),value:re},Z().setItem(ae,JSON.stringify(_e)),re})},delete:function(be){return Promise.resolve().then(function(){var re=ce();delete re[JSON.stringify(be)],Z().setItem(ae,JSON.stringify(re))})},clear:function(){return Promise.resolve().then(function(){Z().removeItem(ae)})}}}function d(ne){var ie=l(ne.caches),ae=ie.shift();return ae===void 0?{get:function(Z,ce){var ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},ke=ce();return ke.then(function(be){return Promise.all([be,ve.miss(be)])}).then(function(be){return o(be,1)[0]})},set:function(Z,ce){return Promise.resolve(ce)},delete:function(Z){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(Z,ce){var ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return ae.get(Z,ce,ve).catch(function(){return d({caches:ie}).get(Z,ce,ve)})},set:function(Z,ce){return ae.set(Z,ce).catch(function(){return d({caches:ie}).set(Z,ce)})},delete:function(Z){return ae.delete(Z).catch(function(){return d({caches:ie}).delete(Z)})},clear:function(){return ae.clear().catch(function(){return d({caches:ie}).clear()})}}}function h(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},ie={};return{get:function(ae,Z){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},ve=JSON.stringify(ae);if(ve in ie)return Promise.resolve(ne.serializable?JSON.parse(ie[ve]):ie[ve]);var ke=Z(),be=ce&&ce.miss||function(){return Promise.resolve()};return ke.then(function(re){return be(re)}).then(function(){return ke})},set:function(ae,Z){return ie[JSON.stringify(ae)]=ne.serializable?JSON.stringify(Z):Z,Promise.resolve(Z)},delete:function(ae){return delete ie[JSON.stringify(ae)],Promise.resolve()},clear:function(){return ie={},Promise.resolve()}}}function m(ne){for(var ie=ne.length-1;ie>0;ie--){var ae=Math.floor(Math.random()*(ie+1)),Z=ne[ie];ne[ie]=ne[ae],ne[ae]=Z}return ne}function p(ne,ie){return ie&&Object.keys(ie).forEach(function(ae){ne[ae]=ie[ae](ne)}),ne}function y(ne){for(var ie=arguments.length,ae=new Array(ie>1?ie-1:0),Z=1;Z<ie;Z++)ae[Z-1]=arguments[Z];var ce=0;return ne.replace(/%s/g,function(){return encodeURIComponent(ae[ce++])})}var j={WithinQueryParameters:0,WithinHeaders:1};function _(ne,ie){var ae=ne||{},Z=ae.data||{};return Object.keys(ae).forEach(function(ce){["timeout","headers","queryParameters","data","cacheable"].indexOf(ce)===-1&&(Z[ce]=ae[ce])}),{data:Object.entries(Z).length>0?Z:void 0,timeout:ae.timeout||ie,headers:ae.headers||{},queryParameters:ae.queryParameters||{},cacheable:ae.cacheable}}var N={Read:1,Write:2,Any:3},b=1,x=2,S=3;function C(ne){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b;return s(s({},ne),{},{status:ie,lastUpdate:Date.now()})}function R(ne){return typeof ne=="string"?{protocol:"https",url:ne,accept:N.Any}:{protocol:ne.protocol||"https",url:ne.url,accept:ne.accept||N.Any}}var z="GET",k="POST";function I(ne,ie){return Promise.all(ie.map(function(ae){return ne.get(ae,function(){return Promise.resolve(C(ae))})})).then(function(ae){var Z=ae.filter(function(ke){return function(be){return be.status===b||Date.now()-be.lastUpdate>12e4}(ke)}),ce=ae.filter(function(ke){return function(be){return be.status===S&&Date.now()-be.lastUpdate<=12e4}(ke)}),ve=[].concat(l(Z),l(ce));return{getTimeout:function(ke,be){return(ce.length===0&&ke===0?1:ce.length+3+ke)*be},statelessHosts:ve.length>0?ve.map(function(ke){return R(ke)}):ie}})}function V(ne,ie,ae,Z){var ce=[],ve=function(H,Y){if(!(H.method===z||H.data===void 0&&Y.data===void 0)){var se=Array.isArray(H.data)?H.data:s(s({},H.data),Y.data);return JSON.stringify(se)}}(ae,Z),ke=function(H,Y){var se=s(s({},H.headers),Y.headers),je={};return Object.keys(se).forEach(function(ye){var we=se[ye];je[ye.toLowerCase()]=we}),je}(ne,Z),be=ae.method,re=ae.method!==z?{}:s(s({},ae.data),Z.data),_e=s(s(s({"x-algolia-agent":ne.userAgent.value},ne.queryParameters),re),Z.queryParameters),Ee=0,de=function H(Y,se){var je=Y.pop();if(je===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, please reach out to the Algolia Support team: https://alg.li/support .",transporterStackTrace:M(ce)};var ye={data:ve,headers:ke,method:be,url:O(je,ae.path,_e),connectTimeout:se(Ee,ne.timeouts.connect),responseTimeout:se(Ee,Z.timeout)},we=function(Me){var qe={request:ye,response:Me,host:je,triesLeft:Y.length};return ce.push(qe),qe},Ie={onSuccess:function(Me){return function(qe){try{return JSON.parse(qe.content)}catch(Tt){throw function(Lt,nn){return{name:"DeserializationError",message:Lt,response:nn}}(Tt.message,qe)}}(Me)},onRetry:function(Me){var qe=we(Me);return Me.isTimedOut&&Ee++,Promise.all([ne.logger.info("Retryable failure",B(qe)),ne.hostsCache.set(je,C(je,Me.isTimedOut?S:x))]).then(function(){return H(Y,se)})},onFail:function(Me){throw we(Me),function(qe,Tt){var Lt=qe.content,nn=qe.status,Cr=Lt;try{Cr=JSON.parse(Lt).message}catch{}return function(zr,Ur,si){return{name:"ApiError",message:zr,status:Ur,transporterStackTrace:si}}(Cr,nn,Tt)}(Me,M(ce))}};return ne.requester.send(ye).then(function(Me){return function(qe,Tt){return function(Lt){var nn=Lt.status;return Lt.isTimedOut||function(Cr){var zr=Cr.isTimedOut,Ur=Cr.status;return!zr&&~~Ur==0}(Lt)||~~(nn/100)!=2&&~~(nn/100)!=4}(qe)?Tt.onRetry(qe):~~(qe.status/100)==2?Tt.onSuccess(qe):Tt.onFail(qe)}(Me,Ie)})};return I(ne.hostsCache,ie).then(function(H){return de(l(H.statelessHosts).reverse(),H.getTimeout)})}function T(ne){var ie={value:"Algolia for JavaScript (".concat(ne,")"),add:function(ae){var Z="; ".concat(ae.segment).concat(ae.version!==void 0?" (".concat(ae.version,")"):"");return ie.value.indexOf(Z)===-1&&(ie.value="".concat(ie.value).concat(Z)),ie}};return ie}function O(ne,ie,ae){var Z=$(ae),ce="".concat(ne.protocol,"://").concat(ne.url,"/").concat(ie.charAt(0)==="/"?ie.substr(1):ie);return Z.length&&(ce+="?".concat(Z)),ce}function $(ne){return Object.keys(ne).map(function(ie){return y("%s=%s",ie,(ae=ne[ie],Object.prototype.toString.call(ae)==="[object Object]"||Object.prototype.toString.call(ae)==="[object Array]"?JSON.stringify(ne[ie]):ne[ie]));var ae}).join("&")}function M(ne){return ne.map(function(ie){return B(ie)})}function B(ne){var ie=ne.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return s(s({},ne),{},{request:s(s({},ne.request),{},{headers:s(s({},ne.request.headers),ie)})})}var J=function(ne){var ie=ne.appId,ae=function(ce,ve,ke){var be={"x-algolia-api-key":ke,"x-algolia-application-id":ve};return{headers:function(){return ce===j.WithinHeaders?be:{}},queryParameters:function(){return ce===j.WithinQueryParameters?be:{}}}}(ne.authMode!==void 0?ne.authMode:j.WithinHeaders,ie,ne.apiKey),Z=function(ce){var ve=ce.hostsCache,ke=ce.logger,be=ce.requester,re=ce.requestsCache,_e=ce.responsesCache,Ee=ce.timeouts,de=ce.userAgent,H=ce.hosts,Y=ce.queryParameters,se={hostsCache:ve,logger:ke,requester:be,requestsCache:re,responsesCache:_e,timeouts:Ee,userAgent:de,headers:ce.headers,queryParameters:Y,hosts:H.map(function(je){return R(je)}),read:function(je,ye){var we=_(ye,se.timeouts.read),Ie=function(){return V(se,se.hosts.filter(function(qe){return(qe.accept&N.Read)!=0}),je,we)};if((we.cacheable!==void 0?we.cacheable:je.cacheable)!==!0)return Ie();var Me={request:je,mappedRequestOptions:we,transporter:{queryParameters:se.queryParameters,headers:se.headers}};return se.responsesCache.get(Me,function(){return se.requestsCache.get(Me,function(){return se.requestsCache.set(Me,Ie()).then(function(qe){return Promise.all([se.requestsCache.delete(Me),qe])},function(qe){return Promise.all([se.requestsCache.delete(Me),Promise.reject(qe)])}).then(function(qe){var Tt=o(qe,2);return Tt[0],Tt[1]})})},{miss:function(qe){return se.responsesCache.set(Me,qe)}})},write:function(je,ye){return V(se,se.hosts.filter(function(we){return(we.accept&N.Write)!=0}),je,_(ye,se.timeouts.write))}};return se}(s(s({hosts:[{url:"".concat(ie,"-dsn.algolia.net"),accept:N.Read},{url:"".concat(ie,".algolia.net"),accept:N.Write}].concat(m([{url:"".concat(ie,"-1.algolianet.com")},{url:"".concat(ie,"-2.algolianet.com")},{url:"".concat(ie,"-3.algolianet.com")}]))},ne),{},{headers:s(s(s({},ae.headers()),{"content-type":"application/x-www-form-urlencoded"}),ne.headers),queryParameters:s(s({},ae.queryParameters()),ne.queryParameters)}));return p({transporter:Z,appId:ie,addAlgoliaAgent:function(ce,ve){Z.userAgent.add({segment:ce,version:ve})},clearCache:function(){return Promise.all([Z.requestsCache.clear(),Z.responsesCache.clear()]).then(function(){})}},ne.methods)},ee=function(ne){return function(ie,ae){return ie.method===z?ne.transporter.read(ie,ae):ne.transporter.write(ie,ae)}},K=function(ne){return function(ie){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z={transporter:ne.transporter,appId:ne.appId,indexName:ie};return p(Z,ae.methods)}},D=function(ne){return function(ie,ae){var Z=ie.map(function(ce){return s(s({},ce),{},{params:$(ce.params||{})})});return ne.transporter.read({method:k,path:"1/indexes/*/queries",data:{requests:Z},cacheable:!0},ae)}},G=function(ne){return function(ie,ae){return Promise.all(ie.map(function(Z){var ce=Z.params,ve=ce.facetName,ke=ce.facetQuery,be=a(ce,["facetName","facetQuery"]);return K(ne)(Z.indexName,{methods:{searchForFacetValues:fe}}).searchForFacetValues(ve,ke,s(s({},ae),be))}))}},q=function(ne){return function(ie,ae,Z){return ne.transporter.read({method:k,path:y("1/answers/%s/prediction",ne.indexName),data:{query:ie,queryLanguages:ae},cacheable:!0},Z)}},X=function(ne){return function(ie,ae){return ne.transporter.read({method:k,path:y("1/indexes/%s/query",ne.indexName),data:{query:ie},cacheable:!0},ae)}},fe=function(ne){return function(ie,ae,Z){return ne.transporter.read({method:k,path:y("1/indexes/%s/facets/%s/query",ne.indexName,ie),data:{facetQuery:ae},cacheable:!0},Z)}},Te=1,$e=2,ze=3,Le=function(ne){return function(ie,ae){var Z=ie.map(function(ce){return s(s({},ce),{},{threshold:ce.threshold||0})});return ne.transporter.read({method:k,path:"1/indexes/*/recommendations",data:{requests:Z},cacheable:!0},ae)}};function Ce(ne,ie,ae){var Z,ce={appId:ne,apiKey:ie,timeouts:{connect:1,read:2,write:30},requester:{send:function(ve){return new Promise(function(ke){var be=new XMLHttpRequest;be.open(ve.method,ve.url,!0),Object.keys(ve.headers).forEach(function(de){return be.setRequestHeader(de,ve.headers[de])});var re,_e=function(de,H){return setTimeout(function(){be.abort(),ke({status:0,content:H,isTimedOut:!0})},1e3*de)},Ee=_e(ve.connectTimeout,"Connection timeout");be.onreadystatechange=function(){be.readyState>be.OPENED&&re===void 0&&(clearTimeout(Ee),re=_e(ve.responseTimeout,"Socket timeout"))},be.onerror=function(){be.status===0&&(clearTimeout(Ee),clearTimeout(re),ke({content:be.responseText||"Network request failed",status:be.status,isTimedOut:!1}))},be.onload=function(){clearTimeout(Ee),clearTimeout(re),ke({content:be.responseText,status:be.status,isTimedOut:!1})},be.send(ve.data)})}},logger:(Z=ze,{debug:function(ve,ke){return Te>=Z&&console.debug(ve,ke),Promise.resolve()},info:function(ve,ke){return $e>=Z&&console.info(ve,ke),Promise.resolve()},error:function(ve,ke){return console.error(ve,ke),Promise.resolve()}}),responsesCache:h(),requestsCache:h({serializable:!1}),hostsCache:d({caches:[u({key:"".concat("4.25.2","-").concat(ne)}),h()]}),userAgent:T("4.25.2").add({segment:"Browser",version:"lite"}),authMode:j.WithinQueryParameters};return J(s(s(s({},ce),ae),{},{methods:{search:D,searchForFacetValues:G,multipleQueries:D,multipleSearchForFacetValues:G,customRequest:ee,initIndex:function(ve){return function(ke){return K(ve)(ke,{methods:{search:X,searchForFacetValues:fe,findAnswers:q}})}},getRecommendations:Le}}))}return Ce.version="4.25.2",Ce})})(ZV);var y1e=ZV.exports;const QV=Go(y1e);function x1e(t){return xr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function w1e(t){return xr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function b1e(t){return xr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function _1e(t){return xr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function j1e(t){return xr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(t)}function YV(t){return xr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function EP(t){return xr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function JV(t){return xr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function XV(t){return xr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"polyline",attr:{points:"9 21 3 21 3 15"},child:[]},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(t)}function N1e(t){return xr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(t)}function S1e(t){return xr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const E1e=QV(pP,$9);function P1e({hit:t}){const e=t.title||t.titre||"Logement étudiant",n=t.city||t.ville||"",r=t.quartier||"",s=t.imageUrl||t.image||"",a=t.description||"",o=t.platform||t.sourceNormalized||"",l=t.rating||t.notation,u=t.reviewCount||0,d=t.price||t.prix,h=t.surface,m=t.logementTypes||t.types||[],p=t.hasAvailability||t.aDisponibilité||!1;return i.jsxs("article",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300",children:[s&&i.jsx("div",{className:"w-full h-48 overflow-hidden",children:i.jsx("img",{src:s,alt:e,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",loading:"lazy",onError:y=>{const j=y.target;j.style.display="none";const _=j.parentElement;_&&(_.innerHTML=`
                  <div class="w-full h-full bg-gray-100 flex items-center justify-center">
                    <svg class="w-12 h-12 text-gray-400" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M3 18v-6a9 9 0 0118 0v6h-3v-6a6 6 0 00-12 0v6H3z"/>
                      <path d="M21 19a2 2 0 01-2 2H5a2 2 0 01-2-2v-3a2 2 0 012-2h14a2 2 0 012 2v3z"/>
                    </svg>
                  </div>
                `)}})}),!s&&i.jsx("div",{className:"w-full h-48 bg-gray-100 flex items-center justify-center",children:i.jsx(EP,{className:"w-12 h-12 text-gray-400"})}),i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex-1 min-w-0 mr-3",children:[i.jsx("h2",{className:"font-bold text-lg text-gray-900 line-clamp-2 leading-tight mb-2",children:e}),i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(JV,{className:"w-4 h-4 mr-1 flex-shrink-0"}),i.jsxs("span",{className:"truncate",children:[n,r&&` • ${r}`]})]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-1 rounded-full whitespace-nowrap",children:o==="lokaviz"?"Lokaviz":o==="adele"?"Adele":o==="location-etudiant"?"Location Étudiant":o}),p&&i.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-1 rounded-full",children:"Disponible"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[d&&i.jsxs("div",{className:"flex items-center text-lg font-bold text-blue-600",children:[i.jsx("span",{className:"mr-1",children:"€"}),i.jsx("span",{children:d.toLocaleString("fr-FR")}),i.jsx("span",{className:"text-sm font-normal text-gray-500 ml-1",children:"/mois"})]}),h&&i.jsxs("div",{className:"flex items-center text-sm font-medium text-gray-600",children:[i.jsx(XV,{className:"w-4 h-4 mr-1"}),i.jsxs("span",{children:[h," m²"]})]})]}),a&&i.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 leading-relaxed",children:a}),i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center text-yellow-500 text-sm",children:[i.jsx(N1e,{className:"w-4 h-4 mr-1 fill-current"}),i.jsx("span",{className:"font-medium",children:l?`${l}/5`:"N/A"}),u>0&&i.jsxs("span",{className:"text-gray-400 ml-1 text-xs",children:["(",u,")"]})]}),m.length>0&&i.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2.5 py-1 rounded-full font-medium",children:m[0]})]})}),i.jsx("div",{className:"border-t border-gray-100 pt-4",children:i.jsxs("a",{href:t.url||t.detailUrl||"#",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2.5 px-4 rounded-lg transition-colors text-sm",children:["Voir l'annonce",i.jsx(j1e,{className:"w-4 h-4 ml-2"})]})})]})]})}function C1e({isMobileOpen:t,toggleMobileFilters:e}){const[n,r]=w.useState(!1);return i.jsxs(i.Fragment,{children:[t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:e}),i.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 bg-white transform transition-transform duration-300 ease-in-out w-80
          ${t?"translate-x-0":"-translate-x-full"} 
          lg:relative lg:transform-none lg:w-72 overflow-y-auto shadow-lg lg:shadow-none`,children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 lg:hidden bg-white sticky top-0 z-10",children:[i.jsx("h2",{className:"font-bold text-lg",children:"Filtres"}),i.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Fermer les filtres",children:i.jsx(S1e,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-4 space-y-6 pb-20 lg:pb-4",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(YV,{className:"w-4 h-4 mr-2"}),"Recherche"]}),i.jsx(B_e,{placeholder:"Ville, quartier, adresse...",classNames:{root:"relative",form:"relative",input:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm placeholder-gray-500",submit:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",reset:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"}})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(x1e,{className:"w-4 h-4 mr-2"}),"Disponibilité"]}),i.jsx(v1e,{attribute:"hasAvailability",classNames:{root:"flex items-center",label:"flex items-center cursor-pointer text-sm text-gray-700",checkbox:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-3"},label:"Seulement les disponibles"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(JV,{className:"w-4 h-4 mr-2"}),"Ville"]}),i.jsx(QA,{attribute:"city",searchable:!0,showMore:!0,limit:5,showMoreLimit:20,classNames:{root:"space-y-3",searchBox:"mb-3",searchBoxInput:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",list:"space-y-1 max-h-48 overflow-y-auto",item:"flex items-center justify-between",label:"flex items-center cursor-pointer text-sm w-full hover:bg-gray-50 p-2 rounded transition-colors",checkbox:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-3 flex-shrink-0",labelText:"flex-1 text-gray-700 min-w-0 truncate",count:"text-xs bg-gray-100 text-gray-600 rounded-full px-2 py-0.5 font-medium ml-2 flex-shrink-0",showMore:"text-blue-600 text-sm hover:text-blue-800 mt-2 cursor-pointer"}})]}),i.jsxs("button",{onClick:()=>r(!n),className:"flex items-center text-blue-600 hover:text-blue-800 w-full justify-between py-3 px-4 bg-gray-50 rounded-lg transition-colors",children:[i.jsx("span",{className:"font-medium",children:n?"Moins de filtres":"Plus de filtres"}),n?i.jsx(b1e,{className:"w-4 h-4"}):i.jsx(w1e,{className:"w-4 h-4"})]}),n&&i.jsxs("div",{className:"space-y-6 border-t border-gray-200 pt-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(_1e,{className:"w-4 h-4 mr-2"}),"Prix (€/mois)"]}),i.jsx(GA,{attribute:"price",classNames:{root:"space-y-3",form:"flex gap-3 items-center",input:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",separator:"text-gray-500 font-medium",submit:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors"}})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(XV,{className:"w-4 h-4 mr-2"}),"Surface (m²)"]}),i.jsx(GA,{attribute:"surface",classNames:{root:"space-y-3",form:"flex gap-3 items-center",input:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",separator:"text-gray-500 font-medium",submit:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors"}})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(EP,{className:"w-4 h-4 mr-2"}),"Type de logement"]}),i.jsx(QA,{attribute:"logementTypes",limit:6,classNames:{root:"space-y-1",list:"space-y-1",item:"flex items-center justify-between",label:"flex items-center cursor-pointer text-sm w-full hover:bg-gray-50 p-2 rounded transition-colors",checkbox:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-3 flex-shrink-0",labelText:"flex-1 text-gray-700 min-w-0 truncate",count:"text-xs bg-gray-100 text-gray-600 rounded-full px-2 py-0.5 font-medium ml-2 flex-shrink-0"}})]})]}),i.jsx("div",{className:"sticky bottom-0 bg-white pt-4 border-t border-gray-200",children:i.jsx(Jwe,{classNames:{button:"w-full py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors text-sm"},translations:{resetButtonText:"Réinitialiser les filtres"}})})]})]})]})}function T1e(){const[t,e]=w.useState(!1);w.useEffect(()=>{const r=()=>{window.innerWidth>=1024&&t&&e(!1)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[t]),w.useEffect(()=>(document.body.style.overflow=t?"hidden":"",()=>{document.body.style.overflow=""}),[t]);const n=()=>e(!t);return i.jsx("div",{className:"min-h-screen bg-gray-50",children:i.jsxs(u0e,{searchClient:E1e,indexName:Bc,children:[i.jsx(Jve,{hitsPerPage:12,analytics:!0,enablePersonalization:!0}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8",children:[i.jsxs("header",{className:"mb-6 lg:mb-8",children:[i.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 flex items-center mb-2",children:[i.jsx(EP,{className:"w-6 h-6 sm:w-8 sm:h-8 mr-2 sm:mr-3 text-blue-600 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:"Logements étudiants"})]}),i.jsx("p",{className:"text-gray-600 text-sm sm:text-base lg:text-lg",children:"Trouvez votre logement idéal parmi des milliers d'annonces vérifiées"})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8",children:[i.jsxs("div",{className:"lg:w-72 flex-shrink-0",children:[i.jsx("div",{className:"lg:hidden mb-4",children:i.jsxs(te,{onClick:n,className:"w-full py-3 text-sm font-medium",variant:"outline",children:[i.jsx(YV,{className:"w-4 h-4 mr-2"}),"Filtrer les résultats"]})}),i.jsx(C1e,{isMobileOpen:t,toggleMobileFilters:n})]}),i.jsxs("main",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 sm:p-5 mb-6 shadow-sm",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsx(c1e,{classNames:{text:"text-gray-700 font-medium text-sm sm:text-base"},translations:{rootElementText:({nbHits:r,processingTimeMS:s})=>i.jsxs("span",{children:[i.jsx("span",{className:"font-semibold",children:r.toLocaleString("fr-FR")})," logements trouvés",i.jsxs("span",{className:"hidden sm:inline text-gray-500",children:[" en ",s,"ms"]})]})}}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 hidden sm:inline",children:"Trier par :"}),i.jsx(Y_e,{items:[{value:Bc,label:"Pertinence"},{value:`${Bc}_price_asc`,label:"Prix croissant"},{value:`${Bc}_price_desc`,label:"Prix décroissant"},{value:`${Bc}_quality_desc`,label:"Qualité"},{value:`${Bc}_date_desc`,label:"Plus récents"}],classNames:{root:"flex items-center",select:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"}})]})]}),i.jsx(abe,{classNames:{root:"flex flex-wrap gap-2 mt-4",category:"bg-blue-50 text-blue-700 px-3 py-1.5 rounded-full text-sm flex items-center border border-blue-200",label:"mr-2 font-medium truncate",delete:"ml-2 text-blue-600 hover:text-blue-800 cursor-pointer flex-shrink-0"}})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:i.jsx(Ibe,{hitComponent:P1e,classNames:{root:"col-span-full",list:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",item:"w-full"}})}),i.jsx("div",{className:"flex justify-center mt-8 lg:mt-12",children:i.jsx(Wbe,{classNames:{root:"flex items-center space-x-1",list:"flex items-center space-x-1",item:"flex items-center justify-center",pageItem:"w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors font-medium text-sm",selectedItem:"bg-blue-600 text-white border-blue-600 hover:bg-blue-700",disabledItem:"opacity-50 cursor-not-allowed",link:"w-full h-full flex items-center justify-center"},translations:{previousPageItemText:"‹",nextPageItemText:"›"},showFirst:!1,showLast:!1})})]})]})]})]})})}const R1e={xs:"w-5 h-5",small:"w-7 h-7",medium:"w-9 h-9",large:"w-14 h-14",xl:"w-20 h-20",xxl:"w-28 h-28"},k1e=({size:t="medium",className:e=""})=>i.jsxs("svg",{className:`${R1e[t]} ${e}`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"currentColor"}),i.jsx("path",{d:"M9 12L11 14L15 10",fill:"white"})]}),ez={xs:"w-7 h-7",small:"w-9 h-9",medium:"w-12 h-12",large:"w-16 h-16",xl:"w-20 h-20",xxl:"w-28 h-28"},eO=({size:t="medium",className:e=""})=>i.jsxs("svg",{className:`${ez[t]} ${e}`,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"botGradient",x1:"4.89",y1:"28.18",x2:"43.25",y2:"28.18",gradientUnits:"userSpaceOnUse",children:[i.jsx("stop",{offset:"0",stopColor:"#2ecc71"}),i.jsx("stop",{offset:"1",stopColor:"#4a90e2"})]})}),i.jsx("path",{fill:"url(#botGradient)",d:"m35.65,16.58H12.5c-4.19,0-7.61,3.41-7.61,7.61v7.98c0,4.19,3.41,7.61,7.61,7.61h23.15c4.19,0,7.61-3.41,7.61-7.61v-7.98c0-4.19-3.41-7.61-7.61-7.61Zm5.16,14.23c0,3.91-3.18,7.09-7.09,7.09H14.42c-3.91,0-7.09-3.18-7.09-7.09v-5.26c0-3.91,3.18-7.09,7.09-7.09h19.29c3.91,0,7.09,3.18,7.09,7.09v5.26Z"}),i.jsx("path",{fill:"url(#botGradient)",d:"m33.72,19.65H14.42c-3.25,0-5.9,2.65-5.9,5.90v5.26c0,3.25,2.65,5.90,5.90,5.90h19.29c3.25,0,5.9-2.65,5.9-5.90v-5.26c0-3.25-2.65-5.90-5.90-5.90Zm-18.63,10.53c-2.25,0-4.09-1.83-4.09-4.09s1.83-4.09,4.09-4.09,4.09,1.83,4.09,4.09-1.84,4.09-4.09,4.09Zm13.59,4.84h-9.22v-1.19h9.22v1.19Zm4.37-4.84c-2.25,0-4.09-1.83-4.09-4.09s1.84-4.09,4.09-4.09,4.09,1.83,4.09,4.09-1.83,4.09-4.09,4.09Z"}),i.jsx("path",{fill:"url(#botGradient)",d:"m24.07,13.01c-2.50,0-4.81.92-6.17,2.38h12.35c-1.36-1.46-3.67-2.38-6.17-2.38Z"}),i.jsx("path",{fill:"url(#botGradient)",d:"m23.48,6.11v5.73c.20-.01.39-.02.59-.02s.40,0,.59.02v-5.73c-.13.03-.26.05-.40.06-.07,0-.13,0-.20,0-.20,0-.40-.02-.59-.06Z"}),i.jsx("path",{fill:"url(#botGradient)",d:"m25.42,4.37c.65-.74.57-1.87-.17-2.52-.33-.29-.76-.44-1.17-.44-.49,0-.99.21-1.34.61-.65.74-.57,1.87.17,2.52.74.65,1.87.57,2.52-.17Z"}),i.jsx("path",{fill:"url(#botGradient)",d:"m44.40,23.39c.03.27.04.54.04.80v7.98c0,.12,0,.24-.01.36,1.23-.34,2.11-1.46,2.11-2.80v-3.56c0-1.33-.91-2.46-2.14-2.79Z"}),i.jsx("path",{fill:"url(#botGradient)",d:"m3.74,23.35c-1.30.29-2.28,1.46-2.28,2.83v3.56c0,1.39.95,2.54,2.25,2.83-.01-.13-.01-.26-.01-.39v-7.98c0-.29.01-.56.04-.84Z"})]}),tO=({size:t="medium",className:e=""})=>i.jsxs("svg",{className:`${ez[t]} ${e}`,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"messageGradient",x1:"10.33",y1:"28.52",x2:"45.94",y2:"28.52",gradientUnits:"userSpaceOnUse",children:[i.jsx("stop",{offset:"0",stopColor:"#2ecc71"}),i.jsx("stop",{offset:"1",stopColor:"#4a90e2"})]})}),i.jsx("path",{fill:"url(#messageGradient)",d:"m41.54,14.04H14.74c-.83,0-1.59.34-2.13.89-.55.55-.89,1.30-.89,2.13v16.48c0,.83.34,1.59.89,2.13.55.55,1.30.89,2.13.89h18.74c.19,0,.37.08.49.21l5.26,5.26v-4.77c0,.38.31-.69.69-.69h1.62c.83,0,1.59-.34,2.13-.89.55-.55.89-1.30.89-2.13v-16.48c0-.83-.34-1.59-.89-2.13-.55-.55-1.30-.89-2.13-.89h0Zm-26.80-1.38h26.80c1.21,0,2.31.50,3.11,1.29.80.80,1.29,1.90,1.29,3.11v16.48c0,1.21-.50,2.31-1.29,3.11-.80.80-1.90,1.29-3.11,1.29h-.93v5.75h0c0,.18-.07.35-.20.49-.27.27-.71.27-.98,0h0s-6.24-6.24-6.24-6.24H14.74c-1.21,0-2.31-.50-3.11-1.29-.80-.80-1.29-1.90-1.29-3.11v-16.48c0-1.21.50-2.31,1.29-3.11.80-.80,1.90-1.29,3.11-1.29Z"}),i.jsx("path",{fill:"url(#messageGradient)",d:"m5.39,6.88h19.07c.92,0,1.75.37,2.35.98.60.60.98,1.44.98,2.35v3.15c0,.38-.31.69-.69.69h-12.36c-.83,0-1.59.34-2.13.89-.55.55-.89,1.30-.89,2.13v7.61c0,.19-.08.37-.21.49l-4.48,4.47h0c-.27.27-.71.27-.98,0-.13-.13-.20-.31-.20-.49h0v-3.89h-.47c-.92,0-1.75-.37-2.35-.98-.60-.60-.98-1.44-.98-2.35v-11.72c0-.92.37-1.75.98-2.35.60-.60,1.44-.98,2.35-.98h0Zm19.07,1.38H5.39c-.54,0-1.02.22-1.38.57-.35.35-.57.84-.57,1.38v11.72c0,.54.22,1.02.57,1.38s.84.57,1.38.57h1.16c.38,0,.69.31.69.69v2.91l3.10-3.10v-7.32c0-1.21.50-2.31,1.29-3.11.80-.80,1.90-1.29,3.11-1.29h11.67v-2.46c0-.54-.22-1.02-.57-1.38-.35-.35-.84-.57-1.38-.57Z"})]}),Cm={appId:pP,apiKey:$9,indices:{jobs:V9,services:$me,logements:Bc,materiel:Vme}},nO="https://api.deepseek.com/v1/chat/completions",I1e="deepseek-chat",rO=`Tu es l'assistant IA de StudyMarket, une plateforme pour étudiants français.

RÔLE : Aider les étudiants à trouver des logements, jobs, services et matériel scolaire.

STYLE DE RÉPONSE :
- Naturel et conversationnel
- Réponses courtes et directes (2-3 phrases max)
- Éviter les listes à puces excessives
- Maximum 2-3 emojis par réponse
- Ton amical mais professionnel

SERVICES STUDYMARKET :
- Logements étudiants (studios, colocations, résidences)
- Jobs et stages compatibles avec les études
- Services entre étudiants (cours particuliers, aide)
- Matériel scolaire d'occasion (livres, ordinateurs, mobilier)

CONSEILS À DONNER :
- Budget logement Paris : 600-800€/mois, Lyon : 400-600€/mois
- Jobs étudiants : 15-20h/semaine max, cours particuliers 15-25€/h
- Vérifier toujours les annonces avant achat/location
- Utiliser la messagerie sécurisée de la plateforme

DONNÉES DISPONIBLES :
- Logements : adresse, prix, surface, services, garanties, date de disponibilité, source
- Jobs : position, company, location, salary_min/max, description, date
- Services/Matériel : titre, prix, description, localisation

Réponds de manière utile et concise. Si tu ne peux pas rechercher dans la base de données, donne des conseils pratiques basés sur ton expertise du marché étudiant français.`,A1e={logement:{keywords:["logement","coloc","appartement","studio","chambre","louer","location","bail","appart","t1","t2","t3","meublé","résidence","foyer","hébergement","habitat","loyer","caution"],index:Cm.indices.logements,label:"Logement",searchableAttributes:["adresse","date de disponibilité","garanties","lien","prix","services","source","taper","types","surface","services suplémentaire"]},job:{keywords:["job","emploi","stage","travail","alternance","cdi","cdd","interim","mission","poste","recrutement","embauche","candidature","offre","salaire","rémunération"],index:Cm.indices.jobs,label:"Job",searchableAttributes:["slug","company","date","epoch","position","salary_max","salary_min","url","location"]},service:{keywords:["service","cours","soutien","aide","particulier","tutorat","formation","coaching","assistance","prestation","accompagnement","conseil"],index:Cm.indices.services,label:"Service",searchableAttributes:["title","description","category"]},materiel:{keywords:["matériel","livre","ordinateur","équipement","fourniture","manuel","pc","laptop","tablette","calculatrice","bureau","chaise","lampe","sac","accessoire"],index:Cm.indices.materiel,label:"Matériel",searchableAttributes:["title","description","category"]}},O1e={Logement:["Pense à élargir ta recherche aux villes voisines pour plus d'options.","La colocation est souvent plus économique et conviviale !","N'hésite pas à demander des photos récentes et à visiter avant de t'engager.","Vérifie si tu es éligible aux aides au logement (CAF, APL, etc.).","Sois vigilant face aux offres trop alléchantes : privilégie les contacts via StudyMarket."],Job:["Prépare un CV à jour et une lettre de motivation personnalisée.","Certains jobs étudiants sont compatibles avec ton emploi du temps universitaire.","N'hésite pas à postuler à plusieurs offres pour maximiser tes chances.","Utilise la messagerie StudyMarket pour échanger en toute sécurité avec les employeurs."],Service:["Précise bien tes besoins ou compétences pour trouver le bon service ou client.","Privilégie les échanges via la messagerie sécurisée StudyMarket.","Demande des recommandations ou avis si possible.","Sois clair sur les tarifs et modalités avant de t'engager."],Matériel:["Vérifie l'état du matériel avant d'acheter ou de vendre.","Privilégie la remise en main propre pour plus de sécurité.","N'hésite pas à négocier le prix si besoin.","Ajoute plusieurs photos pour rassurer les acheteurs."]};function M1e(t){return t.length?t.length===1?t[0]:t.length===2?t[0]+" "+t[1]:t.slice(0,-1).join(" ")+" Enfin, "+t[t.length-1]:""}function D1e(t,e){const n=O1e[e]||[];return n.length?t+"<br /><br /><em>Conseil StudyMarket :</em> "+M1e(n):t}const L1e=[{name:"Accueil",path:"/"},{name:"Logements",path:"/housing"},{name:"Jobs",path:"/jobs"},{name:"Services",path:"/listings?category=services"},{name:"Matériel",path:"/listings?category=material"},{name:"Favoris",path:"/favorites"},{name:"Profil",path:"/profile"},{name:"Messages",path:"/messages"},{name:"Paiements",path:"/payments"},{name:"Paramètres",path:"/settings"},{name:"Aide",path:"/help"}];function F1e(t){const e=t.toLowerCase();return e.includes("accueil")||e.includes("home")||e.includes("plateforme")||e.includes("site")||e.includes("explorer")||e.includes("menu")||e.includes("pages")||e.includes("sections")||e.includes("tout")||e.includes("navigation")}function $1e(){return"<ul>"+L1e.map(t=>`<li>🔗 <a href="${t.path}">${t.name}</a></li>`).join("")+"</ul>"}function V1e(t){return!t||t.trim()===""||t.trim().toLowerCase()==="undefined"||t.trim().toLowerCase()==="null"?"🤖 Je n'ai pas compris ta demande. Peux-tu reformuler ?":t}function z1e(t){const e={},n=t.toLowerCase(),r=n.match(/(\d+)\s*(?:€|euros?|e)/);if(r){const u=parseInt(r[1]);n.includes("moins de")||n.includes("max")||n.includes("maximum")?e.priceMax=u:n.includes("plus de")||n.includes("min")||n.includes("minimum")?e.priceMin=u:e.priceTarget=u}const s=n.match(/(\d+)\s*(?:m²|m2|mètres? carrés?)/);s&&(e.surface=parseInt(s[1]));const a=["studio","t1","t2","t3","t4","f1","f2","f3","f4","colocation","chambre"];for(const u of a)if(n.includes(u)){e.type=u;break}const o=n.match(/(?:à|sur|vers|près de?|proche de?)\s+([a-zàâäéèêëïîôùûüÿæœç\s-]+?)(?:\s+(?:moins|plus|max|min|\d+|pour|avec|sans)|$)/i);o&&(e.location=o[1].trim());const l=["parking","balcon","terrasse","meublé","non meublé","ascenseur","gardien","wifi","fibre"];return e.services=l.filter(u=>n.includes(u)),e}function U1e(t,e){const n=[];if(t.priceMax&&n.push(`prix < ${t.priceMax}`),t.priceMin&&n.push(`prix > ${t.priceMin}`),t.priceTarget){const r=t.priceTarget*.2;n.push(`prix >= ${t.priceTarget-r} AND prix <= ${t.priceTarget+r}`)}return t.surface&&n.push(`surface >= ${t.surface}`),t.type&&e.label==="Logement"&&n.push(`types:${t.type}`),n.join(" AND ")}function B1e(t,e){let n=t.toLowerCase();return(e.priceMax||e.priceMin||e.priceTarget)&&(n=n.replace(/\d+\s*(?:€|euros?|e)/g,""),n=n.replace(/(?:moins|plus) de|max(?:imum)?|min(?:imum)?/g,"")),e.surface&&(n=n.replace(/\d+\s*(?:m²|m2|mètres? carrés?)/g,"")),e.location&&(n=n.replace(/(?:à|sur|vers|près de?|proche de?)\s+[a-zàâäéèêëïîôùûüÿæœç\s-]+/gi,"")),["je","cherche","veux","voudrais","recherche","besoin","de","un","une","des","le","la","les","pour","avec","sans"].forEach(s=>{n=n.replace(new RegExp(`\\b${s}\\b`,"g"),"")}),n.trim()||e.location||""}const W1e=()=>{const{userProfile:t,loading:e}=jn(),[n,r]=w.useState(!1),[s,a]=w.useState(!1),[o,l]=w.useState(!1),[u,d]=w.useState(""),h=I1e,[m,p]=w.useState(!1),[y,j]=w.useState(0),[_,N]=w.useState(0),[b,x]=w.useState(!1),[S,C]=w.useState(!1),[R,z]=w.useState({name:"",email:"",subject:"",message:""}),[k,I]=w.useState(!1),[V,T]=w.useState(!1),[O,$]=w.useState(null),M=w.useRef(null),B=w.useRef(null);w.useEffect(()=>{const de=()=>{x(window.innerWidth<768)};return de(),window.addEventListener("resize",de),()=>window.removeEventListener("resize",de)},[]),w.useEffect(()=>{const de=()=>{window.innerHeight<500&&window.innerWidth<768?p(!0):p(!1)};return window.addEventListener("resize",de),()=>window.removeEventListener("resize",de)},[]);const J=de=>{j(de.targetTouches[0].clientX)},ee=de=>{N(de.targetTouches[0].clientX)},K=()=>{if(!y||!_)return;const de=y-_,H=de>50;de<-50&&b&&r(!1),H&&b&&a(!0)},D=w.useCallback(()=>{if(e)return"Connexion en cours...";let de="";if(t&&(t.firstName&&t.lastName?de=`${t.firstName} ${t.lastName}`:t.firstName?de=t.firstName:t.displayName?de=t.displayName:t.email&&(de=t.email.split("@")[0])),b){let Y=`Salut${de?" "+de:""} ! 👋`;if(Y+=`

Je t'aide à trouver :`,Y+=`
• Logements • Jobs • Services • Matériel`,t!=null&&t.location){const se=t.location.toLowerCase();se.includes("paris")?Y+=`

💡 Paris : 600-800€/mois, quartiers République, Belleville.`:se.includes("lyon")&&(Y+=`

💡 Lyon : 400-600€/mois, quartiers Guillotière, Croix-Rousse.`)}return Y+=`

Que cherches-tu ?`,Y}let H=`Salut${de?" "+de:""} ! 👋`;if(H+=`

Je suis ton assistant StudyMarket. Je peux t'aider à trouver :`,H+=`
• Logements étudiants`,H+=`
• Jobs et stages`,H+=`
• Services entre étudiants`,H+=`
• Matériel scolaire`,t!=null&&t.location){const Y=t.location.toLowerCase();Y.includes("paris")?H+=`

💡 Pour Paris : budget logement 600-800€/mois, privilégie République, Belleville, Nation.`:Y.includes("lyon")&&(H+=`

💡 Pour Lyon : budget logement 400-600€/mois, regarde Guillotière, Croix-Rousse.`)}return H+=`

Que cherches-tu aujourd'hui ?`,H},[t,e,b]),[G,q]=w.useState({messages:[],loading:!1,error:null,retryCount:0});w.useEffect(()=>{const de={role:"assistant",content:D(),timestamp:Date.now()};q(H=>({...H,messages:[de]}))},[D]);const X=w.useCallback(()=>{M.current&&M.current.scrollIntoView({behavior:"smooth"})},[]);w.useEffect(()=>{var de;n&&!s&&(X(),(de=B.current)==null||de.focus())},[G.messages,n,s,X]),w.useEffect(()=>{if(!o)return;const de=H=>{H.target.closest(".chatbot-fab-menu")||l(!1)};return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[o]);async function fe(de,H,Y,se){const{appId:je,apiKey:ye}=Cm,Ie=QV(je,ye).initIndex(de),Me={hitsPerPage:20,attributesToRetrieve:"*",attributesToHighlight:["*"]};return Y&&(Me.filters=Y),se&&se.length>0&&(Me.restrictSearchableAttributes=se),(await Ie.search(H,Me)).hits}function Te(de){const H=de.toLowerCase();for(const[,Y]of Object.entries(A1e))if(Y.keywords.some(se=>H.includes(se)))return{index:Y.index,label:Y.label,searchableAttributes:Y.searchableAttributes};return null}const $e=(de,H)=>`Désolé, je ne peux pas rechercher dans la base pour le moment. 😅

Voici mes conseils d'expert pour ${H} :

**${de} :** ${de==="Logement"?"Vérifie les transports, demande plusieurs photos, prépare ton dossier à l'avance.":de==="Job"?"Adapte ton CV, sois réactif, privilégie la flexibilité horaires.":de==="Service"?"Précise tes besoins, utilise la messagerie sécurisée, demande des avis.":"Teste avant d'acheter, compare les prix, négocie si défauts mineurs."}

Tu peux naviguer directement sur StudyMarket pour voir toutes les offres ! 🚀`,ze=(de,H,Y,se)=>{if(de.length===0){let ye=`❌ Aucun ${H.toLowerCase()} trouvé pour "${Y}"<br />`;return se.priceMax&&(ye+="💡 Essaie d'augmenter ton budget ou d'élargir ta zone de recherche.<br />"),se.location&&(ye+=`💡 Regarde aussi dans les villes voisines de ${se.location}.<br />`),ye+="🔍 Essaie avec d'autres mots-clés ou poste une demande sur StudyMarket ! 😊<br />",ye=D1e(ye,H),ye}let je=`✅ ${de.length} ${H.toLowerCase()}(s) trouvé(s)`;return se.location&&(je+=` à ${se.location}`),se.priceMax&&(je+=` pour max ${se.priceMax}€`),je+=" :<br /><br />",de.slice(0,10).forEach((ye,we)=>{const Ie=ut=>ut.types?String(ut.types):ut.position?String(ut.position):ut.titre||ut.title||"Annonce",Me=ut=>{if(ut.prix!==void 0&&ut.prix!==null){const Oi=Number(ut.prix);if(!isNaN(Oi))return Oi+"€/mois"}return ut.salary_min||ut.salary_max?ut.salary_min&&ut.salary_max?`${ut.salary_min}€ - ${ut.salary_max}€`:ut.salary_min?`À partir de ${ut.salary_min}€`:`Jusqu'à ${ut.salary_max}€`:null},qe=ut=>ut.adresse||ut.location||ut.city||null,Tt=ut=>ut.privilege||ut.lien||ut.url||ut.link||ut.apply_url||null,Lt=ut=>ut.surface||ut.superficie||null,nn=ut=>ut.description||null,Cr=ut=>ut.company||null,zr=ut=>ut.services||null,Ur=ut=>ut["date de disponibilité"]||ut.date||null,si=ut=>ut.source_normalized||ut.source||null;je+=`<strong>${we+1}. ${Ie(ye)}</strong><br />`;const to=Me(ye);to&&(je+=`💰 ${to}<br />`);const ii=qe(ye);ii&&(je+=`📍 ${ii}<br />`);const Ii=Cr(ye);Ii&&(je+=`🏢 ${Ii}<br />`);const Nc=Lt(ye);Nc&&(je+=`📐 Surface: ${Nc} m²<br />`);const Xo=zr(ye);Xo&&(je+=`🏠 Services: ${Xo}<br />`);const Ai=Ur(ye);if(Ai){const ut=new Date(String(Ai)).toLocaleDateString("fr-FR");je+=`📅 ${H==="Logement"?"Disponible le":"Publié le"} ${ut}<br />`}const no=si(ye);no&&(je+=`📰 Source: ${no}<br />`);const el=nn(ye);if(el){const ut=String(el),Oi=ut.length>100?ut.substring(0,100)+"...":ut;je+=`📝 ${Oi}<br />`}const ai=Tt(ye);ai&&(je+=`🔗 <a href="${ai}" target="_blank">Voir l'annonce</a><br />`),je+="<br />"}),de.length>10&&(je+=`<em>... et ${de.length-10} autres résultats. Affine ta recherche pour voir les plus pertinents !</em><br />`),je},Le=()=>t?`${rO}

CONTEXTE UTILISATEUR:
- Nom: ${t.firstName||""} ${t.lastName||""}
- Email: ${t.email}
- Université: ${t.university||""}
- Domaine: ${t.fieldOfStudy||""}
- Localisation: ${t.location||""}`:rO,Ce=async()=>{var H,Y,se,je;if(!u.trim())return;const de=[...G.messages,{role:"user",content:u,timestamp:Date.now()}];q(ye=>({...ye,messages:de,loading:!0,error:null})),d("");try{if(F1e(u)){const we=`<strong>Voici les principales pages de StudyMarket :</strong><br />${$1e()}`;q(Ie=>({...Ie,messages:[...de,{role:"assistant",content:we,timestamp:Date.now()}],loading:!1}));return}const ye=Te(u);if(ye)try{const we=z1e(u),Ie=U1e(we,{label:ye.label}),Me=B1e(u,we);console.log("🔍 Recherche Algolia:",{index:ye.index,query:Me,filters:Ie,extractedFilters:we});const qe=await fe(ye.index,Me,Ie,ye.searchableAttributes),Tt=ze(qe,ye.label,u,we);q(Lt=>({...Lt,messages:[...de,{role:"assistant",content:Tt,timestamp:Date.now()}],loading:!1}))}catch(we){console.error("Erreur Algolia:",we);const Ie=$e(ye.label,u);q(Me=>({...Me,messages:[...de,{role:"assistant",content:Ie,timestamp:Date.now()}],loading:!1}))}else try{console.log("🔍 Vérification des clés API..."),console.log("Modèle sélectionné:",h);const we="sk-b3cc85cc3b114b559cc870a839c22c88";if(!we||we.trim()===""){q(Lt=>({...Lt,messages:[...de,{role:"assistant",content:"Désolé, aucune clé API DeepSeek valide trouvée. Contacte l'équipe technique.",timestamp:Date.now()}],loading:!1,error:"Clé API manquante"}));return}const Ie={model:h,messages:[{role:"system",content:Le()},...de.filter(Lt=>Lt.role!=="system").map(Lt=>({role:Lt.role,content:Lt.content}))],temperature:.7,max_tokens:800};console.log("🚀 Envoi requête vers:",nO);const Me=await fetch(nO,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${we}`},body:JSON.stringify(Ie)});if(console.log("📡 Statut réponse:",Me.status,Me.statusText),!Me.ok){const Lt=await Me.text();let nn="";throw Me.status===401?nn="Clé API DeepSeek invalide ou expirée.":Me.status===402?nn="Crédit insuffisant sur ton compte DeepSeek.":Me.status===429?nn="Limite de requêtes atteinte. Attends quelques minutes.":nn=`Erreur ${Me.status}: ${Lt}`,new Error(nn)}const qe=await Me.json();let Tt=V1e((se=(Y=(H=qe.choices)==null?void 0:H[0])==null?void 0:Y.message)==null?void 0:se.content);Tt==="🤖 Je n'ai pas compris ta demande. Peux-tu reformuler ?"&&((je=qe.error)!=null&&je.message?Tt=`Erreur API : ${qe.error.message}`:qe.detail&&(Tt=`Erreur API : ${qe.detail}`)),q(Lt=>({...Lt,messages:[...de,{role:"assistant",content:Tt,timestamp:Date.now()}],loading:!1}))}catch(we){q(Ie=>({...Ie,messages:[...de,{role:"assistant",content:`Désolé, problème technique temporaire. 😅

Mes conseils rapides :
• **Logement :** Vérifie les transports, prépare ton dossier
• **Job :** Adapte ton CV, sois réactif  
• **Matériel :** Teste avant d'acheter, compare les prix

Réessaie dans quelques minutes !`,timestamp:Date.now()}],loading:!1,error:`API Error: ${we instanceof Error?we.message:"Erreur inconnue"}`}))}}catch{q(ye=>({...ye,messages:[...de,{role:"assistant",content:`Erreur technique détectée. 🔧

Solutions :
• Rafraîchis la page (Ctrl+F5)
• Vérifie ta connexion internet
• Réessaie dans quelques minutes

StudyMarket.fr fonctionne normalement !`,timestamp:Date.now()}],loading:!1,error:"Erreur technique"}))}},ne=de=>{de.key==="Enter"&&!de.shiftKey&&(de.preventDefault(),Ce())},ie=()=>{q(de=>({...de,messages:[{role:"assistant",content:D(),timestamp:Date.now()}],loading:!1,error:null,retryCount:0}))},ae=()=>{const de=[...G.messages].reverse().find(H=>H.role==="user");de&&(d(de.content),setTimeout(()=>Ce(),100))},Z=()=>{l(!1),C(!0),r(!0)},ce=()=>{l(!1),C(!1),r(!0)},ve=()=>{a(!0)},ke=()=>{a(!1)},be=de=>{$(de),setTimeout(()=>{$(null)},800)},re=async de=>{de.preventDefault(),I(!0);try{const H=await fetch("https://kbbhglxrcywpcktkamhl.supabase.co/functions/v1/contact-email",{method:"POST",headers:{"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYmhnbHhyY3l3cGNrdGthbWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNTg5MTUsImV4cCI6MjA2NDczNDkxNX0.I8Lj0SuxxMeabmCc3IZ0ZGH_z44CJFLGExny8WA1q4A"},body:JSON.stringify({name:R.name,email:R.email,subject:R.subject,message:R.message})}),Y=await H.json();H.ok&&Y.success?(T(!0),console.log("Email de contact envoyé avec succès"),setTimeout(()=>{C(!1),T(!1),z({name:"",email:"",subject:"",message:""})},2e3)):(console.error("Erreur lors de l'envoi:",Y.error||"Erreur inconnue"),T(!0),setTimeout(()=>{C(!1),T(!1),z({name:"",email:"",subject:"",message:""})},2e3))}catch(H){console.error("Erreur lors de l'envoi du formulaire:",H),T(!0),setTimeout(()=>{C(!1),T(!1),z({name:"",email:"",subject:"",message:""})},2e3)}finally{I(!1)}},_e=(de,H)=>{z(Y=>({...Y,[de]:H}))},Ee=de=>de.replace(/###?\s*(\d+)?\.?\s*(.*?)(\n|$)/g,(H,Y,se)=>Y?`
${Y}⃣ ${se.trim()}
`:`
**${se.trim()}**
`).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br />");return i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
        /* === STYLES DESKTOP ORIGINAUX (INCHANGÉS) === */
        @media (min-width: 769px) {
          .chatbot-modal {
            width: 400px !important;
            max-width: 400px !important;
            right: 20px !important;
            bottom: 80px !important;
            height: 600px !important;
            max-height: 80vh !important;
            z-index: 1000 !important;
          }
          .chatbot-modal-minimized {
            width: 320px !important;
            height: 60px !important;
            right: 20px !important;
            bottom: 80px !important;
          }
          .chatbot-fab-btn {
            width: 56px !important;
            height: 56px !important;
            bottom: 20px !important;
            right: 20px !important;
            z-index: 999 !important;
          }
          .chatbot-fab-menu-items {
            bottom: 85px !important;
            right: 20px !important;
          }
          .chatbot-messages-container {
            max-height: 400px !important;
          }
          .chatbot-input-container {
            padding: 12px !important;
          }
          .chatbot-input {
            padding: 12px 16px !important;
            font-size: 14px !important;
          }
          .chatbot-send-btn {
            min-width: 48px !important;
            height: 48px !important;
          }
          .chatbot-controls {
            padding: 8px 12px !important;
            flex-wrap: wrap !important;
            gap: 8px !important;
          }
          .chatbot-model-select {
            max-width: 140px !important;
            font-size: 11px !important;
          }
          .message-bubble {
            max-width: 90% !important;
          }
        }
        
        /* === OPTIMISATIONS MOBILE UNIQUEMENT === */
        @media (max-width: 768px) {
          /* PLEIN ÉCRAN MOBILE MAIS DESCENDRE */
          .chatbot-modal {
            position: fixed !important;
            top: 60px !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            width: 100vw !important;
            height: calc(100vh - 60px) !important;
            max-width: none !important;
            max-height: none !important;
            border-radius: 0 !important;
            z-index: 1000 !important;
          }
          
          /* ÉTAT RÉDUIT SUR MOBILE - COMME UNE BARRE */
          .chatbot-modal-minimized {
            position: fixed !important;
            top: 60px !important;
            left: 10px !important;
            right: 10px !important;
            bottom: auto !important;
            width: calc(100vw - 20px) !important;
            height: 60px !important;
            border-radius: 12px !important;
            z-index: 1000 !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
            overflow: hidden !important;
          }
          
          /* HEADER MINIMISÉ MOBILE - occupe toute la hauteur */
          .chatbot-modal-minimized .chatbot-header {
            padding: 12px 16px !important;
            border-radius: 12px !important;
            height: 60px !important;
            box-sizing: border-box !important;
          }
          
          /* BOUTON FAB MOBILE */
          .chatbot-fab-btn {
            width: 60px !important;
            height: 60px !important;
            bottom: 20px !important;
            right: 20px !important;
            z-index: 999 !important;
          }
          
          .chatbot-fab-menu-items {
            bottom: 90px !important;
            right: 20px !important;
          }
          
          /* CONTAINER MESSAGES MOBILE */
          .chatbot-messages-container {
            height: calc(100vh - 220px) !important;
            max-height: none !important;
            padding: 16px 12px !important;
          }
          
          /* INPUT ZONE MOBILE */
          .chatbot-input-container {
            padding: 16px 12px !important;
            background: #ffffff !important;
            border-top: 2px solid #e5e7eb !important;
          }
          
          .chatbot-input {
            padding: 16px 20px !important;
            font-size: 16px !important;
            border-radius: 25px !important;
            line-height: 1.4 !important;
            min-height: 24px !important;
          }
          
          .chatbot-send-btn {
            min-width: 56px !important;
            height: 56px !important;
            border-radius: 28px !important;
            margin-left: 8px !important;
          }
          
          /* CONTRÔLES MOBILE */
          .chatbot-controls {
            padding: 12px !important;
            flex-wrap: wrap !important;
            gap: 8px !important;
            background: #f9fafb !important;
          }
          
          .chatbot-model-select {
            max-width: 180px !important;
            font-size: 14px !important;
            padding: 8px 12px !important;
          }
          
          /* MESSAGES MOBILE */
          .message-bubble {
            max-width: 85% !important;
            font-size: 15px !important;
            line-height: 1.5 !important;
            padding: 12px 16px !important;
          }
          
          /* HEADER MOBILE */
          .chatbot-header {
            padding: 16px 12px !important;
            background: linear-gradient(135deg, #3b82f6 0%, #10b981 100%) !important;
          }
          
          /* HEADER MINIMISÉ MOBILE - occupe toute la hauteur */
          .chatbot-modal-minimized .chatbot-header {
            padding: 12px 16px !important;
            border-radius: 12px !important;
            height: 60px !important;
            box-sizing: border-box !important;
          }
          
          /* TYPING INDICATOR MOBILE */
          .typing-indicator {
            padding: 12px 16px !important;
          }
          
          /* SCROLLBAR MOBILE */
          .chatbot-messages-container::-webkit-scrollbar {
            width: 4px !important;
          }
          
          .chatbot-messages-container::-webkit-scrollbar-thumb {
            background: #cbd5e1 !important;
            border-radius: 2px !important;
          }
          
          /* KEYBOARD ADAPTATION */
          .chatbot-modal.keyboard-open {
            height: calc(50vh - 60px) !important;
          }
          
          .chatbot-modal.keyboard-open .chatbot-messages-container {
            height: calc(50vh - 220px) !important;
          }
          
          /* TOUCH TARGETS */
          button {
            min-height: 44px !important;
            min-width: 44px !important;
          }
          
          /* FOCUS MOBILE */
          .chatbot-input:focus {
            outline: 2px solid #3b82f6 !important;
            outline-offset: 2px !important;
          }
        }
        
        /* === TRÈS PETIT MOBILE === */
        @media (max-width: 480px) {
          .chatbot-modal {
            top: 60px !important;
            height: calc(100vh - 60px) !important;
          }
          
          .chatbot-modal-minimized {
            bottom: 70px !important;
            width: calc(100vw - 20px) !important;
          }
          
          .chatbot-messages-container {
            height: calc(100vh - 220px) !important;
          }
          
          .chatbot-fab-btn {
            width: 52px !important;
            height: 52px !important;
            bottom: 16px !important;
            right: 16px !important;
          }
          
          .chatbot-fab-menu-items {
            bottom: 75px !important;
            right: 16px !important;
          }
          
          /* OPTIMISATIONS TRÈS PETIT MOBILE */
          .chatbot-input {
            font-size: 16px !important;
            padding: 14px 18px !important;
          }
          
          .chatbot-send-btn {
            min-width: 50px !important;
            height: 50px !important;
            border-radius: 25px !important;
          }
          
          .message-bubble {
            font-size: 14px !important;
            padding: 10px 14px !important;
          }
          
          .chatbot-controls {
            padding: 10px !important;
          }
          
          .chatbot-model-select {
            font-size: 12px !important;
            max-width: 140px !important;
          }
        }
        
        /* === ANIMATIONS === */
        .chatbot-modal {
          animation: slideUpSmooth 0.3s ease-out;
        }
        .chatbot-modal-minimized {
          animation: slideUpSmooth 0.3s ease-out;
        }
        @keyframes slideUpSmooth {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .message-bubble {
          animation: fadeInMessage 0.3s ease-out;
        }
        @keyframes fadeInMessage {
          from { opacity: 0; transform: translateY(8px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .typing-indicator {
          animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
          0%, 100% { opacity: 0.7; }
          50% { opacity: 1; }
        }
        
        /* === ANIMATIONS D'AGRANDISSEMENT DES ICÔNES === */
        .icon-enlarge {
          animation: iconEnlarge 0.3s ease-out;
        }
        @keyframes iconEnlarge {
          0% { transform: scale(1); }
          50% { transform: scale(1.2); }
          100% { transform: scale(1.1); }
        }
        
        .icon-shrink {
          animation: iconShrink 0.3s ease-out;
        }
        @keyframes iconShrink {
          0% { transform: scale(1.1); }
          100% { transform: scale(1); }
        }
        
        /* === DARK MODE === */
        .dark ::-webkit-scrollbar-thumb {
          background: #374151;
        }
        
        @media (max-width: 768px) {
          .dark .chatbot-modal {
            background: #111827 !important;
          }
          
          .dark .chatbot-input-container {
            background: #1f2937 !important;
            border-top-color: #374151 !important;
          }
          
          .dark .chatbot-controls {
            background: #1f2937 !important;
          }
        }
        
        /* === CORRECTION POUR MODE MINIMISÉ === */
        .chatbot-modal-minimized {
          height: 60px !important;
          overflow: hidden !important;
        }

        .chatbot-modal-minimized .chatbot-header {
          border-radius: 12px !important;
          height: 100% !important;
          padding: 0 16px !important;
        }

        /* Masquer tout sauf le header en mode minimisé */
        .chatbot-modal-minimized > :not(.chatbot-header) {
          display: none !important;
        }

        /* Optimisation mobile pour le header minimisé */
        @media (max-width: 768px) {
          .chatbot-modal-minimized {
            width: calc(100% - 40px) !important;
            left: 20px !important;
            right: 20px !important;
            bottom: 20px !important;
          }
          
          .chatbot-modal-minimized .chatbot-header {
            border-radius: 30px !important;
          }
        }
      `}),i.jsxs("div",{className:"chatbot-fab-menu",children:[i.jsxs("button",{"aria-label":"Ouvrir le menu StudyMarket",onClick:()=>{be("main"),l(de=>!de)},className:`chatbot-fab-btn fixed bottom-6 right-6 z-50 shadow-lg rounded-full p-0 w-16 h-16 flex items-center justify-center transition-all duration-300 focus:outline-none bg-gradient-to-br from-blue-600 to-green-500 hover:from-blue-700 hover:to-green-600 hover:scale-105 ${O==="main"?"scale-110 shadow-2xl z-10":""}`,children:[i.jsx("svg",{className:`text-white transition-all duration-300 ${O==="main"?"w-8 h-8":"w-7 h-7"}`,fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})}),G.loading&&i.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-ping"})]}),i.jsxs("div",{className:`fixed bottom-28 right-6 z-50 flex flex-col items-end gap-4 transition-all duration-300 chatbot-fab-menu-items ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"}`,style:{transform:"translateX(-10px)"},children:[i.jsx("div",{onClick:()=>{be("email"),Z()},className:`cursor-pointer transition-all duration-300 hover:scale-110 ${O==="email"?"scale-125":""}`,title:"Contacter par email",children:i.jsx(tO,{size:"small",className:`transition-all duration-300 ${O==="email"?"scale-110":""}`})}),i.jsx("div",{onClick:()=>{be("bot"),ce()},className:`cursor-pointer transition-all duration-300 hover:scale-110 ${O==="bot"?"scale-125":""}`,title:"Assistant IA",children:i.jsx(eO,{size:"small",className:`transition-all duration-300 ${O==="bot"?"scale-110":""}`})})]})]}),n&&i.jsxs("div",{className:`chatbot-modal fixed bottom-24 right-6 z-50 w-96 max-w-[90vw] bg-white dark:bg-gray-900 rounded-xl shadow-2xl flex flex-col overflow-hidden ${s?"chatbot-modal-minimized":""} ${m?"keyboard-open":""}`,style:{maxHeight:s?"60px":"75vh"},onTouchStart:J,onTouchMove:ee,onTouchEnd:K,children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-green-500 text-white rounded-t-xl chatbot-header",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 bg-white/20 dark:bg-gray-700 rounded-full flex items-center justify-center text-white",children:i.jsx(eO,{})}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-sm dark:text-blue-100",children:"Assistant IA"}),i.jsx("div",{className:"text-xs text-blue-100 dark:text-blue-300",children:"• En ligne"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:s?ke:ve,className:"text-white/80 hover:text-white p-2 transition-colors focus:outline-none",title:s?"Agrandir":"Réduire",style:{border:"none",outline:"none",boxShadow:"none",background:"transparent"},children:s?i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M8 3v3a2 2 0 01-2 2H3m18 0h-3a2 2 0 01-2-2V3m0 18v-3a2 2 0 012-2h3M3 16h3a2 2 0 012 2v3"})}):i.jsx("span",{className:"text-lg font-bold",children:"−"})}),i.jsx("button",{onClick:()=>r(!1),className:"text-white/80 hover:text-white p-2 transition-colors focus:outline-none",title:"Fermer",style:{border:"none",outline:"none",boxShadow:"none",background:"transparent"},children:i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})]}),!s&&i.jsx(i.Fragment,{children:S?i.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-3 bg-gray-50 dark:bg-gray-800",children:i.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-6 shadow-sm",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[i.jsx(tO,{}),"Contactez-nous"]}),V?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(k1e,{className:"w-12 h-12 text-green-600"})}),i.jsx("h4",{className:"text-lg font-semibold text-green-600 dark:text-green-400 mb-2",children:"Message envoyé !"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Nous vous répondrons dans les plus brefs délais."})]}):i.jsxs("form",{onSubmit:re,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contact-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nom complet *"}),i.jsx("input",{type:"text",id:"contact-name",value:R.name,onChange:de=>_e("name",de.target.value),required:!0,className:"w-full px-3 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Votre nom complet"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contact-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),i.jsx("input",{type:"email",id:"contact-email",value:R.email,onChange:de=>_e("email",de.target.value),required:!0,className:"w-full px-3 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"votre.email@exemple.com"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contact-subject",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sujet *"}),i.jsx("input",{type:"text",id:"contact-subject",value:R.subject,onChange:de=>_e("subject",de.target.value),required:!0,className:"w-full px-3 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Sujet de votre message"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contact-message",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Message *"}),i.jsx("textarea",{id:"contact-message",value:R.message,onChange:de=>_e("message",de.target.value),required:!0,rows:4,className:"w-full px-3 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",placeholder:"Décrivez votre demande..."})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>C(!1),className:"flex-1 px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Annuler"}),i.jsx("button",{type:"submit",disabled:k,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center",children:k?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-10 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):"Envoyer"})]})]})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800 flex items-center justify-between chatbot-controls",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Modèle IA : DeepSeek"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[G.error&&i.jsx("button",{onClick:ae,className:"text-xs px-2 py-1 bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300 rounded hover:bg-orange-200 dark:hover:bg-orange-800",title:"Réessayer",children:"🔄"}),i.jsx("button",{onClick:ie,className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"Nouveau chat",children:"🗑️"})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-3 bg-gray-50 dark:bg-gray-800 chatbot-messages-container",style:{maxHeight:"50vh"},children:[G.messages.map((de,H)=>i.jsx("div",{className:`flex ${de.role==="user"?"justify-end":"justify-start"} message-bubble`,children:i.jsxs("div",{className:`rounded-lg px-3 py-2 text-sm message-bubble ${de.role==="user"?"bg-blue-600 text-white max-w-[85%]":"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 shadow-sm max-w-[90%]"}`,children:[i.jsx("div",{dangerouslySetInnerHTML:{__html:Ee(de.content)},style:{textAlign:"left"}}),de.timestamp&&i.jsx("div",{className:`text-xs mt-1 ${de.role==="user"?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:new Date(de.timestamp).toLocaleTimeString()})]})},H)),G.loading&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-lg px-3 py-2 shadow-sm typing-indicator",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Réflexion..."})]})})}),i.jsx("div",{ref:M})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-900 chatbot-input-container",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{ref:B,type:"text",value:u,onChange:de=>d(de.target.value),onKeyDown:ne,placeholder:"Pose ta question...",className:"w-full px-4 py-3 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none chatbot-input",disabled:G.loading,maxLength:500}),i.jsx("button",{onClick:Ce,disabled:G.loading||!u.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors disabled:cursor-not-allowed chatbot-send-btn flex items-center justify-center",children:i.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),i.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsxs("span",{children:[u.length,"/500"]}),u.length>450&&i.jsx("span",{className:"text-orange-500",children:"⚠️"})]}),i.jsx("span",{className:"hidden sm:inline",children:"Entrée pour envoyer"}),i.jsx("span",{className:"sm:hidden",children:"Entrée ↵"})]})]})]})})]})]})};function H1e({children:t}){const[e,n]=oe.useState(null);return oe.useEffect(()=>{const r=s=>{n(s.error||new Error(s.message))};return window.addEventListener("error",r),()=>window.removeEventListener("error",r)},[]),e?i.jsxs("div",{style:{color:"red",padding:"2rem",textAlign:"center"},children:["Une erreur est survenue : ",e.message]}):i.jsx(i.Fragment,{children:t})}function q1e(){return i.jsx(oW,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:i.jsx(uX,{children:i.jsxs(eW,{children:[i.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[i.jsx(gie,{}),i.jsx("main",{className:"flex-1 pt-16 mobile-stable",children:i.jsx(H1e,{children:i.jsxs(qB,{children:[i.jsx(wn,{path:"/",element:i.jsx(Aoe,{})}),i.jsx(wn,{path:"/listings",element:i.jsx(vle,{})}),i.jsx(wn,{path:"/listing/:id",element:i.jsx(wde,{})}),i.jsx(wn,{path:"/auth",element:i.jsx(yme,{})}),i.jsx(wn,{path:"/help",element:i.jsx($fe,{})}),i.jsx(wn,{path:"/safety",element:i.jsx(Bfe,{})}),i.jsx(wn,{path:"/cart",element:i.jsx(xme,{})}),i.jsx(wn,{path:"/products",element:i.jsx(Ime,{})}),i.jsx(wn,{path:"/checkout/success",element:i.jsx(Ame,{})}),i.jsx(wn,{path:"/checkout",element:i.jsx(zi,{children:i.jsx(Nme,{})})}),i.jsx(wn,{path:"/orders",element:i.jsx(zi,{children:i.jsx(Sme,{})})}),i.jsx(wn,{path:"/order-confirmation/:orderId",element:i.jsx(zi,{children:i.jsx(Eme,{})})}),i.jsx(wn,{path:"/create",element:i.jsx(zi,{children:i.jsx(zhe,{})})}),i.jsx(wn,{path:"/profile",element:i.jsx(zi,{children:i.jsx(Hhe,{})})}),i.jsx(wn,{path:"/settings",element:i.jsx(zi,{children:i.jsx(nfe,{})})}),i.jsx(wn,{path:"/impact",element:i.jsx(zi,{children:i.jsx(dfe,{})})}),i.jsx(wn,{path:"/saved-searches",element:i.jsx(zi,{children:i.jsx(ffe,{})})}),i.jsx(wn,{path:"/favorites",element:i.jsx(zi,{children:i.jsx(gfe,{})})}),i.jsx(wn,{path:"/payments",element:i.jsx(zi,{children:i.jsx(vfe,{})})}),i.jsx(wn,{path:"/messages",element:i.jsx(zi,{children:i.jsx(rme,{})})}),i.jsx(wn,{path:"/edit-listing/:id",element:i.jsx(Dme,{})}),i.jsx(wn,{path:"/jobs",element:i.jsx(npe,{})}),i.jsx(wn,{path:"/housing",element:i.jsx(T1e,{})}),i.jsx(wn,{path:"*",element:i.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Page non trouvée (404)"})})]})})}),i.jsx(yie,{}),i.jsx(W1e,{})]}),i.jsx(tH,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"1px solid hsl(var(--border))"}}})]})})})}vM(document.getElementById("root")).render(i.jsx(w.StrictMode,{children:i.jsx(q1e,{})}));
